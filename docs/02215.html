<html>
<head>
<title>Combining Back-End and Front-End with NodeJs and ReactJs-SignUp(Part 5)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用NodeJs和ReactJs-SignUp组合后端和前端(第5部分)</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/combining-back-end-and-front-end-with-nodejs-and-reactjs-signup-part-5-e9d0797aeedf?source=collection_archive---------12-----------------------#2021-05-07">https://medium.com/geekculture/combining-back-end-and-front-end-with-nodejs-and-reactjs-signup-part-5-e9d0797aeedf?source=collection_archive---------12-----------------------#2021-05-07</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/165248743a95d67d53962f7f52468ea7.png" data-original-src="https://miro.medium.com/v2/resize:fit:950/0*RiA9GZI2ZYXk2CHN"/></div></figure><p id="f34f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">当我开始后端编码时，我的主要问题是结合后端和前端。在这篇文章中，我将写这个问题。为此，我将使用我以前的代码与注册代码的小变化。你可以在链接中阅读我以前的文章:</p><p id="59dc" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">注册/登录应用程序(第一部分):<a class="ae jk" rel="noopener" href="/nerd-for-tech/signup-login-application-with-nodejs-express-and-mongodb-658498e580cf">https://medium . com/nerd-for-tech/sign up-log in-Application-with-nodejs-express-and-MongoDB-658498 e 580 cf</a></p><p id="cf0b" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">注销(第二部分):<a class="ae jk" rel="noopener" href="/nerd-for-tech/logout-with-nodejs-express-and-mongodb-9b73e8b01137">https://medium . com/nerd-for-tech/logout-with-nodejs-express-and-MongoDB-9b 73 E8 b 01137</a></p><p id="f62b" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">邮件验证(第三部分):<a class="ae jk" rel="noopener" href="/nerd-for-tech/email-verification-with-nodejs-part-3-e004787391e3">https://medium . com/nerd-for-tech/email-Verification-with-nodejs-Part-3-e 004787391 e 3</a></p><p id="6553" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">忘记密码(第四部分):<a class="ae jk" rel="noopener" href="/nerd-for-tech/forgot-password-in-signup-application-with-nodejs-and-mongodb-part-4-51378dddd716">https://medium . com/nerd-for-tech/forget-Password-in-sign up-application-with-nodejs-and-MongoDB-Part-4-51378 dddd 716</a></p><p id="eb45" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">对于这篇文章，我们需要网站的前端代码。我没有写这些代码，所以我将分享注册和登录页面，使用它们并向你展示结果。开始吧！</p><p id="5137" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">首先，我们需要一个名为注册的功能，作为回报，我们将编写HTML代码。他们在这里:</p><pre class="jl jm jn jo fd jp jq jr js aw jt bi"><span id="a076" class="ju jv hi jq b fi jw jx l jy jz">export function SignUp(){</span><span id="0922" class="ju jv hi jq b fi ka jx l jy jz"><br/>&lt;div className="wrapper1"&gt;<br/>&lt;div className="form-wrapper"&gt;<br/>&lt;form &gt;</span><span id="216d" class="ju jv hi jq b fi ka jx l jy jz">&lt;div className="firstName"&gt;</span><span id="cc9e" class="ju jv hi jq b fi ka jx l jy jz">&lt;label  htmlFor="firstName"&gt;&lt;/label&gt;</span><span id="e43f" class="ju jv hi jq b fi ka jx l jy jz">&lt;input</span><span id="d1df" class="ju jv hi jq b fi ka jx l jy jz">type="text"</span><span id="e165" class="ju jv hi jq b fi ka jx l jy jz">className=""</span><span id="bd7c" class="ju jv hi jq b fi ka jx l jy jz">placeholder="Name"</span><span id="015b" class="ju jv hi jq b fi ka jx l jy jz">type="text"</span><span id="7df9" class="ju jv hi jq b fi ka jx l jy jz">name="name"</span><span id="f7d5" class="ju jv hi jq b fi ka jx l jy jz">/&gt;</span><span id="ced9" class="ju jv hi jq b fi ka jx l jy jz">&lt;/div&gt;</span><span id="4638" class="ju jv hi jq b fi ka jx l jy jz">&lt;div className="email"&gt;</span><span id="bd34" class="ju jv hi jq b fi ka jx l jy jz">&lt;label   htmlFor="email"&gt;&lt;/label&gt;</span><span id="8056" class="ju jv hi jq b fi ka jx l jy jz">&lt;input</span><span id="3f6d" class="ju jv hi jq b fi ka jx l jy jz">type="text"</span><span id="6ac2" class="ju jv hi jq b fi ka jx l jy jz">className=""</span><span id="6e6a" class="ju jv hi jq b fi ka jx l jy jz">placeholder="E-mail"</span><span id="1d63" class="ju jv hi jq b fi ka jx l jy jz">type="email"</span><span id="ad87" class="ju jv hi jq b fi ka jx l jy jz">name="email"</span><span id="4221" class="ju jv hi jq b fi ka jx l jy jz">/&gt;</span><span id="ea59" class="ju jv hi jq b fi ka jx l jy jz">&lt;/div&gt;</span><span id="8ba3" class="ju jv hi jq b fi ka jx l jy jz">&lt;div className="password"&gt;</span><span id="afda" class="ju jv hi jq b fi ka jx l jy jz">&lt;label  htmlFor="password"&gt;&lt;/label&gt;</span><span id="ed3e" class="ju jv hi jq b fi ka jx l jy jz">&lt;input</span><span id="19fa" class="ju jv hi jq b fi ka jx l jy jz">type="text"</span><span id="d626" class="ju jv hi jq b fi ka jx l jy jz">className=""</span><span id="4e9c" class="ju jv hi jq b fi ka jx l jy jz">placeholder="Password"</span><span id="6c9e" class="ju jv hi jq b fi ka jx l jy jz">type="password"</span><span id="37f0" class="ju jv hi jq b fi ka jx l jy jz">name="password"</span><span id="ddbb" class="ju jv hi jq b fi ka jx l jy jz">/&gt;</span><span id="f335" class="ju jv hi jq b fi ka jx l jy jz">&lt;/div&gt;</span><span id="cc67" class="ju jv hi jq b fi ka jx l jy jz">&lt;button onClick={signUp}</span><span id="2398" class="ju jv hi jq b fi ka jx l jy jz">value = "Submit"&gt;</span><span id="5f5f" class="ju jv hi jq b fi ka jx l jy jz">SignUp</span><span id="f96f" class="ju jv hi jq b fi ka jx l jy jz">&lt;/button&gt;</span><span id="a463" class="ju jv hi jq b fi ka jx l jy jz">&lt;Link to="/login" &gt;</span><span id="663b" class="ju jv hi jq b fi ka jx l jy jz">{"Have an account?"}</span><span id="51db" class="ju jv hi jq b fi ka jx l jy jz">&lt;/Link&gt;</span><span id="a0ed" class="ju jv hi jq b fi ka jx l jy jz">&lt;/form&gt;</span><span id="f469" class="ju jv hi jq b fi ka jx l jy jz">&lt;/div&gt;</span><span id="5456" class="ju jv hi jq b fi ka jx l jy jz">&lt;/div&gt;</span><span id="79fb" class="ju jv hi jq b fi ka jx l jy jz">}</span></pre><p id="f9d5" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">很基础但是很有用。使用一些CSS，我们的注册页面看起来像这样:</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="kc kd di ke bf kf"><div class="er es kb"><img src="../Images/9f57916fc53a709473e6f64732af68fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hrpsLabcxit5oc2jy1QsVw.png"/></div></div></figure><p id="b2d1" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在在主要部分，我们将像这样使用状态:</p><pre class="jl jm jn jo fd jp jq jr js aw jt bi"><span id="0ecf" class="ju jv hi jq b fi jw jx l jy jz">const [name, setName] = useState("")</span><span id="1542" class="ju jv hi jq b fi ka jx l jy jz">const [email, setEmail] = useState("")</span><span id="06b3" class="ju jv hi jq b fi ka jx l jy jz">const [password, setPassword] = useState("")</span></pre><p id="3c8b" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我们将在函数注册中创建一个异步函数，名为SignUp。这是最重要的部分，我们将在按钮中使用它。</p><p id="cd31" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在这个函数中，我们将创建一个带字母的变量，并使其等于{name，email，password}并将它们写入控制台，只是为了尝试。然后另一个变量结果。我们将使用fetch向数据库发送数据。为此，我们需要一个链接来连接数据库，并前往注册部分。如果你看了我以前的文章用了，这个链接就像“http://localhost:5000/signup”。这些是关于后端的路线。在获取中，我们有3个部分:</p><pre class="jl jm jn jo fd jp jq jr js aw jt bi"><span id="bf0d" class="ju jv hi jq b fi jw jx l jy jz">method: "POST",</span><span id="f74b" class="ju jv hi jq b fi ka jx l jy jz">body:JSON.stringify(item),</span><span id="d0fd" class="ju jv hi jq b fi ka jx l jy jz">headers: {</span><span id="d22a" class="ju jv hi jq b fi ka jx l jy jz">"Content-Type":"application/json",</span><span id="681e" class="ju jv hi jq b fi ka jx l jy jz">"Accept":"application/json"</span></pre><p id="73c0" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">结果变量如下所示:，</p><pre class="jl jm jn jo fd jp jq jr js aw jt bi"><span id="e104" class="ju jv hi jq b fi jw jx l jy jz">let result = await fetch("http://localhost:5000/signup",</span><span id="ecdc" class="ju jv hi jq b fi ka jx l jy jz">{</span><span id="08cb" class="ju jv hi jq b fi ka jx l jy jz">method: "POST",</span><span id="0098" class="ju jv hi jq b fi ka jx l jy jz">body:JSON.stringify(item),</span><span id="011d" class="ju jv hi jq b fi ka jx l jy jz">headers: {</span><span id="2eff" class="ju jv hi jq b fi ka jx l jy jz">"Content-Type":"application/json",</span><span id="7124" class="ju jv hi jq b fi ka jx l jy jz">"Accept":"application/json"</span><span id="6190" class="ju jv hi jq b fi ka jx l jy jz">}</span><span id="8c7e" class="ju jv hi jq b fi ka jx l jy jz">}).then(history.push("/"))</span><span id="bf00" class="ju jv hi jq b fi ka jx l jy jz">result = await result.json()</span></pre><p id="73f3" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">可以看到history . push(“/”)。这是用于现在去主页。当本教程结束时，它将转到另一个文件。</p><p id="36ae" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">之后，我们会将结果写入控制台进行检查。</p><p id="1634" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在，我们将在返回部分使用它。为此，在第一次输入时，我们将编写onChange并等于:</p><pre class="jl jm jn jo fd jp jq jr js aw jt bi"><span id="cb7d" class="ju jv hi jq b fi jw jx l jy jz">onChange = {(e) =&gt; setName(e.target.value)}</span></pre><p id="3b28" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这会将输入设置为名称。同样，我们将在其他输入中使用setEmail和setPassword。</p><p id="139f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在这些之后，我们将回到第一个输入，并写:</p><pre class="jl jm jn jo fd jp jq jr js aw jt bi"><span id="57e0" class="ju jv hi jq b fi jw jx l jy jz">value = {name}</span></pre><p id="b556" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我们将编写类似这样的其他输入，然后转到按钮。在按钮中，当我们点击它时，我们想使用信号功能。为此，我们将写:</p><pre class="jl jm jn jo fd jp jq jr js aw jt bi"><span id="91a8" class="ju jv hi jq b fi jw jx l jy jz">onClick={signUp}</span></pre><p id="efc2" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">就是这样。现在，我的代码正在发送电子邮件进行验证。但是我会像这样更改controllers/auth.js中的注册函数:</p><pre class="jl jm jn jo fd jp jq jr js aw jt bi"><span id="0e66" class="ju jv hi jq b fi jw jx l jy jz">const { name, email, password, point, randomCode } = req.body;</span><span id="7dcd" class="ju jv hi jq b fi ka jx l jy jz">const user = await User.create({</span><span id="f3f1" class="ju jv hi jq b fi ka jx l jy jz">name,</span><span id="b7cc" class="ju jv hi jq b fi ka jx l jy jz">email,</span><span id="67db" class="ju jv hi jq b fi ka jx l jy jz">password,</span><span id="0c41" class="ju jv hi jq b fi ka jx l jy jz">point,</span><span id="5b56" class="ju jv hi jq b fi ka jx l jy jz">randomCode</span><span id="1eb0" class="ju jv hi jq b fi ka jx l jy jz">})</span><span id="18a7" class="ju jv hi jq b fi ka jx l jy jz">const id = user.getId();</span><span id="efce" class="ju jv hi jq b fi ka jx l jy jz">sendTokenResponse(user, 200, res, id);</span></pre><p id="0e96" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在，我们需要保存所有的更改，用npm运行开发运行后端部分，用npm启动运行前端部分。</p><p id="c269" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">当我们在表格中写下信息并进入MongoDB Compass时，我们将会看到我们写下的记录。</p><p id="9d4b" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">原来如此！现在，您可以创建您的全栈项目的注册部分。在下一篇文章中，我们将继续讨论登录部分。感谢阅读！</p><p id="2ebe" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">注意:在后端，我们将使用端口:5000，但在前端，我们将使用端口:3000。他们是不同的，一开始我认为他们需要相同，但那不是真的！</p></div></div>    
</body>
</html>