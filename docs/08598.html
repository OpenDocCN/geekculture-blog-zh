<html>
<head>
<title>How to get an A+ Security Grade For Your Website on Mozilla Observatory (Part 1 — Netlify)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何让你的网站在Mozilla Observatory上获得A+安全等级(第1部分——Netlify)</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/how-i-got-an-a-security-grade-on-mozilla-observatory-part-1-netlify-c36729c4a344?source=collection_archive---------18-----------------------#2021-11-07">https://medium.com/geekculture/how-i-got-an-a-security-grade-on-mozilla-observatory-part-1-netlify-c36729c4a344?source=collection_archive---------18-----------------------#2021-11-07</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/73c66f7737db462d47a24ee0b7c35dab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u9z5nndgbOdqlGnHomG0Iw.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">FormBlob’s Mozilla Observatory Grades</figcaption></figure><p id="8649" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在用Hugo重写了FormBlob网站之后，我想确保该网站遵守安全最佳实践，并且不容易受到任何已知问题的攻击。我开始寻找一种网站安全措施，并找到了Mozilla Observatory。在我的第一次扫描中，我得到了C级。虽然不是特别糟糕，但我想纠正发现的任何缺陷，以尽可能取得最好的成绩。这也是一个学习更多网站安全知识的机会。</p><h1 id="35cf" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">那么什么是Mozilla天文台呢？</h1><p id="0095" class="pw-post-body-paragraph iu iv hi iw b ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr hb bi translated">以下引文直接摘自https://observatory.mozilla.org/faq的常见问题。</p><blockquote class="kw kx ky"><p id="3c10" class="iu iv kz iw b ix iy iz ja jb jc jd je la jg jh ji lb jk jl jm lc jo jp jq jr hb bi translated">观察站测试针对跨站点脚本攻击、中间人攻击、跨域信息泄漏、cookie泄露、内容传递网络泄露和不正确颁发证书的预防措施。<br/> <br/>但是，它不测试过时的软件版本、SQL注入漏洞、易受攻击的内容管理系统插件、不正确的密码创建策略或存储程序等。这些和天文台测试的内容一样重要，网站运营商不应该仅仅因为它们在天文台的得分高而忽视它们。</p></blockquote><p id="b977" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">虽然听起来可能有点拗口，但这些测试在很大程度上衡量了您的网站对于一些最常见的恶意攻击的脆弱性，这些攻击利用了网站开发人员在设置安全网络配置方面的疏忽。</p><h1 id="60e0" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">FormBlob设置</h1><p id="0e87" class="pw-post-body-paragraph iu iv hi iw b ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr hb bi translated">我将这篇文章中的讨论分成两部分——一部分是关于https://formblob.com的<a class="ae kv" href="https://formblob.com" rel="noopener ugc nofollow" target="_blank"/>，另一部分是关于https://build.formblob.com的<a class="ae kv" href="https://build.formblob.com" rel="noopener ugc nofollow" target="_blank"/>。这是因为主站点是一个使用Hugo构建并部署在Netlify上的静态站点，而表单构建器站点是一个部署在AWS ECS上的React应用程序，位于弹性负载平衡器(ELB)之后。</p><p id="24ef" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这是文章的第一部分，讨论如何建立网络生活以获得A+的成绩。对于讨论如何在ELB后面设置Nginx的第二部分，<a class="ae kv" href="https://formblob.com/resources/how-i-got-an-a-security-grade-on-mozilla-observatory-nginx" rel="noopener ugc nofollow" target="_blank">点击这里</a>。</p><h1 id="9457" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">入门指南</h1><p id="b045" class="pw-post-body-paragraph iu iv hi iw b ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr hb bi translated">为了提高Mozilla Observatory扫描的分数，您需要添加HTTP响应头。在Netlify上部署时，有两种方法可以设置HTTP响应头。第一种是使用根目录中的netlify.toml文件。这是您设置任何其他网络部署配置的同一文件。如果您使用netlify.toml配置文件来设置头，下面是语法。</p><pre class="ld le lf lg fd lh li lj lk aw ll bi"><span id="ade0" class="lm jt hi li b fi ln lo l lp lq">[[headers]]<br/>for = “/*”<br/>  [headers.values]<br/>  X-Frame-Options = “DENY”<br/>  X-XSS-Protection = “1; mode=block”</span></pre><p id="e8e9" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">或者，您可以在您的公共文件夹中使用_headers文件，Netlify将在部署时自动选取该文件。在我的例子中，Hugo的静态文件夹中的文件将被发布，所以我在`/static '中创建了_headers文件。下面是_headers文件的语法。</p><pre class="ld le lf lg fd lh li lj lk aw ll bi"><span id="67e4" class="lm jt hi li b fi ln lo l lp lq">/*<br/> X-Frame-Options: DENY<br/> X-XSS-Protection: 1; mode=block</span></pre><p id="52eb" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在这里，我将使用_headers文件来说明如何设置FormBlob的HTTP响应头以获得A+等级。</p><h1 id="5199" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">考试成绩</h1><p id="e7dc" class="pw-post-body-paragraph iu iv hi iw b ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr hb bi translated">Mozilla Observatory根据一组预定义的测试对您的网站进行评分。让我们逐个检查每个测试。</p><figure class="ld le lf lg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lr"><img src="../Images/78c47fa233150f5825bf93a76ffbcc96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eMx-veUtaOSzsfIAKrcV0Q.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Mozilla Observatory Test Scores</figcaption></figure><h2 id="7d73" class="lm jt hi bd ju ls lt lu jy lv lw lx kc jf ly lz kg jj ma mb kk jn mc md ko me bi translated">内容安全政策</h2><p id="58a9" class="pw-post-body-paragraph iu iv hi iw b ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr hb bi translated">内容安全策略(CSP)使您能够精确控制哪些资源可以加载到您的网站上，以及允许从哪里加载这些资源。它旨在保护您的网站免受跨站脚本(XSS)漏洞。XSS漏洞源于不安全的内嵌Javascript，禁用该漏洞可有效消除大多数XSS攻击。然而，禁用不安全的内联也意味着所有的Javascript都必须从<code class="du mf mg mh li b">&lt;script src=""&gt;</code>标签加载。在<code class="du mf mg mh li b">&lt;script&gt;</code>标签中但没有通过<code class="du mf mg mh li b">src</code>加载的Javascript将无法执行。</p><p id="71af" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">配置CSP是一个繁琐的过程，需要您评估网站上加载的所有脚本和样式的来源。在我们深入研究每个策略之前，先看一下我在FormBlob上部署的完整CSP。请注意，为了便于阅读，我将每个指令都拆分到了单独的一行。部署时，整个CSP必须在一行中。</p><pre class="ld le lf lg fd lh li lj lk aw ll bi"><span id="0682" class="lm jt hi li b fi ln lo l lp lq">/*<br/> # Configure CSP<br/> Content-Security-Policy:<br/> default-src ‘self’ cloudfront.net *.cloudfront.net *.formblob.com fblob.me *.fblob.me;<br/> font-src ‘self’ <a class="ae kv" href="https://fonts.gstatic.com" rel="noopener ugc nofollow" target="_blank">https://fonts.gstatic.com</a> data:;<br/> img-src https: data: blob: <a class="ae kv" href="http://www.googletagmanager.com" rel="noopener ugc nofollow" target="_blank">www.googletagmanager.com</a> <a class="ae kv" href="https://ssl.gstatic.com" rel="noopener ugc nofollow" target="_blank">https://ssl.gstatic.com</a> <a class="ae kv" href="https://www.gstatic.com" rel="noopener ugc nofollow" target="_blank">https://www.gstatic.com</a>;<br/> media-src https: data: blob:;<br/> script-src ‘self’ ‘unsafe-eval’ <a class="ae kv" href="https://www.googletagmanager.com" rel="noopener ugc nofollow" target="_blank">https://www.googletagmanager.com</a> <a class="ae kv" href="https://tagmanager.google.com" rel="noopener ugc nofollow" target="_blank">https://tagmanager.google.com</a> <a class="ae kv" href="https://unpkg.com" rel="noopener ugc nofollow" target="_blank">https://unpkg.com</a> cloudfront.net *.cloudfront.net js.stripe.com ‘sha256-dyRKDTw6FBqVppfObkFviVwYe/aFYzGE9kpTdbXngk4=’;<br/> style-src ‘self’ ‘unsafe-inline’ fonts.googleapis.com <a class="ae kv" href="https://tagmanager.google.com" rel="noopener ugc nofollow" target="_blank">https://tagmanager.google.com</a>;<br/> frame-src ‘self’ *.formblob.com fblob.me *.fblob.me js.stripe.com <a class="ae kv" href="http://www.youtube.com" rel="noopener ugc nofollow" target="_blank">www.youtube.com</a> codesandbox.io;<br/> frame-ancestors ‘self’;<br/> upgrade-insecure-requests;</span></pre><p id="a571" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我使用了与FormBlob相关的完整指令列表的子集。在这里，我将只讨论这些指令和其他一些常见的指令。你可以在这里阅读更多关于<a class="ae kv" href="https://developers.google.com/web/fundamentals/security/csp" rel="noopener ugc nofollow" target="_blank">指令的完整列表。此外，作为开始，我建议使用标题<code class="du mf mg mh li b">Content-Security-Policy-Report-Only</code>而不是<code class="du mf mg mh li b">Content-Security-Policy</code>来获得所有违规的报告，而不会破坏您的网站。</a></p><p id="2cfa" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">- <code class="du mf mg mh li b"><a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/default-src" rel="noopener ugc nofollow" target="_blank">default-src</a></code>是其他获取指令的回退指令。被指定的指令没有继承，而没有被指定的指令将回退到<code class="du mf mg mh li b">default-src</code>的值。这里，您想要包含<code class="du mf mg mh li b">'self’</code>(具有相同方案和端口的源站点)和其他受信任的域。我包括cloudfront.net，因为这是Netlify提供资源的CDN。对此的推荐设置是<code class="du mf mg mh li b">none</code>，这将要求您几乎每隔一个指令设置一次。</p><p id="f3a4" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">- <code class="du mf mg mh li b"><a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/connect-src" rel="noopener ugc nofollow" target="_blank">connect-src</a></code>提供对获取请求、XHR、事件源、信标和websockets连接的控制。这定义了您需要连接的任何资源。对于websocket连接，您必须设置相关的方案。比如wss://\*.formblob.com。</p><p id="f6c5" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">- <code class="du mf mg mh li b"><a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/font-src" rel="noopener ugc nofollow" target="_blank">font-src</a></code>指定从哪个URL加载字体。如果你使用谷歌字体，这个指令应该包括`<a class="ae kv" href="https://fonts.gstatic.com" rel="noopener ugc nofollow" target="_blank">https://fonts.gstatic.com</a>数据:`。</p><p id="ee20" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">- <code class="du mf mg mh li b"><a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/img-src" rel="noopener ugc nofollow" target="_blank">img-src</a></code>指定图片可以加载的网址。如果你使用谷歌标签管理器，这个指令应该包括<a class="ae kv" href="http://www.googletagmanager.com" rel="noopener ugc nofollow" target="_blank">www.googletagmanager.com</a>T9】https://ssl.gstatic.comT11】https://www.gstatic.com。</p><p id="02cc" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">- <code class="du mf mg mh li b"><a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/media-src" rel="noopener ugc nofollow" target="_blank">media-src</a></code>指定可从中加载视频、音频和文本曲目资源的URL。</p><p id="0087" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">- <code class="du mf mg mh li b"><a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/manifest-src" rel="noopener ugc nofollow" target="_blank">manifest-src</a></code>指定可以从中加载应用程序清单的URL。</p><p id="ff02" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">- <code class="du mf mg mh li b"><a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/script-src" rel="noopener ugc nofollow" target="_blank">script-src</a></code>指定可以执行脚本的位置。如果您使用Google Tag Manager，推荐的方法是对GTM脚本使用<a class="ae kv" href="https://developers.google.com/tag-manager/web/csp" rel="noopener ugc nofollow" target="_blank"> nonce方法</a>。然而，在Netlify上部署限制了我使用它，因为我不能生成会话唯一nonce。因此，我使用回退方法'不安全评估'<a class="ae kv" href="https://www.googletagmanager.com" rel="noopener ugc nofollow" target="_blank">https://www.googletagmanager.com</a><a class="ae kv" href="https://tagmanager.google.com`" rel="noopener ugc nofollow" target="_blank">https://tagmanager.google.com</a>，这可能会导致潜在的漏洞。尽可能避免这种情况。</p><p id="1e74" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">-在这个指令中，我还包含了一个哈希关键字' sha 256-dyrkdtw 6 fbqvppfobkfvivwye/afyzge 9 kptdbxngk 4 = '。您可以使用散列脚本作为关键字，以允许加载任何脚本。对于任何违反指令的脚本，控制台中的报告都会自动生成该哈希。您可以将散列和单引号一起直接复制到指令中，以允许脚本。</p><p id="2143" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">- <code class="du mf mg mh li b"><a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/style-src" rel="noopener ugc nofollow" target="_blank">style-src</a></code>控制样式应用于文档的位置。这包括<code class="du mf mg mh li b">&lt;link&gt;</code>元素、<code class="du mf mg mh li b">@import</code>规则和来自<code class="du mf mg mh li b">Link</code> HTTP响应头字段的请求。你可能注意到我包含了<code class="du mf mg mh li b">'unsafe-inline'</code>关键字。这是因为我使用Bootstrap进行样式设计，Bootstrap固有地使用内联Javascript进行DOM操作。同样，这是您应该尽可能避免的潜在漏洞。如果使用谷歌字体和/或谷歌标签管理器，你应该包括fonts.googleapis.com<a class="ae kv" href="https://tagmanager.google.com`" rel="noopener ugc nofollow" target="_blank">https://tagmanager.google.com</a>。</p><p id="a70a" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">- <code class="du mf mg mh li b"><a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/frame-src" rel="noopener ugc nofollow" target="_blank">frame-src</a></code>限制可以嵌入网站的URL。</p><p id="bd0d" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">- <code class="du mf mg mh li b"><a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/form-action" rel="noopener ugc nofollow" target="_blank">form-action</a></code>限制表单可以提交到的URL。</p><p id="293d" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">- <code class="du mf mg mh li b"><a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/frame-ancestors" rel="noopener ugc nofollow" target="_blank">frame-ancestors</a></code>限制可以在<code class="du mf mg mh li b">&lt;frame&gt;</code>、<code class="du mf mg mh li b">&lt;iframe&gt;</code>、<code class="du mf mg mh li b">&lt;object&gt;</code>、<code class="du mf mg mh li b">&lt;embed&gt;</code>或<code class="du mf mg mh li b">&lt;applet&gt;</code>元素中嵌入所请求资源的URL。该指令不能回退到default-src指令。如果设置了此选项，用户代理将忽略X-Frame-Options。</p><p id="9778" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">- <code class="du mf mg mh li b"><a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/upgrade-insecure-requests" rel="noopener ugc nofollow" target="_blank">upgrade-insecure-requests</a></code>指示用户代理重写URL方案，将HTTP更改为HTTPS。该指令适用于有大量旧网址需要重写的网站。</p><h2 id="3127" class="lm jt hi bd ju ls lt lu jy lv lw lx kc jf ly lz kg jj ma mb kk jn mc md ko me bi translated">饼干</h2><p id="0679" class="pw-post-body-paragraph iu iv hi iw b ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr hb bi translated">我还没有在FormBlob上使用任何cookies，因此不需要配置它。但是，如果您使用任何cookie，请确保您的cookie以<code class="du mf mg mh li b">__Secure-</code>前缀命名并设置了<code class="du mf mg mh li b">Secure</code>标志。Cookies也应该在必要时尽快过期。</p><h2 id="b373" class="lm jt hi bd ju ls lt lu jy lv lw lx kc jf ly lz kg jj ma mb kk jn mc md ko me bi translated">跨产地资源共享</h2><p id="9a59" class="pw-post-body-paragraph iu iv hi iw b ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr hb bi translated">大多数网站不需要跨源资源共享(CORS ), FormBlob也不例外。除非特别需要，否则不应设置此值。</p><h2 id="e7f4" class="lm jt hi bd ju ls lt lu jy lv lw lx kc jf ly lz kg jj ma mb kk jn mc md ko me bi translated">HTTP公钥锁定</h2><p id="7226" class="pw-post-body-paragraph iu iv hi iw b ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr hb bi translated">只有最大风险站点才需要HTTP公钥锁定。大多数网站不推荐使用它，你可能也不需要它。</p><h2 id="e851" class="lm jt hi bd ju ls lt lu jy lv lw lx kc jf ly lz kg jj ma mb kk jn mc md ko me bi translated">HTTP严格的传输安全性</h2><p id="ae48" class="pw-post-body-paragraph iu iv hi iw b ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr hb bi translated">HTTP严格传输安全(HSTS)通知用户代理只能通过HTTPS连接到给定的站点，即使选择的方案是HTTP。它与HTTP到HTTPS重定向协同工作，应该设置在来自HTTPS请求的响应头上。建议设置为“严格传输安全:最大年龄=63072000 ”;includeSubdomains `如果“includeSubdomains”标志存在，所有对子域的请求也将升级到HTTPS。在包含此标志之前，请确保所有子域都可以处理HTTPS流量。</p><pre class="ld le lf lg fd lh li lj lk aw ll bi"><span id="4c59" class="lm jt hi li b fi ln lo l lp lq"># Only connect to this site and subdomains via HTTPS for the next two years<br/>Strict-Transport-Security: max-age=63072000; includeSubDomains; preload</span></pre><h2 id="57c2" class="lm jt hi bd ju ls lt lu jy lv lw lx kc jf ly lz kg jj ma mb kk jn mc md ko me bi translated">HTTPS重定向</h2><p id="8084" class="pw-post-body-paragraph iu iv hi iw b ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr hb bi translated">侦听端口80的站点应该重定向到HTTPS上的相同资源。一旦发生重定向，HSTS确保所有将来的HTTP请求都直接发送到安全站点。如果您使用Netlify的DNS，这将由Netlify自动配置。否则，您需要使用Apache或Nginx在您自己的服务器上配置这个重定向。重定向应该是301重定向。</p><h2 id="9469" class="lm jt hi bd ju ls lt lu jy lv lw lx kc jf ly lz kg jj ma mb kk jn mc md ko me bi translated">推荐策略</h2><p id="f1c1" class="pw-post-body-paragraph iu iv hi iw b ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr hb bi translated">为此有四个选项:</p><p id="497f" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">- <code class="du mf mg mh li b">no-referrer</code>:从不发送引用标头<br/> - <code class="du mf mg mh li b">same-origin</code>:发送引用，但仅针对相同来源的请求<br/> - <code class="du mf mg mh li b">strict-origin</code>:向所有来源发送引用，但仅发送URL sans路径(例如<a class="ae kv" href="https://example.com/" rel="noopener ugc nofollow" target="_blank">【https://example.com/】</a>)<br/>-<code class="du mf mg mh li b">strict-origin-when-cross-origin</code>:发送相同来源的完整引用，外部来源的URL sans路径</p><p id="a1f3" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">默认情况下，您可能希望使用“严格起源时交叉起源”。这保护了跨来源请求的用户隐私，但允许您在自己的网站内使用分析来跟踪用户。</p><pre class="ld le lf lg fd lh li lj lk aw ll bi"><span id="b592" class="lm jt hi li b fi ln lo l lp lq"># Only send the shortened referrer to a foreign origin, full referrer to a local host<br/>Referrer-Policy: strict-origin-when-cross-origin</span></pre><h2 id="7948" class="lm jt hi bd ju ls lt lu jy lv lw lx kc jf ly lz kg jj ma mb kk jn mc md ko me bi translated">子资源完整性</h2><p id="b250" class="pw-post-body-paragraph iu iv hi iw b ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr hb bi translated">子资源完整性(SRI)可防止攻击者修改内容交付网络(cdn)上托管的Javascript库的内容，从而在利用该托管库的网站中制造漏洞。SRI使用库内容的散列来验证库没有被改变。如果有，网站将拒绝加载该库。[这里有一个生成SRI散列的好资源](<a class="ae kv" href="https://www.srihash.org/" rel="noopener ugc nofollow" target="_blank">https://www.srihash.org/</a>)。下面是一个使用SRI从FormBlob嵌入表单的例子。</p><pre class="ld le lf lg fd lh li lj lk aw ll bi"><span id="9d16" class="lm jt hi li b fi ln lo l lp lq">&lt;script<br/> src=”<a class="ae kv" href="https://unpkg.com/@jeremyling/form-renderer@0.4.16/dist/web.min.js" rel="noopener ugc nofollow" target="_blank">https://unpkg.com/@jeremyling/form-renderer@0.4.16/dist/web.min.js</a>"<br/> integrity=”sha512–27spyugyD2KOU0tPev6hnJ2bCeKPh5WpMzEWna4uXXCSlSQcFRDxAKZDfBhJ21lF0hyBbTD1KoOXmXJwKU5NHQ==”<br/> crossorigin=”anonymous”<br/>&gt;&lt;/script&gt;</span></pre><h2 id="f358" class="lm jt hi bd ju ls lt lu jy lv lw lx kc jf ly lz kg jj ma mb kk jn mc md ko me bi translated">x-内容-类型-选项</h2><p id="0281" class="pw-post-body-paragraph iu iv hi iw b ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr hb bi translated">X-Content-Type-Options是一个由Internet Explorer、Chrome和Firefox 50+支持的头，它告诉用户代理不要加载脚本和样式表，除非服务器指示正确的MIME类型。如果没有这个标题，这些浏览器可能会错误地将文件检测为脚本和样式表，从而导致XSS攻击。</p><pre class="ld le lf lg fd lh li lj lk aw ll bi"><span id="072d" class="lm jt hi li b fi ln lo l lp lq"># Prevent browsers from incorrectly detecting non-scripts as scripts<br/>X-Content-Type-Options: nosniff</span></pre><h2 id="c1f6" class="lm jt hi bd ju ls lt lu jy lv lw lx kc jf ly lz kg jj ma mb kk jn mc md ko me bi translated">x-框架-选项</h2><p id="e40f" class="pw-post-body-paragraph iu iv hi iw b ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr hb bi translated">X-Frame-Options控制您的站点在iframe中的框架位置。这有助于防止点击劫持，在点击劫持中，攻击者将您的站点框在恶意平台内，诱骗用户点击攻击者控制的链接。</p><pre class="ld le lf lg fd lh li lj lk aw ll bi"><span id="1fa6" class="lm jt hi li b fi ln lo l lp lq"># Only allow my site to frame itself<br/>X-Frame-Options: SAMEORIGIN</span></pre><h2 id="1325" class="lm jt hi bd ju ls lt lu jy lv lw lx kc jf ly lz kg jj ma mb kk jn mc md ko me bi translated">x-XSS-保护</h2><p id="c70f" class="pw-post-body-paragraph iu iv hi iw b ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr hb bi translated">X-XSS保护是Internet Explorer和Chrome的一项功能，当它们检测到反射的XSS攻击时，会阻止页面加载。虽然强大的CSP可能会使该标头变得多余，但它可以保护不支持CSP的旧浏览器上的用户。</p><pre class="ld le lf lg fd lh li lj lk aw ll bi"><span id="f072" class="lm jt hi li b fi ln lo l lp lq"># Block pages from loading when they detect reflected XSS attacks<br/>X-XSS-Protection: 1; mode=block</span></pre><h1 id="0c78" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">完成_标题配置</h1><p id="791d" class="pw-post-body-paragraph iu iv hi iw b ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr hb bi translated">我们已经成功通过了每一项测试，并设置了帮助我们通过测试的配置。如果你一直跟着做，你应该得到这个设置至少一个A级。这里是完整配置的回顾。</p><pre class="ld le lf lg fd lh li lj lk aw ll bi"><span id="3110" class="lm jt hi li b fi ln lo l lp lq">/*<br/> # Only connect to this site and subdomains via HTTPS for the next two years<br/> Strict-Transport-Security: max-age=63072000; includeSubDomains; preload</span><span id="89ee" class="lm jt hi li b fi mi lo l lp lq"> // Configure CSP<br/> Content-Security-Policy: default-src ‘self’ cloudfront.net *.cloudfront.net *.formblob.com fblob.me *.fblob.me; font-src ‘self’ <a class="ae kv" href="https://fonts.gstatic.com" rel="noopener ugc nofollow" target="_blank">https://fonts.gstatic.com</a> data:; img-src https: data: blob: <a class="ae kv" href="http://www.googletagmanager.com" rel="noopener ugc nofollow" target="_blank">www.googletagmanager.com</a> <a class="ae kv" href="https://ssl.gstatic.com" rel="noopener ugc nofollow" target="_blank">https://ssl.gstatic.com</a> <a class="ae kv" href="https://www.gstatic.com" rel="noopener ugc nofollow" target="_blank">https://www.gstatic.com</a>; media-src https: data: blob:; script-src ‘self’ ‘unsafe-eval’ <a class="ae kv" href="https://www.googletagmanager.com" rel="noopener ugc nofollow" target="_blank">https://www.googletagmanager.com</a> <a class="ae kv" href="https://tagmanager.google.com" rel="noopener ugc nofollow" target="_blank">https://tagmanager.google.com</a> <a class="ae kv" href="https://unpkg.com" rel="noopener ugc nofollow" target="_blank">https://unpkg.com</a> cloudfront.net *.cloudfront.net js.stripe.com ‘sha256-dyRKDTw6FBqVppfObkFviVwYe/aFYzGE9kpTdbXngk4=’; style-src ‘self’ ‘unsafe-inline’ fonts.googleapis.com <a class="ae kv" href="https://tagmanager.google.com" rel="noopener ugc nofollow" target="_blank">https://tagmanager.google.com</a>; frame-src ‘self’ *.formblob.com fblob.me *.fblob.me js.stripe.com <a class="ae kv" href="http://www.youtube.com" rel="noopener ugc nofollow" target="_blank">www.youtube.com</a> codesandbox.io; frame-ancestors ‘self’; upgrade-insecure-requests;</span><span id="3aed" class="lm jt hi li b fi mi lo l lp lq">// X-Frame-Options tells the browser whether you want to allow your site to be framed or not. By preventing a browser from framing your site you can defend against attacks like clickjacking.<br/> X-Frame-Options: SAMEORIGIN</span><span id="b72f" class="lm jt hi li b fi mi lo l lp lq">// Prevent browsers from incorrectly detecting non-scripts as scripts<br/> X-Content-Type-Options: nosniff</span><span id="e9ae" class="lm jt hi li b fi mi lo l lp lq">// X-XSS-Protection sets the configuration for the cross-site scripting filter built into most browsers.<br/> X-XSS-Protection: 1; mode=block</span><span id="4437" class="lm jt hi li b fi mi lo l lp lq">// Referrer Policy is a new header that allows a site to control how much information the browser includes with navigations away from a document and should be set by all sites.<br/> Referrer-Policy: strict-origin-when-cross-origin</span></pre><h1 id="6b8f" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">结束语</h1><p id="5f28" class="pw-post-body-paragraph iu iv hi iw b ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr hb bi translated">凭借A+安全等级，<a class="ae kv" href="https://formblob.com" rel="noopener ugc nofollow" target="_blank"> FormBlob </a>成为市场上最安全的表单构建平台。FormBlob尊重数据隐私，旨在确保所有数据免受恶意攻击。我们努力满足并超越所有既定的安全要求。虽然由于我们目前还不成熟，还没有获得HIPAA或NIST的正式认证，但我们的基础设施和安全设置符合这些要求，从长远来看，我们有信心获得认证。以下是Mozilla Observatory对其他流行的表单构建器进行基准测试的结果。</p><figure class="ld le lf lg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mj"><img src="../Images/32ffa148d5ae169fdad79c403b4c12fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3XG_qRazatob_E6RIZhC6w.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Mozilla Observatory Scores for Benchmarked Form Builders</figcaption></figure></div></div>    
</body>
</html>