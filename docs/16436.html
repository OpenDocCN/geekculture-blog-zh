<html>
<head>
<title>Coordinate Reference Systems using Geopandas!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Geopandas的坐标参考系统！</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/coordinate-reference-systems-using-geopandas-d8151b2b5598?source=collection_archive---------15-----------------------#2022-12-27">https://medium.com/geekculture/coordinate-reference-systems-using-geopandas-d8151b2b5598?source=collection_archive---------15-----------------------#2022-12-27</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/919eda1d9d6b1ebfb9cae92d010013f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*aN_XOln_HTpA2vIl"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Photo by <a class="ae iu" href="https://unsplash.com/@markusspiske?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Markus Spiske</a> on <a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="24f0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">本文将研究地理空间数据框架的<strong class="ix hj">创建，像以前一样映射到世界地图中，研究任何实体的<strong class="ix hj">线路、起点和终点</strong>，并了解追踪迁徙濒危鸟类</strong>物种<strong class="ix hj">的相关用例的具体观察结果。</strong></p><p id="7fcb" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这里创建的地图描绘了二维的地球表面。但是，这个世界实际上是一个<strong class="ix hj">三维地球仪</strong>。所以用一种叫做<strong class="ix hj">地图投影</strong>的方法将其渲染为<strong class="ix hj">平面</strong>。</p><p id="55c5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">坐标参考系统(CRS) </strong>用于显示<strong class="ix hj">投影点</strong>如何对应地球上的真实位置。在本教程中，将详细讨论CRS以及一个<strong class="ix hj">用例及其代码实现</strong>。</p><h2 id="81db" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated"><strong class="ak">用例</strong></h2><p id="70c3" class="pw-post-body-paragraph iv iw hi ix b iy ko ja jb jc kp je jf jg kq ji jj jk kr jm jn jo ks jq jr js hb bi translated">假设你是一名<strong class="ix hj">鸟类保护专家</strong>，想了解<strong class="ix hj">紫貂</strong>的迁徙模式。在你的研究中，你发现这些鸟通常在美国东部度过夏季繁殖季节，然后迁徙到南美洲过冬。但是由于这种鸟处于濒危的威胁之下，你应该去这些鸟更有可能去的地方仔细看看。</p><p id="122b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">南美洲的几个保护区在特殊的规定下运作，以确保迁徙(或生活)到那里的物种有最好的机会茁壮成长。你想知道<strong class="ix hj">紫色马丁斯</strong>是否会光顾这些地区。为了回答这个问题，有一些<strong class="ix hj">最近收集的数据</strong>追踪<strong class="ix hj">11种不同鸟类</strong>的全年位置。</p><h2 id="8e83" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated"><strong class="ak">代码实现</strong></h2><p id="f404" class="pw-post-body-paragraph iv iw hi ix b iy ko ja jb jc kp je jf jg kq ji jj jk kr jm jn jo ks jq jr js hb bi translated">使用的一些著名的库有<a class="ae iu" href="https://pandas.pydata.org/" rel="noopener ugc nofollow" target="_blank"><strong class="ix hj"/></a><strong class="ix hj"/><a class="ae iu" href="https://geopandas.org/en/stable/" rel="noopener ugc nofollow" target="_blank"><strong class="ix hj">geo Pandas</strong></a><a class="ae iu" href="https://pypi.org/project/shapely/" rel="noopener ugc nofollow" target="_blank"><strong class="ix hj">shapely</strong></a>。</p><pre class="kt ku kv kw fd kx ky kz bn la lb bi"><span id="a135" class="lc ju hi ky b be ld le l lf lg">import pandas as pd<br/>import geopandas as gpd<br/>from shapely.geometry import LineString<br/><br/># Load the data and print the first 5 rows<br/>birds_df = pd.read_csv("purple_martin.csv", parse_dates=['timestamp'])<br/>print("There are {} different birds in the dataset.".format(birds_df["tag-local-identifier"].nunique()))<br/>birds_df.head()<br/><br/>There are 11 different birds in the dataset.</span></pre><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lh"><img src="../Images/ebc570d331cbbb2c0841cbc4e0d0d9d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uYydbI8A8-667TPrGXGWeA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">First 5 rows of the data frame (Kaggle image)</figcaption></figure><p id="106b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这里，我们看到了<strong class="ix hj">时间戳</strong>变量以及<strong class="ix hj">纬度和经度</strong>值。数据集中有<strong class="ix hj"> 11只鸟，每只鸟由“tag-local-identifier”</strong>列中的<strong class="ix hj">唯一值标识。每只鸟都有几个测量值，在一年的不同时间收集。</strong></p><p id="d363" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">接下来，让我们从<strong class="ix hj"> birds_df数据帧</strong>创建<strong class="ix hj"> GeoPandas数据帧</strong>。</p><pre class="kt ku kv kw fd kx ky kz bn la lb bi"><span id="f00a" class="lc ju hi ky b be ld le l lf lg">birds = gpd.GeoDataFrame(birds_df, geometry=gpd.points_from_xy(birds_df["location-long"],birds_df["location-lat"]))<br/><br/># Set the CRS to {'init': 'epsg:4326'}<br/><br/># Your code here: Set the CRS to {'init': 'epsg:4326'}<br/>birds.crs = {'init' :'epsg:4326'}</span></pre><p id="323c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> gpd.points_from_xy() </strong>用于从<strong class="ix hj">经纬度</strong>位置创建点对象(<strong class="ix hj"> location-long </strong>和<strong class="ix hj"> location-lat </strong>变量)。参数<strong class="ix hj"> epsg </strong>指<a class="ae iu" href="http://www.epsg.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="ix hj">欧洲石油调查组织(EPSG) </strong> </a>代码。当从<strong class="ix hj"> CSV文件</strong>创建<strong class="ix hj">地理数据框</strong>时，我们必须设置<strong class="ix hj"> CRS </strong>。<a class="ae iu" href="https://epsg.io/4326" rel="noopener ugc nofollow" target="_blank"> <strong class="ix hj"> EPSG 4326 </strong> </a>对应经纬度中的<strong class="ix hj">坐标。</strong></p><p id="8aa5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，为了绘制数据，我们从<strong class="ix hj"> GeoPandas </strong>加载<code class="du li lj lk ky b"><strong class="ix hj">'naturalearth_lowres'</strong></code> <strong class="ix hj">数据集</strong>，并将其设置为<strong class="ix hj">地理数据框架</strong>，其中包含美洲(北美和南美)所有<strong class="ix hj">国家的边界。</strong></p><pre class="kt ku kv kw fd kx ky kz bn la lb bi"><span id="ae64" class="lc ju hi ky b be ld le l lf lg"># Load a GeoDataFrame with country boundaries in North/South America, print the first 5 rows<br/>world = gpd.read_file(gpd.datasets.get_path('naturalearth_lowres'))<br/>americas = world.loc[world['continent'].isin(['North America', 'South America'])]<br/>americas.head()</span></pre><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ll"><img src="../Images/d75c4ffcef3ee2505ff71087cb9b21bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1o2XlS7YfhZLKsC8ZD1hdw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Geopandas data frame containing only countries from the Americas (Kaggle image)</figcaption></figure><p id="3862" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">所以，在我们有了<strong class="ix hj">个国家的GeoPandas </strong> ( <strong class="ix hj">个美洲</strong>)数据框之后，让我们<strong class="ix hj">把它标绘到世界地图上</strong>。代码如下。</p><pre class="kt ku kv kw fd kx ky kz bn la lb bi"><span id="2112" class="lc ju hi ky b be ld le l lf lg">ax = americas.plot(figsize=(10,10), color='white', linestyle=':', edgecolor='gray')<br/>birds.plot(ax=ax, markersize = 10);<br/><br/>#ax.set_xlim([-110, -30])<br/>#ax.set_ylim([-30, 60])</span></pre><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lm"><img src="../Images/df78e5a41383861e37c0fe1ec6c50917.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4BVqYUL5lBNbLtWIPqKAjA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">The <strong class="bd jv">americas</strong> Geopandas data frame and the <strong class="bd jv">birds</strong> geopandas data frame (Kaggle image)</figcaption></figure><p id="8c5b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> set_xlim </strong>和<strong class="ix hj"> set_ylim </strong>值被设置为仅在<strong class="ix hj">鸟(蓝点)</strong>集中的地方放大地图的<strong class="ix hj">相关部分</strong>。</p><h2 id="a5e0" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated"><strong class="ak">鸟的起点和终点以及经过的路线</strong></h2><p id="fe69" class="pw-post-body-paragraph iv iw hi ix b iy ko ja jb jc kp je jf jg kq ji jj jk kr jm jn jo ks jq jr js hb bi translated">在这里，我们将找到鸟类的<strong class="ix hj">起点和终点</strong>以及经过的<strong class="ix hj">路径，并尝试<strong class="ix hj">在世界地图上将它们</strong>可视化。代码如下。</strong></p><pre class="kt ku kv kw fd kx ky kz bn la lb bi"><span id="ac7d" class="lc ju hi ky b be ld le l lf lg"># GeoDataFrame showing path for each bird<br/>path_df = birds.groupby("tag-local-identifier")['geometry'].apply(list).apply(lambda x: LineString(x)).reset_index()<br/>path_gdf = gpd.GeoDataFrame(path_df, geometry=path_df.geometry)<br/>path_gdf.crs = {'init' :'epsg:4326'}<br/><br/># GeoDataFrame showing starting point for each bird<br/>start_df = birds.groupby("tag-local-identifier")['geometry'].apply(list).apply(lambda x: x[0]).reset_index()<br/>start_gdf = gpd.GeoDataFrame(start_df, geometry=start_df.geometry)<br/>start_gdf.crs = {'init' :'epsg:4326'}<br/><br/># Show first five rows of GeoDataFrame<br/>start_gdf.head()</span></pre><p id="a8b7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> path_gdf </strong>包含了显示每只鸟的<strong class="ix hj">路径的<strong class="ix hj"> LineString对象</strong>。它使用<code class="du li lj lk ky b"><strong class="ix hj">LineString()</strong></code>方法从一系列点对象中创建一个LineString对象。</strong></p><p id="ca69" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> start_gdf </strong>包含每只鸟的<strong class="ix hj">起点</strong>。</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div class="er es ln"><img src="../Images/fd541ad63252fbf3e503a97b7e31f3c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:986/format:webp/1*oprvhAViSnzTu-B7E5AxMg.png"/></div><figcaption class="iq ir et er es is it bd b be z dx">First 5 rows of start_gdf geopandas data frame (Kaggle image)</figcaption></figure><p id="4880" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">正如我们可以看到的，有鸟的开始点<strong class="ix hj">和上面看到的<strong class="ix hj">标签-本地标识符(唯一的鸟类型)</strong>。</strong></p><pre class="kt ku kv kw fd kx ky kz bn la lb bi"><span id="c4e9" class="lc ju hi ky b be ld le l lf lg">path_gdf.head()</span></pre><figure class="kt ku kv kw fd ij er es paragraph-image"><div class="er es lo"><img src="../Images/6493a5f087718df3a7f9813baab1f389.png" data-original-src="https://miro.medium.com/v2/resize:fit:1388/format:webp/1*SZnOSX-1_ps7C8Iso3xNSA.png"/></div><figcaption class="iq ir et er es is it bd b be z dx">path_gdf geopandas data frame (Kaggle Image)</figcaption></figure><p id="3c20" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">路线</strong>鸟被表示为<strong class="ix hj">线串</strong>物体。</p><p id="d1df" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这同样适用于包含鸟类的<strong class="ix hj">目的地点</strong>的<strong class="ix hj"> end_gdf geopandas数据帧</strong>，因为我们创建了<strong class="ix hj"> start_gdf geopandas数据帧</strong>。</p><pre class="kt ku kv kw fd kx ky kz bn la lb bi"><span id="b833" class="lc ju hi ky b be ld le l lf lg">end_df = birds.groupby("tag-local-identifier")['geometry'].apply(list).apply(lambda x: x[-1]).reset_index()<br/>end_gdf = gpd.GeoDataFrame(end_df, geometry=end_df.geometry)<br/>end_gdf.crs = {'init': 'epsg:4326'}<br/><br/># Show first five rows of GeoDataFrame<br/>end_gdf.head()</span></pre><figure class="kt ku kv kw fd ij er es paragraph-image"><div class="er es lp"><img src="../Images/5f51fcd82e4a9b81af4115cd4e00e0ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1054/format:webp/1*pfhgSamqRhPGPmiMhkae7w.png"/></div><figcaption class="iq ir et er es is it bd b be z dx">end_gdf geopandas dataframe (Kaggle image)</figcaption></figure><p id="c77f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">鸟类的<strong class="ix hj">起点(start_gdf) </strong>和<strong class="ix hj">终点(end_gdf) </strong>点以及它们各自的<strong class="ix hj">路线(path_gdf)。</strong></p><pre class="kt ku kv kw fd kx ky kz bn la lb bi"><span id="07a6" class="lc ju hi ky b be ld le l lf lg">ax = americas.plot(figsize=(10, 10), color='white', linestyle=':', edgecolor='gray')<br/><br/>start_gdf.plot(ax=ax, color='red',  markersize=30)<br/>path_gdf.plot(ax=ax, cmap='tab20b', linestyle='-', linewidth=1, zorder=1)<br/>end_gdf.plot(ax=ax, color='black', markersize=30)</span></pre><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es et"><img src="../Images/033de642cda07124b2b0a2c91de5da72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F1de8AMzylFs703pn67yJw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Start, endpoints, and the paths of the birds (Kaggle image)</figcaption></figure><p id="46ff" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">上图清楚地显示了<strong class="ix hj">红色</strong>点(<strong class="ix hj"> start_gdf </strong>)，<strong class="ix hj">黑色</strong>点(<strong class="ix hj"> end_gdf </strong>)，以及<strong class="ix hj"> americas geopandas数据框上鸟类的行进路径(<strong class="ix hj"> path_gdf </strong>)。</strong></p><p id="a466" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">接下来，我们将看看这些鸟是否像我们在文章前面讨论的那样迁徙到保护区。密码是。</p><pre class="kt ku kv kw fd kx ky kz bn la lb bi"><span id="c2d2" class="lc ju hi ky b be ld le l lf lg"># Path of the shapefile to load<br/>protected_filepath = "SAPA_Aug2019-shapefile-polygons.shp"<br/><br/># Your code here<br/>protected_areas = gpd.read_file(protected_filepath)</span></pre><p id="58e0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">受保护文件路径</strong>是一个<strong class="ix hj">。shp </strong>文件，其中有关于南美<a class="ae iu" href="https://www.iucn.org/our-work/protected-areas-and-land-use" rel="noopener ugc nofollow" target="_blank"> <strong class="ix hj">保护区</strong> </a>集合的信息。与之前的<strong class="ix hj">绘图选项</strong>相同，我们将<strong class="ix hj">在南美地图上可视化保护区</strong>。</p><pre class="kt ku kv kw fd kx ky kz bn la lb bi"><span id="f1cd" class="lc ju hi ky b be ld le l lf lg">south_america = americas.loc[americas['continent']=='South America']<br/><br/># Your code here: plot protected areas in South America<br/>ax = south_america.plot(figsize=(10,10), color='white', edgecolor='gray')<br/>protected_areas.plot(ax=ax, alpha=0.4)</span></pre><p id="1dca" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">南美</strong> geopandas数据框是从<strong class="ix hj">美洲</strong> geopandas数据框创建的。然后在南美绘图对象(<strong class="ix hj"> ax </strong>)上绘制<strong class="ix hj">保护区</strong>。剧情如下。</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lq"><img src="../Images/9faca3780d56edadbb38e62d919842c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PXWVxmuxVDyTp9qzWGfl0A.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Protected areas on the south americas map (Kaggle image)</figcaption></figure><p id="5ee5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">可以清楚地看到，保护区主要集中在地图的<strong class="ix hj">北部<strong class="ix hj">。如果我们观察政治地图的话，它们大多存在于巴西(亚马逊盆地地区)。尽管如此，在海洋水域也有许多隔离的集群。南方也有一个<strong class="ix hj">粗星团</strong>。</strong></strong></p><p id="8472" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">南美洲受保护土地的数量(按百分比计算)是多少？要知道我们从<strong class="ix hj">总面积(REP_AREA)中减去<strong class="ix hj">总海洋面积(REP_M_AREA) </strong>。</strong>代码是。</p><pre class="kt ku kv kw fd kx ky kz bn la lb bi"><span id="5e52" class="lc ju hi ky b be ld le l lf lg">P_Area = sum(protected_areas['REP_AREA']-protected_areas['REP_M_AREA'])<br/>print("South America has {} square kilometers of protected areas.".format(P_Area))<br/><br/>South America has 5396761.9116883585 square kilometers of protected areas.</span></pre><p id="90ed" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">使用每个多边形的<code class="du li lj lk ky b">area</code>属性得到每个国家的<strong class="ix hj">总面积</strong>(以<strong class="ix hj"> EPSG 3035 </strong>为CRS)，然后将结果相加得到整个南美洲的面积(单位<strong class="ix hj">平方公里)</strong>。</p><pre class="kt ku kv kw fd kx ky kz bn la lb bi"><span id="0040" class="lc ju hi ky b be ld le l lf lg"># Your code here: Calculate the total area of South America (in square kilometers)<br/>totalArea = sum(south_america.geometry.to_crs(epsg=3035).area) / 10**6<br/><br/># What percentage of South America is protected?<br/>percentage_protected = P_Area/totalArea<br/>print('Approximately {}% of South America is protected.'.format(round(percentage_protected*100, 2)))<br/><br/>Approximately 30.39% of South America is protected.</span></pre><h2 id="99f0" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated"><strong class="ak">最后，南美洲的鸟在哪里？</strong></h2><p id="90df" class="pw-post-body-paragraph iv iw hi ix b iy ko ja jb jc kp je jf jg kq ji jj jk kr jm jn jo ks jq jr js hb bi translated">那么，这些鸟在保护区吗？</p><p id="4536" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们创建一个显示所有鸟类的图，以及它们在南美洲被发现的所有地点。此外，标出南美洲所有保护区的<strong class="ix hj">位置。</strong></p><p id="625c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为了<strong class="ix hj">排除<strong class="ix hj">纯海洋区域</strong>(没有陆地部分)的</strong>保护区，您可以使用<strong class="ix hj">“海洋”</strong>列(并且只绘制<code class="du li lj lk ky b"><strong class="ix hj">protected_areas[protected_areas['MARINE']!='2']</strong></code>中的行，而不是<code class="du li lj lk ky b">protected_areas</code>地理数据框中的每一行)。</p><pre class="kt ku kv kw fd kx ky kz bn la lb bi"><span id="8c6a" class="lc ju hi ky b be ld le l lf lg">ax = south_america.plot(figsize=(10,10), color='white', edgecolor='gray')<br/><br/>protected_areas[protected_areas['MARINE']!='2'].plot(ax=ax, alpha=0.4, zorder=1)<br/><br/>birds[birds.geometry.y &lt; 0].plot(ax=ax, color='red', alpha=0.6, markersize=10, zorder=2)</span></pre><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lr"><img src="../Images/349064c11a420d2721f91f92c853cb97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mq-GadZz7O71quC5q1PtvQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">The birds in red dots present in the protected areas (Kaggle image)</figcaption></figure><p id="25cb" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">从上面的图中，我们可以看到<strong class="ix hj">保护区</strong>中有鸟类的存在，这些鸟类只在陆地和<strong class="ix hj">上</strong>有。</p><p id="0e5d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">所以，简而言之，我们可以在南美洲<strong class="ix hj">中北部</strong>集群的<strong class="ix hj">保护地</strong>中识别出<strong class="ix hj">鸟类的存在。尽管如此，还是有一些保护区(比如最北部的T39或者南部的T42)鸟类不会在那里定居。</strong></p><p id="37c2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我这里指的是从<a class="ae iu" href="https://www.kaggle.com/code/abhi2652254/exercise-coordinate-reference-systems/edit" rel="noopener ugc nofollow" target="_blank"> <strong class="ix hj">到</strong> </a>。跟着<a class="ae iu" rel="noopener" href="/@abhi2652254"> <strong class="ix hj"> me </strong> </a>说<a class="ae iu" href="https://www.linkedin.com/in/obhinaba17/" rel="noopener ugc nofollow" target="_blank"> <strong class="ix hj"> hi </strong> </a>。</p></div></div>    
</body>
</html>