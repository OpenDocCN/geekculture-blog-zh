<html>
<head>
<title>How to create a new GitHub Release through Azure Pipelines</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何通过Azure管道创建新的GitHub版本</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/how-to-create-a-new-github-release-through-azure-pipelines-6ee4e61cd7d?source=collection_archive---------3-----------------------#2021-02-10">https://medium.com/geekculture/how-to-create-a-new-github-release-through-azure-pipelines-6ee4e61cd7d?source=collection_archive---------3-----------------------#2021-02-10</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/411d0ba285970bb7ae65f35a423eefa2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oYIeOIT3vjqzHUtuNTRCWw.png"/></div></div></figure><p id="9889" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">创建一个新的GitHub版本是许多开发人员在其职业生涯中应该做的一项常见任务。但另一方面，它并没有得到应有的记载。有很多微妙的事情，只有在这个过程中你才会发现。</p><p id="e312" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">所以…让我们开始投入其中吧！</p><p id="3734" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">OBS:我假设你已经有了一个基本的管道结构，你只需要做这一小步(生成一个GitHub版本)。</p><p id="b54c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这篇文章中，我们将使用一些代码和脚本，最终版本在下面，如果你愿意，你可以复制它并尝试自己理解它，或者阅读整篇文章以详细理解每个步骤。</p><figure class="jp jq jr js fd ij"><div class="bz dy l di"><div class="jt ju l"/></div></figure><p id="2800" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">首先，我们需要创建一个新的GitHub连接服务，该服务提供对您想要在其中创建发布的存储库的管道访问。要创建它，在Azure DevOps平台中，你需要访问<em class="jo">项目设置&gt;服务连接&gt;新服务连接&gt; GitHub </em>。在OAuth配置上选择AzurePipelines，给它一个名称(这个名称将在<em class="jo"> yml </em>文件中使用)，并保存它。之后，您将能够用您的服务连接名称填充<em class="jo"> gitHubConnection </em>输入。</p><p id="3078" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，我们需要发现我们正在构建的版本是什么，然后填充我们任务的<em class="jo">标签</em>和<em class="jo">标题</em>的输入。这可能有点棘手，因为您获取这些信息的方式可能会根据项目的结构和工作流程而变化。</p><p id="de64" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">作为一个例子，我将使用一个场景，从一个节点脚本中获取版本，将其存储在一个变量中，并将其作为输入传递给任务。您可以在该节点脚本中做任何您想做的事情，例如，在我的例子中，我正在读取一个文件的内容并从中提取版本。</p><figure class="jp jq jr js fd ij"><div class="bz dy l di"><div class="jt ju l"/></div></figure><p id="d497" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">作为一个可选的步骤，为了做更好的文档，您可以为您的版本生成一些发行说明。我将使用一个lib，它接受特定项目列中的所有卡片(在我的例子中是“DONE”)，并为我生成一个用户友好的发布说明。如果对你有意义，你也可以使用它，或者以更适合你工作流程的方式自己做。</p><figure class="jp jq jr js fd ij"><div class="bz dy l di"><div class="jt ju l"/></div></figure><p id="6708" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="jo"> gh_org_name </em>、<em class="jo"> gh_project_number </em>、<em class="jo"> rng_gh_token、</em>和<em class="jo">release _ notes _ file _ name</em>都是存储在我的Azure DevOps项目内的变量组中的变量，如果你愿意，你可以使用内联值，但这是不可重用和不安全的。</p><p id="e1bc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你不知道如何创建一个新的变量组，你可以看看这些文件。如果你不知道<em class="jo"> rng-cli </em>是如何工作的，你可以看看<a class="ae jv" href="https://github.com/emilioheinz/release-notes-generator" rel="noopener ugc nofollow" target="_blank">这个</a>库(我为自己的需要创建了它，如果你有任何改进建议，你可以提出问题或拉请求)。</p><p id="206e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在我们已经设置好了一切，我们可以调用<em class="jo"> GitHubRelease </em>任务传递所有必要的输入。</p><figure class="jp jq jr js fd ij"><div class="bz dy l di"><div class="jt ju l"/></div></figure><p id="8559" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你想知道可以传递给<em class="jo"> GitHubRelease </em>任务的所有输入，你可以看看<a class="ae jv" href="https://docs.microsoft.com/en-us/azure/devops/pipelines/tasks/utility/github-release?view=azure-devops" rel="noopener ugc nofollow" target="_blank">这些</a>微软文档，你需要知道的一切都在那里。</p><p id="35e6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">那都是乡亲们！现在我们有了一个为我们自动生成GitHub版本的管道🚀！</p><p id="919e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我希望我能帮助你，如果你有任何问题或建议，你可以尝试在评论中或通过电子邮件联系我，我将很乐意回答你！</p><figure class="jp jq jr js fd ij"><div class="bz dy l di"><div class="jw ju l"/></div></figure></div></div>    
</body>
</html>