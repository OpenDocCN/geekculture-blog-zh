<html>
<head>
<title>How to manage Public and Private subnets in AWS with Terraform?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Terraform管理AWS中的公有和私有子网？</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/how-to-manage-public-and-private-subnets-in-aws-with-terraform-69c272003c81?source=collection_archive---------4-----------------------#2021-09-28">https://medium.com/geekculture/how-to-manage-public-and-private-subnets-in-aws-with-terraform-69c272003c81?source=collection_archive---------4-----------------------#2021-09-28</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><h1 id="bc14" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">什么是Terraform？</h1><p id="bbfa" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">Terraform是一个开源的基础设施代码(IAC)工具，允许创建、管理和部署生产就绪环境。Terraform将云API编码成声明性的配置文件。Terraform可以管理现有的服务提供商和定制的内部解决方案。</p><p id="9a5b" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">从<a class="ae kg" href="https://www.terraform.io/intro/index.html" rel="noopener ugc nofollow" target="_blank"> <strong class="jf hj">这里</strong> </a>阅读更多关于地形的信息</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es kh"><img src="../Images/46449f99156487e5470d50e56ef98934.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kqAq4IqZj8aNuNP2_Dd53w.png"/></div></div><figcaption class="kt ku et er es kv kw bd b be z dx">Terraform</figcaption></figure><h1 id="9d8f" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">什么是子网？</h1><p id="13d8" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">子网是IP网络的逻辑细分。将一个网络划分成两个或更多的网络称为子网划分。一部分标识主机部分，另一部分标识网络部分。</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es kx"><img src="../Images/4e4bbdc330b7db9b9947b45fea309e42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*launqOhjQLLm3m8P89EV-g.png"/></div></div><figcaption class="kt ku et er es kv kw bd b be z dx">Subnet</figcaption></figure><h1 id="0728" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">子网类型:</h1><ul class=""><li id="69ed" class="ky kz hi jf b jg jh jk jl jo la js lb jw lc ka ld le lf lg bi translated"><strong class="jf hj">公共子网:</strong> <br/>公共子网是与路由表相关联的子网，该路由表具有到互联网网关的路由。这将VPC连接到互联网和其他自动气象站服务。默认情况下，在公共子网中启动的实例将分配IP地址。</li><li id="cc28" class="ky kz hi jf b jg lh jk li jo lj js lk jw ll ka ld le lf lg bi translated"><strong class="jf hj">专用子网:<br/> </strong>专用子网中的实例通常是后端服务器，不需要接受来自互联网的传入流量，因此没有公共IP地址。但是，它们可以使用NAT网关或NAT实例向互联网发送请求。</li></ul><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es lm"><img src="../Images/0bb867fd9dbcb45036a041672ea8ed9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IfE_uUqvwIJO-OiPLrCFbA.png"/></div></div><figcaption class="kt ku et er es kv kw bd b be z dx">Public/Private Subnet</figcaption></figure><p id="25b1" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">在本文中，我将解释如何使用terraform创建和管理公共和私有子网。</p><h1 id="e05f" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">先决条件:</h1><ul class=""><li id="7f63" class="ky kz hi jf b jg jh jk jl jo la js lb jw lc ka ld le lf lg bi translated"><strong class="jf hj">AWS</strong>T42<strong class="jf hj">terra form</strong>的基础知识</li><li id="8222" class="ky kz hi jf b jg lh jk li jo lj js lk jw ll ka ld le lf lg bi translated">AWS帐户</li><li id="a0ca" class="ky kz hi jf b jg lh jk li jo lj js lk jw ll ka ld le lf lg bi translated"><strong class="jf hj"> AWS访问</strong> &amp; <strong class="jf hj">密钥</strong></li></ul><blockquote class="ln lo lp"><p id="f592" class="jd je lq jf b jg kb ji jj jk kc jm jn lr kd jq jr ls ke ju jv lt kf jy jz ka hb bi translated">在这个项目中，我使用了一些变量，我将在本文后面讨论。</p></blockquote><p id="b70f" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">第一步:- </strong>为<strong class="jf hj"> VPC </strong>创建一个文件</p><ul class=""><li id="fd35" class="ky kz hi jf b jg kb jk kc jo lu js lv jw lw ka ld le lf lg bi translated">创建<code class="du lx ly lz ma b">vpc.tf</code>文件并将下面的代码添加到其中</li></ul><pre class="ki kj kk kl fd mb ma mc md aw me bi"><span id="8962" class="mf ig hi ma b fi mg mh l mi mj"># Creating VPC<br/>resource "aws_vpc" "demovpc" {<br/>  cidr_block       = "${var.vpc_cidr}"<br/>  instance_tenancy = "default"</span><span id="96aa" class="mf ig hi ma b fi mk mh l mi mj">tags = {<br/>    Name = "Demo VPC"<br/>  }<br/>}</span></pre><p id="49cd" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">步骤2:- </strong>为<strong class="jf hj">公共子网</strong>创建一个文件</p><ul class=""><li id="4b88" class="ky kz hi jf b jg kb jk kc jo lu js lv jw lw ka ld le lf lg bi translated">创建<code class="du lx ly lz ma b">public_subnet.tf</code>文件，并将下面的代码添加到其中</li></ul><pre class="ki kj kk kl fd mb ma mc md aw me bi"><span id="d2e4" class="mf ig hi ma b fi mg mh l mi mj"># Creating Public Subnet for EC2 instance<br/>resource "aws_subnet" "demosubnet" {<br/>  vpc_id                  = "${aws_vpc.demovpc.id}"<br/>  cidr_block             = "${var.subnet_cidr}"<br/>  availability_zone = "us-east-1a"<br/>  map_public_ip_on_launch = true</span><span id="2da7" class="mf ig hi ma b fi mk mh l mi mj">tags = {<br/>    Name = "Public Subnet"<br/>  }<br/>}</span></pre><ul class=""><li id="eff4" class="ky kz hi jf b jg kb jk kc jo lu js lv jw lw ka ld le lf lg bi translated">到目前为止，这个子网不会充当公共子网，我们需要创建<code class="du lx ly lz ma b">internet gateway</code>，还需要更新路由表，让我们开始吧。</li></ul><p id="459f" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">第三步:- </strong>为<strong class="jf hj">互联网网关</strong>创建一个文件</p><ul class=""><li id="6f62" class="ky kz hi jf b jg kb jk kc jo lu js lv jw lw ka ld le lf lg bi translated">创建<code class="du lx ly lz ma b">igw.tf</code>文件，并将下面的代码添加到其中</li></ul><pre class="ki kj kk kl fd mb ma mc md aw me bi"><span id="bbd8" class="mf ig hi ma b fi mg mh l mi mj"># Creating Internet Gateway <br/>resource "aws_internet_gateway" "demogateway" {<br/>  vpc_id = "${aws_vpc.demovpc.id}"<br/>}</span></pre><p id="bb58" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">步骤4:- </strong>为<strong class="jf hj">公共子网</strong>的<strong class="jf hj">路由表</strong>创建一个文件</p><ul class=""><li id="abef" class="ky kz hi jf b jg kb jk kc jo lu js lv jw lw ka ld le lf lg bi translated">创建<code class="du lx ly lz ma b">route_table_public.tf</code>文件，并添加以下代码</li></ul><pre class="ki kj kk kl fd mb ma mc md aw me bi"><span id="9a1e" class="mf ig hi ma b fi mg mh l mi mj"># Creating Route Table for Public Subnet<br/>resource "aws_route_table" "rt" {<br/>    vpc_id = aws_vpc.demovpc.id</span><span id="7ff0" class="mf ig hi ma b fi mk mh l mi mj">route {<br/>        cidr_block = "0.0.0.0/0"<br/>        gateway_id = aws_internet_gateway.demogateway.id<br/>    }</span><span id="d46e" class="mf ig hi ma b fi mk mh l mi mj">tags = {<br/>        Name = "Public Subnet Route Table"<br/>    }<br/>}</span><span id="d7ac" class="mf ig hi ma b fi mk mh l mi mj">resource "aws_route_table_association" "rt_associate_public" {<br/>    subnet_id = aws_subnet.demosubnet.id<br/>    route_table_id = aws_route_table.rt.id<br/>}</span></pre><ul class=""><li id="0b1d" class="ky kz hi jf b jg kb jk kc jo lu js lv jw lw ka ld le lf lg bi translated">在上面的代码中，我创建了一个新的路由表，并将所有请求转发到<code class="du lx ly lz ma b">0.0.0.0/0</code> CIDR块。</li><li id="d167" class="ky kz hi jf b jg lh jk li jo lj js lk jw ll ka ld le lf lg bi translated">我还将这个路由表附加到前面创建的子网。因此，它将作为公共子网工作</li></ul><p id="f0f7" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">步骤5:- </strong>为<strong class="jf hj">安全组</strong>创建一个文件</p><ul class=""><li id="5eeb" class="ky kz hi jf b jg kb jk kc jo lu js lv jw lw ka ld le lf lg bi translated">创建<code class="du lx ly lz ma b">sg.tf</code>文件并将下面的代码添加到其中</li></ul><pre class="ki kj kk kl fd mb ma mc md aw me bi"><span id="78f5" class="mf ig hi ma b fi mg mh l mi mj"># Creating Security Group <br/>resource "aws_security_group" "demosg" {</span><span id="7282" class="mf ig hi ma b fi mk mh l mi mj">vpc_id      = "${aws_vpc.demovpc.id}"</span><span id="9286" class="mf ig hi ma b fi mk mh l mi mj"># Inbound Rules<br/>  # HTTP access from anywhere<br/>  ingress {<br/>    from_port   = 80<br/>    to_port     = 80<br/>    protocol    = "tcp"<br/>    cidr_blocks = ["0.0.0.0/0"]<br/>  }</span><span id="db1c" class="mf ig hi ma b fi mk mh l mi mj"># HTTPS access from anywhere<br/>  ingress {<br/>    from_port   = 443<br/>    to_port     = 443<br/>    protocol    = "tcp"<br/>    cidr_blocks = ["0.0.0.0/0"]<br/>  }</span><span id="a800" class="mf ig hi ma b fi mk mh l mi mj"># SSH access from anywhere<br/>  ingress {<br/>    from_port   = 22<br/>    to_port     = 22<br/>    protocol    = "tcp"<br/>    cidr_blocks = ["0.0.0.0/0"]<br/>  }</span><span id="e8b2" class="mf ig hi ma b fi mk mh l mi mj"># Outbound Rules<br/>  # Internet access to anywhere<br/>  egress {<br/>    from_port   = 0<br/>    to_port     = 0<br/>    protocol    = "-1"<br/>    cidr_blocks = ["0.0.0.0/0"]<br/>  }<br/>}</span></pre><ul class=""><li id="05b0" class="ky kz hi jf b jg kb jk kc jo lu js lv jw lw ka ld le lf lg bi translated">我已经为入站连接打开了<strong class="jf hj"> 80，443 &amp; 22 </strong>个端口，并为出站连接打开了所有端口</li></ul><p id="9683" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">第6步:- </strong>为<strong class="jf hj">公共EC2实例</strong>创建一个文件</p><ul class=""><li id="9a0b" class="ky kz hi jf b jg kb jk kc jo lu js lv jw lw ka ld le lf lg bi translated">创建<code class="du lx ly lz ma b">ec2_public.tf</code>文件，并将下面的代码添加到其中</li></ul><pre class="ki kj kk kl fd mb ma mc md aw me bi"><span id="fd6f" class="mf ig hi ma b fi mg mh l mi mj"># Creating EC2 instance in Public Subnet<br/>resource "aws_instance" "demoinstance" {<br/>  ami           = "ami-087c17d1fe0178315"<br/>  instance_type = "t2.micro"<br/>  key_name = "tests"<br/>  vpc_security_group_ids = [ aws_security_group.allow_ssh.id ]<br/>  subnet_id = aws_subnet.demoinstance.id<br/>  associate_public_ip_address = true</span><span id="b76c" class="mf ig hi ma b fi mk mh l mi mj">tags = {<br/>    Name = "My Public Instance"<br/>  }<br/>}</span></pre><p id="3dff" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">第七步:- </strong>为<strong class="jf hj">公共</strong>子网创建一个文件用于<strong class="jf hj"> NAT网关</strong></p><ul class=""><li id="b571" class="ky kz hi jf b jg kb jk kc jo lu js lv jw lw ka ld le lf lg bi translated">创建<code class="du lx ly lz ma b">public_subnet_NAT.tf</code>文件，并添加以下代码</li></ul><pre class="ki kj kk kl fd mb ma mc md aw me bi"><span id="ae22" class="mf ig hi ma b fi mg mh l mi mj"># Creating Public subnet for NAT Gateway <br/>resource "aws_subnet" "demosubnet1" {<br/>  vpc_id                  = "${aws_vpc.demovpc.id}"<br/>  cidr_block             = "${var.subnet1_cidr}"<br/>  availability_zone = "us-east-1b"</span><span id="54fe" class="mf ig hi ma b fi mk mh l mi mj">tags = {<br/>    Name = "Public Subnet for NAT Gateway"<br/>  }<br/>}</span></pre><p id="b677" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">第八步:- </strong>为<strong class="jf hj"> EIP </strong>创建一个文件</p><ul class=""><li id="1956" class="ky kz hi jf b jg kb jk kc jo lu js lv jw lw ka ld le lf lg bi translated">没有弹性IP地址，您无法启动<strong class="jf hj"> NAT网关</strong>，因此，让我们先创建它</li><li id="cf65" class="ky kz hi jf b jg lh jk li jo lj js lk jw ll ka ld le lf lg bi translated">创建<code class="du lx ly lz ma b">eip.tf</code>文件，并将下面的代码添加到其中</li></ul><pre class="ki kj kk kl fd mb ma mc md aw me bi"><span id="f35b" class="mf ig hi ma b fi mg mh l mi mj"># Creating EIP<br/>resource "aws_eip" "eip" {<br/>  vpc = true<br/>}</span></pre><p id="f8a7" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">第9步:- </strong>为<strong class="jf hj"> NAT网关</strong>创建一个文件</p><ul class=""><li id="916c" class="ky kz hi jf b jg kb jk kc jo lu js lv jw lw ka ld le lf lg bi translated">创建<code class="du lx ly lz ma b">nat.tf</code>文件，并添加以下代码</li></ul><pre class="ki kj kk kl fd mb ma mc md aw me bi"><span id="9ae6" class="mf ig hi ma b fi mg mh l mi mj"># Creating NAT Gateway<br/>resource "aws_nat_gateway" "gw" {<br/>  allocation_id = aws_eip.eip.id<br/>  subnet_id     = aws_subnet.demosubnet.id<br/>}</span></pre><p id="a3c4" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">步骤10:- </strong>为<strong class="jf hj"> NAT网关</strong>的<strong class="jf hj">路由表</strong>创建一个文件</p><ul class=""><li id="2021" class="ky kz hi jf b jg kb jk kc jo lu js lv jw lw ka ld le lf lg bi translated">创建<code class="du lx ly lz ma b">route_table_private.tf</code>文件，并将下面的代码添加到其中</li></ul><pre class="ki kj kk kl fd mb ma mc md aw me bi"><span id="8818" class="mf ig hi ma b fi mg mh l mi mj"># Creating Route Table for NAT Gateway<br/>resource "aws_route_table" "rt_NAT" {<br/>    vpc_id = aws_vpc.demovpc.id</span><span id="0af4" class="mf ig hi ma b fi mk mh l mi mj">route {<br/>        cidr_block = "0.0.0.0/0"<br/>        nat_gateway_id = aws_nat_gateway.gw.id<br/>    }</span><span id="4a1f" class="mf ig hi ma b fi mk mh l mi mj">tags = {<br/>        Name = "Main Route Table for Private subnet"<br/>    }<br/>}</span><span id="8782" class="mf ig hi ma b fi mk mh l mi mj">resource "aws_route_table_association" "rt_associate_private" {<br/>    subnet_id = aws_subnet.demosubnet1.id<br/>    route_table_id = aws_route_table.rt_private.id<br/>}</span></pre><p id="e27c" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">步骤11:- </strong>为<strong class="jf hj">私有子网</strong>创建一个文件</p><ul class=""><li id="1271" class="ky kz hi jf b jg kb jk kc jo lu js lv jw lw ka ld le lf lg bi translated">创建<code class="du lx ly lz ma b">private_subnet.tf</code>文件并将下面的代码添加到其中</li></ul><pre class="ki kj kk kl fd mb ma mc md aw me bi"><span id="1d6e" class="mf ig hi ma b fi mg mh l mi mj"># Creating Private subnet <br/>resource "aws_subnet" "demosubnet2" {<br/>  vpc_id                  = "${aws_vpc.demovpc.id}"<br/>  cidr_block             = "${var.subnet1_cidr}"<br/>  availability_zone = "us-east-1b"</span><span id="dad1" class="mf ig hi ma b fi mk mh l mi mj">tags = {<br/>    Name = "Private Subnet"<br/>  }<br/>}</span></pre><ul class=""><li id="24fe" class="ky kz hi jf b jg kb jk kc jo lu js lv jw lw ka ld le lf lg bi translated">到目前为止，这个子网不会作为私有子网，我们需要做一些修改。</li></ul><p id="c206" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">步骤12:- </strong>为<strong class="jf hj">私有子网</strong>的<strong class="jf hj">路由表</strong>创建一个文件</p><ul class=""><li id="b276" class="ky kz hi jf b jg kb jk kc jo lu js lv jw lw ka ld le lf lg bi translated">创建一个<code class="du lx ly lz ma b">route_table_private.tf</code>文件，并将下面的代码添加到其中。</li></ul><pre class="ki kj kk kl fd mb ma mc md aw me bi"><span id="a2f0" class="mf ig hi ma b fi mg mh l mi mj"># Creating Route table for Private Subnet<br/>resource "aws_route_table" "rt_private" {<br/>    vpc_id = aws_vpc.my_vpc.id</span><span id="864c" class="mf ig hi ma b fi mk mh l mi mj">tags = {<br/>        Name = "Route Table for the Private Subnet"<br/>    }<br/>}</span><span id="fc3e" class="mf ig hi ma b fi mk mh l mi mj">resource "aws_route_table_association" "rt_associate_private_2" {<br/>    subnet_id = aws_subnet.demosubnet2.id<br/>    route_table_id = aws_route_table.rt_private.id<br/>}</span></pre><ul class=""><li id="f289" class="ky kz hi jf b jg kb jk kc jo lu js lv jw lw ka ld le lf lg bi translated">在上面的代码中，我创建了没有路由声明的路由表，并将其与我们的<code class="du lx ly lz ma b">private</code>子网相关联</li></ul><p id="34a7" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">步骤13:- </strong>为<strong class="jf hj">私有子网</strong>中的<strong class="jf hj"> EC2实例</strong>创建一个文件</p><ul class=""><li id="67c1" class="ky kz hi jf b jg kb jk kc jo lu js lv jw lw ka ld le lf lg bi translated">创建一个<code class="du lx ly lz ma b">ec2_private.tf</code>文件，并将下面的代码添加到其中</li></ul><pre class="ki kj kk kl fd mb ma mc md aw me bi"><span id="7095" class="mf ig hi ma b fi mg mh l mi mj"># Creating EC2 instance in Private Subnet<br/>resource "aws_instance" "demoinstance1" {<br/>  ami           = "ami-087c17d1fe0178315"<br/>  instance_type = "t2.micro"<br/>  key_name = "tests"<br/>  vpc_security_group_ids = [ aws_security_group.allow_ssh.id ]<br/>  subnet_id = aws_subnet.demosubnet2.id</span><span id="ee7f" class="mf ig hi ma b fi mk mh l mi mj">tags = {<br/>    Name = "My Private Instance"<br/>  }<br/>}</span></pre><p id="ed41" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">步骤14:- </strong>创建一个<strong class="jf hj">变量</strong>文件</p><ul class=""><li id="a9ae" class="ky kz hi jf b jg kb jk kc jo lu js lv jw lw ka ld le lf lg bi translated">创建<code class="du lx ly lz ma b">vars.tf</code>文件，并将下面的代码添加到其中</li></ul><pre class="ki kj kk kl fd mb ma mc md aw me bi"><span id="fef5" class="mf ig hi ma b fi mg mh l mi mj"># Defining CIDR Block for VPC<br/>variable "vpc_cidr" {<br/>  default = "10.0.0.0/16"<br/>}</span><span id="3fa5" class="mf ig hi ma b fi mk mh l mi mj"># Defining CIDR Block for 1st Subnet<br/>variable "subnet_cidr" {<br/>  default = "10.0.1.0/24"<br/>}</span><span id="8627" class="mf ig hi ma b fi mk mh l mi mj"># Defining CIDR Block for 2nd Subnet<br/>variable "subnet1_cidr" {<br/>  default = "10.0.2.0/24"<br/>}</span><span id="4333" class="mf ig hi ma b fi mk mh l mi mj"># Defining CIDR Block for 3rd Subnet<br/>variable "subnet2_cidr" {<br/>  default = "10.0.3.0/24"<br/>}</span></pre><p id="4222" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">所以，现在我们的全部代码都准备好了。我们需要运行以下步骤来创建基础架构。</p><ul class=""><li id="9979" class="ky kz hi jf b jg kb jk kc jo lu js lv jw lw ka ld le lf lg bi translated"><code class="du lx ly lz ma b">terraform init</code>初始化提供者的工作目录和下载插件</li><li id="e3b5" class="ky kz hi jf b jg lh jk li jo lj js lk jw ll ka ld le lf lg bi translated"><code class="du lx ly lz ma b">terraform plan</code>是为我们的代码创建执行计划</li><li id="0ac6" class="ky kz hi jf b jg lh jk li jo lj js lk jw ll ka ld le lf lg bi translated"><code class="du lx ly lz ma b">terraform apply</code>是创造实际的基础设施。它会要求您提供<strong class="jf hj">访问密钥</strong>和<strong class="jf hj">秘密密钥</strong>，以便创建基础设施。因此，与其硬编码<strong class="jf hj">访问密钥</strong>和<strong class="jf hj">秘密密钥，</strong>不如在运行时应用。</li></ul><p id="414c" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">步骤15:- </strong>验证th <strong class="jf hj"> e资源</strong></p><ul class=""><li id="8fef" class="ky kz hi jf b jg kb jk kc jo lu js lv jw lw ka ld le lf lg bi translated">Terraform将创建以下资源</li></ul><ol class=""><li id="2a6e" class="ky kz hi jf b jg kb jk kc jo lu js lv jw lw ka ml le lf lg bi translated"><strong class="jf hj"> VPC </strong></li><li id="5c46" class="ky kz hi jf b jg lh jk li jo lj js lk jw ll ka ml le lf lg bi translated"><strong class="jf hj">EC2实例的公共子网&amp; NAT网关</strong></li><li id="802a" class="ky kz hi jf b jg lh jk li jo lj js lk jw ll ka ml le lf lg bi translated"><strong class="jf hj">EC2实例的专用子网</strong></li><li id="3e96" class="ky kz hi jf b jg lh jk li jo lj js lk jw ll ka ml le lf lg bi translated"><strong class="jf hj">公有&amp;私有子网和NAT网关</strong>路由表</li><li id="b674" class="ky kz hi jf b jg lh jk li jo lj js lk jw ll ka ml le lf lg bi translated"><strong class="jf hj">互联网网关</strong></li><li id="bd58" class="ky kz hi jf b jg lh jk li jo lj js lk jw ll ka ml le lf lg bi translated"><strong class="jf hj"> EIP </strong></li><li id="8ec7" class="ky kz hi jf b jg lh jk li jo lj js lk jw ll ka ml le lf lg bi translated"><strong class="jf hj"> NAT网关</strong></li><li id="03d7" class="ky kz hi jf b jg lh jk li jo lj js lk jw ll ka ml le lf lg bi translated"><strong class="jf hj">安全组</strong></li><li id="e557" class="ky kz hi jf b jg lh jk li jo lj js lk jw ll ka ml le lf lg bi translated"><strong class="jf hj"> EC2实例</strong></li></ol><p id="a80a" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">现在就这样，你已经学会了如何使用Terraform在AWS中创建各种资源。你可以在这里 进一步探索Terraform <a class="ae kg" href="https://terraform.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jf hj"/></a></p><p id="b4b2" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">你可以在我的<a class="ae kg" href="https://github.com/DhruvinSoni30/Terraform-AWS-Subnets" rel="noopener ugc nofollow" target="_blank"> <strong class="jf hj"> GitHub </strong> </a>账号找到完整的代码。也可以随意查看我的其他库。</p><p id="d000" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">如果您发现此指南有帮助，请点击👏按钮，也可以随意发表评论。</p><p id="03e2" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">关注更多类似的故事😊</p></div></div>    
</body>
</html>