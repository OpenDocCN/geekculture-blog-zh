<html>
<head>
<title>A Beginner's Guide To Integrate Swagger With Oracle API Gateway &amp; Functions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将Swagger与Oracle API Gateway &amp; Functions集成的初学者指南</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/a-beginners-guide-to-integrate-swagger-with-oracle-api-gateway-functions-5bd0a5519ec7?source=collection_archive---------39-----------------------#2021-06-28">https://medium.com/geekculture/a-beginners-guide-to-integrate-swagger-with-oracle-api-gateway-functions-5bd0a5519ec7?source=collection_archive---------39-----------------------#2021-06-28</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="422f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Swagger API文档生成以及与Oracle API Gateway的集成</p><h1 id="068d" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">概观</h1><p id="1dc8" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">这篇博客将解释如何使用Swagger编辑器生成Swagger API文档，如何在计算实例上本地运行Swagger UI，以及如何将Swagger UI与Oracle API网关集成。我会把Oracle博客链接的API网关和功能的创建。</p><p id="ac2b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">注意:这里我已经在Oracle云基础设施中创建了架构，但是如果你使用AWS或Azure，那么这个博客也会帮助你，因为要将swagger与API Gateway集成，我们需要在swagger文件中进行更改。</p><h1 id="b89f" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">内容:</h1><ol class=""><li id="fc9d" class="kg kh hi ih b ii kb im kc iq ki iu kj iy kk jc kl km kn ko bi translated">架构设置</li><li id="97f8" class="kg kh hi ih b ii kp im kq iq kr iu ks iy kt jc kl km kn ko bi translated">Swagger编辑器安装</li><li id="2241" class="kg kh hi ih b ii kp im kq iq kr iu ks iy kt jc kl km kn ko bi translated">Swagger UI和API网关集成</li></ol><h1 id="3b92" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">1.架构设置</h1><figure class="kv kw kx ky fd kz er es paragraph-image"><div class="er es ku"><img src="../Images/f8c4af95decf80ffdca8cdad3e4400fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1222/format:webp/1*fSZ3ld5WgQDhbq4eIbtO0g.png"/></div><figcaption class="lc ld et er es le lf bd b be z dx">OCI Architecture for Swagger by Vikas Gautam</figcaption></figure><h2 id="a170" class="lg je hi bd jf lh li lj jj lk ll lm jn iq ln lo jr iu lp lq jv iy lr ls jz lt bi translated">1.虚拟云网络</h2><p id="f235" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">首先，我们将创建一个带有互联网网关的VCN，为此步骤是:</p><ol class=""><li id="82fe" class="kg kh hi ih b ii ij im in iq lu iu lv iy lw jc kl km kn ko bi translated">打开导航菜单，选择网络，然后选择虚拟云网络(确保在隔离专区列表中选择了正确的隔离专区)。</li><li id="177d" class="kg kh hi ih b ii kp im kq iq kr iu ks iy kt jc kl km kn ko bi translated">单击启动VCN向导。</li><li id="3157" class="kg kh hi ih b ii kp im kq iq kr iu ks iy kt jc kl km kn ko bi translated">选择具有Internet连接的VCN，然后单击启动VCN向导。</li><li id="a108" class="kg kh hi ih b ii kp im kq iq kr iu ks iy kt jc kl km kn ko bi translated">填写VCN名称并选择区间，对于CIDR块，私有和公共子网范围选择默认值(CIDR=10.0.0.0/16，私有子网=10.0.0.0/24，公共子网=10.0.1.0/24)</li></ol><p id="88d7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这里，向导将创建VCN，并添加互联网和服务网关，我们也不需要做路由，因为向导会照顾它。</p><h2 id="bfe6" class="lg je hi bd jf lh li lj jj lk ll lm jn iq ln lo jr iu lp lq jv iy lr ls jz lt bi translated">2.虚拟计算机</h2><p id="032c" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">我们将在VCN的公共子网中创建一个计算实例，对于映像，我们将选择<strong class="ih hj"> Centos7。</strong></p><p id="c0df" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">创建计算实例的步骤如下:</p><ol class=""><li id="f105" class="kg kh hi ih b ii ij im in iq lu iu lv iy lw jc kl km kn ko bi translated">打开导航菜单，点击<strong class="ih hj">计算</strong>。在<strong class="ih hj">计算</strong>下，点击<strong class="ih hj">实例</strong>。</li><li id="c918" class="kg kh hi ih b ii kp im kq iq kr iu ks iy kt jc kl km kn ko bi translated">点击<strong class="ih hj">创建实例</strong>。</li><li id="1b3c" class="kg kh hi ih b ii kp im kq iq kr iu ks iy kt jc kl km kn ko bi translated">输入实例的名称。</li><li id="033e" class="kg kh hi ih b ii kp im kq iq kr iu ks iy kt jc kl km kn ko bi translated">选择<strong class="ih hj"> Centos7 </strong>图像。</li><li id="0299" class="kg kh hi ih b ii kp im kq iq kr iu ks iy kt jc kl km kn ko bi translated">外形AMD处理器1 GB和1个OCPU。</li><li id="d9e3" class="kg kh hi ih b ii kp im kq iq kr iu ks iy kt jc kl km kn ko bi translated">选择现有的VCN和公共子网，并分配公共IP。</li><li id="b321" class="kg kh hi ih b ii kp im kq iq kr iu ks iy kt jc kl km kn ko bi translated">为ssh生成或上传密钥。</li><li id="dd4c" class="kg kh hi ih b ii kp im kq iq kr iu ks iy kt jc kl km kn ko bi translated">创建实例。</li></ol><p id="a580" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦创建了实例，您将看到附加到该实例的公共IP，该公共IP将用于访问swagger UI。</p><h2 id="ad1a" class="lg je hi bd jf lh li lj jj lk ll lm jn iq ln lo jr iu lp lq jv iy lr ls jz lt bi translated">3.功能</h2><p id="501e" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">我们将创建一个Oracle应用程序，然后在该应用程序中创建一个函数，并将其部署在Oracle container registry上。</p><p id="0379" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">完成后，您可以使用命令<code class="du lx ly lz ma b">fn invoke &lt;application&gt; &lt;function&gt;</code>并检查函数的响应。</p><p id="e8dc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要创建Oracle函数，请关注本博客<a class="ae mb" href="https://docs.oracle.com/en-us/iaas/Content/Functions/Tasks/functionsuploading.htm" rel="noopener ugc nofollow" target="_blank"><em class="mc">https://docs . Oracle . com/en-us/iaas/Content/Functions/Tasks/Functions uploading . htm</em></a></p><h2 id="e59e" class="lg je hi bd jf lh li lj jj lk ll lm jn iq ln lo jr iu lp lq jv iy lr ls jz lt bi translated">4.API网关</h2><p id="b537" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">我们将创建一个public类型的Oracle网关，并在该网关中创建一个部署。一旦完成，您将拥有类似于<code class="du lx ly lz ma b">https:asdafrgsvsgwg.../&lt;path-prefix&gt;/&lt;path&gt;</code>的部署端点</p><p id="aa03" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要创建API网关并添加oracle函数或Rest APIs，请关注本博客<a class="ae mb" href="https://blogs.oracle.com/developers/creating-your-first-api-gateway-in-the-oracle-cloud" rel="noopener ugc nofollow" target="_blank"><em class="mc">https://blogs . Oracle . com/developers/creating-your-first-API-Gateway-in-the-Oracle-cloud</em></a></p><h1 id="8ce6" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">2.Swagger编辑器安装</h1><p id="8a60" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">我们将在公共子网上创建的计算实例上安装<strong class="ih hj"> swagger编辑器</strong>。在计算实例上安装swagger的步骤是</p><ol class=""><li id="55cf" class="kg kh hi ih b ii ij im in iq lu iu lv iy lw jc kl km kn ko bi translated">通过用户<code class="du lx ly lz ma b">opc</code>使用putty和逻辑对实例进行SSH。</li><li id="8ab7" class="kg kh hi ih b ii kp im kq iq kr iu ks iy kt jc kl km kn ko bi translated">使用命令<code class="du lx ly lz ma b">sudo yum install git</code>安装Git。</li><li id="ca17" class="kg kh hi ih b ii kp im kq iq kr iu ks iy kt jc kl km kn ko bi translated">安装码头工人<a class="ae mb" href="https://docs.docker.com/engine/install/centos/" rel="noopener ugc nofollow" target="_blank"><em class="mc">https://docs.docker.com/engine/install/centos/</em></a></li><li id="ce32" class="kg kh hi ih b ii kp im kq iq kr iu ks iy kt jc kl km kn ko bi translated">拉大摇大摆编辑器图像并运行它</li></ol><pre class="kv kw kx ky fd md ma me mf aw mg bi"><span id="0f34" class="lg je hi ma b fi mh mi l mj mk">sudo docker pull swaggerapi/swagger-editor<br/>sudo docker run -d -p 80:8080 swaggerapi/swagger-editor</span></pre><p id="64b1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">5.在公共子网安全列表中添加安全规则</p><pre class="kv kw kx ky fd md ma me mf aw mg bi"><span id="ecae" class="lg je hi ma b fi mh mi l mj mk">0.0.0.0/0    TCP    ALL    443<br/>0.0.0.0/0    TCP    ALL    80<br/>0.0.0.0/0    TCP    ALL    3001</span></pre><p id="b295" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从OCI控制台获取这个实例的公共Ip并粘贴到浏览器上，你会看到带有宠物店项目的swagger编辑器页面。</p><p id="f57e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">更多关于swagger编辑器的信息，请点击GitHub链接<a class="ae mb" href="https://github.com/swagger-api/swagger-editor" rel="noopener ugc nofollow" target="_blank"><em class="mc">https://github.com/swagger-api/swagger-editor</em></a></p><h2 id="9330" class="lg je hi bd jf lh li lj jj lk ll lm jn iq ln lo jr iu lp lq jv iy lr ls jz lt bi translated">3.Swagger UI和API网关集成</h2><p id="8174" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">首先，我们将使用swagger编辑器生成swagger API文档。</p><p id="1bf9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为此，我们只需要向Swagger编辑器yaml文件提供网关部署的主机和路径前缀。</p><p id="b5d8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">网关主机将看起来像<code class="du lx ly lz ma b"><a class="ae mb" href="https://asdassdf...oracle.com" rel="noopener ugc nofollow" target="_blank">https://asdassdf....com</a></code></p><p id="9ba8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">编辑YAML文件第12 &amp; 13行，你的基本网址将变成<code class="du lx ly lz ma b">https://&lt;Gateway Host&gt;/&lt;path-prefix&gt;</code></p><p id="a1d0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">之后，您可以用您的路径和方法替换路径中的<code class="du lx ly lz ma b">/pet</code>和方法。</p><p id="e060" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以当你点击一个API时，完整的URL将变成<code class="du lx ly lz ma b">https://&lt;Gateway Host&gt;/&lt;path-prefix&gt;/pet</code>，你可以通过检查swagger编辑器点击的curl命令来验证这个URL。</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="er es ml"><img src="../Images/cdaa0b378520ced6d488a740efd769c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8c7l7h4H-rgrYCCIcuSStg.jpeg"/></div></div></figure><p id="c33c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦你完成了修改，以YAML或JSON格式保存文件，提取<strong class="ih hj"> swagger-ui </strong> docker镜像并运行Swagger UI，请注意在下面的例子中我假设swagger.yaml文件存在于<code class="du lx ly lz ma b">./home/opc/swagger.yaml</code>中。</p><pre class="kv kw kx ky fd md ma me mf aw mg bi"><span id="2d37" class="lg je hi ma b fi mh mi l mj mk">sudo docker pull swaggerapi/swagger-ui<br/>sudo docker run -d -p 3001:8080 -v /home/opc/swagger.yaml:/swagger.yaml -e SWAGGER_JSON=/swagger.yaml  swaggerapi/swagger-ui</span></pre><p id="25d6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在您可以使用<code class="du lx ly lz ma b">public ip:3001</code>访问Swagger UI。</p></div><div class="ab cl mq mr gp ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="hb hc hd he hf"><h1 id="50d6" class="jd je hi bd jf jg mx ji jj jk my jm jn jo mz jq jr js na ju jv jw nb jy jz ka bi translated">结论:</h1><p id="c563" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">将Swagger与API网关集成非常容易，因为我们只需要提供网关的主机和部署的路径前缀。Swagger也非常有用，因为它为我们提供了很好的用户界面，节省了我们使用CURL命令的时间。</p><p id="1eaa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你的目标只是为前端开发者或非技术用户公开API，那么Swagger是值得推荐的。</p><h1 id="7f24" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">接下来是什么:</h1><p id="6462" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">我写关于Web应用和CloudNative方法的博客，你会在这里找到许多有趣的博客<a class="ae mb" rel="noopener" href="/@vgautam99">【https://medium.com/@vgautam99】T2</a></p><p id="a090" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于未来的博客，请在Medium上关注我，我会感谢这个博客上的掌声。</p></div></div>    
</body>
</html>