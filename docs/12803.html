<html>
<head>
<title>Cypress v10 — What’s new?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Cypress v10 —有什么新功能？</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/cypress-v10-whats-new-3752676ac927?source=collection_archive---------8-----------------------#2022-06-01">https://medium.com/geekculture/cypress-v10-whats-new-3752676ac927?source=collection_archive---------8-----------------------#2022-06-01</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/8ed5ed312c5c231d38cc509aad53eeeb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*diF3OzYLfvQ2xnmq1NJWKg.png"/></div></div></figure><p id="1b54" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你好，笨蛋们！！</p><p id="60ff" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">鉴于我最近加入了<a class="ae jo" href="https://www.cypress.io/" rel="noopener ugc nofollow" target="_blank"> Cypress.io </a>的<a class="ae jo" href="https://www.cypress.io/ambassadors/" rel="noopener ugc nofollow" target="_blank">大使计划</a>；它有一些额外的好处，其中之一是在公开发布之前先睹为快，我得到了Cypress v.10-beta的第一手资料，下面是我对v10版本的看法。</p><h1 id="b07b" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">Cypress v10提供的新增/删除功能列表:</h1><ul class=""><li id="63f4" class="kn ko hi is b it kp ix kq jb kr jf ks jj kt jn ku kv kw kx bi translated">组件测试现在是Cypress v10测试版的一部分</li><li id="4de1" class="kn ko hi is b it ky ix kz jb la jf lb jj lc jn ku kv kw kx bi translated">对配置文件的更改</li><li id="a97a" class="kn ko hi is b it ky ix kz jb la jf lb jj lc jn ku kv kw kx bi translated">让我们在E2E测试和组件测试之间选择/分离</li><li id="1e6b" class="kn ko hi is b it ky ix kz jb la jf lb jj lc jn ku kv kw kx bi translated">柏树工作室实验支持已被删除</li><li id="4d95" class="kn ko hi is b it ky ix kz jb la jf lb jj lc jn ku kv kw kx bi translated">刷新的测试运行程序(Cypress应用程序)用户界面</li></ul><figure class="le lf lg lh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ld"><img src="../Images/3ca0c9f3144859c369ce060b0ca0a243.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hSgBlJAutgYr2gxVQImeeQ.png"/></div></div><figcaption class="li lj et er es lk ll bd b be z dx">Cypress app Home Screen</figcaption></figure><ul class=""><li id="2390" class="kn ko hi is b it iu ix iy jb lm jf ln jj lo jn ku kv kw kx bi translated">有了新的增强，您可以从Cypress仪表板上看到您的测试运行历史(您必须登录)</li></ul><figure class="le lf lg lh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lp"><img src="../Images/07c5099d0eb5fcb88db0bf0adfe92c61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LFaqARyZEirK3JPy6szikg.png"/></div></div><figcaption class="li lj et er es lk ll bd b be z dx">Your Test runs from Cypress Dashboard</figcaption></figure><ul class=""><li id="e65d" class="kn ko hi is b it iu ix iy jb lm jf ln jj lo jn ku kv kw kx bi translated">在<strong class="is hj">赛普拉斯公开赛</strong>期间,“运行所有规格”和“运行过滤规格”的能力被移除。</li><li id="da20" class="kn ko hi is b it ky ix kz jb la jf lb jj lc jn ku kv kw kx bi translated">在cypress run和cypress open中添加了新的were和——组件CLI标志，允许用户运行或启动cypress进行特定的测试类型。如果在运行<strong class="is hj"> cypress run </strong>时没有提供测试类型特定的CLI标志，cypress将默认运行端到端测试。</li></ul><h1 id="2594" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">升级到Cypress v10</h1><p id="b9db" class="pw-post-body-paragraph iq ir hi is b it kp iv iw ix kq iz ja jb lq jd je jf lr jh ji jj ls jl jm jn hb bi translated">您必须首先安装最新的cypress依赖项到v10.x.x，并基于您的框架运行npm install或yarn install。</p><p id="fe43" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后使用<strong class="is hj"> <em class="lt">【柏树打开】</em> </strong>命令打开柏树</p><figure class="le lf lg lh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lu"><img src="../Images/60ec8d6ec70411987e9f34d97c347e43.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2vWSY-iPH6Ju2FKDZ13o4A.png"/></div></div></figure><p id="d5cf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一旦您选择了E2E测试，它将引导您到一个迁移助手屏幕，这将帮助您通过点击几个按钮来迁移您的测试:</p><p id="0978" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">1)您需要将您的测试从“集成”文件夹移动到“e2e”文件夹</p><blockquote class="lv lw lx"><p id="02d3" class="iq ir lt is b it iu iv iw ix iy iz ja ly jc jd je lz jg jh ji ma jk jl jm jn hb bi translated">您必须重命名您现有的测试，(这实际上更像是一个目录变更):在v10中，默认的spec文件夹已经从:cypress/integration-&gt; cypress/e2e</p></blockquote><p id="e260" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">因此，您新更新的测试应该如下所示:</p><figure class="le lf lg lh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mb"><img src="../Images/af028e7a66da585edfe57c2a3354019b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TJ5OisplRTTv_IeTWorf9Q.png"/></div></div><figcaption class="li lj et er es lk ll bd b be z dx">Before and after renaming your tests</figcaption></figure><p id="e7bc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">2)现有的支持文件也已更改:</p><blockquote class="lv lw lx"><p id="8c57" class="iq ir lt is b it iu iv iw ix iy iz ja ly jc jd je lz jg jh ji ma jk jl jm jn hb bi translated">因此，基本上，由于测试在E2E和组件测试之间有明显的区别，所以您现有的<strong class="is hj">cypress/support/index . js</strong>被更改为<strong class="is hj"> cypress/support/e2e.js </strong>或<strong class="is hj">cypress/support/componenet . js</strong></p></blockquote><figure class="le lf lg lh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mc"><img src="../Images/362e3ab02870c8f500864c98ef761bad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BiRAExtl8uyfLgu7_UvwRg.png"/></div></div><figcaption class="li lj et er es lk ll bd b be z dx">Before and after renaming your support file</figcaption></figure><p id="846c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">3)迁移您的配置文件:</p><ul class=""><li id="dd21" class="kn ko hi is b it iu ix iy jb lm jf ln jj lo jn ku kv kw kx bi translated">不再支持使用cypress.json配置文件。用一个<strong class="is hj"> cypress.config.js，cypress.config.ts，cypress.config.cjs </strong>或<strong class="is hj"> cypress.config.mjs </strong>文件替换这个配置文件。这种变化提供了更好的配置灵活性和可扩展性。</li><li id="a731" class="kn ko hi is b it ky ix kz jb la jf lb jj lc jn ku kv kw kx bi translated"><strong class="is hj">测试文件</strong>，<strong class="is hj">忽略测试文件</strong>选项被移除。该选项分别被新的<strong class="is hj"> specPattern </strong>、<strong class="is hj"> excludeSpecPattern </strong>选项取代<a class="ae jo" href="https://github.com/cypress-io/cypress-documentation/blob/10.0-changelog/content/_changelogs/guides/references/configuration" rel="noopener ugc nofollow" target="_blank"> specPattern </a>选项是一个新的测试类型特定配置选项，必须在<a class="ae jo" href="https://github.com/cypress-io/cypress-documentation/blob/10.0-changelog/guides/references/configuration#e2e" rel="noopener ugc nofollow" target="_blank"> e2e </a>和/或<a class="ae jo" href="https://github.com/cypress-io/cypress-documentation/blob/10.0-changelog/guides/references/configuration#component" rel="noopener ugc nofollow" target="_blank">组件</a>配置中定义。</li></ul><h1 id="f52e" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">使用Cypress v10可能会遇到的问题</h1><p id="651b" class="pw-post-body-paragraph iq ir hi is b it kp iv iw ix kq iz ja jb lq jd je jf lr jh ji jj ls jl jm jn hb bi translated">以下是我在测试版中遇到的问题列表:</p><ol class=""><li id="dcdb" class="kn ko hi is b it iu ix iy jb lm jf ln jj lo jn md kv kw kx bi translated">在headless和open测试运行期间，我让Cypress应用程序崩溃了多次；(根据互联网上的信息，您可以使用<strong class="is hj"> npm缓存清理-强制</strong>命令来避免，但对我无效)<strong class="is hj"/><a class="ae jo" href="https://github.com/cypress-io/cypress/issues/22002" rel="noopener ugc nofollow" target="_blank">https://github.com/cypress-io/cypress/issues/22002</a><br/><strong class="is hj">编辑</strong>:应在10.0.1版中修复</li></ol><figure class="le lf lg lh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es me"><img src="../Images/15a053a27cd8ac184f3bf9f553624191.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eh6t9OhN2QCav6gZo0zqkw.png"/></div></div><figcaption class="li lj et er es lk ll bd b be z dx">app crashing error</figcaption></figure><p id="b4c4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">2.对于那些将cypress与cucumber一起使用的人来说，他们将面临Cypress无法识别测试的问题，因为在迁移之后,“集成”文件夹被替换为“e2e”,<strong class="is hj">Cypress-cucumber-preprocessor</strong>仍然为step-defs搜索“集成”文件夹。</p><figure class="le lf lg lh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mf"><img src="../Images/8ef7891e7542250a612919458b8382ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RIL2wFO0cipv41Ooj7DnQQ.png"/></div></div><figcaption class="li lj et er es lk ll bd b be z dx">cypress-cucumber-preprocessor</figcaption></figure><blockquote class="lv lw lx"><p id="eb6f" class="iq ir lt is b it iu iv iw ix iy iz ja ly jc jd je lz jg jh ji ma jk jl jm jn hb bi translated">解决方法是保留您的。cypress目录下的cypress/e2e文件夹中的特性文件和cypress/integration文件夹下的所有测试定义，直到cypress-cumber-preprocessor支持v10</p></blockquote><p id="c276" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">3.Cypress在第一次启动时可能会抛出一个类似下面的与<strong class="is hj"> plugins/index.js </strong>文件相关的错误。</p><figure class="le lf lg lh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mg"><img src="../Images/47b87755bf096a66511e98680050ece3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Un1ojU9LG9vaogE-ZJYz7w.png"/></div></div><figcaption class="li lj et er es lk ll bd b be z dx">pluginsFile error on Cypress v10 first launch</figcaption></figure><blockquote class="lv lw lx"><p id="f3f3" class="iq ir lt is b it iu iv iw ix iy iz ja ly jc jd je lz jg jh ji ma jk jl jm jn hb bi translated">要继续，您需要注释掉您的插件文件内容，然后根据您的测试类型使用<strong class="is hj"> setupNodeEvents() </strong>或<strong class="is hj"> devServer() </strong>选项来引用任何插件文件</p></blockquote><pre class="le lf lg lh fd mh mi mj mk aw ml bi"><span id="32c9" class="mm jq hi mi b fi mn mo l mp mq">...<br/>e2e: {<br/>    // We've imported your old cypress plugins here.<br/>    // You may want to clean this up later by importing these.<br/>    setupNodeEvents(on, config) {<br/>      return require('./cypress/plugins/index.js')(on, config)<br/>    },<br/>    specPattern: 'cypress/e2e/**/*.{feature,features}',<br/>    excludeSpecPattern: ['**/stepDefinitions/*', '*.js', '*.md'],<br/>  },</span></pre><p id="c003" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在<strong class="is hj"> cypress.config.js </strong>中引用你的插件文件。</p><h1 id="3ab9" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">结束语:</h1><p id="771c" class="pw-post-body-paragraph iq ir hi is b it kp iv iw ix kq iz ja jb lq jd je jf lr jh ji jj ls jl jm jn hb bi translated">总而言之，Cypress v10是对Cypress.io的一个很有前途的更新，对于那些正在为他们的应用寻找新的e2e/组件测试工具的人来说，这将是一个很大的进步。</p><p id="b130" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">链接:</strong></p><p id="fe99" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Cypress v10变更日志:</p><div class="mr ms ez fb mt mu"><a href="https://docs.cypress.io/guides/references/changelog#10-0-0" rel="noopener  ugc nofollow" target="_blank"><div class="mv ab dw"><div class="mw ab mx cl cj my"><h2 class="bd hj fi z dy mz ea eb na ed ef hh bi translated">变更日志| Cypress文档</h2><div class="nb l"><h3 class="bd b fi z dy mz ea eb na ed ef dx translated">发布于2022年6月1日摘要:组件测试现在是测试版！我们还从头开始重新设计了Cypress应用程序…</h3></div><div class="nc l"><p class="bd b fp z dy mz ea eb na ed ef dx translated">docs.cypress.io</p></div></div><div class="nd l"><div class="ne l nf ng nh nd ni io mu"/></div></div></a></div><p id="9c92" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">官方声明:</p><div class="mr ms ez fb mt mu"><a href="https://www.cypress.io/blog/2022/06/01/cypress-10-release/" rel="noopener  ugc nofollow" target="_blank"><div class="mv ab dw"><div class="mw ab mx cl cj my"><h2 class="bd hj fi z dy mz ea eb na ed ef hh bi translated">宣布柏树10与组件测试测试版！</h2><div class="nb l"><h3 class="bd b fi z dy mz ea eb na ed ef dx translated">朋友们，你们好！今天，我们要分享一个激动人心的消息。上面的标题可能已经泄露了，但在…</h3></div><div class="nc l"><p class="bd b fp z dy mz ea eb na ed ef dx translated">www.cypress.io</p></div></div><div class="nd l"><div class="nj l nf ng nh nd ni io mu"/></div></div></a></div><p id="b35e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="lt">最初发布于</em><a class="ae jo" href="https://kushalbhalaik.xyz/blog/cypress-v10-whats-new/" rel="noopener ugc nofollow" target="_blank">https://kushalbhalaik . XYZ</a></p></div></div>    
</body>
</html>