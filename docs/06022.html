<html>
<head>
<title>How to send decentralized push notifications?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何发送分散推送通知？</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/how-to-send-decentralized-push-notifications-d851ae0a95ea?source=collection_archive---------11-----------------------#2021-08-04">https://medium.com/geekculture/how-to-send-decentralized-push-notifications-d851ae0a95ea?source=collection_archive---------11-----------------------#2021-08-04</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="60de" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">使用NodeJS &amp;以太坊区块链</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/663d0d63a96873de7b45cd5f2a424c3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZMPnodUIxLyVT8musHZNbw.jpeg"/></div></div></figure><p id="7fa2" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">耶！确实如此。现在，我们可以使用公共区块链以太坊以分散的方式发送推送通知。</p><p id="968d" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">推送通知在任何改善用户体验的应用中都是至关重要的。人们对应用程序更感兴趣，他们更喜欢实时信息，而不是通过电子邮件或短信延迟通知。但是DeFi空间仍然是新的，每天都在出现，它需要一些方法来通知他们的用户，这与他们的个人数据无关。在DeFi世界中，用户的唯一身份是他/她的钱包地址。</p><p id="1d0a" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">而这正是EPNS(以太坊推送通知服务)所做的。它帮助我们向用户发送推送通知，而不需要用户的任何个人信息。我们需要的只是用户的钱包地址。</p><p id="5e77" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">让我们用一个简单的例子来说明传统的推送通知系统是如何工作的:</p><ul class=""><li id="dec4" class="kf kg hi jl b jm jn jp jq js kh jw ki ka kj ke kk kl km kn bi translated">用户使用凭证登录到移动应用程序。</li><li id="a6ad" class="kf kg hi jl b jm ko jp kp js kq jw kr ka ks ke kk kl km kn bi translated">与用户设备相关联的唯一<code class="du kt ku kv kw b">device token</code>被发送到服务器。</li><li id="d630" class="kf kg hi jl b jm ko jp kp js kq jw kr ka ks ke kk kl km kn bi translated">服务器使用Firebase或Apple推送通知服务器，使用用户的设备令牌向设备发送推送通知。</li></ul><p id="37e5" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">传统的应用程序可以实现这个方法。但是不适合DeFi应用程序遵循相同的流程。</p><p id="04de" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">所以让我们来看看EPNS是如何工作的(简而言之)。</p><ul class=""><li id="65d9" class="kf kg hi jl b jm jn jp jq js kh jw ki ka kj ke kk kl km kn bi translated">DeFi应用程序管理员/所有者/管理者为应用程序创建一个通道。</li><li id="65a4" class="kf kg hi jl b jm ko jp kp js kq jw kr ka ks ke kk kl km kn bi translated">如果用户想要接收关于重要事件的通知，如清算他们在货币市场协议中的头寸等，他们可以使用他们的钱包订阅该频道。,</li><li id="0973" class="kf kg hi jl b jm ko jp kp js kq jw kr ka ks ke kk kl km kn bi translated">通知引擎可以监视平台上的事件，并向通道发送推送通知。它可以向特定的电子钱包地址广播或发送目标通知。</li><li id="9340" class="kf kg hi jl b jm ko jp kp js kq jw kr ka ks ke kk kl km kn bi translated">用户可以通过EPNS浏览器扩展(或)EPNS移动应用程序接收通知。</li></ul><p id="93b7" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">就这么简单！</p><p id="3f54" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">让我们构建一个简单的NodeJS服务进行演示。这是一个简单的新闻服务，每30分钟发送一次关于加密货币的最新消息。虽然它与DeFi无关，但足以演示频道创建和向频道订户广播消息。</p><h1 id="04e5" class="kx ky hi bd kz la lb lc ld le lf lg lh io li ip lj ir lk is ll iu lm iv ln lo bi translated">创建我们的新闻频道:</h1><p id="7b0c" class="pw-post-body-paragraph jj jk hi jl b jm lp ij jo jp lq im jr js lr ju jv jw ls jy jz ka lt kc kd ke hb bi translated">我们有两个选择:</p><ul class=""><li id="8cdd" class="kf kg hi jl b jm jn jp jq js kh jw ki ka kj ke kk kl km kn bi translated">使用NodeJS脚本创建通道</li><li id="a59a" class="kf kg hi jl b jm ko jp kp js kq jw kr ka ks ke kk kl km kn bi translated">使用EPNS web界面创建频道。</li></ul><p id="537d" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在本次演示中，我将使用EPNS web界面创建频道。</p><blockquote class="lu lv lw"><p id="0c40" class="jj jk lx jl b jm jn ij jo jp jq im jr ly jt ju jv lz jx jy jz ma kb kc kd ke hb bi translated">请参考<a class="ae mb" href="https://gist.github.com/PraneshASP/3f72eb906df2fec432d7558c39bc9a3b" rel="noopener ugc nofollow" target="_blank">此链接</a>，其中包含可用于创建频道的NodeJS脚本。</p></blockquote><p id="e570" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">让我们打开他们的分期应用——<a class="ae mb" href="https://staging-app.epns.io" rel="noopener ugc nofollow" target="_blank">https://staging-app . epns . io</a></p><p id="ed33" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">连接您的web3钱包。在这个演示中，我将使用MetaMask。连接后，点击<code class="du kt ku kv kw b">Create Your Channel</code>选项卡。</p><p id="a0b7" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">通过上传频道图标、频道名称、图片等，可以从界面创建频道。,</p><p id="fe22" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">对于这个演示，我创建了一个简单的新闻频道，详细信息如下</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mc"><img src="../Images/094ebf8cb68f80207044c132e852db94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rF8QKZ8fwSK9IEPdYBxPVA.png"/></div></div></figure><blockquote class="lu lv lw"><p id="3971" class="jj jk lx jl b jm jn ij jo jp jq im jr ly jt ju jv lz jx jy jz ma kb kc kd ke hb bi translated"><strong class="jl hj">注意</strong>:你需要一些戴代币来创建一个频道。可以从<code class="du kt ku kv kw b">Get Free DAI for Channel</code>按钮或者mint手动获取。</p></blockquote><p id="95a7" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">创建频道后，您可以在<code class="du kt ku kv kw b">Channels</code>选项卡下看到频道名称和描述。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es md"><img src="../Images/2a75f0db0109602155052dc7354be90b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M1O6ab9POApHTm14UcfC-A.png"/></div></div></figure><p id="8b88" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">太好了！现在，其他用户可以订阅该频道来接收通知。</p><h1 id="e1f1" class="kx ky hi bd kz la lb lc ld le lf lg lh io li ip lj ir lk is ll iu lm iv ln lo bi translated">发送通知:</h1><p id="2b7c" class="pw-post-body-paragraph jj jk hi jl b jm lp ij jo jp lq im jr js lr ju jv jw ls jy jz ka lt kc kd ke hb bi translated">我们可以通过编程以及通过接口发送通知。如果我们需要发送我们平台的重要消息，那么我们可以使用接口来发送。但是如果我们想要基于一些事件来自动化它，那么通知可以以编程方式发送。</p><p id="7484" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">下面是一个简单的脚本，用于将新闻数据发送给所有订阅者(广播)</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="me mf l"/></div></figure><p id="6159" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">您可以看到<code class="du kt ku kv kw b">sendMessage</code>方法接收新闻的<code class="du kt ku kv kw b">title</code>和<code class="du kt ku kv kw b">description</code>，并使用EPNS智能合约的<code class="du kt ku kv kw b">sendNotification</code>方法广播它。</p><p id="92ff" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">下面是新闻服务如何每30分钟调用一次<code class="du kt ku kv kw b">sendMessage</code>函数。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="me mf l"/></div></figure><p id="d320" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">您可以使用staging EPNS chrome扩展来接收通知。android和iOS上也有针对EPNS的移动应用程序，但它们只针对app.epns.io上创建和列出的频道，出于测试目的，我们可以使用它们的浏览器扩展来接收通知。</p><p id="93c8" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">我们需要首先添加我们的钱包地址来接收通知。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mg"><img src="../Images/cc73d320eb5af8608fc1912fe742ff16.png" data-original-src="https://miro.medium.com/v2/resize:fit:798/format:webp/1*hcttA8--CXbpxe7z47UqiA.png"/></div></figure><p id="2bd0" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">添加钱包地址后，您就可以从订阅的频道接收通知</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mh"><img src="../Images/1256e31d62c0dd08da83def30f58dc20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1018/format:webp/1*T5hQtv1na5qEPglIWZa9kg.png"/></div></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mi"><img src="../Images/8ea84b23a3468066966cdc11cfb00a0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:826/format:webp/1*wXgIX3FCv09Nb81elBUYVw.png"/></div></figure></div><div class="ab cl mj mk gp ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="hb hc hd he hf"><p id="b5dc" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">EPNS仍处于开发阶段，还没有为每个应用程序创建频道做好生产准备。EPNS团队正在与一些著名的协议合作，如AAVE、PoolTogether，以集成推送通知。希望它能很快为所有用户推出。与此同时，我们可以玩阿尔法分期应用程序。</p><p id="86bc" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">编码快乐！</p></div></div>    
</body>
</html>