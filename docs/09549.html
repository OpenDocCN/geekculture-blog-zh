<html>
<head>
<title>LeetCode — Count Primes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">LeetCode —计算素数</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/leetcode-count-primes-447225978efe?source=collection_archive---------6-----------------------#2021-12-16">https://medium.com/geekculture/leetcode-count-primes-447225978efe?source=collection_archive---------6-----------------------#2021-12-16</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><h1 id="a30d" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">问题陈述</h1><p id="63e1" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">给定一个整数<em class="kb"> n </em>，返回<em class="kb">严格小于n </em>的素数个数。</p><p id="a197" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated"><strong class="jf hj">例一:</strong></p><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="b977" class="kq ig hi km b fi kr ks l kt ku">Input: n = 10<br/>Output: 4<br/>Explanation: There are 4 prime numbers less than 10, they are 2, 3, 5, 7.</span></pre><p id="b7f7" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated"><strong class="jf hj">例2: </strong></p><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="8ce9" class="kq ig hi km b fi kr ks l kt ku">Input: n = 0<br/>Output: 0</span></pre><p id="d860" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated"><strong class="jf hj">例3: </strong></p><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="453e" class="kq ig hi km b fi kr ks l kt ku">Input: n = 1<br/>Output: 0</span></pre><p id="2249" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated"><strong class="jf hj">约束条件</strong></p><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="b49d" class="kq ig hi km b fi kr ks l kt ku">- 0 &lt;= n &lt;= 5 * 10^6</span></pre><h1 id="3157" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">说明</h1><h2 id="809e" class="kq ig hi bd ih kv kw kx il ky kz la ip jo lb lc it js ld le ix jw lf lg jb lh bi translated">强力方法</h2><p id="daa1" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">最简单的解决方案是检查从3到n的每个数字，并验证它是否是质数。</p><p id="a96f" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">这种方法的C++代码片段如下所示:</p><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="bdb7" class="kq ig hi km b fi kr ks l kt ku">bool isPrime(int n){<br/>    if (n &lt;= 1)<br/>        return false;</span><span id="d89f" class="kq ig hi km b fi li ks l kt ku">    for (int i = 2; i &lt; n; i++)<br/>        if (n % i == 0)<br/>            return false;</span><span id="0847" class="kq ig hi km b fi li ks l kt ku">    return true;<br/>}</span><span id="c5e3" class="kq ig hi km b fi li ks l kt ku">int printPrime(int n){<br/>    // since 2 is prime we set count to 1<br/>    int count = 1;</span><span id="7bcd" class="kq ig hi km b fi li ks l kt ku">    for (int i = 3; i &lt; n; i++) {<br/>        if (isPrime(i))<br/>            count++;<br/>    }</span><span id="a04a" class="kq ig hi km b fi li ks l kt ku">    return count;<br/>}</span></pre><p id="97b1" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">上述方法的时间复杂度为<strong class="jf hj"> O(N ) </strong>。</p><h2 id="2701" class="kq ig hi bd ih kv kw kx il ky kz la ip jo lb lc it js ld le ix jw lf lg jb lh bi translated">平方根法</h2><p id="377a" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">通过迭代直到数的平方根，可以进一步优化这种粗暴的方法。</p><p id="4716" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">让我们用C++来检验这种方法。</p><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="6eb5" class="kq ig hi km b fi kr ks l kt ku">bool isPrime(int n){<br/>    if (n &lt;= 1)<br/>        return false;<br/>    if (n &lt;= 3)<br/>        return true;</span><span id="4608" class="kq ig hi km b fi li ks l kt ku">    if (n % 2 == 0 || n % 3 == 0)<br/>        return false;</span><span id="5f18" class="kq ig hi km b fi li ks l kt ku">    for (int i = 5; i * i &lt;= n; i = i + 6)<br/>        if (n % i == 0 || n % (i + 2) == 0)<br/>            return false;</span><span id="4ccd" class="kq ig hi km b fi li ks l kt ku">    return true;<br/>}</span><span id="38eb" class="kq ig hi km b fi li ks l kt ku">int printPrime(int n){<br/>    int count = 0;</span><span id="f6f9" class="kq ig hi km b fi li ks l kt ku">    for (int i = 2; i &lt; n; i++) {<br/>        if (isPrime(i))<br/>            count++;<br/>    }</span><span id="2d24" class="kq ig hi km b fi li ks l kt ku">    return count;<br/>}</span></pre><p id="8dcc" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">这种方法的时间复杂度降低到<strong class="jf hj">o(n^(3/2)</strong>。</p><h2 id="ae83" class="kq ig hi bd ih kv kw kx il ky kz la ip jo lb lc it js ld le ix jw lf lg jb lh bi translated">厄拉多塞筛</h2><p id="3c7b" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">最好的方法是使用厄拉多塞算法的筛子。</p><p id="aa82" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">让我们检查算法:</p><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="9f9f" class="kq ig hi km b fi kr ks l kt ku">- return 0 if n &lt;= 2</span><span id="841c" class="kq ig hi km b fi li ks l kt ku">- initialize bool primes array<br/>  bool primes[n]</span><span id="69de" class="kq ig hi km b fi li ks l kt ku">- initialize i, j and set count = 0</span><span id="e001" class="kq ig hi km b fi li ks l kt ku">- set all primes array value to true<br/>  - loop for i = 2; i &lt; n; i++<br/>    - primes[i] = true</span><span id="826d" class="kq ig hi km b fi li ks l kt ku">- loop for i = 2; i &lt;= sqrt(n); i++<br/>  - if primes[i]<br/>    - loop for j = i + i; j &lt; n; j += i<br/>      - primes[j] = false</span><span id="f0d7" class="kq ig hi km b fi li ks l kt ku">- count all primes[i] = true<br/>  loop for i = 2; i &lt; n; i++<br/>    - if primes[i]<br/>      - count = count + 1</span><span id="4c01" class="kq ig hi km b fi li ks l kt ku">- return count</span></pre><p id="0dc3" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">该方法的时间复杂度为<strong class="jf hj"> O(N * loglog(N)) </strong>。</p><h2 id="ba7f" class="kq ig hi bd ih kv kw kx il ky kz la ip jo lb lc it js ld le ix jw lf lg jb lh bi translated">C++解决方案</h2><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="8f7f" class="kq ig hi km b fi kr ks l kt ku">class Solution {<br/>public:<br/>    int countPrimes(int n) {<br/>        if(n &lt;= 2)<br/>            return 0;</span><span id="1222" class="kq ig hi km b fi li ks l kt ku">        bool primes[n];<br/>        int i, j, count = 0;</span><span id="b188" class="kq ig hi km b fi li ks l kt ku">        for(i = 2; i &lt; n; i++){<br/>            primes[i] = true;<br/>        }</span><span id="f357" class="kq ig hi km b fi li ks l kt ku">        for(i = 2; i &lt;= sqrt(n); i++){<br/>            if(primes[i]){<br/>                for(j = i+i; j &lt; n; j += i)<br/>                    primes[j] = false;<br/>            }<br/>        }</span><span id="e1f5" class="kq ig hi km b fi li ks l kt ku">        for(i = 2; i &lt; n; i++)<br/>            if(primes[i])<br/>                count++;</span><span id="651a" class="kq ig hi km b fi li ks l kt ku">        return count;<br/>    }<br/>};</span></pre><h2 id="eb33" class="kq ig hi bd ih kv kw kx il ky kz la ip jo lb lc it js ld le ix jw lf lg jb lh bi translated">戈朗溶液</h2><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="e5f0" class="kq ig hi km b fi kr ks l kt ku">func countPrimes(n int) int {<br/>    if n &lt;= 2 {<br/>        return 0<br/>    }</span><span id="9701" class="kq ig hi km b fi li ks l kt ku">    primes := make([]bool, n)<br/>    count := 0</span><span id="ff69" class="kq ig hi km b fi li ks l kt ku">    for i := 2; i &lt; n; i++ {<br/>        primes[i] = true<br/>    }</span><span id="6969" class="kq ig hi km b fi li ks l kt ku">    for i := 2; i &lt;= int(math.Sqrt(float64(n))); i++ {<br/>        if primes[i] {<br/>            for j := i+i; j &lt; n; j += i {<br/>                primes[j] = false<br/>            }<br/>        }<br/>    }</span><span id="9f70" class="kq ig hi km b fi li ks l kt ku">    for i := 2; i &lt; n; i++{<br/>        if primes[i] {<br/>            count++<br/>        }<br/>    }</span><span id="1892" class="kq ig hi km b fi li ks l kt ku">    return count<br/>}</span></pre><h2 id="bc53" class="kq ig hi bd ih kv kw kx il ky kz la ip jo lb lc it js ld le ix jw lf lg jb lh bi translated">Javascript解决方案</h2><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="e9a7" class="kq ig hi km b fi kr ks l kt ku">var countPrimes = function(n) {<br/>    if( n &lt;= 2 ) {<br/>        return 0;<br/>    }</span><span id="5a7a" class="kq ig hi km b fi li ks l kt ku">    let primes = [];<br/>    let i, j, count = 0;</span><span id="511f" class="kq ig hi km b fi li ks l kt ku">    for( i = 2; i &lt; n; i++ ){<br/>        primes[i] = true;<br/>    }</span><span id="7321" class="kq ig hi km b fi li ks l kt ku">    for( i = 2; i &lt;= Math.sqrt(n); i++ ){<br/>        if( primes[i] ){<br/>            for( j = i + i; j &lt; n; j += i )<br/>                primes[j] = false;<br/>        }<br/>    }</span><span id="a55f" class="kq ig hi km b fi li ks l kt ku">    for( i = 2; i &lt; n; i++ )<br/>        if( primes[i] )<br/>            count++;</span><span id="1945" class="kq ig hi km b fi li ks l kt ku">    return count;<br/>};</span></pre><p id="6425" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">让我们试运行一下我们的算法，看看解决方案是如何工作的。</p><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="173d" class="kq ig hi km b fi kr ks l kt ku">Input: n = 10</span><span id="a4be" class="kq ig hi km b fi li ks l kt ku">Step 1: if n &lt;= 2<br/>        10 &lt; 2<br/>        false</span><span id="860d" class="kq ig hi km b fi li ks l kt ku">Step 2: bool primes[n]<br/>        int i, j, count = 0</span><span id="3fbd" class="kq ig hi km b fi li ks l kt ku">Step 3: loop for(i = 2; i &lt; n; i++){<br/>            primes[i] = true<br/>        }</span><span id="112e" class="kq ig hi km b fi li ks l kt ku">        so all values from primes[0] to primes[9] are set to true.</span><span id="5f3e" class="kq ig hi km b fi li ks l kt ku">Step 4: loop for i = 2; i &lt;= sqrt(n)<br/>          i &lt;= sqrt(10)<br/>          2 &lt;= 3<br/>          true</span><span id="db13" class="kq ig hi km b fi li ks l kt ku">          if primes[2]<br/>            true</span><span id="5515" class="kq ig hi km b fi li ks l kt ku">          loop for j = i + i; j &lt; n<br/>            j = i + i<br/>              = 4</span><span id="d39e" class="kq ig hi km b fi li ks l kt ku">            j &lt; n<br/>            4 &lt; 10<br/>            true</span><span id="1bba" class="kq ig hi km b fi li ks l kt ku">            primes[j] = false<br/>            primes[4] = false</span><span id="e581" class="kq ig hi km b fi li ks l kt ku">            j += i<br/>            j = j + i<br/>              = 4 + 2<br/>              = 6</span><span id="6a72" class="kq ig hi km b fi li ks l kt ku">            j &lt; n<br/>            6 &lt; 10<br/>            true</span><span id="6d65" class="kq ig hi km b fi li ks l kt ku">            primes[j] = false<br/>            primes[6] = false</span><span id="b008" class="kq ig hi km b fi li ks l kt ku">            j += i<br/>            j = j + i<br/>              = 6 + 2<br/>              = 8</span><span id="2fa2" class="kq ig hi km b fi li ks l kt ku">            j &lt; n<br/>            8 &lt; 10<br/>            true</span><span id="5104" class="kq ig hi km b fi li ks l kt ku">            primes[j] = false<br/>            primes[8] = false</span><span id="c9cf" class="kq ig hi km b fi li ks l kt ku">            j += i<br/>            j = j + i<br/>              = 8 + 2<br/>              = 10</span><span id="53a0" class="kq ig hi km b fi li ks l kt ku">            j &lt; n<br/>            10 &lt; 10<br/>            false</span><span id="0606" class="kq ig hi km b fi li ks l kt ku">            i++<br/>            i = 3</span><span id="0ab8" class="kq ig hi km b fi li ks l kt ku">Step 5: i &lt;= sqrt(10)<br/>        3 &lt;= 3<br/>        true</span><span id="e410" class="kq ig hi km b fi li ks l kt ku">        if primes[3]<br/>            true</span><span id="9583" class="kq ig hi km b fi li ks l kt ku">        loop for j = i + i; j &lt; n<br/>             j = i + i<br/>               = 6</span><span id="de4f" class="kq ig hi km b fi li ks l kt ku">        j &lt; n<br/>        6 &lt; 10<br/>        true</span><span id="8b64" class="kq ig hi km b fi li ks l kt ku">        primes[j] = false<br/>        primes[6] = false</span><span id="a21c" class="kq ig hi km b fi li ks l kt ku">        j += i<br/>        j = j + i<br/>          = 6 + 3<br/>          = 9</span><span id="fd16" class="kq ig hi km b fi li ks l kt ku">        j &lt; n<br/>        9 &lt; 10<br/>        true</span><span id="8589" class="kq ig hi km b fi li ks l kt ku">        primes[j] = false<br/>        primes[9] = false</span><span id="4c61" class="kq ig hi km b fi li ks l kt ku">        j += i<br/>        j = j + i<br/>          = 9 + 3<br/>          = 12</span><span id="be4f" class="kq ig hi km b fi li ks l kt ku">        j &lt; n<br/>        12 &lt; 10<br/>        false</span><span id="b369" class="kq ig hi km b fi li ks l kt ku">        i++<br/>        i = 4</span><span id="db42" class="kq ig hi km b fi li ks l kt ku">Step 6: i &lt;= sqrt(10)<br/>        4 &lt;= 3<br/>        false</span><span id="b56c" class="kq ig hi km b fi li ks l kt ku">Step 7: loop for i = 2; i &lt; n; i++<br/>              if primes[i]<br/>                count++</span><span id="8921" class="kq ig hi km b fi li ks l kt ku">        primes from index 2<br/>        = [true, true, false, true, false, true, false, false]<br/>        so count of true is 4.</span><span id="efcb" class="kq ig hi km b fi li ks l kt ku">Step 8: return count</span><span id="7e20" class="kq ig hi km b fi li ks l kt ku">So we return the answer as 4.</span></pre></div><div class="ab cl lj lk gp ll" role="separator"><span class="lm bw bk ln lo lp"/><span class="lm bw bk ln lo lp"/><span class="lm bw bk ln lo"/></div><div class="hb hc hd he hf"><p id="7439" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated"><em class="kb">原载于</em><a class="ae lq" href="https://alkeshghorpade.me/post/leetcode-count-primes" rel="noopener ugc nofollow" target="_blank"><em class="kb">https://alkeshghorpade . me</em></a><em class="kb">。</em></p></div></div>    
</body>
</html>