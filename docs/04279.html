<html>
<head>
<title>Phase II: Homing Missile, Part 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">第二阶段:寻的导弹，第二部分</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/phase-ii-homing-missile-part-2-cd0be12d3323?source=collection_archive---------46-----------------------#2021-06-23">https://medium.com/geekculture/phase-ii-homing-missile-part-2-cd0be12d3323?source=collection_archive---------46-----------------------#2021-06-23</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="e0c9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">目标:现在我已经完成了剩下的功能，我需要创建一个导弹预置，并编程让它向最近的敌人移动。</p><p id="7d46" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是我用在寻的导弹上的图像，以及它和玩家飞船的相对大小。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/5ecc0be67c78233decd6fb9a5bdd53d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:530/format:webp/1*WLrDzO63Cu_4MyEpipclTQ.png"/></div></figure><p id="79c7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦我创建了一个寻的导弹的预设，我添加了一个刚体和一个胶囊碰撞器，并为导弹调整了碰撞器的大小。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jl"><img src="../Images/72455b04d1e40bc1663d63c876e62030.png" data-original-src="https://miro.medium.com/v2/resize:fit:880/format:webp/1*iGIzCMnZK66vLwngrxlRRg.png"/></div><figcaption class="jm jn et er es jo jp bd b be z dx">A missile with Capsule Collider</figcaption></figure><p id="b598" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后我创建一个HomingMissile脚本，并将其添加到预设中。</p><p id="6bb5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第一件事是添加一些我需要的变量。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es jq"><img src="../Images/0d52dcf0f04cee671ffb8e1baee3e79f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c23F71oIT_z8WTYyCVCo6Q.png"/></div></div><figcaption class="jm jn et er es jo jp bd b be z dx">Variables for the Homing Missile</figcaption></figure><p id="7162" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我将创建两个方法:GetNearestEnemy()，它执行它所说的并获得最近的敌人，然后它将返回一个名为_enemyTarget的游戏对象类型。这个方法将从Start()方法调用一次。完整方法如下。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es jv"><img src="../Images/f09f8bfe84fa5246d218aeda52990f31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2inftJBlvCZ4r5gZzSzkfA.png"/></div></div><figcaption class="jm jn et er es jo jp bd b be z dx">GetNearestEnemy() method</figcaption></figure><p id="c823" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在此方法中，我们执行以下操作:</p><ul class=""><li id="9cd9" class="jw jx hi ih b ii ij im in iq jy iu jz iy ka jc kb kc kd ke bi translated">通过找到所有被标记为敌人的物体来填充数组元素</li><li id="50d0" class="jw jx hi ih b ii kf im kg iq kh iu ki iy kj jc kb kc kd ke bi translated">将变量for _currentPosition设置为导弹的transform.position</li><li id="73ad" class="jw jx hi ih b ii kf im kg iq kh iu ki iy kj jc kb kc kd ke bi translated">开始时将_minDistance变量设置为无穷大(当我们遍历数组中的敌人时，这个变量会被修改)</li><li id="5878" class="jw jx hi ih b ii kf im kg iq kh iu ki iy kj jc kb kc kd ke bi translated">然后，我们循环遍历_availableEnemies数组，检查导弹和敌人之间的距离，并将_enemyTarget依次设置为每个敌人，并将_minDistance设置为到该敌人的距离。</li><li id="f38d" class="jw jx hi ih b ii kf im kg iq kh iu ki iy kj jc kb kc kd ke bi translated">最后，一旦我们检查了所有可用的敌人，我们返回_enemyTarget，这将是最近的一个。</li></ul><p id="23d9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下一个方法是HomeInTarget()。这个方法将在Update()中被调用，并控制导弹向目标的移动。完整方法如下。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es kk"><img src="../Images/8c56137c819b24f7fca03118b83199d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w7rLwCoTebhKqDl4xVplPQ.png"/></div></div><figcaption class="jm jn et er es jo jp bd b be z dx">HomeInTarget() method</figcaption></figure><p id="d7ff" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，我检查_enemytarget是否为空。如果它不为空，我就进入If语句。否则，我转到else语句，该语句通过再次调用GetNearestEnemy()来设置s _enemyTarget。</p><p id="ed9f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果敌人不为空，我检查以确保距离不为0，然后继续朝着目标移动和旋转导弹。</p><p id="5422" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在HomeInTarget()方法之后，我还添加了一个回调OnBecameInvisible()，它检查对象是否对摄像机不再可见，然后销毁它。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es kl"><img src="../Images/44d631cd1cff3211d9524b69753b2c39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dchxljYVdSrGT7E5Bt0W3A.png"/></div></div></figure><p id="610e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我需要做的最后一件事是在玩家脚本中设置功能来实例化导弹和敌人，以知道他们何时被击中。</p><p id="ff68" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，在播放器脚本中，我添加了一个从Update()方法调用的MissileControl()方法。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es km"><img src="../Images/d9a2961b664cecd5eecd48a72c1a5bb1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HHBuOaMHRD7R7x_xZiruSg.png"/></div></div></figure><p id="2641" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这将检查玩家是否按下了“x”键，以及他们是否有导弹。如果两者都是真的，那么它就会实例化导弹预置。之后，它将_missileCount减1，然后检查_missileCount是否小于0。如果是，它将计数更改为0。</p><p id="65b6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我需要为敌人做的只是在OnTriggerEnter2D()事件中添加一个标记“HomingMissile”的检查。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es kn"><img src="../Images/79235f023387d537947c48b04219928f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ciHqKAVUJ6jDbpN4kTtkiQ.png"/></div></div></figure><p id="ed34" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这给了我一个功能性的寻的导弹。玩家可以通过加电收集最多三枚导弹，并可以使用“x”键分别发射导弹和激光。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es ko"><img src="../Images/76e58a0eed12f83eff152e216fbca13b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*W5kdF6Q0tIFXj4piZDJx8A.gif"/></div></div></figure><p id="ee47" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你甚至可以看到，如果一个敌人在导弹到达之前被摧毁，它就会寻找另一个目标。所以我对这个结果很满意。</p><p id="da68" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">好了，我希望您觉得这很有趣，下次再见，祝您在编码之旅中一切顺利。</p></div></div>    
</body>
</html>