<html>
<head>
<title>How to run an ansible playbook using GitLab CI/CD?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用GitLab CI/CD运行ansible剧本？</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/how-to-run-an-ansible-playbook-using-gitlab-ci-cd-2135f76d7f1e?source=collection_archive---------0-----------------------#2021-09-06">https://medium.com/geekculture/how-to-run-an-ansible-playbook-using-gitlab-ci-cd-2135f76d7f1e?source=collection_archive---------0-----------------------#2021-09-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><h1 id="e389" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">什么是GitLab CI/CD？</h1><p id="7ed5" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated"><strong class="jf hj"> GitLab CI/CD </strong>是<strong class="jf hj">git lab</strong>的一部分，用于所有的<strong class="jf hj">连续方法(连续集成、交付和部署)</strong>。使用<strong class="jf hj"> GitLab CI/CD </strong>，您可以<strong class="jf hj">测试</strong>，<strong class="jf hj">构建</strong>，以及<strong class="jf hj">发布</strong>您的代码，无需第三方应用或集成。</p><p id="c4b6" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">点击 阅读更多关于<strong class="jf hj"> GitLab CI/CD </strong> <a class="ae kg" href="https://docs.gitlab.com/ee/ci/" rel="noopener ugc nofollow" target="_blank"> <strong class="jf hj">。</strong></a></p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es kh"><img src="../Images/36bc925ddae227ba98db348014bdd2cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KpZOSdvsgRNN3zA4pXtn7Q.png"/></div></div><figcaption class="kt ku et er es kv kw bd b be z dx">GitLab CI/CD</figcaption></figure><h1 id="5dd3" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">什么是Ansible？</h1><p id="08df" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated"><strong class="jf hj"> Ansible </strong>是一款开源的<strong class="jf hj">软件配置</strong>、<strong class="jf hj">配置</strong>、<strong class="jf hj">管理</strong>、<strong class="jf hj">部署</strong>工具。它运行在许多类Unix系统上，可以配置类Unix系统和Microsoft Windows。Ansible使用SSH协议来配置远程服务器。Ansible遵循基于推的机制来配置远程服务器。</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es kx"><img src="../Images/e7795ee3abe3c42891f742d5e8d9bfde.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*sfIV0M_n1XYafJSq.png"/></div></div><figcaption class="kt ku et er es kv kw bd b be z dx">Ansible</figcaption></figure><h1 id="46a5" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">什么是可旋转拱顶？</h1><p id="e1f5" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated"><strong class="jf hj"> Ansible Vault </strong>是Ansible的一项功能，它允许您将密码或密钥等敏感数据保存在加密文件中，而不是以明文形式保存在剧本或角色中。您可以创建新的加密文件，也可以修改现有的加密文件。</p><p id="6e5e" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">在本教程中，我将<strong class="jf hj"> Ansible </strong>与<strong class="jf hj"> GitLab CI/CD </strong>集成在一起，并在<strong class="jf hj"> AWS </strong>上创建了各种资源。</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es ky"><img src="../Images/21caa5e286f3959d2eb52f5509fa7a21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*LCj84PuqnLl-LnIl.png"/></div></div><figcaption class="kt ku et er es kv kw bd b be z dx">GitLab CI/CD + Ansible</figcaption></figure><h1 id="69f0" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">先决条件:</h1><ul class=""><li id="ef0c" class="kz la hi jf b jg jh jk jl jo lb js lc jw ld ka le lf lg lh bi translated"><strong class="jf hj"> AWS &amp; GitLab账户</strong></li><li id="f7e6" class="kz la hi jf b jg li jk lj jo lk js ll jw lm ka le lf lg lh bi translated"><a class="ae kg" href="https://docs.aws.amazon.com/" rel="noopener ugc nofollow" target="_blank"><strong class="jf hj">AWS</strong></a><a class="ae kg" href="https://docs.ansible.com/" rel="noopener ugc nofollow" target="_blank"><strong class="jf hj">ansi ble</strong></a><strong class="jf hj">&amp;</strong><a class="ae kg" href="https://docs.gitlab.com/ee/ci/" rel="noopener ugc nofollow" target="_blank"><strong class="jf hj">git lab CI/CD</strong></a></li><li id="41d4" class="kz la hi jf b jg li jk lj jo lk js ll jw lm ka le lf lg lh bi translated">在<strong class="jf hj"> AWS </strong>中创建的<strong class="jf hj">访问密钥</strong> &amp; <strong class="jf hj">秘密密钥</strong></li><li id="b9cc" class="kz la hi jf b jg li jk lj jo lk js ll jw lm ka le lf lg lh bi translated"><strong class="jf hj"> Ansible Vault </strong>对文件进行加密</li></ul><p id="d51f" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">让我们从项目的配置开始</p><p id="c3de" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">步骤1:- </strong>创建一个<strong class="jf hj">存储库</strong></p><ul class=""><li id="791d" class="kz la hi jf b jg kb jk kc jo ln js lo jw lp ka le lf lg lh bi translated">在你的GitLab帐户中创建一个存储库，并给它起一个你自己选择的名字</li></ul><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es lq"><img src="../Images/e72ff2917628d310980609bee29adef0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dXPfbfdBMPYFi1CXORAsoA.png"/></div></div><figcaption class="kt ku et er es kv kw bd b be z dx">GitLab Repository</figcaption></figure><p id="4402" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">步骤2:- </strong>为资源创建创建一个<strong class="jf hj">可解析的</strong>文件</p><ul class=""><li id="9f04" class="kz la hi jf b jg kb jk kc jo ln js lo jw lp ka le lf lg lh bi translated">在根目录下创建一个<code class="du lr ls lt lu b">.yml</code>文件，并在其中添加下面的代码。</li><li id="75ce" class="kz la hi jf b jg li jk lj jo lk js ll jw lm ka le lf lg lh bi translated">下面的代码将在AWS上创建各种资源。如果你不能理解代码中的任何内容，你可以从<a class="ae kg" href="https://devopsquare.com/a-complete-overview-of-ansible-264bb0cceafe" rel="noopener ugc nofollow" target="_blank"> <strong class="jf hj">这里</strong> </a>更好地理解</li></ul><pre class="ki kj kk kl fd lv lu lw lx aw ly bi"><span id="8efe" class="lz ig hi lu b fi ma mb l mc md">---<br/>- hosts: localhost  # Place where we are running Ansible<br/>  connection: local # Connection <br/>  gather_facts: no<br/>  vars_files:<br/>  - cred.yml<br/><br/>  # Variables<br/>  vars:<br/>    ansible_python_interpreter: /usr/bin/python3<br/>    # Default Names<br/>    title: "Demo"<br/>    vpc_name: "{{ title }} VPC"<br/>    igw_name: "{{ title }} IGW"<br/>    subnet_name: "{{ title }} Subnet"<br/>    acl_name: "{{ title }} ACL"<br/>    instance_name: "{{ title }} Instance" <br/>    security_group_name: "{{ title }} Security Group"<br/>    route_table_name: "{{ title }} Route Table"<br/><br/>    # Default values for CIDR Blocks<br/>    vpcCidrBlock: "10.0.0.0/16"<br/>    subNetCidrBlock: "10.0.1.0/24"<br/>    portCidrBlock: "0.0.0.0/0"<br/>    destinationCidrBlock: "0.0.0.0/0"<br/><br/>    # State<br/>    state: "present"<br/><br/>    # Default value of AZ &amp; Regio<br/>    zone: "us-west-1a"<br/>    region: "us-west-1"<br/><br/>  # List of tasks<br/>  tasks:<br/>    <br/>  # Creating VPC<br/>  - name: Create VPC<br/>    ec2_vpc_net:<br/>      aws_access_key: "{{ aws_access_key }}"<br/>      aws_secret_key: "{{ aws_secret_key }}"<br/>      name: "{{ vpc_name }}"<br/>      cidr_block: "{{ vpcCidrBlock }}"<br/>      region: "{{ region }}"<br/>      dns_support: "yes"<br/>      dns_hostnames: "yes"<br/>      tenancy: "default"<br/>      state: "{{ state }}"<br/>      resource_tags:<br/>        Name: "{{ vpc_name }}"<br/>    register: vpc_result<br/>  <br/>  # Creating Internate Gateway<br/>  - name: Create Internet Gateway<br/>    ec2_vpc_igw:<br/>      aws_access_key: "{{ aws_access_key }}"<br/>      aws_secret_key: "{{ aws_secret_key }}"<br/>      vpc_id: "{{ vpc_result.vpc.id }}" <br/>      region: "{{ region }}"<br/>      state: "{{ state }}" <br/>      tags:<br/>        Name: "{{ igw_name }}"<br/>    register: igw_result<br/><br/>  # Creating Subnet<br/>  - name: Create Subnet<br/>    ec2_vpc_subnet:<br/>      aws_access_key: "{{ aws_access_key }}"<br/>      aws_secret_key: "{{ aws_secret_key }}"<br/>      vpc_id: "{{ vpc_result.vpc.id }}" <br/>      region: "{{ region }}"<br/>      state: "{{ state }}"<br/>      az: "{{ zone }}"  <br/>      cidr: "{{ subNetCidrBlock }}"<br/>      map_public: "yes"<br/>      resource_tags:<br/>        Name: "{{ subnet_name }}"<br/>    register: subnet_result<br/>  <br/>  # Creating Security Group<br/>  - name: Create Security Group<br/>    ec2_group:  <br/>      name: "{{ security_group_name }}"<br/>      description: "{{ security_group_name }}"<br/>      aws_access_key: "{{ aws_access_key }}"<br/>      aws_secret_key: "{{ aws_secret_key }}"<br/>      vpc_id: "{{ vpc_result.vpc.id }}" <br/>      region: "{{ region }}"<br/>      state: "{{ state }}"<br/>      tags:<br/>        Name: "{{ security_group_name  }}"<br/>      rules:<br/>        - proto: tcp<br/>          from_port: 80<br/>          to_port: 80<br/>          cidr_ip: "{{ portCidrBlock }}"<br/>        - proto: tcp<br/>          from_port: 443<br/>          to_port: 443<br/>          cidr_ip: "{{ portCidrBlock }}"<br/>        - proto: tcp<br/>          from_port: 22<br/>          to_port: 22<br/>          cidr_ip: "{{ portCidrBlock }}"<br/><br/>      rules_egress:<br/>        - proto: tcp<br/>          from_port: 80<br/>          to_port: 80<br/>          cidr_ip: "{{ portCidrBlock }}"<br/>        - proto: tcp<br/>          from_port: 443<br/>          to_port: 443<br/>          cidr_ip: "{{ portCidrBlock }}"<br/>        - proto: tcp<br/>          from_port: 22<br/>          to_port: 22<br/>          cidr_ip: "{{ portCidrBlock }}"<br/>    register: security_group_result<br/><br/>  # Creating NACLs for subnet   <br/>  - name: Create Network ACLs<br/>    ec2_vpc_nacl:<br/>      name: "{[ acl_name }}"<br/>      aws_access_key: "{{ aws_access_key }}"<br/>      aws_secret_key: "{{ aws_secret_key }}"<br/>      vpc_id: "{{ vpc_result.vpc.id }}" <br/>      region: "{{ region }}"<br/>      state: "{{ state }}" <br/>      subnets: [ "{{ subnet_result.subnet.id }}" ]<br/>      tags:<br/>        Name: "{{ acl_name }}"<br/>      ingress:<br/>      # rule no, protocol, allow/deny, cidr, icmp_type, icmp_code, port from, port to<br/>        - [100, 'tcp', 'allow', '0.0.0.0/0', null, null, 0, 65535]<br/>        <br/>      # rule no, protocol, allow/deny, cidr, icmp_type, icmp_code, port from, port to<br/>      egress:<br/>        - [100, 'all', 'allow', '0.0.0.0/0', null, null, 0, 65535]<br/><br/>  # Creating Route Table for subnet<br/>  - name: Create Route Table<br/>    ec2_vpc_route_table:<br/>      aws_access_key: "{{ aws_access_key }}"<br/>      aws_secret_key: "{{ aws_secret_key }}"<br/>      vpc_id: "{{ vpc_result.vpc.id }}" <br/>      region: "{{ region }}"<br/>      state: "{{ state }}" <br/>      tags:<br/>        Name: "{{ route_table_name }}"<br/>      subnets: [ "{{ subnet_result.subnet.id }}" ]<br/>      routes:<br/>        - dest: "{{ destinationCidrBlock }}" <br/>          gateway_id: "{{ igw_result.gateway_id }}"<br/>    register: public_route_table<br/>  <br/>  # Creating EC2 Instance<br/>  - name: Create EC2 Instance<br/>    ec2:<br/>      aws_access_key: "{{ aws_access_key }}"<br/>      aws_secret_key: "{{ aws_secret_key }}"<br/>      instance_type: t2.micro<br/>      image: ami-04b6c97b14c54de18<br/>      wait: yes<br/>      region: "{{ region }}"<br/>      group: "{{ security_group_name }}"<br/>      key_name: tests<br/>      count: 1<br/>      vpc_subnet_id:  "{{ subnet_result.subnet.id }}" <br/>      assign_public_ip: yes<br/>      instance_tags:<br/>        Name: "{{ instance_name }}"<br/>    register: ec2_result</span></pre><p id="dcc6" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">步骤3:- </strong>为AWS凭证创建一个<strong class="jf hj">可回复的</strong>文件</p><ul class=""><li id="790e" class="kz la hi jf b jg kb jk kc jo ln js lo jw lp ka le lf lg lh bi translated">在这里，我已经使用<strong class="jf hj"> ansible vault </strong>为AWS <strong class="jf hj">访问密钥</strong> &amp; <strong class="jf hj">秘密密钥</strong>创建了凭证文件，这样我们可以安全地管理它。</li></ul><blockquote class="me mf mg"><p id="5eda" class="jd je mh jf b jg kb ji jj jk kc jm jn mi kd jq jr mj ke ju jv mk kf jy jz ka hb bi translated">要使用ansible vault创建新的加密文件，您需要运行以下命令。它会要求输入密码，所以请输入一个容易记住的密码</p></blockquote><pre class="ki kj kk kl fd lv lu lw lx aw ly bi"><span id="fac6" class="lz ig hi lu b fi ma mb l mc md">ansible-vault create cred.yml</span></pre><ul class=""><li id="d400" class="kz la hi jf b jg kb jk kc jo ln js lo jw lp ka le lf lg lh bi translated">在其中添加以下内容</li></ul><pre class="ki kj kk kl fd lv lu lw lx aw ly bi"><span id="2df2" class="lz ig hi lu b fi ma mb l mc md">aws_access_key: &lt;your aws access key&gt;<br/>aws_secret_key: &lt;your aws secret key&gt;</span></pre><p id="afdb" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">第四步:- </strong>创建一个<strong class="jf hj">密码</strong>文件</p><ul class=""><li id="7bd5" class="kz la hi jf b jg kb jk kc jo ln js lo jw lp ka le lf lg lh bi translated">创建一个名为<code class="du lr ls lt lu b">password.txt</code>的新文件，并在其中添加您的ansible vault密码，以便我们稍后使用。</li></ul><p id="e759" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">第四步:- </strong>创建一个<strong class="jf hj">工作流</strong>文件</p><ul class=""><li id="1438" class="kz la hi jf b jg kb jk kc jo ln js lo jw lp ka le lf lg lh bi translated">现在，为了自动创建资源，我们需要创建一个工作流文件</li><li id="4fee" class="kz la hi jf b jg li jk lj jo lk js ll jw lm ka le lf lg lh bi translated">创建<code class="du lr ls lt lu b">.gitlab-ci.yml</code>文件，并将下面的代码添加到其中</li><li id="d4f4" class="kz la hi jf b jg li jk lj jo lk js ll jw lm ka le lf lg lh bi translated">以下作业将在主分支上发生的每个<strong class="jf hj">推</strong>和<strong class="jf hj">拉请求</strong>上运行。在构建部分，我已经在脚本部分指定了映像名称和命令。</li></ul><pre class="ki kj kk kl fd lv lu lw lx aw ly bi"><span id="f892" class="lz ig hi lu b fi ma mb l mc md">stages:<br/>  - run<br/><br/>image:<br/>  name: registry.gitlab.com/torese/docker-ansible<br/><br/>variables:<br/>    ANSIBLE_HOST_KEY_CHECKING: 'false'<br/>    ANSIBLE_FORCE_COLOR: 'true'<br/>    ANSIBLE_PYTHON_INTERPRRTER: /usr/bin/python3<br/><br/>before_script:<br/>  - yum install httpd -y<br/>  - yum install -y python3<br/>  - ansible --version<br/><br/>run:<br/>  stage: run<br/>  script:<br/>    - ansible-playbook main.yml --vault-password-file=password.txt</span></pre><p id="dcb6" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">我们来理解一下上面的代码。</p><ul class=""><li id="709f" class="kz la hi jf b jg kb jk kc jo ln js lo jw lp ka le lf lg lh bi translated">下面的代码用于声明阶段的名称</li></ul><pre class="ki kj kk kl fd lv lu lw lx aw ly bi"><span id="95c9" class="lz ig hi lu b fi ma mb l mc md">stages:<br/>  - run</span></pre><ul class=""><li id="87f2" class="kz la hi jf b jg kb jk kc jo ln js lo jw lp ka le lf lg lh bi translated">我们使用<code class="du lr ls lt lu b">ansible</code>图像来运行ansible剧本</li></ul><pre class="ki kj kk kl fd lv lu lw lx aw ly bi"><span id="da9d" class="lz ig hi lu b fi ma mb l mc md">image:<br/>  name: registry.gitlab.com/torese/docker-ansible</span></pre><ul class=""><li id="95f1" class="kz la hi jf b jg kb jk kc jo ln js lo jw lp ka le lf lg lh bi translated">在<code class="du lr ls lt lu b">variable</code>部分，我们定义了环境变量</li></ul><pre class="ki kj kk kl fd lv lu lw lx aw ly bi"><span id="b6bc" class="lz ig hi lu b fi ma mb l mc md">variables:<br/>    ANSIBLE_HOST_KEY_CHECKING: 'false'<br/>    ANSIBLE_FORCE_COLOR: 'true'<br/>    ANSIBLE_PYTHON_INTERPRRTER: /usr/bin/python3</span></pre><ul class=""><li id="e37d" class="kz la hi jf b jg kb jk kc jo ln js lo jw lp ka le lf lg lh bi translated">在<code class="du lr ls lt lu b">before_script</code>部分，我们正在安装<code class="du lr ls lt lu b">httpd</code>和<code class="du lr ls lt lu b">python3</code>并检查<code class="du lr ls lt lu b">ansible</code>版本</li></ul><pre class="ki kj kk kl fd lv lu lw lx aw ly bi"><span id="8cb6" class="lz ig hi lu b fi ma mb l mc md">before_script:<br/>  - yum install httpd -y<br/>  - yum install -y python3<br/>  - ansible --version</span></pre><ul class=""><li id="9540" class="kz la hi jf b jg kb jk kc jo ln js lo jw lp ka le lf lg lh bi translated">在<code class="du lr ls lt lu b">run</code>部分，我们正在运行ansible行动手册</li></ul><pre class="ki kj kk kl fd lv lu lw lx aw ly bi"><span id="82b6" class="lz ig hi lu b fi ma mb l mc md">run:<br/>  stage: run<br/>  script:<br/>    - ansible-playbook main.yml --vault-password-file=password.txt</span></pre><p id="dd19" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">步骤5:- </strong>检查<strong class="jf hj">输出</strong></p><ul class=""><li id="d6da" class="kz la hi jf b jg kb jk kc jo ln js lo jw lp ka le lf lg lh bi translated">现在，只要你提交你的工作流文件，GitLab就会触发这个动作，资源就会在AWS帐户上创建。</li><li id="0fc4" class="kz la hi jf b jg li jk lj jo lk js ll jw lm ka le lf lg lh bi translated">运行作业后，您将看到所有步骤都运行良好，没有错误。因此，当每个步骤工作成功时，您将拥有用绿色书写的<code class="du lr ls lt lu b">passed</code>。</li></ul><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es ml"><img src="../Images/48696361e08a8c881839040b9a7dbb24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bueDHrHtr-yqzCvSLCBRUw.png"/></div></div><figcaption class="kt ku et er es kv kw bd b be z dx">Jobs</figcaption></figure><ul class=""><li id="eac7" class="kz la hi jf b jg kb jk kc jo ln js lo jw lp ka le lf lg lh bi translated">您还可以通过单击来检查每个步骤的输出</li></ul><p id="ce88" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">步骤6:- </strong>检查<strong class="jf hj"> AWS </strong>上的资源</p><ul class=""><li id="1b20" class="kz la hi jf b jg kb jk kc jo ln js lo jw lp ka le lf lg lh bi translated">一旦作业运行完成，您就可以导航到AWS并检查所有资源</li><li id="57e7" class="kz la hi jf b jg li jk lj jo lk js ll jw lm ka le lf lg lh bi translated">Ansible将创建以下资源</li></ul><ol class=""><li id="6ab7" class="kz la hi jf b jg kb jk kc jo ln js lo jw lp ka mm lf lg lh bi translated"><strong class="jf hj"> VPC </strong></li></ol><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es ml"><img src="../Images/d5b89e5ff74c839042b68fd462ce5258.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*asedyRLvJWN8gn3NFOFixg.png"/></div></div><figcaption class="kt ku et er es kv kw bd b be z dx">VPC</figcaption></figure><p id="ac07" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj"> 2。子网</strong></p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es ml"><img src="../Images/1e46515052a3838436dd7c92ba188b7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3_vivLx_BWB4YNtl1sT9bw.png"/></div></div><figcaption class="kt ku et er es kv kw bd b be z dx">Subnets</figcaption></figure><p id="361e" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj"> 3。互联网网关</strong></p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es ml"><img src="../Images/c0c2b9872d60b15721a0f83d9adbaf4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G1DEhoC7mOrldY-6tsGEpg.png"/></div></div><figcaption class="kt ku et er es kv kw bd b be z dx">Internet Gateway</figcaption></figure><p id="4c09" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj"> 4。Rouet表</strong></p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es ml"><img src="../Images/51988442848755f4dfcfb7f53d73da26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iU8V-f6YvWgCycE66ZnHJQ.png"/></div></div><figcaption class="kt ku et er es kv kw bd b be z dx">Route Table</figcaption></figure><p id="eb63" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj"> 5。安全组</strong></p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es mn"><img src="../Images/fe6c0f89a65b59e09b17b0746eb54428.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gre25hzHQA2_Ia4riCk3pQ.png"/></div></div><figcaption class="kt ku et er es kv kw bd b be z dx">Security Group</figcaption></figure><p id="99ea" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj"> 6。密钥对</strong></p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es ml"><img src="../Images/8e9acd2e943b274dabea7fbb4c936de6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-pbYC21DaMvPA8TdLXef2A.png"/></div></div><figcaption class="kt ku et er es kv kw bd b be z dx">Key Pair</figcaption></figure><p id="b739" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj"> 7。EC2实例</strong></p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es ml"><img src="../Images/223659661787f435c7ffbb61c1f5b151.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bkAbuFTFKfS0HwxEl3TFPw.png"/></div></div><figcaption class="kt ku et er es kv kw bd b be z dx">EC2 Instance</figcaption></figure><p id="9300" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">现在就这样，你已经学会了如何将Ansible与GitLab CI/CD集成。您现在可以使用它并对其进行相应的修改。</p><p id="d169" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">如果您觉得本指南很有帮助，请点击👏按钮，也可以随意发表评论。</p><p id="d3ea" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">关注更多类似的故事😊</p></div></div>    
</body>
</html>