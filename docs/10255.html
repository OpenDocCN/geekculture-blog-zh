<html>
<head>
<title>Terraspace cheat sheet</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">地球空间备忘单</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/terraspace-cheat-sheet-388dae8b0203?source=collection_archive---------5-----------------------#2022-01-20">https://medium.com/geekculture/terraspace-cheat-sheet-388dae8b0203?source=collection_archive---------5-----------------------#2022-01-20</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="8612" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是关于Terragrunt和Terraspace的三集系列的最后一篇文章。</p><p id="b7ce" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了真正比较这两个框架，在这篇博文中，有多个部分摘自《Terragrunt》第二集。</p><blockquote class="jd je jf"><p id="7fd8" class="if ig jg ih b ii ij ik il im in io ip jh ir is it ji iv iw ix jj iz ja jb jc hb bi translated"><em class="hi">第1集:</em> <a class="ae jk" rel="noopener" href="/geekculture/from-terralith-to-terraservice-with-terraform-acf990e65578"> <em class="hi">从Terralith到Terraservice with terra form</em></a><em class="hi"><br/>第2集:</em> <a class="ae jk" href="http://bit.ly/2YfWRED" rel="noopener ugc nofollow" target="_blank"> <em class="hi"> Terragrunt备忘单</em> </a> <em class="hi"> <br/>第3集:Terraspace备忘单(本文)</em></p></blockquote><figure class="jl jm jn jo fd jp er es paragraph-image"><div class="ab fe cl jq"><img src="../Images/0c99ff17ed83a007854320065c65de33.png" data-original-src="https://miro.medium.com/v2/format:webp/1*ZXydoyDRk61krawqN41Hkg.png"/></div></figure></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><p id="028c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">今天我将展示一个具有以下特征的Terraspace项目:</p><ul class=""><li id="9f35" class="ka kb hi ih b ii ij im in iq kc iu kd iy ke jc kf kg kh ki bi translated"><strong class="ih hj">多环境</strong>:每个单个账户的QA和测试</li><li id="8662" class="ka kb hi ih b ii kj im kk iq kl iu km iy kn jc kf kg kh ki bi translated"><strong class="ih hj">多账户</strong>:不同账户测试开发</li><li id="98d5" class="ka kb hi ih b ii kj im kk iq kl iu km iy kn jc kf kg kh ki bi translated"><strong class="ih hj">多地区</strong>:准备在不同地区之间拆分账户和项目</li></ul><p id="e0a7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">显然，最后，您应该能够根据您的需要相应地更改需求。</p><p id="2d13" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">本概述的范围是向您介绍Terraspace背后的核心概念和结构。在我的公共存储库中，我已经添加了一些模块间的依赖关系。目标是提供类似于真实用例的东西。</p><blockquote class="jd je jf"><p id="f9d5" class="if ig jg ih b ii ij ik il im in io ip jh ir is it ji iv iw ix jj iz ja jb jc hb bi translated"><em class="hi">资源库链接:<br/> </em>本文底部。</p></blockquote><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="er es ko"><img src="../Images/1372a01795e0abc2adb0cd99f532e1c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HPcRnL6ttbY3G-irYismhA.png"/></div></div><figcaption class="kt ku et er es kv kw bd b be z dx">[1]-[2]</figcaption></figure><h1 id="7495" class="kx ky hi bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">什么是Terraspace？</h1><p id="6cd1" class="pw-post-body-paragraph if ig hi ih b ii lv ik il im lw io ip iq lx is it iu ly iw ix iy lz ja jb jc hb bi translated">Terraspace允许保持您的代码干燥，编写简单的terraform文件，但提供了额外的功能来降低管理多个状态文件的复杂性。</p></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><h1 id="3a48" class="kx ky hi bd kz la ma lc ld le mb lg lh li mc lk ll lm md lo lp lq me ls lt lu bi translated">存储库结构:</h1><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="er es mf"><img src="../Images/9cff9b843beab7d8d73624022876a969.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*T4nw8jB-vyVmPkt2"/></div></div><figcaption class="kt ku et er es kv kw bd b be z dx">Photo by <a class="ae jk" href="https://unsplash.com/@theforestbirds?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Joel &amp; Jasmin Førestbird</a> on <a class="ae jk" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="5427" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这个项目中，我将使用以下代码创建一个VPC和一个EC2实例:</p><ul class=""><li id="7084" class="ka kb hi ih b ii ij im in iq kc iu kd iy ke jc kf kg kh ki bi translated">两个具有依赖关系的不同模块<code class="du mg mh mi mj b">[vpc, ec2]</code></li><li id="06a6" class="ka kb hi ih b ii kj im kk iq kl iu km iy kn jc kf kg kh ki bi translated">两个不同的账户<code class="du mg mh mi mj b">[Test, Dev]</code></li><li id="cdbd" class="ka kb hi ih b ii kj im kk iq kl iu km iy kn jc kf kg kh ki bi translated">每个账户两种不同的环境<code class="du mg mh mi mj b">[QA, TEST]</code></li></ul><p id="2813" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一个<strong class="ih hj"> makefile </strong>来统治它们，一个makefile来寻找它们，一个makefile来带来它们，并在黑暗中绑定它们。</p><pre class="jl jm jn jo fd mk mj ml mm aw mn bi"><span id="15de" class="mo ky hi mj b fi mp mq l mr ms">terraspace<br/> ├── Makefile<br/> └── infrastructure<br/>    ├── Gemfile<br/>    ├── Gemfile.lock<br/>    ├── README.md<br/>    ├── Terrafile<br/>    ├── app<br/>    │   ├── modules<br/>    │   │   ├── ec2<br/>    │   │   │   ├── ec2.tf<br/>    │   │   │   ├── variables.tf<br/>    │   │   │   └── versions.tf<br/>    │   │   └── vpc<br/>    │   │       ├── main.tf<br/>    │   │       ├── output.tf<br/>    │   │       ├── variables.tf<br/>    │   │       └── versions.tf<br/>    │   └── stacks<br/>    │       ├── ec2-service<br/>    │       │   ├── main.tf<br/>    │       │   ├── tfvars<br/>    |       |   |   └── eu-central-1<br/>    │       │   │       ├── base.tfvars<br/>    │       │   │       ├── qa.tfvars<br/>    │       │   │       └── test.tfvars<br/>    │       │   └── variables.tf<br/>    │       └── vpc-service<br/>    │           ├── main.tf<br/>    │           ├── output.tf<br/>    │           ├── tfvars<br/>    |           |   └── eu-central-1<br/>    │           │       ├── qa.tfvars<br/>    │           │       └── test.tfvars<br/>    │           └── variables.tf<br/>    └── config<br/>        ├── app.rb<br/>        ├── args<br/>        │   └── terraform.rb <br/>        └── terraform<br/>            ├── backend.tf<br/>            ├── provider.tf<br/>            └── tfvars<br/>                └── eu-central-1<br/>                    ├── base.tfvars<br/>                    ├── qa.tfvars<br/>                    └── test.tfvars</span></pre><p id="3b07" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们从<strong class="ih hj"> <em class="jg"> app </em> </strong>文件夹开始，在这里我们可以识别<strong class="ih hj"> <em class="jg">模块</em> </strong>和<strong class="ih hj"> <em class="jg">栈</em> </strong>。</p><p id="aa19" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在<strong class="ih hj"> <em class="jg">模块</em> </strong> <em class="jg"> </em>中，我们将所有我们想要跨不同服务重用的代码，比如“vpc”和“ec2”。</p><p id="d16d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在<strong class="ih hj"> <em class="jg">栈中</em> </strong> <em class="jg">相反，</em>有两个子文件夹:</p><ul class=""><li id="ea63" class="ka kb hi ih b ii ij im in iq kc iu kd iy ke jc kf kg kh ki bi translated">“<em class="jg"> vpc-service </em>”:指“vpc”模块。它用于创建网络，我们将在该网络中创建ec2实例。</li><li id="773e" class="ka kb hi ih b ii kj im kk iq kl iu km iy kn jc kf kg kh ki bi translated">"<em class="jg"> ec2-service </em>":指“ec2”模块，它依赖于"<em class="jg"> vpc-service </em> " <em class="jg">。您需要一个VPC来创建实例。</em></li><li id="3f07" class="ka kb hi ih b ii kj im kk iq kl iu km iy kn jc kf kg kh ki bi translated">在<em class="jg">“x-service”</em>中都有一个文件夹<code class="du mg mh mi mj b">tfvars</code>。在其中，我们放入变量来配置两个环境之间的差异。</li></ul><p id="8825" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="jg">配置</em> </strong>文件夹有点复杂:</p><pre class="jl jm jn jo fd mk mj ml mm aw mn bi"><span id="a44d" class="mo ky hi mj b fi mp mq l mr ms">infrastructure<br/>  └── config<br/>        ├── app.rb<br/>        ├── args<br/>        │   └── terraform.rb <br/>        └── terraform<br/>            ├── backend.tf<br/>            ├── provider.tf<br/>            └── tfvars<br/>                └── eu-central-1<br/>                    ├── base.tfvars<br/>                    ├── qa.tfvars<br/>                    └── test.tfvars</span></pre><ul class=""><li id="2f0e" class="ka kb hi ih b ii ij im in iq kc iu kd iy ke jc kf kg kh ki bi translated"><em class="jg"> args </em>:包含了terraspace将要通过@ <em class="jg"> terraform </em>的一些标志，类似于<code class="du mg mh mi mj b"><em class="jg">-lock-timeout=20m</em></code><em class="jg"/><a class="ae jk" href="https://terraspace.cloud/docs/config/args/terraform/" rel="noopener ugc nofollow" target="_blank">官方文档此处</a></li><li id="730b" class="ka kb hi ih b ii kj im kk iq kl iu km iy kn jc kf kg kh ki bi translated"><em class="jg"> app.rb </em>:我不使用，但是它允许配置测试和记录器【此处<a class="ae jk" href="https://terraspace.cloud/docs/config/app/" rel="noopener ugc nofollow" target="_blank">官方文档</a></li><li id="d332" class="ka kb hi ih b ii kj im kk iq kl iu km iy kn jc kf kg kh ki bi translated"><em class="jg">terra form/back end . TF&amp;provider . TF</em>:我们将存储状态文件的后端配置。一次编写，多次重用是这里的规则。</li><li id="1ef1" class="ka kb hi ih b ii kj im kk iq kl iu km iy kn jc kf kg kh ki bi translated"><em class="jg">terra form/TF vars/eu-central-1</em>:terra space考虑的环境变量。在Makefile中，我们定义了<code class="du mg mh mi mj b">TS_ENV</code>来控制将哪个特定于env的tfvars文件放在<code class="du mg mh mi mj b">base.tfvars</code>之上。</li></ul><p id="7832" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> Terrafile </strong>是一个在你的存储库中提供一致性的文件。为了解释它，我们需要一个专门的段落。<br/>正式结构文件，此处参照<a class="ae jk" href="https://terraspace.cloud/docs/intro/structure/" rel="noopener ugc nofollow" target="_blank"/>。</p><h1 id="debc" class="kx ky hi bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">我们如何解决<strong class="ak">3“多”模式？</strong></h1><ul class=""><li id="2172" class="ka kb hi ih b ii lv im lw iq mt iu mu iy mv jc kf kg kh ki bi translated"><strong class="ih hj">多环境</strong>:每个环境都有不同的<code class="du mg mh mi mj b">env_xx.tfvar</code>，我们选择正确的文件设置这个由terraspace解释的环境变量<code class="du mg mh mi mj b">TS_ENV=qa</code>。</li><li id="d543" class="ka kb hi ih b ii kj im kk iq kl iu km iy kn jc kf kg kh ki bi translated"><strong class="ih hj">多账户</strong>:选择修正后的环境变量，到达期望的账户。在“Makefile”中完成。</li><li id="50d0" class="ka kb hi ih b ii kj im kk iq kl iu km iy kn jc kf kg kh ki bi translated"><strong class="ih hj">多地区</strong>:准备在不同地区之间拆分账户和项目。你需要复制并重命名所有的文件夹，目前指的是“欧盟-中央-1”</li></ul><blockquote class="jd je jf"><p id="e3e9" class="if ig jg ih b ii ij ik il im in io ip jh ir is it ji iv iw ix jj iz ja jb jc hb bi translated">多环境功能是如何工作的？</p></blockquote><blockquote class="mw"><p id="1b24" class="mx my hi bd mz na nb nc nd ne nf jc dx translated">TS _ ENV = " qa神奇之处就在这里..</p></blockquote><p id="0b0f" class="pw-post-body-paragraph if ig hi ih b ii ng ik il im nh io ip iq ni is it iu nj iw ix iy nk ja jb jc hb bi translated">使用这种语法，我们将配置<code class="du mg mh mi mj b">terraspace</code>来合并文件夹<code class="du mg mh mi mj b">terraspace/infrastructure/app/stacks/ec2-service/tfvars</code>中的两个文件。这个特性也称为<code class="du mg mh mi mj b">terraspace layering:</code></p><ol class=""><li id="9e90" class="ka kb hi ih b ii ij im in iq kc iu kd iy ke jc nl kg kh ki bi translated"><code class="du mg mh mi mj b">base.tfvars</code></li><li id="a78d" class="ka kb hi ih b ii kj im kk iq kl iu km iy kn jc nl kg kh ki bi translated"><code class="du mg mh mi mj b">qa.tfvars</code></li></ol><p id="9b51" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您想以不同的方式配置<code class="du mg mh mi mj b">test</code>环境吗？</p><p id="7d1f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">只需导出将合并的<code class="du mg mh mi mj b">TS_ENV=”test”</code>:</p><ol class=""><li id="f44b" class="ka kb hi ih b ii ij im in iq kc iu kd iy ke jc nl kg kh ki bi translated"><code class="du mg mh mi mj b">base.tfvars</code></li><li id="1039" class="ka kb hi ih b ii kj im kk iq kl iu km iy kn jc nl kg kh ki bi translated"><code class="du mg mh mi mj b">test.tfvar</code></li></ol><p id="860b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这种机制适用于任何地方，也适用于所有模块共享的<code class="du mg mh mi mj b">tfvars</code>，这里定义了<code class="du mg mh mi mj b">terraspace/infrastructure/config/terraform/tfvars</code></p><h1 id="d9d2" class="kx ky hi bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">模块…..斯塔克斯呢。</h1><p id="393c" class="pw-post-body-paragraph if ig hi ih b ii lv ik il im lw io ip iq lx is it iu ly iw ix iy lz ja jb jc hb bi translated">区别只是在你的设计上，两者都可能是terraform模块！</p><ul class=""><li id="7d99" class="ka kb hi ih b ii ij im in iq kc iu kd iy ke jc kf kg kh ki bi translated"><em class="jg">模块:</em>它们更接近terraform模块的意思。它们是一组应该生活在一起的资源。注册中心及其生命周期策略就是一个例子。当您需要某些东西时，可以定义一个模块，在IaC存储库的不同部分共享。</li><li id="9928" class="ka kb hi ih b ii kj im kk iq kl iu km iy kn jc kf kg kh ki bi translated"><em class="jg">栈:</em>这里有你的业务逻辑。你使用哪种方法？每个云提供商资源一个组？一个例子可能是所有的数据库实例，或者您的观点停留在产品层面？这里您指的是上面的<em class="jg">模块</em>。</li></ul><h1 id="6084" class="kx ky hi bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">Terrafile</h1><p id="3c7b" class="pw-post-body-paragraph if ig hi ih b ii lv ik il im lw io ip iq lx is it iu ly iw ix iy lz ja jb jc hb bi translated"><code class="du mg mh mi mj b">terrafile</code>是一个简化第二天操作的工具，它提供了一个集中的地方，在这里你可以定义你的所有版本和你的项目中使用的模块的定义。不一定要用，<em class="jg">但是要</em>！</p><p id="9600" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">而且，你知道一个<code class="du mg mh mi mj b">lockfile</code> <em class="jg"> </em>的作用是什么吗？<em class="jg"> </em>它存在于python，GoLang，node.js，以及编程语言的主要部分terraspace也有！这是一种跨不同角色(如团队和CI/CD)加强模块内聚性的机制，以避免模块内依赖性的不一致性。</p></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><p id="416c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了运行所有命令，GitHub repo中存在一个Makefile来简化管道中的采用。README中的更多细节<br/>您可以轻松地扩展它，或者创建一个全新的bash脚本！</p><blockquote class="jd je jf"><p id="42cb" class="if ig jg ih b ii ij ik il im in io ip jh ir is it ji iv iw ix jj iz ja jb jc hb bi translated">【https://bit.ly/3maXDL0】资源库链接:<br/><a class="ae jk" href="https://bit.ly/3maXDL0" rel="noopener ugc nofollow" target="_blank"><em class="hi"/></a></p></blockquote><h1 id="38d2" class="kx ky hi bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">利弊:</h1><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="er es nm"><img src="../Images/67d5290bbe01abaacb519ace524fdcfd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*yet-rmuPnT3_qMlF.jpg"/></div></div></figure><p id="68c2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> ++强项:</strong></p><ul class=""><li id="7c7f" class="ka kb hi ih b ii ij im in iq kc iu kd iy ke jc kf kg kh ki bi translated">部署一切(但是你应该有足够的技术来管理所有的依赖项，或者部署单个堆栈及其所有的依赖项:<a class="ae jk" href="https://terraspace.cloud/docs/intro/deploy-all/" rel="noopener ugc nofollow" target="_blank">https://terraspace.cloud/docs/intro/deploy-all/</a></li><li id="56c4" class="ka kb hi ih b ii kj im kk iq kl iu km iy kn jc kf kg kh ki bi translated">您可以使用以下语法在<code class="du mg mh mi mj b">stacks</code>之间共享变量:</li></ul><pre class="jl jm jn jo fd mk mj ml mm aw mn bi"><span id="1a0b" class="mo ky hi mj b fi mp mq l mr ms">&lt;%= output('vpc-service.vpc_service_vpc_public_subnets') %&gt;</span></pre><ul class=""><li id="3479" class="ka kb hi ih b ii ij im in iq kc iu kd iy ke jc kf kg kh ki bi translated">语法是标准的TF，不需要学习新的语言(可能是Ruby？).但是terraspace给出了一些新的命令。</li><li id="d432" class="ka kb hi ih b ii kj im kk iq kl iu km iy kn jc kf kg kh ki bi translated">你是干的，但是有个缺点，见下文！</li><li id="74ee" class="ka kb hi ih b ii kj im kk iq kl iu km iy kn jc kf kg kh ki bi translated">自动为每个堆栈生成不同的TFState。</li><li id="6b3e" class="ka kb hi ih b ii kj im kk iq kl iu km iy kn jc kf kg kh ki bi translated">您可以随时引用外部模块。</li><li id="818e" class="ka kb hi ih b ii kj im kk iq kl iu km iy kn jc kf kg kh ki bi translated">使用<code class="du mg mh mi mj b">TF_ENV</code>和分层管理不同的环境。</li></ul><pre class="jl jm jn jo fd mk mj ml mm aw mn bi"><span id="5bb6" class="mo ky hi mj b fi mp mq l mr ms">TS_ENV=dev  terraspace up vpc<br/>TS_ENV=prod terraspace up vpc</span></pre><p id="f287" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> — —弱点:</strong></p><ul class=""><li id="4e9b" class="ka kb hi ih b ii ij im in iq kc iu kd iy ke jc kf kg kh ki bi translated">TFVARS堆栈中的分层。这是香草地形所缺少的特征。有意识地使用它，它可能会变成一个<strong class="ih hj">套娃</strong>。</li><li id="049b" class="ka kb hi ih b ii kj im kk iq kl iu km iy kn jc kf kg kh ki bi translated">干的后果:如果你在一个栈中对<code class="du mg mh mi mj b">main.tf</code>做了一个改变，那么如果你不小心的话，它将被应用到所有的环境中。您使用tfvars而不是tf文件来管理环境。</li><li id="1bc5" class="ka kb hi ih b ii kj im kk iq kl iu km iy kn jc kf kg kh ki bi translated">你必须使用terraspace语法。无法逃避。<em class="jg">不知道是不是真理的弱点。你选择terraspace，而不是相反。</em></li><li id="9471" class="ka kb hi ih b ii kj im kk iq kl iu km iy kn jc kf kg kh ki bi translated">你需要RubyGems来使用它。</li></ul><blockquote class="jd je jf"><p id="155d" class="if ig jg ih b ii ij ik il im in io ip jh ir is it ji iv iw ix jj iz ja jb jc hb bi translated"><em class="hi">资源库链接:<br/></em><a class="ae jk" href="https://bit.ly/3maXDL0" rel="noopener ugc nofollow" target="_blank"><em class="hi">https://bit.ly/3maXDL0</em></a></p></blockquote><figure class="jl jm jn jo fd jp er es paragraph-image"><div class="er es nn"><img src="../Images/c2719cbfe0deb374f4e5e0f8e1cc2ac9.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/format:webp/0*eisx7_el5tCQh5-p.jpeg"/></div></figure></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="er es no"><img src="../Images/fd1037d97db88bcca5d26801c3a9492f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*WA1EDTf-PDNIKgK8.png"/></div></div></figure><blockquote class="mw"><p id="7fc5" class="mx my hi bd mz na nb nc nd ne nf jc dx translated"><a class="ae jk" href="https://pie-r.medium.com/" rel="noopener">关注我</a>和<a class="ae jk" href="https://pie-r.medium.com/subscribe" rel="noopener">订阅</a>获取本系列和下一系列的更新！</p></blockquote></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><h1 id="e27d" class="kx ky hi bd kz la ma lc ld le mb lg lh li mc lk ll lm md lo lp lq me ls lt lu bi translated">参考资料:</h1><ul class=""><li id="5e70" class="ka kb hi ih b ii lv im lw iq mt iu mu iy mv jc kf kg kh ki bi translated">[1]官方doc网站:<a class="ae jk" href="https://terraspace.cloud/" rel="noopener ugc nofollow" target="_blank">https://terraspace.cloud/</a></li><li id="1c44" class="ka kb hi ih b ii kj im kk iq kl iu km iy kn jc kf kg kh ki bi translated">[2]地球空间:<a class="ae jk" href="https://github.com/boltops-tools/terraspace" rel="noopener ugc nofollow" target="_blank">https://github.com/boltops-tools/terraspace</a></li></ul></div></div>    
</body>
</html>