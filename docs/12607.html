<html>
<head>
<title>Hosting Node.js Projects with Digital Ocean for Linux or Mac OS Users</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为Linux或Mac OS用户托管带有数字海洋的Node.js项目</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/hosting-node-js-projects-with-digital-ocean-for-linux-or-mac-os-users-3190187dcd1c?source=collection_archive---------6-----------------------#2022-05-21">https://medium.com/geekculture/hosting-node-js-projects-with-digital-ocean-for-linux-or-mac-os-users-3190187dcd1c?source=collection_archive---------6-----------------------#2022-05-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="1966" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">通过Digital Ocean为Linux和Mac OS用户托管来自GitHub Repo的Node.js Discord Bot</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/1d0f261f007a94ba963e32b1436c644c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*zAw_xMFjr9plcISx.jpg"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Image from <a class="ae jn" href="https://pixabay.com/photos/waves-sea-ocean-beach-blue-water-3473335/" rel="noopener ugc nofollow" target="_blank">Pixabay</a></figcaption></figure><h1 id="c954" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">概观</h1><h2 id="3b94" class="kg jp hi bd jq kh ki kj ju kk kl km jy kn ko kp ka kq kr ks kc kt ku kv ke kw bi translated">介绍</h2><p id="91f2" class="pw-post-body-paragraph kx ky hi kz b la lb ij lc ld le im lf kn lg lh li kq lj lk ll kt lm ln lo lp hb bi translated">通常，任何项目的最后一步都是托管它。一个流行的托管选项是<a class="ae jn" href="https://www.digitalocean.com/" rel="noopener ugc nofollow" target="_blank">数字海洋</a>，在本教程中，我将一步一步地指导您如何使用数字海洋托管您的项目——在本例中，是来自GitHub资源库的Discord.js Bot。</p><h2 id="dfbc" class="kg jp hi bd jq kh ki kj ju kk kl km jy kn ko kp ka kq kr ks kc kt ku kv ke kw bi translated">工具</h2><p id="81e8" class="pw-post-body-paragraph kx ky hi kz b la lb ij lc ld le im lf kn lg lh li kq lj lk ll kt lm ln lo lp hb bi translated">对于这个项目，您需要:</p><ul class=""><li id="0b2c" class="lq lr hi kz b la ls ld lt kn lu kq lv kt lw lp lx ly lz ma bi translated">数字海洋账户</li><li id="f085" class="lq lr hi kz b la mb ld mc kn md kq me kt mf lp lx ly lz ma bi translated">Linux或Mac电脑——您可以在Windows上运行主机，但本教程将主要关注运行Linux或Mac OS的主机。</li><li id="a0c0" class="lq lr hi kz b la mb ld mc kn md kq me kt mf lp lx ly lz ma bi translated">一个<a class="ae jn" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank"> Node.js </a>项目(本教程将关注<a class="ae jn" href="https://discord.js.org/#/" rel="noopener ugc nofollow" target="_blank"> Discord.js </a>项目，但是任何项目都将遵循类似的步骤)</li><li id="a33d" class="lq lr hi kz b la mb ld mc kn md kq me kt mf lp lx ly lz ma bi translated">可选:一个<a class="ae jn" href="https://github.com/" rel="noopener ugc nofollow" target="_blank"> GitHub </a>帐户和您计划托管的代码库</li></ul><h1 id="306d" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">第一部分:创建一个新的水滴</h1><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mg"><img src="../Images/6a8075c8e5fd18a7b06cdec7b52df12e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1228/format:webp/1*uo_dWIBHwVkod_Y5HFokPA.png"/></div></div></figure><p id="2cb2" class="pw-post-body-paragraph kx ky hi kz b la ls ij lc ld lt im lf kn mh lh li kq mi lk ll kt mj ln lo lp hb bi translated">根据需要配置设置页面。对于图片，我选择了Ubuntu。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mk"><img src="../Images/cde67377562b64e9705a07af4aa64e69.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jgWxHX2a96xnuYHKk80Dng.png"/></div></div></figure><p id="1ad1" class="pw-post-body-paragraph kx ky hi kz b la ls ij lc ld lt im lf kn mh lh li kq mi lk ll kt mj ln lo lp hb bi translated">接下来，为你的意图和目的选择你喜欢的计划。在下面，选择离您最近的数据中心。</p><p id="8724" class="pw-post-body-paragraph kx ky hi kz b la ls ij lc ld lt im lf kn mh lh li kq mi lk ll kt mj ln lo lp hb bi translated">最后，在身份验证下，您可以选择密码或SSH密钥。对于本教程，我将使用密码，因为它更简单。但是，如果您想使用SSH密钥，请在您的机器上打开一个终端，键入命令<code class="du ml mm mn mo b">ssh-keygen -t ed25519</code>，然后按照Digital Ocean的提示设置一个密钥。</p><p id="32fd" class="pw-post-body-paragraph kx ky hi kz b la ls ij lc ld lt im lf kn mh lh li kq mi lk ll kt mj ln lo lp hb bi translated">在“完成并创建”部分，将主机名更新为一些容易记住的名称，然后创建droplet。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mp"><img src="../Images/5ac2fbb2ac3e08518674f544f893c50d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qc6vc_TorVgW8N7u26plWw.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Change the hostname then create!</figcaption></figure><p id="c9ad" class="pw-post-body-paragraph kx ky hi kz b la ls ij lc ld lt im lf kn mh lh li kq mi lk ll kt mj ln lo lp hb bi translated">设置完成后，您就可以开始通过“终端”设置项目了。</p><h1 id="7bd7" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">第二部分:通过终端设置项目</h1><h2 id="13d6" class="kg jp hi bd jq kh ki kj ju kk kl km jy kn ko kp ka kq kr ks kc kt ku kv ke kw bi translated">第一步:登录终端</h2><p id="c7aa" class="pw-post-body-paragraph kx ky hi kz b la lb ij lc ld le im lf kn lg lh li kq lj lk ll kt lm ln lo lp hb bi translated">首先，在您的Linux或Mac机器上打开终端。要托管您的项目，您需要登录您在数字海洋上创建的Linux Ubuntu机器。首先，使用下面的ssh命令。你可以在顶部找到你的droplet的IP地址，跟在<code class="du ml mm mn mo b">ipv4</code>后面。</p><pre class="iy iz ja jb fd mq mo mr ms aw mt bi"><span id="b25f" class="kg jp hi mo b fi mu mv l mw mx">ssh root@<!-- -->IPV4_OF_DROPLET</span></pre><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es my"><img src="../Images/834a84e9a40b7c3e4501dda99b4bf4ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:240/format:webp/1*GRCkM-iUliMTQ-GajrxcCg.png"/></div><figcaption class="jj jk et er es jl jm bd b be z dx">Use ipv4 right under your droplet</figcaption></figure><blockquote class="mz na nb"><p id="2312" class="kx ky nc kz b la ls ij lc ld lt im lf nd mh lh li ne mi lk ll nf mj ln lo lp hb bi translated">注意:如果你和我一样，不用输入“是”来加入，你可以直接按下输入键。这并不默认为yes，所以一定要在提示符下输入完整的单词！</p></blockquote><p id="abbe" class="pw-post-body-paragraph kx ky hi kz b la ls ij lc ld lt im lf kn mh lh li kq mi lk ll kt mj ln lo lp hb bi translated">如果您使用密码而不是SSH密钥创建了droplet，系统会提示您输入密码。现在你将在<code class="du ml mm mn mo b">root@IPV4_OF_DROPLET</code>。</p><h2 id="962b" class="kg jp hi bd jq kh ki kj ju kk kl km jy kn ko kp ka kq kr ks kc kt ku kv ke kw bi translated">第二步:检索代码/克隆GitHub Repo</h2><p id="fd54" class="pw-post-body-paragraph kx ky hi kz b la lb ij lc ld le im lf kn lg lh li kq lj lk ll kt lm ln lo lp hb bi translated">首先，你需要把你的代码放到Ubuntu机器上。这样做的常见方法包括使用<code class="du ml mm mn mo b">wget</code>获取代码，但是如果您的代码已经在git上，您可以简单地用git克隆存储库。</p><pre class="iy iz ja jb fd mq mo mr ms aw mt bi"><span id="5349" class="kg jp hi mo b fi mu mv l mw mx">git clone REPO_URL</span></pre><p id="7cdd" class="pw-post-body-paragraph kx ky hi kz b la ls ij lc ld lt im lf kn mh lh li kq mi lk ll kt mj ln lo lp hb bi translated">如果存储库是私有的，系统会提示您登录。这样做时，输入您的用户名，但是对于密码，您需要使用GitHub的个人访问令牌。要创建一个，打开GitHub标签，然后转到<code class="du ml mm mn mo b">Settings &gt; Developer Settings &gt; Personal Access Tokens</code>(或者直接转到页面<a class="ae jn" href="https://github.com/settings/tokens" rel="noopener ugc nofollow" target="_blank">这里</a>)。生成新令牌。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ng"><img src="../Images/0e4105510dbb89ec56a9a580ddabd6c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yWJpRegVTVzjmzJHI2-tsw.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Create a Personal Access Token</figcaption></figure><p id="2fff" class="pw-post-body-paragraph kx ky hi kz b la ls ij lc ld lt im lf kn mh lh li kq mi lk ll kt mj ln lo lp hb bi translated">为令牌命名，然后授予它访问私有存储库的权限。(我选择给它私人回购的完全访问权，以防我不得不做出任何改变。)</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nh"><img src="../Images/1a448c1b67aa76a97c24beac75789e0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rfHpVjqqOgiTDEHZC5RU-A.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Grant access to private repos</figcaption></figure><p id="8b63" class="pw-post-body-paragraph kx ky hi kz b la ls ij lc ld lt im lf kn mh lh li kq mi lk ll kt mj ln lo lp hb bi translated">创建并复制令牌，然后在登录终端时将其粘贴为密码。一旦您被授予访问权限，存储库将被克隆。</p><h2 id="a2d6" class="kg jp hi bd jq kh ki kj ju kk kl km jy kn ko kp ka kq kr ks kc kt ku kv ke kw bi translated">第三步:下载必要的软件包</h2><p id="9b41" class="pw-post-body-paragraph kx ky hi kz b la lb ij lc ld le im lf kn lg lh li kq lj lk ll kt lm ln lo lp hb bi translated">几乎什么都做好了！现在你需要下载必要的软件包，从Node.js开始。如果你只是通过<code class="du ml mm mn mo b">apt-get nodejs</code>安装Node，它不会安装最新的更新。相反，使用以下命令安装最新版本。</p><pre class="iy iz ja jb fd mq mo mr ms aw mt bi"><span id="52d3" class="kg jp hi mo b fi mu mv l mw mx">curl -fsSL https://deb.nodesource.com/setup_current.x | sudo -E bash </span><span id="8e61" class="kg jp hi mo b fi ni mv l mw mx">sudo apt-get install -y nodejs</span></pre><p id="a803" class="pw-post-body-paragraph kx ky hi kz b la ls ij lc ld lt im lf kn mh lh li kq mi lk ll kt mj ln lo lp hb bi translated">这将安装节点和NPM。接下来，输入目录(它将与您的GitHub存储库同名)。</p><pre class="iy iz ja jb fd mq mo mr ms aw mt bi"><span id="e004" class="kg jp hi mo b fi mu mv l mw mx">cd NAME_OF_GITHUB_REPOSITORY</span></pre><p id="eb52" class="pw-post-body-paragraph kx ky hi kz b la ls ij lc ld lt im lf kn mh lh li kq mi lk ll kt mj ln lo lp hb bi translated">接下来，用npm安装您的repo的所有包。</p><pre class="iy iz ja jb fd mq mo mr ms aw mt bi"><span id="2fcb" class="kg jp hi mo b fi mu mv l mw mx">npm install</span></pre><h2 id="59d5" class="kg jp hi bd jq kh ki kj ju kk kl km jy kn ko kp ka kq kr ks kc kt ku kv ke kw bi translated">第四步:编辑文件</h2><p id="3754" class="pw-post-body-paragraph kx ky hi kz b la lb ij lc ld le im lf kn lg lh li kq lj lk ll kt lm ln lo lp hb bi translated">完美！尝试运行<code class="du ml mm mn mo b">node index.js</code>(或<code class="du ml mm mn mo b">node NAME_OF_MAIN_FILE.js</code>)以确保一切正常运行。您可能需要调整一些参数或添加一个令牌。要快速编辑文件，我推荐<a class="ae jn" href="https://www.vim.org/" rel="noopener ugc nofollow" target="_blank"> vim </a>。</p><pre class="iy iz ja jb fd mq mo mr ms aw mt bi"><span id="4445" class="kg jp hi mo b fi mu mv l mw mx">vim index.js</span></pre><p id="9c97" class="pw-post-body-paragraph kx ky hi kz b la ls ij lc ld lt im lf kn mh lh li kq mi lk ll kt mj ln lo lp hb bi translated">要编辑，按<code class="du ml mm mn mo b">i</code>然后进行适当的更改。完成后，按下escape键，然后输入<code class="du ml mm mn mo b">:wq!</code>(写入更改，然后退出)。此外，如果您需要使用令牌创建另一个文件，您可以使用<code class="du ml mm mn mo b">echo</code>来创建单行文件，如下所示。</p><pre class="iy iz ja jb fd mq mo mr ms aw mt bi"><span id="271d" class="kg jp hi mo b fi mu mv l mw mx">echo const DISCORD_BOT_TOKEN = \"INSERT_BOT_TOKEN_HERE\" &gt; token.js</span></pre><p id="1707" class="pw-post-body-paragraph kx ky hi kz b la ls ij lc ld lt im lf kn mh lh li kq mi lk ll kt mj ln lo lp hb bi translated">一旦<code class="du ml mm mn mo b">node index.js</code>或<code class="du ml mm mn mo b">node MAIN_FILE.js</code>起作用，你就准备好继续前进了！</p><h1 id="4a6c" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">第三步:主持节目</h1><p id="1209" class="pw-post-body-paragraph kx ky hi kz b la lb ij lc ld le im lf kn lg lh li kq lj lk ll kt lm ln lo lp hb bi translated">目前，通过运行程序，如果我们关闭终端，程序将终止。为了减少这个错误，我们将使用<a class="ae jn" href="https://pm2.keymetrics.io/" rel="noopener ugc nofollow" target="_blank"> PM2 </a>，一个NPM包来保持应用程序在线。首先，全球安装PM2。</p><pre class="iy iz ja jb fd mq mo mr ms aw mt bi"><span id="27f3" class="kg jp hi mo b fi mu mv l mw mx">npm install pm2 -g</span></pre><p id="0d92" class="pw-post-body-paragraph kx ky hi kz b la ls ij lc ld lt im lf kn mh lh li kq mi lk ll kt mj ln lo lp hb bi translated">接下来，使用以下命令启动bot:</p><pre class="iy iz ja jb fd mq mo mr ms aw mt bi"><span id="8d65" class="kg jp hi mo b fi mu mv l mw mx">pm2 start index.js</span></pre><p id="d8a7" class="pw-post-body-paragraph kx ky hi kz b la ls ij lc ld lt im lf kn mh lh li kq mi lk ll kt mj ln lo lp hb bi translated">(如果您的主文件不是index.js，请用主文件的名称替换它。)</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nj"><img src="../Images/b739dd62ecb90165bbf28eaf97375c88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1OmdyYoYVVCl506Sc3_a_g.png"/></div></div></figure><p id="ed7e" class="pw-post-body-paragraph kx ky hi kz b la ls ij lc ld lt im lf kn mh lh li kq mi lk ll kt mj ln lo lp hb bi translated">完美！这样，机器人就启动并运行了！应该会显示如上图所示的图表。注意id值，因为您可以使用它来检查bot并启动/停止它。例如，如果您想查看bot的日志，您可以使用:</p><pre class="iy iz ja jb fd mq mo mr ms aw mt bi"><span id="0d60" class="kg jp hi mo b fi mu mv l mw mx">pm2 log ID</span></pre><p id="9edb" class="pw-post-body-paragraph kx ky hi kz b la ls ij lc ld lt im lf kn mh lh li kq mi lk ll kt mj ln lo lp hb bi translated">在上面的例子中，应该是:</p><pre class="iy iz ja jb fd mq mo mr ms aw mt bi"><span id="ea8d" class="kg jp hi mo b fi mu mv l mw mx">pm2 log 0</span></pre><p id="c24b" class="pw-post-body-paragraph kx ky hi kz b la ls ij lc ld lt im lf kn mh lh li kq mi lk ll kt mj ln lo lp hb bi translated">这将显示文件的控制台输出，以及可能引发的任何错误。</p><h2 id="39ca" class="kg jp hi bd jq kh ki kj ju kk kl km jy kn ko kp ka kq kr ks kc kt ku kv ke kw bi translated">一些方便的PM2表达</h2><p id="dc4e" class="pw-post-body-paragraph kx ky hi kz b la lb ij lc ld le im lf kn lg lh li kq lj lk ll kt lm ln lo lp hb bi translated">除了<code class="du ml mm mn mo b">pm2 log ID</code>，pm2还附带了一些其他方便的命令。</p><p id="d9a6" class="pw-post-body-paragraph kx ky hi kz b la ls ij lc ld lt im lf kn mh lh li kq mi lk ll kt mj ln lo lp hb bi translated">如果您对代码进行了调整，您可以随时重新启动程序。</p><pre class="iy iz ja jb fd mq mo mr ms aw mt bi"><span id="2799" class="kg jp hi mo b fi mu mv l mw mx">pm2 restart ID</span></pre><p id="ecc2" class="pw-post-body-paragraph kx ky hi kz b la ls ij lc ld lt im lf kn mh lh li kq mi lk ll kt mj ln lo lp hb bi translated">如果代码中有任何错误，您可以停止并最终启动程序。</p><pre class="iy iz ja jb fd mq mo mr ms aw mt bi"><span id="d198" class="kg jp hi mo b fi mu mv l mw mx">pm2 stop ID</span><span id="8921" class="kg jp hi mo b fi ni mv l mw mx">pm2 start ID</span></pre><p id="6016" class="pw-post-body-paragraph kx ky hi kz b la ls ij lc ld lt im lf kn mh lh li kq mi lk ll kt mj ln lo lp hb bi translated">要查看pm2命令的完整列表，请查看它的<a class="ae jn" href="https://pm2.keymetrics.io/docs/usage/pm2-doc-single-page/" rel="noopener ugc nofollow" target="_blank">文档</a>。</p><h1 id="748a" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">结论</h1><p id="f88a" class="pw-post-body-paragraph kx ky hi kz b la lb ij lc ld le im lf kn lg lh li kq lj lk ll kt lm ln lo lp hb bi translated">恭喜你。您已经正式主持了您的第一个数字海洋项目！你现在可以关闭你的终端，你的不和谐机器人或项目将继续运行，现在托管在数字海洋。</p></div></div>    
</body>
</html>