<html>
<head>
<title>Refill Player Ammo without Overshooting the Clip Capacity</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在不超出弹夹容量的情况下补充玩家弹药</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/refill-player-ammo-without-overshooting-the-clip-capacity-1e9a890857d2?source=collection_archive---------49-----------------------#2021-05-26">https://medium.com/geekculture/refill-player-ammo-without-overshooting-the-clip-capacity-1e9a890857d2?source=collection_archive---------49-----------------------#2021-05-26</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/3a081f1363b78461398017d99b9b919d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*RgQJTPhZedW6HBt8QOUaHw.gif"/></div></div></figure><p id="e6aa" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在<a class="ae jo" rel="noopener" href="/geekculture/simple-ammo-count-system-in-unity-af48844c0dd6">的前一篇文章</a>中，我谈到了如何编写一个弹药计数UI，当玩家开枪时，它会减少，当子弹用完时，它会停止射击。有限的弹药带来了补充的弹药收集来平衡游戏——我们不能让玩家在没有子弹的情况下无限期的跑来跑去，对吗？</p><p id="8e77" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">目标</strong>:创造一个弹药收集物，为玩家补充弹药。</p></div><div class="ab cl jp jq gp jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="hb hc hd he hf"><h1 id="170d" class="jw jx hi bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">防止该值超过限幅容量</h1><p id="8db4" class="pw-post-body-paragraph iq ir hi is b it ku iv iw ix kv iz ja jb kw jd je jf kx jh ji jj ky jl jm jn hb bi translated">本教程使用了Unity  中<a class="ae jo" rel="noopener" href="/geekculture/simple-ammo-count-system-in-unity-af48844c0dd6"> <strong class="is hj">简单弹药计数系统的代码，重点放在编程方面。因此，之前已经介绍过的<a class="ae jo" rel="noopener" href="/codex/animating-a-sprite-with-unitys-animation-window-b049493f69a1"> <strong class="is hj">精灵动画</strong> </a>就不在本文介绍了。</strong></a></p><ol class=""><li id="3f84" class="kz la hi is b it iu ix iy jb lb jf lc jj ld jn le lf lg lh bi translated">因为我们这次增加了弹药数量，我们需要确保弹药不会超过弹夹的容量。为了实现这一点，我们可以对简单弹药计数系统代码中的AmmoCount方法进行简单的修改。</li></ol><p id="fdea" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这个if语句检查增加的子弹数量是否大于或等于武器的最大弹药容量。如果是的话，最大弹药将总是被赋予它的默认值，这样它就不会超过这个数。</p><figure class="lj lk ll lm fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es li"><img src="../Images/115200b4c8d5a427864a751047636d2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lbbPKwnwbr8ANGV7VuiFAA.png"/></div></div></figure><blockquote class="ln lo lp"><p id="25fd" class="iq ir lq is b it iu iv iw ix iy iz ja lr jc jd je ls jg jh ji lt jk jl jm jn hb bi translated"><strong class="is hj">注</strong>:在上一篇文章中<strong class="is hj"> _maxAmmo </strong>变量<strong class="is hj">曾被称为_ammoCount </strong>。这一次我改变了它来可视化武器的弹夹容量或最大弹药。然而，这种名称的改变并不会改变任何功能，不管您如何命名，都应该完成相同的功能</p></blockquote><p id="fe65" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">2.AmmoCount方法的后续代码将仅在位置上发生变化。现在，只有当项目符号不超过最大值时，它们才会被增加或减少。</p><figure class="lj lk ll lm fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es li"><img src="../Images/5d4d331113c6327ee8de531f681332ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IqPmS-PumWlPnaAP2DCURg.png"/></div></div></figure><p id="0a3b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">3.更新UI的方法将被放在if-else语句之外，因为我们需要它来更新显示的数字，而不管它是被减、加还是缺省。</p><figure class="lj lk ll lm fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es li"><img src="../Images/e3e5bede6247e2290ca2271740ee3998.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L39s2Ztv4b2TPxYx2rv1xw.png"/></div></div></figure></div><div class="ab cl jp jq gp jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="hb hc hd he hf"><h1 id="fef1" class="jw jx hi bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">为收藏品编程</h1><p id="d79c" class="pw-post-body-paragraph iq ir hi is b it ku iv iw ix kv iz ja jb kw jd je jf kx jh ji jj ky jl jm jn hb bi translated">我的弹药收藏品将以加电的形式出现，因为我目前正在开发一款复古的2D太空射击游戏，然而，这段代码适用于任何类型的收藏品，只要它使用<a class="ae jo" href="https://levelup.gitconnected.com/oncollisionenter-vs-ontriggerenter-when-to-use-them-56d42772dd22" rel="noopener ugc nofollow" target="_blank">碰撞系统</a>来检测玩家何时捡起它。由于是加电，本节将使用来自<a class="ae jo" href="https://levelup.gitconnected.com/switch-statements-to-the-rescue-277cb924c312" rel="noopener ugc nofollow" target="_blank">模块化加电系统的代码，带有开关语句</a>和<a class="ae jo" href="https://levelup.gitconnected.com/adding-power-ups-e4af4ccbd7cb" rel="noopener ugc nofollow" target="_blank">添加加电</a> s</p><ol class=""><li id="d557" class="kz la hi is b it iu ix iy jb lb jf lc jj ld jn le lf lg lh bi translated">这个想法是在碰撞检测中调用方法，并专门检测玩家标签。您可以直接调用AmmoCount方法，并在其中分配您希望恢复的金额，就像在<a class="ae jo" rel="noopener" href="/geekculture/simple-ammo-count-system-in-unity-af48844c0dd6">上一篇文章</a>中一样，我们将调用带有减法金额的方法。在我的情况下，加电完全重新填充弹药，但你可以指定任何你喜欢的值。</li></ol><figure class="lj lk ll lm fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lu"><img src="../Images/c33aaba91d8e4c057e7664a4b8a7752d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*McE1PoGX2Pn4ZnwQQz3EqQ.png"/></div></div></figure><p id="d3d4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">2.最后，使用一个<a class="ae jo" rel="noopener" href="/codex/coroutines-with-unity-b5a2b3fc3426">协程</a>随机实例化加电来处理生成。</p><figure class="lj lk ll lm fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lv"><img src="../Images/d13d42637ca19fa0b03222c362814f02.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F0nkuzoMrqNTpZjDRXAoFQ.png"/></div></div></figure><h2 id="e011" class="lw jx hi bd jy lx ly lz kc ma mb mc kg jb md me kk jf mf mg ko jj mh mi ks mj bi translated">结果是:</h2><figure class="lj lk ll lm fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mk"><img src="../Images/f53e73a89e4dcc14b24e4ddf44054d5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*-fS_bDcyUOExvama5TMEZg.gif"/></div></div></figure></div></div>    
</body>
</html>