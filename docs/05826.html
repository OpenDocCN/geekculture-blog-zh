<html>
<head>
<title>Getting started with Python’s powerful Streamlit framework with a simple example</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过一个简单的例子开始使用Python强大的Streamlit框架</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/getting-started-with-pythons-powerful-streamlit-framework-with-a-simple-example-ed11d8af770f?source=collection_archive---------5-----------------------#2021-07-31">https://medium.com/geekculture/getting-started-with-pythons-powerful-streamlit-framework-with-a-simple-example-ed11d8af770f?source=collection_archive---------5-----------------------#2021-07-31</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/17aeb5d311abb9ac81ee4fc4c51566b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*xNmY9KX9h-zEi4PG.png"/></div></div></figure><p id="722c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Streamlit是我最近遇到的最强大和包装良好的Python库之一。我最初是通过LinkedIn上的一个帖子偶然发现这个软件的，或者说是一个<em class="jo">框架</em>,因为它的创造者喜欢这样称呼它，我立刻被它所提供的东西吸引住了。</p><p id="6488" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">它被描述为一个将可视化和仪表盘作为应用程序部署的<a class="ae jp" href="https://streamlit.io/" rel="noopener ugc nofollow" target="_blank">框架，主要面向数据科学和机器学习的用例。然而，它不仅仅是一个简单的Python库；这是一个完整的生态系统，它包含了其他库并提供了大量的功能。因此，创造者称之为框架是准确的。</a></p><p id="a6a9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">有一段时间，我<strong class="is hj">在寻找一种方法，通过一个任何人都可以在浏览器上轻松查看的应用程序来部署一些分析或仪表板</strong>。Streamlit为此提供了完美的解决方案！</p><p id="770a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下面是应用程序完全部署时的一瞥，使用了我对2018年FIFA世界杯球队数据集进行的一些分析。我将在后面更详细地介绍这个例子。</p><figure class="jr js jt ju fd ij er es paragraph-image"><div class="er es jq"><img src="../Images/8ebf6ba228a4c2954fb8401c84cbfe67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1312/0*8tbOqd3nuuAaZFo7"/></div></figure><p id="764c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要访问该应用程序，您可以使用此<a class="ae jp" href="https://share.streamlit.io/saychelsea11/streamlit_example_world_cup_2018_squads/main/Example_2/streamlit_example_2.py" rel="noopener ugc nofollow" target="_blank">链接</a>或前往我的<a class="ae jp" href="https://github.com/saychelsea11/streamlit_example_world_cup_2018_squads/tree/main/Example_2" rel="noopener ugc nofollow" target="_blank"> Github资源库</a>，并点击描述中的黑色<em class="jo">“在Streamlit中打开”</em>按钮(如下所示)以获得更酷的体验。</p><figure class="jr js jt ju fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jv"><img src="../Images/3d15efadf4fe8aceb28ea3cc682abaa9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*cyIbs4KIkpF9gxfj"/></div></div></figure><p id="db8d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我喜欢把Streamlit想象成更像一个<a class="ae jp" href="https://jupyter.org/" rel="noopener ugc nofollow" target="_blank"> <em class="jo"> Jupyter笔记本</em> </a>或者一个<a class="ae jp" href="https://www.anaconda.com/" rel="noopener ugc nofollow" target="_blank"><em class="jo">Anaconda</em></a><em class="jo"/>而不是一个<a class="ae jp" href="https://pandas.pydata.org/" rel="noopener ugc nofollow" target="_blank"> <em class="jo">熊猫</em> </a>，如果这说得通的话。它提供了一个与Python兼容的完整的软件生态系统。网站上的文档结构良好，为其作为应用程序的实施和部署以及与Python环境的无缝集成提供了分步指南。</p><figure class="jr js jt ju fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jw"><img src="../Images/bf59298aacabd0b053e5c4009bc9c353.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*WKbjzKiZ3-qTVt-h"/></div></div></figure><p id="3af3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下面，我描述了成功部署Streamlit应用程序所需的步骤，以及关于我对2018年世界杯球队的分析的细节。让我们开始吧！</p><h1 id="73b1" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">Python脚本</h1><p id="077e" class="pw-post-body-paragraph iq ir hi is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hb bi translated">创建Streamlit应用程序的第一步是创建执行特定任务的Python脚本。在这种情况下，我研究了2018年世界杯数据集，并使用Streamlit函数创建了一些可视化和markdown文本。</p><p id="85a9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">类似于在Python中安装大多数包，可以使用<strong class="is hj"><em class="jo">pip install Streamlit</em></strong>命令简单地安装Streamlit。用于分析的脚本可以在上面链接的Github存储库中找到，还有数据集和<em class="jo"> requirements.txt </em>文件，其中包含支持脚本中的分析所需的库。</p><p id="d053" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">该分析分为三个主要部分:</p><ol class=""><li id="f48c" class="la lb hi is b it iu ix iy jb lc jf ld jj le jn lf lg lh li bi translated"><em class="jo">显示数据集的片段</em></li><li id="e4e9" class="la lb hi is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li bi translated"><em class="jo">使用支线剧情分析上限和目标变量</em></li><li id="1024" class="la lb hi is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li bi translated"><em class="jo">使用条形图分析位置变量</em></li></ol><p id="25e4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将重点关注两个具体的Streamlit函数:</p><ul class=""><li id="8147" class="la lb hi is b it iu ix iy jb lc jf ld jj le jn lo lg lh li bi translated"><strong class="is hj"> <em class="jo">写</em> </strong> <em class="jo"> : </em>用来创建降价文本</li><li id="413b" class="la lb hi is b it lj ix lk jb ll jf lm jj ln jn lo lg lh li bi translated"><strong class="is hj"> <em class="jo"> Pyplot </em> </strong>:用于使用matplotlib框架生成图</li></ul><p id="b5b2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">第一部分的片段如下所示。我们来分析一下。</p><figure class="jr js jt ju fd ij er es paragraph-image"><div class="er es lp"><img src="../Images/1e5b6a4a11aeae40d3147ccc89bb86f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1030/0*BPipLy4dd8-sjjKz"/></div></figure><p id="0dc7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们首先导入所有必需的库，然后设置一个方案。对于任何不熟悉<a class="ae jp" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.gridspec.GridSpec.html" rel="noopener ugc nofollow" target="_blank"> <em class="jo"> gridspec </em> </a>函数的人来说，它是matplotlib库中用于定制支线剧情的有用工具部分。</p><p id="5f7a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="jo">第13–15行</em>显示了Streamlit函数的第一次使用。在这种情况下，<em class="jo"> write </em>函数用于创建markdown文本，最终会在最终的应用程序中显示出来。<em class="jo">第21行</em>包含另一个写函数，该函数包含一些降价文本和加载的数据帧的组合。在这种情况下，数据框的前五行将显示在应用程序中，这是该框架的一个很大的特点。</p><p id="92f2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在脚本的第二部分，我使用2×2网格中的直方图和散点图可视化了<em class="jo">上限</em>和<em class="jo">目标</em>变量。同样，该部分的标题被写入第23行的<em class="jo">markdown中。</em></p><figure class="jr js jt ju fd ij er es paragraph-image"><div class="er es lq"><img src="../Images/4ca8f6d2ffc96d37312d74b09161460c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1050/0*O0hDKqCHI5TjuySN"/></div></figure><p id="451b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在<em class="jo">第21 </em>行，我们现在介绍了一个新的Streamlit函数<em class="jo"> pyplot </em>，它支持matplotlib框架。例如，如果使用以下性质的命令在matplotlib中定义一个新图形，</p><p id="6e9a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="jo">fig 3 = PLT . figure()</em><strong class="is hj"><em class="jo">或</em> </strong></p><p id="4017" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="jo">fig 3 = PLT . figure(constrained _ layout = True，figsize=(21，11)) </em></p><p id="65db" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">图形变量(<em class="jo"> fig3 </em>)可在pyplot函数中使用，以在Streamlit环境中生成图形。在代码的第59 行<em class="jo">执行类似的命令。本节的其余部分主要由标准的matplotlib函数组成。第三和最后一部分再次利用Streamlit的write和pyplot函数创建更多的markdown文本和一个条形图，显示数据集中每个位置的频率。</em></p><p id="340c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为了使用Streamlit框架，脚本需要使用<strong class="is hj"> <em class="jo"> streamlit run </em> </strong>命令运行，而不是Anaconda中常用的<em class="jo"> python </em>命令。例如，我执行了以下命令来运行我的脚本，该脚本在web浏览器中打开了应用程序的预览:</p><figure class="jr js jt ju fd ij er es paragraph-image"><div class="er es lr"><img src="../Images/8b0398d6546ef67ff95d2f2f0ac38943.png" data-original-src="https://miro.medium.com/v2/resize:fit:1082/0*FuJn5UIuxWW4a9Yy"/></div></figure><h1 id="22c8" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">注册Streamlit共享和链接Github帐户</h1><p id="3fd7" class="pw-post-body-paragraph iq ir hi is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hb bi translated">在预览页面上，点击页面右上角的<strong class="is hj">菜单按钮(3条)</strong>，选择<strong class="is hj">‘部署此应用’</strong>。</p><figure class="jr js jt ju fd ij er es paragraph-image"><div class="er es ls"><img src="../Images/3c925b8e564e80b6d48dcb77c1a9c545.png" data-original-src="https://miro.medium.com/v2/resize:fit:540/0*_cswlWyGrADgzgbM"/></div></figure><p id="c360" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这将打开一个窗口，提示您链接一个<strong class="is hj">公共Github库</strong>。不过还有一个关键步骤从说明上看并不完全明显，那就是报名<a class="ae jp" href="https://streamlit.io/sharing" rel="noopener ugc nofollow" target="_blank"> <strong class="is hj"> Streamlit分享</strong> </a>。</p><figure class="jr js jt ju fd ij er es paragraph-image"><div class="er es lt"><img src="../Images/08b41f830febc06c99ecb7824ffdf169.png" data-original-src="https://miro.medium.com/v2/resize:fit:938/0*6Qb7P_7f--9bPsUQ"/></div></figure><p id="6aa3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">点击上面窗口中的“我们的文档”将带您进入Streamlit网站，该网站提供了有关如何部署应用程序的进一步说明。但是，此时只有两个关键事项要做:</p><ol class=""><li id="88eb" class="la lb hi is b it iu ix iy jb lc jf ld jj le jn lf lg lh li bi translated">将你的<em class="jo">代码</em>、<em class="jo">数据</em>和<em class="jo"> requirements.txt </em>文件放在一个公共的Github存储库中</li><li id="d5ec" class="la lb hi is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li bi translated">注册<em class="jo"> Streamlit分享</em>链接上面的Github库</li></ol><p id="71f1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">注册Streamlit共享很简单。进入页面后(如下所示)，点击“请求邀请”,然后按照说明完成设置。需要的两个关键信息是<strong class="is hj"> Github回购目录</strong>和与回购相关的<strong class="is hj">电子邮件地址</strong>。</p><figure class="jr js jt ju fd ij er es paragraph-image"><div class="er es lu"><img src="../Images/6b59c1465fa602de8d9908ec2319fd42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1146/0*lB6zG_nceipJJ736"/></div></figure><p id="72d0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一旦您收到确认您的帐户已设置的电子邮件，应用程序就可以部署了！</p><h1 id="72ba" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">部署应用程序</h1><p id="a293" class="pw-post-body-paragraph iq ir hi is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hb bi translated">登录到您的Streamlit共享帐户，然后单击页面左上角的蓝色<strong class="is hj">“新建应用程序”</strong>按钮。然后填写部署应用程序所需的信息。一旦你的Github账户链接到Streamlit，这一步就相当直观了。</p><figure class="jr js jt ju fd ij er es paragraph-image"><div class="er es lv"><img src="../Images/4ba452ae2c8b0e9dbe0f351e1c7a8b49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1310/0*SV62bSYKNfY5zuKT"/></div></figure><p id="a9f9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">点击<strong class="is hj">‘部署！’</strong>当你完成并简化后，它将使用<em class="jo"> requirements.txt </em>文件中提到的库开始执行你的Python脚本。</p><figure class="jr js jt ju fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lw"><img src="../Images/834bbf3f851d6b379483bf4e40369a9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*SMaNplh_qGfP1W2G"/></div></div></figure><p id="d568" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">注意，在这个初始部署过程中，安装所有必需的库需要一些时间。然而，一旦上线，重新运行应用程序只需几秒钟，每次有人访问该页面，应用程序都会自动重新运行。</p><p id="c7c1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">请记住，如果应用程序在特定的天数内没有活动，它将进入睡眠状态。Streamlit将发送一封电子邮件，通知您该应用程序将在几天前进入睡眠状态。为了使它保持活动状态，只需访问页面。该应用程序也可以从您的Streamlit帐户的仪表板重新启动。</p><p id="4b12" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这就对了。我希望这是有用的。如果您以前使用过Streamlit，请在评论中告诉我，您发现该软件还有哪些有用的功能。我的最终目标是部署我使用Streamlit创建的财务跟踪仪表板，以便其他用户更容易访问它。留意那个！</p></div><div class="ab cl lx ly gp lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="hb hc hd he hf"><p id="2949" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="jo">原载于2021年7月31日</em><a class="ae jp" href="http://thecraftofdata.com/2021/07/getting-started-with-the-powerful-streamlit-framework-in-python-with-a-simple-example" rel="noopener ugc nofollow" target="_blank"><em class="jo">【http://thecraftofdata.com】</em></a><em class="jo">。</em></p></div></div>    
</body>
</html>