<html>
<head>
<title>Convert Kubernetes YAML Files Into Helm Charts</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将Kubernetes YAML文件转换为舵图</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/convert-kubernetes-yaml-files-into-helm-charts-4107de079455?source=collection_archive---------0-----------------------#2022-11-28">https://medium.com/geekculture/convert-kubernetes-yaml-files-into-helm-charts-4107de079455?source=collection_archive---------0-----------------------#2022-11-28</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="1e14" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">Helmify</h2></div><p id="14c3" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这篇博客中，我们将看到使用helmify将yaml文件转换为helm图表。</p><h2 id="97d7" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">舵图</h2><p id="8b0a" class="pw-post-body-paragraph ix iy hi iz b ja ko ij jc jd kp im jf jg kq ji jj jk kr jm jn jo ks jq jr js hb bi translated">Helm可以轻松定义、安装和升级最复杂的Kubernetes T2应用程序。Helm帮助您管理<a class="ae kt" rel="noopener" href="/@vinodhakumara2681997/k8s-multi-node-cluster-on-aws-using-ansible-and-launching-a-wordpress-application-with-mysql-e40f69d63773"> Kubernetes </a>应用程序。图表创建、版本控制、共享和发布都是简单的任务。</p><h2 id="9a3e" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">YAML</h2><p id="e1d6" class="pw-post-body-paragraph ix iy hi iz b ja ko ij jc jd kp im jf jg kq ji jj jk kr jm jn jo ks jq jr js hb bi translated">YAML是一种易于理解的数据序列化语言，常用于用任何编程语言创建配置文件。YAML是为人类交互而设计的，是另一种数据序列化语言JSON的严格超集。但是因为它是一个严格的超集，它可以做JSON能做的一切，甚至更多。</p><h2 id="1013" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">Helmify</h2><p id="a92c" class="pw-post-body-paragraph ix iy hi iz b ja ko ij jc jd kp im jf jg kq ji jj jk kr jm jn jo ks jq jr js hb bi translated"><a class="ae kt" href="https://github.com/arttor/helmify" rel="noopener ugc nofollow" target="_blank"> Helmify </a>从stdin中读取支持的k8s对象列表，并将其转换为helm chart。旨在为k8s操作员生成图表，但不限于阅读:</p><figure class="kv kw kx ky fd kz er es paragraph-image"><a href="https://github.com/arttor/helmify"><div class="er es ku"><img src="../Images/1360e03d953ab0dae74740edc6e5f1e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:450/format:webp/1*n0D0iNnncgDbsylQxgRnfA.png"/></div></a><figcaption class="lc ld et er es le lf bd b be z dx">Helmify</figcaption></figure><p id="2229" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们看看helmify上的一个例子</p><h2 id="ba25" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">安装Helmify</h2><pre class="kv kw kx ky fd lg lh li bn lj lk bi"><span id="2faa" class="ll ju hi lh b be lm ln l lo lp">brew install helmify</span></pre><p id="b9e9" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在其他操作系统上安装helmify，方法是在这里解压<a class="ae kt" href="https://github.com/arttor/helmify/releases/" rel="noopener ugc nofollow" target="_blank"/>。</p><h2 id="67b0" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">创建示例YAML部署文件</h2><pre class="kv kw kx ky fd lg lh li bn lj lk bi"><span id="4044" class="ll ju hi lh b be lm ln l lo lp">apiVersion: apps/v1<br/>kind: Deployment<br/>metadata:<br/>  name: nginx-deployment<br/>  labels:<br/>    app: nginx<br/>spec:<br/>  replicas: 3<br/>  selector:<br/>    matchLabels:<br/>      app: nginx<br/>  template:<br/>    metadata:<br/>      labels:<br/>        app: nginx<br/>    spec:<br/>      containers:<br/>      - name: nginx<br/>        image: nginx:1.14.2<br/>        ports:<br/>        - containerPort: 80</span></pre><p id="a500" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们还可以获得k8s上现有服务的YAML文件，并使用helmify将其转换。</p><h2 id="67df" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">将YAML文件转换为头盔</h2><pre class="kv kw kx ky fd lg lh li bn lj lk bi"><span id="ffcf" class="ll ju hi lh b be lm ln l lo lp">cat web.yaml | helmify nginx-server</span></pre><p id="91e4" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">运行helmify后，它用更新后的代码创建了一个图表模板，如下图所示</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="er es lq"><img src="../Images/ed4a85c4439d9aa1a448cbd2a57f9d3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E4yRgHs5dn5vGp0dCmir2g.png"/></div></div></figure><h2 id="5699" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">从包含yamls的目录:</h2><p id="965e" class="pw-post-body-paragraph ix iy hi iz b ja ko ij jc jd kp im jf jg kq ji jj jk kr jm jn jo ks jq jr js hb bi translated">我们也可以创建文件夹，</p><pre class="kv kw kx ky fd lg lh li bn lj lk bi"><span id="a87d" class="ll ju hi lh b be lm ln l lo lp">awk 'FNR==1 &amp;&amp; NR!=1  {print "---"}{print}' /&lt;my_directory&gt;/*.yaml | helmify mychart</span></pre><p id="9744" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">将从<code class="du lv lw lx lh b">&lt;my_directory&gt; </code>目录中的所有yaml文件创建带有舵图的“mychart”目录。</p><p id="3d21" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">点击阅读更多<a class="ae kt" href="https://github.com/arttor/helmify" rel="noopener ugc nofollow" target="_blank"/></p><h2 id="56a7" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">结论</h2><p id="c331" class="pw-post-body-paragraph ix iy hi iz b ja ko ij jc jd kp im jf jg kq ji jj jk kr jm jn jo ks jq jr js hb bi translated">Helmify允许我们使用现有的Kubernets服务或从K8s yaml文件创建舵图</p><blockquote class="ly lz ma"><p id="bc58" class="ix iy mb iz b ja jb ij jc jd je im jf mc jh ji jj md jl jm jn me jp jq jr js hb bi translated"><em class="hi">如果你觉得这篇文章很有帮助，请</em> <strong class="iz hj"> <em class="hi">别忘了</em> </strong> <em class="hi">点击</em> <strong class="iz hj"> <em class="hi">跟随</em></strong><em class="hi"/><strong class="iz hj"><em class="hi">拍拍</em> </strong> <em class="hi">按钮，帮我写更多这样的文章。<br/> </em> <strong class="iz hj"> <em class="hi">谢谢🖤 </em> </strong></p><p id="c828" class="ix iy mb iz b ja jb ij jc jd je im jf mc jh ji jj md jl jm jn me jp jq jr js hb bi translated"><strong class="iz hj"> <em class="hi">你可以联系我:</em></strong><a class="ae kt" href="https://www.linkedin.com/in/vinodha-kumara-8a00bb1a8/" rel="noopener ugc nofollow" target="_blank"><em class="hi">LinkedIn</em></a><em class="hi"/><a class="ae kt" href="mailto:vinodhakumara2681997@gmail.com" rel="noopener ugc nofollow" target="_blank"><em class="hi">email me</em></a></p></blockquote></div></div>    
</body>
</html>