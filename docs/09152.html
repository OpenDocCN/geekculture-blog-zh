<html>
<head>
<title>GraphQL Schema</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">GraphQL模式</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/graphql-schema-e70547fe2c81?source=collection_archive---------21-----------------------#2021-11-28">https://medium.com/geekculture/graphql-schema-e70547fe2c81?source=collection_archive---------21-----------------------#2021-11-28</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/d2b9ed7d6a910344c07b7f62af3e5fe4.png" data-original-src="https://miro.medium.com/v2/resize:fit:540/format:webp/1*036QW4CAf5nNj1VdSuGJFQ.png"/></div></figure><h1 id="c106" class="im in hi bd io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj bi translated">介绍</h1><p id="c550" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">GraphQL服务器用法模式是指可用数据的形式。该模式描述了具有字段的类型的命令链。这些都是从后端数据存储中解决的。该模式还准确地陈述了哪些查询和变化可供客户端执行。</p><p id="935e" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">在本文中，我们将学习模式的重要构建块，以及如何为<a class="ae kn" href="https://www.technologiesinindustry4.com/2021/08/interaction-with-an-apollo-graphql-server-from-the-frontend.html" rel="noopener ugc nofollow" target="_blank"> GraphQL服务器构建一个模式。</a></p><h1 id="7236" class="im in hi bd io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj bi translated">描述</h1><p id="7573" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">GraphQL模式对于任何<a class="ae kn" href="https://www.technologiesinindustry4.com/2021/08/interaction-with-an-apollo-graphql-server-from-the-frontend.html" rel="noopener ugc nofollow" target="_blank"> GraphQL </a>服务器应用程序都是必不可少的。它指的是连接到它的客户端使用的现有功能。我们可以使用任何编程语言来形成一个GraphQL模式，并围绕它形成一个界面。</p><p id="0ac1" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">GraphQL运行时概述了一个通用的基于图形的模式。也就是发布它所表示的数据服务的能力。客户端应用程序可以在其能力范围内查询模式。这种方法将客户机与服务器分离，允许一起自由地改变和扩展。</p><p id="b159" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">我们需要准备的就是使用GraphQL模式语言来识别API的类型。用作构建模式函数的参数。</p><p id="321a" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated"><a class="ae kn" href="https://www.technologiesinindustry4.com/2021/08/graphql-queries-and-mutations.html" rel="noopener ugc nofollow" target="_blank"> GraphQL </a>模式语言关心的是String、Int、Float、Boolean和ID的标量类型。因此，我们可以在传递的模式中公开使用这些来构建模式。</p><p id="f945" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">默认情况下，每种类型都可以为空。将null作为任何标量类型返回是真实的。用于指定类型的感叹号不能为空。所以，字符串！是不可为空的字符串。</p><p id="b16a" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">用方括号将类型括起来，以使用列表类型。因此，[Int]是一个整数列表。这些类型都直接映射到JavaScript。因为我们可以在返回这些类型的API中返回普通的旧JavaScript对象。</p><p id="891b" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated"><strong class="jm hj">举例:</strong></p><pre class="ko kp kq kr fd ks kt ku kv aw kw bi"><span id="da87" class="kx in hi kt b fi ky kz l la lb">var express = require('express');</span><span id="c31a" class="kx in hi kt b fi lc kz l la lb">var { graphqlHTTP } = require('express-graphql');</span><span id="5ae7" class="kx in hi kt b fi lc kz l la lb">var { buildSchema } = require('graphql');<br/></span><span id="4796" class="kx in hi kt b fi lc kz l la lb">// Construct a schema, using GraphQL schema language</span><span id="5126" class="kx in hi kt b fi lc kz l la lb">var schema = buildSchema(`</span><span id="d4c9" class="kx in hi kt b fi lc kz l la lb">  type Query {</span><span id="a709" class="kx in hi kt b fi lc kz l la lb">    quoteOfTheDay: String</span><span id="4076" class="kx in hi kt b fi lc kz l la lb">    random: Float!</span><span id="3196" class="kx in hi kt b fi lc kz l la lb">    rollThreeDice: [Int]</span><span id="3321" class="kx in hi kt b fi lc kz l la lb">  }</span><span id="ac39" class="kx in hi kt b fi lc kz l la lb">`);<br/></span><span id="2a62" class="kx in hi kt b fi lc kz l la lb">// The root provides a resolver function for each API endpoint</span><span id="a5a6" class="kx in hi kt b fi lc kz l la lb">var root = {</span><span id="2a0b" class="kx in hi kt b fi lc kz l la lb">  quoteOfTheDay: () =&gt; {</span><span id="ca4b" class="kx in hi kt b fi lc kz l la lb">    return Math.random() &lt; 0.5 ? 'Take it easy' : 'Salvation lies within';</span><span id="edb9" class="kx in hi kt b fi lc kz l la lb">  },</span><span id="b471" class="kx in hi kt b fi lc kz l la lb">  random: () =&gt; {</span><span id="45ac" class="kx in hi kt b fi lc kz l la lb">    return Math.random();</span><span id="366e" class="kx in hi kt b fi lc kz l la lb">  },</span><span id="e30c" class="kx in hi kt b fi lc kz l la lb">  rollThreeDice: () =&gt; {</span><span id="bebe" class="kx in hi kt b fi lc kz l la lb">    return [1, 2, 3].map(_ =&gt; 1 + Math.floor(Math.random() * 6));</span><span id="a567" class="kx in hi kt b fi lc kz l la lb">  },</span><span id="d934" class="kx in hi kt b fi lc kz l la lb">};<br/></span><span id="95b8" class="kx in hi kt b fi lc kz l la lb">var app = express();</span><span id="fd78" class="kx in hi kt b fi lc kz l la lb">app.use('/graphql', graphqlHTTP({</span><span id="9dbb" class="kx in hi kt b fi lc kz l la lb">  schema: schema,</span><span id="f2b6" class="kx in hi kt b fi lc kz l la lb">  rootValue: root,</span><span id="b5d0" class="kx in hi kt b fi lc kz l la lb">  graphiql: true,</span><span id="98c6" class="kx in hi kt b fi lc kz l la lb">}));</span><span id="5e7b" class="kx in hi kt b fi lc kz l la lb">app.listen(4000);</span><span id="2ff9" class="kx in hi kt b fi lc kz l la lb">console.log('Running a GraphQL API server at localhost:4000/graphql');</span></pre><h1 id="2ad4" class="im in hi bd io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj bi translated">字段定义</h1><p id="4dba" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">我们定义了许多具有一个或多个字段的模式类型。每个字段都返回指定类型的数据。<a class="ae kn" href="https://www.technologiesinindustry4.com/" rel="noopener ugc nofollow" target="_blank">字段的返回类型可以是标量、对象、枚举、联合或接口。</a></p><pre class="ko kp kq kr fd ks kt ku kv aw kw bi"><span id="7048" class="kx in hi kt b fi ky kz l la lb"># This Book type has two fields: title and author</span><span id="b0c0" class="kx in hi kt b fi lc kz l la lb">type Book {</span><span id="bf20" class="kx in hi kt b fi lc kz l la lb">  title: String  # returns a String</span><span id="c72b" class="kx in hi kt b fi lc kz l la lb">  author: Author # returns an Author</span><span id="44db" class="kx in hi kt b fi lc kz l la lb">}</span></pre><h1 id="822d" class="im in hi bd io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj bi translated">makeExecutableSchema的函数语法</h1><p id="de79" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">此函数采用对象类型的单个参数{}。<a class="ae kn" href="https://www.technologiesinindustry4.com/" rel="noopener ugc nofollow" target="_blank">使用该功能的语法描述如下:</a></p><pre class="ko kp kq kr fd ks kt ku kv aw kw bi"><span id="cb9c" class="kx in hi kt b fi ky kz l la lb">import { makeExecutableSchema } from 'graphql-tools';</span><span id="8575" class="kx in hi kt b fi lc kz l la lb">const jsSchema = makeExecutableSchema({</span><span id="774c" class="kx in hi kt b fi lc kz l la lb">   typeDefs,</span><span id="57d6" class="kx in hi kt b fi lc kz l la lb">   resolvers, // optional</span><span id="fa42" class="kx in hi kt b fi lc kz l la lb">   logger, // optional</span><span id="c3d7" class="kx in hi kt b fi lc kz l la lb">   allowUndefinedInResolve = false, // optional</span><span id="1868" class="kx in hi kt b fi lc kz l la lb">   resolverValidationOptions = {}, // optional</span><span id="796e" class="kx in hi kt b fi lc kz l la lb">   directiveResolvers = null, // optional</span><span id="157d" class="kx in hi kt b fi lc kz l la lb">   schemaDirectives = null,  // optional</span><span id="e67f" class="kx in hi kt b fi lc kz l la lb">   parseOptions = {},  // optional</span><span id="be18" class="kx in hi kt b fi lc kz l la lb">   inheritResolversFromInterfaces = false  // optional</span><span id="1111" class="kx in hi kt b fi lc kz l la lb">});</span></pre><p id="5f20" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">更多详情请访问我的网站:<a class="ae kn" href="https://www.technologiesinindustry4.com/" rel="noopener ugc nofollow" target="_blank">https://www.technologiesinindustry4.com/</a></p></div></div>    
</body>
</html>