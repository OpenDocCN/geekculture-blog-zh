<html>
<head>
<title>Understanding The Chain of Responsibility Pattern</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">理解责任链模式</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/understanding-the-chain-of-responsibility-pattern-d729ef84621c?source=collection_archive---------1-----------------------#2021-05-26">https://medium.com/geekculture/understanding-the-chain-of-responsibility-pattern-d729ef84621c?source=collection_archive---------1-----------------------#2021-05-26</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/42d39eeae538ce904192d7d82c26ba5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*NV6bysmEzk1Ry_7V"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Photo by <a class="ae iu" href="https://unsplash.com/@jontyson?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Jon Tyson</a> on <a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="a048" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">责任链模式是一种行为设计模式，我们用它来实现软件设计中的松散耦合，其中来自客户的请求被传递给一系列对象来处理它们。请求将通过处理程序接收，链中的对象将自己决定谁将处理该请求。这些对象中的每一个都包含某种类型的命令来处理请求。如果一个特定的对象不能处理该请求，它将把该请求传递给该链中的下一个对象。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jt"><img src="../Images/7cd1ec8944e72757e8de4571da48041c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wqHGES91TwX_KazIOB8fAg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Image: Chain of responsibility pattern concept (educative.io)</figcaption></figure><p id="9cef" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">因此，这种模式的主要目的是避免耦合。例如，当向接收者发送消息时，发送者不知道接收者是谁，接收者也不知道发送者是谁。因此，接收者可以在不知道谁发送消息的情况下执行其任务，发送者也是如此。这意味着我们可以通过这种设计模式<strong class="ix hj">解耦</strong> <strong class="ix hj">发送者和接收者</strong>。</p><h2 id="fae4" class="jy jz hi bd ka kb kc kd ke kf kg kh ki jg kj kk kl jk km kn ko jo kp kq kr ks bi translated">责任链模式的结构</h2><figure class="ju jv jw jx fd ij er es paragraph-image"><div class="er es kt"><img src="../Images/3f1bf77ecc4bb3ac56b56eb2587d6be1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1122/format:webp/1*cgS_U86kK-ToUoI-F5BSeQ.png"/></div><figcaption class="iq ir et er es is it bd b be z dx">Image: UML Representation (programmergirl.com)</figcaption></figure><p id="1553" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">正如您在UML图上看到的，它有3种类型的组件，分别命名为客户端、处理程序和具体处理程序。</p><p id="e926" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">处理程序:</strong>它定义了一个处理请求的接口。此外，这可以是一个抽象类，它主要接收请求并将请求转发给处理程序链。</p><p id="8644" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">具体的处理程序:这些处理程序负责处理它们收到的请求。如果一个特定的处理程序不能处理这个请求，它就把这个请求发送给它的后继者。</p><p id="98db" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">客户端:</strong>向链中可能处理命令的第一个对象发送请求。</p><blockquote class="ku kv kw"><p id="0337" class="iv iw kx ix b iy iz ja jb jc jd je jf ky jh ji jj kz jl jm jn la jp jq jr js hb bi translated">注意:请求可以发送给链中的任何处理程序，但不一定是第一个。</p></blockquote><h1 id="f1bf" class="lb jz hi bd ka lc ld le ke lf lg lh ki li lj lk kl ll lm ln ko lo lp lq kr lr bi translated">责任链模式的用例</h1><p id="3321" class="pw-post-body-paragraph iv iw hi ix b iy ls ja jb jc lt je jf jg lu ji jj jk lv jm jn jo lw jq jr js hb bi translated">在这一章中，我将通过一个使用Java的真实例子来解释如何应用责任链模式。假设有一家公司为员工提供了一个基于几个事实请假系统。因此，公司在批准他们的休假前会考虑这些事实。例如，这些可能是<strong class="ix hj">天数</strong>、<strong class="ix hj">员工级别</strong>和<strong class="ix hj">休假原因</strong>。基于这些事实，休假请求将被转发给一个特定的人(休假处理者)，他可以处理这些请求。这个人可能是<strong class="ix hj">团队领导、项目领导、人力资源或经理。</strong>如果员工要求休假7天或更短时间，团队领导将处理该请求。但在批准休假请求之前，团队领导会检查员工的级别。如果员工级别在可接受的范围内，那么团队领导将批准休假请求。</p><p id="ab98" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果员工请求休假14天或更少，团队领导不能处理该请求，因为他只有权批准最多7天的休假。在这种情况下，请求将被传递给有权处理该请求的项目负责人。然后，他将开始审批流程，与上一个流程相同。</p><p id="2add" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然而，在上面的场景中，他们不会检查请假的原因。但是到了HR和经理层面，他们会去查请假的理由。如果员工要求最多21天，人力资源部会处理，如果超过21天，经理会处理。在处理请求时，他们会检查原因是<strong class="ix hj">常规、关键、</strong>还是<strong class="ix hj">特殊</strong>原因。然后，他们将根据这些事实批准或拒绝请求。</p><p id="6872" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在让我们看看这个例子的实现。</p><h2 id="29f4" class="jy jz hi bd ka kb kc kd ke kf kg kh ki jg kj kk kl jk km kn ko jo kp kq kr ks bi translated">步骤01</h2><p id="82f7" class="pw-post-body-paragraph iv iw hi ix b iy ls ja jb jc lt je jf jg lu ji jj jk lv jm jn jo lw jq jr js hb bi translated">作为第一步，我已经实现了<strong class="ix hj">【请假】</strong>类。在“Leave”类中，我定义了类似于<strong class="ix hj">、“天数”、“清空”和“原因”的字段。这些是公司在批准休假申请前将要考虑的事实。</strong></p><figure class="ju jv jw jx fd ij"><div class="bz dy l di"><div class="lx ly l"/></div></figure><h2 id="3fc6" class="jy jz hi bd ka kb kc kd ke kf kg kh ki jg kj kk kl jk km kn ko jo kp kq kr ks bi translated">步骤02</h2><p id="e29b" class="pw-post-body-paragraph iv iw hi ix b iy ls ja jb jc lt je jf jg lu ji jj jk lv jm jn jo lw jq jr js hb bi translated">第二步，我们必须创建处理程序类。根据这个场景，我创建了一个名为<strong class="ix hj">“leave handler”的抽象类。然后我在类中创建了“LeaveHandler”对象，因为处理程序应该知道它的后继者。</strong></p><p id="c46f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">此外，我还创建了一个接受“Leave”类对象的抽象方法。因此，每个要扩展“LeaveHandler”类的类都必须在它们的类中实现这个方法。</p><figure class="ju jv jw jx fd ij"><div class="bz dy l di"><div class="lx ly l"/></div></figure><h2 id="ed63" class="jy jz hi bd ka kb kc kd ke kf kg kh ki jg kj kk kl jk km kn ko jo kp kq kr ks bi translated">步骤03</h2><p id="082c" class="pw-post-body-paragraph iv iw hi ix b iy ls ja jb jc lt je jf jg lu ji jj jk lv jm jn jo lw jq jr js hb bi translated">现在，我们必须为该公司的每个请求批准者(具体的处理者)实现一个单独的类。因此，我为团队领导、项目领导、人力资源和经理创建了一个单独的类。所有这些类都扩展了“LeaveHandler”类，并在其中实现了<strong class="ix hj">“apply leave”</strong>方法。</p><figure class="ju jv jw jx fd ij"><div class="bz dy l di"><div class="lx ly l"/></div></figure><figure class="ju jv jw jx fd ij"><div class="bz dy l di"><div class="lx ly l"/></div></figure><figure class="ju jv jw jx fd ij"><div class="bz dy l di"><div class="lx ly l"/></div></figure><figure class="ju jv jw jx fd ij"><div class="bz dy l di"><div class="lx ly l"/></div></figure><p id="4877" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">此外，我还创建了一个枚举来保存原因类型。</p><figure class="ju jv jw jx fd ij"><div class="bz dy l di"><div class="lx ly l"/></div></figure><p id="a27f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如您所见，“applyLeave”方法包含了这些类的核心逻辑。因此，无论何时处理者收到休假请求，它都会传递给团队领导。如果团队领导有权对该请求采取行动，他将处理并给出结果(批准/拒绝)。如果他没有权限，他将把它传递给链中的下一个人(项目领导)。如果没有人有权对请求采取行动(<em class="kx">如果员工请求超过21天，且原因是“特殊”</em>)，则该请求将被传递给经理(链的末端)，他将对该请求做出回应。</p><h2 id="43fb" class="jy jz hi bd ka kb kc kd ke kf kg kh ki jg kj kk kl jk km kn ko jo kp kq kr ks bi translated">步骤04</h2><p id="a584" class="pw-post-body-paragraph iv iw hi ix b iy ls ja jb jc lt je jf jg lu ji jj jk lv jm jn jo lw jq jr js hb bi translated">最后，我们可以运行应用程序了</p><figure class="ju jv jw jx fd ij"><div class="bz dy l di"><div class="lx ly l"/></div></figure><p id="ac24" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">输出:</p><pre class="ju jv jw jx fd lz ma mb mc aw md bi"><span id="b05c" class="jy jz hi ma b fi me mf l mg mh">Your leave days has been APPROVED by TeamLeader<br/>Your employee Tier level is too low for request 5 days<br/>Your leave days has been APPROVED by Project Leader<br/>Your leave days has been APPROVED by HR<br/>Your leave request has been DENIED by HR<br/>Your leave days has been APPROVED by Manager</span></pre></div><div class="ab cl mi mj gp mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="hb hc hd he hf"><p id="91d2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果您感兴趣，可以使用下面的GitHub链接来查看我的责任链模式的完整实现。</p><div class="mp mq ez fb mr ms"><a href="https://github.com/nisal-kumara/krish-lp-training/tree/master/Design%20Patterns/ChainOfResponsibility" rel="noopener  ugc nofollow" target="_blank"><div class="mt ab dw"><div class="mu ab mv cl cj mw"><h2 class="bd hj fi z dy mx ea eb my ed ef hh bi translated">尼萨尔-库马拉/克里希-LP-培训</h2><div class="mz l"><h3 class="bd b fi z dy mx ea eb my ed ef dx translated">在GitHub上创建一个帐户，为nisal-kumara/krish-lp-training的发展做出贡献。</h3></div><div class="na l"><p class="bd b fp z dy mx ea eb my ed ef dx translated">github.com</p></div></div><div class="nb l"><div class="nc l nd ne nf nb ng io ms"/></div></div></a></div><p id="f618" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">所以，这是我的文章的结尾，我希望你喜欢它。快乐编码👨‍💻。</p></div><div class="ab cl mi mj gp mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="hb hc hd he hf"><h1 id="67b2" class="lb jz hi bd ka lc nh le ke lf ni lh ki li nj lk kl ll nk ln ko lo nl lq kr lr bi translated">参考</h1><figure class="ju jv jw jx fd ij"><div class="bz dy l di"><div class="nm ly l"/></div></figure><div class="mp mq ez fb mr ms"><a href="https://www.geeksforgeeks.org/chain-responsibility-design-pattern/" rel="noopener  ugc nofollow" target="_blank"><div class="mt ab dw"><div class="mu ab mv cl cj mw"><h2 class="bd hj fi z dy mx ea eb my ed ef hh bi translated">责任链设计模式</h2><div class="mz l"><h3 class="bd b fi z dy mx ea eb my ed ef dx translated">责任链模式用于实现软件设计中的松散耦合，在这种情况下，来自客户的请求是…</h3></div><div class="na l"><p class="bd b fp z dy mx ea eb my ed ef dx translated">www.geeksforgeeks.org</p></div></div><div class="nb l"><div class="nn l nd ne nf nb ng io ms"/></div></div></a></div></div></div>    
</body>
</html>