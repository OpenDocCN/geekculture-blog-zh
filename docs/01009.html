<html>
<head>
<title>Implement Cropping Feature on Your Website in Under 10 Min | Cropper.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在10分钟内实现网站的裁剪功能| Cropper.js</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/implement-cropping-feature-on-your-website-in-under-10-min-cropper-js-46b90d860748?source=collection_archive---------2-----------------------#2021-03-24">https://medium.com/geekculture/implement-cropping-feature-on-your-website-in-under-10-min-cropper-js-46b90d860748?source=collection_archive---------2-----------------------#2021-03-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/5b384046e12f1bfe8a05633fe1e5754e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jNBTs7PQWrw8MtQ8Nojgyw.png"/></div></div></figure><div class=""/><blockquote class="iq ir is"><p id="c87a" class="it iu iv iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">js是jQuery Image Cropper插件的JavaScript版本，它为任何图像提供了丰富的图像裁剪功能。</p></blockquote><p id="0001" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hb bi translated">在本文中，我们将研究如何在一个非常简单的网站上实现cropper.js插件，这样当用户在HTML表单上输入图像时，他们将被提示首先裁剪图像，在成功裁剪后，表单中的原始图像将被裁剪后的图像所替换，用户可以提交表单。</p><p id="4f7e" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hb bi translated"><strong class="iw hu">最终项目演示:</strong></p><figure class="jw jx jy jz fd hk er es paragraph-image"><div class="er es jv"><img src="../Images/9f12a204d6d7edb7fffbf4e1b4d37e88.png" data-original-src="https://miro.medium.com/v2/resize:fit:932/1*NwekqB5MbbzHkw2XHeQEsA.gif"/></div></figure><blockquote class="iq ir is"><p id="f35f" class="it iu iv iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hu"> <em class="ht">注意</em> </strong> <em class="ht">:出于本文的演示目的，示例项目是使用Django框架作为后端实现的，但是使用任何其他框架或技术栈实现项目的读者也可以跟随，因为该插件的核心实现细节依赖于只使用基本的HTML、CSS和JS。</em></p></blockquote><h1 id="6245" class="ka kb ht bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">我们开始吧</h1><p id="3aef" class="pw-post-body-paragraph it iu ht iw b ix ky iz ja jb kz jd je js la jh ji jt lb jl jm ju lc jp jq jr hb bi translated">我们将建立一个如上所示的非常基本的项目，其中任何用户都可以在一个表单上发布其个人资料详细信息(姓名，电子邮件和个人资料图片)，上传个人资料图片后，将显示裁剪视图功能，在裁剪图像后，用户可以发布其更新的个人资料与裁剪图像作为输入。</p><blockquote class="iq ir is"><p id="3bd8" class="it iu iv iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hu">注意:读者已经使用其他框架或技术实现了他们的项目，并且正在考虑如何在他们的网站中集成裁剪功能，那么他们可以直接跳转并从步骤6.2继续。</strong></p></blockquote><h1 id="0d68" class="ka kb ht bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">制作Django应用程序</h1><h2 id="a157" class="ld kb ht bd kc le lf lg kg lh li lj kk js lk ll ko jt lm ln ks ju lo lp kw lq bi translated">步骤1:安装基本库</h2><ul class=""><li id="14b6" class="lr ls ht iw b ix ky jb kz js lt jt lu ju lv jr lw lx ly lz bi translated">创建并激活您的<a class="ae ma" href="https://packaging.python.org/guides/installing-using-pip-and-virtual-environments/" rel="noopener ugc nofollow" target="_blank">虚拟环境</a>，并使用，</li></ul><pre class="jw jx jy jz fd mb mc md me aw mf bi"><span id="ecde" class="ld kb ht mc b fi mg mh l mi mj">$ pip install django<br/>$ pip install django-crispy-forms<br/>$ pip install Pillow</span></pre><ul class=""><li id="a955" class="lr ls ht iw b ix iy jb jc js mk jt ml ju mm jr lw lx ly lz bi translated"><a class="ae ma" href="https://pypi.org/project/django-crispy-forms/" rel="noopener ugc nofollow" target="_blank">django-crisp-forms</a>是一个允许我们在前端轻松设计表单样式的库。</li><li id="f9a8" class="lr ls ht iw b ix mn jb mo js mp jt mq ju mr jr lw lx ly lz bi translated"><a class="ae ma" href="https://pillow.readthedocs.io/en/stable/" rel="noopener ugc nofollow" target="_blank"> Pillow </a>库需要处理我们的数据库模型中接收到的图像</li></ul><h2 id="3c0e" class="ld kb ht bd kc le lf lg kg lh li lj kk js lk ll ko jt lm ln ks ju lo lp kw lq bi translated">步骤2:设置Django项目</h2><ul class=""><li id="22d5" class="lr ls ht iw b ix ky jb kz js lt jt lu ju lv jr lw lx ly lz bi translated">让我们首先创建我们的django项目，它将包含网站的所有不同的应用程序和模块。</li><li id="ebb5" class="lr ls ht iw b ix mn jb mo js mp jt mq ju mr jr lw lx ly lz bi translated">打开控制台，在工作目录中启动一个新项目，</li></ul><pre class="jw jx jy jz fd mb mc md me aw mf bi"><span id="1bd2" class="ld kb ht mc b fi mg mh l mi mj">$ django-admin startproject mysite</span></pre><ul class=""><li id="f2c0" class="lr ls ht iw b ix iy jb jc js mk jt ml ju mm jr lw lx ly lz bi translated">在这之后，进入您新创建的项目文件夹“mysite ”,从那里开始一个新的应用程序，</li></ul><pre class="jw jx jy jz fd mb mc md me aw mf bi"><span id="76aa" class="ld kb ht mc b fi mg mh l mi mj">$ python manage.py startapp user</span><span id="17df" class="ld kb ht mc b fi ms mh l mi mj"># user is the app name </span></pre><ul class=""><li id="25f3" class="lr ls ht iw b ix iy jb jc js mk jt ml ju mm jr lw lx ly lz bi translated">在这之后，您的工作项目文件夹(mysite)结构必须看起来像这样，</li></ul><figure class="jw jx jy jz fd hk er es paragraph-image"><div class="er es mt"><img src="../Images/c5e0c6a0fa03dc689fc9596b478a6992.png" data-original-src="https://miro.medium.com/v2/resize:fit:744/format:webp/1*gItOp04BsheuLMAK_6a5ug.png"/></div></figure><ul class=""><li id="38dc" class="lr ls ht iw b ix iy jb jc js mk jt ml ju mm jr lw lx ly lz bi translated">现在在你的mysite/mysite文件夹中打开你的settings.py文件，在INSTALLED_APPS列表中添加我们的用户应用程序名和crisp-form库名，这样django就可以在运行时访问它们</li></ul><figure class="jw jx jy jz fd hk er es paragraph-image"><div class="er es mu"><img src="../Images/802c96d4b0e91b8e010f2f955fbfca7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:930/format:webp/1*xlrEd2kcky3KO0fGITJPDw.png"/></div></figure><h2 id="278c" class="ld kb ht bd kc le lf lg kg lh li lj kk js lk ll ko jt lm ln ks ju lo lp kw lq bi translated">步骤3:创建数据库模型</h2><ul class=""><li id="18f6" class="lr ls ht iw b ix ky jb kz js lt jt lu ju lv jr lw lx ly lz bi translated">现在，在mysite/user/models.py文件中，我们将定义我们的数据库模式，该模式由一个名为Profile的表组成，该表以name、email、datePosted和profileImage为列，</li></ul><figure class="jw jx jy jz fd hk"><div class="bz dy l di"><div class="mv mw l"/></div></figure><ul class=""><li id="551c" class="lr ls ht iw b ix iy jb jc js mk jt ml ju mm jr lw lx ly lz bi translated">upload_to= "profile_pics "参数将使该模型中接收到的所有图像存储到名为profile_pics的文件夹中。</li><li id="2944" class="lr ls ht iw b ix mn jb mo js mp jt mq ju mr jr lw lx ly lz bi translated">现在，通过使用这些命令，将这个配置文件表提交到我们默认的sqlite3数据库(在settings.py中提到过),</li></ul><pre class="jw jx jy jz fd mb mc md me aw mf bi"><span id="4f9b" class="ld kb ht mc b fi mg mh l mi mj">$ python manage.py makemigrations<br/>$ python manage.py migrate</span></pre><h2 id="0fe5" class="ld kb ht bd kc le lf lg kg lh li lj kk js lk ll ko jt lm ln ks ju lo lp kw lq bi translated">步骤4:创建配置文件表单</h2><ul class=""><li id="1c09" class="lr ls ht iw b ix ky jb kz js lt jt lu ju lv jr lw lx ly lz bi translated">在Django中，我们可以很容易地将用户将前端数据上传到数据库模型的表单绑定起来。</li><li id="8a74" class="lr ls ht iw b ix mn jb mo js mp jt mq ju mr jr lw lx ly lz bi translated">在mysite/user/文件夹中，创建一个名为“forms.py”的文件，并在其中添加以下代码，该代码将概要文件数据库模型与概要文件表单链接起来。</li></ul><figure class="jw jx jy jz fd hk"><div class="bz dy l di"><div class="mv mw l"/></div></figure><h2 id="fc66" class="ld kb ht bd kc le lf lg kg lh li lj kk js lk ll ko jt lm ln ks ju lo lp kw lq bi translated">步骤5:创建视图和URL</h2><ul class=""><li id="ee18" class="lr ls ht iw b ix ky jb kz js lt jt lu ju lv jr lw lx ly lz bi translated">在这一步中，我们将为网站的主页定义后端逻辑，比如当用户上传一些数据时会发生什么，以及哪些数据将被传递到主页以在前端显示。</li><li id="336f" class="lr ls ht iw b ix mn jb mo js mp jt mq ju mr jr lw lx ly lz bi translated">在mysite/user/views.py文件中添加以下代码，它将处理我们网站的所有传入URL请求。</li></ul><figure class="jw jx jy jz fd hk"><div class="bz dy l di"><div class="mv mw l"/></div></figure><ul class=""><li id="fd2a" class="lr ls ht iw b ix iy jb jc js mk jt ml ju mm jr lw lx ly lz bi translated">index是用户访问主页url时将调用的函数。</li><li id="2562" class="lr ls ht iw b ix mn jb mo js mp jt mq ju mr jr lw lx ly lz bi translated">当主页url上的浏览器发出GET请求时，user/home.html文件将作为呈现的html页面返回。将在下一步创建该文件。</li><li id="32ec" class="lr ls ht iw b ix mn jb mo js mp jt mq ju mr jr lw lx ly lz bi translated">现在让我们编写代码将主页url与这个索引函数连接起来，在mysite/mysite/urls.py中添加以下代码，</li></ul><figure class="jw jx jy jz fd hk"><div class="bz dy l di"><div class="mv mw l"/></div></figure><h2 id="26c1" class="ld kb ht bd kc le lf lg kg lh li lj kk js lk ll ko jt lm ln ks ju lo lp kw lq bi translated">步骤6.1:创建前端—home.html</h2><ul class=""><li id="d2b9" class="lr ls ht iw b ix ky jb kz js lt jt lu ju lv jr lw lx ly lz bi translated">这将是该过程的最后一步，我们将编写前端HTML、CSS和JS代码，其中包括表单如何在主页上显示以及如何在其中集成cropper.js插件的逻辑。</li><li id="faf0" class="lr ls ht iw b ix mn jb mo js mp jt mq ju mr jr lw lx ly lz bi translated">在mysite/user/中创建一个名为templates的文件夹，该文件夹下有一个名为user的子文件夹，其中包含名为home.html的文件。</li><li id="b708" class="lr ls ht iw b ix mn jb mo js mp jt mq ju mr jr lw lx ly lz bi translated">在这之后，你的用户应用程序文件夹结构必须看起来像这样，</li></ul><pre class="jw jx jy jz fd mb mc md me aw mf bi"><span id="d588" class="ld kb ht mc b fi mg mh l mi mj">-user<br/>  -admin.py<br/>  -app.py<br/>  -forms.py<br/>  -models.py<br/>  -tests.py<br/>  -views.py<br/>  -__init__.py<br/>  -migrations<br/>  -templates<br/>    -user<br/>      -home.html</span></pre><ul class=""><li id="0747" class="lr ls ht iw b ix iy jb jc js mk jt ml ju mm jr lw lx ly lz bi translated">打开home.html文件并添加以下代码，该代码将显示发布详细信息的表单和所有已发布帖子的列表，</li></ul><figure class="jw jx jy jz fd hk"><div class="bz dy l di"><div class="mv mw l"/></div></figure><ul class=""><li id="7df8" class="lr ls ht iw b ix iy jb jc js mk jt ml ju mm jr lw lx ly lz bi translated">第1行:导入了crispy表单库</li><li id="540a" class="lr ls ht iw b ix mn jb mo js mp jt mq ju mr jr lw lx ly lz bi translated">第8行:添加了引导样式表</li><li id="4ec7" class="lr ls ht iw b ix mn jb mo js mp jt mq ju mr jr lw lx ly lz bi translated">第17行:定义了保存从views.py传递的表单的表单标记</li><li id="ec6d" class="lr ls ht iw b ix mn jb mo js mp jt mq ju mr jr lw lx ly lz bi translated">第21行:使用了从view.py文件传递来的表单参数以及crispy filter，它会自动为表单添加一些CSS样式。</li><li id="d6f5" class="lr ls ht iw b ix mn jb mo js mp jt mq ju mr jr lw lx ly lz bi translated">第23行:一个提交类型按钮，单击它将表单数据和POST请求一起提交回我们的索引函数。</li><li id="a54c" class="lr ls ht iw b ix mn jb mo js mp jt mq ju mr jr lw lx ly lz bi translated">第26行:我们遍历posts列表变量，该变量包含从views.py文件中的配置文件数据库获取的所有posts对象。</li></ul><h2 id="11bf" class="ld kb ht bd kc le lf lg kg lh li lj kk js lk ll ko jt lm ln ks ju lo lp kw lq bi translated">步骤6.2:创建前端—home.html</h2><ul class=""><li id="c594" class="lr ls ht iw b ix ky jb kz js lt jt lu ju lv jr lw lx ly lz bi translated">对于使用不同框架实现了自己的项目并直接进入这一步的读者来说，让我们通过一个非常基本的例子来理解如何在模板中实现cropper.js。</li><li id="4bff" class="lr ls ht iw b ix mn jb mo js mp jt mq ju mr jr lw lx ly lz bi translated">假设我们有一个名为“home.html”的HTML模板，其中有一个包含姓名、电子邮件和图片等字段的表单，如下所示。</li></ul><figure class="jw jx jy jz fd hk"><div class="bz dy l di"><div class="mv mw l"/></div></figure><ul class=""><li id="4e68" class="lr ls ht iw b ix iy jb jc js mk jt ml ju mm jr lw lx ly lz bi translated">这是一个非常基本的形式，当用户上传一些数据并点击post按钮时，这些数据将被传递到后端。</li></ul><h2 id="fcca" class="ld kb ht bd kc le lf lg kg lh li lj kk js lk ll ko jt lm ln ks ju lo lp kw lq bi translated">步骤7:实现裁剪功能</h2><ul class=""><li id="a8a3" class="lr ls ht iw b ix ky jb kz js lt jt lu ju lv jr lw lx ly lz bi translated">现在，我们将使用cropper.js添加裁剪功能，这样在提交帖子之前，将显示一个裁剪图像的弹出窗口。</li></ul><p id="feb1" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hb bi translated">在你的home.html里面做如下的改变，</p><ul class=""><li id="8f67" class="lr ls ht iw b ix iy jb jc js mk jt ml ju mm jr lw lx ly lz bi translated">在head标签部分导入这些cropper.css和cropper.js文件，</li></ul><figure class="jw jx jy jz fd hk"><div class="bz dy l di"><div class="mv mw l"/></div></figure><ul class=""><li id="130b" class="lr ls ht iw b ix iy jb jc js mk jt ml ju mm jr lw lx ly lz bi translated">现在，在submit按钮上方添加一个id为“image-box”的div元素，类为“image-container ”,它将是cropper.js插件视图的容器，同时在它上方添加一个crop按钮，它将用于用裁剪后的图像onclick替换表单中的原始图像。</li></ul><figure class="jw jx jy jz fd hk"><div class="bz dy l di"><div class="mv mw l"/></div></figure><ul class=""><li id="534b" class="lr ls ht iw b ix iy jb jc js mk jt ml ju mm jr lw lx ly lz bi translated">现在，在结束主标签()下，添加脚本标签，它将保存关于如何实现cropper.js插件以及如何用裁剪后的图像替换原始图像的所有逻辑。</li></ul><figure class="jw jx jy jz fd hk"><div class="bz dy l di"><div class="mv mw l"/></div></figure><ul class=""><li id="bc1b" class="lr ls ht iw b ix iy jb jc js mk jt ml ju mm jr lw lx ly lz bi translated"><strong class="iw hu">这样我们就完成了！</strong>现在，每当用户上传任何图像时，都会提示他们选择先裁剪图像，然后在裁剪后，当他们单击裁剪按钮时，表单中的原始图像将被裁剪后的图像替换，用户可以照常提交帖子。</li></ul><blockquote class="iq ir is"><p id="071e" class="it iu iv iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">注意:如果你想为这个cropper插件库提供一些CSS样式，那么你也可以使用他们的cropper.css和cropper.js文件，这些文件可以在他们的官方<a class="ae ma" href="https://github.com/fengyuanchen/cropperjs" rel="noopener ugc nofollow" target="_blank"> GitHub repo </a>下载，而不是使用这些cdn。</p></blockquote><ul class=""><li id="13e3" class="lr ls ht iw b ix iy jb jc js mk jt ml ju mm jr lw lx ly lz bi translated">运行您的网站使用，</li></ul><pre class="jw jx jy jz fd mb mc md me aw mf bi"><span id="2f2e" class="ld kb ht mc b fi mg mh l mi mj">$ python manage.py runserver</span><span id="3eb1" class="ld kb ht mc b fi ms mh l mi mj"># Your website will be serving locally at <a class="ae ma" href="http://127.0.0.1:8000/" rel="noopener ugc nofollow" target="_blank">http://127.0.0.1:8000/</a></span></pre><h1 id="6bbd" class="ka kb ht bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">结论</h1><ul class=""><li id="0471" class="lr ls ht iw b ix ky jb kz js lt jt lu ju lv jr lw lx ly lz bi translated">在此基础上，我们使用cropper.js插件制作了一个非常基本的Django应用程序，其中集成了裁剪功能，这样用户就可以用裁剪后的图像来裁剪和替换表单中的原始图像。</li><li id="5921" class="lr ls ht iw b ix mn jb mo js mp jt mq ju mr jr lw lx ly lz bi translated">欢迎在评论区提出你对这篇文章的疑问。</li><li id="d71a" class="lr ls ht iw b ix mn jb mo js mp jt mq ju mr jr lw lx ly lz bi translated">在<a class="ae ma" href="https://www.linkedin.com/in/RG2021/" rel="noopener ugc nofollow" target="_blank"> LinkedIn上与我联系。</a></li><li id="7efe" class="lr ls ht iw b ix mn jb mo js mp jt mq ju mr jr lw lx ly lz bi translated">该项目的GitHub回购:<a class="ae ma" href="https://github.com/RG2021/mysite" rel="noopener ugc nofollow" target="_blank">https://github.com/RG2021/mysite</a></li></ul></div></div>    
</body>
</html>