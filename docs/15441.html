<html>
<head>
<title>Introduction to Linear Control of Robots in C++</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">C++中机器人线性控制导论</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/introduction-to-linear-control-of-robots-in-c-88fa935a222e?source=collection_archive---------5-----------------------#2022-11-01">https://medium.com/geekculture/introduction-to-linear-control-of-robots-in-c-88fa935a222e?source=collection_archive---------5-----------------------#2022-11-01</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div class="er es hg"><img src="../Images/722befeb7c940ed9fd634ce875f24522.png" data-original-src="https://miro.medium.com/v2/resize:fit:1290/format:webp/0*278-WfyBN1YoSd1P.jpg"/></div><figcaption class="hn ho et er es hp hq bd b be z dx">Control Engineering</figcaption></figure><div class=""/></div><div class="ab cl iq ir gp is" role="separator"><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv"/></div><div class="hb hc hd he hf"><p id="5030" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">下面这篇文章的目的是描述一种直观的方法来表示和控制机器人的简化物理模型。这可以作为我们讨论的背景。另一方面，我们将考虑如何解微分方程，它描述了机器人简化模型的运动。<br/>注意:正如主题所表明的，本文必须被视为一个介绍，</p><p id="e0d5" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">本文中讨论的所有模拟的源代码可以在我的<a class="ae jv" href="https://github.com/markusbuchholz/Linear_Control_of_Robots_in_Cpp" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上找到。你还需要头文件(用于绘图)，它必须和你的cpp(一个你可以从我的库克隆的文件)在同一个文件夹里。你的程序可以编译如下:</p><pre class="jw jx jy jz fd ka kb kc kd aw ke bi"><span id="4fdc" class="kf kg ht kb b fi kh ki l kj kk">//compile<br/>g++ my_prog.cpp -o my_prog -I/usr/include/python3.8 -lpython3.8// </span><span id="a3a9" class="kf kg ht kb b fi kl ki l kj kk">//run<br/>./my_prog</span><span id="4864" class="kf kg ht kb b fi kl ki l kj kk">//folder tree<br/>├── my_prog<br/>├── my_prog.cpp<br/>├── matplotlibcpp.h</span></pre></div><div class="ab cl iq ir gp is" role="separator"><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv"/></div><div class="hb hc hd he hf"><p id="852a" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">在下面的介绍中，我们将集中讨论适用于线性系统的控制方法，这些线性系统可以用线性微分方程来正式描述。</p><p id="36a9" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">当我们考虑机器人模型时，我们使用描述机器人动力学(机器人的动力学模型)，它与动力学运动方程相关联——一组二阶微分方程<br/>的形式(矩阵方程)。</p><figure class="jw jx jy jz fd hk er es paragraph-image"><div class="er es km"><img src="../Images/13459c6a54835b7b1c189c9f774b560b.png" data-original-src="https://miro.medium.com/v2/resize:fit:854/format:webp/1*Ngrmu2ShlDAAxzpTc2AGbA.png"/></div></figure><p id="9885" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">其中，τ ∈ R n为致动器扭矩，M (q)q̈)为关节加速度产生的扭矩，C(q，q̇) q̇为科里奥利力产生的扭矩，g(q)为重力产生的扭矩。</p><p id="4cd0" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">上述方程定义了<strong class="iz hu">逆动力学问题</strong>，该问题是在给定当前关节状态(q，q̇).)的情况下，计算实现期望关节加速度所需的电机(关节)扭矩的过程</p><p id="0ba3" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">基于以下等式，机器人控制器能够计算出所需的电机扭矩，以使机器人在期望的轨迹上移动——见下图。</p><figure class="jw jx jy jz fd hk er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es kn"><img src="../Images/67b51629b75eb8b7034d982a89d997ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NVJwmF8O08nzZfn0vDvQLQ.png"/></div></div><figcaption class="hn ho et er es hp hq bd b be z dx">Symplified robot control system (by author)</figcaption></figure><p id="9d59" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">一般来说，机器人(工业机械手)配备的传感器很少，实际上仅限于记录每个电机轴位置的编码器或分解器。从上图可以看出，机器人是在闭环控制系统下工作的。控制系统的主要任务是计算最佳控制信号(扭矩),以最小化期望位置和实际位置之间以及期望速度和实际速度之间的误差(差异):</p><figure class="jw jx jy jz fd hk er es paragraph-image"><div class="er es ks"><img src="../Images/be686a10eff9d3f93d89c10b957c3a8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:532/format:webp/1*eAkaQIaxOSuDDupt7G9qbw.png"/></div></figure><p id="6b0d" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">在构建机器人控制系统时，确保最终的闭环系统符合预定的性能要求是主要的挑战。系统的稳定性是这类系统最基本的要求。就我们的目的而言，如果在执行不同的计划轨迹时，甚至在面对某些“实质性”干扰时，误差保持“小”，那么我们将系统描述为稳定的。另一方面，控制系统的性能也可以由移动机器人以最大加速度尽可能快地测量，而不降低机器人路径精度或可重复性。</p></div><div class="ab cl iq ir gp is" role="separator"><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv"/></div><div class="hb hc hd he hf"><p id="50e4" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">在本文中，我们讨论的是基础知识，因此，我们的机器人可以表示为一个由质量块<strong class="iz hu"> m </strong>组成的机械系统，耦合到一个刚度为<strong class="iz hu"> k </strong>的弹簧，并且易受系数为<strong class="iz hu">b</strong>的阻尼器的影响。见图</p><figure class="jw jx jy jz fd hk er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es kt"><img src="../Images/28d4fdeb9f28a638a970efecf889a108.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kDWkxaKvp0AmVuw_tyTxkQ.png"/></div></div><figcaption class="hn ho et er es hp hq bd b be z dx">Dynamic system mass-damper-spring (by author)</figcaption></figure><p id="e770" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">我们可以认为二阶机械系统的默认响应不是我们想要的那样。此外，我们可以说，所描绘的机械系统(机器人)在执行任务之后永远不会返回到x = 0。存在必须消除的偏差(误差)。在我们的例子中，我们不能改变机械参数，如阻尼器的质量或数值。在这种情况下，系统的行为可以改变为控制系统。</p><p id="b1f4" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">运动方程是从自由体图上得到的(这是上面给出的方程的“简化”版本)。</p><figure class="jw jx jy jz fd hk er es paragraph-image"><div class="er es ku"><img src="../Images/f962f609f23c461b4943ff09dd326f7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:588/format:webp/1*xL4HH3bg3BxGqtVsgLjXlA.png"/></div></figure><p id="76c7" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">现在假设我们也有传感器可以跟踪物体的位置和运动。我们现在提出一个控制法则，它决定了致动器相对于所感测的反馈应该施加的力:</p><figure class="jw jx jy jz fd hk er es paragraph-image"><div class="er es kv"><img src="../Images/2b7a44dc02d3c3d02a5c328adc07ef58.png" data-original-src="https://miro.medium.com/v2/resize:fit:514/format:webp/1*Z58mq1A2hWB51ODBTckoBA.png"/></div></figure><p id="829d" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">其中kp和kv是控制系统的系数增益，见下图。正确调整控制增益，我们就能控制机械系统</p><figure class="jw jx jy jz fd hk er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es kw"><img src="../Images/261cf9f006c99f46111f214e460173c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5yMrVYGz1iN8X-AsWaxO-g.png"/></div></div><figcaption class="hn ho et er es hp hq bd b be z dx">Closed loop robot control system (by author)</figcaption></figure><p id="a1e3" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">上面的等式，我们可以改写为</p><figure class="jw jx jy jz fd hk er es paragraph-image"><div class="er es kx"><img src="../Images/85a53d00cb646be7be928fc8eac1a017.png" data-original-src="https://miro.medium.com/v2/resize:fit:568/format:webp/1*UKPPuUJoYUbuVfTvlXHoTQ.png"/></div></figure><p id="bce2" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">介绍，</p><figure class="jw jx jy jz fd hk er es paragraph-image"><div class="er es ky"><img src="../Images/3ce187e89326f78ee75ea829120bbd5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:224/format:webp/1*3_2U7Kjeto_iyFWNzOrN6Q.png"/></div></figure><p id="3e84" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">我们得到两个微分方程，</p><figure class="jw jx jy jz fd hk er es paragraph-image"><div class="er es kz"><img src="../Images/05b55e0dedfeaf1bd622b96aaa5d49cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:724/format:webp/1*1nop235ik8um2XDeuu-r-g.png"/></div></figure><p id="8036" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">使用Runne Kutta的四阶方法，我解决了特定的导数方程。结果可以描述如下。请玩弄系统的动态参数，调整初始条件。</p><figure class="jw jx jy jz fd hk er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es la"><img src="../Images/9a6be31cdc70ced009dd9d95a2ae928d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DCjP-lHVOJnODJSbj5nuUA.png"/></div></div><figcaption class="hn ho et er es hp hq bd b be z dx">time response (blue poison of mass, orange speed of mass)</figcaption></figure><p id="d984" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">下图描述了毒素和质量速度之间的关系，</p><figure class="jw jx jy jz fd hk er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es lb"><img src="../Images/ffdc905cdf2e8abd9fa215aacb6a0d73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9Mdb40dHwJsSzS3LLbojkw.png"/></div></div><figcaption class="hn ho et er es hp hq bd b be z dx">mass position vs speed</figcaption></figure></div><div class="ab cl iq ir gp is" role="separator"><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv"/></div><div class="hb hc hd he hf"><p id="8271" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">我们可以将我们的简化模型扩展到下面的模型(我们可以想象这是一个三轴机器人模型的模型)。</p><figure class="jw jx jy jz fd hk er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es lc"><img src="../Images/080990beffca6bb6b5c8dd44d1fd9f16.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OhH5ZPYlNoM9UVdi4cK3Kw.png"/></div></div><figcaption class="hn ho et er es hp hq bd b be z dx">Dynamic system mass-damper-spring (by author)</figcaption></figure><p id="f8e4" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">这里最重要的是我们如何定义模型，以及如何求解微分方程，在这种情况下，可以写成如下形式:</p><figure class="jw jx jy jz fd hk er es paragraph-image"><div class="er es ld"><img src="../Images/fec547e4d0071a9f631047727455f361.png" data-original-src="https://miro.medium.com/v2/resize:fit:1120/format:webp/1*_sTsqBColTcjvPrNEzebWQ.png"/></div></figure><p id="3ed2" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">同样，我们使用Runne Kutta的四阶方法来求解方程。结果可以描述如下:</p><p id="063d" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">对于质量为1的。</p><figure class="jw jx jy jz fd hk er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es le"><img src="../Images/b13b813330758d87aa6d5b6b51ea9fbf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i_OGyydgi5qAds8_6Mq3ng.png"/></div></div><figcaption class="hn ho et er es hp hq bd b be z dx">time response (blue poison of mass, orange speed of mass nr 1)</figcaption></figure><figure class="jw jx jy jz fd hk er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es lf"><img src="../Images/f8f883b3ffd9e878ce2952baa0b873ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sHBzoNSoL0aL6Fn05gjxpQ.png"/></div></div><figcaption class="hn ho et er es hp hq bd b be z dx">mass1 position vs speed</figcaption></figure><p id="e720" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">请注意，在许多情况下，线性状态变量方程可能无法充分捕捉潜在的物理行为。通常，机械手由非线性微分方程描述，该方程描述了各种机器人连杆之间的相互作用。</p></div><div class="ab cl iq ir gp is" role="separator"><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv"/></div><div class="hb hc hd he hf"><p id="5ba5" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">举一个简单的例子我们可以考虑一个经典的非线性系统:<a class="ae jv" href="https://en.wikipedia.org/wiki/Van_der_Pol_oscillator" rel="noopener ugc nofollow" target="_blank">范德波尔振荡器</a>其特征在于(<a class="ae jv" href="https://en.wikipedia.org/wiki/Nonlinearity" rel="noopener ugc nofollow" target="_blank">非线性</a> <a class="ae jv" href="https://en.wikipedia.org/wiki/Damping_ratio" rel="noopener ugc nofollow" target="_blank">阻尼</a>)。该系统可以描述如下，</p><figure class="jw jx jy jz fd hk er es paragraph-image"><div class="er es lg"><img src="../Images/d980d1ac63965773695acce715c22719.png" data-original-src="https://miro.medium.com/v2/resize:fit:872/format:webp/1*d9oAlBO2hYnwBXZ78cZgKA.png"/></div></figure><p id="a374" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">我们使用Runne Kutta的四阶方法求解方程。结果可以描述如下:</p><figure class="jw jx jy jz fd hk er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es lh"><img src="../Images/fac17fb8ee2f3755daf65334ed9a2b02.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i54kkPVqNpCfImVrXUNKuw.png"/></div></div><figcaption class="hn ho et er es hp hq bd b be z dx">time response (blue poison of mass, orange speed of mass)</figcaption></figure><figure class="jw jx jy jz fd hk er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es li"><img src="../Images/9dca59da22ae2c07c12cda7273cbd82e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_jaK8BJr3eDmIfw4OyCRAQ.png"/></div></div><figcaption class="hn ho et er es hp hq bd b be z dx">mass position vs speed</figcaption></figure><p id="6a17" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">感谢您的阅读。</p></div></div>    
</body>
</html>