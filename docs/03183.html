<html>
<head>
<title>Space Shooter Challenge: Powerup Rarity and Weighted Spawn Systems</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">太空射击挑战:启动稀有和加权产卵系统</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/space-shooter-challenge-powerup-rarity-and-weighted-spawn-systems-13d439a5805e?source=collection_archive---------55-----------------------#2021-06-01">https://medium.com/geekculture/space-shooter-challenge-powerup-rarity-and-weighted-spawn-systems-13d439a5805e?source=collection_archive---------55-----------------------#2021-06-01</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es et"><img src="../Images/4b6f614e392aad2a073af20d0e648618.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*IpOWnyzBrNOQxHjgkIFxqA.gif"/></div></div></figure><p id="ba64" class="pw-post-body-paragraph ip iq hi ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm hb bi translated">我现在开始创造一些相当强大的力量。我不想让用户过得太容易，所以我创建了一个稀有系统，这样某些能力会更频繁地产生。</p><p id="8d4a" class="pw-post-body-paragraph ip iq hi ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm hb bi translated">首先，我必须给每个能量分配一个稀有值。为此，我在<strong class="ir hj">加电脚本</strong>中创建了一个<strong class="ir hj"> int变量</strong>，并为检查员创建了一个<strong class="ir hj">标题</strong>来显示值级别。</p><figure class="jo jp jq jr fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es jn"><img src="../Images/d7e97d3ed1c72c58148cf93808960d6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HiVUF0PFrgQFS_39MEsRSw.png"/></div></div></figure><p id="7d15" class="pw-post-body-paragraph ip iq hi ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm hb bi translated">现在每个能量都可以在<strong class="ir hj">检查器中分配一个稀有元素。</strong>为了将这个传递给<strong class="ir hj"> Spawn Manager </strong>，我创建了一个<strong class="ir hj">返回类型方法</strong>，当被调用时，它将传递回<strong class="ir hj">稀有变量。</strong></p><figure class="jo jp jq jr fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es jn"><img src="../Images/1f00ef29b2b87222a500dfe3f2597578.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vXF0Kftg2hxOULjrrjYzsw.png"/></div></div></figure><p id="a258" class="pw-post-body-paragraph ip iq hi ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm hb bi translated">对于<strong class="ir hj"> Spawn管理器的数组中的每次加电，</strong>我可以调用这个方法并把它赋给一个变量。为此，首先需要使用<strong class="ir hj"> Get组件在每个对象上访问<strong class="ir hj">加电脚本</strong>。</strong></p><figure class="jo jp jq jr fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es jn"><img src="../Images/c63a4e0600ba1edfe3ecf05a61c2dee2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SZlIYLJhoMxnQRga9QHO_w.png"/></div></div></figure><p id="1e7c" class="pw-post-body-paragraph ip iq hi ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm hb bi translated">对于每次加电，我现在想根据稀有值将它们分配到组中。我可以在一个使用<strong class="ir hj"> _rarity </strong>作为变量的<strong class="ir hj"> switch语句</strong>中这样做。我想将它们分配到的组可以使用<strong class="ir hj">数组，</strong>但是如果每次添加东西时不重新创建数组，那么在运行时很难添加它们。</p><p id="fb98" class="pw-post-body-paragraph ip iq hi ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm hb bi translated">因此，我创建了三个<strong class="ir hj">列表，每个列表代表一种稀有性，用来存储能量。</strong></p><figure class="jo jp jq jr fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es jn"><img src="../Images/6699521eff565c8fe68e5671e959c285.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QrdPpaRVVoTfKC7K9p1yvg.png"/></div></div></figure><p id="e3b1" class="pw-post-body-paragraph ip iq hi ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm hb bi translated">现在对于<strong class="ir hj"> switch语句，在每种情况下</strong>，存储加电的变量<strong class="ir hj"> obj </strong>可以添加到正确的<strong class="ir hj">列表中。</strong></p><figure class="jo jp jq jr fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es jn"><img src="../Images/755796bea7f85d4f7a5390e8739e34c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BtLWPHxYXBmfPHMjT2-q5Q.png"/></div></div></figure><p id="94fb" class="pw-post-body-paragraph ip iq hi ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm hb bi translated">该方法需要在<strong class="ir hj"> Void Start、</strong>中调用，为了测试功能，可以为每个循环创建额外的<strong class="ir hj"> Debug。记录列表中的每个对象。</strong></p><figure class="jo jp jq jr fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es jn"><img src="../Images/1d0da295159e75af41c2dfaca34532b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J71uaLOB50ssawqDAA7k8w.png"/></div></div></figure><p id="0d25" class="pw-post-body-paragraph ip iq hi ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm hb bi translated">有了这个工作，<strong class="ir hj">产生的例程方法</strong>现在可以开始实现新系统了。位置可以保持不变，但是从<strong class="ir hj">加电数组</strong>中获取<strong class="ir hj">随机索引</strong>的代码需要改变。相反，我想创建另一个<strong class="ir hj">列表</strong>，但是要填充它，我需要另一个<strong class="ir hj">返回类型方法。</strong></p><figure class="jo jp jq jr fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es jn"><img src="../Images/6fc76d41a64da23e47249f47a2e7ac90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rCSYu9u6_MO_PzBDcuEOjw.png"/></div></div></figure><p id="9532" class="pw-post-body-paragraph ip iq hi ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm hb bi translated">在<strong class="ir hj"> GetRarity方法</strong>中，我希望它返回一个<strong class="ir hj">游戏对象列表变量。</strong></p><figure class="jo jp jq jr fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es jn"><img src="../Images/196e1a9f09037ebf02cf6cc6b10e309b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G4_hF8JJzW-8eKssx8tZbw.png"/></div></div></figure><p id="9c5a" class="pw-post-body-paragraph ip iq hi ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm hb bi translated">在这个<strong class="ir hj">方法内。</strong>我首先要创建一个随机值。我选择了0到100之间，这样我就可以将系统与百分比相关联。我希望<strong class="ir hj">稀有异能</strong>有15%的几率产卵，<strong class="ir hj">不常见</strong>有35%，而<strong class="ir hj">常见</strong>有50%。</p><p id="3763" class="pw-post-body-paragraph ip iq hi ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm hb bi translated">要将此转化为代码，可以使用<strong class="ir hj"> if </strong>和<strong class="ir hj"> else if语句</strong>来检查随机值的位置。在这些语句中，它们只是返回先前填充的相应的<strong class="ir hj">列表</strong>。</p><figure class="jo jp jq jr fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es jn"><img src="../Images/2baa3c7b098427cb8adf36c1dbb54271.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tyq9f4ygm00mwA-Zr-lWwg.png"/></div></div></figure><p id="f4ff" class="pw-post-body-paragraph ip iq hi ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm hb bi translated">这个方法在<strong class="ir hj"> SpawnPowerupRoutine，</strong>中的<strong class="ir hj"> while循环</strong>的每个周期都会被调用，所以它每次都会生成一个随机数，如果要运行100次，那么平均会返回15次稀有加电列表，依此类推。</p><p id="04a1" class="pw-post-body-paragraph ip iq hi ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm hb bi translated">随着<strong class="ir hj">随机列表</strong>的返回，我需要访问一个稀有的<strong class="ir hj">随机游戏对象</strong>。这样做，<strong class="ir hj">随机。调用<strong class="ir hj">列表中的<strong class="ir hj">索引</strong>时可以使用范围</strong>。</strong>与<strong class="ir hj">阵列不同</strong>使用了<strong class="ir hj">。长度修饰符</strong>，对于<strong class="ir hj">列出了</strong>、<strong class="ir hj">。可以使用计数修改器</strong>。</p><figure class="jo jp jq jr fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es jn"><img src="../Images/ca77178bbc51f2369e96cd65bd322c9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WjvFXararSspBARBFefoxw.png"/></div></div></figure><p id="db70" class="pw-post-body-paragraph ip iq hi ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm hb bi translated">现在<strong class="ir hj"> _randomPowerup </strong> <strong class="ir hj">游戏对象变量</strong>可以被<strong class="ir hj">实例化，</strong>完成后的<strong class="ir hj">方法</strong>如下图所示。</p><figure class="jo jp jq jr fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es jn"><img src="../Images/10e90eb2bed6060de38276a1c98be411.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t0Tr0BoryHy5Ty_HTIzKqQ.png"/></div></div></figure><p id="bed1" class="pw-post-body-paragraph ip iq hi ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm hb bi translated">有了这个，就产生了两个等级的随机能力，一个是基于稀有值的百分比，然后在特定稀有的物品中平均分配。使用<strong class="ir hj"> GetRarity返回方法</strong>，允许<strong class="ir hj">列表</strong>在运行时动态改变，允许模块化系统扩展。</p><p id="3fc3" class="pw-post-body-paragraph ip iq hi ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm hb bi translated">明天再来看一个例子，看看如何测试这个系统准确地产生稀有物种。</p></div></div>    
</body>
</html>