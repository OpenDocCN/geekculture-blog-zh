<html>
<head>
<title>How to post an image to LARAVEL API in FLUTTER</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在FLUTTER中将图像发布到LARAVEL API</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/how-to-post-an-image-to-laravel-api-in-flutter-d15a25679c7c?source=collection_archive---------2-----------------------#2021-06-03">https://medium.com/geekculture/how-to-post-an-image-to-laravel-api-in-flutter-d15a25679c7c?source=collection_archive---------2-----------------------#2021-06-03</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/d5ea51d72d9175a045860655bea6c007.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*CTXTpTwZtIULOxI8"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Photo by <a class="ae iu" href="https://unsplash.com/@hckmstrrahul?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Rahul Chakraborty</a> on <a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="f058" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">大多数在线注册表单要求用户上传图像。对于一些开发人员来说，在移动应用程序中添加图片上传功能是一项挑战。本文将一步步向你展示如何将你的FLUTTER应用程序上的图片上传到一个LARAVEL RESTFUL API。</p><p id="711b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">本文分为两部分。</p><ul class=""><li id="db47" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated">拉勒韦尔API</li><li id="baea" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">颤振应用</li></ul></div><div class="ab cl kh ki gp kj" role="separator"><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km"/></div><div class="hb hc hd he hf"><p id="262b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">第一部分。拉里韦尔API </p><p id="93e3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">步骤1: </strong>使用composer创建一个新的laravel项目。你可以给它取任何名字，但是在这种情况下，我们将把它命名为<em class="ko"> ImageApi </em>。</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="42b9" class="ky kz hi ku b fi la lb l lc ld">composer create-project --prefer-dist laravel/laravel ImageApi</span></pre><p id="24bb" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">第二步:</strong>在已创建的项目中。进行迁移以创建一个<em class="ko">图像</em>表。</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="b521" class="ky kz hi ku b fi la lb l lc ld">php artisan make:migration create_images_table --create=images</span></pre><p id="9970" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">步骤3: </strong>在迁移中添加图像字段<em class="ko">标题</em>和<em class="ko"> url。</em></p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="b65f" class="ky kz hi ku b fi la lb l lc ld">&lt;?php</span><span id="4648" class="ky kz hi ku b fi le lb l lc ld">use Illuminate\Support\Facades\Schema;<br/>use Illuminate\Database\Schema\Blueprint;<br/>use Illuminate\Database\Migrations\Migration;</span><span id="1a41" class="ky kz hi ku b fi le lb l lc ld">class CreateImagesTable extends Migration<br/>{<br/>    <br/>    public function up()<br/>    {<br/>        Schema::create('images', function (Blueprint $table) {<br/>            $table-&gt;increments('id');<br/>            $table-&gt;string('title');<br/>            $table-&gt;string('url');<br/>            $table-&gt;timestamps();<br/>        });<br/>    }</span><span id="06fe" class="ky kz hi ku b fi le lb l lc ld">public function down()<br/>    {<br/>        Schema::drop('images');<br/>    }<br/>}</span></pre><p id="0e34" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">步骤4: </strong>接下来，创建一个名为Image的模型</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="dd40" class="ky kz hi ku b fi la lb l lc ld">php artisan make:model Image</span></pre><p id="6f9d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">第五步:</strong>在模型中添加<em class="ko">可填充</em>数组中的<em class="ko">标题</em>字段和<em class="ko"> url </em>字段。</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="18da" class="ky kz hi ku b fi la lb l lc ld">&lt;?php</span><span id="86e9" class="ky kz hi ku b fi le lb l lc ld">namespace App;</span><span id="a5e6" class="ky kz hi ku b fi le lb l lc ld">use Illuminate\Database\Eloquent\Model;</span><span id="7c1b" class="ky kz hi ku b fi le lb l lc ld">class Image extends Model<br/>{<br/>    protected $table = 'images';</span><span id="7387" class="ky kz hi ku b fi le lb l lc ld">protected $fillable = [<br/>        'title', 'url'<br/>    ];<br/>}</span></pre><p id="e212" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">第六步:</strong>接下来，创建一个控制器，命名为ImageController。</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="6ad5" class="ky kz hi ku b fi la lb l lc ld">php artisan make:controller ImageController</span></pre><p id="a69f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">第七步:</strong>到ImageController。添加一个名为<em class="ko"> addimage的函数。</em></p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="45ad" class="ky kz hi ku b fi la lb l lc ld">&lt;?php</span><span id="0490" class="ky kz hi ku b fi le lb l lc ld">namespace App\Http\Controllers;</span><span id="421b" class="ky kz hi ku b fi le lb l lc ld">use App\Image;<br/>use App\Http\Controllers\Controller;</span><span id="1116" class="ky kz hi ku b fi le lb l lc ld">class ImageController extends Controller<br/>{<br/>   <br/>    public function addimage(Request $request)<br/>    {</span><span id="f970" class="ky kz hi ku b fi le lb l lc ld">        $image = new Image;</span><span id="cdd8" class="ky kz hi ku b fi le lb l lc ld">        $image-&gt;title = $request-&gt;title;<br/>        <br/>            if ($request-&gt;hasFile('image')) {<br/>            <br/>            $path = $request-&gt;file('image')-&gt;store('images');</span><span id="79f5" class="ky kz hi ku b fi le lb l lc ld">            $image-&gt;url = $path;<br/>           }</span><span id="68fd" class="ky kz hi ku b fi le lb l lc ld">        $image-&gt;save();</span><span id="ad8f" class="ky kz hi ku b fi le lb l lc ld">        return new ImageResource($image);<br/>    }<br/>}</span></pre><p id="3738" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">第八步:</strong>最后在<em class="ko">api.php</em>文件中的routes文件夹中</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="2c67" class="ky kz hi ku b fi la lb l lc ld">&lt;?php</span><span id="56c2" class="ky kz hi ku b fi le lb l lc ld">use Illuminate\Http\Request;</span><span id="4ac3" class="ky kz hi ku b fi le lb l lc ld">Route::resource('imageadd', 'Api\ImageController@addimage');</span></pre><p id="17e8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这将创建一个Api端点</p><blockquote class="lf lg lh"><p id="3151" class="iv iw ko ix b iy iz ja jb jc jd je jf li jh ji jj lj jl jm jn lk jp jq jr js hb bi translated"><domain-name> /api/imageadd</domain-name></p></blockquote><p id="f69d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">Flutter应用程序将访问这个API端点。</p></div><div class="ab cl kh ki gp kj" role="separator"><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km"/></div><div class="hb hc hd he hf"><p id="6deb" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">第二部分:颤振APP </strong></p><p id="761b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">步骤1: </strong>使用该命令创建一个新的flutter App。</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="ac1e" class="ky kz hi ku b fi la lb l lc ld">$ flutter create Imageapp<br/>$ cd Imageapp</span></pre><p id="37f7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">第二步:</strong>使用这个命令将<a class="ae iu" href="https://pub.dev/packages/image_picker" rel="noopener ugc nofollow" target="_blank"><strong class="ix hj"><em class="ko">image _ picker</em></strong></a><em class="ko"/>包添加到你的flutter中</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="01b5" class="ky kz hi ku b fi la lb l lc ld">$ flutter pub add image_picker</span></pre><p id="1858" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">第三步:</strong>接下来，使用此命令将颤振<strong class="ix hj"><em class="ko"/></strong><a class="ae iu" href="https://pub.dev/packages/http" rel="noopener ugc nofollow" target="_blank"><strong class="ix hj"><em class="ko">http</em></strong></a><strong class="ix hj"><em class="ko"/></strong>包添加到您的项目中</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="226d" class="ky kz hi ku b fi la lb l lc ld"><strong class="ku hj">$</strong> flutter pub add http</span></pre><p id="c378" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">第四步:</strong>在颤振App的lib文件夹中。创建两个额外的dart文件。</p><ul class=""><li id="3c08" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated">第一个将是<em class="ko"> service.dart </em>。</li><li id="2f6d" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">第二个会是<em class="ko"> image_upload.dart </em>。</li></ul><p id="2ed9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">第五步:<em class="ko"> service.dart </em>文件中的</strong>。将HTTP包和<em class="ko"> dart:convert package </em>导入这个文件。</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="2425" class="ky kz hi ku b fi la lb l lc ld">import 'package:http/http.dart' as http;</span><span id="3bfd" class="ky kz hi ku b fi le lb l lc ld">import 'dart:convert';</span></pre><p id="16cf" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">步骤6: 创建一个名为<em class="ko"> Service </em>的类，并在其中添加一个名为<em class="ko"> addImage的函数。</em>这个函数将向我们在本文第1部分中创建的laravel端点发出HTTP POST请求。</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="cf8a" class="ky kz hi ku b fi la lb l lc ld">import 'package:http/http.dart' as http;</span><span id="aad8" class="ky kz hi ku b fi le lb l lc ld">import 'dart:convert';<br/></span><span id="bd28" class="ky kz hi ku b fi le lb l lc ld">class Service {</span><span id="a810" class="ky kz hi ku b fi le lb l lc ld">Future&lt;bool&gt; addImage(Map&lt;String, String&gt; body, String filepath) async {<br/>    String addimageUrl = '&lt;domain-name&gt;/api/imageadd';<br/>    Map&lt;String, String&gt; headers = {<br/>      'Content-Type': 'multipart/form-data',<br/>    };</span><span id="3855" class="ky kz hi ku b fi le lb l lc ld">var request = http.MultipartRequest('POST', Uri.parse(addimageUrl))<br/>      ..fields.addAll(body)<br/>      ..headers.addAll(headers)<br/>      ..files.add(await http.MultipartFile.fromPath('image', filepath));</span><span id="709f" class="ky kz hi ku b fi le lb l lc ld">var response = await request.send();<br/>    if (response.statusCode == 201) {<br/>      return true;<br/>    } else {<br/>      return false;<br/>    }<br/>  }</span><span id="ca14" class="ky kz hi ku b fi le lb l lc ld">}</span></pre><p id="286a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">第七步:<em class="ko"> image_upload.dart </em>文件中的</strong>。创建一个名为ImageUpload的有状态小部件</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="8e94" class="ky kz hi ku b fi la lb l lc ld">class ImageUpload extends StatefulWidget {<br/>  ImageUpload({Key key}) : super(key: key);</span><span id="36f4" class="ky kz hi ku b fi le lb l lc ld">@override<br/>  _ImageUploadState createState() =&gt; _ImageUploadState();<br/>}</span><span id="1ab8" class="ky kz hi ku b fi le lb l lc ld">class _ImageUploadState extends State&lt;ImageUpload&gt; {<br/>  @override<br/>  Widget build(BuildContext context) {<br/>    return Container(<br/>       <br/>    );<br/>  }<br/>}</span></pre><p id="b2d5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">第八步:</strong>导入<strong class="ix hj"/><em class="ko">dart:io</em><strong class="ix hj"/>库、<em class="ko"> image_picker包</em>和<em class="ko">材质设计包</em>。另外，导入您创建的<em class="ko"> service.dart </em>文件。</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="ec74" class="ky kz hi ku b fi la lb l lc ld">import 'dart:io';<br/>import 'package:flutter/material.dart';<br/>import 'package:image_picker/image_picker.dart';<br/>import 'service.dart';</span></pre><p id="bb43" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">第9步:</strong>在ImageUploadState类内部。创建以下变量。</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="3083" class="ky kz hi ku b fi la lb l lc ld">Service service = Service();<br/>final _addFormKey = GlobalKey&lt;FormState&gt;();<br/>final _titleController = TextEditingController();<br/>  <br/>File _image;<br/>final picker = ImagePicker();</span></pre><p id="f6f7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">第十步:</strong>接下来，添加一个异步函数，这个函数将启动手机的图像库。调用这个函数<em class="ko"> getImage </em>。</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="296a" class="ky kz hi ku b fi la lb l lc ld">Future getImage() async {<br/>    final pickedFile = await picker.getImage(source: ImageSource.gallery);<br/>setState(() {<br/>      if (pickedFile != null) {<br/>        _image = File(pickedFile.path);<br/>      } else {<br/>        print('No image selected.');<br/>      }<br/>    });<br/>  }</span></pre><p id="286d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">步骤11: </strong>创建另一个函数，将选中的图像显示给用户。称之为buildImage。</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="0f71" class="ky kz hi ku b fi la lb l lc ld">Widget _buildImage() {<br/>    if (_image == null) {<br/>      return Padding(<br/>        padding: const EdgeInsets.fromLTRB(1, 1, 1, 1),<br/>        child: Icon(<br/>          Icons.add,<br/>          color: Colors.grey,<br/>        ),<br/>      );<br/>    } else {<br/>      return Text(_image.path);<br/>    }<br/>  }</span></pre><p id="cfd4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">步骤12: </strong>在主<em class="ko">构建</em>函数中添加一个<em class="ko"> TextFormField </em>小部件。这是为了图像的标题。</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="b694" class="ky kz hi ku b fi la lb l lc ld">Widget build(BuildContext context) {<br/>    <br/>  Container(<br/>    child: Column(<br/>      children: &lt;Widget&gt;[<br/>       Text('Image Title'),<br/>         TextFormField(<br/>            controller: _titleController,<br/>            decoration: const InputDecoration(<br/>              hintText: 'Enter Title',),<br/>            validator: (value) {<br/>              if(value.isEmpty) {<br/>                 return 'Please enter image title';}<br/>                     return null;<br/>                        },),<br/>                        ],<br/>                  ),<br/>            ),<br/>      );<br/>  }</span></pre><p id="fac3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">第13步:</strong>接下来，添加一个运行<em class="ko"> getImage </em>函数的按钮</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="4acc" class="ky kz hi ku b fi la lb l lc ld">Container(<br/>    child: OutlineButton(<br/>       onPressed: getImage, <br/>             child: _buildImage())),</span></pre><p id="9db6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">第14步:</strong>然后添加一个按钮，将标题和图像发送到服务器</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="9786" class="ky kz hi ku b fi la lb l lc ld">Container(<br/>     child: Column(<br/>        children: &lt;Widget&gt;[<br/>          RaisedButton(<br/>            onPressed: () {<br/>              if (_addFormKey.currentState.validate()) {<br/>                _addFormKey.currentState.save();<br/>                  Map&lt;String, String&gt; body = {<br/>                   'title': _titleController.text,};<br/>                    service.addImage(body, _image.path);<br/>                     Navigator.pop(context);}},<br/>            child: Text('Save',<br/>               style: TextStyle(color: Colors.white)),<br/>               color: Colors.blue,)],<br/>                     ),<br/>            )</span></pre><p id="5722" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">第十五步:</strong>最终的<em class="ko"> image_upload.dart </em>文件将会是这样的</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="e631" class="ky kz hi ku b fi la lb l lc ld">import 'dart:io';<br/>import 'package:flutter/material.dart';<br/>import 'package:image_picker/image_picker.dart';<br/>import 'service.dart';</span><span id="f9fb" class="ky kz hi ku b fi le lb l lc ld">class ImageUpload extends StatefulWidget {<br/>  PostCreate();</span><span id="217f" class="ky kz hi ku b fi le lb l lc ld">@override<br/>  _ImageUploadState createState() =&gt; _ImageUploadState();<br/>}</span><span id="f65e" class="ky kz hi ku b fi le lb l lc ld">class _ImageUploadState extends State&lt;ImageUpload&gt; {<br/>  _ImageUploadState();<br/>  <br/>  Service service = Service();</span><span id="af64" class="ky kz hi ku b fi le lb l lc ld">final _addFormKey = GlobalKey&lt;FormState&gt;();<br/>  final _titleController = TextEditingController();<br/>  File _image;<br/>  final picker = ImagePicker();</span><span id="50a5" class="ky kz hi ku b fi le lb l lc ld">Future getImage() async {<br/>    final pickedFile = await picker.getImage(source: ImageSource.gallery);</span><span id="c362" class="ky kz hi ku b fi le lb l lc ld">setState(() {<br/>      if (pickedFile != null) {<br/>        _image = File(pickedFile.path);<br/>      } else {<br/>        print('No image selected.');<br/>      }<br/>    });<br/>  }</span><span id="470a" class="ky kz hi ku b fi le lb l lc ld">@override<br/>  Widget build(BuildContext context) {<br/>    return Scaffold(<br/>      appBar: AppBar(<br/>        title: Text('Add Images'),<br/>      ),<br/>      body: Form(<br/>        key: _addFormKey,<br/>        child: SingleChildScrollView(<br/>          child: Container(<br/>            child: Card(<br/>              child: Container(<br/>                child: Column(<br/>                  children: &lt;Widget&gt;[</span><span id="79b4" class="ky kz hi ku b fi le lb l lc ld">                Container(<br/>                  child: Column(<br/>                    children: &lt;Widget&gt;[<br/>                      Text('Image Title'),<br/>                      TextFormField(<br/>                        controller: _titleController,<br/>                        decoration: const InputDecoration(<br/>                           hintText: 'Enter Title',),<br/>                        validator: (value) {<br/>                          if (value.isEmpty) {<br/>                            return 'Please enter title';<br/>                             }<br/>                            return null;<br/>                                },<br/>                              ),<br/>                            ],<br/>                          ),<br/>                        ),<br/>                       <br/>                       <br/>              Container(<br/>                child: OutlineButton(<br/>                  onPressed: getImage, <br/>                    child: _buildImage())),</span><span id="9345" class="ky kz hi ku b fi le lb l lc ld">              Container(<br/>                 child: Column(<br/>                   children: &lt;Widget&gt;[<br/>                     RaisedButton(<br/>                       onPressed: () {<br/>                         if(_addFormKey.currentState.validate()) {<br/>                           _addFormKey.currentState.save();<br/>                           Map&lt;String, String&gt; body = {<br/>                            'title': _titleController.text};<br/>                          service.addImage(body, _image.path);}},<br/>                       child: Text('Save'),<br/>                                <br/>                              )<br/>                            ],<br/>                          ),<br/>                        ),<br/>                      ],<br/>                    ))),<br/>          ),<br/>        ),<br/>      ),<br/>    );<br/>  }</span><span id="38c4" class="ky kz hi ku b fi le lb l lc ld">Widget _buildImage() {<br/>    if (_image == null) {<br/>      return Padding(<br/>       <br/>        child: Icon(<br/>          Icons.add,<br/>          color: Colors.grey,<br/>        ),<br/>      );<br/>    } else {<br/>      return Text(_image.path);<br/>    }<br/>  }<br/>}</span></pre><p id="3fae" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">步骤16:<em class="ko">main . dart</em>文件中的</strong>导入<em class="ko"> image_upload.dart </em>文件。然后，添加ImageUpload小部件。</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="9619" class="ky kz hi ku b fi la lb l lc ld">import 'package:flutter/material.dart';</span><span id="377b" class="ky kz hi ku b fi le lb l lc ld">import 'image_upload.dart';</span><span id="d9cc" class="ky kz hi ku b fi le lb l lc ld">void main() {<br/>  <br/>  runApp(App());<br/>}</span><span id="66fc" class="ky kz hi ku b fi le lb l lc ld">class App extends StatelessWidget {<br/>  @override<br/>  Widget build(BuildContext context) {<br/>    return Container(<br/>          <br/>          child: MaterialApp(<br/>        title: 'Flutter Demo',<br/>        theme: ThemeData(<br/>          primarySwatch: Colors.blue,<br/>        ),<br/>        home: ImageUpload(),<br/>      ),<br/>    );<br/>  }<br/>}</span></pre><p id="500c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">最后，测试应用程序。</p></div><div class="ab cl kh ki gp kj" role="separator"><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km"/></div><div class="hb hc hd he hf"><p id="85eb" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在我们有了。我希望你已经发现这是有用的。我会带着更多有趣的文章回来。感谢您的阅读。</p></div></div>    
</body>
</html>