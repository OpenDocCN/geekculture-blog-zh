<html>
<head>
<title>EZ PZ Protected Routes in Svelte</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">EZ PZ保护路线苗条</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/ez-pz-protected-routes-in-svelte-c276a796e13b?source=collection_archive---------10-----------------------#2021-08-29">https://medium.com/geekculture/ez-pz-protected-routes-in-svelte-c276a796e13b?source=collection_archive---------10-----------------------#2021-08-29</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="7143" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我没有在这上面花太多时间，因为我真的不需要👍</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/7914629c3582a020537808d4815d036d.png" data-original-src="https://miro.medium.com/v2/resize:fit:980/format:webp/1*GopZyQOoqPVnC_uvL51vZw.png"/></div></figure><p id="8793" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">不过说真的，<a class="ae jl" href="https://svelte.dev" rel="noopener ugc nofollow" target="_blank"> Svelte </a>是一个前端框架，它让构建单页面应用程序变得非常容易，我非常喜欢使用它——我敢说比React更喜欢，主要是考虑到与Svelte相比，React有一个陡峭的学习曲线。</p><p id="64b2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">听着，在你把我绑在火刑柱上烧死之前，先看看这个。在苗条路线真的很简单，保护你的路线也很容易。我通过制作世界上最省力的地牢爬虫《某事物的传说》给你看。</p><h1 id="b485" class="jm jn hi bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated">设置—项目</h1><p id="2379" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">通过运行这个并把<your_project_name>替换成你愚蠢的地牢爬虫游戏的名字，开始旋转一个苗条的项目。</your_project_name></p><pre class="je jf jg jh fd kp kq kr ks aw kt bi"><span id="8b58" class="ku jn hi kq b fi kv kw l kx ky">npx degit sveltejs/template &lt;your_project_name&gt;</span></pre><p id="fb05" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Svelte自带<code class="du kz la lb kq b">rollup</code>功能，但我更喜欢使用<code class="du kz la lb kq b">webpack</code>,因为这是我所知道的，我已经知道如何让它与Typescript一起工作。如果你想像我一样设置，你需要做一些额外的功课。TLDR——让你的项目看起来像带有<code class="du kz la lb kq b">.tsconfig</code> <code class="du kz la lb kq b">webpack.config.ts</code> <code class="du kz la lb kq b">.babelrc</code>的<a class="ae jl" href="https://github.com/dcaponi/svelte_pixie" rel="noopener ugc nofollow" target="_blank">矿井</a>，并添加所需的包。</p><p id="7660" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">查看我提供的示例项目<a class="ae jl" href="https://github.com/dcaponi/svelte_pixie" rel="noopener ugc nofollow" target="_blank">以了解更多细节，因为这超出了本文的范围(如果您想要详细了解如何设置Svelte + Webpack + Typescript，请告诉我)。</a></p><p id="5135" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦你的项目建立并运行，我们就可以开始做一些改变。您需要首先安装一些npm软件包:</p><pre class="je jf jg jh fd kp kq kr ks aw kt bi"><span id="a1a3" class="ku jn hi kq b fi kv kw l kx ky">npm install svelte-routing dotenv @onelogin/sdk</span></pre><p id="1d55" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du kz la lb kq b">svelte-routing</code>是我们的路线。</p><p id="c955" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们使用环境变量。</p><p id="1d95" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du kz la lb kq b"><a class="ae jl" href="https://github.com/onelogin/onelogin-node-sdk" rel="noopener ugc nofollow" target="_blank">@onelogin/sdk</a></code>处理我们的登录流程&amp;用户管理(稍后会详细介绍)。</p><p id="3c77" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我们开始“真正的工作”之前，我们将创建一些文件夹/文件。这里是最热闹的地方。在<code class="du kz la lb kq b">/src</code>中，我们执行以下操作:</p><pre class="je jf jg jh fd kp kq kr ks aw kt bi"><span id="d079" class="ku jn hi kq b fi kv kw l kx ky">cd src<br/>mkdir ui_components pages concerns<br/>touch ui_components/Button.svelte<br/>touch pages/Login.svelte pages/Home.svelte pages/SecretStuff.svelte<br/>touch concerns/stores.ts concerns/ProtectedRoute.svelte</span></pre><p id="035e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您的项目结构应该看起来像图片。如果你正在使用Typescript，把你所有的<code class="du kz la lb kq b">.js</code>文件转换成<code class="du kz la lb kq b">.ts</code>文件。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lc"><img src="../Images/21b38f234ffdf609ed0fa314ba834ba3.png" data-original-src="https://miro.medium.com/v2/resize:fit:508/format:webp/1*pqQPRaRt83rPPQ8id3tBQw.png"/></div></figure><p id="4927" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du kz la lb kq b">ui_components</code>文件夹非常简单明了，但是有趣的是<code class="du kz la lb kq b">pages</code>和<code class="du kz la lb kq b">concerns</code>。<code class="du kz la lb kq b">pages</code>文件夹是每个“页面”或“屏幕”所在的位置。<code class="du kz la lb kq b">concerns</code>文件夹用于横切组件和其他辅助代码。这是我们添加<code class="du kz la lb kq b">ProtectedRoute</code>组件和<code class="du kz la lb kq b">store</code>的地方。</p><h1 id="ec5a" class="jm jn hi bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated">设置—身份验证服务器(一次登录)</h1><p id="0250" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">我使用OneLogin作为我的认证后端，因为它免费，易于使用，他们有一个很棒的开发者社区(我碰巧在那里工作，但这已经足够了😶).</p><p id="0c30" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有一种方法可以使用用户迁移挂钩将登录页面转换为登录/注册页面，但这是另一篇文章了。现在，我们假设你已经注册了用户&amp;手动注册了一个非常早期的启动。</p><p id="bc6e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">假设你已经从你的<a class="ae jl" href="https://www.onelogin.com/developer-signup?utm_medium=web&amp;utm_source=devsite&amp;utm_campaign=freedeveloperaccount&amp;utm_content=headernav" rel="noopener ugc nofollow" target="_blank"> OneLogin开发者账户</a>获得了你的API证书，你可以用它们来获得一个API访问令牌，你将需要这个应用和用户创建调用。我在我的环境中将我的保存为<code class="du kz la lb kq b">ONELOGIN_CLIENT_ID</code>和<code class="du kz la lb kq b">ONELOGIN_CLIENT_SECRET</code>。</p><p id="357c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你使用Mac并且安装了jq，你可以通过管道把它发送到<code class="du kz la lb kq b">pbcopy</code>以便稍后粘贴，或者省略<code class="du kz la lb kq b">| jq '."access_token"' | pbcopy</code>并且只在响应上复制粘贴。</p><pre class="je jf jg jh fd kp kq kr ks aw kt bi"><span id="362f" class="ku jn hi kq b fi kv kw l kx ky">curl '<a class="ae jl" href="https://api.us.onelogin.com/auth/oauth2/v2/token'" rel="noopener ugc nofollow" target="_blank">https://api.us.onelogin.com/auth/oauth2/v2/token'</a> \<br/>-X POST \<br/>-H "Authorization: client_id:$ONELOGIN_CLIENT_ID, client_secret:$ONELOGIN_CLIENT_SECRET" \<br/>-H "Content-Type: application/json" \<br/>-d '{<br/>  "grant_type":"client_credentials"<br/>}' | jq '."access_token"' | pbcopy</span></pre><p id="6fe5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">创建应用程序—这是您的苗条应用程序在OneLogin的认证服务器中进行认证的方式。注意<code class="du kz la lb kq b">redirect_uri</code>。在投入生产之前，请确保更新应用程序中的这些内容，以反映生产领域，否则对于本地开发来说，这将起作用。</p><p id="81b1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于此流程需要的OIDC应用，请确保您的<code class="du kz la lb kq b">connector_id</code>为<strong class="ih hj"> <em class="ld"> 108419 </em> </strong>并且<code class="du kz la lb kq b">token_endpoint_auth_method</code>设置为<strong class="ih hj"> <em class="ld"> 2 </em> </strong>用于PKCE，如卷曲所示。</p><pre class="je jf jg jh fd kp kq kr ks aw kt bi"><span id="2dd7" class="ku jn hi kq b fi kv kw l kx ky">curl --location --request POST '<a class="ae jl" href="https://pied-piper-dev.onelogin.com/api/2/apps'" rel="noopener ugc nofollow" target="_blank">https://api.us.onelogin.com/api/2/apps'</a> \<br/>--header 'Content-Type: application/json' \<br/>--header 'Authorization: Bearer &lt;access_token&gt;' \<br/>--data-raw '{<br/>  "connector_id": 108419,<br/>  "name": "Legend of Something",<br/>  "description": "Svelte Demo",<br/>  "visible": true,<br/>  "configuration": {<br/>    "redirect_uri": "<a class="ae jl" href="http://localhost:3000\nhttps://localhost:3000" rel="noopener ugc nofollow" target="_blank">http://localhost:3000\nhttps://localhost:3000</a>",<br/>    "token_endpoint_auth_method": "2",<br/>    "oidc_application_type": "0"<br/>  }<br/>}'</span></pre><p id="1a19" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">创建一个用户——我们不会将注册作为其中的一部分，所以现在我们将进行预填充。</p><pre class="je jf jg jh fd kp kq kr ks aw kt bi"><span id="fa2b" class="ku jn hi kq b fi kv kw l kx ky">curl --location --request POST '<a class="ae jl" href="https://pied-piper-dev.onelogin.com/api/2/users'" rel="noopener ugc nofollow" target="_blank">https://api.us.onelogin.com/api/2/users'</a> \<br/>--header 'Content-Type: application/json' \<br/>--header 'Authorization: Bearer &lt;access_token&gt;' \<br/>--data-raw '{<br/>  "email": "woo@woo.woo", <br/>  "password": "123asdf!", <br/>  "password_confirmation": "123asdf!"<br/>}'</span></pre><p id="f93b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在门户中找到新用户——对他们的用户名、密码等进行最后的更改，然后在右侧的<code class="du kz la lb kq b">Applications</code>下，通过单击+按钮启动菜单，将<code class="du kz la lb kq b">Legend of Something</code>应用添加到用户的可用应用中。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="er es le"><img src="../Images/4f3e6f4d7eb6bd590cadeb50093d9daa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5pxqtrZng-n_JpdQ0gvncw.png"/></div></div></figure><h1 id="9a63" class="jm jn hi bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated">设置—路线</h1><p id="a68d" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">在<code class="du kz la lb kq b">App.Svelte</code>中，我们将添加我们的路线。您也可以定义一个<code class="du kz la lb kq b">routes.js</code>并导入它——但是对于一个2路线的项目来说，这完全没问题。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lj lk l"/></div></figure><p id="c58a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du kz la lb kq b">App.Svelte</code>超级简单，没有逻辑——只有<code class="du kz la lb kq b">Router</code>和一个愚蠢的导航条。每条路线都有一个<code class="du kz la lb kq b">path</code>，这是你到达你正在看的页面<code class="du kz la lb kq b">component</code>的路径。我们有一个<code class="du kz la lb kq b">Home</code>页面和一个<code class="du kz la lb kq b">SecretStuff</code>页面。到<code class="du kz la lb kq b">/*</code>的最后一条路线是当我们试图导航到<code class="du kz la lb kq b">/asdf</code>或我们浏览器搜索栏中的某个东西时，把我们带回家。请注意，<code class="du kz la lb kq b">SecretStuff</code>组件位于我们定义的名为<code class="du kz la lb kq b">ProtectedRoute</code>的定制组件中。</p><h1 id="fd5c" class="jm jn hi bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated">与PKCE之间的受保护路线</h1><p id="fe9c" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated"><code class="du kz la lb kq b">ProtectedRoute</code>我们今天节目的明星是一个横切组件，它“包装”了一条路线，要么让你转到受保护的页面，要么让你跳回到<code class="du kz la lb kq b">Login</code>页面。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lj lk l"/></div></figure><p id="64be" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这使用了<a class="ae jl" href="https://oauth.net/2/pkce/" rel="noopener ugc nofollow" target="_blank"> PKCE认证流程</a>——一种OAuth流程，现在用于单页面应用程序，取代了隐式流程。PKCE的好处是，应用程序做了一个额外的步骤来建立一个<code class="du kz la lb kq b">code_verification</code>值和与认证服务器的机制，因此在重定向之后(它添加了<code class="du kz la lb kq b">code</code>作为一个可以被拦截的查询参数),应用程序可以发送<code class="du kz la lb kq b">code_verification</code>值，只要它散列到在重定向之前发送到认证服务器的值，你就可以开始了。关于PKCE以及OneLogin SDK如何实现它的详细解释，这里有一个很好的帖子<a class="ae jl" href="https://developers.onelogin.com/blog/pkce-dust-react-app" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="c09b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du kz la lb kq b">ProtectedRoute</code>组件是这样工作的:</p><ol class=""><li id="d039" class="ll lm hi ih b ii ij im in iq ln iu lo iy lp jc lq lr ls lt bi translated">使用您的OIDC应用程序<code class="du kz la lb kq b">clientID</code>和<code class="du kz la lb kq b">redirectURL</code>建立与OneLogin客户端的连接。</li><li id="69d0" class="ll lm hi ih b ii lu im lv iq lw iu lx iy ly jc lq lr ls lt bi translated">生成authURL，这是用户单击以转到登录页面的URL。</li><li id="e33a" class="ll lm hi ih b ii lu im lv iq lw iu lx iy ly jc lq lr ls lt bi translated">如果我们从认证服务器回来(我们刚刚完成登录)，我们的URL中应该有一个<code class="du kz la lb kq b">?code=something</code>。当这种情况发生时，我们获取它并使用它来请求一个<code class="du kz la lb kq b">access_token</code>，这表明我们已经正确地输入了我们的凭证。</li></ol><p id="ef28" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">PKCE <code class="du kz la lb kq b">code_verifier</code>的东西都是在引擎盖下完成的，所以没有必要担心它，但同样，它只是增加了一些额外的保证，即发送<code class="du kz la lb kq b">code</code>以获得<code class="du kz la lb kq b">access_token</code>的应用程序是启动认证过程的同一应用程序。</p><p id="6508" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有了<code class="du kz la lb kq b">ProtectedRoute</code>设置和处理我们的认证状态，添加一个<code class="du kz la lb kq b">Login</code>组件变得非常简单。</p><pre class="je jf jg jh fd kp kq kr ks aw kt bi"><span id="1a55" class="ku jn hi kq b fi kv kw l kx ky">// src/pages/Login.svelte</span><span id="dc70" class="ku jn hi kq b fi lz kw l kx ky">&lt;script lang="ts"&gt;<br/>  import { authURL } from '../concerns/stores';<br/>  import Button from '../ui_components/Button.svelte';<br/>  import { navigate } from 'svelte-routing';<br/>&lt;/script&gt;</span><span id="75f2" class="ku jn hi kq b fi lz kw l kx ky">&lt;h2&gt;This door is locked&lt;/h2&gt;<br/>&lt;<em class="ld">Button</em> on:message={() <em class="ld">=&gt;</em> <em class="ld">navigate</em>($authURL)} label="🔐 unlock"/&gt;</span></pre><p id="40a1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们使用svelte-stores来处理访问令牌和auth URL。当应用程序加载时，我们首先尝试从localStorage中获取数据，否则我们将在内存中处理这种数据，并将其“持久化”在localStorage中，以便在刷新后继续存在。</p><pre class="je jf jg jh fd kp kq kr ks aw kt bi"><span id="211a" class="ku jn hi kq b fi kv kw l kx ky">// src/concerns/store.ts</span><span id="4468" class="ku jn hi kq b fi lz kw l kx ky">import { writable } from 'svelte/store';</span><span id="ce2b" class="ku jn hi kq b fi lz kw l kx ky">export const accessToken = <em class="ld">writable</em>(localStorage.<em class="ld">getItem</em>('accessToken'));</span><span id="7ed3" class="ku jn hi kq b fi lz kw l kx ky">export const authURL = <em class="ld">writable</em>(localStorage.<em class="ld">getItem</em>('auth-url'));</span></pre><p id="eab9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">⚠️如果你选择使用localStorage，确保你的应用能够抵御跨站点脚本攻击。任何可以在你的页面上运行任意javascript的人都可以添加代码来转储本地存储，并将其发送到其他服务器，因此净化你的输入，javascript <code class="du kz la lb kq b">eval</code>函数应该会吓到你⚠️</p><h1 id="eeef" class="jm jn hi bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated">“成品”</h1><p id="3494" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">如果一切顺利，你应该看到你的网页开始出现。我没有在这上面花太多时间，所以我们只是得到了默认的苗条外观和感觉——我告诉过你这是低努力…</p><p id="d1c4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">家很简单——它是我们冒险的开始。注意顶部的劣质导航条</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="er es ma"><img src="../Images/2063d43f1d0de7273722f3bd27148fe9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AXxOII2CCcYEhFp1vCetKA.png"/></div></div></figure><p id="c9d9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你想看密室，你需要一把钥匙(密码)</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="er es mb"><img src="../Images/d5c376d41e0fca5c8e91201dc67cb13e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zL2COFz8HcL_QZ9K9DtW9Q.png"/></div></div></figure><p id="7fb4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这🔐解锁按钮实际上只是一个到认证服务器的重定向。单击它会将我们转到OneLogin登录页面，在此输入我们的凭据。检查URL时，您会看到它包含我们的散列code_verifier和散列算法，因此您知道PKCE SDK正在做它的工作。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="er es mc"><img src="../Images/ff3048003016331e56ce0e70cc25a725.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t2DR2rsYt4LeQtJvcOKS6A.png"/></div></div></figure><p id="5920" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后，如果你登录成功，你会发现一个密室，里面有很多“钱”(那是我用游戏币虚构的)。您可以刷新或导航到您想要的主页，并且您仍然能够到达密室，因为access_token已被缓存。</p><p id="8447" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">点击离开会激活<code class="du kz la lb kq b">access_token</code>，然后你会被带回家，你必须重新登录。</p><h1 id="71ab" class="jm jn hi bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated">包扎</h1><p id="b0be" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">瞧啊。多亏了PKCE和OneLogin，用不到50行代码就实现了一个快捷肮脏的保护路线。我将是第一个承认它并不完美的人，因为Svelte和OneLogin都是相对较新的产品(Svelte是一个新的框架，OneLogin闯入了开发者的关注领域),我们一直在改进。</p><p id="e623" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你看到一些可以改进的地方，我欢迎你的建议和意见，并且<a class="ae jl" href="https://github.com/onelogin/onelogin-node-sdk" rel="noopener ugc nofollow" target="_blank"> OneLogin SDK </a>是开源的，所以欢迎PRs和问题。</p></div></div>    
</body>
</html>