<html>
<head>
<title>Kickstarting your Node application — RESTful APIs, Authentication, Security — PART 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">启动您的节点应用程序—RESTful API、身份验证、安全性—第1部分</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/kickstarting-your-node-application-restful-apis-authentication-security-720e5612640d?source=collection_archive---------13-----------------------#2021-07-25">https://medium.com/geekculture/kickstarting-your-node-application-restful-apis-authentication-security-720e5612640d?source=collection_archive---------13-----------------------#2021-07-25</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/c9db96be05b10837a06cda31abcbb9d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*lxFhUQmqJFyM9tKw"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Source: Unsplash</figcaption></figure><p id="e107" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">因此，你拥有一家食品杂货连锁店，在一个晴朗的日子里，一个关于创建一个网站的想法突然出现在你的脑海中，这个网站更像是一个仪表板，以便你管理你的产品和销售。您已经使用自己选择的框架(比如React、Vue或Angular)设计和开发了初始前端。现在是时候拿出后端了。经过一点比较和研究，您决定使用Node.js来开发后端应用程序。那么你需要的关键成分是什么呢？</p><p id="0084" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我将在这篇文章中讨论和解释以下内容</p><p id="66b5" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">第一部分</strong></p><ul class=""><li id="381d" class="js jt hi iw b ix iy jb jc jf ju jj jv jn jw jr jx jy jz ka bi translated">设置应用程序的基本结构或样板文件</li><li id="2a92" class="js jt hi iw b ix kb jb kc jf kd jj ke jn kf jr jx jy jz ka bi translated">开发RESTful APIs</li></ul><p id="ae96" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><a class="ae kg" href="https://souvikmajumder31.medium.com/kickstarting-your-node-application-restful-apis-authentication-security-part-2-75a843090789" rel="noopener"> <strong class="iw hj"> PART -2 </strong> </a></p><ul class=""><li id="459c" class="js jt hi iw b ix iy jb jc jf ju jj jv jn jw jr jx jy jz ka bi translated">验证和授权您的服务请求</li><li id="7dd9" class="js jt hi iw b ix kb jb kc jf kd jj ke jn kf jr jx jy jz ka bi translated">实现针对各种漏洞的安全性。</li></ul><figure class="ki kj kk kl fd ij er es paragraph-image"><div class="er es kh"><img src="../Images/26e7d72136f9e5743562a1fe769ab27f.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/0*WM5D1dXi7w8_xErp"/></div></figure><p id="c223" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我们开始做饭吧！！！</p><h1 id="349a" class="km kn hi bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">构建样板文件</h1><p id="d65a" class="pw-post-body-paragraph iu iv hi iw b ix lk iz ja jb ll jd je jf lm jh ji jj ln jl jm jn lo jp jq jr hb bi translated">虽然没有具体的或官方的方法来设计你的应用程序的结构，但我自己通常遵循一个系统的和简单的方法。但是在我们这样做之前，让我们首先创建我们的节点项目。</p><ul class=""><li id="fe60" class="js jt hi iw b ix iy jb jc jf ju jj jv jn jw jr jx jy jz ka bi translated">在您的本地机器上安装NodeJS，打开VS Code或您选择的任何其他编辑器，选择一个文件夹，打开一个终端并运行<strong class="iw hj"> npm init </strong>来初始化节点项目。</li><li id="aed9" class="js jt hi iw b ix kb jb kc jf kd jj ke jn kf jr jx jy jz ka bi translated">在您的<em class="lp"> package.json </em>文件中给出一个名称和其他可选细节。</li><li id="34f8" class="js jt hi iw b ix kb jb kc jf kd jj ke jn kf jr jx jy jz ka bi translated">通过运行<strong class="iw hj"> npm install — save express </strong>，安装<strong class="iw hj"> express </strong> npm包。</li><li id="c256" class="js jt hi iw b ix kb jb kc jf kd jj ke jn kf jr jx jy jz ka bi translated">创建一个<strong class="iw hj"> index.js </strong>文件。</li></ul><p id="333f" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在我构造锅炉板之前，让我们使用express在<strong class="iw hj"> index.js </strong>文件本身中创建API端点。</p><figure class="ki kj kk kl fd ij"><div class="bz dy l di"><div class="lq lr l"/></div></figure><p id="d0b1" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我还需要安装<strong class="iw hj"> nodemon </strong> npm包，以便服务器能够观察和识别文件中所做的更改，并再次自动重启。</p><p id="8948" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">运行命令</p><pre class="ki kj kk kl fd ls lt lu lv aw lw bi"><span id="f0bb" class="lx kn hi lt b fi ly lz l ma mb"><strong class="lt hj">npm install — save nodemon</strong></span></pre><p id="d1e9" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">打开<em class="lp"> package.json </em>并包含一个启动脚本</p><figure class="ki kj kk kl fd ij"><div class="bz dy l di"><div class="lq lr l"/></div></figure><p id="718d" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">执行npm run start以启动节点服务器</p><p id="2e3b" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">打开浏览器，点击网址<a class="ae kg" href="http://localhost:8080/" rel="noopener ugc nofollow" target="_blank"> http://localhost:8080/ </a></p><p id="6019" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">让我们再创建一个GET端点。</p><figure class="ki kj kk kl fd ij"><div class="bz dy l di"><div class="lq lr l"/></div></figure><figure class="ki kj kk kl fd ij er es paragraph-image"><div class="er es mc"><img src="../Images/bbce5f2334c6e4e2f41581ab0e9ff7f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1094/format:webp/1*_tJ-3lumsv1ugwfFScLm-Q.png"/></div></figure><p id="2083" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">和一个后端点。</p><figure class="ki kj kk kl fd ij"><div class="bz dy l di"><div class="lq lr l"/></div></figure><p id="ed58" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">因此，我们在这个index.js文件中有了所有的端点。</p><p id="15ff" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在是构造boiler板的时候了，这样我们就可以相应地分离端点，以便于开发。</p><p id="bc33" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">想象一下你去餐馆的场景，你把你点的菜交给服务员。服务员(路线)拿走你点的菜并把它交给厨师长(控制员)。厨师长将订单交给厨师(服务员)。厨师从冰箱(模型)中取出蔬菜或肉类，用所有其他配料和他惊人的烹饪技巧烹饪。然后，他把准备好的菜还给厨师长，厨师长再把菜递给你的服务员。服务员(路线)现在带着菜来到你面前，你开始享受美味的饭菜。</p><p id="8c06" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">路由-&gt;控制器-&gt;服务-&gt;模型-&gt;数据库</p><p id="d812" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">为<strong class="iw hj"> <em class="lp">路线</em></strong><strong class="iw hj"><em class="lp">服务</em></strong><strong class="iw hj"><em class="lp">管制员</em> </strong>和<strong class="iw hj"> <em class="lp">车型</em> </strong>创建文件夹。</p><figure class="ki kj kk kl fd ij er es paragraph-image"><div class="er es md"><img src="../Images/a09b643b945cf411ffb00add4031609f.png" data-original-src="https://miro.medium.com/v2/resize:fit:572/format:webp/1*an2EXQDo2oCg3p_Msqinow.png"/></div></figure><p id="3491" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">假设我们想要与<strong class="iw hj">产品</strong>、<strong class="iw hj">销售</strong>和<strong class="iw hj">员工</strong>相关的API。</p><p id="4b45" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">首先，在<strong class="iw hj"> <em class="lp"> routes </em> </strong>文件夹中，我们为产品、销售和员工创建了3个单独的文件，以及一个index.js文件，该文件将组合上述3个文件中的代码。</p><figure class="ki kj kk kl fd ij er es paragraph-image"><div class="er es me"><img src="../Images/d6b019804493394a5e79283468640381.png" data-original-src="https://miro.medium.com/v2/resize:fit:406/format:webp/1*gHgETKwyWtjXiheRA8uGnQ.png"/></div></figure><p id="33f8" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在打开products.js文件并包含下面两行。</p><figure class="ki kj kk kl fd ij"><div class="bz dy l di"><div class="lq lr l"/></div></figure><p id="1ba9" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">因此，我们使用express的路由器类。</p><p id="328b" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在将我们之前在main<strong class="iw hj"><em class="lp">index . js</em></strong>中创建的<strong class="iw hj"> getProducts </strong>和<strong class="iw hj"> createProduct </strong>的代码移到这里。将所有'<strong class="iw hj"> <em class="lp"> app </em> </strong>'替换为'<strong class="iw hj"> <em class="lp">路由器</em> </strong>'。</p><p id="e080" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在<strong class="iw hj"> product.js </strong>文件的末尾导出<strong class="iw hj"> router </strong></p><figure class="ki kj kk kl fd ij"><div class="bz dy l di"><div class="lq lr l"/></div></figure><p id="dd8b" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">打开<strong class="iw hj"> routes </strong>文件夹中的<strong class="iw hj"> index.js </strong>，初始化express模块及其Router类。</p><p id="37ac" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">导入从<strong class="iw hj"> product.js </strong>导出的路径</p><figure class="ki kj kk kl fd ij"><div class="bz dy l di"><div class="lq lr l"/></div></figure><p id="bafc" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">所有与产品相关的原料药都应由附加在特定原料药名称前的另一个名为“<strong class="iw hj">产品</strong>”的端点来标识。</p><figure class="ki kj kk kl fd ij"><div class="bz dy l di"><div class="lq lr l"/></div></figure><p id="b927" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在index.js文件的末尾导出<strong class="iw hj">路由器</strong></p><figure class="ki kj kk kl fd ij"><div class="bz dy l di"><div class="lq lr l"/></div></figure><p id="d4e6" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">回到最初的主<strong class="iw hj"> index.js </strong>文件，从所有其他文件导入合并在<strong class="iw hj"> router/index.js </strong>中的路由。</p><figure class="ki kj kk kl fd ij"><div class="bz dy l di"><div class="lq lr l"/></div></figure><p id="c5a9" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">使用这个'<strong class="iw hj"> routes' </strong>，并在路径中附加一个'<strong class="iw hj"> api' </strong>。</p><figure class="ki kj kk kl fd ij"><div class="bz dy l di"><div class="lq lr l"/></div></figure><p id="15ea" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">保存并检查浏览器</p><figure class="ki kj kk kl fd ij er es paragraph-image"><div class="er es mf"><img src="../Images/a0ff5bd15b1e467ab62e4ba32c31e1db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*Vo83dvFYqC-FRuSefca-cA.png"/></div></figure><p id="8124" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">对<strong class="iw hj">销售人员</strong>和<strong class="iw hj">员工</strong>重复同样的程序。</p><p id="616b" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj"><em class="lp">routes/employees . js</em></strong></p><figure class="ki kj kk kl fd ij"><div class="bz dy l di"><div class="lq lr l"/></div></figure><p id="c55c" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj"> <em class="lp">路线/销售. js </em> </strong></p><figure class="ki kj kk kl fd ij"><div class="bz dy l di"><div class="lq lr l"/></div></figure><p id="a65b" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj"><em class="lp">routes/index . js</em></strong></p><figure class="ki kj kk kl fd ij"><div class="bz dy l di"><div class="lq lr l"/></div></figure><figure class="ki kj kk kl fd ij er es paragraph-image"><div class="er es mg"><img src="../Images/ba2cfd15b824339e71fde00b61acf0ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1066/format:webp/1*E2IE_O4euq-gjmYoZPL93g.png"/></div></figure><figure class="ki kj kk kl fd ij er es paragraph-image"><div class="er es mh"><img src="../Images/60fb7c2f987b36f8d55bccfddfbef752.png" data-original-src="https://miro.medium.com/v2/resize:fit:1178/format:webp/1*E_5-xIA0l9YBop1R-Mxqtg.png"/></div></figure><p id="e428" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在，让我们把相应的控制器也放在图片中。</p><p id="6b59" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在controllers文件夹中，分别为<strong class="iw hj">产品</strong>、<strong class="iw hj">员工</strong>和<strong class="iw hj">销售</strong>创建3个控制器，名称分别为<strong class="iw hj"> <em class="lp"> product.js </em> </strong>、<strong class="iw hj"> <em class="lp"> employees.js </em> </strong>和<strong class="iw hj"> <em class="lp"> sales.js </em> </strong>。</p><figure class="ki kj kk kl fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mi"><img src="../Images/9455d662d159fd79a05d7982a1ed86ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:394/format:webp/1*dIriaA82grAC9jxlde0RHw.png"/></div></div></figure><p id="a0ba" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">打开<strong class="iw hj"><em class="lp">controllers/product . js</em></strong>，创建两个函数'<strong class="iw hj"> getProducts </strong>'和'<strong class="iw hj"> createProduct </strong>'。</p><p id="f221" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">移动我们在<strong class="iw hj"><em class="lp">routes/product . js</em></strong>文件中编写的示例响应的代码块，如下所示。最后导出两个函数。</p><figure class="ki kj kk kl fd ij"><div class="bz dy l di"><div class="lq lr l"/></div></figure><p id="70d3" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在<em class="lp"> routes/product.js </em>中，导入<strong class="iw hj">控制器/product.js </strong>并相应调用函数，如下图所示。</p><figure class="ki kj kk kl fd ij"><div class="bz dy l di"><div class="lq lr l"/></div></figure><p id="3f12" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在浏览器中重新运行API来检查响应。</p><figure class="ki kj kk kl fd ij er es paragraph-image"><div class="er es mj"><img src="../Images/838261b6b9a3de0c89ecad1322d2f69e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1122/format:webp/1*7PAY5rT1XlU6L8aEmWuaSw.png"/></div></figure><p id="458e" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">于是链路<strong class="iw hj"> App — &gt;路由器— &gt;控制器</strong>建立。对<strong class="iw hj">员工</strong>和<strong class="iw hj">销售</strong>重复相同的程序。</p><p id="5439" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj"><em class="lp">controllers/employees . js</em></strong></p><figure class="ki kj kk kl fd ij"><div class="bz dy l di"><div class="lq lr l"/></div></figure><p id="867d" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj"><em class="lp">routes/employees . js</em></strong></p><figure class="ki kj kk kl fd ij"><div class="bz dy l di"><div class="lq lr l"/></div></figure><p id="b486" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj"> <em class="lp">控制器/sales.js </em> </strong></p><figure class="ki kj kk kl fd ij"><div class="bz dy l di"><div class="lq lr l"/></div></figure><p id="3383" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj"> <em class="lp">路线/销售. js </em> </strong></p><figure class="ki kj kk kl fd ij"><div class="bz dy l di"><div class="lq lr l"/></div></figure><p id="ed91" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在，让我们将服务也考虑在内。</p><p id="4149" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在services文件夹中，为products、employees和sales创建3个服务，分别名为product.js、employees.js和sales.js。</p><figure class="ki kj kk kl fd ij er es paragraph-image"><div class="er es mk"><img src="../Images/cab44a64ff67110a381b25c5a9b8bea6.png" data-original-src="https://miro.medium.com/v2/resize:fit:438/format:webp/1*dOde7uQJfYVOVvvsoQO9DA.png"/></div></figure><p id="b2f7" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">打开<strong class="iw hj"><em class="lp">services/product . js</em></strong>，和我们之前做的一样，创建两个函数，分别命名为'<strong class="iw hj"> getProducts </strong>和'<strong class="iw hj"> createProduct </strong>'。然而，在这种情况下，函数不会直接访问请求参数。</p><p id="ec8b" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">相反，在<strong class="iw hj"><em class="lp">controller/product . js</em></strong>文件本身中，我们将从请求查询参数(如果有)中获取我们需要的所有内容，并将这些内容作为函数参数传递给属于<strong class="iw hj"><em class="lp">service/product . js</em></strong>的函数。</p><p id="ed9c" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在这种情况下，由于我们获取所有的产品，所以参数中没有传递任何东西。</p><p id="1b22" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj"> <em class="lp">服务/产品. js </em> </strong></p><figure class="ki kj kk kl fd ij"><div class="bz dy l di"><div class="lq lr l"/></div></figure><p id="6f9f" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在<strong class="iw hj"><em class="lp">controller/product . js</em></strong>中，我们导入<strong class="iw hj"><em class="lp">services/product . js</em></strong>文件，并相应调用返回数据的函数。然后，我们将函数返回的数据作为对路由的响应发送出去。</p><p id="239a" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">为了确保仅在接收到数据后才发送响应，我们将<strong class="iw hj"><em class="lp">services/product . js</em></strong>和<strong class="iw hj"><em class="lp">controllers/product . js</em></strong>中的两个函数设为异步</p><figure class="ki kj kk kl fd ij"><div class="bz dy l di"><div class="lq lr l"/></div></figure><p id="cdd2" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">如果是单一产品，那么我们可能需要传递<strong class="iw hj">产品id </strong>。</p><figure class="ki kj kk kl fd ij"><div class="bz dy l di"><div class="lq lr l"/></div></figure><p id="6245" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj"><em class="lp">services/product . js</em></strong></p><figure class="ki kj kk kl fd ij"><div class="bz dy l di"><div class="lq lr l"/></div></figure><p id="afc9" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这样，链路<strong class="iw hj"> App — &gt;路由器— &gt;控制器— &gt;服务</strong>就建立了。</p><p id="c74e" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">对<strong class="iw hj">员工</strong>和<strong class="iw hj">销售</strong>也重复同样的练习。</p><p id="b881" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我们已经完成了API创建部分。</p><figure class="ki kj kk kl fd ij er es paragraph-image"><div class="er es ml"><img src="../Images/46f0cb664f4a1d8e6bd3ea9ecac5a24e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/0*nhnwuVD3qRbuCLl9"/></div></figure></div><div class="ab cl mm mn gp mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="hb hc hd he hf"><p id="0a54" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在我们已经准备好了所有的API。我们可以在我们的前端应用程序中轻松使用这些内容。</p><p id="eb02" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">等等！！！</p><p id="4c86" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">你不认为它对任何人都是公开的吗？我的意思是，您肯定可以将Node.js应用程序部署到云中，但是在您可以访问来自API的数据之前，它会要求任何类型的用户凭证吗？没有对吗？这意味着这个星球上的任何人都可以看到你的重要数据，如果他们以某种方式获得部署的URL，而不需要提供任何类型的凭证。</p><p id="cbc6" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">风险很大！！！！！！不要担心，我支持你:)让我们继续下一部分，看看如何认证我们的API。</p><p id="72d3" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">前往第二部分</p></div></div>    
</body>
</html>