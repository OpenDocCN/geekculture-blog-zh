<html>
<head>
<title>Dynamically Pinned List Headers</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">动态固定列表头</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/dynamically-pinned-list-headers-ee5aa23f1db4?source=collection_archive---------2-----------------------#2022-04-27">https://medium.com/geekculture/dynamically-pinned-list-headers-ee5aa23f1db4?source=collection_archive---------2-----------------------#2022-04-27</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="8d54" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">颤动的包裹聚光灯</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/76997b0017d79afbfabc450e7bd602de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*tPsOKNCQ2vSk0riqXvD0_w.gif"/></div></div></figure><p id="4f16" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">Flutter提供了一个强大的解决方案，以<code class="du kf kg kh ki b"><a class="ae kj" href="https://docs.flutter.dev/development/ui/advanced/slivers" rel="noopener ugc nofollow" target="_blank">Slivers</a></code>的形式实现高级滚动。正如在Flutter文档中提到的，<code class="du kf kg kh ki b">Sliver</code>是可滚动区域的一部分，您可以定义它以一种特殊的方式运行。这允许我们组合多个可滚动的小部件(<code class="du kf kg kh ki b">ListView</code>、<code class="du kf kg kh ki b">GridView</code>等)。)合并到一个可滚动的小部件中，在那里它们一起滚动，如下面的视频所示。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="kk kl l"/></div></figure><p id="fa1d" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">它还允许我们实现高级功能，如展开/折叠<code class="du kf kg kh ki b">AppBar</code>，如下所示。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="kk kl l"/></div></figure><p id="1583" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">然而,<code class="du kf kg kh ki b">Slivers</code>库还有一些需要改进的地方。例如，你注意到第一个视频中的<em class="km">标题</em>被固定了22秒吗？它们就像下面的演示一样相互叠加。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es kn"><img src="../Images/94d0cdf4e62b311c091b56e8f4aa7ed1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1192/1*2sSl72lhtdg9gpkqlpSwEw.gif"/></div></figure><p id="3ff3" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">当列表滚动时，没有简单的方法来动态固定标题，用下面的标题替换当前固定的标题。我开始创建一个解决方案来处理这个问题，但是后来我发现Flutter社区的另一个成员已经解决了这个问题！😃因此，我不再写一篇关于我如何实现该解决方案的文章，而是重点介绍来自Pieter Vanloon的令人惊叹的<code class="du kf kg kh ki b"><a class="ae kj" href="https://pub.dev/packages/sliver_tools" rel="noopener ugc nofollow" target="_blank">sliver_tools</a></code>包！让我们来看看如何使用它。</p><p id="ce1e" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">这个包提供了许多小部件，有助于扩展Flutter的高级可滚动UI功能。我们将使用其中的两个:<code class="du kf kg kh ki b">MultiSliver</code>和<code class="du kf kg kh ki b">SliverPinnedHeader</code>。</p><p id="b5b3" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">首先，让我们创建一个扩展<code class="du kf kg kh ki b">MultiSliver</code>的<code class="du kf kg kh ki b">Section</code>小部件。我们将接受参数来定义标题<em class="km"> </em>颜色、标题、标题颜色以及显示在它下面的项目列表。然后我们将把一个<code class="du kf kg kh ki b">SliverPinnedHeader</code>和<code class="du kf kg kh ki b">SliverList</code>作为子节点传递给我们的<code class="du kf kg kh ki b">super</code>构造函数。</p><pre class="iy iz ja jb fd ko ki kp kq aw kr bi"><span id="eea8" class="ks kt hi ki b fi ku kv l kw kx">class Section extends MultiSliver {<br/>  Section({<br/>    Key? key,<br/>    required String title,<br/>    Color headerColor = Colors.white,<br/>    Color titleColor = Colors.black,<br/>    required List&lt;Widget&gt; items,<br/>  }) : super(<br/>         key: key,<br/>         pushPinnedChildren: true,<br/>         children: [<br/>           SliverPinnedHeader(<br/>             child: ColoredBox(<br/>               color: headerColor,<br/>               child: ListTile(<br/>                 textColor: titleColor,<br/>                 title: Text(title),<br/>               ),<br/>           ),<br/>           SliverList(<br/>             delegate: SliverChildListDelegate.fixed(items),<br/>           ),<br/>         ],<br/>       );<br/>}</span></pre><p id="0997" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">这里需要注意的重要一点是<code class="du kf kg kh ki b">pushPinnedChildren</code>参数。将此设置为<code class="du kf kg kh ki b">true</code>提供了我们想要的行为。如果是<code class="du kf kg kh ki b">false</code>，标题的行为将与Flutter的<code class="du kf kg kh ki b">Slivers</code>完全相同。</p><p id="971b" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">现在，让我们在<code class="du kf kg kh ki b">CustomScrollView</code>中使用我们的<code class="du kf kg kh ki b">Section</code>小部件。</p><pre class="iy iz ja jb fd ko ki kp kq aw kr bi"><span id="0950" class="ks kt hi ki b fi ku kv l kw kx">CustomScrollView(<br/>  slivers: [<br/>    Section(<br/>      title: 'Category #1',<br/>      headerColor: Colors.blue,<br/>      items: List.generate(10, (index) =&gt; ListTile(<br/>        title: Text('Item #${index + 1}'),<br/>      )),<br/>    ),<br/>    Section(<br/>      title: 'Category #2',<br/>      headerColor: Colors.red,<br/>      items: List.generate(10, (index) =&gt; ListTile(<br/>        title: Text('Item #${index + 11}'),<br/>      )),<br/>    ),<br/>    ...<br/>  ],<br/>),</span></pre><p id="e2b3" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">为了简洁起见，我只展示了两个部分的代码，但是您可以根据需要创建任意多个部分。让我们看看它看起来怎么样。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es kn"><img src="../Images/9c8041923632c8ddbca1b96727207c39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1192/1*MZQggfHaAWhLBt9J_SLuMg.gif"/></div></figure><p id="2b2d" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">那就好多了！如您所见，当我们滚动浏览各个部分时，固定的标题被平滑地替换。有趣的是，试着用折叠的<code class="du kf kg kh ki b">SliverAppBar</code>代替<code class="du kf kg kh ki b">SliverPinnedHeader</code>，看看你能想出什么！</p><p id="15c2" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">一如既往的感谢您的阅读！如果你觉得这篇文章很有帮助，请鼓掌并关注我和Flutter的工作。也欢迎提问和评论。</p></div></div>    
</body>
</html>