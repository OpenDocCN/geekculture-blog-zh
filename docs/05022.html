<html>
<head>
<title>Ladder to Success! — Player Climb Ladder Animation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通往成功的阶梯！—玩家爬梯子动画</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/ladder-to-success-player-climb-ladder-animation-d0760089476c?source=collection_archive---------30-----------------------#2021-07-07">https://medium.com/geekculture/ladder-to-success-player-climb-ladder-animation-d0760089476c?source=collection_archive---------30-----------------------#2021-07-07</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="4463" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这篇文章将展示如何给玩家爬梯子的能力。这种梯子系统可以用在任何长度的梯子上，并允许玩家上下梯子。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/233b724770144cc5137cdf9ba1d1195b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1270/1*1gkyhGg8hjnnjioD85PLUw.gif"/></div></figure><p id="8bfe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在播放器的Animator窗口中，我们有两个bool参数，它们将控制从任何状态到爬梯动画的转换，然后在bool为假时退出动画。向下攀爬动画是反向播放的向上攀爬动画。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jl"><img src="../Images/b50a6f29241a3f9f44175bff50ce9c06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*duI3pM8m6P1RFRGy03QOFw.gif"/></div></div></figure><p id="4bb5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了控制玩家爬梯子时的移动，我们需要添加一些变量。</p><ol class=""><li id="79e5" class="jq jr hi ih b ii ij im in iq js iu jt iy ju jc jv jw jx jy bi translated">玩家爬梯子的速度。</li><li id="9fbc" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">玩家所站的当前梯子的参考。</li><li id="0608" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">这个bool将停止玩家输入，直到梯子被爬上。</li><li id="50fb" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">这个bool确保玩家在开始攀爬之前站在梯子旁边。</li><li id="6641" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">这个bool是为了知道玩家是从梯子的顶端还是底端开始的。</li></ol><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es ke"><img src="../Images/714463d5f7b21ce6f7004a19e2fa39b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r3UEbBVVsGqwJquLqMPJKA.png"/></div></div></figure><p id="9dad" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在更新中，我们增加了一个条件，爬梯子也必须为假，玩家的输入才能起作用。然后，如果玩家正在爬梯子，我们根据他们开始的地方沿着梯子移动控制器。如果玩家正在向下攀爬，我们检查他们何时到达底部并结束攀爬。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es kf"><img src="../Images/b7116beeee837f30b09fa8ea7fef5c24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oZ7hOYJBamB3tW15p9HGPQ.png"/></div></div></figure><p id="7307" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在CalculateMovement中，如果按下“E”键并且玩家在梯子附近，我们会添加爬梯的起点。在按键时，我们禁用控制器并将播放器移动到梯子的z轴位置加上播放器的偏移量。然后，我们将玩家设置为攀爬梯子，重新启用控制器，并根据玩家是在梯子的底部还是顶部来启动攀爬动画。最后，我们检查玩家是否需要翻转来面对梯子。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es kg"><img src="../Images/2473d0c0e932e73151afa44c52c9d2aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OnIsWASQ2nxndVPE9Hr-fw.png"/></div></div></figure><p id="1eb3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当玩家进入或退出触发器时，从梯子调用该方法。如果给定的bool为真，则玩家在梯子旁边，并且存储当前梯子的引用。然后，我们通过查看玩家是高于还是低于梯子来确定玩家是在梯子的顶部还是底部，并相应地设置bool。如果near Ladder bool为false，我们将玩家设置为不在梯子旁边，并清除梯子引用。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es kh"><img src="../Images/cc257d807c7b2dd4c85ac438cc462d78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nv_QQy7nHyxRKI4D70FqEg.png"/></div></div></figure><p id="a071" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当玩家到达梯子的顶部或底部时，调用该方法。该方法将玩家设置为不再攀爬梯子，通过将bool设置为false来告诉动画制作人转换到Idle，并启动协程以根据玩家开始的位置将玩家移动到正确的结束位置。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es ki"><img src="../Images/2c4b77d667383dc12e8db3a02eaaf19b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QeLjTJFMNGcGG0X2fXtz9A.png"/></div></div></figure><p id="0008" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这些方法让其他脚本检查玩家是从梯子的顶部还是底部开始，以及玩家当前是否正在爬梯子。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es kj"><img src="../Images/60204081380061ecc5a97cef990d04ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FfkA4WLSPbnVcH4CAOft_Q.png"/></div></div></figure><p id="3f5d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此方法用于检查梯子在播放器的哪一侧，检查播放器当前是否翻转到该方向，并返回true或false。如果玩家的z轴位置大于梯子的位置，则梯子位于玩家屏幕的右侧。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es kk"><img src="../Images/6efd7e85b63b734b60966fd6a64cc49a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xj5hooc3buHUN40xmo0gaQ.png"/></div></div></figure><p id="bfb4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当玩家结束爬梯时，这个协程被调用。该方法首先检查玩家是否正在爬下梯子，并翻转玩家。然后，我们禁用控制器，将球员移向传入的结束位置，同时球员每一帧都远离该位置0.1。一旦玩家足够接近终点位置，我们就将玩家在梯子上的起点改变到原来的相反位置，并重新启用控制器。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es kl"><img src="../Images/9e0d29e6b8a3b9228fa03d1ddb7528e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rF9Swe5r6Qjsra8MNf5yZA.png"/></div></div></figure><p id="7056" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">梯子有一个箱子碰撞器，被设置为一个触发器，用于检测玩家何时进入和退出，它也有一个用于梯子横档的箱子碰撞器，这样玩家就不能穿过梯子。梯子顶部和底部的端点是空的游戏对象，玩家在结束攀爬时向其移动。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jl"><img src="../Images/ad38e4d1b3d335bc30eb8bfd47d34fad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*zETfeFVFT2br2_FOOUrjbg.gif"/></div></div></figure><p id="feba" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">梯形脚本需要一些变量和方法，允许其他脚本检索这些变量的值。</p><ol class=""><li id="a082" class="jq jr hi ih b ii ij im in iq js iu jt iy ju jc jv jw jx jy bi translated">攀登时玩家将从梯子中心偏移的量。</li><li id="7893" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">玩家在梯子顶端和底端的位置。</li></ol><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es km"><img src="../Images/ed8e4f7aafe9bcd25c46369269cb6025.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aXD94e9b_yxxOnCRDdntwg.png"/></div></div></figure><p id="dabc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当玩家进入梯子的触发器时，我们在PlayerController上调用EnterExitLadder方法，并传入true，这样方法就知道玩家进入的这个脚本，供玩家从中调用方法。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es kn"><img src="../Images/5757c49ac6ad84403ced1a3f234b108a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5Uj4YDvgaXdjBBSOhqUqaQ.png"/></div></div></figure><p id="5ae9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果玩家退出触发器，我们调用PlayerController上的EnterExitLadder方法并传入false，这样方法就知道玩家离开了，而这个脚本清除玩家的引用。如果玩家上的壁架抓取碰撞器离开了触发器，我们从父级抓取PlayerController脚本，并检查玩家当前是否正在爬梯子，以及玩家是否从梯子的底部开始。如果是的话，我们调用玩家的EndLadderClimb将他们移动到梯子的顶端并结束攀爬。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es ko"><img src="../Images/4a4043def2d4e9a87431be28db956785.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mdJnI4SxxeL8b9haWfTpdg.png"/></div></div></figure><p id="6064" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">玩家现在可以通过按旁边的“E”键上下梯子。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es kp"><img src="../Images/01bef334cfe3589204c546e98ef1d40b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*C1mBzmVeTHxVp3x1zZ6uVQ.gif"/></div></div></figure></div></div>    
</body>
</html>