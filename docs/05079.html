<html>
<head>
<title>Tasker and Telegram Integration</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Tasker和电报集成</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/tasker-and-telegram-integration-278c53ab1d00?source=collection_archive---------3-----------------------#2021-07-09">https://medium.com/geekculture/tasker-and-telegram-integration-278c53ab1d00?source=collection_archive---------3-----------------------#2021-07-09</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/350b53024c8d40cb12f5b1abc6bafb99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AOiFZQVJ2YqfPVII0i1BCw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Foto di <a class="ae iu" href="https://pixabay.com/it/users/usnotv-3807928/?utm_source=link-attribution&amp;amp;utm_medium=referral&amp;amp;utm_campaign=image&amp;amp;utm_content=5348490" rel="noopener ugc nofollow" target="_blank">Ümit Solmaz</a> da <a class="ae iu" href="https://pixabay.com/it/?utm_source=link-attribution&amp;amp;utm_medium=referral&amp;amp;utm_campaign=image&amp;amp;utm_content=5348490" rel="noopener ugc nofollow" target="_blank">Pixabay</a></figcaption></figure><p id="39f8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">今天，我将解释如何使用Tasker在电报上发送信息。我将特别展示发送短信的方法和您的位置。</p><p id="f489" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我发现这有助于为我的家人安排信息，例如，当我到达某个地方时。</p><h1 id="09d9" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">要求</h1><ul class=""><li id="2deb" class="kr ks hi ix b iy kt jc ku jg kv jk kw jo kx js ky kz la lb bi translated">Tasker 5.12.22</li><li id="5249" class="kr ks hi ix b iy lc jc ld jg le jk lf jo lg js ky kz la lb bi translated">电报</li></ul><p id="a9d8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我将展示的所有通话以及更多内容都可以在Telegram提供的<a class="ae iu" href="https://core.telegram.org/bots/api#making-requests" rel="noopener ugc nofollow" target="_blank"> Telegram Bot API </a>网站上找到。</p><h1 id="69d7" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">第一步。创建一个电报机器人</h1><p id="2549" class="pw-post-body-paragraph iv iw hi ix b iy kt ja jb jc ku je jf jg lh ji jj jk li jm jn jo lj jq jr js hb bi translated">为了在电报上发送信息，我们需要使用<a class="ae iu" href="https://t.me/botfather" rel="noopener ugc nofollow" target="_blank">机器人父亲</a>创建一个机器人。你可以在这里找到如何使用它的官方指南。</p><p id="9259" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">通过发送命令<strong class="ix hj"> /newbot </strong>，机器人父亲将指导你创建一个机器人。</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lk"><img src="../Images/5c9998f83083aae5791db15b3583ae1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sm2LQpZ8gZFsxjNpJpy0XQ.png"/></div></div></figure><p id="9298" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这个过程的最后，它将提供一个令牌来使用您的bot发送消息。</p><h1 id="2646" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">第二步。尝试API并创建任务</h1><p id="f3b5" class="pw-post-body-paragraph iv iw hi ix b iy kt ja jb jc ku je jf jg lh ji jj jk li jm jn jo lj jq jr js hb bi translated">发送电报消息的URL结构如下。</p><blockquote class="lp lq lr"><p id="ff37" class="iv iw ls ix b iy iz ja jb jc jd je jf lt jh ji jj lu jl jm jn lv jp jq jr js hb bi translated">https://api.telegram.org/bot<token>/方法_名称</token></p></blockquote><p id="aec0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我已经创建了一个Postman项目来测试我需要的所有调用。你可以用<a class="ae iu" href="https://gist.github.com/pirasalbe/299fdd541ffc694879eee014cfe2768e" rel="noopener ugc nofollow" target="_blank">这个文件</a>导入它们。</p><h2 id="8ea7" class="lw ju hi bd jv lx ly lz jz ma mb mc kd jg md me kh jk mf mg kl jo mh mi kp mj bi translated">获取您的chatId</h2><p id="615f" class="pw-post-body-paragraph iv iw hi ix b iy kt ja jb jc ku je jf jg lh ji jj jk li jm jn jo lj jq jr js hb bi translated"><em class="ls"> chatId </em>参数是任何调用的目标的唯一标识符，因此它总是必需的。</p><p id="d1c7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">要找到你的chatId，你可以通过电报向机器人发送信息。要找到一个群组/频道，你必须在聊天中发送这样的消息:<strong class="ix hj"> /start@bot_username </strong>。</p><p id="35cf" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">发送消息后，您可以使用<a class="ae iu" href="https://core.telegram.org/bots/api#getting-updates" rel="noopener ugc nofollow" target="_blank"> getUpdates </a>调用来查看您的bot收到的消息。</p><p id="3447" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">关键美元。result[]message . chat . id具有您的id的值。</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div class="er es mk"><img src="../Images/ff4c2c9ce0d9aa1e8714f97017c34cbb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*_rQdLpTx55u4KyZ3xoUHjw.png"/></div><figcaption class="iq ir et er es is it bd b be z dx">The URL is <strong class="bd jv"><em class="ml">https://api.telegram.org/bot&lt;token&gt;</em></strong>.</figcaption></figure><h2 id="2593" class="lw ju hi bd jv lx ly lz jz ma mb mc kd jg md me kh jk mf mg kl jo mh mi kp mj bi translated">可用的方法</h2><p id="d7c6" class="pw-post-body-paragraph iv iw hi ix b iy kt ja jb jc ku je jf jg lh ji jj jk li jm jn jo lj jq jr js hb bi translated">机器人可以发送几种信息。你可以在<a class="ae iu" href="https://core.telegram.org/bots/api#available-methods" rel="noopener ugc nofollow" target="_blank">可用方法</a>上阅读它们。</p><p id="499d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我用<em class="ls"> Postman </em>创建了一些<strong class="ix hj"> POST </strong>调用，但是<strong class="ix hj"> GET </strong>调用在Tasker中更容易使用。电报允许两种方法。</p><blockquote class="lp lq lr"><p id="87e2" class="iv iw ls ix b iy iz ja jb jc jd je jf lt jh ji jj lu jl jm jn lv jp jq jr js hb bi translated">Bot API中的所有方法都不区分大小写。我们支持<strong class="ix hj"> GET </strong>和<strong class="ix hj"> POST </strong> HTTP方法。使用<a class="ae iu" href="https://en.wikipedia.org/wiki/Query_string" rel="noopener ugc nofollow" target="_blank"> URL查询字符串</a>或<em class="hi"> application/json </em>或<em class="hi">application/x-www-form-urlencoded</em>或<em class="hi"> multipart/form-data </em>在Bot API请求中传递参数。<br/>成功调用后，将返回一个包含结果的JSON-object。</p></blockquote><h2 id="566d" class="lw ju hi bd jv lx ly lz jz ma mb mc kd jg md me kh jk mf mg kl jo mh mi kp mj bi translated">方法发送消息</h2><p id="5f4d" class="pw-post-body-paragraph iv iw hi ix b iy kt ja jb jc ku je jf jg lh ji jj jk li jm jn jo lj jq jr js hb bi translated">你需要发短信的电话是<a class="ae iu" href="https://core.telegram.org/bots/api#sendmessage" rel="noopener ugc nofollow" target="_blank"> sendMessage </a>。在这里你可以看到如何使用它。</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mm"><img src="../Images/745bd61d62c2b9e376beb30064653cd2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*90QKaEWiVyZYaYJ7DLG61Q.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">The URL is <strong class="bd jv"><em class="ml">https://api.telegram.org/bot&lt;token&gt;</em></strong>.</figcaption></figure><p id="50ac" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">下面的截图展示了如何在Tasker中做同样的事情。</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lk"><img src="../Images/09dcb11e65b9b6562490538802fedf4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QbS_6Uoo2YfRspcTv4Nkhg.png"/></div></div></figure><p id="be37" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="ls"> %telegramToken </em>是<em class="ls"> BotFather </em>给我的令牌，<em class="ls"> %par1 </em>和<em class="ls"> %par2 </em>是我的任务收到的参数。您可以在<a class="ae iu" href="https://tasker.joaoapps.com/userguide/en/help/ah_run_task.html" rel="noopener ugc nofollow" target="_blank">执行任务</a>用户指南中了解更多信息。</p><h2 id="fde2" class="lw ju hi bd jv lx ly lz jz ma mb mc kd jg md me kh jk mf mg kl jo mh mi kp mj bi translated">方法发送位置</h2><p id="bf30" class="pw-post-body-paragraph iv iw hi ix b iy kt ja jb jc ku je jf jg lh ji jj jk li jm jn jo lj jq jr js hb bi translated">您需要发送位置的电话是<a class="ae iu" href="https://core.telegram.org/bots/api#sendlocation" rel="noopener ugc nofollow" target="_blank"> sendLocation </a>。在下面的截图中，你可以看到如何获得你的当前位置，并将其发送到你的聊天。</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mn"><img src="../Images/96550b2f3db61fa6a8ec12d1c02bfe40.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I3W7Uf5BgVlwgIohLYRdiw.png"/></div></div></figure><p id="a68b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="ls"> %telegramToken </em>是<em class="ls"> BotFather </em>给我的令牌，<em class="ls"> %par1 </em>是我的任务收到的参数，其他变量在<a class="ae iu" href="https://tasker.joaoapps.com/userguide/en/help/ah_get_current_location.html" rel="noopener ugc nofollow" target="_blank">获取位置v2 </a>用户指南中解释。</p></div><div class="ab cl mo mp gp mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="hb hc hd he hf"><p id="bbe7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">你可以在这里下载我解释过的<a class="ae iu" href="https://taskernet.com/shares/?user=AS35m8nzU8Z2OxB1WGqHbYHDLajdlq0DG%2B8k8f7L2XfQM3eHbHEAthA2xNvalA2%2FZaJvRZj2roE7ow%3D%3D&amp;id=Project%3ATelegram#" rel="noopener ugc nofollow" target="_blank">的任务。</a></p><h1 id="481b" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">第三步。发挥创造力</h1><p id="80cc" class="pw-post-body-paragraph iv iw hi ix b iy kt ja jb jc ku je jf jg lh ji jj jk li jm jn jo lj jq jr js hb bi translated">现在，您可以创建更多的呼叫，并在任务中使用它们。</p><p id="eddb" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">例如，我编写了这样一个任务，每隔<strong class="ix hj"> m </strong>分钟发送我的位置信息<strong class="ix hj"> n </strong>次。</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mn"><img src="../Images/83eea174f7eb0de86a1486e224c23520.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RqLGwQQZbNlza33r_kqZKw.png"/></div></div></figure><p id="52af" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">左边的任务询问用户消息之间的间隔以及发送次数，然后给我发送一个通知，通知我运行另一个消息，然后开始通知小组。</p><p id="9711" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">右边的任务停止第一个任务并重置变量。</p><p id="13e0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">编辑:</strong>阅读<a class="ae iu" href="https://pirasalbe.medium.com/tasker-and-telegram-integration-live-location-e375c71da882?sk=72487a7f8f525626521ee366aeddaeb9" rel="noopener">这篇文章</a>使用现场位置查看更新版本。</p></div><div class="ab cl mo mp gp mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="hb hc hd he hf"><p id="63f9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">另一个例子是下面的配置文件，当我从我的家庭组收到带有特定关键字的消息时，它会发送我的位置。</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mn"><img src="../Images/b826f034912b0515f8add25856d663de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KiD16FlvEgRS07cmfxUIag.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">On the left, the notification event; on the right, the profile.</figcaption></figure><p id="cff2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在通知事件中，<em class="ls">文本</em>字段是关键字，而<em class="ls">其他文本</em>是组名。我用了<em class="ls">其他文本</em>而不是<em class="ls">标题</em>因为后者是确切的通知标题，而前者在标题中寻找一些单词，Telegram根据消息的发送者改变标题。</p></div></div>    
</body>
</html>