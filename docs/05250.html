<html>
<head>
<title>Deploying Jakarta EE 9 applications with WildFly Bootable JAR</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用WildFly Bootable JAR部署Jakarta EE 9应用程序</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/deploying-jakarta-ee-9-applications-with-wildfly-bootable-jar-a6cd436da7ea?source=collection_archive---------7-----------------------#2021-07-16">https://medium.com/geekculture/deploying-jakarta-ee-9-applications-with-wildfly-bootable-jar-a6cd436da7ea?source=collection_archive---------7-----------------------#2021-07-16</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="221f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">自从WildFly 21发布以来，可以通过新的<code class="du jd je jf jg b">wildfly-jar-maven-plugin</code>将您的应用程序和wildly运行时构建到单个fat JAR文件中。对于开发者来说，通过这个maven插件，它将众所周知的Spring Boot建筑进度带到了Jakarta EE/WildFly world。</p><figure class="ji jj jk jl fd jm er es paragraph-image"><div role="button" tabindex="0" class="jn jo di jp bf jq"><div class="er es jh"><img src="../Images/3e258e779cf32288eff6dc4d13f93e1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9LvWuZ3Nwxhs4SaDBQ9viQ.jpeg"/></div></div><figcaption class="jt ju et er es jv jw bd b be z dx">Photo by <a class="ae jx" href="https://unsplash.com/@robynnexy?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Robynne Hu</a> on <a class="ae jx" href="https://unsplash.com/s/photos/china-landscape?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="50ea" class="jy jz hi bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">先决条件</h1><p id="f278" class="pw-post-body-paragraph if ig hi ih b ii kw ik il im kx io ip iq ky is it iu kz iw ix iy la ja jb jc hb bi translated">确保您已经安装了以下软件。</p><ul class=""><li id="c297" class="lb lc hi ih b ii ij im in iq ld iu le iy lf jc lg lh li lj bi translated">Java 11，OpenJDK或者<a class="ae jx" href="https://adoptopenjdk.net/" rel="noopener ugc nofollow" target="_blank"> AdoptOpenJDK </a></li><li id="897f" class="lb lc hi ih b ii lk im ll iq lm iu ln iy lo jc lg lh li lj bi translated">Apache Maven 3.6以上</li><li id="bd74" class="lb lc hi ih b ii lk im ll iq lm iu ln iy lo jc lg lh li lj bi translated"><a class="ae jx" href="https://www.wildfly.org" rel="noopener ugc nofollow" target="_blank"> WildFly 24.0.0.Final </a>，请下载<em class="lp">雅加达EE 9预告</em>分发</li><li id="fccf" class="lb lc hi ih b ii lk im ll iq lm iu ln iy lo jc lg lh li lj bi translated"><a class="ae jx" href="https://docs.openshift.com/container-platform/4.2/cli_reference/openshift_cli/getting-started-cli.html" rel="noopener ugc nofollow" target="_blank"> OpenShift CLI </a></li></ul><h1 id="5cac" class="jy jz hi bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">构建可引导JAR</h1><p id="8222" class="pw-post-body-paragraph if ig hi ih b ii kw ik il im kx io ip iq ky is it iu kz iw ix iy la ja jb jc hb bi translated">首先添加<code class="du jd je jf jg b">wildfly-jar-maven-plugin</code>配置。</p><pre class="ji jj jk jl fd lq jg lr ls aw lt bi"><span id="5ca7" class="lu jz hi jg b fi lv lw l lx ly">&lt;plugin&gt;<br/>    &lt;groupId&gt;org.wildfly.plugins&lt;/groupId&gt;<br/>    &lt;artifactId&gt;wildfly-jar-maven-plugin&lt;/artifactId&gt;<br/>    &lt;version&gt;${wildfly-jar-maven-plugin.version}&lt;/version&gt;<br/>    &lt;configuration&gt;<br/>        &lt;feature-pack-location&gt;<br/>            wildfly-preview@maven(org.jboss.universe:community-universe)#${wildfly.version}<br/>        &lt;/feature-pack-location&gt;<br/>        &lt;layers&gt;<br/>            &lt;layer&gt;jaxrs&lt;/layer&gt;<br/>        &lt;/layers&gt;<br/>        &lt;plugin-options&gt;<br/>            &lt;jboss-fork-embedded&gt;true&lt;/jboss-fork-embedded&gt;<br/>        &lt;/plugin-options&gt;<br/>    &lt;/configuration&gt;<br/>    &lt;executions&gt;<br/>        &lt;execution&gt;<br/>            &lt;goals&gt;<br/>                &lt;goal&gt;package&lt;/goal&gt;<br/>            &lt;/goals&gt;<br/>        &lt;/execution&gt;<br/>    &lt;/executions&gt;<br/>&lt;/plugin&gt;</span></pre><p id="b71c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="lp"> feature-pack-location </em>定义了将用于构建应用程序的基础设施特性，而<em class="lp"> layers </em>指定了哪些层将被激活</p><blockquote class="lz ma mb"><p id="5994" class="if ig lp ih b ii ij ik il im in io ip mc ir is it md iv iw ix me iz ja jb jc hb bi translated"><em class="hi">关于图层的更多细节，请参考可启动jar文档并阅读</em> <a class="ae jx" href="https://docs.wildfly.org/bootablejar/#wildfly_jar_composing_custom_server_galleon" rel="noopener ugc nofollow" target="_blank"> <em class="hi"> Galleon图层</em> </a> <em class="hi">章节。</em></p><p id="1038" class="if ig lp ih b ii ij ik il im in io ip mc ir is it md iv iw ix me iz ja jb jc hb bi translated"><em class="hi">在feature pack中，我们使用</em> <code class="du jd je jf jg b"><em class="hi">wildfly-preview</em></code> <em class="hi">来使用Jakarta EE 9预览版。</em></p></blockquote><p id="5437" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">运行以下命令来构建应用程序。</p><pre class="ji jj jk jl fd lq jg lr ls aw lt bi"><span id="e737" class="lu jz hi jg b fi lv lw l lx ly">mvn clean package -Pwildfly-bootable</span></pre><p id="659e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">除了maven war插件构建的通用<em class="lp"> war </em>包，还有另外一个带<em class="lp">的jar文件——bootable . jar</em>后缀由<code class="du jd je jf jg b">wildfly-jar-maven-plugin</code>构建。</p><p id="536c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">运行以下命令启动应用程序。</p><pre class="ji jj jk jl fd lq jg lr ls aw lt bi"><span id="0695" class="lu jz hi jg b fi lv lw l lx ly">java -jar target\jakartaee9-starter-boilerplate-bootable.jar</span></pre><p id="e022" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用<code class="du jd je jf jg b">curl</code>命令测试样品终点。</p><pre class="ji jj jk jl fd lq jg lr ls aw lt bi"><span id="5462" class="lu jz hi jg b fi lv lw l lx ly">curl -v <a class="ae jx" href="http://localhost:8080/api/greeting/JakartaEE" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/api/greeting/JakartaEE</a></span></pre><blockquote class="lz ma mb"><p id="7d36" class="if ig lp ih b ii ij ik il im in io ip mc ir is it md iv iw ix me iz ja jb jc hb bi translated"><em class="hi">注意，在可引导jar中，默认情况下，它将应用程序上下文路径设置为root("/")。</em></p></blockquote><h1 id="96da" class="jy jz hi bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">部署到OpenShift</h1><p id="9b7f" class="pw-post-body-paragraph if ig hi ih b ii kw ik il im kx io ip iq ky is it iu kz iw ix iy la ja jb jc hb bi translated"><code class="du jd je jf jg b">wildfly-jar-maven-plugin</code>提供开箱即用的云支持。您可以将它与<code class="du jd je jf jg b">openshift-maven-plugin</code>一起使用，将应用程序从源代码构建到docker映像中，并部署到OpenShift集群。</p><p id="4d7d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用OpenShift有几种选择，详情查看<a class="ae jx" href="https://www.openshift.com" rel="noopener ugc nofollow" target="_blank">官网</a>。</p><p id="35a2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最简单的方法是注册RedHat托管的OpenShift cloud，它提供了一个免费的<em class="lp">开发者沙箱</em>计划。一旦你注册，它将为你提供一个开发人员和管理员视图的交互式Web用户界面。</p><p id="1747" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要使用<code class="du jd je jf jg b">openshift-maven-plugin</code>，你必须先登录。在OpenShift首页，点击<em class="lp">问题(？)</em>图标按钮，并点击<em class="lp">命令行工具</em>菜单项。在打开的页面中复制<em class="lp"> oc登录命令行</em>。更多详情，请参考<a class="ae jx" href="https://developers.redhat.com/blog/2021/04/21/access-your-developer-sandbox-for-red-hat-openshift-from-the-command-line#" rel="noopener ugc nofollow" target="_blank">本指南</a>。</p><p id="fc5b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">假设你已经安装了<a class="ae jx" href="https://docs.openshift.com/container-platform/4.2/cli_reference/openshift_cli/getting-started-cli.html" rel="noopener ugc nofollow" target="_blank"> OpenShift CLI </a>，打开一个终端，粘贴命令登录到OpenShift cloud。</p><pre class="ji jj jk jl fd lq jg lr ls aw lt bi"><span id="5a5a" class="lu jz hi jg b fi lv lw l lx ly">oc login ...</span></pre><p id="f4f9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来让我们配置<code class="du jd je jf jg b">wildfly-jar-maven-plugin</code>和<code class="du jd je jf jg b">openshift-maven-plugin</code>。</p><pre class="ji jj jk jl fd lq jg lr ls aw lt bi"><span id="6f6d" class="lu jz hi jg b fi lv lw l lx ly">&lt;properties&gt;<br/>    &lt;jkube.generator.from&gt;registry.redhat.io/ubi8/openjdk-11:latest&lt;/jkube.generator.from&gt;<br/>&lt;/properties&gt;<br/>&lt;build&gt;<br/>    &lt;plugins&gt;<br/>        &lt;plugin&gt;<br/>            &lt;groupId&gt;org.wildfly.plugins&lt;/groupId&gt;<br/>            &lt;artifactId&gt;wildfly-jar-maven-plugin&lt;/artifactId&gt;<br/>            &lt;version&gt;${wildfly-jar-maven-plugin.version}&lt;/version&gt;<br/>            &lt;configuration&gt;<br/>                &lt;feature-pack-location&gt;<br/>                    wildfly-preview@maven(org.jboss.universe:community-universe)#${wildfly.version}<br/>                &lt;/feature-pack-location&gt;<br/>                &lt;layers&gt;<br/>                    &lt;layer&gt;cloud-server&lt;/layer&gt;<br/>                &lt;/layers&gt;<br/>                &lt;excluded-layers&gt;<br/>                    &lt;layer&gt;deployment-scanner&lt;/layer&gt;<br/>                &lt;/excluded-layers&gt;<br/>                &lt;cloud/&gt;<br/>                &lt;plugin-options&gt;<br/>                    &lt;jboss-fork-embedded&gt;true&lt;/jboss-fork-embedded&gt;<br/>                &lt;/plugin-options&gt;<br/>            &lt;/configuration&gt;<br/>            &lt;executions&gt;<br/>                &lt;execution&gt;<br/>                    &lt;goals&gt;<br/>                        &lt;goal&gt;package&lt;/goal&gt;<br/>                    &lt;/goals&gt;<br/>                &lt;/execution&gt;<br/>            &lt;/executions&gt;<br/>        &lt;/plugin&gt;<br/>        &lt;plugin&gt;<br/>            &lt;groupId&gt;org.eclipse.jkube&lt;/groupId&gt;<br/>            &lt;artifactId&gt;openshift-maven-plugin&lt;/artifactId&gt;<br/>            &lt;version&gt;${openshift-maven-plugin.version}&lt;/version&gt;<br/>            &lt;executions&gt;<br/>                &lt;execution&gt;<br/>                    &lt;goals&gt;<br/>                        &lt;goal&gt;resource&lt;/goal&gt;<br/>                        &lt;goal&gt;build&lt;/goal&gt;<br/>                    &lt;/goals&gt;<br/>                &lt;/execution&gt;<br/>            &lt;/executions&gt;<br/>            &lt;configuration&gt;<br/>                &lt;enricher&gt;<br/>                    &lt;config&gt;<br/>                        &lt;jkube-service&gt;<br/>                            &lt;type&gt;NodePort&lt;/type&gt;<br/>                        &lt;/jkube-service&gt;<br/>                    &lt;/config&gt;<br/>                &lt;/enricher&gt;<br/>            &lt;/configuration&gt;<br/>        &lt;/plugin&gt;<br/>    &lt;/plugins&gt;<br/>&lt;/build&gt;</span></pre><p id="bbf0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里我们使用一个<em class="lp">云服务器</em>层来代替之前的<em class="lp"> jaxrs </em>，并添加了另一个<code class="du jd je jf jg b">openshift-maven-plugin</code>配置。</p><blockquote class="lz ma mb"><p id="7c94" class="if ig lp ih b ii ij ik il im in io ip mc ir is it md iv iw ix me iz ja jb jc hb bi translated"><em class="hi">更多关于OpenShift maven插件的细节，请参见</em> <a class="ae jx" href="https://www.eclipse.org/jkube/docs/openshift-maven-plugin" rel="noopener ugc nofollow" target="_blank"> <em class="hi"> Eclipse JKube文档</em> </a> <em class="hi">。</em></p></blockquote><p id="a97b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">运行以下命令将应用程序部署到OpenShift cloud。</p><pre class="ji jj jk jl fd lq jg lr ls aw lt bi"><span id="ec76" class="lu jz hi jg b fi lv lw l lx ly">mvn clean oc:deploy -Pwildfly-openshift</span></pre><p id="f8da" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">完成后，您可以通过下面的命令观察pod节点。</p><pre class="ji jj jk jl fd lq jg lr ls aw lt bi"><span id="c3eb" class="lu jz hi jg b fi lv lw l lx ly">oc get pods -w</span></pre><p id="e41e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">进入OpenShift Web UI，点击左侧窗格中的<em class="lp">项目</em>，就可以看到所有相关的资源，包括Pod节点、服务、路由等。</p><p id="c151" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">点击<em class="lp">窗格</em>，选择<em class="lp">jakartaee 9-starter-boilerplate-1-xxxxx</em>，然后切换到<em class="lp">终端</em>选项卡，尝试使用<code class="du jd je jf jg b">curl</code>来检查我们的应用程序是否工作正常。</p><pre class="ji jj jk jl fd lq jg lr ls aw lt bi"><span id="8a6e" class="lu jz hi jg b fi lv lw l lx ly">curl -v <a class="ae jx" href="http://localhost:8080/api/greeting/JakartaEE" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/api/greeting/JakartaEE</a></span></pre><p id="8ac8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">结果类似于下面的屏幕。</p><figure class="ji jj jk jl fd jm er es paragraph-image"><div role="button" tabindex="0" class="jn jo di jp bf jq"><div class="er es mf"><img src="../Images/41f281a5a1cd35ab0fbb481d57a12c24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*UcdDwa6Y_-jf1s4I.png"/></div></div></figure><p id="a723" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">回到<em class="lp">项目</em>视图，点击<em class="lp">路线</em>，选择<em class="lp">jakartaee 9-starter-样板</em>。在详细页面中，您可以找到这个已部署应用程序的外部URL(或者您可以通过下面的命令获得它)。</p><p id="93d2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">尝试通过外部URL访问示例API端点。</p><pre class="ji jj jk jl fd lq jg lr ls aw lt bi"><span id="e169" class="lu jz hi jg b fi lv lw l lx ly">$ oc get route jakartaee9-starter-boilerplate -o jsonpath="{.spec.host}"<br/>jakartaee9-starter-boilerplate-hantsy-dev.apps.sandbox-m2.ll9k.p1.openshiftapps.com</span><span id="777d" class="lu jz hi jg b fi mg lw l lx ly">$ curl -v <a class="ae jx" href="http://jakartaee9-starter-boilerplate-hantsy-dev.apps.sandbox-m2.ll9k.p1.openshiftapps.com/api/greeting/JakartaEE" rel="noopener ugc nofollow" target="_blank">http://jakartaee9-starter-boilerplate-hantsy-dev.apps.sandbox-m2.ll9k.p1.openshiftapps.com/api/greeting/JakartaEE</a></span><span id="f02b" class="lu jz hi jg b fi mg lw l lx ly">&gt; GET /api/greeting/JakartaEE HTTP/1.1<br/>&gt; Host: jakartaee9-starter-boilerplate-hantsy-dev.apps.sandbox-m2.ll9k.p1.openshiftapps.com<br/>&gt; User-Agent: curl/7.55.1<br/>&gt; Accept: */*<br/>&gt;<br/>&lt; HTTP/1.1 200 OK<br/>&lt; content-type: application/json<br/>&lt; content-length: 66<br/>&lt; date: Thu, 15 Jul 2021 14:02:46 GMT<br/>&lt; set-cookie: 8f1aeb5fdab055810cd99f63982ad17b=1540c81cbcc1728a7c020191c74f5fa7; path=/; HttpOnly<br/>&lt; cache-control: private<br/>&lt;<br/>{"message":"Say Hello to JakartaEE at 2021-07-15T14:02:46.571707"}</span></pre><h1 id="615a" class="jy jz hi bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">对可引导JAR运行Arquillian测试</h1><p id="a2e7" class="pw-post-body-paragraph if ig hi ih b ii kw ik il im kx io ip iq ky is it iu kz iw ix iy la ja jb jc hb bi translated">正如在<a class="ae jx" href="https://itnext.io/testing-jakarta-ee-9-applications-with-arquillian-and-wildfly-cd108eec57e2" rel="noopener ugc nofollow" target="_blank">上一篇文章</a>中提到的，WildFly Arqullian项目包括一个<em class="lp">可引导</em>容器适配器，用于测试可引导jar。</p><p id="a7ac" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在项目<em class="lp"> pom.xml </em>文件中添加以下依赖项。</p><pre class="ji jj jk jl fd lq jg lr ls aw lt bi"><span id="3459" class="lu jz hi jg b fi lv lw l lx ly">&lt;dependency&gt;<br/>    &lt;groupId&gt;org.wildfly.arquillian&lt;/groupId&gt;<br/>    &lt;artifactId&gt;wildfly-arquillian-container-bootable&lt;/artifactId&gt;<br/>    &lt;version&gt;${wildfly-arquillian.version}&lt;/version&gt;<br/>    &lt;scope&gt;test&lt;/scope&gt;<br/>&lt;/dependency&gt;<br/>// jerseys are omitted.</span></pre><p id="a9a4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">添加<code class="du jd je jf jg b">wildfly-jar-maven-plugin</code>构建一个<em class="lp">可引导的</em> fat JAR用于测试目的。</p><pre class="ji jj jk jl fd lq jg lr ls aw lt bi"><span id="b214" class="lu jz hi jg b fi lv lw l lx ly">&lt;plugin&gt;<br/>    &lt;groupId&gt;org.wildfly.plugins&lt;/groupId&gt;<br/>    &lt;artifactId&gt;wildfly-jar-maven-plugin&lt;/artifactId&gt;<br/>    &lt;version&gt;${wildfly-jar-maven-plugin.version}&lt;/version&gt;<br/>    &lt;configuration&gt;<br/>        &lt;feature-pack-location&gt;<br/>            wildfly-preview@maven(org.jboss.universe:community-universe)#${wildfly.version}<br/>        &lt;/feature-pack-location&gt;<br/>        &lt;layers&gt;<br/>            &lt;layer&gt;jaxrs&lt;/layer&gt;<br/>            &lt;layer&gt;management&lt;/layer&gt;<br/>        &lt;/layers&gt;<br/>        &lt;excluded-layers&gt;<br/>            &lt;layer&gt;deployment-scanner&lt;/layer&gt;<br/>        &lt;/excluded-layers&gt;<br/>        &lt;plugin-options&gt;<br/>            &lt;jboss-fork-embedded&gt;true&lt;/jboss-fork-embedded&gt;<br/>        &lt;/plugin-options&gt;<br/>    &lt;/configuration&gt;<br/>    &lt;executions&gt;<br/>        &lt;execution&gt;<br/>            &lt;goals&gt;<br/>                &lt;goal&gt;package&lt;/goal&gt;<br/>            &lt;/goals&gt;<br/>        &lt;/execution&gt;<br/>    &lt;/executions&gt;<br/>&lt;/plugin&gt;</span></pre><p id="3562" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在<em class="lp"> arquillian.xml </em>中为这个适配器创建一个新的<em class="lp">容器</em>。</p><pre class="ji jj jk jl fd lq jg lr ls aw lt bi"><span id="a184" class="lu jz hi jg b fi lv lw l lx ly">&lt;container qualifier="wildfly-bootable-jar" default="true"&gt;<br/>    &lt;configuration&gt;<br/>        &lt;property name="jarFile"&gt;${bootable.jar}&lt;/property&gt;<br/>        &lt;property name="allowConnectingToRunningServer"&gt;false&lt;/property&gt;<br/>        &lt;property name="managementAddress"&gt;127.0.0.1&lt;/property&gt;<br/>        &lt;property name="managementPort"&gt;9990&lt;/property&gt;<br/>        &lt;property name="waitForPorts"&gt;9990&lt;/property&gt;<br/>        &lt;property name="waitForPortsTimeoutInSeconds"&gt;8&lt;/property&gt;<br/>    &lt;/configuration&gt;<br/>&lt;/container&gt;</span></pre><p id="cd8a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在maven failsafe插件的配置中定义一个系统范围的属性<em class="lp"> bootable.jar </em>。</p><pre class="ji jj jk jl fd lq jg lr ls aw lt bi"><span id="dcfd" class="lu jz hi jg b fi lv lw l lx ly">&lt;plugin&gt;<br/>     &lt;artifactId&gt;maven-failsafe-plugin&lt;/artifactId&gt;<br/>     &lt;version&gt;${maven-failsafe-plugin.version}&lt;/version&gt;<br/>     &lt;configuration&gt;<br/>         &lt;systemPropertyVariables&gt;<br/>             &lt;bootable.jar&gt;${project.build.directory}/${project.artifactId}-bootable.jar<br/>             &lt;/bootable.jar&gt;<br/>             &lt;arquillian.launch&gt;wildfly-bootable-jar&lt;/arquillian.launch&gt;<br/>             &lt;java.util.logging.manager&gt;org.jboss.logmanager.LogManager&lt;/java.util.logging.manager&gt;<br/>         &lt;/systemPropertyVariables&gt;<br/>     &lt;/configuration&gt;<br/>&lt;/plugin&gt;</span></pre><p id="179c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在使用下面的命令运行测试。</p><pre class="ji jj jk jl fd lq jg lr ls aw lt bi"><span id="79ff" class="lu jz hi jg b fi lv lw l lx ly">mvn clean verify -Parq-wildfly-bootable-jar</span></pre><p id="9d2d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从我的Github 中获取<a class="ae jx" href="https://github.com/hantsy/jakartaee9-starter-boilerplate" rel="noopener ugc nofollow" target="_blank">示例代码。</a></p></div></div>    
</body>
</html>