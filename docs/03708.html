<html>
<head>
<title>Introducing Hook Router: a New Routing Library for React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Hook路由器简介:React的新路由库</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/hook-router-new-rouging-for-react-js-8f53f540bb4f?source=collection_archive---------25-----------------------#2021-06-14">https://medium.com/geekculture/hook-router-new-rouging-for-react-js-8f53f540bb4f?source=collection_archive---------25-----------------------#2021-06-14</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/d22eade14e2ea08662057a3cc2c41af4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1236/format:webp/1*0TzBQWyOBjBY7w_XzTKlzQ.png"/></div><figcaption class="im in et er es io ip bd b be z dx">hookrouter.js</figcaption></figure><h1 id="0121" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">介绍</h1><p id="ebfe" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">React.js不支持开箱即用。React Router是一个非常流行的库，它与React.js一起使用来实现路由。</p><p id="5c06" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">Hook Router是react.js中启用路由的新库，它是围绕react钩子构建的。它非常简单小巧。它附带了一个简单而整洁的文档。一个新的react开发人员很容易用它弄脏手。</p><p id="6fdd" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">在本课中，我将使用<code class="du kr ks kt ku b">hookrouter.js</code>深入研究react路由。我们将创建一些带有导航链接的路由。</p><h1 id="824d" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">概观</h1><p id="3b71" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">举个例子比较好理解。为了容易理解，我尽量使它简单。我们演示了一个react应用程序，它由四个路径组成:<strong class="jq hj"> home </strong>、<strong class="jq hj"> about </strong>、<strong class="jq hj"> users </strong>和<strong class="jq hj"> user-detail </strong>。我们还在<strong class="jq hj"> <em class="kv">用户</em> </strong>和<strong class="jq hj"> <em class="kv">用户详细信息</em> </strong>页面中演示了<strong class="jq hj">动态路由</strong>。</p><p id="94f0" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">让我们使用流行的命令行<code class="du kr ks kt ku b">npx</code>创建一个react.js应用程序，并安装<code class="du kr ks kt ku b">hookrouter</code>。</p><pre class="kw kx ky kz fd la ku lb lc aw ld bi"><span id="c6ad" class="le ir hi ku b fi lf lg l lh li">npx create-react-app routing-demo<br/>cd routing-demo<br/>npm i -S hookrouter</span></pre><p id="f076" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">我们在src文件夹中创建以下组件:</p><ol class=""><li id="15cf" class="lj lk hi jq b jr km jv kn jz ll kd lm kh ln kl lo lp lq lr bi translated">Menu:保存菜单列表并使用</li><li id="d3d8" class="lj lk hi jq b jr ls jv lt jz lu kd lv kh lw kl lo lp lq lr bi translated">Home:是主页。</li><li id="148d" class="lj lk hi jq b jr ls jv lt jz lu kd lv kh lw kl lo lp lq lr bi translated">关于:是关于页面。</li><li id="5619" class="lj lk hi jq b jr ls jv lt jz lu kd lv kh lw kl lo lp lq lr bi translated">Users:显示从API读取的用户列表。</li><li id="400f" class="lj lk hi jq b jr ls jv lt jz lu kd lv kh lw kl lo lp lq lr bi translated">UserDetail:显示单个用户的详细信息，从API中读取。</li><li id="3ff4" class="lj lk hi jq b jr ls jv lt jz lu kd lv kh lw kl lo lp lq lr bi translated">NotFound:是当url不匹配任何路由时应用程序转到的页面。</li></ol><pre class="kw kx ky kz fd la ku lb lc aw ld bi"><span id="b506" class="le ir hi ku b fi lf lg l lh li">/components/Menu.js<br/>/pages/Home.js<br/>/pages/About.js<br/>/pages/NotFound.js<br/>/pages/Users.js<br/>/pages/UserDetail.js</span></pre><p id="1121" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">我们删除src文件夹中的以下文件:</p><pre class="kw kx ky kz fd la ku lb lc aw ld bi"><span id="23e3" class="le ir hi ku b fi lf lg l lh li">logo.svg<br/>App.test.js<br/>App.css</span></pre><blockquote class="lx ly lz"><p id="75fc" class="jo jp kv jq b jr km jt ju jv kn jx jy ma ko kb kc mb kp kf kg mc kq kj kk kl hb bi translated">我们还需要删除index.js中react的严格模式，否则点击<code class="du kr ks kt ku b">&lt;A href="/about" /&gt;</code>链接不会重定向到about页面。</p></blockquote><h1 id="59a4" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">按指定路线发送</h1><p id="9f3f" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">我们将路由定义为一个普通的javascript对象。每个属性名是路由URL，值是react组件(在我们的例子中是routes: <strong class="jq hj"> home </strong>和<strong class="jq hj"> about </strong>)。</p><pre class="kw kx ky kz fd la ku lb lc aw ld bi"><span id="987f" class="le ir hi ku b fi lf lg l lh li">const routes = {<br/>  <strong class="ku hj">"/": () =&gt; &lt;Home /&gt;,</strong><br/>  "/about": () =&gt; &lt;About /&gt;,<br/>};</span></pre><p id="223b" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">在App组件内部，我们将路由从<code class="du kr ks kt ku b">reactrouter</code>库传递给<code class="du kr ks kt ku b">useRouter()</code> <strong class="jq hj">钩子</strong>，以将路由注册到它们对应的组件。</p><p id="fe59" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">我们从App组件返回一个<code class="du kr ks kt ku b">match</code> ed route否则<code class="du kr ks kt ku b">NotFound</code>页面如下:<code class="du kr ks kt ku b"><strong class="jq hj"><em class="kv">{ match || &lt;NotFound /&gt; }</em></strong></code> <strong class="jq hj"> <em class="kv">。</em> </strong></p><pre class="kw kx ky kz fd la ku lb lc aw ld bi"><span id="acd4" class="le ir hi ku b fi lf lg l lh li"><strong class="ku hj"><em class="kv">import { useRoutes } from "hookrouter";</em></strong></span><span id="bca1" class="le ir hi ku b fi md lg l lh li"><strong class="ku hj">const routes = {...};</strong></span><span id="6cfd" class="le ir hi ku b fi md lg l lh li">function App() {</span><span id="63f5" class="le ir hi ku b fi md lg l lh li">  <strong class="ku hj"><em class="kv">const match = useRoutes(routes);</em></strong></span><span id="08fb" class="le ir hi ku b fi md lg l lh li">  return (<br/>    &lt;div className="App"&gt;<br/>      &lt;Menu /&gt;<br/>      &lt;div className="container"&gt;<strong class="ku hj"><em class="kv">{match || &lt;NotFound /&gt;}</em></strong>&lt;/div&gt;<br/>    &lt;/div&gt;<br/>  );</span><span id="174d" class="le ir hi ku b fi md lg l lh li">}</span></pre><h2 id="3c6e" class="le ir hi bd is me mf mg iw mh mi mj ja jz mk ml je kd mm mn ji kh mo mp jm mq bi translated">链接</h2><p id="3741" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">链接用于在页面之间导航。在菜单组件中，我们定义了链接。使用<code class="du kr ks kt ku b">hookrouter</code>库中的<code class="du kr ks kt ku b">A</code>组件定义链接。</p><pre class="kw kx ky kz fd la ku lb lc aw ld bi"><span id="1f3d" class="le ir hi ku b fi lf lg l lh li"><strong class="ku hj"><em class="kv">import { A } from "hookrouter";</em></strong></span><span id="01bb" class="le ir hi ku b fi md lg l lh li">const Menu = () =&gt; {<br/>  return (<br/>    &lt;nav className="App-Header"&gt;</span><span id="7ae7" class="le ir hi ku b fi md lg l lh li"><strong class="ku hj"><em class="kv">      &lt;A href="/"&gt;Home&lt;/A&gt;<br/>      &lt;A href="/about"&gt;About&lt;/A&gt;</em></strong></span><span id="5a14" class="le ir hi ku b fi md lg l lh li">    &lt;/nav&gt;<br/>  );<br/>};</span></pre><h1 id="e3c9" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">动态路线</h1><p id="f93c" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">路由最重要的特性之一是处理动态路由。有时我们需要在URL中有一个动态值，比如一个ID，并基于它从服务器获取数据或显示一些信息。</p><p id="d8be" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">我们通过例子来演示这个特性。我们显示了从后端服务器获取的用户列表。我们还为每个用户添加了一个按钮来显示用户的详细信息。在链接中，我们应该有一个动态值，如ID，以知道显示哪个用户。</p><blockquote class="lx ly lz"><p id="f8b4" class="jo jp kv jq b jr km jt ju jv kn jx jy ma ko kb kc mb kp kf kg mc kq kj kk kl hb bi translated">在路由中，通过在URL部分的开头添加冒号:来定义参数。</p></blockquote><ol class=""><li id="941a" class="lj lk hi jq b jr km jv kn jz ll kd lm kh ln kl lo lp lq lr bi translated">增加两条额外路线:<code class="du kr ks kt ku b">/users</code>和<code class="du kr ks kt ku b"><strong class="jq hj">/users/:id/detail</strong></code> <strong class="jq hj">。</strong></li><li id="c215" class="lj lk hi jq b jr ls jv lt jz lu kd lv kh lw kl lo lp lq lr bi translated">增加两个组件:<code class="du kr ks kt ku b">Users</code>和<code class="du kr ks kt ku b">UserDetail</code>。</li><li id="36c1" class="lj lk hi jq b jr ls jv lt jz lu kd lv kh lw kl lo lp lq lr bi translated">在<code class="du kr ks kt ku b">UserDetail</code>路线中将<code class="du kr ks kt ku b">id</code>作为参数传递。</li></ol><pre class="kw kx ky kz fd la ku lb lc aw ld bi"><span id="474b" class="le ir hi ku b fi lf lg l lh li">const routes = {<br/>  .....<br/>  "/users": () =&gt; &lt;Users /&gt;,<br/>  <strong class="ku hj">"/users/:id/detail": ({ id }) =&gt; &lt;UserDetail id={id} /&gt;,</strong><br/>};</span></pre><h2 id="5908" class="le ir hi bd is me mf mg iw mh mi mj ja jz mk ml je kd mm mn ji kh mo mp jm mq bi translated">用户页面</h2><p id="a027" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">用户页面显示从<a class="ae mr" href="https://jsonplaceholder.typicode.com/users" rel="noopener ugc nofollow" target="_blank"> {JSON}占位符</a>中读取的用户列表。每个用户都有一个指向用户详细信息的链接，URL包含用户的ID。</p><pre class="kw kx ky kz fd la ku lb lc aw ld bi"><span id="b73d" class="le ir hi ku b fi lf lg l lh li">import { A } from "hookrouter";</span><span id="9bfc" class="le ir hi ku b fi md lg l lh li">const Users = () =&gt; {<br/>  const [users, setUsers] = useState([]);</span><span id="43b2" class="le ir hi ku b fi md lg l lh li">  useEffect(() =&gt; {<br/>    fetch("https://jsonplaceholder.typicode.com/users")<br/>    .then((res) =&gt; res.json())<br/>    .then((result) =&gt; setUsers(result));<br/>  }, []);</span><span id="4518" class="le ir hi ku b fi md lg l lh li">  return (<br/>    &lt;table id="users"&gt;<br/>      &lt;thead&gt;<br/>        &lt;tr&gt;<br/>          &lt;th&gt;#&lt;/th&gt;<br/>          &lt;th&gt;Name&lt;/th&gt;<br/>          &lt;th&gt;&lt;/th&gt;<br/>        &lt;/tr&gt;<br/>      &lt;/thead&gt;<br/>      &lt;tbody&gt;<br/>        {users.map((user) =&gt; (<br/>          &lt;tr key={user.id}&gt;<br/>            &lt;td&gt;{user.id}&lt;/td&gt;<br/>            &lt;td&gt;{user.name}&lt;/td&gt;<br/>            &lt;td&gt;<br/>              <strong class="ku hj"><em class="kv">&lt;A href={`/users/${user.id}/detail`}&gt;Details&lt;/A&gt;</em></strong><br/>            &lt;/td&gt;<br/>          &lt;/tr&gt;<br/>        ))}<br/>      &lt;/tbody&gt;<br/>    &lt;/table&gt;<br/>  );<br/>};</span></pre><h2 id="6c6d" class="le ir hi bd is me mf mg iw mh mi mj ja jz mk ml je kd mm mn ji kh mo mp jm mq bi translated">用户详细信息页面</h2><p id="6044" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">用户的ID被传递到用户详细信息页面。ID用于从后端服务器获取用户详细信息:<a class="ae mr" href="https://jsonplaceholder.typicode.com/users/1" rel="noopener ugc nofollow" target="_blank"> {JSON}占位符</a>。</p><pre class="kw kx ky kz fd la ku lb lc aw ld bi"><span id="d7a0" class="le ir hi ku b fi lf lg l lh li">const UserDetail = (<strong class="ku hj"><em class="kv">{ id }</em></strong>) =&gt; {<br/>  const [user, setUser] = useState({});</span><span id="a746" class="le ir hi ku b fi md lg l lh li">  useEffect(() =&gt; {<br/>    fetch(`<strong class="ku hj"><em class="kv">https://jsonplaceholder.typicode.com/users/${id}</em></strong>`)<br/>    .then((res) =&gt; res.json())<br/>    .then((result) =&gt; setUser(result))<br/>  }, [id]);</span><span id="f928" class="le ir hi ku b fi md lg l lh li">  return (<br/>    &lt;div&gt;<br/>      &lt;h3&gt;User Detail:&lt;/h3&gt;<br/>      &lt;p&gt;ID: {user.id}&lt;/p&gt;<br/>      &lt;p&gt;Name: {user.name}&lt;/p&gt;<br/>      &lt;p&gt;Username: {user.username}&lt;/p&gt;<br/>      &lt;p&gt;Phone: {user.phone}&lt;/p&gt;<br/>      &lt;p&gt;Email: {user.email}&lt;/p&gt;<br/>      &lt;p&gt;Company: {user.company?.name}&lt;/p&gt;<br/>    &lt;/div&gt;<br/>  );<br/>};</span></pre><h1 id="daa5" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">结论</h1><p id="1c5a" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">使用<code class="du kr ks kt ku b">hookrouter.</code>在react.js应用程序中启用路由非常容易，我试图介绍路由的基础知识，但是还有更多库的特性没有介绍，比如<code class="du kr ks kt ku b">redirecting</code>和<code class="du kr ks kt ku b">programmatic navigation.</code></p><p id="f9e3" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">完整的源代码，请访问这个<a class="ae mr" href="https://github.com/bewarusman/hookrouter-demo" rel="noopener ugc nofollow" target="_blank"> git库</a>。</p></div></div>    
</body>
</html>