<html>
<head>
<title>System Design Basics: API Gateway</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">系统设计基础:API网关</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/system-design-basics-api-gateway-6e3387698f92?source=collection_archive---------2-----------------------#2022-09-12">https://medium.com/geekculture/system-design-basics-api-gateway-6e3387698f92?source=collection_archive---------2-----------------------#2022-09-12</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><h1 id="0416" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">API网关</h1><p id="cf73" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">API网关是一个API管理工具，位于客户端和一组后端服务之间。</p><p id="502b" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">根据NginX的说法，API网关接收来自客户端的所有API调用，然后通过请求路由、组合和协议翻译将它们路由到适当的微服务。通常，它通过调用多个微服务并汇总结果来处理请求，以确定最佳路径。它可以在web协议和内部使用的对web不友好的协议之间进行转换。</p><p id="1060" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">API网关是组织由微服务架构处理的请求的指挥者，以便为用户创建简化的体验。它是一个翻译器，将客户的许多请求转化为一个请求，以减少客户和应用程序之间的往返次数。API网关设置在微服务的前面，并成为应用程序执行的每个新请求的入口点。它简化了客户端实现和微服务应用程序。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es kg"><img src="../Images/8c7fa66191f12e5809bc9f25f2efae3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OUYfsjIMyHzOfl5VXV25kQ.png"/></div></div></figure></div><div class="ab cl ks kt gp ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="hb hc hd he hf"><h1 id="ade5" class="if ig hi bd ih ii kz ik il im la io ip iq lb is it iu lc iw ix iy ld ja jb jc bi translated">为什么要使用API网关？</h1><p id="56db" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">API网关提供以下功能:</p><ul class=""><li id="f9f8" class="le lf hi jf b jg kb jk kc jo lg js lh jw li ka lj lk ll lm bi translated">通过身份验证，它可以防止过度使用和滥用您的API</li><li id="2f92" class="le lf hi jf b jg ln jk lo jo lp js lq jw lr ka lj lk ll lm bi translated">可以在网关上配置分析和监控工具。</li><li id="be45" class="le lf hi jf b jg ln jk lo jo lp js lq jw lr ka lj lk ll lm bi translated">它为外部用户提供单一端点，而不管系统中运行多少微服务。</li><li id="99b3" class="le lf hi jf b jg ln jk lo jo lp js lq jw lr ka lj lk ll lm bi translated">只要契约保持不变，在重构、添加/删除资源等情况下，用户不需要改变任何东西。</li><li id="f4c3" class="le lf hi jf b jg ln jk lo jo lp js lq jw lr ka lj lk ll lm bi translated">它还充当流量控制器，为所有请求形成一个单一的入口点。</li></ul></div><div class="ab cl ks kt gp ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="hb hc hd he hf"><h1 id="315b" class="if ig hi bd ih ii kz ik il im la io ip iq lb is it iu lc iw ix iy ld ja jb jc bi translated">API管理系统</h1><p id="679b" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">根据RedHat的说法，API管理指的是分发、控制和分析API的过程，这些API连接整个企业和整个云的应用程序和数据。API管理的目标是允许创建API或使用其他API的组织监控活动，并确保使用API的开发人员和应用程序的需求得到满足。</p><p id="4443" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">它通常具有以下功能:</p><ul class=""><li id="ca03" class="le lf hi jf b jg kb jk kc jo lg js lh jw li ka lj lk ll lm bi translated">开发者门户:这包括API文档、测试沙箱、入职手册等。这有助于其他开发人员使用他们的API</li><li id="c6c6" class="le lf hi jf b jg ln jk lo jo lp js lq jw lr ka lj lk ll lm bi translated">API网关:这用于向外部用户提供单一的抽象层</li><li id="cde2" class="le lf hi jf b jg ln jk lo jo lp js lq jw lr ka lj lk ll lm bi translated">API生命周期管理:管理所有API的设计和实现，直到它被弃用。</li><li id="1b84" class="le lf hi jf b jg ln jk lo jo lp js lq jw lr ka lj lk ll lm bi translated">分析:这有助于从API的使用和性能中获得洞察力，这可以在设计改进和扩展时用作有价值的信息。</li><li id="8f93" class="le lf hi jf b jg ln jk lo jo lp js lq jw lr ka lj lk ll lm bi translated">货币化:这有助于从你的API中获得收入。合同可以根据多个参数来定义，如规模、用途、用户数量等。</li></ul></div><div class="ab cl ks kt gp ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="hb hc hd he hf"><h1 id="8400" class="if ig hi bd ih ii kz ik il im la io ip iq lb is it iu lc iw ix iy ld ja jb jc bi translated">API网关的缺点</h1><ol class=""><li id="b90b" class="le lf hi jf b jg jh jk jl jo ls js lt jw lu ka lv lk ll lm bi translated"><strong class="jf hj">延迟</strong>:架构中增加的网络跳导致了整个系统延迟的增加。</li><li id="1a6b" class="le lf hi jf b jg ln jk lo jo lp js lq jw lr ka lv lk ll lm bi translated"><strong class="jf hj"> SPoF </strong>:作为所有请求的单一入口点的API网关充当单点故障(SPoF)。通过使用多个API网关并使用负载平衡器和弹性IP来分割调用，可以在某种程度上缓解这一问题。</li><li id="a337" class="le lf hi jf b jg ln jk lo jo lp js lq jw lr ka lv lk ll lm bi translated"><strong class="jf hj">增加的复杂性</strong>:当终端用户可能是各种类型的，比如IoS、Android、Web等，API网关可能会变得复杂。在这种情况下，我们可以为不同的入口点添加多个配置。这种架构也被称为“后端对前端”模式。</li></ol></div><div class="ab cl ks kt gp ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="hb hc hd he hf"><h1 id="b721" class="if ig hi bd ih ii kz ik il im la io ip iq lb is it iu lc iw ix iy ld ja jb jc bi translated">孔vs亚马逊API网关</h1><p id="b306" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">Kong和Amazon API Gateway是市场上最流行的两种API网关。</p><p id="d96f" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">AWS将<strong class="jf hj">亚马逊API网关</strong>描述为“<em class="lw">创建、发布、维护、监控和保护任何规模的API</em>”。Amazon API Gateway处理接受和处理多达数十万个并发API调用所涉及的所有任务，包括流量管理、授权和访问控制、监控和API版本管理。</p><p id="c8c3" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">孔</strong>详细为“<em class="lw">开源微服务&amp; API管理层</em>”。Kong是一个可扩展的、开源的API层(也称为API网关，或API中间件)&amp;建立在NGINX之上。Kong控制第4层和第7层流量，并通过插件进行扩展，插件提供核心平台之外的额外功能和服务。</p><p id="f456" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">亚马逊API Gateway在学习曲线方面有优势，因为它是一项完全托管的服务。如果你在AWS生态系统中，它也非常适合。另一方面，Kong对定制更开放，因为它是开源的，很容易集成到L4和L7上的插件和附加层中。在Gartner的评论集中，两者都得到了很高的评价。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es lx"><img src="../Images/beb706fb474be56c85738b04bc9b140f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FJ_QHitmWkp80xgyVH2vWg.png"/></div></div></figure></div><div class="ab cl ks kt gp ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="hb hc hd he hf"><h1 id="07f6" class="if ig hi bd ih ii kz ik il im la io ip iq lb is it iu lc iw ix iy ld ja jb jc bi translated">结论</h1><p id="d6d4" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">对于任何拥有多个微服务、不同类型的用户和向外部世界公开的功能的架构来说，API Gateway都是一个很有价值的部分。这对于扩展您的系统至关重要，但如果使用不当，也会成为瓶颈和单点故障。</p></div><div class="ab cl ks kt gp ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="hb hc hd he hf"><p id="b3e9" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><em class="lw">恭喜你坚持到最后！在</em><a class="ae ly" href="https://twitter.com/bot_pragmatic" rel="noopener ugc nofollow" target="_blank"><em class="lw">Twitter</em></a><em class="lw">，</em><a class="ae ly" href="https://github.com/abinator-1308/abinator-1308" rel="noopener ugc nofollow" target="_blank"><em class="lw">GitHub</em></a><em class="lw">，</em><a class="ae ly" rel="noopener" href="/@abhinav.as1308"><em class="lw">Medium</em></a><em class="lw">，</em><a class="ae ly" href="https://www.linkedin.com/in/abinator-1308/" rel="noopener ugc nofollow" target="_blank"><em class="lw">LinkedIn</em></a><em class="lw">，或者</em><a class="ae ly" href="https://www.instagram.com/abinator_1308/" rel="noopener ugc nofollow" target="_blank"><em class="lw">insta gram</em></a><em class="lw">上随意谈论科技或者任何很酷的项目。</em></p><p id="cf06" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">感谢阅读！</p></div><div class="ab cl ks kt gp ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="hb hc hd he hf"><h1 id="51d7" class="if ig hi bd ih ii kz ik il im la io ip iq lb is it iu lc iw ix iy ld ja jb jc bi translated">参考</h1><ul class=""><li id="cba9" class="le lf hi jf b jg jh jk jl jo ls js lt jw lu ka lj lk ll lm bi translated"><a class="ae ly" href="https://www.nginx.com/learn/api-gateway/" rel="noopener ugc nofollow" target="_blank">https://www.nginx.com/learn/api-gateway/</a></li><li id="5e0d" class="le lf hi jf b jg ln jk lo jo lp js lq jw lr ka lj lk ll lm bi translated">https://aws.amazon.com/api-gateway/<a class="ae ly" href="https://aws.amazon.com/api-gateway/" rel="noopener ugc nofollow" target="_blank"/></li><li id="072c" class="le lf hi jf b jg ln jk lo jo lp js lq jw lr ka lj lk ll lm bi translated">https://www.youtube.com/watch?v=1vjOv_f9L8I&amp;T4 ab _ channel = JavaBrains</li><li id="8330" class="le lf hi jf b jg ln jk lo jo lp js lq jw lr ka lj lk ll lm bi translated">https://www.youtube.com/watch?v=1vjOv_f9L8I&amp;ab _ channel = JavaBrains</li><li id="ead6" class="le lf hi jf b jg ln jk lo jo lp js lq jw lr ka lj lk ll lm bi translated"><a class="ae ly" href="https://docs.konghq.com/gateway/latest/?_ga=2.16986096.858199693.1662885521-1725270442.1661617281" rel="noopener ugc nofollow" target="_blank">https://docs.konghq.com/gateway/latest/?_ ga = 2.16985521-172525271</a>46628</li><li id="60ff" class="le lf hi jf b jg ln jk lo jo lp js lq jw lr ka lj lk ll lm bi translated"><a class="ae ly" href="https://www.gartner.com/reviews/market/full-life-cycle-api-management/compare/amazon-web-services-vs-kong" rel="noopener ugc nofollow" target="_blank">https://www . Gartner . com/reviews/market/full-life-cycle-API-management/compare/Amazon-we b-services-vs-kong</a></li></ul></div></div>    
</body>
</html>