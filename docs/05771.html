<html>
<head>
<title>Simple Statistical Tests to Compare Categories</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">比较类别的简单统计测试</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/simple-statistical-tests-to-compare-categories-929498014630?source=collection_archive---------23-----------------------#2021-07-29">https://medium.com/geekculture/simple-statistical-tests-to-compare-categories-929498014630?source=collection_archive---------23-----------------------#2021-07-29</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="83e8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">测试NHL球员的身高和体重在不同位置以及季后赛和非季后赛球队中的重要性。</p><p id="a870" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我之前的文章(<a class="ae jd" rel="noopener" href="/geekculture/data-exploration-in-python-height-and-weight-of-nhl-players-using-3-methods-bf33c52692ce"> here </a>)中，我演示了一些关于NHL球员身高和体重的简单数据探索分析。这让我思考:曲棍球中不同位置的身高和体重有很大差异吗？此外，在2021年NHL季后赛中，关于两支决赛球队有多大，特别是在防守队员的位置上，已经有了很多噪音。所以，我想知道季后赛球队比非季后赛球队更大更高的说法是否属实。</p><p id="460b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面使用的代码可以在<a class="ae jd" href="https://gitlab.com/alexistats/nhl_players_exploration/-/blob/main/nhl_player_bio_test.py" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><p id="14af" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">测试不同位置的身高和体重差异</strong></p><p id="2818" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们把无聊的部分去掉吧。我们需要加载数据，并将身高和体重从英尺/英寸转换为厘米，从磅转换为千克。</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="33db" class="jn jo hi jj b fi jp jq l jr js">import pandas as pd<br/><br/>## We have to reload the data<br/>data = pd.read_csv("nhl_bio_2020.csv")<br/>data.head()<br/>data = data[['first_name', 'last_name', 'height','weight', 'position_name', 'team_name']]<br/><br/>## Need to perform data manipulation to set weight in kg and heigh in cm<br/>data['weight'] = round(data['weight'] * 0.453592,1)<br/>data['height'] = data['height'].str[0:1].astype(int)*30.48 + data['height'].str[2:5].replace('"','', regex=True).astype(int)*2.54</span></pre><p id="1c30" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，我想了解并想象每个位置的平均身高和体重，以了解我正在做的事情。</p><p id="73d6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为此，我使用。groupby()方法按职位名称对我的数据进行分组，并使用。mean()方法按位置计算我的度量值的平均值。</p><p id="797b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">凭直觉，我认为守门员应该是最高最瘦的一组，因为他们需要在快速运动的同时覆盖很多球网。在重量级，我希望防守队员更强壮，因为他们通常比前锋更注重身体对抗。</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="4c26" class="jn jo hi jj b fi jp jq l jr js">by_position = data.groupby('position_name').mean()<br/>print(by_position)</span></pre><figure class="je jf jg jh fd ju er es paragraph-image"><div class="er es jt"><img src="../Images/bdfcb572838daa360ce4a9a4c1e5b0cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:634/format:webp/1*tyHmNaLpsHHu6fIGbh9ZyQ.png"/></div><figcaption class="jx jy et er es jz ka bd b be z dx">Avg height (cm) and weight (kg) of NHL players by position</figcaption></figure><p id="a72b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">不出所料，守门员是最高的球员，但不是我预期的那样。他们比普通防守队员平均高不到3厘米，平均只比中锋高5厘米，这是数据显示的最小位置。</p><p id="4a9e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">就重量而言，考虑到高度的微小差异，我预计守门员会更苗条。尽管如此，从一个位置(类别)到另一个位置(类别)的偏差非常小。</p><p id="3bfc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">是时候建立图表了！</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="088d" class="jn jo hi jj b fi jp jq l jr js">by_position = by_position.sort_values('height')<br/>by_position.plot.barh(y=['height', 'weight'])</span></pre><figure class="je jf jg jh fd ju er es paragraph-image"><div role="button" tabindex="0" class="kc kd di ke bf kf"><div class="er es kb"><img src="../Images/20c1ead9889e5cc7494c44827104024a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tlmrmfjAKvoI7ofOIm8dWA.png"/></div></div><figcaption class="jx jy et er es jz ka bd b be z dx">The chart shows just how close the averages are</figcaption></figure><p id="cbec" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上面的代码利用了。sort_values()方法按照高度从小到大对值进行排序。水平条形图非常适合于显示微小的差异。在这种情况下，虽然没有太多的差异！</p><p id="0997" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，我们从scipy导入统计包，这将有助于计算Welch的t检验。t检验是一种假设检验工具，有助于比较两个样本均值之间的差异。我们首先要验证正态假设，然后才能进行测试。在这种情况下，我将为每个身高和体重变量测试3个假设:</p><ul class=""><li id="ddad" class="kg kh hi ih b ii ij im in iq ki iu kj iy kk jc kl km kn ko bi translated">前锋的身高、体重和防守队员的身高、体重有什么不同吗？</li><li id="df0a" class="kg kh hi ih b ii kp im kq iq kr iu ks iy kt jc kl km kn ko bi translated">前锋的身高、体重和守门员的身高、体重有什么不同吗？</li><li id="7b13" class="kg kh hi ih b ii kp im kq iq kr iu ks iy kt jc kl km kn ko bi translated">防守队员的身高、体重和守门员的身高、体重有什么不同吗？</li></ul><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="dae6" class="jn jo hi jj b fi jp jq l jr js">from scipy import stats<br/>data_defensemen = data[data['position_name'] == 'Defenseman']<br/>data_goalies = data[data['position_name'] == 'Goalie']<br/>forwards = ['Right Wing', 'Center', 'Left Wing']<br/>data_forwards = data[data['position_name'].isin(forwards)]</span><span id="bdf0" class="jn jo hi jj b fi ku jq l jr js">## Test 1<br/>ttest, pval = ttest_ind(data_defensemen['height'], data_forwards['height'])<br/>print('p_value is ', pval)<br/><br/>if pval &lt; 0.05:<br/>    print("There is significant evidence that NHL defensemen are taller than forwards")<br/>else:<br/>    print("There is no statistical difference between the size of NHL defensemen and forwards")</span><span id="2077" class="jn jo hi jj b fi ku jq l jr js">## Test 2<br/>ttest, pval = ttest_ind(data_defensemen['height'], data_goalies['height'])<br/>print('p_value is ', pval)<br/><br/>if pval &lt; 0.05:<br/>    print("There is significant evidence that NHL goalies are taller than defensemen")<br/>else:<br/>    print("There is no statistical difference between the size of NHL goalies and defensemen")</span><span id="93a1" class="jn jo hi jj b fi ku jq l jr js">## Test 3    <br/>ttest, pval = ttest_ind(data_forwards['height'], data_goalies['height'])<br/>print('p_value is ', pval)<br/><br/>if pval &lt; 0.05:<br/>    print("There is significant evidence that NHL goalies are taller than forwards")<br/>else:<br/>    print("There is no statistical difference between the size of NHL goalies and forwards")</span></pre><p id="c0e1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我首先过滤数据集3次，以获得前锋、防守队员和守门员的数据。我把打右翼、中锋、左翼位置的球员组合到“前锋”位置。执行这些测试的一个不太冗长的方法是对排列进行编码并遍历它们。我只有三个，所以简单地重复了一遍。</p><p id="c00d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">韦尔奇t检验的结果令人惊讶:</p><figure class="je jf jg jh fd ju er es paragraph-image"><div class="er es kv"><img src="../Images/a09f4202cac13f61dabb7e3f39d3e0ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1222/format:webp/1*Ft2WrJY0ccQPG-RIakHm3A.png"/></div></figure><p id="6a0c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">每次测试都意义重大！我认为这可以用玩家之间的小差异来解释。所以，这个测试表明，两个位置之间的高度确实存在差异。</p><p id="3f9d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我对重量做了同样的测试，并且:</p><figure class="je jf jg jh fd ju er es paragraph-image"><div class="er es kw"><img src="../Images/7e4c52fa84f678960e6e7d70ceaaf31b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1368/format:webp/1*HFAxTKWjwxzsHjVCzHOhbA.png"/></div></figure><p id="a8c4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">似乎唯一有统计学意义的结果是NHL的防守队员比前锋更重。</p><p id="9bd3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">测试季后赛和非季后赛球队的身高和体重差异</strong></p><p id="e117" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，这很有趣，但老派的球迷和分析师总是会说规模真的很重要，有助于球队获胜。这是真的吗？我假设如果规模是成为一支好球队的一个因素，那么季后赛球队会更高更大，对吗？(31支NHL球队中有16支获得了季后赛资格)。</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="5f6c" class="jn jo hi jj b fi jp jq l jr js">playoff_teams = ["New York Islanders", " Montréal Canadiens", "Toronto Maple Leafs", "Winnipeg Jets", "Edmonton Oilers", "Vegas Golden Knights", "Colorado Avalanche",<br/>                "Washington Capitals", "Boston Bruins", "Florida Panthers", "Pittsburgh Penguins", "Carolina Hurricanes", "Nashville Predators", "Tampa Bay Lightning",<br/>                "St. Louis Blues", "Minnesota Wild"]<br/><br/>data_playoffs = data[data['team_name'].isin(playoff_teams)]<br/>data_not_playoff = data[~data['team_name'].isin(playoff_teams)]<br/><br/>ttest, pval = ttest_ind(data_playoffs['height'], data_not_playoff['height'], equal_var = False)<br/>print('p_value is ', pval)<br/><br/>if pval &lt; 0.05:<br/>    print("There is significant evidence that playoff teams are taller than non playoff teams")<br/>else:<br/>    print("There is no statistical difference between the size of playoff teams and non playoff teams")<br/></span><span id="966e" class="jn jo hi jj b fi ku jq l jr js">ttest, pval = ttest_ind(data_playoffs['weight'], data_not_playoff['weight'], equal_var = False)<br/>print('p_value is ', pval)<br/><br/>if pval &lt; 0.05:<br/>    print("There is significant evidence that playoff teams are heavier than non playoff teams")<br/>else:<br/>    print("There is no statistical difference between the size of playoff teams and non playoff teams")</span></pre><p id="0d2b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，我输入了去年NHL季后赛球队的名单，建立了两个数据集:data _季后赛和data _ not _季后赛。他们的名字很容易理解。</p><p id="4ca9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，我对这些样本进行了韦尔奇t检验。结果呢？不重要。</p><figure class="je jf jg jh fd ju er es paragraph-image"><div role="button" tabindex="0" class="kc kd di ke bf kf"><div class="er es kx"><img src="../Images/9064d00c52bfd2de812e4bfdf0e23f63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fC6CLUMgIEK4cYOZ5jX1lw.png"/></div></div></figure><figure class="je jf jg jh fd ju er es paragraph-image"><div role="button" tabindex="0" class="kc kd di ke bf kf"><div class="er es ky"><img src="../Images/0d8e818b4001710ea2d17b6912f13459.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xzbAzhP-qARU8peISAcS0Q.png"/></div></div></figure><p id="4f12" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这表明，无论是否参加NHL季后赛，球队都不会更高或更重。</p></div></div>    
</body>
</html>