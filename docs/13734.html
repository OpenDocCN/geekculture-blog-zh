<html>
<head>
<title>Drag and Drop Upload Image/File Using Laravel</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Laravel拖放上传图像/文件</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/drag-and-drop-upload-image-file-using-laravel-35e8446e8e92?source=collection_archive---------8-----------------------#2022-07-26">https://medium.com/geekculture/drag-and-drop-upload-image-file-using-laravel-35e8446e8e92?source=collection_archive---------8-----------------------#2022-07-26</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/a7c323ce9e309f602591569459e2ea39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fTbP0CZvh89ivi6nmboOaA.png"/></div></div></figure><p id="0307" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你好，朋友们你们好吗，希望你们永远健康成功。回到Temanngoding.com，这次我们将再次讨论拉勒维尔。</p><p id="ba6d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这次我们将讨论如何使用<a class="ae jo" href="https://www.dropzonejs.com/" rel="noopener ugc nofollow" target="_blank"> Dropzone.js </a>插件上传文件或图像的教程。我们将尝试同时上传一个或多个文件。并且我们会在上传文件的时候创造一个吸引人的外观。DropzoneJs是一个开源库，可以用来执行java脚本活动。</p><p id="31ff" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您可以学习其他laravel教程:</p><h2 id="efa3" class="jp jq hi bd jr js jt ju jv jw jx jy jz jb ka kb kc jf kd ke kf jj kg kh ki kj bi translated"><a class="ae jo" href="https://temanngoding.com/en/rest-api-login-register-with-sanctum-laravel/" rel="noopener ugc nofollow" target="_blank"> REST API登录&amp;向圣所注册</a></h2><h2 id="fbfd" class="jp jq hi bd jr js jt ju jv jw jx jy jz jb ka kb kc jf kd ke kf jj kg kh ki kj bi translated"><a class="ae jo" href="https://temanngoding.com/en/upload-files-using-ajax-in-laravel/" rel="noopener ugc nofollow" target="_blank">在Laravel中使用Ajax上传文件</a></h2><h2 id="f80b" class="jp jq hi bd jr js jt ju jv jw jx jy jz jb ka kb kc jf kd ke kf jj kg kh ki kj bi translated"><a class="ae jo" href="https://temanngoding.com/en/laravel-8-generate-pdf-files-using-dompdf/" rel="noopener ugc nofollow" target="_blank"> Laravel 8使用DomPDF生成PDF文件</a></h2><h1 id="4f1a" class="kk jq hi bd jr kl km kn jv ko kp kq jz kr ks kt kc ku kv kw kf kx ky kz ki la bi translated">1.创建一个Laravel项目</h1><p id="a4ae" class="pw-post-body-paragraph iq ir hi is b it lb iv iw ix lc iz ja jb ld jd je jf le jh ji jj lf jl jm jn hb bi translated">运行composer命令，如下所示:</p><pre class="lg lh li lj fd lk ll lm ln aw lo bi"><span id="8702" class="jp jq hi ll b fi lp lq l lr ls">composer create-project laravel/laravel --prefer-dist file-upload</span></pre><p id="d8df" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后进入root:</p><pre class="lg lh li lj fd lk ll lm ln aw lo bi"><span id="9dfe" class="jp jq hi ll b fi lp lq l lr ls">cd file-upload</span></pre><h1 id="dcdc" class="kk jq hi bd jr kl km kn jv ko kp kq jz kr ks kt kc ku kv kw kf kx ky kz ki la bi translated">2.创建路线</h1><p id="d04a" class="pw-post-body-paragraph iq ir hi is b it lb iv iw ix lc iz ja jb ld jd je jf le jh ji jj lf jl jm jn hb bi translated">接下来，我们将创建两条路线，第一条路线用于创建表单。第二个用于创建文件/图像存储功能。</p><p id="6e01" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在routes/web.php文件中输入下面的代码。</p><pre class="lg lh li lj fd lk ll lm ln aw lo bi"><span id="af6f" class="jp jq hi ll b fi lp lq l lr ls">&lt;?php<br/><br/>use Illuminate\Support\Facades\Route;<br/>use App\Http\Controllers\UploadController;<br/><br/>/*<br/>|--------------------------------------------------------------------------<br/>| Web Routes<br/>|--------------------------------------------------------------------------<br/>|<br/>| Here is where you can register web routes for your application. These<br/>| routes are loaded by the RouteServiceProvider within a group which<br/>| contains the "web" middleware group. Now create something great!<br/>|<br/>*/<br/><br/>Route::get('upload-ui', [UploadController::class, 'uploadUi' ]);<br/>Route::post('file-upload', [UploadController::class, 'FileUpload' ])-&gt;name('FileUpload');</span></pre><h1 id="9515" class="kk jq hi bd jr kl km kn jv ko kp kq jz kr ks kt kc ku kv kw kf kx ky kz ki la bi translated">3.上传控制器</h1><p id="a301" class="pw-post-body-paragraph iq ir hi is b it lb iv iw ix lc iz ja jb ld jd je jf le jh ji jj lf jl jm jn hb bi translated">要构建拖放文件上传功能，我们需要创建控制器，所以从命令提示符下启动下面的命令。</p><pre class="lg lh li lj fd lk ll lm ln aw lo bi"><span id="9878" class="jp jq hi ll b fi lp lq l lr ls">php artisan make:controller UploadController</span></pre><p id="0006" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">app/Http/controller/upload controller . PHP</strong></p><pre class="lg lh li lj fd lk ll lm ln aw lo bi"><span id="d1c4" class="jp jq hi ll b fi lp lq l lr ls">&lt;?php<br/><br/>namespace App\Http\Controllers;<br/><br/>use Illuminate\Http\Request;<br/><br/><em class="lt">class</em> UploadController extends Controller<br/>{<br/>    /**<br/>     * Generate Upload View<br/>     *<br/>     * @return void<br/>    */<br/>    public  <em class="lt">function</em> uploadUi()<br/>    {<br/>        return view('upload-view');<br/>    }<br/>    /**<br/>     * File Upload Method<br/>     *<br/>     * @return void<br/>     */<br/>    public  <em class="lt">function</em> FileUpload(Request $request)<br/>    {<br/>        $image = $request-&gt;file('file');<br/>        $imageName = time().'.'.$image-&gt;extension();<br/>        $image-&gt;move(public_path('images'),$imageName);<br/>        return response()-&gt;json(['success'=&gt;$imageName]);<br/>    }<br/>}</span></pre><h1 id="188a" class="kk jq hi bd jr kl km kn jv ko kp kq jz kr ks kt kc ku kv kw kf kx ky kz ki la bi translated">4.创建刀片视图</h1><p id="0e13" class="pw-post-body-paragraph iq ir hi is b it lb iv iw ix lc iz ja jb ld jd je jf le jh ji jj lf jl jm jn hb bi translated">最后一步，在resources/views/drop zone-file-upload . blade . PHP中创建一个刀片文件。</p><pre class="lg lh li lj fd lk ll lm ln aw lo bi"><span id="9c63" class="jp jq hi ll b fi lp lq l lr ls">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>&lt;head&gt;<br/>    &lt;title&gt;Laravel 8|7 Drag And Drop File/Image Upload Examle &lt;/title&gt;<br/>    &lt;link href="https://cdnjs.cloudflare.com/ajax/libs/dropzone/5.7.2/dropzone.min.css" rel="stylesheet"&gt;<br/>    &lt;script src="https://cdnjs.cloudflare.com/ajax/libs/dropzone/5.7.2/min/dropzone.min.js"&gt;&lt;/script&gt;<br/>    &lt;script&gt;<br/>        var dropzone = new Dropzone('#file-upload', {<br/>            previewTemplate: document.querySelector('#preview-template').innerHTML,<br/>            parallelUploads: 3,<br/>            thumbnailHeight: 150,<br/>            thumbnailWidth: 150,<br/>            maxFilesize: 5,<br/>            filesizeBase: 1500,<br/>            thumbnail: <em class="lt">function</em> (file, dataUrl) {<br/>                if (file.previewElement) {<br/>                    file.previewElement.classList.remove("dz-file-preview");<br/>                    var images = file.previewElement.querySelectorAll("[data-dz-thumbnail]");<br/>                    for (var i = 0; i &lt; images.length; i++) {<br/>                        var thumbnailElement = images[i];<br/>                        thumbnailElement.alt = file.name;<br/>                        thumbnailElement.src = dataUrl;<br/>                    }<br/>                    setTimeout(<em class="lt">function</em> () {<br/>                        file.previewElement.classList.add("dz-image-preview");<br/>                    }, 1);<br/>                }<br/>            }<br/>        });<br/><br/>        var minSteps = 6,<br/>            maxSteps = 60,<br/>            timeBetweenSteps = 100,<br/>            bytesPerStep = 100000;<br/>        dropzone.uploadFiles = <em class="lt">function</em> (files) {<br/>            var self = this;<br/>            for (var i = 0; i &lt; files.length; i++) {<br/>                var file = files[i];<br/>                totalSteps = Math.round(Math.min(maxSteps, Math.max(minSteps, file.size / bytesPerStep)));<br/>                for (var step = 0; step &lt; totalSteps; step++) {<br/>                    var duration = timeBetweenSteps * (step + 1);<br/>                    setTimeout(<em class="lt">function</em> (file, totalSteps, step) {<br/>                        return <em class="lt">function</em> () {<br/>                            file.upload = {<br/>                                progress: 100 * (step + 1) / totalSteps,<br/>                                total: file.size,<br/>                                bytesSent: (step + 1) * file.size / totalSteps<br/>                            };<br/>                            self.emit('uploadprogress', file, file.upload.progress, file.upload<br/>                                .bytesSent);<br/>                            if (file.upload.progress == 100) {<br/>                                file.status = Dropzone.SUCCESS;<br/>                                self.emit("success", file, 'success', null);<br/>                                self.emit("complete", file);<br/>                                self.processQueue();<br/>                            }<br/>                        };<br/>                    }(file, totalSteps, step), duration);<br/>                }<br/>            }<br/>        }<br/>    &lt;/script&gt;<br/>    &lt;style&gt;<br/>        .dropzone {<br/>            background: #e3e6ff;<br/>            border-radius: 13px;<br/>            max-width: 550px;<br/>            margin-left: auto;<br/>            margin-right: auto;<br/>            border: 2px dotted #1833FF;<br/>            margin-top: 50px;<br/>        }<br/>    &lt;/style&gt;<br/>&lt;/head&gt;<br/>&lt;body&gt;<br/>    &lt;div id="dropzone"&gt;<br/>        &lt;form action="{{ route('FileUpload') }}" <em class="lt">class</em>="dropzone" id="file-upload" enctype="multipart/form-data"&gt;<br/>            @csrf<br/>            &lt;div <em class="lt">class</em>="dz-message"&gt;<br/>                Drag and Drop Single/Multiple Files Here&lt;br&gt;<br/>            &lt;/div&gt;<br/>        &lt;/form&gt;<br/>    &lt;/div&gt;<br/>&lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="e1fb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这里使用CDN链接(JavaScript和CSS)调用Dropzone插件。</p><p id="92c2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">用文件上载id初始化的Dropzone对象；我们还为文件上传功能实现了一个小设置。</p><p id="9266" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为了设计拖放组件的样式，我们使用CSS来组合样式。我们用action指令中的route()方法传递dropzoneFileUpload。</p><p id="8b60" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，您可以使用拖放和点击事件来上传单个或多个文件。</p><p id="9537" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">运行命令启动应用程序:</p><pre class="lg lh li lj fd lk ll lm ln aw lo bi"><span id="1e8d" class="jp jq hi ll b fi lp lq l lr ls">php artisan serve</span><span id="379c" class="jp jq hi ll b fi lu lq l lr ls">http://localhost:8000/upload-ui</span></pre><p id="900f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这将是使用拖放成功上传图像时的结果。</p><figure class="lg lh li lj fd ij er es paragraph-image"><div class="er es lv"><img src="../Images/4deca6cdc8ea3239e716dae34e2800d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/0*J1asEPpFwe23YfIr.png"/></div></figure><p id="a53d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">那就是这次的教程，我能传达的。</p><p id="704d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">谢了。</p></div></div>    
</body>
</html>