<html>
<head>
<title>Exploring Foursquare API for Venues with Python and JupyterDash</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python和JupyterDash探索Foursquare场馆API</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/exploring-foursquare-api-for-venues-with-python-and-jupyterdash-b95d21aae307?source=collection_archive---------14-----------------------#2021-09-22">https://medium.com/geekculture/exploring-foursquare-api-for-venues-with-python-and-jupyterdash-b95d21aae307?source=collection_archive---------14-----------------------#2021-09-22</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="3faf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一些有趣的定位服务</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/c66c1c11315da8febbf8db46f3d2ffa8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*dJ4HJaKonnj_G4i_"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx">Photo by <a class="ae jt" href="https://unsplash.com/@aless_onisor?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Alessandra Onisor</a> on <a class="ae jt" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="f5aa" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">介绍</h1><p id="f1f9" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">在本文中，我们将尝试探索Foursquare(一家以基于位置的服务而闻名的公司)提供的API。有了这个API，我们可以在我们的应用程序或网站中增强基于位置的体验。</p><p id="ec29" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">给定一个特定的位置，我们可以找到不同类型的场所，从咖啡店到旅游和交通。为了利用API，我们需要首先创建一个<a class="ae jt" href="https://developer.foursquare.com/docs/places-api/getting-started/" rel="noopener ugc nofollow" target="_blank">开发者账户</a>。在创建so时，Foursquare提供了两种类型的ID:</p><ol class=""><li id="f574" class="kx ky hi ih b ii ij im in iq kz iu la iy lb jc lc ld le lf bi translated">客户端ID</li><li id="03a0" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated">客户机密</li></ol><p id="9920" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这两项对于获取与所提供的位置相关的任何类别的场馆数据非常重要。除此之外，我们还需要<a class="ae jt" href="http://openrouteservice.org/" rel="noopener ugc nofollow" target="_blank">openrouteservice.org</a>API和<a class="ae jt" href="http://mapbox.com/" rel="noopener ugc nofollow" target="_blank">mapbox.com</a>API。你可以参考我之前的<a class="ae jt" href="https://python.plainenglish.io/exploring-open-route-service-api-820a0ccffecc" rel="noopener ugc nofollow" target="_blank">博客</a>来了解一下。</p><p id="af34" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这个博客上，我想分享我在周末项目中实现的工作概念验证。</p><h1 id="3d9e" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">履行</h1><p id="9af9" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">如果你想得到视频解释，你可以看下面的视频和一些额外的细节。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ll lm l"/></div></figure><h1 id="80e6" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated"><code class="du ln lo lp lq b">import</code>包装</h1><p id="46dd" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">和往常一样，我们从导入对POC至关重要的包开始。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lr lm l"/></div></figure><h1 id="b251" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">API读数</h1><p id="529b" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated"><strong class="ih hj"> OpenRouteService令牌</strong></p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lr lm l"/></div></figure><p id="95c6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">地图框令牌</strong></p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lr lm l"/></div></figure><p id="7914" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">四方场馆</strong></p><p id="a944" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Foursquare提供了几个场地类别。对于每个场馆类别，我们都有一个唯一的ID(具体称为<code class="du ln lo lp lq b">categoryId</code>)。要了解公司提供的不同场地的类别，您可以查看<a class="ae jt" href="https://developer.foursquare.com/docs/build-with-foursquare/categories/" rel="noopener ugc nofollow" target="_blank">这个</a>获取信息。下图解释了这一点。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ls"><img src="../Images/21b9ef3f60366429ff3170872930862c.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/0*zh_GGnUvCB0AQBLS"/></div><figcaption class="jp jq et er es jr js bd b be z dx">Foursquare venues</figcaption></figure><p id="cb0d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从图像中，我们可以注意到我们有一个<code class="du ln lo lp lq b">categoryName</code>和它的<code class="du ln lo lp lq b">categoryId</code>。</p><ul class=""><li id="254f" class="kx ky hi ih b ii ij im in iq kz iu la iy lb jc lt ld le lf bi translated">我们每次都可以参考该网站，并获取我们感兴趣的场地的详细信息。</li><li id="8333" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lt ld le lf bi translated">或者，我们可以保存所有的名称和id，并创建一个下拉列表，让用户可以自由地从列表中选择任何内容。</li></ul><p id="d391" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">(作为这个项目的一部分，我已经按照类别收集了所有的名字和id，并将它们保存在一个JSON文件中。不过，如果你有兴趣了解我是怎么刮的，可以看看我的<a class="ae jt" href="https://jovian.ai/msameeruddin/foursquare-api-test/v/3" rel="noopener ugc nofollow" target="_blank">笔记本</a>。您也可以从<a class="ae jt" href="https://gist.githubusercontent.com/msameeruddin/a701042de9bfb58206d2d763dee665a6/raw/13b358e01e81f9f57cc8c82223e46f52c0e954ea/foursquare_venue_categories.json" rel="noopener ugc nofollow" target="_blank">这里</a>下载数据。)</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lr lm l"/></div></figure><p id="da20" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">总的来说，我们有<code class="du ln lo lp lq b">10</code>个主要类别。在每个类别中，我们都有子类别。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lr lm l"/></div></figure><p id="347b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">四方凭证</strong></p><p id="69f2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我已经创建了我的开发者帐户，并将秘密保存在我的本地文件中。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lr lm l"/></div></figure><p id="162b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">凭证的<code class="du ln lo lp lq b">keys</code>见下图。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lr lm l"/></div></figure><h1 id="5f9c" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">提取主要和子类别</h1><p id="f0f2" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">由于数据被加载到一个名为<code class="du ln lo lp lq b">foursquare_venues</code>的变量中，我们只需要相应地解析数据来提取主类别和相应的子类别。</p><p id="bb25" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，下面的助手函数。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lr lm l"/></div></figure><h1 id="1420" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">位置助手(地理编码器)</h1><p id="19f3" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">Foursquare API的主要目的是获取与位置相关的场馆数据。没有位置(坐标)，我们无法获取数据。要得到位置坐标，我们必须遵循两个方面:</p><ul class=""><li id="7ebf" class="kx ky hi ih b ii ij im in iq kz iu la iy lb jc lt ld le lf bi translated">设备位置(默认情况下)</li><li id="5ef2" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lt ld le lf bi translated">用户的兴趣(应用程序用户可以更改位置区域)</li></ul><p id="907f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，下面的助手函数。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lr lm l"/></div></figure><h1 id="b215" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">应用程序初始化</h1><p id="c28f" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated"><code class="du ln lo lp lq b">JupyterDash</code>是<code class="du ln lo lp lq b">Dash</code>软件包的一部分，专用于在笔记本电脑环境中创建用户应用程序。让我们初始化应用程序。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lr lm l"/></div></figure><p id="c208" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">默认<code class="du ln lo lp lq b">external_stylesheets</code>用于app设计。这是一个经典的设计，可以用于任何web应用程序。</p><h1 id="3743" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">应用程序布局</h1><p id="26ff" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated"><code class="du ln lo lp lq b">JupyterDash</code>应用的布局设计类似于<code class="du ln lo lp lq b">Dash</code>应用。变量(对象)<code class="du ln lo lp lq b">app</code>有一个名为<code class="du ln lo lp lq b">layout</code>的属性，用于保存整个设计。</p><p id="d1c3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">布局设计</strong></p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lr lm l"/></div></figure><p id="850e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">布局输出</strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lu"><img src="../Images/6f5198180a53ce8477395c95dc47f9ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mbns9FuhB3kvSpaY"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx">Image by Author</figcaption></figure><p id="233c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">用户必须选择下拉列表值来可视化与地名和类别相关的场馆位置。后端还没有出现。</p><h1 id="a043" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">应用回调</h1><p id="863d" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated"><code class="du ln lo lp lq b">JupyterDash</code>应用程序的回调(后端)类似于<code class="du ln lo lp lq b">Dash</code>应用程序。回调充当更新函数的装饰器，因此不需要调用函数来表示输出/结果。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lr lm l"/></div></figure><p id="f6e1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在上面的代码中，我们有两个回调。</p><ul class=""><li id="8727" class="kx ky hi ih b ii ij im in iq kz iu la iy lb jc lt ld le lf bi translated">第一个指示子类别下拉列表的修改。请注意当主类别更新时，子类别下拉列表是如何变化的。</li></ul><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lv"><img src="../Images/f6e2bb79d64662a91f292dea8d9f7b31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*G3RDgt-HKMPsHeR6"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx">Image by Author</figcaption></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lw"><img src="../Images/3d7b708ff567d27014125e8d6f260cee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*dzO8jfIDvaJGBD1M"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx">Image by Author</figcaption></figure><ul class=""><li id="7359" class="kx ky hi ih b ii ij im in iq kz iu la iy lb jc lt ld le lf bi translated">第二个用于显示地图。</li></ul><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lx"><img src="../Images/8940d0875a83720a1c14e38442e83f94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*lrw9B1MVW1foWLOc"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx">Image by Author</figcaption></figure><p id="e4fc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">(以上只是图片而非工作app。)</p><h1 id="2e30" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">应用服务器</h1><p id="ff50" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">要查看应用程序，需要激活应用程序的服务器。请随意从下拉列表中选择不同的值，以观察地图结果的变化。</p><p id="4dbb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">(无论什么时候想换地点，只要提一个不同的地名，回车就可以了。)</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lr lm l"/></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lx"><img src="../Images/8940d0875a83720a1c14e38442e83f94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*lrw9B1MVW1foWLOc"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx">Image by Author</figcaption></figure></div><div class="ab cl ly lz gp ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="hb hc hd he hf"><p id="4382" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">好了，这篇文章就到这里。你可以在这里找到我的笔记本，里面有完整的代码。你也可以订阅我的时事通讯来获取这些独家内容。谢谢大家。</p><p id="cd96" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">结束</strong></p></div></div>    
</body>
</html>