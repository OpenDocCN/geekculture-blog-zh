<html>
<head>
<title>Updates and FAQ — Your 1 Minute Quick Start Guide to ShardingSphere</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">更新和常见问题ShardingSphere分钟快速入门指南</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/updates-and-faq-your-1-minute-quick-start-guide-to-shardingsphere-b80bed396b2?source=collection_archive---------23-----------------------#2021-08-23">https://medium.com/geekculture/updates-and-faq-your-1-minute-quick-start-guide-to-shardingsphere-b80bed396b2?source=collection_archive---------23-----------------------#2021-08-23</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><h1 id="4da3" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated"><strong class="ak">背景</strong></h1><p id="f75b" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">Apache ShardingSphere是Apache顶级项目，也是最受欢迎的开源大数据项目之一。它开始于大约5年前，现在ShardingSphere的社区中有超过14K+的明星和270+的贡献者。</p><p id="914b" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">这个成功的项目已经发布并更新了许多版本。Apache ShardingSphere现在支持许多强大的特性，并不断优化其配置规则。我们希望帮助用户理解所有特性和配置规则，帮助他们快速测试和运行组件，并最终帮助他们实现最佳性能，因此我们决定启动shardingsphere-example项目。</p><p id="825b" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">shardingsphere-example是一个独立的Maven项目。它保存在Apache ShardingSphere的“examples”文件中。链接:</p><p id="2ddf" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><a class="ae kg" href="https://github.com/apache/shardingsphere/tree/master/examples" rel="noopener ugc nofollow" target="_blank">https://github . com/Apache/sharding sphere/tree/master/examples</a></p><h1 id="02c6" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated"><strong class="ak">模块&amp;解释</strong></h1><p id="68fb" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">shardingsphere-example项目包含许多模块。它为用户提供了横向扩展、读写分离、分布式治理、分布式事务、数据加密、提示管理器、影子数据库等功能的指南和配置示例。</p><p id="7060" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">还包括Java API、YAML、Spring Boot、Spring Namespace等常用工具。除了ShardingSphere-JDBC，现在我们在shardingsphere-example中添加了ShardingSphere-Proxy和ShardingSphere-Parser的使用示例。你可以很容易地在我们的官方报告中找到Apache ShardingSphere的所有特性及其场景，以及它们的灵活配置。下表显示了模块在shardingsphere-example中的分布情况。</p><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="d6c8" class="kq ig hi km b fi kr ks l kt ku">shardingsphere-example</span><span id="4e05" class="kq ig hi km b fi kv ks l kt ku">├── example-core</span><span id="f788" class="kq ig hi km b fi kv ks l kt ku">│ ├── config-utility</span><span id="53fc" class="kq ig hi km b fi kv ks l kt ku">│ ├── example-api</span><span id="a040" class="kq ig hi km b fi kv ks l kt ku">│ ├── example-raw-jdbc</span><span id="f2dd" class="kq ig hi km b fi kv ks l kt ku">│ ├── example-spring-jpa</span><span id="2fc5" class="kq ig hi km b fi kv ks l kt ku">│ └── example-spring-mybatis</span><span id="4a2c" class="kq ig hi km b fi kv ks l kt ku">├── shardingsphere-jdbc-example</span><span id="624b" class="kq ig hi km b fi kv ks l kt ku">│ ├── sharding-example</span><span id="f0e1" class="kq ig hi km b fi kv ks l kt ku">│ │ ├── sharding-raw-jdbc-example</span><span id="3525" class="kq ig hi km b fi kv ks l kt ku">│ │ ├── sharding-spring-boot-jpa-example</span><span id="eaf3" class="kq ig hi km b fi kv ks l kt ku">│ │ ├── sharding-spring-boot-mybatis-example</span><span id="b85a" class="kq ig hi km b fi kv ks l kt ku">│ │ ├── sharding-spring-namespace-jpa-example</span><span id="f731" class="kq ig hi km b fi kv ks l kt ku">│ │ └── sharding-spring-namespace-mybatis-example</span><span id="4efd" class="kq ig hi km b fi kv ks l kt ku">│ ├── governance-example</span><span id="0e48" class="kq ig hi km b fi kv ks l kt ku">│ │ ├── governance-raw-jdbc-example</span><span id="641d" class="kq ig hi km b fi kv ks l kt ku">│ │ ├── governance-spring-boot-mybatis-example</span><span id="ea0b" class="kq ig hi km b fi kv ks l kt ku">│ │ └── governance-spring-namespace-mybatis-example</span><span id="769a" class="kq ig hi km b fi kv ks l kt ku">│ ├── transaction-example</span><span id="da29" class="kq ig hi km b fi kv ks l kt ku">│ │ ├── transaction-2pc-xa-atomikos-raw-jdbc-example</span><span id="79d0" class="kq ig hi km b fi kv ks l kt ku">│ │ ├── transaction-2pc-xa-bitronix-raw-jdbc-example</span><span id="bed9" class="kq ig hi km b fi kv ks l kt ku">│ │ ├── transaction-2pc-xa-narayana-raw-jdbc-example</span><span id="8594" class="kq ig hi km b fi kv ks l kt ku">│ │ ├── transaction-2pc-xa-spring-boot-example</span><span id="0e5d" class="kq ig hi km b fi kv ks l kt ku">│ │ ├── transaction-2pc-xa-spring-namespace-example</span><span id="ea7a" class="kq ig hi km b fi kv ks l kt ku">│ │ ├── transaction-base-seata-raw-jdbc-example</span><span id="9493" class="kq ig hi km b fi kv ks l kt ku">│ │ └── transaction-base-seata-spring-boot-example</span><span id="e06c" class="kq ig hi km b fi kv ks l kt ku">│ ├── other-feature-example</span><span id="9636" class="kq ig hi km b fi kv ks l kt ku">│ │ ├── encrypt-example</span><span id="5516" class="kq ig hi km b fi kv ks l kt ku">│ │ │ ├── encrypt-raw-jdbc-example</span><span id="9c90" class="kq ig hi km b fi kv ks l kt ku">│ │ │ ├── encrypt-spring-boot-mybatis-example</span><span id="1775" class="kq ig hi km b fi kv ks l kt ku">│ │ │ └── encrypt-spring-namespace-mybatis-example</span><span id="00b8" class="kq ig hi km b fi kv ks l kt ku">│ │ ├── hint-example</span><span id="1e52" class="kq ig hi km b fi kv ks l kt ku">│ │ │ └── hint-raw-jdbc-example</span><span id="97fd" class="kq ig hi km b fi kv ks l kt ku">│ │ └── shadow-example</span><span id="3f8b" class="kq ig hi km b fi kv ks l kt ku">│ │ │ ├── shadow-raw-jdbc-example</span><span id="ed4a" class="kq ig hi km b fi kv ks l kt ku">│ │ │ ├── shadow-spring-boot-mybatis-example</span><span id="bb8c" class="kq ig hi km b fi kv ks l kt ku">│ │ │ └── shadow-spring-namespace-mybatis-example</span><span id="0bbe" class="kq ig hi km b fi kv ks l kt ku">│ ├── extension-example</span><span id="6a65" class="kq ig hi km b fi kv ks l kt ku">│ │ └── custom-sharding-algortihm-example</span><span id="71fa" class="kq ig hi km b fi kv ks l kt ku">├── shardingsphere-parser-example</span><span id="57ef" class="kq ig hi km b fi kv ks l kt ku">├── shardingsphere-proxy-example</span><span id="3d18" class="kq ig hi km b fi kv ks l kt ku">│ ├── shardingsphere-proxy-boot-mybatis-example</span><span id="ac73" class="kq ig hi km b fi kv ks l kt ku">│ └── shardingsphere-proxy-hint-example</span><span id="42e7" class="kq ig hi km b fi kv ks l kt ku">└── src/resources</span><span id="ff95" class="kq ig hi km b fi kv ks l kt ku">└── manual_schema.sql</span></pre><p id="cdb0" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">示例-核心</strong></p><p id="3796" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">模块example-core包含实体、接口定义和其他公共代码</p><p id="f60e" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">sharding sphere-JDBC-示例</strong></p><p id="1462" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">示例模块ShardingSphere-JDBC显示了ShardingSphere-JDBC要素以及如何使用它们。</p><p id="aef9" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">分片示例</strong></p><p id="0acc" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">该模块展示了如何使用切分球体-JDBC在切分、水平缩放、垂直缩放、读写分离以及读写分离加切分等场景中进行横向扩展。</p><p id="7ec5" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">在与ORM的集成方面，该模块也为用户提供了MyBatis和JPA集成的例子。</p><p id="d360" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">治理-示例</strong></p><p id="8c5a" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">这个模块是关于JDBC的分布式治理，包括相关的场景，并结合了一些特性，如分片、读写分离、数据加密、影子数据库。</p><p id="f864" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">注意:分布式治理的例子依赖于Apache Zookeeper。请采用自行付款方式。</p><p id="cc02" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">交易示例</strong></p><p id="29c1" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">这个模块显示了JDBC支持的分布式事务管理的多种方式。用户可以根据自己的应用选择合适的分布式事务协调器。鉴于分布式事务的复杂性，本模块中的所有示例都基于垂直扩展、水平扩展和分片。</p><p id="1043" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">注意:使用Seata时，请采用自部署。</p><p id="20cb" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">其他特征示例</strong></p><p id="1015" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">本模块给出了一些ShardingSphere-JDBC特性的示例，即encrypt(数据加密)、hint(提示管理器)、shadow(影子数据库)。</p><p id="148a" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">加密——例子</strong></p><p id="2afa" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">本模块显示数据加密的示例。它还告诉用户如何使用和访问Java API、YAML、Spring Boot、Spring命名空间。</p><p id="2d63" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">提示示例</strong></p><p id="7ab3" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">这显示了提示管理器的例子。然而，目前只有YAML配置的例子。我们欢迎更多的场景。</p><p id="02ff" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">阴影-示例</strong></p><p id="a194" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">这给出了影子数据库的例子，包括它与数据加密、分片和读/写分离相结合的应用。</p><p id="0ef9" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">扩展-示例</strong></p><p id="8c20" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">该模块告诉用户如何使用ShardingSphere-JDBC的自定义扩展。用户可以利用SPI或ShardingSphere提供的其他方式来扩展功能。</p><p id="108b" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">自定义分片算法-示例</strong></p><p id="2c0a" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">该模块展示了用户如何使用“基于类”和定制他的分片算法。</p><p id="3961" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">sharding sphere-parser-example</strong></p><p id="d5a5" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">SQLParserEngine是Apache ShardingSphere的SQL解析引擎。它也是ShardingSphere-JDBC和ShardingSphere-Proxy的基础。当用户输入一个SQL文本时，SQLParserEngine会对其进行解析，并使其成为可识别的表达式。那么进行路由或重写之类的增强就没问题了。</p><p id="e130" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">随着5.0.0-alpha版本的发布，Apache ShardingSphere的核心特性SQL Parser对用户完全开放。他们可以使用API并调用SQLParserEngin。通过这种方式，他们可以在自己的系统中使用如此有效的SQL解析来满足更多的业务需求。</p><p id="7dc5" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">在该模块中，用户可以学习如何使用SQLParserEngine API。它提供了不同语言的语法规则，如MySQL、PostgreSQL、Oracle、SQL Server和SQL 92。</p><p id="96cb" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">sharding sphere-proxy-example</strong></p><p id="b5a0" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">ShardingSphere-Proxy的示例模块包括常见场景的配置示例，如分片、读写分离和提示管理器。由于ShardingSphere-Proxy的特性与ShardingSphere-JDBC的特性几乎相同，当用户在shardingsphere-proxy-example中找不到想要的示例时，可以参考shardingsphere-jdbc-example。</p><p id="6323" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">sharding sphere-proxy-boot-mybatis-example</strong></p><p id="c3ec" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">在该模块中，用户可以学习如何使用代理来配置分片，以及如何使用SpringBoot + MyBatis来访问数据。</p><p id="f6a8" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">sharding sphere-proxy-hint-example</strong></p><p id="931f" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">在本模块中，用户可以了解如何使用代理来配置提示管理器，以及如何使用Java cliend-end来访问数据。</p><h1 id="6ca7" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated"><strong class="ak">新优化</strong></h1><p id="a8cf" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">Apache ShardingSphere 5.0.0-beta版本即将推出，因此社区贡献者也更新了shardingsphere-example。他们优化了以下内容:</p><ul class=""><li id="3bed" class="kw kx hi jf b jg kb jk kc jo ky js kz jw la ka lb lc ld le bi translated">JDK版本</li><li id="9d95" class="kw kx hi jf b jg lf jk lg jo lh js li jw lj ka lb lc ld le bi translated">组件版本</li><li id="0669" class="kw kx hi jf b jg lf jk lg jo lh js li jw lj ka lb lc ld le bi translated">类名</li><li id="0878" class="kw kx hi jf b jg lf jk lg jo lh js li jw lj ka lb lc ld le bi translated">配置描述文件</li><li id="6394" class="kw kx hi jf b jg lf jk lg jo lh js li jw lj ka lb lc ld le bi translated">SQL脚本</li></ul><p id="f42e" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">相关细节如下:</p><p id="eaa1" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj"> JDK版本升级</strong></p><p id="c8ab" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">根据JetBrains的“2020年的Java图片”，Java8 LTS是Java开发者中最受欢迎的版本。</p><figure class="kh ki kj kk fd ll er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es lk"><img src="../Images/e87b5b1b2a4069976dfe3dc27ee805dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pSZzU_AU6PIfFBC86ddfzg.jpeg"/></div></div></figure><p id="c012" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">这次更新之后，shardingsphere-example使用Java 8和更新的版本。如果您使用Java 7或更早的版本，请先更新您的JDK版本。</p><p id="8fd2" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">字符串依赖升级</strong></p><p id="4276" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">在shardingsphere-example中，我们更新了字符串依赖组件。</p><p id="a696" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">从1.5.17到2.0.9版本的弹簧启动版本</p><p id="3aee" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">springframework版本从4.3.20 .发行版升级到5.0.13 .发行版</p><p id="271c" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">从1.3.0到2.0.1的mybatis-spring-boot-start版本</p><p id="a22e" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">从1.3.0到2.0.1的mybatis-spring版本</p><p id="8d1f" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">持久性框架升级</strong></p><p id="043c" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">在sharding-sphere-example中，我们更新了持久性框架MyBatis和Hibernate。</p><p id="0452" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">mybatis版本从3.4.2升级到3.5.1</p><p id="97c7" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">从4.3.11.Final到5.2.18.Final的休眠版本</p><p id="7294" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">连接池升级</strong></p><p id="68e8" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">在sharding-sphere-example中，我们更新了数据库连接池HikariCP。</p><p id="f21d" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">从HikariCP-java7到HikariCP的HikariCP artifactId</p><p id="5689" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">HikariCP版本从2.4.11升级到3.4.2</p><p id="265b" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">数据库驱动升级</strong></p><p id="399b" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">在sharding-sphere-example中，我们更新了MySQL和PostgreSQL的数据库连接驱动程序</p><p id="fe39" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">从5.1.42到5.1.47的mysql-connector-java版本</p><p id="1926" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">从42.2.5.jre7到42.2.5的postgresql版本</p><h1 id="28fe" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated"><strong class="ak">示例</strong></h1><p id="8cd5" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">在本节中，我们给出几个典型的例子，并向您展示如何配置和运行shardingsphere-example。</p><p id="100b" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">项目shardingsphere-example中有许多模块。但目前，我们只选择ShardingSphere-JDBC的几个热门应用场景。</p><p id="644a" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">准备</strong></p><p id="38d3" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">1.Maven是该项目的shardingsphere-example构建工具。请先做好准备；</p><p id="e012" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">2.准备Apache ShardingSphere。如果您还没有下载Apache ShardingSphere，请先下载并编译它。您可以参考以下内容:</p><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="c6ae" class="kq ig hi km b fi kr ks l kt ku">git clone <a class="ae kg" href="https://github.com/apache/shardingsphere.git" rel="noopener ugc nofollow" target="_blank">https://github.com/apache/shardingsphere.git</a></span><span id="29c7" class="kq ig hi km b fi kv ks l kt ku">cd shardingsphere</span><span id="c9c9" class="kq ig hi km b fi kv ks l kt ku">mvn clean install -Prelease</span></pre><p id="a645" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">3.将shardingsphere-example项目导入您的IDE</p><p id="64d1" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">4.准备一个可管理的数据库环境，比如本地MySQL实例；</p><p id="3f2f" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">5.如果您需要测试读写分离，请确保您的主从同步正常；</p><p id="b5fe" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">6.执行数据库初始化脚本::examples/src/resources/manual _ schema . SQL</p><h1 id="29d6" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated"><strong class="ak">场景&amp;示例</strong></h1><p id="094b" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated"><strong class="jf hj">sharing-spring-boot-mybatis-举例:sharing</strong></p><ol class=""><li id="3c64" class="kw kx hi jf b jg kb jk kc jo ky js kz jw la ka ls lc ld le bi translated"><strong class="jf hj">路径</strong></li></ol><p id="9b51" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">examples/sharding sphere-JDBC-example/sharding-example/sharding-spring-boot-mybatis-example</p><p id="369a" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">2.<strong class="jf hj">目标</strong></p><p id="a81d" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">这个例子展示了使用ShardingSphere-JDBC结合SpringBoot和MyBatis实现分片的应用。分片的目标是将一个表分成四份，均匀地保存在两个不同的数据库中。</p><p id="3b94" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">3.<strong class="jf hj">准备</strong></p><ul class=""><li id="7d83" class="kw kx hi jf b jg kb jk kc jo ky js kz jw la ka lb lc ld le bi translated">配置应用程序.属性</li><li id="f571" class="kw kx hi jf b jg lf jk lg jo lh js li jw lj ka lb lc ld le bi translated">将spring.profiles.active设置为分片-数据库-表</li><li id="e5e7" class="kw kx hi jf b jg lf jk lg jo lh js li jw lj ka lb lc ld le bi translated">配置应用程序分片数据库表。</li><li id="6c14" class="kw kx hi jf b jg lf jk lg jo lh js li jw lj ka lb lc ld le bi translated">用您的数据库位置更改jdbc-url，并设置您的用户ID、密码等。</li><li id="d776" class="kw kx hi jf b jg lf jk lg jo lh js li jw lj ka lb lc ld le bi translated">将spring . sharding sphere . props . SQL-show的属性设置为true</li></ul><p id="81ea" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">详见<a class="ae kg" href="https://shardingsphere.apache.org/document/current/cn/user-manual/shardingsphere-jdbc/configuration/spring-boot-starter/sharding/" rel="noopener ugc nofollow" target="_blank">配置手册</a></p><p id="9463" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">4.<strong class="jf hj">运行</strong></p><p id="f636" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">启动时运行:shardingsprinbootmybatisexample . Java</p><p id="9c8f" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">现在，您可以观察日志的逻辑SQL和实际SQL中所有SQL表达式的路由，并了解分片是如何工作的。</p><h1 id="bfa0" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated"><strong class="ak">分片-raw-JDBC-示例:读写拆分</strong></h1><p id="0eff" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">1.<strong class="jf hj">路径</strong></p><p id="a9fc" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">examples/sharding sphere-JDBC-example/sharding-example/sharding-raw-JDBC-example</p><p id="4102" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">2.<strong class="jf hj">目标</strong></p><p id="0cf7" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">该示例展示了用户如何使用YAML并配置ShardingSphere-JDBC的读写分离功能。目标是分离一个写数据库和两个读数据库。</p><p id="df41" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">3.<strong class="jf hj">准备</strong></p><ul class=""><li id="4165" class="kw kx hi jf b jg kb jk kc jo ky js kz jw la ka lb lc ld le bi translated">配置META-INF/读写拆分. yaml</li><li id="6de0" class="kw kx hi jf b jg lf jk lg jo lh js li jw lj ka lb lc ld le bi translated">用您的数据库位置更改jdbc-url，并设置您的用户ID、密码等。</li><li id="e7be" class="kw kx hi jf b jg lf jk lg jo lh js li jw lj ka lb lc ld le bi translated">将props.sql-show设置为true</li></ul><p id="9763" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">详见<a class="ae kg" href="https://shardingsphere.apache.org/document/current/cn/user-manual/shardingsphere-jdbc/configuration/yaml/readwrite-splitting-/" rel="noopener ugc nofollow" target="_blank">配置手册</a>。</p><p id="90c9" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">4.<strong class="jf hj">运行</strong></p><p id="febc" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">打开startup:shardingrawyamlconfigurationexample . javaa，设置<em class="lt"> shardingType为shardingType。读写_拆分。</em>运行创业公司。</p><p id="6c30" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">现在，您可以观察日志的逻辑SQL和实际SQL中所有SQL表达式的路由，并理解读写拆分是如何工作的。</p><blockquote class="lu lv lw"><p id="29a9" class="jd je lt jf b jg kb ji jj jk kc jm jn lx kd jq jr ly ke ju jv lz kf jy jz ka hb bi translated">注意:当主从数据库同步失败时，会出现查询错误。</p></blockquote><h1 id="41f4" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated"><strong class="ak">自定义分片算法示例:自定义算法</strong></h1><p id="4993" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">1.<strong class="jf hj">路径</strong></p><p id="9a6b" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">examples/sharding sphere-JDBC-example/extension-example/custom-sharding-algorithm-example/class-based-sharding-algorithm-example</p><p id="6339" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">2.<strong class="jf hj">目标</strong></p><p id="e5a4" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">该示例显示了用户如何使用基于CLASS_BASED并扩展他们自己的自定义算法。通过这样做，分片球-JDBC可以基于自定义算法，并在分片路由期间计算分片结果。场景是如何使用自定义分片算法进行横向扩展。</p><p id="376a" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">3.<strong class="jf hj">准备</strong></p><p id="168f" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">￮准备您的分片算法，该算法应基于业务需求并使用标准分片算法、复杂密钥分片算法或提示分片算法的任何接口。在该示例中，我们展示了如何使用classbasedstandardshardingalgorithmmfixture</p><ul class=""><li id="551a" class="kw kx hi jf b jg kb jk kc jo ky js kz jw la ka lb lc ld le bi translated">配置元信息/分片数据库</li><li id="59ab" class="kw kx hi jf b jg lf jk lg jo lh js li jw lj ka lb lc ld le bi translated">用您的数据库位置更改jdbc-url，并设置您的用户ID、密码等。</li><li id="7a94" class="kw kx hi jf b jg lf jk lg jo lh js li jw lj ka lb lc ld le bi translated">将props.sql-show设置为true。</li></ul><blockquote class="lu lv lw"><p id="92fd" class="jd je lt jf b jg kb ji jj jk kc jm jn lx kd jq jr ly ke ju jv lz kf jy jz ka hb bi translated">注意:对于shardingAlgorithms，当一个类型是基于CLASS_BASED的时候，你可以使用props并分配自定义算法的类和绝对路径。这样，配置完成了。</p></blockquote><p id="ccf1" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">详见<a class="ae kg" href="https://shardingsphere.apache.org/document/current/cn/user-manual/shardingsphere-jdbc/configuration/built-in-algorithm/sharding/#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B1%BB%E5%88%86%E7%89%87%E7%AE%97%E6%B3%95" rel="noopener ugc nofollow" target="_blank">配置手册</a>。</p><p id="f814" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">4.<strong class="jf hj">跑</strong></p><p id="9cfe" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">运行启动:YamlClassBasedShardingAlgorithmExample.java</p><p id="8aa7" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">现在您可以使用日志并观察您的数据库。您还可以使用调试和检查自定义算法的输入和输出等方法。</p><h1 id="bb68" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated"><strong class="ak">总结</strong></h1><p id="d8e8" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">我们的简报到此结束。在未来，我们将与您分享更多ShardingSphere-JDBC、ShardingSphere-Proxy和ShardingSphere-Parser的示例。</p><p id="1c25" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">如果您有任何问题或已经发现任何问题，我们期待您对我们的<a class="ae kg" href="https://github.com/apache/shardingsphere/issues" rel="noopener ugc nofollow" target="_blank"> GitHub问题</a>的评论，或者您可以提交您的请求并加入我们，或者加入我们的<a class="ae kg" href="http://apacheshardingsphere.slack.com./" rel="noopener ugc nofollow" target="_blank"> Slack社区</a>。我们欢迎任何想成为这个顶级项目的一部分并做出贡献的人。欲了解更多信息，请访问我们的<a class="ae kg" href="https://shardingsphere.apache.org/community/cn/contribute/" rel="noopener ugc nofollow" target="_blank">投稿指南</a>。</p><h1 id="5909" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">作者</h1><figure class="kh ki kj kk fd ll er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es ma"><img src="../Images/0619316a164026b55a6d401306cf0c11.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i84aQj3dT-iIkzhWQ4cDsQ.jpeg"/></div></div></figure><p id="8e23" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">我是江·，SphereEx中间件工程师&amp; Apache ShardingSphere撰稿人。目前，我主要关注ShardingSphere数据库中间件及其开源社区。</p><figure class="kh ki kj kk fd ll er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es lk"><img src="../Images/74e81f395dd1e6de7ec071968bc3f12a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YjlWZas9ZZQ1OkOdUWIJmQ.jpeg"/></div></div></figure><p id="719a" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">我叫侯阳，是SphereEx的一名中间件工程师。我热爱开源，我想和大家一起为建设一个更好的社区做出贡献。</p><h1 id="632b" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">ShardingSphere社区:</h1><p id="3277" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">sharding sphere Github:<a class="ae kg" href="https://github.com/apache/shardingsphere" rel="noopener ugc nofollow" target="_blank">https://github.com/apache/shardingsphere</a></p><p id="3708" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">推特:<a class="ae kg" href="https://twitter.com/ShardingSphere" rel="noopener ugc nofollow" target="_blank">https://twitter.com/ShardingSphere</a></p><p id="3490" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">ShardingSphere松弛通道:<a class="ae kg" href="http://apacheshardingsphere.slack.com" rel="noopener ugc nofollow" target="_blank">apacheshardingsphere.slack.com</a></p></div></div>    
</body>
</html>