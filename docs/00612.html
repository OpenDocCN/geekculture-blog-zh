<html>
<head>
<title>TypeScript Bultin Types. Part I</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">类型脚本布尔丁类型。第一部分</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/typescript-bultin-types-part-i-b39d702bb536?source=collection_archive---------17-----------------------#2021-03-07">https://medium.com/geekculture/typescript-bultin-types-part-i-b39d702bb536?source=collection_archive---------17-----------------------#2021-03-07</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="d647" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">大家好。今天，我们将讨论一些有用的TypeScript bultin类型，它们可以极大地简化您的代码并实现某种类型魔法。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/18387364352ca7b22a57dd66c2cece47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZTBEc1LAs4-0HBGgsr5Tfw.jpeg"/></div></div></figure><p id="4eba" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们从著名的类型<code class="du jp jq jr js b">Partial&lt;T&gt;</code>开始:</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="jt ju l"/></div></figure><p id="0f8a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于具有<code class="du jp jq jr js b">T</code>所有属性列表的对象，我们可以使用<code class="du jp jq jr js b">Partial&lt;T&gt;</code>或者只对其中的一部分使用<code class="du jp jq jr js b">Partial&lt;T&gt;</code>。一个空的物体<code class="du jp jq jr js b">{}</code>也可以用作<code class="du jp jq jr js b">Partial&lt;T&gt;</code>。但是我们不能传递属性不存在于<code class="du jp jq jr js b">T</code>中的对象。</p><p id="27a3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du jp jq jr js b">Partial&lt;T&gt;</code>是一个非常有用的工具，我们可以用它来进行数据库更新查询或者在http <code class="du jp jq jr js b">PATCH</code>方法体中，当我们不整组对象属性的时候。现在让我们弄清楚它是如何工作的:</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="jt ju l"/></div></figure><p id="0456" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正如您所看到的，它的类型定义非常简单，只有3行代码。<code class="du jp jq jr js b">[P in keyof T]</code>限制<code class="du jp jq jr js b">Partial&lt;T&gt;</code>只能拥有原始类型<code class="du jp jq jr js b">T</code>的属性，这就是为什么我们在第11行和第14行收到错误。<code class="du jp jq jr js b">T[P]</code>检查属性的类型与原始类型的属性相同，这就是第17行错误的原因。<code class="du jp jq jr js b">Partial&lt;T&gt;</code>的所有魔法都是由一个字符<code class="du jp jq jr js b">?</code>完成的，它标志着<code class="du jp jq jr js b">T</code>的所有属性都是可选的。因此，<code class="du jp jq jr js b">Partial&lt;T&gt;</code>会执行以下操作:</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="jt ju l"/></div><figcaption class="jv jw et er es jx jy bd b be z dx">This is an example of TypeScript powerful and flexible type system.</figcaption></figure><p id="7c61" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">很酷，不是吗？好的，下一步是什么？</p></div><div class="ab cl jz ka gp kb" role="separator"><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke"/></div><div class="hb hc hd he hf"><p id="0672" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du jp jq jr js b">Required&lt;T&gt;</code>做相反的转换，它标记了<code class="du jp jq jr js b">T</code>所有需要的属性:</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="jt ju l"/></div></figure><p id="4d94" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du jp jq jr js b">Partial&lt;T&gt;</code>定义大同小异，只有一个区别:<code class="du jp jq jr js b">?</code>被<code class="du jp jq jr js b">-?</code>代替。该操作符从属性中删除可选标志<code class="du jp jq jr js b">?</code>。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="jt ju l"/></div></figure><p id="5a9f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">老实说，我不确定<code class="du jp jq jr js b">Required&lt;T&gt;</code>是否非常有用，但是也许有一天我会面对它的真实用例。</p></div><div class="ab cl jz ka gp kb" role="separator"><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke"/></div><div class="hb hc hd he hf"><p id="1e9b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下一种类型是<code class="du jp jq jr js b">Readonly&lt;T&gt;</code></p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="jt ju l"/></div></figure><p id="fed0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du jp jq jr js b">Readonly&lt;T&gt;</code>将所有<code class="du jp jq jr js b">T</code>属性标记为只读。很多人认为它没用，但是它可以帮你避免意想不到的副作用，写出<a class="ae kg" href="https://en.wikipedia.org/wiki/Pure_function" rel="noopener ugc nofollow" target="_blank">纯函数</a>。例如在该<a class="ae kg" href="https://redux.js.org/" rel="noopener ugc nofollow" target="_blank"> Redux </a>功能中:</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="jt ju l"/></div></figure><p id="fea6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从TypeScript的角度来看，一切都是合法的，但对于Refux方法来说，这是完全错误的。我们不能像第7行那样改变reducer中的状态。接下来是<code class="du jp jq jr js b">Readonly&lt;T&gt;</code>:</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="jt ju l"/></div></figure><p id="49b5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">简单地添加<code class="du jp jq jr js b">Readonly</code>会限制状态的任何变化，并迫使我们创建一个新对象，而不是修改旧对象。如果你是函数式编程的忠实粉丝，你可以用<code class="du jp jq jr js b">Readonly&lt;T&gt;</code>来包装所有的函数参数，使得所有的函数都是纯函数。</p></div><div class="ab cl jz ka gp kb" role="separator"><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke"/></div><div class="hb hc hd he hf"><p id="1481" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">假设我们为REST API编写客户端，我们需要为API调用选项创建公共接口，并为所有http方法<code class="du jp jq jr js b">GET</code>、<code class="du jp jq jr js b">POST</code>、<code class="du jp jq jr js b">PUT</code>、<code class="du jp jq jr js b">DELETE</code>创建接口</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="jt ju l"/></div></figure><p id="1e9d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于<code class="du jp jq jr js b">GET</code>方法，我们不需要<code class="du jp jq jr js b">body</code>，对于<code class="du jp jq jr js b">POST</code>方法，我们不需要<code class="du jp jq jr js b">query</code>，因为所有数据都在<code class="du jp jq jr js b">body</code>中传递，以此类推。如您所见，这段代码包含了大量重复的属性声明。如果属性的类型改变或者添加了新的属性，保持它们都是最新的将是一件令人头疼的事情。我们能做点什么吗？当然，对于这种情况，TypeScript提供了<code class="du jp jq jr js b">Pick&lt;T, K&gt;</code>:</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="jt ju l"/></div></figure><p id="f8b1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du jp jq jr js b">Pick&lt;T, K&gt;</code>比前面的类型稍微复杂一点，它包含了第二个类型参数<code class="du jp jq jr js b">K</code>。<code class="du jp jq jr js b">K extends keyof T</code>表示<code class="du jp jq jr js b">K</code>可以是属性键之一，如下:</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="jt ju l"/></div></figure><p id="8ffd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">由于限制<code class="du jp jq jr js b">K extends keyof T</code>，我们只能选择在原始类型中定义的属性。我们从<code class="du jp jq jr js b">RESTApiRequestOption</code>中提取了<code class="du jp jq jr js b">url</code>属性，并继承了它的类型。所有其他属性都被忽略，不能使用。有意思，但是只提取一个属性用处不大。我们如何挑选两个或更多的属性？也可以使用类型联合:</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="jt ju l"/></div></figure><p id="0afd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们没有通过T20，而是通过了另一个魔术般的联盟<code class="du jp jq jr js b">'url' | 'method'</code>。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kh"><img src="../Images/4fe90f5019b7f4bacefd1a9746b95ae5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fo-cQ3_FU2bHZUUiCXDA7g.jpeg"/></div></div></figure><p id="e4fc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当TypeScript编译器迭代<code class="du jp jq jr js b">RESTApiRequestOptions</code>属性键时，根据指令<code class="du jp jq jr js b">[P in K]</code>检查<code class="du jp jq jr js b">'url' | 'method'</code>中的属性键是否存在。<code class="du jp jq jr js b">'url'</code>和<code class="du jp jq jr js b">'method'</code>都在<code class="du jp jq jr js b">'url' | 'method'</code>，这就是它的工作方式。现在让我们用<code class="du jp jq jr js b">Pick&lt;T, K&gt;</code>重写我们的例子:</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="jt ju l"/></div></figure><p id="57d5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">神奇吧。我们消除了重复并减少了代码。现在，如果我们更改原始接口中的某些属性类型，它将应用于所有其他类型。</p></div><div class="ab cl jz ka gp kb" role="separator"><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke"/></div><div class="hb hc hd he hf"><p id="1ba8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">TypeScript为我们提供了灵活的类型机制和强大的实用类型。我希望这篇文章能帮助你理解它的工作原理和使用方法。欢迎在评论中提出任何问题。</p><p id="ad26" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">今天到此为止。这个话题相当大，我决定把它分成几个部分。在下一篇文章中，我们将讨论<code class="du jp jq jr js b">Record&lt;K, T&gt;</code>、<code class="du jp jq jr js b">Exclude&lt;T, U&gt;</code>、<code class="du jp jq jr js b">Extract&lt;T, U&gt;</code>和<code class="du jp jq jr js b">Omit&lt;T, K&gt;</code>。</p><p id="065d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下次见，servus！</p><ul class=""><li id="5b4e" class="kj kk hi ih b ii ij im in iq kl iu km iy kn jc ko kp kq kr bi translated"><a class="ae kg" rel="noopener" href="/geekculture/typescript-bultin-types-part-i-b39d702bb536"> TypeScript内置类型部分I. ( </a> <code class="du jp jq jr js b"><a class="ae kg" rel="noopener" href="/geekculture/typescript-bultin-types-part-i-b39d702bb536">Partial</a></code> <a class="ae kg" rel="noopener" href="/geekculture/typescript-bultin-types-part-i-b39d702bb536">，</a> <code class="du jp jq jr js b"><a class="ae kg" rel="noopener" href="/geekculture/typescript-bultin-types-part-i-b39d702bb536">Required</a></code> <a class="ae kg" rel="noopener" href="/geekculture/typescript-bultin-types-part-i-b39d702bb536">，</a> <code class="du jp jq jr js b"><a class="ae kg" rel="noopener" href="/geekculture/typescript-bultin-types-part-i-b39d702bb536">Readonly</a></code> <a class="ae kg" rel="noopener" href="/geekculture/typescript-bultin-types-part-i-b39d702bb536">，</a> <code class="du jp jq jr js b"><a class="ae kg" rel="noopener" href="/geekculture/typescript-bultin-types-part-i-b39d702bb536">Pick</a></code> <a class="ae kg" rel="noopener" href="/geekculture/typescript-bultin-types-part-i-b39d702bb536"> ) </a></li><li id="0413" class="kj kk hi ih b ii ks im kt iq ku iu kv iy kw jc ko kp kq kr bi translated">TypeScript内置类型第二部分。( <code class="du jp jq jr js b"><a class="ae kg" rel="noopener" href="/geekculture/typescript-builtin-types-part-ii-2059803be7f6">Record</a></code> <a class="ae kg" rel="noopener" href="/geekculture/typescript-builtin-types-part-ii-2059803be7f6">，</a> <code class="du jp jq jr js b"><a class="ae kg" rel="noopener" href="/geekculture/typescript-builtin-types-part-ii-2059803be7f6">Exclude</a></code> <a class="ae kg" rel="noopener" href="/geekculture/typescript-builtin-types-part-ii-2059803be7f6">，</a> <code class="du jp jq jr js b"><a class="ae kg" rel="noopener" href="/geekculture/typescript-builtin-types-part-ii-2059803be7f6">Extract</a></code> <a class="ae kg" rel="noopener" href="/geekculture/typescript-builtin-types-part-ii-2059803be7f6">，</a> <code class="du jp jq jr js b"><a class="ae kg" rel="noopener" href="/geekculture/typescript-builtin-types-part-ii-2059803be7f6">Omit</a></code> <a class="ae kg" rel="noopener" href="/geekculture/typescript-builtin-types-part-ii-2059803be7f6"> ) </a></li><li id="5c72" class="kj kk hi ih b ii ks im kt iq ku iu kv iy kw jc ko kp kq kr bi translated"><a class="ae kg" href="https://luckylibora.medium.com/typescript-builtin-types-part-iii-e2b75107c482" rel="noopener"> TypeScript内置类型第三部分。(</a> <code class="du jp jq jr js b"><a class="ae kg" href="https://luckylibora.medium.com/typescript-builtin-types-part-iii-e2b75107c482" rel="noopener">NonNullable</a></code> <a class="ae kg" href="https://luckylibora.medium.com/typescript-builtin-types-part-iii-e2b75107c482" rel="noopener">，</a> <code class="du jp jq jr js b"><a class="ae kg" href="https://luckylibora.medium.com/typescript-builtin-types-part-iii-e2b75107c482" rel="noopener">Parameters</a></code> <a class="ae kg" href="https://luckylibora.medium.com/typescript-builtin-types-part-iii-e2b75107c482" rel="noopener">，</a> <code class="du jp jq jr js b"><a class="ae kg" href="https://luckylibora.medium.com/typescript-builtin-types-part-iii-e2b75107c482" rel="noopener">ReturnType</a></code> <a class="ae kg" href="https://luckylibora.medium.com/typescript-builtin-types-part-iii-e2b75107c482" rel="noopener">，</a> <code class="du jp jq jr js b"><a class="ae kg" href="https://luckylibora.medium.com/typescript-builtin-types-part-iii-e2b75107c482" rel="noopener">ConstructorParameters</a></code> <a class="ae kg" href="https://luckylibora.medium.com/typescript-builtin-types-part-iii-e2b75107c482" rel="noopener">，</a> <code class="du jp jq jr js b"><a class="ae kg" href="https://luckylibora.medium.com/typescript-builtin-types-part-iii-e2b75107c482" rel="noopener">InstanceType</a></code> <a class="ae kg" href="https://luckylibora.medium.com/typescript-builtin-types-part-iii-e2b75107c482" rel="noopener"> ) </a></li></ul></div></div>    
</body>
</html>