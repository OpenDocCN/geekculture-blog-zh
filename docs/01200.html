<html>
<head>
<title>Avoiding Large Chunks of Repetitive HTML in an Angular Component using <ng-template/></title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用<ng-template/>避免在角度组件中出现大量重复的HTML</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/avoiding-large-chunks-of-repetitive-html-in-an-angular-component-633c19d18c89?source=collection_archive---------8-----------------------#2021-04-01">https://medium.com/geekculture/avoiding-large-chunks-of-repetitive-html-in-an-angular-component-633c19d18c89?source=collection_archive---------8-----------------------#2021-04-01</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="5418" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您一定遇到过这种情况，在这种情况下，15行或更多的HTML需要在组件中重复，但使用不同/相同的数据。</p><p id="80a1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">每次需要的时候都写那些15行甚至更多的HTML，真的很傻。相反，我们可以使用Angular提供的资源来优化我们的HTML代码，每次只有3行。让我们看看我们如何能做到这一点。</p><p id="9822" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">考虑一个必须在组件的多个位置填充不同数据的表。</p><p id="225c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">组件</strong>:我定义了2个列表，它们将以表格的形式显示在组件中。为了简单起见，两个列表的列名是相同的。</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="566a" class="jm jn hi ji b fi jo jp l jq jr">import { Component} from ‘@angular/core’;</span><span id="338e" class="jm jn hi ji b fi js jp l jq jr">@Component({<br/>selector: ‘my-app’,<br/>templateUrl: ‘./app.component.html’,<br/>styleUrls: [ ‘./app.component.css’ ]<br/>})</span><span id="2b6e" class="jm jn hi ji b fi js jp l jq jr">export class <strong class="ji hj">AppComponent </strong>{</span><span id="a84f" class="jm jn hi ji b fi js jp l jq jr">public <strong class="ji hj">secondList</strong>=[{<br/>“userId”: 1,<br/>“id”: 6,<br/>“title”: “qui ullam ratione quibusdam voluptatem quia omnis”,<br/>“completed”: false<br/>},<br/>{<br/>“userId”: 1,<br/>“id”: 7,<br/>“title”: “illo expedita consequatur quia in”,<br/>“completed”: false<br/>},<br/>{<br/>“userId”: 1,<br/>“id”: 8,<br/>“title”: “quo adipisci enim quam ut ab”,<br/>“completed”: true<br/>},<br/>{<br/>“userId”: 1,<br/>“id”: 9,<br/>“title”: “molestiae perspiciatis ipsa”,<br/>“completed”: false<br/>},<br/>{<br/>“userId”: 1,<br/>“id”: 10,<br/>“title”: “illo est ratione doloremque quia maiores aut”,<br/>“completed”: true<br/>},<br/>{<br/>“userId”: 1,<br/>“id”: 11,<br/>“title”: “vero rerum temporibus dolor”,<br/>“completed”: true<br/>},<br/>{<br/>“userId”: 1,<br/>“id”: 12,<br/>“title”: “ipsa repellendus fugit nisi”,<br/>“completed”: true<br/>}];</span><span id="6874" class="jm jn hi ji b fi js jp l jq jr">public <strong class="ji hj">firstList</strong>=[{<br/>“userId”: 1,<br/>“id”: 1,<br/>“title”: “delectus aut autem”,<br/>“completed”: false<br/>},<br/>{<br/>“userId”: 1,<br/>“id”: 2,<br/>“title”: “quis ut nam facilis et officia qui”,<br/>“completed”: false<br/>},<br/>{<br/>“userId”: 1,<br/>“id”: 3,<br/>“title”: “fugiat veniam minus”,<br/>“completed”: false<br/>},<br/>{<br/>“userId”: 1,<br/>“id”: 4,<br/>“title”: “et porro tempora”,<br/>“completed”: true<br/>},<br/>{<br/>“userId”: 1,<br/>“id”: 5,<br/>“title”: “laboriosam mollitia et enim quasi adipisci quia provident illum”,<br/>“completed”: false<br/>}]<br/>}</span></pre><p id="e17a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们来看看模板。</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="3507" class="jm jn hi ji b fi jo jp l jq jr"><strong class="ji hj">&lt;ng-template #table let-userData=”data”&gt;</strong><br/>&lt;table&gt;<br/>&lt;tr&gt;<br/>&lt;th&gt;UserId&lt;/th&gt;<br/>&lt;th&gt;Id&lt;/th&gt;<br/>&lt;th&gt;Title&lt;/th&gt;<br/>&lt;th&gt;Completed&lt;/th&gt;<br/>&lt;/tr&gt;</span><span id="96e1" class="jm jn hi ji b fi js jp l jq jr">&lt;tr *ngFor=”let row of userData”&gt;<br/>&lt;td&gt;{{row.userId}}&lt;/td&gt;<br/>&lt;td&gt;{{row.id}}&lt;/td&gt;<br/>&lt;td&gt;{{row.title}}&lt;/td&gt;<br/>&lt;td&gt;{{row.completed}}&lt;/td&gt;<br/>&lt;/tr&gt;<br/>&lt;/table&gt;<br/>&lt;/ng-template&gt;</span><span id="e380" class="jm jn hi ji b fi js jp l jq jr">&lt;ng-container <strong class="ji hj">[ngTemplateOutlet]=”table” [ngTemplateOutletContext]=”{data:firstList}”</strong>&gt;<br/>&lt;/ng-container&gt;</span><span id="b27e" class="jm jn hi ji b fi js jp l jq jr">&lt;ng-container <strong class="ji hj">[ngTemplateOutlet]=”table” [ngTemplateOutletContext]=”{data:secondList}”</strong>&gt;<br/>&lt;/ng-container&gt;</span></pre><p id="bdda" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正如你所看到的，我只定义了这个表一次(14行),并且用了两次2组数据，每次只用了3行HTML。</p><p id="9df4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们已经向&lt; ng-template &gt;传递了一个名为<strong class="ih hj">表</strong>的引用，并在&lt; ng-container &gt;的<strong class="ih hj"> ngTemplateOutlet </strong>中引用它来访问模板。</p><p id="09f3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在<strong class="ih hj"> ngTemplateOutletContext </strong>中，我们已经将要在表中显示的数据作为键值对进行了传递。键的值是我们已经定义的两个列表。</p><p id="3fd8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该键在<ng-template>中用于将列表数据注入到变量<strong class="ih hj"> userData </strong>中。userData用于迭代表中的行</ng-template></p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="9d6c" class="jm jn hi ji b fi jo jp l jq jr"><strong class="ji hj">&lt;ng-template #table let-userData=”data”&gt;</strong></span></pre><p id="8082" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是一个非常简单的例子，其中只有14行HTML代码被优化为3行。但也可以更多。</p><p id="0428" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">查看下面的链接，获取上面示例的Stackblitz演示:</p><div class="jt ju ez fb jv jw"><a href="https://stackblitz.com/edit/angular-ivy-p16w8r?file=src/app/app.component.html" rel="noopener  ugc nofollow" target="_blank"><div class="jx ab dw"><div class="jy ab jz cl cj ka"><h2 class="bd hj fi z dy kb ea eb kc ed ef hh bi translated">angular-ivy-p16w8r - StackBlitz</h2><div class="kd l"><h3 class="bd b fi z dy kb ea eb kc ed ef dx translated">导出到Angular CLI的Angular应用程序的启动项目</h3></div><div class="ke l"><p class="bd b fp z dy kb ea eb kc ed ef dx translated">stackblitz.com</p></div></div><div class="kf l"><div class="kg l kh ki kj kf kk kl jw"/></div></div></a></div><p id="5608" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您还可以在子组件之间共享同一个模板。</p><p id="4fcf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">考虑一个父组件a及其子组件b。</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="adea" class="jm jn hi ji b fi jo jp l jq jr">export class <strong class="ji hj">ComponentA </strong>implements OnInit {</span><span id="f902" class="jm jn hi ji b fi js jp l jq jr">constructor() { }</span><span id="f5eb" class="jm jn hi ji b fi js jp l jq jr">ngOnInit() {}</span><span id="042e" class="jm jn hi ji b fi js jp l jq jr"><strong class="ji hj">public data:string=”hello world”;</strong><br/>}</span></pre><p id="0a46" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">组件模板:</strong></p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="872e" class="jm jn hi ji b fi jo jp l jq jr">&lt;<strong class="ji hj">ng-template</strong> <strong class="ji hj">#templateFromParent</strong> let-data=”data” let-component=”component”&gt;<br/>&lt;h4&gt;Same ng-template with different content in {{ component }}&lt;/h4&gt;<br/>&lt;p&gt;{{ data }}&lt;/p&gt;<br/>&lt;/ng-template&gt;</span><span id="be07" class="jm jn hi ji b fi js jp l jq jr">&lt;<strong class="ji hj">ng-container</strong><br/><strong class="ji hj">[ngTemplateOutlet]=”templateFromParent”</strong><br/><strong class="ji hj">[ngTemplateOutletContext]=”{ data: data, component: ‘Parent Component’}”</strong>&gt;&lt;/ng-container&gt;</span><span id="3366" class="jm jn hi ji b fi js jp l jq jr"><strong class="ji hj">&lt;app-component-b [templateFromParent]="templateFromParent"&gt;&lt;/app-component-b&gt;</strong></span></pre><p id="c2d3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在组件a中，我定义了引用<strong class="ih hj"> templateFromParent </strong>的可重用模板。我想在子组件ComponentB中重用相同的模板，但使用不同的数据。</p><p id="889a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如您所见，我已经通过属性绑定将引用传递给了子组件。</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="eb6c" class="jm jn hi ji b fi jo jp l jq jr"><strong class="ji hj">&lt;app-component-b [templateFromParent]="templateFromParent"&gt;&lt;/app-component-b&gt;</strong></span></pre><p id="3862" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> ComponentB类:</strong></p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="54b1" class="jm jn hi ji b fi jo jp l jq jr">export class <strong class="ji hj">ComponentB </strong>implements OnInit {<br/>constructor() { }</span><span id="7d9e" class="jm jn hi ji b fi js jp l jq jr"><strong class="ji hj">@Input() templateFromParent:TemplateRef&lt;any&gt;;</strong><br/><strong class="ji hj">public data:string=”good morning”;</strong></span><span id="31d9" class="jm jn hi ji b fi js jp l jq jr">ngOnInit() {}<br/>}</span></pre><p id="ba30" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">组件b模板:</strong></p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="087b" class="jm jn hi ji b fi jo jp l jq jr">&lt;ng-container <strong class="ji hj">[ngTemplateOutlet]=”templateFromParent”</strong><br/><strong class="ji hj">[ngTemplateOutletContext]=”{data:data,component:’Child Component’}”</strong>&gt;&lt;/ng-container&gt;</span></pre><p id="33c4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ngTemplateOutlet 现在已经被分配了从父组件ComponentA传来的模板引用。</p><p id="1e98" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，<ng-template>是在同一个组件中或者跨具有相同/不同数据的子组件重用同一个模板的绝佳选择。</ng-template></p></div></div>    
</body>
</html>