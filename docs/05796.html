<html>
<head>
<title>Kotlin Multiplatform Mobile — An iOS Engineer’s Hot Take</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Kotlin多平台移动设备iOS工程师的热门选择</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/kotlin-multiplatform-mobile-an-ios-engineers-hot-take-26d08f5eaadb?source=collection_archive---------7-----------------------#2021-07-30">https://medium.com/geekculture/kotlin-multiplatform-mobile-an-ios-engineers-hot-take-26d08f5eaadb?source=collection_archive---------7-----------------------#2021-07-30</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/bfc9650168a477039c92eda1d424c9a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QwxTSB3pHoZ_9rL9zQKGAA.png"/></div></div></figure><div class=""/><p id="5133" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="jo">最初发表于</em><a class="ae jp" href="https://blog.malcolmk.com/kotlin-multiplatform-mobile-an-ios-engineers-hot-take-ckrq8k9i80av8zcs13s1me7go" rel="noopener ugc nofollow" target="_blank"><em class="jo">【blog.malcolmk.com】</em></a><em class="jo">。</em></p><p id="1e7e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在本文中，我将从一个iOS工程师的角度讨论为什么我认为Kotlin多平台移动设备<em class="jo"> (KMM) </em>是跨平台开发的未来。</p><p id="bfb9" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这是一篇非常自以为是的文章，我很清楚有些人可能会有相反的意见，因此——热选。</p><blockquote class="jq jr js"><p id="5fd6" class="iq ir jo is b it iu iv iw ix iy iz ja jt jc jd je ju jg jh ji jv jk jl jm jn hb bi translated"><em class="ht">热拿</em>(名词)<em class="ht"> —一段文字或演讲，尤其是在互联网上，给出某人对某个话题的个人观点，通常是未经仔细思考且很多人很可能不同意的强烈观点</em> <a class="ae jp" href="https://dictionary.cambridge.org/dictionary/english/hot-take" rel="noopener ugc nofollow" target="_blank"> <em class="ht">剑桥词典</em> </a></p></blockquote><p id="b1fb" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你有没有下载一个应用程序，打开它，浏览它，并认为有些事情就是感觉不对劲？有没有想过为什么一个应用不流畅，为什么有些元素看起来格格不入？有可能这款应用是使用跨平台框架开发的。</p><p id="0023" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">跨平台开发的承诺是“一次编码，随处部署”。虽然像React-Native和Flutter这样的框架确实很好地实现了这一承诺，但也有一些警告引起了人们的关注。用户界面和最新的平台特性是我觉得这些框架不足的地方。实际上，这可能不是框架的错误，而是工程师没有花时间确保最终结果符合特定的平台标准。</p><p id="c68f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要开发一个好的跨平台应用程序，你必须意识到平台的差异并迎合它们。iOS有它的人机界面准则，Android有材质设计。为了让你的应用在设备上感觉舒适，你必须坚持平台原则。</p><p id="6ea6" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这导致必须为每个平台编写代码，这在开发过程中造成了一些麻烦。“我被许诺写一次，到处部署。但是为了让它看起来漂亮并正常工作，我还是要编码两次？”最终，你可能会陷入一个不理想的境地，你的代码库有太多的<em class="jo"> if </em>或<em class="jo"> switch </em>语句来迎合特定平台的代码。</p><figure class="jx jy jz ka fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es jw"><img src="../Images/7572b3dd4e5a81650eb7928cc5bd268c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*wpolAOcp-2CzZUBh"/></div></div></figure><blockquote class="jq jr js"><p id="ab7b" class="iq ir jo is b it iu iv iw ix iy iz ja jt jc jd je ju jg jh ji jv jk jl jm jn hb bi translated"><em class="ht"> Kotlin Multiplatform Mobile允许您为iOS和Android应用程序的业务逻辑使用单一代码库。您只需要在必要的地方编写特定于平台的代码，例如，实现本机UI或使用特定于平台的API。——</em><a class="ae jp" href="https://kotlinlang.org/lp/mobile/" rel="noopener ugc nofollow" target="_blank"><em class="ht">Kotlin.org</em></a></p></blockquote><p id="0010" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">对于跨平台世界来说，KMM是一个相对较新的框架<em class="jo"> (Alpha于2020年8月发布)</em>，它使你能够在你的Android和iOS应用程序之间共享公共代码。这是通过创建一个用Kotlin编写的共享模块，然后编译成字节码和原生iOS来实现的。</p><p id="eeda" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">与其他跨平台框架不同，KMM让您可以选择共享代码的哪些方面。您可以决定尽可能少地共享代码，或者相反。使用<a class="ae jp" href="https://kotlinlang.org/docs/native-cocoapods.html#use-a-kotlin-gradle-project-as-a-cocoapods-dependency" rel="noopener ugc nofollow" target="_blank"> Cocoapods </a>和<a class="ae jp" href="https://johnoreilly.dev/posts/kotlinmultiplatform-swift-package/" rel="noopener ugc nofollow" target="_blank"> SPM </a>可以将共享代码模块包含在现有项目中。</p><p id="eb42" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">KMM目前没有用户界面组件，这允许你保持你的用户界面原生。不需要学习新的UI语言。您还可以使用所有最新的平台功能，如SwiftUI和JetPack Compose。</p><p id="2487" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我必须说，JetBrains团队为KMM创建的文档和资源给我留下了深刻的印象。自己看看<a class="ae jp" href="https://youtube.com/playlist?list=PLlFc5cFwUnmy_oVc9YQzjasSNoAk4hk_C" rel="noopener ugc nofollow" target="_blank"> Youtube频道</a>和<a class="ae jp" href="https://kotlinlang.org/docs/mobile/home.html" rel="noopener ugc nofollow" target="_blank">官方文档</a>。⭐️</p><figure class="jx jy jz ka fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es kb"><img src="../Images/299cf86e14f03293fc5926327a07077e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6vlrdcPjzXcNnHMl"/></div></div></figure><h1 id="40e4" class="kc kd ht bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">我的主要收获</h1><ul class=""><li id="9f27" class="la lb ht is b it lc ix ld jb le jf lf jj lg jn lh li lj lk bi translated"><strong class="is hu"> <em class="jo">灵活性</em> </strong>，只分享你想分享的代码。</li><li id="6e48" class="la lb ht is b it ll ix lm jb ln jf lo jj lp jn lh li lj lk bi translated"><strong class="is hu"> <em class="jo">编译成字节码</em> </strong>，不会像其他跨平台框架一样增加二进制大小。</li><li id="4547" class="la lb ht is b it ll ix lm jb ln jf lo jj lp jn lh li lj lk bi translated"><strong class="is hu"> <em class="jo">原生UI </em> </strong>，可以使用UIKit和SwiftUI。</li></ul><p id="5fe4" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hu"> <em class="jo"> 1。我一定要学科特林吗？</em>T25】</strong></p><p id="048d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">是的。要为共享代码模块做贡献，你必须学习一些Kotlin。这可能是一个很大的学习曲线，但我们作为iOS工程师喜欢Swift的大部分东西对Kotlin来说也是如此。类型安全、可选性和干净的语法在Kotlin中都有。</p><p id="8484" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hu">2<em class="jo">2。我必须在Android Studio中编码吗？</em>T29】</strong></p><p id="1c68" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">是的。不。可能吧。要成为应用程序共享代码的贡献者，你可能必须使用Android studio，但对于所有其他本机代码，你仍然可以使用Xcode。</p><p id="c6e5" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hu"> <em class="jo"> 3。我将如何调试Kotlin代码？</em> </strong></p><p id="785d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">使用Android Studio。</p><p id="223e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hu"> <em class="jo"> 4。库、Cocoapods和Swift包？</em> </strong></p><p id="93f4" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您可以在iOS项目中正常使用库、Cocoapods和包。</p><p id="099e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hu"> <em class="jo"> 5。KMM是如何处理并发的？</em>T41】</strong></p><p id="108e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">使用Kotlin/Native。请阅读JetBrains关于kot Lin/原生内存管理路线图的<a class="ae jp" href="https://blog.jetbrains.com/kotlin/2020/07/kotlin-native-memory-management-roadmap/" rel="noopener ugc nofollow" target="_blank">这篇文章</a>以获得更详细的解释。</p><p id="3874" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">还有问题吗？参见Kotlin.org上<a class="ae jp" href="https://kotlinlang.org/docs/mobile/faq.html" rel="noopener ugc nofollow" target="_blank">的常见问题页面</a></p><p id="56d7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">老实说，对于跨平台开发来说，没有什么灵丹妙药。让我们来看看缺点:</p><p id="c5dc" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hu"> 1。没有共享UI </strong></p><p id="f88f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">虽然有些人可能认为这是一个骗局，但另一方面，我认为这是一个职业。我不想有一个共享的用户界面。我宁愿有两个目标，一个在SwiftUI中，另一个在Jetpack Compose中。KMM目前没有提供共享UI组件的方法。我希望他们保持这种方式，这样应用程序可以保持他们的原生感觉。如果你想共享UI组件，那么ReactNative或Flutter是最合适的。</p><p id="606f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hu"> 2。生产准备就绪</strong></p><p id="55a4" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">对于跨平台世界来说，KMM是一个相当新的玩家，仍然被认为处于开发阶段。一些功能仍处于开发的alpha/实验阶段。我不认为这是不使用它的理由。来自网飞和CashApp的团队已经在生产中使用KMM。开发团队非常擅长交流组件的稳定性，并且有一个专门的<a class="ae jp" href="https://kotlinlang.org/docs/components-stability.html" rel="noopener ugc nofollow" target="_blank">页面用于这个</a>。</p><p id="367d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hu"> 3。新的构建工具</strong></p><p id="b4fb" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">作为一名iOS开发人员，我已经习惯了Xcode和它的怪癖，比如必须虔诚地清除派生数据。必须学习如何使用Android Studio和Gradle将是一个主要障碍。共享代码需要在Android Studio中调试。对于一个iOS工程师来说，你现在需要两个ide来开发，而Android工程师可以从Android Studio完成所有事情。我认为新工具将是iOS开发者面临的最大挑战。</p><p id="5c95" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hu"> 4。联网</strong></p><p id="7d4a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">虽然支持使用Ktor库进行联网，但是使用GraphQL进行联网的开发仍处于试验阶段。我找不到任何与gRPC 联网的解决方案。这些限制使使用这些技术的团队失去了KMM。</p><p id="e348" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hu"> 4。复杂性</strong></p><p id="1b59" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">引入KMM或任何跨平台框架都会增加应用程序开发的复杂性。开发生命周期涉及的方面更多。KMM仍处于起步阶段，肯定会经历一些阵痛。由于社区仍然很小，可能没有足够的在线资源来帮助解决人们可能遇到的一些问题。</p><p id="1eae" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">也就是说，如果把KMM介绍给一个已经有经验丰富的Android工程师的团队，我相信学习曲线会加快，因为他们可以帮助你解决你在Android studio或Gradle上可能遇到的任何错误。</p><p id="37ba" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我知道这种情况发生的可能性很小，但是如果Xcode有一个KMM插件的话，那就太棒了。</p><p id="fff8" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">使用KMM进行应用程序开发还有一些其他的缺点，但是本着保持这篇文章简洁的精神，我们不会讨论它们。我在下面提供了一个参考资料列表，详细介绍了其他一些缺点，比如ObjC——互操作性、内存处理和多线程。</p><p id="9742" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hu">场景:</strong> <em class="jo">你在一个有专门的iOS和Android团队的团队中工作。你正在开发一个新功能。该特性的业务逻辑已经设计好，可以进行开发了。两个团队各走各的路，编写特性代码。测试时间到了，QA报告说该功能在Android上运行良好，但在iOS上有问题，反之亦然。</em></p><p id="5021" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这是许多人都经历过的情况。拥有一个共享的代码库可能是上述情况的解决方案。应用程序的业务逻辑只有一个真实的来源，这带来了可预测性和稳定性。</p><p id="e031" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我最喜欢Kotlin多平台手机的一点是它的灵活性。你只需要分享你决定分享的东西。UI组件没有被桥接，它们仍然是本机的。代码被编译成字节码。</p><p id="0cff" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这些就是我认为KMM应该受到iOS社区欢迎的原因。它为社区之间的协作创造了环境，并引入了学习新语言和工具的挑战。🤖 🤝🍏</p><p id="4602" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我致力于解决帮助人们的问题。下载我们应用程序的人通常不关心应用程序的制作技术。用户想要的是好的产品，如果KMM为团队提供了一种更早交付的方式，那么这就是一个胜利。🚀</p><p id="50e7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我期待着KMM的所有新功能和这个社区的发展。感谢阅读我对为什么我作为一名iOS工程师喜欢KMM的看法！你对Kotlin多平台手机有什么看法？</p><h1 id="8a41" class="kc kd ht bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">资源</h1><ol class=""><li id="a9e1" class="la lb ht is b it lc ix ld jb le jf lf jj lg jn lq li lj lk bi translated"><a class="ae jp" href="https://kotlinlang.org/docs/mobile/home.html" rel="noopener ugc nofollow" target="_blank">科特林多平台文档</a></li><li id="2ff7" class="la lb ht is b it ll ix lm jb ln jf lo jj lp jn lq li lj lk bi translated"><a class="ae jp" rel="noopener" href="/icerock/the-dos-and-donts-of-mobile-development-with-kotlin-multiplatform-db7c098545c0">使用Kotlin多平台进行移动开发的注意事项</a></li><li id="53fd" class="la lb ht is b it ll ix lm jb ln jf lo jj lp jn lq li lj lk bi translated">Kotlin多平台——所有移动应用开发的补救措施？</li><li id="5e6f" class="la lb ht is b it ll ix lm jb ln jf lo jj lp jn lq li lj lk bi translated"><a class="ae jp" href="https://proandroiddev.com/kotlin-multiplatform-a-panacea-for-mobile-app-development-c41ffe850d1b" rel="noopener ugc nofollow" target="_blank"> Kotlin多平台——移动应用开发的灵丹妙药？</a></li><li id="68d3" class="la lb ht is b it ll ix lm jb ln jf lo jj lp jn lq li lj lk bi translated"><a class="ae jp" rel="noopener" href="/kodein-koders/we-asked-an-ios-developer-his-thoughts-after-working-with-kotlin-multiplatform-mobile-b08b8750be33">我们询问了一位iOS开发者在使用kot Lin/多平台移动设备后的想法</a></li></ol></div><div class="ab cl lr ls gp lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="hb hc hd he hf"><p id="a356" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="jo">原载于</em><a class="ae jp" href="https://blog.malcolmk.com/kotlin-multiplatform-mobile-an-ios-engineers-hot-take-ckrq8k9i80av8zcs13s1me7go" rel="noopener ugc nofollow" target="_blank"><em class="jo">https://blog.malcolmk.com</em></a><em class="jo">。</em></p></div></div>    
</body>
</html>