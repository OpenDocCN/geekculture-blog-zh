<html>
<head>
<title>Go 1.18 new generic feature</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Go 1.18新通用功能</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/go-1-18-new-generic-feature-7ce4d2b21248?source=collection_archive---------5-----------------------#2022-07-13">https://medium.com/geekculture/go-1-18-new-generic-feature-7ce4d2b21248?source=collection_archive---------5-----------------------#2022-07-13</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/1cd703df53d7b735114a6b5731874fa4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ezob5qpTrFZBYFE1tEtvVA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">go generics</figcaption></figure><p id="341c" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">Go是广泛用于创建微服务和基于web的应用程序的语言之一。大多数项目现在都在将他们的代码库转移到golang。go在标准库中提供的特性、易用性及其在多处理器系统上的快速执行是其需求不断增长的原因。</p><p id="726f" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">虽然程序员来自python、java等语言，这些语言提供了许多动态函数来处理数据结构，可以很容易地用来修改和处理数据结构，如push、pop等。而在golang中，你必须使用带有线性函数的基本数据结构(如在循环中)来修改或处理它们，如处理队列、堆栈。</p><p id="556b" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">为了提供处理数据结构的函数，golang团队一直在开发静态类型语言，以在其标准库中提供特性和数据结构，从而使python或其他语言更易于使用。</p></div><div class="ab cl js jt gp ju" role="separator"><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx"/></div><div class="hb hc hd he hf"><p id="7806" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在go 1.18的新更新中提供了使用泛型处理不同数据类型的一个最常见的特性。因为golang是静态语言，所以它不能提供一个可以容纳多种类型的动态数据类型。例如，python提供了max和min函数，用于查找数组中的最小数字或查找两个对象或数字中的最小值。而在golang的情况下，我们需要为每个原语类型(int或string)创建两个独立的函数。虽然有一种方法可以让我们将interface作为泛型类型使用，但是当使用interface时，我们仍然需要提取底层的原语类型来执行执行，这也不是一种通用的做事方法。</p><p id="8ef0" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在go 1.18中，引入了一些新特性，这是go用户不断询问的问题，其中之一是引入泛型。go中引入的泛型与python或任何其他语言都不相似，但它承诺了相同的功能。我们可以使用<code class="du jz ka kb kc b">any</code> type在函数中声明类型及其参数，并在方法中提供类型的元类型，然后将其用于多个原始类型。这些被称为类型约束，在参数前用函数声明。</p><p id="bbf8" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">举一个例子，创建一个方法来处理反转字符串，然后使用一个泛型方法来实现相同的整数切片。</p><figure class="kd ke kf kg fd ij"><div class="bz dy l di"><div class="kh ki l"/></div></figure><p id="5285" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在上面的函数中，如果我们需要创建一个相同的逻辑来反转整数切片，我们需要一个单独的方法来接受不同的类型，即使逻辑是相似的。</p><p id="f784" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我们可以将一个类型声明为<code class="du jz ka kb kc b">any</code>类型来创建一个泛型方法，它可以接受整数和字符串来分别反转它们。这将通过声明<code class="du jz ka kb kc b">any</code>类型的元类型来创建，元类型将具有整数和字符串的值类型。</p><figure class="kd ke kf kg fd ij"><div class="bz dy l di"><div class="kh ki l"/></div><figcaption class="iq ir et er es is it bd b be z dx">Generic method implementation</figcaption></figure><p id="81c8" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在上面的例子中，我们可以看到我们使用了一个单一的泛型函数来定义类型<code class="du jz ka kb kc b">any</code>的元类型，它用于接受任何类型的接口。这可用于创建在多种类型上提供类似功能的通用函数。</p><p id="b553" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">类型约束允许我们声明一个类型以及函数参数，函数参数可用于适应在声明约束时定义的多种类型。例如:- <code class="du jz ka kb kc b">func SumIntsOrFloats[K comparable, V int64 | float64](m map[K]V)</code></p><p id="9e5e" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在上述函数中声明约束类型的另一种方法是使用一个内部定义了原语的接口。</p><pre class="kd ke kf kg fd kj kc kk kl aw km bi"><span id="8b08" class="kn ko hi kc b fi kp kq l kr ks">type Number interface {<br/>    int64 | float64<br/>}</span></pre><p id="5719" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">声明后，可以通过定义声明的函数约束类型所期望的类型来调用函数，也可以在对泛型函数的调用中跳过类型参数(方括号中的类型名)。Go编译器可以从其他参数中推断出类型参数。</p><pre class="kd ke kf kg fd kj kc kk kl aw km bi"><span id="5ed9" class="kn ko hi kc b fi kp kq l kr ks">SumIntsOrFloats[string, int64](ints), ==&gt; generic function call<br/>SumIntsOrFloats[string, float64](floats))<br/>or<br/>SumIntsOrFloats(ints), ==&gt; generic function call<br/>SumIntsOrFloats(floats))</span></pre></div><div class="ab cl js jt gp ju" role="separator"><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx"/></div><div class="hb hc hd he hf"><p id="9f5f" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我用了一个相反的例子来描述我们如何实现契约类型来创建一个泛型函数。但是有许多常用的功能可以用类似的方式实现，即</p><ul class=""><li id="ce00" class="kt ku hi iw b ix iy jb jc jf kv jj kw jn kx jr ky kz la lb bi translated">查找切片中最小/最大的元素</li><li id="9498" class="kt ku hi iw b ix lc jb ld jf le jj lf jn lg jr ky kz la lb bi translated">找出切片的平均值/标准偏差</li><li id="0b54" class="kt ku hi iw b ix lc jb ld jf le jj lf jn lg jr ky kz la lb bi translated">计算地图的并/交</li><li id="6354" class="kt ku hi iw b ix lc jb ld jf le jj lf jn lg jr ky kz la lb bi translated">在节点/边图中查找最短路径</li><li id="290b" class="kt ku hi iw b ix lc jb ld jf le jj lf jn lg jr ky kz la lb bi translated">对切片/图应用变换函数，返回新的切片/图</li></ul></div><div class="ab cl js jt gp ju" role="separator"><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx"/></div><div class="hb hc hd he hf"><blockquote class="lh li lj"><p id="a5a7" class="iu iv lk iw b ix iy iz ja jb jc jd je ll jg jh ji lm jk jl jm ln jo jp jq jr hb bi translated"><strong class="iw hj">如何联系到</strong> :-如有相关疑问，请发邮件至【himanshusdec8@gmail.com】:<em class="hi"/>。</p></blockquote><p id="5f4d" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">拍手声👏如果你喜欢这篇文章。关注<a class="lo lp ge" href="https://medium.com/u/64edd4213f30?source=post_page-----7ce4d2b21248--------------------------------" rel="noopener" target="_blank"> Himanshu Chaudhary </a>获取更多关于云和云技术的文章。谢谢读者。🙂</p><p id="138a" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">参考文件的链接:-</p><ul class=""><li id="fdcb" class="kt ku hi iw b ix iy jb jc jf kv jj kw jn kx jr ky kz la lb bi translated"><a class="ae lq" href="https://go.dev/blog/why-generics" rel="noopener ugc nofollow" target="_blank">https://go.dev/blog/why-generics</a></li></ul></div></div>    
</body>
</html>