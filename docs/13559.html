<html>
<head>
<title>How to Track Machine Learning Experiments with HarperDB</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用HarperDB跟踪机器学习实验</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/how-to-track-machine-learning-experiments-with-harperdb-e9d0feff4551?source=collection_archive---------12-----------------------#2022-07-15">https://medium.com/geekculture/how-to-track-machine-learning-experiments-with-harperdb-e9d0feff4551?source=collection_archive---------12-----------------------#2022-07-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="e73f" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">正确跟踪你的机器学习实验比你想象的要容易</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/e15f33054befefb53eb282f1a4753b49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6YzyeSUt-5fVTaFRICiKyA.jpeg"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Photo by ThisIsEngineering from <a class="ae jn" href="https://www.pexels.com/photo/graph-on-laptop-screen-3912976/" rel="noopener ugc nofollow" target="_blank">Pexels:</a></figcaption></figure><p id="1986" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在做机器学习项目的时候，你会进行不同的机器学习实验，才会得出最终性能最好的ML模型。</p><p id="266e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这里有一些你可以进行的机器学习实验:</p><ul class=""><li id="ad57" class="kk kl hi jq b jr js ju jv jx km kb kn kf ko kj kp kq kr ks bi translated">测试各种算法，以确定哪种算法对您试图解决的问题(例如，分类问题)最有效。</li><li id="e94b" class="kk kl hi jq b jr kt ju ku jx kv kb kw kf kx kj kp kq kr ks bi translated">根据模型性能选择要处理的重要特征。</li><li id="3326" class="kk kl hi jq b jr kt ju ku jx kv kb kw kf kx kj kp kq kr ks bi translated">微调模型以提高其性能(例如，网格搜索技术)。</li><li id="16b7" class="kk kl hi jq b jr kt ju ku jx kv kb kw kf kx kj kp kq kr ks bi translated">解决过拟合和欠拟合对模型性能的影响</li><li id="c71b" class="kk kl hi jq b jr kt ju ku jx kv kb kw kf kx kj kp kq kr ks bi translated">完成一些与你正在解决的问题相关的其他任务。</li></ul><h1 id="d289" class="ky kz hi bd la lb lc ld le lf lg lh li io lj ip lk ir ll is lm iu ln iv lo lp bi translated">为什么跟踪ML实验很重要？</h1><p id="72d9" class="pw-post-body-paragraph jo jp hi jq b jr lq ij jt ju lr im jw jx ls jz ka kb lt kd ke kf lu kh ki kj hb bi translated">跟踪你的机器学习实验是很重要的，因为这样做将有助于你对将要部署到生产中的ML模型做出最终决定。在分析了你所做的许多不同的ML实验的结果后，你会更好地做到这一点。</p><p id="75b8" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">你进行的ML实验越多，就越难记住什么有效，什么无效。偶尔，您可能会有一个非常好的结果，但是因为花了几个小时或几天来训练，您已经修改了代码。而现在你已经不记得你用什么参数达到这个结果了！</p><p id="34cc" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">数据科学家的一个常见做法是在数字或物理纸上手动记录他们的ML实验。但是使用<strong class="jq hj">打印语句</strong>(对于Python编程语言来说)来查看实验输出是无效的。这是因为当您执行另一个实验时，上一个实验的输出会丢失。</p><p id="04fe" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">幸运的是，您可以通过将所有结果保存在一个名为<a class="ae jn" href="https://harperdb.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jq hj">【哈泼德布】</strong> </a>的数据库中来自动跟踪ML实验。它不仅设置简单，而且很容易适应您现有的工作流，而且您还可以通过使用简单的Rest API与您的队友分享您的机器学习实验结果。</p><h1 id="19ae" class="ky kz hi bd la lb lc ld le lf lg lh li io lj ip lk ir ll is lm iu ln iv lo lp bi translated">什么是HarperDB？</h1><p id="43a3" class="pw-post-body-paragraph jo jp hi jq b jr lq ij jt ju lr im jw jx ls jz ka kb lt kd ke kf lu kh ki kj hb bi translated">HarperDB是一个快速灵活的SQL/NoSQL数据管理平台。您可以将它用于许多不同的事情，包括但不限于快速应用程序开发、分布式计算、边缘计算、SaaS等等。</p><p id="a1d5" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">HarperDB是完全索引的，不会重复数据，可以在从边缘到云的任何设备上运行。</p><p id="919c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">它还兼容任何编程语言，包括Python、JavaScript、Java等。</p><p id="fe78" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">以下是HarperDB上可用的一些功能的列表:</p><ul class=""><li id="b21e" class="kk kl hi jq b jr js ju jv jx km kb kn kf ko kj kp kq kr ks bi translated">单端点API</li><li id="cf12" class="kk kl hi jq b jr kt ju ku jx kv kb kw kf kx kj kp kq kr ks bi translated"><a class="ae jn" href="https://harperdb.io/docs/custom-functions/" rel="noopener ugc nofollow" target="_blank">自定义功能</a>(类似Lambda的应用开发平台，可直接访问HarperDB的核心方法)</li><li id="8ec7" class="kk kl hi jq b jr kt ju ku jx kv kb kw kf kx kj kp kq kr ks bi translated">允许JSON和CSV文件插入</li><li id="a3c3" class="kk kl hi jq b jr kt ju ku jx kv kb kw kf kx kj kp kq kr ks bi translated">支持完整CRUD操作的SQL查询</li><li id="b425" class="kk kl hi jq b jr kt ju ku jx kv kb kw kf kx kj kp kq kr ks bi translated">支持Math.js和GeoJSON</li><li id="b0fa" class="kk kl hi jq b jr kt ju ku jx kv kb kw kf kx kj kp kq kr ks bi translated">需要有限的数据库配置</li></ul><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es lv"><img src="../Images/f5a3d1b171430d9b849c92e30084e9d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/0*X17L6g2TnM3GTUdm"/></div><figcaption class="jj jk et er es jl jm bd b be z dx">Logo from harperdb.io</figcaption></figure><p id="080b" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">HarperDB有一个内置的HTTP API、用于用户定义的端点的自定义函数，以及一个动态模式，可以帮助您在将实验结果存储在HarperDB云实例中后与同事共享它们。</p><p id="5b74" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">您还可以将ML实验的结果快速下载为CSV文件，以便在做出最终决定之前进行额外的分析。</p><p id="f4d9" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在本文中，您将学习如何使用HarperDB轻松管理您的机器学习实验结果。</p><p id="f497" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我们开始吧🚀</p><h1 id="fab8" class="ky kz hi bd la lb lc ld le lf lg lh li io lj ip lk ir ll is lm iu ln iv lo lp bi translated">如何设置HarperDB</h1><p id="7f2a" class="pw-post-body-paragraph jo jp hi jq b jr lq ij jt ju lr im jw jx ls jz ka kb lt kd ke kf lu kh ki kj hb bi translated">HarperBB需要一个帐户，您需要在使用之前配置HarperDB云实例。要做到这两点，您可以遵循以下步骤。</p><h2 id="c3d8" class="lw kz hi bd la lx ly lz le ma mb mc li jx md me lk kb mf mg lm kf mh mi lo mj bi translated">1.创建一个HarperDB帐户</h2><p id="ab3e" class="pw-post-body-paragraph jo jp hi jq b jr lq ij jt ju lr im jw jx ls jz ka kb lt kd ke kf lu kh ki kj hb bi translated">你可以访问https://Harper db . io/然后点击导航栏看到一个名为“免费开始”的链接。点击它以创建您的帐户。</p><p id="0d0f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果您已经有一个帐户，请使用以下网址【https://studio.harperdb.io/ T2】用您的凭证登录。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mk"><img src="../Images/cc7de78a8fb73713c249dbaa979f502c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*iPOEbV9dfDeLsdA0"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Screenshot from harperdb.io</figcaption></figure><p id="7b96" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在注册过程中，您需要提供详细信息，如您的姓名、电子邮件地址和所需的子域。HarperDB将自动为您建立一个新的子域。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ml"><img src="../Images/a571220b64a54575fd3aba8dc9e57d69.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*9pXyWK4pRBsytjVD"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Screenshot from harperdb.io</figcaption></figure><h2 id="c001" class="lw kz hi bd la lx ly lz le ma mb mc li jx md me lk kb mf mg lm kf mh mi lo mj bi translated">2.添加您的帐户密码</h2><p id="b013" class="pw-post-body-paragraph jo jp hi jq b jr lq ij jt ju lr im jw jx ls jz ka kb lt kd ke kf lu kh ki kj hb bi translated">下一步是为您的帐户添加一个强密码，以完成您的帐户注册过程。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mm"><img src="../Images/5583669f6f9212c9f4c04ddbb69b91a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:704/0*xxCR6SfmRBO-cljp"/></div><figcaption class="jj jk et er es jl jm bd b be z dx">Screenshot from harperdb.io</figcaption></figure><h2 id="5a6f" class="lw kz hi bd la lx ly lz le ma mb mc li jx md me lk kb mf mg lm kf mh mi lo mj bi translated">3.创建一个HarperDB云实例</h2><p id="b1f4" class="pw-post-body-paragraph jo jp hi jq b jr lq ij jt ju lr im jw jx ls jz ka kb lt kd ke kf lu kh ki kj hb bi translated">注册后，您需要创建一个云实例来存储和获取您的机器学习实验的结果。您需要单击“创建新的HarperDB云实例”来向您的帐户添加新的实例。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ml"><img src="../Images/594fa66812100af67a81fb1aafe5bc30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Wzc4L8LTCu2HQI3f"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Screenshot from harperdb.io</figcaption></figure><p id="6fe0" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">您将看到下图，其中您需要选择实例类型。对于本教程，您需要选择<strong class="jq hj"> AWS或威瑞森波长Harper db instance</strong>。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mk"><img src="../Images/4a51af0d64048524341f4ff5de81601c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7kJGRGkLvg8psrQ5"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Screenshot from harperdb.io</figcaption></figure><p id="c370" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">然后你需要选择云提供商。这里您将使用默认选项，然后单击<strong class="jq hj">实例信息</strong>。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mn"><img src="../Images/5f3a720600ff829ed3f706d079155882.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Pd2FJwrdoIQpHcUP"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Screenshot from harperdb.io</figcaption></figure><p id="cd7f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在Instance info页面上，您需要提供云实例的名称和访问它的凭证。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mo"><img src="../Images/ccafb1727bf71726a8c0fb348d9db650.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/0*TAcXLUYKn71pVNDP"/></div><figcaption class="jj jk et er es jl jm bd b be z dx">Screenshot from harperdb.io</figcaption></figure><p id="d143" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">然后单击“实例详细信息”按钮。在specification页面上，您需要选择实例RAM大小、实例存储大小和实例区域。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mp"><img src="../Images/3965f84d82c958c8121a223c3d24b2dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JfwfFaClAOZmAYRY"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Screenshot from harperdb.io</figcaption></figure><p id="8ea9" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果您正在使用免费服务层，您应该将上面屏幕上的所有设置保留为默认值，然后单击“确认实例详细信息”按钮。</p><p id="eabb" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">最后一步是确认实例细节并添加HarperDB云实例。确保再次检查详细信息，然后单击Add Instance按钮。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mq"><img src="../Images/9069f628ccf3d3829647f6b8f91efe96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1250/0*1vo78XIaBkP7Vj1z"/></div><figcaption class="jj jk et er es jl jm bd b be z dx">Screenshot from harperdb.io</figcaption></figure><p id="e55d" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">最后，您将看到云实例的创建已经开始，如下所示。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mr"><img src="../Images/b6b8b484393a73dd72285063b8288f27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tTBcIv-ej0eUQVKG"/></div><figcaption class="jj jk et er es jl jm bd b be z dx">Screenshot from harperdb.io</figcaption></figure><p id="7301" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">几分钟后，当HarperDB云实例成功创建后，您将看到该特定实例的状态为OK。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mr"><img src="../Images/415d7aac36e2380f136d8e15f64ff62f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*gJ7NAwV8UfDakjCq"/></div><figcaption class="jj jk et er es jl jm bd b be z dx">Screenshot from harperdb.io</figcaption></figure><p id="3c4f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">恭喜</strong>🎉您已经成功完成了创建云实例的第三步。</p><h1 id="0ade" class="ky kz hi bd la lb lc ld le lf lg lh li io lj ip lk ir ll is lm iu ln iv lo lp bi translated">如何配置HarperDB模式和表</h1><p id="2d04" class="pw-post-body-paragraph jo jp hi jq b jr lq ij jt ju lr im jw jx ls jz ka kb lt kd ke kf lu kh ki kj hb bi translated">您需要首先创建一个模式和一个表，以便将ML实验的结果插入到数据库中。</p><p id="b62b" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">要做到这一点，您所要做的就是加载您已经从仪表板中建立的HarperDB云实例。</p><p id="99a4" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">首先，您需要通过指定模式名来创建模式。对于本教程，模式名称是machinelearning。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mr"><img src="../Images/6fff54d1fe11ec3cb57ee2301e53733c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*K3hli_3X_K5JOo-G"/></div><figcaption class="jj jk et er es jl jm bd b be z dx">Screenshot from harperdb.io</figcaption></figure><p id="bb25" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">创建模式后，您将看到添加表的选项。让我们从制作第一个表格开始，我们称之为<strong class="jq hj">实验</strong>。</p><p id="5536" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">HarperDB还会要求您指定hash_attribute，这相当于一个惟一标识符。</p><p id="272a" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">hash_attribute的值将由HarperDB自动生成。大多数数据表使用id作为每个记录的唯一标识符，这就是您将在这个名为<strong class="jq hj">实验</strong>的表中使用的。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mr"><img src="../Images/6558418c294067a6e9efe5a524953d7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*stbcScy19lshuHBE"/></div><figcaption class="jj jk et er es jl jm bd b be z dx">Screenshot from harperdb.io</figcaption></figure><p id="9c5a" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">至此，模式和表都已成功创建。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ml"><img src="../Images/7c213a9cebab1d440a38ab4666e2407b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*X28xy65HzWBs0TkS"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Screenshot from harperdb.io</figcaption></figure><h1 id="f9ae" class="ky kz hi bd la lb lc ld le lf lg lh li io lj ip lk ir ll is lm iu ln iv lo lp bi translated">如何在HarperDB中跟踪你的机器学习实验</h1><p id="1560" class="pw-post-body-paragraph jo jp hi jq b jr lq ij jt ju lr im jw jx ls jz ka kb lt kd ke kf lu kh ki kj hb bi translated">我将使用贷款数据集进行机器学习实验，然后将所有ML实验结果记录到HarperDB数据库云实例中的实验表中。</p><p id="224f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">ML实验的目标是在预测消费者是否应该获得贷款时达到高准确度。你可以在这里下载数据集<a class="ae jn" href="https://github.com/Davisy/Run-Machine-Learning-Experiments-with-Python-Logging-module/blob/master/data/loans_data.csv" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="2bbb" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">以下是运行和跟踪您的ML实验需要遵循的步骤。</p><h2 id="a2d1" class="lw kz hi bd la lx ly lz le ma mb mc li jx md me lk kb mf mg lm kf mh mi lo mj bi translated">1.安装所需的软件包</h2><p id="d109" class="pw-post-body-paragraph jo jp hi jq b jr lq ij jt ju lr im jw jx ls jz ka kb lt kd ke kf lu kh ki kj hb bi translated">您需要在您的机器上安装以下软件包。</p><p id="d1fc" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj"> (a) scikit-learn </strong> <br/>这是一个机器学习库，它有不同的算法来训练机器学习模型处理不同的问题，如分类、回归和聚类。</p><pre class="iy iz ja jb fd ms mt mu mv aw mw bi"><span id="9a3c" class="lw kz hi mt b fi mx my l mz na">pip install scikit-learn</span></pre><p id="9474" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">(b)Harper-SDK-python</strong><br/>这是我们将用来实现不同HarperDB API函数的Python包。它还为面向对象的接口提供了包装器。</p><pre class="iy iz ja jb fd ms mt mu mv aw mw bi"><span id="a677" class="lw kz hi mt b fi mx my l mz na">pip install harperdb</span></pre><h2 id="9aa6" class="lw kz hi bd la lx ly lz le ma mb mc li jx md me lk kb mf mg lm kf mh mi lo mj bi translated">2.导入其他重要包</h2><p id="de36" class="pw-post-body-paragraph jo jp hi jq b jr lq ij jt ju lr im jw jx ls jz ka kb lt kd ke kf lu kh ki kj hb bi translated">下一步是导入Python包来加载数据，并预处理数据集和算法以在贷款数据集上进行训练。</p><pre class="iy iz ja jb fd ms mt mu mv aw mw bi"><span id="437c" class="lw kz hi mt b fi mx my l mz na">#import packages</span><span id="283b" class="lw kz hi mt b fi nb my l mz na">import numpy as np<br/>import pandas as pd<br/>from sklearn import preprocessing<br/>from sklearn.metrics import classification_report, confusion_matrix, f1_score<br/>from sklearn.preprocessing import StandardScaler, MinMaxScaler, LabelEncoder<br/>from sklearn.model_selection import train_test_split<br/>from sklearn.model_selection import cross_val_score<br/>from sklearn.model_selection import GridSearchCV</span><span id="4d80" class="lw kz hi mt b fi nb my l mz na"># classifiers<br/>from sklearn.ensemble import RandomForestClassifier<br/>from sklearn.neighbors import KNeighborsClassifier<br/>from sklearn.ensemble import GradientBoostingClassifier<br/>from sklearn.tree import DecisionTreeClassifier<br/>from sklearn.linear_model import LogisticRegression<br/>from sklearn.ensemble import BaggingClassifier<br/>from sklearn.ensemble import ExtraTreesClassifier<br/>from xgboost import XGBClassifier<br/>from imblearn.ensemble import (<br/>    BalancedBaggingClassifier,<br/>    EasyEnsembleClassifier,<br/>)</span><span id="f037" class="lw kz hi mt b fi nb my l mz na"># harperdb<br/>import harperdb</span><span id="2b41" class="lw kz hi mt b fi nb my l mz na">import time<br/>import json<br/>import warnings  # To ignore any warnings</span><span id="f4ba" class="lw kz hi mt b fi nb my l mz na">warnings.filterwarnings("ignore")</span><span id="f31f" class="lw kz hi mt b fi nb my l mz na">np.random.seed(123)</span></pre><h2 id="b18e" class="lw kz hi bd la lx ly lz le ma mb mc li jx md me lk kb mf mg lm kf mh mi lo mj bi translated">3.加载贷款数据集</h2><p id="2e49" class="pw-post-body-paragraph jo jp hi jq b jr lq ij jt ju lr im jw jx ls jz ka kb lt kd ke kf lu kh ki kj hb bi translated">我们将使用Pandas库来加载贷款数据集。</p><pre class="iy iz ja jb fd ms mt mu mv aw mw bi"><span id="9235" class="lw kz hi mt b fi mx my l mz na">data = pd.read_csv("data/loans_data.csv")</span><span id="a405" class="lw kz hi mt b fi nb my l mz na">data.columns</span></pre><p id="e053" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">以下是贷款数据集中可用的要素列表。</p><p id="7384" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">Loan_ID <br/>性别<br/>已婚<br/>家眷<br/>学历<br/>个体户<br/>申请人收入<br/>共同申请人收入<br/>贷款金额<br/>贷款_金额_期限<br/>信用_历史<br/>房产_面积<br/>贷款_状态</p><p id="c4a6" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我们有12个独立的特性和一个目标(Loan_Status)。你可以在这里阅读每个特性的描述。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es nc"><img src="../Images/28d95f8f2de0abad98a15b2bb0c851b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1124/0*BH_X7_Bd1cGX3RlE"/></div><figcaption class="jj jk et er es jl jm bd b be z dx">Features Definition</figcaption></figure><h2 id="6fc9" class="lw kz hi bd la lx ly lz le ma mb mc li jx md me lk kb mf mg lm kf mh mi lo mj bi translated">4.创建一个Python函数</h2><p id="c374" class="pw-post-body-paragraph jo jp hi jq b jr lq ij jt ju lr im jw jx ls jz ka kb lt kd ke kf lu kh ki kj hb bi translated">在训练之前，必须管理数据集中包含的缺失值并预处理要素。我为缺失数据和要素工程开发了一个简单的Python工具。</p><pre class="iy iz ja jb fd ms mt mu mv aw mw bi"><span id="83b6" class="lw kz hi mt b fi mx my l mz na"># function to preprocessing the dataset<br/></span><span id="313d" class="lw kz hi mt b fi nb my l mz na">def preprocessing(data):<br/>    # replace with numerical values<br/>    data['Dependents'].replace('3+', 3, inplace=True)<br/>    data['Loan_Status'].replace('N', 0, inplace=True)<br/>    data['Loan_Status'].replace('Y', 1, inplace=True)</span><span id="017a" class="lw kz hi mt b fi nb my l mz na">    # handle missing data<br/>    data['Gender'].fillna(data['Gender'].mode()[0], inplace=True)<br/>    data['Married'].fillna(data['Married'].mode()[0], inplace=True)<br/>    data['Dependents'].fillna(data['Dependents'].mode()[0], inplace=True)<br/>    data['Self_Employed'].fillna(data['Self_Employed'].mode()[0], inplace=True)<br/>    data['Credit_History'].fillna(data['Credit_History'].mode()[0],<br/>                                  inplace=True)<br/>    data['Loan_Amount_Term'].fillna(data['Loan_Amount_Term'].mode()[0],<br/>                                    inplace=True)<br/>    data['LoanAmount'].fillna(data['LoanAmount'].median(), inplace=True)</span><span id="cc33" class="lw kz hi mt b fi nb my l mz na">    # drop ID column<br/>    data = data.drop('Loan_ID', axis=1)</span><span id="40aa" class="lw kz hi mt b fi nb my l mz na">    #scale the data<br/>    data["ApplicantIncome"] = MinMaxScaler().fit_transform(<br/>        data["ApplicantIncome"].values.reshape(-1, 1))<br/>    data["LoanAmount"] = MinMaxScaler().fit_transform(<br/>        data["LoanAmount"].values.reshape(-1, 1))<br/>    data["CoapplicantIncome"] = MinMaxScaler().fit_transform(<br/>        data["CoapplicantIncome"].values.reshape(-1, 1))<br/>    data["Loan_Amount_Term"] = MinMaxScaler().fit_transform(<br/>        data["Loan_Amount_Term"].values.reshape(-1, 1))</span><span id="d649" class="lw kz hi mt b fi nb my l mz na">    #change categorical features to numerical<br/>    data = pd.get_dummies(data)</span><span id="792e" class="lw kz hi mt b fi nb my l mz na">    return data</span></pre><p id="24d8" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果你很好奇，你也可以在这里阅读更多关于<a class="ae jn" href="https://www.freecodecamp.org/news/how-to-handle-missing-data-in-a-dataset/" rel="noopener ugc nofollow" target="_blank">如何处理数据集中的缺失值。</a></p><p id="7469" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">让我们对贷款数据集进行预处理。</p><pre class="iy iz ja jb fd ms mt mu mv aw mw bi"><span id="fea6" class="lw kz hi mt b fi mx my l mz na">data = preprocessing(data)</span></pre><h2 id="325d" class="lw kz hi bd la lx ly lz le ma mb mc li jx md me lk kb mf mg lm kf mh mi lo mj bi translated">5.连接到HarperDB云实例</h2><p id="cec0" class="pw-post-body-paragraph jo jp hi jq b jr lq ij jt ju lr im jw jx ls jz ka kb lt kd ke kf lu kh ki kj hb bi translated">下一步是连接到HarperDB云实例，以便将实验结果插入到名为experiments的表中。</p><p id="a58c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这里需要提供三个参数:</p><ul class=""><li id="1afd" class="kk kl hi jq b jr js ju jv jx km kb kn kf ko kj kp kq kr ks bi translated">HarperDB实例的完整URL</li><li id="bbf2" class="kk kl hi jq b jr kt ju ku jx kv kb kw kf kx kj kp kq kr ks bi translated">您的用户名</li><li id="f423" class="kk kl hi jq b jr kt ju ku jx kv kb kw kf kx kj kp kq kr ks bi translated">您的密码</li></ul><pre class="iy iz ja jb fd ms mt mu mv aw mw bi"><span id="0283" class="lw kz hi mt b fi mx my l mz na"># connect to harperdb</span><span id="c162" class="lw kz hi mt b fi nb my l mz na">URL = "https://{project-name}.harperdbcloud.com"<br/>USERNAME = "your-username"<br/>PASSWORD = "your-password"</span><span id="fc9c" class="lw kz hi mt b fi nb my l mz na">db = harperdb.HarperDB(url=URL, username=USERNAME, password=PASSWORD)</span><span id="4fc5" class="lw kz hi mt b fi nb my l mz na"># check if you are connected<br/>db.describe_all()</span></pre><p id="6c8d" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">当您执行上面的代码时，您将看到类似于下面显示的输出，表明成功连接到您的HarperDB云实例。</p><pre class="iy iz ja jb fd ms mt mu mv aw mw bi"><span id="0fd8" class="lw kz hi mt b fi mx my l mz na">{'machinelearning': {'experiments': {'__createdtime__': 1656351257480,   '__updatedtime__': 1656351257480,   'hash_attribute': 'id',   'id': 'd5333654-16c0-4ae5-bf30-0a6e607b1ee7',   'name': 'experiments',   'residence': None,   'schema': 'machinelearning',   'attributes': [{'attribute': 'id'},    {'attribute': '__createdtime__'},    {'attribute': 'accuracy_mean'},    {'attribute': '__updatedtime__'},    {'attribute': 'model_name'},    {'attribute': 'training_period'},    {'attribute': 'name'}],   'record_count': 0}}}</span></pre><h2 id="340e" class="lw kz hi bd la lx ly lz le ma mb mc li jx md me lk kb mf mg lm kf mh mi lo mj bi translated">6.创建一个函数来记录实验结果</h2><p id="ac3c" class="pw-post-body-paragraph jo jp hi jq b jr lq ij jt ju lr im jw jx ls jz ka kb lt kd ke kf lu kh ki kj hb bi translated">您还需要创建一个函数来保存其他实验表中的每个实验结果。您需要定义用于插入记录的模式和表。</p><p id="1ae7" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">下面的函数将接收实验结果作为<strong class="jq hj">数据</strong>(字典格式)，并通过使用harperdb-python包中的<strong class="jq hj">插入函数</strong>将其插入到该表中。</p><p id="edbe" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">插入函数将接收三个参数:</p><ul class=""><li id="f977" class="kk kl hi jq b jr js ju jv jx km kb kn kf ko kj kp kq kr ks bi translated">架构名称</li><li id="6f99" class="kk kl hi jq b jr kt ju ku jx kv kb kw kf kx kj kp kq kr ks bi translated">表名</li><li id="adb5" class="kk kl hi jq b jr kt ju ku jx kv kb kw kf kx kj kp kq kr ks bi translated">数据(实验结果)</li></ul><pre class="iy iz ja jb fd ms mt mu mv aw mw bi"><span id="4b91" class="lw kz hi mt b fi mx my l mz na"># define a function to record experiment results into the table</span><span id="df2d" class="lw kz hi mt b fi nb my l mz na">def record_results(data):</span><span id="3a9f" class="lw kz hi mt b fi nb my l mz na">    #define the schema and table<br/>    SCHEMA = "machinelearning"<br/>    TABLE = "experiments"</span><span id="7a57" class="lw kz hi mt b fi nb my l mz na">    # insert data into the table<br/>    result = db.insert(SCHEMA, TABLE, [data])</span><span id="efa0" class="lw kz hi mt b fi nb my l mz na">    return result</span></pre><p id="e7c7" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果成功地将特定记录插入到表中，该函数将返回该记录的状态。</p><h2 id="c603" class="lw kz hi bd la lx ly lz le ma mb mc li jx md me lk kb mf mg lm kf mh mi lo mj bi translated">7.将数据分为要素和目标</h2><p id="6ea7" class="pw-post-body-paragraph jo jp hi jq b jr lq ij jt ju lr im jw jx ls jz ka kb lt kd ke kf lu kh ki kj hb bi translated">我们需要将数据分为特征和目标。这个数据集的目标是一个名为L <strong class="jq hj"> oan_Status </strong>的列。</p><pre class="iy iz ja jb fd ms mt mu mv aw mw bi"><span id="3967" class="lw kz hi mt b fi mx my l mz na"># split data into train and test</span><span id="b6e1" class="lw kz hi mt b fi nb my l mz na">X = data.drop('Loan_Status', axis=1)<br/>y = data.Loan_Status</span></pre><h2 id="5d17" class="lw kz hi bd la lx ly lz le ma mb mc li jx md me lk kb mf mg lm kf mh mi lo mj bi translated">8.运行和跟踪机器学习实验</h2><p id="72e0" class="pw-post-body-paragraph jo jp hi jq b jr lq ij jt ju lr im jw jx ls jz ka kb lt kd ke kf lu kh ki kj hb bi translated">现在，您可以训练多个分类算法，并通过使用<strong class="jq hj"> record_results函数</strong>将结果保存到HarperDB云实例中的表中。</p><p id="4afb" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在这里，您将把以下记录保存到表中:</p><ul class=""><li id="b07c" class="kk kl hi jq b jr js ju jv jx km kb kn kf ko kj kp kq kr ks bi translated">实验的名称，例如“第一次”。</li><li id="4eab" class="kk kl hi jq b jr kt ju ku jx kv kb kw kf kx kj kp kq kr ks bi translated">分类模型的名称，例如RandomForestClassifier。</li><li id="c314" class="kk kl hi jq b jr kt ju ku jx kv kb kw kf kx kj kp kq kr ks bi translated">模型的参数名称映射到它们的值。</li><li id="e538" class="kk kl hi jq b jr kt ju ku jx kv kb kw kf kx kj kp kq kr ks bi translated">交叉验证分数的准确度列表。</li><li id="92bc" class="kk kl hi jq b jr kt ju ku jx kv kb kw kf kx kj kp kq kr ks bi translated">平均准确度分数。</li><li id="5ce0" class="kk kl hi jq b jr kt ju ku jx kv kb kw kf kx kj kp kq kr ks bi translated">训练期。</li></ul><p id="087e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">上述记录将被插入到实验表格中。</p><pre class="iy iz ja jb fd ms mt mu mv aw mw bi"><span id="3880" class="lw kz hi mt b fi mx my l mz na"># create a dictionary for  classifiers<br/>models = {<br/>    "KNeighborsClassifier": KNeighborsClassifier(),<br/>    "RandomForestClassifier": RandomForestClassifier(),<br/>    "GradientBoostingClassifier": GradientBoostingClassifier(),<br/>    "DecisionTreeClassifier": DecisionTreeClassifier(),<br/>    "BaggingClassifier": BaggingClassifier(),<br/>    "XGBClassifier": XGBClassifier(),<br/>    "ExtraTreesClassifier": ExtraTreesClassifier(),<br/>    "LogisticRegression": LogisticRegression(),<br/>    "BalancedBaggingClassifier": BalancedBaggingClassifier(),<br/>    "EasyEnsembleClassifier": EasyEnsembleClassifier(),<br/>}</span><span id="ed1b" class="lw kz hi mt b fi nb my l mz na"># cross_val_score for each classifier<br/>for model_name, model in models.items():</span><span id="958d" class="lw kz hi mt b fi nb my l mz na">    start = time.time()</span><span id="85ae" class="lw kz hi mt b fi nb my l mz na">    scores = cross_val_score(model, X, y, cv=3, scoring='accuracy')</span><span id="da10" class="lw kz hi mt b fi nb my l mz na">    end = time.time()</span><span id="d594" class="lw kz hi mt b fi nb my l mz na">    training_duration = end - start</span><span id="4830" class="lw kz hi mt b fi nb my l mz na">    data = {<br/>        "name": "First",<br/>        "model_name": model_name,<br/>        "model_parameters": json.dumps(model.get_params()),<br/>        "accuracy_scores": json.dumps(list(scores)),<br/>        "accuracy_mean": scores.mean(),<br/>        "training_period": training_duration<br/>    }</span><span id="c1d4" class="lw kz hi mt b fi nb my l mz na">    # insert result into the HarperDB table<br/>    result = record_results(data)</span><span id="f417" class="lw kz hi mt b fi nb my l mz na">    print(result)<br/>    print("-------------------------------")</span></pre><p id="1df7" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">一旦上面的代码运行，将生成以下输出。</p><pre class="iy iz ja jb fd ms mt mu mv aw mw bi"><span id="6734" class="lw kz hi mt b fi mx my l mz na">{'message': 'inserted 1 of 1 records', 'inserted_hashes': ['d6fe4a54-69ee-4c10-8bb2-c592c57b30d7'], 'skipped_hashes': []}<br/>-------------------------------<br/>{'message': 'inserted 1 of 1 records', 'inserted_hashes': ['fca4307e-3287-4b76-9f8c-0c22ed1b4ac4'], 'skipped_hashes': []}<br/>-------------------------------<br/>{'message': 'inserted 1 of 1 records', 'inserted_hashes': ['1b0aabe7-1f31-4bb7-b195-8dc598e74a46'], 'skipped_hashes': []}<br/>-------------------------------<br/>{'message': 'inserted 1 of 1 records', 'inserted_hashes': ['02750d9c-8876-4e0d-8849-133d72b8ca20'], 'skipped_hashes': []}<br/>-------------------------------<br/>{'message': 'inserted 1 of 1 records', 'inserted_hashes': ['4ab96069-a014-49bd-ba90-6edd92b08c35'], 'skipped_hashes': []}<br/>-------------------------------</span></pre><p id="db41" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">该输出的目的是验证实验结果是否被正确无误地添加到了实验表中。</p><h2 id="f76e" class="lw kz hi bd la lx ly lz le ma mb mc li jx md me lk kb mf mg lm kf mh mi lo mj bi translated">9.查看实验表格</h2><p id="94db" class="pw-post-body-paragraph jo jp hi jq b jr lq ij jt ju lr im jw jx ls jz ka kb lt kd ke kf lu kh ki kj hb bi translated">如果你打开你的HarperDB云实例，你将能够看到你的机器学习实验的所有记录。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ml"><img src="../Images/d06de8166b38ec239e47a3ae8fe8d81e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8fSMWM8A2rejuhu7"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Screenshot from harperdb.io</figcaption></figure><p id="d694" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">您还可以单击实验表中的单个记录，查看您在贷款数据集上训练的特定算法的所有记录数据。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ml"><img src="../Images/7fd93b95977d050bf814ef6dd3bc3ae5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*82zQqSiaaZdtkF9C"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Screenshot from harperdb.io</figcaption></figure><p id="f0a8" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">比如LogisticRegression模型的准确率<strong class="jq hj"> 80.7%。</strong></p><p id="0e99" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">您现在能够继续运行各种ML实验，这些实验的结果将被插入到HarperDB云实例中。</p><p id="c4a8" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">当您运行下一个实验时，它将继续在实验表中记录实验结果，而不会覆盖以前的结果。这意味着您将有机会观察和检查所有实验的结果，并对它们进行评估，以找到改善模型性能的更好方法。</p><h1 id="357f" class="ky kz hi bd la lb lc ld le lf lg lh li io lj ip lk ir ll is lm iu ln iv lo lp bi translated">什么是自定义函数？</h1><p id="3940" class="pw-post-body-paragraph jo jp hi jq b jr lq ij jt ju lr im jw jx ls jz ka kb lt kd ke kf lu kh ki kj hb bi translated">自定义函数是Harper db 3.1+版本中的一项新特性。该特性允许您在HarperDB中添加自己的<strong class="jq hj"> API端点</strong>。</p><p id="f75a" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">自定义函数由Fastify提供支持，Fastify非常灵活，通过使用HarperDB核心方法可以更容易地与您的数据进行交互。</p><p id="18e8" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在本节中，您将学习如何使用HarperDB studio创建自己的自定义函数。这将允许您使用API调用与同事交流机器学习实验的结果。</p><h2 id="0f02" class="lw kz hi bd la lx ly lz le ma mb mc li jx md me lk kb mf mg lm kf mh mi lo mj bi translated">1.启用自定义功能</h2><p id="b144" class="pw-post-body-paragraph jo jp hi jq b jr lq ij jt ju lr im jw jx ls jz ka kb lt kd ke kf lu kh ki kj hb bi translated">第一步是在你的HarperDB Studio中点击“<strong class="jq hj">功能</strong>，然后启用自定义功能(默认不启用)。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ml"><img src="../Images/896f543091d88f32dc2e14f640c0117f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*iAJg2Oqd3p5cbgYa"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Screenshot from harperdb.io</figcaption></figure><h2 id="787e" class="lw kz hi bd la lx ly lz le ma mb mc li jx md me lk kb mf mg lm kf mh mi lo mj bi translated">2.创建项目</h2><p id="cae1" class="pw-post-body-paragraph jo jp hi jq b jr lq ij jt ju lr im jw jx ls jz ka kb lt kd ke kf lu kh ki kj hb bi translated">下一步是通过指定名称来创建项目。比如<strong class="jq hj"> api-v1。</strong></p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nd"><img src="../Images/fcc3e07ffc45e03eb4af0458000523ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*s5g3n_Ml6ZcuVSVa"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Screenshot from harperdb.io</figcaption></figure><p id="4aa7" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">它还将为项目创建设置文件，包括:</p><ul class=""><li id="dcb3" class="kk kl hi jq b jr js ju jv jx km kb kn kf ko kj kp kq kr ks bi translated">路线文件夹</li><li id="bf5d" class="kk kl hi jq b jr kt ju ku jx kv kb kw kf kx kj kp kq kr ks bi translated">添加助手函数的文件</li><li id="9f1b" class="kk kl hi jq b jr kt ju ku jx kv kb kw kf kx kj kp kq kr ks bi translated">静态文件夹。</li></ul><p id="6366" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">注意:</strong>对于本文，您将重点关注routes文件夹。</p><h2 id="51d4" class="lw kz hi bd la lx ly lz le ma mb mc li jx md me lk kb mf mg lm kf mh mi lo mj bi translated">3.定义路线</h2><p id="28b4" class="pw-post-body-paragraph jo jp hi jq b jr lq ij jt ju lr im jw jx ls jz ka kb lt kd ke kf lu kh ki kj hb bi translated">让我们创建第一条路由，从HarperDB数据存储的实验表中获取一些数据。但是首先您需要知道路由URL是以下列方式解析的:</p><p id="0ecd" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">[实例URL]:[自定义功能端口]/[项目名称]/[路由URL]</p><p id="5fae" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">它将包括:</p><ul class=""><li id="a7b6" class="kk kl hi jq b jr js ju jv jx km kb kn kf ko kj kp kq kr ks bi translated">云实例URL</li><li id="3560" class="kk kl hi jq b jr kt ju ku jx kv kb kw kf kx kj kp kq kr ks bi translated">自定义功能端口</li><li id="12cc" class="kk kl hi jq b jr kt ju ku jx kv kb kw kf kx kj kp kq kr ks bi translated">您创建的项目名称</li><li id="df90" class="kk kl hi jq b jr kt ju ku jx kv kb kw kf kx kj kp kq kr ks bi translated">您定义的路线</li></ul><p id="d4fa" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在function页面的route文件(example.js)中，您将看到一些模板代码作为示例。您需要用以下代码替换该代码:</p><pre class="iy iz ja jb fd ms mt mu mv aw mw bi"><span id="a57c" class="lw kz hi mt b fi mx my l mz na">'use strict';</span><span id="238e" class="lw kz hi mt b fi nb my l mz na">module.exports = async (server, { hdbCore, logger }) =&gt; {</span><span id="1444" class="lw kz hi mt b fi nb my l mz na">server.route({</span><span id="b5e0" class="lw kz hi mt b fi nb my l mz na">    url: '/',<br/>	method: 'GET',<br/>	handler: (request) =&gt; {<br/>	request.body= {<br/>	operation: 'sql',<br/>	sql: 'SELECT model_name,accuracy_scores,accuracy_mean,training_period FROM machinelearning.experiments ORDER BY accuracy_mean'<br/>};<br/>return hdbCore.requestWithoutAuthentication(request);<br/>}<br/>});</span></pre><p id="4518" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在上面的代码中，route /api-v1是用GET方法定义的，处理函数将向数据库发送一个SQL查询，以从按<strong class="jq hj"> accuracy_mean列排序的<strong class="jq hj">实验表</strong>中获取<strong class="jq hj"> model_name、accuracy_scores、</strong>和<strong class="jq hj"> accuracy_mean、training_period </strong>。</strong></p><p id="cfcb" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">您可以保存在管线文件中添加的新更改。</p><h2 id="a0eb" class="lw kz hi bd la lx ly lz le ma mb mc li jx md me lk kb mf mg lm kf mh mi lo mj bi translated">4.尝试您的API端点</h2><p id="de3a" class="pw-post-body-paragraph jo jp hi jq b jr lq ij jt ju lr im jw jx ls jz ka kb lt kd ke kf lu kh ki kj hb bi translated">最后，您现在可以使用您定义的路径从实验表中获取数据。您可以尝试通过web浏览器、任何编程语言或API工具(如Postman)来访问该路线。</p><p id="8b0e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">路线URL将是:<a class="ae jn" href="https://functions-1-mlproject.harperdbcloud.com/api-v1" rel="noopener ugc nofollow" target="_blank">https://functions-1-mlproject.harperdbcloud.com/api-v1</a></p><h2 id="ff76" class="lw kz hi bd la lx ly lz le ma mb mc li jx md me lk kb mf mg lm kf mh mi lo mj bi translated">如何通过网络浏览器访问路线</h2><p id="c5a8" class="pw-post-body-paragraph jo jp hi jq b jr lq ij jt ju lr im jw jx ls jz ka kb lt kd ke kf lu kh ki kj hb bi translated">您只需复制路线URL并将其添加到您的web浏览器中，即可查看所请求的数据。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ml"><img src="../Images/b512d3d307e0752735591ec420889188.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*YfYCkcBXcy9C6-qf"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Screenshot from the web browser</figcaption></figure><p id="6a5d" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这将根据处理函数中定义的SQL查询显示您请求的数据。</p><h2 id="b9b3" class="lw kz hi bd la lx ly lz le ma mb mc li jx md me lk kb mf mg lm kf mh mi lo mj bi translated">如何用Python发送API请求</h2><p id="93e9" class="pw-post-body-paragraph jo jp hi jq b jr lq ij jt ju lr im jw jx ls jz ka kb lt kd ke kf lu kh ki kj hb bi translated">该选项允许您通过使用<strong class="jq hj">请求</strong> Python包来发送API请求。</p><pre class="iy iz ja jb fd ms mt mu mv aw mw bi"><span id="de4e" class="lw kz hi mt b fi mx my l mz na">#send an API request </span><span id="57f8" class="lw kz hi mt b fi nb my l mz na">import requests</span><span id="ed87" class="lw kz hi mt b fi nb my l mz na"># api-endpoint<br/>URL = "https://functions-1-mlproject.harperdbcloud.com/api-v1"<br/>  <br/># sending get request and saving the response as response object<br/>r = requests.get(url = URL)<br/>  <br/># extracting data in json format<br/>data = r.json()</span><span id="c823" class="lw kz hi mt b fi nb my l mz na">for experiment in data:<br/>    print(experiment)</span></pre><p id="b104" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">以下是上述代码的输出示例:</p><pre class="iy iz ja jb fd ms mt mu mv aw mw bi"><span id="9b13" class="lw kz hi mt b fi mx my l mz na">{'model_name': 'EasyEnsembleClassifier', 'accuracy_scores': [0.6682926829268293, 0.697560975609756, 0.6421568627450981], 'accuracy_mean': 0.6693368404272277, 'training_period': 0.8020520210266113}{'model_name': 'DecisionTreeClassifier', 'accuracy_scores': [0.7121951219512195, 0.7024390243902439, 0.6127450980392157], 'accuracy_mean': 0.6757930814602263, 'training_period': 0.023849010467529297}{'model_name': 'BalancedBaggingClassifier', 'accuracy_scores': [0.7024390243902439, 0.6926829268292682, 0.6470588235294118], 'accuracy_mean': 0.6807269249163079, 'training_period': 0.09337425231933594}{'model_name': 'EasyEnsembleClassifier', 'accuracy_scores': [0.6926829268292682, 0.7268292682926829, 0.6715686274509803], 'accuracy_mean': 0.6970269408576438, 'training_period': 0.8345751762390137}</span></pre><p id="9d5d" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">正如您所看到的，HarperDB使构建API端点变得简单，这让您的同事可以快速访问您进行的任何机器学习实验的结果。</p><h1 id="2056" class="ky kz hi bd la lb lc ld le lf lg lh li io lj ip lk ir ll is lm iu ln iv lo lp bi translated">结论</h1><p id="9263" class="pw-post-body-paragraph jo jp hi jq b jr lq ij jt ju lr im jw jx ls jz ka kb lt kd ke kf lu kh ki kj hb bi translated">恭喜🎉，你已经熬到这篇文章的结尾了。你已经学会了:</p><ul class=""><li id="d74f" class="kk kl hi jq b jr js ju jv jx km kb kn kf ko kj kp kq kr ks bi translated">追踪你的机器学习实验的重要性。</li><li id="e25a" class="kk kl hi jq b jr kt ju ku jx kv kb kw kf kx kj kp kq kr ks bi translated">如何在<strong class="jq hj"> HarperDB云实例</strong>中保存你的ML实验结果。</li><li id="d2b5" class="kk kl hi jq b jr kt ju ku jx kv kb kw kf kx kj kp kq kr ks bi translated">如何从HarperDB cloud实例创建一个定制函数,通过API端点与参与项目的同事共享您的ML实验结果。</li></ul><p id="5ab4" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果你学到了新的东西或者喜欢阅读这篇文章，请分享给其他人看。在那之前，下期帖子再见！</p><p id="483d" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">也可以在Twitter <a class="ae jn" href="https://twitter.com/Davis_McDavid?ref=hackernoon.com" rel="noopener ugc nofollow" target="_blank"> @Davis_McDavid </a>上找我。</p><p id="9aec" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><em class="ne">最后一件事:在以下链接中阅读更多类似的文章</em></p><div class="nf ng ez fb nh ni"><a rel="noopener follow" target="_blank" href="/geekculture/how-to-speed-up-model-training-with-snapml-b2e24b546fe5"><div class="nj ab dw"><div class="nk ab nl cl cj nm"><h2 class="bd hj fi z dy nn ea eb no ed ef hh bi translated">如何用Snapml加速模型训练</h2><div class="np l"><h3 class="bd b fi z dy nn ea eb no ed ef dx translated">用更少的时间训练机器学习模型</h3></div><div class="nq l"><p class="bd b fp z dy nn ea eb no ed ef dx translated">medium.com</p></div></div><div class="nr l"><div class="ns l nt nu nv nr nw jh ni"/></div></div></a></div><div class="nf ng ez fb nh ni"><a rel="noopener follow" target="_blank" href="/geekculture/top-5-cloud-migration-strategies-you-need-to-know-fb1d92ed3c8a"><div class="nj ab dw"><div class="nk ab nl cl cj nm"><h2 class="bd hj fi z dy nn ea eb no ed ef hh bi translated">您需要知道的五大云迁移策略</h2><div class="np l"><h3 class="bd b fi z dy nn ea eb no ed ef dx translated">如何将您的数据和系统平稳地迁移到云中</h3></div><div class="nq l"><p class="bd b fp z dy nn ea eb no ed ef dx translated">medium.com</p></div></div><div class="nr l"><div class="nx l nt nu nv nr nw jh ni"/></div></div></a></div><div class="nf ng ez fb nh ni"><a rel="noopener follow" target="_blank" href="/geekculture/top-5-reasons-why-companies-are-moving-to-the-cloud-c3a609332125"><div class="nj ab dw"><div class="nk ab nl cl cj nm"><h2 class="bd hj fi z dy nn ea eb no ed ef hh bi translated">公司迁移到云的五大原因</h2><div class="np l"><h3 class="bd b fi z dy nn ea eb no ed ef dx translated">为什么企业对云的采用增加到了90%</h3></div><div class="nq l"><p class="bd b fp z dy nn ea eb no ed ef dx translated">medium.com</p></div></div><div class="nr l"><div class="ny l nt nu nv nr nw jh ni"/></div></div></a></div><p id="2ec1" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><em class="ne">本文首发</em> <a class="ae jn" href="https://www.freecodecamp.org/news/track-machine-learning-experiments-with-harperdb/" rel="noopener ugc nofollow" target="_blank"> <em class="ne">此处</em> </a> <em class="ne">。</em></p></div></div>    
</body>
</html>