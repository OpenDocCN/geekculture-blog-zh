<html>
<head>
<title>How to make a One-Time-Password service with Spring Boot and MySQL database.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Spring Boot和MySQL数据库制作一次性密码服务？</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/how-to-make-a-one-time-password-service-with-spring-boot-and-mysql-database-74ba8729e572?source=collection_archive---------3-----------------------#2022-02-15">https://medium.com/geekculture/how-to-make-a-one-time-password-service-with-spring-boot-and-mysql-database-74ba8729e572?source=collection_archive---------3-----------------------#2022-02-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/c88452f2694044ffcdf95b3c33a73d12.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lsZgaB3pGWcNRnxnY7lrRQ.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Photo by <a class="ae iu" href="https://unsplash.com/photos/0DJHJcpwN9Q" rel="noopener ugc nofollow" target="_blank">Boitumelo Phetla</a></figcaption></figure><p id="1976" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在<a class="ae iu" href="https://itnext.io/how-to-make-a-simple-one-time-password-service-with-spring-boot-ebe640a7be7b" rel="noopener ugc nofollow" target="_blank">之前的文章</a>中，你了解了Spring Boot的基本情况。如何设置项目、添加项目依赖项、启动第一个REST API服务，以及如何创建简单的静态一次性密码服务。</p><p id="ebec" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在本文中，我想举一个在Spring Boot上创建一个成熟的动态一次性密码服务的例子。</p><p id="8ca4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi jt translated"><span class="l ju jv jw bm jx jy jz ka kb di"> W </span> <strong class="ix hj">你将需要帽子。</strong></p><p id="ca8e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如上所述，我们将创建一个项目，使用Spring Boot、Gradle和MySQL数据库来模拟OTP服务的操作。因此，对于我们的项目，我们必须具备以下工具和技术:</p></div><div class="ab cl kc kd gp ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hb hc hd he hf"><ul class=""><li id="2e5c" class="kj kk hi ix b iy iz jc jd jg kl jk km jo kn js ko kp kq kr bi translated">Spring Boot版本2.6.3+</li><li id="bb04" class="kj kk hi ix b iy ks jc kt jg ku jk kv jo kw js ko kp kq kr bi translated">Java11+</li><li id="ffb1" class="kj kk hi ix b iy ks jc kt jg ku jk kv jo kw js ko kp kq kr bi translated">Gradle 7.2+</li><li id="6463" class="kj kk hi ix b iy ks jc kt jg ku jk kv jo kw js ko kp kq kr bi translated">MySQL 8 +</li><li id="65a7" class="kj kk hi ix b iy ks jc kt jg ku jk kv jo kw js ko kp kq kr bi translated">你选择的任何IDE。(我更喜欢IntelliJ IDEA)</li></ul></div><div class="ab cl kc kd gp ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hb hc hd he hf"><p id="1b22" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">使用Spring Boot创建任何项目都必须从以下几点开始:</p><p id="487f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae iu" href="https://start.spring.io/" rel="noopener ugc nofollow" target="_blank">T7】https://start . spring . io</a><strong class="ix hj">/</strong></p><p id="e8fb" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这个网站是由Spring Boot开发人员创建的，旨在以创纪录的速度创建基于Spring Boot的项目。</p><p id="cd4a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我建议您在项目创建阶段添加几个依赖项:</p></div><div class="ab cl kc kd gp ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hb hc hd he hf"><ul class=""><li id="1344" class="kj kk hi ix b iy iz jc jd jg kl jk km jo kn js ko kp kq kr bi translated">Spring Boot开发工具。Spring Boot提供了一个叫做Spring Boot开发工具的模块。DevTools代表开发者工具。该模块旨在尝试在使用Spring Boot应用程序的同时缩短开发时间。Spring Boot DevTools获取更改并重启应用程序。</li><li id="2567" class="kj kk hi ix b iy ks jc kt jg ku jk kv jo kw js ko kp kq kr bi translated"><strong class="ix hj">弹簧网</strong>。这个组包括Web、Web-Servlet、Web-Struts和Web-Portlet。这些模块为创建web应用程序提供支持。</li><li id="3621" class="kj kk hi ix b iy ks jc kt jg ku jk kv jo kw js ko kp kq kr bi translated"><strong class="ix hj"> MySQL驱动。</strong> MySQL JDBC和R2DBC驱动程序。</li><li id="9dff" class="kj kk hi ix b iy ks jc kt jg ku jk kv jo kw js ko kp kq kr bi translated"><strong class="ix hj">春季数据JPA。</strong>使用Spring数据和Hibernate，通过Java持久性API将数据持久存储在SQL存储中。</li><li id="6010" class="kj kk hi ix b iy ks jc kt jg ku jk kv jo kw js ko kp kq kr bi translated"><strong class="ix hj">龙目岛</strong>Project Lombok是一个java库，它可以自动插入到您的编辑器中并构建工具，为您的java增添趣味。不要再编写另一个getter或equals方法，有了一个注释，你的类就有了一个全功能的构建器，自动记录变量，等等。</li><li id="e096" class="kj kk hi ix b iy ks jc kt jg ku jk kv jo kw js ko kp kq kr bi translated"><strong class="ix hj"> Spring Boot执行器。</strong>支持内置(或自定义)端点，让您能够监控和管理您的应用——如应用健康、指标、会话等。</li></ul><figure class="ky kz la lb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kx"><img src="../Images/098a7d6d3064e94b66eee161bb590e33.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r07CQDi2SEo-05d5JeF6Ug.png"/></div></div></figure></div><div class="ab cl kc kd gp ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hb hc hd he hf"><p id="1393" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为了正确使用Lombok库和插件，您需要在<strong class="ix hj"> build.gradle </strong>中添加四个依赖项，如果您使用的是<strong class="ix hj"> Gradle </strong>:</p><pre class="ky kz la lb fd lc ld le lf aw lg bi"><span id="fa33" class="lh li hi ld b fi lj lk l ll lm">compileOnly <strong class="ld hj">'org.projectlombok:lombok:1.18.16'<br/></strong>annotationProcessor <strong class="ld hj">'org.projectlombok:lombok:1.18.16'<br/></strong>testCompileOnly <strong class="ld hj">'org.projectlombok:lombok:1.18.16'<br/></strong>testAnnotationProcessor <strong class="ld hj">'org.projectlombok:lombok:1.18.16'</strong></span></pre><p id="f026" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">或者<strong class="ix hj"> pom.xml </strong>如果你用的是<strong class="ix hj"> Maven </strong>:</p><pre class="ky kz la lb fd lc ld le lf aw lg bi"><span id="d4e7" class="lh li hi ld b fi lj lk l ll lm">&lt;dependencies&gt;<br/>	&lt;dependency&gt;<br/>		&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;<br/>		&lt;artifactId&gt;lombok&lt;/artifactId&gt;<br/>		&lt;version&gt;1.18.16&lt;/version&gt;<br/>		&lt;scope&gt;provided&lt;/scope&gt;<br/>	&lt;/dependency&gt;<br/>&lt;/dependencies&gt;</span></pre><p id="068e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">要设置Lombok插件，您需要:</p><p id="3b86" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在Windows上使用IDE内置插件系统:</p><p id="2ad1" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">文件&gt;设置&gt;插件&gt;浏览存储库……&gt;搜索“Lombok”&gt;安装插件</strong></p></div><div class="ab cl kc kd gp ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hb hc hd he hf"><p id="0bca" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在MacOs上使用IDE内置插件系统:</p><p id="ec4a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">首选项&gt;设置&gt;插件&gt;浏览存储库……&gt;搜索“lombok”&gt;安装插件</strong></p></div><div class="ab cl kc kd gp ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hb hc hd he hf"><p id="dbff" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">手动:</p><p id="e797" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">下载最新发布的</strong><a class="ae iu" href="https://github.com/mplushnikov/lombok-intellij-plugin/releases/latest" rel="noopener ugc nofollow" target="_blank"><strong class="ix hj"/></a><strong class="ix hj">并使用首选项&gt;插件&gt;从磁盘安装插件…并在需要重启IDE后手动安装。</strong></p></div><div class="ab cl kc kd gp ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hb hc hd he hf"><p id="2511" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">警告！确保满足这两个要求:</strong></p><p id="007b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在您的项目中:单击首选项-&gt;构建、执行、部署-&gt;编译器、注释处理器。单击启用批注处理</p><p id="41a5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">之后，您可能需要通过Build -&gt; Rebuild Project对项目进行完整的重新构建。</p></div><div class="ab cl kc kd gp ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hb hc hd he hf"><p id="255a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi jt translated">实体。</p><p id="d9f4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">JPA中的实体只不过是表示可以持久存储在数据库中的数据的POJOs。实体表示存储在数据库中的表。实体的每个实例代表表中的一行。</p><p id="f718" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们创建一个新类<strong class="ix hj"> OneTimePassword </strong>并填入以下代码:</p><figure class="ky kz la lb fd ij"><div class="bz dy l di"><div class="ln lo l"/></div></figure><p id="7f28" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这个例子中，我使用Lombok注释。</p><p id="dde8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您可以向任何字段添加<strong class="ix hj"> @Getter </strong>和<strong class="ix hj"> @Setter </strong>注释，以便Lombok自动生成获取和设置值的方法。<br/>获取默认值的方法只是返回该字段的值，如果该字段的名称为Foo，则该字段的名称为get Foo(如果该字段属于逻辑类型，则为isFoo)。如果字段的名称为Foo，则设置新默认值的方法的名称为setFoo，返回void，并且有一个与字段本身类型相同的参数。此方法只是设置字段中的值。Lombok是一个很棒的库，它允许你缩短你的代码，而不是写更多的<strong class="ix hj">样板代码</strong>。</p><p id="e6c0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> @NoArgsConstructor </strong>将生成一个不带参数的构造函数。</p><p id="3bc5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">@RequiredArgsConstructor 为每个需要特殊处理的字段生成一个带1个参数的构造函数。所有未初始化的final字段都有一个参数，标记为<strong class="ix hj"> @NonNull </strong>的字段也是如此，它们在声明时没有初始化。对于那些标有<strong class="ix hj"> @NonNull、</strong>的字段，也会生成一个显式的空校验。</p><p id="b8e4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">此外，打开<strong class="ix hj"> application.properties </strong>并添加数据库属性:</p><pre class="ky kz la lb fd lc ld le lf aw lg bi"><span id="3548" class="lh li hi ld b fi lj lk l ll lm"><strong class="ld hj">spring.jpa.hibernate.ddl-auto</strong>=<strong class="ld hj">update<br/>spring.datasource.url</strong>=<strong class="ld hj">jdbc:mysql://localhost:3306/OneTimePasswordService?createDatabaseIfNotExist=true<br/>spring.datasource.username</strong>=<strong class="ld hj"><br/>spring.datasource.password</strong>=<strong class="ld hj"><br/>spring.datasource.platform</strong>=<strong class="ld hj">mysql<br/>spring.datasource.initialization-mode</strong>=<strong class="ld hj">always</strong></span></pre><p id="9246" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">createDatabaseIfNotExist = true—</strong>如果我们需要创建一个数据库，只要它没有被检测到，就使用这个参数。</p><p id="7b89" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，您可以运行项目并确保在数据库中自动创建该表。</p><figure class="ky kz la lb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lp"><img src="../Images/34e1344010f39568f757293f7acad3af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xxbn-GonMN9QpkRwDrqtrw.png"/></div></div></figure><p id="65df" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi jt translated"><span class="l ju jv jw bm jx jy jz ka kb di">居</span>居<strong class="ix hj">居。</strong></p><p id="65f1" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">储存库作为一个层直接执行所有数据库操作。现在让我们制作OneTimePasswordRepository接口，并填写以下代码:</p><figure class="ky kz la lb fd ij"><div class="bz dy l di"><div class="ln lo l"/></div></figure><p id="d294" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi jt translated">帮助者。</p><p id="04ad" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">最好将与生成新的一次性密码相关的所有方法放在一个单独的类中，即所谓的helper:</p><figure class="ky kz la lb fd ij"><div class="bz dy l di"><div class="ln lo l"/></div></figure><p id="8b70" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi jt translated">服务。</p><p id="1e14" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">该服务在连接数据库层和控制器的层上工作。现在，我们创建一次性密码服务接口，如下所示:</p><figure class="ky kz la lb fd ij"><div class="bz dy l di"><div class="ln lo l"/></div></figure><p id="931c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在变量<strong class="ix hj">中private final Long expire interval = 5L * 60 * 1000。</strong>我们存储到期变量，默认为5分钟。</p></div><div class="ab cl kc kd gp ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hb hc hd he hf"><p id="2361" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在我们用实体描述服务为我们的<strong class="ix hj"> OneTimePassword </strong>创建了主类之后。<strong class="ix hj">OneTimePasswordRepository</strong>是JPA用来与实体交互的接口。<strong class="ix hj"> OneTimePasswordService </strong>存储了我们服务的主要业务逻辑。我们可以创建一个新的类<strong class="ix hj">控制器</strong>并用<strong class="ix hj"> getOneTimePassword </strong>方法调用我们的类。与此类似:</p><figure class="ky kz la lb fd ij"><div class="bz dy l di"><div class="ln lo l"/></div></figure><p id="2124" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">@ request mapping</strong>—<a class="ae iu" href="http://twitter.com/RequestMapping" rel="noopener ugc nofollow" target="_blank">@ request mapping</a>注释旨在为控制器的方法设置地址，通过这些地址，这些方法将对客户端可用。在我们的例子中是“<strong class="ix hj"> /api/v1/otp”。</strong></p><p id="4de9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> @GetMapping </strong> —该注释表示需要处理get请求。</p><p id="c7c0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在我们的例子中，指定您需要在<strong class="ix hj">“create”处监听get请求。</strong></p><p id="b52c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">因此，一次性密码生成服务的完整路径如下所示:</p><p id="0f2b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">http://localhost:8080/API/v1/OTP/create/</strong></p><p id="3289" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们得到的回应是:</p><figure class="ky kz la lb fd ij"><div class="bz dy l di"><div class="ln lo l"/></div></figure><p id="0a96" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如您所见，他们收到了一次性密码。它在创建后与日期标签一起被写入数据库。</p><figure class="ky kz la lb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lp"><img src="../Images/a485e2fd526aaba4cbe8965150f25d2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YHMONRwT_EXMZCE0LmSKIg.png"/></div></div></figure><p id="dfc1" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">每次创建新的端点访问权限时，我们的服务都会生成一个新的一次性密码并创建一个日期标签:</p><figure class="ky kz la lb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lq"><img src="../Images/161b7a7ff8f5dd3db6dbc1703fe4fcd3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k_ngkd8BjsVG12q8bopdlw.png"/></div></div></figure><p id="9fb6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi jt translated"><span class="l ju jv jw bm jx jy jz ka kb di">S</span>T36】弹簧致动器。</p><p id="8af8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在开发了服务并将其部署到生产环境中之后，监控其性能是非常重要的。对于任务关键型应用程序来说尤其如此，例如银行系统，其中应用程序故障会直接影响业务。</p><p id="a8b4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在Spring Actuator之前，需要编写代码来检查服务的健康状况，但是使用Spring Actuator就不需要编写代码了。Spring Actuator提供了几个现成的端点，可用于监控应用程序。</p><p id="7787" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">若要启用Spring Boot执行器终结点，请将以下行添加到application.properties文件中:</p><pre class="ky kz la lb fd lc ld le lf aw lg bi"><span id="363f" class="lh li hi ld b fi lj lk l ll lm"><strong class="ld hj">management.server.port</strong>=<strong class="ld hj">8081<br/>management.endpoints.web.exposure.include</strong>=<strong class="ld hj">*<br/>management.endpoint.shutdown.enabled</strong>=<strong class="ld hj">true</strong></span></pre><p id="3eff" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在第一行中，我们指定了与执行器交互的端口。在第二行，我们指出需要包含所有端点。第三行负责禁用服务。</p><ul class=""><li id="d641" class="kj kk hi ix b iy iz jc jd jg kl jk km jo kn js ko kp kq kr bi translated"><a class="ae iu" href="http://localhost:8081/actuator" rel="noopener ugc nofollow" target="_blank">http://localhost:8081/actuator</a></li><li id="6467" class="kj kk hi ix b iy ks jc kt jg ku jk kv jo kw js ko kp kq kr bi translated"><a class="ae iu" href="http://localhost:8081/actuator/health" rel="noopener ugc nofollow" target="_blank">http://localhost:8081/actuator/health</a></li><li id="8aea" class="kj kk hi ix b iy ks jc kt jg ku jk kv jo kw js ko kp kq kr bi translated"><a class="ae iu" href="http://localhost:8081/actuator/info" rel="noopener ugc nofollow" target="_blank">http://localhost:8081/actuator/info</a></li></ul><h1 id="433c" class="lr li hi bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated"><a class="ae iu" href="http://localhost:8081/actuator/health" rel="noopener ugc nofollow" target="_blank">http://localhost:8081/actuator/health</a></h1><p id="90f1" class="pw-post-body-paragraph iv iw hi ix b iy mo ja jb jc mp je jf jg mq ji jj jk mr jm jn jo ms jq jr js hb bi translated"><code class="du mt mu mv ld b">{"status":"UP"}</code></p><p id="6d0e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi jt translated">C 结束语。</p><p id="cc78" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在本文中，我们已经学会了为想要使用我们的Spring Boot服务的人生成一次性密码。在下一部分中，我们将把一次性密码服务与登录表单集成到前端。我们将编写一个使用登录名、密码和一次性密码来授权新用户的页面。我们还将用自动化脚本覆盖我们的API服务，用Cypress自动化脚本覆盖前端UI表单。</p><figure class="ky kz la lb fd ij er es paragraph-image"><div class="er es mw"><img src="../Images/37405c6bd9906e7572c1b5d0f490ca04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*Lu3G8OVrxTr-BOSOHvP5Gw.png"/></div><figcaption class="iq ir et er es is it bd b be z dx"><a class="ae iu" href="https://test-engineer.site/" rel="noopener ugc nofollow" target="_blank">https://test-engineer.site/</a></figcaption></figure><h1 id="2a4c" class="lr li hi bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">作者<a class="ae iu" href="https://www.linkedin.com/in/vaskocuturilo/" rel="noopener ugc nofollow" target="_blank">安东·斯米尔诺夫</a></h1></div></div>    
</body>
</html>