<html>
<head>
<title>Laravel Tutorial ~ Laravel Eloquent Relationships</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">拉勒维尔教程~拉勒维尔雄辩的关系</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/laravel-tutorial-laravel-eloquent-relationships-ec62367e8940?source=collection_archive---------5-----------------------#2022-06-11">https://medium.com/geekculture/laravel-tutorial-laravel-eloquent-relationships-ec62367e8940?source=collection_archive---------5-----------------------#2022-06-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/39ff19c86b6ed8ccec917e82d5a68500.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h5kfsoPEk2CZm0J1GXjYfg.png"/></div></div></figure><p id="1c60" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你好，朋友们你们好吗，希望你们永远健康成功。</p><p id="08e5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这次我们将讨论雄辩表之间的关系。这个功能会让你更容易让关系变得更简洁简单。如果我们使用这个SQL命令，它将使表之间的关系更长。让我们在雄辩上讨论关系。</p><p id="0bee" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在我继续之前，可能会有一些朋友感兴趣的教程。</p><p id="5442" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae jo" href="https://temanngoding.com/menggunakan-scope-di-laravel/" rel="noopener ugc nofollow" target="_blank">使用Laravel中的范围</a></p><p id="f811" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae jo" href="https://temanngoding.com/tutorial-lengkap-menggunakan-soft-delete-di-laravel/" rel="noopener ugc nofollow" target="_blank">使用Laravel中的软删除完成教程</a></p><p id="6ff7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae jo" href="https://temanngoding.com/cara-menggunakan-seeder-di-laravel/" rel="noopener ugc nofollow" target="_blank">如何在拉韦尔使用播种机</a></p><p id="aa69" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Laravel数据库关系</p><ol class=""><li id="a4ed" class="jp jq hi is b it iu ix iy jb jr jf js jj jt jn ju jv jw jx bi translated">一对一关系，其中一个表中的数据只与另一个表中的数据有关系。例如，数据表tb_User在tb_Contact表中有一个关系1电话号码。</li><li id="c872" class="jp jq hi is b it jy ix jz jb ka jf kb jj kc jn ju jv jw jx bi translated">一对多关系，其中一个表中的一个数据与另一个表中的一些数据有关系。例如，数据表tb_Category与tb_Inventory中的许多数据项有关系。或者换句话说，1品类有很多库存数据。</li><li id="384b" class="jp jq hi is b it jy ix jz jb ka jf kb jj kc jn ju jv jw jx bi translated">多对一关系(一对多逆关系)是一对多关系的反义词。例如，我们想知道tb_Inventory中的项目数据属于哪个类别，那么将使用这个关系。</li><li id="52d1" class="jp jq hi is b it jy ix jz jb ka jf kb jj kc jn ju jv jw jx bi translated">多对多关系，其中一个表中的许多数据与其他表中的许多数据也有关系。这种关系是通过辅助表形成的。例如，tb_Student表中的许多记录与tb_Buku表中的许多数据有借用关系。这种关系由一个名为tb_Transaksi的帮助表构成。</li></ol><h1 id="1cc1" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">一对一的雄辩关系</h1><p id="fdbc" class="pw-post-body-paragraph iq ir hi is b it lb iv iw ix lc iz ja jb ld jd je jf le jh ji jj lf jl jm jn hb bi translated">这是最基本的关系。例如:每个用户有1部手机。传递给hasOne方法的第一个参数是相关的模型名称。</p><pre class="lg lh li lj fd lk ll lm ln aw lo bi"><span id="64ef" class="lp ke hi ll b fi lq lr l ls lt">public function profile():<br/>{<br/>    return $this-&gt;hasOne(Profile::class);<br/>}</span></pre><p id="6eda" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">hasOne函数现在希望在概要文件模型中有一个用户id字段。如果您的列名不同，添加第二个参数到与其他列名有一个关系的<strong class="is hj">:</strong></p><pre class="lg lh li lj fd lk ll lm ln aw lo bi"><span id="cd6e" class="lp ke hi ll b fi lq lr l ls lt">return $this-&gt;hasOne(Profile::class, 'foreign_key');</span></pre><ul class=""><li id="4d8e" class="jp jq hi is b it iu ix iy jb jr jf js jj jt jn lu jv jw jx bi translated">外键<br/>口才根据型号名称确定外键。在这种情况下，假设概要文件模型有一个<strong class="is hj"> foreign_key </strong>默认author_id。<br/>指定一个外键，其中默认的用户和作者关系是user_id。要手动设置外键，可以将其写为第二个参数。</li></ul><pre class="lg lh li lj fd lk ll lm ln aw lo bi"><span id="d794" class="lp ke hi ll b fi lq lr l ls lt">return $this-&gt;hasOne(Profile::class, 'foreign_key','local_key');</span></pre><ul class=""><li id="dc38" class="jp jq hi is b it iu ix iy jb jr jf js jj jt jn lu jv jw jx bi translated">反向关系外键。在前面的例子中，雄辩试图将手机型号的user_id与用户型号的id相匹配。默认的外键名是关系的方法名加上_id后缀，因此在本例中是user_id。<br/>如果不匹配，可以写在belongsTo的第二个自变量中:</li></ul><pre class="lg lh li lj fd lk ll lm ln aw lo bi"><span id="4dcf" class="lp ke hi ll b fi lq lr l ls lt">public function profile():<br/>{<br/>    return $this-&gt;belongsTo(Profile::class);<br/>}</span></pre><ul class=""><li id="7a77" class="jp jq hi is b it iu ix iy jb jr jf js jj jt jn lu jv jw jx bi translated">反关系主键<br/>Apabila dii ginka relais不支持默认主键，参数ketiga中的参数dapat dituliskan属于:</li></ul><pre class="lg lh li lj fd lk ll lm ln aw lo bi"><span id="f8c3" class="lp ke hi ll b fi lq lr l ls lt">return $this-&gt;belongsTo(Profile::class, 'foreign_key','local_key');</span></pre><h1 id="c3da" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">雄辩的一对多关系</h1><p id="b330" class="pw-post-body-paragraph iq ir hi is b it lb iv iw ix lc iz ja jb ld jd je jf le jh ji jj lf jl jm jn hb bi translated">另一件非常重要，甚至可能是最重要的事情是一对多关系。也被称为<strong class="is hj"> hasMany-relationship </strong>，这种关系定义了“一个项目有许多其他项目”的关系。这个关系和上面的很像。</p><p id="f110" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">继续我们的博客例子，假设一个档案有多篇文章。转到您的概要文件模型，并添加以下方法:</p><pre class="lg lh li lj fd lk ll lm ln aw lo bi"><span id="1de9" class="lp ke hi ll b fi lq lr l ls lt">public function posts(): HasMany<br/>{<br/>    return $this-&gt;hasMany(Post::class);<br/>    //Or: return $this-&gt;hasMany(Post::class, 'foreign_key');<br/>}</span></pre><ul class=""><li id="1b2a" class="jp jq hi is b it iu ix iy jb jr jf js jj jt jn lu jv jw jx bi translated">外键dan本地键<br/>一对多<strong class="is hj">中外键和主(本地)键的使用也类似于<strong class="is hj">一对一</strong>。</strong></li></ul><pre class="lg lh li lj fd lk ll lm ln aw lo bi"><span id="0128" class="lp ke hi ll b fi lq lr l ls lt">return $this-&gt;hasMany(Post::class, 'foreign_key');<br/>return $this-&gt;hasMany(Post::class, 'foreign_key','local_key');</span></pre><h1 id="cabd" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">多对多</h1><p id="d746" class="pw-post-body-paragraph iq ir hi is b it lb iv iw ix lc iz ja jb ld jd je jf le jh ji jj lf jl jm jn hb bi translated">这种关系也被广泛应用。它的用法比前两种关系稍微复杂一些。<br/>下面的例子是有用户、角色和role_user的地方。一个用户可以有多个角色，一个角色可以有多个用户。<br/> role_user是默认的中间表或透视表。表名来自角色和用户表，按字母顺序排列<br/>关系使用<strong class="is hj"> belongsToMany </strong>方法定义。</p><pre class="lg lh li lj fd lk ll lm ln aw lo bi"><span id="154a" class="lp ke hi ll b fi lq lr l ls lt">public function profiles(): BelongsToMany<br/>{<br/>    return $this-&gt;belongsToMany(Profile::class);<br/>}</span></pre><ul class=""><li id="61f8" class="jp jq hi is b it iu ix iy jb jr jf js jj jt jn lu jv jw jx bi translated">数据透视表<br/>如前所述，数据透视表名称由两个表名生成，并按字母顺序排序。如果需要，可以在任何方法下面的<strong class="is hj">的第二个参数中定义。</strong></li></ul><pre class="lg lh li lj fd lk ll lm ln aw lo bi"><span id="b26b" class="lp ke hi ll b fi lq lr l ls lt">return $this-&gt;belongsToMany(Profile::class,'role_user');</span></pre><p id="41c8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">除了定义数据透视表名称之外，与其他类型的关系一样，每个表的键也可以定义如下:</p><pre class="lg lh li lj fd lk ll lm ln aw lo bi"><span id="2a4b" class="lp ke hi ll b fi lq lr l ls lt">return $this-&gt;belongsToMany(Profile::class,'role_user','user_id','role_id');</span></pre><p id="15f8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果数据透视表中有其他字段/列，并通过写入<strong class="is hj"> withPivot </strong>方法来定义。</p><pre class="lg lh li lj fd lk ll lm ln aw lo bi"><span id="bdf4" class="lp ke hi ll b fi lq lr l ls lt">return $this-&gt;belongsToMany(Profile::class)-&gt;withPivot('column1','column2');</span></pre><p id="304d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这就是我这次可以传达的教程，希望有用。</p><p id="1ce7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">谢谢你……</p></div></div>    
</body>
</html>