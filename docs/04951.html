<html>
<head>
<title>Introduction to Unity’s Animator</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Unity动画师简介</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/introduction-to-unitys-animator-baac57eccc8a?source=collection_archive---------22-----------------------#2021-07-06">https://medium.com/geekculture/introduction-to-unitys-animator-baac57eccc8a?source=collection_archive---------22-----------------------#2021-07-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="fd07" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">了解如何在Unity中控制动画</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/38011bff0d0d20fcacc68a19ccd86a5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gSMGm-iGaOn9VVH-v7O6dA.png"/></div></div></figure><p id="46bc" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">Animator是Unity的主要可视化工具，用于基于<a class="ae kf" href="https://docs.unity3d.com/Manual/StateMachineBasics.html" rel="noopener ugc nofollow" target="_blank"> <strong class="jl hj">状态机</strong> </a>方法处理游戏对象中的多个动画(每层只能有一个状态处于活动状态，如果满足特定条件，状态可以在它们之间转换)。</p><p id="b5f1" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在本文中，我将只关注这个工具的基本用法，向您展示Animator状态机如何工作，如何创建新参数，如何创建过渡，以及如何通过代码修改现有参数。</p></div><div class="ab cl kg kh gp ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="hb hc hd he hf"><h1 id="bbab" class="kn ko hi bd kp kq kr ks kt ku kv kw kx io ky ip kz ir la is lb iu lc iv ld le bi translated">如何开始</h1><p id="98c3" class="pw-post-body-paragraph jj jk hi jl b jm lf ij jo jp lg im jr js lh ju jv jw li jy jz ka lj kc kd ke hb bi translated">前往<code class="du lk ll lm ln b">Window &gt; Animation &gt; Animator</code>打开动画窗口。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lo"><img src="../Images/aaf72ba94e70d5b524a195ac5c07c623.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uc8C_uTC_WY0oWY9yR-PEA.png"/></div></div></figure><p id="c845" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">正如你在图像中看到的，它完全是空的。那是因为它需要一个<strong class="jl hj">动画师控制器</strong>来配合工作。您可以在项目窗口中右键单击任意位置来创建一个。一旦你创建了一个，把它拖到你想要制作动画的游戏对象上。一个Animator组件将被添加到你的游戏对象中，现在你可以开始添加动画了。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lp"><img src="../Images/6599c92aee506fb0f7bab0e5f8df3f8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*jqW0Z7PIcQBzs8xAPKiBEg.gif"/></div></div><figcaption class="lq lr et er es ls lt bd b be z dx">In my case, I will drag it to my protagonist 3D model.</figcaption></figure></div><div class="ab cl kg kh gp ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="hb hc hd he hf"><h1 id="f7db" class="kn ko hi bd kp kq kr ks kt ku kv kw kx io ky ip kz ir la is lb iu lc iv ld le bi translated">了解动画师</h1><p id="6885" class="pw-post-body-paragraph jj jk hi jl b jm lf ij jo jp lg im jr js lh ju jv jw li jy jz ka lj kc kd ke hb bi translated">这一节讨论一个比较高级的话题。它将帮助您快速掌握状态机的概念，并正确理解Animator的核心，也许会在将来为您的项目或游戏提供某些功能。如果你只是想开始使用它，你可以跳过这一部分。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lv"><img src="../Images/57f04a118b9a69878adab9f0771c34db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IgHj60ZKDqcP72ppsdEPnA.png"/></div></div></figure><p id="bf66" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">前面我已经说过，Animator是一个基于<a class="ae kf" href="https://docs.unity3d.com/Manual/StateMachineBasics.html" rel="noopener ugc nofollow" target="_blank"> <strong class="jl hj">状态机</strong> </a> <strong class="jl hj">的工具。</strong>这是一个<strong class="jl hj"> </strong>系统，它拥有一组“状态”(或解耦行为)，其中只有一个状态被更新或保持活动，并且在状态之间存在多组指令，这些指令定义了从活动状态转换到不同的非活动状态的方式。</p><p id="80f6" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">然而，Animator与标准状态机有其自身的不同之处，它们是:</p><ul class=""><li id="6a60" class="lw lx hi jl b jm jn jp jq js ly jw lz ka ma ke mb mc md me bi translated"><strong class="jl hj">状态是动画剪辑</strong>。您可以修改一些动画设置，但它们不包含任何代码功能(有一种方法可以添加功能，但这超出了本文的范围)。</li></ul><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mf"><img src="../Images/8f5868a16aff0938dcf9ec871adcc309.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oZvleNS60Wzq_zSIg5BpXw.png"/></div></div></figure><ul class=""><li id="6908" class="lw lx hi jl b jm jn jp jq js ly jw lz ka ma ke mb mc md me bi translated"><strong class="jl hj">动画师有层次</strong>，这意味着在一个动画师控制器(或状态机)中有多个不同机器的实例在运行。如果您需要覆盖某些动画(例如，一个角色可以用一只手臂指向一个方向，同时仍然保留行走周期动画)，这将非常有用。</li></ul><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mg"><img src="../Images/e6d93e29666c7dcbd4672163cdf07ac4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1382/format:webp/1*a7tP_tfSuChDpKnaMyGbfQ.png"/></div></figure><ul class=""><li id="89d6" class="lw lx hi jl b jm jn jp jq js ly jw lz ka ma ke mb mc md me bi translated"><strong class="jl hj">每一层都有一个“任意状态”事件。</strong>有时候，无论机器当前状态如何，都会需要播放一些动画。在给定的条件下，该事件将转移到其他状态。(通常通过该事件处理跳跃动画)。</li></ul><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mh"><img src="../Images/7aa20b9db140b4f1bf298c4288cb1b5e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fFzCKLZ_7L7xVE7huHCNfg.png"/></div></div></figure><ul class=""><li id="870a" class="lw lx hi jl b jm jn jp jq js ly jw lz ka ma ke mb mc md me bi translated"><strong class="jl hj">转场的设置不仅仅是条件</strong>。因为动画师处理动画，所以可以修改一些值来适当地调整动画过渡。(下一节将详细介绍过渡)。</li></ul></div><div class="ab cl kg kh gp ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="hb hc hd he hf"><h1 id="0f98" class="kn ko hi bd kp kq kr ks kt ku kv kw kx io ky ip kz ir la is lb iu lc iv ld le bi translated"><strong class="ak">使用动画师</strong></h1><p id="c28c" class="pw-post-body-paragraph jj jk hi jl b jm lf ij jo jp lg im jr js lh ju jv jw li jy jz ka lj kc kd ke hb bi translated">拖动或创建自己的动画到动画师。我将拖动两个剪辑:闲置和行走。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mi"><img src="../Images/12014c4a77b460245b85d1ce80361839.png" data-original-src="https://miro.medium.com/v2/resize:fit:724/format:webp/1*LTOiZ25Tpmo1Nwvu2Ia1fA.png"/></div></figure><p id="ff21" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">其中一个动画将被设置为默认动画，它将首先开始播放。如果你想改变默认动画，右击<strong class="jl hj">条目，设置状态机默认状态，并点击想要的默认动画。</strong></p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mj"><img src="../Images/34a307e0447e92ec978d1db3acd4f691.png" data-original-src="https://miro.medium.com/v2/resize:fit:978/format:webp/1*zsgEvInNPJ4NDlVS3I7oog.png"/></div></figure><p id="fdb5" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">现在动画已经在动画师里面了，我需要创建它们之间的过渡。为了创建一个，我右击动画并选择<strong class="jl hj">制作过渡</strong>。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mk"><img src="../Images/96fbc29d52fccd9e88a6cb17a4561700.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*vJHp1u_M5nZOPWYUqeRHnA.gif"/></div></div></figure><p id="7bf0" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">现在，我必须更改两个过渡的一些设置，以避免两个问题:</p><ul class=""><li id="f32a" class="lw lx hi jl b jm jn jp jq js ly jw lz ka ma ke mb mc md me bi translated">有一个“退出时间”设置，在动画达到完成百分比之前不允许过渡。我不想等待几乎整个空闲或行走动画的持续时间来允许过渡发生。在两个过渡上取消该设置将使动画更具反应性。</li></ul><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es ml"><img src="../Images/b8b8b4bccb7b525827be689652fd1b5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1158/format:webp/1*saVM3rC5DJ8ra5wDGuzAIg.png"/></div></figure><ul class=""><li id="a908" class="lw lx hi jl b jm jn jp jq js ly jw lz ka ma ke mb mc md me bi translated">没有任何条件，这意味着它将不断地从一种状态转换到另一种状态。为了解决这个问题，我创建了一个名为“ControllerSpeed”的新浮点参数，并将条件设置为高于或低于某个值。</li></ul><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mm"><img src="../Images/8f91c9fe3c98474a11e4bb217cf3e8fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:912/format:webp/1*6jflX43zLTmQT8bocewzxA.png"/></div></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mn"><img src="../Images/b87b329f92a74588d39001680494cf24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7TE8N7xy2VxuyNDIjEgafg.png"/></div></div><figcaption class="lq lr et er es ls lt bd b be z dx">Idle To Walk: ControllerSpeed &gt; 0.1 | Walk To Idle: ControllerSpeed &lt; 0.1</figcaption></figure><p id="19ae" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">最后，为了让一切正常工作，创建一个新脚本，引用Animator组件，声明一个新字符串来写入参数名，并通过代码更新该值。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mo"><img src="../Images/7acf02ac07f7faa4d3f8c488f2d967e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ao-T24oidRw7lu4Q96Ksrg.png"/></div></div></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mp"><img src="../Images/b31f1a267528ab1324f5ac6af4fc862f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zNRFN6gKK4XVU4SY5fjRkQ.png"/></div></div></figure></div><div class="ab cl kg kh gp ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="hb hc hd he hf"><h1 id="1e81" class="kn ko hi bd kp kq kr ks kt ku kv kw kx io ky ip kz ir la is lb iu lc iv ld le bi translated">结果</h1><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mq"><img src="../Images/0134c3f1272dc64fb9c9422c99869a84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*2-usw5y83bgm1PBdHHiksw.gif"/></div></div></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mr"><img src="../Images/4ac51291fcdf051d173e79e198849b3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*ddBshVGYaK8U6pUoWtGNWg.gif"/></div></div><figcaption class="lq lr et er es ls lt bd b be z dx">Behind the scene</figcaption></figure></div></div>    
</body>
</html>