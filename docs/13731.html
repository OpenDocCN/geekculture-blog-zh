<html>
<head>
<title>Detecting anomalies in time series based on the normal distribution</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">基于正态分布的时间序列异常检测</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/detecting-anomalies-in-time-series-based-on-the-normal-distribution-e2dc4dd9cf15?source=collection_archive---------5-----------------------#2022-07-26">https://medium.com/geekculture/detecting-anomalies-in-time-series-based-on-the-normal-distribution-e2dc4dd9cf15?source=collection_archive---------5-----------------------#2022-07-26</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="1c00" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">大家好，在这篇文章中我想谈谈基于正态分布的时间序列异常检测的基本方法。</p><p id="b844" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">时间序列是描述一段时间内发生的过程的一系列值。这些值应该以固定的时间间隔出现，这是处理时间序列的强制性要求。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/2ef3ba6f809307ab1658eafc82a2192a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oIRU4Rs78CMOcV4_WS78Og.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx">Here is an example of a time series describing the number of cars entering a gas station.</figcaption></figure><h2 id="1357" class="jt ju hi bd jv jw jx jy jz ka kb kc kd iq ke kf kg iu kh ki kj iy kk kl km kn bi translated">为什么要寻找异常点？</h2><p id="b54c" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">与时间序列相关的主要问题是分析和预测。</p><ul class=""><li id="be8d" class="kt ku hi ih b ii ij im in iq kv iu kw iy kx jc ky kz la lb bi translated">可能需要时间序列分析来监控和响应系统行为的某些变化。</li><li id="bff4" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">时间序列预测在许多领域都很有趣，例如预测股票市场的汇率或零售商店的顾客流量和产品需求。</li></ul><p id="ddf6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">作为时间序列分析任务的一个例子，我们可以设想这样一个任务:监控网站的负载，以便在出现异常负载时向管理员发送通知。</p><p id="65bb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">预测时间序列时，我们必须建立时间序列的模型，通常使用过去的统计信息。根据合适的策略，在建立模型时减少负面影响正是寻找异常、将它们从训练样本中清除或替换它们所需要的。</p><h2 id="359f" class="jt ju hi bd jv jw jx jy jz ka kb kc kd iq ke kf kg iu kh ki kj iy kk kl km kn bi translated">使用统计分析发现异常</h2><p id="dcd3" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">让我们考虑一个异常，一个概率小于0.1%的事件，即在99.9%的情况下这不应该发生。</p><p id="60f3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了进行搜索，我们需要关于数据分布的信息，即平均值和标准差。我们还将使用公式来计算两个独立事件发生的概率，它等于这两个事件概率的乘积。</p><p id="b820" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> P(AB) = P(A)*P(B) </strong></p><p id="d5c4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将假设在我们的系列中，每个事件都不依赖于前一个事件，我们将通过同时乘以这些事件的概率来计算几个连续事件发生的概率。</p><p id="b262" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以通过知道数据分布的信息来获得事件发生的概率。该图显示了对时间序列应用正态分布的示例。知道了这个值属于哪个范围，我们就可以说这种情况发生的概率有多大。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lh"><img src="../Images/831b5e284cb3c5f7dd110cdfde897e26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ruBPPNrVvk_WpHE9D2Krlw.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx">Normal distribution overlay to time series</figcaption></figure><h2 id="cb14" class="jt ju hi bd jv jw jx jy jz ka kb kc kd iq ke kf kg iu kh ki kj iy kk kl km kn bi translated">异常检测器</h2><p id="718b" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">因此，第一个异常检测器是异常检测器。这是最常见的检测器之一，它将所有超出3个标准偏差的单个值视为异常。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es li"><img src="../Images/6e3ff6fc1addbc43221b1846bbe70ec4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2D1Enk5PmFEJjpYY5-Q_UA.png"/></div></div></figure><h2 id="3ebf" class="jt ju hi bd jv jw jx jy jz ka kb kc kd iq ke kf kg iu kh ki kj iy kk kl km kn bi translated">平均值的异常偏差</h2><p id="8b5e" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">第二个检测器是均值的偏差异常。我们从正态分布中知道，一半的点位于平均值的右边，另一半位于平均值的左边。因此，在图表的一边找到一个值的概率是50%。</p><p id="a9df" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果一行中有14个或更多的值位于图表的同一侧，那么这是一个异常，这种事件的概率小于0.007%</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es li"><img src="../Images/fbe8035c30bd51bc586de9ced42f0fb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0meLXIpDCHimzpi4X9wt2g.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx">anomaly subsequence is large of mean</figcaption></figure><h2 id="fe75" class="jt ju hi bd jv jw jx jy jz ka kb kc kd iq ke kf kg iu kh ki kj iy kk kl km kn bi translated">基于概率区间的异常</h2><p id="2766" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">现在让我们看看标准偏差值之间的不同范围。下图显示了落入这些范围的概率。</p><p id="b56b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">(正态分布且概率落入区间的图片)</p><p id="2b49" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，我们可以讨论每个区间序列的异常部分，如果:</p><ul class=""><li id="a32a" class="kt ku hi ih b ii ij im in iq kv iu kw iy kx jc ky kz la lb bi translated">分成1 sigma区间—一行25个值。这种匹配的概率小于0.008%</li><li id="9340" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">1–2 sigma—连续7个值，这种匹配的概率小于0.01%</li><li id="5ccc" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">2–3西格玛— 3种价值观。这种匹配的概率小于0.008%</li></ul><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es li"><img src="../Images/dbca71a54cf2ef9047babb4cf8e97cd5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nNFpZg_E-F02LByoBrQe0g.png"/></div></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es li"><img src="../Images/a8f10ffdd69514604c23241c93c89b20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*saD2UOVERqdGAFtNlDB9rw.png"/></div></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es li"><img src="../Images/5b18248ae2da5621426e6eab18895b8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8pgGPVP95DnCJk-WI2tvUw.png"/></div></div></figure><h2 id="a827" class="jt ju hi bd jv jw jx jy jz ka kb kc kd iq ke kf kg iu kh ki kj iy kk kl km kn bi translated">底层数据分布的变化</h2><p id="fec2" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">此外，数据结构中的突然变化可以被认为是异常，即概率密度函数本身发生变化。为此，有必要测量窗口中的平均值和标准差，并将它们与之前整个系列的数据进行比较。</p><p id="4f4c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该图显示了一个示例，其中平均值和标准偏差相对于整个周期的偏差为30%或更多，固定在宽度为50的窗口中。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es li"><img src="../Images/2f5bb19c4293bd0f62517dd09a1d93ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9A1Cv6X-qYX6geEdBMNuxw.png"/></div></div></figure><h2 id="009d" class="jt ju hi bd jv jw jx jy jz ka kb kc kd iq ke kf kg iu kh ki kj iy kk kl km kn bi translated">摘要</h2><p id="3ef3" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">因此，在本文中，我们研究了使用统计分析发现异常的方法。上述所有检测器都可以应用于普通、微分和平滑系列。应用预转换的决定取决于主题领域和数据的性质。</p><div class="lj lk ez fb ll lm"><a href="https://github.com/stepanovD/ts_anomaly_detection_course" rel="noopener  ugc nofollow" target="_blank"><div class="ln ab dw"><div class="lo ab lp cl cj lq"><h2 class="bd hj fi z dy lr ea eb ls ed ef hh bi translated">GitHub-stepanovD/ts _ anomaly _ detection _ course:时间序列异常检测示例…</h2><div class="lt l"><h3 class="bd b fi z dy lr ea eb ls ed ef dx translated">这个库包括笔记本，上面有关于时间序列异常检测的例子。</h3></div><div class="lu l"><p class="bd b fp z dy lr ea eb ls ed ef dx translated">github.com</p></div></div><div class="lv l"><div class="lw l lx ly lz lv ma jn lm"/></div></div></a></div></div></div>    
</body>
</html>