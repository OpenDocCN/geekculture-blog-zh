<html>
<head>
<title>Spotify Data Visualization and Analysis using Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python的Spotify数据可视化和分析</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/spotify-data-visualization-and-analysis-using-python-4af81c5531a7?source=collection_archive---------7-----------------------#2021-08-30">https://medium.com/geekculture/spotify-data-visualization-and-analysis-using-python-4af81c5531a7?source=collection_archive---------7-----------------------#2021-08-30</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="6f9d" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">初级和中级数据分析项目。</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/b5682f0d7df21ab78603279b0a4550c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T8SqwJxrGzc2N8GPvvAYLg.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Spotify data analysis using python</figcaption></figure><p id="9af2" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">大多数歌曲爱好者都在Spotify上听歌。它是最受欢迎的歌曲流媒体平台之一。如果你是一名程序员，你就会知道代码和歌曲之间的关系。所以，我们先从一杯咖啡开始在Spotify上做一些分析。</p><h1 id="d2a8" class="kj kk hi bd kl km kn ko kp kq kr ks kt io ku ip kv ir kw is kx iu ky iv kz la bi translated">代码和分析</h1><ul class=""><li id="87e3" class="lb lc hi jp b jq ld jt le jw lf ka lg ke lh ki li lj lk ll bi translated">导入下列库</li></ul><pre class="iy iz ja jb fd lm ln lo lp aw lq bi"><span id="59a8" class="lr kk hi ln b fi ls lt l lu lv">#for mathematical computation</span><span id="ffc1" class="lr kk hi ln b fi lw lt l lu lv">import numpy as np<br/>import pandas as pd<br/>import scipy.stats as stats</span><span id="9f50" class="lr kk hi ln b fi lw lt l lu lv">#for data visualization</span><span id="a088" class="lr kk hi ln b fi lw lt l lu lv">import seaborn as sns<br/>import matplotlib.pyplot as plt<br/>from matplotlib.pyplot import figure<br/>import plotly <br/>import plotly.express as px</span><span id="3322" class="lr kk hi ln b fi lw lt l lu lv">% matplotlib inline</span></pre><ul class=""><li id="f7e1" class="lb lc hi jp b jq jr jt ju jw lx ka ly ke lz ki li lj lk ll bi translated">让我们加载数据，先睹为快。下载数据集并将其添加到路径中。之后，渲染数据集的前5个数据。</li></ul><pre class="iy iz ja jb fd lm ln lo lp aw lq bi"><span id="3645" class="lr kk hi ln b fi ls lt l lu lv">df = pd.read_csv("/content/spotify_dataset.csv", encoding='latin-1')<br/>df.head()</span></pre><p id="7f7c" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">现在运行这个单元，你会在屏幕上看到这样的东西。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ma"><img src="../Images/72b187877b4d763136118db3238cc50c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5NPdonSttO4t_PAd3e6pzQ.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Spotify data analysis</figcaption></figure><ul class=""><li id="b70c" class="lb lc hi jp b jq jr jt ju jw lx ka ly ke lz ki li lj lk ll bi translated">获取更多关于数据的信息</li></ul><pre class="iy iz ja jb fd lm ln lo lp aw lq bi"><span id="cba6" class="lr kk hi ln b fi ls lt l lu lv">#data info<br/>df.info()</span><span id="75cd" class="lr kk hi ln b fi lw lt l lu lv">#Check missing values<br/>df.isnull().sum()</span></pre><p id="5408" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">检查每一列中的空值。幸运的是，我们的数据集中没有空值。<br/>之后，用每一列的类型属性获得更多关于我们数据集的信息。</p><ul class=""><li id="9132" class="lb lc hi jp b jq jr jt ju jw lx ka ly ke lz ki li lj lk ll bi translated"><strong class="jp hj">艺术家绘制的次数</strong></li></ul><pre class="iy iz ja jb fd lm ln lo lp aw lq bi"><span id="1c06" class="lr kk hi ln b fi ls lt l lu lv">#number of times charted by artist</span><span id="9103" class="lr kk hi ln b fi lw lt l lu lv">df_numbercharted=df.groupby('Artist').sum().sort_values('Number of Times Charted', ascending=False)<br/>df_numbercharted=df_numbercharted.reset_index()<br/>df_numbercharted</span></pre><p id="6b8c" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">为此，我们选取一位艺术家，将绘制的次数相加，并按降序排列。</p><pre class="iy iz ja jb fd lm ln lo lp aw lq bi"><span id="4843" class="lr kk hi ln b fi ls lt l lu lv">px.bar(x='Artist', y='Number of Times Charted', data_frame=df_numbercharted.head(7), title="Top 7 Artists with Highes Number of Times Charted")</span></pre><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mb"><img src="../Images/a7779f7e42d1ffff364df5ce3bb88d33.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*stqymgf1oNiibOKblx7GtA.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Spotify Data Analysis</figcaption></figure><p id="c17e" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">当您运行该单元时，您将看到类似于上图的内容。Billie Elish是排行榜上次数最多的人。上面的条形图只有前7名艺术家。你可以查看前10名或更多的艺术家。试着玩代码就好了。</p><ul class=""><li id="f8f5" class="lb lc hi jp b jq jr jt ju jw lx ka ly ke lz ki li lj lk ll bi translated">列之间的相关性</li></ul><p id="0acb" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">让我们看看各列之间的相关性，并检查我们是否能找到任何有趣的东西。为此，我们先清理一下现有的数据。之后，将所有列转换为数字。</p><pre class="iy iz ja jb fd lm ln lo lp aw lq bi"><span id="596a" class="lr kk hi ln b fi ls lt l lu lv">#clean data first</span><span id="08ef" class="lr kk hi ln b fi lw lt l lu lv">df=df.fillna('')<br/>df=df.replace(' ', '')<br/>df['Streams']=df['Streams'].str.replace(',','')</span><span id="795c" class="lr kk hi ln b fi lw lt l lu lv">#convet all numeric columns to numeric</span><span id="0ae3" class="lr kk hi ln b fi lw lt l lu lv">df[['Highest Charting Position', 'Number of Times Charted', 'Streams', 'Popularity', 'Danceability', 'Energy', 'Loudness', 'Speechiness',<br/>       'Acousticness', 'Liveness', 'Tempo', 'Duration (ms)', 'Valence',<br/>       ]] = df[['Highest Charting Position', 'Number of Times Charted', 'Streams','Popularity', 'Danceability', 'Energy', 'Loudness', 'Speechiness',<br/>       'Acousticness', 'Liveness', 'Tempo', 'Duration (ms)', 'Valence',<br/>       ]].apply(pd.to_numeric)</span></pre><p id="55af" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">让我们将年份从“发布日期”列中分离出来，以便能够分析其相关性。</p><pre class="iy iz ja jb fd lm ln lo lp aw lq bi"><span id="fa23" class="lr kk hi ln b fi ls lt l lu lv">df['Release Year'] = pd.DatetimeIndex(df['Release Date']).year</span></pre><p id="b89e" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">现在，绘制热图。</p><pre class="iy iz ja jb fd lm ln lo lp aw lq bi"><span id="f928" class="lr kk hi ln b fi ls lt l lu lv">%matplotlib inline</span><span id="021b" class="lr kk hi ln b fi lw lt l lu lv">f,ax = plt.subplots(figsize=(14,10))<br/>sns.heatmap(df.corr(),annot = True,fmt = ".1f",ax = ax)<br/>plt.show()</span></pre><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mc"><img src="../Images/5e76e9496ec4f45d521c12759e90cfe0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CeqLxBozx9OIW9AWeKmplw.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Spotify Data Analysis</figcaption></figure><p id="4213" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">众所周知，原声音乐往往比较安静，需要仔细聆听。这就是为什么它与能量和响度成负相关，这是有道理的。</p><p id="e6e0" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">现在，在代码中，“annot”用于显示立方体中的数字。“fmt”用于表示数字，如果您设置fmt="0.2% "那么在立方体中，数字将以百分比的形式出现，并带有两位小数。显然，我们不希望这样，因为这会使可读性变得模糊。</p><ul class=""><li id="995c" class="lb lc hi jp b jq jr jt ju jw lx ka ly ke lz ki li lj lk ll bi translated">可跳舞性</li></ul><pre class="iy iz ja jb fd lm ln lo lp aw lq bi"><span id="e629" class="lr kk hi ln b fi ls lt l lu lv">px.line(x='Release Year', y='Danceability', data_frame=df, title="Danceability over the course of the Year")</span></pre><p id="43e0" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">现在，看看这些年来可跳舞性是如何变化的。当您使用上面的命令运行单元时，您将在屏幕上看到类似这样的内容。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es md"><img src="../Images/77f5a5b59d1a68fa16361b93a11f2495.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ti7XrmHGvIMEit_RH8vFIQ.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Spotify Data Analysis</figcaption></figure><ul class=""><li id="5cda" class="lb lc hi jp b jq jr jt ju jw lx ka ly ke lz ki li lj lk ll bi translated">图表显示的次数与年数相关</li></ul><pre class="iy iz ja jb fd lm ln lo lp aw lq bi"><span id="2ef6" class="lr kk hi ln b fi ls lt l lu lv">dfyear = df.groupby('Release Year').sum().sort_values('Number of Times Charted', ascending=False)<br/>dfyear=dfyear.reset_index()</span></pre><p id="959f" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">很简单，将数据按“发布年份”分组，并按每年的“图表次数”进行排序。</p><p id="cf51" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">绘制图表。</p><pre class="iy iz ja jb fd lm ln lo lp aw lq bi"><span id="905d" class="lr kk hi ln b fi ls lt l lu lv">px.bar(x='Release Year', y='Number of Times Charted', data_frame=dfyear.head(7))</span></pre><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es me"><img src="../Images/39c5406687b4a0f5ba3cd57104b9e369.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VSMdOkPsBDEuePwRXQyf0g.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Spotify Data Analysis</figcaption></figure><p id="f0f3" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">由于2021年正在进行，我们对2021年的数据了解较少。大多数数据来自2020年。</p><ul class=""><li id="7b49" class="lb lc hi jp b jq jr jt ju jw lx ka ly ke lz ki li lj lk ll bi translated">20位最受欢迎的艺术家</li></ul><pre class="iy iz ja jb fd lm ln lo lp aw lq bi"><span id="118a" class="lr kk hi ln b fi ls lt l lu lv">artistbypop = df.groupby('Artist').sum().sort_values('Popularity' ,ascending=False)[:20]<br/>artistbypop=artistbypop.reset_index()</span><span id="105f" class="lr kk hi ln b fi lw lt l lu lv">#plot the graph</span><span id="708c" class="lr kk hi ln b fi lw lt l lu lv">px.bar(x='Artist', y='Popularity', data_frame=artistbypop)</span></pre><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mf"><img src="../Images/feaa106e298b98ac61cfdc1a661ab0fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZgK9Zpgn5RHCd9uEbH73Zw.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Spotify Data Analysis</figcaption></figure><p id="2843" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">在这里，我们也做了同样的事情，我们根据受欢迎程度对艺术家进行分类。泰勒斯威夫特名列榜首，其次是果汁WRLD和其他人。我最喜欢的艺术家在第九位。</p><ul class=""><li id="f49a" class="lb lc hi jp b jq jr jt ju jw lx ka ly ke lz ki li lj lk ll bi translated">最受欢迎的流派</li></ul><pre class="iy iz ja jb fd lm ln lo lp aw lq bi"><span id="3836" class="lr kk hi ln b fi ls lt l lu lv">df['Genre']=df['Genre'].astype(str)<br/>df["Genre"][df["Genre"] == "[]"] = np.nan<br/>df["Genre"] = df["Genre"].fillna(0)<br/>#here we get rid of useless symbols to be able to separate genres</span><span id="8167" class="lr kk hi ln b fi lw lt l lu lv">df.Genre=df.Genre.str.replace("[", "")<br/>df.Genre=df.Genre.str.replace("]", "")<br/>df.Genre=df.Genre.str.replace("'", "")<br/>#now we devide genre strings by comma</span><span id="4999" class="lr kk hi ln b fi lw lt l lu lv">df["Genre"] = df["Genre"].str.split(",")<br/><br/>df=df.explode('Genre')</span><span id="8c76" class="lr kk hi ln b fi lw lt l lu lv">df</span></pre><p id="10a1" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">首先，我们去掉无用的符号，以便能够区分流派。</p><p id="6884" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">之后，用逗号分隔流派字符串。</p><p id="d556" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">下一个命令根据流派分隔行。每首包含一种以上风格的歌曲都有多行，每行包含一种风格。例如，如果一首歌有2种风格，那么同一首歌将有2行，每行有不同的风格。</p><p id="9783" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">现在简单地画出30个最流行的流派的饼状图。</p><pre class="iy iz ja jb fd lm ln lo lp aw lq bi"><span id="5fc1" class="lr kk hi ln b fi ls lt l lu lv">fig = plt.figure(figsize = (10, 10))<br/>ax = fig.subplots()<br/>df.Genre.value_counts()[:30].plot(ax=ax, kind = "pie")<br/>ax.set_ylabel("")<br/>ax.set_title("Top 30 most popular genres")<br/>plt.show()</span></pre><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mg"><img src="../Images/7f210b0f68289a0f59582a227c419fb9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sOqSTLqO7lQVlrBLJOfl1g.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Spotify Data Analysis</figcaption></figure><p id="9ca2" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">嗯，就是这样。恭喜你，你分析了Spotify数据集。你可以自己多挖掘。因为你可以用数据做很多事情。你得到的信息是有价值的。</p><p id="799d" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><strong class="jp hj">完整的Github代码和数据集访问都是</strong> <a class="ae mh" href="https://github.com/imrohit007/Spotify-Data-Analysis" rel="noopener ugc nofollow" target="_blank"> <strong class="jp hj">这里</strong> </a> <strong class="jp hj">。</strong></p><p id="bb90" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">感谢您的阅读。如果这篇文章内容丰富，那么一定要鼓掌，与你的社区分享，并关注更多。</p></div></div>    
</body>
</html>