<html>
<head>
<title>Decoding Biometric Authentication for Android Apps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">解码Android应用的生物认证</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/biometric-validation-in-your-android-app-e8eddbd8efca?source=collection_archive---------2-----------------------#2020-08-31">https://medium.com/geekculture/biometric-validation-in-your-android-app-e8eddbd8efca?source=collection_archive---------2-----------------------#2020-08-31</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/d18f0486b7dfe09bac30deec86ad0ecd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*40CnxDRgfG2NBZMnrRLk6w.png"/></div></div></figure><h1 id="f16e" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">介绍</h1><p id="5a96" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">在这篇博客中，我们将讨论生物识别验证，以在我们的应用程序中增加额外的安全层，同时确保最高水平的良好用户体验。在开始实现生物识别验证之前，我们将首先分析需求，以及如何在不影响用户应用体验的情况下保证用户的安全性和隐私感。</p><h1 id="b357" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">传统的方法</h1><p id="f692" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">传统上，为了保护机密和敏感信息，大多数应用程序需要用户登录。为此，用户输入用户名和密码，应用程序将凭证发送到auth服务器，最终，服务器将返回某种令牌，应用程序将使用该令牌向远程服务器查询受限数据。</p><p id="6de8" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">在web界面的情况下，这很好，很完美，但是对于移动，我们将用户体验提高了一个档次，同时增加了一层安全性。你一定想知道我们到底要解决什么。让我们举一些例子-</p><ul class=""><li id="4d65" class="kr ks hi jq b jr km jv kn jz kt kd ku kh kv kl kw kx ky kz bi translated">假设我们的应用程序像金融应用程序、银行应用程序等一样是基于会话的身份验证。、和都在给定的流中——用户每次启动应用程序时都被要求输入用户名和密码。在这种情况下，用户体验不会很好，因为我们不能在应用程序中保存他的凭据，并使用它们来自动登录，因为这很容易受到恶意欺诈。</li><li id="e9b4" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">社交网络或电子邮件等其他应用程序通常会要求一次登录凭据，并为即将到来的会话设置自动登录。在这些情况下，如果其他人解锁了你的手机，他们就可以使用你的账户。</li></ul><h1 id="1a93" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated"><strong class="ak">生物识别方法</strong></h1><p id="3eb9" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">上面讨论的所有缺陷都可以通过在另一层认证下保护登录凭证来解决，即使用指纹传感器的生物测定验证。这将解决每次会话认证的问题，而用户不必每次都输入凭证，他们可以只使用他们的生物特征，并且成功的验证将使他们保存的凭证能够自动登录。即使是像社交网站或电子邮件这样的应用程序，用户凭证也会受到生物识别的保护，以防止未经授权的用户自动登录。</p><p id="28d2" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">这也可以用在没有登录流程的应用程序中，比如照片库。这样，人们可以通过另一层安全保护他们的个人信息，并确保下一级隐私。在接下来的部分中，让我们了解如何将生物识别验证添加到我们的android应用程序中。</p><h1 id="7443" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">入门指南</h1><p id="517e" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">创建一个新项目，并选择您所选择的模板。</p><figure class="lg lh li lj fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lf"><img src="../Images/b776480abbde7ee2ee44bbfd78f9e37e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W8K3s2mUW2oM-RBSiriMpA.png"/></div></div></figure><p id="33d6" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">我将选择“底部导航活动”，因此我可以向您展示2组生物识别验证:</p><ul class=""><li id="9ac9" class="kr ks hi jq b jr km jv kn jz kt kd ku kh kv kl kw kx ky kz bi translated">只有指纹的</li><li id="bcd7" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">另一个有指纹和设备密码</li></ul><p id="6cf6" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">我将根据自己的选择重命名由该模板创建的类。</p><h1 id="65f3" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">生物特征依赖性</h1><p id="7463" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">打开<em class="lk"> build.gradle </em>(模块:<em class="lk"> app </em>，在<em class="lk">依赖</em>中添加如下库依赖:</p><blockquote class="ll lm ln"><p id="abc9" class="jo jp lk jq b jr km jt ju jv kn jx jy lo ko kb kc lp kp kf kg lq kq kj kk kl hb bi translated">实现“Android x . biometric:biometric:1 . 0 . 1”</p></blockquote><p id="917b" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">打开AndroidManifest.xml并在Manifest元素中添加以下内容。</p><blockquote class="ll lm ln"><p id="7692" class="jo jp lk jq b jr km jt ju jv kn jx jy lo ko kb kc lp kp kf kg lq kq kj kk kl hb bi translated"><uses-permission android:name="”android.permission.USE_BIOMETRIC”"/></p></blockquote><p id="a503" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">通过点击“立即同步”来同步项目。</p><figure class="lg lh li lj fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lr"><img src="../Images/c9f20168e994db62ca983f943a6da19c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mn03WnF_Tf1azS7zCwZhQQ.png"/></div></div></figure><h1 id="2e26" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">设置生物识别API</h1><p id="75a1" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">通过拨打以下电话，检查您的设备是否支持生物识别</p><blockquote class="ll lm ln"><p id="cdc1" class="jo jp lk jq b jr km jt ju jv kn jx jy lo ko kb kc lp kp kf kg lq kq kj kk kl hb bi translated">biometric manager . from(get context())。canAuthenticate()；</p></blockquote><p id="a83c" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">上述方法将让您了解用于生物识别验证的设备的状态。</p><ul class=""><li id="e2fc" class="kr ks hi jq b jr km jv kn jz kt kd ku kh kv kl kw kx ky kz bi translated">生物识别错误硬件不可用:硬件不可用。请稍后再试。</li><li id="30ff" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">BIOMETRIC _ ERROR _ NONE _ registered:用户没有注册任何生物特征。</li><li id="fcc7" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">生物识别错误硬件:没有生物识别硬件。</li><li id="a3e3" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">BIOMETRIC_SUCCESS:未检测到错误</li></ul><p id="2652" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">这意味着我们可以毫无顾虑地使用生物特征进行验证。</p><p id="789a" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated"><strong class="jq hj">BIOMETRIC _ ERROR _ NONE _ ENROLLED</strong>:这意味着用户拥有生物特征，但尚未启用，我们可以让用户知道，如果他们启用了生物特征并添加了他们的生物特征信息，他们就可以以更安全的方式使用应用程序。</p><figure class="lg lh li lj fd ij"><div class="bz dy l di"><div class="ls lt l"/></div></figure><h1 id="46b0" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">设置生物识别提示</h1><p id="c892" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">首先，我们需要创建一个实例执行器，用于在主线程上运行生物特征提示。</p><blockquote class="ll lm ln"><p id="c947" class="jo jp lk jq b jr km jt ju jv kn jx jy lo ko kb kc lp kp kf kg lq kq kj kk kl hb bi translated">executor executor = context compat . getmain executor(get context())；</p></blockquote><p id="e226" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">为身份验证提示视图构建提示信息</p><figure class="lg lh li lj fd ij"><div class="bz dy l di"><div class="ls lt l"/></div></figure><ul class=""><li id="5df0" class="kr ks hi jq b jr km jv kn jz kt kd ku kh kv kl kw kx ky kz bi translated"><strong class="jq hj"> promptInfo </strong>:一个构建器，它收集要在系统提供的生物特征对话框上显示的参数。</li><li id="2ef5" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated"><strong class="jq hj"> setTitle </strong>:必输项:设置要显示的标题。</li><li id="83f7" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated"><strong class="jq hj">设置字幕</strong>:可选:设置要显示的字幕。</li><li id="6b2e" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated"><strong class="jq hj"> setNegativeButtonText </strong>:必输项:设置负按钮的文本。这通常用作“取消”按钮</li><li id="e9b6" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated"><strong class="jq hj">构建</strong>:调用这个来构建带有您上面指定的属性的对话框。</li></ul><p id="9b03" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">如果我们想要允许带有设备凭证的提示信息，我们需要设置devicecredentiallabled。</p><figure class="lg lh li lj fd ij"><div class="bz dy l di"><div class="ls lt l"/></div></figure><ul class=""><li id="438c" class="kr ks hi jq b jr km jv kn jz kt kd ku kh kv kl kw kx ky kz bi translated"><strong class="jq hj">setdevicecredentialyallowed</strong>:为真时，提示会返回询问用户的设备凭证(PIN、模式或密码)</li></ul><h2 id="43f0" class="lu ir hi bd is lv lw lx iw ly lz ma ja jz mb mc je kd md me ji kh mf mg jm mh bi translated">身份验证回调</h2><figure class="lg lh li lj fd ij"><div class="bz dy l di"><div class="ls lt l"/></div></figure><ul class=""><li id="315a" class="kr ks hi jq b jr km jv kn jz kt kd ku kh kv kl kw kx ky kz bi translated"><strong class="jq hj"><em class="lk">onAuthenticationError</em></strong>:遇到不可恢复的错误，操作完成时调用。不会对此对象进行进一步的操作。</li><li id="19f8" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated"><strong class="jq hj"><em class="lk">【onAuthenticationSucceeded】</em></strong>:识别生物特征时调用。</li><li id="d34f" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated"><strong class="jq hj"><em class="lk">onAuthenticationFailed</em></strong>:当生物特征有效但未被识别时调用。</li></ul><p id="9d46" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">要使用promptInfo进行身份验证，请添加以下行</p><blockquote class="ll lm ln"><p id="f4dd" class="jo jp lk jq b jr km jt ju jv kn jx jy lo ko kb kc lp kp kf kg lq kq kj kk kl hb bi translated">biometric prompt . authenticate(promp info)；</p></blockquote><p id="f543" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">现在，在看到它的运行之前，最后的集成将是使用生物识别可用性来决定流程。</p><figure class="lg lh li lj fd ij"><div class="bz dy l di"><div class="ls lt l"/></div></figure><ul class=""><li id="f38d" class="kr ks hi jq b jr km jv kn jz kt kd ku kh kv kl kw kx ky kz bi translated"><strong class="jq hj"><em class="lk">is Biometric enabled</em></strong>:这意味着我们都可以启动生物识别进行验证</li><li id="76b1" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated"><strong class="jq hj"><em class="lk">isBiometricPresent</em></strong>:这意味着我们在设备中提供了生物识别功能，但用户尚未启用，我们可以提示他们这一点，以便他们可以决定是否要启用它，以更安全的方式使用应用程序。</li></ul><p id="191f" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">让我们看看应用程序的运行情况</p><figure class="lg lh li lj fd ij er es paragraph-image"><div class="er es mi"><img src="../Images/8057433076b49b8f6c57db3639641c1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:996/format:webp/1*hB2PRFS0AGz7eWHXnwH20w.png"/></div><figcaption class="mj mk et er es ml mm bd b be z dx">Biometric without PIN option</figcaption></figure><figure class="lg lh li lj fd ij er es paragraph-image"><div class="er es mi"><img src="../Images/2344649b31b226e594e27d7bba7b9d86.png" data-original-src="https://miro.medium.com/v2/resize:fit:996/format:webp/1*H0ec6MHF1L7WpP7Lw_JNFA.png"/></div><figcaption class="mj mk et er es ml mm bd b be z dx">Biometric with PIN option</figcaption></figure><figure class="lg lh li lj fd ij er es paragraph-image"><div class="er es mi"><img src="../Images/c14bc07ce8853872763605c9988d5bbf.png" data-original-src="https://miro.medium.com/v2/resize:fit:996/format:webp/1*N24K1gHtYvQitkLdJe9a-A.png"/></div><figcaption class="mj mk et er es ml mm bd b be z dx">PIN screen of Biometric with PIN option</figcaption></figure><p id="7766" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">我们详细解释了如何使用我们的生物特征凭证来隐藏或保护任何一组信息，我们还看到了设备PIN。在生物特征崩溃的情况下，人们可以使用设备PIN来访问该信息。</p><p id="b36e" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">要了解更多细节和更深入的观点，你可以在这里找到代码<a class="ae mn" href="https://github.com/dinkarkumardk/BiometricSample" rel="noopener ugc nofollow" target="_blank"/></p><p id="90b7" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated"><em class="lk">也发表于</em><a class="ae mn" href="https://www.talentica.com/blogs/decoding-biometric-authentication-for-android-apps/" rel="noopener ugc nofollow" target="_blank"><em class="lk">https://www.talentica.com</em></a><em class="lk">由我</em></p></div></div>    
</body>
</html>