<html>
<head>
<title>How to change the name of the principal Git branch</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何更改主体Git分支的名称</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/how-to-change-the-name-of-the-principal-git-branch-4dd39a620ad8?source=collection_archive---------28-----------------------#2021-06-28">https://medium.com/geekculture/how-to-change-the-name-of-the-principal-git-branch-4dd39a620ad8?source=collection_archive---------28-----------------------#2021-06-28</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/9730fcf92373e0f857473658c777e5b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*UHObJPYJ9HfQzedt"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Photo by <a class="ae iu" href="https://unsplash.com/@muneeb?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Muneeb Qureshi</a> on <a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="7a6f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我有一台新电脑，我在上面安装了Git。然后我决定我必须在我的另一台计算机上升级Git，它的版本是2.14。2.32版本有很多重大变化。</p><p id="f497" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">其中一个变化让我想到了几年来我一直认为理所当然的事情:存储库中默认分支的名称。</p><p id="2165" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">自从我使用Git和GitHub以来，甚至更早，存储库的默认分支就被称为“master”我从来没有想过我会想改变这个分支机构的名称。</p><p id="0c56" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">最近几年有议论说“主”这个分支名称有问题，因为有主从关系的暗示。“主”和“从”都在计算机科学的某些上下文中使用。</p><p id="4e7b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这不是Git和GitHub的初衷，它们使用术语“主”，而不是术语“从”。尽管如此，这种关联影响了人们对Git和GitHub的看法。</p><p id="b1d1" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果有一种方法可以将我的Git存储库的主要分支名称更改为不会冒犯任何人的名称，我应该进行这种更改。</p><p id="9bbe" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我有一些特权，可以让我不去考虑这些。坦率地说，如果不是在一台计算机上安装Git，在另一台计算机上升级，我可能不会考虑这个问题。</p><p id="6f7e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">根据您在安装Git或升级到最新版本时选择的选项，Git将使用您在安装或升级期间指定的默认分支名称创建新的存储库。</p><p id="9151" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">Git安装程序建议将主分支命名为“trunk”，并且许多团队已经对“master”进行了更改。所以我选择了“主”很简单。</p><p id="fe3b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">请注意，您的旧存储库不会被更改，除非您有意识地对它们中的每一个进行更改。那可能有点困难。</p><p id="d89d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">将存储库的默认分支名称更改为更具“包容性”的名称，如“main”、“base”或“default”，不会解决我们世界中的任何社会不公。</p><p id="9be2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">但至少它让我们思考某些偏见是如何被不假思索地编入我们的文化中，以及如何被不假思索地编织进我们认为理所当然的事物中，比如版本控制软件。</p><p id="23b5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">希望我不必说服您对您的新存储库和现有存储库都进行这种更改。但是您可能会担心对现有存储库的这种更改可能会清除存储库的历史。</p><p id="b8a6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">即使你不担心这个，也有很多问题:我该怎么做？我需要经历什么样复杂的Git命令序列才能做出这种改变？这将如何影响我的团队和已经分叉我的存储库的人们？</p><p id="c189" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在您对一个现有的存储库进行这种改变之前，我建议您确保您的“工作树”是“干净的”，没有什么要提交的，没有什么未被跟踪的。</p><p id="6e8c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果您在存储库上有合作者，让他们知道您将要进行这个更改。还要检查没有依赖于特定分支名称的程序。</p><p id="2661" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我决定首先对我的一个QBasic存储库进行修改。这是我多年前写的一个QBasic程序，那时我还不知道版本控制。存储库中唯一的历史记录是初始提交和对自述文件的几次编辑。所以如果删除了也没什么大损失。</p><h1 id="096b" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">更改分支名称的步骤</h1><p id="c7a0" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">与任何涉及Git的事情一样，检查本地机器上的Git状态是一个好主意。</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="f29e" class="lf ju hi lb b fi lg lh l li lj">C:\Users\AL\Documents\QBasicPrograms\aster7&gt;<strong class="lb hj">git status</strong><br/>On branch master<br/>Your branch is up to date with 'origin/master'.</span><span id="db3f" class="lf ju hi lb b fi lk lh l li lj"><strong class="lb hj">nothing to commit, working tree clean</strong></span></pre><p id="b2b3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">而且还要检查存储库中的所有分支。在这个例子中，存储库只有一个分支，我想重命名这个分支。</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="711d" class="lf ju hi lb b fi lg lh l li lj">C:\Users\AL\Documents\QBasicPrograms\aster7&gt;git branch<br/><strong class="lb hj">* master</strong></span></pre><p id="a105" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在我们开始行动吧。</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="1780" class="lf ju hi lb b fi lg lh l li lj">C:\Users\AL\Documents\QBasicPrograms\aster7&gt;<strong class="lb hj">git branch --move master</strong> <strong class="lb hj">main</strong></span><span id="fa00" class="lf ju hi lb b fi lk lh l li lj">C:\Users\AL\Documents\QBasicPrograms\aster7&gt;<strong class="lb hj">git branch</strong><br/><strong class="lb hj">* main</strong></span><span id="0aa0" class="lf ju hi lb b fi lk lh l li lj">C:\Users\AL\Documents\QBasicPrograms\aster7&gt;<strong class="lb hj">git status</strong><br/><strong class="lb hj">On branch main<br/>Your branch is up to date with 'origin/master'.</strong></span><span id="069c" class="lf ju hi lb b fi lk lh l li lj">nothing to commit, working tree clean</span></pre><p id="bdf7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这表明在这一点上的变化是严格局部的。为了使这一点更加清楚，请在Branch命令上使用All选项。</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="30b7" class="lf ju hi lb b fi lg lh l li lj">C:\Users\AL\Documents\QBasicPrograms\aster7&gt;<strong class="lb hj">git branch --all</strong><br/><strong class="lb hj">* main<br/>  remotes/origin/HEAD -&gt; origin/master<br/>  remotes/origin/master</strong></span></pre><p id="fabd" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在我们需要将主分支推到远程存储库。</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="433d" class="lf ju hi lb b fi lg lh l li lj">C:\Users\AL\Documents\QBasicPrograms\aster7&gt;<strong class="lb hj">git push --set-upstream origin main</strong><br/>Total 0 (delta 0), reused 0 (delta 0), pack-reused 0<br/>remote:<br/>remote: Create a pull request for 'main' on GitHub by visiting:<br/>remote:      <a class="ae iu" href="https://github.com/Alonso-del-Arte/aster7/pull/new/main" rel="noopener ugc nofollow" target="_blank">https://github.com/Alonso-del-Arte/aster7/pull/new/main</a><br/>remote:<br/>To <a class="ae iu" href="https://github.com/Alonso-del-Arte/aster7.git" rel="noopener ugc nofollow" target="_blank">https://github.com/Alonso-del-Arte/aster7.git</a><br/> <strong class="lb hj">* [new branch]      main -&gt; main<br/>Branch 'main' set up to track remote branch 'main' from 'origin'.</strong></span><span id="a509" class="lf ju hi lb b fi lk lh l li lj">C:\Users\AL\Documents\QBasicPrograms\aster7&gt;<strong class="lb hj">git status<br/>On branch main<br/>Your branch is up to date with 'origin/main'.</strong></span><span id="b1d4" class="lf ju hi lb b fi lk lh l li lj">nothing to commit, working tree clean</span><span id="b302" class="lf ju hi lb b fi lk lh l li lj">C:\Users\AL\Documents\QBasicPrograms\aster7&gt;<strong class="lb hj">git branch --all<br/>* main<br/>  remotes/origin/HEAD -&gt; origin/master<br/>  remotes/origin/main<br/>  remotes/origin/master</strong></span></pre><p id="fb3c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">主分支中的两个文件都显示了我期望看到的所有历史:2019年的初始提交，2019年的编辑和上周的编辑。</p><p id="6205" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">此时，主分支仍然存在于远程存储库中。在我们删除主分支之前，让我们检查一下可能依赖或引用特定分支的事项清单:</p><ul class=""><li id="4b0a" class="ll lm hi ix b iy iz jc jd jg ln jk lo jo lp js lq lr ls lt bi translated">测试运行程序配置文件</li><li id="ed01" class="ll lm hi ix b iy lu jc lv jg lw jk lx jo ly js lq lr ls lt bi translated">构建脚本</li><li id="e949" class="ll lm hi ix b iy lu jc lv jg lw jk lx jo ly js lq lr ls lt bi translated">发布脚本</li><li id="7ae2" class="ll lm hi ix b iy lu jc lv jg lw jk lx jo ly js lq lr ls lt bi translated">未解决的提取请求</li><li id="0cdf" class="ll lm hi ix b iy lu jc lv jg lw jk lx jo ly js lq lr ls lt bi translated">证明文件</li></ul><p id="ae88" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这些都不适用于我以前的QBasic项目。</p><p id="9a87" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">一旦你确定清单上的事情不会受到改变的负面影响，继续删除:</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="db76" class="lf ju hi lb b fi lg lh l li lj">C:\Users\AL\Documents\QBasicPrograms\aster7&gt;<strong class="lb hj">git push origin --delete master</strong><br/>To <a class="ae iu" href="https://github.com/Alonso-del-Arte/aster7.git" rel="noopener ugc nofollow" target="_blank">https://github.com/Alonso-del-Arte/aster7.git</a><br/> <strong class="lb hj">! [remote rejected] master (refusing to delete the current branch: refs/heads/master)<br/>error: failed to push some refs to '</strong><a class="ae iu" href="https://github.com/Alonso-del-Arte/aster7.git'" rel="noopener ugc nofollow" target="_blank"><strong class="lb hj">https://github.com/Alonso-del-Arte/aster7.git'</strong></a></span></pre><p id="c7e1" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">糟糕，出现了问题。我需要在GitHub上更改存储库的设置，特别是分支的设置。根据GitHub，我没有在主分支上定义任何分支保护规则。</p><p id="ef09" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">尽管如此，GitHub还是不让我删除默认分支，现在这是主分支。我认为这是分行保护条例。转到存储库的设置并点击分支类别。</p><p id="2d62" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在默认的分支标题下，应该有一个小的双箭头图标，我在下面的截图中用黄色突出显示了这个图标:</p><figure class="kw kx ky kz fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lz"><img src="../Images/be6f7fbbdc605b262853865c8d72a3f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aig6F-yExZp64Js5HnQuwg.jpeg"/></div></div></figure><p id="9e59" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我应该在做修改前截屏的。哦好吧。当你点击两个箭头时，会出现一个框，你可以在里面选择你想要的默认分支。</p><figure class="kw kx ky kz fd ij er es paragraph-image"><div class="er es ma"><img src="../Images/637f53492eae045bceb4a8306d7cee9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:978/format:webp/1*SVFj-WbpS0iAwYmvQQIoUw.png"/></div></figure><p id="7a5e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">当您选择新的默认分支时，您将有机会再次回顾您头脑中的变化，并在您忽略任何重要准备时退出。</p><p id="ce75" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">两个箭头图标左侧的铅笔图标用于编辑分支名称。我刚刚意识到，我不需要将这个特定的存储库克隆到我的本地机器上，我可以用更少的步骤在GitHub上进行更改。</p><p id="da59" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">反正Git现在应该让我删除master分支了。</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="6006" class="lf ju hi lb b fi lg lh l li lj">C:\Users\AL\Documents\QBasicPrograms\aster7&gt;<strong class="lb hj">git push origin --delete master</strong><br/>To <a class="ae iu" href="https://github.com/Alonso-del-Arte/aster7.git" rel="noopener ugc nofollow" target="_blank">https://github.com/Alonso-del-Arte/aster7.git</a><br/> - [deleted]         master</span><span id="baa2" class="lf ju hi lb b fi lk lh l li lj">C:\Users\AL\Documents\QBasicPrograms\aster7&gt;<strong class="lb hj">git branch --all</strong><br/><strong class="lb hj">warning: ignoring broken ref refs/remotes/origin/HEAD<br/>* main<br/>  remotes/origin/main</strong></span></pre><p id="5ba9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">哦，这里有点不对劲。我需要修复损坏的头部引用。</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="d172" class="lf ju hi lb b fi lg lh l li lj">C:\Users\AL\Documents\QBasicPrograms\aster7&gt;<strong class="lb hj">git symbolic-ref refs/remotes/origin/HEAD refs/remotes/origin/main</strong></span></pre><p id="ccf2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">对此，您不会看到任何响应，只会看到一个新的命令提示符，因此您应该检查分支和状态。</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="da87" class="lf ju hi lb b fi lg lh l li lj">C:\Users\AL\Documents\QBasicPrograms\aster7&gt;<strong class="lb hj">git branch --all<br/>* main<br/>  remotes/origin/HEAD -&gt; origin/main<br/>  remotes/origin/main</strong></span><span id="9cbe" class="lf ju hi lb b fi lk lh l li lj">C:\Users\AL\Documents\QBasicPrograms\aster7&gt;<strong class="lb hj">git status</strong><br/><strong class="lb hj">On branch main<br/>Your branch is up to date with 'origin/main'.</strong></span><span id="9e8f" class="lf ju hi lb b fi lk lh l li lj">nothing to commit, working tree clean</span></pre><p id="d126" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">好了，搞定一个，还有四打。</p><h1 id="a887" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">再来一遍舞步，进行练习</h1><p id="928d" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">为了便于练习，让我们走一走另一个存储库。我将选择一个带有主分支和gh-pages分支的存储库，古怪的填充(有点像疯狂的库)。</p><p id="c0ca" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">首先，检查状态和分支。如果你还没有在主分支，切换到它。</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="bed8" class="lf ju hi lb b fi lg lh l li lj">C:\Users\AL\Documents\Web Pages\wacky-fillins&gt;<strong class="lb hj">git status</strong><br/>On branch master<br/><strong class="lb hj">Your branch is up to date with 'origin/master'.</strong></span><span id="dafe" class="lf ju hi lb b fi lk lh l li lj">nothing to commit, working tree clean</span><span id="4d22" class="lf ju hi lb b fi lk lh l li lj">C:\Users\AL\Documents\Web Pages\wacky-fillins&gt;<strong class="lb hj">git branch --all</strong><br/>* master<br/>  remotes/origin/HEAD -&gt; origin/master<br/>  <strong class="lb hj">remotes/origin/gh-pages<br/>  remotes/origin/master</strong></span></pre><p id="8d99" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然后在本地机器上重命名主分支。</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="a956" class="lf ju hi lb b fi lg lh l li lj">C:\Users\AL\Documents\Web Pages\wacky-fillins&gt;<strong class="lb hj">git branch --move master main</strong></span><span id="d516" class="lf ju hi lb b fi lk lh l li lj">C:\Users\AL\Documents\Web Pages\wacky-fillins&gt;<strong class="lb hj">git branch --all</strong><br/>* main<br/>  remotes/origin/HEAD -&gt; origin/master<br/>  remotes/origin/gh-pages<br/>  remotes/origin/master</span></pre><p id="6703" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">将变更推送到远程存储库。</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="4370" class="lf ju hi lb b fi lg lh l li lj">C:\Users\AL\Documents\Web Pages\wacky-fillins&gt;<strong class="lb hj">git push --set-upstream origin main</strong><br/>Total 0 (delta 0), reused 0 (delta 0), pack-reused 0<br/>remote:<br/>remote: Create a pull request for 'main' on GitHub by visiting:<br/>remote:      <a class="ae iu" href="https://github.com/Alonso-del-Arte/wacky-fillins/pull/new/main" rel="noopener ugc nofollow" target="_blank">https://github.com/Alonso-del-Arte/wacky-fillins/pull/new/main</a><br/>remote:<br/>To <a class="ae iu" href="https://github.com/Alonso-del-Arte/wacky-fillins.git" rel="noopener ugc nofollow" target="_blank">https://github.com/Alonso-del-Arte/wacky-fillins.git</a><br/> * [new branch]      main -&gt; main<br/>Branch 'main' set up to track remote branch 'main' from 'origin'.</span></pre><p id="bb6b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在进入GitHub网站，更改存储库的默认分支。据我所知，没有办法从命令行做到这一点。在第二个例子中，我们完全可以决定将gh-pages分支作为默认分支。但是我继续主菜。</p><p id="b532" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">接下来，将head引用更改为主分支。</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="b236" class="lf ju hi lb b fi lg lh l li lj">C:\Users\AL\Documents\Web Pages\wacky-fillins&gt;<strong class="lb hj">git symbolic-ref refs/remotes/origin/HEAD refs/remotes/origin/main</strong></span><span id="b404" class="lf ju hi lb b fi lk lh l li lj">C:\Users\AL\Documents\Web Pages\wacky-fillins&gt;<strong class="lb hj">git branch --all</strong><br/>* main<br/>  <strong class="lb hj">remotes/origin/HEAD -&gt; origin/main<br/>  remotes/origin/gh-pages<br/>  remotes/origin/main<br/>  remotes/origin/master</strong></span></pre><p id="ce28" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我将暂缓删除主分支，因为我还没有告诉合作者这个变更。</p><h1 id="299c" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">摘要</h1><p id="fa85" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">将主要分支机构的名称从“主”更改为“主要”的步骤如下:</p><ol class=""><li id="55b0" class="ll lm hi ix b iy iz jc jd jg ln jk lo jo lp js mb lr ls lt bi translated">检查您是否在主分支上，没有挂起的提交或拉请求。</li><li id="9b9e" class="ll lm hi ix b iy lu jc lv jg lw jk lx jo ly js mb lr ls lt bi translated">如果适用的话，运行所有的测试套件，检查构建和发布脚本，以及主分支的参考文档，并与您的团队或合作者进行讨论。</li><li id="f78e" class="ll lm hi ix b iy lu jc lv jg lw jk lx jo ly js mb lr ls lt bi translated">用命令<code class="du mc md me lb b">git branch --move master main</code>重命名本地机器上的主分支。</li><li id="ada1" class="ll lm hi ix b iy lu jc lv jg lw jk lx jo ly js mb lr ls lt bi translated">用命令<code class="du mc md me lb b">git push --set-upstream origin main</code>将新的主分支推送到远程存储库。</li><li id="0b0b" class="ll lm hi ix b iy lu jc lv jg lw jk lx jo ly js mb lr ls lt bi translated">上GitHub网站更改默认分支。</li><li id="b330" class="ll lm hi ix b iy lu jc lv jg lw jk lx jo ly js mb lr ls lt bi translated">用命令<code class="du mc md me lb b">git symbolic-ref refs/remotes/origin/HEAD refs/remotes/origin/main</code>固定头部参考点。</li><li id="666f" class="ll lm hi ix b iy lu jc lv jg lw jk lx jo ly js mb lr ls lt bi translated">如果你完全确定，用命令<code class="du mc md me lb b">git push origin --delete master</code>删除主分支。</li></ol><p id="fea6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">但是，如果出于某种原因，您确信这个存储库只是作为GitHub上的一个远程存储库存在，您可以简单地在GitHub上重命名主分支。</p><p id="d94b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然而，即使存储库显示零个分支，仍然有可能一些人已经把它放到了他们的本地机器上。如果他们没有未决的变更，他们可以简单地从他们的本地机器上删除它，然后重新把它拉回来。</p><p id="4d8f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">否则，他们可以使用以下命令:</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="0cc3" class="lf ju hi lb b fi lg lh l li lj">git branch -m master main<br/>git fetch origin<br/>git branch -u origin/main main<br/>git remote set-head origin -a</span></pre><p id="2040" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这种变化并不能补偿奴隶制的不公正。但这表明了一种意愿，即愿意倾听那些不那么自动享有特权的人的感受和看法，并将这些感受和看法置于个人便利之上。我认为这是朝着正确方向迈出的一步。</p><p id="28c1" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我已经更改了我的一些存储库，但我没有更改所有的存储库。我给自己定了一个目标，在下一次Hacktoberfest之前把它们都换掉。如果没有，至少是我没有标记为已弃用的。</p><p id="0d0d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我很想在评论中听到你对此的看法。也许你知道一个更简单的方法来实现这个改变。</p></div></div>    
</body>
</html>