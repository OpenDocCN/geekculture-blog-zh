<html>
<head>
<title>Tips and Tricks: Adding the Ruby Faker Gem to your Project</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">提示和技巧:将Ruby Faker宝石添加到您的项目中</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/tips-and-tricks-adding-the-ruby-faker-gem-to-your-project-8f8c67361fe3?source=collection_archive---------9-----------------------#2021-10-31">https://medium.com/geekculture/tips-and-tricks-adding-the-ruby-faker-gem-to-your-project-8f8c67361fe3?source=collection_archive---------9-----------------------#2021-10-31</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="51a7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我最近构建了我的第一个完整的全栈应用程序(太令人兴奋了！)并学习了如何将Ruby Faker Gem合并到我的项目的Ruby后端。这非常方便，为我节省了大量时间，否则我需要手动将占位符数据放入seeds.rb文件中。现在我想和大家分享这个新知识！</p><p id="1d69" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我将带你了解如何设置Faker宝石，然后分享我在自己的项目中使用宝石时学到的技巧和诀窍。请继续阅读，了解如何自己实现它！请在评论中告诉我这是否有帮助，或者你是否有其他你喜欢和推荐的类似宝石。</p></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es jk"><img src="../Images/f1ca67c56ce276acf543dbead7436740.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*AsYCIYYzSoKgN8ujMet-rQ.gif"/></div></div><figcaption class="jw jx et er es jy jz bd b be z dx">A gif that says “How to use the Ruby Faker Gem (+ tips and tricks!)”</figcaption></figure></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><h1 id="b571" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">操作方法:</h1><p id="4745" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi translated">下面是Github中Ruby Faker宝石的链接:<a class="ae ld" href="https://github.com/faker-ruby/faker" rel="noopener ugc nofollow" target="_blank">https://github.com/faker-ruby/faker</a></p><ol class=""><li id="3c23" class="le lf hi ih b ii ij im in iq lg iu lh iy li jc lj lk ll lm bi translated">将gem添加到您的项目中——您可以通过两种方式来完成。您可以在项目终端中运行“gem install faker”，也可以将“gem‘faker’”与您的其他gem一起添加到您的gem文件中，如下所示:</li></ol><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es ln"><img src="../Images/81e899a740536f0195f7ad66ea18d350.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Hlb8TtWtdiDf_UmJgYMbkg.png"/></div></div><figcaption class="jw jx et er es jy jz bd b be z dx">I like to leave myself comments about this kind of thing, like the one above on line 37.</figcaption></figure><p id="6bf2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.将“要求‘faker’”添加到seeds.rb文件的顶部，如下所示:</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es lo"><img src="../Images/6036c76931bca43ac64a340bfbb340a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MCmr5b3QQkfOqsUWX3Z6BA.png"/></div></div><figcaption class="jw jx et er es jy jz bd b be z dx">I like to leave myself a little terminal message, too, which you see on line 3 above.</figcaption></figure><p id="4d79" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从技术上讲，这就是全部要求！现在，您可以使用方便的Faker gem，而不是手动将占位符属性填充到seeds.rb文件中！</p></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><p id="cf4f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上面Github链接中包含的文档对于入门非常有用，但是我在自己的项目中使用Faker gem时想到了一些额外的提示和技巧。请继续阅读，并从我的经历中学习！</p><h1 id="0815" class="ka kb hi bd kc kd lp kf kg kh lq kj kk kl lr kn ko kp ls kr ks kt lt kv kw kx bi translated">专业提示:</h1><h2 id="a5b2" class="lu kb hi bd kc lv lw lx kg ly lz ma kk iq mb mc ko iu md me ks iy mf mg kw mh bi translated">播种前考虑数据中的关系</h2><p id="9bcf" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi translated">为了这个项目，我和我的同事建立了一个市场应用程序，很像Craigslist或Facebook Marketplace。在这个例子中，有三个模型和它们对应的表——条目、用户和评论。正如你所想象的，我们希望我们的应用程序与我们的参考应用程序功能相似，所以我们决定:我们的商品应该能够有许多评论，我们的用户应该能够销售许多商品，每个评论应该属于一个商品(它所应用的)和一个用户(发布评论的)。为了确保所有的表都能正常工作，在播种之前考虑这些关系是很重要的！</p><p id="cbe5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以分别播种一些项目、一些用户和一些评论。像这样:</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es mi"><img src="../Images/a0f55093b915740d21c376578c2ce8d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J6HYCu45TDvpIVQ4SqGnrA.png"/></div></div></figure><p id="ee75" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">只要我们确保第19、33和34行中的ID号参数与每个表格中的行号和ID号匹配，这就可以工作<em class="mj">好的</em>。但是我们很自豪地提出了一个更复杂的解决方案！</p><p id="79a2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">由于任何一个用户都可以拥有许多不同的项目，并且任何一个项目都可以有许多评论，所以经过反复试验后，我们采用了以下种子结构:</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es mk"><img src="../Images/507becf616dc53816cebbca18c989357.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2mwJG2OERwj1xEkGYYq-fg.png"/></div></div></figure><p id="a08f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这一次，您可以看到种子是嵌套的，因此我们创建用户，然后为每个用户创建项目，最后为每个项目创建评论。因为我们使用循环来创建这些相互关联的记录，所以不再需要随机分配外键。相反，我们在第15、22和32行给每个新实例一个变量名，然后我们可以在第27、35和36行使用这些变量名来编码用户、条目和评论之间的所有权！</p><h2 id="950c" class="lu kb hi bd kc lv lw lx kg ly lz ma kk iq mb mc ko iu md me ks iy mf mg kw mh bi translated">如果你想一次得到多个随机图像，尝试插值。兰德()</h2><p id="1714" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi translated">您可能已经注意到，上面的第26行看起来不太像使用Faker数据来填充记录种子的其他行。在用Faker gem的随机图像生成器(LoremFlickr)进行了大量的试验和错误之后，我们得出结论，gem每次使用只会返回一张图像。在我们的例子中，我们希望我们市场上的每个商品都有不同的随机图像(因为你不会在Craigslist上看到每个商品都贴有相同的产品照片，对吗？)但LoremFlickr Faker只生成了一张图像，并将其应用于每件商品。</p><p id="4a6e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">虽然有许多创造性的方法来解决这个问题，但我们最终添加了一些额外的随机化。这样使用。rand()在随机照片尺寸参数中进行插值，这迫使LoremFlickr在每次循环项目创建代码时实际返回一个新的随机图像。你可以在下面的第26行看到:</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es mk"><img src="../Images/02b769286a8aa67451594acdbb746153.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*V3yMGusehqbIejxibdd-1g.png"/></div></div></figure><h2 id="0617" class="lu kb hi bd kc lv lw lx kg ly lz ma kk iq mb mc ko iu md me ks iy mf mg kw mh bi translated">注意，Lorem.sentences Faker会将所有内容放在数组括号中。请考虑改用Lorem.paragraphs</h2><p id="fda3" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi translated">对于这个项目，我们想随机生成一个占位符描述，每个项目有几个句子长。最初，我们尝试使用Lorem.sentences Faker，但我们意识到它将每个单独的句子包装在直括号中，就像我们看到的用于保存数组一样。</p><p id="f02a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">虽然使用这些括号并简单地遍历每个句子来删除它们完全没问题，但我们发现现有的Lorem.paragraphs Faker是更好的选择。它立刻为我们提供了一个更简单的解决方案，因为它没有给我们每个句子加括号。</p><h2 id="70eb" class="lu kb hi bd kc lv lw lx kg ly lz ma kk iq mb mc ko iu md me ks iy mf mg kw mh bi translated">使用Class.destroy_all和rake db:reset(针对特定情况)</h2><blockquote class="ml mm mn"><p id="e66f" class="if ig mj ih b ii ij ik il im in io ip mo ir is it mp iv iw ix mq iz ja jb jc hb bi translated">**注意:请谨慎使用最后这些提示！如果你在做自己的项目，只有你一个人在使用数据库，这两个工具确实很方便，但是我不建议在其他情况下使用它们！如果您将这些应用到一个更大的项目中，其中的数据库可能更大或更重要，那么您可能会意外地用这段代码破坏那些记录。**</p></blockquote><p id="dedd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您还没有尝试在自己的项目中使用这两段代码，这就是您的标志！在许多情况下，它们使事情变得简单和顺利。</p><p id="cf20" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，我喜欢将“Class.destroy_all”添加到每个类的seeds.rb文件的顶部，如下所示:</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div class="er es mr"><img src="../Images/a497e0d1c06593c3556b4a2fcf82d809.png" data-original-src="https://miro.medium.com/v2/resize:fit:1128/format:webp/1*tG8ayZXRS0apkXUQNLoOeQ.png"/></div></figure><p id="d005" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这样，如果我必须多次运行我的种子文件(这几乎是肯定的)，它将在执行将向这些表添加新数据的其余seeds.rb代码之前销毁这三个表中的所有用户、项目和评论记录。这是很方便的，这样当你只是在个人项目上修修补补时，你就不会有大量的表格。</p><p id="a59a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">很棒的是使用。destroy_all销毁记录，但是那些记录中的ID号呢？因为我们知道ID号通常不会被覆盖，所以如果您重新运行一个创建了大量记录的种子文件，最终很容易得到大量的ID号。如果ID号对您的程序很重要，请尝试使用命令“rake db:reset”。</p><p id="bed2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你可以在运行“rake db:migration”<em class="mj">和</em>“rake db:seed”的地方使用这个命令。本质上，“rake db:reset”将删除您的数据库，运行您的迁移文件，<em class="mj">然后</em>运行您的种子文件。同样，使用这种方法要特别小心，但是如果应用到正确的程序中，它可以保持数据库的美观和可管理性。</p></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><p id="cc3a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我希望这些提示和技巧对你有所帮助！欢迎在评论中留下反馈，祝编码愉快！</p></div></div>    
</body>
</html>