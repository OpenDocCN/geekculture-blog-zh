<html>
<head>
<title>How to fix the missing dSYMs on Firebase Crashlytics</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何修复Firebase Crashlytics上丢失的dSYMs</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/how-to-fix-the-missing-dsyms-on-firebase-crashlytics-5f36d9db51d9?source=collection_archive---------1-----------------------#2021-07-28">https://medium.com/geekculture/how-to-fix-the-missing-dsyms-on-firebase-crashlytics-5f36d9db51d9?source=collection_archive---------1-----------------------#2021-07-28</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/b3e09a9e0b4a635a55c65f21629776f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7FsrwqAamN6CPMZZAMvc7Q.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">I was in a hurry for beard shaving</figcaption></figure><h2 id="4e60" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">入门指南</h2><p id="0e83" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc jf kd ke kf jj kg kh ki jn kj kk kl km hb bi translated">如果你正在使用一些崩溃报告提供者，如<a class="ae kn" href="https://console.firebase.google.com/" rel="noopener ugc nofollow" target="_blank"> Firebase Crashlytics </a>或<a class="ae kn" href="https://sentry.io/" rel="noopener ugc nofollow" target="_blank"> Sentry </a>用于你的应用程序，你是否见过类似<em class="ko">“丢失dSYM文件”</em>的问题？</p><figure class="kq kr ks kt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kp"><img src="../Images/a32cd5d2ba36c554803ab873599e147f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JWR1T2CMyoNBoQVa33nkrw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Missing dSYM files on Firebase Crashlytics</figcaption></figure><p id="3bc8" class="pw-post-body-paragraph js jt hi ju b jv ku jx jy jz kv kb kc jf kw ke kf jj kx kh ki jn ky kk kl km hb bi translated">我打赌你已经做了！嗯，有一些原因导致dSYM文件不能完全上传到Firebase Crashlytics，在这种情况下，我们必须自己手动上传丢失的dSYM文件来解决这个问题。</p><p id="7407" class="pw-post-body-paragraph js jt hi ju b jv ku jx jy jz kv kb kc jf kw ke kf jj kx kh ki jn ky kk kl km hb bi translated">为什么我们需要解决这个问题？丢失的dSYM文件导致Firebase Crashlytics无法处理您的崩溃报告，它需要dSYM文件来表示从内存地址到人类可读信息的崩溃报告，例如什么是函数名、文件名或数字行导致崩溃。</p><figure class="kq kr ks kt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kz"><img src="../Images/b3fe0e96eeb5774014477610cf77a3c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sEzqu4Sj06-QqXPACSkrnw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Missing dSYM files cause the Firebase Crashlytics stops processing the crash reports</figcaption></figure><h2 id="ab01" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">禁用位代码</h2><p id="987e" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc jf kd ke kf jj kg kh ki jn kj kk kl km hb bi translated">如果您的应用程序禁用了位代码设置，那么您必须添加<a class="ae kn" href="https://firebase.google.com/docs/crashlytics/get-started?platform=ios#set-up-dsym-uploading" rel="noopener ugc nofollow" target="_blank">一个构建阶段脚本</a>来自动上传dSYM文件。不知何故，这一步错过了一些dSYM文件，我们必须找到丢失的文件，然后手动上传。</p><p id="2bb6" class="pw-post-body-paragraph js jt hi ju b jv ku jx jy jz kv kb kc jf kw ke kf jj kx kh ki jn ky kk kl km hb bi translated">首先，你必须记住丢失的dSYM文件的UUID，最好把它保存在某个地方:</p><figure class="kq kr ks kt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kp"><img src="../Images/364f169a262d068c618842597ce79b51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iYH5TiijZ_rPoowJqwFSHw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Remember the missing UUID of the dSYM file</figcaption></figure><p id="28cf" class="pw-post-body-paragraph js jt hi ju b jv ku jx jy jz kv kb kc jf kw ke kf jj kx kh ki jn ky kk kl km hb bi translated">现在，我们开始寻找这个丢失的文件！此步骤需要您的应用程序版本的存档文件。如果你从你的机器上存档并上传档案，那么我们可以很容易地在:<strong class="ju hj"><em class="ko">Xcode</em></strong><em class="ko"/>&gt;<strong class="ju hj"><em class="ko">窗口</em> </strong> &gt; <strong class="ju hj"> <em class="ko">组织者&gt;档案中找到它。</em> </strong></p><figure class="kq kr ks kt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es la"><img src="../Images/1f78a6ba3c7a9e88542d5c56e735e63d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K60gq5g1G6mixRbQwcgBlw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Archives in your local machine</figcaption></figure><p id="c789" class="pw-post-body-paragraph js jt hi ju b jv ku jx jy jz kv kb kc jf kw ke kf jj kx kh ki jn ky kk kl km hb bi translated">接下来，选择一个与Firebase Crashlytics上的UUID应用程序版本相匹配的存档版本。提取其内容以找到dSYMs文件夹</p><figure class="kq kr ks kt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lb"><img src="../Images/18d044575bbd36802b038f19da57c52a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N-87zT6JbUWtYMyRocdENQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Extract the Archived file to find the dSYMs folder</figcaption></figure><p id="ce2c" class="pw-post-body-paragraph js jt hi ju b jv ku jx jy jz kv kb kc jf kw ke kf jj kx kh ki jn ky kk kl km hb bi translated">现在，通过我们在第一步中获得的名称在这里找到丢失的dSYM文件</p><figure class="kq kr ks kt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lb"><img src="../Images/0d17a3a61b51c48987925a7fde1c7adc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o2lLp2IKSgoOuzJswtXU9Q.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">All dSYM files inside the dSYMs folder</figcaption></figure><p id="386c" class="pw-post-body-paragraph js jt hi ju b jv ku jx jy jz kv kb kc jf kw ke kf jj kx kh ki jn ky kk kl km hb bi translated">有时，dSYM文件名不是UUID，而是二进制名称。要得到某个dSYM文件的UUID，使用这个命令:<strong class="ju hj"><em class="ko">dwarfdump-u&lt;dSYM _ file&gt;</em></strong></p><figure class="kq kr ks kt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lc"><img src="../Images/64ef5bed97a07f05de9b60efc46d7e55.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0K3lEpxXmcOOOmr3OvLOvw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Get UUID of a certain dSYM file</figcaption></figure><p id="1cc3" class="pw-post-body-paragraph js jt hi ju b jv ku jx jy jz kv kb kc jf kw ke kf jj kx kh ki jn ky kk kl km hb bi translated">找到文件后，按照Firebase crashlytics的<a class="ae kn" href="https://firebase.google.com/docs/crashlytics/get-deobfuscated-reports?platform=ios#upload-dsyms" rel="noopener ugc nofollow" target="_blank">步骤</a>手动上传。等待几分钟，让Firebase crashlytics再次重新处理崩溃报告，然后问题将被解决。</p><p id="4655" class="pw-post-body-paragraph js jt hi ju b jv ku jx jy jz kv kb kc jf kw ke kf jj kx kh ki jn ky kk kl km hb bi translated">如果您使用CI/CD提供商来构建和部署归档，那么请记住将其保存在他们的服务器上，大多数提供商都支持这一目的。</p><figure class="kq kr ks kt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ld"><img src="../Images/823a38e546f12582824388f361c4af2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*32-voqI1p3cPDkQ8dUrOtw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Build artifacts on Bitrise</figcaption></figure><p id="fc4e" class="pw-post-body-paragraph js jt hi ju b jv ku jx jy jz kv kb kc jf kw ke kf jj kx kh ki jn ky kk kl km hb bi translated">一些提供商如Bitrise已经将dSYMs文件夹分离出来，所以我们可以直接使用它！做上面同样的事情找到并上传丢失的dSYM文件。</p><blockquote class="le lf lg"><p id="8aef" class="js jt ko ju b jv ku jx jy jz kv kb kc lh kw ke kf li kx kh ki lj ky kk kl km hb bi translated">请记住:永远保存你的存档文件！</p></blockquote><h2 id="2265" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">启用位代码</h2><p id="b8fe" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc jf kd ke kf jj kg kh ki jn kj kk kl km hb bi translated">对于启用了位代码的应用程序，存档的dSYMs文件夹中的dSYM文件将在Apple Connect服务器上重建，然后我们无法使用它们并将其上传到Firebase Crashlytics。我们必须等到苹果完成处理，然后才能从苹果连接下载</p><figure class="kq kr ks kt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lk"><img src="../Images/7620069ea4a95192d78e8d3f16c7bc23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t8EXJVqnsSkHjzbkUPc8tQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Download processed dSYMs from Apple Connect</figcaption></figure><p id="abc4" class="pw-post-body-paragraph js jt hi ju b jv ku jx jy jz kv kb kc jf kw ke kf jj kx kh ki jn ky kk kl km hb bi translated">下载后，我们可以按照Firebase Crashlytics的手动步骤上传它们。幸运的是，我们可以使用这个浪子的<a class="ae kn" href="https://docs.fastlane.tools/actions/download_dsyms/" rel="noopener ugc nofollow" target="_blank">下载_dsyms </a>插件来自动下载&amp;上传它们，这为我们节省了很多时间！</p><p id="4268" class="pw-post-body-paragraph js jt hi ju b jv ku jx jy jz kv kb kc jf kw ke kf jj kx kh ki jn ky kk kl km hb bi translated">如果您可以在那里找到丢失的dSYM，您可以再次上传它以修复问题。</p><p id="46ad" class="pw-post-body-paragraph js jt hi ju b jv ku jx jy jz kv kb kc jf kw ke kf jj kx kh ki jn ky kk kl km hb bi translated">有时，Apple Connect会返回一些错误的UUID，这意味着用户在一个二进制文件上崩溃，丢失了UUID，但Firebase Crashlytics收到了错误UUID的dSYM，因此它们无法链接在一起并导致问题。</p><p id="4aa0" class="pw-post-body-paragraph js jt hi ju b jv ku jx jy jz kv kb kc jf kw ke kf jj kx kh ki jn ky kk kl km hb bi translated">Firebase Crashlytics不显示二进制名称，所以手动查找会很麻烦。对于一些崩溃报告提供者，如Sentry，它可以显示丢失的dSYM文件的二进制名称</p><figure class="kq kr ks kt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ll"><img src="../Images/83c8261e2abd5410a6b0312000f9fe85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*geVmrpOT8ceJ5j31foF8YQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Determine the binary name of the missing dSYM file on Sentry</figcaption></figure><p id="c7d7" class="pw-post-body-paragraph js jt hi ju b jv ku jx jy jz kv kb kc jf kw ke kf jj kx kh ki jn ky kk kl km hb bi translated">幸运的是，我同时使用Firebase Crashlytics和Sentry，所以我可以很容易地根据丢失的UUID确定二进制文件的名称，然后在从Apple Connect下载的dSYM文件夹中找到错误的dSYM文件。</p><p id="c3c8" class="pw-post-body-paragraph js jt hi ju b jv ku jx jy jz kv kb kc jf kw ke kf jj kx kh ki jn ky kk kl km hb bi translated">我希望Firebase Crashlytics能尽快支持这个有用的特性！</p><h2 id="6ae9" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">“烹饪”dSYM文件</h2><p id="0672" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc jf kd ke kf jj kg kh ki jn kj kk kl km hb bi translated">在某些情况下，我们确保我们找到了丢失的dSYM文件，但差异UUID，苹果连接返回错误，正如我们上面讨论的一个例子。</p><p id="eb85" class="pw-post-body-paragraph js jt hi ju b jv ku jx jy jz kv kb kc jf kw ke kf jj kx kh ki jn ky kk kl km hb bi translated">另一个用例是，当您必须从相同的源代码重新生成二进制&amp; dSYM文件，但是dSYM的UUID在每次构建时会有所不同。因为我们的用户报告丢失了UUID dSYM，所以我们必须将dSYM的UUID重命名。</p><p id="9fd5" class="pw-post-body-paragraph js jt hi ju b jv ku jx jy jz kv kb kc jf kw ke kf jj kx kh ki jn ky kk kl km hb bi translated">这一步看起来像我们在“烹饪”丢失的dSYM文件！</p><blockquote class="le lf lg"><p id="b4e6" class="js jt ko ju b jv ku jx jy jz kv kb kc lh kw ke kf li kx kh ki lj ky kk kl km hb bi translated">⚠️⚠️⚠️:你<strong class="ju hj">必须</strong>小心这一步，如果你“煮”错了一个，事故报告就会乱成一团或者无法阅读！</p></blockquote><p id="3ea2" class="pw-post-body-paragraph js jt hi ju b jv ku jx jy jz kv kb kc jf kw ke kf jj kx kh ki jn ky kk kl km hb bi translated">希望你小心你要做的事！为此，从我们的dSYM文件中打开DWARF文件:<my_uuid.dsym>/Contents/Resources/DWARF/<my_binary/></my_uuid.dsym></p><p id="0ea6" class="pw-post-body-paragraph js jt hi ju b jv ku jx jy jz kv kb kc jf kw ke kf jj kx kh ki jn ky kk kl km hb bi translated">你可以通过Visual Studio的<a class="ae kn" href="https://marketplace.visualstudio.com/items?itemName=ms-vscode.hexeditor" rel="noopener ugc nofollow" target="_blank">十六进制编辑器</a>或者任何在线十六进制编辑器工具打开这个DWARF文件。我正在使用<a class="ae kn" href="https://hexed.it/" rel="noopener ugc nofollow" target="_blank"> https://hexed.it </a>查找我们当前的UUID &amp;替换为Firebase Crashlytics上丢失的UUID。根据我的经验，搜索UUID的前4个字符比搜索整个UUID要好</p><figure class="kq kr ks kt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lm"><img src="../Images/9eebe5c59464a09e1dee03ce9b7b7b99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nXlHdJBDSaDfU_xX59mtJA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Find &amp; replace the UUID in the DWARF file</figcaption></figure><p id="a661" class="pw-post-body-paragraph js jt hi ju b jv ku jx jy jz kv kb kc jf kw ke kf jj kx kh ki jn ky kk kl km hb bi translated">替换后，保存并下载文件，然后替换原来的文件。现在上传“熟”的dSYM文件到Firebase Crashlytics，然后问题就解决了！</p><p id="ff6b" class="pw-post-body-paragraph js jt hi ju b jv ku jx jy jz kv kb kc jf kw ke kf jj kx kh ki jn ky kk kl km hb bi translated">通过十六进制编辑器工具找不到UUID？你可以试试这个命令行工具:<a class="ae kn" href="https://github.com/schmittsfn/dsymrename" rel="noopener ugc nofollow" target="_blank">https://github.com/schmittsfn/dsymrename</a></p><h2 id="52f8" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">结论</h2><p id="2d53" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc jf kd ke kf jj kg kh ki jn kj kk kl km hb bi translated">在本文中，您了解了如何找到丢失的dSYM并将其上传到Firebase Crashlytics，这种方法也适用于其他崩溃报告提供者。</p><p id="42ab" class="pw-post-body-paragraph js jt hi ju b jv ku jx jy jz kv kb kc jf kw ke kf jj kx kh ki jn ky kk kl km hb bi translated">请记住，总是存储在您的本地或CI服务器上的非位代码应用程序的档案，并小心你在做什么，而“烹饪”dSYM文件！！！</p></div></div>    
</body>
</html>