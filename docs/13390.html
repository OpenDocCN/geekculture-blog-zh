<html>
<head>
<title>System Design — Parking Lot Design Interview Question Using Java</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">系统设计——使用Java的停车场设计面试问题</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/system-design-parking-lot-design-interview-question-using-java-3d1dea4f6a2?source=collection_archive---------0-----------------------#2022-07-06">https://medium.com/geekculture/system-design-parking-lot-design-interview-question-using-java-3d1dea4f6a2?source=collection_archive---------0-----------------------#2022-07-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="8afb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">系统设计问题现在是许多组织面试评估过程的一部分。这些问题通常是开放式的，面试官测试应聘者如何处理问题陈述。如果他能分解问题陈述，用面向对象的原则来思考。如果候选人遵循良好的编码实践，如坚实的原则和各种设计原则。在<a class="ae jd" href="https://www.javastructures.com/design/elevator" rel="noopener ugc nofollow" target="_blank">之前的教程中，我们设计并实现了一个电梯系统</a>。在本教程中，我们将设计一个停车场并实现解决方案。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/379ae0d22910ed77259889227ac75f0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1336/format:webp/0*qL2OgHhK_QiEsiHi.jpg"/></div></div></figure><p id="43ca" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">录像</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="jq jr l"/></div></figure><p id="1114" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本教程中，我们将利用以下设计模式-</p><ul class=""><li id="59cf" class="js jt hi ih b ii ij im in iq ju iu jv iy jw jc jx jy jz ka bi translated">单一设计模式</li><li id="9d87" class="js jt hi ih b ii kb im kc iq kd iu ke iy kf jc jx jy jz ka bi translated">战略设计模式</li><li id="3176" class="js jt hi ih b ii kb im kc iq kd iu ke iy kf jc jx jy jz ka bi translated">坚实的设计原则</li></ul><p id="4ca0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个实现我们将分为3个部分</p><ul class=""><li id="509b" class="js jt hi ih b ii ij im in iq ju iu jv iy jw jc jx jy jz ka bi translated">讨论我们将如何模拟电梯设计</li><li id="0194" class="js jt hi ih b ii kb im kc iq kd iu ke iy kf jc jx jy jz ka bi translated">停车设计规范—迭代1 —停车</li><li id="f406" class="js jt hi ih b ii kb im kc iq kd iu ke iy kf jc jx jy jz ka bi translated">停车设计规范-迭代2-停车</li></ul><h1 id="59eb" class="kg kh hi bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">模拟停车场设计</h1><p id="95f6" class="pw-post-body-paragraph if ig hi ih b ii le ik il im lf io ip iq lg is it iu lh iw ix iy li ja jb jc hb bi translated">我们将模拟这一场景——要停放的车辆可以是两轮车，也可以是四轮车。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es lj"><img src="../Images/a196a86eedc2ae9c493d56e235c8fd66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*YHVxrCqjBGUpGbWu.jpg"/></div></div></figure><p id="0586" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当要停放车辆时，将向车主提供一张罚单。如果没有可用的停车空位，那么将抛出停车满异常。当车辆需要停车时，车主必须提供停车票。<br/>停车费将取决于-</p><ul class=""><li id="f041" class="js jt hi ih b ii ij im in iq ju iu jv iy jw jc jx jy jz ka bi translated">如果是周末或工作日</li><li id="14d1" class="js jt hi ih b ii kb im kc iq kd iu ke iy kf jc jx jy jz ka bi translated">如果车辆是两轮车或四轮车</li></ul><h1 id="40bb" class="kg kh hi bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">停车设计规范—迭代1 —停车</h1><p id="a12c" class="pw-post-body-paragraph if ig hi ih b ii le ik il im lf io ip iq lg is it iu lh iw ix iy li ja jb jc hb bi translated">停车场实现将具有以下域类-</p><ul class=""><li id="50dc" class="js jt hi ih b ii ij im in iq ju iu jv iy jw jc jx jy jz ka bi translated"><strong class="ih hj"> Enum VehicleSize </strong> —该Enum将有两个值两轮车和四轮车。</li></ul><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es lk"><img src="../Images/9ee363d0251232944ee8d810f274f951.png" data-original-src="https://miro.medium.com/v2/resize:fit:316/format:webp/0*s5CgqhZ2gggq4nb3.jpg"/></div></figure><ul class=""><li id="82ee" class="js jt hi ih b ii ij im in iq ju iu jv iy jw jc jx jy jz ka bi translated">创建枚举车辆大小</li></ul><pre class="jf jg jh ji fd ll lm ln lo aw lp bi"><span id="c8d0" class="lq kh hi lm b fi lr ls l lt lu">package com.javastructures.model;<br/><br/>public enum VehicleSize{<br/>	TWOWHEELER,  FOURWHEELER;<br/>}</span></pre><p id="310d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">车辆类别</strong> —待停放的车辆。它具有车辆编号和车辆类型，即两轮车或四轮车。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es lv"><img src="../Images/dcb889918e5ded32458815ca36775474.png" data-original-src="https://miro.medium.com/v2/resize:fit:226/format:webp/0*vbtPNUYo0s5-2wi4.jpg"/></div></figure><p id="2146" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">创建域车辆类</p><pre class="jf jg jh ji fd ll lm ln lo aw lp bi"><span id="c5cb" class="lq kh hi lm b fi lr ls l lt lu">package com.javastructures.model;<br/><br/>public class Vehicle {<br/><br/>	private String vehicleNumber;<br/>	private VehicleSize vehicleSize;<br/><br/>	public Vehicle(String vehicleNumber, VehicleSize vehicleSize) {<br/>		this.vehicleNumber = vehicleNumber;<br/>		this.vehicleSize = vehicleSize;<br/>	}<br/><br/>	public VehicleSize getVehicleSize() {<br/>		return vehicleSize;<br/>	}<br/><br/>	public void setVehicleSize(VehicleSize vehicleSize) {<br/>		this.vehicleSize = vehicleSize;<br/>	}<br/><br/>	public String getVehicleNumber() {<br/>		return vehicleNumber;<br/>	}<br/><br/>	public void setVehicleNumber(String vehicleNumber) {<br/>		this.vehicleNumber = vehicleNumber;<br/>	}<br/>}</span></pre><p id="a99b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">类槽</strong> —该类表示停车场中用于停放车辆的空间。一个停车场将有有限数量的停车位。这个数字将被初始化。停车场有两种类型的插槽-</p><ul class=""><li id="f49d" class="js jt hi ih b ii ij im in iq ju iu jv iy jw jc jx jy jz ka bi translated">两轮车停车位</li><li id="11c1" class="js jt hi ih b ii kb im kc iq kd iu ke iy kf jc jx jy jz ka bi translated">四个惠勒停车位</li></ul><p id="3386" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">每个插槽都有一个唯一的插槽号。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es lw"><img src="../Images/a9d1a6391336754971e3b527f6f4d166.png" data-original-src="https://miro.medium.com/v2/resize:fit:414/format:webp/0*flEaRTRjcjf6FfIg.jpg"/></div></figure><p id="7133" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">创建域插槽类</p><pre class="jf jg jh ji fd ll lm ln lo aw lp bi"><span id="c218" class="lq kh hi lm b fi lr ls l lt lu">package com.javastructures.model;<br/><br/>public class Slot {<br/><br/>	private int slotNumber;<br/>	private boolean isEmpty;<br/>	private Vehicle parkVehicle;<br/><br/>	public Slot(int slotNumber) {<br/>		this.slotNumber = slotNumber;<br/>		isEmpty = true;<br/>	}<br/><br/>	public int getSlotNumber() {<br/>		return slotNumber;<br/>	}<br/><br/>	public void setSlotNumber(int slotNumber) {<br/>		this.slotNumber = slotNumber;<br/>	}<br/><br/>	public boolean isEmpty() {<br/>		return isEmpty;<br/>	}<br/><br/>	public void setEmpty(boolean isEmpty) {<br/>		this.isEmpty = isEmpty;<br/>	}<br/><br/>	public Vehicle getParkVehicle() {<br/>		return parkVehicle;<br/>	}<br/><br/>	public void setParkVehicle(Vehicle parkVehicle) {<br/>		this.parkVehicle = parkVehicle;<br/>	}<br/><br/>	public void vacateSlot() {<br/>		parkVehicle = null;<br/>		this.isEmpty = true;<br/>	}<br/><br/>	public void occupySlot(Vehicle parkVehicle) {<br/>		this.parkVehicle = parkVehicle;<br/>		this.isEmpty = false;<br/>	}<br/>}</span></pre><p id="1007" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">类票</strong> —一旦车辆被停放，将向车主提供票。它将包含车位号、车辆号、车辆停放时间和车辆大小。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es lx"><img src="../Images/6f3aa3a72b46be4e69421c5d0d261e50.png" data-original-src="https://miro.medium.com/v2/resize:fit:406/format:webp/0*T1hJBsZXI8oVFR66.jpg"/></div></figure><p id="6901" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">创建域票证类</p><pre class="jf jg jh ji fd ll lm ln lo aw lp bi"><span id="2198" class="lq kh hi lm b fi lr ls l lt lu">package com.javastructures.model;<br/><br/>import java.util.Date;<br/><br/>public class Ticket {<br/><br/>	private int slotNumber;<br/>	private String vehicleNumber;<br/>	private Date date;<br/>	private VehicleSize vehicleSize;<br/><br/>	public Ticket(int slotNumber, String vehicleNumber, VehicleSize vehicleSize, Date date) {<br/>		super();<br/>		this.slotNumber = slotNumber;<br/>		this.vehicleNumber = vehicleNumber;<br/>		this.date = date;<br/>		this.setVehicleSize(vehicleSize);<br/>	}<br/><br/>	public Date getDate() {<br/>		return date;<br/>	}<br/><br/>	public void setDate(Date date) {<br/>		this.date = date;<br/>	}<br/><br/>	public int getSlotNumber() {<br/>		return slotNumber;<br/>	}<br/><br/>	public void setSlotNumber(int slotNumber) {<br/>		this.slotNumber = slotNumber;<br/>	}<br/><br/>	public String getVehicleNumber() {<br/>		return vehicleNumber;<br/>	}<br/><br/>	public void setVehicleNumber(String vehicleNumber) {<br/>		this.vehicleNumber = vehicleNumber;<br/>	}<br/><br/>	public VehicleSize getVehicleSize() {<br/>		return vehicleSize;<br/>	}<br/><br/>	public void setVehicleSize(VehicleSize vehicleSize) {<br/>		this.vehicleSize = vehicleSize;<br/>	}<br/><br/>	@Override<br/>	public String toString() {<br/>		return "Ticket [slotNumber=" + slotNumber + ", vehicleNumber=" + vehicleNumber + ", date=" + date<br/>				+ ", vehicleSize=" + vehicleSize + "]";<br/>	}<br/><br/>}</span></pre><p id="47a9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将创建一个名为ParkingFullException的自定义异常-</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es ly"><img src="../Images/5204d30a2ec4533b1e69bd86a917b4b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:426/format:webp/0*X8MNvql2z_hm43As.jpg"/></div></figure><pre class="jf jg jh ji fd ll lm ln lo aw lp bi"><span id="b085" class="lq kh hi lm b fi lr ls l lt lu">package com.javastructures.exception;<br/><br/>public class ParkingFullException extends Exception {<br/>	public ParkingFullException(String message) {<br/>		super(message);<br/>	}<br/>}</span></pre><p id="3ba7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">创建一个名为Parking的接口，它将具有park方法。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es lz"><img src="../Images/6970b829a9af53851bca76177b5ba4db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1272/format:webp/0*nkkqjax4e4A3a60P.jpg"/></div></figure><pre class="jf jg jh ji fd ll lm ln lo aw lp bi"><span id="dea2" class="lq kh hi lm b fi lr ls l lt lu">package com.javastructures.service;<br/><br/>import com.javastructures.exception.InvalidVehicleNumberException;<br/>import com.javastructures.exception.ParkingFullException;<br/>import com.javastructures.model.Ticket;<br/>import com.javastructures.model.Vehicle;<br/>import com.javastructures.strategy.ParkingChargeStrategy;<br/><br/>public interface Parking {<br/><br/>	public Ticket park(Vehicle vehicle) throws ParkingFullException;<br/>	<br/>	public int unPark(Ticket ticket, ParkingChargeStrategy parkingCostStrategy) throws InvalidVehicleNumberException;<br/><br/>}</span></pre><p id="14e9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后，我们将实现上述接口来编写停车和退票的逻辑。这个类将是一个单例类。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es lz"><img src="../Images/146eb6874b2e7286c69d1718b520ebc4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1272/format:webp/0*K2hD8-r3rlMhiOWg.jpg"/></div></div></figure><pre class="jf jg jh ji fd ll lm ln lo aw lp bi"><span id="cac2" class="lq kh hi lm b fi lr ls l lt lu">package com.javastructures.service;<br/><br/>import java.util.ArrayList;<br/>import java.util.Date;<br/>import java.util.List;<br/><br/>import exception.InvalidVehicleNumberException;<br/>import exception.ParkingFullException;<br/>import model.Slot;<br/>import model.Ticket;<br/>import model.Vehicle;<br/>import model.VehicleSize;<br/>import strategy.ParkingChargeStrategy;<br/><br/>public class ParkingLot implements Parking {<br/><br/>	private static ParkingLot parkingLot;<br/>	private final List&lt;Slot&gt; twoWheelerSlots;<br/>	private final List&lt;Slot&gt; fourWheelerSlots;<br/><br/>	private ParkingLot() {<br/>		this.twoWheelerSlots = new ArrayList&lt;&gt;();<br/>		this.fourWheelerSlots = new ArrayList&lt;&gt;();<br/>	}<br/><br/>	public static ParkingLot getParkingLot() {<br/>		if (parkingLot == null)<br/>			parkingLot = new ParkingLot();<br/>		return parkingLot;<br/>	}<br/><br/>	public boolean initializeParkingSlots(int numberOfTwoWheelerParkingSlots, int numberOfFourWheelerParkingSlots) {<br/><br/>		for (int i = 1; i &lt;= numberOfTwoWheelerParkingSlots; i++) {<br/>			twoWheelerSlots.add(new Slot(i));<br/>		}<br/><br/>		System.out.printf("Created a two wheeler parking lot with %s slots %n", numberOfTwoWheelerParkingSlots);<br/><br/>		for (int i = 1; i &lt;= numberOfFourWheelerParkingSlots; i++) {<br/>			fourWheelerSlots.add(new Slot(i));<br/>		}<br/><br/>		System.out.printf("Created a four wheeler parking lot with %s slots %n", numberOfFourWheelerParkingSlots);<br/>		return true;<br/>	}<br/><br/>	public Ticket park(Vehicle vehicle) throws ParkingFullException {<br/>		Slot nextAvailableSlot;<br/>		if (vehicle.getVehicleSize().equals(VehicleSize.FOURWHEELER)) {<br/>			nextAvailableSlot = getNextAvailableFourWheelerSlot();<br/>		} else {<br/>			nextAvailableSlot = getNextAvailableTwoWheelerSlot();<br/>		}<br/>		nextAvailableSlot.occupySlot(vehicle);<br/>		System.out.printf("Allocated slot number: %d \n", nextAvailableSlot.getSlotNumber());<br/>		Ticket ticket = new Ticket(nextAvailableSlot.getSlotNumber(), vehicle.getVehicleNumber(),<br/>				vehicle.getVehicleSize(), new Date());<br/>		return ticket;<br/>	}<br/><br/>	private Slot getNextAvailableFourWheelerSlot() throws ParkingFullException {<br/>		for (Slot slot : fourWheelerSlots) {<br/>			if (slot.isEmpty()) {<br/>				return slot;<br/>			}<br/>		}<br/>		throw new ParkingFullException("No Empty Slot available");<br/>	}<br/><br/>	private Slot getNextAvailableTwoWheelerSlot() throws ParkingFullException {<br/>		for (Slot slot : twoWheelerSlots) {<br/>			if (slot.isEmpty()) {<br/>				return slot;<br/>			}<br/>		}<br/>		throw new ParkingFullException("No Empty Slot available");<br/>	}	<br/>}</span></pre><p id="cf8c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，我们将创建一个类来测试上面的停放逻辑。</p><pre class="jf jg jh ji fd ll lm ln lo aw lp bi"><span id="d1fb" class="lq kh hi lm b fi lr ls l lt lu">package com.javastructures;<br/><br/>import com.javastructures.exception.ParkingFullException;<br/>import com.javastructures.model.Ticket;<br/>import com.javastructures.model.Vehicle;<br/>import com.javastructures.model.VehicleSize;<br/>import com.javastructures.service.ParkingLot;<br/><br/>public class TestParking {<br/><br/>	public static void main(String[] args) throws ParkingFullException {<br/>		ParkingLot parkingLot = ParkingLot.getParkingLot();<br/><br/>		parkingLot.initializeParkingSlots(10, 10);<br/><br/>		Vehicle vehicle = new Vehicle("Mh12", VehicleSize.TWOWHEELER);<br/><br/>		Ticket ticket = parkingLot.park(vehicle);<br/>		System.out.println(ticket);<br/><br/>		Vehicle vehicle2 = new Vehicle("Mh13", VehicleSize.TWOWHEELER);<br/><br/>		Ticket ticket2 = parkingLot.park(vehicle2);<br/>		System.out.println(ticket2);<br/><br/>	}<br/><br/>}</span></pre><h1 id="e019" class="kg kh hi bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">停车场设计规范—第二次迭代</h1><p id="560b" class="pw-post-body-paragraph if ig hi ih b ii le ik il im lf io ip iq lg is it iu lh iw ix iy li ja jb jc hb bi translated">在第一次迭代中，我们实现了停放车辆的代码。在第二次迭代中，我们将实现代码来打开车辆并计算费用。<br/>创建一个名为InvalidVehicleNumberException的异常类。如果由于某种原因，在停车场找不到要停车的车辆，就会抛出这个异常。</p><pre class="jf jg jh ji fd ll lm ln lo aw lp bi"><span id="b36d" class="lq kh hi lm b fi lr ls l lt lu">package com.javastructures.exception;<br/><br/>public class InvalidVehicleNumberException extends Exception {<br/>	public InvalidVehicleNumberException(String s) {<br/>		super(s);<br/>	}<br/>}</span></pre><p id="368a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，我们将实现一些类来计算停放车辆的停车费。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es ma"><img src="../Images/57ee7fd00ce1e3ab4cd3d55a43ef1c8e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*LmH_nY9-cuLupeZG.jpg"/></div></div></figure><p id="f705" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">创建一个名为ParkingChargeStrategy的接口。</p><pre class="jf jg jh ji fd ll lm ln lo aw lp bi"><span id="5d64" class="lq kh hi lm b fi lr ls l lt lu">package com.javastructures.strategy;<br/><br/>public interface ParkingChargeStrategy {<br/>	int getCharge(int parkHours);<br/>}</span></pre><p id="a402" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于这个接口，我们将提供如下四个实现- <br/>如果停放的车辆是四轮车并且在工作日停放。</p><pre class="jf jg jh ji fd ll lm ln lo aw lp bi"><span id="11aa" class="lq kh hi lm b fi lr ls l lt lu">package com.javastructures.strategy;<br/><br/>public class FourWheelerWeekDayChargeStrategy implements ParkingChargeStrategy {<br/><br/>	@Override<br/>	public int getCharge(int parkHours) {<br/>		if (parkHours &lt; 1) {<br/>			return 20;<br/>		}<br/>		return parkHours * 20;<br/>	}<br/>}</span></pre><p id="fa22" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果停放的车辆是四轮车并且在周末停放。</p><pre class="jf jg jh ji fd ll lm ln lo aw lp bi"><span id="dfb2" class="lq kh hi lm b fi lr ls l lt lu">package com.javastructures.strategy;<br/><br/>public class FourWheelerWeekendChargeStrategy implements ParkingChargeStrategy {<br/>    @Override<br/>    public int getCharge(int parkHours) {<br/>        if (parkHours &lt; 1) {<br/>            return 30;<br/>        }<br/>        return parkHours * 30;<br/>    }<br/>}</span></pre><p id="76c9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果停放的车辆是两轮车并且是在工作日停放的。</p><pre class="jf jg jh ji fd ll lm ln lo aw lp bi"><span id="2cbb" class="lq kh hi lm b fi lr ls l lt lu">package com.javastructures.strategy;<br/><br/>public class TwoWheelerWeekDayChargeStrategy implements ParkingChargeStrategy {<br/><br/>	@Override<br/>	public int getCharge(int parkHours) {<br/>		if (parkHours &lt; 1) {<br/>			return 10;<br/>		}<br/>		return parkHours * 10;<br/>	}<br/>}</span></pre><p id="8527" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果停放的车辆是两轮车并且在周末停放。</p><pre class="jf jg jh ji fd ll lm ln lo aw lp bi"><span id="62cc" class="lq kh hi lm b fi lr ls l lt lu">package com.javastructures.strategy;<br/><br/>public class TwoWheelerWeekendChargeStrategy implements ParkingChargeStrategy {<br/>	@Override<br/>	public int getCharge(int parkHours) {<br/>		if (parkHours &lt; 1) {<br/>			return 15;<br/>		}<br/>		return parkHours * 15;<br/>	}<br/>}</span></pre><p id="2dca" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">同样，对于我们已经创建的停放接口，添加一个名为unpark的新方法，如下所示</p><pre class="jf jg jh ji fd ll lm ln lo aw lp bi"><span id="f99f" class="lq kh hi lm b fi lr ls l lt lu">package com.javastructures.service;<br/><br/>import com.javastructures.exception.InvalidVehicleNumberException;<br/>import com.javastructures.exception.ParkingFullException;<br/>import com.javastructures.model.Ticket;<br/>import com.javastructures.model.Vehicle;<br/>import com.javastructures.strategy.ParkingChargeStrategy;<br/><br/>public interface Parking {<br/><br/>	public Ticket park(Vehicle vehicle) throws ParkingFullException;<br/><br/>	<strong class="lm hj">public int unPark(Ticket ticket, ParkingChargeStrategy parkingCostStrategy) throws InvalidVehicleNumberException;</strong><br/><br/>}</span></pre><p id="5dd6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后，实现逻辑来打开车辆。</p><pre class="jf jg jh ji fd ll lm ln lo aw lp bi"><span id="c4ef" class="lq kh hi lm b fi lr ls l lt lu">package com.javastructures.service;<br/><br/>import java.util.ArrayList;<br/>import java.util.Date;<br/>import java.util.List;<br/><br/>import com.javastructures.exception.InvalidVehicleNumberException;<br/>import com.javastructures.exception.ParkingFullException;<br/>import com.javastructures.model.Slot;<br/>import com.javastructures.model.Ticket;<br/>import com.javastructures.model.Vehicle;<br/>import com.javastructures.model.VehicleSize;<br/>import com.javastructures.strategy.ParkingChargeStrategy;<br/><br/>public class ParkingLot implements Parking {<br/><br/>	private static ParkingLot parkingLot;<br/><br/>	private final List&lt;Slot&gt; twoWheelerSlots;<br/>	private final List&lt;Slot&gt; fourWheelerSlots;<br/><br/>	private ParkingLot() {<br/>		this.twoWheelerSlots = new ArrayList&lt;&gt;();<br/>		this.fourWheelerSlots = new ArrayList&lt;&gt;();<br/>	}<br/><br/>	public static ParkingLot getParkingLot() {<br/>		if (parkingLot == null)<br/>			parkingLot = new ParkingLot();<br/>		return parkingLot;<br/>	}<br/><br/>	public boolean initializeParkingSlots(int numberOfTwoWheelerParkingSlots, int numberOfFourWheelerParkingSlots) {<br/><br/>		for (int i = 1; i &lt;= numberOfTwoWheelerParkingSlots; i++) {<br/>			twoWheelerSlots.add(new Slot(i));<br/>		}<br/><br/>		System.out.printf("Created a two wheeler parking lot with %s slots %n", numberOfTwoWheelerParkingSlots);<br/><br/>		for (int i = 1; i &lt;= numberOfFourWheelerParkingSlots; i++) {<br/>			fourWheelerSlots.add(new Slot(i));<br/>		}<br/><br/>		System.out.printf("Created a four wheeler parking lot with %s slots %n", numberOfFourWheelerParkingSlots);<br/>		return true;<br/>	}<br/><br/>	public Ticket park(Vehicle vehicle) throws ParkingFullException {<br/>		Slot nextAvailableSlot;<br/>		if (vehicle.getVehicleSize().equals(VehicleSize.FOURWHEELER)) {<br/>			nextAvailableSlot = getNextAvailableFourWheelerSlot();<br/>		} else {<br/>			nextAvailableSlot = getNextAvailableTwoWheelerSlot();<br/>		}<br/>		nextAvailableSlot.occupySlot(vehicle);<br/>		System.out.printf("Allocated slot number: %d \n", nextAvailableSlot.getSlotNumber());<br/>		Ticket ticket = new Ticket(nextAvailableSlot.getSlotNumber(), vehicle.getVehicleNumber(),<br/>				vehicle.getVehicleSize(), new Date());<br/>		return ticket;<br/>	}<br/><br/>	private Slot getNextAvailableFourWheelerSlot() throws ParkingFullException {<br/>		for (Slot slot : fourWheelerSlots) {<br/>			if (slot.isEmpty()) {<br/>				return slot;<br/>			}<br/>		}<br/>		throw new ParkingFullException("No Empty Slot available");<br/>	}<br/><br/>	private Slot getNextAvailableTwoWheelerSlot() throws ParkingFullException {<br/>		for (Slot slot : twoWheelerSlots) {<br/>			if (slot.isEmpty()) {<br/>				return slot;<br/>			}<br/>		}<br/>		throw new ParkingFullException("No Empty Slot available");<br/>	}<br/><br/>	<strong class="lm hj">public int unPark(Ticket ticket, ParkingChargeStrategy parkingCostStrategy) throws InvalidVehicleNumberException {<br/>		int costByHours = 0;<br/>		Slot slot;<br/>		try {<br/>			if (ticket.getVehicleSize().equals(VehicleSize.FOURWHEELER)) {<br/>				slot = getFourWheelerSlotByVehicleNumber(ticket.getVehicleNumber());<br/>			} else {<br/>				slot = getTwoWheelerSlotByVehicleNumber(ticket.getVehicleNumber());<br/>			}<br/>			slot.vacateSlot();<br/>			int hours = getHoursParked(ticket.getDate(), new Date());<br/>			costByHours = parkingCostStrategy.getCharge(hours);<br/>			System.out.println(<br/>					"Vehicle with registration " + ticket.getVehicleNumber() + " at slot number " + slot.getSlotNumber()<br/>							+ " was parked for " + hours + " hours and the total charge is " + costByHours);<br/>		} catch (InvalidVehicleNumberException invalidVehicleNumber) {<br/>			System.out.println(invalidVehicleNumber.getMessage());<br/>			throw invalidVehicleNumber;<br/>		}<br/>		return costByHours;<br/>	}<br/><br/>	private int getHoursParked(Date startDate, Date endDate) {<br/>		long secs = (endDate.getTime() - startDate.getTime()) / 1000;<br/>		int hours = (int) (secs / 3600);<br/>		return hours;<br/><br/>	}<br/><br/>	private Slot getFourWheelerSlotByVehicleNumber(String vehicleNumber) throws InvalidVehicleNumberException {<br/>		for (Slot slot : fourWheelerSlots) {<br/>			Vehicle vehicle = slot.getParkVehicle();<br/>			if (vehicle != null &amp;&amp; vehicle.getVehicleNumber().equals(vehicleNumber)) {<br/>				return slot;<br/>			}<br/>		}<br/>		throw new InvalidVehicleNumberException("Two wheeler with registration number " + vehicleNumber + " not found");<br/>	}<br/><br/>	private Slot getTwoWheelerSlotByVehicleNumber(String vehicleNumber) throws InvalidVehicleNumberException {<br/>		for (Slot slot : twoWheelerSlots) {<br/>			Vehicle vehicle = slot.getParkVehicle();<br/>			if (vehicle != null &amp;&amp; vehicle.getVehicleNumber().equals(vehicleNumber)) {<br/>				return slot;<br/>			}<br/>		}<br/>		throw new InvalidVehicleNumberException("Two wheeler with registration number " + vehicleNumber + " not found");<br/>	}</strong><br/><br/>}</span></pre><p id="3555" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后，我们将测试解锁逻辑</p><pre class="jf jg jh ji fd ll lm ln lo aw lp bi"><span id="63d3" class="lq kh hi lm b fi lr ls l lt lu">package com.javastructures;<br/><br/>import com.javastructures.exception.ParkingFullException;<br/>import com.javastructures.model.Ticket;<br/>import com.javastructures.model.Vehicle;<br/>import com.javastructures.model.VehicleSize;<br/>import com.javastructures.service.ParkingLot;<br/><br/>public class TestParking {<br/><br/>	public static void main(String[] args) throws ParkingFullException {<br/>		ParkingLot parkingLot = ParkingLot.getParkingLot();<br/><br/>		parkingLot.initializeParkingSlots(10, 10);<br/><br/>		Vehicle vehicle = new Vehicle("Mh12", VehicleSize.TWOWHEELER);<br/><br/>		Ticket ticket = parkingLot.park(vehicle);<br/>		System.out.println(ticket);<br/><br/>		Vehicle vehicle2 = new Vehicle("Mh13", VehicleSize.FOURWHEELER);<br/><br/>		Ticket ticket2 = parkingLot.park(vehicle2);<br/>		System.out.println(ticket2);<br/>		<br/>		<strong class="lm hj">int cost1 = parkingLot.unPark(ticket2, new TwoWheelerWeekDayChargeStrategy());<br/>		System.out.println(cost1);<br/>		<br/>		int cost2 = parkingLot.unPark(ticket2, new FourWheelerWeekDayChargeStrategy());<br/>		System.out.println(cost2);</strong><br/><br/>	}<br/><br/>}</span></pre></div></div>    
</body>
</html>