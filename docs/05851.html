<html>
<head>
<title>Building Cucumber API Testing Framework from scratch: Part 6</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从头构建Cucumber API测试框架:第6部分</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/building-cucumber-api-testing-framework-from-scratch-part-6-18a95673a630?source=collection_archive---------11-----------------------#2021-08-01">https://medium.com/geekculture/building-cucumber-api-testing-framework-from-scratch-part-6-18a95673a630?source=collection_archive---------11-----------------------#2021-08-01</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="b3cd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这一部分，我们将使用<strong class="ih hj"> <em class="jd">枚举类</em> </strong>来使代码更加优化。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es je"><img src="../Images/9d0f944900669cde6eaf70c87ac69c0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/0*D59H71dbQ9D1N04T.png"/></div><figcaption class="jm jn et er es jo jp bd b be z dx">Java Enum</figcaption></figure><p id="2901" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">例如，我们在我们的步骤定义文件中传递API端点细节，这是不好的，您应该从任何其他集中式文件中驱动它，以便使用此add JSON的任何测试用例都应该从该文件中获取它，所以明天，如果资源中有什么变化，我们可以简单地在一个地方进行更改，所有测试用例都将自动更新。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es jq"><img src="../Images/da4e209bc08b89d4ca73c754c4b3e94e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qrZ6s7hbrJvkXaSLhJczmw.png"/></div></div><figcaption class="jm jn et er es jo jp bd b be z dx">Step Definition File</figcaption></figure><h1 id="5106" class="jv jw hi bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">java中的enum类是什么？</h1><p id="e07e" class="pw-post-body-paragraph if ig hi ih b ii kt ik il im ku io ip iq kv is it iu kw iw ix iy kx ja jb jc hb bi translated">Java枚举是一种特殊的Java类型，用于定义常量集合。更准确地说，Java枚举类型是一种特殊的Java类。枚举可以包含常量、方法等。</p><h1 id="044c" class="jv jw hi bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">为什么我们需要一个枚举类？</h1><p id="22c0" class="pw-post-body-paragraph if ig hi ih b ii kt ik il im ku io ip iq kv is it iu kw iw ix iy kx ja jb jc hb bi translated">假设一个电子商务应用程序有100个API，我们需要从一个文件中驱动，现在要调用每个API，我们必须创建相同数量的方法来返回API字符串，这样做我们必须编写大量的代码，这是绝对不推荐的。</p><p id="be1a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这就是enum的用武之地。在enum类中，您只需要定义一个驱动所有API字符串的方法。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es ky"><img src="../Images/a2b00006c80282dea37c3f8dae3e52c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Nx9RXT_95EoSQ9cj-ob2Uw.png"/></div></div><figcaption class="jm jn et er es jo jp bd b be z dx">Comparison of Java and Enum Class</figcaption></figure><h1 id="3147" class="jv jw hi bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">如何创建枚举类？</h1><p id="fdf7" class="pw-post-body-paragraph if ig hi ih b ii kt ik il im ku io ip iq kv is it iu kw iw ix iy kx ja jb jc hb bi translated">转到资源包，右键单击并创建一个名为API Resources的新类。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es kz"><img src="../Images/606fe923c5d70735c49f0c9e04726155.png" data-original-src="https://miro.medium.com/v2/resize:fit:1362/format:webp/1*9NkMAMukksanWYHBGVvcUg.png"/></div><figcaption class="jm jn et er es jo jp bd b be z dx">Resources Package</figcaption></figure><p id="5dcd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，在新的Java类窗口中提供名称，并单击Finish按钮。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es la"><img src="../Images/09657b5c97f094ae3111a742f9271129.png" data-original-src="https://miro.medium.com/v2/resize:fit:1056/format:webp/1*N35Hdhyh_G058QrWEeqexQ.png"/></div><figcaption class="jm jn et er es jo jp bd b be z dx">Java Class Window</figcaption></figure><p id="b723" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦创建了类，就需要用enum替换关键字class。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es lb"><img src="../Images/a6d274f5c14053f416b1513b2841cb15.png" data-original-src="https://miro.medium.com/v2/resize:fit:774/format:webp/1*n0pRBG0oqiKq40VQ-bAS1w.png"/></div><figcaption class="jm jn et er es jo jp bd b be z dx">Enum Class</figcaption></figure><p id="a298" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，让我们声明我们在步骤定义文件中使用的Add Book API。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es lc"><img src="../Images/803ed0d61b749019d31e542c41893509.png" data-original-src="https://miro.medium.com/v2/resize:fit:954/format:webp/1*t4J0sahpCJTwYyfMXon3Cg.png"/></div><figcaption class="jm jn et er es jo jp bd b be z dx">Enum Class</figcaption></figure><p id="9205" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Enum类将把它当作一个方法，它将返回我们为API提供的字符串</p><p id="2d2c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">同样，您可以声明多个常数，并用逗号分隔这些常数。在我们的例子中，我们可以添加Get Book和Delete Book API。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es ld"><img src="../Images/1ae24ad61c3472ecd7388d3ab3baec4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1058/format:webp/1*CVFZ8sCZPAZTJiCoOKceLQ.png"/></div><figcaption class="jm jn et er es jo jp bd b be z dx">Enum Class</figcaption></figure><p id="05f5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，将鼠标悬停在该方法上，它会要求您为该方法创建一个构造函数。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es la"><img src="../Images/467e77b39bb56a90d2b34d01cc9c3ea9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1056/format:webp/1*wtGjnL__ISeJdP1Z2tevmQ.png"/></div><figcaption class="jm jn et er es jo jp bd b be z dx">Enum Class</figcaption></figure><p id="3ceb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">单击create constructor ' API resource(String)'它将为您创建带有字符串参数的构造函数，以匹配这些方法。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es le"><img src="../Images/3635163dc27ad07e30632e6134814ccd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1164/format:webp/1*n0nb6hTz1ocn83T2FgZyTQ.png"/></div><figcaption class="jm jn et er es jo jp bd b be z dx">Enum Class</figcaption></figure><p id="6348" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们需要用<strong class="ih hj"> <em class="jd"> when </em> </strong>步骤在特征文件中做一些更改，这样它可以通过简单地更改双引号下的名称来驱动API字符串。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es lf"><img src="../Images/089f84cf9698b001e4d909c10363143d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sGdYzXZskXavkQqlEPb3GA.png"/></div></div><figcaption class="jm jn et er es jo jp bd b be z dx">Feature File</figcaption></figure><p id="efb9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们需要在步骤定义文件中调用Add Book API方法，但要这样做，我们首先需要在Enum类中创建一个方法，该方法将返回带有名为resource的变量的API字符串，我们需要将全局变量分配给局部变量<em class="jd"> resource </em>。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es lg"><img src="../Images/09dadb7f9190bbbe8d77d7a532dc7761.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/1*hAQE8_IhBo_Nne4SUEcmyQ.png"/></div><figcaption class="jm jn et er es jo jp bd b be z dx">Enum Class</figcaption></figure><p id="a69b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们需要通过创建Enum类的对象来调用步骤定义文件中的API字符串。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es lh"><img src="../Images/ada8397e3b2fda36e8e7354bbab5cc4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*89plFxZZWy0cFOAxycHRSQ.png"/></div></div><figcaption class="jm jn et er es jo jp bd b be z dx">Step Definition Class</figcaption></figure><p id="24f7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们可以用我们在post-call中提供的端点/资源来替换它，我们还将在控制台输出中打印它，以验证哪个方法是从Enum类调用的。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es li"><img src="../Images/e96373e9342c707a6e82c2881b19c104.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ttzEmfiju6o2s1LU-6Mpdg.png"/></div></div><figcaption class="jm jn et er es jo jp bd b be z dx">Step Definition Class</figcaption></figure><p id="922c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们用Test Runner类运行测试用例，看看它是否运行良好。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es lj"><img src="../Images/4620e2683d9f33d3c01549c9e66b88df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XBRbiMP7oeVvM9WniSbuPQ.png"/></div></div><figcaption class="jm jn et er es jo jp bd b be z dx">Console Output</figcaption></figure><p id="f0c8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从控制台输出中，您可以看到它要求我们修改步骤定义文件中的代码。因此，让我们用控制台中显示的代码替换我们的代码。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es lk"><img src="../Images/e7577952af8ed349246e938ed97f1b8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mLzlJ-HNxCTxVXWejfMkbw.png"/></div></div><figcaption class="jm jn et er es jo jp bd b be z dx">Step Definition Class</figcaption></figure><p id="16ab" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你也可以根据你的理解改变变量名，正如你看到的，我给了<em class="jd">资源</em>和<em class="jd">方法</em>，但是你可以给任何东西。</p><p id="2462" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们将使步骤定义类代码也适用于HTTP方法。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es ll"><img src="../Images/eb5e1a1345f501d0876b25d47613b6a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CO0RNIWxVES-3SqjBPTxjw.png"/></div></div><figcaption class="jm jn et er es jo jp bd b be z dx">Step Definition Class</figcaption></figure><p id="b909" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您注意到您已经使步骤定义类如此通用，以至于它可以接受任何HTTP方法和资源，这将使这个类比以前更强大。</p><p id="06f0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了验证我们开发的代码是否运行良好，让我们从特性文件中调用Delete Place API并检查日志文件。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es lm"><img src="../Images/ed4e24493ffa481caadc29a6abb03aef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Trzw_ncSH9hlN5Owv1OIOA.png"/></div></div><figcaption class="jm jn et er es jo jp bd b be z dx">Feature File</figcaption></figure><p id="748d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们在控制台中检查一下，因为我们也在打印API资源方法，当然我们的测试会失败，因为我们没有提供Delete方法的步骤。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es lj"><img src="../Images/eb82ef2ef745b0d324b805294b8433e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VySLVlc81BrkmMAOz2fJJw.png"/></div></div><figcaption class="jm jn et er es jo jp bd b be z dx">Console Window</figcaption></figure><p id="d7a2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此外，我们还可以查看日志文件，了解后端到底发生了什么。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es ln"><img src="../Images/9c15ce67c0ea5ead1ad49880c1f625e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sCw631qacUr76CXHViIlhA.png"/></div></div><figcaption class="jm jn et er es jo jp bd b be z dx">Log File</figcaption></figure><p id="7629" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，我们能够通过特性文件调用删除图书API，这意味着我们的代码正在工作，现在让我们将它改回添加图书API以调用添加图书URL。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es lo"><img src="../Images/52b04c6a0db5c981a66ad08e2d43bff5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TJYR_UB7x8F5gGjW_jYfXw.png"/></div></div><figcaption class="jm jn et er es jo jp bd b be z dx">Feature File</figcaption></figure><p id="f4da" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，让我们再运行一次测试，以确保一切正常。出于我上面提到的原因，请确保您更改了ISBN和过道信息。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es lj"><img src="../Images/53b66968b4f3cbe0dc526f5159523753.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zWLvA9dJB8g2GTKPTnigKw.png"/></div></div><figcaption class="jm jn et er es jo jp bd b be z dx">Console Window</figcaption></figure><p id="704c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此外，让我们检查日志文件，看是否调用了添加请求。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es lp"><img src="../Images/94aa4ac54d879574393bb1d211c79a4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p-opGvCKKMHOEPBU8PUnJg.png"/></div></div><figcaption class="jm jn et er es jo jp bd b be z dx">Log Details File</figcaption></figure><p id="965d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">好了，这就是关于枚举类以及如何通过它优化代码的全部内容。</p><p id="e135" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">谢谢你坚持到现在。</p><p id="fcee" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae lq" href="https://github.com/Premsing/LibraryAPIFramework" rel="noopener ugc nofollow" target="_blank"> <em class="jd">这里的</em> </a> <em class="jd">是到GitHub资源库下载代码的链接。</em></p><p id="13a6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你不确定我们在这里做什么，那么去看看我对<a class="ae lq" rel="noopener" href="/@prathore28647/building-cucumber-bdd-api-testing-framework-from-scratch-part-1-add657f9c290"> Cucumber </a>、<a class="ae lq" rel="noopener" href="/@prathore28647/what-is-maven-f3422233939"> Maven </a>的看法，然后从头开始<a class="ae lq" rel="noopener" href="/@prathore28647/building-cucumber-bdd-api-testing-framework-from-scratch-part-1-add657f9c290">构建API测试框架</a>。</p><p id="728e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">再见🍻</p></div></div>    
</body>
</html>