<html>
<head>
<title>The Pipe Operator Explained</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">管道操作员解释道</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/the-pipe-operator-explained-cbd41e23775a?source=collection_archive---------7-----------------------#2022-03-15">https://medium.com/geekculture/the-pipe-operator-explained-cbd41e23775a?source=collection_archive---------7-----------------------#2022-03-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="f231" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">了解如何改善您的脚本编写体验</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/523b00c1705b8c2e22fd826ab5e329cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8rhqrXT3wtVKT5Ik"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Photo by <a class="ae jn" href="https://unsplash.com/@sigmund?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Sigmund</a> on <a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="de64" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">计算机语言有许多运算符，可以用来对变量执行操作。所有计算机语言中都有标准的代数运算符。然而，在shell脚本中，有一个独特的操作符叫做管道操作符。很多初学shell脚本的人听说过这个操作符，但是在他们创建脚本的时候从来没有想过使用它。</p><p id="ad70" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">下面是管道操作员的解释。</p><h2 id="082e" class="kk kl hi bd km kn ko kp kq kr ks kt ku jx kv kw kx kb ky kz la kf lb lc ld le bi translated">什么是管道操作员？</h2><p id="f309" class="pw-post-body-paragraph jo jp hi jq b jr lf ij jt ju lg im jw jx lh jz ka kb li kd ke kf lj kh ki kj hb bi translated">管道运算符是一个接口，它允许您从一个命令获取标准输出，并将其输入到另一个命令的标准输入中。</p><h2 id="c2fd" class="kk kl hi bd km kn ko kp kq kr ks kt ku jx kv kw kx kb ky kz la kf lb lc ld le bi translated">管道操作符有哪些操作系统外壳脚本？</h2><p id="2ddc" class="pw-post-body-paragraph jo jp hi jq b jr lf ij jt ju lg im jw jx lh jz ka kb li kd ke kf lj kh ki kj hb bi translated">Unix操作系统的目标之一是软件的模块化。以前，程序是单一的，每个人用不同的编程语言在不同的软件上编写相同的实现。然后人们开始怀疑程序是否可以重用相同的实现。最终，图书馆被创建来解决这个问题。然后，人们开始问，进一步的模块化是否会发生在应用程序级别。所以Unix的创建者将管道添加到脚本特性集中，以实现程序的进一步模块化。</p><p id="fb6b" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">shell脚本的进一步迭代继续保持这一特性。Unix shells演变成了Linux和BSD shells。而Windows也复制了在他们的批处理脚本语言中运行的Unix管道。</p><h2 id="92ab" class="kk kl hi bd km kn ko kp kq kr ks kt ku jx kv kw kx kb ky kz la kf lb lc ld le bi translated">编程语言有管道吗？</h2><p id="f8b9" class="pw-post-body-paragraph jo jp hi jq b jr lf ij jt ju lg im jw jx lh jz ka kb li kd ke kf lj kh ki kj hb bi translated">管道概念不仅仅是一个脚本特性。它们也存在于编程语言中。例如，在Java中，你有<a class="ae jn" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html" rel="noopener ugc nofollow" target="_blank">流API </a>。API允许您在功能上操作数组的状态。您可以使用reduce和filter命令来减少存储在数组中的信息量。或者使用map命令增加数组中存储的信息量。</p><p id="0bef" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">几乎每一种现代流行语言都有一个功能接口，允许你传递信息。这里有一些语言，但不限于，有类似的管道功能。</p><ul class=""><li id="6f27" class="lk ll hi jq b jr js ju jv jx lm kb ln kf lo kj lp lq lr ls bi translated"><a class="ae jn" rel="noopener" href="/swlh/doing-it-the-functional-way-in-c-5c392bbdd46a"> C++ </a></li><li id="a851" class="lk ll hi jq b jr lt ju lu jx lv kb lw kf lx kj lp lq lr ls bi translated"><a class="ae jn" href="https://www.geeksforgeeks.org/functional-interfaces-java/" rel="noopener ugc nofollow" target="_blank"> Java </a></li><li id="b690" class="lk ll hi jq b jr lt ju lu jx lv kb lw kf lx kj lp lq lr ls bi translated">哈斯克尔<a class="ae jn" href="https://wiki.haskell.org/Functional_programming" rel="noopener ugc nofollow" target="_blank"/></li><li id="12b1" class="lk ll hi jq b jr lt ju lu jx lv kb lw kf lx kj lp lq lr ls bi translated">等等</li></ul><h2 id="fbad" class="kk kl hi bd km kn ko kp kq kr ks kt ku jx kv kw kx kb ky kz la kf lb lc ld le bi translated">如何使用管道？</h2><pre class="iy iz ja jb fd ly lz ma mb aw mc bi"><span id="c504" class="kk kl hi lz b fi md me l mf mg">command_0 | command_1 | ... | command_n</span></pre><p id="3495" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">你正在为信息的流动创造一个管道。随着您添加更多命令，您可以添加更多信息或减少信息量。最后，您会得到满足预期条件的最终文本产品。</p><h2 id="6db6" class="kk kl hi bd km kn ko kp kq kr ks kt ku jx kv kw kx kb ky kz la kf lb lc ld le bi translated">你为什么想用管子？</h2><p id="c81d" class="pw-post-body-paragraph jo jp hi jq b jr lf ij jt ju lg im jw jx lh jz ka kb li kd ke kf lj kh ki kj hb bi translated"><strong class="jq hj">更容易调试</strong></p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mh"><img src="../Images/048dc038d2b3c89eaa090eb3f9935c27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_GY8IRE3axlfCAy8"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Photo by <a class="ae jn" href="https://unsplash.com/@clemhlrdt?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Clément Hélardot</a> on <a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="30f3" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><a class="ae jn" href="https://www.ionos.com/digitalguide/websites/web-development/imperative-programming/" rel="noopener ugc nofollow" target="_blank">在命令式编程中，你会有很多动作可能修改同一个状态。这使得很难确定是哪种行为导致了州政府的问题。</a> <a class="ae jn" href="https://www.ionos.com/digitalguide/websites/web-development/declarative-programming/" rel="noopener ugc nofollow" target="_blank">然而，在声明式编程中，你会有许多动作会有相应的状态。您将知道哪个操作会导致不正确的状态更改，从而可以做出相应的更改来解决问题。</a></p><p id="0481" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">更容易阅读</strong></p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mi"><img src="../Images/80791902c8f406c7b453fc508395ce41.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*IIS0PCAcGDBY_kzO"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Photo by <a class="ae jn" href="https://unsplash.com/@the_modern_life_mrs?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Heather Ford</a> on <a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="a066" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">理解函数式编程的逻辑要容易得多。这就像按顺序阅读句子一样。一个有用的类比就像一本烹饪书。命令式编程就像得到一步一步的指令去吃饭。而声明式编程(如函数式编程)就像获取食物的配料和描述。一步一步的指导比配料和膳食描述复杂得多。</p><p id="c658" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">并行化</strong></p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mj"><img src="../Images/c04c21f8fdf0b543439c8e68d66cf137.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*KRLFa8wdunrSRP69"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Photo by <a class="ae jn" href="https://unsplash.com/@tvick?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Taylor Vick</a> on <a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="0316" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">程序生成的状态是不可变的。因此每个处理单元将具有该状态的唯一原始副本。<a class="ae jn" href="https://www.pythontutorial.net/advanced-python/python-threading-lock/" rel="noopener ugc nofollow" target="_blank">你不需要使用任何声明性的方法来执行代码的并行化，比如线程锁定等。</a>使用正确的架构将代码并行化会很容易。</p><p id="a4ec" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">您可以通过将一系列作业放入<a class="ae jn" href="https://www.gnu.org/software/parallel/" rel="noopener ugc nofollow" target="_blank"> GNU Parallel来轻松地并行化您的代码。</a>例如，假设您想要使用一个For循环来运行一组作业。有了这个程序，你可以同时运行每项工作，并重新组合输出，以节省时间。这种技术被超级计算机用来加速多个作业的完成。</p><p id="7d78" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><a class="ae jn" rel="noopener" href="/geekculture/distributed-computing-for-beginners-f4116adf609d">你可以阅读我的博文，了解管道等函数式编程特性如何使分布式计算的并行化变得更加容易。</a></p><h2 id="5e5b" class="kk kl hi bd km kn ko kp kq kr ks kt ku jx kv kw kx kb ky kz la kf lb lc ld le bi translated">你为什么不想用烟斗？</h2><p id="0f1c" class="pw-post-body-paragraph jo jp hi jq b jr lf ij jt ju lg im jw jx lh jz ka kb li kd ke kf lj kh ki kj hb bi translated"><strong class="jq hj">更高的内存消耗</strong></p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mh"><img src="../Images/121d4491bb98cc4778b43fac40d62962.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*sfd1hMFZpM9n5PUk"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Photo by <a class="ae jn" href="https://unsplash.com/@luangjokaj?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Luan Gjokaj</a> on <a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="7777" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><a class="ae jn" href="https://stackoverflow.com/questions/4522304/does-functional-programming-take-up-more-memory" rel="noopener ugc nofollow" target="_blank">国家的重复是一把双刃剑。对于每个动作，都会产生一个新的状态。这当然会增加分配的内存量。但是，对于现代语言来说，这应该不是问题，因为它们会通过垃圾收集器自动删除未使用的状态。</a></p><h2 id="57ae" class="kk kl hi bd km kn ko kp kq kr ks kt ku jx kv kw kx kb ky kz la kf lb lc ld le bi translated">有用的管道示例</h2><p id="8084" class="pw-post-body-paragraph jo jp hi jq b jr lf ij jt ju lg im jw jx lh jz ka kb li kd ke kf lj kh ki kj hb bi translated">下面是一些在Linux系统上使用shell脚本中的管道的例子。</p><p id="f706" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">快速运行一个目录下的可执行脚本</strong></p><p id="c802" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">有时你会有一堆需要运行的脚本保存在一个文件夹中。您可以运行以下命令来运行目录中的所有可执行脚本。</p><pre class="iy iz ja jb fd ly lz ma mb aw mc bi"><span id="86ab" class="kk kl hi lz b fi md me l mf mg">find "./" -name "*.sh" -type f -perm /a=x | xargs -L 1 bash</span></pre><ul class=""><li id="7529" class="lk ll hi jq b jr js ju jv jx lm kb ln kf lo kj lp lq lr ls bi translated">查找每个包含</li><li id="ae8f" class="lk ll hi jq b jr lt ju lu jx lv kb lw kf lx kj lp lq lr ls bi translated">运行这些文件</li></ul><p id="7dd5" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">快速查杀一组进程</strong></p><p id="6140" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">诸如脚本之类的进程可以产生一组进程。假设您有一个脚本，它从一个脚本运行大量备份，但您想要取消该脚本。您可以运行如下所示的命令。</p><pre class="iy iz ja jb fd ly lz ma mb aw mc bi"><span id="7279" class="kk kl hi lz b fi md me l mf mg">ps aux | grep rsync | awk '{ print $2 }' | xargs -L 1 kill</span></pre><ul class=""><li id="f405" class="lk ll hi jq b jr js ju jv jx lm kb ln kf lo kj lp lq lr ls bi translated">过滤掉不包含rsync的进程</li><li id="1ff0" class="lk ll hi jq b jr lt ju lu jx lv kb lw kf lx kj lp lq lr ls bi translated">取出所有的处理ID</li><li id="dfe6" class="lk ll hi jq b jr lt ju lu jx lv kb lw kf lx kj lp lq lr ls bi translated">参数化下一个命令的输出</li><li id="bf08" class="lk ll hi jq b jr lt ju lu jx lv kb lw kf lx kj lp lq lr ls bi translated">取消所有进程</li></ul><p id="8a23" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">当然你可以运行类似</p><pre class="iy iz ja jb fd ly lz ma mb aw mc bi"><span id="b461" class="kk kl hi lz b fi md me l mf mg">killall rsync </span></pre><p id="27c4" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">但是，您不能选择性地终止任务，因为该命令会终止所有rsync任务。</p><p id="a05c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">IT和工程领域是快速发展的领域。跟不上意味着你将被落在后面。跟上的最好方法是保持最新的新闻和教育内容。<a class="ae jn" rel="noopener" href="/subscribe/@dretechtips">订阅免费电子邮件列表，将您的职业生涯提升10倍。</a></p><p id="f6a1" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">加入我们，因为50多名想要快速跟踪其职业生涯和知识基础的人已经注册。</strong></p><p id="c848" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">相关内容</strong></p><ul class=""><li id="04f6" class="lk ll hi jq b jr js ju jv jx lm kb ln kf lo kj lp lq lr ls bi translated"><a class="ae jn" rel="noopener" href="/geekculture/unix-file-system-explained-9d3554de9d46">Unix文件系统讲解</a></li><li id="6c04" class="lk ll hi jq b jr lt ju lu jx lv kb lw kf lx kj lp lq lr ls bi translated"><a class="ae jn" rel="noopener" href="/@drechang/how-to-reset-the-root-password-on-any-linux-os-7b2075eed7dc">如何在任何Linux操作系统上重置root密码？</a></li><li id="9b26" class="lk ll hi jq b jr lt ju lu jx lv kb lw kf lx kj lp lq lr ls bi translated"><a class="ae jn" rel="noopener" href="/geekculture/the-beginners-guide-to-the-linux-kernel-29743b1a2daf">Linux内核初学者指南</a></li></ul></div></div>    
</body>
</html>