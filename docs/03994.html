<html>
<head>
<title>How To Make A Next JS Blog With Markdown And TypeScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Markdown和TypeScript制作下一个JS博客</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/how-to-make-a-next-js-blog-with-markdown-and-typescript-1624a54f1b9e?source=collection_archive---------3-----------------------#2021-06-19">https://medium.com/geekculture/how-to-make-a-next-js-blog-with-markdown-and-typescript-1624a54f1b9e?source=collection_archive---------3-----------------------#2021-06-19</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="80dd" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">使用next js、markdown和typescript创建服务器端呈现的博客</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/cbc7f3e618956849ffd4d08e58a52294.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*wmXQfUuyN2IhVDg3"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Next js blog with markdown and typescript</figcaption></figure><h1 id="f407" class="jn jo hi bd jp jq jr js jt ju jv jw jx io jy ip jz ir ka is kb iu kc iv kd ke bi translated">设置</h1><p id="9014" class="pw-post-body-paragraph kf kg hi kh b ki kj ij kk kl km im kn ko kp kq kr ks kt ku kv kw kx ky kz la hb bi translated">这篇中级教程将向你展示如何用markdown和typescript制作下一个js博客。下一个js是一个React框架，它将允许你进行SSR(服务器端渲染)，提高它的SEO性能。SEO优化将让你在谷歌搜索上增加你的社交存在。无论你是学生、自由职业者还是web 2.0开发人员，这都是成为专业web开发人员的必备技能。</p><p id="5cbf" class="pw-post-body-paragraph kf kg hi kh b ki lb ij kk kl lc im kn ko ld kq kr ks le ku kv kw lf ky kz la hb bi translated">启动项目最简单的方法是使用create next app typescript样板文件。</p><pre class="iy iz ja jb fd lg lh li lj aw lk bi"><span id="e290" class="ll jo hi lh b fi lm ln l lo lp"># with yarn<br/>yarn create next-app blog --typescript</span><span id="e659" class="ll jo hi lh b fi lq ln l lo lp"># with npm<br/>npx create-next-app blog --ts</span></pre><p id="77a4" class="pw-post-body-paragraph kf kg hi kh b ki lb ij kk kl lc im kn ko ld kq kr ks le ku kv kw lf ky kz la hb bi translated">之后，您将需要安装所有相关的依赖项。</p><p id="d0e1" class="pw-post-body-paragraph kf kg hi kh b ki lb ij kk kl lc im kn ko ld kq kr ks le ku kv kw lf ky kz la hb bi translated">灰质用于读取元数据，如缩略图、描述和标题。react-markdown用于将markdown呈现为HTML。react-syntax-highlighter用于向呈现的markdown中的代码块添加语法突出显示。</p><pre class="iy iz ja jb fd lg lh li lj aw lk bi"><span id="9e37" class="ll jo hi lh b fi lm ln l lo lp"># with yarn<br/>yarn add gray-matter react-markdown react-syntax-highlighter<br/>yarn add <a class="ae lr" href="http://twitter.com/types/react-syntax-highlighter" rel="noopener ugc nofollow" target="_blank">@types/react-syntax-highlighter</a> --dev</span><span id="7828" class="ll jo hi lh b fi lq ln l lo lp"># with npm<br/>npm install gray-matter react-markdown react-syntax-highlighter<br/>npm install  <a class="ae lr" href="http://twitter.com/types/react-syntax-highlighter" rel="noopener ugc nofollow" target="_blank">@types/react-syntax-highlighter</a> --save-dev</span></pre><p id="6a70" class="pw-post-body-paragraph kf kg hi kh b ki lb ij kk kl lc im kn ko ld kq kr ks le ku kv kw lf ky kz la hb bi translated">删除页面/api目录，因为不需要它</p><h1 id="07d3" class="jn jo hi bd jp jq jr js jt ju jv jw jx io jy ip jz ir ka is kb iu kc iv kd ke bi translated">创建文章</h1><p id="ad9b" class="pw-post-body-paragraph kf kg hi kh b ki kj ij kk kl km im kn ko kp kq kr ks kt ku kv kw kx ky kz la hb bi translated">用一些模板降价文件创建一个名为uploads的目录。元数据由3个破折号包围，并且具有标题、描述和缩略图。下面是一篇文章的例子。该文件的名称将是URL slug。</p><pre class="iy iz ja jb fd lg lh li lj aw lk bi"><span id="e566" class="ll jo hi lh b fi lm ln l lo lp">---<br/>title: Eget Duis Sem Tincidunt Ac Ullamcorper Et Turpis Magna Viverra</span><span id="a7ff" class="ll jo hi lh b fi lq ln l lo lp">description: risus eu lectus a consectetur aliquam nullam enim tellus urna nunc sagittis aenean aliquam ullamcorper consectetur dictumst sit, placerat eget lobortis eget elit nibh blandit scelerisque consectetur condimentum diam tempor. nisl erat semper gravida tempor aliquam suscipit a viverra molestie sit porta cras ultricies, fermentum habitasse sit semper cum eu eget lacus purus viverra cursus porttitor nisi nisl.</span><span id="29d0" class="ll jo hi lh b fi lq ln l lo lp">thumbnail: <a class="ae lr" href="https://blogthing-strapi.cleggacus.com/uploads/0_d65573c0b9.jpg" rel="noopener ugc nofollow" target="_blank">https://blogthing-strapi.cleggacus.com/uploads/0_d65573c0b9.jpg</a><br/>---</span><span id="847d" class="ll jo hi lh b fi lq ln l lo lp"><strong class="lh hj"># In Eu Sapien Tellus Id<br/>## Ullamcorper Elit Semper Ultricies Morbi</strong></span><span id="c64b" class="ll jo hi lh b fi lq ln l lo lp">sit at blandit cras id eu congue et platea massa lectus netus vulputate suspendisse sed, risus habitasse at purus nibh viverra elementum viverra arcu id vulputate vel. ipsum tincidunt lorem habitant dis nulla consectetur tincidunt iaculis adipiscing erat enim, ultrices etiam mollis volutpat est vestibulum aliquam lorem elit natoque metus dui est elit. mollis sit tincidunt mauris porttitor pellentesque at nisl pulvinar tortor egestas habitant hac, metus blandit scelerisque in aliquet tellus enim viverra sed eu neque placerat lobortis a. laoreet tempus posuere magna amet nec eget vitae pretium enim magnis, cras sem eget amet id risus pellentesque auctor quis nunc tincidunt tortor massa nisl velit tortor. a volutpat malesuada nisi habitasse id volutpat nibh volutpat suspendisse nunc justo elementum ac nec, elementum pulvinar enim sociis nunc eleifend malesuada platea nunc posuere aliquet ipsum.</span><span id="8cba" class="ll jo hi lh b fi lq ln l lo lp">```ts<br/>function someFunc(<em class="ls">thing</em>: <em class="ls">string</em>){<br/>    const thing2 = thing[0];<br/>    return thing2;<br/>}<br/>```</span></pre><h1 id="9266" class="jn jo hi bd jp jq jr js jt ju jv jw jx io jy ip jz ir ka is kb iu kc iv kd ke bi translated">接口</h1><p id="8e93" class="pw-post-body-paragraph kf kg hi kh b ki kj ij kk kl km im kn ko kp kq kr ks kt ku kv kw kx ky kz la hb bi translated">在添加代码之前，最好创建一个接口目录并添加一些接口，这样我们就知道所获取的数据的结构。这些接口将利用一篇文章的元数据和信息遵循一个固定的结构。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lt lu l"/></div></figure><h1 id="89b0" class="jn jo hi bd jp jq jr js jt ju jv jw jx io jy ip jz ir ka is kb iu kc iv kd ke bi translated">成分</h1><p id="c0b1" class="pw-post-body-paragraph kf kg hi kh b ki kj ij kk kl km im kn ko kp kq kr ks kt ku kv kw kx ky kz la hb bi translated">我们现在可以创建一个组件目录来存储项目中使用的所有组件。这将包括一个card组件和一个markdown组件，它们将保存我们的代码，以便用语法高亮显示来呈现我们的markdown。</p><h2 id="2752" class="ll jo hi bd jp lv lw lx jt ly lz ma jx ko mb mc jz ks md me kb kw mf mg kd mh bi translated">卡片组件</h2><p id="2481" class="pw-post-body-paragraph kf kg hi kh b ki kj ij kk kl km im kn ko kp kq kr ks kt ku kv kw kx ky kz la hb bi translated">卡组件将接受ArticleMeta类型的属性article。这是在接口IProps中声明的。</p><p id="50b1" class="pw-post-body-paragraph kf kg hi kh b ki lb ij kk kl lc im kn ko ld kq kr ks le ku kv kw lf ky kz la hb bi translated">components/card.tsx</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lt lu l"/></div></figure><p id="1925" class="pw-post-body-paragraph kf kg hi kh b ki lb ij kk kl lc im kn ko ld kq kr ks le ku kv kw lf ky kz la hb bi translated">卡片被设计成可以放在用CSS flex制作的网格中。</p><p id="7ab3" class="pw-post-body-paragraph kf kg hi kh b ki lb ij kk kl lc im kn ko ld kq kr ks le ku kv kw lf ky kz la hb bi translated">style/card . module . CSS</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lt lu l"/></div></figure><h2 id="bf36" class="ll jo hi bd jp lv lw lx jt ly lz ma jx ko mb mc jz ks md me kb kw mf mg kd mh bi translated">降价成分</h2><p id="b028" class="pw-post-body-paragraph kf kg hi kh b ki kj ij kk kl km im kn ko kp kq kr ks kt ku kv kw kx ky kz la hb bi translated">降价组件将获取适当的内容。内容是保存要呈现的降价代码的字符串。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lt lu l"/></div></figure><p id="5a24" class="pw-post-body-paragraph kf kg hi kh b ki lb ij kk kl lc im kn ko ld kq kr ks le ku kv kw lf ky kz la hb bi translated">为了设置markdown的样式，它被一个div标签包围，标签的类名是markdown-body。从<a class="ae lr" href="https://github.com/cleggacus/next-blog-medium-tutorial/blob/master/styles/markdown.css" rel="noopener ugc nofollow" target="_blank">https://github . com/cleggacus/next-blog-medium-tutorial/blob/master/styles/markdown.css</a>中复制CSS文件并保存为styles/markdown . CSS</p><p id="6532" class="pw-post-body-paragraph kf kg hi kh b ki lb ij kk kl lc im kn ko ld kq kr ks le ku kv kw lf ky kz la hb bi translated">将下面一行添加到your _app.tsx文件中，以导入CSS文件。</p><pre class="iy iz ja jb fd lg lh li lj aw lk bi"><span id="5300" class="ll jo hi lh b fi lm ln l lo lp">import '../styles/markdown.css'</span></pre><h1 id="148a" class="jn jo hi bd jp jq jr js jt ju jv jw jx io jy ip jz ir ka is kb iu kc iv kd ke bi translated">页</h1><p id="0802" class="pw-post-body-paragraph kf kg hi kh b ki kj ij kk kl km im kn ko kp kq kr ks kt ku kv kw kx ky kz la hb bi translated">有2页是需要的:一个索引页和一篇文章页。索引页将显示一个网格中的所有文章，文章页将显示文章的所有内容。</p><h2 id="a953" class="ll jo hi bd jp lv lw lx jt ly lz ma jx ko mb mc jz ks md me kb kw mf mg kd mh bi translated">索引页</h2><p id="8ae5" class="pw-post-body-paragraph kf kg hi kh b ki kj ij kk kl km im kn ko kp kq kr ks kt ku kv kw kx ky kz la hb bi translated">从删除pages/index.tsx中的所有内容开始。</p><p id="aaac" class="pw-post-body-paragraph kf kg hi kh b ki lb ij kk kl lc im kn ko ld kq kr ks le ku kv kw lf ky kz la hb bi translated">商品被传递到主页组件并映射到卡组件。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lt lu l"/></div></figure><p id="3ae4" class="pw-post-body-paragraph kf kg hi kh b ki lb ij kk kl lc im kn ko ld kq kr ks le ku kv kw lf ky kz la hb bi translated">然后我们可以用getStaticProps获取文章。Get static props是一个异步函数，它将使用从该函数返回的获取数据静态生成页面。</p><p id="cbba" class="pw-post-body-paragraph kf kg hi kh b ki lb ij kk kl lc im kn ko ld kq kr ks le ku kv kw lf ky kz la hb bi translated">readdirSync("uploads ")用于获取uploads目录中所有文件的数组。</p><pre class="iy iz ja jb fd lg lh li lj aw lk bi"><span id="835e" class="ll jo hi lh b fi lm ln l lo lp">const files = fs.readdirSync("uploads");</span></pre><p id="d524" class="pw-post-body-paragraph kf kg hi kh b ki lb ij kk kl lc im kn ko ld kq kr ks le ku kv kw lf ky kz la hb bi translated">然后这些文件被读取并映射到一个ArticleMeta数组。使用readFileSync读取文件，并将其转换为字符串。</p><pre class="iy iz ja jb fd lg lh li lj aw lk bi"><span id="ab35" class="ll jo hi lh b fi lm ln l lo lp">const data = fs.readFileSync(`uploads/${file}`).toString();</span></pre><p id="d608" class="pw-post-body-paragraph kf kg hi kh b ki lb ij kk kl lc im kn ko ld kq kr ks le ku kv kw lf ky kz la hb bi translated">物质(字符串)。数据将返回降价的元数据。然后通过在“.”处分裂来产生废料char并获取索引0处的字符串。这将删除。md '扩展名的文件名。</p><pre class="iy iz ja jb fd lg lh li lj aw lk bi"><span id="4c70" class="ll jo hi lh b fi lm ln l lo lp">return {<br/>    ...matter(data).data,<br/>    slug: file.split('.')[0]<br/>}</span></pre><p id="fd81" class="pw-post-body-paragraph kf kg hi kh b ki lb ij kk kl lc im kn ko ld kq kr ks le ku kv kw lf ky kz la hb bi translated">getStaticProps的完整代码如下。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lt lu l"/></div></figure><p id="a287" class="pw-post-body-paragraph kf kg hi kh b ki lb ij kk kl lc im kn ko ld kq kr ks le ku kv kw lf ky kz la hb bi translated">最终的index.tsx文件如下面的代码所示</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lt lu l"/></div></figure><p id="0d9b" class="pw-post-body-paragraph kf kg hi kh b ki lb ij kk kl lc im kn ko ld kq kr ks le ku kv kw lf ky kz la hb bi translated">样式/Home.module.scss</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lt lu l"/></div></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mi"><img src="../Images/9b343b2767766c3e0fd8934250ab3951.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hYOB9zq0nyfFnZv74U3Tqg.png"/></div></div></figure><h2 id="b581" class="ll jo hi bd jp lv lw lx jt ly lz ma jx ko mb mc jz ks md me kb kw mf mg kd mh bi translated">文章页面</h2><p id="d017" class="pw-post-body-paragraph kf kg hi kh b ki kj ij kk kl km im kn ko kp kq kr ks kt ku kv kw kx ky kz la hb bi translated">文章文件位于“pages/article/[slug]位置。tsx '</p><p id="c123" class="pw-post-body-paragraph kf kg hi kh b ki lb ij kk kl lc im kn ko ld kq kr ks le ku kv kw lf ky kz la hb bi translated">文章组件采用ArticleInfo类型的文章属性来创建文章页面。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lt lu l"/></div></figure><p id="0914" class="pw-post-body-paragraph kf kg hi kh b ki lb ij kk kl lc im kn ko ld kq kr ks le ku kv kw lf ky kz la hb bi translated">文件名中的方括号用于动态路由。为了静态地生成文章页面，使用了getStaticPaths函数。getStaticProps将返回包含有页面的所有路由的数组。</p><p id="b446" class="pw-post-body-paragraph kf kg hi kh b ki lb ij kk kl lc im kn ko ld kq kr ks le ku kv kw lf ky kz la hb bi translated">上传目录中的每个文件都映射到一个路由数组。路线是文章的鼻涕虫。slug的生成方式与它在主页上的生成方式相同。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lt lu l"/></div></figure><p id="ace4" class="pw-post-body-paragraph kf kg hi kh b ki lb ij kk kl lc im kn ko ld kq kr ks le ku kv kw lf ky kz la hb bi translated">生成路径后，每个页面都会被渲染。通过ctx参数获取该段塞。</p><pre class="iy iz ja jb fd lg lh li lj aw lk bi"><span id="d795" class="ll jo hi lh b fi lm ln l lo lp">const {slug} = ctx.params;</span></pre><p id="ec7d" class="pw-post-body-paragraph kf kg hi kh b ki lb ij kk kl lc im kn ko ld kq kr ks le ku kv kw lf ky kz la hb bi translated">文件名是通过添加'找到的。md '延伸回到段塞的末端。文件中的信息然后通过使用灰质进行分析。</p><p id="1dbf" class="pw-post-body-paragraph kf kg hi kh b ki lb ij kk kl lc im kn ko ld kq kr ks le ku kv kw lf ky kz la hb bi translated">物质(字符串)。数据将返回降价的元数据。</p><p id="9020" class="pw-post-body-paragraph kf kg hi kh b ki lb ij kk kl lc im kn ko ld kq kr ks le ku kv kw lf ky kz la hb bi translated">物质(字符串)。内容将返回减价的正文。</p><p id="fd52" class="pw-post-body-paragraph kf kg hi kh b ki lb ij kk kl lc im kn ko ld kq kr ks le ku kv kw lf ky kz la hb bi translated">数据和内容被添加到一个名为article的对象中，该对象的类型为ArticleInfo。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lt lu l"/></div></figure><p id="0670" class="pw-post-body-paragraph kf kg hi kh b ki lb ij kk kl lc im kn ko ld kq kr ks le ku kv kw lf ky kz la hb bi translated">pages/article/[slug]的完整代码。tsx在下面。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lt lu l"/></div></figure><p id="49a4" class="pw-post-body-paragraph kf kg hi kh b ki lb ij kk kl lc im kn ko ld kq kr ks le ku kv kw lf ky kz la hb bi translated">文章页面的CSS位于styles/aricle.css</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lt lu l"/></div></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mj"><img src="../Images/090e4a83ee202ba4f641465edace9455.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aDfE-xcCYky2Jdgo2DxJ5g.png"/></div></div></figure><p id="943f" class="pw-post-body-paragraph kf kg hi kh b ki lb ij kk kl lc im kn ko ld kq kr ks le ku kv kw lf ky kz la hb bi translated">总之，next js可以很容易地用作服务器端呈现react代码的方法。我们已经使用了getStaticProps和getStaticPaths来处理带有静态和动态路由的一般静态页面。</p><p id="9618" class="pw-post-body-paragraph kf kg hi kh b ki lb ij kk kl lc im kn ko ld kq kr ks le ku kv kw lf ky kz la hb bi translated">在<a class="ae lr" href="https://github.com/cleggacus/next-blog-medium-tutorial" rel="noopener ugc nofollow" target="_blank">https://github.com/cleggacus/next-blog-medium-tutorial</a>获得该项目的完整源代码</p></div></div>    
</body>
</html>