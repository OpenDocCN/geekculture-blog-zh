<html>
<head>
<title>Angular:3 ways you can pass templates from parent to child components to promote reusability</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Angular:有3种方法可以将模板从父组件传递到子组件，以提高可重用性</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/angular-3-ways-you-can-pass-templates-from-parent-to-child-components-to-promote-reusability-ba0a0bfb77c6?source=collection_archive---------0-----------------------#2022-06-15">https://medium.com/geekculture/angular-3-ways-you-can-pass-templates-from-parent-to-child-components-to-promote-reusability-ba0a0bfb77c6?source=collection_archive---------0-----------------------#2022-06-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="d149" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我在下面创建了一个小例子来演示我经常使用的从父组件到子组件传递模板的3种方法。这是非常基本的，应用程序中的实际场景可能要复杂得多。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/d387faa91fce0a7f784c092cc1f02d9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pyul0heIySrumrVdIJmmpw.png"/></div></div></figure><p id="61d8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">被引导的<strong class="ih hj"> AppComponent </strong>拥有3个子组件:<strong class="ih hj"> ChildAComponent，ChildBComponent，ChildCComponent </strong></p><p id="5e36" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">每个组件演示了一种将模板从父组件传递到子组件的方法。</p><ol class=""><li id="695d" class="jp jq hi ih b ii ij im in iq jr iu js iy jt jc ju jv jw jx bi translated"><strong class="ih hj">使用@Input()属性绑定传递模板。</strong></li></ol><p id="4ea2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正如您将数据从父组件传递到子组件一样，您也可以使用属性绑定传递模板引用，并在子组件中轻松地访问它们。</p><p id="f6ca" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">由于<strong class="ih hj"> AppComponent模板</strong>包含了所有3种方法，为了避免混淆，我现在只向您展示第一种方法的要点。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="jy jz l"/></div></figure><p id="227a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们已经创建了一个模板<strong class="ih hj"> #temp </strong>，它接受一个局部变量<strong class="ih hj">数据。</strong><strong class="ih hj"/>这个局部变量数据的目的是在数据不同的父子组件中重用同一个模板。</p><p id="0603" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个<strong class="ih hj">数据</strong>被迭代以创建如下的多个盒子结构。<strong class="ih hj"> ChildAComponent </strong>是这个<strong class="ih hj">数据</strong>的来源。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/9e6527775b8eeb9ac4bb14b7845b5907.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kMr-cFbZk8qiaMxiX7yLLA.png"/></div></div><figcaption class="ka kb et er es kc kd bd b be z dx">Method1</figcaption></figure><p id="8bfd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正如你所看到的，我们已经通过属性绑定将模板引用<strong class="ih hj"> temp </strong>传递给了<strong class="ih hj"> ChildAComponent </strong>。</p><pre class="je jf jg jh fd ke kf kg kh aw ki bi"><span id="81d0" class="kj kk hi kf b fi kl km l kn ko">&lt;app-child-a <strong class="kf hj">[temp]=”temp”</strong>&gt; &lt;/app-child-a&gt;</span></pre><p id="705e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> ChildAComponent类:</strong>我们已经定义了包含模板引用的属性<strong class="ih hj"> @Input() temp </strong>，我们还定义了将在模板内部使用的<strong class="ih hj">数据</strong>来构建上面已经显示的多框结构。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="jy jz l"/></div></figure><p id="a185" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">childa component Template:</strong>正如您所看到的，我们已经将模板引用变量传递给了<strong class="ih hj"> ngTemplateOutlet </strong>并且将<strong class="ih hj">数据</strong>传递给了<strong class="ih hj">ngTemplateOutletContext</strong>以便在模板内部显示。</p><pre class="je jf jg jh fd ke kf kg kh aw ki bi"><span id="7b72" class="kj kk hi kf b fi kl km l kn ko">&lt;ng-container <br/><strong class="kf hj">[ngTemplateOutlet]=”temp” <br/>[ngTemplateOutletContext]=”{ data: data }”</strong><br/>&gt;&lt;/ng-container&gt;</span></pre><p id="c6e1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.<strong class="ih hj">使用内容投影传递模板。</strong></p><p id="0616" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面是<strong class="ih hj"> AppComponent模板</strong>的要点，它只显示了第二种方法。我已经用<strong class="ih hj">子组件</strong>演示了这个方法。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="jy jz l"/></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kp"><img src="../Images/65e8e721e0001eb6c0ebd05a048c243c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HDCNKbgR4DS2uFmMrhssuw.png"/></div></div><figcaption class="ka kb et er es kc kd bd b be z dx">Method2</figcaption></figure><p id="eca5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最终结果看起来如上。我们在&lt;app-child-b&gt;&lt;/app-child-b&gt;之间传递了一个引用为<strong class="ih hj"> temp2 </strong>的模板。模板的<strong class="ih hj">数据</strong>的来源是<strong class="ih hj">子组件</strong>。</p><p id="23a0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">请注意，将<ng-template>包含在<app-child-b>中并不限制其仅用于<strong class="ih hj">子组件。使用ngTemplateOutlet和ngTemplateOutletContext </strong>，可以在父AppComponent中的任何地方轻松重用相同的模板。</app-child-b></ng-template></p><p id="52dd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">子组件类:</strong></p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="jy jz l"/></div></figure><pre class="je jf jg jh fd ke kf kg kh aw ki bi"><span id="554c" class="kj kk hi kf b fi kl km l kn ko"><strong class="kf hj">@ContentChild('temp2') temp2: TemplateRef&lt;any&gt;;</strong></span></pre><p id="0d64" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们使用<strong class="ih hj"> @ContentChild() </strong>来访问投影内容，即&lt; ng-template &gt;。</p><p id="3470" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> ChildBComponent模板:</strong>这非常简单。只需将通过<strong class="ih hj"> @ContentChild() </strong>访问的模板引用<strong class="ih hj"> temp2 </strong>传递给<strong class="ih hj">ngtemplateetout</strong>并将模板中要显示的数据传递给<strong class="ih hj">ngtemplateeutletcontext</strong>。</p><pre class="je jf jg jh fd ke kf kg kh aw ki bi"><span id="2517" class="kj kk hi kf b fi kl km l kn ko">&lt;ng-container<br/><strong class="kf hj">[ngTemplateOutlet]="temp2"<br/>[ngTemplateOutletContext]="{ data: 'Its a pretty template' }"</strong><br/>&gt;&lt;/ng-container&gt;</span></pre><p id="491b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.<strong class="ih hj">使用内容投影传递模板和&lt; ng-content &gt; </strong></p><p id="ebc9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以上两种方法通常可以解决大多数用例。</p><p id="c52a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第三种方法也使用内容投影，但是这里的区别是我不会将包装在<ng-template> </ng-template>中的html从父组件传递到子组件。相反，我会直接将html从父组件传递到子组件。</p><p id="c2f4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们看看这是如何工作的。</p><p id="5c13" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面是<strong class="ih hj"> AppComponent模板</strong>的要点，只显示第三种方法以避免混淆。<strong class="ih hj">子组件</strong>用于演示该方法。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="jy jz l"/></div></figure><p id="748f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如你所见，我们在<app-child-c>和</app-child-c>之间传递了一个<h4>和一个<button>标记。</button></h4></p><p id="a20c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们这里有两个选项:<strong class="ih hj">单槽投影和多槽投影</strong>。</p><p id="c6e9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在<strong class="ih hj">单槽投影中，</strong>将有单个&lt; ng-content &gt;元素，即单槽，所有内容，即&lt; h4 &gt;和&lt;按钮&gt;标签将被投影到这个单槽上，即&lt; ng-content &gt;元素</p><p id="5eb8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在<strong class="ih hj">多槽投影</strong>中，可以有不止一个&lt; ng-content &gt;元素，即多个槽，我们可以决定哪个内容将出现在子组件的哪个槽中。CSS选择器用于此目的。</p><p id="cc07" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了理解这是如何工作的，让我们首先检查一下<strong class="ih hj">子组件模板</strong>。</p><pre class="je jf jg jh fd ke kf kg kh aw ki bi"><span id="1812" class="kj kk hi kf b fi kl km l kn ko">&lt;ng-content <strong class="kf hj">select=”h4"</strong>&gt;&lt;/ng-content&gt;</span><span id="6b8a" class="kj kk hi kf b fi kq km l kn ko">&lt;p&gt;Blah Blah Blah in between the projected content……&lt;/p&gt;</span><span id="06c1" class="kj kk hi kf b fi kq km l kn ko">&lt;ng-content <strong class="kf hj">select=”button”</strong>&gt;&lt;/ng-content&gt;</span></pre><p id="02a4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们在<strong class="ih hj">子组件</strong>的不同位置有2个<ng-content>标签。1个&lt; ng-content &gt;在&lt; p &gt;标签上方，另一个在&lt; p &gt;标签下方。</ng-content></p><p id="c8e9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">每个<ng-content>标签都有一个<strong class="ih hj">选择属性</strong>。您一定已经猜到了，这个属性决定了哪个内容将被投影到哪个&lt; ng-content &gt;元素上。</ng-content></p><p id="dbd2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">带有<strong class="ih hj"> select="h4" </strong>的<ng-content>元素意味着使用&lt; h4 &gt;标签的内容将被投影到这个&lt; ng-content &gt;元素上。</ng-content></p><p id="2cc0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">带有<strong class="ih hj"> select="button" </strong>的<ng-content>元素意味着使用&lt;按钮&gt;标签的内容将被投射到这个&lt; ng-content &gt;元素上。</ng-content></p><p id="2946" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以在下面找到完整的工作示例。</p><div class="kr ks ez fb kt ku"><a href="https://stackblitz.com/edit/angular-ivy-ei5bgv?file=src/app/app.component.html" rel="noopener  ugc nofollow" target="_blank"><div class="kv ab dw"><div class="kw ab kx cl cj ky"><h2 class="bd hj fi z dy kz ea eb la ed ef hh bi translated">角状常春藤(分叉)- StackBlitz</h2><div class="lb l"><h3 class="bd b fi z dy kz ea eb la ed ef dx translated">基于@angular/animations、@angular/compiler、@angular/core、@angular/common的angular-cli项目…</h3></div><div class="lc l"><p class="bd b fp z dy kz ea eb la ed ef dx translated">stackblitz.com</p></div></div><div class="ld l"><div class="le l lf lg lh ld li jn ku"/></div></div></a></div></div></div>    
</body>
</html>