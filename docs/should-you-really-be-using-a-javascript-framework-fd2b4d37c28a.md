# 你真的应该使用 JavaScript 框架吗？

> 原文：<https://medium.com/geekculture/should-you-really-be-using-a-javascript-framework-fd2b4d37c28a?source=collection_archive---------9----------------------->

![](img/fcc7d827aa8a70b37f986369008d73bb.png)

Photo by [Charles Deluvio](https://unsplash.com/@charlesdeluvio?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)

JAvamar 框架！不管你喜欢还是讨厌它们，不可否认它们对 web 开发领域的影响，无论你走到哪里，都会有新的 JavaScript 框架出现。当你找工作时，对反应、Vue、棱角、余烬甚至苗条的经验的要求几乎是不可避免的。然后，就在你认为你已经看到了这一切的时候，元框架也开始出现，React 的 Next.js，Vue 的 Nuxt.js，Svelte-Kit 或 Svelte 的 Sapper，所有这些都有希望实现一些奇特的东西，如服务器端渲染和集成了前端代码的后端 API。

也就是说，你不能说这些框架不酷。能够在 HTML 中内联编写 JavaScript 非常好，因为能够在代码中表单所在的位置声明表单的函数行为看起来非常直观。然后，当您希望能够在代码中再次使用该表单时，只需将它分离成自己的组件，并将其放在您想要的任何位置。或者，如果您只想在用户完成了前面的步骤时呈现该表单，请使用可用的条件呈现。

当谈到 JavaScript 框架时，往往会有乐观者和悲观者。乐观主义者关注 React，认为它拥有大量的特性集、直观的语法和基于组件的范例。然而，悲观主义者可能只看到 React 的膨胀，缓慢的虚拟 DOM 和 SPA 结构使得搜索引擎优化和部署变得更加复杂。虽然这两个学派都有令人信服的观点，但我认为退一步问一个重要的问题是很重要的。

# 为什么框架首先会存在？

框架、API 和库对于开发来说是不可或缺的，它们肩负着一项重要的任务:让开发变得更容易。我们开发人员做很多事情，我们设计、编码、调试、测试、部署和维护都是为了创造一个问题的解决方案。因此，任何让我们整个过程变得更容易的事情都会受到热烈欢迎。这就是 JavaScript 框架所做的，它们让我们可以使用各种各样的工具来简化 web 应用程序或页面的开发过程。

以 jQuery 为例，它是 JavaScript 历史上的一个传奇，在超过 7000 万个网站上使用，它只是一个具有一些有用功能的 JavaScript 库。这个小工具让开发变得简单了一点，并且在开发过程中没有使用大量的资源。JavaScript 框架的想法本身并没有错，它们试图做和 jQuery 一样的事情，并且在很多情况下都取得了成功。然而，知道随之而来的问题是很重要的，因为大多数事情让你的生活变得更容易，必须在某个地方做出牺牲。

# 框架的注意事项

我想强调的是，我在这里主要使用 React 作为例子，因为这是我最熟悉的。如果我在某些事情上是错误的/误导的或不公平的，或者你觉得应该进行编辑/修改，请告诉我。

## 虚拟世界

首先，除了像 Svelte 这样的编译器之外，大多数框架都使用了一个[虚拟 DOM](https://www.tezify.com/post/what-is-virtual-dom-and-what-problem-does-it-solve/) 。听起来是这样的，它是复制到客户端内存中的真实 DOM 的抽象，其中框架可以检查组件树的更新，然后如果组件的状态或属性发生变化，虚拟 DOM 会告诉真实 DOM 重新绘制 UI。这样一来，无论何时发生什么事情，浏览器都不会重新呈现所有的内容，从而导致不愉快的体验。

问题是它不是被动的。每当一个状态或属性改变时，虚拟 DOM 必须遍历组件树中的每个组件，检查它的状态或属性是否改变。一个更聪明的方法是跟踪哪些组件具有连接的状态和属性，这样当某个东西改变时，我们只需改变受影响的东西。这被称为[反应](https://en.wikipedia.org/wiki/Reactive_programming)，不幸的是，这种反应并不具备。

这在较小的网页中不太明显，比如个人文件夹，但是在大的应用程序中会变得笨拙。只要看看一些使用虚拟 DOM 框架的网站，注意点击按钮时的延迟。尽管框架已经发布了提高虚拟 DOM 效率的好方法，比如 React 的内存化组件，但它们的速度还是不如 React 快。支持 Svelte 实际使用反应性，并在延迟测试中破坏其他框架。

## 膨胀

如果我现在运行 create-react-app，这是设置 react 开发环境最常见的方式，它会以 node_modules 的形式将 150 兆的 JavaScript 下载到我的设备上。这太疯狂了。这些也不仅仅是开发依赖。我的个人作品集内置于 React 中，发送 150kb 的 JavaScript 供浏览器渲染。这是因为为了让 React 工作，它必须发送如何构建虚拟 DOM 和所有组件的指令。这可能会大大降低性能，并对客户端造成真正的拖累。

重型框架通过在客户端的浏览器上缓存重要数据来提高性能，因此只有在第一次加载时或用户清空浏览器缓存时才会变慢。唯一的问题是缓存只能解决缓慢的 JavaScript 下载。服务器不必再发送大文件，它已经在你的设备上了。然而，为了构建应用程序，您的浏览器仍然需要执行 JavaScript，所以这个解决方案只是走了一半。这就把我们带到了下一个问题。

## 客户端渲染

你的浏览器不只是发送一大堆 JavaScript，它还发送一个非常小的 HTML 文件，这对于浏览器理解如何处理现有的 JavaScript 是必要的。HTML 文件就在那里，因此当脚本运行时，它可以将 HTML 的主体作为应用程序的根。这就是为什么如果你去一个基于 React 的网站( [my portfolio 例如](https://www.aidantilgner.dev))，你会看到一个名为 root 的 div，另一个名为 App，最后组件会开始出现。

这违背了惯例，因为在静态站点中，通常这种组装到 HTML 文件中的过程根本不需要发生，或者非常少。这样，浏览器所要担心的就是渲染 HTML 文件、样式，可能还需要 JavaScript 来处理功能和 DOM 操作。但是框架是在 JavaScript 文件之外构建的，因此增加了客户端的工作量。

另一个问题是搜索引擎优化。搜索引擎抓取网站是为了理解网站的内容。他们通过访问一个 URL，并抓取 HTML 文件来做到这一点。如果你的 JavaScript 在爬虫程序读取完你的 HTML 文件之前没有执行完，那么它就看不到任何内容，也就没有理由把你的网站列为搜索结果。

这个问题通过在服务器端构建 JavaScript 文件的[来解决，这是一个巧妙的技巧，我前面提到的那些元框架使之成为可能。基本上，服务器自己执行 JavaScript，创建 HTML 文件，然后发送，而不是将大量的 JavaScript 发送给客户端进行渲染。然而，这也有它的缺点，因为每当你的站点需要重新渲染时，它必须去服务器获取另一个 HTML 文件。如果你有一个相当静态的站点，这是好的，但是如果你想要构建一个应用程序并且性能很重要，这可能是一个交易破坏者。](https://www.freecodecamp.org/news/what-exactly-is-client-side-rendering-and-hows-it-different-from-server-side-rendering-bd5c786b340d/)

然而，公平地说，如果您正在构建 web 应用程序，您可能无论如何都需要客户端呈现。由服务器完成任何动态渲染几乎没有意义，因为它完全依赖于两台计算机之间的连接，而连接速度决定了响应速度。如果您正在处理一个高度动态的大型应用程序，那么客户端渲染对服务器和客户端浏览器的性能都有很大帮助。

## 单页应用程序

单页应用，俗称 SPAs，是用 React、Angular、Vue 等构建网站的产物。其基本思想是，当您访问一个链接时，框架会呈现与该链接一致的 UI，而不是访问服务器并向它请求对应于您正在搜索的端点的 HTML 文件。这相当复杂，所以这里有一篇好文章的链接来进一步解释它们。

水疗很棒，因为它们允许一种持久的状态。假设您有一个基于用户输入动态赋值的变量，并且您想在另一个页面上使用它。传统上这是不可能的，因为只要你转到另一个 URL，页面就会刷新，你就会丢失那个变量的值。但是，由于 SPA 不会在 URL 改变时刷新，所以您可以保留该变量的值，以便随时使用，并使页面看起来好像是基于 URL 而改变的。

不幸的是，这确实产生了一些问题。由于搜索引擎抓取网站的方式，SEO 再次成为一个问题。为了绘制出网站的页面，爬虫程序希望当它到达新的 URL 时，用新的内容刷新页面。这个问题有多种解决方法，但仍然应该考虑。

另一个问题是安全性，因为将如此多的功能从服务器转移到客户端会让最终用户访问 JavaScript 本身。如果你不小心的话，一个聪明且忠诚的黑客可能会仔细检查你的应用程序的源代码并找到漏洞。

## 那又怎样？

嗯，这些都是需要考虑的重要问题，因为尽管框架有很多很酷的功能，但也有一些权衡需要考虑。框架也一直在发展，有些，比如 Svelte，已经解决了很多这样的问题，并以新的直观的方式工作。

# 那么我什么时候使用框架呢？

假设你在找一本书。你走进一家书店，他们说他们有这本书，但它只和其他 4 本书一起打包出售，定价 50 美元。你也可以花 15 美元在网上单独购买。哪个有道理？看情况吧。如果你真的只需要那本书，并且你从来没有打算阅读套装中的任何其他书，那么显而易见的选择是在线选项，你将为每本书支付比套装选项多一点的费用，但从长远来看，你是在省钱。然而，如果你对其他的书感兴趣，并且可以看到自己在阅读它们，那么以更低的价格单独购买其他的书也是有意义的。我相信你明白我的意思了。

如果你要使用所有甚至大部分的能力，比如说角度，那么当然，为什么不使用它呢？试图复制谷歌一群真正聪明的人构建的功能是没有意义的，因为这些功能都捆绑在他们的框架中，可以免费使用。但是如果你只是需要完成表单验证，那么也许你可以自己来做，这会花一点时间，但是你会看到好处。

例如，如果您正在构建一个大型应用程序，那么您将需要完成大量的工作。表单验证、动画、持久状态、客户端呈现和动态呈现都非常重要，在这种情况下，框架可能是您的最佳选择。

然而，如果你正在构建一个严格意义上的信息网站，它并没有使用很多这样的特性，尤其是不是非常动态的，那么也许可以使用 HTML、CSS 和普通的 JavaScript 来锻炼你的技能。我自己在一个大的 React 代码库中工作后，发现使用这三人组的精益能力真的很好。

# 有没有快乐的媒介？

嗯，算是吧。我在这篇文章中提到过几次[苗条](https://svelte.dev/)，这是一个非常有趣和令人耳目一新的观点。首先，它是反应性的。它没有使用笨重的虚拟 DOM，而是根据状态/道具的变化，只重新渲染你需要重新渲染的东西，而不会检查其他所有东西，因为它不需要这样做。

它也更少的框架更多的编译器。它通过编译您的。苗条的文件转换成干净的、轻量级的 JavaScript，它实际上只是你的组件和代码的代表，不需要虚拟的 DOM。您不必担心 clunk，您只需在让服务器将文件发送给客户端之前构建文件。您需要的唯一依赖项是开发人员依赖项，这意味着您也没有向客户端发送任何额外的代码。

至少在我看来，这是最接近令人满意的中间点了，我向那些寻找直观、快速、功能全面的框架的人推荐 Svelte。也就是说，因为 Svelte 是新的，与更受欢迎的框架如 React、Angular 和 Vue 相比，它的用户基础更少，所以很难找到你的问题的答案，尤其是如果你是初学者。在这种情况下，我建议首先使用一个较大的框架，然后一旦你已经用它构建了一些项目，就用它做一些简单的东西。他们也有一个不和谐的地方，你可以问关于错误或开始的问题，从我的经验来看，他们非常活跃。

# 外卖食品

要记住的重要一点是，无论你使用什么工具来使你的生活变得更容易，都会有权衡取舍。框架改变了 web 开发，在很多方面变得更好，有些人可能会说在很多方面变得更坏。框架导致了网络上疯狂的创新，而且没有减缓的迹象。只要你聪明，没有理由不参与其中。

*大家编码快乐！*