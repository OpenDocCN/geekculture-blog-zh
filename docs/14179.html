<html>
<head>
<title>Recreating Instagram Stories Animation with SwiftUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用SwiftUI重建Instagram Stories动画</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/recreating-instagram-stories-animation-with-swiftui-7f8724c91be8?source=collection_archive---------8-----------------------#2022-08-19">https://medium.com/geekculture/recreating-instagram-stories-animation-with-swiftui-7f8724c91be8?source=collection_archive---------8-----------------------#2022-08-19</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/></div><div class="ab cl if ig gp ih" role="separator"><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik"/></div><div class="hb hc hd he hf"><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es im"><img src="../Images/9c5ca4acfacaa30abeab5da2bdaada4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*S-ZX2Bp2euzYsLCZ"/></div></div><figcaption class="iy iz et er es ja jb bd b be z dx">Photo by <a class="ae jc" href="https://unsplash.com/@alexbemore?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Alexander Shatov</a> on <a class="ae jc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="12e9" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">Instagram是使用最多的社交媒体应用之一。在Instagram中打开故事有漂亮的动画。让我们使用SwiftUI创建这个动画。</p><p id="5be5" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">让我们使用非常简单的模型:</p><pre class="in io ip iq fd kb kc kd ke aw kf bi"><span id="1109" class="kg kh hi kc b fi ki kj l kk kl">struct Person: Identifiable {</span><span id="9c70" class="kg kh hi kc b fi km kj l kk kl">var image: String</span><span id="fd98" class="kg kh hi kc b fi km kj l kk kl">var id = UUID()</span><span id="efd3" class="kg kh hi kc b fi km kj l kk kl">}</span></pre><p id="20c4" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">这个动画可以使用匹配的几何效果来实现。我们将在动画出现地方创建一个名称空间。然后我们将创建一个人的样本数组。我们还需要一个状态变量来显示选定的人的故事。</p><pre class="in io ip iq fd kb kc kd ke aw kf bi"><span id="557e" class="kg kh hi kc b fi ki kj l kk kl">@Namespace var namespace</span><span id="e169" class="kg kh hi kc b fi km kj l kk kl">var persons: [Person] = ["star","1.circle","2.circle","3.circle","4.circle","5.circle","6.circle"].map({Person(image: $0)})</span><span id="8d7e" class="kg kh hi kc b fi km kj l kk kl">@State var selected: Person?</span></pre><p id="5fc2" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">所以，我们需要两个屏幕。一个是主屏幕，故事显示在屏幕顶部，另一个显示所选人物的故事。为了简单起见，我们假设图像本身是一个故事，将出现在后面的屏幕上。</p><figure class="in io ip iq fd ir"><div class="bz dy l di"><div class="kn ko l"/></div></figure><p id="7ab3" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">在上面的视图中，我们显示了人员列表，然后将matchedGeometryEffect修饰符添加到person add标记person.id的图像中。</p><figure class="in io ip iq fd ir"><div class="bz dy l di"><div class="kn ko l"/></div></figure><p id="2a38" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">以类似的方式，我们将matchedGeometryEffect添加到所选人员的图像中，并用所选人员id进行标记。与此同时，在动画块中包含选定变量的更改。</p><p id="6ad0" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">以下是输出:</p><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es kp"><img src="../Images/11640c2d70ef9f2e53ed9d71af65abd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*g4ENERDaDvK9GUSN2-QsaA.gif"/></div></div></figure><p id="72bb" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">这是完整的代码。</p><figure class="in io ip iq fd ir"><div class="bz dy l di"><div class="kn ko l"/></div></figure><p id="01fd" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">感谢阅读:)</p></div></div>    
</body>
</html>