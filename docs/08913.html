<html>
<head>
<title>Response Object Express.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">响应对象Express.js</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/response-object-express-js-d6e44213a001?source=collection_archive---------2-----------------------#2021-11-19">https://medium.com/geekculture/response-object-express-js-d6e44213a001?source=collection_archive---------2-----------------------#2021-11-19</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/b8af7eceb7057efef9044241731b1ce6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*_2eqOYynqKShOEU8.jpg"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx">Response Express.js</figcaption></figure><div class=""/><p id="a073" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">response对象是Express.js的有用部分，我们将开始检查哪些是最重要的方法，因为我们需要知道它有什么，以及我们可以从中了解到什么。</p><h1 id="d665" class="js jt hx bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">响应对象</h1><p id="ff8d" class="pw-post-body-paragraph iu iv hx iw b ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr hb bi translated">响应对象被传递给请求处理器的第二个参数，这样我们就可以给用户发送一个页面，一个图片，一个下载文件等等。</p><p id="dcc7" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">首先，我们需要用Express.js创建我们的小服务器，开始吧！</p><p id="d5f1" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">安装express并创建我们的js文件，然后启动服务器</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="a112" class="le jt hx la b fi lf lg l lh li">const express = require( 'express' )<br/>const app     = express()<br/>const port    = process.env.PORT || 1024</span><span id="41d9" class="le jt hx la b fi lj lg l lh li">app.get( '/', ( <em class="lk">req</em>, <em class="lk">res</em> ) =&gt; {<br/><em class="lk">res</em>.type( 'text/plain' )<br/><em class="lk">res</em>.send( 'Thanks for reading' )})</span><span id="695f" class="le jt hx la b fi lj lg l lh li">app.listen( port, console.log( `http://127.0.0.1:${ port }` ) )</span></pre><figure class="kv kw kx ky fd hk er es paragraph-image"><div class="er es ll"><img src="../Images/fdee7660aca5c1b8c98855de8e24cfc1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1226/format:webp/1*lBSc0qIS3dAo1aTcCKP7Ug.png"/></div><figcaption class="hr hs et er es ht hu bd b be z dx">Example starting our server</figcaption></figure><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="aca6" class="le jt hx la b fi lf lg l lh li">res.status( code )</span></pre><p id="34b1" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这是用于发送页面的状态，最常见的状态有404、200、500。</p><figure class="kv kw kx ky fd hk er es paragraph-image"><div class="er es lm"><img src="../Images/6e303ebe66fb76623c00bc88f5a92430.png" data-original-src="https://miro.medium.com/v2/resize:fit:724/format:webp/1*Ua0LuZl13Vj4XJiSGSkd-g.png"/></div><figcaption class="hr hs et er es ht hu bd b be z dx">Example code res..status</figcaption></figure><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="5363" class="le jt hx la b fi lf lg l lh li">app.get( '/status', ( <em class="lk">req</em>, <em class="lk">res</em> ) =&gt; {<br/><em class="lk">res</em>.status( 404 )<br/><em class="lk">res</em>.send( 'Status' )<br/>})</span></pre><figure class="kv kw kx ky fd hk er es paragraph-image"><div class="er es ln"><img src="../Images/78d6ee6e1133f0c0638d6e0dd29427fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:768/format:webp/1*7BxiAlfsem-EVAE1V8Apew.png"/></div><figcaption class="hr hs et er es ht hu bd b be z dx">Example status 404 using the res.status object</figcaption></figure><p id="2153" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">如果我们可以看到，我添加了404状态，它的工作，默认选项是200</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="f7b3" class="le jt hx la b fi lf lg l lh li">res.set( name, value )</span></pre><p id="caa9" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这是为客户端设置响应头。</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="72d8" class="le jt hx la b fi lf lg l lh li">app.get( '/set', ( <em class="lk">req</em>, <em class="lk">res</em> ) =&gt; {<br/><em class="lk">res</em>.set( {medium: 'Hi thank you for reading'})<br/><em class="lk">res</em>.send( 'set' )<br/>})</span></pre><figure class="kv kw kx ky fd hk er es paragraph-image"><div class="er es lo"><img src="../Images/0050f5d8560a75c3895213797137712a.png" data-original-src="https://miro.medium.com/v2/resize:fit:948/format:webp/1*Vwm6-Rxkhzi4w2vRGAnqQw.png"/></div><figcaption class="hr hs et er es ht hu bd b be z dx">Example code for instance</figcaption></figure><figure class="kv kw kx ky fd hk er es paragraph-image"><div class="er es lp"><img src="../Images/60c538ee4101e4a32d29db3718c1b4d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:614/format:webp/1*k8Sq1CImyrgiV-GwaAsH6w.png"/></div><figcaption class="hr hs et er es ht hu bd b be z dx">Example headers output on the Chrome DevTools</figcaption></figure><p id="b21f" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">添加一个对象，我们可以看到它正在发送给客户端。</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="7efd" class="le jt hx la b fi lf lg l lh li">res.cookie(name, value, [options] )</span></pre><p id="1483" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我们可以从服务器端设置一个cookie</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="e816" class="le jt hx la b fi lf lg l lh li">app.get( '/cookie', ( <em class="lk">req</em>, <em class="lk">res</em>) =&gt; {<br/><em class="lk">res</em>.cookie( 'cook', 'first', [])<br/><em class="lk">res</em>.send( 'Cookie' )<br/>})</span></pre><figure class="kv kw kx ky fd hk er es paragraph-image"><div class="er es lq"><img src="../Images/a2861663b2b40401b27f28d923a004f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:712/format:webp/1*TM8sR3omXbIsSFBctTojqg.png"/></div><figcaption class="hr hs et er es ht hu bd b be z dx">Example code from res.cookie()</figcaption></figure><figure class="kv kw kx ky fd hk er es paragraph-image"><div class="er es lr"><img src="../Images/e03eab57ed3b90fd6a5df0941c6eb950.png" data-original-src="https://miro.medium.com/v2/resize:fit:938/format:webp/1*bC4abq70Z6jIYqD3B2DjrA.png"/></div><figcaption class="hr hs et er es ht hu bd b be z dx">Example cookie created with Express.js</figcaption></figure><p id="771f" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这个扩展名是<a class="ae ls" href="https://chrome.google.com/webstore/detail/editthiscookie/fngmhnnpilhplaeedifhccceomclgfbg" rel="noopener ugc nofollow" target="_blank">编辑这个cookie </a></p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="de35" class="le jt hx la b fi lf lg l lh li">res.clearCookie(name, [ options ])</span></pre><p id="e484" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这是清除饼干</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="f9f1" class="le jt hx la b fi lf lg l lh li">app.get( '/clearingcookie', ( <em class="lk">req</em>, <em class="lk">res</em>) =&gt; {<br/><em class="lk">res</em>.cookie( 'cook', 'first', [])<br/><em class="lk">res</em>.clearCookie( 'cook' )<br/><em class="lk">res</em>.send( 'Cookie' )<br/>})</span></pre><figure class="kv kw kx ky fd hk er es paragraph-image"><div class="er es lt"><img src="../Images/c33ce31429c950d3329890279fffa9a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:834/format:webp/1*a3zdxzbMMuGef1Cr7eUs4w.png"/></div><figcaption class="hr hs et er es ht hu bd b be z dx">Example clear cookie after it was created</figcaption></figure><figure class="kv kw kx ky fd hk er es paragraph-image"><div class="er es lu"><img src="../Images/dbaa71f75e2367c43eb7bf0cf5b87b2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1146/format:webp/1*SxBkFPtDnTqz5LQLtzKjsA.png"/></div><figcaption class="hr hs et er es ht hu bd b be z dx">Clear cookie completed</figcaption></figure><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="6a19" class="le jt hx la b fi lf lg l lh li">res.redirect( [status], url )</span></pre><p id="d6d2" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这用于将浏览器重定向到一个URL。</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="d3a5" class="le jt hx la b fi lf lg l lh li">app.get( '/redirect', ( <em class="lk">req</em>, <em class="lk">res</em> ) =&gt; {<br/><em class="lk">res</em>.redirect( 301, '/' )<br/>})</span></pre><figure class="kv kw kx ky fd hk er es paragraph-image"><div class="er es ln"><img src="../Images/790ec200295ab9d8fcc1bb9c0155230f.png" data-original-src="https://miro.medium.com/v2/resize:fit:768/format:webp/1*-yOVqw8NHWQqHVV8WJgSCg.png"/></div><figcaption class="hr hs et er es ht hu bd b be z dx">Example code redirect</figcaption></figure><p id="720e" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">当我试图浏览这个页面时，它把我重定向到了主页。</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="0f31" class="le jt hx la b fi lf lg l lh li">res.send( body )</span></pre><p id="1d10" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">向客户端发送响应，默认类型是“text/html ”,但是如果您想要发送其他类型的信息，您需要更改res.type()</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="8f92" class="le jt hx la b fi lf lg l lh li">res.json( json ) </span><span id="d747" class="le jt hx la b fi lj lg l lh li">res.jsonp( json )</span></pre><p id="4bde" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">向客户端发送JSON格式</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="8439" class="le jt hx la b fi lf lg l lh li">app.get( '/json', ( <em class="lk">req</em>, <em class="lk">res</em> ) =&gt; {<br/><em class="lk">res</em>.json({<br/>page: 'Medium',<br/>comment: 'Thanks for Reading',<br/>emoji: '😃'})})</span></pre><figure class="kv kw kx ky fd hk er es paragraph-image"><div class="er es lv"><img src="../Images/e66f5ba726047c3d103fdbce04d16eb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:670/format:webp/1*FYHhqjeps2561-zNrWKPCA.png"/></div><figcaption class="hr hs et er es ht hu bd b be z dx">Exampel code for request json method</figcaption></figure><figure class="kv kw kx ky fd hk er es paragraph-image"><div class="er es lw"><img src="../Images/4318299122f5771e1c227d4bcc787329.png" data-original-src="https://miro.medium.com/v2/resize:fit:554/format:webp/1*y9TnJIuCRrfa8YgmuLLAaQ.png"/></div><figcaption class="hr hs et er es ht hu bd b be z dx">Example response JSON format to the client</figcaption></figure><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="61dc" class="le jt hx la b fi lf lg l lh li">res.end()</span></pre><p id="babf" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在不向客户端发送任何东西的情况下终止连接</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="4ef4" class="le jt hx la b fi lf lg l lh li">res.format( object )</span></pre><p id="6521" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这是为了向客户端发送多种格式，这对API非常有用。</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="6beb" class="le jt hx la b fi lf lg l lh li">res.attachment( filename )</span></pre><p id="280b" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这是对标题的响应，让浏览器需要加载一些东西</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="05ee" class="le jt hx la b fi lf lg l lh li">res.download( path, [filename], [callback])</span></pre><p id="0da0" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">与响应下载相同</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="3145" class="le jt hx la b fi lf lg l lh li">res.links( links )</span></pre><figure class="kv kw kx ky fd hk er es paragraph-image"><div class="er es lx"><img src="../Images/6f82c6a3ba2aeebf487cc92c39809004.png" data-original-src="https://miro.medium.com/v2/resize:fit:756/format:webp/1*l-K2M1oJ2-z1Muy3dQvMVQ.png"/></div><figcaption class="hr hs et er es ht hu bd b be z dx">Example code res.links</figcaption></figure><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="156d" class="le jt hx la b fi lf lg l lh li">app.get( '/links', ( <em class="lk">req</em>, <em class="lk">res</em> ) =&gt; {</span><span id="ddc4" class="le jt hx la b fi lj lg l lh li">console.log(<em class="lk">res</em>.links( { link: '/medium.com'} )<br/>);<br/><em class="lk">res</em>.send( 'links' )})</span></pre><figure class="kv kw kx ky fd hk er es paragraph-image"><div class="er es ly"><img src="../Images/3474b7c2979779c6b7cf98782a941cb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:500/format:webp/1*_lcen-TzRSYJw8MgG_kkyQ.png"/></div><figcaption class="hr hs et er es ht hu bd b be z dx">Example output links Chrome DevTools</figcaption></figure><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="620a" class="le jt hx la b fi lf lg l lh li">res.render( view, [locals], callback)</span></pre><p id="81a0" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">响应渲染将视图发送给客户端我们用了太多带把手的<a class="ae ls" rel="noopener" href="/geekculture/how-to-create-a-small-server-with-express-js-using-handlebars-aab529be375a"/>。</p><h1 id="cb10" class="js jt hx bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated"><strong class="ak">结论</strong></h1><p id="ce47" class="pw-post-body-paragraph iu iv hx iw b ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr hb bi translated">Express.js中的response对象对于request对象非常有用，它是连接客户端和服务器的核心，我们也为客户端提供了一个非常好的体验，完全检查和试验它非常重要！</p><h1 id="8bbd" class="js jt hx bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated"><strong class="ak">来源</strong></h1><p id="7949" class="pw-post-body-paragraph iu iv hx iw b ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr hb bi translated">这本<a class="ae ls" href="https://www.amazon.com/Web-Development-Node-Express-Leveraging/dp/1492053511" rel="noopener ugc nofollow" target="_blank">书</a>真的很神奇！</p><div class="hh hi ez fb hj lz"><a href="http://expressjs.com/en/api.html#res" rel="noopener  ugc nofollow" target="_blank"><div class="ma ab dw"><div class="mb ab mc cl cj md"><h2 class="bd hy fi z dy me ea eb mf ed ef hw bi translated">4.x API</h2><div class="mg l"><h3 class="bd b fi z dy me ea eb mf ed ef dx translated">创建快速应用程序。express()函数是由express模块导出的顶级函数。var…</h3></div><div class="mh l"><p class="bd b fp z dy me ea eb mf ed ef dx translated">expressjs.com</p></div></div><div class="mi l"><div class="mj l mk ml mm mi mn hp lz"/></div></div></a></div></div></div>    
</body>
</html>