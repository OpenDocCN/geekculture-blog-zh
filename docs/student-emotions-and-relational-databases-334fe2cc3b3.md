# 学生情绪和关系数据库

> 原文：<https://medium.com/geekculture/student-emotions-and-relational-databases-334fe2cc3b3?source=collection_archive---------67----------------------->

在我们的期末项目中，我们为加州科内霍谷的男孩女孩俱乐部开发了一个 web 应用程序。男孩女孩俱乐部是一个非营利组织，已经影响了美国各地儿童和家庭的生活。科内霍谷男孩女孩俱乐部(B&G 俱乐部)是遍布科内霍谷的 9 个俱乐部，其成员包括 4000 名儿童(成员)、500 名志愿者和 100 多名全职员工。我们要解决的问题是在他们现有的应用程序中添加一个“情绪跟踪器”功能。这个功能的主要目标是给学生的机构，允许他们在进入、离开和完成男孩女孩俱乐部的一个项目时表达他们的情感。这种情感数据还可以让管理者对学生的健康和每个俱乐部的活动效果做出更明智的决定。为了解决这个问题，并为 B&G 俱乐部提供情感数据捕捉和管理工具，以便更好地为其成员服务，我的团队开始计划如何实现这一重要功能。

![](img/b2ca6b077193aebf23059f0262cacf4a.png)

本产品功能由两部分组成。前端用户体验将允许工作人员选择当前的计划，学生可以排队，扫描他们的二维码进行登录，并选择最能代表他们当时情绪的表情符号。点击“提交”按钮，这些情感数据连同学生、项目和俱乐部 id 将被发送到我们的后端系统来组织数据。数据的组织者必须牢记 B&G 俱乐部将对这些数据进行的分析，以便更好地为他们的学生服务。

当我们开始这个项目时，我有点担心跟踪这些情感数据的最佳方式。我选择在后端团队工作。在这个项目的开始，我对数据建模的最佳方式没有一个清晰的愿景。在与我的团队和我们的利益相关者交谈后，这个问题很快会变得更加复杂，但我们会随机应变。

# 我们需要一个连接表吗？

我对这个项目的主要贡献与数据库的设计有关。后端团队和我被要求记录会员对所有俱乐部活动的反应，包括到达和离开俱乐部。当我们的团队在如何最好地实现数据库的问题上存在意见分歧时，这就开始了有趣的讨论，这导致了一场活跃的技术讨论。我的团队中的一个小组认为，成员出入俱乐部的情绪应该是每个成员的特性，程序反应应该是每个程序的特性。我认为这是一个非常简单、直接的解决方案，我们的团队开始围绕这个数据库设计进行规划。随着时间的推移，通过与我们的利益相关者就数据建模进行的对话，我们了解到我们需要跟踪哪个成员对哪个俱乐部计划做出了反应。为了用我们当前的数据库设计实现这一点，每个俱乐部计划的会员反应(例如足球)必须是一个键-值对的列表，键是成员 id，值是他们在足球赛后的情绪。在我们的利益相关者会议之后，团队和我讨论了这个问题，在通过一位同事讨论时，我提出了一个不同的数据库设计结构。

这种新的数据库设计将会员的每一种情绪都视为对俱乐部计划的回应。这意味着我们必须扩展俱乐部项目的理念，将入住和退房包括在内，这确实是 B&G 俱乐部的活动。按照这种逻辑，入住和退房就像足球、艺术或音乐一样，是会员表达情感的一个程序。在这个公式中，我们不必分割相互关联的数据，并且我们的数据建模对于我们的利益相关者来说变得更加容易和简单易懂。

在这个启示之后，我被带到了现实中，仅仅因为我认为这是一个出色的解决方案并不意味着我的团队也同意。特别是因为我们已经在第一个数据库设计思想上取得了一些进展，但是我预见到了一些主要问题，不仅仅是对我的团队，还有我们代码的继承者，所以我必须陈述我的情况。幸运的是，在软件工程中，你不需要仅仅用人类的语言来说服人们。在我的团队的支持下，我在 Github 中创建了一个新的分支，我和我的同事开始着手我们数据库设计的这个中枢。一旦我们达到了代码可读、可理解的程度，我们就可以演示它的预期功能了。我们把它带回了团队。

![](img/6b1f85ee1ecceefd14ef20bf87de786e.png)

这个漂亮的成员反应保存函数存在于我们的成员反应控制器中，但是通过我们的应用程序调用服务和存储库。首先，该功能将授权仅限于管理员(ADMIN)、俱乐部董事(CD)和工作人员(YDP)。完成这个 API 调用所必需的参数是成员 id(mid)、程序 id(pid)、俱乐部 id(cid)和反应 id(rx)。然后，我们仔细检查从前端传来的每一条参数数据，以确保数据质量。在以“会员会员”开始的下一行，我们开始确保会员、计划、俱乐部和反应在我们的数据库中。我们这样做是因为每个成员的反应必须首先属于一个成员(1)，该成员必须对一个程序作出反应(2)，该程序必须存在于一个 B&G 俱乐部(3)，在那里该俱乐部有一个情绪(表情符号)列表，成员可以用它来表达自己(4)。为了确保我们数据的可靠性，我们检查以确保所有这些组件(1，2，3，4)都存在于我们的数据库中，如果所有这些标识符都在我们的数据库中找到，那么我们就可以成功地保存成员反应。我们还使用这个保存函数来记录出席情况，因此“clubMembersRepository”保存函数将会员保存在给定的俱乐部 id 中。

上面的 save 函数依赖于我们团队构建的其他函数的级联才能正常运行。这就是这个问题变得棘手的原因，为了保存会员反应，我们必须能够保存和验证会员、俱乐部、计划和反应，这样一切才能正常工作。幸运的是，在我们将大部分功能组合在一起以实现我们的关键目标之前，我们的团队已经充实了大部分功能。因此，在向我团队的其他成员演示了该代码的工作原理及其用途后，我们决定将其合并到生产分支，这就是我们新的数据库设计。通过这次痛苦的经历，我完全理解了关系数据库系统的强大和脆弱。我也学到了早点问好问题，可以让你以后免受伤害。

# 进步

通过大量的团队合作和协调，我们得以为 B&G 俱乐部推出一些出色的功能:

扫描二维码并验证学生身份:

![](img/43cc261fa7816e3556bf4013f360f6fb.png)

捕捉 B&G 俱乐部成员的情感情绪:

![](img/01e2579a4bb131b7e2d684a405a96d3c.png)

在后端，以可靠和有用的方式存储情感数据:

![](img/5e3bdc8ecf7af31b85a8d138235d0e0c.png)

# 展望未来

我们的利益相关者告诉我们，男孩女孩俱乐部正在全美范围内实施这种情绪跟踪器。想到我工作、思考、梦想、恐慌的代码有一天会被这么多人使用，真是令人惊讶。对我来说，这个应用的未来是数据分析和用户体验。我的后端团队能够以一种有用和清晰的方式建模和组织数据。从现在开始，数据科学家将帮助我们的利益相关者可视化并使用这些数据来完成他们的美好使命。他们到底决定如何理解所有这些数据将是一个有趣的挑战。在前端，定制应用程序的用户体验以满足每天多次使用该应用程序的学生和员工的需求，对于确保数据质量至关重要。总体而言，最大的挑战将是确保从用户体验到数据库结构的所有数据的质量。确保数据质量意味着确保数据尽可能准确地反映成员的情绪。

在整个项目中，我向许多同事寻求指导、讨论和代码审查。我从这些经历中学到的最重要的事情之一就是关注细节，这是完成一个大项目所必需的。我的思维总是能更快地抓住大画面的想法，而理解所有的细节却要花更多的时间。通过制定数据库设计变更的想法，到实现它的过程，向我展示了所有这些细节的重要性，以及它们如何创建大图。我在上面展示的 save 函数依赖于代码库中许多更小的函数。如果任何一个小函数不能正常工作，那么封装它们的大函数也不能正常工作。这种数据库设计和一般关系数据库的相互联系非常清楚地向我展示了:每个细节都很重要。

作为一名前教师，我很高兴能与男孩女孩俱乐部合作这个有趣的项目。展望未来，我将在电子学习中寻找机会，在那里我可以将我的技术技能与我的教育经验结合起来。

感谢阅读！