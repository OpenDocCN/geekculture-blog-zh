<html>
<head>
<title>Create a web server and an Amazon RDS Database instance</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建web服务器和Amazon RDS数据库实例</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/create-a-web-server-and-an-amazon-rds-database-instance-8259a352b790?source=collection_archive---------5-----------------------#2021-08-02">https://medium.com/geekculture/create-a-web-server-and-an-amazon-rds-database-instance-8259a352b790?source=collection_archive---------5-----------------------#2021-08-02</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/565aa337be10181624849d39ca85d55c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*O8HbOcAIEZqvfAq3.png"/></div></div></figure><p id="0e2d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在接下来的教程中，您将在创建数据库实例时指定VPC、子网和安全组。您还可以在创建EC2实例来托管web服务器时指定它们。数据库实例和web服务器需要VPC、子网和安全组来进行通信。设置好VPC之后，本教程将向您展示如何创建数据库实例和安装web服务器。使用DB实例端点endpoint将web服务器连接到VPC中的DB实例。</p><p id="c263" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将完成以下步骤:</p><ol class=""><li id="07f6" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated">创建包含私有和公有子网的VPC</li><li id="ea24" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">创建RDS数据库实例</li><li id="8e79" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">创建一个EC2实例并安装一个web服务器。</li></ol><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kc"><img src="../Images/5a315786c99c99f193347d34ed3a526f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*l0pA_x85z9Fkgx5U.png"/></div></div><figcaption class="kh ki et er es kj kk bd b be z dx">our completed configuration</figcaption></figure><p id="1039" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果您没有与我们的NAT网关关联的弹性IP地址，请现在分配一个。转到EC2部分，选择弹性IPs</p><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kl"><img src="../Images/1b8d95ee39945618678bedad76a107e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5_PX69G4LkMbkO4ZMKRDoQ.png"/></div></div></figure><p id="99fe" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后选择选项分配一个。</p><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es km"><img src="../Images/2b218fd1e07d830416595668f5b5dc90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*atXEnp0zdas5BwxzMY1FBw.png"/></div></div></figure><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kn"><img src="../Images/531d6112cd20d61f72b9926a38a99fe2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Cl5gFd_l-j_KDGG5Rfs7ug.png"/></div></div></figure><p id="19da" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在让我们设置我们的VPC。转到VPC仪表板，启动向导。在这个过程中，我们需要设置一些值。</p><ul class=""><li id="77ec" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn ko ju jv jw bi translated"><strong class="is hj"> IPv4 CIDR块:</strong> <code class="du kp kq kr ks b">10.0.0.0/16</code></li><li id="028d" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn ko ju jv jw bi translated"><strong class="is hj"> IPv6 CIDR块:</strong>没有IPv6 CIDR块</li><li id="9da9" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn ko ju jv jw bi translated"><strong class="is hj"> VPC姓名:</strong>T1】</li><li id="2360" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn ko ju jv jw bi translated"><strong class="is hj">公共子网的IP v4 CIDR:</strong>T2】</li><li id="1b42" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn ko ju jv jw bi translated"><strong class="is hj">可用区:</strong> <code class="du kp kq kr ks b">us-east-1a</code></li><li id="3027" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn ko ju jv jw bi translated"><strong class="is hj">公共子网名称:</strong> <code class="du kp kq kr ks b">Tutorial public</code></li><li id="d89c" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn ko ju jv jw bi translated"><strong class="is hj">私有子网的IP v4 CIDR:</strong>T5】</li><li id="9843" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn ko ju jv jw bi translated"><strong class="is hj">可用区:</strong> <code class="du kp kq kr ks b">us-east-1a</code></li><li id="5ec9" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn ko ju jv jw bi translated"><strong class="is hj">私有子网名称:</strong> <code class="du kp kq kr ks b">Tutorial private 1</code></li><li id="f734" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn ko ju jv jw bi translated"><strong class="is hj">弹性IP分配ID: </strong>与NAT网关关联的弹性IP地址</li><li id="073e" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn ko ju jv jw bi translated"><strong class="is hj">服务端点:</strong>跳过此字段。</li><li id="8a24" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn ko ju jv jw bi translated"><strong class="is hj">启用DNS主机名:</strong> <code class="du kp kq kr ks b">Yes</code></li><li id="8dda" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn ko ju jv jw bi translated"><strong class="is hj">硬件租赁:</strong> <code class="du kp kq kr ks b">Default</code></li></ul><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kt"><img src="../Images/7ff2079d0488fc716eb8cf8a55adb848.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*21zP-DZjq5r1v15GmNrz9A.png"/></div></div><figcaption class="kh ki et er es kj kk bd b be z dx">Choose the configuration for Public and Private Subnets</figcaption></figure><p id="8217" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在步骤2中输入上述信息。选择我们之前创建的弹性IP。然后<em class="ku">创造VPC。</em></p><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kv"><img src="../Images/4b50cb8eb43815f3586fa75e30ee6b92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g_IpzzyzEaUiQS9dXgnMuA.png"/></div></div></figure><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kw"><img src="../Images/8b2ee103fe871cc660978072b053028f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gTsfifCV8yuSHlyD2ehJEg.png"/></div></div></figure><p id="a9a3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">而现在你的VPC应该被创造成功了。警告:无论你运行NAT网关多长时间，都要花钱。</p><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kx"><img src="../Images/45d66d03ca870b9278b5e52d57611bd5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xkwnlgvHzOGpEVG7v5QXSw.png"/></div></div></figure><p id="cffe" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您必须有两个专用子网或两个公共子网，才能为要在VPC中使用的数据库实例创建数据库子网组。因为本教程的数据库实例是私有的，所以向VPC添加第二个私有子网。</p><p id="b37d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将创建更多子网。您将看到<em class="ku">创建子网</em>按钮，以及我们在创建VPC时指定的另外两个子网。</p><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es km"><img src="../Images/aa59b9609e48030450d81443160e56a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*clgH9rEZ3c7gwHhOKrJfXw.png"/></div></div></figure><p id="f3d9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在<strong class="is hj">创建子网</strong>页面上，设置这些值:</p><ul class=""><li id="976d" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn ko ju jv jw bi translated"><strong class="is hj"> VPC ID: </strong>选择您在上一步中创建的VPC，例如:<code class="du kp kq kr ks b">vpc-identifier (tutorial-vpc)</code></li><li id="964d" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn ko ju jv jw bi translated"><strong class="is hj">子网名称:</strong>T1】</li><li id="2caf" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn ko ju jv jw bi translated"><strong class="is hj">可用区:</strong> <code class="du kp kq kr ks b">us-east-1b</code></li></ul><p id="15f8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="ku">注意:选择一个不同于您为第一个专用子网选择的可用性区域。</em></p><ul class=""><li id="b7e1" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn ko ju jv jw bi translated"><strong class="is hj"> IPv4 CIDR块:</strong> <code class="du kp kq kr ks b">10.0.2.0/24</code></li></ul><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ky"><img src="../Images/5619a4f66cd2983b21843c0314ea4979.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZZQmJjhUEJJIyOrb-ZSUyA.png"/></div></div></figure><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kz"><img src="../Images/51afc2d064919efe23d7018871952962.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OSZ1yfzb-JdODLFx0i_Scw.png"/></div></div></figure><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es la"><img src="../Images/7eddea07fc2d335b70fa589f131b5e1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O26OqIRxPdSCyiFGJ5udXw.png"/></div></div></figure><p id="8805" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，我们需要确保第二个专用子网使用与我们创建的第一个子网相同的路由表。</p><p id="feae" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">转到VPC仪表板，选择子网，然后选择您为VPC创建的第一个专用子网<code class="du kp kq kr ks b">Tutorial private 1</code>。</p><p id="bbef" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在子网列表下方，您会看到路由表选项卡。</p><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lb"><img src="../Images/db158e0a07ff3a5f2c387e16294d21a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oI0HatCt7-E7-Tt4wbYYiA.png"/></div></div></figure><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lc"><img src="../Images/1fa7cbf341bb6de434d4d8370afd2a31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BX0qdwRVlO_qv-xTp27dew.png"/></div></div></figure><p id="2eaa" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们的公共网络服务器需要一个VPC安全组。</p><p id="c6a0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为公共访问创建安全组。要连接到VPC中的公共实例，需要向VPC安全组添加入站规则，以允许来自internet的流量进行连接。</p><p id="cf0f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">返回VPC仪表板，选择安全组，然后<em class="ku">创建安全组</em>。</p><ul class=""><li id="e004" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn ko ju jv jw bi translated">在<strong class="is hj">创建安全组</strong>页面上，设置这些值:</li><li id="d285" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn ko ju jv jw bi translated"><strong class="is hj">安全组名称:</strong> <code class="du kp kq kr ks b">tutorial-securitygroup</code></li><li id="3ec1" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn ko ju jv jw bi translated"><strong class="is hj">描述:</strong>T6】</li><li id="d00a" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn ko ju jv jw bi translated"><strong class="is hj"> VPC: </strong>选择您之前创建的VPC，例如:<code class="du kp kq kr ks b">vpc-identifier (tutorial-vpc)</code></li></ul><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ld"><img src="../Images/46b167a1c26eafbfd0bb53a022377658.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-eidG1JtzoVlmC8GTHJGew.png"/></div></div></figure><p id="684d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在我们添加一些入站规则。</p><p id="ff31" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">添加规则、SSH和MyIP。然后是HTTP和source 0.0.0.0/0</p><p id="fdb0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一旦完成，<em class="ku">创建安全组</em>。</p><p id="034d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，我们需要一个用于私有数据库访问的安全组。</p><ul class=""><li id="f19a" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn ko ju jv jw bi translated">在<strong class="is hj">创建安全组</strong>页面上，设置这些值:</li><li id="2fd9" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn ko ju jv jw bi translated"><strong class="is hj">安全组名称:</strong> <code class="du kp kq kr ks b">tutorial-db-securitygroup</code></li><li id="8373" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn ko ju jv jw bi translated"><strong class="is hj">描述:</strong>T9】</li><li id="c14d" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn ko ju jv jw bi translated"><strong class="is hj"> VPC: </strong>选择您之前创建的VPC，例如:<code class="du kp kq kr ks b">vpc-identifier (tutorial-vpc)</code></li></ul><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es le"><img src="../Images/36076545b3aa3ea397d5f0122dc9958e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zjJg94JEe9NkyayZH6hh1g.png"/></div></div></figure><p id="8a3c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在<strong class="is hj">入站规则</strong>部分，选择<strong class="is hj">添加规则</strong>。</p><ul class=""><li id="9174" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn ko ju jv jw bi translated">为新的入站规则设置以下值，以允许来自EC2实例的MySQL流量通过端口3306。如果这样做，就可以从web服务器连接到DB实例，将数据从web应用程序存储和检索到数据库中。</li><li id="16d9" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn ko ju jv jw bi translated"><strong class="is hj">类型:</strong>T11】</li><li id="603a" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn ko ju jv jw bi translated"><strong class="is hj"> Source: </strong>您之前在本教程中创建的<code class="du kp kq kr ks b">tutorial-securitygroup</code>安全组的标识符，例如:<code class="du kp kq kr ks b">sg-9edd5cfb</code>。</li></ul><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lf"><img src="../Images/f0c609dfa4b37e9f79ad919ecb79b9d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J7M0IrfywE6iIbVt9ND8Og.png"/></div></div></figure><p id="b565" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，我们需要为数据库实例创建一个子网组。转到亚马逊RDS。选择左侧的子网组选项。</p><figure class="kd ke kf kg fd ij er es paragraph-image"><div class="er es lg"><img src="../Images/392a840886a3bb41293145f11f8b79d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1374/format:webp/1*p7z4QXid2FoFaejWFpb6iA.png"/></div></figure><ul class=""><li id="8c73" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn ko ju jv jw bi translated">选择<strong class="is hj">创建数据库子网组</strong>。</li><li id="66dc" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn ko ju jv jw bi translated">在<strong class="is hj">创建数据库子网组</strong>页面上，在<strong class="is hj">子网组详细信息</strong>中设置这些值:</li><li id="4204" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn ko ju jv jw bi translated"><strong class="is hj">姓名:</strong>T2】</li><li id="2e05" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn ko ju jv jw bi translated"><strong class="is hj">描述:</strong>T3】</li><li id="fcc6" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn ko ju jv jw bi translated"><strong class="is hj">VPC:</strong>T4】</li></ul><figure class="kd ke kf kg fd ij er es paragraph-image"><div class="er es lh"><img src="../Images/e8b929b18ebbec5cc9d66a30489da221.png" data-original-src="https://miro.medium.com/v2/resize:fit:1380/format:webp/1*_RB2g34HaIT5Mk7Fe9SXTw.png"/></div></figure><ul class=""><li id="31a6" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn ko ju jv jw bi translated">在<strong class="is hj">添加子网</strong>部分，选择<strong class="is hj">可用区域</strong>和<strong class="is hj">子网</strong>。</li><li id="aee8" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn ko ju jv jw bi translated">对于本教程，为<strong class="is hj">可用区域</strong>选择<code class="du kp kq kr ks b">us-west-2a</code>和<code class="du kp kq kr ks b">us-west-2b</code>。接下来，对于<strong class="is hj">子网</strong>，为IPv4 CIDR块10.0.0.0/24、10.0.1.0/24和10.0.2.0/24选择子网。</li></ul><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es li"><img src="../Images/368bf8e6f5c356c6710827b07c336bc3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xTq2YVFKxfgNWygS60MWDA.png"/></div></div></figure><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lj"><img src="../Images/d85e0adc53e7bbe98446084da2b8da3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*03Q25gPrmInrxaelNAZ5hA.png"/></div></div></figure><p id="23d8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，我们终于准备好创建数据库实例了</p><p id="87be" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">回到RDS，选择<em class="ku">创建数据库</em>。</p><p id="c5bc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在<strong class="is hj">创建数据库</strong>页面，如下图所示，确保选择<strong class="is hj">标准创建</strong>选项，然后选择<strong class="is hj"> MySQL </strong>。</p><ul class=""><li id="c413" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn ko ju jv jw bi translated">在<strong class="is hj">模板</strong>部分，选择<strong class="is hj">自由层</strong>。</li><li id="acd8" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn ko ju jv jw bi translated">在<strong class="is hj">设置</strong>部分，设置这些值:</li><li id="bdaf" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn ko ju jv jw bi translated"><strong class="is hj">数据库实例标识符</strong> — <code class="du kp kq kr ks b">tutorial-db-instance</code></li><li id="7136" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn ko ju jv jw bi translated"><strong class="is hj">主用户名</strong> — <code class="du kp kq kr ks b">tutorial_user</code></li><li id="6a5a" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn ko ju jv jw bi translated"><strong class="is hj">自动生成密码</strong> —禁用该选项。</li><li id="bb4b" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn ko ju jv jw bi translated"><strong class="is hj">主密码</strong> —选择一个密码。</li><li id="a025" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn ko ju jv jw bi translated"><strong class="is hj">确认密码</strong> —重新输入密码。</li></ul><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lk"><img src="../Images/ab750fcfbe0ce973990f519b5a827e97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N4DksfdU4-SZjt2dplFI4g.png"/></div></div></figure><p id="deac" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在<strong class="is hj"> DB实例类</strong>部分，启用<strong class="is hj">包括上一代类</strong>，并设置这些值:</p><ul class=""><li id="d132" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn ko ju jv jw bi translated"><strong class="is hj">突发类(包括t类)</strong></li><li id="b886" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn ko ju jv jw bi translated"><strong class="is hj"> db.t2.micro </strong></li></ul><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ll"><img src="../Images/07301fa1009a27a3ad016181ea0bf512.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6a9e8GYe7-T7ukRfDWCkXw.png"/></div></div></figure><p id="836b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在<strong class="is hj">储存</strong>和<strong class="is hj">可用性&amp;耐久性</strong>部分，使用默认值。</p><p id="85f3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在<strong class="is hj">连通性</strong>部分，设置这些值:</p><ul class=""><li id="951e" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn ko ju jv jw bi translated"><strong class="is hj">虚拟私有云(VPC) </strong> —选择一个既有公共子网又有私有子网的现有VPC，例如<code class="du kp kq kr ks b">tutorial-vpc</code> (vpc- <code class="du kp kq kr ks b">identifier</code>)</li><li id="2a2a" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn ko ju jv jw bi translated"><strong class="is hj">子网组</strong>—VPC的数据库子网组，如<code class="du kp kq kr ks b">tutorial-db-subnet-group</code></li><li id="bf55" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn ko ju jv jw bi translated"><strong class="is hj">公共访问</strong> — <strong class="is hj">否</strong></li><li id="fdc3" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn ko ju jv jw bi translated"><strong class="is hj"> VPC安全组</strong> — <strong class="is hj">选择已有的</strong></li><li id="a86d" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn ko ju jv jw bi translated"><strong class="is hj">现有的VPC安全组</strong> —选择一个为私人访问配置的现有VPC安全组，例如<code class="du kp kq kr ks b">tutorial-db-securitygroup</code></li><li id="0712" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn ko ju jv jw bi translated">通过选择与每个安全组相关联的<strong class="is hj"> X </strong>，删除其他安全组，例如默认安全组。</li><li id="3e5d" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn ko ju jv jw bi translated"><strong class="is hj">可用区域</strong> — <strong class="is hj">无偏好</strong></li><li id="1dc1" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn ko ju jv jw bi translated">打开<strong class="is hj">附加配置</strong>，确保<strong class="is hj">数据库端口</strong>使用默认值<code class="du kp kq kr ks b">3306</code>。</li></ul><figure class="kd ke kf kg fd ij er es paragraph-image"><div class="er es lm"><img src="../Images/dbb9c51c845a549a9a9b73f49e154d65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1392/format:webp/1*dXdtQP2H9id9FuYTzhQfmw.png"/></div></figure><p id="ec0c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在<strong class="is hj">数据库认证</strong>部分，确保选择<strong class="is hj">密码认证</strong>。</p><p id="6a28" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">打开<strong class="is hj">附加配置</strong>部分，输入<code class="du kp kq kr ks b">sample</code>作为<strong class="is hj">初始数据库名称</strong>。保留其他选项的默认设置。</p><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ln"><img src="../Images/0decc9efbb8decb3a57ac1aec28ac6a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eRd3VdEKBuiao5pWR4ujEQ.png"/></div></div></figure><p id="518d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要创建MySQL数据库实例，请选择<strong class="is hj">创建数据库</strong>。</p><p id="a165" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您的新DB实例出现在<strong class="is hj">数据库</strong>列表中，状态为<strong class="is hj">正在创建</strong>。</p><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lo"><img src="../Images/d0c52f28f8ec7a932e609f4395b45f04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9Nn8X07RhlIRCrGyprqhKw.png"/></div></div></figure><p id="4b22" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">等待新DB实例的<strong class="is hj">状态</strong>显示为<strong class="is hj">可用</strong>。然后选择数据库实例名以显示其详细信息。</p><p id="003a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在<strong class="is hj">连接&amp;安全</strong>部分，查看DB实例的<strong class="is hj">端点</strong>和<strong class="is hj">端口</strong>。</p><figure class="kd ke kf kg fd ij er es paragraph-image"><div class="er es lp"><img src="../Images/7d699e1a0122361bf0acbd7110aad9f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1316/format:webp/1*W_2YGvBV5Ai_OqdVFTsfHA.png"/></div></figure><p id="71d7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您将需要它将您的web服务器连接到您的数据库实例。</p><p id="2d76" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在下一部分中，我们将创建EC2实例并安装web服务器。</p><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lq"><img src="../Images/652333489c65e1c4c6ae91a9a68497a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1Okx0KRgzlXIXmGAQAa38w.png"/></div></div></figure><p id="3a3f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后选择免费层亚马逊Linux 2 AMI。</p><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lr"><img src="../Images/2886a2fe3746cb36fd40fd4f6209bff7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u8630AAPRt8IMGOB1K7t9A.png"/></div></div></figure><p id="5514" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后，停留在自由层，选择t2 micro作为您的实例类型。</p><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ls"><img src="../Images/19a2a22f7f1eb0b87841c1e99212cc45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*mqfRRAEqGBs_clxw.png"/></div></div></figure><p id="fbb7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在<strong class="is hj">配置实例详细信息</strong>页面上，如下所示，设置这些值并将其他值保留为默认值:</p><ul class=""><li id="56f6" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn ko ju jv jw bi translated"><strong class="is hj">网络:</strong>选择带有您为DB实例选择的公共和私有子网的VPC，例如在<a class="ae lt" href="https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/CHAP_Tutorials.WebServerDB.CreateVPC.html#CHAP_Tutorials.WebServerDB.CreateVPC.VPCAndSubnets" rel="noopener ugc nofollow" target="_blank">创建带有私有和公共子网的VPC</a>中创建的<code class="du kp kq kr ks b">vpc-identifier | tutorial-vpc</code>。</li><li id="ca75" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn ko ju jv jw bi translated"><strong class="is hj">子网:</strong>选择一个已有的公共子网，比如在<a class="ae lt" href="https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/CHAP_Tutorials.WebServerDB.CreateVPC.html#CHAP_Tutorials.WebServerDB.CreateVPC.SecurityGroupEC2" rel="noopener ugc nofollow" target="_blank">为公共web服务器</a>创建一个VPC安全组中创建的<code class="du kp kq kr ks b">subnet-identifier | Tutorial public | us-west-2a</code>。</li><li id="b73f" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn ko ju jv jw bi translated"><strong class="is hj">自动分配公共IP: </strong>选择<strong class="is hj">启用</strong>。</li></ul><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es la"><img src="../Images/dcc2d42d86b04d7444a4e66f0c6640ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZGXFV6LDC2fdRYeBI4YyTQ.png"/></div></div></figure><p id="074f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">选择下一步:添加存储。保持一切默认，然后下一步:添加标签。</p><p id="e6ff" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">选择<strong class="is hj">下一步:配置安全组</strong>。</p><p id="8657" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在<strong class="is hj">配置安全组</strong>页面，如下图所示，选择<strong class="is hj">选择现有安全组</strong>。然后选择一个现有的安全组，如<code class="du kp kq kr ks b">tutorial-securitygroup</code></p><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lu"><img src="../Images/c92fcde6f43e617901d69790293cc8e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0GKTiG4kjtLKSJM4RsqQnA.png"/></div></div></figure><p id="b51a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后复习，发动。</p><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lv"><img src="../Images/773aaa1485da362fbb3ab092e6175050.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oN6Kc0odZNZ8OuqIml_5ZA.png"/></div></div></figure><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lw"><img src="../Images/cf82358b6c3e9972a6c43150ba63ea93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Me4amyfDxhtPJSCPbpp0Mw.png"/></div></div><figcaption class="kh ki et er es kj kk bd b be z dx">Success</figcaption></figure><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lx"><img src="../Images/359076116253762e24708c50547366b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uu37D2wWMP9VTL3StRVGXw.png"/></div></div><figcaption class="kh ki et er es kj kk bd b be z dx">Our instance is now running</figcaption></figure><p id="b55c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们安装一个Apache web服务器。我们将通过SSH连接到我们的新实例。</p><p id="8a85" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">正确的连接方式是</p><p id="ca4a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="ku">ssh-I/path/my-key-pair . PEM my-instance-用户名@ my-instance-public-DNS-name</em></p><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ly"><img src="../Images/a56bbd428b7ed62fa7cc4b80282f1c04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DNA8XVx6W3xmJjtuDLYcSQ.png"/></div></div><figcaption class="kh ki et er es kj kk bd b be z dx">you can see I chanched permissions on my pem file with chmod 400</figcaption></figure><p id="558c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">通过更新EC2实例上的软件，获得最新的错误修复和安全更新。为此，请使用以下命令:</p><p id="6275" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><code class="du kp kq kr ks b">$ sudo yum update -y</code></p><p id="613d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">更新完成后，使用<code class="du kp kq kr ks b">amazon-linux-extras install</code>命令安装PHP软件。此命令同时安装多个软件包和相关依赖项。</p><pre class="kd ke kf kg fd lz ks ma mb aw mc bi"><span id="7e03" class="md me hi ks b fi mf mg l mh mi">$ sudo amazon-linux-extras install -y lamp-mariadb10.2-php7.2 php7.2</span></pre><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mj"><img src="../Images/b8d692572d369a3890313439f81bf9eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vcfMCqst7cDASAAmx0WwOA.png"/></div></div></figure><p id="3c11" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">安装Apache web服务器。</p><p id="6ba8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><code class="du kp kq kr ks b">$ sudo yum install -y httpd</code></p><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mk"><img src="../Images/3fa14ef2376f9b9671736267f164da0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o-5IW_oX4k-q82WcV3JXvQ.png"/></div></div></figure><p id="507d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">使用下面显示的命令启动web服务器。</p><pre class="kd ke kf kg fd lz ks ma mb aw mc bi"><span id="b2c9" class="md me hi ks b fi mf mg l mh mi">$ sudo systemctl start httpd</span><span id="385a" class="md me hi ks b fi ml mg l mh mi">and then set it to start on boot.</span><span id="f466" class="md me hi ks b fi ml mg l mh mi">$ sudo systemctl enable httpd</span></pre><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mm"><img src="../Images/bc349f2af65418c8942baf81f4fe3e85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HLM8SW9V5hgvZmC59xCk-g.png"/></div></div></figure><p id="74a1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">我们需要为Apache web服务器设置文件权限</strong></p><p id="8dfd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">将<code class="du kp kq kr ks b">ec2-user</code>用户添加到<code class="du kp kq kr ks b">apache</code>组。</p><p id="2362" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><code class="du kp kq kr ks b">$ sudo usermod -a -G apache ec2-user</code></p><p id="4bb3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">注销以刷新您的权限，并加入新的<code class="du kp kq kr ks b">apache</code>组。</p><p id="f29b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><code class="du kp kq kr ks b">$ exit</code></p><figure class="kd ke kf kg fd ij er es paragraph-image"><div class="er es mn"><img src="../Images/4f7d0c723370d444bb190289f5d7736b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1016/format:webp/1*Qg8p9YuOvzvRuUg_p-mldQ.png"/></div></figure><p id="9e00" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">再次登录并使用<code class="du kp kq kr ks b">groups</code>命令验证<code class="du kp kq kr ks b">apache</code>组是否存在。</p><pre class="kd ke kf kg fd lz ks ma mb aw mc bi"><span id="3e66" class="md me hi ks b fi mf mg l mh mi">$ groups</span></pre><p id="1200" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">将<code class="du kp kq kr ks b">/var/www</code>目录及其内容的组所有权更改为<code class="du kp kq kr ks b">apache</code>组。</p><p id="833c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><code class="du kp kq kr ks b">$ sudo chown -R ec2-user:apache /var/www</code></p><p id="6c4c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">更改<code class="du kp kq kr ks b">/var/www</code>及其子目录的目录权限，以添加组写权限，并在以后创建的子目录上设置组ID。</p><p id="e0e6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><code class="du kp kq kr ks b">$ sudo chmod 2775 /var/www find /var/www -type d -exec sudo chmod 2775 {} \;</code></p><p id="e39b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">递归更改<code class="du kp kq kr ks b">/var/www</code>目录及其子目录中文件的权限，以添加组写权限。</p><p id="385f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><code class="du kp kq kr ks b">$ find /var/www -type f -exec sudo chmod 0664 {} \;</code></p><p id="7be5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，<code class="du kp kq kr ks b">ec2-user</code>(以及<code class="du kp kq kr ks b">apache</code>组的任何未来成员)可以添加、删除和编辑Apache文档根目录中的文件，使您能够添加内容，比如静态网站或PHP应用程序。</p><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mo"><img src="../Images/f0dc934387b66f63ff695b3895eff141.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mowRpj_Uvm51CFHX4ea6Rw.png"/></div></div></figure><p id="7d05" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，我们将Apache web服务器连接到DB实例。</p><p id="d18d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">向连接到数据库实例的Apache web服务器添加内容</strong></p><p id="ed08" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当仍然连接到EC2实例时，将目录更改为<code class="du kp kq kr ks b">/var/www</code>并创建一个名为<code class="du kp kq kr ks b">inc</code>的新子目录。</p><p id="42e5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><code class="du kp kq kr ks b">$ cd /var/www mkdir inc cd inc</code></p><p id="a461" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在<code class="du kp kq kr ks b">inc</code>目录下创建一个名为<code class="du kp kq kr ks b">dbinfo.inc</code>的新文件，然后通过调用nano(或者您选择的编辑器)来编辑该文件。</p><p id="d07b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><code class="du kp kq kr ks b">$ &gt;dbinfo.inc</code></p><p id="c67a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><code class="du kp kq kr ks b">$ nano dbinfo.inc</code></p><p id="565a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">将以下内容添加到<code class="du kp kq kr ks b">dbinfo.inc</code>文件中。这里，<code class="du kp kq kr ks b">db_instance_endpoint</code>是您的DB实例端点，没有端口，<code class="du kp kq kr ks b">master password</code>是您的DB实例的主密码。</p><pre class="kd ke kf kg fd lz ks ma mb aw mc bi"><span id="ba3b" class="md me hi ks b fi mf mg l mh mi">&lt;?php<br/><br/>define('DB_SERVER', 'db_instance_endpoint');<br/>define('DB_USERNAME', 'tutorial_user');<br/>define('DB_PASSWORD', 'master password');<br/>define('DB_DATABASE', 'sample');<br/><br/>?&gt;</span></pre><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mp"><img src="../Images/5af1870e7959ce22ac6a24853ef7f73f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W8HM-MXGnY9XB63UHRHq1A.png"/></div></div></figure><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mq"><img src="../Images/d249d155523b282e8eb18214adacbec5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tAgXQJezwTzkuCsZcLwdSQ.png"/></div></div></figure><p id="950c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">保存并关闭<code class="du kp kq kr ks b">dbinfo.inc</code>文件。</p><p id="b973" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">将目录更改为<code class="du kp kq kr ks b">/var/www/html</code>。</p><p id="ae00" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><code class="du kp kq kr ks b">cd /var/www/html</code></p><p id="5901" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在<code class="du kp kq kr ks b">html</code>目录下新建一个名为<code class="du kp kq kr ks b">SamplePage.php</code>的文件，然后通过调用nano(或者你选择的编辑器)来编辑这个文件。</p><p id="57e7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><code class="du kp kq kr ks b">$ &gt;SamplePage.php</code></p><p id="28a9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><code class="du kp kq kr ks b">$ nano SamplePage.php</code></p><p id="76b6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">将以下内容添加到<code class="du kp kq kr ks b">SamplePage.php</code>文件中:</p><pre class="kd ke kf kg fd lz ks ma mb aw mc bi"><span id="071d" class="md me hi ks b fi mf mg l mh mi">&lt;?php include "../inc/dbinfo.inc"; ?&gt;<br/>&lt;html&gt;<br/>&lt;body&gt;<br/>&lt;h1&gt;Sample page&lt;/h1&gt;<br/>&lt;?php<br/><br/>  /* Connect to MySQL and select the database. */<br/>  $connection = mysqli_connect(DB_SERVER, DB_USERNAME, DB_PASSWORD);<br/><br/>  if (mysqli_connect_errno()) echo "Failed to connect to MySQL: " . mysqli_connect_error();<br/><br/>  $database = mysqli_select_db($connection, DB_DATABASE);<br/><br/>  /* Ensure that the EMPLOYEES table exists. */<br/>  VerifyEmployeesTable($connection, DB_DATABASE);<br/><br/>  /* If input fields are populated, add a row to the EMPLOYEES table. */<br/>  $employee_name = htmlentities($_POST['NAME']);<br/>  $employee_address = htmlentities($_POST['ADDRESS']);<br/><br/>  if (strlen($employee_name) || strlen($employee_address)) {<br/>    AddEmployee($connection, $employee_name, $employee_address);<br/>  }<br/>?&gt;<br/><br/>&lt;!-- Input form --&gt;<br/>&lt;form action="&lt;?PHP echo $_SERVER['SCRIPT_NAME'] ?&gt;" method="POST"&gt;<br/>  &lt;table border="0"&gt;<br/>    &lt;tr&gt;<br/>      &lt;td&gt;NAME&lt;/td&gt;<br/>      &lt;td&gt;ADDRESS&lt;/td&gt;<br/>    &lt;/tr&gt;<br/>    &lt;tr&gt;<br/>      &lt;td&gt;<br/>        &lt;input type="text" name="NAME" maxlength="45" size="30" /&gt;<br/>      &lt;/td&gt;<br/>      &lt;td&gt;<br/>        &lt;input type="text" name="ADDRESS" maxlength="90" size="60" /&gt;<br/>      &lt;/td&gt;<br/>      &lt;td&gt;<br/>        &lt;input type="submit" value="Add Data" /&gt;<br/>      &lt;/td&gt;<br/>    &lt;/tr&gt;<br/>  &lt;/table&gt;<br/>&lt;/form&gt;<br/><br/>&lt;!-- Display table data. --&gt;<br/>&lt;table border="1" cellpadding="2" cellspacing="2"&gt;<br/>  &lt;tr&gt;<br/>    &lt;td&gt;ID&lt;/td&gt;<br/>    &lt;td&gt;NAME&lt;/td&gt;<br/>    &lt;td&gt;ADDRESS&lt;/td&gt;<br/>  &lt;/tr&gt;<br/><br/>&lt;?php<br/><br/>$result = mysqli_query($connection, "SELECT * FROM EMPLOYEES");<br/><br/>while($query_data = mysqli_fetch_row($result)) {<br/>  echo "&lt;tr&gt;";<br/>  echo "&lt;td&gt;",$query_data[0], "&lt;/td&gt;",<br/>       "&lt;td&gt;",$query_data[1], "&lt;/td&gt;",<br/>       "&lt;td&gt;",$query_data[2], "&lt;/td&gt;";<br/>  echo "&lt;/tr&gt;";<br/>}<br/>?&gt;<br/><br/>&lt;/table&gt;<br/><br/>&lt;!-- Clean up. --&gt;<br/>&lt;?php<br/><br/>  mysqli_free_result($result);<br/>  mysqli_close($connection);<br/><br/>?&gt;<br/><br/>&lt;/body&gt;<br/>&lt;/html&gt;<br/><br/><br/>&lt;?php<br/><br/>/* Add an employee to the table. */<br/>function AddEmployee($connection, $name, $address) {<br/>   $n = mysqli_real_escape_string($connection, $name);<br/>   $a = mysqli_real_escape_string($connection, $address);<br/><br/>   $query = "INSERT INTO EMPLOYEES (NAME, ADDRESS) VALUES ('$n', '$a');";<br/><br/>   if(!mysqli_query($connection, $query)) echo("&lt;p&gt;Error adding employee data.&lt;/p&gt;");<br/>}<br/><br/>/* Check whether the table exists and, if not, create it. */<br/>function VerifyEmployeesTable($connection, $dbName) {<br/>  if(!TableExists("EMPLOYEES", $connection, $dbName))<br/>  {<br/>     $query = "CREATE TABLE EMPLOYEES (<br/>         ID int(11) UNSIGNED AUTO_INCREMENT PRIMARY KEY,<br/>         NAME VARCHAR(45),<br/>         ADDRESS VARCHAR(90)<br/>       )";<br/><br/>     if(!mysqli_query($connection, $query)) echo("&lt;p&gt;Error creating table.&lt;/p&gt;");<br/>  }<br/>}<br/><br/>/* Check for the existence of a table. */<br/>function TableExists($tableName, $connection, $dbName) {<br/>  $t = mysqli_real_escape_string($connection, $tableName);<br/>  $d = mysqli_real_escape_string($connection, $dbName);<br/><br/>  $checktable = mysqli_query($connection,<br/>      "SELECT TABLE_NAME FROM information_schema.TABLES WHERE TABLE_NAME = '$t' AND TABLE_SCHEMA = '$d'");<br/><br/>  if(mysqli_num_rows($checktable) &gt; 0) return true;<br/><br/>  return false;<br/>}<br/>?&gt;</span></pre><p id="9db5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">保存并关闭<code class="du kp kq kr ks b">SamplePage.php</code>文件。</p><p id="07a7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">通过打开web浏览器并浏览到<code class="du kp kq kr ks b">http://EC2 instance endpoint/SamplePage.php</code>，验证您的web服务器是否成功连接到您的DB实例</p><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mr"><img src="../Images/a1bd12e35d0d75f51f9c5f5abb5077d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OaUGVvJv-EExsVsqIH4mKw.png"/></div></div><figcaption class="kh ki et er es kj kk bd b be z dx">Success!</figcaption></figure><p id="1349" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">感谢阅读！</p></div></div>    
</body>
</html>