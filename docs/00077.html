<html>
<head>
<title>Kloud Native JHipster</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">克鲁德本地人杰普斯特</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/kloud-native-jhipster-ba09b2ffbf63?source=collection_archive---------0-----------------------#2020-04-04">https://medium.com/geekculture/kloud-native-jhipster-ba09b2ffbf63?source=collection_archive---------0-----------------------#2020-04-04</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="e7fd" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated"><strong class="ak">杰普斯特♥弹簧靴♥ K8s </strong></h2></div><p id="e280" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">JHipster是一个开发人员友好的平台，用于引导、迭代、构建和部署基于云的本地Spring Boot服务。它还基于广泛使用的框架/库(如Angular、React等)为前端服务生成脚手架代码。它确实提供了与各种数据、日志和监控服务的集成接触点。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es jt"><img src="../Images/4f763003a9769d78c1909ebd24610a21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vRW0Xch3F37tSrkyFZXhpQ.png"/></div></div></figure><p id="1e12" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">随着时间的推移，脚手架支持被添加到跨各种本机云和平台部署生成的服务中。开发人员热爱JHipster，开发人员生产力是我们作为一个社区不断改进的核心价值之一。随着Kubernetes在企业不同角色中的知名度与日俱增，我们也增加了很多很酷的k8s友好特性。在这篇博客中，我们将关注各种k8s友好的生成器选项以及可供开发人员在私有云和公共云中快速迭代和测试任何开放的符合k8s的发行版的特性。</p><p id="35d0" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">结果:</strong></p><ul class=""><li id="7bcf" class="kf kg hi iz b ja jb jd je jg kh jk ki jo kj js kk kl km kn bi translated">了解各种K8s发电机选项</li><li id="3b4b" class="kf kg hi iz b ja ko jd kp jg kq jk kr jo ks js kk kl km kn bi translated">利用K8s友好的工具包加快发布速度</li></ul><p id="30cc" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">先决条件:</strong></p><ul class=""><li id="76de" class="kf kg hi iz b ja jb jd je jg kh jk ki jo kj js kk kl km kn bi translated">jhipster cli二进制文件在本地机器上</li></ul><p id="aa61" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="kt">注意，一旦使用jhipster-cli引导和构建了项目，我们将使用k8s生成器选项。K8s是JHipster支持生成部署工件的目标平台之一。</em></p><blockquote class="ku kv kw"><p id="1910" class="ix iy kt iz b ja jb ij jc jd je im jf kx jh ji jj ky jl jm jn kz jp jq jr js hb bi translated"><strong class="iz hj"> <em class="hi">波#1 </em> </strong></p></blockquote><pre class="ju jv jw jx fd la lb lc ld aw le bi"><span id="0dac" class="lf lg hi lb b fi lh li l lj lk">jhipster k8s | jhipster kubernetes</span></pre><p id="cca4" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们支持这个生成器选项已经有一段时间了。它提示您一系列问题，然后生成k8s清单和一个部署脚本，让您一次性部署服务。除了<code class="du ll lm ln lb b">kubectl create|apply</code>选项，我们最近增加了对使用流行的k8s工具包如<code class="du ll lm ln lb b">kustomize</code>和<code class="du ll lm ln lb b">skaffold</code>来扩展它的支持。</p><p id="6495" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您现在可以选择部署生成的清单，</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es lo"><img src="../Images/06ec39eeb90e6941c11162600478f63c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S7vaZ8wRuUfBlPU26-ibgg.png"/></div></div></figure><blockquote class="ku kv kw"><p id="72fc" class="ix iy kt iz b ja jb ij jc jd je im jf kx jh ji jj ky jl jm jn kz jp jq jr js hb bi translated">。/kubectl-apply.sh -f —使用标准的<code class="du ll lm ln lb b"><em class="hi">kubectl apply -f</em></code>选项</p></blockquote><p id="7b8d" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">和</p><blockquote class="ku kv kw"><p id="bcfa" class="ix iy kt iz b ja jb ij jc jd je im jf kx jh ji jj ky jl jm jn kz jp jq jr js hb bi translated">。/kubectl-apply.sh -k —使用<code class="du ll lm ln lb b"><em class="hi">kustomization</em></code>模板来保存更改</p></blockquote><p id="fd05" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">使用<code class="du ll lm ln lb b">skaffold</code>，现在您可以将您的工作目录转换为CI/CD源。当您处理源代码时，会不断地检测、构建和部署变更到平台上。开发人员只关注业务问题，而开发软件交付渠道被skaffold工具所拖累。</p><p id="73aa" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><code class="du ll lm ln lb b">skaffold dev</code>将您的工作目录转换为CI/CD源。如果开发人员在没有构建和部署开销的情况下不断迭代，这将是非常高效的。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es lp"><img src="../Images/0b34927d55a10ac0967b2a6299532e7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3A28p2YPmuXJDut3EQhE-g.png"/></div></div><figcaption class="lq lr et er es ls lt bd b be z dx">skaffold dev</figcaption></figure><blockquote class="ku kv kw"><p id="b462" class="ix iy kt iz b ja jb ij jc jd je im jf kx jh ji jj ky jl jm jn kz jp jq jr js hb bi translated"><strong class="iz hj"> <em class="hi">波#2 </em> </strong></p></blockquote><pre class="ju jv jw jx fd la lb lc ld aw le bi"><span id="7c2a" class="lf lg hi lb b fi lh li l lj lk">jhipster helm | jhipster kubernetes-helm</span></pre><p id="b1e4" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">舵发电机的支持已经有一段时间了。k8s generator很酷，但是我们所面临的挑战，甚至是我们今天在维护辅助服务清单方面所面临的问题。当您选择Kafka、Elastic、Mongo等服务时，我们面临着保持这些清单与上游兼容的问题。这是一项持续的维护开销，用于保持这些清单与上游同步。此外，大多数清单都非常简单，不建议用于生产。</p><p id="2dcf" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们现在有了舵发电机的解决方案。在引擎盖下，它为应用程序使用k8s generator，但辅助服务的清单是从上游稳定的helm源拉入的。这样，您就有了企业级稳定的服务清单，可以放心地将其投入生产。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es lu"><img src="../Images/684b960647927e23554c1700d45ec5e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9TbZUIDPt_vRGNGm0roWLQ.png"/></div></div></figure><p id="047e" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">除了应用程序和服务清单之外，它还生成一个命令，准备执行初始安装的脚本<code class="du ll lm ln lb b">helm-apply.sh</code></p><blockquote class="ku kv kw"><p id="8290" class="ix iy kt iz b ja jb ij jc jd je im jf kx jh ji jj ky jl jm jn kz jp jq jr js hb bi translated">helm-apply.sh -首次安装</p></blockquote><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es lv"><img src="../Images/b680eae47e81e088ac653ef09fa18bc3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WAW1fsRd00PkSmR1kEHHjw.png"/></div></div><figcaption class="lq lr et er es ls lt bd b be z dx">helm-apply.sh</figcaption></figure><p id="ae07" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">和<code class="du ll lm ln lb b">helm-upgrade.sh</code>用于随后的更新，因为您继续快速迭代和发展。</p><blockquote class="ku kv kw"><p id="a8e5" class="ix iy kt iz b ja jb ij jc jd je im jf kx jh ji jj ky jl jm jn kz jp jq jr js hb bi translated">helm-upgrade.sh -连续迭代</p></blockquote><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es lv"><img src="../Images/09f79e1f0788b43f172719d5d9c017ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lh6Iync0tm3n11TLAog_6g.png"/></div></div></figure><p id="1672" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">生成的脚本将支持helm2+和3+语义和语法。使用这个生成器的先决条件是在本地机器上有helm CLI，如果您打算使用helm2+，那么tiller应该部署在集群中。生成的服务清单在2+上没有任何问题，在3+上您可能会遇到一些问题，因为一些上游发行版还没有完全升级到3+兼容性。</p><blockquote class="ku kv kw"><p id="791d" class="ix iy kt iz b ja jb ij jc jd je im jf kx jh ji jj ky jl jm jn kz jp jq jr js hb bi translated"><strong class="iz hj"> <em class="hi">第三波</em> </strong></p></blockquote><pre class="ju jv jw jx fd la lb lc ld aw le bi"><span id="df77" class="lf lg hi lb b fi lh li l lj lk">jhipster knative | jhipster kubernetes-knative</span></pre><p id="7b9c" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们最近增加了对knative构造的支持。这仍然是实验性的。我们最近添加了它来为生成的应用程序生成knative <code class="du ll lm ln lb b">serving.knative.dev</code>服务生命周期。使用这个生成器的先决条件是istio，因为这个生成器为您的应用程序生成<code class="du ll lm ln lb b">istio</code>特定的虚拟服务和目的地规则相关的清单。今天它只支持<code class="du ll lm ln lb b">istio</code>，将来我们可能会增加对其他控制器的支持。这个发生器反过来利用<code class="du ll lm ln lb b">k8s</code>和<code class="du ll lm ln lb b">helm</code>。开发人员将被提示选择一个生成器，</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es lw"><img src="../Images/a8961c7986fab94b0d836d6650395e56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RW5AKYi0TB-EyFA97nuBmw.png"/></div></div><figcaption class="lq lr et er es ls lt bd b be z dx">jhipster knative</figcaption></figure><p id="e212" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">与其他生成器一样，如果您选择Kubernetes生成器，它确实通过<code class="du ll lm ln lb b">kubectl-knative-apply.sh</code>提供了一个推送部署，</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es lx"><img src="../Images/a9e6bd8eed2c43c45d23106b3fe56d5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FLyy9GlQ-2w8RAf0GPAnRA.png"/></div></div><figcaption class="lq lr et er es ls lt bd b be z dx">knative-k8s</figcaption></figure><p id="12f8" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果您选择<code class="du ll lm ln lb b">helm</code>生成器，它会为安装和更新生成脚本。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es ly"><img src="../Images/c1c7731af44e975b2b8a677fdb063786.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GwYTDpWoW1RQIL0vQhzudA.png"/></div></div><figcaption class="lq lr et er es ls lt bd b be z dx">knative-helm</figcaption></figure><blockquote class="ku kv kw"><p id="f6b1" class="ix iy kt iz b ja jb ij jc jd je im jf kx jh ji jj ky jl jm jn kz jp jq jr js hb bi translated"><strong class="iz hj">参考资料:<br/>吉斯特<br/></strong><a class="ae lz" href="https://www.jhipster.tech/" rel="noopener ugc nofollow" target="_blank">https://www.jhipster.tech/</a><strong class="iz hj"><br/>K8s发电机<br/></strong><a class="ae lz" href="https://www.jhipster.tech/kubernetes/" rel="noopener ugc nofollow" target="_blank">https://www.jhipster.tech/kubernetes/</a><strong class="iz hj"><br/>CLI:<br/></strong><a class="ae lz" href="https://www.jhipster.tech/installation/" rel="noopener ugc nofollow" target="_blank">https://www.jhipster.tech/installation/</a></p></blockquote></div></div>    
</body>
</html>