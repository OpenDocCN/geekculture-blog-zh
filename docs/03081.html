<html>
<head>
<title>Frequent Category Imputation (Missing Data Imputation Technique)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">频繁类别插补(缺失数据插补技术)</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/frequent-category-imputation-missing-data-imputation-technique-4d7e2b33daf7?source=collection_archive---------10-----------------------#2021-05-31">https://medium.com/geekculture/frequent-category-imputation-missing-data-imputation-technique-4d7e2b33daf7?source=collection_archive---------10-----------------------#2021-05-31</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="2edf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">插补是用缺失值的统计估计值替换缺失数据的行为。任何插补技术的目标都是产生可用于训练机器学习模型的</em> <strong class="ih hj"> <em class="jd">完整数据集</em> </strong> <em class="jd">。</em></p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/aa3853e54ae36dd081787cc5c4498226.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*RrpzwD6xOch6kCl2"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx">Photo by <a class="ae ju" href="https://unsplash.com/@ikukevk?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Kevin Ku</a> on <a class="ae ju" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="1949" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">模式插补包括用模式替换变量中所有出现的缺失值(NA)，换句话说，就是指</em> <strong class="ih hj"> <em class="jd">最频繁出现的值</em> </strong> <em class="jd">或</em> <strong class="ih hj"> <em class="jd">最频繁出现的类别</em> </strong> <em class="jd">。</em></p><blockquote class="jv jw jx"><p id="6825" class="if ig jd ih b ii ij ik il im in io ip jy ir is it jz iv iw ix ka iz ja jb jc hb bi translated"><strong class="ih hj">哪些变量可以用最频繁/模式插补进行插补？</strong></p></blockquote><p id="3695" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">虽然模式或最频繁值可以针对数字和分类变量进行计算，但实际上，我们只对分类变量使用这种技术。原因是对于数值型变量，均值或中位数往往更能代表总体的平均值。</em></p><blockquote class="jv jw jx"><p id="f06f" class="if ig jd ih b ii ij ik il im in io ip jy ir is it jz iv iw ix ka iz ja jb jc hb bi translated"><strong class="ih hj">何时使用模式/最频繁类别插补？</strong></p></blockquote><p id="dd62" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">数据完全随机缺失。不超过5%的变量包含缺失数据。</em></p><blockquote class="jv jw jx"><p id="495d" class="if ig jd ih b ii ij ik il im in io ip jy ir is it jz iv iw ix ka iz ja jb jc hb bi translated"><strong class="ih hj">优点</strong></p></blockquote><p id="d39e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">容易实现。<br/>这是获取完整数据集的最快方法。<br/>它可以集成到生产中(在模型部署期间)。</em></p><blockquote class="jv jw jx"><p id="ba3e" class="if ig jd ih b ii ij ik il im in io ip jy ir is it jz iv iw ix ka iz ja jb jc hb bi translated"><strong class="ih hj">限制</strong></p></blockquote><p id="145f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">它扭曲了最频繁标签与数据集中其他变量的关系。<br/>如果有大量NA，可能会导致最常用标签的过度显示。</em></p><h1 id="789d" class="kb kc hi bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated"><strong class="ak">用Mode输入缺失值的演示。</strong></h1><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es kz"><img src="../Images/469bb5a3a726f53a273d1a5eba0d7c1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1208/format:webp/1*bgzrL1JLxno2igi4M20tgA.png"/></div></figure><p id="d5a2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">我们将使用房价数据集来演示如何对分类变量进行模式插补。</em></p><p id="aec3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="jd">下载数据集请参考:</em></strong><a class="ae ju" href="https://www.kaggle.com/c/house-prices-advanced-regression-techniques" rel="noopener ugc nofollow" target="_blank">房价数据集</a></p><p id="fd44" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="jd">导入所需库:</em> </strong></p><pre class="jf jg jh ji fd la lb lc ld aw le bi"><span id="ca19" class="lf kc hi lb b fi lg lh l li lj">import pandas as pd  <br/>import numpy as np</span><span id="a3fc" class="lf kc hi lb b fi lk lh l li lj">import matplotlib.pyplot as plt </span><span id="6453" class="lf kc hi lb b fi lk lh l li lj"># To split the datasets<br/>from sklearn.model_selection import train_test_split</span></pre><p id="0d87" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="jd">定义要使用的列:</em> </strong></p><p id="4fbb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd"> BsmtQual:评估地下室的高度。(分类变量)</em></p><p id="f466" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">壁炉质量。(分类变量)</p><pre class="jf jg jh ji fd la lb lc ld aw le bi"><span id="e50a" class="lf kc hi lb b fi lg lh l li lj"># Defining columns to use from the house price dataset<br/>cols_to_use = ['BsmtQual', 'FireplaceQu', 'SalePrice']</span><span id="e041" class="lf kc hi lb b fi lk lh l li lj"># Reading the dataset using pandas <br/>data = pd.read_csv('../houseprice.csv', usecols=cols_to_use)</span><span id="d82b" class="lf kc hi lb b fi lk lh l li lj">data.head()</span></pre><p id="f547" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="jd">输出:</em> </strong></p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es ll"><img src="../Images/725271850a9016562b18d5951e0a16e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*cYU4I3xvZhHXX1MlSuWUew.jpeg"/></div><figcaption class="jq jr et er es js jt bd b be z dx">First 5 records of Dataset</figcaption></figure><blockquote class="jv jw jx"><p id="b7d8" class="if ig jd ih b ii ij ik il im in io ip jy ir is it jz iv iw ix ka iz ja jb jc hb bi translated">我们有缺失的数据吗？</p></blockquote><pre class="jf jg jh ji fd la lb lc ld aw le bi"><span id="320e" class="lf kc hi lb b fi lg lh l li lj"># let's inspect the percentage of missing values in each variable<br/>data.isnull().mean()</span><span id="fb5b" class="lf kc hi lb b fi lk lh l li lj">BsmtQual       0.025342<br/>FireplaceQu    0.472603<br/>SalePrice      0.000000<br/>dtype: float64</span></pre><p id="dabc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">变量BsmtQual仅包含少量NA (2.5 %)的观察值，因此，用最频繁类别的值替换这些观察值是一个好方法。</em></p><p id="0f24" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">另一方面，变量FireplaceQu在几乎一半(47.26 %)的观测值中包含缺失数据。因此，用最频繁的类别替换那些最有可能会扭曲最频繁的类别与销售价格之间的关系。</p><blockquote class="jv jw jx"><p id="1a67" class="if ig jd ih b ii ij ik il im in io ip jy ir is it jz iv iw ix ka iz ja jb jc hb bi translated">一<strong class="ih hj">计算重要:</strong></p></blockquote><p id="cbd9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">插补应该在训练集上完成，然后传播到测试集。这意味着必须从训练集中选择最频繁的类别，并用于替换训练集和测试集中的NA。</em></p><blockquote class="jv jw jx"><p id="487f" class="if ig jd ih b ii ij ik il im in io ip jy ir is it jz iv iw ix ka iz ja jb jc hb bi translated"><strong class="ih hj">拆分成训练和测试数据集:</strong></p></blockquote><pre class="jf jg jh ji fd la lb lc ld aw le bi"><span id="ca63" class="lf kc hi lb b fi lg lh l li lj"># let's separate into training and testing set</span><span id="8797" class="lf kc hi lb b fi lk lh l li lj">X_train, X_test, y_train, y_test = train_test_split(<br/>    data,<br/>    data['SalePrice'], # target<br/>    test_size=0.3, # percentage of observations in the test set<br/>    random_state=0)</span></pre><h1 id="cc53" class="kb kc hi bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated"><em class="lm"> BsmtQual(地下室质量):</em></h1><blockquote class="jv jw jx"><p id="0042" class="if ig jd ih b ii ij ik il im in io ip jy ir is it jz iv iw ix ka iz ja jb jc hb bi translated"><strong class="ih hj">让我们提醒自己缺失值的百分比。</strong></p></blockquote><pre class="jf jg jh ji fd la lb lc ld aw le bi"><span id="90f2" class="lf kc hi lb b fi lg lh l li lj">X_train['BsmtQual'].isnull().mean()</span><span id="07bf" class="lf kc hi lb b fi lk lh l li lj">0.023483365949119372         </span></pre><blockquote class="jv jw jx"><p id="3f23" class="if ig jd ih b ii ij ik il im in io ip jy ir is it jz iv iw ix ka iz ja jb jc hb bi translated">L <strong class="ih hj"> ets检查BsmtQual中每个类别的观察值数量。</strong></p></blockquote><pre class="jf jg jh ji fd la lb lc ld aw le bi"><span id="dcce" class="lf kc hi lb b fi lg lh l li lj"># value_counts() counts the amount of houses that show each of the labels in the variable indicated below</span><span id="7b04" class="lf kc hi lb b fi lk lh l li lj">X_train['BsmtQual'].value_counts().sort_values(ascending=False).plot.bar()<br/>plt.xlabel('BsmtQual')<br/>plt.ylabel('Number of houses')</span></pre><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es ln"><img src="../Images/efd2269608ba5c98953cbbbecae6d0ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1194/format:webp/1*a8mvMpfWRxha41Q5OhpsnA.png"/></div></figure><blockquote class="jv jw jx"><p id="ad24" class="if ig jd ih b ii ij ik il im in io ip jy ir is it jz iv iw ix ka iz ja jb jc hb bi translated"><strong class="ih hj">我们来找一下BsmtQual出现频率最高的类别。</strong></p></blockquote><pre class="jf jg jh ji fd la lb lc ld aw le bi"><span id="b26c" class="lf kc hi lb b fi lg lh l li lj">X_train['BsmtQual'].mode()<br/></span><span id="a5ab" class="lf kc hi lb b fi lk lh l li lj">0    TA<br/>dtype: object</span></pre><p id="9e98" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="jd">观察:</em></strong><em class="jd">BsmtQual中出现频率最高的类别是TA( </em>平均/典型<em class="jd">)。</em></p><blockquote class="jv jw jx"><p id="b410" class="if ig jd ih b ii ij ik il im in io ip jy ir is it jz iv iw ix ka iz ja jb jc hb bi translated"><strong class="ih hj">绘制目标变量相对于BsmtQual的分布。</strong></p></blockquote><pre class="jf jg jh ji fd la lb lc ld aw le bi"><span id="685f" class="lf kc hi lb b fi lg lh l li lj">fig = plt.figure()<br/>ax = fig.add_subplot(111)<br/># select and plot houses with the most frequent label<br/>X_train[X_train[‘BsmtQual’]==’TA’][‘SalePrice’].plot(kind=’kde’, ax=ax)</span><span id="1912" class="lf kc hi lb b fi lk lh l li lj"># select and plot houses with missing data in the variable<br/>X_train[X_train[‘BsmtQual’].isnull()][‘SalePrice’].plot(kind=’kde’, ax=ax, color=’red’)</span><span id="53ac" class="lf kc hi lb b fi lk lh l li lj"># add the legend<br/>lines, labels = ax.get_legend_handles_labels()<br/>labels = [‘Houses with TA’, ‘Houses with NA’]<br/>ax.legend(lines, labels, loc=’best’)</span><span id="5c60" class="lf kc hi lb b fi lk lh l li lj"># add figure title<br/>plt.title(‘BsmtQual’)</span></pre><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es lo"><img src="../Images/da27cddae1ab19b547603a3757b271dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1104/format:webp/1*UgCoeBfjoqGV_Qp5qqwWlw.png"/></div></figure><p id="8492" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上图表明，缺少数据的房屋总体成本低于标有ta的房屋。因此，如果有大量NA，用TA替换缺失值可能会影响总体分布。</p><blockquote class="jv jw jx"><p id="3e17" class="if ig jd ih b ii ij ik il im in io ip jy ir is it jz iv iw ix ka iz ja jb jc hb bi translated">让我们保留最频繁类别的SalePrice的原始分布供以后使用。</p></blockquote><pre class="jf jg jh ji fd la lb lc ld aw le bi"><span id="9f8b" class="lf kc hi lb b fi lg lh l li lj"># the use of tmp is common to name temporal variables</span><span id="77fa" class="lf kc hi lb b fi lk lh l li lj">tmp = X_train[X_train['BsmtQual']=='TA']['SalePrice']</span></pre><blockquote class="jv jw jx"><p id="e867" class="if ig jd ih b ii ij ik il im in io ip jy ir is it jz iv iw ix ka iz ja jb jc hb bi translated"><strong class="ih hj">让我们用频繁类别在训练和测试中填写NA。</strong></p></blockquote><pre class="jf jg jh ji fd la lb lc ld aw le bi"><span id="9e84" class="lf kc hi lb b fi lg lh l li lj"># inplace=True is used to replicate that in original dataframe<br/>X_train['BsmtQual'].fillna('TA', inplace=True)<br/>X_test['BsmtQual'].fillna('TA', inplace=True)</span></pre><blockquote class="jv jw jx"><p id="8a61" class="if ig jd ih b ii ij ik il im in io ip jy ir is it jz iv iw ix ka iz ja jb jc hb bi translated"><strong class="ih hj">评估对类别分布的影响。</strong></p></blockquote><pre class="jf jg jh ji fd la lb lc ld aw le bi"><span id="ac85" class="lf kc hi lb b fi lg lh l li lj">X_train['BsmtQual'].value_counts().sort_values(ascending=False).plot.bar()<br/>plt.xlabel('BsmtQual')<br/>plt.ylabel('Number of houses')</span></pre><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es lp"><img src="../Images/ff99b15edbe6635c3ec7727bfab1bd41.png" data-original-src="https://miro.medium.com/v2/resize:fit:1048/format:webp/1*yBmmiua1Z_fZQg0XVQE6rA.png"/></div></figure><p id="a9e8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从上面的图中，我们看到现在多了一些标签为TA的房屋，这些房屋是以前包含NA的房屋，但对分布的总体影响并不显著。该图看起来与插补前的图几乎相同。</p><blockquote class="jv jw jx"><p id="60dc" class="if ig jd ih b ii ij ik il im in io ip jy ir is it jz iv iw ix ka iz ja jb jc hb bi translated"><strong class="ih hj">最常见类别的销售价格分布是否发生了变化？</strong></p></blockquote><pre class="jf jg jh ji fd la lb lc ld aw le bi"><span id="6f88" class="lf kc hi lb b fi lg lh l li lj">fig = plt.figure()<br/>ax = fig.add_subplot(111)</span><span id="857e" class="lf kc hi lb b fi lk lh l li lj"># original distribution of salePrice for houses with most frequent label<br/># remember I captured this a few cells up in the notebook<br/>tmp.plot(kind='kde', ax=ax)</span><span id="aba5" class="lf kc hi lb b fi lk lh l li lj"># distribution of the variable after imputation<br/>X_train[X_train['BsmtQual'] == 'TA']['SalePrice'].plot(<br/>    kind='kde', ax=ax, color='red')</span><span id="85c1" class="lf kc hi lb b fi lk lh l li lj"># add the legend<br/>lines, labels = ax.get_legend_handles_labels()<br/>labels = ['Original variable', 'Imputed variable']<br/>ax.legend(lines, labels, loc='best')</span><span id="9a4f" class="lf kc hi lb b fi lk lh l li lj"># add title<br/>plt.title('BsmtQual')</span></pre><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es lq"><img src="../Images/c7d22ce6de932ab0b0eafe56ff9e2fe4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/1*vR67LLh8lrflYwQ3gORrzw.png"/></div></figure><p id="aed2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">原始变量和估算变量之间的房价分布非常相似，因为缺失数据的数量很少。因此，频繁类别填充是BsmtQual特征的良好选择。</p><h1 id="7330" class="kb kc hi bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">火场质量:</h1><blockquote class="jv jw jx"><p id="af49" class="if ig jd ih b ii ij ik il im in io ip jy ir is it jz iv iw ix ka iz ja jb jc hb bi translated">让我们提醒自己缺失值的百分比。</p></blockquote><pre class="jf jg jh ji fd la lb lc ld aw le bi"><span id="0c00" class="lf kc hi lb b fi lg lh l li lj">X_train['FireplaceQu'].isnull().mean()</span><span id="2be2" class="lf kc hi lb b fi lk lh l li lj">0.46771037181996084</span></pre><blockquote class="jv jw jx"><p id="c132" class="if ig jd ih b ii ij ik il im in io ip jy ir is it jz iv iw ix ka iz ja jb jc hb bi translated"><strong class="ih hj">让我们找出FirePlaceQu出现频率最高的类别。</strong></p></blockquote><pre class="jf jg jh ji fd la lb lc ld aw le bi"><span id="5831" class="lf kc hi lb b fi lg lh l li lj">X_train['FireplaceQu'].mode()<br/></span><span id="c9cd" class="lf kc hi lb b fi lk lh l li lj">0    Gd<br/>dtype: object</span></pre><p id="d322" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="jd">观察:</em> </strong> <em class="jd">在FirePlaceQu中出现频率最高的类别是Gd(好)。</em></p><blockquote class="jv jw jx"><p id="6ee7" class="if ig jd ih b ii ij ik il im in io ip jy ir is it jz iv iw ix ka iz ja jb jc hb bi translated">让我们为显示最频繁类别的房屋和显示缺失数据的房屋绘制目标分布图。</p></blockquote><pre class="jf jg jh ji fd la lb lc ld aw le bi"><span id="63a9" class="lf kc hi lb b fi lg lh l li lj">fig = plt.figure()<br/>ax = fig.add_subplot(111)</span><span id="27fe" class="lf kc hi lb b fi lk lh l li lj"># houses with the most frequent label for FirePlaceQu<br/>X_train[X_train['FireplaceQu']=='Gd']['SalePrice'].plot(kind='kde', ax=ax)</span><span id="7ab5" class="lf kc hi lb b fi lk lh l li lj"># houses with missing data in FirePlaceQu<br/>X_train[X_train['FireplaceQu'].isnull()]['SalePrice'].plot(kind='kde', ax=ax, color='red')</span><span id="1ccc" class="lf kc hi lb b fi lk lh l li lj"># add the legend<br/>lines, labels = ax.get_legend_handles_labels()<br/>labels = ['Houses with Gd', 'Houses with NA']<br/>ax.legend(lines, labels, loc='best')</span><span id="c582" class="lf kc hi lb b fi lk lh l li lj">plt.title('FirePlaceQu')</span></pre><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es kz"><img src="../Images/90bd55eecddfae2f3236f2f488629a6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1208/format:webp/1*wCt8y5zyAqQwoF5WkzLSSg.png"/></div></figure><p id="5b59" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="jd">观察:</em> </strong></p><p id="b717" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">分布情况非常不同，有缺失数据的房屋总成本低于标有Gd的房屋。</p><blockquote class="jv jw jx"><p id="c1fb" class="if ig jd ih b ii ij ik il im in io ip jy ir is it jz iv iw ix ka iz ja jb jc hb bi translated"><strong class="ih hj">让我们保留SalePrice的原始分布，因为它是最常见的类别，以备后用。</strong></p></blockquote><pre class="jf jg jh ji fd la lb lc ld aw le bi"><span id="83a8" class="lf kc hi lb b fi lg lh l li lj">tmp = X_train[X_train['FireplaceQu']=='Gd']['SalePrice']</span></pre><blockquote class="jv jw jx"><p id="29fe" class="if ig jd ih b ii ij ik il im in io ip jy ir is it jz iv iw ix ka iz ja jb jc hb bi translated"><strong class="ih hj">让我们在培训和测试中填写NA。</strong></p></blockquote><pre class="jf jg jh ji fd la lb lc ld aw le bi"><span id="e27d" class="lf kc hi lb b fi lg lh l li lj">X_train['FireplaceQu'].fillna('Gd', inplace=True)<br/>X_test['FireplaceQu'].fillna('Gd', inplace=True)</span></pre><blockquote class="jv jw jx"><p id="b357" class="if ig jd ih b ii ij ik il im in io ip jy ir is it jz iv iw ix ka iz ja jb jc hb bi translated"><strong class="ih hj">让我们绘制原始变量<br/>和估算变量的目标分布图。</strong></p></blockquote><pre class="jf jg jh ji fd la lb lc ld aw le bi"><span id="0873" class="lf kc hi lb b fi lg lh l li lj">fig = plt.figure()<br/>ax = fig.add_subplot(111)</span><span id="046e" class="lf kc hi lb b fi lk lh l li lj"># original distribution of the variable<br/>tmp.plot(kind='kde', ax=ax)</span><span id="255a" class="lf kc hi lb b fi lk lh l li lj"># distribution of the variable after imputation<br/>X_train[X_train['FireplaceQu'] == 'Gd']['SalePrice'].plot(<br/>    kind='kde', ax=ax, color='red')</span><span id="a042" class="lf kc hi lb b fi lk lh l li lj"># add the legend<br/>lines, labels = ax.get_legend_handles_labels()<br/>labels = ['Original variable', 'Imputed variable']<br/>ax.legend(lines, labels, loc='best')</span><span id="a6ee" class="lf kc hi lb b fi lk lh l li lj">plt.title('FirePlaceQu')</span></pre><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es lr"><img src="../Images/fe4743f20fbc934ec5c8eedc344c1c41.png" data-original-src="https://miro.medium.com/v2/resize:fit:1238/format:webp/1*5wTYwKxyeX-ug2mnByu3FA.png"/></div></figure><p id="4d5f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="jd">观察:</em> </strong></p><p id="4e77" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">在将北美重新归类为最常见的标签后，添加北美房价后，最常见类别的平均房价大幅下降。</em></p><p id="353c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">在这种情况下，当缺失值的百分比如此之高(~50%)时，我们最好创建一个新的类别(缺失)来包含带有NA的观察值。</em></p><blockquote class="ls"><p id="757b" class="lt lu hi bd lv lw lx ly lz ma mb jc dx translated"><strong class="ak">你可以在这里找到完整的源代码:</strong></p><p id="89df" class="lt lu hi bd lv lw lx ly lz ma mb jc dx translated"><a class="ae ju" href="https://github.com/ku-nal/Feature-Engineering/tree/main/Frequent-Category-Imputation" rel="noopener ugc nofollow" target="_blank">https://github . com/ku-nal/Feature-Engineering/tree/main/frequency-Category-attallation</a></p></blockquote><p id="73df" class="pw-post-body-paragraph if ig hi ih b ii mc ik il im md io ip iq me is it iu mf iw ix iy mg ja jb jc hb bi translated">我希望这是一篇有用的文章。如果你有意见，请随意写在下面。可以关注我上  <a class="ae ju" href="https://kunal-12.medium.com/" rel="noopener"> <strong class="ih hj"> <em class="jd">中</em></strong></a><strong class="ih hj"><em class="jd"/></strong><a class="ae ju" href="https://www.linkedin.com/in/kunal-makwana-aa44751a0/" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj"><em class="jd">LinkedIn</em></strong></a><strong class="ih hj"><em class="jd">。</em>T44】</strong></p></div></div>    
</body>
</html>