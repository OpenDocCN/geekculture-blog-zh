<html>
<head>
<title>How Database Load Balancing Completes the 3-Tiered Architecture</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">数据库负载平衡如何完善三层架构</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/how-database-load-balancing-completes-the-3-tiered-architecture-1c2052e77484?source=collection_archive---------23-----------------------#2021-05-20">https://medium.com/geekculture/how-database-load-balancing-completes-the-3-tiered-architecture-1c2052e77484?source=collection_archive---------23-----------------------#2021-05-20</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="3d19" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">作者:拉胡尔·苏布拉马年</h2></div><figure class="iz ja jb jc fd jd er es paragraph-image"><div role="button" tabindex="0" class="je jf di jg bf jh"><div class="er es iy"><img src="../Images/bc92bcd77ddacde9137f246d765c09b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*fxjrx1lylnc3gxB6.jpg"/></div></div></figure><p id="8aba" class="pw-post-body-paragraph jk jl hi jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated">三层架构是一个神话。你只是认为你拥有它。事实上，你有两层架构和一个梦想。</p><p id="2424" class="pw-post-body-paragraph jk jl hi jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated">三层体系结构的“传统”定义认为它包括:</p><ul class=""><li id="1aee" class="kg kh hi jm b jn jo jq jr jt ki jx kj kb kk kf kl km kn ko bi translated">表示层</li><li id="6ba9" class="kg kh hi jm b jn kp jq kq jt kr jx ks kb kt kf kl km kn ko bi translated">应用层</li><li id="16a5" class="kg kh hi jm b jn kp jq kq jt kr jx ks kb kt kf kl km kn ko bi translated">数据库层</li></ul><p id="3ef6" class="pw-post-body-paragraph jk jl hi jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated">真正的三层架构允许您扩展或迁移任何单独的层，而不会对其他两层产生任何影响—您可以在任何一层中进行更改，而无需更改任何其他层中的任何一行代码。</p><p id="d5b1" class="pw-post-body-paragraph jk jl hi jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated">这是一个很棒的想法——它建立了一个您可以干净流畅地即插即用任何组件的环境。</p><p id="3eb9" class="pw-post-body-paragraph jk jl hi jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated">对于web应用层来说，这是完全正确的。HTTP协议的发展确实创造了完整的web应用层。它与应用程序和数据库层完全分离。web和应用服务器层的HTTP分离更加成功，因为它指定了协议。</p><p id="130f" class="pw-post-body-paragraph jk jl hi jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated">然而，如果您现实地考虑一下，您会发现您的应用程序层和数据库层根本不是独立的实体。它们是如此紧密地结合在一起，你不可能对一个基础设施做任何改变而不影响另一个。</p><h1 id="c2dc" class="ku kv hi bd kw kx ky kz la lb lc ld le io lf ip lg ir lh is li iu lj iv lk ll bi translated">应用程序与数据库关系的简史</h1><p id="2439" class="pw-post-body-paragraph jk jl hi jm b jn lm ij jp jq ln im js jt lo jv jw jx lp jz ka kb lq kd ke kf hb bi translated">应用程序和数据库从一开始就紧密地交织在一起。与“干净的”HTTP不同，数据库供应商引入了SQL语言的专有扩展和实现。因此，SQL语言创造了统一性，要求与持久性相关的应用程序更改需要反映在数据库中，反之亦然。</p><p id="29e0" class="pw-post-body-paragraph jk jl hi jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated">一层上发生的一切都需要在另一层上反映出来。当两个系统在同一台服务器上运行时，这加快了处理速度，因为信息不必传输很远。</p><h1 id="2bcd" class="ku kv hi bd kw kx ky kz la lb lc ld le io lf ip lg ir lh is li iu lj iv lk ll bi translated">分手很难做到</h1><p id="9b4e" class="pw-post-body-paragraph jk jl hi jm b jn lm ij jp jq ln im js jt lo jv jw jx lp jz ka kb lq kd ke kf hb bi translated">云的出现彻底改变了这种动态——按需可伸缩性的承诺可以实现——只是它并没有真正发生。</p><p id="69de" class="pw-post-body-paragraph jk jl hi jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated">将应用服务器从数据库中分离出来几乎是不可能的。对一个层的单一更改可能会对两个层的通信方式产生负面影响。例如，数据库中的更改可能会“中断”与应用程序中某些内容的连接。<a class="ae ix" href="https://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.218.507&amp;rep=rep1&amp;type=pdf" rel="noopener ugc nofollow" target="_blank">当应用程序调用“采购订单编号”时，可以设置SQL </a>来提供特定的数据，但是对会计数据库的更新会将采购订单编号更改为工作订单编号，使应用程序无法再访问它。分析代码到数据库的连接需要大量的静态分析，以便在做出任何改变之前找到所有的耦合。</p><h1 id="ff84" class="ku kv hi bd kw kx ky kz la lb lc ld le io lf ip lg ir lh is li iu lj iv lk ll bi translated">达不到第三等级</h1><p id="c41f" class="pw-post-body-paragraph jk jl hi jm b jn lm ij jp jq ln im js jt lo jv jw jx lp jz ka kb lq kd ke kf hb bi translated">公司没有直接解决耦合问题，而是在向云过渡的过程中尝试变通方法。它们重复工作，在逐渐过渡功能时并行运行内部和云数据库。他们将旧数据迁移到云数据库，并写入两个数据库。如果没有问题发生，并且两个数据库是同步的，它们稍后会切换超读查询。</p><p id="c15f" class="pw-post-body-paragraph jk jl hi jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated">这很好，除了:</p><ul class=""><li id="31f3" class="kg kh hi jm b jn jo jq jr jt ki jx kj kb kk kf kl km kn ko bi translated">如果组织不能有效地将读写流量路由到特定数据库，那么部分转移数据功能就很复杂。</li><li id="01d9" class="kg kh hi jm b jn kp jq kq jt kr jx ks kb kt kf kl km kn ko bi translated">当出现问题时，DBA可能无法快速回滚。由于数据和应用程序逻辑通常紧密耦合，在故障转移期间切换到另一个数据库而不更改代码可能会导致应用程序错误。这使得无法实时修改其数据基础架构的组织面临迁移风险。</li><li id="e375" class="kg kh hi jm b jn kp jq kq jt kr jx ks kb kt kf kl km kn ko bi translated">成功的数据库迁移需要可靠的监控和集中登录功能。在数据库迁移过程中缺乏透明度的IT团队——没有对性能的洞察或明确的责任审计跟踪——无法成功过渡。</li><li id="58f1" class="kg kh hi jm b jn kp jq kq jt kr jx ks kb kt kf kl km kn ko bi translated">数据库和应用程序之间源自SQL的紧密耦合要求每次对底层数据存储进行更改时都要对应用程序进行大量的代码更改，这增加了采用云迁移的谨慎性。</li></ul><h1 id="26e3" class="ku kv hi bd kw kx ky kz la lb lc ld le io lf ip lg ir lh is li iu lj iv lk ll bi translated">您可以实现真正的三层架构</h1><figure class="iz ja jb jc fd jd er es paragraph-image"><div role="button" tabindex="0" class="je jf di jg bf jh"><div class="er es lr"><img src="../Images/b5d898b8006eaf8a5775446d3f71b989.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*596-C5WmGv5C95vH.jpeg"/></div></div></figure><p id="3d39" class="pw-post-body-paragraph jk jl hi jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated">秘诀是负载平衡，它在解耦过程中起着重要的作用。它充当一个“自动”转换器，一个中间层，保持数据库和应用程序之间的通信通道开放，但完全绕过紧密耦合，允许每个组件根据需要进行伸缩或迁移。这简化了管理数据库应用程序耦合的能力，而不会造成任何损害。有了真正的三层体系结构，您的数据库可以轻松快速地与多个应用程序“对话”，而您的应用程序可以与多个数据库对话。</p><p id="4557" class="pw-post-body-paragraph jk jl hi jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated">借助数据库负载平衡，每个挑战都可以得到解决，从而真正从云规模中受益。数据库负载平衡增强了多台服务器之间的工作负载分布。使用中间控制平面可以简化迁移，中间控制平面可以将SQL命令转换为云活动操作，而无需更改一行代码。数据库负载平衡将应用程序与其存储分离，简化操作，并大幅降低总拥有成本。结果是能够随时将读取切换到云服务器并切换写入，从而实现零停机时间的安全迁移。</p><p id="ebf8" class="pw-post-body-paragraph jk jl hi jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated">一旦迁移发生，保持数据库负载平衡器就位可提供长期的可伸缩性和稳定性，确保维护期间零停机，并降低计划外停机的风险。</p><p id="9e6b" class="pw-post-body-paragraph jk jl hi jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated">数据库负载平衡基础设施:</p><ul class=""><li id="a641" class="kg kh hi jm b jn jo jq jr jt ki jx kj kb kk kf kl km kn ko bi translated">使开发人员能够将应用程序指向单个连接并与数据交互，而无需担心数据库基础结构。</li><li id="30d9" class="kg kh hi jm b jn kp jq kq jt kr jx ks kb kt kf kl km kn ko bi translated">理解多种SQL方言，允许动态流量路由而不影响事务，减少或消除停机时间，降低成本。</li><li id="64f2" class="kg kh hi jm b jn kp jq kq jt kr jx ks kb kt kf kl km kn ko bi translated">分析流量峰值，以相应地分配资源并最大限度地减少对最终用户的影响，通过确保数据可用且可访问，保持任务关键型业务应用程序高效运行。</li><li id="5ec7" class="kg kh hi jm b jn kp jq kq jt kr jx ks kb kt kf kl km kn ko bi translated">允许在特定数据库出现任何问题时安全快速地回滚迁移。DBA可以配置故障转移标准，以自动重新路由来自故障数据库节点的流量，而不会导致应用程序错误。</li></ul><p id="5bb8" class="pw-post-body-paragraph jk jl hi jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated">从长远来看，数据库负载平衡使管理操作变得更加容易，从而实现:</p><ul class=""><li id="1ca3" class="kg kh hi jm b jn jo jq jr jt ki jx kj kb kk kf kl km kn ko bi translated">在单个云数据库集群上整合数千个模式，简化了操作并降低了成本，以十分之一的价格提供了10倍的性能。</li><li id="1f74" class="kg kh hi jm b jn kp jq kq jt kr jx ks kb kt kf kl km kn ko bi translated">扩展到每秒数十万个事务—平稳地迁移到更大的实例规模或无缝地大规模使用读取副本。</li><li id="efb4" class="kg kh hi jm b jn kp jq kq jt kr jx ks kb kt kf kl km kn ko bi translated">实时可见性，快速识别问题查询，并对其做出即时响应。</li><li id="8946" class="kg kh hi jm b jn kp jq kq jt kr jx ks kb kt kf kl km kn ko bi translated">更快的应用部署，以及通过避免停机、提高网站性能和减少开发时间而节省的大量增量收入和成本。</li><li id="8b17" class="kg kh hi jm b jn kp jq kq jt kr jx ks kb kt kf kl km kn ko bi translated">有效平衡读写流量，显著提高数据库的整体吞吐量。</li><li id="cbc2" class="kg kh hi jm b jn kp jq kq jt kr jx ks kb kt kf kl km kn ko bi translated">在单一平台中整合数据库分析，实现更智能、更高效、省时省钱的决策。</li><li id="1fa3" class="kg kh hi jm b jn kp jq kq jt kr jx ks kb kt kf kl km kn ko bi translated">转变您的两层架构，真正采用三层架构——负载平衡将帮助您实现这一目标。</li></ul><p id="3d6b" class="pw-post-body-paragraph jk jl hi jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated">如<a class="ae ix" href="https://thenewstack.io/database-load-balancing-and-the-delusion-of-3-tiered-architecture/" rel="noopener ugc nofollow" target="_blank">所示，新堆栈</a></p><figure class="iz ja jb jc fd jd er es paragraph-image"><div class="er es ls"><img src="../Images/013f2f6d3382311459ab055fff633496.png" data-original-src="https://miro.medium.com/v2/resize:fit:748/format:webp/0*A6Ollmqvxhwcwqaw.jpg"/></div></figure><p id="28de" class="pw-post-body-paragraph jk jl hi jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated"><a class="ae ix" href="https://www.engineyard.com/" rel="noopener ugc nofollow" target="_blank">拉胡尔·苏布拉马年是EngineYard、DevFactory和FogBugz的首席执行官。他也是ESW资本公司的创新主管。他在计算机软件行业工作了很长时间，拥有算法、python、敏捷软件开发和软件项目管理的背景。</a></p></div><div class="ab cl lt lu gp lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="hb hc hd he hf"><p id="72a4" class="pw-post-body-paragraph jk jl hi jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated">【https://www.devgraph.com】最初发表于<a class="ae ix" href="https://www.devgraph.com/2021/04/28/how-database-load-balancing-completes-the-3-tiered-architecture/?utm_source=Medium&amp;utm_medium=Geek-Culture" rel="noopener ugc nofollow" target="_blank"><em class="ma"/></a><em class="ma">。</em></p></div></div>    
</body>
</html>