<html>
<head>
<title>Data Warehouse : Design Data Model for Ride Sharing or Taxi Service</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">数据仓库:为拼车或出租车服务设计数据模型</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/data-warehouse-design-data-model-for-ride-sharing-or-taxi-service-5fc20d8eb424?source=collection_archive---------1-----------------------#2021-06-06">https://medium.com/geekculture/data-warehouse-design-data-model-for-ride-sharing-or-taxi-service-5fc20d8eb424?source=collection_archive---------1-----------------------#2021-06-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/88333bb134f238497d3c03ac468e891d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tzTFXdNGC5RNst77"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Photo by <a class="ae iu" href="https://unsplash.com/@trapnation?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Andre Benz</a> on <a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="7d4b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae iu" href="http://www.etymonline.com/index.php?term=taxi&amp;allowed_in_frame=0" rel="noopener ugc nofollow" target="_blank">网上词源词典</a>中“taxi”一词的来源是“taxicab”一词的简称，来源于“taximeter”和“cabriolet”两个词。出租车或出租车服务已经存在了几个世纪，在过去叫出租车服务是非常昂贵的，现在已经变得比以前更便宜了。由于我们周围的技术不断发展，我们现在可以从你的设备上预订出租车并实时跟踪旅程。在本文中，我们将设计一个数据模型，该模型可以捕获所有关键数据元素，包括行程、评级、文档和驾驶员绩效指标。</p><h2 id="6e51" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">四步维度设计流程:金宝集团</h2><ol class=""><li id="0c9f" class="ko kp hi ix b iy kq jc kr jg ks jk kt jo ku js kv kw kx ky bi translated">选择业务流程</li><li id="a590" class="ko kp hi ix b iy kz jc la jg lb jk lc jo ld js kv kw kx ky bi translated">声明粒度(“如何描述事实表中的单个行？”)</li><li id="78f4" class="ko kp hi ix b iy kz jc la jg lb jk lc jo ld js kv kw kx ky bi translated">确定维度(“业务人员如何描述从业务流程度量事件中得到的数据？”)“何人、何事、何地、何时、为何、如何”与事件关联。</li><li id="83b2" class="ko kp hi ix b iy kz jc la jg lb jk lc jo ld js kv kw kx ky bi translated">确认事实</li></ol><p id="a4b3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">参考自<a class="ae iu" href="https://www.kimballgroup.com/data-warehouse-business-intelligence-resources/kimball-techniques/dimensional-modeling-techniques/four-4-step-design-process/" rel="noopener ugc nofollow" target="_blank">https://www . Kimball group . com/data-warehouse-business-intelligence-resources/Kimball-techniques/dimensional-modeling-techniques/four-4-step-design-process/</a></p><h2 id="a8d3" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">解决办法</h2><p id="a91d" class="pw-post-body-paragraph iv iw hi ix b iy kq ja jb jc kr je jf jg le ji jj jk lf jm jn jo lg jq jr js hb bi translated"><strong class="ix hj">业务流程:</strong>出租车公司希望设计一个数据模型来捕获所有关键数据元素。</p><blockquote class="lh li lj"><p id="f9b1" class="iv iw lk ix b iy iz ja jb jc jd je jf ll jh ji jj lm jl jm jn ln jp jq jr js hb bi translated">车手完成的赛道驾驶及其表现</p><p id="b345" class="iv iw lk ix b iy iz ja jb jc jd je jf ll jh ji jj lm jl jm jn ln jp jq jr js hb bi translated">一个普通/著名的目的地(机场、公园、博物馆等)每天有多少次乘车经历</p><p id="21ae" class="iv iw lk ix b iy iz ja jb jc jd je jf ll jh ji jj lm jl jm jn ln jp jq jr js hb bi translated">每天有多少趟行程被取消。</p><p id="b1da" class="iv iw lk ix b iy iz ja jb jc jd je jf ll jh ji jj lm jl jm jn ln jp jq jr js hb bi translated">每天高峰时段的乘坐次数和平均价格。</p></blockquote><p id="9516" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">颗粒:</strong>每个交易级别上的单独行程</p><p id="4bc7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">维度:</strong>日期、客户、司机、汽车、文档、设备、地点。</p><p id="d161" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">事实:</strong>旅行、付款</p><p id="b12a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">派生事实:</strong>建议将它们物理存储在表中。在这个案例研究中，总数是直接的，但是存储它意味着在ETL过程中它的计算是一致的，以消除用户计算错误的可能性。<strong class="ix hj">某些派生事实可以添加到视图中以最小化空间，或者可以添加到任何BI工具中。</strong></p><blockquote class="lh li lj"><p id="f456" class="iv iw lk ix b iy iz ja jb jc jd je jf ll jh ji jj lm jl jm jn ln jp jq jr js hb bi translated">例如:<strong class="ix hj">行程总成本栏</strong>:增加基本费率、激增费率、税费、通行费、附加费用。</p></blockquote><p id="e9db" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">第一部分:尺寸</strong></p><p id="58d2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">日期维度:</strong></p><p id="a3fb" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">所有数据模型总是需要一个显式的日期维度表。SQL date函数不支持许多日期组件，包括周数、财政年度、季节、假日、工作日和周末。与其试图在查询中确定这些计算，不如将其存储在日期维度表中。</p><p id="7d79" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">客户维度:</strong></p><p id="2ad9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这方面，我们将覆盖正在使用乘车服务应用程序的用户。我们将在模型的中心使用这些信息。用户表包含所有相关用户(当前用户和新用户)的列表。对于每个用户，我们将存储他们的唯一ID、姓名(名和姓)、电子邮件、地址、电话号码、加入日期、当前计划ID(以确定他们当前使用的会员身份)、活动(以确定用户是否仍然活动或选择退出服务)和付款ID。</p><blockquote class="lh li lj"><p id="8148" class="iv iw lk ix b iy iz ja jb jc jd je jf ll jh ji jj lm jl jm jn ln jp jq jr js hb bi translated">请注意，users表中没有提到用户登录的详细信息，我们当然可以维护不同的表，以便根据用户的权限(如果有的话)跟踪用户的每次登录(登录开始日期、登录结束日期)。</p><p id="9d61" class="iv iw lk ix b iy iz ja jb jc jd je jf ll jh ji jj lm jl jm jn ln jp jq jr js hb bi translated">另请注意，如果用户有多个地址或电话号码，我们可以添加通信(通信类型列(电话/电子邮件/地址)和首选项表。</p></blockquote><p id="7991" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">驱动维度:</strong></p><p id="3402" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这方面，我们将涵盖在顺风车服务app上提供服务的司机。驱动因素表包含所有驱动因素的列表，包括过去和当前的驱动因素。对于表中的每个驾驶员行，我们将存储他们的唯一ID、姓名(名和姓)、电子邮件、地址、电话号码、加入日期、当前汽车ID(以确定驾驶员将哪辆车设置为默认)、驾驶执照号和活动状态(以确定驾驶员是活动还是未活动)。</p><p id="8531" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">单据尺寸:</strong></p><p id="864a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">此表包含实体(可以是客户或用户)上传的所有文档。在前面的客户维度表中，我们存储了驾照号码，但其他信息，如文档ID、文档名称、文档类别、文档类型、文档状态、到期日期、国家、司机ID等列将存储在文档表中。该表是1:M(一对多)，一个驱动程序可以在该表中有多个文档。(例如:用户可以在他/她的当前许可证过期后上传另一个许可证文档)。</p><p id="cf82" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">汽车尺寸:</strong></p><p id="b290" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">该表存储了司机在平台上注册的所有汽车。所有汽车都有唯一的汽车ID、驾驶员ID、年份、品牌、型号、车牌号码、汽车类型(标准型、豪华型、紧凑型)、基本费率和有效标志，以指示记录有效。这个表是1:M(一对多)，一个司机可以同时拥有多辆车。</p><p id="e19b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">设备尺寸:</strong></p><p id="96ae" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">该表存储了兼容使用该平台的所有设备。所有设备都有唯一的ID、设备类型(手机、平板电脑、台式机)和活动标志，以指示设备的状态。</p><p id="f6c0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">位置尺寸:</strong></p><p id="f59d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">该表存储了该特定城市或国家的所有著名地标的详细信息。表中的每一行都有唯一的位置ID、纬度、经度、地标类型(机场、公园、博物馆)、地标名称、地标城市、州和国家。</p><p id="9f9e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">第二节:事实</strong></p><p id="58a5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> Trips事实:</strong></p><p id="76a0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这一领域，我们将涵盖用户为访问拼车平台而创建的所有行程。每个行程都有唯一的行程id、客户id、司机id、设备id、汽车id、行程请求时间戳、行程开始和结束时间戳、行程等待时间、开始和结束位置Id、司机和客户评级、付款ID和行程状态(0:已取消，1:进行中2:已完成)</p><p id="db52" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">支付事实:</strong></p><p id="6b2b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">该表存储了客户的所有付款。每笔付款包括付款id、客户Id(付款人)、付款日期、付款方式、总金额、基本费率、激增费率、小费金额、税费、交易ID和付款状态。</p><figure class="lp lq lr ls fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lo"><img src="../Images/018aaff89adc0fdf78ae7df9a5055ce2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NpgcFxu-Y4hfJKiSrTYQnQ.png"/></div></div></figure></div></div>    
</body>
</html>