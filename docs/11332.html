<html>
<head>
<title>How to automate tasks in Linux/BSD?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Linux/BSD中实现任务自动化？</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/how-to-automate-tasks-in-linux-bsd-91d0b0560f5?source=collection_archive---------8-----------------------#2022-03-17">https://medium.com/geekculture/how-to-automate-tasks-in-linux-bsd-91d0b0560f5?source=collection_archive---------8-----------------------#2022-03-17</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="2031" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">使用crontab自动化Linux中的任务</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/d501aa6cff819564a36fef10f7e41c89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*EHNXT9GZ1gZDF9aJ"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Photo by <a class="ae jn" href="https://unsplash.com/@ninjason?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Jason Leung</a> on <a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="19ed" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">大多数用户在计算机上执行的操作都是按需进行的。如果你想搜索信息，你可以在搜索栏中输入。如果您想要打开一个应用程序，那么您可以单击桌面图标来打开该应用程序。然而，某些行动需要定期的时间框架来有效地开展行动。</p><p id="880f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">下面是如何在Linux和BSD上自动化任务。</p><h2 id="ca2f" class="kk kl hi bd km kn ko kp kq kr ks kt ku jx kv kw kx kb ky kz la kf lb lc ld le bi translated">什么是任务？</h2><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lf"><img src="../Images/9767d80dd69276a9978412dfbeeeb079.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*v9ZXAjrgXfWBPH3w"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Photo by <a class="ae jn" href="https://unsplash.com/@homajob?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Scott Graham</a> on <a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="34fd" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">任务是需要运行的脚本。自动化任务基本上是一种定期运行任务的方式。某些作业需要自动任务才能正常执行。</p><p id="bc28" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">一个很好的例子就是备份一台机器。您不需要在系统的每个状态改变时备份您的机器。因此，您可以运行一个脚本，将您的计算机自动备份到备份服务器。该脚本必须在每天午夜运行，以确保您拥有数据的每日副本。</p><p id="4ffc" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在这里注册我的电子邮件列表。</p><h2 id="9867" class="kk kl hi bd km kn ko kp kq kr ks kt ku jx kv kw kx kb ky kz la kf lb lc ld le bi translated">您可以使用什么工具来自动化任务？</h2><p id="774e" class="pw-post-body-paragraph jo jp hi jq b jr lg ij jt ju lh im jw jx li jz ka kb lj kd ke kf lk kh ki kj hb bi translated">有一些基于命令行的Linux/BSD工具可以执行任务自动化。这是一些任务管理器应用程序。</p><ul class=""><li id="4d2c" class="ll lm hi jq b jr js ju jv jx ln kb lo kf lp kj lq lr ls lt bi translated"><a class="ae jn" href="https://en.wikipedia.org/wiki/Cron" rel="noopener ugc nofollow" target="_blank">克朗</a></li><li id="36d8" class="ll lm hi jq b jr lu ju lv jx lw kb lx kf ly kj lq lr ls lt bi translated"><a class="ae jn" href="https://linuxize.com/post/at-command-in-linux/" rel="noopener ugc nofollow" target="_blank">在</a></li><li id="a3f0" class="ll lm hi jq b jr lu ju lv jx lw kb lx kf ly kj lq lr ls lt bi translated"><a class="ae jn" href="https://linuxconfig.org/how-to-schedule-tasks-with-systemd-timers-in-linux" rel="noopener ugc nofollow" target="_blank">系统定时器</a></li></ul><p id="d3d1" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">最好的CLI工具是cron。Cron允许您在命令行中使用字符表示开始时间来调度任务。</p><h2 id="019e" class="kk kl hi bd km kn ko kp kq kr ks kt ku jx kv kw kx kb ky kz la kf lb lc ld le bi translated">安装cron</h2><p id="dbfe" class="pw-post-body-paragraph jo jp hi jq b jr lg ij jt ju lh im jw jx li jz ka kb lj kd ke kf lk kh ki kj hb bi translated">在Debian/Ubuntu机器上</p><pre class="iy iz ja jb fd lz ma mb mc aw md bi"><span id="eda1" class="kk kl hi ma b fi me mf l mg mh">sudo apt-get install cron</span></pre><p id="9b09" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在Arch Linux上</p><pre class="iy iz ja jb fd lz ma mb mc aw md bi"><span id="07c7" class="kk kl hi ma b fi me mf l mg mh">Installed by default with systemd/Timers</span></pre><p id="4963" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在FreeBSD/OpenBSD二进制软件包上</p><pre class="iy iz ja jb fd lz ma mb mc aw md bi"><span id="e3ac" class="kk kl hi ma b fi me mf l mg mh">Installed by default</span></pre><h2 id="2645" class="kk kl hi bd km kn ko kp kq kr ks kt ku jx kv kw kx kb ky kz la kf lb lc ld le bi translated">启用和启动cron</h2><p id="e851" class="pw-post-body-paragraph jo jp hi jq b jr lg ij jt ju lh im jw jx li jz ka kb lj kd ke kf lk kh ki kj hb bi translated">您可以使用以下命令启用和启动cron。</p><p id="d0f3" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">基于systemd Linux的系统</p><pre class="iy iz ja jb fd lz ma mb mc aw md bi"><span id="c8b5" class="kk kl hi ma b fi me mf l mg mh">sudo systemctl enable cron.service<br/>sudo systemctl start cron.service</span></pre><p id="62b0" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在基于FreeBSD的系统上，您需要在rc.conf文件中添加下面一行。</p><pre class="iy iz ja jb fd lz ma mb mc aw md bi"><span id="7fdc" class="kk kl hi ma b fi me mf l mg mh">cron_enable=TRUE</span></pre><h2 id="db08" class="kk kl hi bd km kn ko kp kq kr ks kt ku jx kv kw kx kb ky kz la kf lb lc ld le bi translated">如何访问cron？</h2><p id="575c" class="pw-post-body-paragraph jo jp hi jq b jr lg ij jt ju lh im jw jx li jz ka kb lj kd ke kf lk kh ki kj hb bi translated">您将需要访问cron菜单，以便。</p><pre class="iy iz ja jb fd lz ma mb mc aw md bi"><span id="6755" class="kk kl hi ma b fi me mf l mg mh">crontab -e</span></pre><p id="c068" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">然后你会看到一个如下的菜单。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mi"><img src="../Images/a493c6156ab18a985af0799d6edfb22e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ubFuSq4zlvDD0RCZENEVJw.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Photo from Dre Chang</figcaption></figure><h2 id="a1b7" class="kk kl hi bd km kn ko kp kq kr ks kt ku jx kv kw kx kb ky kz la kf lb lc ld le bi translated">Crontab语法解释</h2><p id="1e77" class="pw-post-body-paragraph jo jp hi jq b jr lg ij jt ju lh im jw jx li jz ka kb lj kd ke kf lk kh ki kj hb bi translated">每个任务的结构如下。</p><pre class="iy iz ja jb fd lz ma mb mc aw md bi"><span id="adc4" class="kk kl hi ma b fi me mf l mg mh">[minutes] [hours] [days of month] [month] [days of week] [task_script]</span></pre><ul class=""><li id="8265" class="ll lm hi jq b jr js ju jv jx ln kb lo kf lp kj lq lr ls lt bi translated">*:基于systemd Linux的系统上字段的所有值</li><li id="ec84" class="ll lm hi jq b jr lu ju lv jx lw kb lx kf ly kj lq lr ls lt bi translated">，:列表分隔符</li><li id="1a8f" class="ll lm hi jq b jr lu ju lv jx lw kb lx kf ly kj lq lr ls lt bi translated">-:范围分隔符</li><li id="0a5a" class="ll lm hi jq b jr lu ju lv jx lw kb lx kf ly kj lq lr ls lt bi translated">/:范围的具体步骤</li><li id="2e02" class="ll lm hi jq b jr lu ju lv jx lw kb lx kf ly kj lq lr ls lt bi translated">@hourly:在每小时开始时运行</li><li id="0134" class="ll lm hi jq b jr lu ju lv jx lw kb lx kf ly kj lq lr ls lt bi translated">@daily:每天在UTC午夜运行</li><li id="fd21" class="ll lm hi jq b jr lu ju lv jx lw kb lx kf ly kj lq lr ls lt bi translated">@weekly:在UTC每周日午夜运行</li><li id="a7d0" class="ll lm hi jq b jr lu ju lv jx lw kb lx kf ly kj lq lr ls lt bi translated">@yearly或@annually:在UTC时间1月1日午夜运行</li></ul><p id="182d" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在这里注册我的电子邮件列表。</p><h2 id="f584" class="kk kl hi bd km kn ko kp kq kr ks kt ku jx kv kw kx kb ky kz la kf lb lc ld le bi translated">克朗塔布游乐场</h2><div class="mj mk ez fb ml mm"><a href="https://crontab.guru/" rel="noopener  ugc nofollow" target="_blank"><div class="mn ab dw"><div class="mo ab mp cl cj mq"><h2 class="bd hj fi z dy mr ea eb ms ed ef hh bi translated">crontab . guru——cron调度表达式编辑器</h2><div class="mt l"><h3 class="bd b fi z dy mr ea eb ms ed ef dx translated">cron调度表达式的快速简单的编辑器我们创建了Cronitor，因为cron本身不能…</h3></div><div class="mu l"><p class="bd b fp z dy mr ea eb ms ed ef dx translated">crontab.guru</p></div></div></div></a></div><h2 id="2084" class="kk kl hi bd km kn ko kp kq kr ks kt ku jx kv kw kx kb ky kz la kf lb lc ld le bi translated">需要自动化的重要任务</h2><p id="4ee8" class="pw-post-body-paragraph jo jp hi jq b jr lg ij jt ju lh im jw jx li jz ka kb lj kd ke kf lk kh ki kj hb bi translated">有一些系统任务可以使用cron自动完成。</p><p id="088f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">备份服务器/台式机</strong></p><p id="63a3" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">您需要将您的桌面和服务器备份到备份服务器，以确保您有数据的副本。建议您使用脚本来自动完成这一过程。该脚本包含可以来回传输和同步数据的备份和恢复命令。</p><div class="mj mk ez fb ml mm"><a href="https://github.com/JohnKaul/rsync_tmbackup" rel="noopener  ugc nofollow" target="_blank"><div class="mn ab dw"><div class="mo ab mp cl cj mq"><h2 class="bd hj fi z dy mr ea eb ms ed ef hh bi translated">GitHub - JohnKaul/rsync_tmbackup:使用rsync的时光机风格备份。</h2><div class="mt l"><h3 class="bd b fi z dy mr ea eb ms ed ef dx translated">这个脚本使用rsync提供了时间机器式的备份。它创建文件和目录的增量备份，以…</h3></div><div class="mu l"><p class="bd b fp z dy mr ea eb ms ed ef dx translated">github.com</p></div></div><div class="mv l"><div class="mw l mx my mz mv na jh mm"/></div></div></a></div><p id="4800" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">您可以在crontab文件中添加以下命令，以备份位于用户个人文件夹中的内容。</p><pre class="iy iz ja jb fd lz ma mb mc aw md bi"><span id="47d5" class="kk kl hi ma b fi me mf l mg mh"># Starts rsync backup at 1am everyday<br/>* */1 * * * if cat /proc/mounts | grep [mounted_backup_dir]; then cd [program_install_folder] &amp;&amp; [script_file] /home [backup_location]; fi</span></pre><p id="0b33" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">同步数据库</strong></p><p id="496e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">同步数据库也是网络开发者将不得不面对的另一个问题。除非您使用自动化解决方案(如下所示)来创建可伸缩的数据库。</p><div class="mj mk ez fb ml mm"><a href="https://www.cockroachlabs.com/" rel="noopener  ugc nofollow" target="_blank"><div class="mn ab dw"><div class="mo ab mp cl cj mq"><h2 class="bd hj fi z dy mr ea eb ms ed ef hh bi translated">蟑螂实验室，建造蟑螂的公司</h2><div class="mt l"><h3 class="bd b fi z dy mr ea eb ms ed ef dx translated">CockroachDB是一个分布式数据库，带有用于云应用程序的标准SQL。CockroachDB为公司提供动力，如…</h3></div><div class="mu l"><p class="bd b fp z dy mr ea eb ms ed ef dx translated">www.cockroachlabs.com</p></div></div><div class="mv l"><div class="nb l mx my mz mv na jh mm"/></div></div></a></div><p id="954f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">您将被迫定期同步数据库，以平衡来自计算服务器的流量负载。</p><p id="29ec" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">IT和工程领域是快速发展的领域。跟不上意味着你将被落在后面。跟上的最好方法是保持最新的新闻和教育内容。<a class="ae jn" rel="noopener" href="/subscribe/@dretechtips">订阅免费电子邮件列表，将你的职业生涯提升10倍。</a></p><p id="d3e3" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">加入我们吧，因为50多位想要快速提升职业生涯和知识基础的人已经注册了。</strong></p><p id="393c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">相关内容</strong></p><ul class=""><li id="ef9c" class="ll lm hi jq b jr js ju jv jx ln kb lo kf lp kj lq lr ls lt bi translated"><a class="ae jn" rel="noopener" href="/geekculture/how-to-securely-delete-files-in-linux-ce6ad1205922">Linux下如何安全删除文件？</a></li><li id="8ef3" class="ll lm hi jq b jr lu ju lv jx lw kb lx kf ly kj lq lr ls lt bi translated"><a class="ae jn" rel="noopener" href="/geekculture/how-to-find-files-in-linux-6ed09a98c899">如何在Linux中查找文件？</a></li><li id="af9d" class="ll lm hi jq b jr lu ju lv jx lw kb lx kf ly kj lq lr ls lt bi translated"><a class="ae jn" rel="noopener" href="/geekculture/ssh-securely-connect-to-your-servers-8895faab7083">如何安全地连接到您的服务器？</a></li></ul></div></div>    
</body>
</html>