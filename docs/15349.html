<html>
<head>
<title>How To install Pg_repack In Linux</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Linux中安装Pg_repack</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/how-to-install-pg-repack-in-linux-71e540e25d9e?source=collection_archive---------5-----------------------#2022-10-27">https://medium.com/geekculture/how-to-install-pg-repack-in-linux-71e540e25d9e?source=collection_archive---------5-----------------------#2022-10-27</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="8cf5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这里，我们将看到一步一步的pg_repack安装</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/8fdef621856966499c83d2bd4c7eaad8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zb6XzBabanZo9L2I2BiGpg.png"/></div></div></figure><p id="61e3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">什么是Pg_repack？</p><ul class=""><li id="b154" class="jp jq hi ih b ii ij im in iq jr iu js iy jt jc ju jv jw jx bi translated">Pg_repack是一个扩展，由几个作者作为开源项目创建和维护。</li><li id="dbd9" class="jp jq hi ih b ii jy im jz iq ka iu kb iy kc jc ju jv jw jx bi translated">它消除了表和索引的膨胀，并可以选择恢复聚集索引的物理顺序。</li></ul><p id="72be" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> Pg_repack安装步骤</strong></p><p id="bc92" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">s-1:</p><p id="4057" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要验证操作系统版本</p><pre class="je jf jg jh fd kd ke kf kg aw kh bi"><span id="a4c1" class="ki kj hi ke b fi kk kl l km kn">[ec2-user@ip-172–31–13–65 ~]$ cat /etc/os-release</span></pre><p id="5521" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">s-2:</p><p id="ee9e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以root用户身份切换并更新现有软件包</p><pre class="je jf jg jh fd kd ke kf kg aw kh bi"><span id="952c" class="ki kj hi ke b fi kk kl l km kn">[root@ip-172-22-13-65 ~]# yum update -y</span></pre><p id="6ca7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">s-3:</p><p id="7f68" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Wget是一个免费的开源软件包，用于使用HTTP、HTTPS和FTP互联网协议获取文件。</p><pre class="je jf jg jh fd kd ke kf kg aw kh bi"><span id="b956" class="ki kj hi ke b fi kk kl l km kn">[root@ip-172-22-13-65 ~]# yum install wget</span></pre><p id="c7c4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">s-4:</p><p id="5e18" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">切换到ec2-user并执行下面的依赖库</p><ul class=""><li id="de3b" class="jp jq hi ih b ii ij im in iq jr iu js iy jt jc ju jv jw jx bi translated">Readline-devel =开发使用Readline库的程序所需的文件，</li><li id="0a4b" class="jp jq hi ih b ii jy im jz iq ka iu kb iy kc jc ju jv jw jx bi translated">OpenSSL=支持加密的工具包。</li></ul><pre class="je jf jg jh fd kd ke kf kg aw kh bi"><span id="1664" class="ki kj hi ke b fi kk kl l km kn">sudo yum install readline-devel openssl-devel</span></pre><p id="d037" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">s-5:</p><p id="834d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">PostgreSQL-devel包是为PostgreSQL开发头文件和库而设计的。</p><pre class="je jf jg jh fd kd ke kf kg aw kh bi"><span id="e4f7" class="ki kj hi ke b fi kk kl l km kn">sudo yum install postgresql-devel</span></pre><p id="63a5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">s-6:</p><p id="ec8f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">GNU编译器集合(GCC)是C、C++、Objective-C、Fortran、Ada、Go和D编程语言的编译器和库的集合。许多开源项目包括GNU工具和Linux内核都是用GCC编译的。</p><pre class="je jf jg jh fd kd ke kf kg aw kh bi"><span id="ab26" class="ki kj hi ke b fi kk kl l km kn">sudo yum install gcc</span></pre><p id="fad0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">s-7:</p><p id="7e1c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">安装PostgreSQL客户端-服务器rpm，我们必须安装基于PostgreSQL开发工具的PostgreSQL包</p><pre class="je jf jg jh fd kd ke kf kg aw kh bi"><span id="7a62" class="ki kj hi ke b fi kk kl l km kn">wget <a class="ae ko" href="http://mirror.centos.org/centos/7/updates/x86_64/Packages/postgresql-static-9.2.24-8.el7_9.x86_64.rpm" rel="noopener ugc nofollow" target="_blank">http://mirror.centos.org/centos/7/updates/x86_64/Packages/postgresql-static-9.2.24-8.el7_9.x86_64.rpm</a></span></pre><p id="4528" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">s-8:</p><p id="8f96" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用下面的命令验证下载的包</p><pre class="je jf jg jh fd kd ke kf kg aw kh bi"><span id="7390" class="ki kj hi ke b fi kk kl l km kn">ls -lrth</span></pre><p id="8b99" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">s-9:</p><p id="93b6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">安装PostgreSQL下载的rpm包</p><pre class="je jf jg jh fd kd ke kf kg aw kh bi"><span id="b245" class="ki kj hi ke b fi kk kl l km kn">sudo rpm -i postgresql-static-9.2.24-7.el7_9.x86_64.rpm</span></pre><p id="0580" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">s-10:</p><p id="0a0f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">根据支持建议下载pg_repack 1.4.5，PostgreSQL版本12将仅支持pg_repack 1.4.5，以防如果我们安装pg_repack最新版本1.4.7，由于pg_repack版本不兼容，将无法执行pg_repack</p><pre class="je jf jg jh fd kd ke kf kg aw kh bi"><span id="978a" class="ki kj hi ke b fi kk kl l km kn">wget <a class="ae ko" href="http://api.pgxn.org/dist/pg_repack/1.4.5/pg_repack-1.4.5.zip" rel="noopener ugc nofollow" target="_blank">http://api.pgxn.org/dist/pg_repack/1.4.5/pg_repack-1.4.5.zip</a></span></pre><p id="9759" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">s-11:</p><p id="f0a5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">解压缩下载的pg_repack zip文件</p><pre class="je jf jg jh fd kd ke kf kg aw kh bi"><span id="5435" class="ki kj hi ke b fi kk kl l km kn">unzip pg_repack-1.4.5.zip</span></pre><p id="94ac" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">s-12:</p><p id="0827" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦我们解压了pg_repack，就进入下面的目录</p><pre class="je jf jg jh fd kd ke kf kg aw kh bi"><span id="ccf9" class="ki kj hi ke b fi kk kl l km kn">cd pg_repack-1.4.5</span></pre><p id="dbfb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">s-13:</p><p id="bc20" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">执行<strong class="ih hj"> make </strong>命令，确保无错误报告。</p><pre class="je jf jg jh fd kd ke kf kg aw kh bi"><span id="d778" class="ki kj hi ke b fi kk kl l km kn">make</span></pre><p id="e5a4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">s-14:</p><p id="f048" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要验证pg_repack版本</p><pre class="je jf jg jh fd kd ke kf kg aw kh bi"><span id="3b9d" class="ki kj hi ke b fi kk kl l km kn">cd bin</span><span id="2c22" class="ki kj hi ke b fi kp kl l km kn">./pg_repack --version</span></pre></div></div>    
</body>
</html>