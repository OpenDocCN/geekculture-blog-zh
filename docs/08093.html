<html>
<head>
<title>Hack This Site: Realistic Web Mission — Level 14</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">黑掉这个网站:现实的网络任务——14级</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/hack-this-site-realistic-web-mission-level-14-7c6b5653d2cc?source=collection_archive---------6-----------------------#2021-10-14">https://medium.com/geekculture/hack-this-site-realistic-web-mission-level-14-7c6b5653d2cc?source=collection_archive---------6-----------------------#2021-10-14</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/cea8bfe578ac28e447fa7698a507c849.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xNhUFT06SCZGTvz3"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Hack This Site: Realistic Web Mission — Level 14</figcaption></figure><p id="bdbe" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">大家好，欢迎来到HaXeZ，今天我们要看的是<a class="ae js" href="https://hackthissite.org/" rel="noopener ugc nofollow" target="_blank">黑掉这个网站</a>现实网络任务14。不幸的是，这个任务现在看起来已经被破坏了，所以我无法用预定的方法来解决它。我希望有人能证明我是错的，并告诉我如何正确地完成这项工作。然而，在走进一个又一个死胡同后，我放弃了，并查看了一些演练。我看的第一本指南是<a class="ae js" href="https://www.aldeid.com/wiki/Hackthissite/Realistic/Level14" rel="noopener ugc nofollow" target="_blank">阿尔德伊德的</a>。我还看了<a class="ae js" href="https://www.youtube.com/watch?v=7PkywoOSzBc" rel="noopener ugc nofollow" target="_blank">查克·摩尔的youtube视频</a>，并在官方论坛上阅读了这篇<a class="ae js" href="https://www.hackthissite.org/articles/read/681/" rel="noopener ugc nofollow" target="_blank">帖子</a>。所有这些指南都使用一个空字节来完成任务。如果你没有看过我在真人秀系列上的其他帖子，你可以在这里看到:<a class="ae js" href="https://haxez.org/2021/09/hack-this-site-realistic-web-missions-level-1/" rel="noopener ugc nofollow" target="_blank">第一部分</a>，<a class="ae js" href="https://haxez.org/2021/09/hack-this-site-realistic-web-mission-level-2/" rel="noopener ugc nofollow" target="_blank">第二部分</a>，<a class="ae js" href="https://haxez.org/2021/09/hack-this-site-realistic-web-mission-level-3/" rel="noopener ugc nofollow" target="_blank">第三部分</a>，<a class="ae js" href="https://haxez.org/2021/09/hack-this-site-realistic-web-mission-level-4/" rel="noopener ugc nofollow" target="_blank">第四部分</a>，<a class="ae js" href="https://haxez.org/2021/09/hack-this-site-realistic-web-mission-level-5/" rel="noopener ugc nofollow" target="_blank">第五部分</a>，<a class="ae js" href="https://haxez.org/2021/09/hack-this-site-realistic-web-mission-level-6/" rel="noopener ugc nofollow" target="_blank">第六部分</a>，<a class="ae js" href="https://haxez.org/2021/10/hack-this-site-realistic-web-mission-level-7/" rel="noopener ugc nofollow" target="_blank">第七部分</a>，<a class="ae js" href="https://haxez.org/2021/10/hack-this-site-realistic-web-mission-level-8/" rel="noopener ugc nofollow" target="_blank">第八部分</a>。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div class="er es jt"><img src="../Images/ec12ef165f9218ce8a5cf15d287438ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1182/0*8n7dQuMIVvWOtPtf"/></div><figcaption class="iq ir et er es is it bd b be z dx">Yuppers Internet Solutions</figcaption></figure><h1 id="1f0c" class="jy jz hi bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">介绍</h1><p id="c7bb" class="pw-post-body-paragraph iu iv hi iw b ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn la jp jq jr hb bi translated">我们收到了一条来自未知来源的消息，该消息想要揭露Yuppers互联网解决方案出售其用户数据的行为。这位匿名客户曾在雅痞公司实习，但在得知他们邪恶的数据出售活动后辞职了。他们无法带着证据逃脱，所以他们问我们是否能够侵入并找到他们出售数据的证据。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lb"><img src="../Images/e6c7818997de0ca089234fbc3393ce46.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/0*gKaxiy8MNyme7U8K"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Message From Unknown Client</figcaption></figure><h1 id="a269" class="jy jz hi bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">探索Web应用程序</h1><p id="6b45" class="pw-post-body-paragraph iu iv hi iw b ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn la jp jq jr hb bi translated">该网站似乎有相当多的进展。它有一个搜索页面、一个新闻页面和许多其他页面。web应用程序似乎正在使用CGI脚本。CGI(公共网关接口)脚本是作为服务器端的独立进程执行的程序。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div class="er es lb"><img src="../Images/fa5f18081a0aa6e5175c05ddafb3b670.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/0*dkwo1NSX0CNvK2OJ"/></div><figcaption class="iq ir et er es is it bd b be z dx">The Web Application</figcaption></figure><h1 id="c43b" class="jy jz hi bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">Web应用开发——预期的方式</h1><p id="6043" class="pw-post-body-paragraph iu iv hi iw b ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn la jp jq jr hb bi translated">正如我提到的，这个任务似乎已经失败了。完成这项任务的方法是在news.cgi脚本中使用一个空字节。使用空字节应该可以揭示web应用程序的根目录中有哪些文件。有了这些文件，您可以进一步了解应用程序，从而可以继续下一步。然而不幸的是，无论我怎么尝试，我都无法让空字节工作。news.cgi脚本有一个名为story的参数。story参数负责调用新闻故事。</p><pre class="ju jv jw jx fd lc ld le lf aw lg bi"><span id="1343" class="lh jz hi ld b fi li lj l lk ll"><a class="ae js" href="https://www.hackthissite.org/missions/realistic/14/news.cgi?story=1" rel="noopener ugc nofollow" target="_blank">https://www.hackthissite.org/missions/realistic/14/news.cgi?<strong class="ld hj">story=1</strong></a></span></pre><figure class="ju jv jw jx fd ij er es paragraph-image"><div class="er es lb"><img src="../Images/c7cb45b6a5b4bb56df461ca14e4a3c4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/0*tPwyf2122zlbE8BE"/></div></figure><p id="b35c" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">下面的屏幕截图举例说明了用于加载新闻的新闻故事参数。正如您在URL中看到的，story参数调用第一个故事，该故事随后显示在搜索表单下方的框中。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div class="er es lb"><img src="../Images/eb2750f4787f4e697e7159c414586139.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/0*emBISozOUq4DsCJi"/></div><figcaption class="iq ir et er es is it bd b be z dx">News Page — Story 1</figcaption></figure><p id="419b" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">为了利用这个cgi脚本，我们应该给故事参数<code class="du lm ln lo ld b">story=.%00</code>添加一个空字节。句号表示当前目录。输入空字节并执行URL后，我们应该会收到当前目录的内容列表。类似于我们在之前的任务中使用的<code class="du lm ln lo ld b">ls</code> OS命令注入。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div class="er es lb"><img src="../Images/57983776ec8a07988a39014b408fe4ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/0*JPHXr4xis7G_frsk"/></div><figcaption class="iq ir et er es is it bd b be z dx">Null Byte Injection</figcaption></figure><p id="ba6b" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">然而，这种方法行不通。我已经尝试了各种不同的目录遍历，并尝试使用其他转义字符。它们或者产生消息“加载失败..或者他们产生一个错误消息，说它收到了格式错误的输入。我提交了超过100个不同的有效载荷使用Burp入侵者，没有成功。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div class="er es lb"><img src="../Images/e9416ee5c7428a7886a5793f2845ad35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/0*x5c8BpiJ5ep1_jaw"/></div><figcaption class="iq ir et er es is it bd b be z dx">Error Message — Failed to load</figcaption></figure><h1 id="66b0" class="jy jz hi bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">进一步的调查</h1><p id="d1ff" class="pw-post-body-paragraph iu iv hi iw b ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn la jp jq jr hb bi translated">为了进一步支持这一点，如果我们用Burp Suite捕获请求并将其发送到repeater工具，我们可以快速测试有效负载。下面的截图显示，空字节无法从CGI脚本中逸出，因为<code class="du lm ln lo ld b">..news</code>被附加到“加载失败”消息中。我尝试了URL编码有效载荷和许多其他方法来触发漏洞，但都不成功。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div class="er es lb"><img src="../Images/dc0e35a03ecad9609fede1b8493b5c8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/0*d7bZo-oYuVWIGJ7E"/></div><figcaption class="iq ir et er es is it bd b be z dx">Burp Suite — Repeater</figcaption></figure><h1 id="bd05" class="jy jz hi bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">Web应用开发——我的方式</h1><p id="a501" class="pw-post-body-paragraph iu iv hi iw b ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn la jp jq jr hb bi translated">为了更进一步，我们需要知道根目录的内容。为了用另一种方式做到这一点，我使用了带有-X标志的工具DIRB来指定我想要查看所有的CGI文件。果然，DIRB找到了前进所需的administrator.cgi和moderator.cgi脚本。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div class="er es lb"><img src="../Images/3b73bba3275eab873bdeeaa51eba015d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/0*riDuxawJXrgx_1ad"/></div><figcaption class="iq ir et er es is it bd b be z dx">DIRB</figcaption></figure><p id="acd2" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">不幸的是，没有办法解决任务的下一部分。这部分任务要求您使用一个空字节来读取moderator.cgi脚本的内容。我用其他页面参数进行了尝试，但最终得到了相同的结果。下面的示例URL应该允许您阅读不同脚本的内容。可悲的是，它们已经不起作用了。</p><p id="b05d" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">阅读版主. cgi的网址</strong></p><pre class="ju jv jw jx fd lc ld le lf aw lg bi"><span id="4c7d" class="lh jz hi ld b fi li lj l lk ll"><a class="ae js" href="http://www.hackthissite.org/missions/realistic/14/news.cgi?story=moderator.cgi%00" rel="noopener ugc nofollow" target="_blank">http://www.hackthissite.org/missions/realistic/14/news.cgi?story=<strong class="ld hj">moderator.cgi%00</strong></a></span></pre><p id="0c7b" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">读取administrator.cgi的URL</strong></p><pre class="ju jv jw jx fd lc ld le lf aw lg bi"><span id="465d" class="lh jz hi ld b fi li lj l lk ll"><a class="ae js" href="http://www.hackthissite.org/missions/realistic/14/news.cgi?story=administrator.cgi%00" rel="noopener ugc nofollow" target="_blank">http://www.hackthissite.org/missions/realistic/14/news.cgi?story=<strong class="ld hj">administrator.cgi%00</strong></a></span></pre><p id="612e" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">不幸的是，正如你从下面的截图中看到的，这些只会导致错误消息。如果看不到这些脚本的内容，不查找答案就无法在任务中前进。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div class="er es lb"><img src="../Images/3e8d69068bef0979d8e42627cb8df654.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/0*GQWNzLFVcCZOaJCe"/></div><figcaption class="iq ir et er es is it bd b be z dx">Error Message — Failed To Load</figcaption></figure><h1 id="4311" class="jy jz hi bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">走向</h1><p id="fb8f" class="pw-post-body-paragraph iu iv hi iw b ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn la jp jq jr hb bi translated">如果空字节攻击成功了，那么我们就能看到CGI脚本的内容。CGI脚本应该包含一个名为<code class="du lm ln lo ld b">'isadmin'</code>的用户名。使用这个用户名，我们可以导航到moderator.cgi文件并登录。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div class="er es lb"><img src="../Images/4585e9682a262b0d8ad205063dddab13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/0*XWzi4Mox0wr7sXmT"/></div><figcaption class="iq ir et er es is it bd b be z dx">Moderator.cgi Login</figcaption></figure><p id="1530" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">登录后，我们会看到一个版主面板。该面板提供了两个选项，查看帐户信息和查看电子邮件流量。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div class="er es lb"><img src="../Images/6b57f114856e2f5a163b76d1cb641f37.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/0*BZcaXnrBa18B7a8V"/></div><figcaption class="iq ir et er es is it bd b be z dx">Moderator Panel</figcaption></figure><p id="3900" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">如果我们向帐户信息页面提交一个星号或通配符，那么我们将得到当前用户的所有信息列表。前两个条目是用户名和密码。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div class="er es lb"><img src="../Images/674da7149005b1e7469910ec951fdd4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/0*mQmbZxfekpSfGo1i"/></div><figcaption class="iq ir et er es is it bd b be z dx">Account Details</figcaption></figure><h1 id="6799" class="jy jz hi bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">Web应用程序—权限升级</h1><p id="4904" class="pw-post-body-paragraph iu iv hi iw b ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn la jp jq jr hb bi translated">有了这些信息，我们可以导航回应用程序的索引页面，并使用Web Permit登录表单以<code class="du lm ln lo ld b">'web guy'</code>的身份登录应用程序。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div class="er es lb"><img src="../Images/bd206a5ba0324adbc2a3a44999527cf9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/0*TF1UTgA_TQ31IoQd"/></div><figcaption class="iq ir et er es is it bd b be z dx">Log in page</figcaption></figure><p id="feb9" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">登录并访问管理员面板后，我们应该完成任务。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lb"><img src="../Images/8032f348debb3267b532f4db1a88d6ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/0*PkD-HMFaG5ztN6-Z"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Congratulations</figcaption></figure><h1 id="4da6" class="jy jz hi bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">结论</h1><p id="b301" class="pw-post-body-paragraph iu iv hi iw b ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn la jp jq jr hb bi translated">很遗憾这个挑战似乎被打破了。如果不是，那么我想为我的虚假声明向Hack This Site团队道歉。然而，根据我在这篇文章中收集和展示的信息，我认为这是错误的。这是我遇到的唯一一个空字节注入的例子，所以它不再工作真的令人失望。我希望它被修理。</p><figure class="ju jv jw jx fd ij"><div class="bz dy l di"><div class="lp lq l"/></div></figure></div></div>    
</body>
</html>