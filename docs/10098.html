<html>
<head>
<title>Partials in Handlebars Express.js and using a Middleware</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Handlebars Express.js中的Partials和使用中间件</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/partials-in-handlebars-express-js-and-using-a-middleware-f3415357ac9f?source=collection_archive---------12-----------------------#2022-01-13">https://medium.com/geekculture/partials-in-handlebars-express-js-and-using-a-middleware-f3415357ac9f?source=collection_archive---------12-----------------------#2022-01-13</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/de95572733723dececc244e87be5318e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*8ErZexiIo-Nt5NYQ.jpg"/></div></div></figure><div class=""/><p id="cf63" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Partials是在你的Handlebars项目中重用代码的最佳方式，有时我们希望在所有页面中使用一段代码，但我们倾向于一次又一次地复制和粘贴相同的代码，但对于partials，我们实际上称之为partial，仅此而已。</p><p id="71f7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们开始在视图目录中添加一个部分目录</p><figure class="jp jq jr js fd hk er es paragraph-image"><div class="er es jo"><img src="../Images/1a4d08a1a8346c72e57ae683c4fc3d0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:418/format:webp/1*zwW1S9HpC6PoY24ZjJmPgQ.png"/></div><figcaption class="jt ju et er es jv jw bd b be z dx">Example adding partials directory</figcaption></figure><p id="9fb3" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后，我们需要创建我们的partial，例如在这种情况下，我将创建card.handlebars，我将为每张卡片添加每个handlebars语句，这样它将打印带有各自标题、文本和图像的卡片</p><figure class="jp jq jr js fd hk er es paragraph-image"><div class="er es jx"><img src="../Images/5fa450f7eef7036e8176192b4ad4d5c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:880/format:webp/1*sr-YoT9KFiNqs57pZefYpg.png"/></div><figcaption class="jt ju et er es jv jw bd b be z dx">Example partial card handlebars</figcaption></figure><p id="4a78" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">接下来，为了简洁起见，我们需要在lib/middleware/目录下创建一个名为card.js的中间件</p><figure class="jp jq jr js fd hk er es paragraph-image"><div class="er es jy"><img src="../Images/90a0c32c439750ef96410e3eb1ef9e84.png" data-original-src="https://miro.medium.com/v2/resize:fit:340/format:webp/1*77OtcManlGy6dicsarg1VA.png"/></div><figcaption class="jt ju et er es jv jw bd b be z dx">Example creating a card.js file on the middleware directory</figcaption></figure><p id="abf9" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将在card.js中加入一个名为getCardData的函数，该函数的返回是一个包含三个对象卡的承诺</p><figure class="jp jq jr js fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es jz"><img src="../Images/609009a6b7072bc7cb689681ceba3625.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*npthuIHOkT6d_2qRGoOaLg.png"/></div></div><figcaption class="jt ju et er es jv jw bd b be z dx">Example creating the getCardData function returning a Promise</figcaption></figure><p id="7a9b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后，一个名为cardMiddleware的异步函数将添加到全局locals.partials信息中，因此cardContext为我们上面的部分，用module.exports导出模块</p><figure class="jp jq jr js fd hk er es paragraph-image"><div class="er es ka"><img src="../Images/8c4ba69e488813e5b57332c9d0042724.png" data-original-src="https://miro.medium.com/v2/resize:fit:1062/format:webp/1*xG4ufYICTwHEV94qiDogAw.png"/></div><figcaption class="jt ju et er es jv jw bd b be z dx">Example adding a middleware called cardMiddleware who will add information globally</figcaption></figure><p id="9356" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">之后，我们需要添加我们的中间件到服务器</p><figure class="jp jq jr js fd hk er es paragraph-image"><div class="er es kb"><img src="../Images/36096e94072edbb6ae40356691745fd6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1134/format:webp/1*ACwedkzLpmWTgdWu4txYLg.png"/></div><figcaption class="jt ju et er es jv jw bd b be z dx">Example adding the cardMiddleware to our server</figcaption></figure><p id="5ac0" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">酷，我们需要在任何我们想添加的地方添加我们的部分，但是我如何添加它呢？使用这个代码，这个代码将搜索每一个部分，并将打印在页面上。</p><pre class="jp jq jr js fd kc kd ke kf aw kg bi"><span id="f080" class="kh ki ht kd b fi kj kk l kl km">{{&gt; card}}</span></pre><figure class="jp jq jr js fd hk er es paragraph-image"><div class="er es kn"><img src="../Images/242d21ce3553a0724f05b075c72f5404.png" data-original-src="https://miro.medium.com/v2/resize:fit:514/format:webp/1*qgalziHBwazH-fY-2XyAkg.png"/></div><figcaption class="jt ju et er es jv jw bd b be z dx">Example adding the partial to my showcard view</figcaption></figure><figure class="jp jq jr js fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es ko"><img src="../Images/0bcdb7a74c8033c6f079fb24b07e7b1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/format:webp/1*7JTxvp8yAjR9LthKm1SDCw.png"/></div></div><figcaption class="jt ju et er es jv jw bd b be z dx">Example final server code for partials</figcaption></figure><p id="3676" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果我们转到我们的主页(展示卡页面),我们可以看到卡片，但我没有为我们的部分卡片添加样式</p><figure class="jp jq jr js fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es kp"><img src="../Images/401021b5f3bd2b153ff68d1231a72af8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xHjAmsb5pEGNUSYdvrvleg.png"/></div></div><figcaption class="jt ju et er es jv jw bd b be z dx">Example partials on the web page</figcaption></figure><p id="5a5a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">正如你所看到的，它工作顺利，但有问题，很抱歉，因为这些卡片没有样式。</p><h1 id="1872" class="kq ki ht bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">结论</h1><p id="039e" class="pw-post-body-paragraph iq ir ht is b it ln iv iw ix lo iz ja jb lp jd je jf lq jh ji jj lr jl jm jn hb bi translated">Partials是练习或添加到Handlebars Express.js项目中的一个很好的选择，因为它是重用代码的一个很好的方式，并且与中间件连接可以创建一个整洁和可维护的代码。</p><h1 id="b33e" class="kq ki ht bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">来源</h1><div class="hh hi ez fb hj ls"><a href="https://www.amazon.com/Web-Development-Node-Express-Leveraging-dp-1492053511/dp/1492053511/ref=dp_ob_title_bk" rel="noopener  ugc nofollow" target="_blank"><div class="lt ab dw"><div class="lu ab lv cl cj lw"><h2 class="bd hu fi z dy lx ea eb ly ed ef hs bi translated">使用Node和Express进行Web开发:利用JavaScript堆栈</h2><div class="lz l"><h3 class="bd b fi z dy lx ea eb ly ed ef dx translated">使用Node和Express进行Web开发:利用Amazon.com的JavaScript堆栈。*免费*送货到…</h3></div><div class="ma l"><p class="bd b fp z dy lx ea eb ly ed ef dx translated">www.amazon.com</p></div></div><div class="mb l"><div class="mc l md me mf mb mg hp ls"/></div></div></a></div></div></div>    
</body>
</html>