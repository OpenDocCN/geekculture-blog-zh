<html>
<head>
<title>Discord Scheduling Bot for Business</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">企业不和谐调度机器人</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/discord-scheduling-bot-for-business-3926018d9956?source=collection_archive---------6-----------------------#2021-04-23">https://medium.com/geekculture/discord-scheduling-bot-for-business-3926018d9956?source=collection_archive---------6-----------------------#2021-04-23</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/6bcb35fff168a490ee5396ce94a1dc4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kew6Ip1Jdy57yLGoOvhtQg.jpeg"/></div></div></figure><p id="b563" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">多年来，不和谐在游戏社区一直很流行。但是由于<strong class="is hj">远程工作</strong>和<strong class="is hj">在家工作</strong>机会的激增，它在<strong class="is hj">商业</strong>世界中与Slack、Google和Zoom等工具激烈竞争。</p><p id="bc51" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> YouTube演示</strong>:<a class="ae jo" href="https://www.youtube.com/watch?v=e5SpHXVMlKw" rel="noopener ugc nofollow" target="_blank">https://www.youtube.com/watch?v=e5SpHXVMlKw</a></p><figure class="jq jr js jt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jp"><img src="../Images/c64334d2bf020d011f29ff79d945252b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*EszwQvR5DpFwOCw_.png"/></div></div></figure><p id="dcd9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你可以加入我们的不和谐服务器，自己试试这个机器人:<a class="ae jo" href="https://discord.gg/j3gd5Qk5uW" rel="noopener ugc nofollow" target="_blank">https://discord.gg/j3gd5Qk5uW</a></p><h1 id="4994" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">介绍</h1><p id="01e1" class="pw-post-body-paragraph iq ir hi is b it ks iv iw ix kt iz ja jb ku jd je jf kv jh ji jj kw jl jm jn hb bi translated">我们喜欢Spurwing的Discord，它免费提供我们需要的所有功能:文本和语音频道、视频通话、视频会议、屏幕共享，最近还增加了舞台频道。你可以通过这些渠道模仿T21的办公室体验，这是保守的经理们的理想解决方案。</p><p id="d4ef" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">最重要的是，它为构建机器人和自动化解决方案提供了一流的API、开发人员社区和资源。安排约会和管理日历是一件复杂的事情，幸运的是，鞭策有助于简化和提高效率。</p><p id="d0e1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这篇文章中，我将分享我们简单的解决方案来安排不和谐的约会。完整的代码可以在我们的<a class="ae jo" href="https://github.com/Spurwingio/Chat-Bots/tree/main/Discord/NodeJS" rel="noopener ugc nofollow" target="_blank"> GitHub库</a>上找到。这个不和谐机器人连接到我们的Spurwing API，用于安排约会和管理我们的日历。</p><h1 id="a090" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">Bot摘要</h1><p id="b71d" class="pw-post-body-paragraph iq ir hi is b it ks iv iw ix kt iz ja jb ku jd je jf kv jh ji jj kw jl jm jn hb bi translated">不和谐机器人是一段代码，它可以监听文本(或语音)数据，然后根据你的编程做出反应。调用/使用机器人最简单的方法是使用前缀字符，如<code class="du kx ky kz la b">!</code>或<code class="du kx ky kz la b">*</code>。要查看所有可用的命令，我们可以输入<code class="du kx ky kz la b">!help</code>:</p><figure class="jq jr js jt fd ij er es paragraph-image"><div class="er es lb"><img src="../Images/10dbed71d9f720b1883b8d423d0cb956.png" data-original-src="https://miro.medium.com/v2/resize:fit:1240/format:webp/0*AnnHoUAYHvMnPVmN.png"/></div></figure><p id="58b8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们遇到的第一个命令是<code class="du kx ky kz la b">!days [date]</code>，它将给出<code class="du kx ky kz la b">[date]</code>月份中所有可用的天数。省略此参数将使用当前月份。也可以用<code class="du kx ky kz la b">today</code>、<code class="du kx ky kz la b">next month</code>、<code class="du kx ky kz la b">March 2021</code>等关键词。我们使用一个很棒的NLP库<a class="ae jo" href="https://github.com/wanasit/chrono" rel="noopener ugc nofollow" target="_blank"> chrono </a>，它能够将随意的文本解释成JavaScript DateTime对象:</p><figure class="jq jr js jt fd ij er es paragraph-image"><div class="er es lc"><img src="../Images/71a5eb6b0948f8b03985ec2a0e2b447f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/format:webp/0*0VCBkiSVxT-X43zm.png"/></div></figure><p id="28cb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们可以使用的第二个命令是<code class="du kx ky kz la b">!slots [date]</code>。这将返回我们日历上可预订时段的列表:</p><figure class="jq jr js jt fd ij er es paragraph-image"><div class="er es ld"><img src="../Images/ba5cec11865bf6056cf41f096b043959.png" data-original-src="https://miro.medium.com/v2/resize:fit:1260/format:webp/0*hEQ-dOE_PbUkOfpE.png"/></div></figure><p id="f3e1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">请注意，这些槽包含一个时区偏移量<code class="du kx ky kz la b">+0200</code>，这意味着GMT+2。这个时区取决于你的机器人所在机器的当地时间。但是我们也可以提供一个自定义时区或偏移量来查看相对于您所在位置的时间:</p><figure class="jq jr js jt fd ij er es paragraph-image"><div class="er es le"><img src="../Images/07db09fb410a124df5df0558e7361e18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1262/format:webp/0*vA4NrXBwe8AVVU6c.png"/></div></figure><p id="96bf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果某个日期没有可预订的空位，您将会收到一条错误消息:</p><figure class="jq jr js jt fd ij er es paragraph-image"><div class="er es lf"><img src="../Images/c79639b9a2f6c54d99e5004a46fd184d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1264/format:webp/0*SJ5DOV4rPXZsMyh4.png"/></div></figure><p id="210d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">既然我们能够找到可预订的时间段，我们可以使用第三个命令<code class="du kx ky kz la b">!book [slot] [@email]</code>开始安排预约。您可以使用其中一个时段作为<code class="du kx ky kz la b">[slot]</code>参数，或者提供一个自定义的日期和时间，只要它将评估为有效和可预订的时段:</p><figure class="jq jr js jt fd ij er es paragraph-image"><div class="er es ld"><img src="../Images/a1c78001e330af6080fc1b31721c37c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1260/format:webp/0*ZEI6Ann1PNEDFvmJ.png"/></div></figure><p id="d0cb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">同样，如果预订失败，您将看到一条错误消息:</p><figure class="jq jr js jt fd ij er es paragraph-image"><div class="er es le"><img src="../Images/631174c4894c7356d75cd5dbe8da6455.png" data-original-src="https://miro.medium.com/v2/resize:fit:1262/format:webp/0*5ZV5vS_jmvrQVDHU.png"/></div></figure><p id="6a72" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这三个简单的命令允许Discord用户与您安排简单的一对一约会。在接下来的部分中，我们将解释如何安装和配置这个机器人，以及如何为一对多约会定制它并合并多个日历。</p><h1 id="dfc8" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">要求</h1><ul class=""><li id="ded0" class="lg lh hi is b it ks ix kt jb li jf lj jj lk jn ll lm ln lo bi translated">强烈推荐NodeJS v12.x或v14.x</li><li id="22a0" class="lg lh hi is b it lp ix lq jb lr jf ls jj lt jn ll lm ln lo bi translated">如果你还没有一个Discord机器人，按照这个<a class="ae jo" href="https://www.digitalocean.com/community/tutorials/how-to-build-a-discord-bot-with-node-js" rel="noopener ugc nofollow" target="_blank">教程</a>的步骤1获得你的机器人的令牌，并将机器人添加到你的Discord服务器。</li></ul><h1 id="1204" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">装置</h1><p id="521e" class="pw-post-body-paragraph iq ir hi is b it ks iv iw ix kt iz ja jb ku jd je jf kv jh ji jj kw jl jm jn hb bi translated">1.克隆、派生或下载我们的库:<a class="ae jo" href="https://github.com/Spurwingio/Chat-Bots/" rel="noopener ugc nofollow" target="_blank">https://github.com/Spurwingio/Chat-Bots/</a></p><p id="107e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">2.导航到<code class="du kx ky kz la b">/Discord/NodeJS/</code>并执行<code class="du kx ky kz la b">npm install</code></p><p id="cb9e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">3.将文件<code class="du kx ky kz la b">config.sample.js</code>复制到<code class="du kx ky kz la b">config.js</code>并进行编辑</p><ul class=""><li id="d221" class="lg lh hi is b it iu ix iy jb lu jf lv jj lw jn ll lm ln lo bi translated">提供你的不和谐机器人令牌</li><li id="08dc" class="lg lh hi is b it lp ix lq jb lr jf ls jj lt jn ll lm ln lo bi translated">提供您的Spurwing提供商Id</li><li id="6501" class="lg lh hi is b it lp ix lq jb lr jf ls jj lt jn ll lm ln lo bi translated">可以选择提供一个拒绝的约会类型Id</li></ul><p id="fe4f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">4.运行bot: <code class="du kx ky kz la b">node index.js</code></p><ul class=""><li id="a305" class="lg lh hi is b it iu ix iy jb lu jf lv jj lw jn ll lm ln lo bi translated">可以选择使用PM2或nodemon来保持机器人全天候运行</li></ul><p id="8e88" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">成功连接后，您应该会看到如下消息:</p><figure class="jq jr js jt fd ij er es paragraph-image"><div class="er es lx"><img src="../Images/a18f36fdc512a8dbcbb164614ed29dea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1364/format:webp/0*2taxcUyF8su5nkzB.png"/></div></figure><p id="40a0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果您没有提供约会类型Id，代码将从您的Spurwing帐户中随机获取一个Id。每种约会类型都有相关的持续时间(15分钟、30分钟、45分钟等等)。我们的API使用它来生成可预订的位置。</p><h1 id="306a" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">开发商</h1><p id="240b" class="pw-post-body-paragraph iq ir hi is b it ks iv iw ix kt iz ja jb ku jd je jf kv jh ji jj kw jl jm jn hb bi translated">这个机器人仅仅是一个用于<strong class="is hj">演示目的</strong>的基本实现。我们可以通过更多高级功能来扩展它，以方便日历管理、团体预订、提醒、发送电子邮件、语音命令等。</p><figure class="jq jr js jt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ly"><img src="../Images/b9cc27f55053324f6addc4f63169d822.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*U0b1WN23PPIH62v4.png"/></div></div></figure><h1 id="6a35" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">状态管理</h1><p id="1dcd" class="pw-post-body-paragraph iq ir hi is b it ks iv iw ix kt iz ja jb ku jd je jf kv jh ji jj kw jl jm jn hb bi translated">Spurwing提供者ID ( <strong class="is hj"> PID </strong>)代表一个单独的日历。您可以扩展bot来保存Discord成员及其PID的映射。如果你的Spurwing帐户有组织特权，那么你可以为你的所有成员创建多个帐户(以及PID)。每个日历还可以与提供的任何第三方电子邮件双向同步(Gmail、Outlook、Apple)。</p><figure class="jq jr js jt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lz"><img src="../Images/fd0b5ee047ae8d7f43ef7f50582e6c93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Wa9ku19sEyPeU0Yo.png"/></div></div></figure><h1 id="a5f1" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">团体预订</h1><p id="28dd" class="pw-post-body-paragraph iq ir hi is b it ks iv iw ix kt iz ja jb ku jd je jf kv jh ji jj kw jl jm jn hb bi translated">我们的演示机器人只允许1对1预订，因此对于<code class="du kx ky kz la b">!book</code>命令只有一个<code class="du kx ky kz la b">[@email]</code>参数。您可以扩展该命令以允许电子邮件地址列表。</p><p id="0cb6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">或者，您可以创建Discord成员及其电子邮件地址的映射。现在你可以使用<code class="du kx ky kz la b">@username</code>符号，而不是明确地提供他们的电子邮件给指挥部。</p><h1 id="f492" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">提醒</h1><p id="8c6b" class="pw-post-body-paragraph iq ir hi is b it ks iv iw ix kt iz ja jb ku jd je jf kv jh ji jj kw jl jm jn hb bi translated">要合并自动提醒，无论是公共公告还是私人消息，您可以对所有日历事件进行bot轮询(大约每分钟一次)。并根据您的喜好，让它发送提醒给所有参与者。</p><figure class="jq jr js jt fd ij er es paragraph-image"><div class="er es ma"><img src="../Images/9a31806713a08143aaf95ab734c066ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1296/format:webp/0*K2pHAq2vG37Ihf2K.png"/></div></figure><h1 id="aae9" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">发送电子邮件</h1><p id="0e29" class="pw-post-body-paragraph iq ir hi is b it ks iv iw ix kt iz ja jb ku jd je jf kv jh ji jj kw jl jm jn hb bi translated">我们已经有了一个使用SMTP协议发送电子邮件的Spurwing库。我们的<a class="ae jo" href="https://github.com/Spurwingio/iCalendar-Integrations/" rel="noopener ugc nofollow" target="_blank"> iCalendar库储存库</a>包含了你在<code class="du kx ky kz la b">index.js</code>中需要的所有逻辑，尤其是你可以使用的<code class="du kx ky kz la b">sendMail</code>函数。</p><h1 id="250b" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">语音命令</h1><p id="3212" class="pw-post-body-paragraph iq ir hi is b it ks iv iw ix kt iz ja jb ku jd je jf kv jh ji jj kw jl jm jn hb bi translated">我最喜欢Discord的一点是它的声音通道。这只是一个虚拟的地方，你可以加入并与频道内的每个人交谈。没有恼人的会议链接需要立即跳转到与某人通话。</p><p id="c28d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Discord Bot还可以加入语音通道，单独监听所有扬声器(但也可以发送音频数据)。我个人的一个开源项目<a class="ae jo" href="https://github.com/inevolin/DiscordEarsBot" rel="noopener ugc nofollow" target="_blank"> DiscordEarsBot </a>使用NLP和机器学习来转录和解释所说的内容。这个解决方案非常准确，支持32种语言。您可以使用该解决方案添加语音命令或根据对话内容生成建议:</p><pre class="jq jr js jt fd mb la mc md aw me bi"><span id="0b44" class="mf jv hi la b fi mg mh l mi mj">You: maybe we should meet again next week?</span><span id="ce3d" class="mf jv hi la b fi mk mh l mi mj">Bot: Would you like to schedule for next week this time?</span></pre><h1 id="e876" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">结论</h1><p id="66ba" class="pw-post-body-paragraph iq ir hi is b it ks iv iw ix kt iz ja jb ku jd je jf kv jh ji jj kw jl jm jn hb bi translated">另一个酷UX对<code class="du kx ky kz la b">!book [slot] ...</code>命令的改进是，如果它不能为你提供的<code class="du kx ky kz la b">[slot]</code>安排时间，返回几个可预订的位置。</p><p id="5be3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">不和谐机器人是神奇的工具，可以帮助我们自动化任务，并在日常工作中变得更有效率。如果您喜欢我们的内容，请确保在GitHub上给我们一颗星，并关注我们了解更多内容。访问<a class="ae jo" href="https://www.spurwing.io/" rel="noopener ugc nofollow" target="_blank">spur ing</a>，今天就安排一次免费演示。祝您愉快！</p></div></div>    
</body>
</html>