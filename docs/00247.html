<html>
<head>
<title>Display Build Status and Test Coverage Badges for a Laravel Project</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">显示Laravel项目的构建状态和测试覆盖徽章</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/display-build-status-and-test-coverage-badges-for-a-laravel-project-c93467b591ac?source=collection_archive---------0-----------------------#2020-12-08">https://medium.com/geekculture/display-build-status-and-test-coverage-badges-for-a-laravel-project-c93467b591ac?source=collection_archive---------0-----------------------#2020-12-08</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="9ce9" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">我希望我有一个向导</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es ix"><img src="../Images/03ba0b2c7206c2542d57c9de564f15d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S6G9zCikyZl7SkxFCcQqhw.png"/></div></figure><p id="75bf" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">为了寻找一个新的开发人员角色，我发现自己通过多次面试构建了各种项目。其中一个是Laravel项目，它包含了一个特殊的指令，在我的readme.md文件中显示<strong class="jh hj">构建状态和代码覆盖报告</strong>作为徽章。</p><p id="309c" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">我在网上搜索帮助，但没有找到任何给出解决这个问题的完整指南，大多数只提供了构建状态的解决方案，而忽略了代码覆盖方面。我必须解决这个问题，时间不多了。</p><p id="e552" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">以下是我想要达到的目标，我将展示我是如何实现的</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es kb"><img src="../Images/7d4e33bc8c2b705bced854cae45d7401.png" data-original-src="https://miro.medium.com/v2/resize:fit:402/format:webp/1*k34Iuru8UwMWSDpR8P8R-g.png"/></div></figure></div><div class="ab cl kc kd gp ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hb hc hd he hf"><h1 id="8dd0" class="kj kk hi bd kl km kn ko kp kq kr ks kt io ku ip kv ir kw is kx iu ky iv kz la bi translated">安排Travis CI和工作服的报告</h1><p id="012d" class="pw-post-body-paragraph jf jg hi jh b ji lb ij jk jl lc im jn jo ld jq jr js le ju jv jw lf jy jz ka hb bi translated">如果您还没有，那么您需要做的第一件事就是转到Travis，使用您的GitHub帐户登录。登录后，点击“添加新的存储库”按钮来激活您的回购。在工作服上重复此程序。</p><h1 id="b537" class="kj kk hi bd kl km lg ko kp kq lh ks kt io li ip kv ir lj is kx iu lk iv kz la bi translated">配置PHPUnit和工作服</h1><p id="7c60" class="pw-post-body-paragraph jf jg hi jh b ji lb ij jk jl lc im jn jo ld jq jr js le ju jv jw lf jy jz ka hb bi translated">幸运的是，Laravel附带了PHPUnit。本教程假设您已经编写了一些测试。如果没有，就像检查Laravel文档来编写测试一样简单。</p><p id="e45c" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">我们还将安装连体工作服，我们将使用它来存放覆盖报告，只需要求它:</p><pre class="iy iz ja jb fd ll lm ln lo aw lp bi"><span id="931c" class="lq kk hi lm b fi lr ls l lt lu">composer require php-coveralls/php-coveralls</span></pre><p id="b598" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">或者通过将以下行添加到composer.json文件的require块中。</p><pre class="iy iz ja jb fd ll lm ln lo aw lp bi"><span id="2253" class="lq kk hi lm b fi lr ls l lt lu">"php-coveralls/php-coveralls": "^1.1"</span></pre><p id="c98b" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">这将把它作为依赖项添加到我们的composer.json文件中。</p><h1 id="04c2" class="kj kk hi bd kl km lg ko kp kq lh ks kt io li ip kv ir lj is kx iu lk iv kz la bi translated">创建一个. travis.yml和. workalls . yml。</h1><p id="779e" class="pw-post-body-paragraph jf jg hi jh b ji lb ij jk jl lc im jn jo ld jq jr js le ju jv jw lf jy jz ka hb bi translated">现在，我们将在Laravel项目的根目录下创建一个Travis配置文件(. travis.yml ),以设置Travis CI。此外，我们将创建一个. coveralls.yml，用于设置clover.xml的路径</p><p id="9128" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">下面是我的. travis.yml的样子:我正在设置语言，php的版本，并告诉它运行哪个附加脚本。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lv lw l"/></div></figure><p id="3a30" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">我的. workalls . yml是这样的:我假设phpunit.xml将clover.xml保存在build/logs路径下。</p><pre class="iy iz ja jb fd ll lm ln lo aw lp bi"><span id="573a" class="lq kk hi lm b fi lr ls l lt lu">coverage_clover: build/logs/clover.xml<br/>json_path: build/logs/coveralls-upload.json<br/>service_name: travis-ci</span></pre><p id="9eae" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">为了避免疑问，我的phpunit.xml和. env.example文件如下所示:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lv lw l"/></div></figure><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lv lw l"/></div></figure></div><div class="ab cl kc kd gp ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hb hc hd he hf"><h1 id="3dc0" class="kj kk hi bd kl km kn ko kp kq kr ks kt io ku ip kv ir kw is kx iu ky iv kz la bi translated">部署代码并显示徽章</h1><p id="8a3c" class="pw-post-body-paragraph jf jg hi jh b ji lb ij jk jl lc im jn jo ld jq jr js le ju jv jw lf jy jz ka hb bi translated">下面是我在readme.md文件中使用的两个徽章的代码。特拉维斯和工作服将提供这些嵌入链接。</p><p id="3b27" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">Travis CI构建徽章</p><pre class="iy iz ja jb fd ll lm ln lo aw lp bi"><span id="3cc6" class="lq kk hi lm b fi lr ls l lt lu">[![Build Status](https://travis-ci.com/chyke007/credible.svg?branch=master)](https://travis-ci.com/chyke007/credible)</span></pre><p id="3bdc" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">工作服代码覆盖徽章</p><pre class="iy iz ja jb fd ll lm ln lo aw lp bi"><span id="e371" class="lq kk hi lm b fi lr ls l lt lu">[![Coverage Status](https://coveralls.io/repos/github/chyke007/credible/badge.svg?branch=master)](https://coveralls.io/github/chyke007/credible?branch=master)</span></pre><p id="ecef" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">现在，一旦我们使用这个设置将代码推送到GitHub，它应该会将构建发送给Travis，Travis应该会将覆盖范围发送给工作服。</p><p id="02c9" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">这就是全部，总的来说这是一次令人兴奋的冒险，希望这能成为某人的向导，一个我希望拥有的向导！</p></div></div>    
</body>
</html>