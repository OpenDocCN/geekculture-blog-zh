<html>
<head>
<title>How to Create a Multiple Files Uploader for Your PHP Application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何为你的PHP应用程序创建一个多文件上传器</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/how-to-create-a-multiple-files-uploader-for-your-php-application-75c288d43521?source=collection_archive---------22-----------------------#2022-08-18">https://medium.com/geekculture/how-to-create-a-multiple-files-uploader-for-your-php-application-75c288d43521?source=collection_archive---------22-----------------------#2022-08-18</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/82a1a2a2733282510c945b220c57db98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tAgO_0s1leDsONXdj_oH8g.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Photo by <a class="ae iu" href="https://unsplash.com/@wocintechchat?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Christina @ wocintechchat.com</a> on <a class="ae iu" href="https://unsplash.com/s/photos/php?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="6d6a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如今，大多数开发人员使用PHP专门为他们的web或移动应用程序创建文件上传程序。例如，PHP文件上传器是上传文件最有效的方法之一。</p><p id="16b9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">开发人员应该知道如何用PHP制作一个文件上传器来拥有更好的文件上传功能。</p><p id="ed0c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们有这方面的知识，因此，它让你远远领先于你的同事。所以在学习如何创建PHP文件上传器之前，我们需要了解一些基础知识。</p><h1 id="9c2d" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">什么是PHP</h1><p id="522b" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">PHP，也称为超文本预处理器，是一个开源框架。大多数开发人员使用PHP是因为它是易于访问的服务器脚本语言。</p><p id="1a24" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">PHP是一种编程语言，即使新手也可以学习，因为它有极好的支持和可用的文档。此外，WordPress用户可以使用PHP定制他们的网站。</p><h1 id="0aa3" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">PHP的用途是什么</h1><p id="73e5" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">同样，PHP和其他任何框架一样，对开发者来说都是必不可少的。比如PHP，灵活、直白，让初学者轻松使用。PHP的其他用途包括:</p><ul class=""><li id="997a" class="kw kx hi ix b iy iz jc jd jg ky jk kz jo la js lb lc ld le bi translated">它可以执行系统功能</li><li id="6797" class="kw kx hi ix b iy lf jc lg jg lh jk li jo lj js lb lc ld le bi translated">创建、打开、写入、读取和打开文件</li><li id="e7d9" class="kw kx hi ix b iy lf jc lg jg lh jk li jo lj js lb lc ld le bi translated">它可以控制表单</li><li id="6599" class="kw kx hi ix b iy lf jc lg jg lh jk li jo lj js lb lc ld le bi translated">从文件中收集和保存数据</li><li id="a55e" class="kw kx hi ix b iy lf jc lg jg lh jk li jo lj js lb lc ld le bi translated">PHP可以帮助添加、删除和更改数据库中的元素</li><li id="bf2a" class="kw kx hi ix b iy lf jc lg jg lh jk li jo lj js lb lc ld le bi translated">PHP允许你明确限制用户进入你网站的某些页面</li><li id="0f61" class="kw kx hi ix b iy lf jc lg jg lh jk li jo lj js lb lc ld le bi translated">最后，由于它的安全性，它可以加密存储的数据</li><li id="a6be" class="kw kx hi ix b iy lf jc lg jg lh jk li jo lj js lb lc ld le bi translated">既然我们知道了PHP的用途，我们现在可以继续如何创建一个文件上传PHP。</li></ul><h1 id="18e2" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">如何用PHP制作文件上传器</h1><p id="1f58" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">开发者可以使用Filestack用PHP创建一个更好的文件上传器。首先，我们将考虑三个步骤。</p><h1 id="c18d" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">创建HTML表单</h1><p id="1b04" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">首先，如果用户想要上传文件，您需要创建一个HTML表单供用户查看。类似地，为项目创建一个文件夹，并创建一个包含代码的index.html，例如:</p><pre class="lk ll lm ln fd lo lp lq lr aw ls bi"><span id="de08" class="lt ju hi lp b fi lu lv l lw lx">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>&lt;head&gt;<br/> &lt;meta charset="UTF-8"&gt;<br/> &lt;title&gt;PHP File Upload&lt;/title&gt;<br/>&lt;/head&gt;<br/>&lt;body&gt;<br/> &lt;form action="fileUploadScript.php" method="post" enctype="multipart/form-data"&gt;<br/>     Upload a File:<br/>     &lt;input type="file" name="the_file" id="fileToUpload"&gt;<br/>     &lt;input type="submit" name="submit" value="Start Upload"&gt;<br/> &lt;/form&gt;<br/>&lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="cc21" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">代码的结果确实会创建HTML表单。在进入下一步之前，我们需要特别注意一些关于代码函数的事情，它们是:</p><pre class="lk ll lm ln fd lo lp lq lr aw ls bi"><span id="4b2b" class="lt ju hi lp b fi lu lv l lw lx">action=“fileUploadScript.php”</span></pre><p id="fb86" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这个代码标签确认负责处理后端文件上传的PHP脚本。</p><pre class="lk ll lm ln fd lo lp lq lr aw ls bi"><span id="858d" class="lt ju hi lp b fi lu lv l lw lx">method=“post”</span></pre><p id="d52c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这个函数让浏览器知道在向服务器发送文件时使用哪种格式。</p><pre class="lk ll lm ln fd lo lp lq lr aw ls bi"><span id="e539" class="lt ju hi lp b fi lu lv l lw lx">enctype=“multipart/form-data”</span></pre><p id="9345" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">最后，这个函数决定表单可以提交的内容类型。</p><p id="a478" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">了解了这些代码功能后，我们可以进一步进行文件上传器的下一步。确保打开终端并从目录中启动服务器。例如，编写以下代码:</p><pre class="lk ll lm ln fd lo lp lq lr aw ls bi"><span id="c48d" class="lt ju hi lp b fi lu lv l lw lx">PHP-file-upload</span></pre><p id="29f4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">此外，转到web浏览器并打开localhost: 1234。如果它显示了上面的代码，那么您已经成功地启动了服务器。</p><h1 id="86f7" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">让表单看起来更好</h1><p id="c4e0" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">其次，设计表单样式，使其更适合用户交互。不幸的是，大多数开发人员经常忽视这条道路，因为他们觉得不值得这么做。</p><p id="897b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">用PHP和CSS为你的文件上传器做这样的设计会让你的用户界面对用户更有吸引力。例如，您可以编写以下代码:</p><pre class="lk ll lm ln fd lo lp lq lr aw ls bi"><span id="5283" class="lt ju hi lp b fi lu lv l lw lx">div.upload-wrapper {<br/>  color: white;<br/>  font-weight: bold;<br/>  display: flex;<br/>}</span><span id="b352" class="lt ju hi lp b fi ly lv l lw lx">input[type="file"] {<br/>  position: absolute;<br/>  left: -9999px;<br/>}</span><span id="2b5e" class="lt ju hi lp b fi ly lv l lw lx">input[type="submit"] {<br/>  border: 3px solid #555;<br/>  color: white;<br/>  background: #666;<br/>  margin: 10px 0;<br/>  border-radius: 5px;<br/>  font-weight: bold;<br/>  padding: 5px 20px;<br/>  cursor: pointer;<br/>}</span><span id="2d3a" class="lt ju hi lp b fi ly lv l lw lx">input[type="submit"]:hover {<br/>  background: #555;<br/>}</span><span id="6e97" class="lt ju hi lp b fi ly lv l lw lx">label[for="file-upload"] {<br/>  padding: 0.7rem;<br/>  display: inline-block;<br/>  background: #fa5200;<br/>  cursor: pointer;<br/>  border: 3px solid #ca3103;<br/>  border-radius: 0 5px 5px 0;<br/>  border-left: 0;<br/>}</span><span id="2805" class="lt ju hi lp b fi ly lv l lw lx">label[for="file-upload"]:hover {<br/>  background: #ca3103;<br/>}</span><span id="bc18" class="lt ju hi lp b fi ly lv l lw lx">span.file-name {<br/>  padding: 0.7rem 3rem 0.7rem 0.7rem;<br/>  white-space: nowrap;<br/>  overflow: hidden;<br/>  background: #ffb543;<br/>  color: black;<br/>  border: 3px solid #f0980f;<br/>  border-radius: 5px 0 0 5px;<br/>  border-right: 0;<br/>}</span></pre><p id="22a5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这些代码的结果一定会让您的表单看起来更好。</p><h1 id="8b3f" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">文件上传程序PHP</h1><p id="a969" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">这一步是让你处理文件上传后端。首先，创建一个名为uploads的目录，以便保存文件。</p><p id="5c5c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">其次，在目录index.html中创建另一个名为fileUploadScript.php的文件。完成后，编写以下代码；例如:</p><pre class="lk ll lm ln fd lo lp lq lr aw ls bi"><span id="5594" class="lt ju hi lp b fi lu lv l lw lx">&lt;?php<br/> $currentDirectory = getcwd();<br/> $uploadDirectory = "/uploads/";<br/> $errors = []; // Store errors here<br/> $fileExtensionsAllowed = ['jpeg','jpg','png']; // These will be the only file extensions allowed<br/> $fileName = $_FILES['the_file']['name'];<br/> $fileSize = $_FILES['the_file']['size'];<br/> $fileTmpName  = $_FILES['the_file']['tmp_name'];<br/> $fileType = $_FILES['the_file']['type'];<br/> $fileExtension = strtolower(end(explode('.',$fileName)));<br/> $uploadPath = $currentDirectory . $uploadDirectory . basename($fileName);<br/> <br/>if (isset($_POST['submit'])) {<br/>  if (! in_array($fileExtension,$fileExtensionsAllowed)) {<br/>     $errors[] = "This file extension is not allowed. Please upload a JPEG or PNG file";<br/>   }<br/>  if ($fileSize &gt; 4000000) {<br/>     $errors[] = "File exceeds maximum size (4MB)";<br/>   }<br/>  if (empty($errors)) {<br/>     $didUpload = move_uploaded_file($fileTmpName, $uploadPath);<br/>    if ($didUpload) {<br/>       echo "The file " . basename($fileName) . " has been uploaded";<br/>     } else {<br/>       echo "An error occurred. Please contact the administrator.";<br/>     }<br/>   } else {<br/>     foreach ($errors as $error) {<br/>       echo $error . "These are the errors" . "\n";<br/>     }<br/>   }<br/> }<br/>?&gt;</span></pre><p id="0ed1" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">因此，在开始上传文件之前，编写以下代码以确保上传目录是可写的:</p><pre class="lk ll lm ln fd lo lp lq lr aw ls bi"><span id="08ba" class="lt ju hi lp b fi lu lv l lw lx">chmod 0755 uploads/</span></pre><p id="8bfa" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然后，通过运行以下命令，彻底检查您的php.ini以查看该文件是否适合处理文件:</p><pre class="lk ll lm ln fd lo lp lq lr aw ls bi"><span id="775e" class="lt ju hi lp b fi lu lv l lw lx">PHP -ini</span></pre><p id="b96c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">最后，启动PHP服务器并将其打开到localhost:1234以上传文件。一旦上传文件夹显示了保存的文件，您就成功地创建了一个文件上传器PHP。</p><h1 id="2f38" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">如何用PHP制作一个多文件上传器</h1><p id="3a02" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">你应该知道你可以用一个元素用PHP创建多个文件上传器。</p><p id="2be6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">开发人员可以专门设计您的单个<a class="ae iu" href="https://blog.filestack.com/content-cookbook/upload-files-to-your-site-by-url-in-php/" rel="noopener ugc nofollow" target="_blank">文件上传器PHP </a>代码，并允许文件元素选择多次。您可以采取以下步骤来创建多个文件上传程序。</p><h1 id="34f4" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">确保您创建了一个HTML表单</h1><p id="7529" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">首先，允许在<form>上传多个文件，并编写如下代码，例如:</form></p><pre class="lk ll lm ln fd lo lp lq lr aw ls bi"><span id="6850" class="lt ju hi lp b fi lu lv l lw lx">&lt;form method='post' action='' enctype='multipart/form-data'&gt;<br/> &lt;input type="file" name="file[]" id="file" multiple&gt;<br/> &lt;input type='submit' name='submit' value='Upload'&gt;<br/>&lt;/form&gt;</span></pre><p id="ee0d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">由于这些代码，您可以成功地创建HTML表单。</p><h1 id="70a5" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">选择文件的依据</h1><p id="3ebd" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">接下来，计算所有挑选的文件，并在整个文件上扭曲它们，以索引为基础选择文件。例如，编写以下代码来实现这一点:</p><pre class="lk ll lm ln fd lo lp lq lr aw ls bi"><span id="9bf5" class="lt ju hi lp b fi lu lv l lw lx">&lt;?php <br/>if(isset($_POST['submit'])){<br/> // Count total files<br/> $countfiles = count($_FILES['file']['name']);<br/> // Looping all files<br/> for($i=0;$i&lt;$countfiles;$i++){<br/>   $filename = $_FILES['file']['name'][$i];<br/> // Upload file<br/>move_uploaded_file($_FILES['file']['tmp_name'][$i],'upload/'.$filename);<br/> }<br/>} <br/>?&gt;</span></pre><p id="bb4d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">因此，代码的结果将显示您已经成功地为您的PHP创建了一个多文件上传程序。</p></div><div class="ab cl lz ma gp mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="hb hc hd he hf"><p id="8d6f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这里还刊登了<a class="ae iu" href="https://blog.filestack.com/thoughts-and-knowledge/make-file-uploader-php/" rel="noopener ugc nofollow" target="_blank">的</a>。</p></div></div>    
</body>
</html>