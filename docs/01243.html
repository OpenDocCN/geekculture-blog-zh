<html>
<head>
<title>React Native Generate APK — Debug and Release APK</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React本机生成APK —调试并发布APK</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/react-native-generate-apk-debug-and-release-apk-4e9981a2ea51?source=collection_archive---------0-----------------------#2021-04-03">https://medium.com/geekculture/react-native-generate-apk-debug-and-release-apk-4e9981a2ea51?source=collection_archive---------0-----------------------#2021-04-03</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/81e8b2c1506d44565664603c79833688.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GBg6Nv-NUhEU-I7YarxxcA.png"/></div></div></figure><blockquote class="iq ir is"><p id="5ca1" class="it iu iv iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">什么是安。apk文件？</strong></p></blockquote><p id="1729" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hb bi translated">Android软件包(APK)是Android操作系统用于分发和安装移动应用程序的软件包文件格式。它类似于。. apk文件适用于android系统。</p><h1 id="a144" class="jv jw hi bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">调试APK</h1><h2 id="1fae" class="kt jw hi bd jx ku kv kw kb kx ky kz kf js la lb kj jt lc ld kn ju le lf kr lg bi translated">我能用它做什么？</h2><p id="2e38" class="pw-post-body-paragraph it iu hi iw b ix lh iz ja jb li jd je js lj jh ji jt lk jl jm ju ll jp jq jr hb bi translated">调试。apk文件将允许您在发布到应用商店之前安装和测试您的应用。请注意，这还没有准备好发布，在发布之前您还需要做很多事情。尽管如此，它对于最初的发行和测试还是很有用的。</p><p id="9553" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hb bi translated">您需要在手机上启用调试选项来运行此apk。</p><h2 id="a170" class="kt jw hi bd jx ku kv kw kb kx ky kz kf js la lb kj jt lc ld kn ju le lf kr lg bi translated">先决条件:</h2><ul class=""><li id="ce83" class="lm ln hi iw b ix lh jb li js lo jt lp ju lq jr lr ls lt lu bi translated">react-原生版本&gt; 0.58</li></ul><h2 id="02bf" class="kt jw hi bd jx ku kv kw kb kx ky kz kf js la lb kj jt lc ld kn ju le lf kr lg bi translated">如何3步生成一个？</h2><p id="af4d" class="pw-post-body-paragraph it iu hi iw b ix lh iz ja jb li jd je js lj jh ji jt lk jl jm ju ll jp jq jr hb bi translated"><em class="iv">步骤1: </em>在终端中转到项目的根目录，运行下面的命令:</p><p id="6cc3" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hb bi translated"><code class="du lv lw lx ly b">react-native bundle --platform android --dev false --entry-file index.js --bundle-output android/app/src/main/assets/index.android.bundle --assets-dest android/app/src/main/res</code></p><p id="9ae4" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hb bi translated"><em class="iv">步骤2: </em>转到android目录:</p><p id="d862" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hb bi translated"><code class="du lv lw lx ly b">cd android</code></p><p id="3861" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hb bi translated"><em class="iv">步骤3: </em>现在在这个<code class="du lv lw lx ly b">android</code>文件夹中，运行这个命令</p><p id="5772" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hb bi translated"><code class="du lv lw lx ly b">./gradlew assembleDebug</code></p><p id="a7a5" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hb bi translated">那里！你会在下面的路径中找到apk文件:<br/> <code class="du lv lw lx ly b">yourProject/android/app/build/outputs/apk/debug/app-debug.apk</code></p></div><div class="ab cl lz ma gp mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="hb hc hd he hf"><h1 id="c285" class="jv jw hi bd jx jy mg ka kb kc mh ke kf kg mi ki kj kk mj km kn ko mk kq kr ks bi translated">释放APK</h1><blockquote class="iq ir is"><p id="fd93" class="it iu iv iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">第一步。生成密钥库</strong></p></blockquote><p id="a413" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hb bi translated">您将需要一个Java生成的签名密钥，这是一个用于为Android生成React本机可执行二进制文件的密钥库文件。您可以使用终端中的<em class="iv"> keytool </em>命令创建一个</p><p id="e1be" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hb bi translated"><code class="du lv lw lx ly b">keytool -genkey -v -keystore your_key_name.keystore -alias your_key_alias -keyalg RSA -keysize 2048 -validity 10000</code></p><p id="c138" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hb bi translated">运行keytool工具后，系统会提示您输入密码。* <em class="iv">确保你记住了密码</em></p><p id="94db" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hb bi translated">你可以把<strong class="iw hj"><em class="iv">your _ key _ name</em></strong>改成你想要的任何名字，还有<strong class="iw hj"><em class="iv">your _ key _ alias</em></strong>。出于安全原因，此密钥使用密钥大小2048，而不是默认的1024。</p><blockquote class="iq ir is"><p id="12f2" class="it iu iv iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">步骤二。将密钥库添加到您的项目</strong></p></blockquote><p id="d133" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hb bi translated">首先，您需要复制文件<em class="iv"> your_key_name.keystore </em>，并将其粘贴到React原生项目文件夹中的<strong class="iw hj"> <em class="iv"> android/app </em> </strong>目录下。</p><p id="422c" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hb bi translated">在终端上:</p><p id="7569" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hb bi translated"><code class="du lv lw lx ly b">mv my-release-key.keystore /android/app</code></p><p id="b8bd" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hb bi translated">您需要打开您的<em class="iv">Android \ app \ build . gradle</em>文件并添加密钥库配置。使用keystore配置项目有两种方式。一、常见的无担保方式:</p><figure class="ml mm mn mo fd ij"><div class="bz dy l di"><div class="mp mq l"/></div><figcaption class="mr ms et er es mt mu bd b be z dx">build.gradle - keystore Configuration</figcaption></figure><p id="cb65" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hb bi translated">这不是一个好的安全做法，因为您以纯文本的形式存储密码。而不是将您的密钥库密码存储在。gradle文件，如果您是从命令行构建的话，您可以规定构建过程来提示您输入这些密码。</p><p id="3b94" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hb bi translated">要使用Gradle构建文件提示输入密码，请将上面的配置更改为:</p><figure class="ml mm mn mo fd ij"><div class="bz dy l di"><div class="mp mq l"/></div></figure><figure class="ml mm mn mo fd ij"><div class="bz dy l di"><div class="mp mq l"/></div><figcaption class="mr ms et er es mt mu bd b be z dx">Release Bundle Configuration Command</figcaption></figure><blockquote class="iq ir is"><p id="ffbb" class="it iu iv iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">第三步。释放APK一代</strong></p></blockquote><p id="b6da" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hb bi translated">使用<br/> <code class="du lv lw lx ly b">cd android</code>将您的终端目录放置到<em class="iv"> android </em></p><p id="a848" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hb bi translated">对于Windows，<br/> <code class="du lv lw lx ly b">gradlew assembleRelease</code></p><p id="7f30" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hb bi translated">对于Linux和Mac OSX: <br/> <code class="du lv lw lx ly b">./gradlew assembleRelease</code></p><p id="7671" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hb bi translated">结果，<strong class="iw hj">APK创建过程完成</strong>。你可以在<em class="iv">Android/app/build/outputs/apk/app-release . apk</em>找到生成的APK。这是真正的应用程序，你可以把它发送到你的手机上或者上传到谷歌Play商店。恭喜你，你刚刚生成了一个Android的React本地发布版本APK。</p></div></div>    
</body>
</html>