<html>
<head>
<title>Search using MapKit in SwiftUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在SwiftUI中使用MapKit进行搜索</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/search-using-mapkit-in-swiftui-636426836ab?source=collection_archive---------3-----------------------#2022-07-25">https://medium.com/geekculture/search-using-mapkit-in-swiftui-636426836ab?source=collection_archive---------3-----------------------#2022-07-25</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/></div><div class="ab cl if ig gp ih" role="separator"><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik"/></div><div class="hb hc hd he hf"><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es im"><img src="../Images/f157338c74fe601fe942ed7a2775eb13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*BJ94rTkq_EKlUNKC"/></div></div><figcaption class="iy iz et er es ja jb bd b be z dx">Photo by <a class="ae jc" href="https://unsplash.com/@dead____artist?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Z</a> on <a class="ae jc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="e3b8" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">搜索地点是我们在应用程序中可能需要的一个有趣特性。让我们用SwiftUI开发这个特性。</p><p id="8146" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">首先，让我们用一个确认可观察对象的类创建一个视图模型。这个类有一个发布搜索结果的searchResults变量。LocationManager向“MKLocalSearchCompleterDelegate”确认，后者通过“completerDidUpdateResults”提供搜索结果。</p><figure class="in io ip iq fd ir"><div class="bz dy l di"><div class="kb kc l"/></div></figure><p id="89c1" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">getDistance方法用于计算当前位置和搜索结果之间的距离。</p><p id="180c" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">我们可以进一步选择结果类型，并选择是否包括兴趣点。</p><pre class="in io ip iq fd kd ke kf kg aw kh bi"><span id="1f2d" class="ki kj hi ke b fi kk kl l km kn">self.searchCompleter.resultTypes = [.address]</span><span id="4954" class="ki kj hi ke b fi ko kl l km kn">self.searchCompleter.pointOfInterestFilter = .includingAll</span><span id="eead" class="ki kj hi ke b fi ko kl l km kn">self.publisher = $search.receive(on: RunLoop.main).sink(receiveValue: { [weak self] (str) in</span><span id="8d18" class="ki kj hi ke b fi ko kl l km kn">self?.searchCompleter.queryFragment = str</span><span id="53ba" class="ki kj hi ke b fi ko kl l km kn">})</span></pre><p id="871a" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">现在，让我们创建一个显示上述结果的简单列表，并计算结果与当前位置的距离。</p><figure class="in io ip iq fd ir"><div class="bz dy l di"><div class="kb kc l"/></div></figure><p id="f865" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">上面视图中的reverseUpdate()需要一个专用的<a class="ae jc" rel="noopener" href="/@maheshsai252/working-with-details-of-location-in-swiftui-faf7b139270b"> post </a>，在其中我们将从坐标中获取位置的细节，反之亦然。</p><p id="e177" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">感谢阅读:)</p></div></div>    
</body>
</html>