<html>
<head>
<title>Creating a Physics Based Character Controller in Unity</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Unity中创建基于物理的角色控制器</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/creating-a-physics-based-character-controller-in-unity-8bb061ef6031?source=collection_archive---------21-----------------------#2021-12-02">https://medium.com/geekculture/creating-a-physics-based-character-controller-in-unity-8bb061ef6031?source=collection_archive---------21-----------------------#2021-12-02</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ih ii ij ik er es paragraph-image"><div role="button" tabindex="0" class="il im di in bf io"><div class="er es ig"><img src="../Images/bfdd9b65a7cd9ff7a0969fe37459e0da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LzPmmdPjutZY-65oIoniMw.png"/></div></div><figcaption class="ir is et er es it iu bd b be z dx">Unity</figcaption></figure><p id="15c3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这里的练习演示了在Unity中实现一个定制的物理控制器。</p><p id="9242" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">要移动3D对象，所需的数据如下。</p><ul class=""><li id="c02c" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated">方向</li><li id="01aa" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">速度</li><li id="494f" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">重力</li></ul><p id="f454" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">方向输入应给出左或右移动信号。速度输入应以一定的速度加速运动。重力输入应模拟真实世界的物理。</p><p id="9377" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">因此，在player对象上创建一个C#脚本组件，并添加以下代码。</p><p id="01b4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">首先，角色控制器对象需要一个合适的句柄，因此使用Start方法来获得这个句柄。</p><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="0d70" class="kq kr hi km b fi ks kt l ku kv">private CharacterController _characterController;</span><span id="4b96" class="kq kr hi km b fi kw kt l ku kv">void Start()<br/>   {<br/>       _characterController = GetComponent&lt;CharacterController&gt;();<br/>   }</span></pre><ol class=""><li id="c079" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js kx jz ka kb bi translated">方向</li></ol><ul class=""><li id="5a4a" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated">在Update方法中，创建一个私有变量来保存水平轴值。</li></ul><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="394c" class="kq kr hi km b fi ks kt l ku kv">float _horizontalInput = Input.GetAxis("Horizontal");</span></pre><ul class=""><li id="8e8b" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated">创建一个名为direction的vector3变量，以使用从用户接收的输入。</li></ul><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="1572" class="kq kr hi km b fi ks kt l ku kv">Vector3 _direction = new Vector3(_horizontalInput, 0, 0);</span></pre><p id="a066" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">2.速度</p><ul class=""><li id="7b67" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated">创建一个私有速度变量，其值根据选择而定。</li></ul><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="812a" class="kq kr hi km b fi ks kt l ku kv">private int _speed = 5;</span></pre><ul class=""><li id="2b6b" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated">在Update方法中，创建一个vector3变量来计算速度。</li></ul><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="407d" class="kq kr hi km b fi ks kt l ku kv">Vector3 _velocity = _direction * _speed;</span></pre><p id="09e5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">3.重力</p><ul class=""><li id="9f51" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated">创建一个私有重力变量，其值由用户选择。</li></ul><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="7f67" class="kq kr hi km b fi ks kt l ku kv">private int _gravity = 1;</span></pre><ul class=""><li id="933c" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated">在Update方法中，检查bool值以查看播放器是在地面上还是在空中。</li><li id="40fe" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">如果被禁足，还会有下一次行动。如果在空气中，速度矢量的Y值应减小。</li></ul><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="1ce7" class="kq kr hi km b fi ks kt l ku kv">if (_characterController.isGrounded == true)<br/>       {<br/>           <br/>       }<br/>       else<br/>       {<br/>           _velocity.y -= _gravity;<br/>       }</span></pre><p id="4e82" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">最后，使用所有的结果让玩家使用角色控制器移动。</p><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="1711" class="kq kr hi km b fi ks kt l ku kv">_characterController.Move(_velocity * Time.deltaTime);</span></pre><p id="da96" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">应该就是这样了:)</p><p id="0eb9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这是最终的结果。</p><div class="ky kz ez fb la lb"><a href="https://drive.google.com/file/d/17vBVRAdVUMVaXZttKT6ef-F_YcV0syHe/view?usp=sharing" rel="noopener  ugc nofollow" target="_blank"><div class="lc ab dw"><div class="ld ab le cl cj lf"><h2 class="bd hj fi z dy lg ea eb lh ed ef hh bi translated">PlayerMovementPhysicsController.mp4</h2><div class="li l"><h3 class="bd b fi z dy lg ea eb lh ed ef dx translated">编辑描述</h3></div><div class="lj l"><p class="bd b fp z dy lg ea eb lh ed ef dx translated">drive.google.com</p></div></div><div class="lk l"><div class="ll l lm ln lo lk lp ip lb"/></div></div></a></div></div></div>    
</body>
</html>