<html>
<head>
<title>Difference Between ‘async’ and ‘defer’ Attributes in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript中“async”和“defer”属性的区别</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/difference-between-async-and-defer-attributes-in-javascript-fc76babc13f0?source=collection_archive---------1-----------------------#2020-10-21">https://medium.com/geekculture/difference-between-async-and-defer-attributes-in-javascript-fc76babc13f0?source=collection_archive---------1-----------------------#2020-10-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="0390" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi jd translated">在这里，我们将看到JavaScript中“async”和“defer”属性之间的区别，并了解如何以及何时使用它们。</p><figure class="jn jo jp jq fd jr er es paragraph-image"><div class="er es jm"><img src="../Images/55f4397d6e80215e38550b9bb8bf133f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1336/format:webp/1*x1NgRuyKBjZDm1_DWCGv8g.jpeg"/></div></figure><p id="253d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">“async”和“defer”是布尔属性，我们使用它们和脚本标签一起将外部javascript库有效地加载到我们的网页中。</p><h2 id="bfbb" class="ju jv hi bd jw jx jy jz ka kb kc kd ke iq kf kg kh iu ki kj kk iy kl km kn ko bi translated">没有这些属性，事物是如何工作的？</h2><p id="abf2" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq kr is it iu ks iw ix iy kt ja jb jc hb bi translated">我假设你知道当用户请求一个网页时这些东西是如何工作的。如果你不知道事情是如何运作的，或者你想再次快速修改这个概念，请看看<a class="ae ku" href="https://varvy.com/pagespeed/display.html" rel="noopener ugc nofollow" target="_blank">这篇</a>解释得很好的文章。</p><p id="757c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">加载网页时，web浏览器会查看整个HTML文档，并查找该页面引用的任何CSS、JavaScript和图像。这就是我们所说的<strong class="ih hj"> HTML解析</strong>。如果在HTML中找到了资源，web浏览器就会向服务器请求这些资源文件。一旦web浏览器获得了所需的资源，它就可以开始构建页面了。</p><p id="cc46" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在最重要的事情之一是脚本是如何加载的。通常JavaScript被认为是一种解析器阻塞语言。为什么？让我们理解这一点。</p><figure class="jn jo jp jq fd jr er es paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="er es kv"><img src="../Images/d4ee20f74d7296e45b186cb495a5c33b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-n1k1w5Un1oeJuqPeOGIlQ.png"/></div></div></figure><p id="1b0d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">web浏览器开始解析HTML，并在到达<strong class="ih hj">脚本</strong>标签时暂停(这里我严格地说的是<strong class="ih hj">外部JS文件和</strong>而不是内联脚本)。此时，HTML解析被阻止，浏览器请求获取/下载相应的脚本文件。一旦获取了脚本，它就被执行，然后HTML解析再次继续。</p><figure class="jn jo jp jq fd jr er es paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="er es la"><img src="../Images/165798e0db86bda3c0fde113e23ee8a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wLbyFIE-sqSjdPVUtawiZQ.png"/></div></div></figure><p id="532e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是这并不好，因为JavaScript文件阻碍了HTML的呈现。因此，我们可以在这里引入两个属性“async”和“defer”。</p><h2 id="f315" class="ju jv hi bd jw jx jy jz ka kb kc kd ke iq kf kg kh iu ki kj kk iy kl km kn ko bi translated">如何使用“异步”属性？</h2><figure class="jn jo jp jq fd jr er es paragraph-image"><div class="er es lb"><img src="../Images/d0993ba4d8daa1bf4cb2b143db335633.png" data-original-src="https://miro.medium.com/v2/resize:fit:1142/format:webp/1*TPhR4IqC37R_8Rm7LTxPdg.png"/></div></figure><p id="3352" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用<strong class="ih hj"> async </strong>(异步)属性，HTML解析会继续，直到浏览器通过网络获取脚本文件，因此解析和脚本获取会并行发生(如下图所示)。一旦浏览器中的脚本可用，HTML解析就会暂停并执行脚本。一旦执行完成，HTML解析就会继续。</p><figure class="jn jo jp jq fd jr er es paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="er es la"><img src="../Images/8457861511bb5d87df6072f8d99224af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*un-VfgIX_1790bX5fPwvFQ.png"/></div></div></figure><p id="dbbd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以这是一种异步下载脚本的方式。现在让我们看看“延迟”属性。</p><h2 id="d240" class="ju jv hi bd jw jx jy jz ka kb kc kd ke iq kf kg kh iu ki kj kk iy kl km kn ko bi translated">如何使用“延期”属性？</h2><figure class="jn jo jp jq fd jr er es paragraph-image"><div class="er es lc"><img src="../Images/d86421082b5dcebfd901a44a6ea2cb50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1118/format:webp/1*J9zqVhg3WygwmxbDtK3IXQ.png"/></div></figure><p id="ce2d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">“defer”这个词在英语中是“抑制”的意思。因此，通过脚本标签中提到的<strong class="ih hj"> defer </strong>属性，脚本文件被并行下载，同时HTML解析继续进行。但是执行被推迟，直到HTML解析完成。简而言之，下载的脚本只有在浏览器完成HTML解析后才会执行。</p><figure class="jn jo jp jq fd jr er es paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="er es ld"><img src="../Images/88728150ccb75b0f78787982de429f8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rnzTG_cMwvFPPATBdXyNOA.png"/></div></div></figure><p id="9523" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">既然你已经学会了如何使用<strong class="ih hj">异步</strong>和<strong class="ih hj">延迟</strong>属性，重要的问题是什么时候使用它们？</p><h2 id="07a8" class="ju jv hi bd jw jx jy jz ka kb kc kd ke iq kf kg kh iu ki kj kk iy kl km kn ko bi translated">何时使用“异步”,何时使用“延迟”?</h2><p id="3e87" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq kr is it iu ks iw ix iy kt ja jb jc hb bi translated">当你的页面不依赖于脚本文件时，你可以使用<strong class="ih hj">异步</strong>属性(例如分析)。为什么？因为<strong class="ih hj"> async </strong>不能保证你的脚本文件下载的顺序。因此，如果你的脚本文件之间有任何依赖，它可能会破坏你的代码。在这种情况下，你可以使用<strong class="ih hj">延迟</strong>属性。</p></div><div class="ab cl le lf gp lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="hb hc hd he hf"><h2 id="44fe" class="ju jv hi bd jw jx jy jz ka kb kc kd ke iq kf kg kh iu ki kj kk iy kl km kn ko bi translated">最后的想法</h2><p id="d49b" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq kr is it iu ks iw ix iy kt ja jb jc hb bi translated">现在我们已经有了<strong class="ih hj"> async </strong>和<strong class="ih hj"> defer </strong>属性，我们可以把我们的脚本引用放在<strong class="ih hj"> head </strong>标签中，这样可以让你的脚本尽快下载，而不会阻塞你的浏览器。如果你不使用这些关键字，确保在关闭你的<strong class="ih hj"> body </strong>标签之前把它放在底部。这将确保HTML解析器不会被脚本阻塞。</p></div><div class="ab cl le lf gp lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="hb hc hd he hf"><p id="a63c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="ll">参考文献:</em> </strong></p><ul class=""><li id="19eb" class="lm ln hi ih b ii ij im in iq lo iu lp iy lq jc lr ls lt lu bi translated">Joseph Zacek的文章<a class="ae ku" href="https://www.josefzacek.cz/blog/whats-the-difference-between-async-vs-defer-attributes/" rel="noopener ugc nofollow" target="_blank">https://www . Josef Zacek . cz/blog/whats-the-difference-async-vs-defer-attributes/</a></li><li id="2952" class="lm ln hi ih b ii lv im lw iq lx iu ly iy lz jc lr ls lt lu bi translated">https://www.youtube.com/watch?v=IrHmpdORLu8阿克谢·塞尼<a class="ae ku" href="https://www.youtube.com/watch?v=IrHmpdORLu8" rel="noopener ugc nofollow" target="_blank">视频教程</a></li><li id="9bae" class="lm ln hi ih b ii lv im lw iq lx iu ly iy lz jc lr ls lt lu bi translated">张贴在位代码<a class="ae ku" href="https://bitsofco.de/async-vs-defer/" rel="noopener ugc nofollow" target="_blank">https://bitsofco.de/async-vs-defer/</a></li></ul></div></div>    
</body>
</html>