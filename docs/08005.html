<html>
<head>
<title>Create Your First dAPP On ethereum</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在以太坊上创建你的第一个dAPP</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/create-your-first-dapp-on-ethereum-6eb50b4083f2?source=collection_archive---------6-----------------------#2021-10-10">https://medium.com/geekculture/create-your-first-dapp-on-ethereum-6eb50b4083f2?source=collection_archive---------6-----------------------#2021-10-10</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/07319271e5e172a03fb86083b57218a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zE6v6rEEFZ2Wn_VULIqRLA.jpeg"/></div></div></figure></div><div class="ab cl iq ir gp is" role="separator"><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv"/></div><div class="hb hc hd he hf"><h1 id="149c" class="ix iy hi bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju bi translated">介绍</h1><p id="cd62" class="pw-post-body-paragraph jv jw hi jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">在本文中，我们将在以太坊区块链上构建一个简单的凝乳分布式应用程序。还将为相同的应用程序创建一个凝乳智能契约。这是一篇实用的动手文章。</p><h1 id="d995" class="ix iy hi bd iz ja kt jc jd je ku jg jh ji kv jk jl jm kw jo jp jq kx js jt ju bi translated">观众</h1><p id="f576" class="pw-post-body-paragraph jv jw hi jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">区块链初学者，软件开发者，以太坊用户/管理员。</p><h1 id="08ed" class="ix iy hi bd iz ja kt jc jd je ku jg jh ji kv jk jl jm kw jo jp jq kx js jt ju bi translated">先决条件</h1><ol class=""><li id="f640" class="ky kz hi jx b jy jz kc kd kg la kk lb ko lc ks ld le lf lg bi translated">对<strong class="jx hj">坚实度</strong>或一般编程有基本了解。</li><li id="6a45" class="ky kz hi jx b jy lh kc li kg lj kk lk ko ll ks ld le lf lg bi translated">chrome或firefox上的Metamask扩展。(与<strong class="jx hj">网站3 </strong>连接)</li><li id="e8e2" class="ky kz hi jx b jy lh kc li kg lj kk lk ko ll ks ld le lf lg bi translated">对<strong class="jx hj"> Web3 </strong>的基本了解。</li><li id="3c00" class="ky kz hi jx b jy lh kc li kg lj kk lk ko ll ks ld le lf lg bi translated">钱包在metamask上，带有一些<strong class="jx hj">乙醚(硬币)</strong>用于ropsten网络。</li><li id="a85b" class="ky kz hi jx b jy lh kc li kg lj kk lk ko ll ks ld le lf lg bi translated">Nodejs或javascript理解。</li></ol><h1 id="5e78" class="ix iy hi bd iz ja kt jc jd je ku jg jh ji kv jk jl jm kw jo jp jq kx js jt ju bi translated">设置步骤</h1><ul class=""><li id="a67b" class="ky kz hi jx b jy jz kc kd kg la kk lb ko lc ks lm le lf lg bi translated">在<strong class="jx hj"> ropsten网络</strong>上部署智能合约。</li><li id="fe31" class="ky kz hi jx b jy lh kc li kg lj kk lk ko ll ks lm le lf lg bi translated">智能合约的测试。</li><li id="5608" class="ky kz hi jx b jy lh kc li kg lj kk lk ko ll ks lm le lf lg bi translated">分散式应用程序的体系结构。</li><li id="25a2" class="ky kz hi jx b jy lh kc li kg lj kk lk ko ll ks lm le lf lg bi translated">构建分散式应用程序(dAPP)以与区块链交互。</li><li id="d860" class="ky kz hi jx b jy lh kc li kg lj kk lk ko ll ks lm le lf lg bi translated">运行并测试应用程序</li></ul><h1 id="a11b" class="ix iy hi bd iz ja kt jc jd je ku jg jh ji kv jk jl jm kw jo jp jq kx js jt ju bi translated">源代码</h1><ul class=""><li id="fe3a" class="ky kz hi jx b jy jz kc kd kg la kk lb ko lc ks lm le lf lg bi translated">让我们克隆包含智能合同和dapp源代码的存储库。</li></ul><pre class="ln lo lp lq fd lr ls lt lu aw lv bi"><span id="a7eb" class="lw iy hi ls b fi lx ly l lz ma"><strong class="ls hj">git clone https://github.com/cmjagtap/dApp</strong></span></pre><h1 id="d969" class="ix iy hi bd iz ja kt jc jd je ku jg jh ji kv jk jl jm kw jo jp jq kx js jt ju bi translated">智能合同部署</h1><ul class=""><li id="a10d" class="ky kz hi jx b jy jz kc kd kg la kk lb ko lc ks lm le lf lg bi translated">这是一个简单的凝乳智能契约，处理学生的数据。</li><li id="ff04" class="ky kz hi jx b jy lh kc li kg lj kk lk ko ll ks lm le lf lg bi translated">让我们在一个混合环境中部署契约</li><li id="04cc" class="ky kz hi jx b jy lh kc li kg lj kk lk ko ll ks lm le lf lg bi translated">首先，导航到地址<a class="ae mb" href="https://remix.ethereum.org/" rel="noopener ugc nofollow" target="_blank">https://remix.ethereum.org/</a></li><li id="95be" class="ky kz hi jx b jy lh kc li kg lj kk lk ko ll ks lm le lf lg bi translated">添加新的<strong class="jx hj"> curd.sol </strong>文件，并从存储库中复制粘贴代码。</li><li id="b195" class="ky kz hi jx b jy lh kc li kg lj kk lk ko ll ks lm le lf lg bi translated">从左侧点击第三个按钮，将出现部署窗口。</li><li id="fc05" class="ky kz hi jx b jy lh kc li kg lj kk lk ko ll ks lm le lf lg bi translated">选择<strong class="jx hj">环境</strong>作为<strong class="jx hj">注入的Web3 </strong>，会出现如下metamask提示。</li></ul><figure class="ln lo lp lq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mc"><img src="../Images/3f64e084160dc26567824fdd4bf53ff1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dcLTnNbRiYdFXOodhEef0A.png"/></div></div></figure><ul class=""><li id="66dc" class="ky kz hi jx b jy md kc me kg mf kk mg ko mh ks lm le lf lg bi translated">在metamask中输入您的密码，我将连接到remix环境。</li><li id="035b" class="ky kz hi jx b jy lh kc li kg lj kk lk ko ll ks lm le lf lg bi translated">你可以在一个<strong class="jx hj"> remix账户上看到你的metamask钱包地址。</strong></li><li id="9259" class="ky kz hi jx b jy lh kc li kg lj kk lk ko ll ks lm le lf lg bi translated">在metamask扩展中选择ropsten test-network，你的钱包应该是这样的。</li></ul><figure class="ln lo lp lq fd ij er es paragraph-image"><div class="er es mi"><img src="../Images/31af153555d09015d9377f3a95ba539c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1134/format:webp/1*tVxS0PxU4wv3ChCKHGIgBg.png"/></div></figure><ul class=""><li id="b0e3" class="ky kz hi jx b jy md kc me kg mf kk mg ko mh ks lm le lf lg bi translated">单击deploy按钮，合同将被部署到ropsten网络上。</li><li id="de6d" class="ky kz hi jx b jy lh kc li kg lj kk lk ko ll ks lm le lf lg bi translated">现在metamask提示符将如下所示出现，并要求您确认交易。</li><li id="f5db" class="ky kz hi jx b jy lh kc li kg lj kk lk ko ll ks lm le lf lg bi translated">现在，您可以在契约创建的remix环境中看到调试日志，在成功部署之后，事务日志将如下所示。</li></ul><figure class="ln lo lp lq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mc"><img src="../Images/bd27455106c50e952ead464827b42bc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0TUN_PaKFbuJhgGaXXxgWw.png"/></div></div></figure><ul class=""><li id="6951" class="ky kz hi jx b jy md kc me kg mf kk mg ko mh ks lm le lf lg bi translated">让我们通过导航到这个地址<a class="ae mb" href="https://ropsten.etherscan.io/" rel="noopener ugc nofollow" target="_blank">https://ropsten . ethers can . io</a>来验证ropsten explore上的合同部署。</li><li id="48f9" class="ky kz hi jx b jy lh kc li kg lj kk lk ko ll ks lm le lf lg bi translated">将交易散列从日志复制并粘贴到etherscan网站。</li></ul><figure class="ln lo lp lq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mj"><img src="../Images/75f7e411df09e89874579444d21af7ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mOjYdx4vEccRvBqEEjyTGQ.png"/></div></div><figcaption class="mk ml et er es mm mn bd b be z dx">Ropsten Etherscan</figcaption></figure><ul class=""><li id="6c8a" class="ky kz hi jx b jy md kc me kg mf kk mg ko mh ks lm le lf lg bi translated">在上图中，我们可以看到谁创建了交易，它应该与您的元掩码钱包地址相匹配。</li><li id="30ef" class="ky kz hi jx b jy lh kc li kg lj kk lk ko ll ks lm le lf lg bi translated">现在我们的合同准备好了，我们可以测试合同的所有功能。</li></ul><h1 id="66f2" class="ix iy hi bd iz ja kt jc jd je ku jg jh ji kv jk jl jm kw jo jp jq kx js jt ju bi translated">合同测试</h1><p id="1a48" class="pw-post-body-paragraph jv jw hi jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">在remix环境下测试功能。</p><ul class=""><li id="ad5c" class="ky kz hi jx b jy md kc me kg mf kk mg ko mh ks lm le lf lg bi translated">现在我们可以创建学生记录。</li></ul><figure class="ln lo lp lq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mo"><img src="../Images/55be81e554ed09723315d599ab4ccc1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CHIr8d5Li0mz2AytAHvcAA.png"/></div></div><figcaption class="mk ml et er es mm mn bd b be z dx">Deployed Contract</figcaption></figure><h1 id="eb98" class="ix iy hi bd iz ja kt jc jd je ku jg jh ji kv jk jl jm kw jo jp jq kx js jt ju bi translated">分散式应用程序的体系结构。</h1><figure class="ln lo lp lq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mp"><img src="../Images/9c2f0abe3122c4ae6b758df962a7016b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nZnqNJWl0RahqEd5nUvwtw.png"/></div></div><figcaption class="mk ml et er es mm mn bd b be z dx">Web3 Architecture</figcaption></figure><h1 id="11ad" class="ix iy hi bd iz ja kt jc jd je ku jg jh ji kv jk jl jm kw jo jp jq kx js jt ju bi translated">构建分散式应用程序(dAPP)</h1><ul class=""><li id="2831" class="ky kz hi jx b jy jz kc kd kg la kk lb ko lc ks lm le lf lg bi translated">首先，在<a class="ae mb" href="https://infura.io/" rel="noopener ugc nofollow" target="_blank"> https://infura.io </a>上创建一个账户</li><li id="1f7c" class="ky kz hi jx b jy lh kc li kg lj kk lk ko ll ks lm le lf lg bi translated">然后创建一个项目并导航到项目设置。</li></ul><figure class="ln lo lp lq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mq"><img src="../Images/40bafcc9e37cc104d50a83f7051840a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HDOy_JFXF2EMhzxR7wbuhA.png"/></div></div><figcaption class="mk ml et er es mm mn bd b be z dx">Infura Project</figcaption></figure><ul class=""><li id="1acf" class="ky kz hi jx b jy md kc me kg mf kk mg ko mh ks lm le lf lg bi translated">选择终点作为<strong class="jx hj">终点。</strong></li></ul><blockquote class="mr ms mt"><p id="e5b3" class="jv jw mu jx b jy md ka kb kc me ke kf mv mw ki kj mx my km kn mz na kq kr ks hb bi translated">注意:我们已经在ropsten网络上部署了我们的合同，这就是我们选择Ropsten端点的原因。</p></blockquote><ul class=""><li id="9b9e" class="ky kz hi jx b jy md kc me kg mf kk mg ko mh ks lm le lf lg bi translated">复制项目id并粘贴到<strong class="jx hj"/><strong class="jx hj">dapp . js</strong>中的<strong class="jx hj">in fura _ KEY</strong></li><li id="fade" class="ky kz hi jx b jy lh kc li kg lj kk lk ko ll ks lm le lf lg bi translated">复制你的元掩码钱包地址并粘贴到<strong class="jx hj"/><strong class="jx hj">dapp . js</strong>中的<strong class="jx hj"> <em class="mu">账户</em> </strong></li><li id="25bc" class="ky kz hi jx b jy lh kc li kg lj kk lk ko ll ks lm le lf lg bi translated">导出元掩码私钥并粘贴到<strong class="jx hj"/><strong class="jx hj">dapp . js</strong>中的<strong class="jx hj"> <em class="mu"> privateKey </em> </strong>中。</li></ul><blockquote class="mr ms mt"><p id="b99e" class="jv jw mu jx b jy md ka kb kc me ke kf mv mw ki kj mx my km kn mz na kq kr ks hb bi translated">不要共享您的私钥。我们需要私钥来签署交易。</p></blockquote><ul class=""><li id="6313" class="ky kz hi jx b jy md kc me kg mf kk mg ko mh ks lm le lf lg bi translated">从remix环境或etherscan(在上面的etherscan图片中有一个<strong class="jx hj">到</strong>是智能合约地址)中复制部署好的合约地址，粘贴到<strong class="jx hj"><em class="mu">contract _ Address</em></strong>In<strong class="jx hj"/><strong class="jx hj">dapp . js</strong>中。</li><li id="d810" class="ky kz hi jx b jy lh kc li kg lj kk lk ko ll ks lm le lf lg bi translated">复制abi，它是由solidity编译器编译的字节码。</li></ul><figure class="ln lo lp lq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nb"><img src="../Images/fbaa3bb3775265463ca9e49669e824f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z1nBGml1pCz0yw-9duhaLA.png"/></div></div><figcaption class="mk ml et er es mm mn bd b be z dx">Contract abi</figcaption></figure><ul class=""><li id="65c0" class="ky kz hi jx b jy md kc me kg mf kk mg ko mh ks lm le lf lg bi translated">将复制的ABI数组粘贴到<strong class="jx hj"> dapp.js </strong>中</li></ul><pre class="ln lo lp lq fd lr ls lt lu aw lv bi"><span id="9ee5" class="lw iy hi ls b fi lx ly l lz ma">const Web3 = require('web3');<br/>const Tx = require('ethereumjs-tx').Transaction;<br/>const INFURA_KEY = "";  <em class="mu">// replace your infura-key<br/></em>const web3 = new Web3('wss://ropsten.infura.io/ws/v3/' + INFURA_KEY);<br/>const account = ''; <em class="mu">// replace wallet address with metamask wallet address<br/></em>const privateKey = Buffer.from('', 'hex'); <em class="mu">// replace Private key to sign the transaction.<br/></em>const contract_Address = ""; <em class="mu">//replace deployed contract address<br/></em>const abi = ; //replace contract abi<br/>const contract = new web3.eth.Contract(abi, contract_Address); <em class="mu">// Instantiating smart contract</em></span></pre><h2 id="c16f" class="lw iy hi bd iz nc nd ne jd nf ng nh jh kg ni nj jl kk nk nl jp ko nm nn jt no bi translated">合同功能</h2><ul class=""><li id="b9f7" class="ky kz hi jx b jy jz kc kd kg la kk lb ko lc ks lm le lf lg bi translated">签约交易功能工作如下:</li><li id="8d00" class="ky kz hi jx b jy lh kc li kg lj kk lk ko ll ks lm le lf lg bi translated">首先，它从区块链读取一个<strong class="jx hj"> TransactionCount </strong>来计算一个交易的价格，然后<strong class="jx hj"> getGasPrice </strong>从区块链读取一个天然气价格，<strong class="jx hj"> sendSignedTransaction </strong>向区块链发送一个交易并等待开采。</li><li id="e48f" class="ky kz hi jx b jy lh kc li kg lj kk lk ko ll ks lm le lf lg bi translated">挖掘成功后会得到一张交易收据。</li></ul><blockquote class="mr ms mt"><p id="2d69" class="jv jw mu jx b jy md ka kb kc me ke kf mv mw ki kj mx my km kn mz na kq kr ks hb bi translated">注意:这里read函数不需要签署事务，因为它不改变区块链状态。</p></blockquote><h1 id="792e" class="ix iy hi bd iz ja kt jc jd je ku jg jh ji kv jk jl jm kw jo jp jq kx js jt ju bi translated">运行测试dAPP</h1><ul class=""><li id="dc52" class="ky kz hi jx b jy jz kc kd kg la kk lb ko lc ks lm le lf lg bi translated">使用下面的命令安装依赖项。</li></ul><pre class="ln lo lp lq fd lr ls lt lu aw lv bi"><span id="e472" class="lw iy hi ls b fi lx ly l lz ma"><strong class="ls hj">npm install</strong></span></pre><ul class=""><li id="835b" class="ky kz hi jx b jy md kc me kg mf kk mg ko mh ks lm le lf lg bi translated">使用以下命令运行应用程序</li></ul><pre class="ln lo lp lq fd lr ls lt lu aw lv bi"><span id="e047" class="lw iy hi ls b fi lx ly l lz ma"><strong class="ls hj">node dapp.js</strong></span></pre><ul class=""><li id="df25" class="ky kz hi jx b jy md kc me kg mf kk mg ko mh ks lm le lf lg bi translated">执行申请后，学生将在区块链上创建，我们将收到如下收据。</li></ul><figure class="ln lo lp lq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es np"><img src="../Images/0905099186df52506052c951b1924ab6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L87skj-aZQkp16QygqIXCQ.png"/></div></div><figcaption class="mk ml et er es mm mn bd b be z dx">Transaction Receipt</figcaption></figure><blockquote class="mr ms mt"><p id="e90f" class="jv jw mu jx b jy md ka kb kc me ke kf mv mw ki kj mx my km kn mz na kq kr ks hb bi translated">注意:等待交易收据。</p></blockquote><ul class=""><li id="91c5" class="ky kz hi jx b jy md kc me kg mf kk mg ko mh ks lm le lf lg bi translated">导航到<a class="ae mb" href="https://ropsten.etherscan.io/" rel="noopener ugc nofollow" target="_blank">https://ropsten . ethers can . io</a>。</li><li id="2a98" class="ky kz hi jx b jy lh kc li kg lj kk lk ko ll ks lm le lf lg bi translated">将上述事件中的交易哈希复制并粘贴到etherscan网站。</li></ul><figure class="ln lo lp lq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nq"><img src="../Images/d0ba59f615813a90e9dc5229b0ae7663.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZbRgHfhdSz0gvaTZDLgAnQ.png"/></div></div><figcaption class="mk ml et er es mm mn bd b be z dx">Create Student</figcaption></figure><ul class=""><li id="21b2" class="ky kz hi jx b jy md kc me kg mf kk mg ko mh ks lm le lf lg bi translated">注释<strong class="jx hj">创建</strong>函数调用并启用<strong class="jx hj"> read </strong>函数，然后重新运行dapp。</li></ul><figure class="ln lo lp lq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nr"><img src="../Images/6ddc37e7329e3bbb5f184f7a37f8df36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qT0-ysLpzARaUJcXJMWFvA.png"/></div></div><figcaption class="mk ml et er es mm mn bd b be z dx">Read Student</figcaption></figure><p id="5003" class="pw-post-body-paragraph jv jw hi jx b jy md ka kb kc me ke kf kg mw ki kj kk my km kn ko na kq kr ks hb bi translated">同样，我们可以测试更新和删除功能。</p><h1 id="cc8f" class="ix iy hi bd iz ja kt jc jd je ku jg jh ji kv jk jl jm kw jo jp jq kx js jt ju bi translated">摘要</h1><p id="5a62" class="pw-post-body-paragraph jv jw hi jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">我们已经看到了如何创建智能合约，以及如何在remix和测试网络环境中部署智能合约。我们学习如何使用web3js构建dapp，并与以太坊区块链交互。</p></div></div>    
</body>
</html>