<html>
<head>
<title>Setting up a React app from scratch withWebpack, Babel and Eslint</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Webpack、Babel和Eslint从头开始设置React应用程序</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/setting-up-a-react-app-from-scratch-withwebpack-babel-and-eslint-57eb3dcaf2e9?source=collection_archive---------3-----------------------#2021-05-02">https://medium.com/geekculture/setting-up-a-react-app-from-scratch-withwebpack-babel-and-eslint-57eb3dcaf2e9?source=collection_archive---------3-----------------------#2021-05-02</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/9765f6e60b259665a464902422cf10fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WDVgbvEhYOA_PVPtQpq8Pg.jpeg"/></div></div></figure><p id="9259" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">不熟悉JavaScript？从你宝贵的时间里抽出5分钟来读读这个吧！！我向你保证它不会被浪费，</p><div class="jo jp ez fb jq jr"><a href="https://shalithax.medium.com/javascript-concepts-that-will-level-up-your-development-skills-35604462025b" rel="noopener follow" target="_blank"><div class="js ab dw"><div class="jt ab ju cl cj jv"><h2 class="bd hj fi z dy jw ea eb jx ed ef hh bi translated">将提升您的开发技能的JavaScript概念</h2><div class="jy l"><h3 class="bd b fi z dy jw ea eb jx ed ef dx translated">不熟悉JavaScript？从你宝贵的时间里抽出5分钟来读读这个吧！！我向你保证它不会被浪费，</h3></div><div class="jz l"><p class="bd b fp z dy jw ea eb jx ed ef dx translated">shalithax.medium.com</p></div></div><div class="ka l"><div class="kb l kc kd ke ka kf io jr"/></div></div></a></div><p id="d4fd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们都知道这个神奇的命令<code class="du kg kh ki kj b">create-react-app .</code>,但是，如果你正在做任何需要SASS、Webpack配置或其他定制配置的事情，CRA (create-react-app)将会是一个麻烦。例如，如果您想要添加自定义构建配置。添加自定义配置的一种方法是弹出应用程序。</p><p id="c159" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你是一个天生好奇的开发人员，你想知道事情是如何工作的，哪个部分做什么，那么让我来帮你。</p><p id="e58b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="kk">先决条件</em></p><ol class=""><li id="2a59" class="kl km hi is b it iu ix iy jb kn jf ko jj kp jn kq kr ks kt bi translated"><a class="ae ku" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank"> <strong class="is hj">节点</strong> </a></li><li id="c575" class="kl km hi is b it kv ix kw jb kx jf ky jj kz jn kq kr ks kt bi translated">任何IDE(推荐<a class="ae ku" href="https://www.jetbrains.com/webstorm/" rel="noopener ugc nofollow" target="_blank"><strong class="is hj">Webstorm</strong></a><strong class="is hj"/>或<a class="ae ku" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="is hj"> Visual Studio代码</strong> </a> <strong class="is hj">)。</strong></li></ol><h1 id="d170" class="la lb hi bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated"><strong class="ak">让我们开始</strong></h1><p id="3262" class="pw-post-body-paragraph iq ir hi is b it ly iv iw ix lz iz ja jb ma jd je jf mb jh ji jj mc jl jm jn hb bi translated">打开命令行或Git bash并创建一个新目录:</p><pre class="md me mf mg fd mh kj mi mj aw mk bi"><span id="fb38" class="ml lb hi kj b fi mm mn l mo mp">mkdir custom-react-boilerplate &amp;&amp; cd custom-react-boilerplate</span></pre><p id="94db" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">通过运行以下命令初始化项目:</p><pre class="md me mf mg fd mh kj mi mj aw mk bi"><span id="6811" class="ml lb hi kj b fi mm mn l mo mp">npm init</span></pre><p id="751b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">它将提示您输入项目的几个方面。将输入内容填写为您自己的内容。然后就可以看到<em class="kk"> package.json </em>文件了。</p><p id="9f43" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后我们安装react</p><pre class="md me mf mg fd mh kj mi mj aw mk bi"><span id="0bd5" class="ml lb hi kj b fi mm mn l mo mp">npm install react react-dom</span></pre><h2 id="8957" class="ml lb hi bd lc mq mr ms lg mt mu mv lk jb mw mx lo jf my mz ls jj na nb lw nc bi translated">安装Webpack</h2><p id="907e" class="pw-post-body-paragraph iq ir hi is b it ly iv iw ix lz iz ja jb ma jd je jf mb jh ji jj mc jl jm jn hb bi translated">Webpack是一个捆绑器。Webpack的核心功能是获取我们在项目中编写的一堆JavaScript文件，并将它们转换成一个单一的、缩小的文件，以便快速提供服务。</p><p id="032c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们安装Webpack。</p><pre class="md me mf mg fd mh kj mi mj aw mk bi"><span id="a09c" class="ml lb hi kj b fi mm mn l mo mp">npm install --save-dev webpack webpack-dev-server webpack-cli <!-- -->html-loader html-webpack-plugin</span></pre><ul class=""><li id="aaa2" class="kl km hi is b it iu ix iy jb kn jf ko jj kp jn nd kr ks kt bi translated"><strong class="is hj"> webpack </strong> —包括所有核心webpack功能。</li><li id="f7db" class="kl km hi is b it kv ix kw jb kx jf ky jj kz jn nd kr ks kt bi translated"><strong class="is hj"> webpack-dev-server </strong> —当我们的文件被更改时，这个开发服务器会自动重新运行webpack。</li><li id="3fe4" class="kl km hi is b it kv ix kw jb kx jf ky jj kz jn nd kr ks kt bi translated">webpack-cli  —允许从命令行运行webpack。</li></ul><p id="0387" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">接下来，我们配置package.json来运行Webpack。</p><pre class="md me mf mg fd mh kj mi mj aw mk bi"><span id="100e" class="ml lb hi kj b fi mm mn l mo mp">"scripts": {<br/> "start": "<!-- -->webpack serve<!-- --> --mode development <!-- -->--env=development<!-- -->",<br/>},</span></pre><ul class=""><li id="5829" class="kl km hi is b it iu ix iy jb kn jf ko jj kp jn nd kr ks kt bi translated"><em class="kk"> —模式</em>表示配置选项告诉webpack运行阶段。欲了解更多信息，请访问<a class="ae ku" href="https://webpack.js.org/configuration/mode/" rel="noopener ugc nofollow" target="_blank">https://webpack.js.org/configuration/mode/</a></li><li id="b318" class="kl km hi is b it kv ix kw jb kx jf ky jj kz jn nd kr ks kt bi translated"><em class="kk"> — env </em>表示我们设置运行环境。我们在下面的主题<strong class="is hj">源图中使用该参数，以获得更好的错误日志。</strong></li></ul><p id="7e96" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">支持以下字符串值:</p><figure class="md me mf mg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ne"><img src="../Images/ee75b79f57278d1b1af2f405a4f4912a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GzD9LytDcJEb2vBlILPUwQ.png"/></div></div><figcaption class="nf ng et er es nh ni bd b be z dx">webpack run stages</figcaption></figure><p id="0f84" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后我们在项目的根目录下创建一个<code class="du kg kh ki kj b">index.html</code>文件，</p><pre class="md me mf mg fd mh kj mi mj aw mk bi"><span id="1d37" class="ml lb hi kj b fi mm mn l mo mp">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>&lt;head&gt;<br/>    &lt;meta charset="UTF-8"&gt;<br/>    &lt;title&gt;Custom React Configuration&lt;/title&gt;<br/>&lt;/head&gt;<br/>&lt;body&gt;<br/>    &lt;div id="root"&gt;&lt;/div&gt;<br/>&lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="f8ed" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">两个突出显示的东西，你必须创建一个<code class="du kg kh ki kj b">&lt;div id="root"&gt;&lt;/div&gt;</code>元素和一个<code class="du kg kh ki kj b">&lt;script src="./dist/bundle.js"&gt;&lt;/script&gt; </code>标签。</p><p id="2bf9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">添加src目录，然后添加index.jsx和App.jsx文件</p><pre class="md me mf mg fd mh kj mi mj aw mk bi"><span id="e7d8" class="ml lb hi kj b fi mm mn l mo mp">mkdir src &amp;&amp; cd src &amp;&amp; touch index.jsx &amp;&amp; touch App.jsx</span></pre><p id="c056" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在让我们添加一些起始代码，</p><p id="343f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在App.jsx文件中，</p><pre class="md me mf mg fd mh kj mi mj aw mk bi"><span id="0182" class="ml lb hi kj b fi mm mn l mo mp">import <strong class="kj hj"><em class="kk">React </em></strong>from "react";<br/><br/>function App()<br/>{<br/>    return (<br/>        &lt;div className='App'&gt;<br/>            &lt;h1&gt;Hello World !&lt;/h1&gt;<br/>        &lt;/div&gt;<br/>    );<br/>}<br/><br/>export default App;</span></pre><p id="9a12" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在index.jsx文件中，</p><pre class="md me mf mg fd mh kj mi mj aw mk bi"><span id="7e4a" class="ml lb hi kj b fi mm mn l mo mp">import <strong class="kj hj"><em class="kk">React </em></strong>from "react";<br/>import ReactDOM from "react-dom";<br/>import App from "./App";<br/><br/>ReactDOM.render(<br/>    &lt;React.StrictMode&gt;<br/>        &lt;App /&gt;<br/>    &lt;/React.StrictMode&gt;,<br/>    <strong class="kj hj"><em class="kk">document</em></strong>.getElementById('root'),<br/>);</span></pre><p id="0d56" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">首先，我们创建<code class="du kg kh ki kj b">App.jsx</code>，并将其导入到<code class="du kg kh ki kj b">index.jsx</code>。这种方法隔离了复杂性，比把所有东西放在一起更容易理解。所以有几件事需要澄清，</p><p id="f52b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">什么是<strong class="is hj">反应。StrictMode </strong>？</p><p id="7a5a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">React的StrictMode是一种帮助组件，可以帮助你编写更好的react组件，你可以用<code class="du kg kh ki kj b">&lt;StrictMode&gt;</code>包装一组组件。</p><p id="ca75" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><code class="du kg kh ki kj b">StrictMode</code>目前帮助:</p><ul class=""><li id="b711" class="kl km hi is b it iu ix iy jb kn jf ko jj kp jn nd kr ks kt bi translated"><a class="ae ku" href="https://reactjs.org/docs/strict-mode.html#identifying-unsafe-lifecycles" rel="noopener ugc nofollow" target="_blank">识别具有不安全生命周期的组件</a></li><li id="8b2d" class="kl km hi is b it kv ix kw jb kx jf ky jj kz jn nd kr ks kt bi translated"><a class="ae ku" href="https://reactjs.org/docs/strict-mode.html#warning-about-legacy-string-ref-api-usage" rel="noopener ugc nofollow" target="_blank">关于传统字符串引用API用法的警告</a></li><li id="e8d8" class="kl km hi is b it kv ix kw jb kx jf ky jj kz jn nd kr ks kt bi translated"><a class="ae ku" href="https://reactjs.org/docs/strict-mode.html#warning-about-deprecated-finddomnode-usage" rel="noopener ugc nofollow" target="_blank">关于已弃用的findDOMNode用法的警告</a></li><li id="9837" class="kl km hi is b it kv ix kw jb kx jf ky jj kz jn nd kr ks kt bi translated"><a class="ae ku" href="https://reactjs.org/docs/strict-mode.html#detecting-unexpected-side-effects" rel="noopener ugc nofollow" target="_blank">检测意外副作用</a></li><li id="e522" class="kl km hi is b it kv ix kw jb kx jf ky jj kz jn nd kr ks kt bi translated"><a class="ae ku" href="https://reactjs.org/docs/strict-mode.html#detecting-legacy-context-api" rel="noopener ugc nofollow" target="_blank">检测遗留上下文API </a></li></ul><p id="9c5d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">更多信息请参考:<a class="ae ku" href="https://reactjs.org/docs/strict-mode.html" rel="noopener ugc nofollow" target="_blank">https://reactjs.org/docs/strict-mode.html</a></p><h1 id="2c1e" class="la lb hi bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">配置巴别塔7</h1><p id="286a" class="pw-post-body-paragraph iq ir hi is b it ly iv iw ix lz iz ja jb ma jd je jf mb jh ji jj mc jl jm jn hb bi translated">好吧，什么是巴别塔，我们为什么需要它？</p><blockquote class="nj nk nl"><p id="6a9c" class="iq ir kk is b it iu iv iw ix iy iz ja nm jc jd je nn jg jh ji no jk jl jm jn hb bi translated">巴别塔负责将新的语言特征转换成旧的。</p></blockquote><p id="30f2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">虽然大多数流行的浏览器都可以支持ECMAScript2015(或ES6)，但确保您的代码与旧版本的JavaScript兼容始终是一个好做法。Es6有<code class="du kg kh ki kj b">let</code>、<code class="du kg kh ki kj b">const</code>、<code class="du kg kh ki kj b">arrow functions</code>、<code class="du kg kh ki kj b">classes</code>等。为了理解，下面我们有一个ES6 arrow函数的输入，它被转换成一个普通的、旧的ES5 JavaScript函数。</p><pre class="md me mf mg fd mh kj mi mj aw mk bi"><span id="c7ee" class="ml lb hi kj b fi mm mn l mo mp">// Babel Input: ES2015 arrow function<br/>[1, 2, 3].map((n) =&gt; n + 1);<br/><br/>// Babel Output: ES5 equivalent<br/>[1, 2, 3].map(function(n) {<br/>  return n + 1;<br/>});</span></pre><p id="cf23" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">进一步参考:<a class="ae ku" href="https://babeljs.io/docs/en/" rel="noopener ugc nofollow" target="_blank">https://babeljs.io/docs/en/</a></p><p id="6f06" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们将Babel安装到我们的项目中，</p><pre class="md me mf mg fd mh kj mi mj aw mk bi"><span id="fa81" class="ml lb hi kj b fi mm mn l mo mp">npm install --save-dev @babel/core @babel/preset-env @babel/preset-react babel-loader</span></pre><p id="8c2e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们刚刚安装的内容:</p><ul class=""><li id="de7d" class="kl km hi is b it iu ix iy jb kn jf ko jj kp jn nd kr ks kt bi translated"><strong class="is hj"> @babel/core: </strong>包含babel转换脚本的主依赖项。</li><li id="327c" class="kl km hi is b it kv ix kw jb kx jf ky jj kz jn nd kr ks kt bi translated"><strong class="is hj"><em class="kk">@ babel/preset-env</em></strong>:将ES6+转换成有效的ES5代码。可以选择自动配置浏览器聚合填充。</li><li id="e207" class="kl km hi is b it kv ix kw jb kx jf ky jj kz jn nd kr ks kt bi translated"><strong class="is hj"><em class="kk">@ Babel/preset-react</em></strong>:将巴别支援扩展到JSX。</li><li id="2443" class="kl km hi is b it kv ix kw jb kx jf ky jj kz jn nd kr ks kt bi translated"><strong class="is hj"> babel-loader: </strong>将babel与Webpack挂钩的webpack加载器。我们将用这个包从webpack运行Babel。</li></ul><p id="c1ec" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要将Babel配置到我们的webpack中，在您的根目录中创建一个名为<code class="du kg kh ki kj b">webpack.config.js</code> file的文件:</p><pre class="md me mf mg fd mh kj mi mj aw mk bi"><span id="9075" class="ml lb hi kj b fi mm mn l mo mp">const <strong class="kj hj"><em class="kk">path </em></strong>= require('path');<br/>const HtmlWebpackPlugin = require('html-webpack-plugin');<br/><br/>module.exports = {<br/>    entry: './src/index.jsx',<br/>    output: {<br/>        path: <strong class="kj hj"><em class="kk">path</em></strong>.resolve(__dirname, 'build'),<br/>        publicPath: '/',<br/>        filename: 'bundle.js'<br/>    },<br/>    resolve: {<br/>        alias: {<br/>            components: <strong class="kj hj"><em class="kk">path</em></strong>.resolve(__dirname, 'src'),<br/>        },<br/>        extensions: ['.js', '.jsx'],<br/>    },<br/>    devServer: {<br/>        contentBase: "./build",<br/>    },<br/>    module: {<br/>        rules: [<br/>            {<br/>                test: /\.(js|jsx)$/,<br/>                exclude: /node_modules/,<br/>                use: ['babel-loader']<br/>            },<br/>            {<br/>                test: /\.less$/,<br/>                use: [<br/>                    'style-loader',<br/>                    'css-loader',<br/>                    'less-loader',<br/>                ],<br/>            },<br/>        ]<br/>    },<br/>    plugins: [<br/>        new HtmlWebpackPlugin({<br/>            template:  <strong class="kj hj"><em class="kk">path</em></strong>.resolve('./index.html'),<br/>        }),<br/>    ]<br/>};</span></pre><p id="4c4f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在我们澄清一下<code class="du kg kh ki kj b">webpack.config.js</code>文件中设置的配置。</p><p id="0c30" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><code class="du kg kh ki kj b">entry</code>是我们主要的JavaScript文件。在React中，这是我们使用渲染器的文件。</p><p id="d34c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><code class="du kg kh ki kj b">output</code>告诉我们把捆绑的代码放在哪里，给文件取什么名字。这里，我们配置Webpack在根目录下创建一个名为<code class="du kg kh ki kj b">/dist</code>的目录，并创建一个名为<code class="du kg kh ki kj b">bundle.js</code>的文件。</p><p id="1c25" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><code class="du kg kh ki kj b">output </code>告诉服务器提供来自<code class="du kg kh ki kj b">contentBase</code>配置的内容。</p><p id="c796" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><code class="du kg kh ki kj b">"module"</code>是我们告诉Webpack使用我们之前安装的所有加载器的地方。</p><p id="a459" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">接下来，Babel预置，在项目的根目录下创建一个新的<code class="du kg kh ki kj b">.babelrc</code>文件。</p><pre class="md me mf mg fd mh kj mi mj aw mk bi"><span id="db95" class="ml lb hi kj b fi mm mn l mo mp">{<br/>  "presets": [<br/>    "@babel/preset-env",<br/>    "@babel/preset-react"<br/>  ]<br/>}</span></pre><p id="c7af" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在运行<code class="du kg kh ki kj b">npm run start</code>。你可以看到Hello world！。</p><h1 id="d23e" class="la lb hi bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">用于更好的错误日志的源映射</h1><p id="3044" class="pw-post-body-paragraph iq ir hi is b it ly iv iw ix lz iz ja jb ma jd je jf mb jh ji jj mc jl jm jn hb bi translated">源映射为浏览器提供了一种将压缩文件中的代码映射回其在源文件中的原始位置的方法。这样，当错误发生时，您会被指向错误发生的确切文件和行。因此，如果您使用任何工具来缩小、连接或捆绑您的代码，您肯定需要生成源地图。</p><p id="b42c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">所以我们修改了<code class="du kg kh ki kj b">webpack.config.js</code>中的<code class="du kg kh ki kj b">devtool </code></p><pre class="md me mf mg fd mh kj mi mj aw mk bi"><span id="d52a" class="ml lb hi kj b fi mm mn l mo mp">devtool : isProduction ?'source-map' : 'inline-source-map'</span></pre><p id="8d6a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在<code class="du kg kh ki kj b">webpack.config.js</code>看起来像，</p><pre class="md me mf mg fd mh kj mi mj aw mk bi"><span id="8227" class="ml lb hi kj b fi mm mn l mo mp">const <strong class="kj hj"><em class="kk">path </em></strong>= require('path');<br/>const <strong class="kj hj"><em class="kk">HtmlWebpackPlugin </em></strong>= require('html-webpack-plugin');<br/><br/>module.exports = (env) =&gt; {<br/>    const isProduction = env === 'production';<br/>    return{<br/>        entry: './src/index.jsx',<br/>        output: {<br/>            path: <strong class="kj hj"><em class="kk">path</em></strong>.resolve(__dirname, 'build'),<br/>            publicPath: '/',<br/>            filename: 'bundle.js'<br/>        },<br/>        resolve: {<br/>            alias: {<br/>                components: <strong class="kj hj"><em class="kk">path</em></strong>.resolve(__dirname, 'src'),<br/>            },<br/>            extensions: ['.js', '.jsx'],<br/>        },<br/>        devServer: {<br/>            contentBase: "./build",<br/>        },<br/>        module: {<br/>            rules: [<br/>                {<br/>                    test: /\.(js|jsx)$/,<br/>                    exclude: /node_modules/,<br/>                    use: ['babel-loader']<br/>                },<br/>                {<br/>                    test: /\.less$/,<br/>                    use: [<br/>                        'style-loader',<br/>                        'css-loader',<br/>                        'less-loader',<br/>                    ],<br/>                },<br/>            ]<br/>        },<br/>        plugins: [<br/>            new <strong class="kj hj"><em class="kk">HtmlWebpackPlugin</em></strong>({<br/>                template:  <strong class="kj hj"><em class="kk">path</em></strong>.resolve('./index.html'),<br/>            }),<br/>        ],<br/>        devtool : isProduction ?'source-map' : 'inline-source-map'<br/>    }<br/><br/>};</span></pre><h1 id="688e" class="la lb hi bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">设置ESLint</h1><p id="ab1c" class="pw-post-body-paragraph iq ir hi is b it ly iv iw ix lz iz ja jb ma jd je jf mb jh ji jj mc jl jm jn hb bi translated">伟大的项目是由一致的代码组成的。代码应该和它的作者没有区别:你不应该知道谁编写了项目中的哪一行代码。Eslint通过指出常见错误和实施良好的编程模式来帮助开发人员编写更好的代码。</p><blockquote class="nj nk nl"><p id="5e45" class="iq ir kk is b it iu iv iw ix iy iz ja nm jc jd je nn jg jh ji no jk jl jm jn hb bi translated"><strong class="is hj"> <em class="hi"> Linters </em> </strong> <em class="hi">突出显示</em> <strong class="is hj"> <em class="hi">您的源代码</em> </strong> <em class="hi">中的语法和风格问题，这些问题通常会帮助您识别并纠正</em> <strong class="is hj"> <em class="hi">可能会</em> </strong> <em class="hi">导致错误的微妙编程错误或非常规编码做法</em>。</p></blockquote><p id="e225" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们将ESLint安装到我们的项目中:</p><pre class="md me mf mg fd mh kj mi mj aw mk bi"><span id="1309" class="ml lb hi kj b fi mm mn l mo mp">npm --save-dev install eslint eslint-loader babel-eslint eslint-config-react eslint-plugin-react</span></pre><p id="f1bf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">之后在终端中运行<code class="du kg kh ki kj b">eslint --init</code>。那么请遵守秩序，</p><figure class="md me mf mg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es np"><img src="../Images/a6e0601e0d98121a5d596933f3bd6af4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TrKjQtGoWf1K5ugxcT2QNQ.png"/></div></div></figure><p id="1dde" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们选择Eslint来检查语法和问题，并加强代码风格以确保代码的一致性。</p><figure class="md me mf mg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nq"><img src="../Images/40d7ffd992ddd396d233143d4a859c62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RVqo-mICJ1Zvd4hDgtqNLw.png"/></div></div></figure><p id="28bd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我个人更喜欢<strong class="is hj">导入/导出</strong>语句。选择你感兴趣的。</p><figure class="md me mf mg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nr"><img src="../Images/30fc7145b6a5baad21154944afce0875.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*La877haL0irPhvBPGlmjJA.png"/></div></div></figure><p id="4f73" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们的应用程序是基于React的应用程序。所以我们需要选择<strong class="is hj">反应</strong>。</p><figure class="md me mf mg fd ij er es paragraph-image"><div class="er es ns"><img src="../Images/0f0e11c0571bb825e686ee93f02b8ce7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1398/format:webp/1*nDoQ9Uipaj9PHhWd1Ac6Sg.png"/></div></figure><p id="e183" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们不会在这里使用typescript。所以我们选择<strong class="is hj">号</strong></p><figure class="md me mf mg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nt"><img src="../Images/022c4dc9e11e77371b13a119c5076124.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f1Pd_I50bj_Rk8BMy-WzHg.png"/></div></div></figure><p id="684c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们的React应用程序正在浏览器上运行。所以我们只选择<strong class="is hj">浏览器</strong>。</p><figure class="md me mf mg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nu"><img src="../Images/b8ba3e8db7d654e96d21b180feedf08a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DgqbRNyq_O5cvnL8OYAYOw.png"/></div></div></figure><p id="53fb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我建议使用流行的风格指南。</p><figure class="md me mf mg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nv"><img src="../Images/db17da2c2bab79dcffe09e38f9411b88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NGFh9GiVIr3RTgGLtbXJUg.png"/></div></div></figure><p id="d182" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我个人喜欢<strong class="is hj"> Airbnb </strong>的风格指引。所以我选择Airbnb，如果你喜欢不同的东西。请自己选择。</p><figure class="md me mf mg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nw"><img src="../Images/7e87367f9381717d1413c5caf7c54eb9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JAEDQuihR5om53CtubiXrQ.png"/></div></div></figure><p id="38df" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这里Eslint要求创建一个配置文件，文件名为<strong class="is hj"> JS </strong>，<strong class="is hj"> YAMLor JSON </strong>。我个人比较喜欢<strong class="is hj"> JSON </strong>类型的配置文件。所以我选择<strong class="is hj"> JSON </strong>。</p><figure class="md me mf mg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nx"><img src="../Images/5fba01eb3ffd3906e0353d1e7ea6f806.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Op8jMLe78tGcYjurAbTUQQ.png"/></div></div></figure><p id="178e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">有时候Eslint会要求安装一些插件。所以请选择<strong class="is hj">是</strong>。</p><p id="ad3b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在你可以看到<code class="du kg kh ki kj b">eslintc.json</code>文件被创建在项目根文件夹中。这是Eslint的配置文件。</p><p id="5e64" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们还得修改<code class="du kg kh ki kj b">webpack.config.js</code>。</p><pre class="md me mf mg fd mh kj mi mj aw mk bi"><span id="c2e1" class="ml lb hi kj b fi mm mn l mo mp">use: ['babel-loader', 'eslint-loader'] // include eslint-loader</span></pre><p id="2f1b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在文件<code class="du kg kh ki kj b">webpack.config.js</code>看起来像，</p><pre class="md me mf mg fd mh kj mi mj aw mk bi"><span id="c538" class="ml lb hi kj b fi mm mn l mo mp">const <strong class="kj hj"><em class="kk">path </em></strong>= require('path');<br/>const <strong class="kj hj"><em class="kk">HtmlWebpackPlugin </em></strong>= require('html-webpack-plugin');<br/><br/>module.exports = (env) =&gt; {<br/>    const isProduction = env === 'production';<br/>    return{<br/>        entry: './src/index.jsx',<br/>        output: {<br/>            path: <strong class="kj hj"><em class="kk">path</em></strong>.resolve(__dirname, 'build'),<br/>            publicPath: '/',<br/>            filename: 'bundle.js'<br/>        },<br/>        resolve: {<br/>            alias: {<br/>                components: <strong class="kj hj"><em class="kk">path</em></strong>.resolve(__dirname, 'src'),<br/>            },<br/>            extensions: ['.js', '.jsx'],<br/>        },<br/>        devServer: {<br/>            contentBase: "./build",<br/>        },<br/>        module: {<br/>            rules: [<br/>                {<br/>                    test: /\.(js|jsx)$/,<br/>                    exclude: /node_modules/,<br/>                    use: ['babel-loader', 'eslint-loader']<br/>                },<br/>                {<br/>                    test: /\.less$/,<br/>                    use: [<br/>                        'style-loader',<br/>                        'css-loader',<br/>                        'less-loader',<br/>                    ],<br/>                },<br/>            ]<br/>        },<br/>        plugins: [<br/>            new <strong class="kj hj"><em class="kk">HtmlWebpackPlugin</em></strong>({<br/>                template:  <strong class="kj hj"><em class="kk">path</em></strong>.resolve('./index.html'),<br/>            }),<br/>        ],<br/>        devtool : isProduction ?'source-map' : 'inline-source-map'<br/>    }<br/><br/>};</span></pre><p id="8842" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">供参考:<a class="ae ku" href="https://eslint.org/" rel="noopener ugc nofollow" target="_blank">https://eslint.org/</a></p><p id="de0e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">扩展埃斯林规则。我为更好的编码约定添加了一些自定义规则。如果您想要扩展eslint规则，请转到<code class="du kg kh ki kj b">eslintc.json</code>文件，并将您的自定义规则放在<code class="du kg kh ki kj b">"rules":{}</code>中。</p><p id="43d5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你对自定义规则感兴趣请参考:<a class="ae ku" href="https://github.com/ShalithaCell/Eslint-Rules-ReactJs" rel="noopener ugc nofollow" target="_blank"><strong class="is hj"/></a></p><p id="4084" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">所以我们再次运行项目<code class="du kg kh ki kj b">npm run start</code></p><p id="b529" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">哦..控制台上出现了很多错误，</p><figure class="md me mf mg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ny"><img src="../Images/6ecc670318df2a13989706a1c35f5323.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*piLkA5e_QKWlSRDuEtGKjw.png"/></div></div></figure><p id="7b30" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这些错误来自Eslint。</p><h1 id="6289" class="la lb hi bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">错误！我该怎么办？</h1><p id="053d" class="pw-post-body-paragraph iq ir hi is b it ly iv iw ix lz iz ja jb ma jd je jf mb jh ji jj mc jl jm jn hb bi translated">有多种方法可以解决Eslint错误和警告。</p><ul class=""><li id="7954" class="kl km hi is b it iu ix iy jb kn jf ko jj kp jn nd kr ks kt bi translated">使用—修复命令</li><li id="a303" class="kl km hi is b it kv ix kw jb kx jf ky jj kz jn nd kr ks kt bi translated">设置IDE以检查Eslint配置。</li></ul><h2 id="1d14" class="ml lb hi bd lc mq mr ms lg mt mu mv lk jb mw mx lo jf my mz ls jj na nb lw nc bi translated">1.使用—修复</h2><p id="5aee" class="pw-post-body-paragraph iq ir hi is b it ly iv iw ix lz iz ja jb ma jd je jf mb jh ji jj mc jl jm jn hb bi translated">将下面一行添加到<code class="du kg kh ki kj b">package.json </code>文件中。</p><pre class="md me mf mg fd mh kj mi mj aw mk bi"><span id="a3fb" class="ml lb hi kj b fi mm mn l mo mp">"scripts": {<br/>    "lint": "eslint --fix --ext .js,.jsx ."<br/>}</span></pre><p id="ca55" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在<strong class="is hj">脚本</strong>标签就像，</p><pre class="md me mf mg fd mh kj mi mj aw mk bi"><span id="4f12" class="ml lb hi kj b fi mm mn l mo mp">"scripts": {<br/>  "start": "webpack serve --mode development",<br/>  "lint": "eslint --fix --ext .js,.jsx .",<br/>  "test": "echo \"Error: no test specified\" &amp;&amp; exit 1"<br/>},</span></pre><p id="aa3d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后用<code class="du kg kh ki kj b">npm run lint</code>运行</p><p id="9cd9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">所以我们再次运行项目<code class="du kg kh ki kj b">npm run start</code>并检查错误是否消失。</p><h2 id="5f83" class="ml lb hi bd lc mq mr ms lg mt mu mv lk jb mw mx lo jf my mz ls jj na nb lw nc bi translated">2.设置IDE以检查Eslint配置。</h2><p id="26ce" class="pw-post-body-paragraph iq ir hi is b it ly iv iw ix lz iz ja jb ma jd je jf mb jh ji jj mc jl jm jn hb bi translated">参考<a class="ae ku" href="https://dev.to/blaytenshi/enabling-eslint-on-intellij-vscode-3614" rel="noopener ugc nofollow" target="_blank"> b </a> elow链接配置<strong class="is hj"> WebStrom </strong>和<strong class="is hj"> VS代码</strong>。</p><div class="jo jp ez fb jq jr"><a href="https://dev.to/blaytenshi/enabling-eslint-on-intellij-vscode-3614" rel="noopener  ugc nofollow" target="_blank"><div class="js ab dw"><div class="jt ab ju cl cj jv"><h2 class="bd hj fi z dy jw ea eb jx ed ef hh bi translated">在Intellij和VSCode上启用ESLint</h2><div class="jy l"><h3 class="bd b fi z dy jw ea eb jx ed ef dx translated">ESLint是一个非常酷的工具，可以帮你清理Javascript代码！但是，当您在IDE上进行设计时，例如…</h3></div><div class="jz l"><p class="bd b fp z dy jw ea eb jx ed ef dx translated">开发到</p></div></div><div class="ka l"><div class="nz l kc kd ke ka kf io jr"/></div></div></a></div><h1 id="ee57" class="la lb hi bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">使用React设置更少</h1><p id="a71a" class="pw-post-body-paragraph iq ir hi is b it ly iv iw ix lz iz ja jb ma jd je jf mb jh ji jj mc jl jm jn hb bi translated">Less是CSS的向后兼容语言扩展。</p><p id="7402" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">供进一步参考:<a class="ae ku" href="https://lesscss.org/" rel="noopener ugc nofollow" target="_blank">https://lesscss.org/</a></p><p id="1b6e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们安装必要的软件包，</p><pre class="md me mf mg fd mh kj mi mj aw mk bi"><span id="6b1b" class="ml lb hi kj b fi mm mn l mo mp">npm install --save-dev less less-loader css-loader style-loader</span></pre><p id="1d5c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">请检查您的webpack配置<code class="du kg kh ki kj b">module</code>属性，如下所示(我们之前配置了较少的属性):</p><pre class="md me mf mg fd mh kj mi mj aw mk bi"><span id="94de" class="ml lb hi kj b fi mm mn l mo mp">module : {<br/>   rules : [<br/>      {<br/>         test    : /\.(js|jsx)$/,<br/>         exclude : /node_modules/,<br/>         use     : [ 'babel-loader', 'eslint-loader' ],<br/>      },<br/>      {<br/>         test : /\.less$/,<br/>         use  : [<br/>            'style-loader',<br/>            'css-loader',<br/>            'less-loader',<br/>         ],<br/>      },<br/>   ],<br/>},</span></pre><p id="49ce" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">最后你的包<code class="du kg kh ki kj b">package.json</code>文件脚本看起来，</p><pre class="md me mf mg fd mh kj mi mj aw mk bi"><span id="4197" class="ml lb hi kj b fi mm mn l mo mp">"scripts": {<br/>  "start": "webpack serve --mode development --env=development",<br/>  "lint": "eslint --fix --ext .js,.jsx .",<br/>  "test": "echo \"Error: no test specified\" &amp;&amp; exit 1",<br/>  "build": "webpack --mode production --env=production"<br/>},</span></pre><h1 id="f88b" class="la lb hi bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">结论</h1><p id="ba1b" class="pw-post-body-paragraph iq ir hi is b it ly iv iw ix lz iz ja jb ma jd je jf mb jh ji jj mc jl jm jn hb bi translated">我们刚刚创建了自己的React项目样板。不使用<code class="du kg kh ki kj b">create-react-app</code>而构建的全功能React应用。我希望这至少有助于澄清在您已经构建的React应用程序下正在发生的一些事情。</p><p id="daca" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">源代码:<a class="ae ku" href="https://github.com/ShalithaCell/React-Custom-BoilerPlate" rel="noopener ugc nofollow" target="_blank">https://github.com/ShalithaCell/React-Custom-BoilerPlate</a></p></div></div>    
</body>
</html>