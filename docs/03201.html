<html>
<head>
<title>What is the most dangerous neighborhood in NYC? Quick analysis of the NYPD shooting dataset with R</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">纽约最危险的街区是哪里？用R快速分析NYPD射击数据集</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/nypd-shooting-database-analysis-with-r-what-is-the-most-dangerous-neighborhood-in-nyc-e69278190902?source=collection_archive---------11-----------------------#2021-06-03">https://medium.com/geekculture/nypd-shooting-database-analysis-with-r-what-is-the-most-dangerous-neighborhood-in-nyc-e69278190902?source=collection_archive---------11-----------------------#2021-06-03</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="ebfb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你可能已经听说了这个令人悲伤的消息:2020年，纽约市的枪击案呈上升趋势，并将继续飙升。在这种背景下，我试图用基本的R语言和数据可视化来确定纽约市最危险的街区。</p><p id="e7e3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我使用了<a class="ae jd" href="https://data.cityofnewyork.us/Public-Safety/NYPD-Shooting-Incident-Data-Historic-/833y-fsy8" rel="noopener ugc nofollow" target="_blank"> NYPD枪击事件数据集</a>，分析的时间段为2006年1月1日至2019年12月31日。</p><p id="624e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我用以下内容丰富了数据集:</p><ul class=""><li id="a3bb" class="je jf hi ih b ii ij im in iq jg iu jh iy ji jc jj jk jl jm bi translated"><strong class="ih hj">邮政编码</strong>基于事件的经度和纬度(感谢谷歌地图api每月200美元的免费使用)</li><li id="98dc" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated"><strong class="ih hj"> 2020年人口</strong>来自<a class="ae jd" href="https://data.beta.nyc/" rel="noopener ugc nofollow" target="_blank"> Beta NYC </a>的邮政编码<strong class="ih hj"> </strong>(对于非美国读者，这里是一个<a class="ae jd" href="https://en.m.wikipedia.org/wiki/ZIP_Code" rel="noopener ugc nofollow" target="_blank">邮政编码</a>的定义)。</li></ul><p id="412b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于任何对与分析相关的编码部分感兴趣的人来说，这里是<a class="ae jd" href="https://github.com/mcsachounet/NYPD_shooting_analysis" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="f6f2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于那些想要快速回答的人，你可以直接跳到结论(#4)。</p><p id="eeee" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">1/自治区级</p><p id="441d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们先来看看区一级的数字。</p><p id="7faa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面是按日期排列的枪击事件的密度图(一段时间内直方图的简单变化，这里是关于它的<a class="ae jd" rel="noopener" href="/@analyttica/density-plots-8b2600b87db1#:~:text=Density%20plots%20are%20used%20to%20observe%20the%20distribution%20of%20a,are%20a%20variation%20of%20Histograms.">帖子</a>):</p><p id="bbfc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="js">dens _ plot&lt;-shootings %&gt;% gg plot(AES(x = occure _ DATE，y =..数数..，col=BORO)) +geom_density() </em></p><figure class="ju jv jw jx fd jy er es paragraph-image"><div class="er es jt"><img src="../Images/35e1f9cd835604d40756480a2eac9158.png" data-original-src="https://miro.medium.com/v2/resize:fit:1184/format:webp/1*SeDj1l8PmUcC_7HDcGP24w.png"/></div></figure><p id="481e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们很容易注意到，布鲁克林是这一时期枪击案数量最多的区。</p><p id="3169" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">无需关注时间变量，为了获得更多可见性，我们可以简单地制作所有事件的直方图，然后得到确认:</p><p id="5057" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="js">total _ histo&lt;shoots %&gt;% gg plot(AES(x = forcats::FCT _ infreq(BORO))+geom _ bar()</em></p><figure class="ju jv jw jx fd jy er es paragraph-image"><div class="er es kb"><img src="../Images/3c9b43b82adb669aed47463199b4e043.png" data-original-src="https://miro.medium.com/v2/resize:fit:1232/format:webp/1*BEiy1DFzMmzC7XfNrTy3HQ.png"/></div></figure><p id="dc1e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">数据集包含每个事件的纬度和经度。根据这些信息做一个散点图，我们就有了这一时期枪击事件的地图:</p><p id="9e61" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="js">地图&lt;-shootings %&gt;% gg plot(AES(x =经度，y =纬度，col=BORO))+geom_point() </em></p><figure class="ju jv jw jx fd jy er es paragraph-image"><div class="er es kb"><img src="../Images/3dd4294c6f4c6af15997f2eee0edf666.png" data-original-src="https://miro.medium.com/v2/resize:fit:1232/format:webp/1*vAxwdsT29bnEA-F8Ie9QfQ.png"/></div></figure><p id="90f8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2邻居级别</p><p id="c366" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们已经确定布鲁克林是2006年至2019年间枪击案数量最多的区。现在让我们放大到这个区，看看附近的情况。</p><p id="6b10" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">根据下面的地图，我们观察到西边的密度更高，使得这个区域更加“拍摄敏感”:</p><p id="317e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="js">布鲁克林_地图&lt;拍摄%&gt;%滤镜(BORO== "布鲁克林")%&gt;% gg plot(AES(x =经度，y =纬度))+geom_point() </em></p><figure class="ju jv jw jx fd jy er es paragraph-image"><div class="er es kb"><img src="../Images/35306a23c07ed0673b2245793ba2c095.png" data-original-src="https://miro.medium.com/v2/resize:fit:1232/format:webp/1*V6YJyPR6qo0c-_quN7m5mQ.png"/></div></figure><p id="53b7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这些点给了我们一个提示，但为了更准确，让我们使用邮政编码信息，并确定在此期间出现次数最多的5个邮政编码。</p><p id="467a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="js">#看排名前5的ZIP<br/>group _ ZIP&lt;-shootings %&gt;% group _ by(ZIP)%&gt;% tally()<br/>top _ 5 _ ZIP&lt;-group _ ZIP %&gt;% arrange(desc(n))%&gt;% head(n = 5)<br/># plot this top 5<br/>top _ 5 _ histo&lt;-shootings %&gt;% filter(ZIP % in % top _ 5 _ ZIP $中</em></p><figure class="ju jv jw jx fd jy er es paragraph-image"><div class="er es kb"><img src="../Images/129843081c6536fb87a4eff2d2b1b0c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1232/format:webp/1*rhxEgNQEjzcArNH1qV7viQ.png"/></div></figure><p id="be2f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这5个拉链是布鲁克林区的一部分。我们现在可以用高亮显示的区域绘制一张地图。</p><p id="f8d7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="js">BROOKLYN _ map _ top _ 3&lt;-shootings %&gt;% filter(BORO = = " BROOKLYN ")%&gt;%<br/>gg plot(AES(x =经度，y =纬度，col = if else(ZIP % in % top_3_zip$ZIP，top _ 3 _ ZIP $ ZIP，"其他"))+ <br/> geom_point() </em></p><figure class="ju jv jw jx fd jy er es paragraph-image"><div class="er es kb"><img src="../Images/ec15e9941343e793edcfc82ad18b4cb6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1232/format:webp/1*xdyaT96IjoT1z4TDyt1Rvw.png"/></div></figure><ul class=""><li id="7ccb" class="je jf hi ih b ii ij im in iq jg iu jh iy ji jc jj jk jl jm bi translated">11212 =布鲁克林布朗斯维尔</li><li id="166c" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">11207 =布鲁克林，东布鲁克林</li><li id="0591" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">11233 =布鲁克林海洋山</li><li id="dc91" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">11221=布鲁克林布什维克</li><li id="f91d" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">11226=布鲁克林弗拉特布什</li></ul><p id="97e7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3考虑到人口</p><p id="94c2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上述分析仅考虑了每个ZIP的出现次数。从这些数字的角度来看待人口更有意义。</p><p id="50e2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了澄清，我们在下面看到，枪击事件的总发生率和邮政编码的人口之间没有很强的相关性。</p><p id="aa7a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="js">group _ zip _ pop _ plot&lt;-group _ zip _ pop %&gt;%<br/>gg plot(AES(POPULATION，n，col=BORO))+geom_point() </em></p><p id="24ec" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">(我使用对数标度来响应向极端值的偏斜)</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div class="er es kb"><img src="../Images/fc5e2617d81c72c5fe9d225d46db2995.png" data-original-src="https://miro.medium.com/v2/resize:fit:1232/format:webp/1*Fvmp4UjOeIbb_5YP-UqM-Q.png"/></div></figure><p id="60fb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">事实上，我们在散点图ZIP中观察到很大的分散。然而，布朗克斯区和布鲁克林区的枪击案数量都很高，人口也很多(我们在地块的右上方看到一片yucki/green cloud)。</p><p id="95a1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然而，即使相关性不显著，我们显然也需要考虑人群来确定该区域的危险。</p><p id="5e49" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为此，让我们引入一个ZIP射速(每10，0 00名居民的年射速):</p><p id="0a7d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="js">#将比率添加到df<br/>group _ zip _ shooting _ rate&lt;-group _ zip _ pop %&gt;% mutate(shooting _ rate = as . numeric(n)/as . numeric(POPULATION)/14 * 10000)</em></p><p id="ed2d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="js"># plot top 5<br/>top _ 5 _ histo _ shooting _ rate _ plot&lt;group _ ZIP _ shooting _ rate %&gt;% arrange(desc(shooting _ rate))%&gt;% head(5)%&gt;% gg plot(AES(x = reorder(ZIP，-shooting_rate)，y = shooting_rate，fill = BORO))+geom _ bar(stat = " identity ")</em></p><figure class="ju jv jw jx fd jy er es paragraph-image"><div class="er es kb"><img src="../Images/26db56293e9cc935c317deae55a776ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1232/format:webp/1*dq9QZ15RvyJ_BH2mYwR6wA.png"/></div></figure><p id="eccc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这五大“危险拉链”的构成已经发生了变化。你可以注意到布朗克斯的拉链现在是它的一部分。</p><p id="8929" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以通过凶杀案信息来看看枪击案的总数，从而了解凶杀案的比例:</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div class="er es kb"><img src="../Images/f54d799d852f13a0e67acca961684990.png" data-original-src="https://miro.medium.com/v2/resize:fit:1232/format:webp/1*oXRviHsjDSPTBEbfqF_ASw.png"/></div></figure><p id="932e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你注意到布朗克斯区10459(图中的5号)比11216(4号)包含更多的谋杀案。</p><p id="d220" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">4结论</p><p id="ec13" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以下是根据NYPD数据库，2006-2019年期间发生最高<em class="js">枪击事件/ 2020年人口</em>比率<em class="js"/>的5个“最危险”拉链<em class="js"> ( </em>):</p><ul class=""><li id="cfe6" class="je jf hi ih b ii ij im in iq jg iu jh iy ji jc jj jk jl jm bi translated">布鲁克林布朗斯维尔1号(11212)</li><li id="54df" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">布鲁克林区海洋山2号(11233)</li><li id="d47f" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">布鲁克林东布鲁克林区3号(11207)</li><li id="4a14" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">布鲁克林皇冠高地4号(11216)</li><li id="fa03" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">布朗克斯区朗伍德5号(10459)</li></ul><figure class="ju jv jw jx fd jy er es paragraph-image"><div class="er es kc"><img src="../Images/fd37ee5ba62afc29bd9f62d883c54d1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:740/format:webp/1*LWM_plOuHer7gKjHh_3Uiw.png"/></div></figure><figure class="ju jv jw jx fd jy er es paragraph-image"><div class="er es kb"><img src="../Images/769b8a4d76671ce0ff72c1ec9f7af7a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1232/format:webp/1*bo1v5q_HxPzUiJKaxqbovg.png"/></div></figure><figure class="ju jv jw jx fd jy er es paragraph-image"><div class="er es kb"><img src="../Images/4ec0841cf7d930534465d54553b8a719.png" data-original-src="https://miro.medium.com/v2/resize:fit:1232/format:webp/1*KUACMqnI-DOtyQbm_4CHnQ.png"/></div></figure></div></div>    
</body>
</html>