<html>
<head>
<title>All-in-One Social Media Page with Node JS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">带有节点JS的一体化社交媒体页面</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/all-in-one-social-media-page-with-node-js-3bfc8e953653?source=collection_archive---------24-----------------------#2021-07-05">https://medium.com/geekculture/all-in-one-social-media-page-with-node-js-3bfc8e953653?source=collection_archive---------24-----------------------#2021-07-05</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="6345" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本教程中，我们将为您和您的朋友创建一个一体化的社交媒体页面，您可以将它放在heroku上。</p><p id="e0ce" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" href="https://www.youtube.com/watch?v=kCfYysjpI2c" rel="noopener ugc nofollow" target="_blank">https://www.youtube.com/watch?v=kCfYysjpI2c</a></p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/362c4e3a438160db430a2d7cbae3b205.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*es2KLAepqbeAG4xG.png"/></div></div></figure><h2 id="e470" class="jq jr hi bd js jt ju jv jw jx jy jz ka iq kb kc kd iu ke kf kg iy kh ki kj kk bi translated">我们需要什么</h2><ul class=""><li id="43bd" class="kl km hi ih b ii kn im ko iq kp iu kq iy kr jc ks kt ku kv bi translated">NodeJS和NPM已安装</li><li id="77ca" class="kl km hi ih b ii kw im kx iq ky iu kz iy la jc ks kt ku kv bi translated">快递和EJS</li><li id="9265" class="kl km hi ih b ii kw im kx iq ky iu kz iy la jc ks kt ku kv bi translated">你的社交媒体账户</li></ul><h2 id="2904" class="jq jr hi bd js jt ju jv jw jx jy jz ka iq kb kc kd iu ke kf kg iy kh ki kj kk bi translated">设置项目</h2><p id="5660" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq lb is it iu lc iw ix iy ld ja jb jc hb bi translated">首先创建一个名为<code class="du le lf lg lh b">all_in_one_social_media</code>的文件夹，并在那里用<code class="du le lf lg lh b">npm init</code>初始化节点项目。现在打开这个文件夹，用<code class="du le lf lg lh b">npm i express ejs</code>安装<code class="du le lf lg lh b">express</code>和<code class="du le lf lg lh b">ejs</code>模块。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es li"><img src="../Images/d4df9a88f89bdbe5d9ba3f38c67ef5a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:546/format:webp/0*sB9b5XNqi1S9QtTE.png"/></div></figure><p id="6ddd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">打开Visual Studio代码，让我们创建<code class="du le lf lg lh b">index.js</code>文件并创建<code class="du le lf lg lh b">views</code>和<code class="du le lf lg lh b">public</code>目录。</p><ul class=""><li id="83e9" class="kl km hi ih b ii ij im in iq lj iu lk iy ll jc ks kt ku kv bi translated">目录将保存您的静态文件，如html文件所需的<code class="du le lf lg lh b">css</code>和<code class="du le lf lg lh b">js</code>文件</li><li id="beec" class="kl km hi ih b ii kw im kx iq ky iu kz iy la jc ks kt ku kv bi translated"><code class="du le lf lg lh b">views</code>目录将保存您想要在服务器上渲染的ejs文件。</li></ul><p id="cbe1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">打开<code class="du le lf lg lh b">package.json</code>文件并创建两个脚本。</p><pre class="jf jg jh ji fd lm lh ln lo aw lp bi"><span id="e14b" class="jq jr hi lh b fi lq lr l ls lt">{<br/>  "name": "social_media_all_in_one",<br/>  "version": "1.0.0",<br/>  "description": "",<br/>  "main": "index.js",<br/>  "scripts": {<br/>    "start": "node .",<br/>    "dev": "nodemon ."<br/>  },<br/>  "keywords": [],<br/>  "author": "Naman Baranwal",<br/>  "license": "ISC",<br/>  "dependencies": {<br/>    "ejs": "^3.1.6",<br/>    "express": "^4.17.1"<br/>  }<br/>}</span></pre><h2 id="5d8c" class="jq jr hi bd js jt ju jv jw jx jy jz ka iq kb kc kd iu ke kf kg iy kh ki kj kk bi translated">创建服务器</h2><p id="0dcc" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq lb is it iu lc iw ix iy ld ja jb jc hb bi translated">在代码编辑器或IDE中打开<code class="du le lf lg lh b">index.js</code>文件，并键入以下代码。</p><pre class="jf jg jh ji fd lm lh ln lo aw lp bi"><span id="ce0e" class="jq jr hi lh b fi lq lr l ls lt">const express = require('express');<br/>const app = express();<br/>const fs = require('fs');</span><span id="f1f3" class="jq jr hi lh b fi lu lr l ls lt">const PORT = process.env.PORT || 3000;</span><span id="7704" class="jq jr hi lh b fi lu lr l ls lt">app.set('view engine', 'ejs');<br/>app.use(express.static('public'));<br/></span><span id="a056" class="jq jr hi lh b fi lu lr l ls lt">app.get('*', (req, res) =&gt; {<br/>    return res.status(404).send("&lt;h1&gt;404 Page not Found!&lt;/h1&gt;");<br/>});</span><span id="4e2a" class="jq jr hi lh b fi lu lr l ls lt">app.listen(PORT, () =&gt; {<br/>    console.log(`Server is listening on http://localhost:${PORT}/`);<br/>});</span></pre><p id="6357" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你一切都做对了。打开项目中的<code class="du le lf lg lh b">powershell</code>或<code class="du le lf lg lh b">Terminal</code>并输入<code class="du le lf lg lh b">npm run dev</code>。现在打开浏览器，将它粘贴到URL中。<code class="du le lf lg lh b"><a class="ae jd" href="http://localhost:3000." rel="noopener ugc nofollow" target="_blank">http://localhost:3000</a></code> <a class="ae jd" href="http://localhost:3000." rel="noopener ugc nofollow" target="_blank">。</a></p><h2 id="57b3" class="jq jr hi bd js jt ju jv jw jx jy jz ka iq kb kc kd iu ke kf kg iy kh ki kj kk bi translated">创建视图</h2><p id="117f" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq lb is it iu lc iw ix iy ld ja jb jc hb bi translated">打开<code class="du le lf lg lh b">views</code>目录，创建名为<code class="du le lf lg lh b">index.ejs</code>的文件。这将包含所有的网站前端。键入以下代码。</p><pre class="jf jg jh ji fd lm lh ln lo aw lp bi"><span id="9535" class="jq jr hi lh b fi lq lr l ls lt">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>	&lt;head&gt;<br/>		&lt;meta charset="UTF-8" /&gt;<br/>		&lt;meta http-equiv="X-UA-Compatible" content="IE=edge" /&gt;<br/>		&lt;meta name="viewport" content="width=device-width, initial-scale=1.0" /&gt;<br/>		&lt;title&gt;Social Media&lt;/title&gt;<br/>		&lt;link rel="stylesheet" href="/styles.css" /&gt;<br/>	&lt;/head&gt;<br/>	&lt;body&gt;<br/>		&lt;div class="container"&gt;<br/>			&lt;div class="avatar"&gt;<br/>                <br/>			&lt;/div&gt;<br/>			&lt;div class="name"&gt;&lt;/div&gt;<br/>			&lt;div class="links"&gt;<br/>                <br/>			&lt;/div&gt;<br/>		&lt;/div&gt;<br/>	&lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="02b1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在打开<code class="du le lf lg lh b">public</code>目录，创建名为<code class="du le lf lg lh b">styles.css</code>的文件，并输入以下代码。</p><pre class="jf jg jh ji fd lm lh ln lo aw lp bi"><span id="687f" class="jq jr hi lh b fi lq lr l ls lt">@import url("https://fonts.googleapis.com/css2?family=Montserrat:wght@800;900&amp;display=swap");</span><span id="a48a" class="jq jr hi lh b fi lu lr l ls lt">body {<br/>	margin: 0;<br/>    padding: 0;<br/>    background: radial-gradient(rgb(0, 174, 255), cyan);<br/>	font-family: "Montserrat", sans-serif;<br/>    user-select: none;<br/>    height: 100%;<br/>}</span><span id="c68a" class="jq jr hi lh b fi lu lr l ls lt">.container {<br/>    width: 40%;<br/>	margin: 5% auto;<br/>	display: grid;<br/>	place-items: center;<br/>    background: white;<br/>    border-radius: 15px;<br/>    padding: 2%;<br/>}</span><span id="11a3" class="jq jr hi lh b fi lu lr l ls lt">.avatar img {<br/>	height: 150px;<br/>	width: 150px;<br/>	border-radius: 50%;<br/>    border: 5px rgb(172, 172, 172) solid;<br/>}</span><span id="90af" class="jq jr hi lh b fi lu lr l ls lt">.name {<br/>	font-weight: 900;<br/>	font-size: 45px;<br/>	color: rgb(99, 99, 99);<br/>    margin-bottom: 5%;<br/>}</span><span id="c15b" class="jq jr hi lh b fi lu lr l ls lt">.links {<br/>	display: flex;<br/>    flex-direction: column;<br/>    align-items: center;<br/>    justify-content: center;<br/>    width: 100%;<br/>}</span><span id="7995" class="jq jr hi lh b fi lu lr l ls lt">.links .link{<br/>    width: 50%;<br/>    height: 50px;<br/>    background: white;<br/>    color: rgb(71, 71, 71);<br/>    border-radius: 15px;<br/>    margin: 15px;<br/>    display: grid;<br/>    place-items: center;<br/>    border: 1px solid black;<br/>    transition-duration: 0.2s;<br/>    cursor: pointer;<br/>    text-decoration: none;<br/>}</span><span id="c09f" class="jq jr hi lh b fi lu lr l ls lt">.link:hover{<br/>    background: blue;<br/>    color: white;<br/>    border: 1px solid blue;<br/>}</span><span id="f22f" class="jq jr hi lh b fi lu lr l ls lt">@media screen and (max-width: 768px) {<br/>    .container{<br/>        width: 75%;<br/>    }<br/>}</span></pre><h2 id="261f" class="jq jr hi bd js jt ju jv jw jx jy jz ka iq kb kc kd iu ke kf kg iy kh ki kj kk bi translated">为用户建立链接</h2><p id="878f" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq lb is it iu lc iw ix iy ld ja jb jc hb bi translated">让我们再次打开<code class="du le lf lg lh b">index.js</code>并创建两条路线。<code class="du le lf lg lh b">/</code>和<code class="du le lf lg lh b">/:username</code>如下图。</p><pre class="jf jg jh ji fd lm lh ln lo aw lp bi"><span id="6ea6" class="jq jr hi lh b fi lq lr l ls lt">const express = require('express');<br/>const app = express();<br/>const fs = require('fs');</span><span id="67d2" class="jq jr hi lh b fi lu lr l ls lt">const PORT = process.env.PORT || 3000;</span><span id="fa3d" class="jq jr hi lh b fi lu lr l ls lt">app.set('view engine', 'ejs');<br/>app.use(express.static('public'));</span><span id="2be6" class="jq jr hi lh b fi lu lr l ls lt">app.get('/', (req, res) =&gt; {<br/>    let users = fs.readFileSync('./users.json').toString('utf-8');<br/>    users = JSON.parse(users);</span><span id="ba66" class="jq jr hi lh b fi lu lr l ls lt">    return res.render('index', {<br/>        "user": users["prgmaz"],<br/>    });<br/>});</span><span id="8554" class="jq jr hi lh b fi lu lr l ls lt">app.get('/:username', (req, res) =&gt; {<br/>    let users = fs.readFileSync('./users.json').toString('utf-8');<br/>    users = JSON.parse(users);</span><span id="aec6" class="jq jr hi lh b fi lu lr l ls lt">    return res.render('index', {<br/>        "user": users[req.params.username],<br/>    });<br/>});<br/></span><span id="15c2" class="jq jr hi lh b fi lu lr l ls lt">app.get('*', (req, res) =&gt; {<br/>    return res.status(404).send("&lt;h1&gt;404 Page not Found!&lt;/h1&gt;");<br/>});</span><span id="d481" class="jq jr hi lh b fi lu lr l ls lt">app.listen(PORT, () =&gt; {<br/>    console.log(`Server is listening on http://localhost:${PORT}/`);<br/>});</span></pre><p id="0561" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在打开<code class="du le lf lg lh b">index.ejs</code>并显示你传递给你的用户视图。</p><pre class="jf jg jh ji fd lm lh ln lo aw lp bi"><span id="79a5" class="jq jr hi lh b fi lq lr l ls lt">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>	&lt;head&gt;<br/>		&lt;meta charset="UTF-8" /&gt;<br/>		&lt;meta http-equiv="X-UA-Compatible" content="IE=edge" /&gt;<br/>		&lt;meta name="viewport" content="width=device-width, initial-scale=1.0" /&gt;<br/>		&lt;title&gt;Social Media&lt;/title&gt;<br/>		&lt;link rel="stylesheet" href="/styles.css" /&gt;<br/>	&lt;/head&gt;<br/>	&lt;body&gt;<br/>		&lt;div class="container"&gt;<br/>			&lt;div class="avatar"&gt;<br/>                &lt;img src="&lt;%= user.avatar %&gt;" alt="Avatar"&gt;<br/>			&lt;/div&gt;<br/>			&lt;div class="name"&gt;&lt;%= user.name %&gt;&lt;/div&gt;<br/>			&lt;div class="links"&gt;<br/>                &lt;% Object.keys(user.links).forEach((key) =&gt; { %&gt;<br/>                    &lt;a class="link" target="_blank" href="&lt;%= user.links[key] %&gt;"&gt;<br/>                        &lt;%= key %&gt;<br/>                    &lt;/a&gt;<br/>                &lt;% }) %&gt;<br/>			&lt;/div&gt;<br/>		&lt;/div&gt;<br/>	&lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="907e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你的项目完成了。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es lv"><img src="../Images/2574a5794a0ce53ac62a039656917106.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ypTCJz4oXFRnf7WT.png"/></div></div></figure><p id="83b3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" href="https://github.com/Programmer101N/all-in-one-social-media" rel="noopener ugc nofollow" target="_blank">链接到项目</a></p><p id="051d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" href="https://wlo.link/@prgmaz" rel="noopener ugc nofollow" target="_blank">在社交媒体上关注我</a></p></div></div>    
</body>
</html>