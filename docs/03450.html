<html>
<head>
<title>Docker Compose Alternatives for Kubernetes: Tilt</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Docker为Kubernetes撰写替代方案:Tilt</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/docker-compose-alternatives-for-kubernetes-tilt-d3b89176f4ae?source=collection_archive---------28-----------------------#2021-06-08">https://medium.com/geekculture/docker-compose-alternatives-for-kubernetes-tilt-d3b89176f4ae?source=collection_archive---------28-----------------------#2021-06-08</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="877f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">里奇·巴勒斯</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/d1d759c9d5a7cf591a530d77944f6ced.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sR7viHwIWqUIVeHOcFjnTQ.jpeg"/></div></div></figure><p id="e532" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">许多开发在Kubernetes上运行的应用程序的工程师使用Docker Compose用于他们的本地环境，但是有许多很好的替代方案可以使针对Kubernetes集群的开发变得快速而简单。<a class="ae jp" href="https://tilt.dev/" rel="noopener ugc nofollow" target="_blank"> Tilt </a>是一款开源工具，由Tilt团队开发，用于开发Kubernetes的工作流程。该领域的其他工具包括由谷歌创建的<a class="ae jp" href="https://skaffold.dev/" rel="noopener ugc nofollow" target="_blank"> Skaffold </a>，以及由Loft Labs创建的<a class="ae jp" href="https://devspace.sh/" rel="noopener ugc nofollow" target="_blank"> DevSpace </a>。我在Loft Labs工作，开发人员的工作效率是我的一大兴趣，所以我想看看Tilt能提供什么。</p><h1 id="5096" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">装置</h1><p id="b3cd" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">Tilt的安装取决于您的平台。你可以在这里找到<a class="ae jp" href="https://docs.tilt.dev/install.html" rel="noopener ugc nofollow" target="_blank">的说明</a>。我在Mac上工作，这个curl命令是推荐的安装方式:</p><pre class="je jf jg jh fd kt ku kv kw aw kx bi"><span id="da8c" class="ky jr hi ku b fi kz la l lb lc">curl -fsSL https://raw.githubusercontent.com/tilt-dev/tilt/master/scripts/install.sh | bash</span></pre><p id="3302" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我用家酿和倾斜安装是相当光滑。安装人员为tilt添加了一个家酿木桶，然后从那里安装了Tilt命令行界面(CLI)。我查看了安装脚本，它检测是否有自制软件，如果没有，就下载一个tarball并以这种方式安装二进制文件。还有Linux和Windows的安装说明。</p><h1 id="41a5" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">倾斜文件</h1><p id="e4a0" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">使用名为Tiltfile的文件配置Tilt，该文件放在项目的根目录下。Tiltfile可以像下面这样简单(来自文档):</p><pre class="je jf jg jh fd kt ku kv kw aw kx bi"><span id="298c" class="ky jr hi ku b fi kz la l lb lc">docker_build('example-html-image', '.')<br/>k8s_yaml('kubernetes.yaml')<br/>k8s_resource('example-html', port_forwards=8000)</span></pre><p id="0bb8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">或者可以复杂得多。</p><p id="41f7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Tiltfiles是用一种叫做Starlark的语言编写的，它的语法受到Python的启发。如果你曾经接触过Bazel，Starlark就是它使用的配置语言。您可以使用内置函数，就像上面Tiltfile中的例子一样，您也可以加入一些编程逻辑。这里有一个<a class="ae jp" href="https://docs.tilt.dev/api.html" rel="noopener ugc nofollow" target="_blank"> Tiltfile API的指南</a>。</p><p id="2ade" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我用Tilt的<a class="ae jp" href="https://docs.tilt.dev/example_static_html.html" rel="noopener ugc nofollow" target="_blank">例子Go项目</a>入门。Go非常适合评估这些工具，因为Go项目是可移植和可编译的。</p><h1 id="efa8" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">CLI和Web用户界面</h1><p id="475b" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">一旦创建了Tiltfile并准备好进行开发，第一步就是运行CLI命令:</p><p id="4c5c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">运行“向上倾斜”后，按空格键打开倾斜网页界面。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ld"><img src="../Images/563c6b61b9fefb810ddbe22f0cf734db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K4samxCq16yCzoDmptdyPQ.png"/></div></div></figure><p id="b026" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">UI中列出的资源代表了Tilt正在管理的东西，包括Tiltfile。您可以钻取资源并查看更多详细信息。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ld"><img src="../Images/e3a0e4ea3adf913054bb65c71d76bdee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ehZjztH7tgZiOqAdhprHUg.png"/></div></div></figure><p id="df5d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">实时重载特性，有时被其他工具称为热重载，是这个领域中项目的真正魅力所在。Tilt监视Tiltfile和其他托管资源，当它看到它们发生变化时，它会自动重建和部署那些需要更新的资源。Tilt可以通过构建和部署新的容器来做到这一点，但实时重载允许应用程序在已经运行的容器中更新。实时重载比每次都必须构建/部署新的容器要快得多，而且它确保了代码的最新版本总是在运行。</p><p id="7fba" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你想了解更多细节，艾伦·科贝斯(Ellen Korbes)有一个很棒的视频，解释了<a class="ae jp" href="https://docs.tilt.dev/controlloop.html" rel="noopener ugc nofollow" target="_blank">倾斜的控制回路</a>。</p><h1 id="f3f3" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">展开性</h1><p id="c743" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">你可以通过编写<a class="ae jp" href="https://docs.tilt.dev/extensions.html" rel="noopener ugc nofollow" target="_blank">自定义扩展</a>来扩展Tilt，这些扩展可以包含在你的Tilt文件中，或者使用Tilt社区中人们共享的扩展。扩展也是用Starlark写的，你也可以为它们写测试。你可以像内置函数一样在Tiltfile中使用扩展，并且有一个人们贡献的扩展的<a class="ae jp" href="https://github.com/tilt-dev/tilt-extensions" rel="noopener ugc nofollow" target="_blank"> GitHub repo </a>。</p><p id="b67c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">扩展是与您在CI流程中使用的工具集成的一个很好的方式，社区报告包括Circle CI和Snyk等工具的扩展。</p><h1 id="b95e" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">结论</h1><p id="9c68" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">Tilt是一个非常有用的工作流工具，可以帮助人们获得关于他们在Kubernetes集群中运行的应用程序的即时反馈。Tilt团队在UX上花了很多心思，我对此表示感谢。</p><p id="7c41" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您正在构建在Kubernetes集群中运行的应用程序，您应该看看这个领域的工具，看看哪个最适合您的用例。几年前我在Puppet工作，有一次我在一次会议上和《厨师》的Nathen Harvey交谈。有人走上前问Nathen，他们是否应该使用Chef、Puppet或Ansible来管理他们的基础架构。娜坦说:“是的。”</p><p id="8fa5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我觉得这类工具也是一样的。现场重装，或热重装，无论你怎么称呼它，都是一个彻底的游戏改变者。当你点击保存时，看到你的应用程序实时更新是很棒的，这应该会让你更有效率。</p><p id="87cf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我将为使用Kubernetes的团队写更多关于其他开发人员生产力工具的文章，敬请关注。</p></div><div class="ab cl le lf gp lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="hb hc hd he hf"><p id="c404" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="ll">原发布于</em><a class="ae jp" href="https://loft.sh/blog/docker-compose-alternatives-for-kubernetes-tilt/" rel="noopener ugc nofollow" target="_blank"><em class="ll">https://loft . sh</em></a><em class="ll">。</em></p></div></div>    
</body>
</html>