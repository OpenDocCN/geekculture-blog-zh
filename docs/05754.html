<html>
<head>
<title>What You See Is What You Get | NextJs</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">所见即所得| NextJs</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/what-you-see-is-what-you-get-nextjs-7523dfe01bd5?source=collection_archive---------6-----------------------#2021-07-29">https://medium.com/geekculture/what-you-see-is-what-you-get-nextjs-7523dfe01bd5?source=collection_archive---------6-----------------------#2021-07-29</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="8307" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">等一下，你可能不明白我们到底在说什么。你在想这个标题没有任何意义。不要走开，静观其变，因为我们将学习一个非常有用的主题，将最终用户界面带到下一个级别。</p><h2 id="541c" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated">介绍</h2><p id="ce3b" class="pw-post-body-paragraph if ig hi ih b ii jy ik il im jz io ip iq ka is it iu kb iw ix iy kc ja jb jc hb bi translated">WYSIWYG代表“所见即所得”是一个丰富的文本编辑器。而且，正如其名称所暗示的那样，当涉及到文本编辑器时，WYSIWYG UI可以让您在编辑过程中看到您的内容，就像它在您的站点上实时显示一样。你必须熟悉微软Word，谷歌文档等。这些都是富文本编辑器的很好的例子。</p><blockquote class="kd ke kf"><p id="56f8" class="if ig kg ih b ii ij ik il im in io ip kh ir is it ki iv iw ix kj iz ja jb jc hb bi translated">所见即所得意味着一个<a class="ae kk" href="https://en.wikipedia.org/wiki/User_interface" rel="noopener ugc nofollow" target="_blank">用户界面</a>，允许用户在创建文档时查看与最终结果非常相似的内容。</p></blockquote><figure class="km kn ko kp fd kq er es paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="er es kl"><img src="../Images/7ddd4573a14a0412028e0b41802903f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Tep5ZkcEbgR3hXtK4W9oHQ.png"/></div></div><figcaption class="kx ky et er es kz la bd b be z dx">Rich text editor (WYSIWYG)</figcaption></figure><p id="646f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一般来说，我们开发人员在我们的博客网站上使用这种技术。为我们的最终用户提供一个成熟的交互式编辑器是有意义的。用户既可以写，也可以预览观众看到的效果。它改善了用户体验。</p><p id="c9ac" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有很多富文本编辑器。其中一些是<a class="ae kk" href="https://ckeditor.com/ckeditor-5/" rel="noopener ugc nofollow" target="_blank"> CKEditor 5、</a> <a class="ae kk" href="https://editorjs.io/" rel="noopener ugc nofollow" target="_blank"> Editor。Js </a>、<a class="ae kk" href="https://yabwe.github.io/medium-editor/" rel="noopener ugc nofollow" target="_blank"> MediumEditor </a>等等。今天，我们将讨论CKEditor 5的用例及实现。让我们开始吧…</p><h2 id="a0eb" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated">cke editor 5—一个富文本编辑器</h2><p id="de5c" class="pw-post-body-paragraph if ig hi ih b ii jy ik il im jz io ip iq ka is it iu kb iw ix iy kc ja jb jc hb bi translated">CKEditor有一些可用的构建版本。每个“构建”都提供了一种具有一组特性的编辑器。但是，我们将在我们的项目中实现<a class="ae kk" href="https://ckeditor.com/ckeditor-5/demo/#classic" rel="noopener ugc nofollow" target="_blank">“经典构建”</a>。先说第一件事，假设我们有一个nextJs app，如果没有，可以先按照<a class="ae kk" href="https://nextjs.org/docs/getting-started" rel="noopener ugc nofollow" target="_blank"> Next.js文档</a>。</p><p id="4003" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">到目前为止，我们已经初始化了我们的应用程序，移动到项目目录并在您喜欢的代码编辑器中打开应用程序。如下修改您项目层次结构(可选)。</p><figure class="km kn ko kp fd kq er es paragraph-image"><div class="er es lb"><img src="../Images/dac717fb9035855880910995d6bf5d99.png" data-original-src="https://miro.medium.com/v2/resize:fit:510/format:webp/1*0hvuo0bd-S31-O_ww5qJGQ.png"/></div><figcaption class="kx ky et er es kz la bd b be z dx">Project hierarchy</figcaption></figure><p id="3d7d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，是时候和我们的老师一起玩了。为了在我们的应用程序中初始化它，我们需要安装CKEditor 5中的两个包。首先，我们将安装它们，然后我将解释每一个软件包以及我们为什么需要它们。</p><p id="16f2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">运行下面的命令</p><pre class="km kn ko kp fd lc ld le lf aw lg bi"><span id="41be" class="jd je hi ld b fi lh li l lj lk">$ npm install --save @ckeditor/ckeditor5-react @ckeditor/ckeditor5-build-classic</span></pre><p id="c5af" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">for <a class="ae kk" href="https://github.com/azizulbappy0096/CKEditor5/blob/master/src/components/Editor.js" rel="noopener ugc nofollow" target="_blank"> Editor.js </a></p><figure class="km kn ko kp fd kq"><div class="bz dy l di"><div class="ll lm l"/></div></figure><p id="fb27" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">恭喜，我们实现了有史以来第一个富文本编辑器。但是这里发生了什么？在这里，我们的包装显示了它们的价值。CKEditor 将包装我们实际的编辑器，并运行所有的逻辑来渲染到<a class="ae kk" href="https://developer.mozilla.org/en-US/docs/Web/API/Document_Object_Model/Introduction" rel="noopener ugc nofollow" target="_blank"> DOM </a>。<a class="ae kk" href="https://www.npmjs.com/package/@ckeditor/ckeditor5-react" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj">cke editor</strong></a>接受一个必需的编辑器参数和一些其他事件处理程序。在这里，我们已经通过<strong class="ih hj"> ClassicEditor </strong>作为我们的编辑器，它来自我们之前选择的CKEditor 5。它有一些内置功能，但我们可以根据自己的喜好进行修改。从<a class="ae kk" href="https://ckeditor.com/docs/ckeditor5/latest/builds/guides/integration/configuration.html" rel="noopener ugc nofollow" target="_blank">这里</a>了解更多。</p><p id="e6ad" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">由于CKEditor延迟了将编辑器呈现到我们的web窗口的时间，所以我们为最终用户实现了一个加载屏幕。</p><p id="0e4c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们的编辑器已经准备好显示了，我们要做的最后一件事就是在<a class="ae kk" href="https://github.com/azizulbappy0096/CKEditor5/blob/master/src/pages/index.js" rel="noopener ugc nofollow" target="_blank"> index.js </a>(主页)中呈现我们的编辑器。</p><figure class="km kn ko kp fd kq"><div class="bz dy l di"><div class="ll lm l"/></div></figure><p id="4ecf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，让我们在浏览器中查看我们的应用程序。糟糕，出现了问题。有一个错误如下</p><figure class="km kn ko kp fd kq er es paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="er es ln"><img src="../Images/13259bae1016ed7c64348314d7dcc125.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M85cuivXet9VKIbqwWsKyg.png"/></div></div><figcaption class="kx ky et er es kz la bd b be z dx">Error message</figcaption></figure><p id="ce0d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">别慌，让我们深入研究一下，看看我们做错了什么。如你所知，NextJs向客户端发送了一个优化的“服务器端渲染”页面。这就是我们的问题所在。CKEditor需要一个<a class="ae kk" href="https://developer.mozilla.org/en-US/docs/Web/API/Document_Object_Model/Introduction" rel="noopener ugc nofollow" target="_blank"> DOM </a>来呈现。但是因为<a class="ae kk" href="https://developers.google.com/web/updates/2019/02/rendering-on-the-web" rel="noopener ugc nofollow" target="_blank"> SSR </a>，所以没有得到DOM，抛出错误。让我们一起解决这个问题。</p><p id="203c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我将向你展示两种方法来衡量这个问题。从简单的开始。做一些改变…</p><p id="a89f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">记住，不要同时使用两种解决方案，否则会破坏你的站点</strong>。</p><p id="22f3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于<a class="ae kk" href="https://github.com/azizulbappy0096/CKEditor5/blob/master/src/pages/index.js" rel="noopener ugc nofollow" target="_blank"> index.js </a>(解决方案-1)</p><figure class="km kn ko kp fd kq"><div class="bz dy l di"><div class="ll lm l"/></div></figure><p id="f6e2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里我们展示了一个技巧。我们没有直接导入编辑器组件<strong class="ih hj">，</strong>，而是使用了nextJs <a class="ae kk" href="https://nextjs.org/docs/advanced-features/dynamic-import" rel="noopener ugc nofollow" target="_blank">动态导入</a>，并关闭了<a class="ae kk" href="https://developers.google.com/web/updates/2019/02/rendering-on-the-web" rel="noopener ugc nofollow" target="_blank"> SSR </a> <strong class="ih hj">。</strong>那会导致加载迟缓。它不会导入编辑器，直到找到一个<a class="ae kk" href="https://developer.mozilla.org/en-US/docs/Web/API/Document_Object_Model/Introduction" rel="noopener ugc nofollow" target="_blank"> DOM </a>，然后在不抛出任何错误的情况下呈现自己。</p><p id="80e9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们换一种方式。撤消我们在index.js中所做的所有更改，然后</p><p id="3cb5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">for <a class="ae kk" href="https://github.com/azizulbappy0096/CKEditor5/blob/master/src/components/Editor.js" rel="noopener ugc nofollow" target="_blank"> Editor.js </a>(解决方案2)</p><figure class="km kn ko kp fd kq"><div class="bz dy l di"><div class="ll lm l"/></div></figure><p id="9acf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里我们使用了ReactJs的<a class="ae kk" href="https://reactjs.org/docs/hooks-reference.html#useref" rel="noopener ugc nofollow" target="_blank"> useRef </a>钩子。我们已经将钩子初始化为一个空文档。然后，当我们的组件在客户端呈现时，它运行它的副作用。这就是我们导入CKEditor模块的地方，并将它们作为对象放入定义的文档中。从那里，它更新了DOM以呈现编辑器应该呈现的样子。提醒你，不要同时使用两种解决方案。</p><h2 id="f2dd" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated">结论</h2><p id="9929" class="pw-post-body-paragraph if ig hi ih b ii jy ik il im jz io ip iq ka is it iu kb iw ix iy kc ja jb jc hb bi translated">现在它在网络上运行得非常好。啊，我们已经走了很远了。我们对WYSIWYG和CKEditor 5的例子有了一个简单的概念。这只是一个小小的实现。有更多的选项可以控制编辑器的行为。如果你愿意，你甚至可以添加定制的插件。深入研究并尝试找到WYSIWYG/富文本编辑器的所有可能的特性。</p></div><div class="ab cl lo lp gp lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="hb hc hd he hf"><p id="e83d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">项目回购:<a class="ae kk" href="https://github.com/azizulbappy0096/CKEditor5" rel="noopener ugc nofollow" target="_blank">https://github.com/azizulbappy0096/CKEditor5</a></p><p id="b63d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所见即所得:<a class="ae kk" href="https://en.wikipedia.org/wiki/WYSIWYG" rel="noopener ugc nofollow" target="_blank">https://en.wikipedia.org/wiki/WYSIWYG</a></p><p id="0774" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">cke editor 5:<a class="ae kk" href="https://ckeditor.com/docs/ckeditor5/latest/builds/guides/overview.html" rel="noopener ugc nofollow" target="_blank">https://cke editor . com/docs/cke editor 5/latest/builds/guides/overview . html</a></p></div></div>    
</body>
</html>