<html>
<head>
<title>Spatial Math in Robotics</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">机器人学中的空间数学</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/the-following-article-describes-a-simple-approach-to-solving-a-common-problem-in-robotics-8276d0a6caee?source=collection_archive---------6-----------------------#2022-10-10">https://medium.com/geekculture/the-following-article-describes-a-simple-approach-to-solving-a-common-problem-in-robotics-8276d0a6caee?source=collection_archive---------6-----------------------#2022-10-10</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/930cda84dc602d8954831e992b25ead9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SxbwctfFP5lIVburPlVbOA.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx">Google.com</figcaption></figure><div class=""/><p id="f88a" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">下面的文章描述了一种解决机器人学中常见问题的简单方法。通常，关节式机器人执行取放、码垛或卸垛应用的环境(机器人单元)可以在3D空间中通过跟随物体(见下文)及其相对于字框架的协调系统来描述— <strong class="iw hy"> A </strong>(在这种情况下)。</p><p id="a5ae" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在本文中，我将展示如何应对上述挑战，并找到解决方案。我给大家简单介绍一下特殊数学，定义常见矩阵之间的关系。</p><p id="d5fb" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">解决方案在C++(和Eigen库)中给出——见我的<a class="ae js" href="https://github.com/markusbuchholz/spatial_math_in_robotics" rel="noopener ugc nofollow" target="_blank"> GitHub </a>。Peter Corke使用Python中的<a class="ae js" href="https://github.com/petercorke/spatialmath-python" rel="noopener ugc nofollow" target="_blank">空间数学</a>在Python中完成了C++实现的可视化和验证。</p><p id="0162" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">考虑下面的3D图，我们可以看到固定到以下对象的特定坐标(框架)的五个位置。</p><p id="0c73" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">A —与世界相关的帧(机器人单元)，<br/> B —机器人的基础帧，<br/> C —机器人的末端执行器，<br/> D —摄像机位置，<br/> E —机器人要拾取的对象。</p><figure class="ju jv jw jx fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es jt"><img src="../Images/b6c2723821390a25cb2230e9ca145103.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ssTJ9Stq9oSK6GdrqrplJQ.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx">Pick and place robot application (frames). by author</figcaption></figure><figure class="ju jv jw jx fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es jy"><img src="../Images/2c05ccb828be2de77f0262ebec1aea6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u50GQd2HGP6m5jqkYBUB6A.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx">by author</figcaption></figure><p id="9c5b" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">{W}中对象/机器人的姿态/配置由位置(平移<strong class="iw hy"> P </strong>因为我们参考世界坐标系)和方向(<a class="ae js" href="https://en.wikipedia.org/wiki/Rotation_matrix" rel="noopener ugc nofollow" target="_blank">旋转</a>矩阵3x3 <strong class="iw hy"> R </strong>或<a class="ae js" href="https://en.wikipedia.org/wiki/Quaternion" rel="noopener ugc nofollow" target="_blank">四元数</a>)描述。R和P都可以容纳在齐次变换矩阵<strong class="iw hy"> H </strong>中(见下文)。</p><p id="1ecc" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">为了计算如何移动机器人手臂，以拾起物体，必须确定物体相对于机器人手的配置(<a class="ae js" href="https://en.wikipedia.org/wiki/Transformation_matrix" rel="noopener ugc nofollow" target="_blank">变换</a> <strong class="iw hy"> Hce </strong>矩阵)。</p><p id="3826" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">请注意，变换<strong class="iw hy"> Hbc </strong>是利用机械手特定模型的运动学模型(此处为正向运动学)计算的。<br/>在我们的例子中，我们认为在我们计算的时间戳中<strong class="iw hy"> Hce </strong>，矩阵<strong class="iw hy"> Hbc </strong>是已知的。基于矩阵<strong class="iw hy"> Hce </strong>我们可以计算机器人目标:旋转-四元数，来自旋转矩阵<strong class="iw hy"> Hce </strong> (3x3)，以及平移3D空间也来自<strong class="iw hy"> Hce </strong> (1x3)。详情稍后给出。</p><p id="c224" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我们需要理解框架之间的关系。框架旋转和平移<strong class="iw hy">总是相对于另一个框架</strong>给出。<br/>分析上图，我们可以说相机旋转了:<br/> -60[deg](x轴)、60[deg](y轴)和60[deg](z轴)，但相对于<strong class="iw hy">世界坐标系A </strong>并沿:2[m](x轴)、3[m](y轴)和3[m](z轴)平移。<br/>物体E的框架由相机在相机框架坐标中计算。为了将E帧转换为A帧，我们应用了如下转换:</p><figure class="ju jv jw jx fd hk er es paragraph-image"><div class="er es jz"><img src="../Images/daa6a7e8678de16fc2fd7d844be09dcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:602/format:webp/1*9AC66pWXz_2-huPRZlqktw.png"/></div></figure><p id="1462" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在设计机器人应用时，参考系的变化——见下图，相位将被考虑在内。</p><figure class="ju jv jw jx fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es ka"><img src="../Images/d62c9b783ddd3dcd9649324d9f2fa546.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UA6dKvvuqlI5exfeolU0_Q.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx">by author</figcaption></figure><h1 id="c8f2" class="kb kc hx bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">机器人学中空间数学的理论介绍</h1><p id="d42c" class="pw-post-body-paragraph iu iv hx iw b ix kz iz ja jb la jd je jf lb jh ji jj lc jl jm jn ld jp jq jr hb bi translated">在这一段中，我们将只着重于适用于我们情况的必要定义。<br/>首先，我们将定义<strong class="iw hy">齐次变换，</strong>它将<strong class="iw hy">旋转R </strong>和<strong class="iw hy">平移</strong>的操作组合成一个矩阵乘法。</p><p id="daea" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">三维空间中的刚体运动或齐次变换矩阵是以下形式的所有4 × 4矩阵H的集合:</p><figure class="ju jv jw jx fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es le"><img src="../Images/30bc7cfd791a21fa631c50d6e97b8a41.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mdI3Uf5drE_yRbsDcgOZ2g.png"/></div></div></figure><p id="8167" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">旋转矩阵R也可以被描述为围绕主坐标轴z，y，x <strong class="iw hy">以特定顺序连续旋转的产物(总是首先是轴z，然后是y，最后是x，因此我们有“名称”:RPY。</strong></p><p id="e901" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这些旋转定义了滚转角、俯仰角和偏航角(RPY)——<a class="ae js" href="https://en.wikipedia.org/wiki/Euler_angles" rel="noopener ugc nofollow" target="_blank">欧拉角</a>，我们也将它们表示为φ、θ、ψ。</p><figure class="ju jv jw jx fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lf"><img src="../Images/95196d662cc417acc1c0674d69f7a19c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fTK7ys8YXRSpzstfdUvMYA.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx">by author</figcaption></figure><figure class="ju jv jw jx fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lg"><img src="../Images/64b16bce16071446ad7a9b209f067c42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GFnSVv_DrQ_Ij6eKwVv__g.png"/></div></div></figure><p id="bc30" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">平移P被认为是从一个帧位置到第二个帧位置的帧的移动长度(在3D空间中)(在我们的情况下，我们可以说是从世界帧到机器人基础帧或者从机器人基础帧到末端效应器帧的平移，等等)。下图描述了机器人基座如何从世界坐标系平移(沿x轴为2.8[m]，沿y轴为0.5 [m])。沿z轴无移动。</p><figure class="ju jv jw jx fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lh"><img src="../Images/62958d0a5e9e902b703d6656f5def716.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ebv5L0_VRu9fjlXVELiNcg.png"/></div></div></figure><p id="1a4a" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在我们的例子中，旋转可以描述如下。框架C(机器人末端执行器相对于机器人基础框架B平移)旋转:45[deg](x轴)、45[deg](y轴)和-45[deg](z轴)，并沿-1.8[m](x轴)、1[m](y轴)和2[m](z轴)平移。</p><figure class="ju jv jw jx fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es li"><img src="../Images/b8c71c9ba0406d7fc082c6e5b4611d6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n3bOVczWBBJ05o0xIoqozg.png"/></div></div></figure><p id="39b6" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">为了计算机器人末端执行器的位置，我们必须应用相应的矩阵变换，如下所示:</p><figure class="ju jv jw jx fd hk er es paragraph-image"><div class="er es lj"><img src="../Images/0b5f9a14998b229c9aa50234417c9c54.png" data-original-src="https://miro.medium.com/v2/resize:fit:584/format:webp/1*6Y6bqdX5oheqvUzxiNT8Qw.png"/></div></figure><h1 id="7c78" class="kb kc hx bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated"><strong class="ak">解决方案</strong></h1><p id="2a8a" class="pw-post-body-paragraph iu iv hx iw b ix kz iz ja jb la jd je jf lb jh ji jj lc jl jm jn ld jp jq jr hb bi translated">计算变换矩阵<strong class="iw hy"> Hce </strong>的简单程序，以确定机器人的运动任务是拾取物体(帧E)。<br/>有了矩阵<strong class="iw hy"> Hce </strong>我们就可以确定<strong class="iw hy">机器人目标</strong>(物体的位置和旋转——通常以四元数的形式给机器人控制器)。</p><p id="b0a7" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">基于本文开头描述的图形，我们可以导出一个矩阵方程(参见C++中的解决方案)并求解<strong class="iw hy"> Hce </strong>如下。</p><figure class="ju jv jw jx fd hk er es paragraph-image"><div class="er es lk"><img src="../Images/4c6f5da7979ae00ad51a81856788af2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1048/format:webp/1*NfnUCy_m01Y3aMuRrKRfQg.png"/></div></figure><figure class="ju jv jw jx fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es ll"><img src="../Images/e5056c3899de9838328ee044e072b6d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*07C6u3VUcTeMy52h_ssr6Q.png"/></div></div></figure><p id="1c4f" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">感谢您的阅读，</p></div></div>    
</body>
</html>