<html>
<head>
<title>Global Error Handling In .Net 6.0 With ElasticSearch</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">中的全局错误处理。带弹性搜索的Net 6.0</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/global-error-handling-in-net-6-0-with-elasticsearch-f9d90c1903d8?source=collection_archive---------4-----------------------#2022-08-17">https://medium.com/geekculture/global-error-handling-in-net-6-0-with-elasticsearch-f9d90c1903d8?source=collection_archive---------4-----------------------#2022-08-17</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/e66daa769fcb1599f6675fe26f642ed5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*--pXEUwfpEnLgtKFFzMZZA.jpeg"/></div></div></figure><p id="cd8e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">嗨，今天我们将讨论从两个方面来捕捉全局错误。网芯6.0。稍后，我们将把这个错误记录到Elasticsearch中，并将自定义错误模型返回给客户端。</p><p id="97b0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你可以从整个解决方案中得到各种各样的错误。所以有时候你可能想对一些特定的错误进行额外的操作。或者您可能希望对所有错误进行全局操作。</p><h2 id="481c" class="jo jp hi bd jq jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki bi translated">首先让我们从控制器发送自定义禁止异常:</h2><p id="fd18" class="pw-post-body-paragraph iq ir hi is b it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj kn jl jm jn hb bi translated">我们将从控制器发送一个“403禁止”错误消息来测试全局错误异常捕捉器类。</p><ul class=""><li id="5e68" class="ko kp hi is b it iu ix iy jb kq jf kr jj ks jn kt ku kv kw bi translated"><em class="kx"/><strong class="is hj"><em class="kx">ex。data . Add()</em></strong><em class="kx"/>方法获取字典参数。因此，我们将statusCode作为一个键，statusMessage作为一个值字典参数添加到客户异常的数据中，并发送它。</li></ul><p id="8dc1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"><em class="kx">user controller/GetTopOneUser():</em></strong></p><pre class="ky kz la lb fd lc ld le lf aw lg bi"><span id="fe57" class="jo jp hi ld b fi lh li l lj lk">public void GetTopOneUser()<br/>{<br/>    //throw custom exception<br/>    int statusCode = 403;<br/>    string statusMessage = "You are not authorized for this page";<br/>   <br/>    var ex = new Exception(string.Format("{0} - {1}", statusMessage, statusCode));<br/>    ex.Data.Add(statusCode, statusMessage);  // store 403and "Forbidden Parameters"<br/>   <br/>    throw ex;<br/>}</span></pre><blockquote class="ll"><p id="71f5" class="lm ln hi bd lo lp lq lr ls lt lu jn dx translated">习惯是错误的温床。—维克多·雨果</p></blockquote><h1 id="2e48" class="lv jp hi bd jq lw lx ly ju lz ma mb jy mc md me kb mf mg mh ke mi mj mk kh ml bi translated">1-)第一个方法Api扩展:</h1><p id="35ef" class="pw-post-body-paragraph iq ir hi is b it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj kn jl jm jn hb bi translated">首先，我们将创建“IApplicationBuilder”扩展类。并全局捕捉异常。最后，我们将把响应附加到当前上下文中。</p><p id="3c0d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi mm translated"><span class="l mn mo mp bm mq mr ms mt mu di"> 1。</span>我们为IApplicationBuilder创建了ConfigureExceptionHandler扩展类。我们将在“<strong class="is hj"><em class="kx">UseExceptionHandler()</em></strong>”方法上捕获所有应用程序异常。</p><figure class="ky kz la lb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mv"><img src="../Images/22c2c3ce699ed39ca4f46474ae8275fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W1OnBncpHmJNQCYm8ztbBA.png"/></div></div><figcaption class="mw mx et er es my mz bd b be z dx">Extension ConfigureExceptionHandler</figcaption></figure><p id="d7ab" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi mm translated"><span class="l mn mo mp bm mq mr ms mt mu di"> 2。</span>我们将设置弹性搜索配置。我们以后再谈。我们将检查上下文特征中是否有任何错误。如果其中有错误，我们将得到一个错误消息和错误代码，并为我们的自定义异常创建一个新的字典。</p><figure class="ky kz la lb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es na"><img src="../Images/fd2f6613ee10d406c9be8d5cd3fbb5fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1ng0wpUdUudK0YwmawHggg.png"/></div></div><figcaption class="mw mx et er es my mz bd b be z dx">Error Dictionary</figcaption></figure><p id="30ea" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi mm translated"><span class="l mn mo mp bm mq mr ms mt mu di"> 3。</span>我们将创建自定义错误日志模型，用于在弹性搜索中创建索引。</p><pre class="ky kz la lb fd lc ld le lf aw lg bi"><span id="10f9" class="jo jp hi ld b fi lh li l lj lk">public class ErrorLogModel<br/>{<br/>   public int UserID { get; set; }<br/>   public string Message { get; set; }<br/>   public string Controller { get; set; }<br/>   public string Action { get; set; }<br/>   public string Method { get; set; }<br/>   public string Service { get; set; }<br/>   public DateTime PostDate { get; set; }<br/>   public int ErrorCode { get; set; }<br/>}</span></pre><p id="a222" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将从“上下文”中获得动作和控制器名称。Request.Path”进行日志记录。我们将设置当前时间，并从请求头中获取UserID。最后，我们将把“logModel”索引保存到ElasticSearch (error_log索引)。</p><figure class="ky kz la lb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nb"><img src="../Images/7e5f4b819ba82d164e7c87030b508a77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Mxkckzsfd7d-GmWd1e30BA.png"/></div></div><figcaption class="mw mx et er es my mz bd b be z dx">Create ElasticSearch Model and Index</figcaption></figure><p id="b6fe" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi mm translated"><span class="l mn mo mp bm mq mr ms mt mu di"> 4。我们将检查错误数据中是否有错误。如果是，我们将循环每个错误，并将其添加到异常字典中。最后，我们将在上下文响应中写入“错误消息”。</span></p><figure class="ky kz la lb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nc"><img src="../Images/bc6be32069cc790389290841464439b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XCHRJyTPVhao9IH1xI1sWA.png"/></div></div><figcaption class="mw mx et er es my mz bd b be z dx">Loop in the Errors</figcaption></figure><blockquote class="ll"><p id="12b5" class="lm ln hi bd lo lp lq lr ls lt lu jn dx translated">最大的错误是认为我们永远不会犯错。</p><p id="387d" class="lm ln hi bd lo lp nd ne nf ng nh jn dx translated">—托马斯·卡莱尔</p></blockquote><p id="9e97" class="pw-post-body-paragraph iq ir hi is b it ni iv iw ix nj iz ja jb nk jd je jf nl jh ji jj nm jl jm jn hb bi translated"><strong class="is hj"><em class="kx">Infrastructor/exceptionmiddleware extensions . cs:</em></strong></p><figure class="ky kz la lb fd ij"><div class="bz dy l di"><div class="nn no l"/></div></figure><p id="a7a9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"><em class="kx">appsettings.json/ElasticConnectionSettings:</em></strong></p><p id="63be" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将大致浏览一下ElasticSearch核心库。因为ElastichSearch是一个完全不同的学科。如下所示，出于安全原因，弹性连接和凭证被加密。所有三个索引名称都在配置文件中定义。</p><figure class="ky kz la lb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es np"><img src="../Images/9925a0e56e5671caba483f80e8ec8808.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J_jvPlc4q8ShRrvNY6mGHw.png"/></div></div><figcaption class="mw mx et er es my mz bd b be z dx">appsettings.json (ElasticConnectionSettings)</figcaption></figure><p id="e2b2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"><em class="kx">Elastic search/ielasticsearchservice . cs</em>:</strong>这些都是弹性操作。创建&lt; T &gt;动态索引，并从特定的3个索引(错误、审计和登录)进行搜索。在本文中，我们将只讨论为ElasticSearch创建或插入索引。</p><figure class="ky kz la lb fd ij"><div class="bz dy l di"><div class="nn no l"/></div><figcaption class="mw mx et er es my mz bd b be z dx">ElasticSearch Base Methods</figcaption></figure><p id="7e7a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"><em class="kx">elastic search/elastic search service . cs:</em></strong></p><ul class=""><li id="6bc3" class="ko kp hi is b it iu ix iy jb kq jf kr jj ks jn kt ku kv kw bi translated">ElasticClientProvider正在设置ElasticConfig并创建一个单独的弹性客户端类。我们以后再谈。</li><li id="cd2f" class="ko kp hi is b it nq ix nr jb ns jf nt jj nu jn kt ku kv kw bi translated">CheckExistsAndInsertLog()方法。在本例中，我们将创建“<strong class="is hj"> <em class="kx"> error_log </em> </strong>”索引，如果不存在的话。NumberOfReplica和NumberofShards是为了提高性能和灾难场景下主机与从机之间的交换而设置的。</li></ul><figure class="ky kz la lb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nv"><img src="../Images/94e6ffb953df773d2db5654038b2d161.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OqD3CSr5vUySyWnWmCKWbA.png"/></div></div><figcaption class="mw mx et er es my mz bd b be z dx">Elasticsearch is configured on a total of 6 machines called 3 sharding, running on 3 machines for performance purposes and each machine having 1 backup (Replica) for security purposes. 6 machines are divided into 3 groups in 2 groups. Each group is called a Node. Each machine backup must be on a different Node. “You shouldn’t put all your eggs in the same basket. :)“</figcaption></figure><ul class=""><li id="be1e" class="ko kp hi is b it iu ix iy jb kq jf kr jj ks jn kt ku kv kw bi translated">"<strong class="is hj"> <em class="kx">别名(a =&gt;a . Alias(index name)))</em></strong>":设置别名对于ellasticsearch来说非常重要。当将来对索引进行更改时，它可以确保以前保存的文档可以很容易地创建而不会丢失。</li><li id="b05d" class="ko kp hi is b it nq ix nr jb ns jf nt jj nu jn kt ku kv kw bi translated"><strong class="is hj"><em class="kx">IndexResponse response index = _ client。索引&lt; T &gt; (logModel，idx = &gt; idx。Index(indexName)) </em> </strong>":索引创建后或者已经存在，我们会将错误日志模型保存到error_log索引中。实际上，这个方法是“<strong class="is hj">通用的&lt; T &gt; </strong>”所以你可以将每个模型保存到elasticsearch上的任何索引中。</li></ul><figure class="ky kz la lb fd ij"><div class="bz dy l di"><div class="nn no l"/></div></figure><p id="6976" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">elastic search/elastic client provider:</strong></p><p id="5373" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将使用配置信息创建ElasticClient。出于安全原因，所有配置文本都进行了加密。所以我们使用一个外部加密类来解密所有的配置信息。</p><figure class="ky kz la lb fd ij"><div class="bz dy l di"><div class="nn no l"/></div></figure><p id="ed05" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"><em class="kx">Security/encryption . cs:</em></strong>这是我们的加密类。我们将使用“<strong class="is hj"> <em class="kx"> TripleDES </em> </strong>”进行编解码。出于安全原因，您必须在将所有重要文本保存到config之前对其进行加密。毕竟，当我们从appsettings.json中读取配置信息时，我们必须解密所有文本。</p><figure class="ky kz la lb fd ij"><div class="bz dy l di"><div class="nn no l"/></div></figure><figure class="ky kz la lb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nw"><img src="../Images/97b15cffa1a4d2cafc9c36f591f398ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OJe8bD8eb_rA7DNz7zbCLQ.png"/></div></div><figcaption class="mw mx et er es my mz bd b be z dx"><a class="ae nx" href="https://en.wikipedia.org/wiki/File:Public_key_encryption_keys.svg" rel="noopener ugc nofollow" target="_blank">https://en.wikipedia.org/wiki/File:Public_key_encryption_keys.svg</a></figcaption></figure><p id="7880" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> Startup.cs: </strong>现在我们要调用我们在Startup.cs上的"<strong class="is hj"><em class="kx">ConfigureExceptionHandler()"</em></strong>方法" app "继承自IApplicationBuilder接口。而且我们在IApplicationBuilder接口上写了一个扩展。所以现在我们在监控应用上的每一个错误。如果真的发生了，我们会登录弹性搜索。我们可以使用Kibana工具来监控按日期排序的错误日志，或者我们可以使用任何特定的属性进行过滤。</p><pre class="ky kz la lb fd lc ld le lf aw lg bi"><span id="2365" class="jo jp hi ld b fi lh li l lj lk">.<br/>.<br/>app.ConfigureExceptionHandler();<br/>.<br/>.</span></pre><figure class="ky kz la lb fd ij"><div class="bz dy l di"><div class="ny no l"/></div><figcaption class="mw mx et er es my mz bd b be z dx">Global Error Handling With ElasticSearch Demo</figcaption></figure><blockquote class="ll"><p id="9b85" class="lm ln hi bd lo lp lq lr ls lt lu jn dx translated">当你的敌人犯错时，千万不要打断他。——拿破仑</p></blockquote><h1 id="e149" class="lv jp hi bd jq lw lx ly ju lz ma mb jy mc md me kb mf mg mh ke mi mj mk kh ml bi translated">2-)创建中间件类的第二种方法:</h1><p id="831d" class="pw-post-body-paragraph iq ir hi is b it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj kn jl jm jn hb bi translated">在第二个方法中，我们将在这个中间件类中实现两个方法。<strong class="is hj"> <em class="kx"> Invoke() </em> </strong>和<strong class="is hj"><em class="kx">handelexception async()</em></strong>方法。毕竟我们会通过使用“<strong class="is hj"><em class="kx">use middleware()</em></strong>”将“<em class="kx">GlobalErrorHandlingMiddleware</em>”类注入到in的app中。Net 6.0</p><p id="f255" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi mm translated"><span class="l mn mo mp bm mq mr ms mt mu di"> 1。</span>我们将用“<em class="kx"> RequestDelegate next </em>”参数获取GlobalErrorHandlingMiddleware类的构造函数上的RequestDelegate，并设置private“<em class="kx">_ next</em>”变量。</p><figure class="ky kz la lb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nz"><img src="../Images/cda70538446f75cbb35ed626f12b5d6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7NHMtKlx8Zbcff-f3TAztA.png"/></div></div><figcaption class="mw mx et er es my mz bd b be z dx">Set RequestDelegate in the Constructor method</figcaption></figure><p id="30ac" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi mm translated"><span class="l mn mo mp bm mq mr ms mt mu di"> 2。</span>我们将用“<strong class="is hj"> <em class="kx"> Invoke() </em> </strong>”方法作为参数获取当前的HttpContext。</p><p id="fd8a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"><em class="kx">deep note</em></strong>:<em class="kx">request delegate</em>是代表请求处理完成的任务。</p><p id="8de2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在"<em class="kx"> try {} catch{} </em>"块中，我们将尝试完成当前的HtppContext请求，如果我们得到一个错误我们将调用异步的"<strong class="is hj"><em class="kx">【HandleExceptionAsync()</em></strong>"方法。</p><figure class="ky kz la lb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es oa"><img src="../Images/b171d141fe44065eb7f98a2d43cf504d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UX3BgXr1Nr6R2EG6N3WTxg.png"/></div></div><figcaption class="mw mx et er es my mz bd b be z dx">Monitoring Current HttpContext Processing</figcaption></figure><p id="fa37" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi mm translated"><span class="l mn mo mp bm mq mr ms mt mu di"> 3。在HandelExceptionAsync()方法上，我们将得到错误消息，stackTrace。如果我们愿意，我们可以从“上下文”中获取动作和控制器名称。Request.Path.Value "与前面的示例一样。我们将把我们的自定义错误响应注入到当前上下文中。然后归还。</span></p><figure class="ky kz la lb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ob"><img src="../Images/248220f9245c579ba53fc45fee432bc5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hRxRRZUWlS8j_34hbYhd2A.png"/></div></div></figure><p id="5139" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将把这个中间件类注入到应用程序中，如下所示:</p><p id="8e97" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> Startup.cs: </strong></p><pre class="ky kz la lb fd lc ld le lf aw lg bi"><span id="8c7b" class="jo jp hi ld b fi lh li l lj lk"><strong class="ld hj"><em class="kx">.<br/>.<br/>app.UseMiddleware(typeof(GlobalErrorHandlingMiddleware));<br/>.<br/>.</em></strong></span></pre><figure class="ky kz la lb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es oc"><img src="../Images/dc3e6e5d1c81baa589b07af3b30cb5a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I8J8JMhtkm1e1COgNMl63A.png"/></div></div><figcaption class="mw mx et er es my mz bd b be z dx">Kibana “error_log” Index Result</figcaption></figure><p id="8073" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> <em class="kx">基础架构/ </em>全局错误处理中间件<em class="kx">。cs: </em> </strong></p><figure class="ky kz la lb fd ij"><div class="bz dy l di"><div class="nn no l"/></div></figure><p id="2a53" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这是结果屏幕:</p><figure class="ky kz la lb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es od"><img src="../Images/2f5be3378f280b8a1a0b3f1f6d6ee69b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iPBrB6KGYyO6QXsq6YZJMg.png"/></div></div></figure><figure class="ky kz la lb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nw"><img src="../Images/11520dfbea1df74047bed301e7cd11f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QyR7fvaMy8xB4DniNkn3Qw.png"/></div></div></figure><p id="0c76" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">结论:</strong></p><p id="2e44" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们的主要目的是设法在一个地方解决错误。所以以后你可以很容易地改变、扩展或删除一些错误操作。您可以全面有效地进行测试和监控。现在，对于错误记录，您可以使用Elasticsearch，但是以后您可以决定在mongoDB、cosmosDB或任何地方索引您的错误文档。您可以全局地对特定的错误代码进行额外的操作。例如，如果你得到“500错误”你可以发送电子邮件给管理员。</p><p id="1e5b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们不打扰一般的流动。如果我们遇到任何错误，我们只将错误日志文档附加到“上下文”中。回应”。我们在本文中没有谈到多语言支持。我们用英语写了所有的东西。这完全是另一篇文章的主题。</p><p id="ee51" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下一篇文章再见。</p><figure class="ky kz la lb fd ij"><div class="bz dy l di"><div class="oe no l"/></div></figure><p id="9d8d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="kx">“如果你读到现在，首先感谢你的耐心和支持。欢迎大家到我的博客</em><a class="ae nx" href="http://www.borakasmer.com/" rel="noopener ugc nofollow" target="_blank"><em class="kx"/><strong class="is hj"><em class="kx"/></strong></a><strong class="is hj"><em class="kx"/></strong><em class="kx">了解更多！”</em></p><p id="8f0a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">来源:</strong></p><ul class=""><li id="3d69" class="ko kp hi is b it iu ix iy jb kq jf kr jj ks jn kt ku kv kw bi translated"><a class="ae nx" href="https://docs.microsoft.com/en-us/aspnet/core/fundamentals/error-handling?view=aspnetcore-6.0" rel="noopener ugc nofollow" target="_blank">https://docs . Microsoft . com/en-us/aspnet/core/fundamentals/error-handling？view=aspnetcore-6.0 </a></li><li id="4195" class="ko kp hi is b it nq ix nr jb ns jf nt jj nu jn kt ku kv kw bi translated"><a class="ae nx" href="https://www.elastic.co" rel="noopener ugc nofollow" target="_blank">https://www.elastic.co</a></li><li id="a59b" class="ko kp hi is b it nq ix nr jb ns jf nt jj nu jn kt ku kv kw bi translated"><a class="ae nx" href="https://blog.devops.dev/implementation-of-global-exception-handling-using-net-core-6-web-api-cab566052012" rel="noopener ugc nofollow" target="_blank">https://blog . devo PS . dev/implementation-of-global-exception-handling-using-net-core-6-we b-API-cab 566052012</a></li><li id="f50a" class="ko kp hi is b it nq ix nr jb ns jf nt jj nu jn kt ku kv kw bi translated"><a class="ae nx" href="https://cloudcoders.xyz/blog/global-error-handling-in-asp-net-core-web-api/" rel="noopener ugc nofollow" target="_blank">https://cloud coders . XYZ/blog/global-error-handling-in-ASP-net-core-we b-API/</a></li></ul></div></div>    
</body>
</html>