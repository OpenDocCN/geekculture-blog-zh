<html>
<head>
<title>Material UI: Create a Custom Toggle Theme using React Hooks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">材质UI:使用React钩子创建一个自定义的切换主题</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/material-ui-custom-toggle-theme-using-react-hooks-59a23183a2d9?source=collection_archive---------6-----------------------#2021-03-07">https://medium.com/geekculture/material-ui-custom-toggle-theme-using-react-hooks-59a23183a2d9?source=collection_archive---------6-----------------------#2021-03-07</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="2c07" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将使用<a class="ae jd" href="https://material-ui.com/" rel="noopener ugc nofollow" target="_blank">材质UI </a>和<a class="ae jd" href="https://reactjs.org/docs/hooks-intro.html" rel="noopener ugc nofollow" target="_blank"> React钩子</a>创建一个自定义的切换主题，该主题保存在本地存储//链接到<a class="ae jd" href="https://github.com/camitta/toggle-theme" rel="noopener ugc nofollow" target="_blank">源代码</a></p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es je"><img src="../Images/84c7edfc0b7b6f8e01e7b50c51583c8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*JvMzjMbhMILbo5IMH3gdOQ.gif"/></div></figure><h1 id="6bee" class="jm jn hi bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated"><strong class="ak">简介</strong></h1><p id="754d" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">如今，许多网站都提供黑暗模式。鉴于它在iOS和大量基本应用程序中无处不在，许多用户现在都认为在明暗模式之间滑动的功能是理所当然的。但是“粉彩糖果”模式在哪里？或者“荧光赛博朋克”模式呢？不要误解我的意思，如果你和我一样，连续几个小时盯着屏幕，黑暗模式是缓解眼睛疲劳的好方法(至少谷歌是这么说的)。然而，作为一个也从异想天开的配色方案中获得前所未有的快乐的人，缺乏选择让人感到压抑。如果有其他可供选择的颜色主题，那该有多好？</p></div><div class="ab cl kp kq gp kr" role="separator"><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku"/></div><div class="hb hc hd he hf"><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="er es kw"><img src="../Images/22d98f2e1529112f4dc96882b615d536.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qqDG_hXPB2SGq0ro"/></div></div><figcaption class="lb lc et er es ld le bd b be z dx">Photo by <a class="ae jd" href="https://unsplash.com/@rojekilian?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Sarah Kilian</a> on <a class="ae jd" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="31be" class="jm jn hi bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated"><strong class="ak">从错误中学习</strong></h1><p id="bb3c" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">最近，我加入了一个团队，使用名为<a class="ae jd" href="https://your-agenda.herokuapp.com/" rel="noopener ugc nofollow" target="_blank"> <em class="lf">议程</em> </a>的<a class="ae jd" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank"> React </a>开发了一个最小协作任务管理工具。我和我的团队顺利地完成了开发过程，达到了我们的MVP(最小可行产品)目标，这符合我们需要的应用程序基本功能的所有条件。一旦我们达到我们的MVP，我就开始了我对颜色主题的探索，并开始实现一个定制的切换主题。我很快意识到，我们在组件中使用Google的材料UI样式覆盖的方式，加上定制的默认样式，造成了切换的严重问题。在一次大的重构之后，我决定在Material UI中实现定制的最佳方式是:</p><p id="92a1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">1.)使用材质UI的<a class="ae jd" href="https://material-ui.com/customization/theming/#createmuitheme-options-args-theme" rel="noopener ugc nofollow" target="_blank"><em class="lf">createmiutheme()</em></a>创建一个主题，并用自定义主题覆盖<a class="ae jd" href="https://material-ui.com/system/palette/#main-content" rel="noopener ugc nofollow" target="_blank"> <em class="lf">调色板</em> </a> <em class="lf"> </em>对象</p><p id="5e41" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.)在组件端，使用<a class="ae jd" href="https://material-ui.com/styles/api/#makestyles-styles-options-hook" rel="noopener ugc nofollow" target="_blank"> <em class="lf"> makeStyles() </em> </a>将主题中的颜色分配给所需的组件</p><p id="e61d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.)将创建的类名分配给相应的HTML元素</p><p id="7f66" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有很多方法可以实现自定义的切换主题，根据你的使用情况，你可能想要寻找其他的材料UI，比如<a class="ae jd" href="https://css-tricks.com/a-dark-mode-toggle-with-react-and-themeprovider/" rel="noopener ugc nofollow" target="_blank">风格的组件</a>或者仅仅坚持使用可信的CSS。在<em class="lf">议程</em>的案例中，我们选择了Material UI，因为它是专门为React构建的，提供了像手套一样适合我们项目的现成组件。</p><p id="c5d7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面我将向你展示我是如何使用材质UI在React中加入一个自定义的切换主题，同时管理本地存储中的状态。</p></div><div class="ab cl kp kq gp kr" role="separator"><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku"/></div><div class="hb hc hd he hf"><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="er es kw"><img src="../Images/0feda4b640eb39dca776c55cfa6e3574.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8nIn6jTeS9nOCPPv"/></div></div><figcaption class="lb lc et er es ld le bd b be z dx">Photo by <a class="ae jd" href="https://unsplash.com/@aquatium?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Harpal Singh</a> on <a class="ae jd" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="123b" class="jm jn hi bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated"><strong class="ak">但是首先……什么是材质UI？</strong></h1><p id="4751" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">Material UI是React的一个组件库，它使用了开箱后看起来很棒的功能性组件。此外，它还提供工具来轻松定制这些组件，以满足您的需求。最重要的是，Material UI支持基本的明暗模式，并使两者之间的切换变得轻而易举。</p><h1 id="01fa" class="jm jn hi bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated"><strong class="ak">还有钩子？</strong></h1><p id="ae6c" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">钩子是React 16.8中的新增功能。它们允许您实现状态和其他React特性，而不必写出一个类。我使用了<a class="ae jd" href="https://reactjs.org/docs/hooks-effect.html" rel="noopener ugc nofollow" target="_blank">效果钩子</a>，它允许你在<strong class="ih hj">函数组件</strong>(以前称为“无状态组件”)中执行副作用。这将允许主题在组件不需要重新渲染的情况下切换。</p><p id="2772" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">功能组件看起来像这样:</p><pre class="jf jg jh ji fd lg lh li lj aw lk bi"><span id="dad4" class="ll jn hi lh b fi lm ln l lo lp"><em class="lf">const Example = (props) =&gt; {</em></span><span id="99e8" class="ll jn hi lh b fi lq ln l lo lp"><em class="lf">// You can use Hooks here!</em></span><span id="7744" class="ll jn hi lh b fi lq ln l lo lp"><em class="lf">return &lt;div /&gt;;</em></span><span id="c6f1" class="ll jn hi lh b fi lq ln l lo lp"><em class="lf">}</em></span></pre><p id="9721" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">或者这个:</p><pre class="jf jg jh ji fd lg lh li lj aw lk bi"><span id="4f34" class="ll jn hi lh b fi lm ln l lo lp"><em class="lf">function Example(props) {</em></span><span id="6d1d" class="ll jn hi lh b fi lq ln l lo lp"><em class="lf">// You can use Hooks here!</em></span><span id="aa52" class="ll jn hi lh b fi lq ln l lo lp"><em class="lf">return &lt;div /&gt;;</em></span><span id="e5ac" class="ll jn hi lh b fi lq ln l lo lp"><em class="lf">}</em></span></pre><p id="95af" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你不熟悉什么是副作用，你可以把它等同于<em class="lf">组件卸载</em>、<em class="lf">组件更新</em>和<em class="lf">组件卸载</em>的组合。如果你想了解更多关于钩子的细节，这里的<a class="ae jd" href="https://reactjs.org/docs/hooks-effect.html#tip-use-multiple-effects-to-separate-concerns" rel="noopener ugc nofollow" target="_blank"/><strong class="ih hj"/>是官方文档的链接。</p><h1 id="65ca" class="jm jn hi bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated">让我们开始吧</h1><p id="4814" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">如果你想直接跳到GitHub源代码，点击<a class="ae jd" href="https://github.com/camitta/toggle-theme" rel="noopener ugc nofollow" target="_blank">这里</a>。否则，让我们从使用<a class="ae jd" href="https://create-react-app.dev/" rel="noopener ugc nofollow" target="_blank"> Create React app </a>设置React App开始。我们称这个项目为<em class="lf">切换主题</em>:</p><pre class="jf jg jh ji fd lg lh li lj aw lk bi"><span id="e04e" class="ll jn hi lh b fi lm ln l lo lp"><em class="lf">npx create-react-app toggle-theme</em></span><span id="d848" class="ll jn hi lh b fi lq ln l lo lp"><em class="lf">cd toggle-theme</em></span></pre><p id="afcf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">安装<a class="ae jd" href="https://material-ui.com/" rel="noopener ugc nofollow" target="_blank">材质UI </a>和<a class="ae jd" href="https://material-ui.com/components/material-icons/" rel="noopener ugc nofollow" target="_blank">材质图标</a>:</p><pre class="jf jg jh ji fd lg lh li lj aw lk bi"><span id="d4bc" class="ll jn hi lh b fi lm ln l lo lp"><em class="lf">npm install @material-ui/core </em><em class="lf">@material-ui/icons</em></span></pre><p id="0aa2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Create React App 是一个优秀的样板文件，允许你在没有构建配置的情况下创建一个应用。由于本文的主要焦点是如何实现自定义切换，我将在文件<em class="lf"> App.js </em>中模拟一个简单的主页，带有页眉、页脚、一些文本和几个切换主题的按钮。</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="lr ls l"/></div></figure><h1 id="f468" class="jm jn hi bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated">自定义主题</h1><p id="837b" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">接下来，我们将使用材质UI的<em class="lf">createmiutheme()</em>创建一个自定义主题。下面是一个“彩色糖果”主题，此外，将有一个“正常”主题和一个“荧光”主题。随意定制你喜欢的。我建议看看<a class="ae jd" href="https://coolors.co/" rel="noopener ugc nofollow" target="_blank">酷派</a>的漂亮配色inspo。</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="lr ls l"/></div></figure><p id="115b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">回到<em class="lf"> App.js </em>，在组件端，我们将使用<a class="ae jd" href="https://material-ui.com/styles/api/#makestyles-styles-options-hook" rel="noopener ugc nofollow" target="_blank"> <em class="lf"> makeStyles() </em> </a>将我们刚刚创建的自定义主题中的颜色分配给想要的组件。为此，我们将使用<a class="ae jd" href="https://material-ui.com/customization/components/" rel="noopener ugc nofollow" target="_blank"> <em class="lf"> className </em> </a>属性覆盖材质UI的默认样式。Material UI为每个组件提供了一个<em class="lf"> className </em>属性。</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="lr ls l"/></div></figure><h1 id="41d4" class="jm jn hi bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated">坚持就地储存</h1><p id="2c8f" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">为了将状态保存到localStorage，我们需要创建一个自定义主题提供程序，它将当前状态更改为自定义主题，并将其传递给所有子元素。</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="lr ls l"/></div></figure><p id="b1a4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后，但同样重要的是，我们将需要向切换按钮添加一个事件处理程序，它将在默认主题、<em class="lf">普通主题和我们的自定义主题之间切换主题。</em></p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="lr ls l"/></div></figure><h1 id="889d" class="jm jn hi bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated"><strong class="ak">结论</strong></h1><p id="473e" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">访问GitHub上的<a class="ae jd" href="https://github.com/camitta/toggle-theme" rel="noopener ugc nofollow" target="_blank">源代码</a>,并根据自己的意愿自由定制。此外，你可以在这里查看议程的构建版本，这个项目激发了我写这篇文章的灵感。希望这篇教程对你有帮助！</p><p id="3a06" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你喜欢这篇文章，别忘了留下👏。你可以发送多达50个👏</p><p id="6f1f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="lf">在</em><a class="ae jd" href="https://www.linkedin.com/in/allyson-camitta/" rel="noopener ugc nofollow" target="_blank"><em class="lf">LinkedIn</em></a>上和我联系</p></div></div>    
</body>
</html>