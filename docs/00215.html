<html>
<head>
<title>Critical Data At Your Fingertips</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">关键数据触手可及</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/critical-data-at-your-fingertips-8a47baf087d5?source=collection_archive---------1-----------------------#2020-11-09">https://medium.com/geekculture/critical-data-at-your-fingertips-8a47baf087d5?source=collection_archive---------1-----------------------#2020-11-09</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="b552" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您多久会梦想一款原生iOS工具，能够以简单快捷的方式可视化您公司的重要数据？</p><p id="5f38" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你问我，答案是——在我发现Cynapse的数字应用程序之前的每一天。但首先要做的是。</p></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><p id="9567" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">先说真正的任务。我收到一个客户的请求，要求我用从open API收集的数据创建一个新的仪表板。它必须提供有关8大世界可交易货币的价格信息，价格必须以俄罗斯卢布显示。这里托管的源数据:<a class="ae jk" href="https://exchangeratesapi.io" rel="noopener ugc nofollow" target="_blank">https://exchange ratesapi . io</a>。我们的客户将在不同的iOS设备(手表、电视和iPads)上监控这些指标。他们不想为这样的小项目购买新硬件或租用VPC。此外，他们希望以最少的后端服务成本快速构建控制面板。</p><p id="d68c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们建立了一个基于AWS服务的后端解决方案，Numerics是我们的前端(仪表板)。我们使用AWS API Gateway进行路由查询，使用Lambda函数进行JSON转换，以满足Numerics小部件规范。<a class="ae jk" rel="noopener" href="/swlh/aws-lambda-run-your-code-for-free-1c7fa6714ee9">正如你记得的</a>，如果你的项目符合免费层条件，你可以免费使用许多AWS服务。</p><p id="46d7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里是数字的<a class="ae jk" href="https://cynapse.com/docs/numerics/" rel="noopener ugc nofollow" target="_blank">官方文档</a>。如您所见，在Numerics中，我们有许多方法将数据源连接到我们的仪表板:</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es jl"><img src="../Images/041eb2ed7513d900892bd97e3c21202b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cAav2OxK_uGVjgl14cw_9A@2x.jpeg"/></div></div></figure><p id="b98e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们的客户要求获取定制的JSON数据，因此我们可以为此使用定制的JSON连接器或AWS API网关连接器。由于我们需要一个用于仪表板的私有API，我们决定使用带有API密钥的AWS API Gateway。要构建相同的解决方案，您应该在AWS控制台上转到API Gateway并选择“Create API”。向下滚动到REST API，然后按“Build”:</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es jl"><img src="../Images/7995328a11b13e992d1b8af5f2e04cd2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LGtSqiBifz3EW6YVfkmp6Q@2x.jpeg"/></div></div></figure><p id="7546" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">输入新API的名称，离开区域端点。然后，您可以为API选择授权类型。它可以是查询头中的一个简单的API键，也可以是一个特殊的Lambda函数，作为一个授权器。</p><p id="cdf1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">转至“资源”,通过“活动”按钮创建一个新资源。选择一个友好的名称，作为访问我们功能的网址的一部分，例如“/rates”。切换到新的资源，创建一个新的GET-method，不要忘记输入Lambda函数名，当访问“/rates”API资源时，您计划调用这个函数。</p><p id="6379" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">转到GET-method图并点击Method Request。您必须在此处将API Key Required参数设置为“true”，这将保护您的API资源不被陌生人频繁执行，这可能会导致额外的金钱支出。您还可以添加一个URL查询字符串参数，用于区分来自仪表板的请求，即对于不同的货币，Lambda函数将返回不同的结果。</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es jx"><img src="../Images/8b2572598fe52bc42e87faf775ea09a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DIfDBh95Hu1kTqU1VxHJLw@2x.jpeg"/></div></div></figure><p id="21ce" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">添加的参数可以简单地在Lambda中作为字典的元素使用。您可以转到“集成请求”并设置映射模板。要映射所有最近创建的方法参数，请为请求正文传递选择“当没有定义模板时(推荐)”。添加带有application/json内容类型的映射模板，并生成模板“方法请求直通”或编写您自己的直通模板。</p><p id="d27c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用操作按钮部署API。选择要部署的阶段或创建新的阶段。通常有几个最常见的阶段:开发、测试和生产。如果需要，调整它们的参数。</p><p id="11ce" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为访问您的web服务和使用计划创建一个新的API密钥。稍后将需要密钥来配置Numerics小部件。</p><p id="2710" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">是时候写一些代码了。用自己喜欢的编程语言，也就是Python。用Lambda编写自己的数据转换逻辑。您可以通过访问<strong class="ih hj">事件['params']['querystring'] </strong>字典来读取URL查询字符串参数。这里有一个例子:</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es jy"><img src="../Images/48321624534e097e4ae51fc80de2c591.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*puwEyIgWi23mG4Y8ms2VsA@2x.jpeg"/></div></div></figure><p id="7b24" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">创建Lambda函数后，您就可以轻松地设置一个新的仪表板了。从App Store下载应用程序，如果你以前没有。点击“I”按钮(屏幕左上角):</p><div class="jm jn jo jp fd ab cb"><figure class="jz jq ka kb kc kd ke paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><img src="../Images/f8545195a954bff645e96080c6c33149.png" data-original-src="https://miro.medium.com/v2/resize:fit:1372/format:webp/1*3lyVDVwpEOQg1Xxvddh2dw@2x.jpeg"/></div></figure><figure class="jz jq kf kb kc kd ke paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><img src="../Images/c223605760752b4cff7921a5e2b3c6e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:630/format:webp/1*0o2esdQMLxq0PFTe35OZBA@2x.jpeg"/></div></figure></div><p id="941d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您应该进行订阅，以便能够在仪表板中设置多个仪表板或三个以上的小部件。要连接您的企业订阅，请使用菜单中的第一项—企业连接。最好现在就打开iCloud sync，这样您就可以在连接到同一个Apple ID的所有设备之间共享您的许可证。</p><p id="792b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下一步是创建一个新的仪表板，使用右上角的“+”按钮并输入任何名称。通过选择连接器列表下的Amazon API Gateway来添加您的第一个小部件。在API Gateway部分选择“Number from JSON data ”,为新帐户使用您的API密钥——它将放在GET-request to backend的标题中:</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es jl"><img src="../Images/9782279f6e34100ca4590e4eec4ac637.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M2qzdP_A2Npz3P4JXscs7Q@2x.jpeg"/></div></div></figure><p id="dd1c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">按照客户的要求，我们需要组合8种货币的信息，将它们全部添加到仪表板中。为此，我使用了具有不同方法参数的相同Lambda函数。此外，我将图像放在仪表板的中心。这是iPad上的最终视图:</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es jl"><img src="../Images/6f5e60628a8c340d8c5bc52da6b8613e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*48MhYAFmWsy-zKePE6rz6g@2x.jpeg"/></div></div></figure><p id="ab38" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">iPhone上的同一个仪表盘:</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es kg"><img src="../Images/02f9be830d90505b2598fb6ca952a978.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UTji7Yd_kiQxnPNPTlMJfQ@2x.jpeg"/></div></div></figure></div></div>    
</body>
</html>