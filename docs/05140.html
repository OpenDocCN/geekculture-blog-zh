<html>
<head>
<title>Create a reusable logger factory for python projects</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为python项目创建可重用的记录器工厂</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/create-a-reusable-logger-factory-for-python-projects-419ad408665d?source=collection_archive---------1-----------------------#2021-07-12">https://medium.com/geekculture/create-a-reusable-logger-factory-for-python-projects-419ad408665d?source=collection_archive---------1-----------------------#2021-07-12</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="8910" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">python中的设计模式— LoggerFactory</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/2921c22c7bfbe9595664a442caaa54fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FWPiSNOmg_KIOotRIx9LYQ.png"/></div></div></figure><p id="aff4" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">注:非会员，此故事可用</strong> <a class="ae kf" href="https://dineshkumarkb.com/tech/create-a-reusable-logger-factory-for-python-projects/" rel="noopener ugc nofollow" target="_blank"> <strong class="jl hj">此处</strong> </a> <strong class="jl hj">。</strong></p><h1 id="7ae2" class="kg kh hi bd ki kj kk kl km kn ko kp kq io kr ip ks ir kt is ku iu kv iv kw kx bi translated">简介:</h1><p id="b515" class="pw-post-body-paragraph jj jk hi jl b jm ky ij jo jp kz im jr js la ju jv jw lb jy jz ka lc kc kd ke hb bi translated">任何代码只有用适当的注释编写时才是可读的。你同意吗？我说过，开发人员的任务不仅仅是写代码。代码投入生产后，可维护性因素立即发挥作用。如果您的代码回答了以下问题，那么它是可维护的。</p><ul class=""><li id="562e" class="ld le hi jl b jm jn jp jq js lf jw lg ka lh ke li lj lk ll bi translated">你的代码可伸缩吗？</li><li id="2e13" class="ld le hi jl b jm lm jp ln js lo jw lp ka lq ke li lj lk ll bi translated">你的代码可读吗？</li><li id="5389" class="ld le hi jl b jm lm jp ln js lo jw lp ka lq ke li lj lk ll bi translated">你的代码可以调试吗？</li></ul><p id="8dd0" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">出于明显的原因，代码的作者不应该回答这些问题。你的同伴应该替你回答这些问题。或者，如果你不想自己做判断，最好的办法是6个月或1年后看看你的代码。如果你理解得很快，瞧！你的代码是可维护的。</p><h1 id="05c4" class="kg kh hi bd ki kj kk kl km kn ko kp kq io kr ip ks ir kt is ku iu kv iv kw kx bi translated">日志语句:</h1><p id="1ba5" class="pw-post-body-paragraph jj jk hi jl b jm ky ij jo jp kz im jr js la ju jv jw lb jy jz ka lc kc kd ke hb bi translated">我个人认为<strong class="jl hj">日志语句</strong>增强了读取和调试的能力。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lr"><img src="../Images/e4a5d05ef737c9cd6012b81de67effa2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FXIBdlIpPwp038m3z7bo9A.png"/></div></div><figcaption class="ls lt et er es lu lv bd b be z dx">image source: google</figcaption></figure><p id="858c" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">一个具有良好日志记录能力的项目大大减少了调试时间，并最终减少了每个缺陷的周转时间。因此，每个项目都应该有一个通用的定制日志类，可以在整个项目中重用。本文讨论了如何在您的python项目中实现自定义日志记录器类。</p><h1 id="0539" class="kg kh hi bd ki kj kk kl km kn ko kp kq io kr ip ks ir kt is ku iu kv iv kw kx bi translated">记录器工厂:</h1><p id="7780" class="pw-post-body-paragraph jj jk hi jl b jm ky ij jo jp kz im jr js la ju jv jw lb jy jz ka lc kc kd ke hb bi translated">正如你从名字中猜到的那样，我们将采用工厂模式来编写我们的自定义日志记录器类。然而，这只是工厂模式的一种适应，您可能无法完全理解实际的工厂模式。想法是在<code class="du lw lx ly lz b">logger_factory</code>文件中有对象创建逻辑，并使用一个<code class="du lw lx ly lz b">static method</code>来获得logger对象。不多不少。</p><p id="770f" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">那么，我们这里有什么？</p><ol class=""><li id="1f8f" class="ld le hi jl b jm jn jp jq js lf jw lg ka lh ke ma lj lk ll bi translated">记录器工厂类</li><li id="6a62" class="ld le hi jl b jm lm jp ln js lo jw lp ka lq ke ma lj lk ll bi translated">使用它们的模块类</li></ol><h2 id="7ba6" class="mb kh hi bd ki mc md me km mf mg mh kq js mi mj ks jw mk ml ku ka mm mn kw mo bi translated">LoggerFactory:</h2><p id="bce2" class="pw-post-body-paragraph jj jk hi jl b jm ky ij jo jp kz im jr js la ju jv jw lb jy jz ka lc kc kd ke hb bi translated">我们在一个私有方法中编写所有的日志对象创建逻辑(无论它在python中的名字是什么)<code class="du lw lx ly lz b">__create_logger(log_file, log_level)</code>。</p><p id="8ea6" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><code class="du lw lx ly lz b">get_logger(log_file, log_level)</code>文件将被暴露在类之外，供其他模块获取logger对象，并将文件名和日志级别传递给<code class="du lw lx ly lz b">__create_logger(...)</code>方法。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mp"><img src="../Images/4e75514d97006bc60810a5898609a462.png" data-original-src="https://miro.medium.com/v2/resize:fit:1274/format:webp/1*XrDSPXYXqcxLErMi-taPJA.png"/></div><figcaption class="ls lt et er es lu lv bd b be z dx">LoggerFactory implementation in Python</figcaption></figure><pre class="iy iz ja jb fd mq lz mr ms aw mt bi"><span id="44ff" class="mb kh hi lz b fi mu mv l mw mx">import logging<br/><br/><br/>class LoggerFactory(object):<br/><br/>    _LOG = None<br/><br/>    @staticmethod<br/>    def __create_logger(log_file,  log_level):<br/>        """<br/>        A private method that interacts with the python<br/>        logging module<br/>        """<br/>        # set the logging format<br/>        log_format = "%(asctime)s:%(levelname)s:%(message)s"<br/>        <br/>        # Initialize the class variable with logger object<br/>        LoggerFactory._LOG = logging.getLogger(log_file)<br/>        logging.basicConfig(level=logging.INFO, format=log_format, datefmt="%Y-%m-%d %H:%M:%S")<br/>        <br/>        # set the logging level based on the user selection<br/>        if log_level == "INFO":<br/>            LoggerFactory._LOG.setLevel(logging.INFO)<br/>        elif log_level == "ERROR":<br/>            LoggerFactory._LOG.setLevel(logging.ERROR)<br/>        elif log_level == "DEBUG":<br/>            LoggerFactory._LOG.setLevel(logging.DEBUG)<br/>        return LoggerFactory._LOG<br/><br/>    @staticmethod<br/>    def get_logger(log_file, log_level):<br/>        """<br/>        A static method called by other modules to initialize logger in<br/>        their own module<br/>        """<br/>        logger = LoggerFactory.__create_logger(log_file, log_level)<br/>        <br/>        # return the logger object<br/>        return logger</span></pre><p id="347e" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">您可以在您的模块中导入<code class="du lw lx ly lz b">LoggerFactory</code>类，并初始化记录器，如下所示。</p><pre class="iy iz ja jb fd mq lz mr ms aw mt bi"><span id="dc9b" class="mb kh hi lz b fi mu mv l mw mx">from loggerfactory import LoggerFactory<br/><br/># initialize the logger object<br/><br/>logger = LoggerFactory.get_logger("mymodule.py", log_level="INFO")<br/>logger.info(" Inside module 1")</span></pre><h1 id="1fb1" class="kg kh hi bd ki kj kk kl km kn ko kp kq io kr ip ks ir kt is ku iu kv iv kw kx bi translated">总结:</h1><p id="1cb7" class="pw-post-body-paragraph jj jk hi jl b jm ky ij jo jp kz im jr js la ju jv jw lb jy jz ka lc kc kd ke hb bi translated">当您有多个需要日志记录的模块时，创建这样的内部日志记录工厂会很方便。</p><p id="42da" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">这避免了在项目的每个模块中初始化python的日志库。请注意，您也可以用多种方式创建LoggerFactory。如果你喜欢自己的方法，你可以自由使用。</p><p id="ec95" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">如果你觉得这有帮助，请随时留下评论。</p></div><div class="ab cl my mz gp na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="hb hc hd he hf"><p id="431d" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><em class="nf">原载于2021年7月12日https://dock2learn.com<em class="nf"/><a class="ae kf" href="https://dock2learn.com/tech/create-a-reusable-logger-factory-for-python-projects/" rel="noopener ugc nofollow" target="_blank">。</a></em></p></div></div>    
</body>
</html>