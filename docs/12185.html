<html>
<head>
<title>Write an Integration test, not a Unit test</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">编写集成测试，而不是单元测试</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/write-an-integration-test-not-an-unit-test-a19572f880a8?source=collection_archive---------13-----------------------#2022-04-30">https://medium.com/geekculture/write-an-integration-test-not-an-unit-test-a19572f880a8?source=collection_archive---------13-----------------------#2022-04-30</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="9a5a" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">作为一个懒惰的软件工程师，我只想在必要的时候写代码。如果我碰巧写了代码，我想尽可能地利用它。如果这听起来像你，那么让我们看看集成测试如何让你的代码更有效率。</h2></div><h1 id="5a51" class="ix iy hi bd iz ja jb jc jd je jf jg jh io ji ip jj ir jk is jl iu jm iv jn jo bi translated">太长了，读不下去</h1><p id="116a" class="pw-post-body-paragraph jp jq hi jr b js jt ij ju jv jw im jx jy jz ka kb kc kd ke kf kg kh ki kj kk hb bi translated">当你有足够的时间或者它是你的系统的一个关键部分时，编写两个测试，集成测试和T2单元测试。当时间不在本质上时，先写<strong class="jr hj">集成</strong>测试。</p><h1 id="05d3" class="ix iy hi bd iz ja jb jc jd je jf jg jh io ji ip jj ir jk is jl iu jm iv jn jo bi translated">更多…</h1><blockquote class="kl km kn"><p id="4c84" class="jp jq ko jr b js kp ij ju jv kq im jx kr ks ka kb kt ku ke kf kv kw ki kj kk hb bi translated">集成测试——是一种软件测试，其中软件应用程序的不同单元、模块或组件作为一个组合实体进行测试。</p></blockquote><p id="61ce" class="pw-post-body-paragraph jp jq hi jr b js kp ij ju jv kq im jx jy ks ka kb kc ku ke kf kg kw ki kj kk hb bi translated">单元测试仅证明一个单元的<strong class="jr hj">正确工作。而集成测试证明<strong class="jr hj">的工作比一个单元</strong>多</strong> <strong class="jr hj">。</strong></p><h2 id="6b3a" class="kx iy hi bd iz ky kz la jd lb lc ld jh jy le lf jj kc lg lh jl kg li lj jn lk bi translated">被测系统</h2><p id="94e5" class="pw-post-body-paragraph jp jq hi jr b js jt ij ju jv jw im jx jy jz ka kb kc kd ke kf kg kh ki kj kk hb bi translated">为什么理解什么是被测系统很重要？它将帮助我们定义有效的测试。</p><blockquote class="kl km kn"><p id="b31e" class="jp jq ko jr b js kp ij ju jv kq im jx kr ks ka kb kt ku ke kf kv kw ki kj kk hb bi translated">受测系统(SUT) —正在测试是否正常运行的系统。</p></blockquote><p id="0711" class="pw-post-body-paragraph jp jq hi jr b js kp ij ju jv kq im jx jy ks ka kb kc ku ke kf kg kw ki kj kk hb bi translated"><strong class="jr hj">集成</strong>测试比<strong class="jr hj">单元</strong>测试覆盖更广的SUT是正常的。让我们考虑下面的测试:</p><figure class="ll lm ln lo fd lp"><div class="bz dy l di"><div class="lq lr l"/></div><figcaption class="ls lt et er es lu lv bd b be z dx">Integration test</figcaption></figure><p id="48f7" class="pw-post-body-paragraph jp jq hi jr b js kp ij ju jv kq im jx jy ks ka kb kc ku ke kf kg kw ki kj kk hb bi translated">上面测试的SUT是web服务中请求的整个过程。根据我们的断言，我们可以在这个web服务的所有层中发现一个潜在的问题。</p><figure class="ll lm ln lo fd lp er es paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="er es lw"><img src="../Images/f5a7cf3e44533626505f0aa22827ceb6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1uLjNEsrvjhP6JDyQ9YYvA.png"/></div></div><figcaption class="ls lt et er es lu lv bd b be z dx">System Under Test: Controller, Service, Repository and Database</figcaption></figure><p id="23dc" class="pw-post-body-paragraph jp jq hi jr b js kp ij ju jv kq im jx jy ks ka kb kc ku ke kf kg kw ki kj kk hb bi translated">下面是<strong class="jr hj">单元</strong>测试如何在web服务中寻找控制器:</p><figure class="ll lm ln lo fd lp"><div class="bz dy l di"><div class="lq lr l"/></div><figcaption class="ls lt et er es lu lv bd b be z dx">Unit test</figcaption></figure><figure class="ll lm ln lo fd lp er es paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="er es md"><img src="../Images/3d40dd078babcff2b164ee22c7e2b0fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z-xYIqa1BqYoCErViHGmnQ.png"/></div></div><figcaption class="ls lt et er es lu lv bd b be z dx">System Under Test: Controller</figcaption></figure><p id="5847" class="pw-post-body-paragraph jp jq hi jr b js kp ij ju jv kq im jx jy ks ka kb kc ku ke kf kg kw ki kj kk hb bi translated">正如我们所看到的，对于相似数量的代码，<strong class="jr hj">集成</strong>测试比<strong class="jr hj">单元</strong>测试覆盖了更广的SUT。</p><h1 id="0de5" class="ix iy hi bd iz ja jb jc jd je jf jg jh io ji ip jj ir jk is jl iu jm iv jn jo bi translated">结果</h1><p id="c845" class="pw-post-body-paragraph jp jq hi jr b js jt ij ju jv jw im jx jy jz ka kb kc kd ke kf kg kh ki kj kk hb bi translated">编写一个合适的集成是具有挑战性的，因为它需要初始设置。然而，随着时间的推移，它会得到回报。在开始的时候投入你的时间，然后对你的代码有一种稳定的感觉。</p><p id="93a3" class="pw-post-body-paragraph jp jq hi jr b js kp ij ju jv kq im jx jy ks ka kb kc ku ke kf kg kw ki kj kk hb bi translated">以下是如何确保你正在编写一个<strong class="jr hj">集成</strong>测试:</p><p id="9d47" class="pw-post-body-paragraph jp jq hi jr b js kp ij ju jv kq im jx jy ks ka kb kc ku ke kf kg kw ki kj kk hb bi translated">🗄️使用数据库的测试实例、外部依赖关系中的测试租户等。</p><p id="a667" class="pw-post-body-paragraph jp jq hi jr b js kp ij ju jv kq im jx jy ks ka kb kc ku ke kf kg kw ki kj kk hb bi translated">🖥️使用测试服务器，而不是嘲笑和刺伤。</p><p id="ace8" class="pw-post-body-paragraph jp jq hi jr b js kp ij ju jv kq im jx jy ks ka kb kc ku ke kf kg kw ki kj kk hb bi translated">🐳使用Docker进行更简单的依赖性管理。</p><h1 id="639b" class="ix iy hi bd iz ja jb jc jd je jf jg jh io ji ip jj ir jk is jl iu jm iv jn jo bi translated">资源</h1><ol class=""><li id="a812" class="me mf hi jr b js jt jv jw jy mg kc mh kg mi kk mj mk ml mm bi translated">我的<a class="ae mn" href="https://github.com/alkondrashov/cars" rel="noopener ugc nofollow" target="_blank">示例</a>的一个<strong class="jr hj">集成</strong>测试。请参阅自述文件，了解如何运行它。</li><li id="4282" class="me mf hi jr b js mo jv mp jy mq kc mr kg ms kk mj mk ml mm bi translated"><a class="ae mn" href="https://mermaid.live" rel="noopener ugc nofollow" target="_blank">美人鱼digram编辑器</a>:作为代码的图。</li></ol></div></div>    
</body>
</html>