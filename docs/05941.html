<html>
<head>
<title>Turn Your Raspberry Pi Into a Server to Run Your Java Spring MVC App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将您的Raspberry Pi变成一个服务器来运行您的Java Spring MVC应用程序</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/turn-your-raspberry-pi-into-a-server-to-run-your-java-spring-mvc-app-862214279587?source=collection_archive---------2-----------------------#2021-08-03">https://medium.com/geekculture/turn-your-raspberry-pi-into-a-server-to-run-your-java-spring-mvc-app-862214279587?source=collection_archive---------2-----------------------#2021-08-03</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/3ec43eedc43ce4dfb44be0b68ad7393f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hPu5yms2fyrm4lIR"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Photo by <a class="ae iu" href="https://unsplash.com/@vishnumaiea?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Vishnu Mohanan</a> on <a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="89ef" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">无论您是物联网爱好者还是专业的全栈Java开发人员，您可能偶尔会希望以较低的成本在自己的服务器上部署应用程序。进入树莓派！</p><p id="e397" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这当然不是唯一的方法，但是因为没有找到一个全面的开始来完成how-to，我决定自己写。</p><p id="f5e4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">材料:</strong> <br/> -Raspberry Pi(我用的是8GB的Raspberry Pi 4)<br/>-Raspberry Pi的USB电源线<br/> -MicroSD卡(推荐高质量32GB)<br/>-连接到互联网的路由器<br/>-带有JDK的开发工作站、Spring Tools Suite 4、Raspberry Pi Imager和Git Bash<br/>-Raspberry Pi的键盘和显示器<br/> <br/> <strong class="ix hj">可选但推荐:</strong><br/>-Raspberry Pi的外壳和风扇<br/>-以太网电缆<br/></p><div class="jt ju jv jw fd ab cb"><figure class="jx ij jy jz ka kb kc paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><img src="../Images/d96996473eaec73fb414f122fb2cad5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*m74Jml6lgLX2tDSTzPBV1A.png"/></div></figure><figure class="jx ij jy jz ka kb kc paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><img src="../Images/85f71532e9332702dbffb11a0eb609d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*V-uq930GZ8rHBV2Dheln_w.png"/></div><figcaption class="iq ir et er es is it bd b be z dx kd di ke kf">I bought the official Raspberry Pi case and fan kit.</figcaption></figure></div><h1 id="7155" class="kg kh hi bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">创建硬盘映像并安装Ubuntu</h1><p id="ea2d" class="pw-post-body-paragraph iv iw hi ix b iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo li jq jr js hb bi translated">将MicroSD插入我的装有Raspberry Pi Imager的工作站，我决定安装Ubuntu服务器。我对Ubuntu的偏爱纯粹是出于熟悉。</p><p id="86ee" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在Raspberry Pi成像仪中:<br/> <strong class="ix hj">选择操作系统&gt; &gt;其他通用操作系统&gt; &gt; Ubuntu Server(版本)适用于arm64架构的64位服务器操作系统</strong></p><figure class="jt ju jv jw fd ij er es paragraph-image"><div class="er es lj"><img src="../Images/caf9baab941cb245d3689af2b2e6a201.png" data-original-src="https://miro.medium.com/v2/resize:fit:1376/format:webp/1*Zmi-fmgI0FkrtT9GkuctZQ.png"/></div><figcaption class="iq ir et er es is it bd b be z dx">I went with Ubuntu Server 21.04</figcaption></figure><p id="7f8d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">接下来，您将选择您的存储磁盘(您刚刚插入的MicroSD ),然后单击“写入”。这应该只需要大约10分钟。比这长得多可能是一个危险信号，表明您需要更高质量的MicroSD卡。</p><p id="e62e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我完全是偶然了解到，超过32GB的MicroSD卡通常用于相机和其他媒体设备，最初可能不会作为一个选项出现在成像仪软件中。工作原理是更高容量的卡被预格式化为exFAT而不是FAT32。我不知道为什么会有所不同，因为成像仪无论如何都会重新格式化磁盘。</p><p id="b235" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">愚蠢的我选择了64GB的硬盘(要么做大，要么回家！)而这件事就发生在我身上。我奇怪的解决办法是插入一个32GB的磁盘，成像仪检测到了，然后我取出它，插入64GB的磁盘，它检测到了！我的建议是坚持使用32GB的硬盘。</p><p id="0fe3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">一旦成像，将MicroSD插入您的树莓Pi。插上显示器和键盘，然后插上电源。鼠标呢？我们要像1989年一样狂欢！</p><p id="888e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在启动时，你会看到一个命令行提示登录，首先输入用户名，然后输入密码。不明显的是用户名和密码都是“ubuntu”。</p><pre class="jt ju jv jw fd lk ll lm ln aw lo bi"><span id="ba69" class="lp kh hi ll b fi lq lr l ls lt">username: ubuntu<br/>password: ubuntu //this input is hidden</span></pre><p id="e22a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然后，您将得到输入新密码并确认该密码的提示。瞧啊。Ubuntu服务器已安装。</p><p id="db22" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">此时，您会注意到您仍然处于命令提示符状态，并且GUI操作系统没有启动。这就是为什么我们不需要鼠标；Ubuntu Server纯粹是命令行界面。</p><h1 id="78bb" class="kg kh hi bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">连接到局域网</h1><p id="e629" class="pw-post-body-paragraph iv iw hi ix b iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo li jq jr js hb bi translated">连接到局域网的最简单和推荐的方法是使用以太网电缆。</p><p id="d810" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果像我一样，你的工作站离你的路由器太远，这不是一个实用的方法，你仍然可以通过你的Ubuntu终端无线连接。</p><p id="63fe" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">首先你需要识别网络接口。会是wlan0或者wlp3s0之类的。</p><pre class="jt ju jv jw fd lk ll lm ln aw lo bi"><span id="e683" class="lp kh hi ll b fi lq lr l ls lt">ls /sys/class/net</span></pre><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lu"><img src="../Images/4e025c35e8f32579c194e2735006f5b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1276/format:webp/1*Bs5IEvo44XKytSiIyvNe0Q.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Mine was wlan0</figcaption></figure><p id="fb0c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然后找到网络配置文件:</p><pre class="jt ju jv jw fd lk ll lm ln aw lo bi"><span id="7620" class="lp kh hi ll b fi lq lr l ls lt">ls /etc/netplan</span></pre><p id="3c3e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">找到文件名后，您会想要编辑它:</p><pre class="jt ju jv jw fd lk ll lm ln aw lo bi"><span id="cff9" class="lp kh hi ll b fi lq lr l ls lt">sudoedit /etc/netplan/[filename]</span></pre><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lv"><img src="../Images/584de323628e6502efeee16866a1a872.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ojQZtj7L_5b_oQfUEo8drQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Mine was named “50-cloud-init.yaml”</figcaption></figure><p id="c9a0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这将在名为Nano的命令行文本编辑器程序中打开该文件。如果你不熟悉像这样的老式文本编辑器，你会想要花一些时间来查找Nano和它的界面如何工作。</p><p id="5d1a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">该文件应该已经为您的以太网连接列出了一些参数，您只需在“版本:2”一行后添加您的wifi配置信息，如下所示:</p><pre class="jt ju jv jw fd lk ll lm ln aw lo bi"><span id="2a8e" class="lp kh hi ll b fi lq lr l ls lt"><br/> wifis:<br/>     wlan0: #your interface type<br/>         optional: true<br/>         access-points:<br/>             “[YOUR SSID GOES HERE]”:<br/>                 password: “[YOUR PASSWORD GOES HERE]”<br/>         dhcp4: true<br/></span></pre><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lw"><img src="../Images/03e579eb71bca657b790d081538c0365.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AsjzeCwnJaX0mfuGnAaeNQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Your file should look something like this</figcaption></figure><p id="f51f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">虽然看起来有制表符缩进，但不要使用制表符！我输入了四个空格来表示缩进。</p><p id="4ad2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然后，您将输入命令:</p><pre class="jt ju jv jw fd lk ll lm ln aw lo bi"><span id="89f5" class="lp kh hi ll b fi lq lr l ls lt">sudo netplan apply</span></pre><p id="0576" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果您遇到任何问题，可以重试:</p><pre class="jt ju jv jw fd lk ll lm ln aw lo bi"><span id="5e7c" class="lp kh hi ll b fi lq lr l ls lt">sudo netplan –debug apply</span></pre><p id="f4f5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我没有遇到任何问题，所以很遗憾，我没有任何故障排除技巧。</p><p id="5f58" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在您已经连接上了，您可以找到路由器分配给您的Raspberry Pi的本地IP地址:</p><pre class="jt ju jv jw fd lk ll lm ln aw lo bi"><span id="529b" class="lp kh hi ll b fi lq lr l ls lt">hostname -I</span></pre><p id="d38c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这将是第一组数字，通常是192.168.1.x。</p><p id="c9a1" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果您的设备同时通过以太网和wifi连接，第一个地址通常是与通过以太网连接相对应的地址(推荐)。</p><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lx"><img src="../Images/742205841cf227e863e9e739d5d6f081.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/format:webp/1*WVEPDn40WtJ2YXZcocOd9g.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Since my Raspberry Pi is connected via both wifi AND ethernet, two IP addresses are listed (wifi boxed in yellow, ethernet boxed in green)</figcaption></figure><p id="79f0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">当我第一次这样做时，我首先通过wifi连接，但后来我把我的Pi从键盘和显示器上断开，并用以太网电缆将其插入路由器。</p><h1 id="e73e" class="kg kh hi bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">通过SSH连接</h1><p id="e9b1" class="pw-post-body-paragraph iv iw hi ix b iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo li jq jr js hb bi translated">将您的工作站连接到与您的Raspberry Pi相同的路由器上，在您的开发工作站上打开Git Bash anywhere并启动您的SSH连接:</p><pre class="jt ju jv jw fd lk ll lm ln aw lo bi"><span id="cac4" class="lp kh hi ll b fi lq lr l ls lt">ssh ubuntu@[your IP address]</span></pre><p id="a6f5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">它应该会要求您输入密码。同样，当您输入密码时，光标会闪烁，但不会移动。</p><h1 id="aa1d" class="kg kh hi bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">安装软件</h1><p id="a2c3" class="pw-post-body-paragraph iv iw hi ix b iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo li jq jr js hb bi translated">首先更新您的软件包索引，以确保您获得最新版本的软件:</p><pre class="jt ju jv jw fd lk ll lm ln aw lo bi"><span id="f6a4" class="lp kh hi ll b fi lq lr l ls lt">sudo apt-get update</span></pre><p id="f648" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在接下来的几个步骤中，您将最终使用“sudo apt-get install…”。</p><p id="e79f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">阿帕奇</strong></p><pre class="jt ju jv jw fd lk ll lm ln aw lo bi"><span id="2185" class="lp kh hi ll b fi lq lr l ls lt">sudo apt-get install apache2</span></pre><p id="4059" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这将安装Apache2，它是您的Raspberry Pi的服务器软件。一旦完成，它将自动开始运行。</p><p id="3274" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您可以通过在工作站上打开浏览器并在URL字段中输入您的Raspberry Pi的IP地址来进行测试。如果你看到一个标题为“Apache2 Ubuntu默认页面”的网页，你的服务器正在工作！</p><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ly"><img src="../Images/2bbd00fd620a624f029ba5d98997d472.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E_CUOcIIsxAssHsPze41Yg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Your server is working!</figcaption></figure><p id="9076" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> Java </strong></p><p id="264f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您将把您的Java程序编译成一个. war(web版本的. jar)。为了在服务器上运行它，你需要安装JDK。</p><pre class="jt ju jv jw fd lk ll lm ln aw lo bi"><span id="bb4e" class="lp kh hi ll b fi lq lr l ls lt">sudo apt-get install default-jdk</span></pre><p id="0e3b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">安装后，您可以通过输入以下内容检查Java的版本来验证安装是否成功:</p><pre class="jt ju jv jw fd lk ll lm ln aw lo bi"><span id="1aca" class="lp kh hi ll b fi lq lr l ls lt">java -version</span></pre><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lz"><img src="../Images/b2dd6c9eaf116c9b4d384a21cd5cd077.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bYzhRivmmM0264X7mCkPiA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Version “11.0.11” installed otherwise known as Java 11</figcaption></figure><p id="e836" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果安装正确，它会显示您想要记录的已安装版本。为了运行您的应用程序，它必须与您正在编译的Java版本兼容。战争为(通常相等或更大)。</p><p id="3cc3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> MySQL </strong></p><p id="4109" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果您的应用程序使用数据库(根据定义，全栈应用程序会使用数据库)，您需要安装MySQL Server。我这样做过几次，每次都有点棘手。</p><pre class="jt ju jv jw fd lk ll lm ln aw lo bi"><span id="5a4d" class="lp kh hi ll b fi lq lr l ls lt">sudo apt-get install mysql-server</span></pre><p id="449f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这将把MySQL安装到您的Raspberry Pi服务器上。它应该会自动弹出一个屏幕，提示您为root用户设置密码。您需要该密码与您在工作站上用于应用程序的密码相同(在Spring Boot项目的application.properties中设置)。</p><p id="bd87" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">否则，您需要运行安全安装:</p><pre class="jt ju jv jw fd lk ll lm ln aw lo bi"><span id="e8bb" class="lp kh hi ll b fi lq lr l ls lt">sudo mysql_secure_installation</span></pre><p id="cca4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然后按照提示设置密码。</p><p id="9d7b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为了确保设置正确，您可以在不使用sudo命令的情况下登录MySQL进行检查:</p><pre class="jt ju jv jw fd lk ll lm ln aw lo bi"><span id="de8a" class="lp kh hi ll b fi lq lr l ls lt">mysql -u root -p</span></pre><p id="fe30" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">该命令使用-u参数和' root '来指定您作为root用户登录，使用-p来表示您正在使用密码。</p><p id="1879" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">下一个提示将要求您输入密码。</p><p id="ff3a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果您通过SSH远程登录，您的访问被拒绝，并出现以下错误:</p><pre class="jt ju jv jw fd lk ll lm ln aw lo bi"><span id="e29f" class="lp kh hi ll b fi lq lr l ls lt"> ERROR 1698 (28000): Access denied for user ‘root’@’localhost’</span></pre><p id="b243" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这可能是因为根用户被设置为“auth_socket”作为它的插件，这可能是你被拒绝远程访问的一个原因。</p><p id="c2b8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这可以通过以下步骤将插件更改为“mysql_native_password”来解决:</p><pre class="jt ju jv jw fd lk ll lm ln aw lo bi"><span id="2ec1" class="lp kh hi ll b fi lq lr l ls lt">sudo mysql -u root </span></pre><p id="e9a2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这将使您无需输入密码即可登录。</p><p id="ea46" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们将检查根用户插件。对于MySQL提示，输入以下查询命令:</p><pre class="jt ju jv jw fd lk ll lm ln aw lo bi"><span id="f443" class="lp kh hi ll b fi lq lr l ls lt">USE mysql;<br/> SELECT User, Host, plugin FROM mysql.user;</span></pre><p id="9bb1" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果是“auth_socket”:</p><pre class="jt ju jv jw fd lk ll lm ln aw lo bi"><span id="e9cd" class="lp kh hi ll b fi lq lr l ls lt">USE mysql;<br/> UPDATE user SET plugin=”mysql_native_password” WHERE User=”root”;<br/> FLUSH PRIVILEGES;</span></pre><p id="a045" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然后通过重复第一个查询来验证是否发生了更改。</p><pre class="jt ju jv jw fd lk ll lm ln aw lo bi"><span id="8169" class="lp kh hi ll b fi lq lr l ls lt">quit</span></pre><p id="29c2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">回到您的终端，您将重置MySQL:</p><pre class="jt ju jv jw fd lk ll lm ln aw lo bi"><span id="b6f4" class="lp kh hi ll b fi lq lr l ls lt">sudo service mysql restart</span></pre><p id="48c9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">执行此操作时，您最初设置的密码可能已被删除。因此，如果您仍然无法使用密码登录，请通过不使用密码登录来测试这一点(您将尝试不使用“sudo”命令):</p><pre class="jt ju jv jw fd lk ll lm ln aw lo bi"><span id="7219" class="lp kh hi ll b fi lq lr l ls lt">mysql -u root</span></pre><p id="f890" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">退出MySQL并使用以下命令设置您的密码:</p><pre class="jt ju jv jw fd lk ll lm ln aw lo bi"><span id="42b9" class="lp kh hi ll b fi lq lr l ls lt">mysqladmin -u root password [your password]</span></pre><p id="66d8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，您应该能够以标准方式毫无问题地登录MySQL了</p><pre class="jt ju jv jw fd lk ll lm ln aw lo bi"><span id="60f2" class="lp kh hi ll b fi lq lr l ls lt">mysql -u root -p</span></pre><h1 id="e074" class="kg kh hi bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">复制您的MySQL模式</h1><p id="bd01" class="pw-post-body-paragraph iv iw hi ix b iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo li jq jr js hb bi translated">在应用程序运行之前，您需要在服务器上复制方案。</p><p id="0434" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您可以在服务器上手动设置模式和表。或者您可以从MySQL工作台的模式中复制它们。</p><p id="7b0b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">打开您的MySQL工作台并转到:</p><p id="9a1b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">管理&gt; &gt;数据导出</strong></p><p id="6cc2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您将检查/选择以下内容:</p><p id="9b8e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">-您想要复制的模式<br/>-导出到自包含文件<br/>-在单个事务中创建转储(仅自包含文件)<br/>-包括创建模式</p><p id="20ca" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您也可以更新“导出到自包含文件”选项旁边的文件路径。</p><p id="5a1b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">单击“开始导出”</p><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ma"><img src="../Images/ac7137d8795c84c73b80d6ed9ee767c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y0WGMBOpN0C8OxBInpIsLg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">I’ve selected the Solutions Schema</figcaption></figure><p id="2063" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然后，您将找到该文件，并在您最喜欢的文本编辑器中打开。复制文件的全部内容。然后在登录到MySQL的SSH会话中，粘贴转储(记住，您必须右键单击并选择“粘贴”,因为CTRL-V和其他常见热键将不再在终端中工作！)</p><p id="b1a0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">仍然在MySQL中，使用以下命令确保您的数据库已经迁移:</p><pre class="jt ju jv jw fd lk ll lm ln aw lo bi"><span id="2551" class="lp kh hi ll b fi lq lr l ls lt">SHOW databases;</span></pre><figure class="jt ju jv jw fd ij er es paragraph-image"><div class="er es mb"><img src="../Images/738f57b3f526aaf4a12b115ac29ff5a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*IlGx7vY6n9wa_Hlj-gZaWg.png"/></div><figcaption class="iq ir et er es is it bd b be z dx">Success!</figcaption></figure><p id="7800" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果您看不到您的数据库，可能是因为数据流中隐藏了一个错误，可能是这样的:</p><pre class="jt ju jv jw fd lk ll lm ln aw lo bi"><span id="226f" class="lp kh hi ll b fi lq lr l ls lt">Unknown collation: ‘utf8mb4_unicode_ci’ </span></pre><p id="80aa" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">你要做的就是回到转储文件，找到“utf8mb4_0900_ai_ci”，替换成“utf8mb4_general_ci”。</p><p id="bd8d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">重复将编辑过的文本复制到MySQL会话中的过程，现在应该可以工作了。</p><h1 id="9c5c" class="kg kh hi bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">编译Java应用程序</h1><p id="21fe" class="pw-post-body-paragraph iv iw hi ix b iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo li jq jr js hb bi translated">在Spring Tool Suite中开发Java应用程序时，您可能已经多次测试过您的应用程序，方法是进入<strong class="ix hj">作为&gt; &gt; Spring Boot应用程序</strong>，然后在浏览器中打开<a class="ae iu" href="http://localhost:8080" rel="noopener ugc nofollow" target="_blank"><strong class="ix hj">http://localhost:8080</strong></a><strong class="ix hj"/>。向朋友和家人展示你的应用当然很有趣，但是如果你必须在你的工作站上打开Spring Tool Suite来运行它，那就没什么用了。</p><p id="4e3e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在做一些修改之前，您将最后一次运行它，以确保它可以工作并准备好部署。</p><p id="042f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">当你准备好了，你将找到你的应用程序类，它包含了你的应用程序的主入口点方法。</p><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mc"><img src="../Images/9176e9b5a578c19d6d5bcd3cb14f6dec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xDdvVMy9OiHrtpuV_6Uk1A.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Main entry point method in my SolutionsApplication.java file</figcaption></figure><p id="fb2a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们将在<strong class="ix hj"> main方法</strong>之后添加以下代码，以将应用指向端口9090:</p><pre class="jt ju jv jw fd lk ll lm ln aw lo bi"><span id="9ebd" class="lp kh hi ll b fi lq lr l ls lt"><a class="ae iu" href="http://twitter.com/Bean" rel="noopener ugc nofollow" target="_blank">@Bean</a><br/>    public TomcatServletWebServerFactory servletContainer() {<br/>        TomcatServletWebServerFactory tomcat = new TomcatServletWebServerFactory();<br/>        Connector ajpConnector = new Connector("AJP/1.3");<br/>        ajpConnector.setPort(9090);<br/>        ajpConnector.setSecure(false);<br/>        ajpConnector.setAllowTrace(false);<br/>        ajpConnector.setScheme("http");<br/>       ((AbstractAjpProtocol&lt;?&gt;)ajpConnector.getProtocolHandler()).setSecretRequired(false);<br/>    tomcat.addAdditionalTomcatConnectors(ajpConnector);<br/>    return tomcat;<br/>    }</span></pre><p id="aadb" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">该代码将需要以下导入语句:</p><pre class="jt ju jv jw fd lk ll lm ln aw lo bi"><span id="f432" class="lp kh hi ll b fi lq lr l ls lt">import org.apache.catalina.connector.Connector;<br/>import org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory;<br/>import org.springframework.context.annotation.Bean;<br/>import org.apache.coyote.ajp.AbstractAjpProtocol;</span></pre><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es md"><img src="../Images/06b9bdcb29cffcc3438b89595c4722c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7Um8bM4pZQRWBtDVNgGkFw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">I’ve added this code OUTSIDE my main method in SolutionsApplication.java</figcaption></figure><p id="5cc4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">保存该类文件后，我们将通过打开<strong class="ix hj"> pom.xml </strong>文件并转到<strong class="ix hj"> overview </strong>选项卡来仔细检查该应用程序是否会编译为. war。如果设置为。jar，我们需要将它改为. war。我们还需要确保编写应用程序的Java版本与您的服务器上安装的版本兼容。</p><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es me"><img src="../Images/061e7d8cab38800f77ee8c5f2dd1888b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-ZxRCn0KvsXDNGR5pGNdQg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">This will compile as a .war as Java 1.8 (also known as Java 8). Since we installed Java 11.0.11 (Java 11) on our server, this will run.</figcaption></figure><p id="ce2d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果您进行了任何更新或只是为了确认，我们将右键单击项目名称并转到<strong class="ix hj"> Maven &gt; &gt;更新项目… </strong></p><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mf"><img src="../Images/2748dd68255efc345d52a660aefcf33d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l1Pud-oZr1PNChFaEAYwjw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">This will ensure any updates I’ve made will be taken into effect</figcaption></figure><p id="2176" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">出现提示时，只需单击“确定”。</p><p id="bcf1" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">最后，我们将编译我们的。右键单击项目并选择<strong class="ix hj">Run As&gt;T29】9 Maven install</strong>来war包。</p><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mg"><img src="../Images/aa6fa32eb66149ce557c98cb17386c24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f48WsJcGM1_lgListkyjVQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">This will package your project as a .war file</figcaption></figure><p id="a51d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">控制台输出将显示文件打包到的位置，可能是:</p><p id="13d9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">C:/Users/[您的用户名]/. m2/repository/[您的包目录路径]/[您的项目名]/0 . 0 . 1-快照</strong></p><h1 id="3996" class="kg kh hi bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">在Apache中设置代理</h1><p id="e9b4" class="pw-post-body-paragraph iv iw hi ix b iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo li jq jr js hb bi translated">我不打算撒谎，这部分有点挑剔，有时会让我焦虑。因为我们已经设置了我们的代码，所以AJP连接器被设置为端口9090，我们需要让我们的Apache服务器也指向那里。</p><p id="d245" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们将首先在Apache中启用代理模式，如下所示:</p><pre class="jt ju jv jw fd lk ll lm ln aw lo bi"><span id="3cf0" class="lp kh hi ll b fi lq lr l ls lt">sudo a2enmod proxy<br/>sudo a2enmod proxy_ajp</span></pre><p id="c993" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您将得到一条关于重启Apache的消息，但是现在让我们先确定一下。我们必须修改。conf文件，告诉它在端口9090找到我们的应用程序。我们将在<strong class="ix hj">/etc/Apache 2/sites-available</strong>中找到名为<strong class="ix hj"> 000-default.conf </strong>的文件:</p><pre class="jt ju jv jw fd lk ll lm ln aw lo bi"><span id="7f06" class="lp kh hi ll b fi lq lr l ls lt">cd /etc/apache2/sites-available<br/>sudo vim 000-default.conf</span></pre><p id="60c0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我知道你在想什么。“你之前用的是Nano，现在用的是VIM！？我认识你吗！？!"</p><p id="420d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我最初是用VIM学会这样做的，所以我觉得这样做很舒服。不要让我告诉你如何生活；喜欢就用Nano。最重要的是你需要在文件末尾的<virtualhost>标签中添加这个:</virtualhost></p><pre class="jt ju jv jw fd lk ll lm ln aw lo bi"><span id="4e1c" class="lp kh hi ll b fi lq lr l ls lt">ProxyPass / ajp://localhost:9090/<br/>ProxyPassReverse / ajp://localhost:9090/</span></pre><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mh"><img src="../Images/099bc3f976d0504a556c745193b8809a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m-YCadFHN7H5LVfH3Sp9lA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Editing the file in VIM</figcaption></figure><p id="765a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">旁注:如果您决定使用VIM，您会希望对VIM有一点熟悉，因为它的界面非常独特。您需要键入“I”以进入界面模式，然后才能真正正确地更改文本。然后按ESC键退出界面模式，然后输入“:”(或者技术上是CTRL+；)来输入命令。“w”是写(或保存)的命令,“q”退出应用程序。所以在点击ESC之后，下面的代码将保存您的更改并退出VIM:</p><pre class="jt ju jv jw fd lk ll lm ln aw lo bi"><span id="a602" class="lp kh hi ll b fi lq lr l ls lt">:wq</span></pre><p id="1a80" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">下一步是通过不归路(除非你卸载Apache并重新安装它，这本身就是一个比你想象的更费力的过程)。</p><p id="4754" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们将使用以下命令重新启动Apache，同时交叉手指或利用您可能与您选择的信仰系统的任何精神关系:</p><pre class="jt ju jv jw fd lk ll lm ln aw lo bi"><span id="f3d2" class="lp kh hi ll b fi lq lr l ls lt">sudo service apache2 restart</span></pre><p id="43c3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在您的服务器指向端口9090。能够在浏览器中打开Apache的默认页面的舒适环境已经不复存在了。</p><p id="9e25" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">但是，在我们上传并运行Java应用程序之前，我们不会知道一切是否如预期的那样工作。</p><h1 id="af98" class="kg kh hi bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">将您的应用上传到服务器</h1><p id="c43c" class="pw-post-body-paragraph iv iw hi ix b iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo li jq jr js hb bi translated">导航到您的。war文件位置并打开一个Git Bash会话(或者导航到您。与Git Bash的战争)。</p><p id="abc9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们想复制我们的新。使用以下命令将war文件发送到我们的服务器:</p><pre class="jt ju jv jw fd lk ll lm ln aw lo bi"><span id="aaf0" class="lp kh hi ll b fi lq lr l ls lt">scp [your filename] ubuntu@[your server's IP]:~/</span></pre><p id="4b8f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这会将您的新。服务器根目录下的war文件。发疯的一个非常好的方法是忘记在你的服务器IP后面加上“:~/”，然后反复失败，直到你发现你做错了什么:~/</p><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mi"><img src="../Images/a570dff8723a6aedd0ca28d2a9c661fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Cq42WuHn8iGMtAzp7DE_EA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Copying the files gives you a nice little ETA</figcaption></figure><p id="d595" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们可以在SSH会话中仔细检查文件是否确实到达了服务器的根目录:</p><pre class="jt ju jv jw fd lk ll lm ln aw lo bi"><span id="da6a" class="lp kh hi ll b fi lq lr l ls lt">cd ~/<br/>ls</span></pre><figure class="jt ju jv jw fd ij er es paragraph-image"><div class="er es mj"><img src="../Images/f4ec11ae3977198b5522eb791a12ceb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1124/format:webp/1*MicHETnvXFU4dz_aXP5yxw.png"/></div><figcaption class="iq ir et er es is it bd b be z dx">Here’s my file (in red for some reason)</figcaption></figure><p id="b7f0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们将创建一个新目录并移动我们的。那里的战争:</p><pre class="jt ju jv jw fd lk ll lm ln aw lo bi"><span id="8121" class="lp kh hi ll b fi lq lr l ls lt">sudo mkdir /var/springApp<br/>sudo mv ~/[your filename] /var/springApp/</span></pre><p id="1932" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们的应用程序现在在我们的服务器上！</p><p id="7983" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">导航到我们的应用程序位置<strong class="ix hj"> /var/springApp </strong>，我们可以使用以下命令运行我们的应用程序:</p><pre class="jt ju jv jw fd lk ll lm ln aw lo bi"><span id="a034" class="lp kh hi ll b fi lq lr l ls lt">java -jar [your .war filename]</span></pre><p id="804a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">当您运行应用程序时，您的终端将开始一个类似于Spring Tool Suite中控制台的数据流。</p><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mk"><img src="../Images/74a44b779aad3c502eb2ba540680c765.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z_6KPlDsHeKfazUBUNHZjg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">It’s a good sign if you see this!</figcaption></figure><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ml"><img src="../Images/5763f7401d7c7313729be61e1c27f67c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xjOXDNU5zqIvawBc5q-tzA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">“JVM running for…” means your app finished loading successfully!</figcaption></figure><p id="be6c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这里看起来不错，现在在浏览器中导航到您的服务器的IP，您应该会看到您的应用程序正在运行。</p><p id="7a2b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">根据您的连接(尤其是如果您的服务器是通过wifi而不是以太网连接的)，加载您的web应用程序可能需要一段时间。如果您的终端显示“x毫秒内完成初始化”，这意味着您的浏览器成功连接到您的应用程序。</p><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mm"><img src="../Images/c3188aa13234b4cfc40c7cb225a5e56b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wUZE4HrtAXIN3FpQ4UGeOg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">This message will appear the first time your browser sends a request to your app</figcaption></figure><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mn"><img src="../Images/2da7560d795b02fd31c181dd6f316926.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VyMS924oQAKht_DX_BPlCg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">SUCCESS!</figcaption></figure><h1 id="3e05" class="kg kh hi bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">保持您的应用程序运行</h1><p id="10db" class="pw-post-body-paragraph iv iw hi ix b iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo li jq jr js hb bi translated">这很好，但是一旦我们在工作站上关闭SSH，应用程序就会开始运行。我的意思是，我们不需要打开工作站就能运行我们的应用程序，这难道不是重点吗？</p><p id="ef22" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为了让应用程序持久，我们必须创建一个systemd脚本来保持我们的应用程序运行。我们可以关闭SSH会话或按CTRL+C来关闭Java应用程序，并返回到服务器上的命令行提示符。</p><p id="99b3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然后我们将创建我们的脚本文件:</p><pre class="jt ju jv jw fd lk ll lm ln aw lo bi"><span id="9b37" class="lp kh hi ll b fi lq lr l ls lt">cd /etc/systemd/system<br/>sudo touch [App name].service // creates an empty text file <br/>sudo vim [or nano] [App name].service</span></pre><p id="74f2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们的新服务文件需要编写如下:</p><pre class="jt ju jv jw fd lk ll lm ln aw lo bi"><span id="98bb" class="lp kh hi ll b fi lq lr l ls lt">[Unit]</span><span id="c29c" class="lp kh hi ll b fi mo lr l ls lt">Description=Whatever you want to put here</span><span id="5616" class="lp kh hi ll b fi mo lr l ls lt">After=syslog.target</span><span id="8e98" class="lp kh hi ll b fi mo lr l ls lt">[Service]</span><span id="07b2" class="lp kh hi ll b fi mo lr l ls lt">User=ubuntu</span><span id="a33d" class="lp kh hi ll b fi mo lr l ls lt">ExecStart=/usr/bin/java -jar /var/springApp/[your .war filename]</span><span id="368e" class="lp kh hi ll b fi mo lr l ls lt">SuccessExitStatus=143</span><span id="a5ce" class="lp kh hi ll b fi mo lr l ls lt">[Install]</span><span id="42a1" class="lp kh hi ll b fi mo lr l ls lt">WantedBy=multi-user.target</span></pre><p id="ca77" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">保存脚本后，我们必须启用服务:</p><pre class="jt ju jv jw fd lk ll lm ln aw lo bi"><span id="105c" class="lp kh hi ll b fi lq lr l ls lt">sudo systemctl enable [name of your .service you just created]</span></pre><p id="2acb" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在你可以开始了:</p><pre class="jt ju jv jw fd lk ll lm ln aw lo bi"><span id="7824" class="lp kh hi ll b fi lq lr l ls lt">sudo systemctl start [name of service WITHOUT .service suffix]</span></pre><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mp"><img src="../Images/d59107efea10ec167fa6c9006eec30ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*se0PUA1Qjgkh30pirgKwCg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">This is what it should look like to enable and start your .service to run your Java app</figcaption></figure><p id="e8d2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">作为一个严格的测试，关闭您的SSH会话，并在浏览器上导航到您的本地服务器。如果你能够加载你的应用程序，你就已经越过了终点线！</p><p id="34d7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">根据我们编写脚本的方式，在关闭服务器并再次打开后，您的应用程序应该会自动启动。</p><p id="b039" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们现在也可以使用以下命令:</p><pre class="jt ju jv jw fd lk ll lm ln aw lo bi"><span id="a916" class="lp kh hi ll b fi lq lr l ls lt">sudo systemctl stop [your service name without .service]<br/>sudo systemctl restart [your service name without .service]<br/>systemctl status [your service name without .service]</span></pre><h1 id="44d7" class="kg kh hi bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">本地还是全球？</h1><p id="935e" class="pw-post-body-paragraph iv iw hi ix b iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo li jq jr js hb bi translated">目前，您的服务器只能由本地网络上的终端访问，包括连接到您的wifi的任何人。</p><p id="3c25" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">启用从互联网访问您的服务器超出了本文的范围，主要是针对您的ISP和网关路由器。</p><p id="ae0b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">目前，我选择不探索这条途径，主要是因为我会增加我必须注意的安全问题。打开从互联网到本地服务器IP的网关可能会给网络带来新的漏洞，需要加以管理。</p><h1 id="b4d6" class="kg kh hi bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">进一步的步骤</h1><p id="7a00" class="pw-post-body-paragraph iv iw hi ix b iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo li jq jr js hb bi translated">现在，您的服务器已经正常运行，您可以继续编写和编译应用程序的更新版本或全新应用程序，并将它们上传到您的新服务器。您可以更改。服务文件指向您的新应用程序文件或禁用当前。创建和启用新服务的服务:</p><pre class="jt ju jv jw fd lk ll lm ln aw lo bi"><span id="c9d8" class="lp kh hi ll b fi lq lr l ls lt">sudo systemctl stop [current service]<br/>sudo systemctl disable [current service]</span><span id="bbe0" class="lp kh hi ll b fi mo lr l ls lt">//repeat above steps for writing, enabling and starting a new .service</span></pre><p id="68fa" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">当更新或加载新的应用程序时，您还需要确保它使用相同的MySQL密码，并且您已经按照前面的步骤创建或上传了匹配的MySQL模式。</p><p id="31f3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">除了启用Apache代理的应用程序之外，您不必重复安装任何软件的步骤。</p><p id="2420" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">拍拍自己的背，这是一个漫长的旅程，但你做到了！</p></div></div>    
</body>
</html>