<html>
<head>
<title>Provision Resources in AWS using your own REST API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用您自己的REST API在AWS中提供资源</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/provision-resources-in-aws-using-your-own-rest-api-cc54b390a71f?source=collection_archive---------6-----------------------#2022-07-19">https://medium.com/geekculture/provision-resources-in-aws-using-your-own-rest-api-cc54b390a71f?source=collection_archive---------6-----------------------#2022-07-19</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/f6c2f1c79776e21e68faa1c527c357b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*SvoK1BCNo-4yxMFWYbZ5xw.gif"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx">Created by Raktim using Canva</figcaption></figure><div class=""/><div class=""><h2 id="3557" class="pw-subtitle-paragraph iu hw hx bd b iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl dx translated">如果我能为您提供一个“API”URL，您只需简单地发送一个“POST”请求&amp;它就会开始在AWS cloud中提供资源。然后，它会返回您访问所需的信息…</h2></div><h2 id="2373" class="jm jn hx bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated">嘿，你好…🙌</h2><p id="5fb1" class="pw-post-body-paragraph kk kl hx km b kn ko iy kp kq kr jb ks jx kt ku kv kb kw kx ky kf kz la lb lc hb bi translated">希望您的云计算之旅愉快。我已经有一段时间没有写了，因为我正在学习许多实现各种想法的新方法&amp;今天我将分享一个令人惊叹的用例。喝杯茶/咖啡&amp;继续阅读…😇</p><h1 id="f80e" class="ld jn hx bd jo le lf lg js lh li lj jw jd lk je ka jg ll jh ke jj lm jk ki ln bi translated">问题陈述:</h1><ul class=""><li id="37b8" class="lo lp hx km b kn ko kq kr jx lq kb lr kf ls lc lt lu lv lw bi translated">创建一个CloudFormation模板来自动配置AWS上的资源。</li><li id="fdf4" class="lo lp hx km b kn lx kq ly jx lz kb ma kf mb lc lt lu lv lw bi translated">使用AWS API Gateway创建一个REST API，并用Lambda函数连接它。</li><li id="d0b7" class="lo lp hx km b kn lx kq ly jx lz kb ma kf mb lc lt lu lv lw bi translated">使用Lambda函数部署CloudFormation堆栈。</li><li id="4049" class="lo lp hx km b kn lx kq ly jx lz kb ma kf mb lc lt lu lv lw bi translated">明确创建相关的IAM角色和策略。</li></ul><p id="bfc9" class="pw-post-body-paragraph kk kl hx km b kn mc iy kp kq md jb ks jx me ku kv kb mf kx ky kf mg la lb lc hb bi translated">听起来很简单，对吧…但没那么简单。😅别担心，因为我知道让你变得简单的最好方法。😎<br/>让我们讨论一下这个用例的一些优先需求…</p><h1 id="5508" class="ld jn hx bd jo le lf lg js lh li lj jw jd lk je ka jg ll jh ke jj lm jk ki ln bi translated">先决条件:</h1><p id="0a02" class="pw-post-body-paragraph kk kl hx km b kn ko iy kp kq kr jb ks jx kt ku kv kb kw kx ky kf kz la lb lc hb bi translated"><strong class="km hy">你显然需要一个AWS账户。此外，还需要具备S3 VPC AWS的基本知识。我将在这篇博客中讨论CloudFormation，Lambda &amp; API网关。</strong></p><h1 id="637d" class="ld jn hx bd jo le lf lg js lh li lj jw jd lk je ka jg ll jh ke jj lm jk ki ln bi translated">亚马逊API网关:</h1><figure class="mi mj mk ml fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mh"><img src="../Images/a19e1de1b58aa49a581bf9c91704ac68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QYilAdgOupm7vneGqAtDyA.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx">What is API Gateway…</figcaption></figure><ul class=""><li id="3613" class="lo lp hx km b kn mc kq md jx mm kb mn kf mo lc lt lu lv lw bi translated"><strong class="km hy"> API的完整形式是应用编程接口</strong> &amp; Gateway代表一条路径，使用这条路径你可以将你的请求发送到某个位置。<strong class="km hy"> AWS提供了一个托管API服务，使用它您可以非常容易地创建一个REST API。</strong>我现在不是在讨论REST，而是简单地理解API Gateway会给你一个我们的客户可以发送请求的URL。</li><li id="edb2" class="lo lp hx km b kn lx kq ly jx lz kb ma kf mb lc lt lu lv lw bi translated">当我们开始设置API网关时，您将了解它的功能和工作原理。还有一点需要注意的是，我们将使用HTTPS API，这意味着我们的客户端将是Web客户端，就像您的Web浏览器或Curl command一样。</li><li id="9e16" class="lo lp hx km b kn lx kq ly jx lz kb ma kf mb lc lt lu lv lw bi translated"><strong class="km hy"> <em class="mp">官方文档链接:</em></strong><a class="ae mq" href="https://docs.aws.amazon.com/apigateway/latest/developerguide/welcome.html" rel="noopener ugc nofollow" target="_blank"><strong class="km hy"><em class="mp">https://docs . AWS . Amazon . com/API gateway/latest/developer guide/welcome . html</em></strong></a></li></ul><h1 id="aa58" class="ld jn hx bd jo le lf lg js lh li lj jw jd lk je ka jg ll jh ke jj lm jk ki ln bi translated">AWS Lambda:</h1><figure class="mi mj mk ml fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mh"><img src="../Images/9d2ad67c09c955bccf7220220f44d5de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1sFWdDwKk8Gf4Jq3RXnR2Q.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx">What is Lambda…</figcaption></figure><ul class=""><li id="ad73" class="lo lp hx km b kn mc kq md jx mm kb mn kf mo lc lt lu lv lw bi translated"><strong class="km hy"> Lambda代表AWS中的无服务器功能执行。假设你有一个python函数，它给出两个数字，然后返回总和。现在，要运行该功能，您需要一个安装了python编译器的操作系统。在这种情况下，云的工作方式非常独特。</strong></li><li id="392d" class="lo lp hx km b kn lx kq ly jx lz kb ma kf mb lc lt lu lv lw bi translated">你只需要提供你的函数代码给Lambda服务&amp;显然你需要告诉它你想要选择哪个运行时。那么Lambda将运行函数&amp;将返回输出。这整件事最吸引人的地方在于，你只需要为函数执行的那几秒钟付费。从某种意义上说，它非常经济高效，因为您不需要启动任何类型的虚拟机，也不需要任何类型的存储等。这就是它被称为无服务器服务的原因，这意味着后端服务器由AWS管理。</li><li id="778b" class="lo lp hx km b kn lx kq ly jx lz kb ma kf mb lc lt lu lv lw bi translated"><strong class="km hy"> <em class="mp">官方文档链接:</em></strong><a class="ae mq" href="https://docs.aws.amazon.com/lambda/latest/dg/welcome.html" rel="noopener ugc nofollow" target="_blank"><strong class="km hy"><em class="mp">https://docs.aws.amazon.com/lambda/latest/dg/welcome.html</em></strong></a></li></ul><h1 id="b4e7" class="ld jn hx bd jo le lf lg js lh li lj jw jd lk je ka jg ll jh ke jj lm jk ki ln bi translated">自动气象站云形成:</h1><figure class="mi mj mk ml fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mh"><img src="../Images/fcdd02784466a875bd9d0779d3da3743.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qNFVmsz7UwIohr1deVhCIw.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx">What is CloudFormation…</figcaption></figure><ul class=""><li id="50dc" class="lo lp hx km b kn mc kq md jx mm kb mn kf mo lc lt lu lv lw bi translated"><strong class="km hy"> CloudFormation是一项允许您实施IAC(基础设施即代码)所有概念的服务。</strong>我们将编写脚本，也称为CloudFormation模板，以自动配置AWS上的资源。编写这些代码非常容易，因为有一个称为声明式编程方法的概念，在这里你只需要说出你的需求。</li><li id="26f0" class="lo lp hx km b kn lx kq ly jx lz kb ma kf mb lc lt lu lv lw bi translated">Next CloudFormation知道如何供应这些东西&amp;如果已经供应，那么一旦更新代码，它就知道如何基于最新的代码库修改AWS上的资源。你会看到这种编码相对于其他DSA编码是多么简单。😅</li><li id="7549" class="lo lp hx km b kn lx kq ly jx lz kb ma kf mb lc lt lu lv lw bi translated"><strong class="km hy"> <em class="mp">官方文档链接:</em></strong><a class="ae mq" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/Welcome.html" rel="noopener ugc nofollow" target="_blank"><strong class="km hy"><em class="mp">https://docs . AWS . Amazon . com/AWS cloudformation/latest/user guide/welcome . html</em></strong></a></li></ul><h1 id="82c5" class="ld jn hx bd jo le lf lg js lh li lj jw jd lk je ka jg ll jh ke jj lm jk ki ln bi translated">步骤1:创建CloudFormation模板并在S3部署</h1><figure class="mi mj mk ml fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mh"><img src="../Images/57c968acc37d41f1c63241b362113857.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2VyqSnCehn_VLeorXPKD1Q.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx">Step 1…</figcaption></figure><p id="0cd9" class="pw-post-body-paragraph kk kl hx km b kn mc iy kp kq md jb ks jx me ku kv kb mf kx ky kf mg la lb lc hb bi translated">让我们从简单开始，我们将创建一个CloudFormation模板，它将在AWS中提供一个VPC。为此，我强烈建议查阅云形成的官方文档。</p><p id="21be" class="pw-post-body-paragraph kk kl hx km b kn mc iy kp kq md jb ks jx me ku kv kb mf kx ky kf mg la lb lc hb bi translated"><strong class="km hy"> <em class="mp">官方链接:</em></strong><a class="ae mq" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-vpc.html" rel="noopener ugc nofollow" target="_blank"><strong class="km hy"><em class="mp">https://docs . AWS . Amazon . com/AWS cloudformation/latest/user guide/AWS-resource-ec2-VPC . html</em></strong></a></p><p id="1a09" class="pw-post-body-paragraph kk kl hx km b kn mc iy kp kq md jb ks jx me ku kv kb mf kx ky kf mg la lb lc hb bi translated">我选择了官方文档中提供的例子，它非常容易理解…</p><pre class="mi mj mk ml fd mr ms mt mu aw mv bi"><span id="ace8" class="jm jn hx ms b fi mw mx l my mz">---<br/>AWSTemplateFormatVersion: "2010-09-09"<br/>Description: Template to provision one VPC</span><span id="fefa" class="jm jn hx ms b fi na mx l my mz">Resources:<br/>  myVPC:<br/>    Type: AWS::EC2::VPC<br/>    Properties:<br/>      CidrBlock: 10.0.0.0/16<br/>      EnableDnsSupport: 'true'<br/>      EnableDnsHostnames: 'true'<br/>      Tags:<br/>      - Key: stack<br/>        Value: production</span></pre><ul class=""><li id="ca7b" class="lo lp hx km b kn mc kq md jx mm kb mn kf mo lc lt lu lv lw bi translated">您正在AWS中创建一个网络地址为<strong class="km hy"> "10.0.0.0/16" </strong>的VPC。您还为该特定VPC启用了<strong class="km hy">DNS support&amp;DNS hostname</strong>。最后，我们在VPC上贴上一个标签。</li></ul><p id="d1a7" class="pw-post-body-paragraph kk kl hx km b kn mc iy kp kq md jb ks jx me ku kv kb mf kx ky kf mg la lb lc hb bi translated">现在只需将这段代码保存在一个名为—<strong class="km hy">“cf-resources . YAML”</strong>的文件中。你可以给你的文件起任何名字。</p><p id="739a" class="pw-post-body-paragraph kk kl hx km b kn mc iy kp kq md jb ks jx me ku kv kb mf kx ky kf mg la lb lc hb bi translated">接下来，去亚马逊S3 &amp;用下面的配置创建一个桶-</p><ul class=""><li id="c767" class="lo lp hx km b kn mc kq md jx mm kb mn kf mo lc lt lu lv lw bi translated"><strong class="km hy">桶名:“rak Tim-cf-Bucket”</strong></li><li id="f817" class="lo lp hx km b kn lx kq ly jx lz kb ma kf mb lc lt lu lv lw bi translated"><strong class="km hy">地区:【AP-south-1】</strong></li><li id="c14c" class="lo lp hx km b kn lx kq ly jx lz kb ma kf mb lc lt lu lv lw bi translated"><strong class="km hy"> ACL启用&amp;取消勾选“阻止所有公共访问”。</strong></li><li id="b5cf" class="lo lp hx km b kn lx kq ly jx lz kb ma kf mb lc lt lu lv lw bi translated"><strong class="km hy">启用版本控制&amp;禁用服务器端加密。</strong></li></ul><p id="c19f" class="pw-post-body-paragraph kk kl hx km b kn mc iy kp kq md jb ks jx me ku kv kb mf kx ky kf mg la lb lc hb bi translated">我们可以在S3做大量的配置来保护你的代码，但这不是一个关于安全的博客。这就是为什么我要把事情简单化。</p><p id="a1de" class="pw-post-body-paragraph kk kl hx km b kn mc iy kp kq md jb ks jx me ku kv kb mf kx ky kf mg la lb lc hb bi translated">接下来，在bucket &amp;中上传您的<strong class="km hy"> "cf-resources.yaml" </strong>文件，确保在上传文件时，您选择了<strong class="km hy"> "Permissions "来"授予公共读取权限"。</strong>否则Lambda将无法通过其公共URL使用模板。</p><p id="51de" class="pw-post-body-paragraph kk kl hx km b kn mc iy kp kq md jb ks jx me ku kv kb mf kx ky kf mg la lb lc hb bi translated">复制它的对象URL。在我的例子中，对象URL看起来像这样—<a class="ae mq" href="https://raktim-cf-bucket.s3.ap-south-1.amazonaws.com/cf-resources.yaml" rel="noopener ugc nofollow" target="_blank">https://rak Tim-cf-bucket . S3 . AP-south-1 . Amazon AWS . com/cf-resources . YAML</a></p><figure class="mi mj mk ml fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es nb"><img src="../Images/00fe70d0969110711045e9804fd5b45f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wxSfEX6RZfssczo1tEcbBQ.png"/></div></div></figure><h1 id="2fcb" class="ld jn hx bd jo le lf lg js lh li lj jw jd lk je ka jg ll jh ke jj lm jk ki ln bi translated">步骤2:创建IAM角色</h1><figure class="mi mj mk ml fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mh"><img src="../Images/448568597df0ee81d1db00bc7d6325fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pOPfODM3tNhpSsNsBpqxeg.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx">Step 2…</figcaption></figure><p id="6f44" class="pw-post-body-paragraph kk kl hx km b kn mc iy kp kq md jb ks jx me ku kv kb mf kx ky kf mg la lb lc hb bi translated">我总是建议不要只是预先写IAM角色，因为那永远不会帮助你学习IAM &amp;安全。首先看看你需要什么样的基本需求来让一个服务完成它的工作。</p><blockquote class="nc nd ne"><p id="0808" class="kk kl mp km b kn mc iy kp kq md jb ks nf me ku kv ng mf kx ky nh mg la lb lc hb bi translated"><strong class="km hy">如果你的Lambda需要访问CloudFormation来部署堆栈，那么只创建有那么大权力的角色。如果CloudFormation需要在您的帐户中创建VPC，则创建具有这些限制的角色。希望你明白我的意思:)</strong></p></blockquote><h2 id="0026" class="jm jn hx bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated">Lambda的角色:</h2><p id="25db" class="pw-post-body-paragraph kk kl hx km b kn ko iy kp kq kr jb ks jx kt ku kv kb kw kx ky kf kz la lb lc hb bi translated">让我们转到AWS IAM服务，然后转到→角色，点击<strong class="km hy">“创建角色”</strong> &amp;按照以下配置…</p><ul class=""><li id="c622" class="lo lp hx km b kn mc kq md jx mm kb mn kf mo lc lt lu lv lw bi translated"><strong class="km hy">可信实体类型:AWS服务</strong></li><li id="65e5" class="lo lp hx km b kn lx kq ly jx lz kb ma kf mb lc lt lu lv lw bi translated"><strong class="km hy">用例:Lambda </strong></li><li id="733c" class="lo lp hx km b kn lx kq ly jx lz kb ma kf mb lc lt lu lv lw bi translated"><strong class="km hy">权限策略:awscloudformationfull access</strong></li><li id="e3b9" class="lo lp hx km b kn lx kq ly jx lz kb ma kf mb lc lt lu lv lw bi translated"><strong class="km hy">角色名称:lambda-cf-role </strong></li></ul><p id="64a6" class="pw-post-body-paragraph kk kl hx km b kn mc iy kp kq md jb ks jx me ku kv kb mf kx ky kf mg la lb lc hb bi translated">最后创建角色。我知道我们在这里给出了<strong class="km hy">" awscloudformationfull access "</strong>策略，这看起来可能很危险，但是请相信我，因为我们将自己编写Lambda代码，所以并没有那么糟糕。此外，我再次强调，这个博客并不主要关注安全性，这就是为什么我不深入讨论这个问题。</p><h2 id="8916" class="jm jn hx bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated">云形成的作用:</h2><p id="f2b9" class="pw-post-body-paragraph kk kl hx km b kn ko iy kp kq kr jb ks jx kt ku kv kb kw kx ky kf kz la lb lc hb bi translated">现在我们需要为CloudFormation创建一个角色，它将允许CloudFormation在VPC提供资源。再次为使事情简单，我会给VPC完全访问…</p><ul class=""><li id="8d5b" class="lo lp hx km b kn mc kq md jx mm kb mn kf mo lc lt lu lv lw bi translated"><strong class="km hy">可信实体类型:AWS服务</strong></li><li id="1848" class="lo lp hx km b kn lx kq ly jx lz kb ma kf mb lc lt lu lv lw bi translated"><strong class="km hy">用例:云形成</strong></li><li id="e03f" class="lo lp hx km b kn lx kq ly jx lz kb ma kf mb lc lt lu lv lw bi translated"><strong class="km hy">权限策略:amazonvcpcfullaccess</strong></li><li id="7f2f" class="lo lp hx km b kn lx kq ly jx lz kb ma kf mb lc lt lu lv lw bi translated"><strong class="km hy">角色名称:cf-vpc-role </strong></li></ul><p id="3245" class="pw-post-body-paragraph kk kl hx km b kn mc iy kp kq md jb ks jx me ku kv kb mf kx ky kf mg la lb lc hb bi translated">创建角色&amp;复制它是ARN，因为在下一步中我们将使用它。</p><h2 id="47c7" class="jm jn hx bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated">在Lambda角色中添加额外策略:</h2><p id="4ba7" class="pw-post-body-paragraph kk kl hx km b kn ko iy kp kq kr jb ks jx kt ku kv kb kw kx ky kf kz la lb lc hb bi translated">了解Lambda函数将创建云结构堆栈的一个非常重要的事情。这意味着Lambda也将把<strong class="km hy">“cf-VPC-role”</strong>附加到堆栈上。这意味着Lambda需要额外的权限来将角色传递给堆栈，所以让我们快速地将该策略附加到我们的Lambda函数上。</p><p id="2236" class="pw-post-body-paragraph kk kl hx km b kn mc iy kp kq md jb ks jx me ku kv kb mf kx ky kf mg la lb lc hb bi translated">转到您的<strong class="km hy">“lambda-cf-role”</strong>&amp;，然后在<strong class="km hy">“权限”</strong>选项卡下点击<strong class="km hy">“添加权限”→“创建内联策略”</strong>，遵循以下配置…</p><ul class=""><li id="e041" class="lo lp hx km b kn mc kq md jx mm kb mn kf mo lc lt lu lv lw bi translated"><strong class="km hy">服务:IAM </strong></li><li id="d239" class="lo lp hx km b kn lx kq ly jx lz kb ma kf mb lc lt lu lv lw bi translated"><strong class="km hy">动作:角色传递</strong></li><li id="44ac" class="lo lp hx km b kn lx kq ly jx lz kb ma kf mb lc lt lu lv lw bi translated"><strong class="km hy">资源:具体&amp;这里给“cf-VPC-role”ARN。</strong></li><li id="58d5" class="lo lp hx km b kn lx kq ly jx lz kb ma kf mb lc lt lu lv lw bi translated"><strong class="km hy">点击审核策略&amp;给出一个名称，如“lambda-cf-pass-Policy”</strong></li></ul><p id="9de6" class="pw-post-body-paragraph kk kl hx km b kn mc iy kp kq md jb ks jx me ku kv kb mf kx ky kf mg la lb lc hb bi translated">最后，单击创建策略。我们已经完成了IAM部分。你可以在截图中看到，我创建了两个角色。</p><figure class="mi mj mk ml fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es ni"><img src="../Images/e9af736f27f5486458bdb0911bed5179.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sw72wMI9tIhJFmmV3cO7pg.png"/></div></div></figure><blockquote class="nc nd ne"><p id="5442" class="kk kl mp km b kn mc iy kp kq md jb ks nf me ku kv ng mf kx ky nh mg la lb lc hb bi translated"><strong class="km hy">注意:我使用的是有管理员权限的AWS账户。但是，如果您使用IAM帐户，那么您的组织管理员需要为您提供在IAM中创建角色以及将这些角色传递给不同服务的权限，就像我们将角色传递给Lambda一样。</strong></p></blockquote><h1 id="d212" class="ld jn hx bd jo le lf lg js lh li lj jw jd lk je ka jg ll jh ke jj lm jk ki ln bi translated">步骤3:创建Lambda函数</h1><figure class="mi mj mk ml fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mh"><img src="../Images/6cf5bb3e76dcf799e4aa6c78caa172dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*brXwFJUJw3ZMrOBC3auR8w.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx">Step 3…</figcaption></figure><p id="d6ef" class="pw-post-body-paragraph kk kl hx km b kn mc iy kp kq md jb ks jx me ku kv kb mf kx ky kf mg la lb lc hb bi translated">接下来，我们将创建一个Lambda函数，它将帮助我们在进行API调用时部署CloudFormation模板。</p><p id="fce1" class="pw-post-body-paragraph kk kl hx km b kn mc iy kp kq md jb ks jx me ku kv kb mf kx ky kf mg la lb lc hb bi translated">转到AWS Lambda服务，点击创建功能，并遵循以下配置…</p><ul class=""><li id="2d78" class="lo lp hx km b kn mc kq md jx mm kb mn kf mo lc lt lu lv lw bi translated"><strong class="km hy">函数名称:cf-deploy-function </strong></li><li id="ad49" class="lo lp hx km b kn lx kq ly jx lz kb ma kf mb lc lt lu lv lw bi translated"><strong class="km hy">运行时:Python3.9 </strong></li><li id="d405" class="lo lp hx km b kn lx kq ly jx lz kb ma kf mb lc lt lu lv lw bi translated"><strong class="km hy">架构:x86_64 </strong></li><li id="503f" class="lo lp hx km b kn lx kq ly jx lz kb ma kf mb lc lt lu lv lw bi translated"><strong class="km hy">执行角色:使用现有角色→ lambda-cf-role </strong></li></ul><p id="29c1" class="pw-post-body-paragraph kk kl hx km b kn mc iy kp kq md jb ks jx me ku kv kb mf kx ky kf mg la lb lc hb bi translated">最后创建函数。现在你可能已经明白了，我们创建了一个Lambda函数，它有一个附加的角色，可以进入CloudFormation &amp;可以在那里做任何事情，而不是在其他服务上。</p><p id="9204" class="pw-post-body-paragraph kk kl hx km b kn mc iy kp kq md jb ks jx me ku kv kb mf kx ky kf mg la lb lc hb bi translated"><strong class="km hy"> <em class="mp">现在该是一点点Python编码的时候了……</em></strong>😒</p><p id="9bff" class="pw-post-body-paragraph kk kl hx km b kn mc iy kp kq md jb ks jx me ku kv kb mf kx ky kf mg la lb lc hb bi translated">我知道云开发人员编写代码的痛苦，但这是非常非常简单的编码…</p><pre class="mi mj mk ml fd mr ms mt mu aw mv bi"><span id="4e43" class="jm jn hx ms b fi mw mx l my mz">import boto3</span><span id="70e1" class="jm jn hx ms b fi na mx l my mz">def lambda_handler(event, context):</span><span id="7c82" class="jm jn hx ms b fi na mx l my mz"> thisStackName = str(event[‘StackName’])<br/> thisClientToken = str(event[‘ClientToken’])</span><span id="64d5" class="jm jn hx ms b fi na mx l my mz"> CFClient = boto3.client(‘cloudformation’)</span><span id="ab84" class="jm jn hx ms b fi na mx l my mz"> response = CFClient.create_stack(<br/> StackName=thisStackName,<br/> TemplateURL=’<a class="ae mq" href="https://raktim-cf-bucket.s3.ap-south-1.amazonaws.com/cf-resources.yaml'" rel="noopener ugc nofollow" target="_blank">https://raktim-cf-bucket.s3.ap-south-1.amazonaws.com/cf-resources.yaml'</a>,<br/> Capabilities=[‘CAPABILITY_NAMED_IAM’],<br/> RoleARN=’arn:aws:iam::775370324880:role/cf-vpc-role’,<br/> ClientRequestToken=thisClientToken,<br/> OnFailure=’DELETE’<br/> )</span><span id="60b0" class="jm jn hx ms b fi na mx l my mz"> return response</span></pre><ul class=""><li id="206b" class="lo lp hx km b kn mc kq md jx mm kb mn kf mo lc lt lu lv lw bi translated"><strong class="km hy">我们使用boto3库来创建堆栈。</strong>现在这里有一件事需要注意，当你将你的Lambda与API Gateway连接时，那么API Gateway会将其收集的数据发送到一个名为<strong class="km hy"> "event" </strong>的变量中。这意味着当您要调用API时，您还将发送StackName，然后python将使用<strong class="km hy"> "event" </strong>参数获取它。您可以给这个变量取任何名字，但是遵循行业标准总是一个好的做法。</li><li id="1f7e" class="lo lp hx km b kn lx kq ly jx lz kb ma kf mb lc lt lu lv lw bi translated">如果你看到了<strong class="km hy"> "create_stack" </strong>方法，那么我们传递的参数真的很简单——比如你的StackName &amp;是什么，它将从哪里获取模板来部署堆栈。或者，假设哪个IAM角色附加到堆栈，如果堆栈创建失败会发生什么等等。</li><li id="f4cc" class="lo lp hx km b kn lx kq ly jx lz kb ma kf mb lc lt lu lv lw bi translated">现在的大问题是——<strong class="km hy">什么是ClientRequestToken？</strong></li><li id="a886" class="lo lp hx km b kn lx kq ly jx lz kb ma kf mb lc lt lu lv lw bi translated">首先，它只是一个你需要传递的字符串值，它是唯一的。你可以认为这是我们将提供给CloudFormation堆栈的元数据，这样一旦客户端向API发送请求，比如说客户端令牌值— <strong class="km hy">“客户端1234”</strong>，它就会开始创建堆栈。</li><li id="f548" class="lo lp hx km b kn lx kq ly jx lz kb ma kf mb lc lt lu lv lw bi translated">现在，如果客户端再次使用相同的StackName发送相同的请求，那么由于python是一种命令式语言，它将开始提供堆栈，但是由于云结构的限制，您的每个堆栈都需要自己唯一的名称。所以您的下一个调用将导致一个错误，说“栈名已经存在”。这就是客户端令牌将帮助您使代码幂等的地方。这意味着下一次如果你用相同的StackName &amp;相同的客户机令牌发送请求，它将返回200状态码。</li></ul><p id="2e0b" class="pw-post-body-paragraph kk kl hx km b kn mc iy kp kq md jb ks jx me ku kv kb mf kx ky kf mg la lb lc hb bi translated"><strong class="km hy"> <em class="mp">足够的编码… </em> </strong>🤕<strong class="km hy"> <em class="mp">现在让我们继续我们的云开发之旅。</em>T13】</strong></p><p id="da6f" class="pw-post-body-paragraph kk kl hx km b kn mc iy kp kq md jb ks jx me ku kv kb mf kx ky kf mg la lb lc hb bi translated">将功能代码放入编辑器并部署功能。</p><figure class="mi mj mk ml fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mh"><img src="../Images/bac1176b3bfd272b19f3b13765d76409.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qsc9M36xOfxevcZS-Jx9rA.png"/></div></div></figure><h1 id="2436" class="ld jn hx bd jo le lf lg js lh li lj jw jd lk je ka jg ll jh ke jj lm jk ki ln bi translated">步骤4:创建API网关</h1><figure class="mi mj mk ml fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mh"><img src="../Images/cd037d8cb345d2cd87e163728f5d8011.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5btxgP6JnHco9pom_V8_Iw.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx">Step 4…</figcaption></figure><p id="8534" class="pw-post-body-paragraph kk kl hx km b kn mc iy kp kq md jb ks jx me ku kv kb mf kx ky kf mg la lb lc hb bi translated">这是整个设置的最后一步。我在一开始就告诉过你，我们将会有一个REST API，你可以简单地发送一个POST请求&amp;它将开始在AWS上提供资源。让我们开始设置API，好吗？</p><p id="1dcd" class="pw-post-body-paragraph kk kl hx km b kn mc iy kp kq md jb ks jx me ku kv kb mf kx ky kf mg la lb lc hb bi translated">首先，转到API网关，用下面的配置创建一个API…</p><ul class=""><li id="9990" class="lo lp hx km b kn mc kq md jx mm kb mn kf mo lc lt lu lv lw bi translated"><strong class="km hy">选择REST API &amp;然后点击“构建”(不要选择私有的)</strong></li><li id="51f0" class="lo lp hx km b kn lx kq ly jx lz kb ma kf mb lc lt lu lv lw bi translated"><strong class="km hy"> API名称:cf-lambda-api </strong></li><li id="141f" class="lo lp hx km b kn lx kq ly jx lz kb ma kf mb lc lt lu lv lw bi translated"><strong class="km hy">端点:边缘优化</strong></li></ul><p id="a0db" class="pw-post-body-paragraph kk kl hx km b kn mc iy kp kq md jb ks jx me ku kv kb mf kx ky kf mg la lb lc hb bi translated">创建API，然后点击<strong class="km hy">“动作”</strong>来设置POST方法。</p><ul class=""><li id="943c" class="lo lp hx km b kn mc kq md jx mm kb mn kf mo lc lt lu lv lw bi translated"><strong class="km hy">点击创建方法</strong></li><li id="83ec" class="lo lp hx km b kn lx kq ly jx lz kb ma kf mb lc lt lu lv lw bi translated"><strong class="km hy">从下拉菜单中选择POST&amp;你会看到它在询问集成类型→选择Lambda函数。</strong></li><li id="8c1c" class="lo lp hx km b kn lx kq ly jx lz kb ma kf mb lc lt lu lv lw bi translated"><strong class="km hy">禁用Lambda代理集成。</strong></li><li id="2100" class="lo lp hx km b kn lx kq ly jx lz kb ma kf mb lc lt lu lv lw bi translated"><strong class="km hy">最后选择你的lambda函数名&amp;保存。</strong></li></ul><figure class="mi mj mk ml fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mh"><img src="../Images/64b3da8e863874ed3758b82c8f8ce5e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p_KFSMVmTB-wPX_N-euW8w.png"/></div></div></figure><p id="5dfa" class="pw-post-body-paragraph kk kl hx km b kn mc iy kp kq md jb ks jx me ku kv kb mf kx ky kf mg la lb lc hb bi translated">一旦您保存了设置，它将看起来像下面这样—</p><figure class="mi mj mk ml fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mh"><img src="../Images/20c8f9535918b659a73ca2ea2133dff6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TQMBjZK_mT3zHsR-yVmGTQ.png"/></div></div></figure><p id="a4db" class="pw-post-body-paragraph kk kl hx km b kn mc iy kp kq md jb ks jx me ku kv kb mf kx ky kf mg la lb lc hb bi translated">现在我们需要部署我们的API，但在此之前，我想告诉你一些事情。一旦你部署了API，世界上的任何人都可以访问它，如果你没有任何东西来保护你的API，这是很危险的。这就是我们需要使用API键的地方，你可以把它看作是访问API的一个键。</p><p id="eba3" class="pw-post-body-paragraph kk kl hx km b kn mc iy kp kq md jb ks jx me ku kv kb mf kx ky kf mg la lb lc hb bi translated">点击一个<strong class="km hy">“方法请求”</strong> &amp;将会出现<strong class="km hy">“需要API密钥”</strong>选项，将其更改为true。</p><figure class="mi mj mk ml fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es nj"><img src="../Images/7d6e1a997f3e3ddb310b5a5b9107f5f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iO73MJqwcJUwd8RLjMt5Vw.png"/></div></div></figure><p id="f531" class="pw-post-body-paragraph kk kl hx km b kn mc iy kp kq md jb ks jx me ku kv kb mf kx ky kf mg la lb lc hb bi translated">这里你还需要做一件小事，那就是当Lambda接收到作为JSON值的响应时。我们希望Lambda接收完全相同的数据。但是API Gateway有很多独特特性，可以在数据发送到Lambda之前对其进行修改。这就是为什么点击<strong class="km hy">“集成请求”</strong> &amp;向下滚动到选项<strong class="km hy">“映射模板”</strong> →选择该选项到<strong class="km hy">“当没有定义模板时(推荐)”</strong>。</p><figure class="mi mj mk ml fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mh"><img src="../Images/4d32c6d9652b9d3fb57cb95de3fd21c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0qLgzHcV5mjfWLhI1Fpu6A.png"/></div></div></figure><p id="bca0" class="pw-post-body-paragraph kk kl hx km b kn mc iy kp kq md jb ks jx me ku kv kb mf kx ky kf mg la lb lc hb bi translated">现在我们可以部署我们的API了。因此，再次单击<strong class="km hy">“操作”</strong> → <strong class="km hy">“部署API”</strong>。</p><ul class=""><li id="7e6d" class="lo lp hx km b kn mc kq md jx mm kb mn kf mo lc lt lu lv lw bi translated"><strong class="km hy">部署阶段:新阶段</strong></li><li id="46b9" class="lo lp hx km b kn lx kq ly jx lz kb ma kf mb lc lt lu lv lw bi translated"><strong class="km hy">艺名:产品</strong></li></ul><p id="5c98" class="pw-post-body-paragraph kk kl hx km b kn mc iy kp kq md jb ks jx me ku kv kb mf kx ky kf mg la lb lc hb bi translated">点击<strong class="km hy">“Deploy”</strong>&amp;您将获得调用API的URL，如下图所示…</p><figure class="mi mj mk ml fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es nk"><img src="../Images/3b3b476127563b3852e528eea4a75a99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4PaNVb6DN51Snp_LsMbmAg.png"/></div></div></figure><p id="36c2" class="pw-post-body-paragraph kk kl hx km b kn mc iy kp kq md jb ks jx me ku kv kb mf kx ky kf mg la lb lc hb bi translated">现在请记住，我刚刚说过，我们需要一个密钥来保护我们的API。为此，我们需要制定一个使用计划。进入<strong class="km hy">“使用计划”</strong>选项卡&amp;点击<strong class="km hy">“创建”</strong> &amp;进行以下配置…</p><ul class=""><li id="a899" class="lo lp hx km b kn mc kq md jx mm kb mn kf mo lc lt lu lv lw bi translated"><strong class="km hy">名称:cf-lambda-api-usage-plan </strong></li><li id="e30a" class="lo lp hx km b kn lx kq ly jx lz kb ma kf mb lc lt lu lv lw bi translated"><strong class="km hy">启用节流:速率→10，突发→5 </strong></li><li id="023c" class="lo lp hx km b kn lx kq ly jx lz kb ma kf mb lc lt lu lv lw bi translated"><strong class="km hy">启用配额:每天20个请求</strong></li></ul><p id="879a" class="pw-post-body-paragraph kk kl hx km b kn mc iy kp kq md jb ks jx me ku kv kb mf kx ky kf mg la lb lc hb bi translated">单击next &amp;在这里您可以选择API阶段，记住，在我们的例子中是<strong class="km hy">“prod”</strong>阶段。</p><p id="b9e4" class="pw-post-body-paragraph kk kl hx km b kn mc iy kp kq md jb ks jx me ku kv kb mf kx ky kf mg la lb lc hb bi translated">点击<strong class="km hy">“添加API阶段”→将API选择到“cf-lambda-API”</strong>，将阶段选择到<strong class="km hy">“prod”</strong>&amp;，然后点击检查符号。选择下一步&amp;现在您需要选择API密钥…因此只需点击<strong class="km hy">“创建API密钥并添加到使用计划”。</strong>给个名字像<strong class="km hy">“cf-lambda-API-key”</strong>&amp;保存。最后点击<strong class="km hy">【保存】</strong>。</p><figure class="mi mj mk ml fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es nl"><img src="../Images/bfd0fb8de1dadd925d44ff04d4f13c61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FGnser20tPwLHkr_P_4vqw.png"/></div></div></figure><h2 id="1ffd" class="jm jn hx bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated">完成…🙌</h2><h1 id="6167" class="ld jn hx bd jo le lf lg js lh li lj jw jd lk je ka jg ll jh ke jj lm jk ki ln bi translated">测试时间:</h1><figure class="mi mj mk ml fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mh"><img src="../Images/c289dea7e773d76fd719ff962e1c78da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PfkUl6zADP-p7oFJhElpXw.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx">testing…</figcaption></figure><p id="cd06" class="pw-post-body-paragraph kk kl hx km b kn mc iy kp kq md jb ks jx me ku kv kb mf kx ky kf mg la lb lc hb bi translated"><strong class="km hy">你兴奋吗？</strong>如果你真的这么做了，你不仅会学到很多东西，还会明白前端应用程序是如何为我们创建在线实验室的…</p><p id="fbed" class="pw-post-body-paragraph kk kl hx km b kn mc iy kp kq md jb ks jx me ku kv kb mf kx ky kf mg la lb lc hb bi translated">但问题是我们如何测试。我已经告诉过你，它是一个REST API &amp;大多数时候，你的前端应用程序访问这个URL来转发客户端请求。但我只是简单地使用了来自<strong class="km hy">“AWS cloud shell”的<strong class="km hy">“curl”</strong>命令。你可以使用任何你喜欢的外壳。</strong></p><p id="19f6" class="pw-post-body-paragraph kk kl hx km b kn mc iy kp kq md jb ks jx me ku kv kb mf kx ky kf mg la lb lc hb bi translated">所以命令的结构看起来会像这样—</p><pre class="mi mj mk ml fd mr ms mt mu aw mv bi"><span id="c43d" class="jm jn hx ms b fi mw mx l my mz">#curl -i -H “x-api-key: TjaV50Z2Q2TTR86y” <a class="ae mq" href="https://w5560uqso4.execute-api.ap-south-1.amazonaws.com/prod" rel="noopener ugc nofollow" target="_blank">https://w5560uqso4.execute-api.ap-south-1.amazonaws.com/prod</a> -d ‘{“StackName”:”MyStack”,”ClientToken”:”client1234"}’</span></pre><p id="ff0c" class="pw-post-body-paragraph kk kl hx km b kn mc iy kp kq md jb ks jx me ku kv kb mf kx ky kf mg la lb lc hb bi translated">现在你可能会问我从哪里获得API密钥，只需进入—<strong class="km hy">“API密钥”</strong>选项卡&amp;选择名为<strong class="km hy">“cf-lambda-API-Key”</strong>的API密钥。您将会看到它向您显示了api密钥。正在运行命令…🙌</p><figure class="mi mj mk ml fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mh"><img src="../Images/516b3ec3410578adbe26f82fb9f326e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FX-aRKVPSoDuYLu0j07xOg.png"/></div></div></figure><p id="6459" class="pw-post-body-paragraph kk kl hx km b kn mc iy kp kq md jb ks jx me ku kv kb mf kx ky kf mg la lb lc hb bi translated">万岁…🔥我们得到了200个状态代码输出，这意味着我们能够使用API网关与Lambda进行通信。</p><p id="e211" class="pw-post-body-paragraph kk kl hx km b kn mc iy kp kq md jb ks jx me ku kv kb mf kx ky kf mg la lb lc hb bi translated">现在我想给你们看两个演示。首先，我修改了堆栈的名称，但是更改了客户端令牌…</p><figure class="mi mj mk ml fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mh"><img src="../Images/e3fa87ca242eb28cea2539335f572259.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3CEmBgHgp8zcOatwSPT9gA.png"/></div></div></figure><p id="1ea6" class="pw-post-body-paragraph kk kl hx km b kn mc iy kp kq md jb ks jx me ku kv kb mf kx ky kf mg la lb lc hb bi translated">看，显示的是<strong class="km hy">"堆栈[MyStack1]已经存在"</strong>。这意味着我们之前的命令已经成功地创建了堆栈&amp;,你也不能用相同的名字创建两个不同的堆栈。</p><p id="5df6" class="pw-post-body-paragraph kk kl hx km b kn mc iy kp kq md jb ks jx me ku kv kb mf kx ky kf mg la lb lc hb bi translated">接下来，让我们保持客户端令牌不变，但更改堆栈名称…</p><figure class="mi mj mk ml fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mh"><img src="../Images/981b287760a109a8b3bbfbdf483243db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_JvWl7OtT7y8LLZsEKCsLA.png"/></div></div></figure><p id="b07a" class="pw-post-body-paragraph kk kl hx km b kn mc iy kp kq md jb ks jx me ku kv kb mf kx ky kf mg la lb lc hb bi translated">又是200状态码。这意味着这个客户端令牌有助于使您的请求幂等…看下面的屏幕截图，我用相同的堆栈名称和相同的客户端访问令牌发送多个请求，但是因为它是幂等的性质，所以它总是返回200状态输出…</p><figure class="mi mj mk ml fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mh"><img src="../Images/b9a29b9549f9b09994b11000efc592a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Dbw9D4vwdx1uSnfUY9z03Q.png"/></div></div></figure><p id="af13" class="pw-post-body-paragraph kk kl hx km b kn mc iy kp kq md jb ks jx me ku kv kb mf kx ky kf mg la lb lc hb bi translated">如果你想知道它在CloudFormation控制台中是什么样子，这里有一个截图…</p><figure class="mi mj mk ml fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mh"><img src="../Images/f17da8b32e5d11e8a6fb5c88fedcb241.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rsvTkydHG8qrqXxtTXXYXw.png"/></div></div></figure><h1 id="d91b" class="ld jn hx bd jo le lf lg js lh li lj jw jd lk je ka jg ll jh ke jj lm jk ki ln bi translated">未来的可能性:</h1><blockquote class="nm"><p id="b795" class="nn no hx bd np nq nr ns nt nu nv lc dx translated">未来充满了可能性，无论你做出一个小小的改变，还是一大堆令人振奋、激动、鼓舞的改变。——<strong class="ak">奥普拉·温弗瑞</strong></p></blockquote><figure class="nw nx ny nz oa hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mh"><img src="../Images/a6c9bd386ea638890ba848eb5c8defe2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JVR-vmrKAV5DL4NO9QEdng.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx">future possibilities…</figcaption></figure><ul class=""><li id="b834" class="lo lp hx km b kn mc kq md jx mm kb mn kf mo lc lt lu lv lw bi translated">在这个项目中的下一件事，你可以做的是<strong class="km hy">创建各种API，为不同的操作附加各种Lambda函数，如删除堆栈、修改堆栈等。</strong></li><li id="4143" class="lo lp hx km b kn lx kq ly jx lz kb ma kf mb lc lt lu lv lw bi translated">你可以做的另一件令人惊奇的事情是<strong class="km hy">使你的云形成模板参数化。</strong>比方说，你希望你的客户发送VPC·CIDR系列产品。然后使用Lambda代码将该值参数化&amp;,您可以轻松地输入这些参数。显然，Lambda将从客户端的API网关接收参数值。</li><li id="8046" class="lo lp hx km b kn lx kq ly jx lz kb ma kf mb lc lt lu lv lw bi translated">接下来，您可以创建一些API，这些API可以访问您的堆栈以获取某些数据，然后您可以向您的客户提供这些数据，如VPC id、子网id。这些只是例子，在现实世界中，我们通常不会向客户提供内部id，但我们可以向他们提供某些URL来访问他们的实验室。</li><li id="6bad" class="lo lp hx km b kn lx kq ly jx lz kb ma kf mb lc lt lu lv lw bi translated">另一件非常关键的事情是IAM限制。我知道我在CloudFormation &amp; VPC上简单地设置了完全访问权限，但是在现实世界的场景中，我们总是需要提供最少的权限。这就是为什么这些东西你需要不断更新&amp;尽可能缩小权限。</li><li id="d3ba" class="lo lp hx km b kn lx kq ly jx lz kb ma kf mb lc lt lu lv lw bi translated">最后，我可以再提一个建议，那就是我们正在使用REST API，这意味着它支持各种其他调用，如GET、DELETE、PATCH等。您可以使用它们来构建一个强大的后端。</li></ul><p id="9c35" class="pw-post-body-paragraph kk kl hx km b kn mc iy kp kq md jb ks jx me ku kv kb mf kx ky kf mg la lb lc hb bi translated">好了，我相信这个博客到此结束了…有点大，但很有趣…希望你学到了一些独特的东西。请在评论中留下您的反馈，以便我可以与您交谈。</p><p id="65e8" class="pw-post-body-paragraph kk kl hx km b kn mc iy kp kq md jb ks jx me ku kv kb mf kx ky kf mg la lb lc hb bi translated">我一直在写关于机器学习、DevOps自动化、云计算、大数据等方面的博客。所以，如果你想看我以后的博客，请关注我的媒体。您也可以在LinkedIn上ping我，在下面查看我的LinkedIn个人资料…</p><div class="hh hi ez fb hj ob"><a href="https://www.linkedin.com/in/raktimmidya/" rel="noopener  ugc nofollow" target="_blank"><div class="oc ab dw"><div class="od ab oe cl cj of"><h2 class="bd hy fi z dy og ea eb oh ed ef hw bi translated">Raktim Midya -自由职业者和技术顾问-自由职业者| LinkedIn</h2><div class="oi l"><h3 class="bd b fi z dy og ea eb oh ed ef dx translated">查看Raktim Midya在全球最大的职业社区LinkedIn上的个人资料。Raktim有4个工作列在他们的…</h3></div><div class="oj l"><p class="bd b fp z dy og ea eb oh ed ef dx translated">www.linkedin.com</p></div></div><div class="ok l"><div class="ol l om on oo ok op hp ob"/></div></div></a></div><p id="f562" class="pw-post-body-paragraph kk kl hx km b kn mc iy kp kq md jb ks jx me ku kv kb mf kx ky kf mg la lb lc hb bi translated"><strong class="km hy">感谢大家的阅读。就这样…结束…😊</strong></p><figure class="mi mj mk ml fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es oq"><img src="../Images/699a54167d8ab4ff1d7993aeeea850d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*727-gwHsl824rq6l.png"/></div></div></figure></div></div>    
</body>
</html>