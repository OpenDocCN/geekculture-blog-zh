<html>
<head>
<title>How to Dockerize Java Spring Boot Api &amp; Mongo DB</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何对接Java Spring Boot Api &amp; Mongo DB</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/how-to-dockerize-java-spring-boot-api-mongo-db-2ad5561a2592?source=collection_archive---------0-----------------------#2020-06-28">https://medium.com/geekculture/how-to-dockerize-java-spring-boot-api-mongo-db-2ad5561a2592?source=collection_archive---------0-----------------------#2020-06-28</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/e84afad32c71733ef4690a5a64bb9e4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Jpk0s08G4pH-bhXGYbcF-Q.png"/></div></div></figure><p id="99c5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">Docker是什么？</strong></p><p id="e9ba" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Docker是一个工具，它提供了一种在松散隔离的环境中打包应用程序的方法，该环境被称为<strong class="is hj">容器</strong>。</p><p id="7b19" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">什么是集装箱？</strong></p><p id="a91a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Container是一个虚拟化环境，其中的应用程序在运行时与底层系统相隔离。容器是基础和应用程序的分层映像的集合。</p><figure class="jo jp jq jr fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/21c5c8f052bec8efdd3f57f23af3b4d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1EgM2KEZS_xC6sTOyZKDgA.png"/></div></div></figure><p id="53b9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">为什么要用docker？</strong></p><p id="c569" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在早期，web应用程序是使用虚拟机和一些使用附加工具的部署脚本来部署的。其中虚拟机将创建与您的主操作系统完全隔离的环境，并且依赖于客户操作系统。这里的想法是启动一个虚拟机，设置您的web应用程序，安装数据库服务器、Web服务器等。，每次当你想部署你的web应用程序时，你都必须遵循上面提到的所有步骤，因为这将是一个非常耗时和乏味的过程。使用docker，您不必安装任何客户操作系统，因为docker容器共享主机操作系统。</p><p id="2b26" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">docker的优势？</strong></p><p id="ae79" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">docker的最大优势之一是，与虚拟机相比，它的重量非常轻，并且因为它有效地使用系统资源并帮助隔离应用程序，所以节省了大量的金钱和时间。</p><p id="b69b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">有什么缺点吗？</strong></p><p id="6184" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">docker的核心概念是虚拟化，因此在容器和主机系统之间进行交互时，基础设施仍然会受到限制。其他限制包括持久数据存储、GUI应用程序等的复杂性。,</p></div><div class="ab cl js jt gp ju" role="separator"><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx"/></div><div class="hb hc hd he hf"><p id="a0a5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">所需安装</strong></p><figure class="jo jp jq jr fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/898a3f01bddc348072279216af9a9e4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v2orHt8G2AiRdyM_d1bSOw.png"/></div></div></figure><ul class=""><li id="4ea6" class="jz ka hi is b it iu ix iy jb kb jf kc jj kd jn ke kf kg kh bi translated"><a class="ae ki" href="https://www.java.com/en/" rel="noopener ugc nofollow" target="_blank"> JAVA </a></li><li id="864e" class="jz ka hi is b it kj ix kk jb kl jf km jj kn jn ke kf kg kh bi translated"><a class="ae ki" href="https://maven.apache.org/" rel="noopener ugc nofollow" target="_blank">美文</a></li><li id="99b7" class="jz ka hi is b it kj ix kk jb kl jf km jj kn jn ke kf kg kh bi translated"><a class="ae ki" href="https://www.jetbrains.com/idea/" rel="noopener ugc nofollow" target="_blank"> IntelliJ </a></li><li id="7b80" class="jz ka hi is b it kj ix kk jb kl jf km jj kn jn ke kf kg kh bi translated"><a class="ae ki" href="https://git-scm.com/" rel="noopener ugc nofollow" target="_blank"> GIT </a>(如果你想克隆示例项目的话)</li></ul></div><div class="ab cl js jt gp ju" role="separator"><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx"/></div><div class="hb hc hd he hf"><p id="845b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">创建Spring Boot Api </strong></p><p id="48a3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">从Spring初始化器开始，因为它会很容易地生成boiler plate代码。我们在这里使用的示例项目是一个电影信息管理API。</p><div class="ko kp ez fb kq kr"><a href="https://start.spring.io/" rel="noopener  ugc nofollow" target="_blank"><div class="ks ab dw"><div class="kt ab ku cl cj kv"><h2 class="bd hj fi z dy kw ea eb kx ed ef hh bi translated">弹簧初始化器</h2><div class="ky l"><h3 class="bd b fi z dy kw ea eb kx ed ef dx translated">初始化器生成的spring boot项目正好是你快速启动所需要的！</h3></div><div class="kz l"><p class="bd b fp z dy kw ea eb kx ed ef dx translated">start.spring.io</p></div></div><div class="la l"><div class="lb l lc ld le la lf io kr"/></div></div></a></div><p id="0fa7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">依赖关系</strong></p><figure class="jo jp jq jr fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/b1ac0e94bba502da10f4d0ca679c4d21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MWDDATEw9K5L3lqUqnI_nQ.png"/></div></div></figure><ul class=""><li id="9699" class="jz ka hi is b it iu ix iy jb kb jf kc jj kd jn ke kf kg kh bi translated">Spring Boot入门网站</li><li id="0ec4" class="jz ka hi is b it kj ix kk jb kl jf km jj kn jn ke kf kg kh bi translated">Spring Boot入门数据MongoDB</li><li id="a340" class="jz ka hi is b it kj ix kk jb kl jf km jj kn jn ke kf kg kh bi translated">龙目岛</li></ul><pre class="jo jp jq jr fd lg lh li lj aw lk bi"><span id="ee6b" class="ll lm hi lh b fi ln lo l lp lq">Project: <a class="ae ki" href="https://github.com/karthiksai231/docker-example" rel="noopener ugc nofollow" target="_blank">https://github.com/karthiksai231/docker-example</a></span><span id="fa39" class="ll lm hi lh b fi lr lo l lp lq">Clone: git clone <a class="ae ki" href="https://github.com/karthiksai231/docker-example.git" rel="noopener ugc nofollow" target="_blank">https://github.com/karthiksai231/docker-example.git</a></span></pre></div><div class="ab cl js jt gp ju" role="separator"><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx"/></div><div class="hb hc hd he hf"><p id="7fd2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">运行</strong></p><p id="0f61" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要运行该应用程序，您的系统应该安装了MAVEN。运行以下命令...</p><pre class="jo jp jq jr fd lg lh li lj aw lk bi"><span id="5bb8" class="ll lm hi lh b fi ln lo l lp lq">// Go to Project Root Directory<br/>cd &lt;PathToRootDirectory&gt;</span><span id="637a" class="ll lm hi lh b fi lr lo l lp lq">// Install<br/>mvn clean install</span><span id="2185" class="ll lm hi lh b fi lr lo l lp lq">// Run<br/>java -jar target/&lt;name_of_your_project_jar&gt; </span><span id="b94f" class="ll lm hi lh b fi lr lo l lp lq">// If you have cloned the Project<br/>java -jar target/docker-0.0.1-SNAPSHOT.jar</span></pre><p id="2cf6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一旦项目开始成功运行，您就可以使用…</p><pre class="jo jp jq jr fd lg lh li lj aw lk bi"><span id="e2f6" class="ll lm hi lh b fi ln lo l lp lq">http://localhost:8080/api/v1/movie</span></pre><p id="84a7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">使用API Url创建一个电影条目，在请求正文中包含电影名称和类别。</p><pre class="jo jp jq jr fd lg lh li lj aw lk bi"><span id="69c4" class="ll lm hi lh b fi ln lo l lp lq">// Request Body</span><span id="e2d1" class="ll lm hi lh b fi lr lo l lp lq">{<br/> "movieName" : "IronMan",<br/> "category" : "Action"<br/>}</span><span id="19a9" class="ll lm hi lh b fi lr lo l lp lq">// Response</span><span id="3751" class="ll lm hi lh b fi lr lo l lp lq">Code: 200 (OK)</span><span id="773c" class="ll lm hi lh b fi lr lo l lp lq">{<br/> "movieName": "IronMan",<br/> "category": "Action"<br/>}</span></pre></div><div class="ab cl js jt gp ju" role="separator"><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx"/></div><div class="hb hc hd he hf"><p id="a6ec" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">包装</strong></p><p id="e266" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">目标目录应该包含构建docker映像所需的项目JAR文件。如果您在运行<code class="du ls lt lu lh b">mvn clean install</code>命令后进行了任何额外的更改，请确保重新运行该命令以检测新的更改。</p><pre class="jo jp jq jr fd lg lh li lj aw lk bi"><span id="5064" class="ll lm hi lh b fi ln lo l lp lq">mvn clean install</span></pre></div><div class="ab cl js jt gp ju" role="separator"><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx"/></div><div class="hb hc hd he hf"><p id="fa43" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> Dockerfile </strong></p><figure class="jo jp jq jr fd ij"><div class="bz dy l di"><div class="lv lw l"/></div></figure><p id="ef29" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">构建Docker图像</strong></p><p id="c325" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">转到<strong class="is hj"> Dockerfile </strong>所在的目录，在命令提示符/终端中运行以下命令，为您的应用程序创建docker映像。</p><pre class="jo jp jq jr fd lg lh li lj aw lk bi"><span id="1e0f" class="ll lm hi lh b fi ln lo l lp lq">docker image build -t &lt;name_of_the__app_image&gt; .</span></pre><p id="e061" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">运行码头集装箱</strong></p><p id="d928" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在运行应用程序容器之前，您需要运行相关的数据库容器。</p><p id="924e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要开始，请遵循以下步骤…</p><p id="516d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Mongo数据库</p><pre class="jo jp jq jr fd lg lh li lj aw lk bi"><span id="1e43" class="ll lm hi lh b fi ln lo l lp lq">docker run -d -p 27017:27017 --name &lt;mongo_container_name&gt; --net backend mongo:latest</span></pre><p id="fc59" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">电影应用程序</p><pre class="jo jp jq jr fd lg lh li lj aw lk bi"><span id="4c10" class="ll lm hi lh b fi ln lo l lp lq">docker run --rm -p 8080:8080 --name &lt;name_of_app_container&gt; --net backend --link &lt;mongo_container_name&gt;:mongo &lt;name_of_the__app_image&gt;</span></pre><figure class="jo jp jq jr fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/372052ad880d2f7aa21ddb4eba224533.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pC5s7WJ5AlUzV656STMVMA.png"/></div></div></figure></div><div class="ab cl js jt gp ju" role="separator"><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx"/></div><div class="hb hc hd he hf"><p id="0938" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">奖金</strong></p><p id="cef6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">将应用发布到Docker Hub </strong></p><p id="d533" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">运行以下命令发布您的应用程序映像。您需要有一个docker帐户来发布图像。</p><p id="5722" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae ki" href="https://hub.docker.com/" rel="noopener ugc nofollow" target="_blank">码头工人中心</a></p><p id="90eb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在您的命令提示符/终端中运行以下命令…</p><pre class="jo jp jq jr fd lg lh li lj aw lk bi"><span id="ac04" class="ll lm hi lh b fi ln lo l lp lq">// Login to your Docker account<br/>docker login</span></pre><p id="c2ec" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">docker图像应该在发布图像之前进行标记。为了标记图像，运行以下命令。</p><pre class="jo jp jq jr fd lg lh li lj aw lk bi"><span id="ea44" class="ll lm hi lh b fi ln lo l lp lq">docker image tag &lt;original_image_name&gt; &lt;your_user_name&gt;/&lt;repo_name&gt;:latest</span></pre><p id="2f1c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，您可以发布您的图像了…</p><figure class="jo jp jq jr fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/1f7beaa2485c73c0b24d3c1dfadd4b0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ka_9HjEOXdh07aFroPcGwQ.png"/></div></div></figure><pre class="jo jp jq jr fd lg lh li lj aw lk bi"><span id="a4f0" class="ll lm hi lh b fi ln lo l lp lq">docker image push &lt;your_user_name&gt;/&lt;repo_name&gt;:latest</span></pre><p id="6b08" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> Docker撰写文件</strong></p><p id="e212" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">运行下面的命令<code class="du ls lt lu lh b">docker-compose up</code>来运行电影应用程序和Mongo DB容器，而不需要手动运行任何其他docker命令。</p><p id="57b6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><code class="du ls lt lu lh b">Note: You need to have the application image already created before running the Docker Compose file.</code></p><figure class="jo jp jq jr fd ij"><div class="bz dy l di"><div class="lv lw l"/></div></figure></div></div>    
</body>
</html>