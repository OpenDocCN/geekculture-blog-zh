<html>
<head>
<title>Curve Smoothing and Outliers Removal Using C++.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用C++进行曲线平滑和异常值去除。</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/curve-smoothing-and-outliers-removal-using-c-d3bf6e2fbc78?source=collection_archive---------4-----------------------#2021-07-23">https://medium.com/geekculture/curve-smoothing-and-outliers-removal-using-c-d3bf6e2fbc78?source=collection_archive---------4-----------------------#2021-07-23</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/a1cb5d9699b90ed33b3a0904ae7511c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c-jZFxExDuLiLOS6Ld8Biw.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx">by author</figcaption></figure><div class=""/><p id="382a" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">以下文章定义了在我们执行与特定数据集(或测量)相关的工作时，特定事件的发生(<a class="ae js" href="https://en.wikipedia.org/wiki/Outlier" rel="noopener ugc nofollow" target="_blank">异常值</a>)。异常值是一个数据样本，它与观测值/测量值有很大不同，通常会降低分析性能，引入噪声。在特定情况下，异常值会扭曲最终结果或影响失败的决策。<br/>此外，文章展示了检测异常值并从数据集中移除或被某些值替代简单方法。<br/>异常值检测过程和与该值的弱化相关的动作也可以理解为s曲线平滑过程。</p><p id="2c99" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在这篇文章中，我将展示和部署三个非常简单的方法，它们可以很容易地应用于所有的情况和领域。方法的使用是无限的。它可以用于存在异常值问题的任何地方。以下方法既可以离线使用，作为后处理，也可以在线使用，作为实时异常值去除(曲线平滑)。</p><p id="500e" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">请注意，在下面的文章中，所有给出的例子都利用了预制的<a class="ae js" href="https://gist.github.com/markusbuchholz/5a314e1602ab03e9dbd7ec6fe583da70" rel="noopener ugc nofollow" target="_blank"> <strong class="iw hy">数据集</strong> </a>，这为您自己的研究提供了一个完美的开端。提出的程序结合了库，给机会来绘制你的结果(类似于Python)。我真的建议检查下面的<a class="ae js" href="https://github.com/lava/matplotlib-cpp" rel="noopener ugc nofollow" target="_blank">库</a>。头文件-克隆repo(用于打印库)必须与cpp位于同一文件夹中。</p><p id="076c" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这篇文章的意思是描述做大事的简单方法。我不打算深入C++代码，因为它是不言自明的。对于所有的图，我应用了以下惯例。蓝色曲线表示数据集，橙色表示已处理的数据(使用文件管理器后)。</p><p id="42ec" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">本文中给出方程是以Latex格式编写的。你会在我的<a class="ae js" href="https://gist.github.com/markusbuchholz/2f4f0d6f8cd1a3a3ed7634e9ba5b1cfe" rel="noopener ugc nofollow" target="_blank">要点</a>中找到出处。</p><p id="1625" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">包括的程序，您可以编译并运行如下:</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="9a9a" class="kc kd hx jy b fi ke kf l kg kh">//compile<br/>g++ my_prog.cpp -o my_prog -I/usr/include/python3.8 -lpython3.8// </span><span id="7131" class="kc kd hx jy b fi ki kf l kg kh">//run<br/>./my_prog</span><span id="809f" class="kc kd hx jy b fi ki kf l kg kh">//folder tree<br/>├── my_prog<br/>├── my_prog.cpp<br/>├── matplotlibcpp.h</span></pre><p id="7a75" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">本文中使用的数据集可以绘制如下。请注意，我们将尝试删除可见的异常值，主要是大约10.000以上的值。</p><figure class="jt ju jv jw fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es kj"><img src="../Images/70fea3f5e253b08c56f35a33f2e872d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iIA93LEIr_h25HdPd_29cQ.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx">by author</figcaption></figure></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><h1 id="31a4" class="kr kd hx bd ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">使用标准差去除异常值。</h1><p id="9154" class="pw-post-body-paragraph iu iv hx iw b ix lo iz ja jb lp jd je jf lq jh ji jj lr jl jm jn ls jp jq jr hb bi translated">在本节中，我将展示使用<a class="ae js" href="https://en.wikipedia.org/wiki/Standard_deviation" rel="noopener ugc nofollow" target="_blank"><strong class="iw hy"/></a><strong class="iw hy"/>和<strong class="iw hy"/><a class="ae js" href="https://en.wikipedia.org/wiki/68%E2%80%9395%E2%80%9399.7_rule" rel="noopener ugc nofollow" target="_blank"><strong class="iw hy">68–95–99.7规则</strong> </a>移除异常值有多容易。</p><figure class="jt ju jv jw fd hk er es paragraph-image"><div class="er es lt"><img src="../Images/4b85907c924e015840bad14e6b585af4.png" data-original-src="https://miro.medium.com/v2/resize:fit:876/format:webp/1*G80OXu-qbN212mgHn1sOUA.png"/></div></figure><p id="aeb7" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在统计学中，<strong class="iw hy">标准偏差</strong>(考虑下图和包含的代码)<strong class="iw hy"> </strong>是一个值，用于测量每个数据集样本/总体元素相对于平均值的变化/偏差。在每个正常的数据集中有一个有趣的关系，其中大约68%的值(我们的探针或数据集的其他特征)在一个标准偏差范围内。当范围将扩展到两个标准偏差时，大约95%的数据集值落入该空间。进一步扩展到三个标准偏差保证了大约99.7%的数据集值将被放置在该空间内。</p><figure class="jt ju jv jw fd hk er es paragraph-image"><div class="er es lu"><img src="../Images/4f1eca10e2ca3b0d27f16ee697ad805b.png" data-original-src="https://miro.medium.com/v2/resize:fit:780/format:webp/1*1TqNiMgcshOzXGG2n2h4dA.png"/></div></figure><figure class="jt ju jv jw fd hk"><div class="bz dy l di"><div class="lv lw l"/></div></figure><p id="26c7" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">确定的空间(三个标准偏差)为异常值的检测提供了极好的机会。这意味着，如果样本在三个标准差范围之外，那么它可以被视为异常值，并从即将到来的处理中移除(被过滤)。<br/>上述概念已用于从我们的数据集中移除异常值。如您所见，移除异常值非常简单。请检查C++方法applyFilterB()代码，并相应地调整filer最感兴趣的范围——“样本接受”范围。</p><figure class="jt ju jv jw fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lx"><img src="../Images/f5f5e84b208555ebc6798dc92470909c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RrCsowxm4CHHkOO6lz-T7Q.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx">by author</figcaption></figure><h1 id="900d" class="kr kd hx bd ks kt ly kv kw kx lz kz la lb ma ld le lf mb lh li lj mc ll lm ln bi translated">滚动平均值。</h1><p id="8d42" class="pw-post-body-paragraph iu iv hx iw b ix lo iz ja jb lp jd je jf lq jh ji jj lr jl jm jn ls jp jq jr hb bi translated"><a class="ae js" href="https://en.wikipedia.org/wiki/Moving_average" rel="noopener ugc nofollow" target="_blank"> <strong class="iw hy">滚动平均</strong> </a> <strong class="iw hy"> </strong>是用于平滑曲线或去除异常值的简单方法。<br/>该方法的概念可在下图中呈现。首先，我们需要定义的是窗口的长度(在本例中，窗口的长度等于3)。请注意，窗口长度直接取决于数据集类型。</p><figure class="jt ju jv jw fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es md"><img src="../Images/916687ef4e1c76e238a47e1b14f1d22b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LT6NDaTsKHjmo7iWbQ41KA.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx">by author</figcaption></figure><p id="344b" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">窗口长度决定了我们为了计算平均值而考虑多少样本，平均值进一步被认为是来自所讨论的滤波器(平滑块或异常值去除)的输出值。计算平均值时，窗口将向右移动一个采样时间(在时域中),并计算新窗口的平均值。<br/>滚动平均过滤器已部署到rollingMeanFilterB()中。应用长度为6的窗口，我们能够降低异常值。</p><figure class="jt ju jv jw fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es me"><img src="../Images/0d1b5f2f74f542d7c92cce3abad089a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uAe9Tk1NH63wbO1fNJ_A2g.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx">by author</figcaption></figure></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><h1 id="18ff" class="kr kd hx bd ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">自定义过滤器。</h1><p id="88bd" class="pw-post-body-paragraph iu iv hx iw b ix lo iz ja jb lp jd je jf lq jh ji jj lr jl jm jn ls jp jq jr hb bi translated">当您运行流程或测量值时，可能会发生值的突然变化。在这种情况下，不建议应用过滤器(异常值去除)，因为我们错过了有价值的值，例如“激活”过程警报或描述系统的真实状态(可观察过程)。在下图中，我准备了系统如何工作的主要概述。我们还使用了窗口概念(长度可调)。然后，如果连续样本高于限值，系统将采取措施。<br/>在下面的例子中，我们应用的窗口长度等于3。如果连续3个样本高于限值，则报警会弹出或设置适当的值。在我们的例子中，用C++代码——apply filtera()方法表示，输出值被设置为标准偏差+平均值。</p><p id="9577" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">该方法应用于所考虑的数据集的结果如下图所示。</p><figure class="jt ju jv jw fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mf"><img src="../Images/17809d89a07c5f409b4c9c6e6f35c30c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bUk5sL8ztogSz_Mh8e7iCA.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx">by author</figcaption></figure><p id="7554" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">下面是实现了所有给出的功能的代码。</p><figure class="jt ju jv jw fd hk"><div class="bz dy l di"><div class="lv lw l"/></div></figure><p id="cf6b" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">感谢阅读。</p></div></div>    
</body>
</html>