<html>
<head>
<title>Coding A Discord Bot Using Elixir And Alchemy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用长生不老药和炼金术编写一个不和谐机器人</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/coding-a-discord-bot-using-elixir-and-alchemy-cb2ca41b397c?source=collection_archive---------8-----------------------#2021-07-08">https://medium.com/geekculture/coding-a-discord-bot-using-elixir-and-alchemy-cb2ca41b397c?source=collection_archive---------8-----------------------#2021-07-08</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="fbfb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">灵药和炼金术入门指南。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/650508719323b9d954e3c4c0aef6daf1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d9g-rNBzo77tEDurMlNwSg.png"/></div></div></figure><p id="53ad" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这个故事中，你将学习如何使用<strong class="ih hj">仙丹</strong>和<a class="ae jp" href="https://github.com/cronokirby/alchemy" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">炼金术</strong> </a>制作一个简单的不和谐机器人。</p><h2 id="7dd2" class="jq jr hi bd js jt ju jv jw jx jy jz ka iq kb kc kd iu ke kf kg iy kh ki kj kk bi translated">注意:</h2><p id="f8a1" class="pw-post-body-paragraph if ig hi ih b ii kl ik il im km io ip iq kn is it iu ko iw ix iy kp ja jb jc hb bi translated">我不会在这里解释什么是长生不老药。如果你想了解更多关于仙丹的知识，一定要看看我的故事。</p><div class="kq kr ez fb ks kt"><a href="https://alimarslank.medium.com/what-is-elixir-3f6a96d8f642" rel="noopener follow" target="_blank"><div class="ku ab dw"><div class="kv ab kw cl cj kx"><h2 class="bd hj fi z dy ky ea eb kz ed ef hh bi translated">什么是仙丹？</h2><div class="la l"><h3 class="bd b fi z dy ky ea eb kz ed ef dx translated">什么是仙丹，为什么它很牛逼？</h3></div><div class="lb l"><p class="bd b fp z dy ky ea eb kz ed ef dx translated">alimarslank.medium.com</p></div></div><div class="lc l"><div class="ld l le lf lg lc lh jn kt"/></div></div></a></div><p id="aa81" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">开始吧！</p></div><div class="ab cl li lj gp lk" role="separator"><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln"/></div><div class="hb hc hd he hf"><h1 id="9a9c" class="lp jr hi bd js lq lr ls jw lt lu lv ka lw lx ly kd lz ma mb kg mc md me kj mf bi translated">创造我们的机器人</h1><p id="2cf8" class="pw-post-body-paragraph if ig hi ih b ii kl ik il im km io ip iq kn is it iu ko iw ix iy kp ja jb jc hb bi translated">以下是创建不和谐机器人的步骤。</p><p id="b40b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">1.确保您已登录到<a class="ae jp" href="https://discord.com/" rel="noopener ugc nofollow" target="_blank"> Discord网站</a>。</p><p id="812c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.导航至<a class="ae jp" href="https://discord.com/developers/applications" rel="noopener ugc nofollow" target="_blank">应用程序页面</a>。</p><p id="d01c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.单击“新建应用程序”按钮。</p><p id="cc63" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">4.为应用程序命名，然后单击“创建”。我把我的机器人命名为Allybot。</p><p id="a1d6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">5.转到“机器人”选项卡，然后单击“添加机器人”。你必须通过点击“是，做它！”来确认</p><p id="bb3f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">6.保留<strong class="ih hj">公共Bot </strong>(选中)和<strong class="ih hj">需要OAuth2代码授权</strong>(未选中)的默认设置。</p><p id="d437" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">7.您的机器人已经创建。下一步是复制令牌。</p><p id="f355" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个令牌是你的机器人的密码，所以不要与任何人分享。它可以让某人登录你的机器人，做各种坏事。</p><p id="4388" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">顺便说一下，如果令牌意外地被共享，您可以重新生成它。</p><p id="b420" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">8.将令牌保存在某个地方，当我们开始编写机器人代码时，您将需要它。</p></div><div class="ab cl li lj gp lk" role="separator"><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln"/></div><div class="hb hc hd he hf"><h1 id="8cfc" class="lp jr hi bd js lq lr ls jw lt lu lv ka lw lx ly kd lz ma mb kg mc md me kj mf bi translated">编写我们的机器人</h1><p id="34c3" class="pw-post-body-paragraph if ig hi ih b ii kl ik il im km io ip iq kn is it iu ko iw ix iy kp ja jb jc hb bi translated">是时候写一些代码了！但是首先，我们必须初始化一个新项目。</p><h2 id="10cb" class="jq jr hi bd js jt ju jv jw jx jy jz ka iq kb kc kd iu ke kf kg iy kh ki kj kk bi translated">初始化我们的项目</h2><pre class="je jf jg jh fd mg mh mi mj aw mk bi"><span id="01ff" class="jq jr hi mh b fi ml mm l mn mo">mix new allybot --sup</span></pre><p id="085c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该命令将创建一个在主管下运行的新的Elixir应用程序。很简单，对吧？还有，你不一定要把你的机器人命名为“allybot”。你想怎么改都行。</p><p id="dda7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以按照自己的意愿清理生成的项目。只要确保不删除除了<code class="du mp mq mr mh b">test</code>文件夹之外的任何内容。</p><h2 id="01a1" class="jq jr hi bd js jt ju jv jw jx jy jz ka iq kb kc kd iu ke kf kg iy kh ki kj kk bi translated">添加炼金术</h2><p id="20f0" class="pw-post-body-paragraph if ig hi ih b ii kl ik il im km io ip iq kn is it iu ko iw ix iy kp ja jb jc hb bi translated">让我们在项目中加入炼金术。</p><p id="fdd5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">打开你的<code class="du mp mq mr mh b">mix.exs</code>文件，在<code class="du mp mq mr mh b">deps</code>中添加下面的一行。</p><pre class="je jf jg jh fd mg mh mi mj aw mk bi"><span id="4004" class="jq jr hi mh b fi ml mm l mn mo">{:alchemy, "~&gt; 0.7.0", hex: :discord_alchemy}</span></pre><p id="cb22" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是目前最新的炼金术版本。请务必检查炼金术文档，看看是否有任何新版本。</p><p id="d618" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">之后打开<code class="du mp mq mr mh b">lib/allybot/application.ex</code>，确保看起来像下面的代码。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ms mt l"/></div></figure><p id="f626" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这基本上是使用令牌启动您的bot并加载命令模块。</p><h2 id="7b07" class="jq jr hi bd js jt ju jv jw jx jy jz ka iq kb kc kd iu ke kf kg iy kh ki kj kk bi translated">命令模块</h2><p id="7faa" class="pw-post-body-paragraph if ig hi ih b ii kl ik il im km io ip iq kn is it iu ko iw ix iy kp ja jb jc hb bi translated">让我们创建我们的命令模块。</p><p id="5f9b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在<code class="du mp mq mr mh b">lib</code>文件夹中创建一个名为<code class="du mp mq mr mh b">commands.ex</code>的新文件，并在其中添加以下代码。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ms mt l"/></div></figure><p id="1b56" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该命令基本上会侦听“！乒”消息，然后用“乓！”。</p><p id="5f3b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是如果你现在运行这个机器人，它将会失败。为什么呢？</p><p id="4274" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因为我们还没有创建一个配置文件和我们的令牌，当然！</p><h2 id="b68b" class="jq jr hi bd js jt ju jv jw jx jy jz ka iq kb kc kd iu ke kf kg iy kh ki kj kk bi translated">配置</h2><p id="8c49" class="pw-post-body-paragraph if ig hi ih b ii kl ik il im km io ip iq kn is it iu ko iw ix iy kp ja jb jc hb bi translated">让我们现在添加我们的配置。</p><p id="16aa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">创建一个名为<code class="du mp mq mr mh b">config</code>的文件夹，并在该文件夹中创建一个名为<code class="du mp mq mr mh b">config.exs</code>的文件。</p><p id="63f8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后在<code class="du mp mq mr mh b">config/config.exs</code>里面，添加下面的代码。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ms mt l"/></div></figure><p id="a064" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这就是我们如何在Elixir中设置配置变量。</p><p id="6c1f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后一步是实际设置环境变量。为此，请在您的终端内部运行下面的命令。</p><pre class="je jf jg jh fd mg mh mi mj aw mk bi"><span id="cf90" class="jq jr hi mh b fi ml mm l mn mo">export BOT_TOKEN=&lt;your-bot-token&gt;</span></pre><p id="bb9e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">就是这样！您现在可以运行您的bot并测试我们的ping命令。</p></div><div class="ab cl li lj gp lk" role="separator"><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln"/></div><div class="hb hc hd he hf"><h1 id="762e" class="lp jr hi bd js lq lr ls jw lt lu lv ka lw lx ly kd lz ma mb kg mc md me kj mf bi translated">最后的想法</h1><p id="04c0" class="pw-post-body-paragraph if ig hi ih b ii kl ik il im km io ip iq kn is it iu ko iw ix iy kp ja jb jc hb bi translated">你已经学会了炼金术的基础。我希望你能从这个故事中学到一些新的东西。</p><p id="b671" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你想学习更多关于炼金术的知识，一定要看看它的文档。</p></div><div class="ab cl li lj gp lk" role="separator"><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln"/></div><div class="hb hc hd he hf"><h1 id="720e" class="lp jr hi bd js lq lr ls jw lt lu lv ka lw lx ly kd lz ma mb kg mc md me kj mf bi translated">仅此而已。感谢您阅读这个故事！</h1><p id="f388" class="pw-post-body-paragraph if ig hi ih b ii kl ik il im km io ip iq kn is it iu ko iw ix iy kp ja jb jc hb bi translated">如果你喜欢这个故事，一定要为它鼓掌！你想问我什么都可以。</p><p id="9efb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在Twitter上关注我:</p><div class="kq kr ez fb ks kt"><a href="https://twitter.com/Re_allyedge" rel="noopener  ugc nofollow" target="_blank"><div class="ku ab dw"><div class="kv ab kw cl cj kx"><h2 class="bd hj fi z dy ky ea eb kz ed ef hh bi translated">re _ ally边缘</h2><div class="lb l"><p class="bd b fp z dy ky ea eb kz ed ef dx translated">twitter.com</p></div></div><div class="lc l"><div class="mu l le lf lg lc lh jn kt"/></div></div></a></div><p id="6b05" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在Patreon上支持我:</p><div class="kq kr ez fb ks kt"><a href="https://www.patreon.com/allyedge" rel="noopener  ugc nofollow" target="_blank"><div class="ku ab dw"><div class="kv ab kw cl cj kx"><h2 class="bd hj fi z dy ky ea eb kz ed ef hh bi translated">阿里木阿尔斯兰卡亚是创造编程故事和教程。帕特里翁</h2><div class="la l"><h3 class="bd b fi z dy ky ea eb kz ed ef dx translated">今天就成为阿里木阿尔斯兰卡亚的赞助人:在世界上最大的…</h3></div><div class="lb l"><p class="bd b fp z dy ky ea eb kz ed ef dx translated">www.patreon.com</p></div></div><div class="lc l"><div class="mv l le lf lg lc lh jn kt"/></div></div></a></div></div></div>    
</body>
</html>