# 微服务的最佳实践

> 原文：<https://medium.com/geekculture/best-practices-for-microservices-aad94b20497b?source=collection_archive---------6----------------------->

![](img/aaaae3285259cd911936f7b3a68cddc9.png)

欢迎阅读另一篇文章。本文将告诉您在开发微服务时应该遵循的最佳实践。如果你是微服务的新手，你可以参考我以前的文章，这是微服务介绍。因此，在不深入讨论的情况下，让我们继续讨论开发微服务应用时应该遵循的最佳实践。

# 1.设计应该是领域驱动的

当你计划或设计一个新的微服务应用时，你需要有全新的想法。您需要考虑如何将整个解决方案分成独立的服务。有些人将所有服务都放在微服务中，并说只是为了说我们已经转移到微服务。所以不要那样做。假设我们有一个银行应用程序，有用户帐户模块、用户注册模块、存款模块、取款模块、信用卡/借记卡处理模块。所以你需要记住不要把所有的都放在一两个服务中。

如果您的应用程序目前处于单片架构中，并且您计划迁移到微服务。你需要重新思考它。有些情况下，您不需要从头重写整个应用程序。你只需要花点时间重新思考。因此，如果另一个服务中有任何不相关的服务，您可以将其取出，并为其创建一个单独的模块。就像 wise 一样，有时你可以通过一些小的改动来做到这一点，而不需要重写整个应用程序。

# 2.硬编码值

假设我们有名为 A 和 B 的微服务，A 使用服务 B 的地址调用服务 B。有时开发人员在服务 A 上硬编码 url 和主机名。现在服务 A 肯定知道服务 b 在哪里了。但是有一些缺点。假设您公司的网络团队决定更改主机名或网络地址。因此，如果他们改变了它，那么你的应用程序就不再工作了。然后开发人员需要进行修改并再次部署它。因为它不是一个好的实践，你能做的是有一些服务发现机制工具，所以你能使用那些而不是硬编码。

# 3.记录

日志记录是检测应用程序故障的一种重要机制。但是许多开发人员都在与日志作斗争。有时候，开发人员对一个失败使用了太多的日志，这不是一个好的做法。所以记住不要用太多的原木。您可以记录您启动该过程的位置。您还需要记录堆栈竞争。

# 4.版本化微服务

版本控制背后的全部意义是让您跟踪您所做的所有变更和进展。所以请记住版本控制是必须的。最广泛使用的版本化方案之一是语义版本化。您可以遵循语义版本化。

![](img/37a68b9442e1259559e6dc386cec550c.png)

**语义版本化**是使用三部分版本号指定兼容性的正式约定:**主要版本、次要版本和补丁。**当您升级到主要版本时，您可以将服务作为单独服务进行部署，并在维护先前版本的同时通知消费者升级到新版本。一旦所有的消费者都迁移到新版本，你就可以解耦以前的版本。

# 5.处理授权和认证

在这里，您需要记住不要在每一个服务中验证用户，因为这将为您的往返行程增加越来越多的延迟。你可以做的是，你可以有一个单独的身份验证服务，无论请求传入你的服务层，你都可以重定向到身份服务。如果它成功，你可以直接向其他服务。

# 6.容错

在微服务中，由于有多种服务，因此出现故障的可能性很大。因此，您需要适当地管理它们。如果一个服务需要很长时间来响应，那么它应该很快失败。因为等待的时间会让服务后面多出一个队列。我将在下一篇讨论微服务设计模式的文章中对此进行更深入的解释。所以现在请记住，如果失败正在发生，您需要进行适当管理。

# 7.证明文件

作为软件工程师，大多数人不喜欢做文档工作。然而，文档是必须的，因为我们需要创建一个好的文档，这样其他人才能很好地理解它。好消息是有一个叫 swagger 的工具，我们可以用一种技术的方式来写文档，它可以把所有这些转换成一个非常有吸引力的文档。

这是本文的结尾。我希望你了解微服务的最佳实践是什么。下一篇文章很可能是微服务的设计模式。所以是时候说再见了，保持联系。

# 参考

[](https://dzone.com/articles/how-to-version-your-software) [## 如何版本化你的软件——DZone 开源

### 我经常收到关于软件版本的问题。虽然看似琐碎简单，但当人们开始…

dzone.com](https://dzone.com/articles/how-to-version-your-software)