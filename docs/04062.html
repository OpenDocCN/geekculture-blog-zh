<html>
<head>
<title>Dynamic components in Vue 3.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Vue 3中的动态组件。</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/dynamic-components-in-vue-3-7504d5ffcb6c?source=collection_archive---------3-----------------------#2021-06-21">https://medium.com/geekculture/dynamic-components-in-vue-3-7504d5ffcb6c?source=collection_archive---------3-----------------------#2021-06-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="12a1" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">从JSON创建动态组件。</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/bea7ffddf95d2132ffab6061c446dd0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JHF8TgaqnyabAoPXVQeSbw.png"/></div></div></figure><p id="273c" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">Vue无疑是最受喜爱的前端javascript框架之一。我们将在Vue中创建一个动态可重用组件，它完全由一个JSON对象呈现。JSON对象可以保存在前端，也可以通过rest api从后端接收。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es kf"><img src="../Images/6b4b035c0826a3236804e02667fa4738.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cbT2g2HOG3VxLTS68DHEhg.png"/></div></div></figure><p id="ef42" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">上面的代码是一个JSON对象的例子。我们一会儿将揭开这个结构的神秘面纱，但在此之前，让我们看看下图，这是这个JSON的渲染html。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es kg"><img src="../Images/4435a233cf07a820d90939da6eff202d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SnuhFugjvdA85eQAJlSD2w.png"/></div></div><figcaption class="kh ki et er es kj kk bd b be z dx">Final Rendered HTML</figcaption></figure><p id="f54c" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">JSON的每一个属性都在下面解释。我们可以向对象添加更多的属性，并在代码中进行必要的更改，以创建更多的动态组件。这里我只创建了几个，用于演示目的。</p><pre class="iy iz ja jb fd kl km kn ko aw kp bi"><span id="83d6" class="kq kr hi km b fi ks kt l ku kv">1.label   - Label that is displayed ,<br/>2.type    - Type of component rendered like input, select..<br/>3.state   - which data property is created for this component to store the data.<br/>4.options - This is the options array for select component specific to &lt;select /&gt;</span></pre><p id="dce2" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">现在让我们直接进入代码。👨‍💻</p><p id="648d" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">我们正在创建三个不同的组件输入、选择和文本显示</p><ol class=""><li id="422c" class="kw kx hi jl b jm jn jp jq js ky jw kz ka la ke lb lc ld le bi translated">输入. vue</li></ol><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lf"><img src="../Images/f7e7d1919620441f0c0dace5a6fffccc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MKqG8SVuVVTnagzRX4vRDQ.png"/></div></div><figcaption class="kh ki et er es kj kk bd b be z dx">Input.vue component</figcaption></figure><p id="32fd" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在这个组件中，标签和值作为props被传递，而<code class="du lg lh li km b">'@input'</code>我们发出<code class="du lg lh li km b">$event</code>，这意味着当你在输入框中输入一些东西时，数据将作为一个事件被传递给父组件</p><p id="bade" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">2.SelectList.vue</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lj"><img src="../Images/eb59a0959799071370b462820d8e6c11.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9e6HFyKsmQNErmRIHJvHRw.png"/></div></div><figcaption class="kh ki et er es kj kk bd b be z dx">SelectList.vue component</figcaption></figure><p id="fb9e" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">选择组件的主要区别是我们多了一个道具<code class="du lg lh li km b">options</code>来显示不同的选项，而不是<code class="du lg lh li km b">'@input'</code>，我们使用了<code class="du lg lh li km b">'@change'</code>。</p><p id="e518" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">3.TextDisplay.vue</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lk"><img src="../Images/fe03f62b2de8f0c63ad08771d8658fce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LXtXm4Ftd0dtQFC6osSWlw.png"/></div></div><figcaption class="kh ki et er es kj kk bd b be z dx">TextDisplay.vue component</figcaption></figure><p id="981a" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">该组件仅用于显示数据，因此不会发出<code class="du lg lh li km b">$event</code>信号，因为我们没有改变任何状态。</p><p id="2603" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">现在我们将创建一个DynamicRenderer组件，它将从JSON中的值<code class="du lg lh li km b">type</code>中选择所需的组件。现在你会注意到<code class="du lg lh li km b">type</code>中的值是组件名。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ll"><img src="../Images/88581ebb8ca89b74e13a4bd187c9f454.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2bsPTOxIXUzblcM-QgNI5Q.png"/></div></div><figcaption class="kh ki et er es kj kk bd b be z dx">DynamicRenderer component</figcaption></figure><p id="da91" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在这个DynamicRenderer中，Vue提供的主要灵活性是<code class="du lg lh li km b">&lt;component&gt;&lt;/component&gt;</code>，它是一个动态组件，可以接受任何组件并动态呈现它们(我们也可以用<strong class="jl hj"> v-if </strong>有条件地呈现)。您可以看到<code class="du lg lh li km b">:is="schema.type"</code>，其中<code class="du lg lh li km b">schme.type</code>是来自JSON的组件类型。如果一个<code class="du lg lh li km b">input</code>事件被触发，那么我们将发出一个带有<code class="du lg lh li km b">state</code>(它是<code class="du lg lh li km b">data</code>属性的键)和<code class="du lg lh li km b">event.target.value</code>(它是从子组件发出的值事件)的<code class="du lg lh li km b">input</code>事件。</p><p id="af2f" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">最后，我们可以使用这个<code class="du lg lh li km b">&lt;DynamicRenderer/&gt;</code>组件来呈现动态表单。</p><p id="0329" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">我们已经在App.vue中使用过了，如下图。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lm"><img src="../Images/fe5379338ecc28e7c2062c512d48cc1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*muX6EWYIyVhHFdhq4gmiKA.png"/></div></div><figcaption class="kh ki et er es kj kk bd b be z dx">App.vue -&gt; DynamicRenderer is used</figcaption></figure><p id="0bd2" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在这里，您可以看到组件<code class="du lg lh li km b">&lt;DynamicRenderer/&gt;</code>获取了<code class="du lg lh li km b">typeSchema</code>和一个<code class="du lg lh li km b">data</code>属性，而<code class="du lg lh li km b">'@input'</code>将调用一个方法updateData，该方法将使用键<code class="du lg lh li km b">state</code>和值<code class="du lg lh li km b">value</code>来更新<code class="du lg lh li km b">data</code>属性。如果您使用Vue 2，则将<code class="du lg lh li km b">this.data[state] = value</code>更改为<code class="du lg lh li km b">this.$set(this.data,state,value)</code>。</p><p id="f7d0" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">现在让我通过改变模式向您展示这个组件的强大功能。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ln"><img src="../Images/2e1d27cd188e3fdc1d81fe6d39ead6b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xfpnhnPGJ4MxlaH6cyqqRA.png"/></div></div><figcaption class="kh ki et er es kj kk bd b be z dx">Changed json</figcaption></figure><p id="d100" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">下面是渲染后的HTML，其中的<code class="du lg lh li km b">data</code>属性得到了巩固。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es kg"><img src="../Images/7968a31d31da0b0e36ac9af7068aa1e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MO17u9iE410HgD-hLmbBYw.png"/></div></div><figcaption class="kh ki et er es kj kk bd b be z dx">Rendered HTM with data in the console</figcaption></figure><blockquote class="lo lp lq"><p id="0f9c" class="jj jk lr jl b jm jn ij jo jp jq im jr ls jt ju jv lt jx jy jz lu kb kc kd ke hb bi translated">这里是本文解释的所有代码的github存储库。</p></blockquote><div class="lv lw ez fb lx ly"><a href="https://github.com/hariwin7/dynamic-vue-components" rel="noopener  ugc nofollow" target="_blank"><div class="lz ab dw"><div class="ma ab mb cl cj mc"><h2 class="bd hj fi z dy md ea eb me ed ef hh bi translated">Hari win 7/动态vue组件</h2><div class="mf l"><h3 class="bd b fi z dy md ea eb me ed ef dx translated">在GitHub上创建一个帐户，为hariwin7/dynamic-vue组件开发做出贡献。</h3></div><div class="mg l"><p class="bd b fp z dy md ea eb me ed ef dx translated">github.com</p></div></div><div class="mh l"><div class="mi l mj mk ml mh mm jh ly"/></div></div></a></div><p id="fbf1" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">如果你喜欢这些内容，请在这里@medium和linkdin关注我</p><div class="lv lw ez fb lx ly"><a href="https://www.linkedin.com/in/hariprasad-k-b-58878512b/" rel="noopener  ugc nofollow" target="_blank"><div class="lz ab dw"><div class="ma ab mb cl cj mc"><h2 class="bd hj fi z dy md ea eb me ed ef hh bi translated">Hariprasad K.B -全栈开发者- TranZact | LinkedIn</h2><div class="mf l"><h3 class="bd b fi z dy md ea eb me ed ef dx translated">查看Hariprasad K.B在全球最大的职业社区LinkedIn上的个人资料。Hariprasad有3份工作列在…</h3></div><div class="mg l"><p class="bd b fp z dy md ea eb me ed ef dx translated">www.linkedin.com</p></div></div><div class="mh l"><div class="mn l mj mk ml mh mm jh ly"/></div></div></a></div><p id="233b" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">你可以订阅我的电子邮件列表</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mo mp l"/></div></figure></div></div>    
</body>
</html>