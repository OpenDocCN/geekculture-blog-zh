<html>
<head>
<title>AWS Amplify for Flutter</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">AWS颤振放大器</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/aws-amplify-for-flutter-613c1c07b0e2?source=collection_archive---------5-----------------------#2021-07-04">https://medium.com/geekculture/aws-amplify-for-flutter-613c1c07b0e2?source=collection_archive---------5-----------------------#2021-07-04</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="36f5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd"> AWS Amplify是一套工具和服务，可以一起使用或单独使用，帮助前端web和移动开发者构建可扩展的全栈应用，由AWS提供支持。使用Amplify，您可以在几分钟内配置应用后端并连接您的应用，只需几次点击即可部署静态web应用，并在AWS控制台外轻松管理应用内容。</em></p><p id="c12d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd"> Amplify支持包括JavaScript、React、Angular、Vue、Next.js在内的流行web框架，以及包括Android、iOS、React Native、Ionic、Flutter在内的移动平台。借助AWS Amplify更快上市。</em></p><p id="f7df" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本文中，我将按照本页的<a class="ae je" href="https://docs.amplify.aws/start/getting-started/installation/q/integration/flutter" rel="noopener ugc nofollow" target="_blank">中介绍的步骤配置AWS Amplify，使其与Flutter一起使用，以<strong class="ih hj">添加认证支持</strong>。我们将了解使用Amplify CLI时会发生什么，以及在AWS中创建了哪些资源。</a></p></div><div class="ab cl jf jg gp jh" role="separator"><span class="ji bw bk jj jk jl"/><span class="ji bw bk jj jk jl"/><span class="ji bw bk jj jk"/></div><div class="hb hc hd he hf"><h1 id="4491" class="jm jn hi bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated">#1放大CLI</h1><p id="d834" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">Amplify命令行界面(CLI)是一个统一的工具链，用于为您的应用程序创建AWS云服务。</p><figure class="kq kr ks kt fd ku er es paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="er es kp"><img src="../Images/3b1d9e276dcfaab8c0fd2dd2480cb599.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kLsFU7SlkyzT_GagbCnasg.png"/></div></div></figure><h1 id="5297" class="jm jn hi bd jo jp lb jr js jt lc jv jw jx ld jz ka kb le kd ke kf lf kh ki kj bi translated">安装并验证依赖关系</h1><p id="cd84" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">放大CLI需要节点和npm。首先安装这些并验证它们。为了查看在AWS中创建的资源，我们将使用<a class="ae je" href="https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2.html" rel="noopener ugc nofollow" target="_blank"> AWS CLI </a>。</p><figure class="kq kr ks kt fd ku er es paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="er es lg"><img src="../Images/4e58951c0ed678e7f61109e979a1405f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q9HjeIwIpMs9iCxD30ZH7g.png"/></div></div></figure><h1 id="1517" class="jm jn hi bd jo jp lb jr js jt lc jv jw jx ld jz ka kb le kd ke kf lf kh ki kj bi translated">安装Amplify CLI</h1><pre class="kq kr ks kt fd lh li lj lk aw ll bi"><span id="86dd" class="lm jn hi li b fi ln lo l lp lq">➜ curl -sL <a class="ae je" href="https://aws-amplify.github.io/amplify-cli/install" rel="noopener ugc nofollow" target="_blank">https://aws-amplify.github.io/amplify-cli/install</a> | bash &amp;&amp; $SHELL</span></pre><figure class="kq kr ks kt fd ku er es paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="er es lr"><img src="../Images/1c2c7d5f3bb6434d3ab81d6b279c707d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LpVuEnMJiu7LbDn2EhR76Q.png"/></div></div></figure><h1 id="85ae" class="jm jn hi bd jo jp lb jr js jt lc jv jw jx ld jz ka kb le kd ke kf lf kh ki kj bi translated">核实</h1><pre class="kq kr ks kt fd lh li lj lk aw ll bi"><span id="d17f" class="lm jn hi li b fi ln lo l lp lq">➜ amplify --version<br/>5.1.0</span><span id="ed8d" class="lm jn hi li b fi ls lo l lp lq">➜ amplify help</span></pre></div><div class="ab cl jf jg gp jh" role="separator"><span class="ji bw bk jj jk jl"/><span class="ji bw bk jj jk jl"/><span class="ji bw bk jj jk"/></div><div class="hb hc hd he hf"><h1 id="88f3" class="jm jn hi bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated">#2配置</h1><p id="1285" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">此步骤通过打开AWS Web控制台创建一个AWS IAM(身份和访问管理)用户，并配置本地机器使用AWS。</p><pre class="kq kr ks kt fd lh li lj lk aw ll bi"><span id="66f9" class="lm jn hi li b fi ln lo l lp lq">➜ amplify configure</span></pre><figure class="kq kr ks kt fd ku er es paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="er es lt"><img src="../Images/e7f1f24ea638e41cd0103e5c410e2fbf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dtkImpe3Su2EwURVgP1Z1w.png"/></div></div></figure><p id="9a35" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">这一步会发生什么？</strong></p><ul class=""><li id="bf59" class="lu lv hi ih b ii ij im in iq lw iu lx iy ly jc lz ma mb mc bi translated">区域-区域是创建AWS资源的地方。</li><li id="2bcd" class="lu lv hi ih b ii md im me iq mf iu mg iy mh jc lz ma mb mc bi translated">用户名IAM用户的名称</li><li id="3800" class="lu lv hi ih b ii md im me iq mf iu mg iy mh jc lz ma mb mc bi translated">注意，IAM用户是使用<strong class="ih hj"> AdministratorAccess创建的。</strong>这使用户可以无限制地访问aws帐户。</li><li id="d84c" class="lu lv hi ih b ii md im me iq mf iu mg iy mh jc lz ma mb mc bi translated">一旦用户被创建，网络控制台为用户显示<strong class="ih hj">访问键</strong>和<strong class="ih hj">秘书访问键</strong>。这些是以编程方式(使用SDK/CLI)访问AWS所必需的。</li><li id="5238" class="lu lv hi ih b ii md im me iq mf iu mg iy mh jc lz ma mb mc bi translated">最后它要求<strong class="ih hj">档案名称</strong>。默认情况下，它使用配置文件<strong class="ih hj">默认值。</strong>但是，如果我们需要从CLI访问多个用户/帐户，我们需要有不同的配置文件名。在这种情况下，我将<strong class="ih hj"> rk </strong>作为我的配置文件名。</li><li id="e684" class="lu lv hi ih b ii md im me iq mf iu mg iy mh jc lz ma mb mc bi translated">如果该步骤完成，用户配置将存储在本地的两个文件中。文件是<code class="du mi mj mk li b">~/.aws/config</code> <strong class="ih hj"> </strong>和<code class="du mi mj mk li b">~/.aws/credentials.</code></li></ul><h1 id="4419" class="jm jn hi bd jo jp lb jr js jt lc jv jw jx ld jz ka kb le kd ke kf lf kh ki kj bi translated">核实</h1><pre class="kq kr ks kt fd lh li lj lk aw ll bi"><span id="7b7f" class="lm jn hi li b fi ln lo l lp lq">➜ aws configure list --profile rk</span></pre><figure class="kq kr ks kt fd ku er es paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="er es ml"><img src="../Images/15eea2dffb2bf6d4b69f5a2d62a2b90d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Iv6mmITovLZoiPq1wJvj1Q.png"/></div></div></figure><blockquote class="mm mn mo"><p id="c689" class="if ig jd ih b ii ij ik il im in io ip mp ir is it mq iv iw ix mr iz ja jb jc hb bi translated">访问密钥和秘密密钥非常敏感。不要与任何人共享，也不要将它们包含在代码库中。</p></blockquote></div><div class="ab cl jf jg gp jh" role="separator"><span class="ji bw bk jj jk jl"/><span class="ji bw bk jj jk jl"/><span class="ji bw bk jj jk"/></div><div class="hb hc hd he hf"><h1 id="079d" class="jm jn hi bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated">#3创建一个颤振应用</h1><pre class="kq kr ks kt fd lh li lj lk aw ll bi"><span id="3343" class="lm jn hi li b fi ln lo l lp lq">➜ flutter create my_amplify_app</span></pre><p id="99f6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">更新</strong> <code class="du mi mj mk li b"><strong class="ih hj">pubspec.yaml</strong></code> <strong class="ih hj">以包括放大依赖关系。</strong></p><figure class="kq kr ks kt fd ku er es paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="er es ms"><img src="../Images/8ee3e1342e9dc707b429447e67769de6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UtdGuzQvxsYhTiTWYAYrFw.png"/></div></div></figure><pre class="kq kr ks kt fd lh li lj lk aw ll bi"><span id="ea92" class="lm jn hi li b fi ln lo l lp lq">➜ cd ~/desktop/my_amplify_app<br/>➜ flutter pub get</span></pre><h1 id="78b8" class="jm jn hi bd jo jp lb jr js jt lc jv jw jx ld jz ka kb le kd ke kf lf kh ki kj bi translated">Mac OS特定的更改</h1><p id="3fb3" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">按照步骤配置Mac OS特定的更改@<a class="ae je" href="https://docs.amplify.aws/lib/project-setup/create-application/q/platform/flutter" rel="noopener ugc nofollow" target="_blank">https://docs . amplify . AWS/lib/project-setup/create-application/q/platform/flutter</a>。</p></div><div class="ab cl jf jg gp jh" role="separator"><span class="ji bw bk jj jk jl"/><span class="ji bw bk jj jk jl"/><span class="ji bw bk jj jk"/></div><div class="hb hc hd he hf"><h1 id="c090" class="jm jn hi bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated">#4调配后端(创建AWS资源)</h1><p id="e26b" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">这一步使用<strong class="ih hj"> AWS CloudFormation </strong>来创建两个角色。</p><pre class="kq kr ks kt fd lh li lj lk aw ll bi"><span id="9b57" class="lm jn hi li b fi ln lo l lp lq">➜ cd ~/desktop/my_amplify_app<br/>➜ amplify init</span></pre><figure class="kq kr ks kt fd ku er es paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="er es lt"><img src="../Images/ba51fbed5894ce0c8dbebb34ed247b4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*doyoqECWeOJ2ySBJzj3m3A.png"/></div></div></figure><p id="b99d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">这一步会发生什么？</strong></p><ul class=""><li id="e464" class="lu lv hi ih b ii ij im in iq lw iu lx iy ly jc lz ma mb mc bi translated">这一步使用AWS CloudFormation创建两个IAM角色。</li><li id="e1ab" class="lu lv hi ih b ii md im me iq mf iu mg iy mh jc lz ma mb mc bi translated">它使用在步骤2中配置的AWS概要文件。</li><li id="0d04" class="lu lv hi ih b ii md im me iq mf iu mg iy mh jc lz ma mb mc bi translated"><strong class="ih hj"> AWS CloudFormation </strong>通过将基础设施视为代码，提供了一种简单的方法来对相关AWS和第三方资源的集合进行建模，快速一致地提供它们，并在它们的整个生命周期中对它们进行管理。</li><li id="d7af" class="lu lv hi ih b ii md im me iq mf iu mg iy mh jc lz ma mb mc bi translated"><strong class="ih hj">cloud formation模板</strong>描述了所需的资源及其依赖关系，因此它们可以作为一个堆栈一起启动和配置。</li></ul><p id="c781" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">验证资源</strong></p><ul class=""><li id="1ccc" class="lu lv hi ih b ii ij im in iq lw iu lx iy ly jc lz ma mb mc bi translated">在<strong class="ih hj"> lib </strong>文件夹中创建一个文件<strong class="ih hj">amplify configuration . dart</strong>。它将包含Flutter应用程序连接到AWS所需的细节。在这一点上，它没有任何细节。</li></ul><figure class="kq kr ks kt fd ku er es paragraph-image"><div class="er es mt"><img src="../Images/31e70f6f166f7db6a4b308edf2580a17.png" data-original-src="https://miro.medium.com/v2/resize:fit:608/format:webp/1*HcKd6YwjAMTJENpnZwV72A.png"/></div></figure><pre class="kq kr ks kt fd lh li lj lk aw ll bi"><span id="2e9b" class="lm jn hi li b fi ln lo l lp lq">➜ cat lib/amplifyconfiguration.dart</span></pre><figure class="kq kr ks kt fd ku er es paragraph-image"><div class="er es mu"><img src="../Images/3673f6b6708ff8148c99afeca58bb27c.png" data-original-src="https://miro.medium.com/v2/resize:fit:778/format:webp/1*LegDb0Csp5hL_U2uQLHbnA.png"/></div></figure><h1 id="69f7" class="jm jn hi bd jo jp lb jr js jt lc jv jw jx ld jz ka kb le kd ke kf lf kh ki kj bi translated">显示创建的AWS资源</h1><ul class=""><li id="de4b" class="lu lv hi ih b ii kk im kl iq mv iu mw iy mx jc lz ma mb mc bi translated">查看所创建资源的一种方法是使用步骤2中创建的IAM用户和密码登录AWS Web控制台。</li><li id="117e" class="lu lv hi ih b ii md im me iq mf iu mg iy mh jc lz ma mb mc bi translated">另一种方法是使用AWS CLI。</li></ul><p id="2051" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里，我们使用第二个选项。</p><pre class="kq kr ks kt fd lh li lj lk aw ll bi"><span id="b791" class="lm jn hi li b fi ln lo l lp lq"># Update the stack name.<br/># Get the stack name from the log created above.</span><span id="1bcf" class="lm jn hi li b fi ls lo l lp lq">➜ stack_name='amplify-myamplifyapp-dev-101455'</span></pre><h2 id="4dcb" class="lm jn hi bd jo my mz na js nb nc nd jw iq ne nf ka iu ng nh ke iy ni nj ki nk bi translated">堆栈资源</h2><pre class="kq kr ks kt fd lh li lj lk aw ll bi"><span id="76a2" class="lm jn hi li b fi ln lo l lp lq">➜ aws --profile rk cloudformation list-stack-resources \<br/>      --stack-name ${stack_name} \<br/>      --query 'StackResourceSummaries[].[LogicalResourceId, PhysicalResourceId, ResourceType, ResourceStatus]' \<br/>      --output table</span></pre><figure class="kq kr ks kt fd ku er es paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="er es nl"><img src="../Images/d4a5010df9e950d5896f2b7f93c0c129.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*saIPlz0x_zq_fOQJszVd9A.png"/></div></div></figure><h2 id="9015" class="lm jn hi bd jo my mz na js nb nc nd jw iq ne nf ka iu ng nh ke iy ni nj ki nk bi translated">已验证用户、未验证用户的角色</h2><figure class="kq kr ks kt fd ku er es paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="er es nm"><img src="../Images/e6022377cfb304e9c233b2d7e672c7b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wiSplD8rhS22DYNchubqaw.png"/></div></div></figure><ul class=""><li id="e600" class="lu lv hi ih b ii ij im in iq lw iu lx iy ly jc lz ma mb mc bi translated">请注意，还没有IAM附加到角色。</li><li id="8cef" class="lu lv hi ih b ii md im me iq mf iu mg iy mh jc lz ma mb mc bi translated">到目前为止，我们只创建了几个角色，没有其他资源可供Flutter应用程序使用。我们将在下一步中这样做。</li></ul></div><div class="ab cl jf jg gp jh" role="separator"><span class="ji bw bk jj jk jl"/><span class="ji bw bk jj jk jl"/><span class="ji bw bk jj jk"/></div><div class="hb hc hd he hf"><h1 id="0791" class="jm jn hi bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated">#5使用AWS Cognito为Flutter应用程序添加身份验证支持</h1><blockquote class="mm mn mo"><p id="647d" class="if ig jd ih b ii ij ik il im in io ip mp ir is it mq iv iw ix mr iz ja jb jc hb bi translated"><strong class="ih hj">什么是AWS Cognito？</strong></p><p id="74b2" class="if ig jd ih b ii ij ik il im in io ip mp ir is it mq iv iw ix mr iz ja jb jc hb bi translated">Amazon Cognito为您的web和移动应用程序提供认证、授权和用户管理。你的用户可以用用户名和密码直接登录，或者通过第三方，如脸书、亚马逊、谷歌或苹果。</p><p id="4e7a" class="if ig jd ih b ii ij ik il im in io ip mp ir is it mq iv iw ix mr iz ja jb jc hb bi translated">Amazon Cognito的两个主要组件是用户池和身份池。用户池是为应用程序用户提供注册和登录选项的用户目录。身份池使您能够授予用户对其他AWS服务的访问权限。您可以单独或一起使用身份池和用户池。</p></blockquote><p id="57e7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">什么是用户池？</p><ul class=""><li id="fc73" class="lu lv hi ih b ii ij im in iq lw iu lx iy ly jc lz ma mb mc bi translated">用户池只不过是用户的集合。</li><li id="93fd" class="lu lv hi ih b ii md im me iq mf iu mg iy mh jc lz ma mb mc bi translated">AWS Cognito存储用户凭证并支持用户管理，如注册/登录/密码重置等。</li><li id="3d78" class="lu lv hi ih b ii md im me iq mf iu mg iy mh jc lz ma mb mc bi translated">使用用户池不是强制性的。AWS Cognito还支持<strong class="ih hj">社交登录，</strong>已经拥有谷歌/脸书/etc账户的用户可以通过认证使用Flutter应用。</li></ul><p id="547e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">什么是身份池？</strong></p><ul class=""><li id="c00b" class="lu lv hi ih b ii ij im in iq lw iu lx iy ly jc lz ma mb mc bi translated">仅仅提供认证是不够的。用户登录后，可以访问哪些AWS服务？</li><li id="f4f2" class="lu lv hi ih b ii md im me iq mf iu mg iy mh jc lz ma mb mc bi translated">要访问任何AWS服务，用户/应用程序需要凭据(永久/临时)。</li><li id="9cb8" class="lu lv hi ih b ii md im me iq mf iu mg iy mh jc lz ma mb mc bi translated">AWS安全令牌服务(STS)提供这些凭据。</li><li id="738f" class="lu lv hi ih b ii md im me iq mf iu mg iy mh jc lz ma mb mc bi translated">获得它们的一种方法是使用角色。角色有与之相关联的策略。</li><li id="f087" class="lu lv hi ih b ii md im me iq mf iu mg iy mh jc lz ma mb mc bi translated">一个身份池有两个附属角色—一个角色用于经过身份验证的用户，另一个角色用于来宾用户(未经身份验证的用户)。</li></ul><pre class="kq kr ks kt fd lh li lj lk aw ll bi"><span id="f724" class="lm jn hi li b fi ln lo l lp lq">➜ cd ~/desktop/my_amplify_app<br/>➜ amplify add auth</span></pre><figure class="kq kr ks kt fd ku er es paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="er es lt"><img src="../Images/c885ee02abddd492048e3b22318675ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2eGVkBX5WiqXNuDexn4WkQ.png"/></div></div></figure><pre class="kq kr ks kt fd lh li lj lk aw ll bi"><span id="ba45" class="lm jn hi li b fi ln lo l lp lq">➜ amplify push</span></pre><figure class="kq kr ks kt fd ku er es paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="er es lt"><img src="../Images/ae0678cfe6fb0ec6f5743642236ae86d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P42U3ohWUg0oH2kWq2Bx5g.png"/></div></div></figure><p id="fe18" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">这一步会发生什么？</strong></p><ul class=""><li id="068d" class="lu lv hi ih b ii ij im in iq lw iu lx iy ly jc lz ma mb mc bi translated">这一步更新了第4步中部署的CloudFormation模板</li><li id="25bc" class="lu lv hi ih b ii md im me iq mf iu mg iy mh jc lz ma mb mc bi translated">还部署了一个新的CloudFormation模板。</li></ul><p id="30cd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">让我们回顾一下在此步骤中更新/创建的资源</strong></p><pre class="kq kr ks kt fd lh li lj lk aw ll bi"><span id="4c37" class="lm jn hi li b fi ln lo l lp lq"># Update the template names<br/># Refer the log file above to get these names.</span><span id="1a8f" class="lm jn hi li b fi ls lo l lp lq">➜ stack_name1='amplify-myamplifyapp-dev-101455'<br/>➜ stack_name2='amplify-myamplifyapp-dev-101455-authmyamplifyapp252347fb-NJME8P3IS6M5'</span></pre><p id="b697" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">对堆栈#1进行了更新</strong></p><p id="4ebf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">注意最后一行。这个堆栈创建另一个堆栈。</p><figure class="kq kr ks kt fd ku er es paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="er es nn"><img src="../Images/c3bb1e9dff4086b8148a96001864cc4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vFXrpeV0OldFPIjmQ6tFyg.png"/></div></div></figure><p id="af6b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">堆栈#2创建的资源</strong></p><figure class="kq kr ks kt fd ku er es paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="er es nn"><img src="../Images/4c86b05395234f76e9e530bd5f8d6c49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BkHKjiq5RMedKIFN7stWDw.png"/></div></div></figure><p id="dee2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">如何查看用于创建资源的云信息模板</strong></p><pre class="kq kr ks kt fd lh li lj lk aw ll bi"><span id="1cee" class="lm jn hi li b fi ln lo l lp lq">➜ aws cloudformation get-template --profile rk --stack-name ${stack_name1}</span><span id="4e87" class="lm jn hi li b fi ls lo l lp lq">➜ aws cloudformation get-template --profile rk --stack-name ${stack_name2}</span></pre><p id="0b68" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">列出用户池</strong></p><pre class="kq kr ks kt fd lh li lj lk aw ll bi"><span id="3ada" class="lm jn hi li b fi ln lo l lp lq">➜ aws --profile rk cognito-idp list-user-pools --max-results 20 \<br/>      --query 'UserPools[].[Id, Name, CreationDate]' \<br/>      --output table</span></pre><p id="6ba2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">列出身份池</strong></p><pre class="kq kr ks kt fd lh li lj lk aw ll bi"><span id="fe3e" class="lm jn hi li b fi ln lo l lp lq">➜ aws --profile rk cognito-identity list-identity-pools --max-results 20 \<br/>      --query 'IdentityPools[].[IdentityPoolId, IdentityPoolName]' \<br/>      --output table</span></pre><p id="82ea" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">列出与身份池相关的角色</strong></p><pre class="kq kr ks kt fd lh li lj lk aw ll bi"><span id="86cb" class="lm jn hi li b fi ln lo l lp lq">➜ aws --profile rk cognito-identity get-identity-pool-roles \<br/>      --identity-pool-id "us-east-2:xxxxxxx-b706-xxxx-xxxx-b14e9b1d9b22"</span></pre><h2 id="4d02" class="lm jn hi bd jo my mz na js nb nc nd jw iq ne nf ka iu ng nh ke iy ni nj ki nk bi translated"><code class="du mi mj mk li b">amplifyconfiguration.dart</code></h2><p id="b6fc" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">CLI工具使用用户池和身份池详细信息更新<code class="du mi mj mk li b">lib/amplifyconfiguration.dart</code>文件。Flutter应用程序将读取此内容以连接AWS。</p><figure class="kq kr ks kt fd ku er es paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="er es no"><img src="../Images/3355832af83d3e26946ee61a91de905e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LYvsVg77KMoR8NvdiW2Ppw.png"/></div></div></figure><h2 id="9e3a" class="lm jn hi bd jo my mz na js nb nc nd jw iq ne nf ka iu ng nh ke iy ni nj ki nk bi translated"><code class="du mi mj mk li b">Resources used for Backend</code></h2><p id="938e" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">AWS Amplify CLI使用的模板和文件存储在Flutter应用程序的<strong class="ih hj"> amplify </strong>文件夹中。请注意，这些并不是Flutter应用程序工作所必需的。这些仅用于AWS资源创建。</p><figure class="kq kr ks kt fd ku er es paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="er es np"><img src="../Images/a78fd216f6a0d2ab9f1c6c93ef9f88e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W_Iorpihu737RJ63ALWdBA.png"/></div></div></figure></div><div class="ab cl jf jg gp jh" role="separator"><span class="ji bw bk jj jk jl"/><span class="ji bw bk jj jk jl"/><span class="ji bw bk jj jk"/></div><div class="hb hc hd he hf"><h1 id="159d" class="jm jn hi bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated">#6为Flutter应用程序添加认证支持</h1><p id="6a32" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">既然已经创建了后端资源，是时候对Flutter应用程序进行更改以使用Cognito服务了。</p><p id="f1e9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">初始化</strong></p><figure class="kq kr ks kt fd ku er es paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="er es nq"><img src="../Images/3ee07568206c4f9b4ac7ab38deb24a8e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KkoJifiWU8-2rk4eSD1q2Q.png"/></div></div></figure><p id="0a93" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">注册功能</strong></p><figure class="kq kr ks kt fd ku er es paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="er es nr"><img src="../Images/be6f16d85cdbd89984ae68f9f62f84a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X_dsOt4swmz1ibyUp4GETQ.png"/></div></div></figure><p id="27bd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">确认用户功能</strong></p><figure class="kq kr ks kt fd ku er es paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="er es np"><img src="../Images/105463724ef470a3262996a151c96dda.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_itkx3tysXieoZOkw2C_yA.png"/></div></div></figure><p id="238d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">登录功能</strong></p><figure class="kq kr ks kt fd ku er es paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="er es lg"><img src="../Images/a753cdaf386537b86e582bc98a670a4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EzWIO70Xd74JvyYbN0Sezw.png"/></div></div></figure><p id="f629" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">其他</strong></p><figure class="kq kr ks kt fd ku er es paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="er es ns"><img src="../Images/391e8913b6620ac8951f51b27ad95670.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L8IHnaC7FCYqepJ1YisB8A.png"/></div></div></figure></div><div class="ab cl jf jg gp jh" role="separator"><span class="ji bw bk jj jk jl"/><span class="ji bw bk jj jk jl"/><span class="ji bw bk jj jk"/></div><div class="hb hc hd he hf"><h1 id="d7fc" class="jm jn hi bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated">#7示例应用程序</h1><figure class="kq kr ks kt fd ku er es paragraph-image"><div class="er es nt"><img src="../Images/6b9aa1a8446b46478b1f2e2cbda8c4ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:764/1*rgG-ObyE2GqqY0SajD2ZKQ.gif"/></div></figure><p id="2404" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这就是经过身份验证的用户在Cognito用户池中的存储方式。</p><figure class="kq kr ks kt fd ku er es paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="er es nu"><img src="../Images/0f5f68c859a53fdf608e5a37445b6829.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8Ps9DPE5ljSz1gVh698esQ.png"/></div></div></figure></div><div class="ab cl jf jg gp jh" role="separator"><span class="ji bw bk jj jk jl"/><span class="ji bw bk jj jk jl"/><span class="ji bw bk jj jk"/></div><div class="hb hc hd he hf"><h1 id="c577" class="jm jn hi bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated">#7最终注释</h1><ul class=""><li id="7b10" class="lu lv hi ih b ii kk im kl iq mv iu mw iy mx jc lz ma mb mc bi translated">我用<code class="du mi mj mk li b"><a class="ae je" href="https://carbon.now.sh/" rel="noopener ugc nofollow" target="_blank">https://carbon.now.sh/</a></code>美化了代码。</li><li id="2d35" class="lu lv hi ih b ii md im me iq mf iu mg iy mh jc lz ma mb mc bi translated">示例应用GitHub链接在这里是<a class="ae je" href="https://github.com/ryandam9/aws-amplify-for-flutter" rel="noopener ugc nofollow" target="_blank"/>。</li><li id="8516" class="lu lv hi ih b ii md im me iq mf iu mg iy mh jc lz ma mb mc bi translated">除了支持身份验证，这款应用没有太多功能。Amplify还支持添加休息服务，S3，等等。</li><li id="1803" class="lu lv hi ih b ii md im me iq mf iu mg iy mh jc lz ma mb mc bi translated">AWS Amplify Github page—<a class="ae je" href="https://github.com/aws-amplify/amplify-flutter" rel="noopener ugc nofollow" target="_blank">https://github.com/aws-amplify/amplify-flutter</a>。</li><li id="45eb" class="lu lv hi ih b ii md im me iq mf iu mg iy mh jc lz ma mb mc bi translated">不需要使用Amplify CLI设置Cognito用户池和身份池。也可以使用AWS Web控制台/其他方式创建它们，然后可以在<code class="du mi mj mk li b">lib/amplifyconfiguration.dart.</code>中更新用户池/身份池id</li><li id="990f" class="lu lv hi ih b ii md im me iq mf iu mg iy mh jc lz ma mb mc bi translated">我的博客—<a class="ae je" href="https://ryandam.net" rel="noopener ugc nofollow" target="_blank">https://ryandam.net</a></li></ul></div></div>    
</body>
</html>