<html>
<head>
<title>Email and Password Based Authentication with Expo and Firebase Part 3: Sign In, Forgot Password, and Update Password</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Expo和Firebase基于电子邮件和密码的身份验证第3部分:登录、忘记密码和更新密码</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/email-and-password-based-authentication-with-expo-and-firebase-part-3-sign-in-forgot-password-93e9958792f3?source=collection_archive---------17-----------------------#2021-09-19">https://medium.com/geekculture/email-and-password-based-authentication-with-expo-and-firebase-part-3-sign-in-forgot-password-93e9958792f3?source=collection_archive---------17-----------------------#2021-09-19</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/ee954e9a9b1d6f73f97a86a7a2e1c177.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7A_TJTaxLTTTc5IlQvb77A.png"/></div></div></figure><blockquote class="iq ir is"><p id="b9a2" class="it iu iv iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这是使用Expo和Firebase展示基于电子邮件和密码的认证的系列博客文章的第3/3部分。</p><p id="2131" class="it iu iv iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><a class="ae js" rel="noopener" href="/geekculture/email-and-password-based-authentication-with-expo-and-firebase-part-1-project-setup-fef4c6766cd5">第1部分:项目设置</a></p><p id="a61a" class="it iu iv iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><a class="ae js" rel="noopener" href="/geekculture/email-and-password-based-authentication-with-expo-and-firebase-part-2-sign-up-email-verification-60cc7d1f3ba6">第2部分:注册、电子邮件验证和退出</a></p><p id="2532" class="it iu iv iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">第3部分:登录，忘记密码，更新密码(你在这里)</p></blockquote><p id="72be" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">这是一系列博客文章的最后一部分，涵盖了如何使用Expo和Firebase设置基于电子邮件和密码的身份验证。在这篇博文中，我们将通过实现登录、忘记密码和更新密码功能来结束。我们开始吧！</p><h1 id="7fec" class="jw jx hi bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">签到</h1><p id="a1d5" class="pw-post-body-paragraph it iu hi iw b ix ku iz ja jb kv jd je jt kw jh ji ju kx jl jm jv ky jp jq jr hb bi translated">您现在应该非常熟悉每个特性是如何实现的。让我们首先在用户API中添加<code class="du kz la lb lc b">signIn()</code>方法，它使用Firebase的<code class="du kz la lb lc b">signInWithEmailAndPassword()</code>方法。</p><pre class="ld le lf lg fd lh lc li lj aw lk bi"><span id="3855" class="ll jx hi lc b fi lm ln l lo lp">export const signIn = ({ email = '', password = '' }) =&gt;<br/>  firebase.auth().signInWithEmailAndPassword(email, password)</span></pre><p id="85e7" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">接下来，创建“登录”功能文件夹和一个<code class="du kz la lb lc b">/hooks</code>目录。创建<code class="du kz la lb lc b">useSignIn()</code>钩子<code class="du kz la lb lc b">touch src/features/sign-in/hooks/use-sign-in.js</code>并添加它的实现。<code class="du kz la lb lc b">useSignIn()</code>挂钩的工作原理和其他的一样；它允许访问Firebase的“登录”API，并公开一个<code class="du kz la lb lc b">isLoading</code>和<code class="du kz la lb lc b">error</code>状态。</p><pre class="ld le lf lg fd lh lc li lj aw lk bi"><span id="aa65" class="ll jx hi lc b fi lm ln l lo lp">export const useSignIn = () =&gt; {<br/>  const [state, setState] = useState({<br/>    isLoading: false,<br/>    error: null,<br/>  })</span><span id="071f" class="ll jx hi lc b fi lq ln l lo lp">  const handleSignIn = async (values) =&gt; {<br/>    setState({ isLoading: true, error: null })</span><span id="150a" class="ll jx hi lc b fi lq ln l lo lp">    try {<br/>      await signIn(values)<br/>      setState({ isLoading: false, error: null })<br/>    } catch (error) {<br/>      setState({ isLoading: false, error })<br/>    }<br/>  }</span><span id="92a0" class="ll jx hi lc b fi lq ln l lo lp">  return [handleSignIn, { ...state }]<br/>}</span></pre><p id="2e37" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">接下来，创建<code class="du kz la lb lc b">/screens</code>目录<code class="du kz la lb lc b">mkdir src/features/sign-in/screens</code>和“登录”屏幕<code class="du kz la lb lc b">touch src/features/sign-in/screens/SignInScreen.js</code>。“登录”屏幕重用了<code class="du kz la lb lc b">&lt;EmailAndPasswordForm/&gt;</code>，将其扩展为可选地支持自定义提交按钮文本。请注意，如果出现任何错误，将使用<code class="du kz la lb lc b">&lt;ErrorMessage/&gt;</code>组件(<a class="ae js" href="https://github.com/diegocasmo/expo-firebase-authentication/blob/main/src/components/ErrorMessage.js" rel="noopener ugc nofollow" target="_blank">完整源代码</a>)来呈现，该组件仅使用来自<a class="ae js" href="https://docs.nativebase.io/alert" rel="noopener ugc nofollow" target="_blank"> native-base </a>的<code class="du kz la lb lc b">&lt;Alert/&gt;</code>组件。</p><pre class="ld le lf lg fd lh lc li lj aw lk bi"><span id="6ee2" class="ll jx hi lc b fi lm ln l lo lp">export const SignInScreen = () =&gt; {<br/>  const [signIn, { isLoading, error }] = useSignIn()</span><span id="c819" class="ll jx hi lc b fi lq ln l lo lp">  return (<br/>    &lt;Center flex={1}&gt;<br/>      &lt;VStack space={4} alignItems="center" w="90%"&gt;<br/>        &lt;ErrorMessage error={error} /&gt;<br/>        &lt;EmailAndPasswordForm<br/>          onSubmit={signIn}<br/>          isLoading={isLoading}<br/>          buttonText="Sign in"<br/>        /&gt;<br/>      &lt;/VStack&gt;<br/>    &lt;/Center&gt;<br/>  )<br/>}</span></pre><p id="5062" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">最后，在访客导航器中定义“登录”屏幕。</p><pre class="ld le lf lg fd lh lc li lj aw lk bi"><span id="0c79" class="ll jx hi lc b fi lm ln l lo lp">export const GuestAppNavigator = () =&gt; (<br/>  &lt;Stack.Navigator&gt;<br/>    {/* guest welcome and sign up screens omitted for brevity */}<br/>    &lt;Stack.Screen<br/>      name="SignIn"<br/>      component={SignInScreen}<br/>      options={{ title: 'Sign In' }}<br/>    /&gt;<br/>  &lt;/Stack.Navigator&gt;<br/>)</span></pre><p id="8670" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">启动应用程序，并验证您能够使用现有用户帐户登录。如果用户的电子邮件未经验证，他们应该显示“验证电子邮件”屏幕，否则，应显示主屏幕。</p><h1 id="2658" class="jw jx hi bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">忘记密码</h1><p id="f3ce" class="pw-post-body-paragraph it iu hi iw b ix ku iz ja jb kv jd je jt kw jh ji ju kx jl jm jv ky jp jq jr hb bi translated">忘记密码功能将帮助用户在忘记密码时找回他们的帐户。为此，用户将指定他们的电子邮件，以便Firebase可以发送一个“重置密码”链接。</p><p id="006e" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">让我们从创建发送密码重置电子邮件的API开始。在用户API文件中创建<code class="du kz la lb lc b">sendPasswordReset()</code>方法。</p><pre class="ld le lf lg fd lh lc li lj aw lk bi"><span id="93b2" class="ll jx hi lc b fi lm ln l lo lp">export const sendPasswordReset = ({ email = '' }) =&gt;<br/>  firebase.auth().sendPasswordResetEmail(email)</span></pre><p id="2619" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">接下来，创建忘记密码特征目录<code class="du kz la lb lc b">mkdir -p src/features/forgot-password/hooks</code>和<code class="du kz la lb lc b">usePasswordReset()</code>钩子文件<code class="du kz la lb lc b">touch src/features/forgot-password/hooks/use-password-reset.js</code>。与本系列中创建的所有其他钩子相似，<code class="du kz la lb lc b">usePasswordReset()</code>钩子调用用户API方法并跟踪其<code class="du kz la lb lc b">isLoading</code> / <code class="du kz la lb lc b">error</code>状态。</p><pre class="ld le lf lg fd lh lc li lj aw lk bi"><span id="ee77" class="ll jx hi lc b fi lm ln l lo lp">export const usePasswordReset = () =&gt; {<br/>  const [state, setState] = useState({<br/>    isLoading: false,<br/>    error: null,<br/>  })</span><span id="4508" class="ll jx hi lc b fi lq ln l lo lp">  const handlePasswordReset = async (values) =&gt; {<br/>    setState({ isLoading: true, error: null })</span><span id="8b43" class="ll jx hi lc b fi lq ln l lo lp">    try {<br/>      await sendPasswordReset(values)<br/>      setState({ isLoading: false, error: null })<br/>    } catch (error) {<br/>      setState({ isLoading: false, error })<br/>      throw error<br/>    }<br/>  }</span><span id="2fe7" class="ll jx hi lc b fi lq ln l lo lp">  return [handlePasswordReset, { ...state }]<br/>}</span></pre><p id="d0aa" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">接下来，使用一个按钮扩展登录屏幕，该按钮会将用户重定向到尚未创建的忘记密码屏幕。</p><pre class="ld le lf lg fd lh lc li lj aw lk bi"><span id="737e" class="ll jx hi lc b fi lm ln l lo lp">export const SignInScreen = ({ navigation }) =&gt; {<br/>  const handlePressOnForgotPassword = () =&gt; {<br/>    navigation.navigate('ForgotPassword')<br/>  }</span><span id="a201" class="ll jx hi lc b fi lq ln l lo lp">  return (<br/>    &lt;Center flex={1}&gt;<br/>      &lt;VStack space={4} alignItems="center" w="90%"&gt;<br/>        {/* Existing code omitted for brevity */}<br/>        &lt;Button onPress={handlePressOnForgotPassword}&gt;Forgot password&lt;/Button&gt;<br/>      &lt;/VStack&gt;<br/>    &lt;/Center&gt;<br/>  )<br/>}</span></pre><p id="9343" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">确保在访客导航器堆栈中定义了忘记密码屏幕。</p><pre class="ld le lf lg fd lh lc li lj aw lk bi"><span id="ba0e" class="ll jx hi lc b fi lm ln l lo lp">export const GuestAppNavigator = () =&gt; (<br/>  &lt;Stack.Navigator&gt;<br/>    {/* Existing screens omitted for brevity */}<br/>    &lt;Stack.Screen<br/>      name="ForgotPassword"<br/>      component={ForgotPasswordScreen}<br/>      options={{ title: 'Forgot Password' }}<br/>    /&gt;<br/>  &lt;/Stack.Navigator&gt;<br/>)</span></pre><p id="6f4d" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">忘记密码屏幕使用了一个<code class="du kz la lb lc b">&lt;EmailForm/&gt;</code>组件(<a class="ae js" href="https://github.com/diegocasmo/expo-firebase-authentication/blob/main/src/features/forgot-password/components/EmailForm.js" rel="noopener ugc nofollow" target="_blank">完整源代码，此处为</a>)，它定义了一个电子邮件输入和一个需要与<code class="du kz la lb lc b">usePasswordReset()</code>挂钩连接的提交按钮。创建忘记密码屏幕目录<code class="du kz la lb lc b">mkdir src/features/forgot-password/screens</code>及其文件<code class="du kz la lb lc b">touch src/features/forgot-password/screens/ForgotPasswordScreen.js</code>并填写。</p><pre class="ld le lf lg fd lh lc li lj aw lk bi"><span id="44af" class="ll jx hi lc b fi lm ln l lo lp">export const ForgotPasswordScreen = ({ navigation }) =&gt; {<br/>  const [sendPasswordReset, { isLoading, error }] = usePasswordReset()</span><span id="9657" class="ll jx hi lc b fi lq ln l lo lp">  const handlePasswordReset = async (values) =&gt; {<br/>    try {<br/>      await sendPasswordReset(values)<br/>      navigation.navigate('SignIn')<br/>    } catch (err) {<br/>      console.error(err.message)<br/>    }<br/>  }</span><span id="8ddc" class="ll jx hi lc b fi lq ln l lo lp">  return (<br/>    &lt;Center flex={1}&gt;<br/>      &lt;VStack space={4} alignItems="center" w="90%"&gt;<br/>        &lt;Text&gt;<br/>          Please, enter your email address. You will receive link to create a new<br/>          password via email.<br/>        &lt;/Text&gt;<br/>        &lt;ErrorMessage error={error} /&gt;<br/>        &lt;EmailForm onSubmit={handlePasswordReset} isLoading={isLoading} /&gt;<br/>      &lt;/VStack&gt;<br/>    &lt;/Center&gt;<br/>  )<br/>}</span></pre><p id="1ec9" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">用户现在应该能够通过在表单中输入他们的电子邮件来重置他们的密码，并使用通过电子邮件发送给他们的重置密码链接。</p><h1 id="2759" class="jw jx hi bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">更新密码</h1><p id="be52" class="pw-post-body-paragraph it iu hi iw b ix ku iz ja jb kv jd je jt kw jh ji ju kx jl jm jv ky jp jq jr hb bi translated">更新密码功能允许用户更改他们的密码。为此，用户将首先需要重新认证，以便当前登录的用户可以验证他们确实是想要执行更改的人，只有这样，他们才被允许更新他们的密码。</p><p id="116d" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">首先在主屏幕中添加一个按钮，该按钮重定向到尚未定义的重新认证屏幕。</p><pre class="ld le lf lg fd lh lc li lj aw lk bi"><span id="dc5f" class="ll jx hi lc b fi lm ln l lo lp">export const HomeScreen = ({ navigation }) =&gt; {<br/>  const handlePressOnUpdatePassword = () =&gt; {<br/>    navigation.navigate('Reauthenticate')<br/>  }</span><span id="b3a9" class="ll jx hi lc b fi lq ln l lo lp">  return (<br/>    &lt;Center flex={1}&gt;<br/>      &lt;VStack space={4} alignItems="center" w="90%"&gt;<br/>        &lt;Button onPress={handlePressOnUpdatePassword}&gt;Update password&lt;/Button&gt;<br/>        {/* Existing code omitted for brevitiy */}<br/>      &lt;/VStack&gt;<br/>    &lt;/Center&gt;<br/>  )<br/>}</span></pre><p id="ed5a" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">接下来，将重新认证屏幕添加到已验证的应用导航器。</p><pre class="ld le lf lg fd lh lc li lj aw lk bi"><span id="7877" class="ll jx hi lc b fi lm ln l lo lp">export const VerifiedAppNavigator = () =&gt; (<br/>  &lt;Stack.Navigator&gt;<br/>    &lt;Stack.Screen<br/>      name="Reauthenticate"<br/>      component={ReauthenticateScreen}<br/>      options={{ title: 'Sign in' }}<br/>    /&gt;<br/>    {/* Existing code omitted for brevitiy */}<br/>  &lt;/Stack.Navigator&gt;<br/>)</span></pre><p id="63ee" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">接下来，通过运行<code class="du kz la lb lc b">mkdir -p src/features/update-password/screens</code>和使用<code class="du kz la lb lc b">touch src/features/update-password/screens/ReauthenticateScreen.js</code>的重新认证屏幕来创建更新密码特性目录。为了重新认证用户，在用户API文件中创建<code class="du kz la lb lc b">reauthenticate</code>方法，该方法使用Firebase的<code class="du kz la lb lc b">reauthenticateWithCredential</code>方法。</p><pre class="ld le lf lg fd lh lc li lj aw lk bi"><span id="08d2" class="ll jx hi lc b fi lm ln l lo lp">export const reauthenticate = ({ email = '', password = '' }) =&gt;<br/>  getUser().reauthenticateWithCredential(<br/>    firebase.auth.EmailAuthProvider.credential(email, password)<br/>  )</span></pre><p id="5f8c" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">一旦定义了API方法，就可以通过运行<code class="du kz la lb lc b">mkdir -p src/features/update-password/hooks</code>和<code class="du kz la lb lc b">touch src/features/update-password/hooks/use-reauthenticate.js</code>来创建<code class="du kz la lb lc b">useReauthenticate()</code>钩子以方便地访问它。请注意，如果在执行操作时出现异常，它是如何再次抛出错误的。</p><pre class="ld le lf lg fd lh lc li lj aw lk bi"><span id="d611" class="ll jx hi lc b fi lm ln l lo lp">export const useReauthenticate = () =&gt; {<br/>  const [state, setState] = useState({<br/>    isLoading: false,<br/>    error: null,<br/>  })</span><span id="51e5" class="ll jx hi lc b fi lq ln l lo lp">  const handleReauthenticate = async (values) =&gt; {<br/>    setState({ isLoading: true, error: null })</span><span id="fb08" class="ll jx hi lc b fi lq ln l lo lp">    try {<br/>      await reauthenticate(values)<br/>      setState({ isLoading: false, error: null })<br/>    } catch (error) {<br/>      setState({ isLoading: false, error })<br/>      throw error<br/>    }<br/>  }</span><span id="0cf9" class="ll jx hi lc b fi lq ln l lo lp">  return [handleReauthenticate, { ...state }]<br/>}</span></pre><p id="fd13" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">最后，在重新认证屏幕中使用<code class="du kz la lb lc b">useReauthenticate()</code>钩子，它的工作方式与登录屏幕非常相似，但是它会重新认证用户。如果用户重新验证成功，他们将被重定向到“更新密码”屏幕。</p><pre class="ld le lf lg fd lh lc li lj aw lk bi"><span id="d2e1" class="ll jx hi lc b fi lm ln l lo lp">export const ReauthenticateScreen = ({ navigation }) =&gt; {<br/>  const [reauthenticate, { isLoading, error }] = useReauthenticate()</span><span id="0b74" class="ll jx hi lc b fi lq ln l lo lp">  const handleReauthenticate = async (values) =&gt; {<br/>    try {<br/>      await reauthenticate(values)<br/>      navigation.navigate('UpdatePassword')<br/>    } catch (err) {<br/>      console.error(err.message)<br/>    }<br/>  }</span><span id="19be" class="ll jx hi lc b fi lq ln l lo lp">  return (<br/>    &lt;Center flex={1}&gt;<br/>      &lt;VStack space={4} alignItems="center" w="90%"&gt;<br/>        &lt;ErrorMessage error={error} /&gt;<br/>        &lt;EmailAndPasswordForm<br/>          onSubmit={handleReauthenticate}<br/>          isLoading={isLoading}<br/>          buttonText="Re-authenticate"<br/>        /&gt;<br/>      &lt;/VStack&gt;<br/>    &lt;/Center&gt;<br/>  )<br/>}</span></pre><p id="e10b" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">到目前为止，用户应该能够在主屏幕中单击“更新密码”，在重新验证屏幕中重新验证他们的帐户，如果成功，将被重定向到更新密码屏幕。</p><p id="c3e1" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">为了允许用户在成功地重新认证后更新他们的密码，让我们来定义将用于更新密码的API方法。在用户API文件中，定义<code class="du kz la lb lc b">updatePassword()</code>方法。</p><pre class="ld le lf lg fd lh lc li lj aw lk bi"><span id="a424" class="ll jx hi lc b fi lm ln l lo lp">export const updatePassword = ({ password = '' }) =&gt;<br/>  getUser().updatePassword(password)</span></pre><p id="992f" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">接下来，为它创建一个钩子<code class="du kz la lb lc b">touch src/features/update-password/hooks/use-update-password.js</code></p><pre class="ld le lf lg fd lh lc li lj aw lk bi"><span id="f3c6" class="ll jx hi lc b fi lm ln l lo lp">export const useUpdatePassword = () =&gt; {<br/>  const [state, setState] = useState({<br/>    isLoading: false,<br/>    error: null,<br/>  })</span><span id="74ef" class="ll jx hi lc b fi lq ln l lo lp">  const handleUpdatePassword = async (values) =&gt; {<br/>    setState({ isLoading: true, error: null })</span><span id="dafe" class="ll jx hi lc b fi lq ln l lo lp">    try {<br/>      await updatePassword(values)<br/>      setState({ isLoading: false, error: null })<br/>    } catch (error) {<br/>      setState({ isLoading: false, error })<br/>      throw error<br/>    }<br/>  }</span><span id="3d4d" class="ll jx hi lc b fi lq ln l lo lp">  return [handleUpdatePassword, { ...state }]<br/>}</span></pre><p id="b541" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">随后，在更新密码功能目录<code class="du kz la lb lc b">touch src/features/update-password/screens/UpdatePasswordScreen.js</code>中创建更新密码屏幕。更新密码屏幕将呈现<code class="du kz la lb lc b">&lt;UpdatePasswordForm/&gt;</code> ( <a class="ae js" href="https://github.com/diegocasmo/expo-firebase-authentication/blob/main/src/features/reset-password/components/UpdatePasswordForm.js" rel="noopener ugc nofollow" target="_blank">完整源代码</a>)并使用<code class="du kz la lb lc b">useUpdatePassword()</code>挂钩设置新的用户密码，如果成功，重定向到导航堆栈的顶部(主屏幕)。</p><pre class="ld le lf lg fd lh lc li lj aw lk bi"><span id="f0a9" class="ll jx hi lc b fi lm ln l lo lp">export const UpdatePasswordScreen = ({ navigation }) =&gt; {<br/>  const [updatePassword, { isLoading, error }] = useUpdatePassword()</span><span id="535a" class="ll jx hi lc b fi lq ln l lo lp">  const handleUpdatePassword = async (values) =&gt; {<br/>    try {<br/>      await updatePassword(values)<br/>      navigation.popToTop()<br/>    } catch (err) {<br/>      console.error(err.message)<br/>    }<br/>  }</span><span id="70c9" class="ll jx hi lc b fi lq ln l lo lp">  return (<br/>    &lt;Center flex={1}&gt;<br/>      &lt;VStack space={4} alignItems="center" w="90%"&gt;<br/>        &lt;ErrorMessage error={error} /&gt;<br/>        &lt;UpdatePasswordForm<br/>          onSubmit={handleUpdatePassword}<br/>          isLoading={isLoading}<br/>        /&gt;<br/>      &lt;/VStack&gt;<br/>    &lt;/Center&gt;<br/>  )<br/>}</span></pre><p id="3890" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">最后，将更新密码屏幕添加到已验证的应用导航器中。</p><pre class="ld le lf lg fd lh lc li lj aw lk bi"><span id="db5f" class="ll jx hi lc b fi lm ln l lo lp">export const VerifiedAppNavigator = () =&gt; (<br/>  &lt;Stack.Navigator&gt;<br/>    {/* Existing code omitted for brevitiy */}<br/>    &lt;Stack.Screen<br/>      name="UpdatePassword"<br/>      component={UpdatePasswordScreen}<br/>      options={{ title: 'Update Password' }}<br/>    /&gt;<br/>  &lt;/Stack.Navigator&gt;<br/>)</span></pre><p id="b013" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">就是这样！一旦重新认证，应用程序的用户现在可以更新他们的密码。</p><h1 id="f064" class="jw jx hi bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">结论</h1><p id="bb78" class="pw-post-body-paragraph it iu hi iw b ix ku iz ja jb kv jd je jt kw jh ji ju kx jl jm jv ky jp jq jr hb bi translated">这是一系列博客文章的最后一部分，涵盖了如何使用Expo和Firebase设置基于电子邮件和密码的身份验证。开发的应用程序支持注册、登录、注销、电子邮件验证、忘记密码和更新密码。如果你有任何问题，欢迎在下面发表问题或评论，或者在项目的<a class="ae js" href="https://github.com/diegocasmo/expo-firebase-authentication" rel="noopener ugc nofollow" target="_blank"> GitHub库</a>中提出问题；我很乐意帮助解决任何问题🙂。</p></div></div>    
</body>
</html>