<html>
<head>
<title>Bulk Download Sentinel 1 SAR Data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">批量下载Sentinel 1 SAR数据</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/bulk-download-sentinel-1-sar-data-d180ec0bfac1?source=collection_archive---------3-----------------------#2021-12-19">https://medium.com/geekculture/bulk-download-sentinel-1-sar-data-d180ec0bfac1?source=collection_archive---------3-----------------------#2021-12-19</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="04fe" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">使用Python自动从ASF存档下载</h2></div><p id="8eda" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">哨兵1号的合成孔径雷达数据可以从阿拉斯加卫星设施和哥白尼开放访问中心的数据门户网站上下载。两者都支持强大的API，允许用户搜索、获取元数据和下载多个图像。与Open Access Hub相比，ASF的搜索API提供了更快的下载速度，允许同时下载，最重要的是，它允许您访问档案中的所有图像。这在搜索前一段时间(例如2015年)获取的图像时非常有用。</p><p id="cf49" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">本教程旨在通过演示如何为感兴趣的特定区域下载2017年的多个Sentinel 1 Single Look Complex (SLC)图像，对ASF搜索API进行简要介绍。</p><p id="8543" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">第一步:安装<em class="ju"> asf_search </em>库</strong></p><p id="6cc0" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="ju"> asf_search </em>库可以通过<a class="ae jt" href="https://pypi.org/project/asf-search/" rel="noopener ugc nofollow" target="_blank"> PyPI </a>和<a class="ae jt" href="https://anaconda.org/conda-forge/asf_search" rel="noopener ugc nofollow" target="_blank"> Conda </a>获得。</p><pre class="jv jw jx jy fd jz ka kb kc aw kd bi"><span id="c81c" class="ke kf hi ka b fi kg kh l ki kj">pip install asf_search<br/>conda install -c conda-forge asf_search</span></pre><p id="9597" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">步骤2:获取感兴趣区域的WKT坐标</strong></p><p id="336d" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果您计划搜索与预定义的感兴趣区域重叠的Sentinel 1图像，您必须以众所周知的文本(WKT)格式获取其地理坐标。Shapely和Geopandas是我们用来简化shapefile和定义搜索查询的两个库。</p><pre class="jv jw jx jy fd jz ka kb kc aw kd bi"><span id="5070" class="ke kf hi ka b fi kg kh l ki kj">import asf_search as asf<br/>import geopandas as gpd<br/>from shapely.geometry import box<br/>from datetime import date </span></pre><p id="2056" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在本教程中，我有一个描述我感兴趣的领域的shapefile。为了简化shapefile，我使用geopandas的<em class="ju"> total_bounds </em>方法来获取边界框坐标。然后我用shapely的<em class="ju"> box() </em>方法用这些坐标创建一个多边形对象。最后，我使用geopandas的<em class="ju"> to_wkt() </em>方法将这些坐标保存为wkt格式。</p><pre class="jv jw jx jy fd jz ka kb kc aw kd bi"><span id="689a" class="ke kf hi ka b fi kg kh l ki kj">### 1. Read Shapefile using Geopandas<br/>gdf <strong class="ka hj">= </strong>gpd<strong class="ka hj">.</strong>read_file(path_to_shapefile)</span><span id="077b" class="ke kf hi ka b fi kk kh l ki kj">### 2. Extract the Bounding Box Coordinates<br/>bounds <strong class="ka hj">=</strong> gdf<strong class="ka hj">.</strong>total_bounds</span><span id="de35" class="ke kf hi ka b fi kk kh l ki kj">### 3. Create GeoDataFrame of the Bounding Box <br/>gdf_bounds <strong class="ka hj">=</strong> gpd<strong class="ka hj">.</strong>GeoSeries([box(<strong class="ka hj">*</strong>bounds)])</span><span id="1347" class="ke kf hi ka b fi kk kh l ki kj">### 4. Get WKT Coordinates<br/>wkt_aoi = gdf_bounds<strong class="ka hj">.</strong>to_wkt()<strong class="ka hj">.</strong>values<strong class="ka hj">.</strong>tolist()[0]</span></pre><p id="1e4a" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">第三步:定义搜索查询</strong></p><p id="b23a" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为了构建我们的查询，我们将使用带有以下选项的<em class="ju"> search() </em>方法:</p><ul class=""><li id="4e3d" class="kl km hi iz b ja jb jd je jg kn jk ko jo kp js kq kr ks kt bi translated"><em class="ju">平台</em>:采集数据的卫星平台名称</li><li id="0dce" class="kl km hi iz b ja ku jd kv jg kw jk kx jo ky js kq kr ks kt bi translated"><em class="ju">处理级别</em>:数据已经处理到的级别。</li><li id="5042" class="kl km hi iz b ja ku jd kv jg kw jk kx jo ky js kq kr ks kt bi translated"><em class="ju">开始</em> &amp; <em class="ju">结束</em>:根据数据采集的起止日期过滤搜索结果的选项。支持时间戳以及自然语言，如“3周前”</li><li id="b968" class="kl km hi iz b ja ku jd kv jg kw jk kx jo ky js kq kr ks kt bi translated"><em class="ju"> intersectsWith </em>:获取已定义多边形、线串或点几何图形的WKT坐标。</li></ul><p id="373e" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">搜索功能可用输入选项的完整列表及其描述可以通过asf_search模块的<a class="ae jt" href="https://github.com/asfadmin/Discovery-asf_search" rel="noopener ugc nofollow" target="_blank"> github库</a>访问。</p><pre class="jv jw jx jy fd jz ka kb kc aw kd bi"><span id="2ad5" class="ke kf hi ka b fi kg kh l ki kj">results <strong class="ka hj">=</strong> asf<strong class="ka hj">.</strong>search(<br/>    platform<strong class="ka hj">=</strong> asf<strong class="ka hj">.</strong>PLATFORM<strong class="ka hj">.</strong>SENTINEL1A,<br/>    processingLevel<strong class="ka hj">=</strong>[asf<strong class="ka hj">.</strong>PRODUCT_TYPE<strong class="ka hj">.</strong>SLC],<br/>    start <strong class="ka hj">=</strong> date(2017, 1, 1),<br/>    end <strong class="ka hj">=</strong> date(2017, 12, 31),<br/>    intersectsWith <strong class="ka hj">=</strong> wkt_aoi<br/>    )</span><span id="d35f" class="ke kf hi ka b fi kk kh l ki kj">print(f'Total Images Found: {len(results)}')</span><span id="e317" class="ke kf hi ka b fi kk kh l ki kj">### Save Metadata to a Dictionary<br/>metadata <strong class="ka hj">=</strong> results<strong class="ka hj">.</strong>geojson()</span></pre><p id="9fd1" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">搜索查询的输出保存在名为<em class="ju">结果、</em>的变量中，该变量是一个类对象，包含符合搜索标准的每个图像的元数据。可以使用<em class="ju"> geojson() </em>方法将所有输出图像的元数据保存到一个字典对象中。</p><p id="1211" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">步骤4:使用您的EarthData凭据进行身份验证</strong></p><p id="300b" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">任何拥有EarthData帐户的人都可以访问ASF档案中的数据。为了初始化下载任务，您必须使用<em class="ju"> auth_with_creds() </em>方法提供用于认证会话的EarthData登录凭证。文档中提供了其他身份验证方法的描述。</p><pre class="jv jw jx jy fd jz ka kb kc aw kd bi"><span id="fdb5" class="ke kf hi ka b fi kg kh l ki kj">session = asf<strong class="ka hj">.</strong>ASFSession()<strong class="ka hj">.</strong>auth_with_creds(USERNAME, PASSWORD)</span></pre><p id="7a1d" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">注意</strong>:如果你还没有账户，可以免费<a class="ae jt" href="https://urs.earthdata.nasa.gov/users/new" rel="noopener ugc nofollow" target="_blank">注册</a>。当从NASA的几个不同的地球观测数据门户网站(包括USGS EarthExplorer)下载数据时，EarthData帐户非常方便。</p><p id="2c76" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">第五步:开始下载</strong></p><p id="0f3d" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">结果对象(在步骤3中创建)有一个<em class="ju"> download() </em>方法，它接受三个选项:</p><ul class=""><li id="9699" class="kl km hi iz b ja jb jd je jg kn jk ko jo kp js kq kr ks kt bi translated"><em class="ju">路径</em>:保存下载文件的位置</li><li id="18cd" class="kl km hi iz b ja ku jd kv jg kw jk kx jo ky js kq kr ks kt bi translated"><em class="ju">会话</em>:下载时使用的认证会话</li><li id="749a" class="kl km hi iz b ja ku jd kv jg kw jk kx jo ky js kq kr ks kt bi translated"><em class="ju">进程</em>:同时下载的数量。默认为1。</li></ul><pre class="jv jw jx jy fd jz ka kb kc aw kd bi"><span id="797b" class="ke kf hi ka b fi kg kh l ki kj">results<strong class="ka hj">.</strong>download(<br/>     path <strong class="ka hj">= </strong>path_to_download_directory,<br/>     session <strong class="ka hj">= </strong>session, <br/>     processes <strong class="ka hj">= </strong>2 <br/>  )</span></pre></div><div class="ab cl kz la gp lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="hb hc hd he hf"><p id="3159" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在本文中，我演示了如何使用基于python的脚本下载特定感兴趣区域的多个Sentinel 1 SLC图像。我们的目标是使这项任务自动化，这样就可以很容易地在其他领域复制这项任务。</p><p id="25cd" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">有用的资源</strong></p><ol class=""><li id="7a40" class="kl km hi iz b ja jb jd je jg kn jk ko jo kp js lg kr ks kt bi translated"><a class="ae jt" href="https://github.com/asfadmin/Discovery-asf_search" rel="noopener ugc nofollow" target="_blank">ASF admin/Discovery-ASF _ search(github.com)</a></li><li id="f6e0" class="kl km hi iz b ja ku jd kv jg kw jk kx jo ky js lg kr ks kt bi translated"><a class="ae jt" href="https://docs.asf.alaska.edu/asf_search/basics/" rel="noopener ugc nofollow" target="_blank">基础知识——ASF SAR数据搜索手册(alaska.edu)</a></li><li id="5821" class="kl km hi iz b ja ku jd kv jg kw jk kx jo ky js lg kr ks kt bi translated"><a class="ae jt" href="https://urs.earthdata.nasa.gov/users/new" rel="noopener ugc nofollow" target="_blank"> Earthdata登录用户注册(nasa.gov)</a></li></ol></div></div>    
</body>
</html>