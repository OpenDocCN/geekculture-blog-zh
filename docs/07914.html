<html>
<head>
<title>How to Easily Deploy Your Node.Js App on Heroku</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何轻松部署您的节点。Heroku上的Js应用程序</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/deploy-node-applications-on-heroku-a89ed51e0a34?source=collection_archive---------0-----------------------#2021-10-06">https://medium.com/geekculture/deploy-node-applications-on-heroku-a89ed51e0a34?source=collection_archive---------0-----------------------#2021-10-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/93c91b2294b2b687dbed80d89c542cf5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RpcwelDN22hysIviXiW95w.png"/></div></div></figure><p id="12bf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">作为初学者，我们通常会构建多个项目和应用程序，但这只是难题的一半。我们还希望全世界都能访问这些应用程序，无论是为了演示，潜在的招聘人员，还是只是为了让大家使用和测试我们新的疯狂想法。为此，我们需要在公共服务器上部署这些应用程序。</p><p id="b654" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">本文将向您展示如何轻松地将您的第一个Node.js应用程序部署到Heroku。</p><p id="c3eb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这不是一个帮助您学习Node.js的教程，它假定您已经完成了开发并准备好部署。然而，我们将从启动和部署开始设置一个基本的node js项目。</p><p id="6a8e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">本教程将涵盖:</p><ul class=""><li id="a93b" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated">创建示例Node.js应用程序</li><li id="b1ca" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">部署示例Node.js应用程序</li><li id="fe92" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">使用Heroku CLI部署</li><li id="16e3" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">使用Git自动部署</li></ul><p id="3e01" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">假设您的机器上安装了node.js，请按照下面的步骤操作。</p><h2 id="1b25" class="kc kd hi bd ke kf kg kh ki kj kk kl km jb kn ko kp jf kq kr ks jj kt ku kv kw bi translated">创建示例Node.js应用程序</h2><p id="6137" class="pw-post-body-paragraph iq ir hi is b it kx iv iw ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn hb bi translated">创建一个文件夹，打开cmd进入你创建的文件夹，运行<code class="du lc ld le lf b">npm init</code>这将创建一个<code class="du lc ld le lf b">package.json</code>文件。它会提示您输入一些内容，包括应用程序的名称、版本等。对于这个例子，我们将接受所有的默认值。</p><p id="7544" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在您将拥有一个package.json文件。</p><pre class="lg lh li lj fd lk lf ll lm aw ln bi"><span id="157c" class="kc kd hi lf b fi lo lp l lq lr">//package.json<br/>{<br/>  "name": "first-node-app",<br/>  "version": "1.0.0",<br/>  "description": "my first nodejs express app",<br/>  "main": "index.js",<br/>  "scripts": {<br/>    "test": "echo \"Error: no test specified\" &amp;&amp; exit 1"<br/>  },<br/>  "author": "",<br/>  "license": "ISC"<br/>}</span></pre><p id="459a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在运行下面的命令来安装express，因为我们将使用这个中间件来构建我们的服务器。</p><pre class="lg lh li lj fd lk lf ll lm aw ln bi"><span id="f98a" class="kc kd hi lf b fi lo lp l lq lr">npm install express --save</span></pre><p id="4dab" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在在你的package.json脚本对象里面添加<code class="du lc ld le lf b">“start”: “node index.js”</code>。</p><p id="f63b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在创建一个server.js文件并添加下面的代码。</p><pre class="lg lh li lj fd lk lf ll lm aw ln bi"><span id="cd9d" class="kc kd hi lf b fi lo lp l lq lr">const express = require('express');<br/>const app = express();<br/> <br/>app.get('/', (req, res) =&gt; {<br/>  res<br/>    .status(200)<br/>    .send('<!-- -->Hello server is running<!-- -->')<br/>    .end();<br/>});<br/> <br/>// Start the server<br/>const PORT = process.env.PORT || 8080;<br/>app.listen(PORT, () =&gt; {<br/>  console.log(`App listening on port ${PORT}`);<br/>  console.log('Press Ctrl+C to quit.');<br/>});</span></pre><p id="4be2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，您可以通过运行以下命令在本地测试这个应用程序</p><pre class="lg lh li lj fd lk lf ll lm aw ln bi"><span id="6ea2" class="kc kd hi lf b fi lo lp l lq lr">npm start</span></pre><figure class="lg lh li lj fd ij er es paragraph-image"><div class="er es ls"><img src="../Images/b9236392aa47bb11348919c045666c1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:966/format:webp/1*nJzFpqRXgmpYoFJZYN-tvQ.png"/></div></figure><p id="0fa2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在你的项目中创建一个文件并命名为<strong class="is hj"> Procfile </strong>并复制下面一行。这将告诉<em class="lt"> Heroku服务器如何执行我们的项目</em>。</p><p id="5213" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><code class="du lc ld le lf b">web: node server.js</code></p><h2 id="2876" class="kc kd hi bd ke kf kg kh ki kj kk kl km jb kn ko kp jf kq kr ks jj kt ku kv kw bi translated">部署示例Node.js应用程序</h2><p id="5142" class="pw-post-body-paragraph iq ir hi is b it kx iv iw ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn hb bi translated">在这里创建一个免费的Heroku账户<a class="ae lu" href="https://signup.heroku.com/" rel="noopener ugc nofollow" target="_blank">。如果您已经有帐户，请登录并转到仪表板。</a></p><p id="5a61" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这里你需要创建一个新的应用程序。</p><figure class="lg lh li lj fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lv"><img src="../Images/d68e850ddf2c14be1a48c72f747bb802.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m-Tg1k0gBQzlQnqqtOdvag.png"/></div></div></figure><p id="63fc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">并输入唯一的应用程序名称</p><figure class="lg lh li lj fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lw"><img src="../Images/73ad97cb1f61bc74eeae3c54e41a1476.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L_7hVzn3a_97zE8tslFmAQ.png"/></div></div></figure><h2 id="a114" class="kc kd hi bd ke kf kg kh ki kj kk kl km jb kn ko kp jf kq kr ks jj kt ku kv kw bi translated"><strong class="ak">使用Heroku CLI进行部署</strong></h2><p id="f394" class="pw-post-body-paragraph iq ir hi is b it kx iv iw ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn hb bi translated">你需要在你的机器上安装Heroku CLI，你可以从<a class="ae lu" href="https://devcenter.heroku.com/articles/heroku-cli" rel="noopener ugc nofollow" target="_blank">这里</a>安装，并通过运行<code class="du lc ld le lf b">heroku --version</code>来验证安装。</p><p id="f408" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果您在上述安装方法中遇到任何问题，您可以运行<code class="du lc ld le lf b">npm install -g heroku</code>命令，假设您已经安装了npm和节点，然后尝试再次验证。</p><p id="e72b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，一旦安装成功，您需要转到您的服务器端项目，并在终端中运行下面的命令。</p><pre class="lg lh li lj fd lk lf ll lm aw ln bi"><span id="3db3" class="kc kd hi lf b fi lo lp l lq lr">heroku login</span></pre><p id="1778" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这将把您重定向到浏览器，或者在终端中提示您输入Heroku登录凭证。一旦您成功登录，您就可以部署您的代码了。</p><p id="cb79" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，初始化工作目录中的git存储库，并使用第二个命令和您的应用程序名称将其连接到Heroku应用程序。</p><pre class="lg lh li lj fd lk lf ll lm aw ln bi"><span id="4d8f" class="kc kd hi lf b fi lo lp l lq lr">$ git init<br/>$ heroku git:remote -a unique-app-name-to-be-entered</span></pre><p id="6a87" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，您可以使用以下命令添加并提交到Heroku主分支。</p><pre class="lg lh li lj fd lk lf ll lm aw ln bi"><span id="f42a" class="kc kd hi lf b fi lo lp l lq lr">$ git add .<br/>$ git commit -m "your commit message"<br/>$ git push heroku master</span></pre><figure class="lg lh li lj fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lx"><img src="../Images/6979089a904ea25a7240c1e1ae5fc301.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xriGPoICloK62k717t6JCg.png"/></div></div></figure><p id="61f1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">完成后，您将能够在Heroku应用概述的最新活动部分看到构建和部署成功。现在，您可以单击顶部的app按钮来查看您的节点应用程序。</p><h2 id="5311" class="kc kd hi bd ke kf kg kh ki kj kk kl km jb kn ko kp jf kq kr ks jj kt ku kv kw bi translated"><strong class="ak">使用Git自动部署</strong></h2><p id="c17d" class="pw-post-body-paragraph iq ir hi is b it kx iv iw ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn hb bi translated">现在部署完成了，但是无论何时你在代码中做了修改，你都必须把你的修改推送到Heroku git来部署你的修改。你很可能会有一个git hub存储库，在那里你已经提交了你的代码，我们不想每次都做这些额外的工作。</p><p id="3e7a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">因此，为了处理这个问题，Heroku提供了一个解决方案，你可以将GitHub存储库连接到Heroku应用程序，每当你将更改推送到Github时，Heroku就会自动进行部署。</p><p id="5bca" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要做到这一点，你可以去你的Heroku应用程序。在deploy部分，您需要选择第二个选项GitHub。(如果你的Heroku账户没有连接到git hub，你必须登录GitHub并连接你的Github账户。)并且您将能够看到一个输入框，用于搜索与您的git hub帐户相关联的存储库。你可以找你的回购，点击连接。</p><figure class="lg lh li lj fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ly"><img src="../Images/9bfe38a9da7de56a08525b9752078292.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u1VPn2VQU5yEIgaDqtMEjw.png"/></div></div></figure><p id="23bd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一旦连接了存储库，您可以选择<strong class="is hj">enable automatic deployments</strong>，现在一切都完成了，只要有推送到您的Github repo，Heroku就会自动部署更改。</p><figure class="lg lh li lj fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lz"><img src="../Images/894606d057b7b6f54876af05e4b13d8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DiPERdBCuEISqtPQOy9YUg.png"/></div></div></figure><p id="e5ab" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">感谢您的阅读，如果您遇到任何问题或想建议更好的方法，请在下面做评论。</p></div></div>    
</body>
</html>