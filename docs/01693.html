<html>
<head>
<title>How to Create a State Diagram</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何创建状态图</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/how-to-create-a-state-diagram-110d709c2fc8?source=collection_archive---------10-----------------------#2021-04-20">https://medium.com/geekculture/how-to-create-a-state-diagram-110d709c2fc8?source=collection_archive---------10-----------------------#2021-04-20</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="abca" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在设计面向对象的程序时，通常会用到状态图。在本文中，我们将深入探讨什么是状态图以及如何准备状态图。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/c07b5f29b45693838c23f057964525d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:656/format:webp/1*Juv4rq61rAZTadzt5jPTrQ.png"/></div><figcaption class="jl jm et er es jn jo bd b be z dx">Figure 1: The State Diagram of a Door</figcaption></figure><p id="e13f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您知道实际上有十四(14)种类型的UML图吗？现在你知道了！根据您正在开发的程序，其中一个可能适合您的需要。例如，如果你的程序严重依赖于类结构，你可能会从使用<em class="jp">类图</em>中获益更多。另一方面，如果时间对你的程序非常重要，你可能想使用一个<em class="jp">时序图</em>。类似地，如果你的程序是由一个对象可以存在的有限数量的状态组成的，你将需要一个<em class="jp">状态图</em>。</p><p id="7538" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">状态图</strong>是一种用于图形化表示<em class="jp">有限状态机</em>的图，也称为<em class="jp">自动机</em>。<strong class="ih hj">另一方面，自动机</strong>基本上是一种计算的数学模型，由有限数量的状态、关系以及这些状态之间的动作组成。</p><p id="1592" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">状态图基本上是对计算机程序中每个对象状态的图形化描述，并用不同的事件控制这些状态。作为一个例子，你可以想到电梯的程序。乘坐电梯的人可能处于四种状态:进入电梯、在电梯内等待、离开电梯和到达目的地。</p><p id="7efa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">活动图</strong>行为图的区域类型就像状态图一样，非常相似，但是不要搞错了！这两者的不同之处在于，状态图表示对象的<em class="jp">状态</em>，而活动图表示对象的<em class="jp">活动</em>。</p><p id="47d3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">状态图表示一个对象在其生命周期中可以存在的每个状态，一旦状态结束，该对象的<em class="jp">生命周期</em>也将结束。因此，我们也可以说一个状态图将代表一个物体的预期寿命。状态图包括对象如何通过流机制从一种状态切换到另一种状态，以及这些状态是什么。只有当存在一个对象并且该对象由事件触发时，状态才能存在。例如，对于处于电梯内状态的管家，您将首先需要一个“管家”对象，然后通过一些活动影响它，如“进入电梯内”和“在电梯内等待”。</p><p id="cf43" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">同样，让我们看看上面图1中的例子。图1显示了一扇门的状态图。在那里，门可以处于的状态用盒子表示:开、关、锁。一扇门可以采取的动作写在连接这些状态的箭头上:开、关、锁、开。注意每个状态并不是在所有情况下都可用:例如，如果门是开着的，你就不能锁门，你需要先把门关上。看看如果有必要的话，我们如何为要采取的行动添加一些条件:为了关门，你必须首先确保门口是空的。</p><p id="2e4b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">总之，我们可以说状态图的三个主要目标是:</p><ul class=""><li id="f721" class="jq jr hi ih b ii ij im in iq js iu jt iy ju jc jv jw jx jy bi translated">模拟系统的动态结构</li><li id="d1c1" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">模拟试剂系统的生命周期</li><li id="eebd" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">模拟对象在其生命周期中所处的不同状态</li></ul><p id="8b08" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这个意义上，我们可以推断出每个状态图:</p><ul class=""><li id="14c8" class="jq jr hi ih b ii ij im in iq js iu jt iy ju jc jv jw jx jy bi translated">表示单个对象的行为</li><li id="cba0" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">确定在所述对象的生命周期中将发生的事件的顺序</li></ul><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ke"><img src="../Images/378a6c233af9f77c58149f235f3ad2da.png" data-original-src="https://miro.medium.com/v2/resize:fit:612/format:webp/1*ia9S34z5pch1pyPDYXrOVw.png"/></div><figcaption class="jl jm et er es jn jo bd b be z dx">Figure 2: Basic State Diagram Structure</figcaption></figure><p id="b84f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过上面的图2，我们可以推断出，在设计状态图时，我们:</p><ul class=""><li id="0a02" class="jq jr hi ih b ii ij im in iq js iu jt iy ju jc jv jw jx jy bi translated">将州名写在带椭圆角的矩形框内</li><li id="a2c3" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">用一个完整的黑色圆圈标记对象生命周期的开始，用一个浅色圆圈内的黑色圆圈标记程序的结束。</li><li id="1caf" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">可以标记也可以不标记开始和结束标记</li><li id="5e5d" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">我们用箭头表示从一个状态到另一个状态的转换。这些箭头可以有3个属性:</li></ul><p id="a461" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">—触发器:过渡的原因。它可能是一个信号，一个事件，一个变化或者仅仅是时间的流逝。</p><p id="b18f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Guard:为了触发转换，应该授予其条件。</p><p id="b0eb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">—效果:作为转换的结果，将在对象上直接调用的操作。</p><ul class=""><li id="929e" class="jq jr hi ih b ii ij im in iq js iu jt iy ju jc jv jw jx jy bi translated">我们在转换箭头上写下特定语法的属性:触发[保护]/效果(或者导致[条件]/结果)</li><li id="d1d0" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">当一个状态由动作组成时，我们如上所示表示它:在同一个状态框中，状态名称与动作分开，下面列出输入和输出动作，每个动作用斜杠(“/”)分开。</li><li id="8ce5" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">当一个状态再次转变为自身时，即。当你在电梯里等了一分钟，等待状态每两秒钟刷新一次，我们表示这种情况，我们让转换箭头退出，到达同一个状态框。</li><li id="eb44" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">当一个状态覆盖一个或多个其他状态时，我们称之为复合状态。如果一个复合状态包含另一个复合状态，因为它太大了，不能在同一个状态框中表示，我们简单地创建带有状态名的状态框，并加上一个符号“&lt;&gt; - &lt;&gt;”，以表示内容将被绘制在另一个图中。</li><li id="27d0" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">在某些情况下，您可能不希望从初始化点进入状态，而是从另一个点进入状态:例如，在自动售货机中，您将首先要求客户将一些钱放入机器中，但是如果他们已经使用过该自动售货机一次，并且还有钱购买另一种苏打水，您可能希望跳过机器要求钱的初始化步骤。在这种情况下，我们创建两个初始化点:一个表示有钱，一个表示没钱。最初的初始化点用黑色实心圆表示，而第二个初始化点用空白圆表示。</li><li id="34a6" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">出口点可以放在程序的很多地方。在这种情况下，您应该用相同的名称标记所有的出口点。</li></ul><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kf"><img src="../Images/d82cb578feaf06f871e09a7fb5e60d81.png" data-original-src="https://miro.medium.com/v2/resize:fit:838/0*w28XjkoKmqCApoY7.GIF"/></div><figcaption class="jl jm et er es jn jo bd b be z dx">Choice Pseudo-State</figcaption></figure><ul class=""><li id="8e83" class="jq jr hi ih b ii ij im in iq js iu jt iy ju jc jv jw jx jy bi translated">当一个状态可以根据转移条件(Guard)转移到两个或多个状态时，这叫做选择伪状态。</li></ul><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kg"><img src="../Images/7e6dd540df527ffcd0cf854c1bef1df5.png" data-original-src="https://miro.medium.com/v2/resize:fit:916/0*6yJ33xHsZtLPR7Ut"/></div><figcaption class="jl jm et er es jn jo bd b be z dx">Junction Pseudo-State</figcaption></figure><ul class=""><li id="1f0c" class="jq jr hi ih b ii ij im in iq js iu jt iy ju jc jv jw jx jy bi translated">当多个过渡连接在一个效果上时，我们称之为连接伪状态。在这种状态下，一个单个交叉点可以有一个或多个进入转换和一个或多个退出转换。一些或所有过渡段可以有防护装置。如果在连接伪状态图中，一个进入转换分解成多个退出转换，我们称之为静态条件分支，虽然它类似于选择伪状态，但选择伪状态将实现动态条件分支。</li></ul><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kh"><img src="../Images/a53df3675645bb3f79aedd3bd3920e6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:590/0*JvCUYPm3kDJsj3QQ.GIF"/></div><figcaption class="jl jm et er es jn jo bd b be z dx">Terminate Pseudo-State</figcaption></figure><ul class=""><li id="0748" class="jq jr hi ih b ii ij im in iq js iu jt iy ju jc jv jw jx jy bi translated">为了表明自动机的生命周期在程序内部的某个地方结束，我们使用终止符号:s单个大“X”。</li></ul><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ki"><img src="../Images/f9751b2226e69d8a20f5e574d938bdf0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1148/0*xla9yDebK5vJMsUh.GIF"/></div><figcaption class="jl jm et er es jn jo bd b be z dx">History States</figcaption></figure><ul class=""><li id="f06d" class="jq jr hi ih b ii ij im in iq js iu jt iy ju jc jv jw jx jy bi translated">想象一下，你把要洗的衣服放进洗衣机，就在快洗完的时候，突然停电了。现在恢复供电后，是否需要重新进行整个洗涤过程？如果使用历史状态架构就不会。使用这种类型的结构是为了在断电的情况下保持对先前状态的记忆。建模时，我们简单地创建一个转换，它使用“断电”的情况作为保护，并返回到原始状态中的“历史”状态(上面显示了一个H)。历史状态将记录最近采取的行动，通过这一点，机器将继续从电源关闭点开始的程序。</li></ul><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kj"><img src="../Images/b3c6cb97d846d0631253adc39ef21143.png" data-original-src="https://miro.medium.com/v2/resize:fit:890/1*D4SXLpc6Q7QZ0UL2GE0txg.gif"/></div><figcaption class="jl jm et er es jn jo bd b be z dx">Concurrent Regions</figcaption></figure><ul class=""><li id="5286" class="jq jr hi ih b ii ij im in iq js iu jt iy ju jc jv jw jx jy bi translated">有时，在一个状态中，我们可能有多个同时但独立工作的状态。我们称这样的状态为“并发区域”。在这种情况下，我们在状态中为每个并发状态创建区域，并使用fork和join代替choice和merge伪状态，如上例所示，以便模拟它们是<em class="jp">同步</em>状态的事实。上面的例子显示了在驾驶时使用刹车时，前后刹车是如何同时但独立地工作的。</li></ul></div></div>    
</body>
</html>