<html>
<head>
<title>Domain Driven Design | Deep dive into context mapping</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">领域驱动设计|深入了解上下文映射</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/domain-driven-design-deep-dive-into-context-mapping-f9cd8acddd7e?source=collection_archive---------6-----------------------#2022-02-21">https://medium.com/geekculture/domain-driven-design-deep-dive-into-context-mapping-f9cd8acddd7e?source=collection_archive---------6-----------------------#2022-02-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/b16572142862eb756b69c16e47bb6180.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9m0eBRsmz2-_in8K9_D_gA.png"/></div></div></figure><p id="69c7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">几个月前，我写了一个关于领域驱动设计(DDD)的故事，高度概括了什么是DDD语言的一部分，什么不是。在这个故事中，我想对DDD中的上下文映射有更具体的了解。</p><h1 id="897e" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">为什么要使用上下文映射？</h1><p id="bc81" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">顾名思义，上下文映射帮助您以最直观的方式定义应用程序不同上下文之间的关系。这是非常有用的，例如，如果一个单词在一个上下文中有一个意思，而在另一个上下文中完全不同。这可能发生得相当快，并会导致两种语境之间的混淆的语言障碍。</p><h1 id="4411" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">什么是上下文映射？</h1><p id="191a" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">上下文映射是一种工具，它允许开发人员和领域专家识别有界上下文之间的关系以及负责它们的团队之间的关系。</p><p id="9cf3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们可以通过不同的方式在两个或多个有界环境之间进行集成:</p><ul class=""><li id="9001" class="kr ks hi is b it iu ix iy jb kt jf ku jj kv jn kw kx ky kz bi translated"><strong class="is hj">合伙关系</strong></li><li id="1b47" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn kw kx ky kz bi translated"><strong class="is hj">共享内核</strong></li><li id="c648" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn kw kx ky kz bi translated"><strong class="is hj">客户供应商</strong></li><li id="41e7" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn kw kx ky kz bi translated"><strong class="is hj">墨守成规</strong></li><li id="0f85" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn kw kx ky kz bi translated"><strong class="is hj">防腐层</strong></li><li id="8dba" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn kw kx ky kz bi translated"><strong class="is hj">打开主机服务</strong></li><li id="b43f" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn kw kx ky kz bi translated"><strong class="is hj">发布语言</strong></li><li id="2921" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn kw kx ky kz bi translated"><strong class="is hj">分道扬镳</strong></li><li id="343b" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn kw kx ky kz bi translated"><strong class="is hj">大泥球</strong></li></ul><h2 id="5dbe" class="lf jp hi bd jq lg lh li ju lj lk ll jy jb lm ln kc jf lo lp kg jj lq lr kk ls bi translated">合作关系</h2><p id="988a" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">当两个环境中的团队一起成功或失败时，需要出现一种合作关系。这些团队建立了一个协调发展规划和联合管理集成的流程。团队必须在接口的发展上合作，以适应两个系统的开发需求。应该安排相互依赖的特性，以便它们在同一个版本中完成。</p><h2 id="40b7" class="lf jp hi bd jq lg lh li ju lj lk ll jy jb lm ln kc jf lo lp kg jj lq lr kk ls bi translated">共享内核</h2><p id="9f4a" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">共享模型的一部分和相关的代码形成了一个非常紧密的相互依赖关系，它可以利用设计工作，也可以破坏它。用明确的边界指定团队同意共享的领域模型的子集。保持内核较小。这种明确共享的东西具有特殊的地位，在没有与其他团队协商的情况下不应该改变。定义一个持续的集成过程，该过程将保持内核模型的紧密性，并调整团队中无处不在的语言。</p><h2 id="f14a" class="lf jp hi bd jq lg lh li ju lj lk ll jy jb lm ln kc jf lo lp kg jj lq lr kk ls bi translated">客户-供应商开发</h2><p id="a9f5" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">当两个团队处于上下游关系时，上游团队的成功可能依赖于下游团队的命运，下游团队的需求会以各种方式得到满足，并产生各种后果。下游优先考虑上游计划。为下游需求协商和预算任务，以便每个人都理解承诺和时间表。</p><h2 id="509b" class="lf jp hi bd jq lg lh li ju lj lk ll jy jb lm ln kc jf lo lp kg jj lq lr kk ls bi translated">遵奉者</h2><p id="da16" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">当两个开发团队有一个上游/下游关系，其中上游团队没有动力提供下游团队的需求时，下游团队是无助的。利他主义可能会激励上游开发者做出承诺，但不太可能兑现。下游团队通过盲目地遵循上游团队的模型，消除了有界上下文之间翻译的复杂性。</p><h2 id="5f54" class="lf jp hi bd jq lg lh li ju lj lk ll jy jb lm ln kc jf lo lp kg jj lq lr kk ls bi translated">防腐层</h2><p id="8e8c" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">翻译层可以很简单，甚至是优雅的，当把设计良好的有界环境和合作团队联系起来的时候。但是，当控制或沟通不足以实现共享内核、合作伙伴或客户-供应商关系时，翻译就变得更加复杂。翻译层采取了更具防御性的语气。作为下游客户端，创建一个隔离层，根据您自己的域模型为您的系统提供上游系统的功能。这一层通过其现有的接口与另一个系统对话，几乎不需要对另一个系统进行修改。在内部，该层根据需要在两个模型之间单向或双向平移。</p><h2 id="2ffd" class="lf jp hi bd jq lg lh li ju lj lk ll jy jb lm ln kc jf lo lp kg jj lq lr kk ls bi translated">开放主机服务</h2><p id="df27" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">定义一个协议，将对子系统的访问作为一组服务。开放协议，让所有需要与你集成的人都可以使用。增强和扩展协议以处理新的集成需求，除非单个团队有特殊的需求。使用一个一次性的翻译器来增强该特殊情况下的协议，以便共享的协议可以保持简单和一致。</p><h2 id="ffeb" class="lf jp hi bd jq lg lh li ju lj lk ll jy jb lm ln kc jf lo lp kg jj lq lr kk ls bi translated">出版语言</h2><p id="0948" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">两个有界上下文的模型之间的转换需要一种共同的语言。使用记录良好的共享语言，该语言可以将必要的领域信息表达为通用的交流媒介，并在必要时翻译成该语言或从该语言翻译出来。发布语言通常与开放主机服务相结合。</p><h2 id="6e50" class="lf jp hi bd jq lg lh li ju lj lk ll jy jb lm ln kc jf lo lp kg jj lq lr kk ls bi translated">分道扬镳</h2><p id="4576" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">在定义需求时，我们必须毫不留情。如果两组功能没有显著的关系，它们可以完全分开。整合总是代价很大，有时候收益很小。声明一个有界的上下文，使其与其他上下文没有任何联系，从而使开发人员能够在这个小范围内找到简单的、专门的解决方案。</p><h2 id="6976" class="lf jp hi bd jq lg lh li ju lj lk ll jy jb lm ln kc jf lo lp kg jj lq lr kk ls bi translated">大泥球</h2><p id="4d60" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">当我们调查现有的系统时，我们发现，事实上，在系统的某些部分，通常是大型系统中，模型是混合的，边界是不一致的。在整个混乱的周围画一个边界，指定它是一个大泥球。不要试图在这种情况下应用复杂的建模。警惕这种系统蔓延到其他环境的趋势。</p><p id="4a71" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">总之，理解各种上下文映射技术允许有界上下文之间更有效的集成。同样重要的是，首先要考虑集成是否必要，是否能给业务带来好处。同时使用多种方法也是可以接受的，有时甚至是首选。例如，拥有一个RESTful API自然会提供<strong class="is hj"> OHS </strong>，但同时，下游也可能被鼓励实现自己的<strong class="is hj"> ACL </strong>，尤其是当上游服务由第三方提供时。您和您的团队将是根据各自的情况决定使用哪种方法的最佳人选。</p><p id="8a90" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你想了解更多关于上下文映射的信息，请访问https://github.com/ddd-crew/context-mapping<a class="ae lt" href="https://github.com/ddd-crew/context-mapping" rel="noopener ugc nofollow" target="_blank"/></p><p id="3e6e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">关于DDD的更多信息，我只能推荐由沃恩·弗农所著的书<a class="ae lt" href="https://www.amazon.de/Implementing-Domain-Driven-Design-Vaughn-Vernon/dp/0321834577" rel="noopener ugc nofollow" target="_blank">实现领域驱动设计</a></p><h1 id="1912" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">反射</h1><h2 id="3afb" class="lf jp hi bd jq lg lh li ju lj lk ll jy jb lm ln kc jf lo lp kg jj lq lr kk ls bi translated">什么进展顺利</h2><p id="fbe9" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">因为这篇文章是关于基于Eric Evans的DDD的上下文映射，所以我可以从这本书上获得关于这个主题的大部分信息，这真的很棒。</p><h2 id="385b" class="lf jp hi bd jq lg lh li ju lj lk ll jy jb lm ln kc jf lo lp kg jj lq lr kk ls bi translated">什么需要改进</h2><p id="a521" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">下一次，在我开始阅读理论之前，我会快速浏览一些例子。通过这种方式，我可以提前更清楚地了解这是怎么回事，并且可以将新学到的东西与示例联系起来。</p></div></div>    
</body>
</html>