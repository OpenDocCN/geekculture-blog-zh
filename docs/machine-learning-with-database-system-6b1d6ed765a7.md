# 基于数据库系统的机器学习

> 原文：<https://medium.com/geekculture/machine-learning-with-database-system-6b1d6ed765a7?source=collection_archive---------21----------------------->

我们都是通过像 Tensorflow、Pytorch、SkLearn 这样的通用框架开始机器学习的，他们已经向我们提供了最先进的结果。但是，如果我们能够利用 RDBMS 在机器学习任务中在数据提取、计算方面的快速、灵活和准确的机器学习专业知识，这将是 RDBMS 社区正在进行的非常重要的积极研究，它将帮助多年来一直从事 RDBMS 工作的人使用基于 RDBMS 的框架轻松实现机器学习应用程序。在这个领域有 google 和微软的论文提供了非常好的解决方案。虽然使用基于 RDBMS 的框架进行深度学习远不能提供任何好的结果，所以我们可以从机器学习问题开始，如线性回归、随机森林、boosting 等。我们将在这里讨论三篇基于机器学习和关系数据库管理系统有趣论文，以及它们的优缺点。

**IntegratedML:每个 SQL 开发人员都是数据科学家**

总结:

IntegratedML 用于希望在工作中部署机器学习模型的 SQL 开发人员。它的所有 SQL 语法为机器学习算法提供了与 SQL 数据库通信的有效接口，以馈入输入并从 ML 算法获得输出预测。它对 AutoMl 的使用让用户无需深入了解它就能创建高效的 Ml 模型。集成算法在查询处理时利用新颖的内部元组批处理方案，无论在何种上下文中调用标量预测，都能实现高效的查询预测。此外，它深深嵌入了一个电镀关系引擎，确保性能不受这种抽象的影响，而是支持基于查询计划的良好模型预测。集成的 ML 作为一种嵌入功能被提供给 InterSystems IRIS 数据平台，即支持 DDL/ DML 类型 SQL 语法的多模型 DBMS。

在系统端，它有一个集成的 ML provider，它实现了 API，用于在嵌入式 SQL 数据库和 ML 模型预测和训练之间建立桥梁。Provider 可以用与数据库兼容的任何语言实现，Integrated ML 目前附带 3 个不同的 provider 基于 Python 的 AutoML 引擎，一个围绕开源 H2O 平台的包装器，一个 DataRobot 接口，支持他们基于云的和内部部署的解决方案。然后，它提供了集成的 ML 语法，该语法考虑了模型创建和训练以及模型推理方法。

将所有这些特性结合起来，可以为构建 ML 模型的团队带来更高的生产力，而不会影响应用程序的透明性和效率。

优势:

1.  它有一个很好的接口，通过允许在 SQL 应用程序中使用数据科学算法和 AutoML 模型，在 SQL 开发人员和数据科学家之间架起了一座桥梁。
2.  集成 ML 的语法类似于 SQL 查询语法，所以学习它对 SQL 开发人员来说并不是一件很头疼的事情。
3.  在这个程序中引入了新颖的批处理技术，其中像 PROBABILITY()和 PREDICT()这样的函数被公开为标量函数，但是在 ML 模型中，函数需要对大的输入大小进行大的预测。因为小函数通常是计算的瓶颈。为了解决这个问题，类似的函数调用被成批处理，在调用过程中，所有的模型输入列值被成批处理，而不是调用提供者。查询继续执行，循环生成下一组输入列值。一旦对适当数量的输入列值集合进行了批处理，整个批处理就会在一次调用中传递给提供程序。

弱点:

1.  这并不能取代数据科学家，因为大规模深度学习模型在集成 ML 方面效率不高，所以他们需要 tensorflow 和 pytorch 这样的框架。
2.  它是为一个数据科学团队人手不足的组织设计的，因此它没有实现大范围的 ML 算法，并且它只是 SQL 开发人员在机器学习方面的一个起点。
3.  IntegratedML 不讨论实现的模型的准确性，因为这些也是在生产中部署模型的重要术语，它只讨论在生产中有效地部署模型。

**用 ML 推理扩展关系查询处理**

总结:

机器学习在组织中的广泛采用正在导致严格的治理和经济高效的性能，主要是在模型存储和推理方面。因此，在本文中，他们认为 RDBMS 是起点，并开发了一个名为 Raven 的系统，该系统利用 SQL Server 内部的 ML 运行时(即 ONNX 运行时)的本机集成，以及统一的中间表示(IR)来实现 ML 和 DB 运算符之间的高级交叉优化。Raven 为在 unified IR 中捕获的 SQL 查询和 Python ML 管道提供静态分析。模型评分和存储使用 RDBMS 以及数据，这使得通过 SQL 访问变得容易。其他理想的属性，如事务性(模型中的每个变化都作为一个事务来处理)以及高可用性和可审计性。Raven 执行许多优化，并作为数据库的一部分在 RDBMS 调用 ML 运行时内本地执行推理。考虑一个输入查询 QM，其中 Q 是 SQL 查询，M 是模型流水线被处理为，首先 Ravens 静态分析器解析 QM 并对 SQL 和 Python 脚本执行分析。然后，结果 DAG 被表示为 Raven 统一中间表示(IR)。

然后，IR 被送入一个交叉优化器，该优化器执行操作符转换和许多优化(与数据操作符和 ML 的通信信息),并决定哪些操作需要由 SQL server 执行，哪些部分需要由 ML 运行时(ONXX 运行时)执行。优化空间非常丰富，一些优化是基于谓词的模型修剪、模型投影下推、模型/查询分裂、编译器优化等。

优化的 Raven IR 然后被输入到 SQL 查询生成器，该生成器生成包含所有优化的新 SQL 查询。然后调用集成的 SQL Server+ONNX 运行时引擎来执行。

强度:

1.  Raven 确实利用了 SQL 结构的优化，如下推运算符、模型投影和基于 ML 运行时的优化，如模式分离、ONXX 运行时中的常数折叠。
2.  在 100 个元组的数据集上，Raven 比标准 ONXX 运行时分别快 3 毫秒到 20 毫秒。这可以归因于基于 SQL 的查询的缓存。对于具有大约 1M 和 10M 元组的非常大的数据，Raven 比 ONXX 快 5 倍。
3.  Raven 介绍了一种将机器学习操作符转换为基于线性代数的操作符的新方法。因此，在 scikit-learn 和 ML.NET 等框架中编写的经典 ML 运算符和数据特征，到可以在 ONNX Runtime 和 TensorFlow 等高效引擎中执行的神经网络。

弱点:

1.  对于 50K 和 100K 之间的元组，Raven 和 ONXX 具有相似的性能，其中 Raven 具有 15%的开销，这降低了 Raven 的性能。在顺序执行中，Raven 也比 ONXX 慢 7%。
2.  我们对不支持静态分析器的模型管道使用 Raven ext。Raven ext 由于数据传输和持续的半秒开销而产生开销，这是 externa 语言的启动运行时。
3.  Raven 远不是一个完整的系统，它只对批量推理有效。在其他推理中，像每个元组一个预测不是很有效。Raven 并不专注于训练 ML 模型，而是专注于预训练模型。

**多云，DBMS 机会大:企业级 ML 的 10 年预测**

总结:

在本文中，作者试图推测 ML 和数据库系统将如何发展以支持企业级机器学习(EGML)。在 EGML 应用程序中，它们是下一波机器学习环境，具有受监管的环境、对数据处理的高度审查、模型公平性、用户隐私和可调试性。EGML 分为三类:使用云进行训练，这意味着训练将主要在私有或公共云中进行，因为它需要集中的数据和最新的硬件。第二个是 DBMS 中的 score，它声明 DBMS 需要将 ML 模式性能推断合并为关系数据库的基本扩展。第三是无处不在的治理，即在云中分类的数据需要得到可靠的治理、安全的数据访问、版本管理和来源跟踪。

本文介绍了支持 EGML 应用程序数据科学生命周期 Flock，它探索假设，发现公开问题并验证初始解决方案。作者预测，在未来 10 年，数据库社区将在机器学习中发挥重要作用。ML 的企业需求将有更严格的要求，但由一个较小的、经验较少的团队构建。

EGML 工作负载需要跨系统整合和交流起源信息的协议。他们提出了三个模块的解决方案——SQL 起源模块、Python 起源模块和目录。Catalog 存储所有起源信息，并充当 SQL 和 Python 起源模块之间的桥梁。SQL 起源模块处理在渴望和懒惰模式下捕获粗粒度起源。Python 出处模块使用标准静态分析技术和我们维护的 ML APIs 知识库的组合来解析脚本并自动找到代码的特征提取和模型训练部分。

优势:

1.  优化捕获技术是通过压缩和总结发展起来的，压缩和总结是解决起源数据模型的关键。
2.  将 SQL 起源模块的输出连接到 Python 起源模块，就有可能端到端地跟踪模型谱系。
3.  本文提供了 EGML 系统与系统 SQL 起源模块、Python 起源模块和目录通信的三种解决方案。

弱点:

1.  这篇文章还没有完成，并且提到他们正在研究它，所以很难与其他系统进行性能比较。
2.  旨在支持 EGML 的系统需要提供广泛的覆盖范围，但论文中没有提到他们是如何在解决方案中实现这一点的。
3.  在出处捕获中，EGML 工作负载跨越多个系统和运行时，从多个数据库获取数据，以满足特定运行时和系统的需要，使用 Apache 方解石，这在纸面解决方案中没有实现，因为在许多情况下，他们的系统无法解析查询。

**参考文献:**

1.  [T3【https://arxiv.org/abs/1909.00084】T5](https://arxiv.org/abs/1909.00084)
2.  [**https://arxiv.org/abs/1911.00231**](https://arxiv.org/abs/1911.00231)
3.  [**https://www . research gate . net/publication/342249821 _ integrated ml _ Every _ SQL _ Developer _ is _ a _ Data _ Scientist**](https://www.researchgate.net/publication/342249821_IntegratedML_Every_SQL_Developer_is_a_Data_Scientist)