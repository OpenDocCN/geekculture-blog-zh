<html>
<head>
<title>Custom UI Component NormalBold TextView Style — Android — Kotlin</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">自定义UI组件NormalBold TextView样式— Android — Kotlin</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/custom-ui-component-normalbold-textview-style-android-kotlin-4612e4839c2?source=collection_archive---------8-----------------------#2021-04-10">https://medium.com/geekculture/custom-ui-component-normalbold-textview-style-android-kotlin-4612e4839c2?source=collection_archive---------8-----------------------#2021-04-10</a></blockquote><div><div class="dt gx gy gz ha hb"/><div class="hc hd he hf hg"><div class=""/><div class=""><h2 id="30a8" class="pw-subtitle-paragraph ig hi hj bd b ih ii ij ik il im in io ip iq ir is it iu iv iw ix dy translated">有时我们有一个特殊的场景，我们没有本地UI组件，我们在寻找定制的UI。</h2></div><figure class="iz ja jb jc fe jd es et paragraph-image"><div role="button" tabindex="0" class="je jf di jg bf jh"><div class="es et iy"><img src="../Images/19398191a4532fa289be3e7e70b185b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xvthhUQzBLiMoxwD"/></div></div><figcaption class="jk jl eu es et jm jn bd b be z dy">Photo by <a class="ae jo" href="https://unsplash.com/@thips?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Thiébaud Faix</a> on <a class="ae jo" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="f6b2" class="pw-post-body-paragraph jp jq hj jr b js jt ik ju jv jw in jx jy jz ka kb kc kd ke kf kg kh ki kj kk hc bi translated">最近我不得不在一个有两种状态的UI上工作。如果数据不可用，则显示<strong class="jr hk">正常</strong>和<strong class="jr hk">小</strong>尺寸文本，在其他状态下显示<strong class="jr hk">粗体</strong>和<strong class="jr hk">大</strong>尺寸文本。检查下面</p><figure class="iz ja jb jc fe jd es et paragraph-image"><div class="es et kl"><img src="../Images/69c280c092ae05c35296cf0e4c23e456.png" data-original-src="https://miro.medium.com/v2/resize:fit:620/1*Tzu-vmCUIMTbtS6qVf3Aww.gif"/></div></figure></div><div class="ab cl km kn gq ko" role="separator"><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr"/></div><div class="hc hd he hf hg"><p id="a138" class="pw-post-body-paragraph jp jq hj jr b js jt ik ju jv jw in jx jy jz ka kb kc kd ke kf kg kh ki kj kk hc bi translated">那么，只有一个<strong class="jr hk"> TextView </strong>怎么解决这个问题呢？一种方法是添加textChange侦听器，另一种解决方案是拥有一个自定义的textview类。<br/>XML中的普通TextView声明如下所示(使用MaterialTextView)</p><pre class="iz ja jb jc fe kt ku kv kw aw kx bi"><span id="9030" class="ky kz hj ku b fj la lb l lc ld">&lt;com.google.android.material.textview.MaterialTextView<br/>    style="@style/regularText"<br/>    android:layout_width="wrap_content"<br/>    android:layout_height="wrap_content"<br/>    android:text="@{translation.not_available}"<br/>    tools:text="Not available" /&gt;</span></pre><p id="4b69" class="pw-post-body-paragraph jp jq hj jr b js jt ik ju jv jw in jx jy jz ka kb kc kd ke kf kg kh ki kj kk hc bi translated">kotlin中的自定义<strong class="jr hk"> MaterialTextView </strong>视图类:</p><pre class="iz ja jb jc fe kt ku kv kw aw kx bi"><span id="bd5e" class="ky kz hj ku b fj la lb l lc ld">class LargeRegularTextView(context: Context, attrs: AttributeSet? = null) :<br/>    LinearLayout(context, attrs) {<br/><br/>    init {<br/>        <em class="le">orientation </em>= <em class="le">VERTICAL<br/>        </em>inflate(context, R.<strong class="ku hk">layout</strong>.<strong class="ku hk"><em class="le">large_regular_view</em></strong>, this)<br/>        context.obtainStyledAttributes(attrs, R.<strong class="ku hk">styleable</strong>.<strong class="ku hk"><em class="le">LargeRegularTextView</em></strong>).<em class="le">apply </em><strong class="ku hk">{<br/>            </strong>setTextColorRes(color = getColor(R.styleable.<em class="le">LargeRegularTextView_textColorRes</em>, -1))<br/>        <strong class="ku hk">}</strong>.recycle()<br/>    }</span><span id="876a" class="ky kz hj ku b fj lf lb l lc ld">    //set text to bold and large size<br/>    fun setBold(text: String) {<br/>        tvValue.<strong class="ku hk">setTextAppearance</strong>(<em class="le">context</em>, R.<strong class="ku hk">style</strong>.<em class="le">headingText</em>)<br/>        tvValue.<em class="le">text </em>= text<br/>    }</span><span id="0dd8" class="ky kz hj ku b fj lf lb l lc ld">    //set text to normal and small size<br/>    fun setNormal(text: String) {<br/>        tvValue.<strong class="ku hk">setTextAppearance</strong>(<em class="le">context</em>, R.<strong class="ku hk">style</strong>.<em class="le">smallText</em>)<br/>        tvValue.<em class="le">text </em>= text<br/>    }</span><span id="7ddb" class="ky kz hj ku b fj lf lb l lc ld">    // if you want to set text color as well<br/>    fun setTextColorRes(color: Int) {<br/>        tvValue.<strong class="ku hk">setTextColor</strong>(color)<br/>    }<br/><br/><br/>}</span></pre><p id="a3ee" class="pw-post-body-paragraph jp jq hj jr b js jt ik ju jv jw in jx jy jz ka kb kc kd ke kf kg kh ki kj kk hc bi translated">现在您已经缺少了<strong class="jr hk">布局</strong>、<strong class="jr hk">样式化、</strong>和<strong class="jr hk">样式</strong>。</p><p id="d7cc" class="pw-post-body-paragraph jp jq hj jr b js jt ik ju jv jw in jx jy jz ka kb kc kd ke kf kg kh ki kj kk hc bi translated"><strong class="jr hk">布局</strong>(large _ regular _ view . XML):<br/>注:别忘了<strong class="jr hk"> &lt; merge/ &gt; </strong></p><pre class="iz ja jb jc fe kt ku kv kw aw kx bi"><span id="36f1" class="ky kz hj ku b fj la lb l lc ld">&lt;?xml version="1.0" encoding="utf-8"?&gt;<br/>&lt;merge xmlns:android="http://schemas.android.com/apk/res/android"<br/>    xmlns:tools="http://schemas.android.com/tools"<br/>    tools:orientation="vertical"<br/>    tools:parentTag="LinearLayout"&gt;<br/><br/>    &lt;com.google.android.material.textview.MaterialTextView<br/>        android:id="@+id/tvValue"<br/>        style="@style/eliqBodyRegularText"<br/>        android:layout_width="wrap_content"<br/>        android:layout_height="wrap_content"<br/>        tools:text="text" /&gt;<br/><br/>&lt;/merge&gt;</span></pre><p id="2c2c" class="pw-post-body-paragraph jp jq hj jr b js jt ik ju jv jw in jx jy jz ka kb kc kd ke kf kg kh ki kj kk hc bi translated"><strong class="jr hk">可样式化</strong>(RES-&gt;values-&gt;attrs . XML):</p><pre class="iz ja jb jc fe kt ku kv kw aw kx bi"><span id="97f0" class="ky kz hj ku b fj la lb l lc ld">&lt;?xml version="1.0" encoding="utf-8"?&gt;<br/>&lt;resources&gt;</span><span id="a03a" class="ky kz hj ku b fj lf lb l lc ld">&lt;declare-styleable name="LargeRegularTextView"&gt;<br/>    &lt;attr name="value" /&gt;<br/>    &lt;attr name="textColorRes" format="integer" /&gt;<br/>&lt;/declare-styleable&gt;</span><span id="de01" class="ky kz hj ku b fj lf lb l lc ld">&lt;/resources&gt;</span></pre><p id="3e15" class="pw-post-body-paragraph jp jq hj jr b js jt ik ju jv jw in jx jy jz ka kb kc kd ke kf kg kh ki kj kk hc bi translated">最后<strong class="jr hk">风格</strong>:</p><pre class="iz ja jb jc fe kt ku kv kw aw kx bi"><span id="aa07" class="ky kz hj ku b fj la lb l lc ld">//Bold-Large<br/>&lt;style name="headingText" parent="Widget.MaterialComponents.TextView"&gt;<br/>    &lt;item name="android:textColor"&gt;#...&lt;/item&gt;<br/>    &lt;item name="android:textSize"&gt;@dimen/tvHeadingSize&lt;/item&gt;<br/>    &lt;item name="android:fontFamily"&gt;@font/brand_font&lt;/item&gt;<br/>    &lt;item name="android:textStyle"&gt;bold&lt;/item&gt;<br/>&lt;/style&gt;</span><span id="ec5a" class="ky kz hj ku b fj lf lb l lc ld">//Normal-Small<br/>&lt;style name="smallText" parent="Widget.MaterialComponents.TextView"&gt;<br/>    &lt;item name="android:textColor"&gt;#...&lt;/item&gt;<br/>    &lt;item name="android:textSize"&gt;@dimen/tvSmallSize&lt;/item&gt;<br/>    &lt;item name="android:fontFamily"&gt;@font/brand_font_light&lt;/item&gt;<br/>&lt;/style&gt;</span></pre><p id="b8db" class="pw-post-body-paragraph jp jq hj jr b js jt ik ju jv jw in jx jy jz ka kb kc kd ke kf kg kh ki kj kk hc bi translated">现在，以XML布局声明您的自定义textview，如下所示:</p><pre class="iz ja jb jc fe kt ku kv kw aw kx bi"><span id="5a52" class="ky kz hj ku b fj la lb l lc ld">&lt;package_name.LargeRegularTextView<br/>    android:id="@+id/tvCustom"<br/>    android:layout_width="wrap_content"<br/>    android:layout_height="wrap_content"<br/>    tools:text="7,6 kWh" /&gt;</span></pre><p id="28e4" class="pw-post-body-paragraph jp jq hj jr b js jt ik ju jv jw in jx jy jz ka kb kc kd ke kf kg kh ki kj kk hc bi translated">然后像这样简单地设置值:</p><pre class="iz ja jb jc fe kt ku kv kw aw kx bi"><span id="f707" class="ky kz hj ku b fj la lb l lc ld">tvCustom.setNormal("...")</span><span id="715e" class="ky kz hj ku b fj lf lb l lc ld">tvCustom.setBold("...")</span><span id="4ead" class="ky kz hj ku b fj lf lb l lc ld">tvCustom.setTextColorRes(ContextCompat.getColor(<em class="le">context</em>, R.color."your color res<em class="le">"</em>))</span></pre><p id="872e" class="pw-post-body-paragraph jp jq hj jr b js jt ik ju jv jw in jx jy jz ka kb kc kd ke kf kg kh ki kj kk hc bi translated">希望它能解决你的一些问题。</p><p id="e29f" class="pw-post-body-paragraph jp jq hj jr b js jt ik ju jv jw in jx jy jz ka kb kc kd ke kf kg kh ki kj kk hc bi translated">尽情享受吧！</p></div></div>    
</body>
</html>