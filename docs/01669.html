<html>
<head>
<title>Data Visualization with Plotly.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Plotly.js实现数据可视化</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/data-visualization-with-plotly-js-59bae614cc65?source=collection_archive---------19-----------------------#2021-04-19">https://medium.com/geekculture/data-visualization-with-plotly-js-59bae614cc65?source=collection_archive---------19-----------------------#2021-04-19</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="fa3d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我在寻找一个图形库的过程中遇到了<a class="ae jd" href="https://plotly.com/graphing-libraries/" rel="noopener ugc nofollow" target="_blank"> Plotly </a>，这个图形库可以将从IEX云API接收到的数据转换成可消化的视觉效果，提供比300多个数据点阵列更多的洞察力。让我后退一步来解释为什么我需要这个特性。</p><p id="11b4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于我在熨斗学校的顶点，我决定尝试创建我自己的股票筛选/股票报价应用程序。我认为这很简单，我会创建一个IEX交易所所有交易股票的数据库，并根据客户的要求更新信息……但我很快意识到，我的电话是有限的，维护IEX涵盖的每一只“股票”的数据库是不可行的(需要明确的是，有近40，000只证券，包括普通股、共同基金、指数基金、交易所交易基金、优先股，还有很多……)。因此，我重新聚焦的MVP是有两个简单的功能，能够制作一个股票的<em class="je">观察列表</em>，并且能够查看特定股票的<em class="je">股票信息</em>页面。这就是我需要像Plotly这样的数据可视化库的原因。</p></div><div class="ab cl jf jg gp jh" role="separator"><span class="ji bw bk jj jk jl"/><span class="ji bw bk jj jk jl"/><span class="ji bw bk jj jk"/></div><div class="hb hc hd he hf"><p id="a0e6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Plotly是一个主要针对Python的可视化库，但幸运的是它集成了JavaScript和React！这个特定库吸引我的是内置在图表中的范围滑块和缩放功能，我们可以在下面的示例中查看这些功能。</p></div><div class="ab cl jf jg gp jh" role="separator"><span class="ji bw bk jj jk jl"/><span class="ji bw bk jj jk jl"/><span class="ji bw bk jj jk"/></div><div class="hb hc hd he hf"><p id="0bfe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Plotly立即提供了一些非常简单的入门示例:</p><figure class="jn jo jp jq fd jr er es paragraph-image"><div class="er es jm"><img src="../Images/c8420ed9cf93df0621b2fccb4cd1ad8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1352/format:webp/1*_Otufq5lAM7YbEP1Z7F3lg.png"/></div><figcaption class="ju jv et er es jw jx bd b be z dx">Taken directly from Plotly’s ‘Quick Start’ section (<a class="ae jd" href="https://plotly.com/javascript/react/" rel="noopener ugc nofollow" target="_blank">https://plotly.com/javascript/react/</a>)</figcaption></figure><figure class="jn jo jp jq fd jr er es paragraph-image"><div class="er es jy"><img src="../Images/11a92f64f16b0e1646e6c44785eb7e06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1232/format:webp/1*MDNZuMfWiq_AuiKciUB_Bg.png"/></div><figcaption class="ju jv et er es jw jx bd b be z dx">The result graph from the above code</figcaption></figure><p id="0a2a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">结束了。</p></div><div class="ab cl jf jg gp jh" role="separator"><span class="ji bw bk jj jk jl"/><span class="ji bw bk jj jk jl"/><span class="ji bw bk jj jk"/></div><div class="hb hc hd he hf"><p id="70e1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这绝不可能是我的项目的结果！虽然上面的标题是'<em class="je">一个奇特的剧情</em>，但更恰当的名字应该是'一个<em class="je">简单的剧情</em>或者更准确的'<em class="je">一个不准确的对Plotly能力剧情</em>的描述。'</p><p id="0ced" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我的脑海中，我有一个更接近雅虎财经图表的愿景:</p><figure class="jn jo jp jq fd jr er es paragraph-image"><div class="er es jz"><img src="../Images/01b6238dadba05399e238ab6d14870fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:872/format:webp/1*3XJ3zCSQbnmjCanMDt7CNg.png"/></div><figcaption class="ju jv et er es jw jx bd b be z dx">SPY 4/16/21</figcaption></figure><p id="955c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">它似乎由两个主要部分组成，线形图代表股票的价格，底部的小白线代表股票全天的交易量。因此，看起来我们的'<em class="je">花式图'</em>仍然有一个伟大的股票可视化图表的气质。</p><p id="9d1b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在对Plotly.js <a class="ae jd" href="https://plotly.com/javascript/time-series/" rel="noopener ugc nofollow" target="_blank">文档</a>进行了一番挖掘之后，我偶然发现了一张<em class="je">时间序列财务图</em>。它似乎完全符合我的需要，除了一个关键因素，代表具体股票的量的小酒吧不见了。</p><figure class="jn jo jp jq fd jr er es paragraph-image"><div class="er es ka"><img src="../Images/ed465d21d26f379cb66a0dc2c888baca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1316/format:webp/1*e4MOtm4eCkQqVMziexE57w.png"/></div></figure><p id="cd47" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以再深入一点，我发现我需要的是我的时间系列情节中的一个次要情节。这是一个情节中的情节(主题曲加强)。如前所述，我们将处理一只股票的两组数据价格和交易量，这两组数据都是我们图表上的y轴。两组的x轴将是一个时间序列。在上面的例子中，时间的增量似乎是以周为单位，大约每6个月一次。对于我们的图表，我们将在一分钟内递增，因为我希望创建的图表是一个日内图表。</p><figure class="jn jo jp jq fd jr er es paragraph-image"><div class="er es kb"><img src="../Images/13c1a5e91ed89c5901842ea2acb78505.png" data-original-src="https://miro.medium.com/v2/resize:fit:948/format:webp/1*zxUE9nuq1O2wkpR4ezS7lA.png"/></div><figcaption class="ju jv et er es jw jx bd b be z dx">The above syntax can be found at the ‘Time Series with Range Slider Section <a class="ae jd" href="https://plotly.com/javascript/time-series/" rel="noopener ugc nofollow" target="_blank">here</a>.</figcaption></figure><p id="b006" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">顺便提一下，变量chartData和stockInfo表示从我的Redux存储中调用的数据。这些数据是从我的后端提供的，我已经将从IEX云API中检索到的数据解析成Plotly可以使用的格式(基本上是一长串数据点)。目前，本文的范围不包括数据检索和操作，只知道x:和y:属性是与特定股票价格和交易量相关的长数组。</p><p id="bfe2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦您将数据以状态存储或硬编码为文件中的变量，我们就可以访问<code class="du kc kd ke kf b">&lt;Plot /&gt;</code>组件。</p><figure class="jn jo jp jq fd jr er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es kg"><img src="../Images/b7d20eca092ebb1e327663c129aaa0c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*inn-AkKUvuTQqpQISGNKvQ.png"/></div></div></figure><p id="36b7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个组件的两个主要属性是上面讨论的数据属性(由价格和交易量组成的数组)和<a class="ae jd" href="https://plotly.com/javascript/reference/index/" rel="noopener ugc nofollow" target="_blank">布局属性</a>。在正常的布局中，只有xaxis和yaxis属性，但是因为我们有了一个子图，yaxis2就变得必要了。关于yaxis2的一些见解，首先它被标记在图表的右侧，其次它的范围被增加到最高音量点的最大值的4倍(这样条形会缩小，不会完全控制图表)，第三轴不应该可见，以保持图表的整洁。请注意，正常yaxis的范围分别是最低价格和最高价格上下2.5%，这使图表对基础股票的价格波动保持动态，并相应地调整其范围。</p><p id="8bc9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">终于…你们期待已久的时刻到了。我呈现给你的是一个真正的“奇特的情节”</p><figure class="jn jo jp jq fd jr er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es kl"><img src="../Images/54f9541c5711960f6b0a6c3334344044.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*squLsztbbV9TowiB.gif"/></div></div></figure><p id="e46d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">内置的测距仪是一个很大的优势，增加了任何图表的功能。以及允许用户聚焦于图表的特定区域的拖放缩放功能。当您在图表上悬停时，工具提示还会跟随价格、交易量和时间值。Plotly是许多数据可视化库中的一个，我希望在我作为软件工程师的旅程中继续使用它，并变得更加熟练。</p></div></div>    
</body>
</html>