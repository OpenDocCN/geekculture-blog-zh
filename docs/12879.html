<html>
<head>
<title>Standalone components with Custom Title Strategy in Angular 14</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Angular 14中具有自定义标题策略的独立组件</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/standalone-components-with-custom-title-strategy-in-angular-14-aec71a23bcd8?source=collection_archive---------4-----------------------#2022-06-06">https://medium.com/geekculture/standalone-components-with-custom-title-strategy-in-angular-14-aec71a23bcd8?source=collection_archive---------4-----------------------#2022-06-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/c374ec50243978367d0dcf44c6b034e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*St5jRmuNsIZ4icsuanNj0w.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Angular 14 is here!</figcaption></figure></div><div class="ab cl iu iv gp iw" role="separator"><span class="ix bw bk iy iz ja"/><span class="ix bw bk iy iz ja"/><span class="ix bw bk iy iz"/></div><div class="hb hc hd he hf"><h1 id="e2c2" class="jb jc hi bd jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy bi translated">介绍</h1><p id="4046" class="pw-post-body-paragraph jz ka hi kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw hb bi translated">直到Angular 13，Angular应用程序中最小的可重用代码块是<code class="du kx ky kz la b">NgModule</code></p><p id="c454" class="pw-post-body-paragraph jz ka hi kb b kc lb ke kf kg lc ki kj kk ld km kn ko le kq kr ks lf ku kv kw hb bi translated">然后，出现了一个<a class="ae lg" href="https://en.wikipedia.org/wiki/Request_for_Comments" rel="noopener ugc nofollow" target="_blank"> RFC </a> ( <a class="ae lg" href="https://github.com/angular/angular/discussions/43784" rel="noopener ugc nofollow" target="_blank"> RFC #43784 </a>)使NgModules成为可选的。背后的想法是减少开始使用Angular应用程序的样板代码，并去掉<code class="du kx ky kz la b">*.module.ts</code>文件。根据Angular的最新版本(版本14)，NgModules已成为可选的。到目前为止，它是一个“开发者预览”功能，因为用于使NgModules可选的API还不稳定，并且将来可能会根据社区反馈进行更改。</p><p id="4132" class="pw-post-body-paragraph jz ka hi kb b kc lb ke kf kg lc ki kj kk ld km kn ko le kq kr ks lf ku kv kw hb bi translated">从版本14开始，由于独立组件(也包括独立指令和独立管道)的概念，组件已经成为最小的可重用代码块，就像我们在React.js和Vue.js等其他前端框架中所拥有的一样。</p></div><div class="ab cl iu iv gp iw" role="separator"><span class="ix bw bk iy iz ja"/><span class="ix bw bk iy iz ja"/><span class="ix bw bk iy iz"/></div><div class="hb hc hd he hf"><h1 id="c6f5" class="jb jc hi bd jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy bi translated">独立组件</h1><p id="907a" class="pw-post-body-paragraph jz ka hi kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw hb bi translated"><a class="ae lg" href="https://angular.io/guide/standalone-components" rel="noopener ugc nofollow" target="_blank">角度独立组件</a>是那些不需要在NgModule decorators中声明，只需要在<code class="du kx ky kz la b">@Component</code> decorator中提供<code class="du kx ky kz la b">standalone: true</code>属性就可以使用的组件。它允许您将导入直接添加到<code class="du kx ky kz la b">@Component</code>装饰器中，而不必在<code class="du kx ky kz la b">@NgModule</code>中声明它</p><p id="5594" class="pw-post-body-paragraph jz ka hi kb b kc lb ke kf kg lc ki kj kk ld km kn ko le kq kr ks lf ku kv kw hb bi translated">独立组件，在引擎盖下，使用虚拟模块，这与<a class="ae lg" href="https://dev.to/this-is-angular/emulating-tree-shakable-components-using-single-component-angular-modules-13do" rel="noopener ugc nofollow" target="_blank"> SCAM </a> module(单个组件角度模块)的模式非常相似——每个单个角度组件都有一个专用模块。这是一对一的关系。</p></div><div class="ab cl iu iv gp iw" role="separator"><span class="ix bw bk iy iz ja"/><span class="ix bw bk iy iz ja"/><span class="ix bw bk iy iz"/></div><div class="hb hc hd he hf"><h1 id="b486" class="jb jc hi bd jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy bi translated">设置Angular 14独立应用程序</h1><p id="2e24" class="pw-post-body-paragraph jz ka hi kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw hb bi translated">好了，理论到此为止，让我们编码吧！让我们创建一个没有<code class="du kx ky kz la b">*.module.ts or @NgModule()</code>的完全独立的角度应用</p><p id="425a" class="pw-post-body-paragraph jz ka hi kb b kc lb ke kf kg lc ki kj kk ld km kn ko le kq kr ks lf ku kv kw hb bi translated">在撰写本文时，我的系统上安装了Angular CLI v13.3.7。我将创建一个角度13应用程序，然后将其升级到角度14。</p><p id="d003" class="pw-post-body-paragraph jz ka hi kb b kc lb ke kf kg lc ki kj kk ld km kn ko le kq kr ks lf ku kv kw hb bi translated">通过<code class="du kx ky kz la b">ng new &lt;app name&gt;</code>创建一个新的Angular app。我把它命名为“angular-14-starter”。它将创建一个包含模块文件和路由文件的样板代码(如果您在生成新应用程序时添加了路由)。</p><p id="39db" class="pw-post-body-paragraph jz ka hi kb b kc lb ke kf kg lc ki kj kk ld km kn ko le kq kr ks lf ku kv kw hb bi translated">使用<code class="du kx ky kz la b">ng update --next</code>将你的应用升级到Angular 14。你的屏幕应该显示如下。</p><figure class="lj lk ll lm fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es li"><img src="../Images/fe56777b5886e567bfe3fcf098125333.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wPFRpK0idscNzVj76T29Iw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Upgrading Angular 13 app to Angular 14 — Part 1</figcaption></figure><p id="6aeb" class="pw-post-body-paragraph jz ka hi kb b kc lb ke kf kg lc ki kj kk ld km kn ko le kq kr ks lf ku kv kw hb bi translated">运行以下命令将其升级到角度14:</p><p id="05ce" class="pw-post-body-paragraph jz ka hi kb b kc lb ke kf kg lc ki kj kk ld km kn ko le kq kr ks lf ku kv kw hb bi translated"><code class="du kx ky kz la b">ng update @angular/cli @angular/core --next</code></p><p id="fe46" class="pw-post-body-paragraph jz ka hi kb b kc lb ke kf kg lc ki kj kk ld km kn ko le kq kr ks lf ku kv kw hb bi translated">屏幕应该显示如下所示。</p><figure class="lj lk ll lm fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ln"><img src="../Images/558833bfd66de1fc898073948663297c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pyEvgaY_vPajkhF9dzkLfw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Upgrading Angular 13 app to Angular 14 — Part 2</figcaption></figure><p id="a23b" class="pw-post-body-paragraph jz ka hi kb b kc lb ke kf kg lc ki kj kk ld km kn ko le kq kr ks lf ku kv kw hb bi translated">现在我们已经将我们的应用程序升级到Angular 14，您的package.json文件应该如下所示:</p><figure class="lj lk ll lm fd ij"><div class="bz dy l di"><div class="lo lp l"/></div></figure><p id="8f3f" class="pw-post-body-paragraph jz ka hi kb b kc lb ke kf kg lc ki kj kk ld km kn ko le kq kr ks lf ku kv kw hb bi translated">我已经添加了<a class="ae lg" href="https://material.angular.io/" rel="noopener ugc nofollow" target="_blank">角状材料</a>作为这个演示的一部分。你也可以使用<code class="du kx ky kz la b">ng add @angular/material</code>将它添加到你的项目中</p></div><div class="ab cl iu iv gp iw" role="separator"><span class="ix bw bk iy iz ja"/><span class="ix bw bk iy iz ja"/><span class="ix bw bk iy iz"/></div><div class="hb hc hd he hf"><p id="eaaf" class="pw-post-body-paragraph jz ka hi kb b kc lb ke kf kg lc ki kj kk ld km kn ko le kq kr ks lf ku kv kw hb bi translated">独立组件的基本结构如下所示:</p><figure class="lj lk ll lm fd ij"><div class="bz dy l di"><div class="lo lp l"/></div></figure><p id="da06" class="pw-post-body-paragraph jz ka hi kb b kc lb ke kf kg lc ki kj kk ld km kn ko le kq kr ks lf ku kv kw hb bi translated">默认情况下，<code class="du kx ky kz la b">UserComponent</code>类在<code class="du kx ky kz la b">@Component</code>装饰器中包含一个<code class="du kx ky kz la b">standalone: true</code>属性，并导入<code class="du kx ky kz la b">CommonModule</code>。可以使用下面的Angular CLI命令— <code class="du kx ky kz la b">ng generate component user --standalone</code>创建上述组件。<code class="du kx ky kz la b">UserComponent</code>包含用户信息，因此让我们使用角材卡模块，并在mat-card上显示用户信息。</p><figure class="lj lk ll lm fd ij"><div class="bz dy l di"><div class="lo lp l"/></div></figure><figure class="lj lk ll lm fd ij"><div class="bz dy l di"><div class="lo lp l"/></div></figure></div><div class="ab cl iu iv gp iw" role="separator"><span class="ix bw bk iy iz ja"/><span class="ix bw bk iy iz ja"/><span class="ix bw bk iy iz"/></div><div class="hb hc hd he hf"><p id="f779" class="pw-post-body-paragraph jz ka hi kb b kc lb ke kf kg lc ki kj kk ld km kn ko le kq kr ks lf ku kv kw hb bi translated">类似地，创建另一个独立的组件(例如，dashboard ),如<code class="du kx ky kz la b">ng generate component dashboard --standalone</code></p><figure class="lj lk ll lm fd ij"><div class="bz dy l di"><div class="lo lp l"/></div></figure><figure class="lj lk ll lm fd ij"><div class="bz dy l di"><div class="lo lp l"/></div></figure></div><div class="ab cl iu iv gp iw" role="separator"><span class="ix bw bk iy iz ja"/><span class="ix bw bk iy iz ja"/><span class="ix bw bk iy iz"/></div><div class="hb hc hd he hf"><p id="f541" class="pw-post-body-paragraph jz ka hi kb b kc lb ke kf kg lc ki kj kk ld km kn ko le kq kr ks lf ku kv kw hb bi translated">让我们在路由配置中插入这些组件。<code class="du kx ky kz la b">app-routing.module.ts</code>应该如下图所示:</p><figure class="lj lk ll lm fd ij"><div class="bz dy l di"><div class="lo lp l"/></div></figure><p id="32d9" class="pw-post-body-paragraph jz ka hi kb b kc lb ke kf kg lc ki kj kk ld km kn ko le kq kr ks lf ku kv kw hb bi translated">在v14中，有一个新的属性<code class="du kx ky kz la b">loadComponent</code>可以用来延迟加载组件，类似于我们之前使用<code class="du kx ky kz la b">loadChildren</code>属性对模块所做的。此外，还有一个<code class="du kx ky kz la b">title</code>属性，它接受页面标题的名称，当路线改变时，它也会改变。</p></div><div class="ab cl iu iv gp iw" role="separator"><span class="ix bw bk iy iz ja"/><span class="ix bw bk iy iz ja"/><span class="ix bw bk iy iz"/></div><div class="hb hc hd he hf"><p id="b0b7" class="pw-post-body-paragraph jz ka hi kb b kc lb ke kf kg lc ki kj kk ld km kn ko le kq kr ks lf ku kv kw hb bi translated">现在，让我们稍微重构一下应用程序，去掉所有的<code class="du kx ky kz la b">*.module.ts</code>文件。</p><p id="74f3" class="pw-post-body-paragraph jz ka hi kb b kc lb ke kf kg lc ki kj kk ld km kn ko le kq kr ks lf ku kv kw hb bi translated">删除<code class="du kx ky kz la b">app.module.ts</code>文件并重构<code class="du kx ky kz la b">app.component.ts</code>文件，如下所示:</p><figure class="lj lk ll lm fd ij"><div class="bz dy l di"><div class="lo lp l"/></div></figure><p id="708c" class="pw-post-body-paragraph jz ka hi kb b kc lb ke kf kg lc ki kj kk ld km kn ko le kq kr ks lf ku kv kw hb bi translated">如下所示修改<code class="du kx ky kz la b">main.ts</code>文件:</p><figure class="lj lk ll lm fd ij"><div class="bz dy l di"><div class="lo lp l"/></div></figure><p id="6f45" class="pw-post-body-paragraph jz ka hi kb b kc lb ke kf kg lc ki kj kk ld km kn ko le kq kr ks lf ku kv kw hb bi translated"><code class="du kx ky kz la b">main.ts</code>文件包含来自<code class="du kx ky kz la b">@angular/platform-browser</code>的<code class="du kx ky kz la b">bootstrapApplication()</code>，它接收<code class="du kx ky kz la b">AppComponent</code>并引导独立的角度应用程序。需要使用<code class="du kx ky kz la b">@angular/core</code>中的另一个内置方法<code class="du kx ky kz la b">importProvidersFrom</code>将路线注入到<code class="du kx ky kz la b">providers</code>数组中</p><p id="0244" class="pw-post-body-paragraph jz ka hi kb b kc lb ke kf kg lc ki kj kk ld km kn ko le kq kr ks lf ku kv kw hb bi translated">使用<code class="du kx ky kz la b">npm run start</code>运行您的应用程序，您应该会看到Angular独立组件在工作。如果你打开网络选项卡，你会看到应用程序也延迟加载<code class="du kx ky kz la b">UserComponent</code>和<code class="du kx ky kz la b">DashboardComponent</code></p><figure class="lj lk ll lm fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lq"><img src="../Images/fd6a25dbd29d3d54dc4e1ab385e7fa26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5cxB7ivun_-rV0zxGvxf-A.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Chunk sizes of Angular 14 application shown in Network tab in Chrome</figcaption></figure></div><div class="ab cl iu iv gp iw" role="separator"><span class="ix bw bk iy iz ja"/><span class="ix bw bk iy iz ja"/><span class="ix bw bk iy iz"/></div><div class="hb hc hd he hf"><h1 id="2bb9" class="jb jc hi bd jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy bi translated">自定义标题策略</h1><p id="1a11" class="pw-post-body-paragraph jz ka hi kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw hb bi translated">我们也可以通过扩展<code class="du kx ky kz la b">@angular/router</code>提供的<code class="du kx ky kz la b">TitleStrategy</code>来定制应用程序路径的标题。或者，您也可以使用<code class="du kx ky kz la b">resolver</code>方法来获取页面的标题。</p><p id="c843" class="pw-post-body-paragraph jz ka hi kb b kc lb ke kf kg lc ki kj kk ld km kn ko le kq kr ks lf ku kv kw hb bi translated">我已经实现了下面GitHub要点中显示的两个策略。</p><p id="500d" class="pw-post-body-paragraph jz ka hi kb b kc lb ke kf kg lc ki kj kk ld km kn ko le kq kr ks lf ku kv kw hb bi translated">修改您的<code class="du kx ky kz la b">app-routing.module.ts</code>文件，如下所示:</p><figure class="lj lk ll lm fd ij"><div class="bz dy l di"><div class="lo lp l"/></div></figure><p id="f950" class="pw-post-body-paragraph jz ka hi kb b kc lb ke kf kg lc ki kj kk ld km kn ko le kq kr ks lf ku kv kw hb bi translated">并更新<code class="du kx ky kz la b">main.ts</code>文件中的<code class="du kx ky kz la b">providers</code>数组，如下所示:</p><figure class="lj lk ll lm fd ij"><div class="bz dy l di"><div class="lo lp l"/></div></figure><p id="8f34" class="pw-post-body-paragraph jz ka hi kb b kc lb ke kf kg lc ki kj kk ld km kn ko le kq kr ks lf ku kv kw hb bi translated">当您在路由配置中没有提供<code class="du kx ky kz la b">title</code>属性时，<code class="du kx ky kz la b">UserComponent</code>应该获得标题为<code class="du kx ky kz la b">Standalone app — User Info</code>，因为它是<code class="du kx ky kz la b">CustomTitleStrategy</code>中提供的默认标题。</p><figure class="lj lk ll lm fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lr"><img src="../Images/4303d194252a11295548e5c9cb95dff9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cgN9pRGpk4eg1L9nKnyIcQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">User Info page with Standalone app — User Info title</figcaption></figure><p id="938f" class="pw-post-body-paragraph jz ka hi kb b kc lb ke kf kg lc ki kj kk ld km kn ko le kq kr ks lf ku kv kw hb bi translated">同样，<code class="du kx ky kz la b">DashboardComponent</code>得到标题<code class="du kx ky kz la b">Standalone app — My dashboard</code>，因为标题被<code class="du kx ky kz la b">DashboardTitleResolver</code>解析，然后<code class="du kx ky kz la b">CustomTitleStrategy</code>开始将<code class="du kx ky kz la b">/dashboard</code>路线的标题设置为<code class="du kx ky kz la b">Standalone app — My dashboard</code></p><figure class="lj lk ll lm fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ls"><img src="../Images/1d6093c156c5745fc547f86f09421566.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Fgp7KVvJW2YVozIb4IgyMA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Dashboard page with Standalone app — My dashboard title</figcaption></figure></div><div class="ab cl iu iv gp iw" role="separator"><span class="ix bw bk iy iz ja"/><span class="ix bw bk iy iz ja"/><span class="ix bw bk iy iz"/></div><div class="hb hc hd he hf"><p id="a5f0" class="pw-post-body-paragraph jz ka hi kb b kc lb ke kf kg lc ki kj kk ld km kn ko le kq kr ks lf ku kv kw hb bi translated">如果你在编码的过程中遇到了困难，下面是GitHub repo的公开链接:</p><div class="lt lu ez fb lv lw"><a href="https://github.com/akashkriplani/angular-14-starter" rel="noopener  ugc nofollow" target="_blank"><div class="lx ab dw"><div class="ly ab lz cl cj ma"><h2 class="bd hj fi z dy mb ea eb mc ed ef hh bi translated">GitHub-akashkriplani/Angular-14-starter:带有自定义标题的Angular 14独立组件…</h2><div class="md l"><h3 class="bd b fi z dy mb ea eb mc ed ef dx translated">此项目是使用Angular CLI版本13.3.5生成的。为开发服务器运行ng serve。导航到…</h3></div><div class="me l"><p class="bd b fp z dy mb ea eb mc ed ef dx translated">github.com</p></div></div><div class="mf l"><div class="mg l mh mi mj mf mk io lw"/></div></div></a></div></div><div class="ab cl iu iv gp iw" role="separator"><span class="ix bw bk iy iz ja"/><span class="ix bw bk iy iz ja"/><span class="ix bw bk iy iz"/></div><div class="hb hc hd he hf"><h1 id="0f61" class="jb jc hi bd jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy bi translated">结论</h1><p id="d7c6" class="pw-post-body-paragraph jz ka hi kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw hb bi translated">现在我们有了。我希望这篇文章对你有用。感谢您的阅读。请随时提供您的意见、建议和任何其他可能有帮助的反馈。</p></div></div>    
</body>
</html>