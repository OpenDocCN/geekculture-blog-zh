<html>
<head>
<title>Running Deepy Locally on WSL2 in Windows 11</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Windows 11中的WSL2上本地运行Deepy</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/running-deepy-locally-on-wsl2-in-windows-11-d7260d82a8e3?source=collection_archive---------5-----------------------#2021-07-07">https://medium.com/geekculture/running-deepy-locally-on-wsl2-in-windows-11-d7260d82a8e3?source=collection_archive---------5-----------------------#2021-07-07</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="9dbd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">嗨！</p><p id="c2fc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这篇文章中，我将分享我在运行Windows 11和WSL2的本地PC上运行我们的多技能人工智能助手平台Deepy的经验。</p><blockquote class="jd je jf"><p id="4579" class="if ig jg ih b ii ij ik il im in io ip jh ir is it ji iv iw ix jj iz ja jb jc hb bi translated">上周，我值得信赖的联想ThinkPad X1 Yoga第二代显示了它的年龄(它是在2017年12月购买的，从那以后在俄罗斯和美国几乎不间断地使用)，我决定换一台新的PC。这一次考虑到流行病和在家工作的事情，我的目标是有一个坚实的钻机w/o妥协。梦想是能够至少部分在本地托管我们的人工智能助手/社交机器人。</p><p id="60a9" class="if ig jg ih b ii ij ik il im in io ip jh ir is it ji iv iw ix jj iz ja jb jc hb bi translated">为了让大家对DeepPavlov有所了解，我们在DGX集群中部署了运行大量英伟达GTX 1080 TI GPU的虚拟机。对于我们去年的梦想人工智能助手演示，我使用了一个这样的带有3个GPU的虚拟机；那时候，它或多或少足够举办整个活动。我们也有配备i7–7700、32GB RAM和相同GPU的电脑。在家里，我的X1 Yoga配备了普通的英伟达GTX 1080 GPU。类似的设置，但非TI GPU和只有16GB的内存。</p><p id="bd24" class="if ig jg ih b ii ij ik il im in io ip jh ir is it ji iv iw ix jj iz ja jb jc hb bi translated">所以，我的新装备是一台PC(我一生中的第五台)，AMD锐龙7 5800 x(16倍虚拟内核)，64GB内存，之前安装在雷电3 dock中的同一款NVIDIA GTX 1080，以及2TB三星SSD (NVMe)。该设备有可能承载高达4gb的CPU(3个PCIE 16x端口+ 2个雷电3端口，由GIGABYTE VISION D-P主板支持)，以及高达128GB的RAM。</p></blockquote><p id="c486" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个平台目前运行在Windows 11(撰写本文时是22000.51)下。我想要的是能够在本地(至少部分地)运行我们的人工智能助手平台，并体验你们，我们的开发者，会体验到的东西。</p><p id="e9e6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">注意:没有在Ubuntu下运行它的计划，因为有一些桌面应用程序(主要是微软Office和Visual Studio)不能在那里运行。</p><p id="41c5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">关键是我们的<a class="ae jk" href="https://github.com/deepmipt/deepy" rel="noopener ugc nofollow" target="_blank"> Deepy </a>以及DREAM AI Assistant Platform Demo，以及其他社交机器人都使用我们和第三方的GPU密集型NLP模型。在我的1080上运行它们而不是使用CPU是有意义的。</p><h1 id="8ce8" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">为什么选择WSL2？</h1><p id="743d" class="pw-post-body-paragraph if ig hi ih b ii kj ik il im kk io ip iq kl is it iu km iw ix iy kn ja jb jc hb bi translated">直到最近的<a class="ae jk" href="https://docs.nvidia.com/grid/5.0/grid-vgpu-user-guide/index.html#using-gpu-pass-through-windows-server-hyper-v" rel="noopener ugc nofollow" target="_blank"/>，在Windows中不可能将主机的GPU传递到虚拟机中，但现在这是Windows 11的标准功能。</p><p id="d70e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">作为副作用，这也允许你运行Linux GUI应用程序。</p><p id="faaf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，要在Windows 11下运行我们的平台，我们可以使用下面至少三种可能的方法之一:</p><ul class=""><li id="3c12" class="ko kp hi ih b ii ij im in iq kq iu kr iy ks jc kt ku kv kw bi translated">成熟的虚拟机(在Hyper-V中运行)</li><li id="12a3" class="ko kp hi ih b ii kx im ky iq kz iu la iy lb jc kt ku kv kw bi translated">在窗户上建造</li><li id="cdee" class="ko kp hi ih b ii kx im ky iq kz iu la iy lb jc kt ku kv kw bi translated">WSL2</li></ul><p id="856e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">虽然在Windows上本地构建我们的平台可能很有趣，但考虑到这将涉及检查所有组件的兼容性，在Linux(例如Ubuntu 18.04)上本地运行是有意义的，反正我们在数据中心使用Linux。</p><p id="2629" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">结果是，如果你想在Hyper-V VM中使用你的GPU，你必须从你的主机中显式地卸载它，并在VM中挂载它。这不是一个选项，因为我的钻机只有一个GPU，它不能没有它。</p><p id="b229" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，WSL2与它的主机GPU共享是必由之路。下面您可以找到详细的说明，让您能够在Windows 11机器上使用兼容的NVIDIA GPU在WSL2中启动和运行我们的Deepy。</p><h1 id="db78" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">逐步说明</h1><h2 id="412b" class="lc jm hi bd jn ld le lf jr lg lh li jv iq lj lk jz iu ll lm kd iy ln lo kh lp bi translated">先决条件</h2><p id="3c08" class="pw-post-body-paragraph if ig hi ih b ii kj ik il im kk io ip iq kl is it iu km iw ix iy kn ja jb jc hb bi translated">你需要对你的机器有管理员权限。使用<strong class="ih hj"> Windows终端</strong>(或您选择的任何其他终端应用)开始安装。</p><p id="10b9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第一步:</strong>为Linux安装Windows子系统:</p><pre class="lq lr ls lt fd lu lv lw lx aw ly bi"><span id="002a" class="lc jm hi lv b fi lz ma l mb mc">dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart</span></pre><p id="05e7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第二步:</strong>安装虚拟机平台(WSL2需要):</p><pre class="lq lr ls lt fd lu lv lw lx aw ly bi"><span id="bb2e" class="lc jm hi lv b fi lz ma l mb mc">dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart</span></pre><p id="458a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第三步:</strong>下载最新的Linux内核更新:<a class="ae jk" href="https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi" rel="noopener ugc nofollow" target="_blank"> AMD64 </a></p><p id="9186" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤4: </strong>确保您的WSL默认设置为WSL2:</p><pre class="lq lr ls lt fd lu lv lw lx aw ly bi"><span id="8b7c" class="lc jm hi lv b fi lz ma l mb mc">wsl --set-default-version 2</span></pre><p id="1329" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤5 </strong>:从微软商店选择你的Linux发行版，例如Ubuntu 18.04:</p><ul class=""><li id="9794" class="ko kp hi ih b ii ij im in iq kq iu kr iy ks jc kt ku kv kw bi translated"><a class="ae jk" href="https://www.microsoft.com/store/apps/9N9TNGVNDL3Q" rel="noopener ugc nofollow" target="_blank"> Ubuntu 18.04 LTS </a>(其他发行版<a class="ae jk" href="https://docs.microsoft.com/en-us/windows/wsl/install-win10" rel="noopener ugc nofollow" target="_blank">在此列出</a>；你需要支持glibc的分布式系统才能在WSL中使用支持NVIDIA CUDA的驱动程序，例如Ubuntu或Debian)</li></ul><p id="2d6c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第六步:</strong>下载安装预览版GPU驱动:</p><p id="69d1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jk" href="https://developer.nvidia.com/cuda/wsl" rel="noopener ugc nofollow" target="_blank">支持NVIDIA CUDA的WSL驱动程序</a></p><p id="2a06" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤7(可选):</strong>使用NVIDIA GeForce experience将您的驱动程序升级到最新版本。</p><p id="3bca" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤8: </strong>确保您的WSL2 Linux内核版本至少是4.19.121或租用:</p><pre class="lq lr ls lt fd lu lv lw lx aw ly bi"><span id="3dbc" class="lc jm hi lv b fi lz ma l mb mc">wsl cat /proc/version</span></pre><p id="19dc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果不是，请使用Windows Update获取最新版本。</p><p id="0285" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第9步</strong> : <a class="ae jk" href="https://docs.nvidia.com/cuda/wsl-user-guide/index.html" rel="noopener ugc nofollow" target="_blank">按照NVIDIA </a>的说明安装NVIDIA CUDA Toolkit。为了简洁起见，我在这里列出了它们，但您可以随意点击上面的链接:</p><pre class="lq lr ls lt fd lu lv lw lx aw ly bi"><span id="d896" class="lc jm hi lv b fi lz ma l mb mc">$ apt-key adv --fetch-keys http://developer.download.nvidia.com/compute/cuda/repos/ubuntu1804/x86_64/7fa2af80.pub<br/><br/>$ sh -c 'echo "deb http://developer.download.nvidia.com/compute/cuda/repos/ubuntu1804/x86_64 /" &gt; /etc/apt/sources.list.d/cuda.list'<br/><br/>$ apt-get update</span></pre><p id="b976" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第十步:</strong>安装CUDA。我们在当前版本的DeepPavlov库中使用CUDA 10，所以使用以下命令:</p><pre class="lq lr ls lt fd lu lv lw lx aw ly bi"><span id="8246" class="lc jm hi lv b fi lz ma l mb mc">$ apt-get install -y cuda-toolkit-10-0</span></pre><p id="48a5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第11步:</strong>确保您的CUDA应用可以使用您的主机NVIDIA GPU运行:</p><pre class="lq lr ls lt fd lu lv lw lx aw ly bi"><span id="1aee" class="lc jm hi lv b fi lz ma l mb mc">$ git clone <a class="ae jk" href="https://github.com/NVIDIA/cuda-samples" rel="noopener ugc nofollow" target="_blank">https://github.com/NVIDIA/cuda-samples</a></span><span id="02dd" class="lc jm hi lv b fi md ma l mb mc">$ cd /usr/local/cuda/samples/4_Finance/BlackScholes</span><span id="3249" class="lc jm hi lv b fi md ma l mb mc">$ ./BlackScholes</span></pre><p id="beb6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您应该得到这样的输出:</p><pre class="lq lr ls lt fd lu lv lw lx aw ly bi"><span id="2951" class="lc jm hi lv b fi lz ma l mb mc">Initializing data...<br/>...allocating CPU memory for options.<br/>...allocating GPU memory for options.<br/>...generating input data in CPU mem.<br/>...copying input data to GPU mem.<br/>Data init done.<br/><br/>Executing Black-Scholes GPU kernel (131072 iterations)...<br/>Options count             : 8000000<br/>BlackScholesGPU() time    : 1.314299 msec<br/>Effective memory bandwidth: 60.868973 GB/s<br/>Gigaoptions per second    : 6.086897<br/><br/>...</span></pre><p id="f72d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果这是你所看到的(你的数字会有所不同)，这太好了！这意味着您现在已经准备好继续安装NVIDIA Docker。</p><p id="3abf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第十二步:</strong>安装Docker CE</p><p id="97c4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">重要提示:目前，NVIDIA容器工具包不支持Docker Desktop的WSL2后端。然而，我不会建议你使用Docker桌面。</p><pre class="lq lr ls lt fd lu lv lw lx aw ly bi"><span id="a127" class="lc jm hi lv b fi lz ma l mb mc">$ curl https://get.docker.com | sh</span></pre><p id="b8e9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第十三步:</strong>安装NVIDIA容器工具包(你可以在这里阅读他们的说明<a class="ae jk" href="https://docs.nvidia.com/cuda/wsl-user-guide/index.html#installing-nvidia-docker" rel="noopener ugc nofollow" target="_blank">):</a></p><p id="b57d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">建立稳定的和实验性的知识库和GPG键。为支持WSL 2而对运行时进行的更改可以在实验存储库中找到:</p><pre class="lq lr ls lt fd lu lv lw lx aw ly bi"><span id="5812" class="lc jm hi lv b fi lz ma l mb mc">$ distribution=$(. /etc/os-release;echo $ID$VERSION_ID)<br/><br/>$ curl -s -L https://nvidia.github.io/nvidia-docker/gpgkey | sudo apt-key add -<br/><br/>$ curl -s -L https://nvidia.github.io/nvidia-docker/$distribution/nvidia-docker.list | sudo tee /etc/apt/sources.list.d/nvidia-docker.list<br/><br/>$ curl -s -L https://nvidia.github.io/libnvidia-container/experimental/$distribution/libnvidia-container-experimental.list | sudo tee /etc/apt/sources.list.d/libnvidia-container-experimental.list</span></pre><p id="a871" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">更新软件包列表后，安装NVIDIA运行时软件包(及其依赖项):</p><pre class="lq lr ls lt fd lu lv lw lx aw ly bi"><span id="c7a6" class="lc jm hi lv b fi lz ma l mb mc">$ sudo apt-get update<br/><br/>$ sudo apt-get install -y nvidia-docker2</span></pre><p id="5513" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">打开一个单独的WSL 2窗口，并使用以下命令再次启动Docker守护进程，以完成安装。</p><pre class="lq lr ls lt fd lu lv lw lx aw ly bi"><span id="7a5e" class="lc jm hi lv b fi lz ma l mb mc">$ sudo service docker stop</span><span id="aab6" class="lc jm hi lv b fi md ma l mb mc">$ sudo service docker start</span></pre><p id="f1ef" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤14: </strong>检查你的NVIDIA docker容器是否可以在你的WSL2机器上运行</p><p id="801f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这个例子中，让我们运行一个N体模拟CUDA示例。这个例子已经集装箱化，可从NGC获得。</p><pre class="lq lr ls lt fd lu lv lw lx aw ly bi"><span id="6747" class="lc jm hi lv b fi lz ma l mb mc">$ docker run --gpus all nvcr.io/nvidia/k8s/cuda-sample:nbody nbody -gpu -benchmark</span></pre><p id="23a0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从控制台，您应该看到如下所示的输出。</p><pre class="lq lr ls lt fd lu lv lw lx aw ly bi"><span id="f469" class="lc jm hi lv b fi lz ma l mb mc">$ docker run --gpus all nvcr.io/nvidia/k8s/cuda-sample:nbody nbody -gpu -benchmark<br/>Run "nbody -benchmark [-numbodies=&lt;numBodies&gt;]" to measure performance.<br/>        -fullscreen       (run n-body simulation in fullscreen mode)<br/>        -fp64             (use double precision floating point values for simulation)<br/>        -hostmem          (stores simulation data in host memory)<br/>        -benchmark        (run benchmark to measure performance)<br/>        -numbodies=&lt;N&gt;    (number of bodies (&gt;= 1) to run in simulation)<br/>        -device=&lt;d&gt;       (where d=0,1,2.... for the CUDA device to use)<br/>        -numdevices=&lt;i&gt;   (where i=(number of CUDA devices &gt; 0) to use for simulation)<br/>        -compare          (compares simulation results running once on the default GPU and once on the CPU)<br/>        -cpu              (run n-body simulation on the CPU)<br/>        -tipsy=&lt;file.bin&gt; (load a tipsy model file for simulation)</span><span id="e2e1" class="lc jm hi lv b fi md ma l mb mc">NOTE: The CUDA Samples are not meant for performance measurements. Results may vary when GPU Boost is enabled.</span><span id="d796" class="lc jm hi lv b fi md ma l mb mc">&gt; Windowed mode<br/>&gt; Simulation data stored in video memory<br/>&gt; Single precision floating point simulation<br/>&gt; 1 Devices used for simulation<br/>GPU Device 0: "GeForce GTX 1070" with compute capability 6.1</span><span id="0540" class="lc jm hi lv b fi md ma l mb mc">&gt; Compute 6.1 CUDA device: [GeForce GTX 1070]<br/>15360 bodies, total time for 10 iterations: 11.949 ms<br/>= 197.446 billion interactions per second<br/>= 3948.925 single-precision GFLOP/s at 20 flops per interaction</span></pre><p id="93be" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">万岁！</p><h1 id="a9e6" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">在新的基于WSL2的Linux环境中运行Deepy</h1><p id="b9c8" class="pw-post-body-paragraph if ig hi ih b ii kj ik il im kk io ip iq kl is it iu km iw ix iy kn ja jb jc hb bi translated">终于到了试用Deepy的时候了！</p><p id="4cef" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤1 </strong>:克隆Deepy的仓库</p><pre class="lq lr ls lt fd lu lv lw lx aw ly bi"><span id="5047" class="lc jm hi lv b fi lz ma l mb mc">$ git clone https://github.com/deepmipt/deepy</span></pre><p id="32e7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤2: </strong>构建并运行它</p><pre class="lq lr ls lt fd lu lv lw lx aw ly bi"><span id="eeac" class="lc jm hi lv b fi lz ma l mb mc">$ docker-compose up --build</span></pre><p id="0b58" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第三步:</strong>试试看！</p><p id="09f9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦所有的东西都被下载、构建和运行，你就可以在你的机器上玩Deepy了。</p><h1 id="a7d7" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">用Deepy做实验</h1><p id="7f2f" class="pw-post-body-paragraph if ig hi ih b ii kj ik il im kk io ip iq kl is it iu km iw ix iy kn ja jb jc hb bi translated">有几种方法可以玩Deepy:</p><ul class=""><li id="d1ee" class="ko kp hi ih b ii ij im in iq kq iu kr iy ks jc kt ku kv kw bi translated">通过它的REST APIs，在这种情况下可以在<a class="ae jk" href="http://127.0.0.1:4242/" rel="noopener ugc nofollow" target="_blank"> http://127.0.0.1:4242/ </a>(参见文档<a class="ae jk" href="https://deeppavlov-agent.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank">这里</a>)</li><li id="0265" class="ko kp hi ih b ii kx im ky iq kz iu la iy lb jc kt ku kv kw bi translated">via Deepy 3000(我们的<a class="ae jk" href="https://github.com/deepmipt/Deepy1000" rel="noopener ugc nofollow" target="_blank">小型UWP应用</a>最初是为我们在NVIDIA GTC 2020年秋季大会上的演讲打造的)</li><li id="a7a1" class="ko kp hi ih b ii kx im ky iq kz iu la iy lb jc kt ku kv kw bi translated">通过我们的demo.deeppavlov.ai网站在你的机器上运行</li></ul><p id="33d3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了简洁起见，我将在这里解释如何建立并运行我们的演示网站:</p><p id="ae4f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第一步:克隆演示2的仓库:</p><pre class="lq lr ls lt fd lu lv lw lx aw ly bi"><span id="b702" class="lc jm hi lv b fi lz ma l mb mc">$ git clone https://github.com/deepmipt/demo2</span></pre><p id="17b3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第二步</strong>:安装<strong class="ih hj"> node.js </strong>(以下是从<a class="ae jk" href="https://linuxize.com/post/how-to-install-node-js-on-ubuntu-18.04/" rel="noopener ugc nofollow" target="_blank">到</a>的说明):</p><p id="1435" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">作为拥有sudo权限的<a class="ae jk" href="https://linuxize.com/post/how-to-create-a-sudo-user-on-ubuntu/" rel="noopener ugc nofollow" target="_blank">用户</a>，通过运行以下<code class="du me mf mg lv b"><a class="ae jk" href="https://linuxize.com/post/curl-command-examples/" rel="noopener ugc nofollow" target="_blank">curl</a></code>命令来启用节点源存储库:</p><pre class="lq lr ls lt fd lu lv lw lx aw ly bi"><span id="ce78" class="lc jm hi lv b fi lz ma l mb mc">$ curl -sL https://deb.nodesource.com/setup_12.x | sudo -E bash - </span></pre><p id="3933" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jg">该命令会将NodeSource签名密钥添加到您的系统中，创建一个apt源代码库文件，安装所有必需的软件包并刷新apt缓存。</em></p><p id="bd28" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">启用节点源存储库后，通过键入以下命令安装Node.js和npm:</p><pre class="lq lr ls lt fd lu lv lw lx aw ly bi"><span id="8721" class="lc jm hi lv b fi lz ma l mb mc">$ sudo apt-get install nodejs</span></pre><p id="3a49" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jg">nodejs包包含了</em> <code class="du me mf mg lv b"><em class="jg">node</em></code> <em class="jg">和</em> <code class="du me mf mg lv b"><em class="jg">npm</em></code> <em class="jg">二进制文件。</em></p><p id="e211" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第三步:</strong>安装<strong class="ih hj">纱线</strong>:</p><p id="1c53" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">启用纱线储存库:</p><pre class="lq lr ls lt fd lu lv lw lx aw ly bi"><span id="d2b0" class="lc jm hi lv b fi lz ma l mb mc">$ curl -sS <a class="ae jk" href="https://dl.yarnpkg.com/debian/pubkey.gpg" rel="noopener ugc nofollow" target="_blank">https://dl.yarnpkg.com/debian/pubkey.gpg</a> | sudo apt-key add -</span></pre><p id="19e4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过键入以下命令，将Yarn APT存储库添加到系统的软件存储库列表中:</p><pre class="lq lr ls lt fd lu lv lw lx aw ly bi"><span id="6949" class="lc jm hi lv b fi lz ma l mb mc">$ echo "deb <a class="ae jk" href="https://dl.yarnpkg.com/debian/" rel="noopener ugc nofollow" target="_blank">https://dl.yarnpkg.com/debian/</a> stable main" | sudo tee /etc/apt/sources.list.d/yarn.list</span></pre><p id="7fd2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦存储库被添加到系统中，更新包列表，并安装Yarn，使用:</p><pre class="lq lr ls lt fd lu lv lw lx aw ly bi"><span id="9fe1" class="lc jm hi lv b fi lz ma l mb mc">$ sudo apt-get update</span><span id="4949" class="lc jm hi lv b fi md ma l mb mc">$ sudo apt-get install yarn</span></pre><p id="ad9c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤4: </strong>编辑用于访问Deepy bot的URI:</p><pre class="lq lr ls lt fd lu lv lw lx aw ly bi"><span id="099f" class="lc jm hi lv b fi lz ma l mb mc">$ cd /demo2/src/components/skills/en</span><span id="cc5d" class="lc jm hi lv b fi md ma l mb mc">$ nano Chat.tsx</span></pre><p id="7d3d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在编辑器中，将URI改为<code class="du me mf mg lv b">127.0.0.1:4242</code>:</p><figure class="lq lr ls lt fd mi er es paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="er es mh"><img src="../Images/c0dfd33413999ccfbb85cd9ac280dde9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KCfLdljsCea9lP6xGmeaSw.png"/></div></div></figure><p id="9255" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">保存并关闭编辑器(Ctrl+X，Y)。</p><p id="92df" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第五步:运行网站:</p><p id="c6c7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">转到克隆的demo2存储库的根目录:</p><pre class="lq lr ls lt fd lu lv lw lx aw ly bi"><span id="b0aa" class="lc jm hi lv b fi lz ma l mb mc">$ cd ../../../../</span><span id="79cd" class="lc jm hi lv b fi md ma l mb mc">$ yarn start</span></pre><p id="8ef8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦所有东西都构建好了，您应该会看到:</p><figure class="lq lr ls lt fd mi er es paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="er es mp"><img src="../Images/e9db4f1a52497032bd108b952d260ccb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WFIPQSc3qqk1xkJs4HcLoA.png"/></div></div></figure><p id="ef1c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">瞧。</p><p id="415d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第6步:</strong>在浏览器中打开您的演示2网站:</p><p id="6304" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jk" href="http://localhost:3000/#/en/chat" rel="noopener ugc nofollow" target="_blank">http://localhost:3000/#/en/chat</a></p><p id="44fd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这将向您展示Deepy 3000 web UI:</p><figure class="lq lr ls lt fd mi er es paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="er es mq"><img src="../Images/f973d9ac8d7dad72bb64dd6d09e8fe00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-2mmKiSbzaAF4X797MYnKA.png"/></div></div></figure><p id="17b5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">点击“同意”，你就可以开始了！</p><figure class="lq lr ls lt fd mi er es paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="er es mr"><img src="../Images/d3787282d7a469178ffb16301fd360be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GlIaAqRUHL2wmKzWXAcBQg.png"/></div></div></figure><p id="d61a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在你已经启动并运行了你的系统，你可以关注我们的Deepy的wiki来学习如何为你的多技能人工智能助手建立你自己的技能和注释器！</p><p id="b49a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">祝你好运，让我们知道你和Deepy一起建立了什么！</p></div></div>    
</body>
</html>