<html>
<head>
<title>Efficient Form Validations in Angular</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Angular中的有效形式验证</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/best-way-to-implement-angular-reactive-forms-c2918e3b3a5?source=collection_archive---------6-----------------------#2021-04-03">https://medium.com/geekculture/best-way-to-implement-angular-reactive-forms-c2918e3b3a5?source=collection_archive---------6-----------------------#2021-04-03</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="50a4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">许多人有不同的方法来实现角形，每种方法都有自己的价值。这是我喜欢的实现角反应形式的最好方法。</p><p id="cd3c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，什么是角反应形式？</p><p id="b851" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">反应式表单是为应用程序的各种功能实现可重用表单的一种方式。它使用完整的角度特征来绑定数据并将数据设置到表单控件。</p><p id="6e26" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">反应形式的关键组成部分:</p><ol class=""><li id="7c66" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">表单控件:它跟踪单个表单控件的值和验证状态。</li><li id="0adc" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated"><strong class="ih hj">表单组:</strong>它为一组表单控件跟踪相同的值和状态。</li><li id="73c4" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated"><strong class="ih hj">表单数组:</strong>跟踪表单控件集合的相同值和状态。</li></ol><p id="16c5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这篇文章中，我们将研究上述所有组件，以了解更多关于反应式表单的知识，以及它们对于构建表单的有效性。</p><p id="4a1a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，我们将使用以下命令创建一个新的angular项目。</p><p id="6075" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du jr js jt ju b">ng new sample-project</code></p><p id="0dc7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这将在您指定的目录下创建一个角度项目。现在在你最喜欢的代码编辑器中打开angular项目。我在这篇文章中使用了Visual Studio代码。</p><p id="905b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，在编辑器中打开终端，运行以下命令启动angular应用程序。打开谷歌浏览器，查看localhost:4200网址。</p><p id="d5b9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du jr js jt ju b">ng serve</code></p><figure class="jw jx jy jz fd ka er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es jv"><img src="../Images/0f179d4e454cc333105dc2253106b8f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6xchlMoKtOpBCU-XGG-ZZA.png"/></div></div><figcaption class="kh ki et er es kj kk bd b be z dx">Start the angular applcation</figcaption></figure><p id="dc57" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在从底部的终端窗口打开新的终端，并创建一个名为<strong class="ih hj"> reactive-forms </strong>的新组件。您可以通过以下命令创建一个新组件。</p><p id="9fbd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du jr js jt ju b">ng generate component reactive-forms</code></p><p id="4941" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">或者你可以点击下面的快捷方式</p><p id="2bac" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du jr js jt ju b">ng g c reactive-forms</code></p><p id="2e4d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在将路径添加到<strong class="ih hj"> app.routing文件</strong>中的反应式表单组件。</p><pre class="jw jx jy jz fd kl ju km kn aw ko bi"><span id="113b" class="kp kq hi ju b fi kr ks l kt ku">const routes: Routes = [</span><span id="2bdb" class="kp kq hi ju b fi kv ks l kt ku">{path: 'reactive', component:ReactiveFormsComponent}</span><span id="90e8" class="kp kq hi ju b fi kv ks l kt ku">];</span></pre><p id="3eb3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在删除<strong class="ih hj">app.component.html</strong>中的所有html，并在其中添加以下代码。这将使App组件可以访问这些路线。</p><p id="9499" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du jr js jt ju b">&lt;router-outlet&gt;&lt;/router-outlet&gt;</code></p><p id="a2b6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于这个项目，我们将使用角材料作为应用的设计组件。以下是在您的角度应用中安装角度材料的步骤。</p><p id="38ca" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在代码编辑器中打开终端，并运行以下命令</p><p id="c870" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du jr js jt ju b">ng add @angular/material</code></p><p id="ce7e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这将提示您选择预先构建的主题名称。选择你喜欢的主题。如果您希望在应用程序中使用手势控制和动画，还可以设置HammerJs和浏览器动画。</p><figure class="jw jx jy jz fd ka er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es kw"><img src="../Images/fffa847c4d3dc7965b6d55401ef2acb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rHBpZkQv0zOWLStCeAplPw.png"/></div></div><figcaption class="kh ki et er es kj kk bd b be z dx">Select theme for the Angular Material</figcaption></figure><p id="8221" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们开始建立角反应形式！！</p><p id="c097" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先让我们导入这个项目所需的所有模块。app.module.ts中的导入部分应该包含以下模块。</p><pre class="jw jx jy jz fd kl ju km kn aw ko bi"><span id="fc91" class="kp kq hi ju b fi kr ks l kt ku">imports: [</span><span id="ef6b" class="kp kq hi ju b fi kv ks l kt ku">BrowserModule,</span><span id="bd3b" class="kp kq hi ju b fi kv ks l kt ku">AppRoutingModule,</span><span id="a547" class="kp kq hi ju b fi kv ks l kt ku">BrowserAnimationsModule,</span><span id="5956" class="kp kq hi ju b fi kv ks l kt ku">ReactiveFormsModule,</span><span id="a8ef" class="kp kq hi ju b fi kv ks l kt ku">FormsModule,</span><span id="91d8" class="kp kq hi ju b fi kv ks l kt ku">MatFormFieldModule,</span><span id="0656" class="kp kq hi ju b fi kv ks l kt ku">MatInputModule,</span><span id="6371" class="kp kq hi ju b fi kv ks l kt ku">MatButtonModule</span><span id="d3d3" class="kp kq hi ju b fi kv ks l kt ku">]</span></pre><figure class="jw jx jy jz fd ka er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es kx"><img src="../Images/1542bcfd79002721363c06e476a3da09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2EHZxYZatzIDG1V-QSvYRw.png"/></div></div><figcaption class="kh ki et er es kj kk bd b be z dx">app.module.ts</figcaption></figure><p id="aa5f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们通过“ng serve”重新启动angular应用程序。然后转到反应式表单组件文件。首先，我们应该为表单创建一个表单组。初始化构造函数上方的窗体组。</p><p id="f0b2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du jr js jt ju b">userForm:FormGroup;</code></p><p id="c60f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在构造器中导入FormBuilder，以使用form builder创建表单。</p><pre class="jw jx jy jz fd kl ju km kn aw ko bi"><span id="35de" class="kp kq hi ju b fi kr ks l kt ku">constructor(private fb:FormBuilder) { }</span></pre><p id="4cd3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们创建用户表单。我们的用户表单将有以下表单控件来绑定和设置表单数据。</p><ol class=""><li id="4a5a" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">名字:因为它是必填字段，所以需要进行验证。</li><li id="a6d0" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">姓氏:因为它是必填字段，所以需要进行验证。</li><li id="d942" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">电子邮件:因为这是一个必填字段，这将有必要的验证，因为它有电子邮件类型，我们可以包括电子邮件验证器。</li><li id="1d0e" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">电话:因为它是必填字段，它将具有所需的验证，电话应该至少有10个字符。所以我们添加了最小长度=10和最大长度=10的验证器。</li></ol><p id="8906" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面的函数将创建带有验证的表单。</p><pre class="jw jx jy jz fd kl ju km kn aw ko bi"><span id="5898" class="kp kq hi ju b fi kr ks l kt ku">createUserForm(){</span><span id="e486" class="kp kq hi ju b fi kv ks l kt ku">this.userForm = this.fb.group({</span><span id="c993" class="kp kq hi ju b fi kv ks l kt ku">firstName:['',[Validators.required]],</span><span id="d5bc" class="kp kq hi ju b fi kv ks l kt ku">lastName:['',[Validators.required]],</span><span id="41af" class="kp kq hi ju b fi kv ks l kt ku">email:['',[Validators.required, Validators.email]],</span><span id="5bc1" class="kp kq hi ju b fi kv ks l kt ku">phone:['',[Validators.required, Validators.minLength(10), Validators.maxLength(10)]]</span><span id="1ead" class="kp kq hi ju b fi kv ks l kt ku">})</span><span id="0c26" class="kp kq hi ju b fi kv ks l kt ku">}</span></pre><p id="a602" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在ngOnInit()函数中初始化该表单，以便在组件初始化后立即初始化该函数。</p><pre class="jw jx jy jz fd kl ju km kn aw ko bi"><span id="fadc" class="kp kq hi ju b fi kr ks l kt ku">ngOnInit() { this.createUserForm(); }</span></pre><p id="22c0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们创建一个Error函数，它根据表单控件的验证器状态返回错误。</p><pre class="jw jx jy jz fd kl ju km kn aw ko bi"><span id="c88d" class="kp kq hi ju b fi kr ks l kt ku">getErrorMessage(control:AbstractControl){</span><span id="c5b3" class="kp kq hi ju b fi kv ks l kt ku">if(control.errors.required) <strong class="ju hj">return 'Required'</strong>;<br/>if(control.errors.email) <strong class="ju hj">return 'Enter a valid email address';</strong><br/>if(<br/>control.errors.hasOwnProperty('minlength')  || control.errors.hasOwnProperty('maxlength')) <br/><strong class="ju hj">return 'Phone number should be 10 digits';</strong></span><span id="ba32" class="kp kq hi ju b fi kv ks l kt ku">}</span></pre><p id="caba" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上面的函数将表单控件作为参数，并根据表单控件的错误返回一个字符串。现在添加onSubmit()函数，它在表单完成时提交表单。</p><pre class="jw jx jy jz fd kl ju km kn aw ko bi"><span id="1cd0" class="kp kq hi ju b fi kr ks l kt ku">onSubmit(){ console.log(this.userForm.value); }</span></pre><p id="9421" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您的最终组件文件将类似于这样。</p><figure class="jw jx jy jz fd ka er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es ky"><img src="../Images/59dec216ea1e8d35d186836dc3973639.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-flD4fyww984Pxz0Ohcgeg.png"/></div></div><figcaption class="kh ki et er es kj kk bd b be z dx">component.ts</figcaption></figure><p id="9801" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们去组件的html文件。html文件将输入作为表单控件。以及一个mat错误标签，它将根据所显示的验证来显示错误。</p><pre class="jw jx jy jz fd kl ju km kn aw ko bi"><span id="e752" class="kp kq hi ju b fi kr ks l kt ku">&lt;mat-error *ngIf="userForm.controls.firstName.invalid"&gt; {{getErrorMessage(userForm.controls.firstName)}}&lt;/mat-error&gt;</span><span id="c524" class="kp kq hi ju b fi kv ks l kt ku">&lt;mat-error *ngIf="userForm.controls.lastName.invalid"&gt; {{getErrorMessage(userForm.controls.lastName)}}&lt;/mat-error&gt;</span><span id="1c08" class="kp kq hi ju b fi kv ks l kt ku">&lt;mat-error *ngIf="userForm.controls.email.invalid"&gt; {{getErrorMessage(userForm.controls.email)}}&lt;/mat-error&gt;</span><span id="aa2c" class="kp kq hi ju b fi kv ks l kt ku">&lt;mat-error *ngIf="userForm.controls.phone.invalid"&gt; {{getErrorMessage(userForm.controls.phone)}}&lt;/mat-error&gt;</span></pre><p id="e1d4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面是用户详细信息表单的完整html文件。</p><pre class="jw jx jy jz fd kl ju km kn aw ko bi"><span id="20c2" class="kp kq hi ju b fi kr ks l kt ku">&lt;h3&gt; Add User Details &lt;/h3&gt;</span><span id="6ed5" class="kp kq hi ju b fi kv ks l kt ku">&lt;form [formGroup]="userForm" (ngSubmit)="onSubmit()"&gt;</span><span id="6531" class="kp kq hi ju b fi kv ks l kt ku">&lt;mat-form-field&gt;<br/>&lt;mat-label&gt;First Name&lt;/mat-label&gt;<br/>&lt;input matInput type="text" formControlName="firstName"&gt;<br/><strong class="ju hj">&lt;mat-error *ngIf="userForm.controls.firstName.invalid"&gt; {{getErrorMessage(userForm.controls.firstName)}}&lt;/mat-error&gt;</strong><br/>&lt;/mat-form-field&gt;</span><span id="3165" class="kp kq hi ju b fi kv ks l kt ku">&lt;mat-form-field&gt;<br/>&lt;mat-label&gt; Last Name &lt;/mat-label&gt;<br/>&lt;input matInput type="text" formControlName="lastName"&gt;<br/><strong class="ju hj">&lt;mat-error *ngIf="userForm.controls.lastName.invalid"&gt; {{getErrorMessage(userForm.controls.lastName)}}&lt;/mat-error&gt;</strong><br/>&lt;/mat-form-field&gt;</span><span id="008b" class="kp kq hi ju b fi kv ks l kt ku">&lt;mat-form-field&gt;<br/>&lt;mat-label&gt;Email&lt;/mat-label&gt;<br/>&lt;input matInput type="text" formControlName="email"&gt;<br/><strong class="ju hj">&lt;mat-error *ngIf="userForm.controls.email.invalid"&gt; {{getErrorMessage(userForm.controls.email)}}&lt;/mat-error&gt;</strong><br/>&lt;/mat-form-field&gt;</span><span id="12c7" class="kp kq hi ju b fi kv ks l kt ku">&lt;mat-form-field&gt;<br/>&lt;mat-label&gt; Phone &lt;/mat-label&gt;<br/>&lt;input matInput type="text" formControlName="phone"&gt;<br/><strong class="ju hj">&lt;mat-error *ngIf="userForm.controls.phone.invalid"&gt; {{getErrorMessage(userForm.controls.phone)}}&lt;/mat-error&gt;</strong><br/>&lt;/mat-form-field&gt;</span><span id="6fd3" class="kp kq hi ju b fi kv ks l kt ku">&lt;button mat-raised-button color="primary" type="submit"&gt; Submit &lt;/button&gt;<br/>&lt;/form&gt;</span></pre><p id="44aa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，如果您进入浏览器并检查表单验证。您根据用户输入测试验证。</p><figure class="jw jx jy jz fd ka er es paragraph-image"><div class="er es kz"><img src="../Images/48cf80e0fb56148fb3fe43efcfbe2ac9.png" data-original-src="https://miro.medium.com/v2/resize:fit:710/format:webp/1*S3GRC7laDsXyPfihRXxmlQ.png"/></div><figcaption class="kh ki et er es kj kk bd b be z dx">Browser Output</figcaption></figure><p id="da57" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">就是这样。在角坐标中实现角坐标反应形式是最容易的。感谢阅读这篇文章。如果你对角反应式有任何疑问。请随时给我发邮件(saikiran1298@gmail.com)。</p></div></div>    
</body>
</html>