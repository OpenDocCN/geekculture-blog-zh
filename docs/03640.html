<html>
<head>
<title>Magic/Dunder Methods in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中的Magic/Dunder方法</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/magic-dunder-methods-in-python-ce83c4f9701b?source=collection_archive---------22-----------------------#2021-06-12">https://medium.com/geekculture/magic-dunder-methods-in-python-ce83c4f9701b?source=collection_archive---------22-----------------------#2021-06-12</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/cfc3aa1aad206c581e03df4b17183652.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*QIh4MhWUykNHf5-dpIF5aQ.jpeg"/></div><figcaption class="im in et er es io ip bd b be z dx">Photo by <a class="ae iq" href="https://unsplash.com/@phanchutoan?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">toan phan</a> on <a class="ae iq" href="https://unsplash.com/s/photos/fireflies?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="dd57" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">Dunder代表 score下的<strong class="it hj">d</strong>double<strong class="it hj">，与thunder押韵。与thunder不同，dunder method不需要制造噪音，它像magic✨一样工作——在你的光学感官后面。在本文中，我们将把magic/dunder方法称为dunder方法。</strong></p><p id="745a" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">在我的第一堂计算机科学课上，我就知道了邓德代表什么，我想从那以后它就一直伴随着我。后来，我也可能因为脱口而出它所代表的意思而有点惹人讨厌。🤐:翻转_鬃毛:</p><p id="35ed" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">Dunder方法以双下划线<code class="du jq jr js jt b">_</code>开始和结束，如<code class="du jq jr js jt b">__init__</code>、<code class="du jq jr js jt b">__main__</code>、<code class="du jq jr js jt b">__str__</code>。</p><p id="623f" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">让我们建立一个疫苗信息模型:</p><figure class="ju jv jw jx fd ij"><div class="bz dy l di"><div class="jy jz l"/></div></figure><p id="a8b1" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">运行该文件时，我们得到:</p><pre class="ju jv jw jx fd ka jt kb kc aw kd bi"><span id="5493" class="ke kf hi jt b fi kg kh l ki kj">&lt;__main__.Vaccine object at 0x7fc8480dce50&gt;</span></pre><p id="a279" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">我们收到的东西看起来像是<code class="du jq jr js jt b">v1</code>类疫苗的实例所在的地方。<code class="du jq jr js jt b">print</code>声明背后发生了什么？</p><p id="0a89" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated"><code class="du jq jr js jt b">print</code>基本上是使用<code class="du jq jr js jt b">__str__</code>方法打印疫苗对象的字符串格式，就像我们在Java中使用<code class="du jq jr js jt b">toString()</code>一样。我们可以在<code class="du jq jr js jt b">v1</code>实例上显式调用<code class="du jq jr js jt b">__str__()</code>看到同样的结果:</p><figure class="ju jv jw jx fd ij"><div class="bz dy l di"><div class="jy jz l"/></div></figure><p id="1d9c" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">运行该文件时，我们看到:</p><pre class="ju jv jw jx fd ka jt kb kc aw kd bi"><span id="7976" class="ke kf hi jt b fi kg kh l ki kj">implicit print of v1 instance: &lt;__main__.Vaccine object at 0x7f9e701e4e50&gt;<br/>explicit print of v1 instance: &lt;__main__.Vaccine object at 0x7f9e701e4e50&gt;</span></pre><p id="b5d0" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">现在让我们重写<code class="du jq jr js jt b">__str__</code>方法，以给出关于<code class="du jq jr js jt b">v1</code>实例的更多高级细节:</p><figure class="ju jv jw jx fd ij"><div class="bz dy l di"><div class="jy jz l"/></div></figure><p id="325d" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">运行该文件时，我们可以得到:</p><pre class="ju jv jw jx fd ka jt kb kc aw kd bi"><span id="113d" class="ke kf hi jt b fi kg kh l ki kj">Generic Name: Moderna, Expiry date: 2021-07-07, Against: coronavirus 🦠</span></pre><p id="59f5" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">所以你看，你实际上可以覆盖内置的dunder方法来满足你的需要。你需要工作，没有魔法。😁</p><p id="b69e" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">现在让我们检查一下python环境中的一些内置dunder方法:</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="er es kk"><img src="../Images/0dd23a4b5c52f9aa09a33c9def03a55a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FIv-NYgjjMLxwQWDdc8VZA.png"/></div></div><figcaption class="im in et er es io ip bd b be z dx">builtin dunder methods in python</figcaption></figure><p id="8bc0" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">你能看出我们可以用多少种不同的方法来使用<code class="du jq jr js jt b">__add__</code>方法()吗？除了整数，我们还可以用它来连接列表和字符串。像<code class="du jq jr js jt b">__str__</code>方法一样，它背后有一个重载<code class="du jq jr js jt b">__add__</code>方法的实现。</p><p id="e60e" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">让我们覆盖我们的类<code class="du jq jr js jt b">Vaccine</code>中的内置<code class="du jq jr js jt b">__add__</code>方法。</p><figure class="ju jv jw jx fd ij"><div class="bz dy l di"><div class="jy jz l"/></div></figure><p id="fc52" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">运行该文件时，我们得到:</p><pre class="ju jv jw jx fd ka jt kb kc aw kd bi"><span id="ea81" class="ke kf hi jt b fi kg kh l ki kj">======== __add__ and ___repr__ ==========<br/>v1 + v2 = [Moderna, PFizer]<br/>======== __call__ ==========<br/>Instance v1 call: 👺 hehawhehaw I'll soar your heat for max 2 days to make you resistant most of the time, says Moderna 🎃<br/>Instance v2 call: 👺 hehawhehaw I'll soar your heat for max 2 days to make you resistant most of the time, says PFizer 🎃</span></pre><p id="7a2b" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">输出是最后的润色。这里涉及的新数据方法有<code class="du jq jr js jt b">__add__</code>、<code class="du jq jr js jt b">__repr__</code>和<code class="du jq jr js jt b">__call__</code>。</p><p id="49b5" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">正如我们前面所讲的，我们将覆盖<code class="du jq jr js jt b">__add__</code>方法来添加两个疫苗实例。我们通过向<code class="du jq jr js jt b">__add__</code>方法添加我们自己的实现来做到这一点。如果我们没有<code class="du jq jr js jt b">__repr__</code>方法，那么<code class="du jq jr js jt b">v1 + v2</code>的结果将会是</p><pre class="ju jv jw jx fd ka jt kb kc aw kd bi"><span id="18ba" class="ke kf hi jt b fi kg kh l ki kj">[&lt;__main__.Vaccine object at 0x7ff0a81edfd0&gt;, &lt;__main__.Vaccine object at 0x7ff0a81edf10&gt;]</span></pre><p id="0fc4" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">所以<code class="du jq jr js jt b">__repr__</code>帮助了我们，为我们提供了一个更人性化的实例。</p><p id="2e58" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">还包括一个用<code class="du jq jr js jt b">__call__</code>方法的s小治疗。我最近遇到了一个使用<code class="du jq jr js jt b">call()</code>调用类的实例，所以快速查找了一下。<code class="du jq jr js jt b">__call__</code>方法被用来调用一个对象的实例，就像<code class="du jq jr js jt b">__init__</code>被用来调用类一样。</p><p id="5e37" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">总之，dunder/magic方法在一些操作符后面被隐式调用，如<code class="du jq jr js jt b">str()</code>、<code class="du jq jr js jt b">+</code>、<code class="du jq jr js jt b">—</code>等。希望这对你有帮助！</p><p id="2db3" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">我的下一篇文章是关于记忆🧠.的感谢您的阅读。到时候见！</p></div></div>    
</body>
</html>