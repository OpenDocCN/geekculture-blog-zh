<html>
<head>
<title>Mobile Price Classification: An Open Source Data Science Project with Dagshub</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">移动价格分类:Dagshub的开源数据科学项目</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/mobile-price-classification-an-open-source-data-science-project-with-dagshub-720e2ae6a710?source=collection_archive---------15-----------------------#2022-12-23">https://medium.com/geekculture/mobile-price-classification-an-open-source-data-science-project-with-dagshub-720e2ae6a710?source=collection_archive---------15-----------------------#2022-12-23</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="754b" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">使用Dagshub和Streamlit构建和部署ML模型，对移动价格范围进行分类</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/95b7f6014dff0e9c1373e0d440e954f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f17v1kha97tTcqBc4VGtRw.jpeg"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Photo by Rann Vijay from <a class="ae jn" href="https://www.pexels.com/photo/close-up-of-smart-phones-7952560/" rel="noopener ugc nofollow" target="_blank">Pexels:</a></figcaption></figure><p id="dd7b" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">机器学习模型通常在训练环境中开发，训练环境可以是在线或离线的，一旦经过测试，就可以部署用于实时数据。</p><p id="d15d" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果你从事涉及数据科学和机器学习的项目，你需要具备的最重要的才能之一是部署模型的能力。</p><p id="ab4d" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">模型部署</strong>是将您的模型集成到现有生产环境中的过程。该模型将接收输入并预测输出。您将学习如何管理您的机器学习项目，并使用以下开源工具将机器学习模型部署到生产中:</p><p id="26ab" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj"> 1。Dagshub <br/> </strong>它是一个网络平台，供数据科学家和机器学习工程师托管和发布<em class="kk">代码、数据、实验和机器学习模型</em>，并与其他开源工具集成，如:</p><ul class=""><li id="6c37" class="kl km hi jq b jr js ju jv jx kn kb ko kf kp kj kq kr ks kt bi translated"><strong class="jq hj"> Git </strong> —跟踪源代码和其他文件</li><li id="1905" class="kl km hi jq b jr ku ju kv jx kw kb kx kf ky kj kq kr ks kt bi translated"><strong class="jq hj"> DVC </strong> —追踪数据和机器学习模型</li><li id="e1cc" class="kl km hi jq b jr ku ju kv jx kw kb kx kf ky kj kq kr ks kt bi translated"><strong class="jq hj"> MLflow </strong> —追踪机器学习实验。</li></ul><p id="f35f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj"> 2。Streamlit <br/> </strong>它是一个开源Python库，用于为数据科学和机器学习项目创建和共享web应用程序。该库可以帮助您使用几行代码在几分钟内开发和部署一个数据科学解决方案。</p><p id="87c9" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在本教程中，将涵盖以下主题:</p><ul class=""><li id="377d" class="kl km hi jq b jr js ju jv jx kn kb ko kf kp kj kq kr ks kt bi translated">使用<strong class="jq hj"> Dagshub </strong>创建和管理您的机器学习项目。</li><li id="e722" class="kl km hi jq b jr ku ju kv jx kw kb kx kf ky kj kq kr ks kt bi translated">建立一个ML模型来分类移动价格范围。</li><li id="aaf1" class="kl km hi jq b jr ku ju kv jx kw kb kx kf ky kj kq kr ks kt bi translated">使用<strong class="jq hj"> Streamlit </strong>部署您的ML模型，创建一个简单的数据科学web应用程序。</li></ul><p id="aa93" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">所以让我们开始吧。</p><h1 id="4abf" class="kz la hi bd lb lc ld le lf lg lh li lj io lk ip ll ir lm is ln iu lo iv lp lq bi translated">如何使用Dagshub创建项目</h1><p id="ba26" class="pw-post-body-paragraph jo jp hi jq b jr lr ij jt ju ls im jw jx lt jz ka kb lu kd ke kf lv kh ki kj hb bi translated">在Dagshub上创建您的帐户后，您将获得不同的选项来开始使用Dagshub创建您的第一个项目。</p><ul class=""><li id="cdba" class="kl km hi jq b jr js ju jv jx kn kb ko kf kp kj kq kr ks kt bi translated"><strong class="jq hj">新存储库:</strong>直接在Dagshub平台上创建一个新的存储库。</li><li id="3e71" class="kl km hi jq b jr ku ju kv jx kw kb kx kf ky kj kq kr ks kt bi translated"><strong class="jq hj">迁移一个Repo: </strong>将一个存储库从GitHub迁移到Dagshub。</li><li id="6003" class="kl km hi jq b jr ku ju kv jx kw kb kx kf ky kj kq kr ks kt bi translated"><strong class="jq hj">连接一个Repo: </strong>通过Github和Dagshub连接并管理您的存储库。</li></ul><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es lw"><img src="../Images/165b21628bb4ab5669f06b9dfa798ae3.png" data-original-src="https://miro.medium.com/v2/resize:fit:952/format:webp/1*6iVkXJ4i5NI4TbjB8jvl8Q.png"/></div><figcaption class="jj jk et er es jl jm bd b be z dx">Screenshot from the Dagshub platform (Author).</figcaption></figure><p id="e9b7" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">DagsHub上的新存储库的接口和GitHub上的现有存储库的接口应该有很多相似之处。但是，应该有一些附加的选项卡，如实验、报告和注释。</p><p id="0cc7" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">您可以在DagsHub上的<a class="ae jn" href="https://dagshub.com/Davisy/Mobile-Price-ML-Classification-Project" rel="noopener ugc nofollow" target="_blank"> this repository </a>中克隆并给出一个星号来跟随整篇文章。</p><h1 id="0d11" class="kz la hi bd lb lc ld le lf lg lh li lj io lk ip ll ir lm is ln iu lo iv lp lq bi translated">移动价格数据集</h1><p id="0750" class="pw-post-body-paragraph jo jp hi jq b jr lr ij jt ju ls im jw jx lt jz ka kb lu kd ke kf lv kh ki kj hb bi translated">我们将使用移动价格数据集将价格范围分为以下不同类别。</p><ul class=""><li id="ef9f" class="kl km hi jq b jr js ju jv jx kn kb ko kf kp kj kq kr ks kt bi translated">0(低成本)</li><li id="5028" class="kl km hi jq b jr ku ju kv jx kw kb kx kf ky kj kq kr ks kt bi translated">1(中等成本)</li><li id="1c82" class="kl km hi jq b jr ku ju kv jx kw kb kx kf ky kj kq kr ks kt bi translated">2(高成本)</li><li id="dae0" class="kl km hi jq b jr ku ju kv jx kw kb kx kf ky kj kq kr ks kt bi translated">3(成本非常高)</li></ul><p id="0c3b" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">数据集可在<a class="ae jn" href="https://www.kaggle.com/iabhishekofficial/mobile-price-classification?ref=hackernoon.com" rel="noopener ugc nofollow" target="_blank">这里</a>获得。</p><p id="e288" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我们在数据文件夹中有一个可用的，<em class="kk"> data.csv. </em>我们将把数据集分成训练和测试数据帧，用于训练和验证。</p><h2 id="6801" class="lx la hi bd lb ly lz ma lf mb mc md lj jx me mf ll kb mg mh ln kf mi mj lp mk bi translated"><strong class="ak">软件包安装</strong></h2><p id="9cc1" class="pw-post-body-paragraph jo jp hi jq b jr lr ij jt ju ls im jw jx lt jz ka kb lu kd ke kf lv kh ki kj hb bi translated">在这个项目中，我们将使用以下python包。</p><ul class=""><li id="f9c0" class="kl km hi jq b jr js ju jv jx kn kb ko kf kp kj kq kr ks kt bi translated"><strong class="jq hj">熊猫</strong>进行数据操作。</li><li id="f874" class="kl km hi jq b jr ku ju kv jx kw kb kx kf ky kj kq kr ks kt bi translated"><strong class="jq hj"> sklearn </strong>用于训练机器学习算法。</li><li id="fd1e" class="kl km hi jq b jr ku ju kv jx kw kb kx kf ky kj kq kr ks kt bi translated"><strong class="jq hj"> MLflow </strong>用于跟踪机器学习实验。</li><li id="97d5" class="kl km hi jq b jr ku ju kv jx kw kb kx kf ky kj kq kr ks kt bi translated"><strong class="jq hj"> DVC </strong>(数据版本控制)，用于对数据集和机器学习模型进行跟踪和版本控制。</li><li id="d5d4" class="kl km hi jq b jr ku ju kv jx kw kb kx kf ky kj kq kr ks kt bi translated"><strong class="jq hj"> Joblib </strong>用于保存和加载机器学习模型。</li><li id="f8c3" class="kl km hi jq b jr ku ju kv jx kw kb kx kf ky kj kq kr ks kt bi translated"><strong class="jq hj"> Streamlit </strong>用于在web应用中部署机器学习模型。</li></ul><p id="5213" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">所有这些包都列在<a class="ae jn" href="https://dagshub.com/Davisy/Mobile-Price-ML-Classification-Project/src/main/requirements.txt" rel="noopener ugc nofollow" target="_blank"> requirement.txt文件</a>中。通过在终端中运行以下命令来安装这些软件包。</p><p id="d12a" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><code class="du ml mm mn mo b">pip install -r requirements.txt</code></p><h2 id="b882" class="lx la hi bd lb ly lz ma lf mb mc md lj jx me mf ll kb mg mh ln kf mi mj lp mk bi translated"><strong class="ak">导入Python包</strong></h2><p id="ca4d" class="pw-post-body-paragraph jo jp hi jq b jr lr ij jt ju ls im jw jx lt jz ka kb lu kd ke kf lv kh ki kj hb bi translated">安装完所有软件包后，您需要在开始使用它们之前导入软件包。</p><pre class="iy iz ja jb fd mp mo mq mr aw ms bi"><span id="4801" class="lx la hi mo b fi mt mu l mv mw"><em class="kk"># import packages<br/><br/>import </em>pandas <em class="kk">as </em>pd<br/><em class="kk">import </em>numpy <em class="kk">as </em>np<br/><br/><em class="kk">import </em>sklearn<br/><em class="kk">from </em>sklearn.model_selection <em class="kk">import </em>train_test_split<br/><em class="kk">from </em>sklearn.preprocessing <em class="kk">import </em>StandardScaler<br/><em class="kk">from </em>sklearn.metrics <em class="kk">import </em>accuracy_score<br/><br/><em class="kk">from </em>sklearn.ensemble <em class="kk">import </em>RandomForestClassifier<br/><em class="kk">from </em>sklearn.linear_model <em class="kk">import </em>LogisticRegression<br/><br/><em class="kk">import </em>mlflow<br/><br/>mlflow.sklearn.autolog()  <em class="kk"># set autlog for sklearn<br/></em>mlflow.set_experiment('Ml-classification-experiment')</span><span id="73d1" class="lx la hi mo b fi mx mu l mv mw"><em class="kk">import </em>joblib<br/><em class="kk">import </em>json<br/><em class="kk">import </em>os<br/><br/>np.random.seed(1234)</span></pre><p id="2849" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">注:</strong>有了MLflow，你可以使用<strong class="jq hj"> mlflow.skearn </strong>模块中一个名为<strong class="jq hj"> autolog() </strong>的函数自动跟踪机器学习实验。</p><h2 id="55f6" class="lx la hi bd lb ly lz ma lf mb mc md lj jx me mf ll kb mg mh ln kf mi mj lp mk bi translated"><strong class="ak">加载和版本化移动价格数据集</strong></h2><pre class="iy iz ja jb fd mp mo mq mr aw ms bi"><span id="1686" class="lx la hi mo b fi mt mu l mv mw">raw_data = pd.read_csv("data/raw/data.csv")</span></pre><p id="5683" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">数据版本控制(</strong> DVC)是一个开源解决方案，允许你跟踪你的机器学习项目的数据及其模型的变化。完成帐户创建过程后，Dagshub将为您提供10 GB的DVC免费存储空间。</p><p id="e59c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在每个存储库中，Dagshub将自动生成一个远程存储链接以及一个命令列表，以启动您的数据跟踪过程。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es my"><img src="../Images/22fdca2d8f286064122e594931efecda.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F4EMhUFzGfq4DGfYJRjSSg.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Screenshot from Dagshub (Author).</figcaption></figure><p id="adda" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">运行以下命令添加Dagshub DVC远程服务器。</p><pre class="iy iz ja jb fd mp mo mq mr aw ms bi"><span id="a1b3" class="lx la hi mo b fi mt mu l mv mw">dvc remote add origin <a class="ae jn" href="https://dagshub.com/Davisy/Mobile-Price-ML-Classification-Project.dvc" rel="noopener ugc nofollow" target="_blank">https://dagshub.com/Davisy/Mobile-Price-ML-Classification-Project.dvc</a></span></pre><p id="48a0" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">注意:</strong>上面的命令会将存储库添加为DVC存储的远程存储，并且URL会与您看到的略有不同。</p><p id="75ca" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">然后，您可以使用以下命令开始跟踪数据集。</p><pre class="iy iz ja jb fd mp mo mq mr aw ms bi"><span id="9479" class="lx la hi mo b fi mt mu l mv mw"><em class="kk">dvc commit -f data / raw.dvc</em></span></pre><p id="a106" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">让我们检查数据集的形状。</p><pre class="iy iz ja jb fd mp mo mq mr aw ms bi"><span id="8ba9" class="lx la hi mo b fi mt mu l mv mw">print(raw_data.shape)</span></pre><p id="3f47" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">该数据集包含21列(20个要素和1个目标)，幸运的是，该数据集没有缺失值。</p><p id="a8a3" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">将移动价格数据分为功能和目标。目标列名为“价格范围”。</p><pre class="iy iz ja jb fd mp mo mq mr aw ms bi"><span id="4fa1" class="lx la hi mo b fi mt mu l mv mw">features = raw_data.drop(['price_range'], axis=1)<br/><br/>target = raw_data.price_range.values</span></pre><h2 id="607b" class="lx la hi bd lb ly lz ma lf mb mc md lj jx me mf ll kb mg mh ln kf mi mj lp mk bi translated">数据预处理</h2><p id="cae2" class="pw-post-body-paragraph jo jp hi jq b jr lr ij jt ju ls im jw jx lt jz ka kb lu kd ke kf lv kh ki kj hb bi translated">这些特征在适合机器学习算法之前必须被标准化。我们将使用s <strong class="jq hj"> cikit-learn </strong>中的Standardscaler来执行任务。</p><pre class="iy iz ja jb fd mp mo mq mr aw ms bi"><span id="7c3a" class="lx la hi mo b fi mt mu l mv mw">scaler = StandardScaler()<br/>features_scaled = scaler.fit_transform(features)</span></pre><p id="d34e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">下一步是将数据分成训练集和验证集。20%的移动价格数据集将用于验证。</p><pre class="iy iz ja jb fd mp mo mq mr aw ms bi"><span id="8aec" class="lx la hi mo b fi mt mu l mv mw">X_train, X_valid, y_train, y_valid = train_test_split(features_scaled, target, test_size=0.2,<br/>                                          stratify=target,<br/>                                          random_state=1)</span></pre><p id="e155" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这里是列车组的样本(X_train的第一行)。</p><pre class="iy iz ja jb fd mp mo mq mr aw ms bi"><span id="129c" class="lx la hi mo b fi mt mu l mv mw">print(X_train[0])</span><span id="89a0" class="lx la hi mo b fi mx mu l mv mw">[ 1.56947055 -0.9900495   1.32109556 -1.01918398  0.15908825 -1.04396559<br/> -1.49088996  1.03435682  0.61459469  0.20963905  1.00341448 -0.93787756<br/> -0.57283137 -1.3169798   0.40204724  1.43112714  0.73023981  0.55964063 0.99401789  0.98609664]</span></pre><p id="9374" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我们需要用DVC跟踪处理过的数据，以提高效率和重现性。首先，我们为训练集和有效集创建一个数据帧，最后将它们保存在一个已处理的文件夹中，如下面的代码块所示。</p><pre class="iy iz ja jb fd mp mo mq mr aw ms bi"><span id="4775" class="lx la hi mo b fi mt mu l mv mw"><em class="kk"># create a dataframe for train set<br/></em>X_train_df = pd.DataFrame(X_train, columns=list(features.columns))<br/>y_train_df = pd.DataFrame(y_train, columns=["price_range"])<br/><br/><em class="kk">#combine features and target for train set<br/></em>train_df = pd.concat([X_train_df, y_train_df], axis=1)<br/><br/><em class="kk"># create a dataframe for traine set<br/></em>X_valid_df = pd.DataFrame(X_valid, columns=list(features.columns))<br/>y_valid_df = pd.DataFrame(y_valid, columns=["price_range"])<br/><em class="kk">#combine features and target for train set<br/></em>valid_df = pd.concat([X_valid_df, y_valid_df], axis=1)</span><span id="9fd8" class="lx la hi mo b fi mx mu l mv mw"><em class="kk"># save processed train and valid set<br/></em>train_df.to_csv('data/processed/data_train.csv', index_label='Index')<br/>valid_df.to_csv('data/processed/data_valid.csv', index_label='Index')</span></pre><p id="969e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">然后运行以下命令来跟踪已处理的数据(训练和有效集合)。</p><pre class="iy iz ja jb fd mp mo mq mr aw ms bi"><span id="46b2" class="lx la hi mo b fi mt mu l mv mw"><em class="kk">dvc commit -f process_data.dvc</em></span></pre><p id="2f18" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">最后，我们可以使用joblib包中的dump方法保存训练好的标准定标器。</p><pre class="iy iz ja jb fd mp mo mq mr aw ms bi"><span id="0160" class="lx la hi mo b fi mt mu l mv mw"><em class="kk"># save the trained scaler<br/></em>joblib.dump(scaler, 'model/mobile_price_scaler.pkl')</span></pre><p id="f25d" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">注意:</strong>我们将在streamlit web应用程序中使用经过培训的缩放器。</p><h2 id="0922" class="lx la hi bd lb ly lz ma lf mb mc md lj jx me mf ll kb mg mh ln kf mi mj lp mk bi translated"><strong class="ak">训练机器学习算法</strong></h2><p id="9ff9" class="pw-post-body-paragraph jo jp hi jq b jr lr ij jt ju ls im jw jx lt jz ka kb lu kd ke kf lv kh ki kj hb bi translated">MLflow是一个很棒的开源机器学习实验包。您可以使用它来打包和部署机器学习项目，但在本文中，我们将专注于它的跟踪API。</p><p id="626a" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我们将使用Dagshub提供的免费跟踪服务器，以便所有MLflow文件都远程保存在存储库中，任何可以访问您的项目的人都可以查看它们。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mz"><img src="../Images/74160814e063700fe20ced90fc99c0dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yjSrPXDY4TkNdiMFJEWX-g.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">screenshot from the Dagshub repository (Author).</figcaption></figure><p id="08ae" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">要将机器学习实验结果发送到跟踪服务器，您需要如下设置跟踪URL、您的Dagshub用户名和密码。</p><p id="d196" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">注意:</strong>您只需要在Dagshub存储库中复制MLflow的远程跟踪URL。</p><pre class="iy iz ja jb fd mp mo mq mr aw ms bi"><span id="1540" class="lx la hi mo b fi mt mu l mv mw"><em class="kk"># using MLflow tracking<br/><br/></em>mlflow.set_tracking_uri("https://dagshub.com/Davisy/Mobile-Price-ML-Classification-Project.mlflow")<br/><br/>os.environ["MLFLOW_TRACKING_USERNAME"] = "username"<br/>os.environ["MLFLOW_TRACKING_PASSWORD"] = "password"</span></pre><p id="790a" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">注:</strong>实验结果将直接记录到<strong class="jq hj">实验选项卡</strong>下的Dagshub存储库中。</p><p id="e882" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">最后，我们需要运行一些机器学习实验。首先，我们从训练集和有效集中分离特征和目标。</p><pre class="iy iz ja jb fd mp mo mq mr aw ms bi"><span id="055d" class="lx la hi mo b fi mt mu l mv mw"><em class="kk"># load the processed data for both train and valid set<br/><br/></em>X_train = train_df[train_df.columns[:-1]]<br/>y_train = train_df['price_range']<br/><br/>X_valid = valid_df[valid_df.columns[:-1]]<br/>y_valid = valid_df['price_range']</span></pre><p id="5cd6" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">第一个实验是在训练集上训练随机森林算法，并在有效性测试上检查性能。</p><pre class="iy iz ja jb fd mp mo mq mr aw ms bi"><span id="dee3" class="lx la hi mo b fi mt mu l mv mw"><em class="kk"># train randomforest algorithm<br/><br/></em>rf_classifier = RandomForestClassifier(n_estimators=200, criterion="gini")<br/><br/><em class="kk">with </em>mlflow.start_run():<br/>    <em class="kk">#train the model<br/>    </em>rf_classifier.fit(X_train, y_train)<br/><br/>    <em class="kk">#make predictions<br/>    </em>y_pred = rf_classifier.predict(X_valid)<br/><br/>    <em class="kk">#check performance<br/>    </em>score = accuracy_score(y_pred, y_valid)<br/><br/>mlflow.end_run()<br/><br/>print(score)</span></pre><p id="a675" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">上述代码块将执行以下任务:</p><ul class=""><li id="a261" class="kl km hi jq b jr js ju jv jx kn kb ko kf kp kj kq kr ks kt bi translated">实例化随机森林算法</li><li id="5cca" class="kl km hi jq b jr ku ju kv jx kw kb kx kf ky kj kq kr ks kt bi translated">开始MLflow运行。</li><li id="5370" class="kl km hi jq b jr ku ju kv jx kw kb kx kf ky kj kq kr ks kt bi translated">训练机器学习模型。</li><li id="d2a7" class="kl km hi jq b jr ku ju kv jx kw kb kx kf ky kj kq kr ks kt bi translated">对验证集进行预测。</li><li id="e539" class="kl km hi jq b jr ku ju kv jx kw kb kx kf ky kj kq kr ks kt bi translated">检查机器学习模型的准确性。</li><li id="2d5b" class="kl km hi jq b jr ku ju kv jx kw kb kx kf ky kj kq kr ks kt bi translated">结束MLflow运行。</li><li id="81da" class="kl km hi jq b jr ku ju kv jx kw kb kx kf ky kj kq kr ks kt bi translated">最后打印机器学习模型的准确率分数。</li></ul><p id="e90f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">随机森林算法的准确度分数为<strong class="jq hj"> 0.895 </strong>。</p><p id="2c50" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">注意:</strong>我们使用<strong class="jq hj"> mlflow.sklearn </strong>中的<strong class="jq hj"> autolog </strong>函数来自动跟踪实验。这意味着它将自动跟踪模型参数、指标、文件和类似的信息。</p><p id="407a" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">您可以更改Randomforest算法的默认参数来运行多个实验，并找出哪些值提供了最佳性能。</p><p id="c8fc" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">让我们尝试使用逻辑回归算法运行另一个实验。</p><pre class="iy iz ja jb fd mp mo mq mr aw ms bi"><span id="b975" class="lx la hi mo b fi mt mu l mv mw"><em class="kk"># train logistic regression algorithm<br/><br/></em>lg_classifier = LogisticRegression(penalty='l2', C=1.0)<br/><br/><em class="kk">with </em>mlflow.start_run():<br/>    <em class="kk">#train the model<br/>    </em>lg_classifier.fit(X_train, y_train)<br/><br/>    <em class="kk">#make predictions<br/>    </em>y_pred = lg_classifier.predict(X_valid)<br/><br/>    <em class="kk">#check performance<br/>    </em>score = accuracy_score(y_pred, y_valid)<br/><br/>mlflow.end_run()<br/><br/>print(score)</span></pre><p id="7819" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">逻辑回归的准确度得分为<strong class="jq hj"> 0.97 </strong>。这种机器学习模型的性能优于随机森林算法。</p><p id="f203" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这是DagsHub上记录的机器学习实验列表，在实验选项卡下。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mz"><img src="../Images/25d09c213adb4e66f3ea6b7a86014e66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8KlS4y8Op5WKWRh4SlRwSw.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Screenshot from the Dagshub repository(Author).</figcaption></figure><p id="ac9e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">Dagshub上的E <strong class="jq hj">实验选项卡</strong>提供了不同的功能来分析实验结果，例如使用不同的指标将一个实验与另一个实验进行比较。</p><p id="7e69" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">您还需要通过运行以下命令来跟踪模型的版本。</p><pre class="iy iz ja jb fd mp mo mq mr aw ms bi"><span id="8682" class="lx la hi mo b fi mt mu l mv mw"><em class="kk">dvc commit -f model.dvc</em></span></pre><h2 id="e52a" class="lx la hi bd lb ly lz ma lf mb mc md lj jx me mf ll kb mg mh ln kf mi mj lp mk bi translated">向MLflow注册最佳模型</h2><p id="e6a9" class="pw-post-body-paragraph jo jp hi jq b jr lr ij jt ju ls im jw jx lt jz ka kb lu kd ke kf lv kh ki kj hb bi translated">我们将使用Mlflow registry来维护和管理机器学习模型的版本。您需要知道产生具有最佳性能的模型的run_id。您可以通过点击实验选项卡中的实验名称((<strong class="jq hj">Ml-分类-实验’</strong>)找到run_id。</p><p id="2ade" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在本例中，逻辑回归模型的run_id为<strong class="jq hj">' 17 CCD 85 B4 C7 e 491 bbdbcba 58 b5 eafae 1 '</strong>。然后使用MLflow中的register_model()函数来执行任务。</p><pre class="iy iz ja jb fd mp mo mq mr aw ms bi"><span id="f3aa" class="lx la hi mo b fi mt mu l mv mw"><em class="kk"># Grab the run ID<br/></em>run_id = '17ccd85b4c7e491bbdbcba58b5eafae1'<br/><br/><em class="kk"># Select a subpath name for the run<br/></em>subpath = "best_model"<br/><br/><em class="kk"># Select a name for the model to be registered<br/></em>model_name = "Logistic Regression Model"<br/><br/><em class="kk"># build the run URI<br/></em>run_uri = f'runs:/{run_id}/{subpath}'<br/><br/><em class="kk"># register the model<br/></em>model_version = mlflow.register_model(run_uri, model_name)</span></pre><p id="80c6" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">输出:</p><pre class="iy iz ja jb fd mp mo mq mr aw ms bi"><span id="9377" class="lx la hi mo b fi mt mu l mv mw">Successfully registered model 'Logistic Regression Model'.<br/>2022/11/10 00:22:33 INFO mlflow.tracking._model_registry.client: Waiting up to 300 seconds for model version to finish creation.                     Model name: Logistic Regression Model, version 1<br/>Created version '1' of model 'Logistic Regression Model'.</span></pre><h1 id="abe6" class="kz la hi bd lb lc ld le lf lg lh li lj io lk ip ll ir lm is ln iu lo iv lp lq bi translated">使用Streamlit在MLflow中部署日志模型</h1><p id="107f" class="pw-post-body-paragraph jo jp hi jq b jr lr ij jt ju ls im jw jx lt jz ka kb lu kd ke kf lv kh ki kj hb bi translated">Streamlit是一个开源Python工具包，用于构建和共享数据科学web应用程序。您可以使用streamlit通过几行代码在短时间内部署您的数据科学解决方案。</p><p id="2b04" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">Streamlit可以轻松地与著名的python库集成，如NumPy、Pandas、Matplotlib、Scikit-learn和数据科学中的其他库。</p><p id="eb61" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在这一部分，我们将在MLflow <strong class="jq hj">(逻辑回归模型)</strong>中部署记录的模型，以便对手机的价格范围进行分类。</p><h2 id="67ed" class="lx la hi bd lb ly lz ma lf mb mc md lj jx me mf ll kb mg mh ln kf mi mj lp mk bi translated">创建app.py文件</h2><p id="c9e8" class="pw-post-body-paragraph jo jp hi jq b jr lr ij jt ju ls im jw jx lt jz ka kb lu kd ke kf lv kh ki kj hb bi translated">第一步是创建一个名为<strong class="jq hj"> app.py </strong>的python文件，其中包含运行数据科学web应用程序的所有源代码。</p><h2 id="796a" class="lx la hi bd lb ly lz ma lf mb mc md lj jx me mf ll kb mg mh ln kf mi mj lp mk bi translated">导入包</h2><p id="5d7e" class="pw-post-body-paragraph jo jp hi jq b jr lr ij jt ju ls im jw jx lt jz ka kb lu kd ke kf lv kh ki kj hb bi translated">然后，您需要导入包来运行streamlit和最佳训练模型。</p><pre class="iy iz ja jb fd mp mo mq mr aw ms bi"><span id="fc27" class="lx la hi mo b fi mt mu l mv mw"><em class="kk"># import packages<br/>import </em>streamlit <em class="kk">as </em>st<br/><em class="kk">import </em>pandas <em class="kk">as </em>pd<br/><em class="kk">import </em>numpy <em class="kk">as </em>np<br/><em class="kk">from </em>os.path <em class="kk">import </em>dirname, join, realpath<br/><em class="kk">import </em>joblib</span></pre><h2 id="4fae" class="lx la hi bd lb ly lz ma lf mb mc md lj jx me mf ll kb mg mh ln kf mi mj lp mk bi translated"><strong class="ak">创建应用标题和描述</strong></h2><p id="b031" class="pw-post-body-paragraph jo jp hi jq b jr lr ij jt ju ls im jw jx lt jz ka kb lu kd ke kf lv kh ki kj hb bi translated">您可以使用streamlit中的三种不同方法为您的data science web应用程序设置<em class="kk">标题、图像和子标题</em>，这三种方法分别名为<strong class="jq hj"> header() </strong>、<strong class="jq hj"> image() </strong>和<strong class="jq hj"> subheader() </strong>，如下面的代码所示。</p><pre class="iy iz ja jb fd mp mo mq mr aw ms bi"><span id="af57" class="lx la hi mo b fi mt mu l mv mw"><em class="kk"># add banner image<br/></em>st.header("Mobile Price Prediction")<br/>st.image("images/phones.jpg")<br/>st.subheader(<br/>    """<br/>A simple machine learning app to  classify mobile price range<br/>"""<br/>)</span></pre><h2 id="e35e" class="lx la hi bd lb ly lz ma lf mb mc md lj jx me mf ll kb mg mh ln kf mi mj lp mk bi translated"><strong class="ak">创建一个接收手机详细信息的表单</strong></h2><p id="9972" class="pw-post-body-paragraph jo jp hi jq b jr lr ij jt ju ls im jw jx lt jz ka kb lu kd ke kf lv kh ki kj hb bi translated">我们需要一个简单的形式，将接收移动细节，以便进行预测。Streamlit有一个叫做<strong class="jq hj"> form() </strong>的方法，可以帮助你创建一个包含不同字段的表单，比如<em class="kk">数字、多选、文本和其他</em>。</p><pre class="iy iz ja jb fd mp mo mq mr aw ms bi"><span id="5831" class="lx la hi mo b fi mt mu l mv mw"><em class="kk"># form to collect mobile phone details<br/></em>my_form = st.form(key="mobile_form")<br/><br/><br/>@st.cache<br/><em class="kk"># function to transform Yes and No options<br/>def </em>func(value):<br/>    <em class="kk">if </em>value == 1:<br/>        <em class="kk">return </em>"Yes"<br/>    <em class="kk">else</em>:<br/>        <em class="kk">return </em>"No"<br/><br/><br/>battery_power = my_form.number_input(<br/>    "Total energy a battery can store in one time measured in mAh", min_value=500<br/>)<br/>blue = my_form.selectbox("Has bluetooth or not", (0, 1), format_func=func)<br/><br/>clock_speed = my_form.number_input(<br/>    "speed at which microprocessor executes instructions", min_value=1<br/>)<br/><br/>dual_sim = my_form.selectbox("Has dual sim support or not", (0, 1), format_func=func)<br/><br/>fc = my_form.number_input(<br/>    "Front Camera mega pixels", min_value=0<br/>)<br/><br/>four_g = my_form.selectbox("Has 4G or not", (0, 1), format_func=func)<br/><br/>int_memory = my_form.number_input(<br/>    "Internal Memory in Gigabytes", min_value=2<br/>)<br/><br/>m_dep = my_form.number_input(<br/>    "Mobile Depth in cm", min_value=0<br/>)<br/><br/>mobile_wt = my_form.number_input(<br/>    "Weight of mobile phone", min_value=80<br/>)<br/><br/>n_cores = my_form.number_input(<br/>    "Number of cores of processor", min_value=1<br/>)<br/>pc = my_form.number_input(<br/>    "Primary Camera mega pixels", min_value=0<br/>)<br/><br/>px_height = my_form.number_input(<br/>    "Pixel Resolution Height", min_value=0<br/>)<br/><br/>px_width = my_form.number_input(<br/>    "Pixel Resolution Width", min_value=0<br/>)<br/><br/>ram = my_form.number_input(<br/>    "Random Access Memory in Mega Bytes", min_value=256<br/>)<br/><br/>sc_h = my_form.number_input(<br/>    "Screen Height of mobile in cm", min_value=5<br/>)<br/><br/>sc_w = my_form.number_input(<br/>    "Screen Width of mobile in cm", min_value=0<br/>)<br/><br/>talk_time = my_form.number_input(<br/>    "longest time that a single battery charge will last when you are", min_value=2<br/>)<br/><br/>three_g = my_form.selectbox("Has 3G or not", (0, 1), format_func=func)<br/><br/>touch_screen = my_form.selectbox("Has touch screen or not", (0, 1), format_func=func)<br/><br/>wifi = my_form.selectbox("Has wifi or not", (0, 1), format_func=func)<br/><br/>submit = my_form.form_submit_button(label="make prediction")</span></pre><p id="bf7f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">上面的代码块包含了填写手机详细信息的所有字段和一个简单的按钮<strong class="jq hj">提交</strong>详细信息，然后进行预测。</p><h2 id="5397" class="lx la hi bd lb ly lz ma lf mb mc md lj jx me mf ll kb mg mh ln kf mi mj lp mk bi translated">在MLflow和Scaler中加载日志模型</h2><p id="c239" class="pw-post-body-paragraph jo jp hi jq b jr lr ij jt ju ls im jw jx lt jz ka kb lu kd ke kf lv kh ki kj hb bi translated">然后，您需要加载MLflow模型中用于预测的记录模型和用于输入转换的缩放器。joblib包中的<strong class="jq hj"> load() </strong>方法将执行该任务。</p><pre class="iy iz ja jb fd mp mo mq mr aw ms bi"><span id="2ae9" class="lx la hi mo b fi mt mu l mv mw"># load the mlflow registered model and scaler<br/>mlflow_model_path = "mlruns/1/17ccd85b4c7e491bbdbcba58b5eafae1/artifacts/model/model.pkl"</span><span id="b428" class="lx la hi mo b fi mx mu l mv mw">with open(<br/>        join(dirname(realpath(__file__)), mlflow_model_path),<br/>        "rb",<br/>) as f:<br/>    model = joblib.load(f)</span><span id="285e" class="lx la hi mo b fi mx mu l mv mw">scaler_path  = "model/mobile_price_scaler.pkl"<br/>with open(join(dirname(realpath(__file__)), scaler_path ), "rb") as f:<br/>    scaler = joblib.load(f)</span></pre><h2 id="14e2" class="lx la hi bd lb ly lz ma lf mb mc md lj jx me mf ll kb mg mh ln kf mi mj lp mk bi translated">创建结果字典</h2><p id="ea41" class="pw-post-body-paragraph jo jp hi jq b jr lr ij jt ju ls im jw jx lt jz ka kb lu kd ke kf lv kh ki kj hb bi translated">经过训练的模型会将输出预测成数字(<em class="kk"> 0、1、2或3 </em>)。为了更好的用户体验，我们可以使用下面的字典来呈现实际含义。</p><pre class="iy iz ja jb fd mp mo mq mr aw ms bi"><span id="fd31" class="lx la hi mo b fi mt mu l mv mw"><em class="kk"># result dictionary<br/></em>result_dict = {<br/>    0: "Low Cost",<br/>    1: "Medium Cost",<br/>    2: "High Cost",<br/>    3: "Very High Cost",<br/>}</span></pre><h2 id="7254" class="lx la hi bd lb ly lz ma lf mb mc md lj jx me mf ll kb mg mh ln kf mi mj lp mk bi translated"><strong class="ak">进行预测并显示结果</strong></h2><p id="7754" class="pw-post-body-paragraph jo jp hi jq b jr lr ij jt ju ls im jw jx lt jz ka kb lu kd ke kf lv kh ki kj hb bi translated">我们的最后一个代码块是当用户添加手机信息并点击表单部分的“<strong class="jq hj"> make prediction </strong>”按钮时，进行预测并显示结果。</p><p id="c40a" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">点击按钮后，web应用程序将执行以下任务:</p><ul class=""><li id="daa4" class="kl km hi jq b jr js ju jv jx kn kb ko kf kp kj kq kr ks kt bi translated">收集所有输入(手机详细信息)。</li><li id="07e3" class="kl km hi jq b jr ku ju kv jx kw kb kx kf ky kj kq kr ks kt bi translated">为输入创建一个数据框架。</li><li id="669d" class="kl km hi jq b jr ku ju kv jx kw kb kx kf ky kj kq kr ks kt bi translated">使用定标器转换输入。</li><li id="2714" class="kl km hi jq b jr ku ju kv jx kw kb kx kf ky kj kq kr ks kt bi translated">对转换后的输入执行预测。</li><li id="aabf" class="kl km hi jq b jr ku ju kv jx kw kb kx kf ky kj kq kr ks kt bi translated">根据结果字典(result_dict)显示移动价格的结果。</li></ul><pre class="iy iz ja jb fd mp mo mq mr aw ms bi"><span id="37b9" class="lx la hi mo b fi mt mu l mv mw"><em class="kk">if </em>submit:<br/>    <em class="kk"># collect inputs<br/>    </em>input = {<br/>        'battery_power': battery_power,<br/>        'blue': blue,<br/>        'clock_speed': clock_speed,<br/>        'dual_sim': dual_sim,<br/>        'fc': fc,<br/>        'four_g': four_g,<br/>        'int_memory': int_memory,<br/>        'm_dep': m_dep,<br/>        'mobile_wt': mobile_wt,<br/>        'n_cores': n_cores,<br/>        'pc': pc,<br/>        'px_height': px_height,<br/>        'px_width': px_width,<br/>        'ram': ram,<br/>        'sc_h': sc_h,<br/>        'sc_w': sc_w,<br/>        'talk_time': talk_time,<br/>        'three_g': three_g,<br/>        'touch_screen': touch_screen,<br/>        'wifi': wifi,<br/>    }<br/><br/>    <em class="kk"># create a dataframe<br/>    </em>data = pd.DataFrame(input, index=[0])<br/><br/>    <em class="kk"># transform input<br/>    </em>data_scaled = scaler.transform(data)<br/><br/>    <em class="kk"># perform prediction<br/>    </em>prediction = model.predict(data_scaled)<br/>    output = int(prediction[0])<br/><br/>    <em class="kk"># Display results of the Mobile price prediction<br/>    </em>st.header("Results")<br/>    st.write(" Price range is {} ".format(result_dict[output]))</span></pre><h2 id="f335" class="lx la hi bd lb ly lz ma lf mb mc md lj jx me mf ll kb mg mh ln kf mi mj lp mk bi translated">测试数据科学Web应用程序</h2><p id="f4b5" class="pw-post-body-paragraph jo jp hi jq b jr lr ij jt ju ls im jw jx lt jz ka kb lu kd ke kf lv kh ki kj hb bi translated">我们已经成功创建了一个简单的web应用程序，用于在MLflow中部署记录的模型并预测价格范围。</p><p id="e5dc" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">要运行web应用程序，您需要在终端中使用以下命令。</p><pre class="iy iz ja jb fd mp mo mq mr aw ms bi"><span id="c074" class="lx la hi mo b fi mt mu l mv mw">streamlit run app.py</span></pre><p id="4bc0" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">然后，web应用程序将立即出现在您的web浏览器中，或者您可以使用本地URL<a class="ae jn" href="http://localhost:8501" rel="noopener ugc nofollow" target="_blank">http://localhost:8501</a>访问它。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es na"><img src="../Images/7017055dea42481807ec32523ba5d922.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dHMH-KV0We3kKYxPMfNQqw.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Screenshot from the web app (Author).</figcaption></figure><p id="dfff" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">您需要填写手机详细信息，然后单击“进行预测”按钮查看预测结果。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es na"><img src="../Images/5784fcfa8161ac25af72b86a50b877cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RB8HCexvvtRf5WVCjl5n6A.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Screenshot from the Streamlit Web app (Author).</figcaption></figure><p id="32dc" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在填写移动细节并点击“进行预测”按钮后，机器学习模型预测价格范围为<strong class="jq hj">非常高的成本。</strong></p><h2 id="b8c2" class="lx la hi bd lb ly lz ma lf mb mc md lj jx me mf ll kb mg mh ln kf mi mj lp mk bi translated">在细流云中部署细流Web应用</h2><p id="b408" class="pw-post-body-paragraph jo jp hi jq b jr lr ij jt ju ls im jw jx lt jz ka kb lu kd ke kf lv kh ki kj hb bi translated">最后一步是确保streamlit应用程序可供任何想要访问它的人使用，并使用我们的机器学习模型来预测移动价格范围。</p><p id="41ff" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">Streamlit cloud允许您在云上免费部署streamlit web应用程序。您只需遵循以下步骤:</p><ol class=""><li id="a4d6" class="kl km hi jq b jr js ju jv jx kn kb ko kf kp kj nb kr ks kt bi translated">在GitHub上创建一个新的GitHub资源库</li><li id="cc5d" class="kl km hi jq b jr ku ju kv jx kw kb kx kf ky kj nb kr ks kt bi translated">添加您的streamlit web应用程序(app.py)、模型文件夹和requirements.txt。</li><li id="dbe4" class="kl km hi jq b jr ku ju kv jx kw kb kx kf ky kj nb kr ks kt bi translated">在<a class="ae jn" href="https://streamlit.io/cloud" rel="noopener ugc nofollow" target="_blank"> streamlit云平台</a>上创建您的帐户</li><li id="cd62" class="kl km hi jq b jr ku ju kv jx kw kb kx kf ky kj nb kr ks kt bi translated">创建一个新的应用程序，然后通过键入资源库的名称来链接您创建的GitHub资源库。</li><li id="774d" class="kl km hi jq b jr ku ju kv jx kw kb kx kf ky kj nb kr ks kt bi translated">将streamlit app文件名从<strong class="jq hj"> streamlit_app.py </strong>更改为<strong class="jq hj"> app.py </strong></li><li id="375b" class="kl km hi jq b jr ku ju kv jx kw kb kx kf ky kj nb kr ks kt bi translated">最后，单击部署按钮。</li></ol><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nc"><img src="../Images/7c309444e725de790a0493dfca75893b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E5oCClPdsgchLxBP7R_bEA.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">screenshot from Streamlit Cloud.Image from Author (Author).</figcaption></figure><p id="5032" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在streamlit cloud完成安装streamlit应用程序及其所有先决条件后，您的应用程序将最终上线，任何人都可以通过streamlit cloud提供的链接进行访问。</p><p id="8fe8" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">链接:</strong><a class="ae jn" href="https://davisy--mobile-price-predecition-streamlit-app-app-7clkzd.streamlit.app/" rel="noopener ugc nofollow" target="_blank">https://davisy-mobile-price-pre detection-streamlit-app-app-7 clk ZD . streamlit . app/</a></p><h1 id="73e5" class="kz la hi bd lb lc ld le lf lg lh li lj io lk ip ll ir lm is ln iu lo iv lp lq bi translated">结论</h1><p id="875d" class="pw-post-body-paragraph jo jp hi jq b jr lr ij jt ju ls im jw jx lt jz ka kb lu kd ke kf lv kh ki kj hb bi translated">您已经获得了使用数据版本控制(DVC)进行数据和模型跟踪的专业知识，以及使用MLflow和DagsHub跟踪机器学习实验的专业知识。你可以和全世界分享你的机器学习实验的结果，包括成功的和失败的。您还获得了强大的工具，可以帮助您有效地组织您的机器学习项目。</p><p id="a7b9" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在本教程中，您已经学习了:</p><ul class=""><li id="fad1" class="kl km hi jq b jr js ju jv jx kn kb ko kf kp kj kq kr ks kt bi translated">如何创建您的第一个Daghubs存储库。</li><li id="8c69" class="kl km hi jq b jr ku ju kv jx kw kb kx kf ky kj kq kr ks kt bi translated">如何使用数据版本控制(DVC)跟踪您的数据并连接到Dagshub DVC遥控器。</li><li id="eb13" class="kl km hi jq b jr ku ju kv jx kw kb kx kf ky kj kq kr ks kt bi translated">如何使用MLflow的自动日志类自动跟踪机器学习实验？</li><li id="433c" class="kl km hi jq b jr ku ju kv jx kw kb kx kf ky kj kq kr ks kt bi translated">如何将MLflow连接到DagsHub中的远程跟踪服务器。</li><li id="0ddb" class="kl km hi jq b jr ku ju kv jx kw kb kx kf ky kj kq kr ks kt bi translated">如何使用Streamlit为您的机器学习模型创建数据科学web应用程序。</li></ul><p id="cf22" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">你可以在这里下载本文用到的源代码:<a class="ae jn" href="https://dagshub.com/Davisy/Mobile-Price-ML-Classification-Project" rel="noopener ugc nofollow" target="_blank">https://dagshub . com/Davisy/Mobile-Price-ML-class ification-Project</a></p><p id="f8ca" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果你学到了新的东西或者喜欢阅读本教程，请分享给其他人看。在那之前，下一篇文章再见！</p><p id="0fc0" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">你也可以在Twitter上找到我，地址是<a class="ae jn" href="https://twitter.com/Davis_McDavid?ref=hackernoon.com" rel="noopener ugc nofollow" target="_blank"> @Davis_McDavid </a>。</p><p id="9805" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><em class="kk">最后一件事:在以下链接中阅读更多类似的文章</em></p><div class="nd ne ez fb nf ng"><a href="https://python.plainenglish.io/how-to-web-scrape-using-python-snscrape-harperdb-56c53cac876e" rel="noopener  ugc nofollow" target="_blank"><div class="nh ab dw"><div class="ni ab nj cl cj nk"><h2 class="bd hj fi z dy nl ea eb nm ed ef hh bi translated">如何使用Python、Snscrape和HarperDB进行网络抓取</h2><div class="nn l"><h3 class="bd b fi z dy nl ea eb nm ed ef dx translated">使用HarperDB将抓取的数据自动存储在数据库中</h3></div><div class="no l"><p class="bd b fp z dy nl ea eb nm ed ef dx translated">python .平原英语. io</p></div></div><div class="np l"><div class="nq l nr ns nt np nu jh ng"/></div></div></a></div><div class="nd ne ez fb nf ng"><a href="https://python.plainenglish.io/how-to-create-an-engaging-readme-for-your-data-science-project-on-github-30fb5d334702" rel="noopener  ugc nofollow" target="_blank"><div class="nh ab dw"><div class="ni ab nj cl cj nk"><h2 class="bd hj fi z dy nl ea eb nm ed ef hh bi translated">如何在Github上为您的数据科学项目创建引人入胜的自述文件</h2><div class="nn l"><h3 class="bd b fi z dy nl ea eb nm ed ef dx translated">自述文件是开发人员访问您托管在…上的数据科学项目时首先要检查的项目</h3></div><div class="no l"><p class="bd b fp z dy nl ea eb nm ed ef dx translated">python .平原英语. io</p></div></div><div class="np l"><div class="nv l nr ns nt np nu jh ng"/></div></div></a></div><div class="nd ne ez fb nf ng"><a href="https://towardsdatascience.com/how-to-perform-data-augmentation-in-nlp-projects-5c4b86c25035" rel="noopener follow" target="_blank"><div class="nh ab dw"><div class="ni ab nj cl cj nk"><h2 class="bd hj fi z dy nl ea eb nm ed ef hh bi translated">如何在NLP项目中执行数据扩充</h2><div class="nn l"><h3 class="bd b fi z dy nl ea eb nm ed ef dx translated">利用文本攻击库进行数据扩充的简单方法</h3></div><div class="no l"><p class="bd b fp z dy nl ea eb nm ed ef dx translated">towardsdatascience.com</p></div></div><div class="np l"><div class="nw l nr ns nt np nu jh ng"/></div></div></a></div><p id="0ec0" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><em class="kk">本文首发</em> <a class="ae jn" href="https://hackernoon.com/mobile-price-classification-an-open-source-data-science-project-with-dagshub" rel="noopener ugc nofollow" target="_blank"> <em class="kk">此处</em> </a> <em class="kk">。</em></p></div></div>    
</body>
</html>