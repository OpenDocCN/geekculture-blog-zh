<html>
<head>
<title>Use Inheritance Concepts in Enemy Behaviour Scripting</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在敌方行为脚本中使用继承概念</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/use-inheritance-concepts-in-enemy-behaviour-scripting-16acea09b3c9?source=collection_archive---------18-----------------------#2021-12-07">https://medium.com/geekculture/use-inheritance-concepts-in-enemy-behaviour-scripting-16acea09b3c9?source=collection_archive---------18-----------------------#2021-12-07</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/37c32c16f6ac0b7cf19e082c3926e91e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1350/1*LiimmbGePsKAXhJ7GaAxxA.gif"/></div></figure><p id="52fa" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">目标</strong>:将继承概念应用到敌方行为脚本中</p><p id="d5a4" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在这篇文章中，我将向你展示我如何将<strong class="io hj">继承</strong>应用到敌人行为的脚本中。</p><p id="175f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">让我们跳过我创建和动画敌人模型的部分。没意思。让我们深入研究代码。</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div class="er es jk"><img src="../Images/bdbac39de01d2dce13b0a34c5e6a2d07.png" data-original-src="https://miro.medium.com/v2/resize:fit:830/format:webp/1*JxAQM3830KR_0cTihirkMg.png"/></div></figure><p id="434b" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">为了保持脚本的整洁，我使用了预处理指令符号#来创建<strong class="io hj">区域</strong>:</p><pre class="jl jm jn jo fd jp jq jr js aw jt bi"><span id="0340" class="ju jv hi jq b fi jw jx l jy jz">#region myregion<br/>//code<br/>#endregion</span></pre><p id="59f4" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">敌人将会是一个抽象的类并且会有:</p><ol class=""><li id="58fe" class="ka kb hi io b ip iq it iu ix kc jb kd jf ke jj kf kg kh ki bi translated">统计数据——如速度等。</li><li id="d52c" class="ka kb hi io b ip kj it kk ix kl jb km jf kn jj kf kg kh ki bi translated"><strong class="io hj">巡视变量</strong> —需要对其巡视行为进行编码</li><li id="6bd0" class="ka kb hi io b ip kj it kk ix kl jb km jf kn jj kf kg kh ki bi translated"><strong class="io hj">模型变量</strong> —需要访问sprite和animator</li><li id="d191" class="ka kb hi io b ip kj it kk ix kl jb km jf kn jj kf kg kh ki bi translated"><strong class="io hj">属性</strong></li><li id="c43e" class="ka kb hi io b ip kj it kk ix kl jb km jf kn jj kf kg kh ki bi translated"><strong class="io hj">常用方法</strong> —如启动和更新</li><li id="d399" class="ka kb hi io b ip kj it kk ix kl jb km jf kn jj kf kg kh ki bi translated"><strong class="io hj">巡视逻辑</strong></li><li id="d5f4" class="ka kb hi io b ip kj it kk ix kl jb km jf kn jj kf kg kh ki bi translated"><strong class="io hj">巡逻公用设施</strong></li></ol><p id="ea56" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">抽象类不能有实例。唯一的方法是定义扩展抽象类的非抽象类:它们可以有实例。</p><p id="4b4a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在父子关系中，最好记住访问修饰符关键字的含义</p><ul class=""><li id="a4c8" class="ka kb hi io b ip iq it iu ix kc jb kd jf ke jj ko kg kh ki bi translated">私人的:只能从班级内部进入，甚至连孩子都不允许进入</li><li id="0fa2" class="ka kb hi io b ip kj it kk ix kl jb km jf kn jj ko kg kh ki bi translated"><strong class="io hj"> public </strong>:可从类外访问:孩子和不相关的类都可以访问</li><li id="f3c5" class="ka kb hi io b ip kj it kk ix kl jb km jf kn jj ko kg kh ki bi translated"><strong class="io hj">受保护的</strong>:可从类内部和派生类中访问</li></ul><h2 id="eab4" class="ju jv hi bd kp kq kr ks kt ku kv kw kx ix ky kz la jb lb lc ld jf le lf lg lh bi translated">常用方法</h2><figure class="jl jm jn jo fd ij"><div class="bz dy l di"><div class="li lj l"/></div></figure><p id="3dcd" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这里重要的是<code class="du lk ll lm jq b">abstract</code>和<code class="du lk ll lm jq b">virtual</code>方法关键字的使用。</p><p id="6e40" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">抽象</strong>用于只有一个方法签名:它将由扩展类来实现逻辑，被迫这样做。</p><p id="211d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">另一方面，虚拟的</strong>用于定义方法中的基本行为，并允许子类覆盖它:没有这个关键字的方法不能在子类中被<strong class="io hj">覆盖</strong>。</p><p id="1b74" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">Update没有基本行为，它留给了子类，Start用于初始化我们需要的东西。</p><h2 id="6897" class="ju jv hi bd kp kq kr ks kt ku kv kw kx ix ky kz la jb lb lc ld jf le lf lg lh bi translated">巡逻</h2><p id="f35e" class="pw-post-body-paragraph im in hi io b ip ln ir is it lo iv iw ix lp iz ja jb lq jd je jf lr jh ji jj hb bi translated">这个特性的核心逻辑摘自我为一个<a class="ae ls" href="https://danio-quero.medium.com/moving-platform-abb47d7a07ca" rel="noopener">移动平台特性</a>写的另一篇文章。</p><figure class="jl jm jn jo fd ij"><div class="bz dy l di"><div class="li lj l"/></div></figure><p id="d97d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这种行为，分解成它的成分，无非是:</p><ol class=""><li id="c6c0" class="ka kb hi io b ip iq it iu ix kc jb kd jf ke jj kf kg kh ki bi translated">检查当前位置是否等于当前目标航路点的位置</li><li id="2e5c" class="ka kb hi io b ip kj it kk ix kl jb km jf kn jj kf kg kh ki bi translated">如果是，检查该航路点是第一个还是最后一个→在空闲模式下等待一段时间</li><li id="f4f3" class="ka kb hi io b ip kj it kk ix kl jb km jf kn jj kf kg kh ki bi translated">如果没有，等待一段时间，但只有在该选项启用时(在每个中间航路点等待)</li><li id="c9ec" class="ka kb hi io b ip kj it kk ix kl jb km jf kn jj kf kg kh ki bi translated">最后，设定新的目标</li><li id="5860" class="ka kb hi io b ip kj it kk ix kl jb km jf kn jj kf kg kh ki bi translated">移动到目标</li></ol><p id="9986" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">patrol方法是受保护的，所以子类可以从update方法或协程中调用它。</p><h2 id="9bc5" class="ju jv hi bd kp kq kr ks kt ku kv kw kx ix ky kz la jb lb lc ld jf le lf lg lh bi translated">闲置的</h2><figure class="jl jm jn jo fd ij"><div class="bz dy l di"><div class="li lj l"/></div></figure><p id="5ea4" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">空闲的协程被认为能够<strong class="io hj">暂停巡逻</strong>，即使是从一个不可能让步的更新方法。</p><p id="8e37" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">为了暂停巡逻，速度被设置为零，然后在一段时间后恢复。空闲动画从这里开始播放，是敌人的<strong class="io hj">行走动画</strong><strong class="io hj">默认</strong>状态。</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div class="er es lt"><img src="../Images/3c04b854a1574ef9e3801c51a35f1b25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1284/format:webp/1*IN_vHXVC5G8eaDJFOrg__Q.png"/></div></figure><h2 id="7b65" class="ju jv hi bd kp kq kr ks kt ku kv kw kx ix ky kz la jb lb lc ld jf le lf lg lh bi translated">活动</h2><figure class="jl jm jn jo fd ij"><div class="bz dy l di"><div class="li lj l"/></div></figure><p id="f288" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">通过<strong class="io hj">move forward</strong>方法执行移动，要求当前位置、目标位置和最小步长。后者可能与速度有关。</p><blockquote class="lu lv lw"><p id="1cd0" class="im in lx io b ip iq ir is it iu iv iw ly iy iz ja lz jc jd je ma jg jh ji jj hb bi translated">别误会我的意思！</p></blockquote><p id="ad98" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这里我们也检查我们是否需要翻转精灵。有一个速度检查，但没有得到它的迹象！我们正在检查敌人是在移动(速度&gt; 0)还是在闲置(速度= 0):精灵只有在行走状态下才需要翻转！</p><h2 id="205e" class="ju jv hi bd kp kq kr ks kt ku kv kw kx ix ky kz la jb lb lc ld jf le lf lg lh bi translated">下一个目标</h2><figure class="jl jm jn jo fd ij"><div class="bz dy l di"><div class="li lj l"/></div></figure><p id="baa2" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">当在第一个路点时，路点列表必须以自然顺序行走。当到达最后一个航路点时，顺序相反。</p><h2 id="5d2b" class="ju jv hi bd kp kq kr ks kt ku kv kw kx ix ky kz la jb lb lc ld jf le lf lg lh bi translated">翻转精灵</h2><figure class="jl jm jn jo fd ij"><div class="bz dy l di"><div class="li lj l"/></div></figure><p id="fb27" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">Flip是SpriteRender组件中的一个布尔值。如果敌人从右向左移动，也就是说，如果目标的当前位置在右边，我们必须翻转精灵。</p><h2 id="5fff" class="ju jv hi bd kp kq kr ks kt ku kv kw kx ix ky kz la jb lb lc ld jf le lf lg lh bi translated">其他检查</h2><p id="7265" class="pw-post-body-paragraph im in hi io b ip ln ir is it lo iv iw ix lp iz ja jb lq jd je jf lr jh ji jj hb bi translated">可以参考<a class="ae ls" href="https://danio-quero.medium.com/moving-platform-abb47d7a07ca" rel="noopener">移动平台</a>文章或者<a class="ae ls" href="https://github.com/daniele-quero/dungeon-escape" rel="noopener ugc nofollow" target="_blank">我的git hub repo </a>。</p><h2 id="e9e3" class="ju jv hi bd kp kq kr ks kt ku kv kw kx ix ky kz la jb lb lc ld jf le lf lg lh bi translated">继承卑鄙的行为</h2><figure class="jl jm jn jo fd ij"><div class="bz dy l di"><div class="li lj l"/></div></figure><p id="6c37" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">苔藓巨人延伸敌人，会<strong class="io hj">继承</strong>一堆东西。它必须实现Update方法的逻辑，它将调用patrol例程。它<strong class="io hj">覆盖了</strong>start方法，并且(目前)只调用基本实现。</p><p id="2185" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">从那里我们有一个开放的道路，以具体的脚本的苔藓巨人，这将是不同于任何其他敌人，除了继承的代码！</p><h2 id="32ac" class="ju jv hi bd kp kq kr ks kt ku kv kw kx ix ky kz la jb lb lc ld jf le lf lg lh bi translated">诱人的结果</h2><figure class="jl jm jn jo fd ij er es paragraph-image"><div class="er es if"><img src="../Images/37c32c16f6ac0b7cf19e082c3926e91e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1350/1*LiimmbGePsKAXhJ7GaAxxA.gif"/></div></figure><figure class="jl jm jn jo fd ij er es paragraph-image"><div class="er es mb"><img src="../Images/69c1a2d02d043e33f3160a24201356eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1368/1*kdb8PVPf_2vCLFx5v9F7SA.gif"/></div></figure><p id="c315" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">如果你喜欢这篇文章，请鼓掌并分享！<br/>也看看我的其他游戏或者我的支持页面！</p><figure class="jl jm jn jo fd ij er es paragraph-image"><a href="https://danioquero.itch.io/"><div class="er es mc"><img src="../Images/dcf4d4b1f490c7140043d8f0460f4aff.png" data-original-src="https://miro.medium.com/v2/resize:fit:566/format:webp/1*OxQOMsD-vlGrfHyGJ7713w.jpeg"/></div></a></figure><figure class="jl jm jn jo fd ij er es paragraph-image"><a href="https://ko-fi.com/danioquero"><div class="er es md"><img src="../Images/99eb2091d096af2a73a26040fdfa987a.png" data-original-src="https://miro.medium.com/v2/resize:fit:916/format:webp/1*VZjq00d2Oe78qpu6tJNvfA@2x.png"/></div></a></figure></div></div>    
</body>
</html>