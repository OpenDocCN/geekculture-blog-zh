<html>
<head>
<title>Introduction to AWS: EC2, related services, and AWS through the CLI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">AWS简介:EC2、相关服务和通过CLI的AWS</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/introduction-to-aws-ec2-related-services-and-cli-cfbae53c3409?source=collection_archive---------24-----------------------#2021-07-26">https://medium.com/geekculture/introduction-to-aws-ec2-related-services-and-cli-cfbae53c3409?source=collection_archive---------24-----------------------#2021-07-26</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="a04c" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">相关的服务有弹性块存储、负载平衡和自动伸缩</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/6a145d01984ed89b1e3dadc4327e345f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eIk_Z-BnEk2kXnOTBgfaxA.png"/></div></div></figure><p id="a51c" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在<a class="ae kf" href="https://cupofcode.blog/aws-iam-cloudfront-s3/" rel="noopener ugc nofollow" target="_blank">之前的博文</a>中，我提到AWS服务相互依赖，这使得很难决定以何种顺序呈现它们。</p><p id="5b37" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">AWS的大明星，所有教程都提到的那个，是EC2，所以我们就从那里开始。这会很有趣的！</p><p id="2dd1" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">让我们看一个有趣的迷因，然后马上投入进去！</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es kg"><img src="../Images/79dded27d919ec210dd9370733a5b6d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*_2fONxBvOShM4zpNUsM0Ig.png"/></div></figure></div><div class="ab cl kh ki gp kj" role="separator"><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km"/></div><div class="hb hc hd he hf"><h1 id="38f3" class="ko kp hi bd kq kr ks kt ku kv kw kx ky io kz ip la ir lb is lc iu ld iv le lf bi translated">EC2 —弹性计算云</h1><h2 id="227f" class="lg kp hi bd kq lh li lj ku lk ll lm ky js ln lo la jw lp lq lc ka lr ls le lt bi translated">实例类型、定价模型和实际操作示例</h2><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/fa298068c6db6b45ae6a3e0925cd5820.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fBKAwDoaoOrrha2Fs5yE0A.png"/></div></div></figure><p id="0bb7" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><em class="lu">弹性计算云(EC2) </em>是云中的虚拟服务器。Amazon EC2将获取和启动新服务器实例所需的时间缩短到了几分钟，使您能够随着计算需求的变化快速上下扩展容量。</p><p id="9a37" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">一个常见的错误是认为EC2是无服务器的。实际上，EC2是一个基于计算的服务，这意味着它是一个服务器！所以不是无服务器。</p><p id="2c51" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">请注意，您应该总是针对故障进行设计，并且在每个AZ中有一个EC2实例。还记得AZ是什么吗？我们在<a class="ae kf" href="https://cupofcode.blog/cloud-computing-and-aws/" rel="noopener ugc nofollow" target="_blank">的第一篇博文</a>中谈到了这个问题。</p><h2 id="8e7e" class="lg kp hi bd kq lh li lj ku lk ll lm ky js ln lo la jw lp lq lc ka lr ls le lt bi translated">EC2实例类型</h2><p id="0886" class="pw-post-body-paragraph jj jk hi jl b jm lv ij jo jp lw im jr js lx ju jv jw ly jy jz ka lz kc kd ke hb bi translated">Amazon EC2提供了广泛的实例类型选择，并针对不同的目的进行了优化。实例类型包括CPU、内存、存储和网络容量的各种组合，使您可以灵活地为您的应用程序选择适当的资源组合。</p><p id="84e0" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">实例类型分为5组:</p><ol class=""><li id="c365" class="ma mb hi jl b jm jn jp jq js mc jw md ka me ke mf mg mh mi bi translated">通用的</li><li id="b295" class="ma mb hi jl b jm mj jp mk js ml jw mm ka mn ke mf mg mh mi bi translated">计算优化</li><li id="1183" class="ma mb hi jl b jm mj jp mk js ml jw mm ka mn ke mf mg mh mi bi translated">内存优化</li><li id="6d35" class="ma mb hi jl b jm mj jp mk js ml jw mm ka mn ke mf mg mh mi bi translated">加速计算</li><li id="9fc9" class="ma mb hi jl b jm mj jp mk js ml jw mm ka mn ke mf mg mh mi bi translated">存储优化</li></ol><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mo"><img src="../Images/07f99fa2e81057b0ce9f3f1cb14c49ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JceAv_BHlZMC36UnKdjhZA.png"/></div></div></figure><p id="1eef" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">让我们以上面的迷因为例:</p><p id="1b4d" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">以下是这两种类型的规格，它们都属于一般用途:</p><pre class="iy iz ja jb fd mp mq mr ms aw mt bi"><span id="dd61" class="lg kp hi mq b fi mu mv l mw mx"><strong class="mq hj">Type     | vCPU* | Mem(GiB) | Storage  | Network<br/></strong>m4 large |   2   |    8     | EBS-Only | Moderate<br/>t2 large |   1   |    8     | EBS-Only | Low to Moderate</span></pre><p id="ff2b" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">嗯，看起来m4大号更好，那么为什么他要看t2大号呢？显然，这是因为它的可突发计算单元，更适合他的项目。<strong class="jl hj"> </strong>点击<a class="ae kf" href="https://www.apptio.com/blog/comparing-aws-t2-large-and-m4-large-ec2-instances/" rel="noopener ugc nofollow" target="_blank">这里</a>如果你想了解更多，点击<a class="ae kf" href="https://aws.amazon.com/ec2/instance-types/?trkCampaign=acq_paid_search_brand&amp;sc_channel=PS&amp;sc_campaign=acquisition_IE&amp;sc_publisher=Google&amp;sc_category=Cloud%20Computing&amp;sc_country=IE&amp;sc_geo=EMEA&amp;sc_outcome=acq&amp;sc_detail=ec2%20instance%20types&amp;sc_content={ad%20group}&amp;sc_matchtype=e&amp;sc_segment=489284072828&amp;sc_medium=ACQ-P|PS-GO|Brand|Desktop|SU|Cloud%20Computing|EC2|IE|EN|Sitelink&amp;s_kwcid=AL!4422!3!489284072828!e!!g!!ec2%20instance%20types&amp;ef_id=Cj0KCQjwsqmEBhDiARIsANV8H3YCRUMwrDF3z3LD0oEfZNpxRkS273vEbMlGT0GBhFbc3pnAO3PZRhQaApdaEALw_wcB:G:s&amp;s_kwcid=AL!4422!3!489284072828!e!!g!!ec2%20instance%20types" rel="noopener ugc nofollow" target="_blank">这里</a>如果你想了解更多EC2实例类型。</p><p id="5476" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">现在，让我们来谈谈钱吧！</p><h2 id="2d42" class="lg kp hi bd kq lh li lj ku lk ll lm ky js ln lo la jw lp lq lc ka lr ls le lt bi translated"><strong class="ak"> EC2有四种定价模式</strong></h2><ol class=""><li id="615f" class="ma mb hi jl b jm lv jp lw js my jw mz ka na ke mf mg mh mi bi translated"><strong class="jl hj">按需:</strong>这允许你按小时(或秒)支付固定费用，没有任何承诺。</li><li id="fe16" class="ma mb hi jl b jm mj jp mk js ml jw mm ka mn ke mf mg mh mi bi translated"><strong class="jl hj"> Reserved: </strong>为您提供容量预订，并为实例的每小时费用提供显著的折扣(比如提前一年预订酒店房间)。合同期限为1年或3年。</li><li id="6509" class="ma mb hi jl b jm mj jp mk js ml jw mm ka mn ke mf mg mh mi bi translated"><strong class="jl hj"> Spot: </strong>使您可以对任何价格(例如容量)进行投标，如果您的应用程序具有灵活的开始和结束时间，则可以节省更多成本。</li><li id="4d22" class="ma mb hi jl b jm mj jp mk js ml jw mm ka mn ke mf mg mh mi bi translated"><strong class="jl hj">专用主机:</strong>专用于您的物理EC2服务器。专用主机允许您使用现有的服务器绑定软件许可证，从而帮助您降低成本。</li></ol><p id="ec3f" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">让我们深入研究一下，看看什么时候应该使用哪个:</p><p id="4762" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj"> 1。按需定价适用于:</strong></p><ul class=""><li id="685f" class="ma mb hi jl b jm jn jp jq js mc jw md ka me ke nb mg mh mi bi translated">想要Amazon EC2的低成本和灵活性而无需任何预付或长期承诺的用户。</li><li id="4e09" class="ma mb hi jl b jm mj jp mk js ml jw mm ka mn ke nb mg mh mi bi translated">无法中断的短期、峰值或不可预测工作负载的应用程序。</li><li id="5ad4" class="ma mb hi jl b jm mj jp mk js ml jw mm ka mn ke nb mg mh mi bi translated">首次在Amazon EC2上开发或测试的应用。</li></ul><p id="9350" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj"> 2。保留定价适用于:</strong></p><ul class=""><li id="9fe6" class="ma mb hi jl b jm jn jp jq js mc jw md ka me ke nb mg mh mi bi translated">使用情况稳定或可预测的应用。</li><li id="f84f" class="ma mb hi jl b jm mj jp mk js ml jw mm ka mn ke nb mg mh mi bi translated">需要预留容量的应用。</li><li id="dbc5" class="ma mb hi jl b jm mj jp mk js ml jw mm ka mn ke nb mg mh mi bi translated">能够指定预付费用以进一步降低总计算成本的用户。</li></ul><p id="a54a" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">预留定价类型:</strong></p><ol class=""><li id="3032" class="ma mb hi jl b jm jn jp jq js mc jw md ka me ke mf mg mh mi bi translated">标准保留实例:这些实例提供高达75%的按需实例折扣。预付越多，合同越长，折扣就越大。</li><li id="fd03" class="ma mb hi jl b jm mj jp mk js ml jw mm ka mn ke mf mg mh mi bi translated"><strong class="jl hj">可转换的</strong>保留实例:这些实例提供高达75%的按需修改RIA属性的能力，只要交换导致保留实例的创建具有相同或更大的价值。</li><li id="6bf8" class="ma mb hi jl b jm mj jp mk js ml jw mm ka mn ke mf mg mh mi bi translated"><strong class="jl hj">预定的</strong>保留的实例:这些实例可以在您保留的时间窗口内启动。此选项允许您将容量预留与可预测的重复计划相匹配，该计划只需要一天、一周或一个月的一部分。</li></ol><p id="658a" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj"> 3。现货定价适用于:</strong></p><ul class=""><li id="f087" class="ma mb hi jl b jm jn jp jq js mc jw md ka me ke nb mg mh mi bi translated">具有灵活开始和结束时间的应用程序</li><li id="f892" class="ma mb hi jl b jm mj jp mk js ml jw mm ka mn ke nb mg mh mi bi translated">只能以非常低的计算价格运行的应用程序</li><li id="e0cc" class="ma mb hi jl b jm mj jp mk js ml jw mm ka mn ke nb mg mh mi bi translated">迫切需要大量额外容量的用户</li><li id="fdf2" class="ma mb hi jl b jm mj jp mk js ml jw mm ka mn ke nb mg mh mi bi translated">如果spot实例被EC2终止，您将不被收取部分小时的使用费。但是，如果您自己终止实例，您将为实例运行的任何时间付费。</li></ul><p id="93e9" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj"> 4。专用主机定价适用于:</strong></p><ul class=""><li id="8baa" class="ma mb hi jl b jm jn jp jq js mc jw md ka me ke nb mg mh mi bi translated">可能不支持多租户虚拟化的法规要求</li><li id="fcaa" class="ma mb hi jl b jm mj jp mk js ml jw mm ka mn ke nb mg mh mi bi translated">不支持多租户或云部署的许可。提示:任何关于特殊许可要求的问题—都是关于专用主机的！</li><li id="e6ff" class="ma mb hi jl b jm mj jp mk js ml jw mm ka mn ke nb mg mh mi bi translated">可以按需购买(每小时)</li><li id="de67" class="ma mb hi jl b jm mj jp mk js ml jw mm ka mn ke nb mg mh mi bi translated">可作为预订购买，价格比点播价格低70%</li></ul><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/d3c3ec06d36d4ae70ff8613946b0120b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1XnZdIENriXfmJnMZa_UXQ.png"/></div></div></figure><h2 id="9595" class="lg kp hi bd kq lh li lj ku lk ll lm ky js ln lo la jw lp lq lc ka lr ls le lt bi translated">EC2实践:创建EC2实例并连接到它</h2><p id="1709" class="pw-post-body-paragraph jj jk hi jl b jm lv ij jo jp lw im jr js lx ju jv jw ly jy jz ka lz kc kd ke hb bi translated">当您想要启动一个新的EC2实例时，您需要配置一些东西:</p><ul class=""><li id="81cc" class="ma mb hi jl b jm jn jp jq js mc jw md ka me ke nb mg mh mi bi translated">地区:因为这是按地区服务。</li><li id="fee7" class="ma mb hi jl b jm mj jp mk js ml jw mm ka mn ke nb mg mh mi bi translated">Amazon机器映像(AMI)，它提供启动实例所需的信息。</li><li id="51dd" class="ma mb hi jl b jm mj jp mk js ml jw mm ka mn ke nb mg mh mi bi translated">实例类型:t2.micro位于自由层之下</li><li id="d474" class="ma mb hi jl b jm mj jp mk js ml jw mm ka mn ke nb mg mh mi bi translated">添加存储— EBS —我们将很快更深入地讨论这一点。</li><li id="419d" class="ma mb hi jl b jm mj jp mk js ml jw mm ka mn ke nb mg mh mi bi translated">安全组——<strong class="jl hj">安全组</strong>充当您的<strong class="jl hj"> EC2 </strong>实例的虚拟防火墙，以控制传入和传出流量。<em class="lu"> 0.0.0.0/0 </em>一切，<em class="lu"> W.X.Y.Z/32 </em>只允许1个IP地址。<br/>进出流量由端口控制。<strong class="jl hj">端口是计算机通信的方式:</strong>眼见为实，耳听为虚，所以它与端口一起工作:Linux通过SSH(端口22)，微软通过远程桌面协议(协议3389)，HTTP通过端口80，HTTPS通过端口443。</li></ul><p id="c942" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在您点击<em class="lu">启动</em>之后，它将创建一个密钥对，允许我们登录到我们的EC2机器。下载密钥对文件<code class="du nc nd ne mq b">MyPrivateKey.pem</code>后，您需要使用以下命令更改其权限:</p><pre class="iy iz ja jb fd mp mq mr ms aw mt bi"><span id="e162" class="lg kp hi mq b fi mu mv l mw mx">chmod 400 MyPrivateKey.pem</span></pre><p id="7a28" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">现在，您可以通过键入以下命令，通过CLI连接到ec2实例:</p><pre class="iy iz ja jb fd mp mq mr ms aw mt bi"><span id="e23b" class="lg kp hi mq b fi mu mv l mw mx">ssh ec2-user@34.229.236.39 -i MyPrivateKey.pem</span></pre><p id="f98d" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">放心吧！我们将很快讨论通过CLI的连接！</p><p id="6115" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">重要提示！如果超时，你应该检查安全组权限！</strong></p></div><div class="ab cl kh ki gp kj" role="separator"><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km"/></div><div class="hb hc hd he hf"><h1 id="5cd7" class="ko kp hi bd kq kr ks kt ku kv kw kx ky io kz ip la ir lb is lc iu ld iv le lf bi translated">EBS和存储选项比较</h1><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/daab843e902ee041ca5c8247342e2d53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ypXkhyZ31_y6IGPO2YqP5A.png"/></div></div></figure><p id="9dd4" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">之前，在EC2的动手示例中，有这样一个零件:</p><blockquote class="nf ng nh"><p id="9a70" class="jj jk lu jl b jm jn ij jo jp jq im jr ni jt ju jv nj jx jy jz nk kb kc kd ke hb bi translated">添加存储— EBS —我们将很快更深入地讨论这一点。</p></blockquote><p id="d8ec" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">很快就到了！</p><p id="d347" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">但是在我们讨论AWS TLA(三个字母的缩写)之前，让我们从最简单的存储选项开始:实例存储。</p><h2 id="2a9d" class="lg kp hi bd kq lh li lj ku lk ll lm ky js ln lo la jw lp lq lc ka lr ls le lt bi translated">实例存储</h2><p id="3aee" class="pw-post-body-paragraph jj jk hi jl b jm lv ij jo jp lw im jr js lx ju jv jw ly jy jz ka lz kc kd ke hb bi translated">一些亚马逊弹性计算云(Amazon EC2)实例类型带有一种直接连接的块设备存储形式，称为<a class="ae kf" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/InstanceStorage.html" rel="noopener ugc nofollow" target="_blank">实例存储</a>。实例存储是临时存储的理想选择，因为存储在实例存储卷中的数据不会在实例停止、终止或硬件故障时保持不变。</p><h2 id="b23d" class="lg kp hi bd kq lh li lj ku lk ll lm ky js ln lo la jw lp lq lc ka lr ls le lt bi translated">EBS:云中的虚拟磁盘</h2><p id="ce43" class="pw-post-body-paragraph jj jk hi jl b jm lv ij jo jp lw im jr js lx ju jv jw ly jy jz ka lz kc kd ke hb bi translated">在EC2服务中，你会看到一个标签，上面写着<em class="lu">弹性块商店。</em></p><p id="c6e2" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">EBS允许您创建存储卷并将其附加到EC2实例。连接后，您可以在这些卷上创建一个文件系统，运行一个数据库，或者以您使用数据块服务的任何其他方式使用它们。EBS卷被放在一个特定的AZ中，在那里它们被自动复制以保护您免受单个组件故障的影响。</p><p id="d0c7" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj"> EBS存储类型</strong></p><p id="a7fa" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">固态硬盘:</p><ul class=""><li id="07b1" class="ma mb hi jl b jm jn jp jq js mc jw md ka me ke nb mg mh mi bi translated">通用固态硬盘(GP2) —平衡各种工作负载的性能。</li><li id="b868" class="ma mb hi jl b jm mj jp mk js ml jw mm ka mn ke nb mg mh mi bi translated">调配的IOPS固态硬盘(IO1) —最高性能的固态硬盘卷，适用于任务关键型低延迟或高吞吐量工作负载。</li></ul><p id="59b5" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">磁性:</p><ul class=""><li id="3001" class="ma mb hi jl b jm jn jp jq js mc jw md ka me ke nb mg mh mi bi translated">吞吐量优化硬盘(ST1) —低成本硬盘卷，专为频繁访问的吞吐量密集型工作负载而设计。</li><li id="ff1b" class="ma mb hi jl b jm mj jp mk js ml jw mm ka mn ke nb mg mh mi bi translated">冷硬盘(SC1) —为频繁访问的工作负载(文件服务器)设计的最低成本硬盘卷。</li><li id="cc8f" class="ma mb hi jl b jm mj jp mk js ml jw mm ka mn ke nb mg mh mi bi translated">磁性—上一代产品。</li></ul><h2 id="1bd9" class="lg kp hi bd kq lh li lj ku lk ll lm ky js ln lo la jw lp lq lc ka lr ls le lt bi translated">S3 vs EBS vs EFS比较</h2><p id="6ec8" class="pw-post-body-paragraph jj jk hi jl b jm lv ij jo jp lw im jr js lx ju jv jw ly jy jz ka lz kc kd ke hb bi translated">好吧，在我们比较它们和看它们的区别之前，让我们打开那三个字母的缩写。</p><p id="067f" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj"> S3 =简单存储服务</strong></p><p id="cef2" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">我们在<a class="ae kf" href="https://cupofcode.blog/aws-iam-cloudfront-s3/" rel="noopener ugc nofollow" target="_blank">之前的博客文章</a>中了解了S3，所以这里有一个非常简短的总结:</p><p id="1121" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">S3为开发人员和IT团队提供安全、持久、高度可扩展的对象存储。亚马逊S3易于使用，有一个简单的网络服务界面来存储和检索网络上任何地方的任何数量的数据。</p><ul class=""><li id="776c" class="ma mb hi jl b jm jn jp jq js mc jw md ka me ke nb mg mh mi bi translated">S3是存放文件的安全地方。</li><li id="71c0" class="ma mb hi jl b jm mj jp mk js ml jw mm ka mn ke nb mg mh mi bi translated">它是基于对象的存储。</li><li id="05b2" class="ma mb hi jl b jm mj jp mk js ml jw mm ka mn ke nb mg mh mi bi translated">数据分布在多个设备和设施中。</li></ul><p id="d57f" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj"> EFS=弹性文件存储</strong></p><p id="060f" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">非常适合文件服务器。多个ec2实例可以访问同一个存储。</p><p id="34cb" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">EFS是EC2实例的文件存储服务。</p><p id="849e" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">它易于使用，并提供了一个简单的界面，允许您快速轻松地创建和配置文件系统。</p><p id="557e" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">S3 vs EBS vs EFS </p><ol class=""><li id="671b" class="ma mb hi jl b jm jn jp jq js mc jw md ka me ke mf mg mh mi bi translated"><strong class="jl hj"> S3 </strong>用于存储平面文件(对象)，如图片、文档、视频等。您不需要为它安装操作系统或数据库。</li><li id="aeaf" class="ma mb hi jl b jm mj jp mk js ml jw mm ka mn ke mf mg mh mi bi translated"><strong class="jl hj"> EBS </strong>是一个可以连接到EC2的虚拟磁盘。磁盘的大小可以改变，但这不是自动完成的。</li><li id="c063" class="ma mb hi jl b jm mj jp mk js ml jw mm ka mn ke mf mg mh mi bi translated"><strong class="jl hj"> EFS </strong>是一个可以连接到EC2的虚拟磁盘，磁盘的大小是有弹性的(根据使用情况可伸缩)。</li></ol></div><div class="ab cl kh ki gp kj" role="separator"><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km"/></div><div class="hb hc hd he hf"><h1 id="609b" class="ko kp hi bd kq kr ks kt ku kv kw kx ky io kz ip la ir lb is lc iu ld iv le lf bi translated">弹性负载平衡器</h1><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/68c78164255e75dc3ab54e8d761f3726.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2j92TDWLCaAe1IGm3HdS3g.png"/></div></div></figure><p id="a566" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">弹性负载平衡自动将传入的应用程序流量分布在多个目标上，例如Amazon EC2实例、容器、IP地址、Lambda函数和虚拟设备。它可以处理单个可用性区域或多个可用性区域中应用程序流量的变化负载。</p><p id="21a2" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">当你点击<code class="du nc nd ne mq b">Create Load Balancer</code>时，你会看到有3种类型(现在有4种，包括<em class="lu">网关负载均衡器</em>，但在任何课程中都没有提到):</p><ul class=""><li id="87b1" class="ma mb hi jl b jm jn jp jq js mc jw md ka me ke nb mg mh mi bi translated"><strong class="jl hj">应用LB (ALB) </strong> —应用感知，这意味着它可以洞察<a class="ae kf" href="https://en.wikipedia.org/wiki/OSI_model#Layer_7:_Application_Layer" rel="noopener ugc nofollow" target="_blank"> <em class="lu">第7层</em> </a>，并做出智能路由决策。</li><li id="5139" class="ma mb hi jl b jm mj jp mk js ml jw mm ka mn ke nb mg mh mi bi translated"><strong class="jl hj">网络LB (NLB) </strong> —当您需要超高性能和静态IP地址时使用。</li><li id="9f10" class="ma mb hi jl b jm mj jp mk js ml jw mm ka mn ke nb mg mh mi bi translated">经典——V1，慢慢被淘汰。有利于测试和开发，或者保持低成本。</li></ul><p id="bc4e" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">负载平衡器配置包含:</p><ul class=""><li id="fadb" class="ma mb hi jl b jm jn jp jq js mc jw md ka me ke nb mg mh mi bi translated">我们之前提到过的安全组。</li><li id="34ba" class="ma mb hi jl b jm mj jp mk js ml jw mm ka mn ke nb mg mh mi bi translated">目标组，即它平衡的EC2实例组。</li><li id="0a7e" class="ma mb hi jl b jm mj jp mk js ml jw mm ka mn ke nb mg mh mi bi translated">健康检查，负载平衡器通过它来确保实例是健康的，如果不健康就替换它们。</li></ul></div><div class="ab cl kh ki gp kj" role="separator"><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km"/></div><div class="hb hc hd he hf"><h1 id="e0a1" class="ko kp hi bd kq kr ks kt ku kv kw kx ky io kz ip la ir lb is lc iu ld iv le lf bi translated">自动缩放组</h1><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/24dc9a52e6ddde32baf8bdfdf9000226.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EyjMi1xWdpujYbjZ34mJZg.png"/></div></div></figure><p id="13f4" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">先说问题，再看解决办法。考虑到:</p><ul class=""><li id="5c1f" class="ma mb hi jl b jm jn jp jq js mc jw md ka me ke nb mg mh mi bi translated">默认情况下，ALB是冗余的，因此跨多个az分布。</li><li id="8a61" class="ma mb hi jl b jm mj jp mk js ml jw mm ka mn ke nb mg mh mi bi translated">假设我们有一个数据库。正如您将在下一篇博文中了解到的，我们在另一个AZ中有主数据库和辅助数据库。</li><li id="be53" class="ma mb hi jl b jm mj jp mk js ml jw mm ka mn ke nb mg mh mi bi translated">我们有一个EC2实例。</li></ul><p id="004d" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">所以我们的问题是EC2实例是我们的单点故障。</p><p id="dd6a" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">解决方案是自动扩展组。ASG是一组EC2实例，根据负载或运行状况进行伸缩。<br/>基于负载意味着在流量大的时候保留很多实例，在流量不大的时候删除实例。<br/>基于运行状况意味着，如果您的EC2实例之一关闭(=未通过运行状况检查)，您的ASG将创建一个新实例来替换它。</p><p id="e16b" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在AWS控制台中，<code class="du nc nd ne mq b">Auto Scaling</code>下有两个选项卡:<code class="du nc nd ne mq b">Launch Configurations</code>和<code class="du nc nd ne mq b">Auto Scaling Groups</code>。没有启动配置，你不能创建ASG。启动配置使用AMI(亚马逊机器映像)，这是EC2的截图。</p></div><div class="ab cl kh ki gp kj" role="separator"><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km"/></div><div class="hb hc hd he hf"><h1 id="c5ad" class="ko kp hi bd kq kr ks kt ku kv kw kx ky io kz ip la ir lb is lc iu ld iv le lf bi translated">使用命令行</h1><p id="d003" class="pw-post-body-paragraph jj jk hi jl b jm lv ij jo jp lw im jr js lx ju jv jw ly jy jz ka lz kc kd ke hb bi translated">我们在EC2实践中先睹为快，其中包括:</p><pre class="iy iz ja jb fd mp mq mr ms aw mt bi"><span id="d243" class="lg kp hi mq b fi mu mv l mw mx">ssh ec2-user@34.229.236.39 -i MyPrivateKey.pem</span></pre><p id="13f9" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">现在我们将了解它是如何工作的！</p><p id="7fa8" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">可以通过三种方式与AWS交互:AWS控制台、<a class="ae kf" href="https://www.w3schools.com/whatis/whatis_cli.asp" rel="noopener ugc nofollow" target="_blank"> CLI </a>和SDK。<strong class="jl hj"><em class="lu">SDK</em></strong>(软件开发工具包)是一种通过代码与AWS交流的方式，不在这篇博文的讨论范围之内。</p><p id="2d50" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">通过AWS控制台连接到EC2实例非常简单:<em class="lu"> ec2- &gt;实例- &gt;点击它- &gt;连接</em>。<br/>但是，如何通过CLI进行连接呢？这是我们回顾上一篇博文中IAM服务的地方！</p><h2 id="2aa4" class="lg kp hi bd kq lh li lj ku lk ll lm ky js ln lo la jw lp lq lc ka lr ls le lt bi translated">如何通过CLI启用通信？</h2><ol class=""><li id="89b4" class="ma mb hi jl b jm lv jp lw js my jw mz ka na ke mf mg mh mi bi translated">AWS控制台-&gt; IAM</li><li id="d943" class="ma mb hi jl b jm mj jp mk js ml jw mm ka mn ke mf mg mh mi bi translated">创建一个用户，并授予他们管理员访问权限。</li><li id="c2fd" class="ma mb hi jl b jm mj jp mk js ml jw mm ka mn ke mf mg mh mi bi translated">转到用户-&gt;点击您的用户-&gt;安全凭证-&gt;访问密钥-&gt;下载。<br/>您只能获得一次下载访问密钥<strong class="jl hj">的权限，因此如果您丢失了它，您可以将其停用并删除，然后创建一个新的。</strong></li><li id="02dd" class="ma mb hi jl b jm mj jp mk js ml jw mm ka mn ke mf mg mh mi bi translated">在CLI中键入:</li></ol><pre class="iy iz ja jb fd mp mq mr ms aw mt bi"><span id="1809" class="lg kp hi mq b fi mu mv l mw mx">ssh ec2-user@34.229.236.39 -i <strong class="mq hj">MyPrivateKey.pem</strong></span></pre><p id="ff87" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj"><em class="lu">myprivatekey . PEM</em></strong><em class="lu"/>是您下载的安全凭证文件！</p><h2 id="a2d3" class="lg kp hi bd kq lh li lj ku lk ll lm ky js ln lo la jw lp lq lc ka lr ls le lt bi translated">配置通信:</h2><p id="8a1c" class="pw-post-body-paragraph jj jk hi jl b jm lv ij jo jp lw im jr js lx ju jv jw ly jy jz ka lz kc kd ke hb bi translated">通过CLI进行AWS通信:<code class="du nc nd ne mq b">aws &lt;SERVICE&gt;</code></p><p id="9831" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">例如:<code class="du nc nd ne mq b">aws s3 mb s3://cupofcodeblog</code>创建一个新的桶</p><p id="b0b3" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">但是如果你尝试这样做，你会得到错误:</p><pre class="iy iz ja jb fd mp mq mr ms aw mt bi"><span id="8a23" class="lg kp hi mq b fi mu mv l mw mx">make_bucket failed: s3://cupofcodeblog unable to locate credentials</span></pre><p id="4a5a" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">这是因为您需要配置这个EC2实例来与s3对话，有两种方法可以做到这一点:</p><ol class=""><li id="e518" class="ma mb hi jl b jm jn jp jq js mc jw md ka me ke mf mg mh mi bi translated">给它管理员IAM用户的<strong class="jl hj">凭证</strong></li><li id="1dc0" class="ma mb hi jl b jm mj jp mk js ml jw mm ka mn ke mf mg mh mi bi translated">使用<strong class="jl hj">角色</strong></li><li id="9418" class="ma mb hi jl b jm mj jp mk js ml jw mm ka mn ke mf mg mh mi bi translated"><strong class="jl hj">配置凭证:</strong></li></ol><p id="fffb" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">键入<code class="du nc nd ne mq b">aws configure</code>并给它<em class="lu">访问密钥ID </em>和<em class="lu">秘密访问密钥</em>:</p><pre class="iy iz ja jb fd mp mq mr ms aw mt bi"><span id="bc14" class="lg kp hi mq b fi mu mv l mw mx">&gt; <strong class="mq hj">aws configure</strong><br/>Access key ID = <strong class="mq hj">username</strong><br/>secret access key = <strong class="mq hj">password</strong><br/>default region name<br/>default output format = enter.</span></pre><p id="9e92" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">现在，当我们尝试:</p><pre class="iy iz ja jb fd mp mq mr ms aw mt bi"><span id="1b1e" class="lg kp hi mq b fi mu mv l mw mx">aws s3 mb s3://cupofcodeblog</span></pre><p id="0497" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">我们做了一个桶！而且我们输入<code class="du nc nd ne mq b">aws s3 ls</code>就能看到。</p><p id="dad9" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj"> 2。使用角色</strong></p><ol class=""><li id="9b64" class="ma mb hi jl b jm jn jp jq js mc jw md ka me ke mf mg mh mi bi translated">创建s3AdminAccess角色:转到AWS控制台-&gt; IAM -&gt;角色。在配置时，您选择将使用此角色的服务是EC2。</li></ol><p id="d849" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">2.将角色附加到特定的EC2实例:转到实例-&gt;勾选一个-&gt;操作-&gt;实例设置-&gt;附加或替换IAM角色</p><p id="7cf7" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">现在，您可以ssh到实例中，毫无问题地创建一个bucket。</p><p id="5fcf" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">为什么角色更好？</strong></p><p id="b026" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">角色是比在ec2实例上保存凭证更安全的选择。对于角色，如果有人攻击了您的ec2实例，他们仍将拥有从该ec2实例进入S3的管理权限，<strong class="jl hj">但是</strong>他们将没有对AWS环境的完全管理权限。这意味着当我们删除被攻击的实例时，它们失去了对AWS env的访问。</p><p id="801a" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">角色也更易于管理，只需添加或修改策略即可。</p><p id="4e89" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">重要提示:与IAM用户一样，角色是全局的，而不是区域性的。</p></div><div class="ab cl kh ki gp kj" role="separator"><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km"/></div><div class="hb hc hd he hf"><p id="4bcd" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">就是这样！没那么难吧。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nl"><img src="../Images/ce67519f5bf7915d692a999c7b277147.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*xXeB0ofgoqkF07D-.jpg"/></div></div></figure><p id="1c06" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">今天，我们学习了EC2及其所有类型和定价模式。我们还了解了四种储物选项以及它们之间的区别。我们学习了负载平衡器和自动扩展组，并通过CLI完成了通信。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nm"><img src="../Images/8f4da64a9df8296bffe3a80f9bff00b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*dFpSvsmM6cEoz9T_.png"/></div></div><figcaption class="nn no et er es np nq bd b be z dx"><a class="ae kf" href="https://cupofcode.blog/" rel="noopener ugc nofollow" target="_blank">https://cupofcode.blog/</a></figcaption></figure><p id="0bcb" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">如果你读到这里，你已经到了博文的结尾，我很想听听你的想法！我有帮助吗？你在工作中也使用AWS吗？以下是联系方式:<br/>https://www.facebook.com/cupofcode.blog/:<a class="ae kf" href="https://www.facebook.com/cupofcode.blog/" rel="noopener ugc nofollow" target="_blank">脸书</a>T3】insta gram:<a class="ae kf" href="https://www.instagram.com/cupofcode.blog/" rel="noopener ugc nofollow" target="_blank">https://www.instagram.com/cupofcode.blog/</a>T6】邮箱:cupofcode.blog@gmail.com</p></div></div>    
</body>
</html>