<html>
<head>
<title>Using Python and Streamlink to Download Twitch Livestreams</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python和Streamlink下载Twitch直播流</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/using-python-to-download-twitch-livestreams-bdda64beb11?source=collection_archive---------15-----------------------#2021-07-06">https://medium.com/geekculture/using-python-to-download-twitch-livestreams-bdda64beb11?source=collection_archive---------15-----------------------#2021-07-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/461d468ef5a2d886911fa661638812f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*r8aBB_KJoDU99OmU"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Photo by <a class="ae iu" href="https://unsplash.com/@djravine?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Stanley Li</a> on <a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="c7c7" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">简介+先决条件</h1><p id="12e1" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">想要实时下载Twitch流，而不是等待整个记录可用吗？你是一名编辑，想要加快从你的流创建YouTube内容和汇编的周转时间吗？</p><p id="563c" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">这将是一个快速而简单的Python项目，有很多用例以及可以在其上构建的方法。让我们从您开始工作所需的先决条件开始:</p><ol class=""><li id="8478" class="kw kx hi jv b jw kr ka ks ke ky ki kz km la kq lb lc ld le bi translated"><a class="ae iu" href="https://www.python.org/downloads/" rel="noopener ugc nofollow" target="_blank">安装Python </a>:任何版本≥ 3.8</li><li id="d5a0" class="kw kx hi jv b jw lf ka lg ke lh ki li km lj kq lb lc ld le bi translated">用pip3安装<a class="ae iu" href="https://streamlink.github.io/" rel="noopener ugc nofollow" target="_blank">Streamlink</a>:<strong class="jv hj">pip 3 install ' Streamlink&gt;= 2 . 2 . 0 '</strong></li><li id="5d31" class="kw kx hi jv b jw lf ka lg ke lh ki li km lj kq lb lc ld le bi translated">安装<a class="ae iu" href="https://ffmpeg.org/" rel="noopener ugc nofollow" target="_blank"> ffmpeg </a></li></ol><p id="ba58" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">现在，我们所有的依赖项都已安装完毕，准备就绪。</p><p id="56df" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">接下来，我们需要向Twitch注册我们的应用程序，以获得客户端ID和密码。前往<a class="ae iu" href="https://dev.twitch.tv/console/apps" rel="noopener ugc nofollow" target="_blank"> Twitch开发者控制台</a>并注册一个新的应用程序。一旦完成，你现在应该有一个ID和秘密来使用。</p><h1 id="25a3" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">Twitch和Streamlink的Python包装器</h1><p id="2202" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">感谢开源和GitHub的力量，我们不需要为使用Twitch API和Streamlink编写自己的Python包装器。我们基本上将使用这个<a class="ae iu" href="https://github.com/ancalentari/twitch-stream-recorder" rel="noopener ugc nofollow" target="_blank">存储库</a>中的脚本，并添加我们自己的配置。我在编写自己的Python脚本时发现了这个库。它已经写得很好了，也记录在案了，所以我放弃了我的。继续克隆它，并给它一颗星:)。</p><p id="72b7" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">在<strong class="jv hj"> config.py </strong>中，添加你想要下载直播的路径，你想要录制的人的Twitch用户名，以及你的客户端ID和secret。</p><figure class="lk ll lm ln fd ij"><div class="bz dy l di"><div class="lo lp l"/></div></figure><p id="1506" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">如果我们看一看<strong class="jv hj"> twitch-recorder.py </strong>，我们会看到该脚本获取配置文件并检查我们的客户端凭证。它还会在启动Streamlink开始下载之前检查用户名的流是否在线。</p><p id="089a" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">如果我们按照自述文件运行:</p><pre class="lk ll lm ln fd lq lr ls lt aw lu bi"><span id="1e6c" class="lv iw hi lr b fi lw lx l ly lz">python3 twitch-recorder.py</span></pre><p id="de62" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">这应该是我们开始录音所需要的。注意，如果这不起作用，请返回到上一节，确保所有的依赖项和Twitch凭证都是正确的。就我个人而言，我需要将Streamlink升级到2.2.0版本，以便与Twitch一起使用。</p><h1 id="2cd6" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">后续步骤</h1><p id="9724" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">我们创建的Python脚本非常简单。它只是用给定的参数启动一个Streamlink记录过程。然而，因为我们现在有了Streamlink的Python包装器，所以我们可以用各种方式扩展这个脚本。我将让您自己来实现这些，但是这里有一个您可以尝试的列表:</p><h2 id="b773" class="lv iw hi bd ix ma mb mc jb md me mf jf ke mg mh jj ki mi mj jn km mk ml jr mm bi translated">与Twitch API集成</h2><p id="6b56" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">与<a class="ae iu" href="https://dev.twitch.tv/docs/api/" rel="noopener ugc nofollow" target="_blank"> Twitch API </a>集成可以让你做很多很酷的事情，比如:</p><ul class=""><li id="f70c" class="kw kx hi jv b jw kr ka ks ke ky ki kz km la kq mn lc ld le bi translated">当特定的流媒体工具上线时，请监听</li><li id="8ad3" class="kw kx hi jv b jw lf ka lg ke lh ki li km lj kq mn lc ld le bi translated">收听流媒体工具何时更改流类别/标题</li><li id="b27e" class="kw kx hi jv b jw lf ka lg ke lh ki li km lj kq mn lc ld le bi translated">阅读Twitch聊天</li></ul><p id="7a06" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">通过订阅频道事件，如频道何时上线和何时离线，您可以在正确的时间开始录制直播流，不会错过任何部分。我们还可以选择仅在流媒体工具播放特定类别(如“只是聊天”)时进行录制。这将需要服务器或始终运行的脚本来订阅频道事件。</p><h2 id="33de" class="lv iw hi bd ix ma mb mc jb md me mf jf ke mg mh jj ki mi mj jn km mk ml jr mm bi translated">一次录制多个流</h2><p id="e037" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">如果您是多个通道的编辑者，或者您只是对多个通道感兴趣，那么您可以通过修改Python脚本来一次记录多个流，以便为每个所需的流一次生成多个Streamlink记录过程。这样做对于为多人游戏编译多个视点来说很酷。例如，像GTA这样的游戏，其中几个流在同一个服务器上跳跃，并一起进行角色扮演，这将是一个很好的用例。</p><h2 id="7df7" class="lv iw hi bd ix ma mb mc jb md me mf jf ke mg mh jj ki mi mj jn km mk ml jr mm bi translated">共享录像</h2><p id="2599" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">如果您是编辑或内容创建者团队的一员，您可以设置一个文件共享服务器并在那里录制流，这样每个人都可以访问它们，而无需自己录制。</p><h2 id="2473" class="lv iw hi bd ix ma mb mc jb md me mf jf ke mg mh jj ki mi mj jn km mk ml jr mm bi translated">视频处理</h2><p id="fb27" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">为了进一步自动化您的编辑过程，请尝试使用Python来执行一些简单的编辑任务。<a class="ae iu" href="https://pypi.org/project/moviepy/" rel="noopener ugc nofollow" target="_blank"> MoviePy </a>是一个Python库，用于剪切等常见编辑任务。每当流标题发生变化时，这可以用于诸如剪切视频之类的事情。</p><h1 id="ca5b" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">结论</h1><p id="3e5c" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">总之，我们能够使用Python和Streamlink实时记录来自Twitch的直播流。这有很多应用程序，有助于加快内容创建和编辑过程。希望你从这个简短的项目中学到了一些东西，并受到启发，用它来创建新的东西！</p></div></div>    
</body>
</html>