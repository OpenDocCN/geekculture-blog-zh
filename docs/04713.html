<html>
<head>
<title>Implement a sliding window using python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用python实现滑动窗口</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/implement-a-sliding-window-using-python-31d1481842a7?source=collection_archive---------7-----------------------#2021-07-02">https://medium.com/geekculture/implement-a-sliding-window-using-python-31d1481842a7?source=collection_archive---------7-----------------------#2021-07-02</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="fb94" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">如何使用python实现滑动窗口</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/27631c91a95e045321f8cd6ea438b3b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*A8Fu-vWWGSc3DrUV"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Photo by <a class="ae jn" href="https://unsplash.com/@snidgets?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Daniel Alentà</a> on <a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="5843" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">介绍</h1><p id="1b67" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">本文描述了如何使用python实现滑动窗口。滑动窗口是给定时间点的数据结构的子集。窗口大小决定了子集中元素的数量。</p><h1 id="6c2b" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">滑动窗口:</h1><p id="7cf3" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">让我们以一个包含8个元素的列表为例。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es lc"><img src="../Images/11d4a32bd450765c463fa0d5c700c777.png" data-original-src="https://miro.medium.com/v2/resize:fit:962/format:webp/1*efdMlb8qwJFW047JCzv1sQ.png"/></div><figcaption class="jj jk et er es jl jm bd b be z dx">A python list with 8 elements as integers</figcaption></figure><p id="3c98" class="pw-post-body-paragraph kg kh hi ki b kj ld ij kl km le im ko kp lf kr ks kt lg kv kw kx lh kz la lb hb bi translated">现在，如果我们设置窗口大小= 3，输出应该是，</p><pre class="iy iz ja jb fd li lj lk ll aw lm bi"><span id="9e80" class="ln jp hi lj b fi lo lp l lq lr">Output: </span><span id="eb28" class="ln jp hi lj b fi ls lp l lq lr">123 <br/>234 <br/>345 <br/>456 <br/>567 <br/>678</span></pre><p id="b159" class="pw-post-body-paragraph kg kh hi ki b kj ld ij kl km le im ko kp lf kr ks kt lg kv kw kx lh kz la lb hb bi translated">注意:在任何给定的时间点，窗口大小应该总是3。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es lt"><img src="../Images/9e0c85c77b5b52d2013ab95346d526e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:982/format:webp/1*AU2n90fMtTnJAtoKZ5-4fA.png"/></div><figcaption class="jj jk et er es jl jm bd b be z dx">Iteration 1 window elements[1,2,3]</figcaption></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es lc"><img src="../Images/1df7c3bffd450c61fc35599aa11d57ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:962/format:webp/1*DnxxdHLvEafnB7Dj-KUaZg.png"/></div><figcaption class="jj jk et er es jl jm bd b be z dx">Iteration 2 window elements[2,3,4]</figcaption></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es lc"><img src="../Images/9a11178daef5a6604c767daeea4a0285.png" data-original-src="https://miro.medium.com/v2/resize:fit:962/format:webp/1*LmK8AizhXEVkHFsNet2hLA.png"/></div><figcaption class="jj jk et er es jl jm bd b be z dx">Iteration 3 window elements[3,4,5]</figcaption></figure><p id="3cbb" class="pw-post-body-paragraph kg kh hi ki b kj ld ij kl km le im ko kp lf kr ks kt lg kv kw kx lh kz la lb hb bi">…</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es lt"><img src="../Images/1c3a3721b916125715b67f64aeedd5ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:982/format:webp/1*MpT818wxiO3K4qilKz-AyQ.png"/></div><figcaption class="jj jk et er es jl jm bd b be z dx">Final iteration window elements[6,7,8]</figcaption></figure><h1 id="d6d4" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">用例</h1><p id="4d9b" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">这个概念可以用在以下场景中</p><ul class=""><li id="dfa8" class="lu lv hi ki b kj ld km le kp lw kt lx kx ly lb lz ma mb mc bi translated">从一个较长的字符串计算特定长度的子字符串。</li><li id="d6ab" class="lu lv hi ki b kj md km me kp mf kt mg kx mh lb lz ma mb mc bi translated">计算列表中连续n个数的和，其中n是窗口大小</li></ul><h1 id="0241" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">代码:</h1><pre class="iy iz ja jb fd li lj lk ll aw lm bi"><span id="94b7" class="ln jp hi lj b fi lo lp l lq lr">lst = [1,2,3,4,5,6,7,8] </span><span id="1759" class="ln jp hi lj b fi ls lp l lq lr">def sliding_window(elements, window_size):<br/>    <br/>    if len(elements) &lt;= window_size:<br/>       return elements</span><span id="a4bf" class="ln jp hi lj b fi ls lp l lq lr">    for i in range(len(elements)):<br/>        print(elements[i:i+window_size])</span><span id="83ae" class="ln jp hi lj b fi ls lp l lq lr"><br/>sliding_window(lst, 3)</span><span id="1f9d" class="ln jp hi lj b fi ls lp l lq lr">Output:</span><span id="dff4" class="ln jp hi lj b fi ls lp l lq lr">[1, 2, 3] <br/>[2, 3, 4] <br/>[3, 4, 5] <br/>[4, 5, 6] <br/>[5, 6, 7] <br/>[6, 7, 8] <br/>[7, 8] <br/>[8]</span></pre><p id="34e2" class="pw-post-body-paragraph kg kh hi ki b kj ld ij kl km le im ko kp lf kr ks kt lg kv kw kx lh kz la lb hb bi translated">这实现了滑动窗口的目的。但是，我们不希望任何窗口的元素小于我们的窗口大小。在这种情况下，<code class="du mi mj mk lj b">window_size</code>是3。因此，当我们达到窗口大小时，我们将在代码中做一个小的改变来停止迭代。</p><h1 id="b597" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">修改了代码以停止在窗口大小上</h1><pre class="iy iz ja jb fd li lj lk ll aw lm bi"><span id="022d" class="ln jp hi lj b fi lo lp l lq lr">lst = [1,2,3,4,5,6,7,8] </span><span id="7837" class="ln jp hi lj b fi ls lp l lq lr">def sliding_window(elements, window_size):<br/>    <br/>    if len(elements) &lt;= window_size:<br/>       return elements</span><span id="97ec" class="ln jp hi lj b fi ls lp l lq lr">    for i in range(len(elements)- window_size + 1):<br/>        print(elements[i:i+window_size])</span><span id="a866" class="ln jp hi lj b fi ls lp l lq lr">sliding_window(lst, 3)</span><span id="62d2" class="ln jp hi lj b fi ls lp l lq lr">Output:</span><span id="f8d5" class="ln jp hi lj b fi ls lp l lq lr">[1, 2, 3] <br/>[2, 3, 4] <br/>[3, 4, 5] <br/>[4, 5, 6] <br/>[5, 6, 7] <br/>[6, 7, 8]</span></pre><h1 id="9d4d" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">使用生成器实现滑动窗口</h1><p id="1292" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">滑动窗口技术也可以使用生成器来实现。生成器通常存储执行的状态，并在下次调用时恢复。比方说，出于某种原因，你可能必须保存滑动窗口的状态，然后从你离开的地方恢复，你可以使用一个生成器，而不是一个常规函数。函数内部的<code class="du mi mj mk lj b">yield</code>关键字决定了该函数是一个生成器。</p><p id="18ac" class="pw-post-body-paragraph kg kh hi ki b kj ld ij kl km le im ko kp lf kr ks kt lg kv kw kx lh kz la lb hb bi translated">这将返回一个生成器对象，你可以调用<code class="du mi mj mk lj b">next(object)</code>来获得下一个值，或者在<code class="du mi mj mk lj b">for</code>循环中使用迭代器。</p><pre class="iy iz ja jb fd li lj lk ll aw lm bi"><span id="0d06" class="ln jp hi lj b fi lo lp l lq lr">lst = [1,2,3,4,5,6,7,8] </span><span id="48f3" class="ln jp hi lj b fi ls lp l lq lr">lst = [1,2,3,4,5,6,7,8]</span><span id="7bc2" class="ln jp hi lj b fi ls lp l lq lr">def sliding_window(elements, window_size):<br/>    <br/>    if len(elements) &lt;= window_size:<br/>       return elements</span><span id="9766" class="ln jp hi lj b fi ls lp l lq lr">    for i in range(len(elements)- window_size + 1):<br/>        yield elements[i:i+window_size]</span><span id="b96c" class="ln jp hi lj b fi ls lp l lq lr">sw_gen = sliding_window(lst, 3) </span><span id="3748" class="ln jp hi lj b fi ls lp l lq lr">print(next(sw_gen)) <br/>print(next(sw_gen))</span><span id="42f5" class="ln jp hi lj b fi ls lp l lq lr">Output: <br/>[1, 2, 3] <br/>[2, 3, 4]</span></pre><h1 id="d371" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">计算子字符串的滑动窗口</h1><p id="2e1e" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">我们将使用滑动窗口技术通过字符串的长度计算子字符串。这可以用来检查一个字符串是否是另一个的排列。要了解更多这方面的内容，请查看这篇文章<a class="ae jn" href="https://dineshkumarkb.com/tech/leetcode-challenge-check-if-a-string-is-a-perumutation-of-another-using-python/" rel="noopener ugc nofollow" target="_blank">这里</a>检查字符串排列。</p><pre class="iy iz ja jb fd li lj lk ll aw lm bi"><span id="3253" class="ln jp hi lj b fi lo lp l lq lr">s = "eidbaooo"</span><span id="d563" class="ln jp hi lj b fi ls lp l lq lr">def sliding_window(elements, window_size):<br/>    <br/>    if len(elements) &lt;= window_size:<br/>       return elements</span><span id="2e22" class="ln jp hi lj b fi ls lp l lq lr">    for i in range(len(elements)- window_size + 1):<br/>        print(elements[i:i+window_size])</span><span id="1202" class="ln jp hi lj b fi ls lp l lq lr">sliding_window(s, 2)</span><span id="c7b8" class="ln jp hi lj b fi ls lp l lq lr">Output: </span><span id="7c5f" class="ln jp hi lj b fi ls lp l lq lr">ei <br/>id <br/>db <br/>ba <br/>ao <br/>oo <br/>oo</span></pre><h1 id="5c71" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">总结:</h1><p id="aea7" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">在本文中，我们讨论了什么是滑动窗口，并使用以下方法实现了滑动窗口</p><ul class=""><li id="2880" class="lu lv hi ki b kj ld km le kp lw kt lx kx ly lb lz ma mb mc bi translated">使用函数的滑动窗口</li><li id="f00a" class="lu lv hi ki b kj md km me kp mf kt mg kx mh lb lz ma mb mc bi translated">使用发生器的滑动窗口</li><li id="5185" class="lu lv hi ki b kj md km me kp mf kt mg kx mh lb lz ma mb mc bi translated">琴弦滑动窗口</li></ul></div><div class="ab cl ml mm gp mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="hb hc hd he hf"><p id="0893" class="pw-post-body-paragraph kg kh hi ki b kj ld ij kl km le im ko kp lf kr ks kt lg kv kw kx lh kz la lb hb bi translated"><em class="ms">原载于</em><a class="ae jn" href="https://dineshkumarkb.com/tech/implement-a-sliding-window-using-python/" rel="noopener ugc nofollow" target="_blank"><em class="ms">https://dineshkumarkb.com</em></a><em class="ms">。</em></p></div></div>    
</body>
</html>