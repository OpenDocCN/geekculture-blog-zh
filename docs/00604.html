<html>
<head>
<title>Chi-Squared Test with Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python进行卡方检验</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/00-machine-learning-notes-chi-squared-test-d9e64542cce0?source=collection_archive---------9-----------------------#2021-03-07">https://medium.com/geekculture/00-machine-learning-notes-chi-squared-test-d9e64542cce0?source=collection_archive---------9-----------------------#2021-03-07</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="e35b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">本文是对使用统计测试来执行机器学习分类任务的低级介绍。我打算在广泛的基础上介绍这些概念，以便传达数学和机器学习之间的重叠。</p></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><p id="5d7e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我在Kaggle上发现了一个很棒的数据集，叫做动物园数据。</p><div class="jk jl ez fb jm jn"><a href="https://www.kaggle.com/raghunathangrdr/zoo-data-dataset" rel="noopener  ugc nofollow" target="_blank"><div class="jo ab dw"><div class="jp ab jq cl cj jr"><h2 class="bd hj fi z dy js ea eb jt ed ef hh bi translated">动物园数据集</h2><div class="ju l"><h3 class="bd b fi z dy js ea eb jt ed ef dx translated">Kaggle是世界上最大的数据科学社区，拥有强大的工具和资源来帮助您实现您的数据…</h3></div><div class="jv l"><p class="bd b fp z dy js ea eb jt ed ef dx translated">www.kaggle.com</p></div></div><div class="jw l"><div class="jx l jy jz ka jw kb kc jn"/></div></div></a></div><p id="5784" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您打算用不同的参数重新创建这个演示，请使用上面的链接下载. csv。</p><p id="5ea9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们有了数据集，让我们来回答这个问题:“有羽毛的动物会下蛋吗？”</p></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="da9b" class="km kn hi ki b fi ko kp l kq kr">import pandas as pd<br/>from scipy.stats import chi2_contingency<br/>import seaborn as sns<br/>import matplotlib.pyplot as plt</span></pre><p id="fdab" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">注意:根据我的经验，有时当我在Windows上时，我在使用pip安装库时会遇到问题。避免pip错误的一个方法是使用轮子构建库。我喜欢创建一个专门存放我的车轮的文件夹。然后我从这里下载(<a class="ae ks" href="https://www.lfd.uci.edu/~gohlke/pythonlibs/" rel="noopener ugc nofollow" target="_blank">https://www.lfd.uci.edu/~gohlke/pythonlibs/</a>)。在命令提示符下，您需要做的就是:</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="957b" class="km kn hi ki b fi ko kp l kq kr">cd \C:\path\to\wheel\<br/>pip install your_wheel.whl</span></pre><p id="2fb3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您正在努力安装库，希望您可以利用这个技巧。我导入Pandas来处理数据帧，并从。csv，SciPy中用于执行卡方检验的模块，Seaborn和PyPlot to graph。</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="8efe" class="km kn hi ki b fi ko kp l kq kr">path = '/Users/amadzarak/PycharmProjects/Kaggle/zoo_data-1.csv'<br/>zooData = pd.read_csv(path)</span></pre><p id="406b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里我只是声明了一个名为path的变量，它是zoo_data-1文件的完整路径。然后我声明了从Pandas调用read_csv函数的变量zooData，并输入了path变量。现在我们有一个熊猫数据框架。</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="257a" class="km kn hi ki b fi ko kp l kq kr">contingency= pd.crosstab(zooData['feathers'], zooData['eggs'])</span></pre><p id="378d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是我关注数据框中的两列的地方。让我们先来看看目前为止我们所拥有的:</p><figure class="kd ke kf kg fd ku er es paragraph-image"><div class="er es kt"><img src="../Images/0c0501c4ee89875626998fa073bb383f.png" data-original-src="https://miro.medium.com/v2/resize:fit:428/format:webp/1*l87IMIs0kT1h6QEnxeBe0w.png"/></div><figcaption class="kw kx et er es ky kz bd b be z dx">Output by running: print(contingency)</figcaption></figure><p id="a7b7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">解释这个输出的含义似乎是谨慎的。数据集基于值0和1来指示指定属性的存在。因此，第一栏可以翻译为:“不下蛋。”所以，生蛋和长羽毛的动物的数量是20。</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="8921" class="km kn hi ki b fi ko kp l kq kr">c, p, dof, expected = chi2_contingency(contingency)</span></pre><p id="ee85" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里我们声明完成卡方检验所需的变量。我可以通过打印变量来检查工作。例如，我想确保自由度是正确的，因此我简单地运行:print(dof)。因为输出“1”对于2x2的数据表是正确的，所以我确信到目前为止我没有出错。</p><p id="a267" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">绘制这个数据集的一个挑战是找出一个好的图表样式。散点图不适合显示数据:</p><figure class="kd ke kf kg fd ku er es paragraph-image"><div class="er es la"><img src="../Images/b03b6fa081e364b0826f6239a9a11dc1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1262/format:webp/1*JzcDh1ND_qpGLmhhjHTPPw.png"/></div></figure><p id="e899" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">可以看出，这是一个尴尬的展示。所以我选定了一张热图。</p><p id="e5a9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">热图是我们展示数据的好方法。</p><figure class="kd ke kf kg fd ku er es paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="er es lb"><img src="../Images/7932e64f86ce9da265881635dcbf45b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UUcWFFvvVZYnHSqZ3A-O-g.png"/></div></div></figure></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><p id="5aaa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以我们来分析一下我们所拥有的。我们有一个p值和我们的问题。</p><figure class="kd ke kf kg fd ku er es paragraph-image"><div class="er es lg"><img src="../Images/48dda7fe7a8ce3cfdeb3c1bf61e67c6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:430/format:webp/1*VfZhxYg110gX88IhiXGqZA.png"/></div><figcaption class="kw kx et er es ky kz bd b be z dx">our p-value.</figcaption></figure><p id="bc5a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于卡方检验，问题需要采用无效假设和替代假设的形式。</p><figure class="kd ke kf kg fd ku er es paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="er es lh"><img src="../Images/1eb410c2ea1d508f73b73fbdc2136c84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zE6-m0YMUjMdvYQpORE0qQ.png"/></div></div></figure><p id="171c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">p值小于0.05，这意味着我们在95%的置信度下拒绝零假设。无效假设是蛋和羽毛是独立的。根据我们正在研究的数据，人们可以得出结论，有羽毛的动物会产卵。</p><p id="e843" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">总结:我记得在我高中的统计课上，进行卡方检验是多么乏味。Python是一个非常好的工具。我震惊于诚实是如此容易，因为我以前的经历会让我相信这一点。执行这样的测试可以帮助制作机器学习分类器的过程。</p></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="5fdc" class="km kn hi ki b fi ko kp l kq kr">import pandas as pd<br/>from scipy.stats import chi2_contingency<br/>import seaborn as sns<br/>import matplotlib.pyplot as plt<br/>path = '/Users/amadzarak/PycharmProjects/Kaggle/zoo_data-1.csv'<br/>zooData = pd.read_csv(path)<br/>contingency= pd.crosstab(zooData['feathers'], zooData['eggs'])<br/>#print(contingency)<br/>c, p, dof, expected = chi2_contingency(contingency)<br/>print(p)<br/>plt.figure(figsize=(12,8))<br/>sns.heatmap(contingency, annot=True, cmap="YlGnBu")<br/>plt.show()</span></pre><p id="1ebf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">全部代码。</p></div></div>    
</body>
</html>