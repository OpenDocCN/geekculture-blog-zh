<html>
<head>
<title>Step-by-Step Guide on Setting Up CloudFormation IAM User for Github Actions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为Github操作设置CloudFormation IAM用户的分步指南</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/step-by-step-guide-on-setting-up-cloudformation-iam-role-for-github-actions-cb227234a58b?source=collection_archive---------21-----------------------#2021-06-27">https://medium.com/geekculture/step-by-step-guide-on-setting-up-cloudformation-iam-role-for-github-actions-cb227234a58b?source=collection_archive---------21-----------------------#2021-06-27</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/0d12d0d696e4eacdb768ef132d825438.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*WZGEapXCdGIWQMJb"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Photo by <a class="ae iu" href="https://unsplash.com/@jakobowens1?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Jakob Owens</a> on <a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="608b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">过去几周，我写了几篇关于AWS CloudFormation的文章。由于AWS CloudFormation也被称为代码基础设施，所以每当我更改CloudFormation模板时，我很想了解如何自动化部署。</p><p id="1928" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">所以在这篇文章中，我将分享<strong class="ix hj">的分步指南</strong>来创建一个IAM角色，Github Action稍后将使用它来部署CloudFormation堆栈。</p><p id="3a38" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">事不宜迟，我们开始吧</strong>。</p></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><h1 id="5ba7" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">步骤1-转到IAM仪表板并添加用户</h1><p id="bd21" class="pw-post-body-paragraph iv iw hi ix b iy ky ja jb jc kz je jf jg la ji jj jk lb jm jn jo lc jq jr js hb bi translated">首先，让我们访问AWS <a class="ae iu" href="https://console.aws.amazon.com/iam/home" rel="noopener ugc nofollow" target="_blank"> IAM仪表板</a>。然后，点击左侧导航栏中的“<strong class="ix hj">用户</strong>”，然后点击“<strong class="ix hj">添加用户</strong>”，如下图所示。</p><figure class="le lf lg lh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ld"><img src="../Images/1c46b5653b4f06f4d2dbf1995ee57729.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EdvDfRlCq7lFKZ7TaIf3hQ.png"/></div></div></figure></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><h1 id="ca4b" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">步骤2 —设置用户的编程访问权限</h1><p id="3683" class="pw-post-body-paragraph iv iw hi ix b iy ky ja jb jc kz je jf jg la ji jj jk lb jm jn jo lc jq jr js hb bi translated">在步骤2中，我将输入该用户的用户名，并将访问类型设置为<strong class="ix hj">编程访问</strong>。</p><p id="3fca" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">该用户将仅使用AWS API和SDK工具来构建和部署云形成堆栈。因此，我们不需要授予该用户对AWS管理控制台的访问权限。</p><figure class="le lf lg lh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es li"><img src="../Images/0214768785339ac5098dbd9e0cc8efae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mFSahwwpNXgbpGZihACuUg.png"/></div></div></figure></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><h1 id="c00f" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">步骤3 —将CloudFormation完全访问策略附加到用户</h1><p id="6df1" class="pw-post-body-paragraph iv iw hi ix b iy ky ja jb jc kz je jf jg la ji jj jk lb jm jn jo lc jq jr js hb bi translated">现在，我将把<strong class="ix hj">AWSCloudFormationFullAccess</strong>策略分配给IAM用户，因为它需要权限来创建/更新CloudFormation堆栈。</p><blockquote class="lj lk ll"><p id="d3db" class="iv iw lm ix b iy iz ja jb jc jd je jf ln jh ji jj lo jl jm jn lp jp jq jr js hb bi translated">此外，如果您计划通过CloudFormation创建EC2实例，您还需要将<strong class="ix hj"> AWSEC2FullAccess </strong>策略分配给IAM用户。</p><p id="6905" class="iv iw lm ix b iy iz ja jb jc jd je jf ln jh ji jj lo jl jm jn lp jp jq jr js hb bi translated">这是因为CloudFormation权限仅用于CloudFormation操作，而EC2实例等底层资源需要EC2相关的权限。</p></blockquote><figure class="le lf lg lh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lq"><img src="../Images/f955f279bdd31fe43ff5d81163678a0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8MPBFOedxTY0AnMGnJnvYw.png"/></div></div></figure></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><h1 id="c4d3" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">第4步—审查用户并下载。凭据的csv文件</h1><p id="b895" class="pw-post-body-paragraph iv iw hi ix b iy ky ja jb jc kz je jf jg la ji jj jk lb jm jn jo lc jq jr js hb bi translated">在此步骤中，我们将查看用户创建并下载包含已创建用户凭证的<code class="du lr ls lt lu b">.csv</code>文件。</p><p id="312f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><code class="du lr ls lt lu b">csv</code>文件包含<strong class="ix hj">访问密钥ID </strong>和<strong class="ix hj">访问密钥秘密</strong>，我们将在Github动作中使用它们，这有助于我们自动化CloudFormation部署。更多详情请参考下面的截图。</p><blockquote class="lj lk ll"><p id="3a0d" class="iv iw lm ix b iy iz ja jb jc jd je jf ln jh ji jj lo jl jm jn lp jp jq jr js hb bi translated">最关键的部分是下载csv文件。因为如果你没有在最后一步下载它，并且忘记了密钥。你不可能拿回<strong class="ix hj">访问密钥秘密</strong>。您需要重新创建一组新的<strong class="ix hj">访问密钥ID </strong>和<strong class="ix hj">访问密钥秘密。</strong></p></blockquote><div class="le lf lg lh fd ab cb"><figure class="lv ij lw lx ly lz ma paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><img src="../Images/2e3e84feae6f32fca25bc79d5280fa92.png" data-original-src="https://miro.medium.com/v2/resize:fit:992/format:webp/1*zx51Pqc4Eax5Mtbf95AsMQ.png"/></div></figure><figure class="lv ij mb lx ly lz ma paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><img src="../Images/81b9fdd419adb92bd544ba3996ccbe01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1010/format:webp/1*ustt7_zUC6UvrFdyzcN8og.png"/></div></figure></div></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><h1 id="d8da" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">结论</h1><p id="3124" class="pw-post-body-paragraph iv iw hi ix b iy ky ja jb jc kz je jf jg la ji jj jk lb jm jn jo lc jq jr js hb bi translated">在这篇文章中，我分享了如何使用AWS IAM Dashboard为CloudFormation部署创建IAM角色。</p><p id="4ea0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在下一篇文章中，我将分享如何在Github Action中使用我们在这篇文章中创建的IAM角色。下面提供了链接。</p><div class="mc md ez fb me mf"><a href="https://aws.plainenglish.io/how-i-deploy-aws-cloudformation-stack-using-github-action-7f3e8a46fdfa" rel="noopener  ugc nofollow" target="_blank"><div class="mg ab dw"><div class="mh ab mi cl cj mj"><h2 class="bd hj fi z dy mk ea eb ml ed ef hh bi translated">如何使用Github Action部署AWS CloudFormation堆栈</h2><div class="mm l"><h3 class="bd b fi z dy mk ea eb ml ed ef dx translated">使用Github Action部署CloudFormation堆栈既简单又有趣</h3></div><div class="mn l"><p class="bd b fp z dy mk ea eb ml ed ef dx translated">aws .平原英语. io</p></div></div><div class="mo l"><div class="mp l mq mr ms mo mt io mf"/></div></div></a></div><p id="3e22" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">感谢您的阅读。</p></div></div>    
</body>
</html>