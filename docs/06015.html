<html>
<head>
<title>Headless WooCommerce &amp; Next.js: Set up Stripe and Create Checkout</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Headless WooCommerce &amp; Next.js:设置Stripe并创建Checkout</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/headless-woocommerce-next-js-set-up-stripe-and-create-checkout-d01333607a66?source=collection_archive---------4-----------------------#2021-08-04">https://medium.com/geekculture/headless-woocommerce-next-js-set-up-stripe-and-create-checkout-d01333607a66?source=collection_archive---------4-----------------------#2021-08-04</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/6f5c41db686f5b61564f4d83346084c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*BXTsu9lvW6aeQGSi"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Photo by <a class="ae iu" href="https://unsplash.com/@nadyeldems?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Dan Smedley</a> on <a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="1133" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这个拼图游戏的最后一块是建立一个Stripe帐户，并使用它来处理我们结账时的卡支付。</p></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><h1 id="2cc3" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">创建条带帐户</h1><p id="136e" class="pw-post-body-paragraph iv iw hi ix b iy ky ja jb jc kz je jf jg la ji jj jk lb jm jn jo lc jq jr js hb bi translated">首先，你需要注册一个Stripe账户，这是免费的，之后你就可以访问开发API密钥进行测试。Stripe dashboard对于开发人员来说非常方便，因为它可以让您看到活动日志，这样您就可以检查事情是否正常工作或为什么不正常工作。Stripe还提供了一个全面的测试卡列表，您可以使用它来测试各种情况(例如，资金不足、欺诈卡)。</p><p id="66b8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">回到开发API键。你在寻找‘可公开密钥’和‘秘密密钥’。如果你在仪表板上看不到它，那么浏览菜单选项:开发者-&gt; API密匙。我将这些键作为环境变量存储在我的应用程序中。可发布的密钥不必是秘密的，所以我用<code class="du ld le lf lg b">NEXT_PUBLIC_</code>作为前缀，但是我确保秘密密钥只在服务器端使用。</p><h1 id="e854" class="ka kb hi bd kc kd lh kf kg kh li kj kk kl lj kn ko kp lk kr ks kt ll kv kw kx bi translated">为WooCommerce插件安装Stripe</h1><p id="08fc" class="pw-post-body-paragraph iv iw hi ix b iy ky ja jb jc kz je jf jg la ji jj jk lb jm jn jo lc jq jr js hb bi translated">WooCommerce有一个名为“WooCommerce Stripe Gateway”的Stripe插件，它为你集成了Stripe。去你的WordPress网站下载这个插件并激活它。</p><p id="816b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">安装并激活插件后，你会在woo commerce-&gt; Settings-&gt; Payments下找到Stripe设置。在这里，我们希望确保<code class="du ld le lf lg b">Enable Stripe</code>和<code class="du ld le lf lg b">Enable Test Mode</code>的复选框被选中。然后输入你的<code class="du ld le lf lg b">Test Publishable Key</code>和你的<code class="du ld le lf lg b">Test Secret Key</code>。点击屏幕下方的<code class="du ld le lf lg b">Save Changes</code>！</p><p id="92bb" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果你有一个通过HTTPS服务的WordPress站点，而不是你的http://localhost，那么按照说明将webhook端点添加到你的Stripe帐户。这真的很有用，因为它允许Stripe与您的WooCommerce订单进行交流。对于测试，我们可以省略它，但是对于生产来说，它绝对值得配置。</p></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><figure class="ln lo lp lq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lm"><img src="../Images/26bcd794da920ca09c99ae608e0178d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hL88fjNnDoy2CVVv"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Photo by <a class="ae iu" href="https://unsplash.com/@rodgersm22?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Meghan Rodgers</a> on <a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="09cb" class="ka kb hi bd kc kd lh kf kg kh li kj kk kl lj kn ko kp lk kr ks kt ll kv kw kx bi translated">使用条带SDK</h1><p id="e126" class="pw-post-body-paragraph iv iw hi ix b iy ky ja jb jc kz je jf jg la ji jj jk lb jm jn jo lc jq jr js hb bi translated">Stripe有一个<a class="ae iu" href="https://stripe.com/docs/stripe-js/react#setup" rel="noopener ugc nofollow" target="_blank"> React特定的SDK和一个关于如何设置它的教程</a>。如果这个教程还不够，那么<a class="ae iu" href="https://stripe.com/docs/payments/integration-builder" rel="noopener ugc nofollow" target="_blank"> Stripe还有另一个深入的教程</a>，教你如何设置自定义支付流程，包括你需要包含的服务器端和客户端。</p><p id="e67a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果你想和我一起学习，那么我用了以下几个包:</p><pre class="ln lo lp lq fd lr lg ls lt aw lu bi"><span id="11f9" class="lv kb hi lg b fi lw lx l ly lz">yarn add @stripe/react-stripe-js --dev<br/>yarn add @stripe/stripe-js -- dev<br/>yarn add stripe --dev</span></pre><p id="0b89" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">条纹元素提供者</strong></p><p id="0c07" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为了安全地捕获卡的详细信息，我们将依靠条纹元素。条纹元素是“提供一种灵活的方式来安全地收集React应用程序中的支付信息”的组件。最重要的是，您可以依靠Stripe安全地处理敏感数据，而不会接触到您的服务器。</p><p id="1228" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们最终将有一个结帐表单组件，我们希望在其中使用Stripe元素。为了使我们能够使用Stripe元素，我们需要用Elements provider包装checkout表单组件。</p><figure class="ln lo lp lq fd ij"><div class="bz dy l di"><div class="ma mb l"/></div></figure><p id="62bc" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">注意，我们还使用了<code class="du ld le lf lg b">loadStripe</code>方法来创建一个带有可发布键的Stripe对象。这个Stripe对象被传递给我们的提供者，因此我们知道我们与哪个Stripe帐户相关联。</p><p id="e9ff" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">条纹元素组件</strong></p><p id="e11a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们可以使用许多不同的条带元素组件<a class="ae iu" href="https://stripe.com/docs/stripe-js/react#available-element-components" rel="noopener ugc nofollow" target="_blank">和一个流行的组件<code class="du ld le lf lg b">CardElement</code>，它提供了一个一体化组件来捕获所有必要的卡细节。简单。</a></p><p id="ced9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">但是，我想向您展示如何使用其他元素来创建不同的UI。为此，我想使用<code class="du ld le lf lg b">CardNumberElement</code>、<code class="du ld le lf lg b">CardExpiryElement</code>和<code class="du ld le lf lg b">CardCvcElement</code>，这样我仍然可以捕捉这些重要的卡片细节，但我可以灵活地显示它们。</p><figure class="ln lo lp lq fd ij"><div class="bz dy l di"><div class="ma mb l"/></div></figure><p id="9b20" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为了在UI中给你额外的灵活性，你可以给组件一个<code class="du ld le lf lg b">className</code>,并使用普通的CSS样式。这很有用，因为条纹样式对象是有限的。做<a class="ae iu" href="https://stripe.com/docs/js/appendix/style" rel="noopener ugc nofollow" target="_blank">检查条纹文档</a>看看你能在他们的样式对象中玩什么。</p><p id="bed3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们现在有了一种安全地捕获卡细节的方法，所以接下来要处理的事情实际上是使用卡来支付某些东西。</p><p id="4691" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">结账流程</strong></p><p id="8164" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们有这样一个场景，一个用户在购物车里放了一些东西，他们想结账并用卡购买。</p><p id="c82c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="mc"> 1。创建条纹支付意向</em></p><p id="0f42" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们需要做的第一件事是创建一个条纹支付意向。从根本上来说，我们需要创建一个支付意图的只是<code class="du ld le lf lg b">amount</code>和<code class="du ld le lf lg b">currency</code>。然后，我们使用Stripe方法创建一个付款意向，成功返回一个包含<code class="du ld le lf lg b">client_secret</code>的对象。这个<code class="du ld le lf lg b">client_secret</code>就是我们后面完成支付所需要的。</p><p id="712a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">至关重要的是，我们要计算服务器端的数量。这样做的原因是，我们传递到Stripe支付意图中的金额不能被轻易篡改。我们的购物车已经包含了WooCommerce的产品id和数量，所以我使用这些信息从服务器端的WooCommerce获取价格，并计算总计。我在<code class="du ld le lf lg b">\pages\api</code>文件夹中创建了<code class="du ld le lf lg b">create-payment-intent.ts</code>，以便创建一个定制的API路由。这种创建API路由的方法是Next.js独有的(但是您可以看到它有多简单)。</p><figure class="ln lo lp lq fd ij"><div class="bz dy l di"><div class="ma mb l"/></div></figure><p id="1308" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">重要提示:虽然在上面的代码中没有立即注意到，但是数量是以特定的格式表示的，其中1.00表示为100。这在处理货币价值时很常见。Javascript有一个恼人的问题，浮点舍入误差，有时会导致计算浮点数时出现不正确的数学结果。在我们的例子中，这可能意味着在某些情况下你可能会损失一便士，这是一个很小的数额，但不应该有任何差异。将1.00这样的浮点数转换成100这样的整数可以避免这些问题。</p><p id="6709" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在上面的代码中，我希望返回支付意图ID和客户机密。尽管我们以后会用到这些，但我们希望避免保存客户端机密，因为恶意用户很容易获取它。</p><p id="c56d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="mc"> 2。创建WooCommerce订单</em></p><p id="38ca" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们之前已经介绍了如何创建WooCommerce订单，除了我们可以将Stripe支付意向ID传递到<code class="du ld le lf lg b">meta_data</code>字段之外，这里没有实质性的区别。这样做的原因是，这一特定订单和特定的Stripe支付意图之间存在联系。当设置了webhooks，并且您正在使用WordPress/WooCommerce的生产版本时，您可以直接从WooCommerce仪表板而不是Stripe仪表板退款，因为订单与特定的付款意向相关联，并且WooCommerce Stripe Gateway使您能够处理退款。</p><pre class="ln lo lp lq fd lr lg ls lt aw lu bi"><span id="5031" class="lv kb hi lg b fi lw lx l ly lz">const data: Order = {<br/>  payment_method: "stripe",<br/>  payment_method_title: "Card",<br/>  set_paid: false,<br/>  line_items: lineItems,<br/>  meta_data: [<br/>    {<br/>      key: "_stripe_intent_id",<br/>      value: paymentIntentId,<br/>    },<br/>  ],<br/>};</span></pre><p id="a45c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">上面的代码是您在将付款意向ID作为<code class="du ld le lf lg b">meta_data</code>包含时必须遵守的格式示例。注意它是一个数组中的对象。密钥<code class="du ld le lf lg b">_stripe_intent_id</code>是特定的，值是您之前收到的付款意向ID。</p><p id="d61f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，我们实际上已经将我们的WooCommerce订单与我们的Stripe支付意向相关联。</p><p id="55f1" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="mc"> 3。确认条纹支付</em></p><p id="4db6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们已经创建了一个条纹付款意向，并指定了我们想要处理的金额。接下来要做的是获取卡的详细信息，并根据支付意图确认支付。</p><p id="fc0b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们已经准备好了条带元素组件来捕获卡的详细信息，那么我们如何实际获取它收集的数据呢？为此，我们使用<code class="du ld le lf lg b">useElements</code>钩子。用<code class="du ld le lf lg b">const elements = useElements()</code>实例化它。</p><p id="3fd1" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果您正在使用一体化条纹元素组件<code class="du ld le lf lg b">CardElement</code>，那么您可以通过<code class="du ld le lf lg b">const cardElement = elements.getElement(CardElement)</code>获得卡的详细信息。在我们的例子中，我使用了三个不同的组件:<code class="du ld le lf lg b">CardNumberElement</code>、<code class="du ld le lf lg b">CardExpiryElement</code>和<code class="du ld le lf lg b">CardCvcElement</code>。那么我们如何获得卡的详细信息呢？</p><p id="be15" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">其实和用<code class="du ld le lf lg b">CardElement</code>一样简单。我们没有传入<code class="du ld le lf lg b">CardElement</code>，而是传入<code class="du ld le lf lg b">CardNumberElement</code>，Stripe知道从其他组件获取数据。</p><figure class="ln lo lp lq fd ij"><div class="bz dy l di"><div class="ma mb l"/></div></figure><p id="25e8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们有来自付款意向的<code class="du ld le lf lg b">client_secret</code>。我们有包含我们的卡细节的<code class="du ld le lf lg b">cardElement</code>。现在我们准备确认付款。</p><p id="7d47" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为此，我们使用<code class="du ld le lf lg b">useStripe</code>钩。导入它并用<code class="du ld le lf lg b">const stripe = useStripe()</code>实例化它，然后我们可以使用<code class="du ld le lf lg b">confirmCardPayment</code>方法。</p><p id="a064" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><code class="du ld le lf lg b">confirmCardPayment</code>接受两个参数:客户秘密和支付方式。我们有客户端的秘密，但是我们还没有完整的Stripe PaymentMethod对象。</p><p id="0ac9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">支付方法对象的基础是通过我们之前获得的<code class="du ld le lf lg b">cardElement</code>。这是我们可以传入<code class="du ld le lf lg b">confirmCardPayment</code>的基本支付方式对象。</p><pre class="ln lo lp lq fd lr lg ls lt aw lu bi"><span id="7473" class="lv kb hi lg b fi lw lx l ly lz">{<br/>  payment_method: {<br/>    card: cardElement,<br/>  },<br/>}</span></pre><p id="9889" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">当然，您可以根据需要添加更多的细节(包括<code class="du ld le lf lg b">receipt_email</code>、<code class="du ld le lf lg b">billing_details</code>和<code class="du ld le lf lg b">shipping</code>通常很方便)。</p><pre class="ln lo lp lq fd lr lg ls lt aw lu bi"><span id="33a4" class="lv kb hi lg b fi lw lx l ly lz">// create Stripe confirm payment method data<br/>// TODO add more data for Stripe to hold if necessary.  Receipt email is usually a good idea</span><span id="c82d" class="lv kb hi lg b fi md lx l ly lz">const paymentMethod = {<br/>  payment_method: {<br/>  card: elements.getElement(CardNumberElement)!,<br/>  // billing_details: {},<br/>  // shipping: {},<br/>  // receipt_email: ''<br/>  },<br/>};</span><span id="6f77" class="lv kb hi lg b fi md lx l ly lz">// use Stripe client secret to process card payment method<br/>try {<br/>  const result = await stripe.confirmCardPayment(clientSecret, paymentMethod);<br/>  if (result.error) {<br/>    throw new Error(result.error.message);<br/>  }<br/>  return result;<br/>} catch (error) {<br/>  throw new Error(error);<br/>}</span></pre><p id="0df7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">一个你称之为<code class="du ld le lf lg b">stripe.confirmCardPayment(clientSecret, paymentMethod)</code>的人，就是这样！该卡已经充值，您已经创建了一个与Stripe支付意向相关联的WooCommerce订单。</p><p id="78fb" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">接下来的步骤</strong></p><p id="cddc" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您可以考虑以下几个步骤。这些是我在代码中包含的，欢迎你来看看我在GitHub上是怎么做的。</p><p id="a3e3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">卡支付表单验证—利用Stripe的错误处理功能获得关于卡详细信息是否不正确的实时反馈。</p><p id="56fa" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">加载指示器——创建Stripe付款意向、WooCommerce订单和确认付款可能需要一段时间，因此使用某种加载指示器锁定表单是个好主意。</p><p id="2ccb" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">重置Redux Cart —成功完成事务后，重置Redux Cart状态。</p><p id="2c85" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">stripe web hooks——记住，只有当你的WordPress/WooCommerce网站在HTTPS提供服务时，你才能使用它。但是，这样做是值得的，因为您可以在卡支付成功时得到通知，并使用webhook触发一个函数来更新您的WooCommerce订单的状态。</p><p id="3a8b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">GraphQl——你可以使用graph QL来代替WooCommerce REST API，这是非常值得的。您可以在一个查询中获得跨多个API端点的所需数据，并高效地获取所需数据，忽略不需要的数据。</p><p id="a3aa" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">WooCommerce产品——到目前为止，我们探索了简单的产品。但是，您可以尝试产品的变化，看看如何使用它。您将获得一个<code class="du ld le lf lg b">variation_id</code>和一个<code class="du ld le lf lg b">product_id</code>，并且您可能还需要使用带有<a class="ae iu" href="https://woocommerce.github.io/woocommerce-rest-api-docs/?javascript#retrieve-a-product-variation" rel="noopener ugc nofollow" target="_blank"> WooCommerce REST API </a>的<code class="du ld le lf lg b">/variations</code>端点来检索变体。</p><p id="d493" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">响应式设计——我展示的代码目前只在手机上看起来不错。我们希望添加断点和媒体查询来创建一个响应的应用程序。</p><h1 id="b637" class="ka kb hi bd kc kd lh kf kg kh li kj kk kl lj kn ko kp lk kr ks kt ll kv kw kx bi translated">最后的话</h1><p id="6814" class="pw-post-body-paragraph iv iw hi ix b iy ky ja jb jc kz je jf jg la ji jj jk lb jm jn jo lc jq jr js hb bi translated">我希望你喜欢向你介绍Headless WooCommerce和Next.js的这一系列文章。我试图向你展示如何实现一个基本的电子商务平台的精简版本，你可以在上面添加许多层。正如所有事情一样，在前进的道路上不可避免地会有挫折，我可能忽略了这些文章中的一些重要细节。我很乐意帮忙，但是我可以，所以找我，让我们联系。</p><p id="9214" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">对于那些坚持到现在的人来说:<a class="ae iu" href="https://github.com/leojbchan/woocommerce-nextjs" rel="noopener ugc nofollow" target="_blank">这里是我的公共GitHub的链接，带有这个woocommerce-nextjs例子的代码</a>。</p></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><p id="a464" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">第1部分:用WooCommerce创建一个本地WordPress</p><p id="f895" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae iu" href="https://leojbchan.medium.com/headless-woocommerce-next-js-set-up-woocommerce-test-with-postman-5e7859c65626" rel="noopener">第2部分:用邮递员</a>建立WooCommerce &amp;测试</p><p id="ad3a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae iu" href="https://leojbchan.medium.com/headless-woocommerce-next-js-set-up-next-js-b8d2193b2688" rel="noopener">第3部分:设置Next.js </a></p><p id="b99d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae iu" href="https://leojbchan.medium.com/headless-woocommerce-next-js-set-up-styled-components-with-typescript-and-next-js-18cc047ccd79" rel="noopener">第4部分:用TypeScript和Next.js设置样式组件</a></p><p id="9883" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae iu" href="https://leojbchan.medium.com/headless-woocommerce-next-js-display-products-and-create-orders-593a6c5aee86" rel="noopener">第五部分:展示产品并创建订单</a></p><p id="e794" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae iu" href="https://leojbchan.medium.com/headless-woocommerce-next-js-set-up-redux-toolkit-for-state-management-c605adda58fe" rel="noopener">第六部分:建立Redux状态管理工具包</a></p><p id="907f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae iu" href="https://leojbchan.medium.com/headless-woocommerce-next-js-create-a-cart-8a3e49b90076" rel="noopener">第7部分:创建购物车</a></p><p id="39be" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae iu" href="https://leojbchan.medium.com/headless-woocommerce-next-js-set-up-stripe-and-create-checkout-d01333607a66" rel="noopener">第8部分:设置条带并创建检验</a></p></div></div>    
</body>
</html>