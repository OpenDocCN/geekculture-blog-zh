<html>
<head>
<title>How to Send Form’s Data with Fetch using GET, POST, PUT, DELETE and Catching with Express.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Express.js的GET、POST、PUT、DELETE和Fetch发送表单数据</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/how-to-send-forms-data-with-fetch-using-get-post-put-delete-and-catching-with-express-js-bfdb85b99709?source=collection_archive---------2-----------------------#2021-12-16">https://medium.com/geekculture/how-to-send-forms-data-with-fetch-using-get-post-put-delete-and-catching-with-express-js-bfdb85b99709?source=collection_archive---------2-----------------------#2021-12-16</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/2cdc6efc52952e2987af25f5d7fae087.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*b6woHD1s-K8zBLmW.jpg"/></div></div></figure><div class=""/><p id="eb25" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">又见面了。很抱歉延迟了，但这是很好的信息，它有太多的数据要分析，但它是值得的，我们将使用GET，POST，PUT，DELETE和fetch方法，最棒的是，我们将使用Express.js捕捉所有数据，这太棒了！<a class="ae jo" href="https://github.com/rodrigofigueroa/formsexpress" rel="noopener ugc nofollow" target="_blank">我来分享一下代码</a>。</p><p id="f353" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">YouTube上的视频<br/>-目录<br/>-NPM<br/>-结构<br/> -Express.js服务器<br/> -GET请求方法<br/> -POST请求方法<br/> -POST请求方法使用Fetch <br/> -PUT请求方法使用Fetch <br/> -DELETE请求方法使用Fetch<br/>-结论</p><p id="ee4f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你愿意，你也可以看！！</p><figure class="jp jq jr js fd hk"><div class="bz dy l di"><div class="jt ju l"/></div></figure><h1 id="cc44" class="jv jw ht bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">创建目录</h1><p id="5b26" class="pw-post-body-paragraph iq ir ht is b it kt iv iw ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn hb bi translated">在这里您可以添加包JSON和node_modules、视图、布局和我们的JavaScript文件。</p><figure class="jp jq jr js fd hk er es paragraph-image"><div class="er es ky"><img src="../Images/dbe190c4b12f2e629a28ee65e5173fb3.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/1*wVYP6Gz1R3y9-uD_zPJYbA.png"/></div><figcaption class="kz la et er es lb lc bd b be z dx">Example Directory</figcaption></figure><p id="f564" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我创建了一个目录调用formjs，你可以随便叫它什么，但是你需要一个你只需要这个项目的目录。</p><h1 id="851e" class="jv jw ht bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">启动包JSON</h1><p id="a384" class="pw-post-body-paragraph iq ir ht is b it kt iv iw ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn hb bi translated">您需要运行这个命令来初始化JSON包，然后我们就可以开始安装包了。</p><pre class="jp jq jr js fd ld le lf lg aw lh bi"><span id="92a3" class="li jw ht le b fi lj lk l ll lm">npm init -y</span></pre><p id="088e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这个命令将创建我们的包JSON</p><figure class="jp jq jr js fd hk er es paragraph-image"><div class="er es ln"><img src="../Images/25dd4ddd9be6b50c5ac49cc958013ad7.png" data-original-src="https://miro.medium.com/v2/resize:fit:472/format:webp/1*ZlCG8DmDnURlRfpLnlNJgg.png"/></div><figcaption class="kz la et er es lb lc bd b be z dx">Create Package JSON</figcaption></figure><h1 id="acca" class="jv jw ht bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">安装依赖项</h1><p id="bad8" class="pw-post-body-paragraph iq ir ht is b it kt iv iw ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn hb bi translated">我们需要安装快速和快速把手，使我们的服务器动态。</p><figure class="jp jq jr js fd hk er es paragraph-image"><div class="er es lo"><img src="../Images/205cb2b0bafe74d432705bf168ee2461.png" data-original-src="https://miro.medium.com/v2/resize:fit:756/format:webp/1*47ZbbZMIcCdUFQL2xqoGNQ.png"/></div><figcaption class="kz la et er es lb lc bd b be z dx">Example install dependencies</figcaption></figure><p id="5708" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">运行以下命令</p><pre class="jp jq jr js fd ld le lf lg aw lh bi"><span id="2b09" class="li jw ht le b fi lj lk l ll lm">npm i --save express express-handlebars</span></pre><p id="6b5e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">使用这些命令，我们实际上添加了express和express handlebars，我们将使用它们记住<strong class="is hu">express-handler在6.0.2之后，您需要调用引擎，而不是保存在变量上。</strong></p><h1 id="b6c2" class="jv jw ht bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">结构</h1><p id="20c5" class="pw-post-body-paragraph iq ir ht is b it kt iv iw ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn hb bi translated">结构很简单，只需创建一个目录调用视图，在里面，我们需要创建布局，并添加所有的视图和布局，我们需要为该项目，在这种情况下，主页，表单，404，500，主，谢谢，这就是现在所有的。</p><figure class="jp jq jr js fd hk er es paragraph-image"><div class="er es lp"><img src="../Images/79d2c272b27e57e5b39dc4e71410577c.png" data-original-src="https://miro.medium.com/v2/resize:fit:482/format:webp/1*jM8VRNBP_IEj-Ndoy2mkbg.png"/></div><figcaption class="kz la et er es lb lc bd b be z dx">Example structure handlebars</figcaption></figure><p id="854b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后，我们需要向每个视图和主视图添加信息</p><p id="8349" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">到主页(布局)</p><figure class="jp jq jr js fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lq"><img src="../Images/00952771dd5ad3b20e3ba13285af7ce2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hCEe_oDfxq2PJqMCtT6YhA.png"/></div></div><figcaption class="kz la et er es lb lc bd b be z dx">Example adding information to the main layout page</figcaption></figure><figure class="jp jq jr js fd hk er es paragraph-image"><div class="er es lr"><img src="../Images/58d9bfc273bb80ce3caaf192f77e699c.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/format:webp/1*rY-ryMKGwByP5hJqpVpxSQ.png"/></div><figcaption class="kz la et er es lb lc bd b be z dx">Example adding information to the Home view</figcaption></figure><figure class="jp jq jr js fd hk er es paragraph-image"><div class="er es ls"><img src="../Images/f05c67f8f953af00467ad9f147c5b164.png" data-original-src="https://miro.medium.com/v2/resize:fit:872/format:webp/1*35wm58zutIMXUHDcTwAsNw.png"/></div><figcaption class="kz la et er es lb lc bd b be z dx">Example adding information to the thank-you view</figcaption></figure><figure class="jp jq jr js fd hk er es paragraph-image"><div class="er es lt"><img src="../Images/0cc83b24790041830c33217691146395.png" data-original-src="https://miro.medium.com/v2/resize:fit:690/format:webp/1*nfLyDDmHyGFmV0mlg3AxXw.png"/></div><figcaption class="kz la et er es lb lc bd b be z dx">Example adding information to the 404 view</figcaption></figure><figure class="jp jq jr js fd hk er es paragraph-image"><div class="er es lu"><img src="../Images/53b4b1b0edd629211e2852a2f1b85d1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:670/format:webp/1*4u4psbudFFpHH0PcbffFTw.png"/></div><figcaption class="kz la et er es lb lc bd b be z dx">Example adding information to the 500 view</figcaption></figure><figure class="jp jq jr js fd hk er es paragraph-image"><div class="er es lv"><img src="../Images/a66a08b30118038f20d59c2ae119109e.png" data-original-src="https://miro.medium.com/v2/resize:fit:708/format:webp/1*55b9kILc_gYZvTs7qjhuLQ.png"/></div><figcaption class="kz la et er es lb lc bd b be z dx">Example adding information to the Form view</figcaption></figure><p id="32ec" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">请记住，在表单视图中，我们将添加更多信息以及表单和脚本来发送数据，现在添加h1是可以的。</p><h1 id="3ece" class="jv jw ht bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">创建Express.js服务器</h1><p id="2d42" class="pw-post-body-paragraph iq ir ht is b it kt iv iw ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn hb bi translated">然后，我们需要创建我们的Express.js服务器，我们开始添加变量并保存Express、express-handlebars、port，之后我们需要添加引擎并设置服务器的视图，之后我们需要处理页面的请求客户端(在这种情况下为home、form和thank you)并呈现其各自的视图。</p><figure class="jp jq jr js fd hk er es paragraph-image"><div class="er es lw"><img src="../Images/a4d6ea9ac7763cb596f0a40e725f30d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1254/format:webp/1*8lV8c_VYeG0M9hHeVTJiKA.png"/></div><figcaption class="kz la et er es lb lc bd b be z dx">Example to create simple server with Express.js</figcaption></figure><p id="d48a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如您所见，我们将引擎添加到手柄和默认布局(main ),然后我们指定引擎(在本例中为手柄),然后我们接受请求并更改为用户需要的渲染视图，最后，我们使用app.listen监听请求，在本例中服务器位于<a class="ae jo" href="http://127.0.0.1:1024" rel="noopener ugc nofollow" target="_blank"> http://127.0.0.1:1024 </a>上。</p><figure class="jp jq jr js fd hk er es paragraph-image"><div class="er es lx"><img src="../Images/9ff0425360e5edd49127be0954cfd7a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1350/format:webp/1*kMMwwbM8jddyugxndGynjA.png"/></div><figcaption class="kz la et er es lb lc bd b be z dx">Example 404 and 500 views</figcaption></figure><p id="15ce" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们不要忘记404和500服务器错误视图。</p><h1 id="7a78" class="jv jw ht bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">获取请求方法</h1><p id="a80e" class="pw-post-body-paragraph iq ir ht is b it kt iv iw ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn hb bi translated">在本例中，我们将从服务器获取所有用户。</p><p id="661b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们打开我们的server.js文件并创建一个名为users的变量，它将是一个对象(USERS)数组</p><figure class="jp jq jr js fd hk er es paragraph-image"><div class="er es ly"><img src="../Images/8e2fc9c005518053e56b65751b15e058.png" data-original-src="https://miro.medium.com/v2/resize:fit:1198/format:webp/1*pB1lqPOinpktvsd_2DuyuQ.png"/></div><figcaption class="kz la et er es lb lc bd b be z dx">Example variable Users inside our server.js file</figcaption></figure><p id="ed08" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">之后，我们需要创建对客户端的响应，添加URL和带有请求和响应参数的函数，它将以JSON格式响应用户。</p><figure class="jp jq jr js fd hk er es paragraph-image"><div class="er es lz"><img src="../Images/bf9374f9e0394ec4ab5bab7c78430552.png" data-original-src="https://miro.medium.com/v2/resize:fit:1246/format:webp/1*CozXVNVInrm8a31DLfnJKw.png"/></div><figcaption class="kz la et er es lb lc bd b be z dx">Example complete for GET, response USERS</figcaption></figure><p id="5b07" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后，我们应该转到表单视图，添加id为“users”的ul、id为“getUsr”的li和button HTML标记，这样我们就可以开始了</p><figure class="jp jq jr js fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es ma"><img src="../Images/6497409d39e825314cbf76d852862db3.png" data-original-src="https://miro.medium.com/v2/resize:fit:728/format:webp/1*1sdj_4z9KWE8vw7A5bV-EA.png"/></div></div><figcaption class="kz la et er es lb lc bd b be z dx">Example adding tags to our form view</figcaption></figure><p id="3fe5" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后我们创建一个脚本文件，我们将在其中添加所有的JavaScript和fetch方法来发送和获取数据，在本例中是获取数据。</p><p id="6465" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">将ul和按钮保存到一个变量中，如果需要，可以调用ul和btn</p><figure class="jp jq jr js fd hk er es paragraph-image"><div class="er es mb"><img src="../Images/ada224023dc0c45b38bad97f3af8ebe3.png" data-original-src="https://miro.medium.com/v2/resize:fit:892/format:webp/1*tpM7q00v48NafO8cMMXa6g.png"/></div><figcaption class="kz la et er es lb lc bd b be z dx">Example variable ul and btn saving tags</figcaption></figure><p id="3361" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要将用户添加到我们的ul中，我们需要使用fetch，但我们需要向按钮添加eventListener，使用preventDefault刷新页面，并使用get服务器的URL调用fetch方法，我们可以在那里获取用户，因为fetch use承诺我们使用then方法返回服务器给我们的JSON格式的数据，最后我们使用innerHTML添加来自服务器的所有用户，并使用join方法连接所有字符串。</p><figure class="jp jq jr js fd hk er es paragraph-image"><div class="er es mc"><img src="../Images/e77c77f4e04503e2f23370e93dc5d93d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1128/format:webp/1*QSIDL1EQ8DvDobFBgILfWQ.png"/></div><figcaption class="kz la et er es lb lc bd b be z dx">Example btn click event and geting all the users from the server and print in on the ul</figcaption></figure><p id="c97f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">从服务器获取用户的结果，我们可以看到我们将服务器中的所有用户添加到我们的ul和li标记中</p><figure class="jp jq jr js fd hk er es paragraph-image"><div class="er es md"><img src="../Images/8d43f98010302a951c031457a2f4628b.png" data-original-src="https://miro.medium.com/v2/resize:fit:760/format:webp/1*nRzO6a2vRw18pGoF26GN0Q.png"/></div><figcaption class="kz la et er es lb lc bd b be z dx">Example result get all the users from the server with GET</figcaption></figure><h1 id="f596" class="jv jw ht bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">发布请求方法</h1><p id="5667" class="pw-post-body-paragraph iq ir ht is b it kt iv iw ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn hb bi translated">首先，要发出POST请求，我们需要在server.js文件中创建方法。</p><figure class="jp jq jr js fd hk er es paragraph-image"><div class="er es me"><img src="../Images/d5d18b63a04fd54b253914d21b22e156.png" data-original-src="https://miro.medium.com/v2/resize:fit:970/format:webp/1*s3JSJDbwqy5Os8MDAIn3Dw.png"/></div><figcaption class="kz la et er es lb lc bd b be z dx">Example POST method with function and request and response parameters</figcaption></figure><p id="239f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，因为在本例中，我们将使用formData帖子，如<a class="ae jo" rel="noopener" href="/geekculture/how-to-send-data-from-a-form-and-receive-it-with-express-js-3c03af6275b2">我的上一篇帖子</a>，但我们将更改一些内容，我们需要指定URL，我们可以推送到用户数组，但这是为了下一个示例，在本例中，我们将把它发送到感谢页面。</p><p id="85bb" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们为表单视图创建表单</p><figure class="jp jq jr js fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mf"><img src="../Images/373cf540334ca84798921ec017486883.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*beHU0itN16psihMCQWAfYg.png"/></div></div><figcaption class="kz la et er es lb lc bd b be z dx">Example POST data with FormData</figcaption></figure><p id="20e5" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们创建表单，将方法post、action等属性添加到POST URL和id中，在这种情况下，与我们在server.js文件中编写的相同，然后我们需要将名称添加到每个输入中，因为这非常重要，服务器知道确切的信息和值。</p><figure class="jp jq jr js fd hk er es paragraph-image"><div class="er es mg"><img src="../Images/a31215b0630241fd5b70c433fa40904c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1386/format:webp/1*D9KT_gm8j3Cu4SypnydCeA.png"/></div><figcaption class="kz la et er es lb lc bd b be z dx">Example common form data page view</figcaption></figure><p id="b6f6" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">但是如果我们点击发送公共数据按钮，我们将一无所获:(</p><figure class="jp jq jr js fd hk er es paragraph-image"><div class="er es mh"><img src="../Images/b1aa9c246f3794882a2c9a10cc0fc80f.png" data-original-src="https://miro.medium.com/v2/resize:fit:408/format:webp/1*upC_d4v_FP2emVWHubaPag.png"/></div><figcaption class="kz la et er es lb lc bd b be z dx">Example output console log after the POST</figcaption></figure><p id="77fb" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hu">为什么！这真的很重要，伙计们！因为Node.js使用中间件，我们实际上需要给我们的server.js文件添加一个中间件</strong></p><figure class="jp jq jr js fd hk er es paragraph-image"><div class="er es mi"><img src="../Images/e3de9d0e1fa824c0755872c8a69db8b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:998/format:webp/1*XgJgygXxzmlaftUP21q1BA.png"/></div><figcaption class="kz la et er es lb lc bd b be z dx">Example adding Middlewares to our server.js file</figcaption></figure><p id="1d0b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在我们的服务器变量之后，我们需要添加这个中间件，第一个是简单的文本数据请求(<strong class="is hu"> x-www-form-urlencoded) </strong>，第二个是发送JSON数据(<strong class="is hu"> application/json </strong>)，在这种情况下，Express.js知道发送给客户端的是什么类型的数据，我们可以捕获它！</p><p id="f9d3" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">添加它们并重新运行我们的server.js，点击按钮就酷了！</p><figure class="jp jq jr js fd hk er es paragraph-image"><div class="er es mj"><img src="../Images/959ce4f687ba679406630b97ee783cd1.png" data-original-src="https://miro.medium.com/v2/resize:fit:518/format:webp/1*2457bGpoLSffb-cPylGPvQ.png"/></div><figcaption class="kz la et er es lb lc bd b be z dx">Example output server.js and data from Form</figcaption></figure><h1 id="f80d" class="jv jw ht bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">使用Fetch的POST请求方法</h1><p id="2361" class="pw-post-body-paragraph iq ir ht is b it kt iv iw ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn hb bi translated">然后我们将使用Fetch方法。首先，我们需要在server.js文件中创建POST方法，在这种情况下，我们将保存用户</p><figure class="jp jq jr js fd hk er es paragraph-image"><div class="er es lz"><img src="../Images/d708095923bdf63980b6237f5048e993.png" data-original-src="https://miro.medium.com/v2/resize:fit:1246/format:webp/1*7jIiTpPN-DDAQPjxWBPDNw.png"/></div><figcaption class="kz la et er es lb lc bd b be z dx">Example POST method in our server.js file with push to the USERS Array</figcaption></figure><p id="02af" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这是我们将新用户推送到我们的用户数组的时候。首先，我们需要用一个try和catch语句开始，这样我们就可以在服务器失败时保存服务器。其次，我们用find方法开始一个微小的验证来搜索用户名(我们可以添加更多的验证，但现在这很好)。添加一个if语句，如果存在，它将向用户发送用户存在的消息， 如果没有，它将循环搜索正确的id，我们需要使用Object.assign将{ id: n }连接到req.body对象，并通过这个pushin到USERS数组，并在响应中返回一个JSON，带有success: true，如果有任何问题，它将捕获它并向用户发送错误，我们可以稍后管理该错误。</p><p id="83d9" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们转到form视图，克隆我们的最后一个表单，但是改变id并删除方法和动作。</p><figure class="jp jq jr js fd hk er es paragraph-image"><div class="er es mk"><img src="../Images/e833b94fa761ab30446de7cc09857b1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1190/format:webp/1*Gz6Npep2VCeFUlJljZeh0g.png"/></div><figcaption class="kz la et er es lb lc bd b be z dx">Example creating form to the form view</figcaption></figure><p id="b5a3" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们创建我们的脚本，我们需要添加一个变量fm2并保存表单标签</p><figure class="jp jq jr js fd hk er es paragraph-image"><div class="er es ml"><img src="../Images/509e2aeba61eb6b7fd69bd7827632eb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:818/format:webp/1*PE_BRAsV4PDnl4lq7T9bag.png"/></div><figcaption class="kz la et er es lb lc bd b be z dx">Example saving the form_2 to the fm2 variable</figcaption></figure><p id="eb82" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">首先，我们需要向fm2添加一个eventListener，而不是click，我们使用submit，然后添加preventDefault方法来停止页面的刷新，并创建一个常量变量call o和empty object，在这里我们可以使用FormData的对象添加表单中的所有名称和值，其次，我们需要启动fetch方法并添加来自POST服务器的URL，我们必须指定方法， 头并添加主体，在这种情况下是POST，“Content-Type”:“application/json”和stringify o对象，添加一个然后接收原始数据，然后将其转换为JSON并将数据发送到控制台。</p><figure class="jp jq jr js fd hk er es paragraph-image"><div class="er es mm"><img src="../Images/a1681e19943244ab1b4b783c267b71c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1270/format:webp/1*hV115qdYvcBZK95Jr33lXQ.png"/></div><figcaption class="kz la et er es lb lc bd b be z dx">Example send POST data with fetch and with the submit of the Form</figcaption></figure><p id="b79d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们可以看到它正在向我们的服务器发送数据，不要忘记添加JSON中间件！</p><figure class="jp jq jr js fd hk er es paragraph-image"><div class="er es mn"><img src="../Images/9b6c0072bc208e73fc7d6be91484ed3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:598/format:webp/1*D070P3isEJRpRTtUlDhgMw.png"/></div><figcaption class="kz la et er es lb lc bd b be z dx">Example server’s output from client</figcaption></figure><p id="613f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们再次单击Get Users按钮，我们将从服务器中获得新用户，这真是太棒了！</p><figure class="jp jq jr js fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mo"><img src="../Images/9600e2f0fde6f0a6eccd967e8f88ac4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1374/format:webp/1*ZE3Ofwp1RJMu26VSxOCwLg.png"/></div></div><figcaption class="kz la et er es lb lc bd b be z dx">Example form view POST user and get all users again</figcaption></figure><h1 id="f3fd" class="jv jw ht bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">使用Fetch的PUT请求方法</h1><p id="71b9" class="pw-post-body-paragraph iq ir ht is b it kt iv iw ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn hb bi translated">使用put请求，我们可以从我们的USERS数组中更新用户，首先我们需要将PUT方法添加到我们的应用程序(服务器)server.js文件中，但是要搜索正确的用户，我们需要使用<strong class="is hu"> req.params.id </strong>在这种情况下，我们将再次使用find方法来搜索用户，如果找到用户，我们可以更新用户的姓名、年龄， 这取决于客户端的信息，这就是为什么我们添加if语句来检查是否存在，如果不存在，则响应为状态404找不到用户，这对于添加:id很重要，因为我们需要指定将被更新的用户的id。</p><figure class="jp jq jr js fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mp"><img src="../Images/7ab0a5fe3d0612d292ff0be8e8b4226b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*13vxuz2dDvwfuw5CkzdXnw.png"/></div></div><figcaption class="kz la et er es lb lc bd b be z dx">Example put method in our server,js file updating the user</figcaption></figure><p id="39be" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们创建表单来更新我们的用户</p><figure class="jp jq jr js fd hk er es paragraph-image"><div class="er es mq"><img src="../Images/4e52f61b60eb1d899a7a1b449436bc1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1284/format:webp/1*SHhSiiZSxPWOlyHSUuSW4g.png"/></div><figcaption class="kz la et er es lb lc bd b be z dx">Example create update form from form view</figcaption></figure><p id="94c3" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后让我们创建脚本，它与POST脚本几乎相同，我们只需要更改PUT方法和URL，因为在这种情况下，我们需要指定用户的id，并添加到URL以匹配我们需要更新的用户。</p><figure class="jp jq jr js fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mr"><img src="../Images/ce5e33f5e2ab3f88ff408a72c6f6f769.png" data-original-src="https://miro.medium.com/v2/resize:fit:1274/format:webp/1*DYtQI4rlMC2rjZms7qHkFQ.png"/></div></div><figcaption class="kz la et er es lb lc bd b be z dx">Example script to update the user with fetch</figcaption></figure><p id="8767" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们将Jake的用户更新为Flame Princess，我们需要再次单击get Users并查看发生了什么，我们可以看到我们正确地看到了更改。</p><figure class="jp jq jr js fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es ms"><img src="../Images/d83142856e8afcdf3bb96ae37d9e9cac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SwziyKZvUoHoG205UiFR7Q.png"/></div></div><figcaption class="kz la et er es lb lc bd b be z dx">Example update the user with fetch form view</figcaption></figure><figure class="jp jq jr js fd hk er es paragraph-image"><div class="er es mt"><img src="../Images/9d3b8aeddc0340e59959f84043a9b04c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1214/format:webp/1*w_1344GX31HTtklhccurQg.png"/></div><figcaption class="kz la et er es lb lc bd b be z dx">Example update succesfully</figcaption></figure><h1 id="5782" class="jv jw ht bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">使用Fetch删除请求方法</h1><p id="ee2e" class="pw-post-body-paragraph iq ir ht is b it kt iv iw ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn hb bi translated">最后，我们有删除请求方法，我们需要在我们的server.js文件上创建它。对于此方法，我们只需要使用findIndex方法与req.params.id进行比较，以匹配将要删除的用户，然后如果它存在，我们只需使用splice创建一个if语句来删除它，如果不存在，我们返回响应，告诉我们找不到用户404 not found。</p><figure class="jp jq jr js fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mu"><img src="../Images/a05826c0ad3c9cbfe773f90333c94bd3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eGlj0pD_uycF8nbd2-vGHQ.png"/></div></div><figcaption class="kz la et er es lb lc bd b be z dx">Example create request DELETE method in our server.js file</figcaption></figure><p id="92e2" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">其次，让我们创建一个按钮，只需单击一下就可以删除每个用户，为此，我们必须对表单视图脚本中的GET请求方法稍作修改， 但首先，我们需要在用户信息之后添加一个按钮，并且data-delete等于用户的id，因为这样我们可以调用addEventListener来获取和删除用户，因为我们只需要更改方法来删除，然后我们需要使用e.target.dataset.delete将用户的id也添加到URL，这样它将删除特定的用户。</p><figure class="jp jq jr js fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mv"><img src="../Images/859b0d45a0eb4915ed3a14b2faf30d31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cyhReOI9Tjo8dS9hd8SOOg.png"/></div></div><figcaption class="kz la et er es lb lc bd b be z dx">Example adding button to the GET user and adding fetch method to delete it</figcaption></figure><p id="acf9" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">检查删除请求方法</p><figure class="jp jq jr js fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mw"><img src="../Images/74c548f9b930915368c7e063cafa2d7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*reiuRqboDdUnRcrDhHzXDw.png"/></div></div><figcaption class="kz la et er es lb lc bd b be z dx">Example adding more users</figcaption></figure><figure class="jp jq jr js fd hk er es paragraph-image"><div class="er es mx"><img src="../Images/1e87fded939daba3937b12cf508aa487.png" data-original-src="https://miro.medium.com/v2/resize:fit:850/format:webp/1*Hz5gIxNMrq5Y23M1h_dXZQ.png"/></div><figcaption class="kz la et er es lb lc bd b be z dx">Example Deleting all users with the DELETE request method</figcaption></figure><p id="f72f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">看起来棒极了！</p><h1 id="bd76" class="jv jw ht bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">结论</h1><p id="4c0f" class="pw-post-body-paragraph iq ir ht is b it kt iv iw ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn hb bi translated">总之，这些例子真的很棒！因为它们展示了创建、更新、删除和从服务器获取用户的常用方法，使用fetch是因为它非常有用，我们需要指定一些配置，但我们可以捕捉错误，并保证使用起来更整洁，对我来说很神奇，因为我正在学习Node.js和Express.js的许多新东西，使用它我们可以增强验证或与Mongodb混合，但现在我们如何使用这个小示例来创建一些令人惊叹的东西真的很神奇！</p><h1 id="b15e" class="jv jw ht bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">感谢你们的阅读和支持，我真的很高兴有你们！！！</h1><p id="34cc" class="pw-post-body-paragraph iq ir ht is b it kt iv iw ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn hb bi translated">如果你想给我推荐，或者只是说声谢谢或嗨，你可以给我发一条DM到我的<a class="ae jo" href="https://twitter.com/shadowbeat274" rel="noopener ugc nofollow" target="_blank"> Twitter账户</a>，或者你可以写一条评论。</p><h1 id="3301" class="jv jw ht bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">来源</h1><div class="hh hi ez fb hj my"><a href="https://www.npmjs.com/package/express-handlebars" rel="noopener  ugc nofollow" target="_blank"><div class="mz ab dw"><div class="na ab nb cl cj nc"><h2 class="bd hu fi z dy nd ea eb ne ed ef hs bi translated">快速把手</h2><div class="nf l"><h3 class="bd b fi z dy nd ea eb ne ed ef dx translated">一个车把查看引擎的表达，不吸。这个套件过去被命名为express 3-handlebar。的…</h3></div><div class="ng l"><p class="bd b fp z dy nd ea eb ne ed ef dx translated">www.npmjs.com</p></div></div><div class="nh l"><div class="ni l nj nk nl nh nm hp my"/></div></div></a></div><div class="hh hi ez fb hj my"><a href="https://phpenthusiast.com/blog/javascript-fetch-api-tutorial" rel="noopener  ugc nofollow" target="_blank"><div class="mz ab dw"><div class="na ab nb cl cj nc"><h2 class="bd hu fi z dy nd ea eb ne ed ef hs bi translated">带有fetch API | PHPenthusiast的现代AJAX</h2><div class="nf l"><h3 class="bd b fi z dy nd ea eb ne ed ef dx translated">Fetch是处理JavaScript时执行AJAX的现代方式。而不是编写繁琐的AJAX代码或使用…</h3></div><div class="ng l"><p class="bd b fp z dy nd ea eb ne ed ef dx translated">phpenthusiast.com</p></div></div><div class="nh l"><div class="nn l nj nk nl nh nm hp my"/></div></div></a></div><div class="hh hi ez fb hj my"><a href="https://javascript.info/fetch" rel="noopener  ugc nofollow" target="_blank"><div class="mz ab dw"><div class="na ab nb cl cj nc"><h2 class="bd hu fi z dy nd ea eb ne ed ef hs bi translated">取得</h2><div class="nf l"><h3 class="bd b fi z dy nd ea eb ne ed ef dx translated">编辑描述</h3></div><div class="ng l"><p class="bd b fp z dy nd ea eb ne ed ef dx translated">javascript.info</p></div></div><div class="nh l"><div class="no l nj nk nl nh nm hp my"/></div></div></a></div><div class="hh hi ez fb hj my"><a href="https://www.amazon.com/Web-Development-Node-Express-Leveraging/dp/1492053511/ref=sr_1_19?__mk_es_MX=%C3%85M%C3%85%C5%BD%C3%95%C3%91&amp;keywords=node.js+express.js&amp;qid=1639443417&amp;sr=8-19" rel="noopener  ugc nofollow" target="_blank"><div class="mz ab dw"><div class="na ab nb cl cj nc"><h2 class="bd hu fi z dy nd ea eb ne ed ef hs bi translated">使用Node和Express进行Web开发:利用JavaScript堆栈</h2><div class="nf l"><h3 class="bd b fi z dy nd ea eb ne ed ef dx translated">使用Node和Express进行Web开发:利用Amazon.com的JavaScript堆栈。*免费*送货到…</h3></div><div class="ng l"><p class="bd b fp z dy nd ea eb ne ed ef dx translated">www.amazon.com</p></div></div><div class="nh l"><div class="np l nj nk nl nh nm hp my"/></div></div></a></div><div class="hh hi ez fb hj my"><a href="https://github.com/rodrigofigueroa/formsexpress" rel="noopener  ugc nofollow" target="_blank"><div class="mz ab dw"><div class="na ab nb cl cj nc"><h2 class="bd hu fi z dy nd ea eb ne ed ef hs bi translated">GitHub-rodrigofigeroa/forms express</h2><div class="nf l"><h3 class="bd b fi z dy nd ea eb ne ed ef dx translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="ng l"><p class="bd b fp z dy nd ea eb ne ed ef dx translated">github.com</p></div></div><div class="nh l"><div class="nq l nj nk nl nh nm hp my"/></div></div></a></div><p id="1ec5" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae jo" href="https://www.youtube.com/watch?v=1cjdlfB11Ss" rel="noopener ugc nofollow" target="_blank">视频</a></p><div class="hh hi ez fb hj my"><a href="https://stackoverflow.com/questions/26723467/postman-chrome-what-is-the-difference-between-form-data-x-www-form-urlencoded" rel="noopener  ugc nofollow" target="_blank"><div class="mz ab dw"><div class="na ab nb cl cj nc"><h2 class="bd hu fi z dy nd ea eb ne ed ef hs bi translated">postman Chrome:form-data，x-www-form-urlencoded和raw有什么区别</h2><div class="nf l"><h3 class="bd b fi z dy nd ea eb ne ed ef dx translated">注意。请参考RFC2388以获得更多关于文件上传的信息，包括向后兼容性问题…</h3></div><div class="ng l"><p class="bd b fp z dy nd ea eb ne ed ef dx translated">stackoverflow.com</p></div></div><div class="nh l"><div class="nr l nj nk nl nh nm hp my"/></div></div></a></div></div></div>    
</body>
</html>