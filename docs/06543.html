<html>
<head>
<title>Flutter: Custom Paint</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">颤动:自定义绘画</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/flutter-custom-paint-27c4aba498?source=collection_archive---------22-----------------------#2021-08-23">https://medium.com/geekculture/flutter-custom-paint-27c4aba498?source=collection_archive---------22-----------------------#2021-08-23</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/d898feedf0fc9cf92caffd66cca10df6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*04eyx6VzSpldxwA9"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Image from <a class="ae iu" href="https://images.unsplash.com/photo-1513364776144-60967b0f800f?ixid=MnwxMjA3fDB8MHxzZWFyY2h8MXx8YXJ0JTIwYnJ1c2h8ZW58MHx8MHx8&amp;ixlib=rb-1.2.1&amp;w=1000&amp;q=80" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="da2e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在flutter中，一些UI设计不能从常规的shapes小部件中派生出来。这就是定制油漆发挥作用的地方。Custom Paint是一个小部件，它为您提供了一个画板(称为<code class="du jt ju jv jw b">canvas</code>)、一个画笔(称为<code class="du jt ju jv jw b">paint</code>)、一个画板大小(称为<code class="du jt ju jv jw b">size</code>)和一个用于绘制形状的<code class="du jt ju jv jw b">path</code>。</p><blockquote class="jx jy jz"><p id="cb92" class="iv iw ka ix b iy iz ja jb jc jd je jf kb jh ji jj kc jl jm jn kd jp jq jr js hb bi translated">在本文中，我们将学习如何利用自定义绘图在flutter应用程序中绘制自定义形状。这会让你的UI更有吸引力。</p></blockquote><p id="061a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在本文的最后，我们将从下面的图片中获得结果。您可以在本文末尾找到Github源代码。</p><figure class="kf kg kh ki fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ke"><img src="../Images/d3794c01e87f437a7d139a15dd5e1de1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vtowQ6vbbpGRUUVin0Kvzg.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">final output</figcaption></figure><p id="84f7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们设置我们的flutter应用程序。</p><p id="40d3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">创建一个新的颤振项目<code class="du jt ju jv jw b">custompaint</code></p><pre class="kf kg kh ki fd kj jw kk kl aw km bi"><span id="78fc" class="kn ko hi jw b fi kp kq l kr ks"><br/>import 'package:flutter/material.dart';</span><span id="3cea" class="kn ko hi jw b fi kt kq l kr ks">import 'package:custompaint/home.dart';</span><span id="3a70" class="kn ko hi jw b fi kt kq l kr ks">void main() {<br/>  runApp(MyApp());<br/>}<br/><br/>class MyApp extends StatelessWidget {<br/>  const MyApp({Key? key}) : super(key: key);<br/><br/>  @override<br/>  Widget build(BuildContext context) {<br/>    return MaterialApp(<br/>      title: 'Drawing Custom shapes',<br/>      debugShowCheckedModeBanner: false,<br/>      home: Home(),<br/>    );<br/>  }<br/>}</span></pre><p id="2ddc" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">接下来，创建</strong> <code class="du jt ju jv jw b">Home</code> <strong class="ix hj">属性。</strong></p><pre class="kf kg kh ki fd kj jw kk kl aw km bi"><span id="ffd6" class="kn ko hi jw b fi kp kq l kr ks">class Home extends StatefulWidget {<br/>  const Home({Key? key}) : super(key: key);<br/><br/>  @override<br/>  _HomeState createState() =&gt; _HomeState();<br/>}<br/><br/>class _HomeState extends State&lt;Home&gt; {<br/>  @override<br/>  Widget build(BuildContext context) {<br/>    return Scaffold(<br/>      body: SafeArea(<br/>        child: SingleChildScrollView(<br/>          child: Container(<br/>            height: MediaQuery.of(context).size.height,<br/>            width: MediaQuery.of(context).size.width,<br/>            color: Color(0xfffbfaff),<br/>            child: CustomPaint(<br/>              painter: BackgroundPaint(),<br/>            ),<br/>          ),<br/>        ),<br/>      ),<br/>    );<br/>  }<br/>}</span></pre><p id="7d62" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们将应用程序包装成一个<code class="du jt ju jv jw b">Container</code>，并将其背景设置为定义的颜色。然后我们有了把<code class="du jt ju jv jw b">BackgroundPaint()</code>当做<code class="du jt ju jv jw b">painter</code>的<code class="du jt ju jv jw b">CustomPaint</code>。</p><p id="eeed" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><code class="du jt ju jv jw b">BackgroundPaint()</code>是一个自定义类，我们将创建它来包含我们的绘图。</p><h2 id="4075" class="kn ko hi bd ku kv kw kx ky kz la lb lc jg ld le lf jk lg lh li jo lj lk ll lm bi translated">自定义绘画类别</h2><p id="1776" class="pw-post-body-paragraph iv iw hi ix b iy ln ja jb jc lo je jf jg lp ji jj jk lq jm jn jo lr jq jr js hb bi translated">下面是绘图的类结构。</p><pre class="kf kg kh ki fd kj jw kk kl aw km bi"><span id="f2bf" class="kn ko hi jw b fi kp kq l kr ks">class BackgroundPainter extends CustomPainter {<br/>  @override<br/>  void paint(Canvas canvas, Size size) {<br/>    var paint = Paint();<br/>    // <em class="ka">TODO: Set properties to paint<br/><br/>    </em>var path = Path();<br/><br/>    // <em class="ka">TODO: Draw your path<br/><br/>    </em>canvas.drawPath(path, paint);<br/>  }<br/><br/>  @override<br/>  bool shouldRepaint(CustomPainter oldDelegate) =&gt; true;<br/>}</span></pre><p id="1814" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">该类提供画布、路径、大小和绘画。使用下图更好地理解<code class="du jt ju jv jw b">size</code>变量。</p><figure class="kf kg kh ki fd ij er es paragraph-image"><div class="er es ls"><img src="../Images/f71fbb3063bab71f9fa422a31fb6c9cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:750/format:webp/0*85NJmpQkubO7Ibmv.png"/></div><figcaption class="iq ir et er es is it bd b be z dx">image depicting size variable</figcaption></figure><p id="d3c8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们的设计希望从应用程序宽度的25%开始绘制曲线，并在应用程序高度的85%处结束曲线。然后，把它排好，画出路径。</p><p id="a88f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">接下来，创建</strong> <code class="du jt ju jv jw b">CustomPainter</code> <strong class="ix hj">属性</strong></p><pre class="kf kg kh ki fd kj jw kk kl aw km bi"><span id="079e" class="kn ko hi jw b fi kp kq l kr ks">class BackgroundPaint extends CustomPainter {<br/>  @override<br/>  void paint(Canvas canvas, Size size) {<br/>    // <em class="ka">TODO: implement paint<br/>    </em>final height = size.height;<br/>    final width = size.width;<br/><br/>    Paint paint = Paint()<br/>      ..style = PaintingStyle.fill<br/>      ..isAntiAlias = true<br/>      ..color = Color(0xff404040);<br/><br/>    Path myPath = Path();<br/><br/>    myPath.moveTo(width * 0.25, 0);<br/><br/>    //myPath.quadraticBezierTo(<br/>    //width * 0.70, height * 0.20, width * 0.40, height * 0.35);<br/>    myPath.quadraticBezierTo(<br/>        width * 0.7, height * 0.15, width * 0.4, height * 0.3);<br/>    myPath.quadraticBezierTo(<br/>        width * 0.15, height * 0.45, width * 0.4, height * 0.65);<br/>    myPath.quadraticBezierTo(<br/>        width * 0.51, height * 0.75, width * 1, height * 0.85);<br/>    //myPath.quadraticBezierTo(<br/>    //width * 0.2, height * 0.75, width * 1, height * 0.75);<br/>    myPath.lineTo(width * 25, 0);<br/>    myPath.lineTo(width, 0);<br/><br/>    canvas.drawPath(myPath, paint);<br/>  }<br/><br/>  @override<br/>  bool shouldRepaint(covariant CustomPainter oldDelegate) =&gt; true;<br/>}</span></pre><h2 id="cdaf" class="kn ko hi bd ku kv kw kx ky kz la lb lc jg ld le lf jk lg lh li jo lj lk ll lm bi translated">代码解释</h2><p id="5d44" class="pw-post-body-paragraph iv iw hi ix b iy ln ja jb jc lo je jf jg lp ji jj jk lq jm jn jo lr jq jr js hb bi translated">首先，我们创建了两个变量(高度和宽度),并将它们分配给应用程序的高度和宽度。然后，我们定义我们的<code class="du jt ju jv jw b">paint</code>,给它一个颜色和填充样式来填充绘制的<code class="du jt ju jv jw b">path</code>。</p><p id="150b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">接下来，我们定义了<code class="du jt ju jv jw b">path</code>并提供了绘制设计的方法。</p><p id="3e06" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><code class="du jt ju jv jw b">moveTo()</code>方法有两个参数:x和y。我们从25%(0.25)的宽度开始，高度为0。</p><p id="c5eb" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><code class="du jt ju jv jw b">quadraticBezierTo()</code>方法采用四个参数(X1，Y1，X2，Y2)。控制点是X1和Y1。最后一点是X2和Y2。</p><pre class="kf kg kh ki fd kj jw kk kl aw km bi"><span id="996e" class="kn ko hi jw b fi kp kq l kr ks">myPath.quadraticBezierTo(<br/>        width * 0.7, height * 0.15, width * 0.4, height * 0.3);</span></pre><p id="dfe4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这里，<code class="du jt ju jv jw b">quadraticBezierTo()</code>取X1 =宽* 0.7，Y1=高* 0.15为控制点，然后画一条曲线到点(X2 =宽* 0.4，Y2 =高* 0.3)。</p><p id="eec8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">最后，我们需要将<code class="du jt ju jv jw b">path</code>排成一行，用我们的<code class="du jt ju jv jw b">paint</code>填充它。</p><pre class="kf kg kh ki fd kj jw kk kl aw km bi"><span id="2d54" class="kn ko hi jw b fi kp kq l kr ks">myPath.lineTo(width * 25, 0);<br/>    myPath.lineTo(width, 0);</span></pre><p id="ee50" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><code class="du jt ju jv jw b">lineTo()</code>方法取两个参数:X和Y，这里<code class="du jt ju jv jw b">lineTo()</code>从point (X = width * 25，Y = 0)开始，用point (X = width，height = 0)排到最后。</p><p id="82f9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然后，我们调用<code class="du jt ju jv jw b">cavas</code>来使用我们定义的<code class="du jt ju jv jw b">path</code>和<code class="du jt ju jv jw b">paint</code>绘制路径。</p><pre class="kf kg kh ki fd kj jw kk kl aw km bi"><span id="eb5b" class="kn ko hi jw b fi kp kq l kr ks">canvas.drawPath(myPath, paint);</span></pre><p id="f800" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">结果:</p><figure class="kf kg kh ki fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ke"><img src="../Images/d3794c01e87f437a7d139a15dd5e1de1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vtowQ6vbbpGRUUVin0Kvzg.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">final result</figcaption></figure><p id="61ce" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="ka">让我与你分享我的小秘密</em>😉😊</p><blockquote class="jx jy jz"><p id="0884" class="iv iw ka ix b iy iz ja jb jc jd je jf kb jh ji jj kc jl jm jn kd jp jq jr js hb bi translated">当使用自定义油漆时，请确保绘制出您的设计草图。这将为您节省大量调试时间😰。</p></blockquote><p id="5f36" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">查看源代码<a class="ae iu" href="https://github.com/funmi-cod/custompaint" rel="noopener ugc nofollow" target="_blank">这里</a>。</p><p id="8608" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在下一篇文章中，我们将利用Stack为这个设计添加更多的功能。在那里见😊！</p></div><div class="ab cl lt lu gp lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="hb hc hd he hf"><p id="e2a2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">❤ ❤谢谢你坚持到最后。❤❤</p><figure class="kf kg kh ki fd ij er es paragraph-image"><div class="ab fe cl ma"><img src="../Images/5b79fcf1d3738a783dc4f84a1843e537.png" data-original-src="https://miro.medium.com/v2/0*jGRllsTCENbQqmo7"/></div></figure></div></div>    
</body>
</html>