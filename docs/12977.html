<html>
<head>
<title>Learn How To Create Custom Placeholder Images for Your Web App in No Time</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">了解如何立即为您的Web应用程序创建自定义占位符图像</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/learn-how-to-create-custom-placeholder-images-for-your-web-app-in-no-time-314f76a72615?source=collection_archive---------11-----------------------#2022-06-11">https://medium.com/geekculture/learn-how-to-create-custom-placeholder-images-for-your-web-app-in-no-time-314f76a72615?source=collection_archive---------11-----------------------#2022-06-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/2b2869fc6d8f978a0b57d44075789c11.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rwxcgDPjQWLcxn0shCxAkg.png"/></div></div></figure><p id="6078" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">图像占位符对于任何应用程序来说都是非常重要的，尽管有很多虚拟API也是如此。很多时候，我发现自己不想依赖这些可能是为了稳定，成本或交通等。因此，有时我们最终会对所有个人资料使用相同的通用占位符，我觉得这很无聊。所以我放了这个小教程来帮助用户快速设置自定义的占位符图片。</p><p id="e4d3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这里，我们将使用canvas创建一个带有姓名首字母的占位符个人资料图片和一个带有相同颜色的渐变标题图像占位符，如果图像不在数据库中，则在<strong class="is hj">角度应用程序</strong>中使用。</p><p id="214c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这里，我们将讨论以下主题:</p><ul class=""><li id="14d8" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated">概观</li><li id="026d" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">生成随机颜色</li><li id="2837" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">生成反转颜色</li><li id="e35f" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">生成标题样式</li><li id="d055" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">生成个人资料图像</li></ul><h2 id="48c3" class="kc kd hi bd ke kf kg kh ki kj kk kl km jb kn ko kp jf kq kr ks jj kt ku kv kw bi translated">概观</h2><p id="8e52" class="pw-post-body-paragraph iq ir hi is b it kx iv iw ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn hb bi translated">我将在本演示中使用的示例API响应。</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="ba5c" class="kc kd hi lh b fi ll lm l ln lo">// Sample JSON respponse for user Data<br/>{<br/> "id": 1,<br/> "firstName": "Den",<br/> "lastName": "Draysay",<br/> "role": "Professor",<br/> "profileImg": null,<br/> "headerImg": null<br/>}</span><span id="59ce" class="kc kd hi lh b fi lp lm l ln lo">// user interface defined for type<br/>export interface User {<br/>    firstName: string;<br/>    lastName: string;<br/>    role?: string;<br/>    profileImg?: string;<br/>    headerImg?: string;<br/>    color?: string;<br/>}</span></pre><p id="f07b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">创建一个角度组件“用户轮廓”，服务“颜色”和“用户”和管道“轮廓图像”。</p><p id="52d0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在用户配置文件组件中，我们可以创建一个类型为user的变量用户配置文件来存储来自API onInit的响应。</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="4d65" class="kc kd hi lh b fi ll lm l ln lo">import { Component, OnInit } from '@angular/core';<br/>import { ActivatedRoute } from '@angular/router';<br/>import { User } from 'src/app/models/user';<br/>import { UserService } from 'src/app/services/user.service';</span><span id="f1da" class="kc kd hi lh b fi lp lm l ln lo">@Component({<br/>    selector: 'at-user-profile',<br/>    templateUrl: './user-profile.component.html',<br/>    styleUrls: ['./user-profile.component.scss'],<br/>})</span><span id="99a1" class="kc kd hi lh b fi lp lm l ln lo">export class UserProfileComponent implements OnInit {<br/>    public userProfile!: User;<br/>    public userId!: string;</span><span id="8e80" class="kc kd hi lh b fi lp lm l ln lo">constructor(<br/>        private readonly userService: UserService,<br/>        private readonly route: ActivatedRoute,<br/>    ) { }</span><span id="d4b8" class="kc kd hi lh b fi lp lm l ln lo">public async ngOnInit(): Promise&lt;void&gt; {<br/>        await this.route.params.subscribe(params =&gt;<br/>            this.userId = params['userId']<br/>        )<br/>        await this.fetchUserData();<br/>    }</span><span id="18a2" class="kc kd hi lh b fi lp lm l ln lo">private fetchUserData(): void {            <br/>        this.userService.fetchUserData(this.userId).<br/>            subscribe((data: User)=&gt; {<br/>                this.userProfile = data;<br/>            });<br/>    }<br/>}</span></pre><p id="5ce6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">用户服务将用于进行HTTP调用。</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="058d" class="kc kd hi lh b fi ll lm l ln lo">import { HttpClient } from '@angular/common/http';<br/>import { Injectable } from '@angular/core';<br/>import { Observable } from 'rxjs';<br/>import { User } from '../models/user';</span><span id="90c8" class="kc kd hi lh b fi lp lm l ln lo">@Injectable({<br/>    providedIn: 'root'<br/>})<br/>export class UserService {<br/>    private readonly baseUrl = `http://localhost:3000`;</span><span id="e03a" class="kc kd hi lh b fi lp lm l ln lo">constructor(<br/>        private readonly http: HttpClient<br/>    ) { }</span><span id="a46d" class="kc kd hi lh b fi lp lm l ln lo">public fetchUserData(userId: string): Observable&lt;User&gt; {<br/>        return this.http.get&lt;User&gt;(`${this.baseUrl}/users/${userId}`);<br/>    }<br/>}</span></pre><h2 id="1b6c" class="kc kd hi bd ke kf kg kh ki kj kk kl km jb kn ko kp jf kq kr ks jj kt ku kv kw bi translated">生成随机颜色</h2><p id="1d0c" class="pw-post-body-paragraph iq ir hi is b it kx iv iw ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn hb bi translated">我们的第一步是获取占位符图像中使用的随机颜色。因此，我们将在服务中创建一个方法，返回有效的十六进制代码。</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="a94e" class="kc kd hi lh b fi ll lm l ln lo">public generateRandomColorCode(): string {<br/>    const hex = Math.floor(Math.random()*16777215).toString(16);<br/>    const randomColorCode = hex.toString().length &lt; 6 ?<br/>        this.generateRandomColorCode() : `#${hex}`;<br/>    return randomColorCode ;<br/>}</span></pre><p id="6dc6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，我们可以使用这个方法为在user-profile组件中获取的用户配置文件设置颜色。</p><p id="82ef" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在fetchUserData中。订阅我们可以在构造函数中注入颜色服务后调用这个服务。</p><p id="e66b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果我们希望在用户未来登录时保持相同的颜色，我们可以将随机生成的颜色与用户详细信息一起保存到数据库中，或者如果我们每次用户访问时都需要新的颜色，我们可以调用此方法。</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="e36a" class="kc kd hi lh b fi ll lm l ln lo">// to use a new color every time<br/>this.userProfile.color = this.color.generateRandomColorCode();<br/>// to use same color every time<br/>this.userProfile.color = this.userProfile.color ?<br/>    this.userProfile.color :<br/>    this.color.generateRandomColorCode();</span></pre><h2 id="cdfd" class="kc kd hi bd ke kf kg kh ki kj kk kl km jb kn ko kp jf kq kr ks jj kt ku kv kw bi translated">生成反转颜色</h2><p id="84b7" class="pw-post-body-paragraph iq ir hi is b it kx iv iw ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn hb bi translated">我们还需要一个方法，可以给我们一个黑色或白色的基础上十六进制颜色，我们必须打印在个人资料图片或创建标题渐变的缩写。</p><p id="2acf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们可以在颜色服务中创建这个方法。</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="277d" class="kc kd hi lh b fi ll lm l ln lo">public getInvertedColor(hex: string): string{<br/>    if (hex.indexOf('#') === 0) {<br/>        hex = hex.slice(1);<br/>    }</span><span id="6307" class="kc kd hi lh b fi lp lm l ln lo">const r = parseInt(hex.slice(0, 2), 16),<br/>          g = parseInt(hex.slice(2, 4), 16),<br/>          b = parseInt(hex.slice(4, 6), 16);</span><span id="abe2" class="kc kd hi lh b fi lp lm l ln lo">return (r * 0.299 + g * 0.587 + b * 0.114) &gt; 186 ? <br/>        '#000000' :<br/>        '#FFFFFF';<br/>}</span></pre><blockquote class="lq lr ls"><p id="bb94" class="iq ir lt is b it iu iv iw ix iy iz ja lu jc jd je lv jg jh ji lw jk jl jm jn hb bi translated">注意:此方法可以改进，以提供与十六进制颜色相反的各种颜色，从而生成渐变，并且有条件地使用标志仅输出轮廓图片字体的黑色和白色。点击<a class="ae lx" href="https://stackoverflow.com/questions/35969656/how-can-i-generate-the-opposite-color-according-to-current-color" rel="noopener ugc nofollow" target="_blank">这里</a>获取详细信息。</p></blockquote><h2 id="d36e" class="kc kd hi bd ke kf kg kh ki kj kk kl km jb kn ko kp jf kq kr ks jj kt ku kv kw bi translated">生成标题样式</h2><p id="0f0e" class="pw-post-body-paragraph iq ir hi is b it kx iv iw ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn hb bi translated">现在，我们可以在颜色服务中创建一个方法，或者创建一个自定义管道，这取决于您的用例，但基本逻辑是相同的，我们需要一个方法来根据用户配置文件为我们提供CSS样式。</p><p id="263f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">因此，考虑到用户可能已经上传了标题图像，因此在这些情况下，我们必须显示该图像，如果用户没有标题图像，我们将根据我们为用户生成的随机颜色生成线性渐变。</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="d364" class="kc kd hi lh b fi ll lm l ln lo">public getHeaderStyles(user: User): any {<br/>    let headerBkg: any;<br/>    if (user.profile.headerImg) {<br/>        headerBkg = {<br/>           'background-image': `url('${user.headerImg}')`,<br/>           'background-size': 'cover',<br/>        }<br/>    } else {<br/>        const secondaryColor = this.getInvertedColor(user.profile.color || '');<br/>        headerBkg = {<br/>        'background': `linear-gradient(${user.profile.color}, ${secondaryColor})`,<br/>        }<br/>    }<br/>return headerBkg;<br/>}</span></pre><p id="bc0e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">user-profile.component.html</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="1885" class="kc kd hi lh b fi ll lm l ln lo">&lt;div<br/>    class="user-profile-cover"<br/>    [ngStyle]= "headerBkg"<br/>&gt;&lt;/div&gt;</span></pre><p id="b657" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">用户配置文件.组件. scss</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="e3c7" class="kc kd hi lh b fi ll lm l ln lo">.user-profile{<br/>    &amp;-cover{<br/>        height: 20%;<br/>    }<br/>}</span></pre><p id="6117" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">user-profile.component.ts</p><p id="6b66" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">创建一个变量</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="fe6e" class="kc kd hi lh b fi ll lm l ln lo">public headerBkg!: any;</span></pre><p id="46ce" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">将随机颜色分配给userProfile.color属性后，将CSS样式分配给创建的变量</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="6c86" class="kc kd hi lh b fi ll lm l ln lo">this.headerBkg = this.color.getHeaderStyles(this.userProfile);</span></pre><p id="5dc5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，如果没有标题图像，您应该有一个随机颜色的标题占位符；如果提供了标题图像，您应该有一个图像。</p><figure class="lc ld le lf fd ij er es paragraph-image"><div class="er es ly"><img src="../Images/0a1af4a44c0ecf13c6a93c1c877e52ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/format:webp/1*2isbASSFsS_OXxO5C8VDbQ.png"/></div><figcaption class="lz ma et er es mb mc bd b be z dx">If the header image is present.</figcaption></figure><figure class="lc ld le lf fd ij er es paragraph-image"><div class="er es md"><img src="../Images/568908cf231fed0efd2d011f89bc5d8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1182/format:webp/1*01W9DNy7JXC22qXYoLjpbg.png"/></div><figcaption class="lz ma et er es mb mc bd b be z dx">if no Header image</figcaption></figure><h2 id="6ba6" class="kc kd hi bd ke kf kg kh ki kj kk kl km jb kn ko kp jf kq kr ks jj kt ku kv kw bi translated">生成个人资料图像</h2><p id="8684" class="pw-post-body-paragraph iq ir hi is b it kx iv iw ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn hb bi translated">现在到了有趣的部分，如果用户没有提供的话，生成一个样本轮廓图片。</p><p id="df6d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我将使用自定义管道纵断面图像。</p><p id="cc7c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">profile-image.pipe.ts</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="9bf7" class="kc kd hi lh b fi ll lm l ln lo">import { Pipe, PipeTransform } from '@angular/core';<br/>import { User } from 'src/app/models/user';<br/>import { ColorService } from '../util/color.service';</span><span id="1903" class="kc kd hi lh b fi lp lm l ln lo">@Pipe({<br/>    name: 'profileImage'<br/>})</span><span id="9577" class="kc kd hi lh b fi lp lm l ln lo">export class ProfileImagePipe implements PipeTransform {</span><span id="653d" class="kc kd hi lh b fi lp lm l ln lo">constructor(private readonly color: ColorService){}</span><span id="1f74" class="kc kd hi lh b fi lp lm l ln lo">transform(user: User): string {<br/>        if(user.profile.profileImg){<br/>            return user.profile.profileImg;<br/>        }</span><span id="3618" class="kc kd hi lh b fi lp lm l ln lo">const canvas = document.createElement('canvas');<br/>    canvas.style.display = 'none';<br/>    canvas.width = 50;<br/>    canvas.height = 50;<br/>    document.body.appendChild(canvas);</span><span id="3a01" class="kc kd hi lh b fi lp lm l ln lo">const context = canvas.getContext('2d');<br/>    context!.fillStyle = user?.profile.color || '';<br/>    context!.beginPath();<br/>    context!.arc(canvas.width/2, canvas.height/2, canvas.height/2, 0, Math.PI * 2);<br/>    context!.fill();<br/>    context!.font = '20px Arial';<br/>    context!.fillStyle = this.color.getInvertedColor(user.profile.color || '');<br/>    const initials = this.getInitials(<br/>        user.profile.firstName,<br/>        user.profile.lastName);</span><span id="4b42" class="kc kd hi lh b fi lp lm l ln lo">context?.fillText(initials, canvas.width/4.5, canvas.height/1.5);</span><span id="ffaf" class="kc kd hi lh b fi lp lm l ln lo">const data = canvas.toDataURL();<br/>    document.body.removeChild(canvas);<br/>    return data;<br/>}</span><span id="2865" class="kc kd hi lh b fi lp lm l ln lo">private getInitials(firstName: any, lastName: any): string {<br/>        return firstName.charAt(0).toUpperCase() +          lastName.charAt(0).toUpperCase();<br/>    }</span><span id="f82d" class="kc kd hi lh b fi lp lm l ln lo">}</span></pre><blockquote class="lq lr ls"><p id="a67e" class="iq ir lt is b it iu iv iw ix iy iz ja lu jc jd je lv jg jh ji lw jk jl jm jn hb bi translated">注意:现在我们可以在img的src属性的html中直接使用这个管道，或者在user profile组件中创建一个变量，并使用管道转换方法将src值存储在该变量中。</p></blockquote><p id="a632" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">user-profile.component.html</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="a432" class="kc kd hi lh b fi ll lm l ln lo">&lt;!--Header--&gt;<br/>&lt;div<br/>    class="user-profile-cover"<br/>    [ngStyle]= "headerBkg"<br/>&gt;&lt;/div&gt;<br/>&lt;div class="user-profile-info"&gt;<br/>   &lt;!--profile Image--&gt;<br/>    &lt;div class="user-profile-info-img"&gt;<br/>        &lt;img<br/>            class="user-profile-info-img__img"<br/>            [src]="userProfile | profileImage"<br/>       &gt;<br/>   &lt;/div&gt;</span><span id="0d6d" class="kc kd hi lh b fi lp lm l ln lo">&lt;h2 class="user-profile-info__name"&gt;{{fullName}}&lt;/h2&gt;<br/>   &lt;h5 class="user-profile-info__role"&gt;{{userProfile.role}}&lt;/h5&gt;<br/>&lt;/div&gt;</span></pre><p id="329b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">用户配置文件.组件. scss</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="0b84" class="kc kd hi lh b fi ll lm l ln lo">.user-profile {<br/>    &amp;-cover {<br/>       height: 20%;<br/>    }</span><span id="89b1" class="kc kd hi lh b fi lp lm l ln lo">&amp;-info { <br/>       display: flex;<br/>       flex-direction: column;<br/>       align-items: center;<br/>       &amp;-img {<br/>           display: flex;<br/>           justify-content: center;<br/>           &amp;__img {<br/>                margin-top: -20px;<br/>                border: #fff 2px solid;<br/>                border-radius: 50%;<br/>                width: 50px;<br/>                height: 50px;<br/>           }<br/>       }<br/>       &amp;__name{<br/>            margin: 0;<br/>       }<br/>       &amp;__role{<br/>            margin: 0;<br/>       }<br/>   }<br/>}</span></pre><p id="f89f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">所有这些编码完成后，您应该完成了，应该有一个标题图像和配置文件图像的占位符样本，如果用户没有提供，如果用户提供图像，那么应该显示图像而不是占位符。</p><figure class="lc ld le lf fd ij er es paragraph-image"><div class="er es me"><img src="../Images/838d9c0092802c71aeedc156d24e6746.png" data-original-src="https://miro.medium.com/v2/resize:fit:1234/format:webp/1*R23t-zK_sBVnYTxmut1xWw.png"/></div><figcaption class="lz ma et er es mb mc bd b be z dx">If the user provides images.</figcaption></figure><figure class="lc ld le lf fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mf"><img src="../Images/86f153a155a971f28aea4af7d6d93d13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i7Kof5YVWWPVLB3ZKvYKbg.png"/></div></div><figcaption class="lz ma et er es mb mc bd b be z dx">If the user does not provide images</figcaption></figure><p id="0d8c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">感谢您的阅读，如果您有任何问题或建议，请在评论中联系我。</p></div></div>    
</body>
</html>