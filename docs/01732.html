<html>
<head>
<title>How to Use Redux as a Beginner</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">作为初学者如何使用Redux</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/how-to-use-redux-as-a-beginner-6aecc1e2a154?source=collection_archive---------19-----------------------#2021-04-21">https://medium.com/geekculture/how-to-use-redux-as-a-beginner-6aecc1e2a154?source=collection_archive---------19-----------------------#2021-04-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="70f0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Redux是一个用于应用程序状态管理的JavaScript库。它可以用于任何UI库，但是这篇文章将讨论它在React中的用法。简而言之，库在单个对象中维护应用程序的不可变状态。不可变仅仅意味着它不能被直接改变。相反，它通过“redux流”,最终返回一个新的状态对象并替换旧的状态。在开始使用Redux之前，你必须先了解React。如果你不知道React是如何工作的，这里有一个<a class="ae jd" href="https://www.youtube.com/watch?v=DLX62G4lc44" rel="noopener ugc nofollow" target="_blank">视频</a>很好地解释了这个框架。说完了，让我们学习一些Redux！</p><h1 id="5edc" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">设置它</h1><p id="16a1" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">如果您还没有在您的应用程序中安装redux，您可以通过运行<code class="du kh ki kj kk b">npm install redux react-redux</code>来安装。这将提供在你的应用中实现redux所需的一系列模块。</p><h2 id="6c87" class="kl jf hi bd jg km kn ko jk kp kq kr jo iq ks kt js iu ku kv jw iy kw kx ka ky bi translated">还原剂</h2><p id="a736" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">您可以将reducers看作React中的setState函数。它们只是简单的函数，接受以前的状态和一个动作对象作为参数，然后返回新的状态。</p><figure class="la lb lc ld fd le er es paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="er es kz"><img src="../Images/d0930e929a42a63b5c6a64f94d4cb1e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hQLGdesv91_wMI6QI56xCQ.png"/></div></div><figcaption class="ll lm et er es ln lo bd b be z dx">example of simple reducer</figcaption></figure><p id="fa73" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将更深入地了解未来的行动，但现在只是把它们当作指令。减速器接受动作，并将类型与其中一种情况相匹配。然后返回一个新状态，该状态被分配给redux的全局状态。如果我们的状态中有另一个键，我们将不得不把我们的返回改为类似于:</p><pre class="la lb lc ld fd lp kk lq lr aw ls bi"><span id="d90f" class="kl jf hi kk b fi lt lu l lv lw">{...state, tickets: state.tickets + 1}</span></pre><p id="312f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">否则，当更新tickets值时，我们将丢失state中的其他数据。</p><h2 id="07e6" class="kl jf hi bd jg km kn ko jk kp kq kr jo iq ks kt js iu ku kv jw iy kw kx ka ky bi translated">行动</h2><p id="00fa" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">这是您传递更新状态所需信息的地方。动作是一个普通的旧对象，带有类型的键和有效负载。类型告诉reducer它应该采取什么动作，有效负载是您的reducer将用来更新状态的数据。每次您想要更改状态时，可以手动编写操作。然而，最好有一个返回这些动作的单独的函数文件夹，称为action creator。它保持了关注点的分离，节省了调试拼写错误的动作类型的时间。</p><h2 id="f6ea" class="kl jf hi bd jg km kn ko jk kp kq kr jo iq ks kt js iu ku kv jw iy kw kx ka ky bi translated">将组件连接到Redux存储</h2><p id="1d9c" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">一旦你有了行动和减少，我们就可以开始建立我们的商店。</p><pre class="la lb lc ld fd lp kk lq lr aw ls bi"><span id="046b" class="kl jf hi kk b fi lt lu l lv lw">//index.js</span><span id="ff16" class="kl jf hi kk b fi lx lu l lv lw">import { Provider } from "react-redux";</span><span id="32c9" class="kl jf hi kk b fi lx lu l lv lw">import { createStore } from "redux";</span><span id="74ad" class="kl jf hi kk b fi lx lu l lv lw">import myReducer from "./reducers/myReducer";</span></pre><p id="7f67" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，我们想创建我们的商店。每当在Redux中创建存储时，都需要指定reducer。这是我们存储状态的地方。</p><pre class="la lb lc ld fd lp kk lq lr aw ls bi"><span id="eb3e" class="kl jf hi kk b fi lt lu l lv lw">const store = createStore(myReducer)</span></pre><p id="4942" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">其次，我们希望将我们的顶级组件App封装在Provider组件中，并将我们刚刚在上面创建的store传递给它。这将为应用程序中嵌套的所有组件提供store访问权限。给予它们读取和更新状态的能力，而不管它们的层级位置。</p><pre class="la lb lc ld fd lp kk lq lr aw ls bi"><span id="c73d" class="kl jf hi kk b fi lt lu l lv lw">ReactDOM.render(</span><span id="2767" class="kl jf hi kk b fi lx lu l lv lw">  &lt;Provider store={store}&gt;</span><span id="84f2" class="kl jf hi kk b fi lx lu l lv lw">    &lt;App /&gt;</span><span id="0a0e" class="kl jf hi kk b fi lx lu l lv lw">  &lt;/Provider&gt;,</span><span id="020e" class="kl jf hi kk b fi lx lu l lv lw">  document.getElementById('root')</span><span id="3cce" class="kl jf hi kk b fi lx lu l lv lw">);</span></pre><h2 id="c503" class="kl jf hi bd jg km kn ko jk kp kq kr jo iq ks kt js iu ku kv jw iy kw kx ka ky bi translated">mapStateToProps &amp; mapdispatchtopros</h2><p id="9a5b" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">虽然提供者允许所有组件访问store，但是我们还必须采取一个步骤。connect函数来自react-redux模块，接受两个参数。第一个参数是两个回调函数，第二个是您希望连接的组件。</p><p id="bb65" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> mapStateToProps </strong>用于从存储中读取数据。首先，您必须定义函数。现在这个函数将接收状态作为参数，并且必须返回一个对象。在返回值中，您可以指定要将存储中的哪些数据传递给组件。</p><pre class="la lb lc ld fd lp kk lq lr aw ls bi"><span id="004c" class="kl jf hi kk b fi lt lu l lv lw">const mapStateToProps = state =&gt; {<br/>  return {<br/>    data1: state.first,<br/>    data2: state.second<br/>  }<br/>}  </span></pre><p id="2859" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，这个对象将扩展到组件的道具上，可以像访问任何其他道具一样访问它。如果您想要访问整个状态，只需返回state。</p><p id="ad67" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> mapDispatchToProps </strong>是用来通过调度动作来改变状态的。就像第一个论点一样，这也必须被定义。然而，它将被调度，而不是作为一个参数被陈述。Dispatch是存储中的一个函数，它接受一个动作作为参数。这是在Redux中触发状态改变的唯一方法。与mapStateToProps类似，该函数必须返回一个对象，该对象将作为Props向下传递给所需的组件，但其值将是回调函数。</p><pre class="la lb lc ld fd lp kk lq lr aw ls bi"><span id="b21a" class="kl jf hi kk b fi lt lu l lv lw">const mapDispatchToProps = (dispatch) =&gt; {<br/>  return {<br/>    // dispatching plain actions<br/>    increment: () =&gt; dispatch({ type: 'INCREMENT' }),<br/>    decrement: () =&gt; dispatch({ type: 'DECREMENT' }),<br/>    reset: () =&gt; dispatch({ type: 'RESET' }),<br/>  }<br/>}</span></pre><h2 id="f126" class="kl jf hi bd jg km kn ko jk kp kq kr jo iq ks kt js iu ku kv jw iy kw kx ka ky bi translated">结论</h2><p id="3ccd" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">如果您正在构建简单的应用程序，您可能不会马上看到使用Redux的好处，但是您可以想象您的组件会变得多么混乱。不得不传递回调属性来改变状态。不是每个人都是Redux的粉丝，因为它没有添加任何已经不能用React完成的东西。我个人发现它对我的项目非常有帮助，帮助我更好地组织代码。你对Redux有什么感觉？</p></div></div>    
</body>
</html>