<html>
<head>
<title>Common mistakes in microservices</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">微服务中的常见错误</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/common-mistakes-in-microservices-fe6874f6e92?source=collection_archive---------24-----------------------#2021-08-03">https://medium.com/geekculture/common-mistakes-in-microservices-fe6874f6e92?source=collection_archive---------24-----------------------#2021-08-03</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="7a13" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">不只是把一件大事变成许多小事</h2></div><h2 id="6568" class="ix iy hi bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju bi translated">错误1:(过度)使用微服务</h2><figure class="jw jx jy jz fd ka er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es jv"><img src="../Images/9faa0a06e708de1687d838cb7a8a6ffe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-8ggNjnZJpCo0_S9"/></div></div><figcaption class="kh ki et er es kj kk bd b be z dx">Photo by <a class="ae kl" href="https://unsplash.com/@andreuuuw?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Andrew Wulf</a> on <a class="ae kl" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="4313" class="pw-post-body-paragraph km kn hi ko b kp kq ij kr ks kt im ku ji kv kw kx jm ky kz la jq lb lc ld le hb bi translated">任何平台都有使用微服务架构的持续压力，但在推进之前，您需要了解为什么需要它，因为没有目的的微服务架构会带来所有的问题，而没有任何优势。</p><p id="0290" class="pw-post-body-paragraph km kn hi ko b kp kq ij kr ks kt im ku ji kv kw kx jm ky kz la jq lb lc ld le hb bi translated">一些解决方案根本不需要微服务，或者至少不需要一些人喜欢吹嘘的数百个微服务的数百个实例。只需对您的解决方案进行简单的更改，就可以在保持与您的长期架构愿景兼容的同时带来足够的变化，例如:</p><ul class=""><li id="8363" class="lf lg hi ko b kp kq ks kt ji lh jm li jq lj le lk ll lm ln bi translated">正确的负载平衡允许水平可伸缩性</li><li id="6138" class="lf lg hi ko b kp lo ks lp ji lq jm lr jq ls le lk ll lm ln bi translated">性能调整，支持高效的垂直扩展</li><li id="72db" class="lf lg hi ko b kp lo ks lp ji lq jm lr jq ls le lk ll lm ln bi translated">对非时间关键的请求进行异步处理</li></ul><p id="7f4a" class="pw-post-body-paragraph km kn hi ko b kp kq ij kr ks kt im ku ji kv kw kx jm ky kz la jq lb lc ld le hb bi translated">对于您的解决方案来说，在需要时灵活地更改<strong class="ko hj">是否比预先应对未来可能不会实现的需求</strong>重要得多。</p><p id="b7c2" class="pw-post-body-paragraph km kn hi ko b kp kq ij kr ks kt im ku ji kv kw kx jm ky kz la jq lb lc ld le hb bi translated">想得多，做得少。想象一下，在未来，您拥有数百万用户，但只为您现在的需求而构建。</p><h2 id="ac48" class="ix iy hi bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju bi translated">错误2:不正确地分解服务</h2><figure class="jw jx jy jz fd ka er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es lt"><img src="../Images/cf2317d509573e5a353d3f1654b45fcc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qckJvVplhwdhfE7o"/></div></div><figcaption class="kh ki et er es kj kk bd b be z dx">Photo by <a class="ae kl" href="https://unsplash.com/@chuttersnap?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">CHUTTERSNAP</a> on <a class="ae kl" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="5ac9" class="pw-post-body-paragraph km kn hi ko b kp kq ij kr ks kt im ku ji kv kw kx jm ky kz la jq lb lc ld le hb bi translated">分解解决方案服务的正确方式取决于您试图通过微服务架构实现的目标。</p><p id="e1d9" class="pw-post-body-paragraph km kn hi ko b kp kq ij kr ks kt im ku ji kv kw kx jm ky kz la jq lb lc ld le hb bi translated">如果<strong class="ko hj">性能</strong>是您的驱动因素，您需要考虑您的解决方案的哪些方面需要有所不同，并设计您的解决方案以最小化获得该性能的成本。有些服务会直接影响解决方案的整体性能，而有些则不会。这将使您能够将更多资源分配给最需要的服务。</p><p id="3ccc" class="pw-post-body-paragraph km kn hi ko b kp kq ij kr ks kt im ku ji kv kw kx jm ky kz la jq lb lc ld le hb bi translated">如果<strong class="ko hj">秤</strong>是你的驱动力，你需要考虑你的解决方案的哪些区域需要处理最多的负载。客户与哪些功能交互最多，随着平台的增长，哪些领域会线性增长、指数增长，或者根本不会增长。这将使您能够利用扩展需要的服务。</p><p id="0ab9" class="pw-post-body-paragraph km kn hi ko b kp kq ij kr ks kt im ku ji kv kw kx jm ky kz la jq lb lc ld le hb bi translated">如果<strong class="ko hj">稳定性</strong>是您的驱动因素，您需要考虑解决方案的哪些方面是关键任务。这将使您能够利用为每项服务定制的保护措施，包括断路器和灾难恢复计划。</p><p id="73e2" class="pw-post-body-paragraph km kn hi ko b kp kq ij kr ks kt im ku ji kv kw kx jm ky kz la jq lb lc ld le hb bi translated">如果<strong class="ko hj">改变</strong>是你的驱动力，你需要考虑你的解决方案的哪些方面受到新特性的影响。这将允许您只部署和测试特性所需的服务，或者部署服务的多个版本。</p><p id="8c15" class="pw-post-body-paragraph km kn hi ko b kp kq ij kr ks kt im ku ji kv kw kx jm ky kz la jq lb lc ld le hb bi translated">这里的错误选择将最终导致更高的成本—将资源分配给不需要它的服务，部署不被使用的服务实例，每次都进行完全部署。</p><p id="8aac" class="pw-post-body-paragraph km kn hi ko b kp kq ij kr ks kt im ku ji kv kw kx jm ky kz la jq lb lc ld le hb bi translated">拥有许多分解的服务和这些服务的许多实例，会带来各种各样的其他复杂性:</p><ul class=""><li id="3fce" class="lf lg hi ko b kp kq ks kt ji lh jm li jq lj le lk ll lm ln bi translated">复杂和不可靠的通信</li><li id="ef61" class="lf lg hi ko b kp lo ks lp ji lq jm lr jq ls le lk ll lm ln bi translated">复杂的业务流程编排</li><li id="f6b6" class="lf lg hi ko b kp lo ks lp ji lq jm lr jq ls le lk ll lm ln bi translated">复杂的部署</li></ul><p id="8572" class="pw-post-body-paragraph km kn hi ko b kp kq ij kr ks kt im ku ji kv kw kx jm ky kz la jq lb lc ld le hb bi translated">您拥有的服务越多，管理的复杂性就越高，因此每一级的分解都需要仔细考虑，不断问自己“值得吗？”。</p><h2 id="b2b6" class="ix iy hi bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju bi translated">错误3:放弃支持和监控工具</h2><figure class="jw jx jy jz fd ka er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es jv"><img src="../Images/5b305d8e73346895060db775d51506ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tDko--SfBQLeW7p8"/></div></div><figcaption class="kh ki et er es kj kk bd b be z dx">Photo by <a class="ae kl" href="https://unsplash.com/@jannerboy62?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Nick Fewings</a> on <a class="ae kl" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="d217" class="pw-post-body-paragraph km kn hi ko b kp kq ij kr ks kt im ku ji kv kw kx jm ky kz la jq lb lc ld le hb bi translated">处理微服务的一个更困难的方面是从整体上理解和监控平台。</p><p id="ccde" class="pw-post-body-paragraph km kn hi ko b kp kq ij kr ks kt im ku ji kv kw kx jm ky kz la jq lb lc ld le hb bi translated">如果一项服务停止运行，会有什么实际影响？所有其他服务如何反应？部分中断肯定比完全中断好，但是从现实世界的角度来理解它们是很重要的。如果一个请求被部分满足，那是可见的吗？你能恢复吗？</p><p id="271e" class="pw-post-body-paragraph km kn hi ko b kp kq ij kr ks kt im ku ji kv kw kx jm ky kz la jq lb lc ld le hb bi translated">了解平台健康状况的适当工具至关重要，大多数云提供商将为您提供现成的功能，但这些功能需要转化为对客户的影响。</p><p id="928b" class="pw-post-body-paragraph km kn hi ko b kp kq ij kr ks kt im ku ji kv kw kx jm ky kz la jq lb lc ld le hb bi translated">如果客户报告了一个问题，您能追踪发生了什么吗？您能否跨多个服务关联事件，并构建一个完整的画面。没有可追溯性，就很难理解问题的来源。</p></div><div class="ab cl lu lv gp lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="hb hc hd he hf"><p id="7150" class="pw-post-body-paragraph km kn hi ko b kp kq ij kr ks kt im ku ji kv kw kx jm ky kz la jq lb lc ld le hb bi translated">这些不是新的错误，也不是微服务独有的错误，但它们令人恼火，应该成为设计过程的一部分，而不是事后的想法。</p></div></div>    
</body>
</html>