<html>
<head>
<title>Django React App Deployment Part-2 — Using Github Actions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Django React应用程序部署第2部分—使用Github操作</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/django-react-app-deployment-part-2-using-github-actions-a14ff6c2e6d?source=collection_archive---------12-----------------------#2021-07-08">https://medium.com/geekculture/django-react-app-deployment-part-2-using-github-actions-a14ff6c2e6d?source=collection_archive---------12-----------------------#2021-07-08</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="cd34" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本文中，我们将了解GitHub操作，以及如何使用GitHub操作在Heroku上部署Django react应用程序。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/90b78ae357cadad36d268d6c43cf7167.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7ZIliSvnvSXcUEKlpdjQWg.png"/></div></div></figure><p id="24d7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这里获取这个项目的代码<a class="ae jp" href="https://github.com/RadhikaSheth/django-react-app-scratch-to-deployment" rel="noopener ugc nofollow" target="_blank">。</a></p><div class="jq jr ez fb js jt"><a href="https://towardsdev.com/django-react-app-from-scratch-to-deployment-part-1-8a2fa9a97f1" rel="noopener  ugc nofollow" target="_blank"><div class="ju ab dw"><div class="jv ab jw cl cj jx"><h2 class="bd hj fi z dy jy ea eb jz ed ef hh bi translated">Django React应用程序—从零开始到部署第1部分</h2><div class="ka l"><p class="bd b fp z dy jy ea eb jz ed ef dx translated">towardsdev.com</p></div></div><div class="kb l"><div class="kc l kd ke kf kb kg jn jt"/></div></div></a></div><p id="a055" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在进入Github Actions的技术诀窍之前，先来认识一下我们的doggo开发者格兰芬多！</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kh"><img src="../Images/41dc96c1b7933fa286d409a3187d4321.png" data-original-src="https://miro.medium.com/v2/resize:fit:370/format:webp/1*qaMQfUiYuLaeZPJL4sbcew.png"/></div></figure><p id="e055" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">他是一个热情的程序员，但他对CI/CD一无所知，他总是手工构建和部署代码。让我们告诉他如何使用Github Actions节省制作时间！</p><h1 id="d52a" class="ki kj hi bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated"><strong class="ak">什么是Github动作？</strong></h1><p id="3f86" class="pw-post-body-paragraph if ig hi ih b ii lg ik il im lh io ip iq li is it iu lj iw ix iy lk ja jb jc hb bi translated">Github Actions使我们能够自动化我们的构建、测试、打包、发布和部署过程。</p><p id="6549" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">它是GitHub内置的CI/CD工具。但是CI/CD到底是什么？</p><p id="325e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">CI/CD在软件开发生命周期中带来了巨大的效率。<strong class="ih hj">持续集成(CI) </strong>通过执行构建、测试和打包过程，确保代码变更和代码更新的可靠性。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ll"><img src="../Images/0e1cd1baa33717004d5a017e5e0319fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:990/format:webp/1*VLI_DBakQ9oMXuWqpNJgvA.jpeg"/></div><figcaption class="lm ln et er es lo lp bd b be z dx">Image source: www.synopsys.com</figcaption></figure><p id="2180" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">连续交付/部署(CD) </strong>一旦代码成功完成测试，就可以实现自动化的生产部署。</p><p id="6768" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Github Actions由<strong class="ih hj">事件驱动的工作流</strong>组成，可以根据发生的事件执行特定的自动化任务。</p><h1 id="faa9" class="ki kj hi bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">Github操作的组件:</h1><p id="47eb" class="pw-post-body-paragraph if ig hi ih b ii lg ik il im lh io ip iq li is it iu lj iw ix iy lk ja jb jc hb bi translated">让我们借助一个例子来理解它们:</p><p id="d139" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从创建一个YAML(YAML不是标记语言)文件开始。github/workflows目录。我们把它命名为' example.yml '</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lq"><img src="../Images/79936bb914a810ff69eb877a7b2f1b61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nR-GiPK28jioj_vVWhRx7g.jpeg"/></div></div></figure><p id="9171" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">工作流:</strong>对于这个案例，example.yml文件就是我们的工作流。工作流中的任务(构建、测试、部署)是自动化的。我们可以根据自己的需求构建工作流程。</p><p id="6e22" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">“example.yml”的第一行表示我们为工作流指定的名称。</p><p id="e24b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">事件</strong>:事件触发工作流。我们可以根据发生的事件来执行任务。例如:如果一些代码被推送到XYZ分支，运行这个特定的代码。事件可能发生的所有分支都可以写入事件名称下的数组中。</p><p id="cf66" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">作业:</strong>单个流道下可以执行多项作业。我们可以同时运行多个作业，也可以按顺序运行。默认情况下，作业并行运行。在本例中，我们只有一个作业“构建”。</p><p id="ab5d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> Runner: </strong>它指定我们的作业将在哪个机器(Ubuntu/Windows/Mac)上执行。默认情况下，指定的跑步者将是GitHub托管的跑步者，但我们也可以使用我们托管的跑步者。例子中提到的runner(runs-on: ubuntu-latest)是GitHub提供的默认。</p><p id="bc89" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤:</strong>步骤是执行所需命令代码的独立任务。一个步骤可以是一个shell命令或一个“动作”。动作被认为是工作流的最小块。我们可以使用GitHub提供的动作，也可以使用我们自己的动作。</p><p id="7455" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在上述示例中的“步骤”下:</p><p id="d22a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">提到的第一个动作<code class="du lr ls lt lu b">uses: actions/checkout@v2</code>是强制性的，该步骤在工作流程中至少应出现一次。这将检查您的存储库并将其下载到runner。此操作将使我们能够对回购中的代码使用操作。</p><p id="f8a3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以用<code class="du lr ls lt lu b">name: 'My action name'</code>来表示步骤的名称，后面跟着相应的动作或命令。</p><p id="5e31" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以在repo的“操作”选项卡下运行工作流。</p><p id="5bf4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要从Actions选项卡手动运行工作流，请在events下添加<code class="du lr ls lt lu b">workflow_dispatch </code>。</p><h1 id="7c6e" class="ki kj hi bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">在Heroku上部署Django-React应用程序:</h1><p id="c176" class="pw-post-body-paragraph if ig hi ih b ii lg ik il im lh io ip iq li is it iu lj iw ix iy lk ja jb jc hb bi translated">要在Heroku上部署应用程序，需要Procfile。</p><p id="3655" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">检查您的回购是否已经包含Procfile。如果没有，请参考我的上一篇文章，了解如何准备好Django-react应用程序部署。</p><div class="jq jr ez fb js jt"><a href="https://towardsdev.com/django-react-app-from-scratch-to-deployment-part-1-8a2fa9a97f1" rel="noopener  ugc nofollow" target="_blank"><div class="ju ab dw"><div class="jv ab jw cl cj jx"><h2 class="bd hj fi z dy jy ea eb jz ed ef hh bi translated">Django React应用程序—从零开始到部署第1部分</h2><div class="ka l"><p class="bd b fp z dy jy ea eb jz ed ef dx translated">towardsdev.com</p></div></div><div class="kb l"><div class="kc l kd ke kf kb kg jn jt"/></div></div></a></div><p id="ce1b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们实现GitHub操作，使部署过程更容易、更快。</p><p id="3128" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要在Heroku上部署一个应用程序，创建一个应用程序并将您的GitHub存储库连接到它。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lv"><img src="../Images/9c682cd419b1a8893117a7eb2ab16ff1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j3vBuPABfkSmT906VbZ17w.png"/></div></div></figure><p id="cf6d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在下创建工作流。github/工作流。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lw lx l"/></div></figure><p id="b0ce" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将使用以下repo将应用程序部署到Heroku。</p><div class="jq jr ez fb js jt"><a href="https://github.com/marketplace/actions/deploy-to-heroku" rel="noopener  ugc nofollow" target="_blank"><div class="ju ab dw"><div class="jv ab jw cl cj jx"><h2 class="bd hj fi z dy jy ea eb jz ed ef hh bi translated">部署到Heroku - GitHub市场</h2><div class="ly l"><h3 class="bd b fi z dy jy ea eb jz ed ef dx translated">这是一个非常简单的GitHub操作，允许您部署到Heroku。该操作通过运行以下内容来实现…</h3></div><div class="ka l"><p class="bd b fp z dy jy ea eb jz ed ef dx translated">github.com</p></div></div><div class="kb l"><div class="lz l kd ke kf kb kg jn jt"/></div></div></a></div><p id="5d7e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此操作将执行从构建到部署的所有任务。</p><p id="c2c4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">相同的过程可以通过在传统方法中执行不同的动作(例如构建、测试、部署)来执行。</p><p id="f8bd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了允许回购人在Heroku上部署我们的应用程序，我们需要共享我们的Heroku应用程序的一些凭证。</p><p id="774b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">向工作流添加私有凭证的最佳方式是使用Github Secrets。Github Secrets 非常容易创建，经过加密以保持安全性，并存储在您的repo中。Github secrets存储为一个key:value对，可以从Settings-&gt;Secrets from your repo中创建。</p><p id="1f72" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所需的凭据包括:</p><ul class=""><li id="2f21" class="ma mb hi ih b ii ij im in iq mc iu md iy me jc mf mg mh mi bi translated">您的Heroku应用名称</li><li id="f9f2" class="ma mb hi ih b ii mj im mk iq ml iu mm iy mn jc mf mg mh mi bi translated">Heroku API密钥<em class="mo">要获取Heroku API密钥，请进入Heroku- &gt;帐户设置- &gt; API密钥。</em></li><li id="597f" class="ma mb hi ih b ii mj im mk iq ml iu mm iy mn jc mf mg mh mi bi translated">您用来创建Heroku帐户的电子邮件。</li></ul><p id="f5cb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在您的repo中创建新的秘密，并将上述凭证存储为键:值对。</p><p id="79c1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以向该操作添加更多配置。在上面的代码中，我在带有组件的<em class="mo">下添加了<code class="du lr ls lt lu b">donotautocreate: true</code>。这将避免自动创建Heroku应用程序。详情请参考<a class="ae jp" href="https://github.com/marketplace/actions/deploy-to-heroku" rel="noopener ugc nofollow" target="_blank">此处</a>了解。</em></p><p id="4244" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在您的工作流程中添加带有语法<code class="du lr ls lt lu b">${{secrets.YOUR_SECRET_NAME}}</code>的秘密。通过指定这一点，我们要求动作<code class="du lr ls lt lu b">akhileshns/heroku-deploy</code>使用我们的应用程序凭证并完成部署过程。</p><p id="561d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以走了！</p><p id="60e3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在工作流中指定事件，或者转到“操作”选项卡并手动运行工作流以查看结果。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mp"><img src="../Images/a7efcf5166b109008daf9ac42d8f4d7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Wy0_VSyiY_1LYP_m7JlYUw.png"/></div></div></figure><p id="9322" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">绿色的滴答声说明了一切！转到您的Heroku应用程序，检查已部署的更改。</p><p id="ac37" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们的任务完成了！</p><p id="4634" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，每当我们的doggo开发人员Gryffindog对代码进行更改时，只要将代码推送到repo，GitHub actions就会帮助自动测试代码并将其部署到生产环境中，从而节省他的时间！</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mq"><img src="../Images/97cb7828e4561bca23122ffa8edd6289.png" data-original-src="https://miro.medium.com/v2/resize:fit:448/format:webp/1*YF8GvrjHtArqzOmHhbBFsQ.png"/></div></figure><p id="8806" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你去格兰芬多！⚡</p><p id="6a14" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">检查已部署的网站:</p><div class="jq jr ez fb js jt"><a href="https://spells-at-hogwarts.herokuapp.com/addSpell" rel="noopener  ugc nofollow" target="_blank"><div class="ju ab dw"><div class="jv ab jw cl cj jx"><h2 class="bd hj fi z dy jy ea eb jz ed ef hh bi translated">霍格沃茨的咒语</h2><div class="ly l"><h3 class="bd b fi z dy jy ea eb jz ed ef dx translated">使用create-react-app创建的网站</h3></div><div class="ka l"><p class="bd b fp z dy jy ea eb jz ed ef dx translated">spells-at-hogwarts.herokuapp.com</p></div></div></div></a></div><p id="f18b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">参考资料:</p><ul class=""><li id="9a66" class="ma mb hi ih b ii ij im in iq mc iu md iy me jc mf mg mh mi bi translated">https://github.com/marketplace/actions/deploy-to-heroku<a class="ae jp" href="https://github.com/marketplace/actions/deploy-to-heroku" rel="noopener ugc nofollow" target="_blank"/></li><li id="709e" class="ma mb hi ih b ii mj im mk iq ml iu mm iy mn jc mf mg mh mi bi translated">【https://docs.github.com/en/actions T4】</li></ul></div></div>    
</body>
</html>