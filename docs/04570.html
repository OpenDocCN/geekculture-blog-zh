<html>
<head>
<title>Kubernetes Dashboards: Lens</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Kubernetes仪表板:透镜</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/kubernetes-dashboards-lens-96454492e5c8?source=collection_archive---------41-----------------------#2021-06-29">https://medium.com/geekculture/kubernetes-dashboards-lens-96454492e5c8?source=collection_archive---------41-----------------------#2021-06-29</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="7b57" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">里奇·巴勒斯</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/a74abc57670a7e457d8bd039baff8748.png" data-original-src="https://miro.medium.com/v2/resize:fit:766/format:webp/1*sSIF4xyHg_UybzdkXAu1eA.png"/></div></figure><p id="439a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于我们中的一些人来说，像kubectl这样的命令行工具是与Kubernetes集群交互的好方法，但是许多人更喜欢图形界面。Kubernetes有一个<a class="ae jl" href="https://kubernetes.io/docs/tasks/access-application-cluster/web-ui-dashboard/" rel="noopener ugc nofollow" target="_blank">内置的仪表盘</a>，但是有些人在寻找它不支持的功能。在这个系列中，我们将看看Kubernetes可用的其他一些仪表板，以及它们必须提供什么。</p><p id="d886" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将从最受欢迎的替代品之一开始，透镜。Lens团队将他们的工具描述为“用于开发的Kubernetes IDE”，这是一个非常强大的工具。Lens最初是专有的，但是<a class="ae jl" href="https://techcrunch.com/2020/08/13/mirantis-acquires-lens-an-ide-for-kubernetes/" rel="noopener ugc nofollow" target="_blank"> Mirantis在2020年8月收购了它</a>，并且开源了<a class="ae jl" href="https://github.com/lensapp/lens" rel="noopener ugc nofollow" target="_blank">的代码</a>。这是一个基于电子的应用程序，你可以在本地电脑上运行。它允许对您的Kubernetes集群进行读写访问。</p><h1 id="8b73" class="jm jn hi bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated">添加集群</h1><p id="4209" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">使用Lens连接到Kubernetes集群很容易。如果您有一个指向集群的本地Kubeconfig文件，您可以将其导入到Lens中进行连接。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="er es kp"><img src="../Images/42deb46a8f1afc2717164a871311fa87.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*wDDzx8eqNE51yYfR"/></div></div></figure><p id="f422" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Lens允许您配置多个集群进行管理，并在它们之间轻松切换。</p><p id="cac5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Lens中的度量非常方便。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="er es kp"><img src="../Images/7e9dc049796bc835cb46fa5b8aaad2ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*AX48hRuprepkyFgP"/></div></div></figure><p id="2e69" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">不过，Lens将无法显示指标，直到您<a class="ae jl" href="https://docs.k8slens.dev/main/clusters/settings/#prometheus" rel="noopener ugc nofollow" target="_blank">将其配置为与Prometheus </a>一起工作。如果您的集群中没有Prometheus实例，您可以直接从Lens轻松添加一个。右键单击UI左上角的群集图标，然后选择“Settings”。在那里，您可以安装一个已经设置好的Prometheus实例来使用Lens。在应用之前，您还可以预览Prometheus的Kubernetes清单。</p><p id="8efb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你已经运行了普罗米修斯，你可以<a class="ae jl" href="https://github.com/lensapp/lens/blob/master/troubleshooting/custom-prometheus.md" rel="noopener ugc nofollow" target="_blank">配置它</a>与镜头一起工作。</p><h1 id="9f26" class="jm jn hi bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated">管理对象</h1><p id="dbe8" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">您可以查看集群中对象的状态，包括pod、部署、名称空间、网络、存储，甚至自定义资源。Lens是快速识别运行不正常的pod并了解原因的好方法。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="er es kp"><img src="../Images/34db03780ddc136fdebb8c5568703be3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*V0p0UHBXsPKbSxCX"/></div></div></figure><p id="2cf3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如您所见，在这个视图中，我选择了多个名称空间来查看窗格。我只需将鼠标悬停在一个处于挂起状态的pod上，就可以了解原因。这些都是可以用kubectl表现出来的，但是有些人更喜欢图形化的视图。</p><p id="718b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您的用户拥有正确的访问权限，Lens将允许您在集群中进行更改。这可能是非常好的，也可能是非常坏的，取决于具体情况。如果你是一家使用GitOps的商店，你可能不希望个别开发人员或平台工程师在你的代码工作流之外对状态进行修改。但是，如果您使用的是开发集群，这可能没问题。这完全取决于你的团队如何工作。</p><p id="b1fd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你可以用Lens做的一件事是从舵图安装应用程序。点按左侧菜单中的应用程序图标，然后您可以搜索您想要安装的图表。这比去<a class="ae jl" href="https://artifacthub.io/" rel="noopener ugc nofollow" target="_blank">神器中心</a>并在那里追踪一张图表要方便得多，这对于评估新的头盔图表非常有用。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="er es kp"><img src="../Images/dca3d4e3cc274968f6f7c5d66833a081.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*U0TLVPj1wskwWfuB"/></div></div></figure><p id="d4eb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">单击安装按钮后，您会看到一个屏幕，您可以在其中直接编辑YAML进行更改。在这个例子中，我将NGINX副本的数量从一个改为三个。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="er es kp"><img src="../Images/ef9200fecbdee7f3cb360adbda45a713.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*f-C24ceD9BNZpe6_"/></div></div></figure><p id="e933" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您还可以像使用<a class="ae jl" href="https://jamesdefabia.github.io/docs/user-guide/kubectl/kubectl_edit/" rel="noopener ugc nofollow" target="_blank"> kubectl edit </a>一样编辑集群中正在运行的对象。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="er es kp"><img src="../Images/0aae5c724121b9886b824c476b27de12.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*lHiiaKD4VzFbcuQy"/></div></div></figure><p id="ef63" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">同样，这不太可能是大多数团队想在生产环境中做的事情，但是对于还不熟悉kubectl的人，或者在孤立的开发环境中工作的人来说，这可能是很好的。同样需要注意的是，用户可以在Lens中进行的更改也可以在kubectl中进行，因此防止在GitOps工作流之外进行更改的真正方法是使用<a class="ae jl" href="https://kubernetes.io/docs/reference/access-authn-authz/rbac/" rel="noopener ugc nofollow" target="_blank">基于角色的访问控制(RBAC) </a>权限。</p><h1 id="4153" class="jm jn hi bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated">扩展ˌ扩张</h1><p id="43ac" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">扩展是Lens中的一个新特性，它允许你编写自定义代码来扩展Lens，或者重用其他人构建的扩展。现在GitHub 上有一些共享的扩展<a class="ae jl" href="https://github.com/lensapp/lens-extensions" rel="noopener ugc nofollow" target="_blank">。希望会有更多的出现。Kubecost刚刚发布了一个扩展</a>，用于在Lens中跟踪您的成本指标。</p><p id="44c6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你想尝试构建自己的镜头扩展，文档中有一个<a class="ae jl" href="https://api-docs.k8slens.dev/v4.2.5/extensions/get-started/overview/" rel="noopener ugc nofollow" target="_blank">开发指南。推荐使用Typescript，您也可以</a><a class="ae jl" href="https://api-docs.k8slens.dev/v4.2.5/extensions/testing-and-publishing/testing/" rel="noopener ugc nofollow" target="_blank">为您的扩展编写测试</a>。如果您喜欢使用Lens，并且熟悉JavaScript/Typescript，这可能值得一试。</p><h1 id="5422" class="jm jn hi bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated">结论</h1><p id="1217" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">Lens有很多很棒的功能，它是一个独立的应用程序，而不是内置的Kubernetes仪表盘。我们使用工具的方式各不相同，这就是为什么Kubernetes有如此多样的图形用户界面是件好事。</p><p id="f002" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你用Kubernetes，那就值得看一看Lens。</p><p id="2600" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我系列的下一篇文章中，我将关注另一个受欢迎的Kubernetes用户界面<a class="ae jl" href="https://github.com/kinvolk/headlamp" rel="noopener ugc nofollow" target="_blank">头灯</a>，稍后我们将关注官方的<a class="ae jl" href="https://kubernetes.io/docs/tasks/access-application-cluster/web-ui-dashboard/" rel="noopener ugc nofollow" target="_blank"> Kubernetes仪表盘</a>。敬请关注。</p></div><div class="ab cl ku kv gp kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="hb hc hd he hf"><p id="7c9f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="lb">最初发布于</em><a class="ae jl" href="https://loft.sh/blog/kubernetes-dashboards-lens/" rel="noopener ugc nofollow" target="_blank"><em class="lb">https://loft . sh</em></a><em class="lb">。</em></p></div></div>    
</body>
</html>