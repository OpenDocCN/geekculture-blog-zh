<html>
<head>
<title>Distributed event streaming — Kafka</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">分布式事件流—卡夫卡</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/distributed-event-streaming-kafka-dca9ca58ad69?source=collection_archive---------4-----------------------#2022-10-09">https://medium.com/geekculture/distributed-event-streaming-kafka-dca9ca58ad69?source=collection_archive---------4-----------------------#2022-10-09</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="1056" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">用于存储、读取和分析流数据的框架</p><p id="83a3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Kafka为我们提供了流媒体平台的三种功能:</p><ol class=""><li id="3bb9" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated"><strong class="ih hj">发布</strong>(写)和<strong class="ih hj">订阅</strong>(读)事件流</li><li id="9f86" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated"><strong class="ih hj">持久可靠地存储</strong>个事件流</li><li id="ac54" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">在事件发生时处理事件流</li></ol><h2 id="22b2" class="jr js hi bd jt ju jv jw jx jy jz ka kb iq kc kd ke iu kf kg kh iy ki kj kk kl bi translated">特征</h2><ul class=""><li id="f755" class="jd je hi ih b ii km im kn iq ko iu kp iy kq jc kr jj jk jl bi translated">分布的</li><li id="fa52" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc kr jj jk jl bi translated">弹性和容错</li><li id="da15" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc kr jj jk jl bi translated">水平可伸缩</li><li id="c964" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc kr jj jk jl bi translated">高性能和低延迟(<a class="ae ks" href="https://blog.devgenius.io/what-makes-kafka-so-performant-df5dbecb7f3a" rel="noopener ugc nofollow" target="_blank">点击了解原因</a>)</li><li id="acbb" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc kr jj jk jl bi translated">与模式无关的存储</li><li id="55b9" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc kr jj jk jl bi translated">多语言(Java、Python、Go，甚至REST代理)</li><li id="8155" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc kr jj jk jl bi translated">生产者和消费者之间的异步处理和解耦</li><li id="4745" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc kr jj jk jl bi translated">持久性消息存储、缓冲、突发负载和消费者故障</li><li id="e0bb" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc kr jj jk jl bi translated">已经过生产测试，被LinkedIn、网飞、Airbnb、沃尔玛使用…</li></ul><h2 id="18f7" class="jr js hi bd jt ju jv jw jx jy jz ka kb iq kc kd ke iu kf kg kh iy ki kj kk kl bi translated">卡夫卡的用例</h2><ul class=""><li id="98e4" class="jd je hi ih b ii km im kn iq ko iu kp iy kq jc kr jj jk jl bi translated">命令查询责任分离(CQRS)</li><li id="df26" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc kr jj jk jl bi translated">复杂事件处理</li><li id="2412" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc kr jj jk jl bi translated">分阶段事件驱动架构(SEDA)</li><li id="46c4" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc kr jj jk jl bi translated">日志传送和聚合</li><li id="8b05" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc kr jj jk jl bi translated">活动采购</li><li id="7fa5" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc kr jj jk jl bi translated">变更数据捕获</li><li id="5a09" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc kr jj jk jl bi translated">可伸缩消息存储</li><li id="6b78" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc kr jj jk jl bi translated">请求-回复集成模式</li><li id="a94c" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc kr jj jk jl bi translated">物化视图模式</li></ul><figure class="ku kv kw kx fd ky er es paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="er es kt"><img src="../Images/d1b30db865171b9e912ef0b4750299c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pkRiNVf2GPFBzFXxtf81gw.png"/></div></div></figure><h2 id="2352" class="jr js hi bd jt ju jv jw jx jy jz ka kb iq kc kd ke iu kf kg kh iy ki kj kk kl bi translated"><a class="ae ks" href="https://asrathore08.medium.com/kafka-internals-of-producer-and-consumers-5a1aebb2b3ce" rel="noopener">生产者</a></h2><p id="2253" class="pw-post-body-paragraph if ig hi ih b ii km ik il im kn io ip iq lf is it iu lg iw ix iy lh ja jb jc hb bi translated">生产者是生成消息/数据流的服务/应用程序。他们使用<strong class="ih hj">代理</strong>或<strong class="ih hj"> Zookeeper </strong> URL连接到Kafka集群。<strong class="ih hj">所有具有相同键的事件将在同一个分区</strong>中发布，这是一种保证消费事件时排序的方法。这是通过murmur2算法使用密钥散列来完成的。由生产者产生消息将具有以下属性:</p><blockquote class="li lj lk"><p id="d68b" class="if ig ll ih b ii ij ik il im in io ip lm ir is it ln iv iw ix lo iz ja jb jc hb bi translated">Key — binary |可选的<br/>值— binary |可选的<br/>压缩— none | gzip | snappy | zstd | lz4 <br/>头—消息的元数据| Key: Value |可选的<br/>分区&amp;偏移量<br/>时间戳</p></blockquote><h2 id="ef33" class="jr js hi bd jt ju jv jw jx jy jz ka kb iq kc kd ke iu kf kg kh iy ki kj kk kl bi translated"><a class="ae ks" href="https://asrathore08.medium.com/kafka-internals-of-producer-and-consumers-5a1aebb2b3ce" rel="noopener">消费者</a></h2><p id="8866" class="pw-post-body-paragraph if ig hi ih b ii km ik il im kn io ip iq lf is it iu lg iw ix iy lh ja jb jc hb bi translated">消费者是从单个分区消费消息/批处理流的应用程序。</p><h2 id="d2ee" class="jr js hi bd jt ju jv jw jx jy jz ka kb iq kc kd ke iu kf kg kh iy ki kj kk kl bi translated">消费者群体</h2><p id="9e81" class="pw-post-body-paragraph if ig hi ih b ii km ik il im kn io ip iq lf is it iu lg iw ix iy lh ja jb jc hb bi translated">使用者组是由多个使用者组成的组，组中的每个使用者直接从独占分区读取数据。如果消费者的数量大于分区的数量，一些消费者将处于非活动状态。</p><p id="a2a2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">重新平衡——将分区所有权从一个用户转移到另一个用户称为<em class="ll">重新平衡</em>。</p><blockquote class="li lj lk"><p id="e530" class="if ig ll ih b ii ij ik il im in io ip lm ir is it ln iv iw ix lo iz ja jb jc hb bi translated">消费者订阅一个或多个主题。一个消费者只能属于一个消费者群体。</p></blockquote><h2 id="b680" class="jr js hi bd jt ju jv jw jx jy jz ka kb iq kc kd ke iu kf kg kh iy ki kj kk kl bi translated">主题</h2><p id="9435" class="pw-post-body-paragraph if ig hi ih b ii km ik il im kn io ip iq lf is it iu lg iw ix iy lh ja jb jc hb bi translated">主题是在Kafka集群中存储消息的逻辑分隔。Kafka将消息记录保留为日志。<strong class="ih hj">补偿</strong>决定了生产者/消费者消费日志的相对定位。这些存储在Kafka内部主题<strong class="ih hj"> __consumer_offsets中。一个主题可以有零个或多个消费者，也可以有零个或多个生产者。</strong></p><figure class="ku kv kw kx fd ky er es paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="er es lp"><img src="../Images/815d144334b694d2fd2c5303fde5d9dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jr4CAVRtrEE4eR01y8dNbA.png"/></div></div><figcaption class="lq lr et er es ls lt bd b be z dx"><a class="ae ks" href="https://asrathore08.medium.com/kafka-internals-part-2-7dad1977f7d1" rel="noopener">For details on each file click here</a></figcaption></figure><h2 id="d785" class="jr js hi bd jt ju jv jw jx jy jz ka kb iq kc kd ke iu kf kg kh iy ki kj kk kl bi translated">经纪人</h2><p id="2169" class="pw-post-body-paragraph if ig hi ih b ii km ik il im kn io ip iq lf is it iu lg iw ix iy lh ja jb jc hb bi translated">Kafka集群由多个满足高可用性需求的服务器组成，称为代理。这些是运行Kafka流程的实际机器和实例。每个代理可以托管一组分区，并处理向这些分区写入和读取事件的请求。它们还有助于跨分区复制消息数据。</p><figure class="ku kv kw kx fd ky er es paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="er es lu"><img src="../Images/01077bcc0cc18d18adccb2644614287c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qepVCzn5rkIcZrTxOauNWg.png"/></div></div></figure><h2 id="1d0f" class="jr js hi bd jt ju jv jw jx jy jz ka kb iq kc kd ke iu kf kg kh iy ki kj kk kl bi translated">划分</h2><p id="b25e" class="pw-post-body-paragraph if ig hi ih b ii km ik il im kn io ip iq lf is it iu lg iw ix iy lh ja jb jc hb bi translated">主题被细分为<strong class="ih hj">分区</strong>，是卡夫卡层级中最小的存储单元。分区是一个有序且不可变的记录序列。在每个分区内，每个发布的事件都接收一个标识符，即<strong class="ih hj">偏移量</strong>。使用者使用偏移量来控制哪些事件已经被使用，哪些事件是下一个要使用的事件。但是<strong class="ih hj">消费顺序只在同一个分区中得到保证。</strong></p><figure class="ku kv kw kx fd ky er es paragraph-image"><div class="er es lv"><img src="../Images/bfa669a42872e13f8dab65ccad75df1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1060/format:webp/1*K66janpBiq0J9H4ORNFRhQ.png"/></div></figure><blockquote class="lw"><p id="8b47" class="lx ly hi bd lz ma mb mc md me mf jc dx translated">对于Kafka消费者来说，分区是一个并行单位。</p></blockquote><p id="a6c7" class="pw-post-body-paragraph if ig hi ih b ii mg ik il im mh io ip iq mi is it iu mj iw ix iy mk ja jb jc hb bi translated">每个分区存储跨节点复制的<strong class="ih hj">日志文件，这些日志文件分布在多个代理中以实现容错。这些日志文件称为段。一个段只是一个分区的消息集合。段N包含最近的记录，段1包含最老的保留记录。该段包含1 GB的数据(<code class="du ml mm mn mo b">log.segment.bytes</code>)或一周的数据(<code class="du ml mm mn mo b">log.roll.ms</code>或<code class="du ml mm mn mo b">log.roll.hours</code>)，以较小者为准。如果达到这个限制，那么段文件将被关闭，并创建一个新的段文件。</strong></p><figure class="ku kv kw kx fd ky er es paragraph-image"><div class="er es mp"><img src="../Images/7df3159139883dfedf7577b1ee8ec6ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1076/format:webp/1*Rz8Os7ZnvwRAKPxrpWPZRw.png"/></div></figure><blockquote class="li lj lk"><p id="d2f0" class="if ig ll ih b ii ij ik il im in io ip lm ir is it ln iv iw ix lo iz ja jb jc hb bi translated">一个分区的每个使用者组只有一个使用者。<br/>在任何时候，单个经纪人将成为一个分区的领导者。该代理将负责接收和提供该分区的数据。</p></blockquote><p id="cba1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="ll">注意:在使用zookeeper时，Kafka集群应该有少于200k的分区。</em></p><h2 id="9853" class="jr js hi bd jt ju jv jw jx jy jz ka kb iq kc kd ke iu kf kg kh iy ki kj kk kl bi translated">动物园管理员</h2><p id="d996" class="pw-post-body-paragraph if ig hi ih b ii km ik il im kn io ip iq lf is it iu lg iw ix iy lh ja jb jc hb bi translated">zookeeper帮助管理Kafka集群的活动，例如在代理之间进行协调，为复制选择主分区等。</p><p id="a1b6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="ll">注:从卡夫卡</em><strong class="ih hj"><em class="ll">3 . 3 . 0</em></strong><em class="ll">阿帕奇动物园管理员依赖被移除。相反，卡夫卡现在依赖于一个内部的Raft定额组。从3.3版本开始，此功能已可用于生产。</em></p><h2 id="9c4a" class="jr js hi bd jt ju jv jw jx jy jz ka kb iq kc kd ke iu kf kg kh iy ki kj kk kl bi translated">流处理器</h2><p id="f6ec" class="pw-post-body-paragraph if ig hi ih b ii km ik il im kn io ip iq lf is it iu lg iw ix iy lh ja jb jc hb bi translated">流消耗来自一个或多个主题的输入流，并产生到一个或多个输出主题的输出流，有效地将输入流转换成输出流。<strong class="ih hj">主要用于转换ELT/ETL管道中的数据。</strong> Kafka提供了一个集成的Streams API库。这类似于消费者API。</p><h2 id="f424" class="jr js hi bd jt ju jv jw jx jy jz ka kb iq kc kd ke iu kf kg kh iy ki kj kk kl bi translated">连接器</h2><p id="ab2e" class="pw-post-body-paragraph if ig hi ih b ii km ik il im kn io ip iq lf is it iu lg iw ix iy lh ja jb jc hb bi translated">连接器是将Kafka主题连接到现有应用程序或数据系统的可重用生产者或消费者。例如，关系数据库的连接器可能捕获表的每一次更改。可以看作是Kafka的数据集成框架。因为这些通常是由系统专家开发的，所以它也在连接器中封装了操作方面。使用已定义连接器的充分理由如下，但不仅限于此:</p><blockquote class="li lj lk"><p id="c2a0" class="if ig ll ih b ii ij ik il im in io ip lm ir is it ln iv iw ix lo iz ja jb jc hb bi translated">减少开发工作量<br/>自动偏移管理&amp;恢复丢失的消息<br/>可插拔&amp;高可用性和可扩展性<br/>标准化<br/>源/接收器改造<br/>减少维护</p></blockquote><h2 id="87c2" class="jr js hi bd jt ju jv jw jx jy jz ka kb iq kc kd ke iu kf kg kh iy ki kj kk kl bi translated">模式注册表</h2><p id="5262" class="pw-post-body-paragraph if ig hi ih b ii km ik il im kn io ip iq lf is it iu lg iw ix iy lh ja jb jc hb bi translated">在Kafka中，生产者和消费者并不直接交流，而是通过Kafka主题传递数据。生产者必须知道如何序列化数据，消费者必须知道如何反序列化数据。</p><p id="453b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">模式注册中心是一个独立的进程，独立于Kafka代理运行。它存储和检索Avro、JSON、Protobuf模式等。使用这些模式，它执行数据序列化和反序列化的验证。</p><figure class="ku kv kw kx fd ky er es paragraph-image"><div class="er es mq"><img src="../Images/c960062f59265b62f8832b368bc8b0e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1210/format:webp/1*Rw-fY1T-DyWWsMx6IE8klQ.jpeg"/></div></figure><h1 id="5a38" class="mr js hi bd jt ms mt mu jx mv mw mx kb my mz na ke nb nc nd kh ne nf ng kk nh bi translated">写作策略</h1><p id="bfe4" class="pw-post-body-paragraph if ig hi ih b ii km ik il im kn io ip iq lf is it iu lg iw ix iy lh ja jb jc hb bi translated">Ack —它表示在我们认为写入成功之前必须收到记录的代理数量。有效值为0、1和全部。</p><blockquote class="li lj lk"><p id="90b3" class="if ig ll ih b ii ij ik il im in io ip lm ir is it ln iv iw ix lo iz ja jb jc hb bi translated">0 →生产者不会等待代理的响应</p><p id="4699" class="if ig ll ih b ii ij ik il im in io ip lm ir is it ln iv iw ix lo iz ja jb jc hb bi translated">1 →当领导收到记录时，制作人将认为写入成功</p><p id="f6d2" class="if ig ll ih b ii ij ik il im in io ip lm ir is it ln iv iw ix lo iz ja jb jc hb bi translated">2→当所有同步副本收到记录时，生产者将认为写入成功</p></blockquote><h1 id="19ea" class="mr js hi bd jt ms mt mu jx mv mw mx kb my mz na ke nb nc nd kh ne nf ng kk nh bi translated">语义学</h1><blockquote class="li lj lk"><p id="e004" class="if ig ll ih b ii ij ik il im in io ip lm ir is it ln iv iw ix lo iz ja jb jc hb bi translated">恰好一次→因为Kafka生产者API是幂等的。写将恰好发生一次。</p></blockquote><h2 id="8b9a" class="jr js hi bd jt ju jv jw jx jy jz ka kb iq kc kd ke iu kf kg kh iy ki kj kk kl bi translated">储存；储备</h2><p id="1d4a" class="pw-post-body-paragraph if ig hi ih b ii km ik il im kn io ip iq lf is it iu lg iw ix iy lh ja jb jc hb bi translated">在大多数情况下，使用尾读取以流的方式消耗数据。尾部读取利用操作系统的页面缓存来提供数据，而不是磁盘读取。出于回填或故障恢复目的，通常会从磁盘中读取较旧的数据，这种情况并不常见。在分层存储方法中，Kafka集群配置有两层存储—本地和远程。</p><blockquote class="li lj lk"><p id="0e54" class="if ig ll ih b ii ij ik il im in io ip lm ir is it ln iv iw ix lo iz ja jb jc hb bi translated">本地<br/>远程(尚未生产就绪)</p></blockquote><figure class="ku kv kw kx fd ky er es paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="er es ni"><img src="../Images/ed924446fc24769780a260d5499621e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*E9v0gV02lKuHPFRO"/></div></div></figure><h1 id="f66b" class="mr js hi bd jt ms mt mu jx mv mw mx kb my mz na ke nb nc nd kh ne nf ng kk nh bi translated">配置</h1><h2 id="b231" class="jr js hi bd jt ju jv jw jx jy jz ka kb iq kc kd ke iu kf kg kh iy ki kj kk kl bi translated">集群/代理</h2><blockquote class="li lj lk"><p id="bd6a" class="if ig ll ih b ii ij ik il im in io ip lm ir is it ln iv iw ix lo iz ja jb jc hb bi translated">max . message . bytes<br/>default . deserialization . exception . handler<em class="hi"><br/></em>errors . deadletterqueue . topic . name<br/>min . in sync . replicas<br/>auto . create . topics . enable(在生产中为假)<br/>num . replica . fetchers<br/>default . replication . factor</p></blockquote><h2 id="5596" class="jr js hi bd jt ju jv jw jx jy jz ka kb iq kc kd ke iu kf kg kh iy ki kj kk kl bi translated">生产者</h2><blockquote class="li lj lk"><p id="0bc0" class="if ig ll ih b ii ij ik il im in io ip lm ir is it ln iv iw ix lo iz ja jb jc hb bi translated">bootstrap . servers<br/>client . id<br/>acks<br/>retries<br/>max . in-flight . requests . per . connection<br/>batch . size<br/>linger . ms<br/>compression . type<br/>enable .幂等性</p></blockquote><h2 id="0bb9" class="jr js hi bd jt ju jv jw jx jy jz ka kb iq kc kd ke iu kf kg kh iy ki kj kk kl bi translated">消费者</h2><blockquote class="li lj lk"><p id="3be6" class="if ig ll ih b ii ij ik il im in io ip lm ir is it ln iv iw ix lo iz ja jb jc hb bi translated">bootstrap . servers<br/>client . id<br/>group . id<br/>session . time out . ms<br/>heart beat . interval . ms<br/>enable . auto . commit<br/>auto . commit . interval . ms<br/>auto . offset . reset<br/>max . poll . interval . ms<br/>max . poll . records<br/>message . max . bytes<br/>auto . offset . reset</p></blockquote><h2 id="88f1" class="jr js hi bd jt ju jv jw jx jy jz ka kb iq kc kd ke iu kf kg kh iy ki kj kk kl bi translated">使用的端口</h2><blockquote class="li lj lk"><p id="6d8b" class="if ig ll ih b ii ij ik il im in io ip lm ir is it ln iv iw ix lo iz ja jb jc hb bi translated">代理:9092<br/>Zookeeper:2181<br/>REST Proxy:8082<br/>Schema Registry:8081<br/>KSQL:8088</p></blockquote><h2 id="cb50" class="jr js hi bd jt ju jv jw jx jy jz ka kb iq kc kd ke iu kf kg kh iy ki kj kk kl bi translated">跨集群复制(XDCR)</h2><p id="20f6" class="pw-post-body-paragraph if ig hi ih b ii km ik il im kn io ip iq lf is it iu lg iw ix iy lh ja jb jc hb bi translated">Kafka使用MirrorMaker2进行复制。MM2是Apache Kafka源连接器和接收器连接器的组合。</p><blockquote class="li lj lk"><p id="b4f5" class="if ig ll ih b ii ij ik il im in io ip lm ir is it ln iv iw ix lo iz ja jb jc hb bi translated">镜像源连接器<br/>镜像检查点连接器<br/>镜像心跳连接器</p></blockquote><p id="85d1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">MM2自动检测新主题和分区，同时还确保主题配置在集群之间同步。</p><figure class="ku kv kw kx fd ky er es paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="er es nj"><img src="../Images/ca1e55396819759756204e50572d0a96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oIC27wBcP-UPdgDzFvBHWg.png"/></div></div><figcaption class="lq lr et er es ls lt bd b be z dx">Once all consumers are migrated then switch the producer to the new cluster</figcaption></figure><p id="dad7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">其他选项有<strong class="ih hj"> uReplicator </strong>(来自优步)、Mirus(来自Salesforce)、Brooklin(来自LinkedIn)和confluent Replicator(来自confluent，而非开源)。</p><p id="02b0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="ll">注意:Kafka不是一个消息服务，虽然它可以提供一个受约束的排队解决方案，但明智的做法是选择NATS或RabbitMQ作为一个专门的解决方案</em></p><h2 id="3b8b" class="jr js hi bd jt ju jv jw jx jy jz ka kb iq kc kd ke iu kf kg kh iy ki kj kk kl bi translated">可观察性和监控(控制台/用户界面)</h2><p id="9d78" class="pw-post-body-paragraph if ig hi ih b ii km ik il im kn io ip iq lf is it iu lg iw ix iy lh ja jb jc hb bi translated">有许多第三方、开源或商业图形工具提供了额外的管理和监控功能。</p><p id="bc7e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae ks" href="https://github.com/obsidiandynamics/kafdrop" rel="noopener ugc nofollow" target="_blank"> Kafdrop </a> <br/> <a class="ae ks" href="https://lenses.io/usecases/kafka-monitoring/" rel="noopener ugc nofollow" target="_blank">镜头</a><br/><a class="ae ks" href="https://github.com/tchiotludo/akhq" rel="noopener ugc nofollow" target="_blank">AKHQ</a><br/><a class="ae ks" href="https://github.com/provectus/kafka-ui" rel="noopener ugc nofollow" target="_blank">Kafka UI</a><br/><a class="ae ks" href="https://github.com/redpanda-data/console/" rel="noopener ugc nofollow" target="_blank">控制台(Kowl) </a> <br/> <a class="ae ks" href="https://github.com/linkedin/cruise-control-ui" rel="noopener ugc nofollow" target="_blank">巡航控制UI </a> <br/> <a class="ae ks" href="https://www.confluent.io/en-gb/product/confluent-platform/gui-driven-management-and-monitoring/" rel="noopener ugc nofollow" target="_blank">汇流控制中心</a> <br/> <a class="ae ks" href="https://www.conduktor.io/" rel="noopener ugc nofollow" target="_blank"> Conduktor </a></p><h1 id="2c25" class="mr js hi bd jt ms mt mu jx mv mw mx kb my mz na ke nb nc nd kh ne nf ng kk nh bi translated">AWS MSK(托管卡夫卡)</h1><p id="4021" class="pw-post-body-paragraph if ig hi ih b ii km ik il im kn io ip iq lf is it iu lg iw ix iy lh ja jb jc hb bi translated"><strong class="ih hj">控制平面(动物园管理员、经纪人)</strong></p><p id="58e4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Broker和Zookeeper节点<strong class="ih hj">和</strong>是在<strong class="ih hj">亚马逊管理的VPC服务账户</strong>中创建的。在我们的AWS帐户中，创建了网络接口(<strong class="ih hj"> ENIs </strong>),这些接口允许我们访问broker和zookeeper节点。<strong class="ih hj"> MSK不公开任何公共端点</strong>，因此任何客户端都需要通过私有连接访问MSK(从同一个VPC(ENI的创建地)，对等的VPC，或者通过中转网关，等等)。</p><p id="5db8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">数据平面(生产者&amp;消费者)</strong></p><p id="1696" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Kafka客户不得不<strong class="ih hj">只关注<strong class="ih hj">生产者和消费者</strong>的</strong>，而将设置和管理细节留给AWS平台！</p><p id="f90a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">定价</strong></p><blockquote class="li lj lk"><p id="be4c" class="if ig ll ih b ii ij ik il im in io ip lm ir is it ln iv iw ix lo iz ja jb jc hb bi translated">计算时间→＄0.75/小时<br/>分区时间→＄0.0015/分区/小时<br/>存储→＄0.10/GiB-月<br/>数据输入→＄0.10/GiB<br/>数据输出→＄0.05/GiB<br/>连接器→＄0.11/小时</p></blockquote><p id="af06" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="ll">注意:AWS使用AWS Glue提供模式注册。</em></p><h2 id="fbdd" class="jr js hi bd jt ju jv jw jx jy jz ka kb iq kc kd ke iu kf kg kh iy ki kj kk kl bi translated">《红熊猫》(卡夫卡的替代品)</h2><figure class="ku kv kw kx fd ky er es paragraph-image"><div class="er es nk"><img src="../Images/818952605ca9c8c0d9a9aa621a5c229d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1374/format:webp/1*MvmSBW57zQfGFEdGFxRPVw.png"/></div></figure><ul class=""><li id="dba4" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc kr jj jk jl bi translated">seastar框架上Kafka的C++重写</li><li id="d0b5" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc kr jj jk jl bi translated">没有JVM</li><li id="574e" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc kr jj jk jl bi translated">每核心线程策略</li><li id="5ea3" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc kr jj jk jl bi translated">无Zk(使用Raft算法)</li><li id="867a" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc kr jj jk jl bi translated">并行提交</li><li id="5a77" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc kr jj jk jl bi translated">内联WebAssembly转换(不需要像Flink那样使用单独的处理器)。它使用V8发动机。</li><li id="b0a9" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc kr jj jk jl bi translated">影子索引</li><li id="4a0c" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc kr jj jk jl bi translated">异步调度</li><li id="78db" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc kr jj jk jl bi translated">生产就绪分层存储(内存→磁盘→对象存储)</li><li id="34e2" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc kr jj jk jl bi translated">专门构建的用于消息交换的RPC</li><li id="814e" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc kr jj jk jl bi translated">完全兼容Kafka API</li><li id="33c1" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc kr jj jk jl bi translated">臂支架</li></ul><p id="25ec" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">其他备选方案有<a class="ae ks" href="https://pulsar.apache.org/" rel="noopener ugc nofollow" target="_blank">阿帕奇脉冲星</a>、<a class="ae ks" href="https://streamsets.com/" rel="noopener ugc nofollow" target="_blank">流集</a>、<a class="ae ks" href="https://www.estuary.dev/product/" rel="noopener ugc nofollow" target="_blank">流</a>和<a class="ae ks" href="https://www.confluent.io/" rel="noopener ugc nofollow" target="_blank">汇流</a>。</p><p id="81f2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">快乐流媒体！！</p></div></div>    
</body>
</html>