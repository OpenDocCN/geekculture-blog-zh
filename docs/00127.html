<html>
<head>
<title>Framework for Configurable Business Workflow Automation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用于可配置业务工作流自动化的框架</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/framework-for-user-configurable-business-workflow-automation-a17bf087416b?source=collection_archive---------0-----------------------#2020-07-05">https://medium.com/geekculture/framework-for-user-configurable-business-workflow-automation-a17bf087416b?source=collection_archive---------0-----------------------#2020-07-05</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/88088900bcad250099de182599100ff5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oDhFtJOFJLEE2vMkrL9XjQ.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">credits: <a class="ae iu" href="https://pixabay.com/" rel="noopener ugc nofollow" target="_blank">https://pixabay.com</a></figcaption></figure><p id="28fb" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">自动化是商业应用的一个重要方面。有两种类型的工作流自动化:</p><p id="fe0c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">1.<strong class="ix hj">规则引擎</strong> —通常，它们包含事件触发器和动作的组合。他们本质上基本上是无国籍的。</p><p id="062f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">2.<strong class="ix hj">状态机</strong>–它们使用状态、事件、转换和一个将它们结合在一起的有限状态机来定义。</p><p id="009f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在本文中，我介绍了一个使用规则引擎和状态机实现自动化的混合框架。</p><p id="37f0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">今天大多数可用的框架都提供离线工作流自动化。我所说的离线是指他们使用后端系统启用预配置的工作流定义。在这篇文章中，我提出了一个框架，使用户能够配置自动化。这在以自动化为核心功能的SaaS应用程序中是非常理想的。我提出了一个基于JSON的工作流定义，并以此为基础深入研究工作流自动化引擎架构。本文主要关注系统架构元素。</p><h1 id="f816" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated"><strong class="ak">工作流自动化的基础架构</strong></h1><h2 id="48bb" class="kr ju hi bd jv ks kt ku jz kv kw kx kd jg ky kz kh jk la lb kl jo lc ld kp le bi translated">工作流定义</h2><p id="1f1b" class="pw-post-body-paragraph iv iw hi ix b iy lf ja jb jc lg je jf jg lh ji jj jk li jm jn jo lj jq jr js hb bi translated">工作流自动化定义的核心元素可以使用下面的结构简单地定义</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lk"><img src="../Images/4640e41ae1df3561ad749b0034218ddd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iAt7nVbv5zSxQWobtnRwqA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Workflow Definition</figcaption></figure><h2 id="d735" class="kr ju hi bd jv ks kt ku jz kv kw kx kd jg ky kz kh jk la lb kl jo lc ld kp le bi translated">工作流类型</h2><p id="acaf" class="pw-post-body-paragraph iv iw hi ix b iy lf ja jb jc lg je jf jg lh ji jj jk li jm jn jo lj jq jr js hb bi translated">基于事件的工作流(类型=事件)由事件处理程序触发。事件由应用层服务生成，并发布到消息传递系统。</p><p id="d7d8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您还可以基于由批处理触发的计划来配置规则。</p><h2 id="d9b5" class="kr ju hi bd jv ks kt ku jz kv kw kx kd jg ky kz kh jk la lb kl jo lc ld kp le bi translated">工作流模块</h2><p id="bcb3" class="pw-post-body-paragraph iv iw hi ix b iy lf ja jb jc lg je jf jg lh ji jj jk li jm jn jo lj jq jr js hb bi translated">这是自动化的一个核心方面。模块代表一个域，它包含系统中一组对象。它们代表了工作流配置的实体规范。模块允许用户配置工作流定义。对于支出管理系统，“支出管理”是一个模块，它可以有几个域对象，如“发票”、“采购订单”、“销售订单”、“费用”、“卡”、“客户”、“组织”。根据您希望在系统中启用自动化的内容，您可以轻松地将系统中相似的域对象映射到模块。</p><p id="4c54" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">可以使用以下结构定义模块结构:</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lp"><img src="../Images/9a9b749659fcbf42a46a3efc42fd2195.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vzDGwOu4uv3L_UPjwe8P_A.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Module Definition</figcaption></figure><h2 id="8c20" class="kr ju hi bd jv ks kt ku jz kv kw kx kd jg ky kz kh jk la lb kl jo lc ld kp le bi translated">工作流触发器</h2><p id="79b6" class="pw-post-body-paragraph iv iw hi ix b iy lf ja jb jc lg je jf jg lh ji jj jk li jm jn jo lj jq jr js hb bi translated">基于工作流类型(基于事件或计划)</p><p id="86ff" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">触发公共结构:</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lq"><img src="../Images/0d1cc3059df1dc7f6881be6f12d73079.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gwpEpO6IkamhMX7oh39qpw.png"/></div></div></figure><p id="b03f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">子类型</strong>是CRUD事件子类型。<strong class="ix hj">标准</strong>是<strong class="ix hj">子类型</strong>更新的触发条件，用于检查字段是否被更新</p><p id="a54e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">标准结构:</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lr"><img src="../Images/62ee8e9fa8fca95f72057f454689c09a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aKOO7Jhx3ut24outlCbiNA.png"/></div></div></figure><p id="a290" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> updatedFields </strong>是应检查更新的实体字段名列表。<strong class="ix hj"> isUpdatedAll </strong>表示如果所有字段或至少一个字段已更新，则标准为真。</p><p id="6442" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">时间表结构:</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lq"><img src="../Images/fc37321b08cbd0bb106ae52e2d05eb37.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1g94JxA2yTFZki_Ag822mw.png"/></div></div></figure><p id="f376" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">字段名称</strong>是日期类型的工作流实体字段，其值用于计算动作的首次执行日期。</p><p id="45dd" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> isAfter </strong>参数表示计算行动首次执行日期的方向。如果<strong class="ix hj">为真</strong>，<em class="ls">执行转移值</em>将被添加到来自实体字段的日期值中。</p><p id="8fb4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> executeShiftValue </strong>是<em class="ls"> executeShiftUnit </em>的值，应该加上或减去工作流实体字段的日期值。</p><p id="cb2d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">执行小时</strong>和<strong class="ix hj">执行分钟</strong>是定义第一次动作执行的时间</p><p id="0835" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> cronExpression </strong>定义cron表达式，用于计算下一次执行时间</p><p id="a0b2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> maxExecuteTimes </strong>定义执行次数的限制。-1表示没有限制。</p><p id="1410" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">基于事件的触发器示例:</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lt"><img src="../Images/634c2065e257c098449785a6883d60c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qpMUUkrqSIkFWcjCixuwVQ.png"/></div></div></figure><p id="02d9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">基于时间表的触发器示例:</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lu"><img src="../Images/5f75fda078085d97327b5e41af9f475c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6FgWcJuHZzhfW_rjphm-Qw.png"/></div></div></figure><h2 id="6513" class="kr ju hi bd jv ks kt ku jz kv kw kx kd jg ky kz kh jk la lb kl jo lc ld kp le bi translated">工作流程标准</h2><p id="15ab" class="pw-post-body-paragraph iv iw hi ix b iy lf ja jb jc lg je jf jg lh ji jj jk li jm jn jo lj jq jr js hb bi translated">条件捕获触发规则所需的一系列条件。标准是一个布尔表达式。在我们的框架中，我们建议使用<a class="ae iu" href="http://mvel.documentnode.com/#:~:text=Basic%20Syntax.%20MVEL%20is%20an%20expression%20language%20based,type%20qualification%20is%20not%20required%20in%20the%20source" rel="noopener ugc nofollow" target="_blank"> MVEL </a>表达式语法。</p><p id="a92a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">使用MVEL表达式语法的条件:</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lv"><img src="../Images/943af89367a2b76fd0295b6e94875138.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N5oo8SEaQeSA87uuUH00kQ.png"/></div></div></figure><p id="1f15" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">模式</strong>对条件进行分组，以构建最终的逻辑表达式。</p><h1 id="ff78" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">工作流操作</h1><p id="91fe" class="pw-post-body-paragraph iv iw hi ix b iy lf ja jb jc lg je jf jg lh ji jj jk li jm jn jo lj jq jr js hb bi translated">操作定义了触发规则后(满足标准后)工作流引擎要执行的工作单元。现实世界中的行动可以是发送电子邮件/短信通知/网络挂钩。或者，它可以自动更新一个实体。</p><p id="8247" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">通用工作流操作结构:</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lw"><img src="../Images/bd16a04a485e048826e93368d44a194e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gpZVzkJ5ITSii1yecH8y9w.png"/></div></div></figure><p id="69f0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> id </strong>是动作的唯一id。</p><p id="d692" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> parentActionId </strong>是父动作的Id。相关操作配置和处理需要该参数。</p><p id="86ce" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">模式</strong>动作执行模式。在<strong class="ix hj">瞬间</strong>模式下动作执行一次，就对工作流进行处理。在<strong class="ix hj">预定</strong>模式下，动作可以根据<strong class="ix hj">预定</strong>配置参数执行多次。</p><p id="34e7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">类型</strong>捕获操作的类型——是基于通知的操作(“电子邮件|sms”)还是使用“实体”作为操作类型对系统中现有数据的更新</p><p id="c7f6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">范围</strong>参数用于依赖动作处理。默认值为<strong class="ix hj">流程</strong>表示动作在父动作完成后执行。<strong class="ix hj">完成</strong>表示执行的动作，然后<strong class="ix hj">过程</strong>模式的所有相关动作完成。<strong class="ix hj">取消</strong>是定义当至少一个<strong class="ix hj">流程</strong>模式的动作被取消时将执行的依赖动作。<strong class="ix hj">完成</strong>或<strong class="ix hj">取消</strong>模式的动作必须有引用根动作的<strong class="ix hj"> parentActionId </strong>参数。根操作没有<strong class="ix hj"> parentActionId </strong>。</p><p id="bb89" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">有效载荷</strong>捕获完成动作所需的有效载荷信息。参数的结构取决于动作<strong class="ix hj">类型</strong>。</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lx"><img src="../Images/ec20dac92cf87bf448b56472ff501f95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IL7y5zgIgJKQ7Kbmn5eLMw.png"/></div></div></figure><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ly"><img src="../Images/f310f3e149660b2f829dc5adec2f367e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ErQfY0ugbNWzTgfqHEWnEA.png"/></div></div></figure><p id="1be0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">调度</strong>参数必须为<strong class="ix hj">调度</strong>模式下的动作进行配置。</p><p id="6d22" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">时间表结构:</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lz"><img src="../Images/254c7ac5d8c229b9de86fdc33153e1e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AcOak8a6YLY9B8g4hFjOUg.png"/></div></div></figure><p id="14c8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">字段名称</strong>是日期类型的工作流实体字段，其值用于计算动作的首次执行日期。</p><p id="dfa3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> isAfter </strong>参数表示计算动作首次执行日期的方向。如果<strong class="ix hj">为真</strong>，则<em class="ls"> executeShiftValue </em>将被添加到来自实体字段的日期值中。</p><p id="b265" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> executeShiftValue </strong>是<em class="ls"> executeShiftUnit </em>的值，应该加到或减去工作流实体字段的日期值。</p><p id="f210" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">执行小时</strong>和<strong class="ix hj">执行分钟</strong>是定义第一次动作执行的时间</p><p id="d36c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> cronExpression </strong>定义cron表达式，用于计算下一次执行时间</p><p id="53ee" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">最大执行次数</strong>定义了执行次数的限制。-1表示没有限制。</p><p id="9d29" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> completeCriteria </strong>是可选参数，用于检测预定或相关动作是否完成</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ma"><img src="../Images/51096bd5ac2a11c560864cd14addcc54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BmtTiPXUuQeHiVcA5TRKDw.png"/></div></div></figure><p id="9ef9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">子类型</strong>是定义工作流事件子类型的可选参数。</p><p id="0362" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">表达式</strong>是验证工作流实体字段的表达式列表。</p><p id="a504" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> cancelCriteria </strong>是可选参数，用于检测一个预定的或依赖的动作是否被取消。该参数的结构如<strong class="ix hj"> completeCriteria </strong>所示。</p><h1 id="2568" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">数据库结构</h1><figure class="ll lm ln lo fd ij er es paragraph-image"><div class="er es mb"><img src="../Images/13fd15381fbd47d47a18aa7fb920cf1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1252/format:webp/1*ugT8qTE2txT_SB-eh8oFEQ.png"/></div></figure><h1 id="5187" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">活动处理详细信息</h1><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mc"><img src="../Images/05f672834eabad6ccd985bdf07c77f64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qeJESwzHlWbqBB4BIaurMQ.png"/></div></div></figure><p id="8c01" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">动作处理取决于动作模式和依赖动作的存在。</p><p id="419b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">没有依赖的<strong class="ix hj">即时</strong>模式下的动作被立即执行。</p><p id="7db6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">没有依赖项的<strong class="ix hj">调度</strong>模式下的动作保存在“<strong class="ix hj">TCT _ workflow _ action _ schedule</strong>DB表中，用“<strong class="ix hj"> BatchActionService </strong>执行。</p><p id="08ce" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">从属操作有一个根操作。根操作没有<strong class="ix hj"> parentActionId </strong>参数。</p><p id="0c04" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">具有依赖项的操作保存在“<strong class="ix hj">TCT _ workflow _ dependent _ action _ state</strong>”DB表中。所有已保存的操作都具有“已保存”状态。根操作被执行，其状态被更改为正在进行中。然后，通过事件或计划的工作流处理，验证活动完成和取消标准。</p><p id="31d0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果操作符合<strong class="ix hj">完成标准</strong>，其状态将变为完成，相关操作将被执行，其状态为进行中。当所有相关动作完成时，执行具有完整范围的动作。所有相关操作都将从数据库中删除。</p><p id="adeb" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果状态为“进行中”的操作符合<strong class="ix hj">取消标准</strong>，则从数据库中删除所有相关操作，并执行取消范围操作。</p><h2 id="8aa4" class="kr ju hi bd jv ks kt ku jz kv kw kx kd jg ky kz kh jk la lb kl jo lc ld kp le bi translated">动作处理逻辑</h2><figure class="ll lm ln lo fd ij er es paragraph-image"><div class="er es md"><img src="../Images/19550bb7e431c99693f54482d405e8ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*YAhov5O7woJu-_T9qvHHKg.png"/></div></figure><h2 id="eb88" class="kr ju hi bd jv ks kt ku jz kv kw kx kd jg ky kz kh jk la lb kl jo lc ld kp le bi translated"><strong class="ak">依赖动作配置示例</strong></h2><p id="7001" class="pw-post-body-paragraph iv iw hi ix b iy lf ja jb jc lg je jf jg lh ji jj jk li jm jn jo lj jq jr js hb bi translated"><strong class="ix hj">动作1 </strong>是根动作。<strong class="ix hj">动作12 </strong>是完整的范围动作<em class="ls">。</em>这里有一个例子:</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es me"><img src="../Images/ac35bd557218bb9605180ea630dc8ad3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ecrD_K6gpga7AAhWfroTtg.png"/></div></div></figure><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mf"><img src="../Images/3e753fe6522c09277a6ccb6c173147f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wJBHxiVQlX7DlbzfnKHJmg.png"/></div></div></figure><h1 id="29d7" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">工作流引擎的高层设计</h1><h2 id="69d2" class="kr ju hi bd jv ks kt ku jz kv kw kx kd jg ky kz kh jk la lb kl jo lc ld kp le bi translated">基于事件的工作流</h2><figure class="ll lm ln lo fd ij er es paragraph-image"><div class="er es mb"><img src="../Images/86a2992b8a2cff803820ac65ffc69eab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1252/format:webp/1*eNTZ7-aN-AZRnEtLHXpErw.png"/></div></figure><h2 id="29b3" class="kr ju hi bd jv ks kt ku jz kv kw kx kd jg ky kz kh jk la lb kl jo lc ld kp le bi translated">基于计划的工作流</h2><figure class="ll lm ln lo fd ij er es paragraph-image"><div class="er es mb"><img src="../Images/f05c18e6a68df7e2f2ad707e95c5e643.png" data-original-src="https://miro.medium.com/v2/resize:fit:1252/format:webp/1*KV-1WnVnsGGbK0e7K94WNw.png"/></div></figure><h1 id="b869" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">结论</h1><p id="d1f0" class="pw-post-body-paragraph iv iw hi ix b iy lf ja jb jc lg je jf jg lh ji jj jk li jm jn jo lj jq jr js hb bi translated">使用本文介绍的框架，我们可以为任何业务应用程序构建工作流自动化。这是一个高度可扩展的框架，可以用来将自动化功能插入现有的应用程序以及构建新的应用程序。</p></div></div>    
</body>
</html>