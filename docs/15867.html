<html>
<head>
<title>Create a game with JavaScript in 5 minutes!!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用JavaScript在5分钟内创建一个游戏！！</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/create-a-game-with-javascript-in-5-minutes-35f69c3b66e3?source=collection_archive---------7-----------------------#2022-11-26">https://medium.com/geekculture/create-a-game-with-javascript-in-5-minutes-35f69c3b66e3?source=collection_archive---------7-----------------------#2022-11-26</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="16f3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你好，我最近用JavaScript制作了这个令人惊奇的游戏，并决定在这里分享它。游戏应用事件驱动编程，因此它很容易理解和快速建立。游戏捕捉玩家打字时的速度，并输出所用的时间。它有一个单词数组，向玩家显示，并在玩家输入时循环显示一个单词。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/c94391cf5af993d2c1a726a769c88e74.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*VSQ-K1J0nsa106_v"/></div></div></figure><p id="20d8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">代码使用JavaScript编程语言，尽管您可以使用任何语言。因为这个输出显示在浏览器上，所以JavaScript更适合这里。这里也使用了HTML和CSS。我最初决定尝试制作这个游戏，以便理解JavaScript中的事件是如何处理的。</p><h1 id="f778" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">什么是事件？</h1><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kn"><img src="../Images/567c15a620668bf0195b5d76a13c98ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*9eSdVSlq5FAZAjBN"/></div></div></figure><p id="92cb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">事件是在您正在编程的系统中发生的动作或事件，系统会告诉您这些动作或事件，以便您的代码可以对它们做出反应。例如，当用户点击网页中的按钮时，用户期望诸如显示信息框或像提交按钮那样重定向到另一个页面的反应。</p><p id="0862" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">来自<a class="ae ko" href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Building_blocks/Events" rel="noopener ugc nofollow" target="_blank"> mdn web docs </a>的其他例子有助于激发您的好奇心，包括:</p><ul class=""><li id="fbcc" class="kp kq hi ih b ii ij im in iq kr iu ks iy kt jc ku kv kw kx bi translated">用户选择、单击或将光标悬停在某个元素上。</li><li id="7a77" class="kp kq hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">用户选择键盘上的一个键。</li><li id="b4cf" class="kp kq hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">用户调整或关闭浏览器窗口。</li><li id="5091" class="kp kq hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">网页加载完毕。</li><li id="5349" class="kp kq hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">提交一份表格。</li><li id="4c72" class="kp kq hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">视频播放、暂停或结束。</li><li id="b919" class="kp kq hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">出现错误。</li></ul><p id="61b5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了对事件作出反应，程序员附加了一个事件侦听器，它现在在事件触发后对事件作出反应。顾名思义，监听器监听一个事件，并通过处理该事件的事件处理程序对其做出响应。</p><h1 id="edb7" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated"><strong class="ak">代码</strong></h1><p id="042d" class="pw-post-body-paragraph if ig hi ih b ii ld ik il im le io ip iq lf is it iu lg iw ix iy lh ja jb jc hb bi translated">这里使用HTML来提供一个可视界面，用户可以在其中输入。</p><pre class="je jf jg jh fd li lj lk bn ll lm bi"><span id="2f1e" class="ln jq hi lj b be lo lp l lq lr">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>    &lt;head&gt;<br/>        &lt;title&gt;This is an event Driven Game&lt;/title&gt;<br/>        &lt;meta charset="utf-8"/&gt;<br/>        &lt;meta http-equiv="X-UA-Compatible" content="IE=edge"/&gt;<br/>        &lt;meta name="viewport" content="width=device-width, initial-scale=1"/&gt;<br/>        &lt;link rel="stylesheet" type="text/css" href="./style.css"/&gt;<br/>        &lt;script src="./script.js" defer&gt;&lt;/script&gt;<br/>    &lt;/head&gt;<br/>    &lt;body&gt;<br/>        &lt;h1&gt;Typing game!&lt;/h1&gt;<br/>        &lt;p&gt;Practice your typing skills with a quote from Sherlock Holmes. Click **start** to begin!&lt;/p&gt;<br/>        &lt;p id="quote"&gt;&lt;/p&gt;&lt;!-- This displays our quote --&gt;<br/>        &lt;p id="message"&gt;&lt;/p&gt;&lt;!-- This displays status message --&gt;<br/>        &lt;div&gt;<br/>            &lt;input type="text" aria-label="current word" id="typed-value" /&gt;<br/>            &lt;button type="button" id="start"&gt;Start&lt;/button&gt;<br/>        &lt;/div&gt;<br/>    &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="75ab" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">JavaScript使用段落标签、输入标签和按钮标签中的id属性来操作标签并在浏览器上显示文本。</p><p id="75d0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们也有CSS来为游戏提供一点风格。</p><pre class="je jf jg jh fd li lj lk bn ll lm bi"><span id="0912" class="ln jq hi lj b be lo lp l lq lr">body{<br/>    background-color: #cca3ed;<br/>}<br/>h1{<br/>    text-align: center;<br/>    font-family: sans-serif, Arial, Helvetica;<br/>}<br/>.highlight{<br/>    background-color: yellow;<br/>}<br/>.error{<br/>    background-color: lightcoral;<br/>    border: red;<br/>}</span></pre><p id="c9b5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们继续看菜单上的主菜，JavaScript！</p><p id="399a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在脚本的最顶端，我们有一个包含引号列表的数组。</p><pre class="je jf jg jh fd li lj lk bn ll lm bi"><span id="9457" class="ln jq hi lj b be lo lp l lq lr">const quotes = [<br/>    'When you have eliminated the Impossible, whatever remain, howevre impossible, must be completed',<br/>    'There is nothing more deceptive than an obviuos fact',<br/>    'I ought to know by this time that when a fact appears to be opposed to a long train of deductions it invariably proves to be capable of bearing some other interpretation.',<br/>    'I never make exceptions. An exception dispoves the rules',<br/>    'What one man can invent, another can discover',<br/>    'Nothing clears up a case so much as stating it to another person',<br/>    'Education never ends, Watson. Life is a series of learning and learning until the day we die.'<br/>];</span></pre><p id="b893" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个数组存储了游戏用来测试你打字速度的数据。简单来说，数组是同一类型元素的集合。</p><p id="cda3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">就像食谱一样，这就是我们需要的:</p><ul class=""><li id="da1d" class="kp kq hi ih b ii ij im in iq kr iu ks iy kt jc ku kv kw kx bi translated">包含所有引号列表的数组</li><li id="dd14" class="kp kq hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">空数组存储当前报价的所有单词</li><li id="cc62" class="kp kq hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">存储玩家当前正在键入的单词的索引的空间</li><li id="b035" class="kp kq hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">玩家点击开始的时间</li></ul><p id="9177" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们还需要对UI元素的引用:</p><ul class=""><li id="e963" class="kp kq hi ih b ii ij im in iq kr iu ks iy kt jc ku kv kw kx bi translated">文本框(<strong class="ih hj">键入的值</strong>)</li><li id="25ae" class="kp kq hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">报价显示(<strong class="ih hj">报价</strong>)</li><li id="1d8b" class="kp kq hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">消息(<strong class="ih hj">消息</strong>)</li></ul><pre class="je jf jg jh fd li lj lk bn ll lm bi"><span id="08c1" class="ln jq hi lj b be lo lp l lq lr">let words = [];<br/>let wordIndex = 0;<br/>let startTime = Date.now();<br/>const quoteElement = document.getElementById('quote');<br/>const messageElement = document.getElementById('message');<br/>const typedvalueElement = document.getElementById('typed-value');</span></pre><p id="a141" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">空数组存储当前报价的所有单词。假设显示的报价可能是第二个“没有什么比明显的事实更具欺骗性”，那么这将是要存储在空数组中的报价。wordIndex变量用作存储用户当前正在键入的单词的索引的空间。startTime变量显示用户开始输入的时间。这有助于衡量用户到目前为止输入了多长时间，从而计算出输入报价所需的时间。</p><p id="3d46" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">添加启动逻辑</strong></p><pre class="je jf jg jh fd li lj lk bn ll lm bi"><span id="4b3e" class="ln jq hi lj b be lo lp l lq lr">document.getElementById('start').addEventListener('click', () =&gt;{<br/>    const quoteIndex = Math.floor(Math.random() * quotes.length);<br/>    const quote = quotes[quoteIndex];<br/>    words = quote.split(' ');<br/>    wordIndex = 0;<br/>    const spanWords = words.map(function(word) { return `&lt;span&gt;${word} &lt;/span&gt;`});<br/>    quoteElement.innerHTML = spanWords.join('');<br/>    quoteElement.childNodes[0].className = 'highlight';<br/>    messageElement.innerText = '';<br/>    typedvalueElement.value = '';<br/>    typedvalueElement.focus();<br/>    startTime = new Date().getTime();<br/>});</span></pre><p id="d6d6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如上所示，事件监听器用于监听事件的发生，并显示相应的信息。当用户单击start时，代码选择一个报价，设置用户界面，并设置对当前单词和时间的跟踪。</p><p id="daf1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">设置跟踪的单词</p><p id="5fbb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用Math.floor和Math.random允许我们从报价数组中随机选择一个报价。Math.floor()是JavaScript中的一个函数，它向下舍入并返回小于或等于给定数字的最大整数。Math.random()函数返回一个大于或等于0且小于1的浮点伪随机数，在该范围内近似均匀分布，然后可以缩放到所需的范围。</p><p id="f110" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将报价转换成单词数组，这样我们就可以跟踪玩家当前正在键入的单词。wordIndex被设置为0，因为用户将从第一个单词开始。</p><p id="440d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">设置用户界面</p><p id="f4f9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们创建了一个spanWords数组，其中包含了一个span元素中的每个单词，允许我们突出显示这个单词。使用加入阵列。join()创建一个字符串，该字符串可用于更新quoteElement上的innerHTML。这将向玩家显示报价。</p><p id="ed6c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将第一个span元素的类名设置为highlight，以便将其突出显示为黄色。上面的css文件显示了它的样式。</p><p id="441c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过将innerText设置为(“”)来清理messageElement。</p><p id="959d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">设置文本框</p><p id="1020" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们清除typedValueElement上的当前值，并将焦点设置为typedValueElement。</p><p id="ea9c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过调用getTime启动计时器。</p><p id="ca59" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">添加打字逻辑</strong></p><pre class="je jf jg jh fd li lj lk bn ll lm bi"><span id="745f" class="ln jq hi lj b be lo lp l lq lr"><br/>typedvalueElement.addEventListener('input', () =&gt; {<br/>    const currentWord = words[wordIndex];<br/>    const typedValue = typedvalueElement.value;<br/>    if(typedValue === currentWord &amp;&amp; wordIndex === words.length -1) {<br/>        const elapsedTime = new Date().getTime() - startTime;<br/>        const message = `CONGRATULATIONS! You finished in ${elapsedTime / 1000} seconds`;<br/>        messageElement.innerText = message;<br/>    }else if (typedValue.endsWith(' ') &amp;&amp; typedValue.trim() === currentWord){<br/>        typedvalueElement.value = '';<br/>        wordIndex++;<br/>        for(const wordElement of quoteElement.childNodes){<br/>            wordElement.className = '';<br/>        }<br/>        quoteElement.childNodes[wordIndex].className = 'highlight';<br/>    }else if(currentWord.startsWith(typedValue)){<br/>        typedvalueElement.className = '';<br/>    } else{<br/>        typedvalueElement.className = 'error';<br/>    }<br/>});</span></pre><p id="9a16" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当玩家输入时，会引发一个输入事件。这个事件监听器将检查以确保玩家正确输入单词，并处理游戏的当前状态。我们首先获取玩家目前输入的单词和值。然后逻辑如下进行，我们检查引用是否完整，单词是否完整，单词是否正确，或者最后，是否有错误。</p><p id="66f4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如if条件所示，如果typedValue等于currentWord，wordIndex等于比单词长度小1，则引用完成。我们通过从当前时间中减去开始时间来计算运行时间。我们将elapsedTime除以1000，将毫秒转换为秒。玩家输入完报价后，这段时间会显示为成功消息。</p><p id="fbb8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了使单词完整，typedValue必须以空格结尾，并且必须等于currentWord。我们将typedElement上的值设置为(“”)，以允许键入下一个单词。我们还遍历quoteElement的所有子节点，将className设置为empty(' ')以恢复到默认显示。将当前单词的类名设置为高亮显示，以将其标记为下一个要键入的单词。</p><p id="5263" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果currentWord以typedValue开始，那么这表明该单词键入正确但不完整。我们通过清除className来确保默认显示typedValue。</p><p id="4818" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果出现错误，我们将typedValue上的className设置为error。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ls"><img src="../Images/c589010c5854d7fc495b7175e8e57c62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*clgf4ecjk-6qTVQyWSbxJg.gif"/></div></figure><p id="d21a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这就是用JavaScript构建一个打字游戏的全部内容。用这段代码在你的机器上测试一下，看看它是否能运行。</p><p id="f725" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">黑客快乐！！</p></div></div>    
</body>
</html>