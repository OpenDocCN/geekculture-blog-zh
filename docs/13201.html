<html>
<head>
<title>Image processing using Arduino?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Arduino进行图像处理？</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/image-processing-using-arduino-3feac27dd250?source=collection_archive---------3-----------------------#2022-06-23">https://medium.com/geekculture/image-processing-using-arduino-3feac27dd250?source=collection_archive---------3-----------------------#2022-06-23</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="46d9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过python脚本与电子硬件通信。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/f37b43810097ce261749137579641ca9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*IOPfFoYnUTEc_D2X"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx">Photo by <a class="ae jt" href="https://unsplash.com/@sahandbabali?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Sahand Babali</a> on <a class="ae jt" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="f213" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">微控制器已被广泛用于创建大多数电子产品的原型。您甚至可能已经使用Arduino板创建了一些简单的项目。但是你有没有尝试过把它链接到更高级的编程语言，比如用python写的ML模型？</p><p id="cda9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们开始一个简单的项目，将python脚本连接到Arduino板。这个项目的目标是看看使用一个ML模型的预测来执行一些使用Arduino UNO的任务有多容易。</p><h1 id="926a" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">先决条件</h1><ol class=""><li id="a499" class="ks kt hi ih b ii ku im kv iq kw iu kx iy ky jc kz la lb lc bi translated">Arduino UNO板</li><li id="1c27" class="ks kt hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated"><a class="ae jt" href="https://www.arduino.cc/en/software" rel="noopener ugc nofollow" target="_blank"> Arduino软件</a></li><li id="be27" class="ks kt hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated">计算机编程语言</li><li id="1a6f" class="ks kt hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated">Pyserial</li><li id="a5e6" class="ks kt hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated">Opencv</li></ol><p id="5fe9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du li lj lk ll b">pyserial</code>是用于串行传输数据的python包，可以通过从终端运行<code class="du li lj lk ll b">pip install pyserial</code>来安装。<code class="du li lj lk ll b">opencv</code>是用于图像处理的软件包，可以通过运行<code class="du li lj lk ll b">pip install opencv-python</code>来安装。将以下代码复制并粘贴到Arduino软件的一个新文件中。</p><pre class="je jf jg jh fd lm ll ln lo aw lp bi"><span id="2a13" class="lq jv hi ll b fi lr ls l lt lu">void setup() {<br/>  pinMode(LED_BUILTIN, OUTPUT);<br/>  // Setting baud rate to 9600<br/>  Serial.begin(9600);<br/>  digitalWrite(LED_BUILTIN, LOW);<br/>}</span><span id="def7" class="lq jv hi ll b fi lv ls l lt lu">void loop() {<br/>  if(Serial.available() &gt; 0){<br/>      String s = Serial.readString(); // for incoming serial data<br/>      Serial.println(s);<br/>      digitalWrite(LED_BUILTIN, HIGH);<br/>  }<br/>}</span></pre><p id="af0b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以通过打开串行监视器(右上角的放大镜图标)并尝试发送一些数据来检查此代码。确保波特率与代码中指定的相同(此处为9600)。</p><p id="702c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，对于python脚本。</p><pre class="je jf jg jh fd lm ll ln lo aw lp bi"><span id="974e" class="lq jv hi ll b fi lr ls l lt lu">import serial</span><span id="aa07" class="lq jv hi ll b fi lv ls l lt lu">with serial.Serial('com4', 9600, timeout=0.1) as arduinoSerial:</span><span id="e69d" class="lq jv hi ll b fi lv ls l lt lu">      data = '12345'</span><span id="04d3" class="lq jv hi ll b fi lv ls l lt lu">      print('pyserial version: ' + serial.__version__)</span><span id="58f3" class="lq jv hi ll b fi lv ls l lt lu">      # Transmit data serially</span><span id="b2f7" class="lq jv hi ll b fi lv ls l lt lu">      arduinoSerial.write(data.encode('utf-8'))</span></pre><p id="cd7c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面的代码只是将数据(' 12345 ')发送到arduino板。注意Serial()函数有3个参数:arduino板使用的端口号、波特率和最大超时时间。</p><p id="a4cc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要确定您的主板使用的端口号，请单击“工具”-&gt;“端口”。你可以在Arduino软件的左上角找到它们。使用命令<code class="du li lj lk ll b">python name-of-file.py</code>运行python脚本</p></div><div class="ab cl lw lx gp ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="hb hc hd he hf"><p id="118a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">到目前为止，我们已经完成了该项目的最低要求，即向Arduino板发送一些数据。接下来，让我们在python脚本中执行一些图像处理，并传输有意义的数据。我们将使用基于Haar特征的级联分类器方法来识别图像/视频中的人脸。级联分类器的工作超出了我们项目的范围，因此我们将在代码中使用预先训练的模型(单击<a class="ae jt" href="https://github.com/opencv/opencv/blob/master/data/haarcascades/haarcascade_frontalface_default.xml" rel="noopener ugc nofollow" target="_blank">此处</a>下载文件)。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="md me l"/></div></figure><p id="5066" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">请注意，您必须更新端口和波特率，并将Haar cascode _ frontal face _ default . XML放在工作目录中。</p></div><div class="ab cl lw lx gp ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="hb hc hd he hf"><p id="bb53" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="mf">感谢阅读。</em></p></div></div>    
</body>
</html>