<html>
<head>
<title>Using Node.JS File System</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用节点。JS文件系统</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/using-node-js-file-system-39e462c12c32?source=collection_archive---------12-----------------------#2022-07-06">https://medium.com/geekculture/using-node-js-file-system-39e462c12c32?source=collection_archive---------12-----------------------#2022-07-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/6dbbb72ff74041bc1219cbe202472249.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*odpVDUU53tXD6MYS9iRq8A.png"/></div></div></figure><p id="9a49" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">朋友们，你们好，这次我们将讨论Node.JS上的文件系统。</p><p id="f11f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当我们开发应用程序时，我们总是要处理文件系统。文件系统，用于访问计算机上的文件。当我们在浏览器中运行JavaScript代码时，我们真的希望限制JavaScript访问文件系统。这种技术被称为沙盒。Sendboxing将保护我们的程序免受恶意程序的攻击，以及窃取用户隐私的行为。</p><p id="dce2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您可以在此了解更多教程:</p><p id="a016" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae jo" href="https://temanngoding.com/method-date-pada-javascript/" rel="noopener ugc nofollow" target="_blank">Javascript中的日期方法</a></p><p id="8491" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae jo" href="https://temanngoding.com/penanganan-eror-javascript/" rel="noopener ugc nofollow" target="_blank"> Javascript错误处理</a></p><p id="611e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae jo" href="https://temanngoding.com/tutorial-javascript-convert-waktu-am-pm-to-24-jam/" rel="noopener ugc nofollow" target="_blank"> Javascript教程:将时间am pm转换为24小时</a></p><p id="4486" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Node.js提供了fs核心模块，可以让我们更容易的访问文件系统。fs模块中的每个方法都有两个版本，即异步版本(默认)和同步版本。</p><p id="1d6b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要访问计算机上的文件，我们可以使用fs.readFile()方法。该方法接受三个参数，即:文件位置、编码和一个回调函数，当文件访问成功/失败时将调用该函数。</p><h1 id="4bb7" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">读取Nodejs中的文件</h1><p id="57ff" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">在Nodejs中，有一个允许我们访问文件系统的文件系统(fs)模块。</p><p id="0190" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">文件系统模块通常用于:1</p><ul class=""><li id="e35c" class="ks kt hi is b it iu ix iy jb ku jf kv jj kw jn kx ky kz la bi translated"><strong class="is hj">读取文件；</strong></li><li id="37ce" class="ks kt hi is b it lb ix lc jb ld jf le jj lf jn kx ky kz la bi translated"><strong class="is hj">写文件；</strong></li><li id="ed89" class="ks kt hi is b it lb ix lc jb ld jf le jj lf jn kx ky kz la bi translated"><strong class="is hj">重命名文件；</strong></li><li id="7873" class="ks kt hi is b it lb ix lc jb ld jf le jj lf jn kx ky kz la bi translated"><strong class="is hj">删除文件；</strong></li><li id="80ff" class="ks kt hi is b it lb ix lc jb ld jf le jj lf jn kx ky kz la bi translated"><strong class="is hj">等。</strong></li></ul><p id="f531" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这个模块已经在Nodejs中，所以我们不需要通过<strong class="is hj"> NPM(节点包管理器)</strong>来安装。</p><p id="0b93" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们试着用fs模块读取文件。首先，请创建一个名为index.html的HTML文件，并填写如下:</p><p id="17d0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我举几个例子。</p><p id="e46f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">访问。txt文件使用文件系统。</p><p id="e72a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">索引. js</p><pre class="lg lh li lj fd lk ll lm ln aw lo bi"><span id="b224" class="lp jq hi ll b fi lq lr l ls lt">const fs = require('fs');<br/> <br/>const fileReadCallback = (error, data) =&gt; {<br/>    if(error) {<br/>        console.log('Gagal membaca berkas');<br/>        return;<br/>    }<br/>    console.log(data);<br/>};</span></pre><p id="b21f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">todo.txt</p><pre class="lg lh li lj fd lk ll lm ln aw lo bi"><span id="647c" class="lp jq hi ll b fi lq lr l ls lt">My Header<br/>My paragraph.</span></pre><p id="1736" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">并且还可以使用fs.readFileSync()的同步版本。</p><p id="80a1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">基本上，使用fs的代码是一样的。唯一可以区分如何访问文件系统的方法。</p><p id="c036" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我将给出一个使用html访问文件系统的例子。</p><p id="f094" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">索引. js</p><pre class="lg lh li lj fd lk ll lm ln aw lo bi"><span id="3589" class="lp jq hi ll b fi lq lr l ls lt">var http = require('http');<br/>var fs = require('fs');<br/>http.createServer(function (req, res) {<br/>  fs.readFile('todo.html', function(err, data) {<br/>    res.writeHead(200, {'Content-Type': 'text/html'});<br/>    res.write(data);<br/>    return res.end();<br/>  });<br/>}).listen(8080);</span></pre><p id="9b6b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">todo.html</p><pre class="lg lh li lj fd lk ll lm ln aw lo bi"><span id="0bbf" class="lp jq hi ll b fi lq lr l ls lt">&lt;html&gt;<br/>&lt;body&gt;<br/>&lt;h1&gt;My Header&lt;/h1&gt;<br/>&lt;p&gt;My paragraph.&lt;/p&gt;<br/>&lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="2d83" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">请随意使用命令node index.js运行</p><h1 id="ff3b" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">创建Nodejs文件</h1><p id="39f9" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">除了读取文件，fs模块还用于创建新文件。有几种方法可以用来创建文件:1</p><p id="eaec" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">fs.appendFile()来创建和填充文件；<br/> fs.open()创建、打开和写入文件；<br/> fs.writeFile()创建并写入文件。让我们一个一个来试试。</p><p id="3ca1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">首先，请创建一个名为fs_append.js的javascript文件，其内容如下:</p><pre class="lg lh li lj fd lk ll lm ln aw lo bi"><span id="17db" class="lp jq hi ll b fi lq lr l ls lt">var fs = require('fs');<br/><br/>//create a file named mynewfile1.txt:<br/>fs.appendFile('mynewfile1.txt', 'Hello Teman Ngoding!', function (err) {<br/>  if (err) throw err;<br/>  console.log('Saved!');<br/>});</span></pre><h1 id="2f2a" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">使用fs.open()函数创建文件</h1><p id="84dd" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">上面的程序代码将创建一个名为mynewfile1.txt的文件，内容为Hello Friends Ngoding！。</p><p id="5252" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">创建一个名为fs_open.js的新javascript文件，内容如下:</p><pre class="lg lh li lj fd lk ll lm ln aw lo bi"><span id="7523" class="lp jq hi ll b fi lq lr l ls lt">var fs = require('fs');<br/><br/>fs.open('mynewfile2.txt', 'w', function (err, file) {<br/>  if (err) throw err;<br/>  console.log('Saved!');<br/>});</span></pre><p id="9510" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">fs.open()函数有三个参数:</p><ol class=""><li id="80cc" class="ks kt hi is b it iu ix iy jb ku jf kv jj kw jn lu ky kz la bi translated">文件名；</li><li id="9882" class="ks kt hi is b it lb ix lc jb ld jf le jj lf jn lu ky kz la bi translated">旗帜；</li><li id="5566" class="ks kt hi is b it lb ix lc jb ld jf le jj lf jn lu ky kz la bi translated">打开文件时要执行的函数。</li></ol><p id="d7dc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在上面的例子中，我们设置了w (write)标志来告诉fs.open()函数我们是否想要写或创建一个新文件。</p><p id="7a49" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果没有指定名称的文件，fs.open()函数将创建一个空文件。</p><p id="b198" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">但是，如果文件已经存在，fs.open()函数将覆盖它。</p><p id="14ef" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后当我们想只读文件时，我们可以给标志r (read)。</p><p id="a737" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">除了r和w，这里还有一些可以赋值的标志:3</p><ul class=""><li id="e568" class="ks kt hi is b it iu ix iy jb ku jf kv jj kw jn kx ky kz la bi translated">r打开文件进行阅读。如果文件不存在，将会出现错误。</li><li id="ce76" class="ks kt hi is b it lb ix lc jb ld jf le jj lf jn kx ky kz la bi translated">r+打开文件进行读写。如果文件不存在，将会出现错误。</li><li id="bef4" class="ks kt hi is b it lb ix lc jb ld jf le jj lf jn kx ky kz la bi translated">rs以同步模式打开要读取的文件。</li><li id="45b9" class="ks kt hi is b it lb ix lc jb ld jf le jj lf jn kx ky kz la bi translated">rs+以同步模式打开文件进行读写。</li><li id="eb20" class="ks kt hi is b it lb ix lc jb ld jf le jj lf jn kx ky kz la bi translated">打开文件e进行写入。</li><li id="1308" class="ks kt hi is b it lb ix lc jb ld jf le jj lf jn kx ky kz la bi translated">wx与w相同，但是如果文件已经存在，将会出错。</li><li id="02d1" class="ks kt hi is b it lb ix lc jb ld jf le jj lf jn kx ky kz la bi translated">w+打开文件进行读写。</li><li id="4363" class="ks kt hi is b it lb ix lc jb ld jf le jj lf jn kx ky kz la bi translated">wx+与w+相同，但是如果文件已经存在，将会出错。</li><li id="8f4f" class="ks kt hi is b it lb ix lc jb ld jf le jj lf jn kx ky kz la bi translated">打开文件进行填充。</li><li id="0783" class="ks kt hi is b it lb ix lc jb ld jf le jj lf jn kx ky kz la bi translated">ax与a相同，但是如果文件已经存在，将会出错。</li><li id="92a9" class="ks kt hi is b it lb ix lc jb ld jf le jj lf jn kx ky kz la bi translated">a+打开文件进行填充。</li><li id="127c" class="ks kt hi is b it lb ix lc jb ld jf le jj lf jn kx ky kz la bi translated">ax+与a+相同，但是如果文件已经存在，将会出错。</li></ul><h1 id="6c05" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">用Nodejs重命名文件</h1><p id="701d" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">在fs模块中有一个rename()函数来改变名字。</p><p id="b92d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">该函数有三个参数:</p><ol class=""><li id="f29f" class="ks kt hi is b it iu ix iy jb ku jf kv jj kw jn lu ky kz la bi translated">文件名；</li><li id="3c9c" class="ks kt hi is b it lb ix lc jb ld jf le jj lf jn lu ky kz la bi translated">新名称；</li><li id="4c66" class="ks kt hi is b it lb ix lc jb ld jf le jj lf jn lu ky kz la bi translated">名称更改时要执行的功能。</li></ol><p id="74cc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">创建一个名为rename.js的新javascript文件，并用以下代码填充它:</p><pre class="lg lh li lj fd lk ll lm ln aw lo bi"><span id="5684" class="lp jq hi ll b fi lq lr l ls lt">var fs = require('fs');<br/><br/>fs.rename('mynewfile1.txt', 'myrenamedfile.txt', function (err) {<br/>    if (err) throw err;<br/>    console.log('File Renamed!');<br/>});</span></pre><h1 id="fc78" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">删除带有节点的文件</h1><p id="7eff" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">fs模块有一个unlink()函数来删除文件。该函数有两个参数:</p><p id="c7e7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要删除的文件的名称；<br/>删除文件时要执行的功能。<br/>创建一个名为delete.js的新文件，然后用以下代码填充它:</p><pre class="lg lh li lj fd lk ll lm ln aw lo bi"><span id="6270" class="lp jq hi ll b fi lq lr l ls lt">var fs = require('fs');<br/><br/>fs.unlink('mynewfile2.txt', function (err) {<br/>    if (err) throw err;<br/>    console.log('File deleted!');<br/>});</span></pre><p id="b964" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">因此，我传达这个教程，我希望它是有用的。</p><p id="ad83" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">谢了。</p></div></div>    
</body>
</html>