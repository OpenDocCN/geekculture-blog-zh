<html>
<head>
<title>Road to Kafka</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">卡夫卡之路</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/road-to-kafka-3c36c5b02b?source=collection_archive---------18-----------------------#2022-01-02">https://medium.com/geekculture/road-to-kafka-3c36c5b02b?source=collection_archive---------18-----------------------#2022-01-02</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div class="ab fe cl ij"><img src="../Images/ec68c2733b53266944bed823e8213318.png" data-original-src="https://miro.medium.com/v2/format:webp/1*yellp2Yr8pAYeZOy3VPqFQ.png"/></div></figure><p id="765d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">考虑一个例子，你有一个电子商务服务，它有两个部分，第一部分是结账服务，另一部分是发货，一旦结账发生，发货就必须触发。</p><p id="1d1e" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">一般来说，可以使用REST API调用让运输服务知道已经发生了结帐，并且需要触发运输，但是如果有其他服务出于不同的目的想要使用相同的结帐信息，例如消息服务或库存服务，您可能希望向您的客户发送电子邮件通知已经发生了结帐，或者从您的库存中删除该商品数量。</p><p id="5411" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">所有这些都可以是有效的用例，并且所有这些仍然可以使用传统的REST API调用来完成，但是这使得每个服务都直接依赖于基础服务，并且集成可以有多个部分，随着时间的推移或系统中服务数量的增加，这些都会变得复杂。</p><p id="1adc" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">为了解决这些问题，如果基础服务checkout只是在发生checkout时发布一条消息，而根本不需要担心消费者，会怎么样呢？</p><p id="2096" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在这种情况下，消费者可以独立于基础服务，按照自己的节奏完成自己的工作。</p><figure class="jl jm jn jo fd ii er es paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="er es jk"><img src="../Images/4f33621fc48d2fbc08fe6eee254c71b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*0CcxDMEi6IImXtJP.png"/></div></div></figure><blockquote class="jt ju jv"><p id="e125" class="im in jw io b ip iq ir is it iu iv iw jx iy iz ja jy jc jd je jz jg jh ji jj hb bi translated"><strong class="io hj"> Apache Kafka是一个开源分布式事件流平台，被数千家公司用于高性能数据管道、流分析、数据集成和关键任务应用。</strong></p></blockquote><p id="d015" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">顾名思义它是一个事件流平台所以在去卡夫卡之前让我们了解一下，<strong class="io hj"> <em class="jw">什么是事件流？</em> </strong></p><p id="d84b" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">事件流是发布/订阅架构模式(pub/sub)的一种实现，具有某些特定的特征。发布/订阅模式包含以下元素:</p><ul class=""><li id="89da" class="ka kb hi io b ip iq it iu ix kc jb kd jf ke jj kf kg kh ki bi translated">消息:发布者希望传达给订阅者的离散数据。</li><li id="826a" class="ka kb hi io b ip kj it kk ix kl jb km jf kn jj kf kg kh ki bi translated">发布者:将消息放入特定主题的消息代理中。</li><li id="3e65" class="ka kb hi io b ip kj it kk ix kl jb km jf kn jj kf kg kh ki bi translated">订阅者:从消息代理的特定主题中读取消息。</li><li id="4c5d" class="ka kb hi io b ip kj it kk ix kl jb km jf kn jj kf kg kh ki bi translated">消息代理:能够存储来自发布者的消息并将其提供给订阅者的系统</li><li id="267b" class="ka kb hi io b ip kj it kk ix kl jb km jf kn jj kf kg kh ki bi translated">频道或主题:共享一个类别的事件子集。术语“主题”和“渠道”在行业中可以互换使用。在这篇博文中，我们将这些称为<strong class="io hj">主题。</strong></li></ul><h2 id="4ad4" class="ko kp hi bd kq kr ks kt ku kv kw kx ky ix kz la lb jb lc ld le jf lf lg lh li bi translated">消息是事件</h2><p id="1531" class="pw-post-body-paragraph im in hi io b ip lj ir is it lk iv iw ix ll iz ja jb lm jd je jf ln jh ji jj hb bi translated">事件包含有关状态更改的信息，其中可能包含业务信息。</p><pre class="jl jm jn jo fd lo lp lq lr aw ls bi"><span id="3d8e" class="ko kp hi lp b fi lt lu l lv lw">// example of an event<br/>{<br/>   "key": "<!-- -->Alice<!-- -->",<br/>   "value": "<!-- -->Made a payment of $200 to Bob<!-- -->",<br/>   "timestamp": "<!-- -->Jun. 25, 2020 at 2:06 p.m.<!-- -->"<br/>}</span></pre><p id="3e7d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">事件流只不过是按顺序排列的事件序列，这些事件从生产者流向消费者。</p><h2 id="62bb" class="ko kp hi bd kq kr ks kt ku kv kw kx ky ix kz la lb jb lc ld le jf lf lg lh li bi translated">为什么选择事件流？</h2><p id="a8f3" class="pw-post-body-paragraph im in hi io b ip lj ir is it lk iv iw ix ll iz ja jb lm jd je jf ln jh ji jj hb bi translated">事件流和驱动架构有很多使用案例，下面列出了其中的一些。</p><ul class=""><li id="7a0e" class="ka kb hi io b ip iq it iu ix kc jb kd jf ke jj kf kg kh ki bi translated">实时处理支付和金融交易，例如在证券交易所、银行和保险行业。</li><li id="f9b3" class="ka kb hi io b ip kj it kk ix kl jb km jf kn jj kf kg kh ki bi translated">实时跟踪和监控汽车、卡车、车队和货物，例如在物流和汽车行业。</li><li id="564b" class="ka kb hi io b ip kj it kk ix kl jb km jf kn jj kf kg kh ki bi translated">持续捕获和分析来自物联网设备或其他设备(如工厂和风力发电场)的传感器数据。</li><li id="c2c3" class="ka kb hi io b ip kj it kk ix kl jb km jf kn jj kf kg kh ki bi translated">收集客户互动和订单并立即做出反应，例如在零售业、酒店和旅游业以及移动应用程序中。</li><li id="0b0e" class="ka kb hi io b ip kj it kk ix kl jb km jf kn jj kf kg kh ki bi translated">监测住院病人并预测病情变化，以确保在紧急情况下得到及时治疗。</li><li id="4b01" class="ka kb hi io b ip kj it kk ix kl jb km jf kn jj kf kg kh ki bi translated">连接、存储和提供由公司不同部门产生的数据。</li><li id="fda1" class="ka kb hi io b ip kj it kk ix kl jb km jf kn jj kf kg kh ki bi translated">作为数据平台、事件驱动架构和微服务的基础。</li></ul><h1 id="ef2f" class="lx kp hi bd kq ly lz ma ku mb mc md ky me mf mg lb mh mi mj le mk ml mm lh mn bi translated">卡夫卡</h1><blockquote class="jt ju jv"><p id="c7ca" class="im in jw io b ip iq ir is it iu iv iw jx iy iz ja jy jc jd je jz jg jh ji jj hb bi translated">Apache Kafka是一个社区分布式事件流平台，每天能够处理数万亿个事件。Kafka最初被设想为一个消息队列，它基于分布式提交日志的抽象。自2011年由LinkedIn创建并开源以来，Kafka已经从消息队列迅速发展成为一个成熟的事件流媒体平台。</p></blockquote><h2 id="f2b8" class="ko kp hi bd kq kr ks kt ku kv kw kx ky ix kz la lb jb lc ld le jf lf lg lh li bi translated">卡夫卡蜜蜂</h2><p id="38c9" class="pw-post-body-paragraph im in hi io b ip lj ir is it lk iv iw ix ll iz ja jb lm jd je jf ln jh ji jj hb bi translated">Kafka建立在4个核心API之上:</p><ol class=""><li id="58e8" class="ka kb hi io b ip iq it iu ix kc jb kd jf ke jj mo kg kh ki bi translated">生产者API:允许应用程序产生供消费者使用的数据流。它创建一个记录并将它们发布到主题中，而主题只是一个有序的记录列表。</li><li id="e1b7" class="ka kb hi io b ip kj it kk ix kl jb km jf kn jj mo kg kh ki bi translated">消费者API:订阅一个或多个主题，并监听主题以获取数据。生产者可以直接向消费者提供记录，这也是一个更简单的用例。</li><li id="be3c" class="ka kb hi io b ip kj it kk ix kl jb km jf kn jj mo kg kh ki bi translated">Streams API:这是真正让Kafka如此强大的东西，生产者为主题制作记录，Streams从主题中消费记录，然后它可以实时转换数据<strong class="io hj"/>，然后为相同的主题或新的主题制作消息。</li></ol><figure class="jl jm jn jo fd ii er es paragraph-image"><div class="er es mp"><img src="../Images/91988144b0e8dcbfe353eb9641590f2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:894/format:webp/1*NV3kruTtSESTiMFfuoqoTA.png"/></div><figcaption class="mq mr et er es ms mt bd b be z dx">kafka streams apis</figcaption></figure><p id="2f60" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">4.连接器API:它使开发人员能够编写可重用的生产者和消费者连接器，这样开发人员就不需要编写已经存在的重复内容。</p><h1 id="1f49" class="lx kp hi bd kq ly lz ma ku mb mc md ky me mf mg lb mh mi mj le mk ml mm lh mn bi translated">为什么是卡夫卡？</h1><figure class="jl jm jn jo fd ii er es paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="er es mu"><img src="../Images/8e6b02c7b38cdab1831385081e6524e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5xgqVkKi1HIsfBEZRlZ4dg.png"/></div></div><figcaption class="mq mr et er es ms mt bd b be z dx">core-capabilities from Apache Kafka docs</figcaption></figure><ol class=""><li id="ca0a" class="ka kb hi io b ip iq it iu ix kc jb kd jf ke jj mo kg kh ki bi translated"><strong class="io hj">卡夫卡是高度可扩展的。</strong> Kafka是一个分布式系统，能够快速轻松地扩展，不会导致任何停机。Apache Kafka能够处理许多兆兆字节的数据，而不会产生太多的开销。</li><li id="24b1" class="ka kb hi io b ip kj it kk ix kl jb km jf kn jj mo kg kh ki bi translated"><strong class="io hj">卡夫卡是高度耐用的。</strong> Kafka将消息保存在磁盘上，提供集群内复制。这使得消息传递系统非常耐用。</li><li id="bc32" class="ka kb hi io b ip kj it kk ix kl jb km jf kn jj mo kg kh ki bi translated"><strong class="io hj">卡夫卡是高度可靠的。</strong> Kafka复制数据并能够支持多个用户。此外，它会在出现故障时自动平衡用户。这意味着它比现有的类似信息服务更可靠。</li><li id="9a92" class="ka kb hi io b ip kj it kk ix kl jb km jf kn jj mo kg kh ki bi translated"><strong class="io hj">卡夫卡提供高性能。</strong> Kafka为发布和订阅提供了高吞吐量，其磁盘结构能够提供恒定的性能水平，即使在处理许多TB的存储消息时也是如此。</li></ol><p id="a0e1" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">弄脏你的手:——<a class="ae mv" href="https://kafka.apache.org/quickstart" rel="noopener ugc nofollow" target="_blank">https://kafka.apache.org/quickstart</a></p></div></div>    
</body>
</html>