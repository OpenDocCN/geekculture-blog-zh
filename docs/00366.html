<html>
<head>
<title>APIs &amp; Query String Parameters</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">API和查询字符串参数</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/apis-query-string-parameters-f7f0c060b1?source=collection_archive---------0-----------------------#2021-01-25">https://medium.com/geekculture/apis-query-string-parameters-f7f0c060b1?source=collection_archive---------0-----------------------#2021-01-25</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="8e96" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">如何让它们为你工作</em></p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/27aa6dbdd90dca14b6eceb46201935ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vuYdj6goareXKiIqjH5dow.png"/></div></div></figure><p id="309f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在过去的十年中，API的普及和使用持续增长。它们已经成为应用程序基础设施的重要组成部分，随着公司继续使用和开发它们，适当的API设计是成功实现的关键。无论是公共的还是内部使用的，好的API设计都可以提高性能和整体开发人员体验。</p><p id="bed6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最常见的API遵循RESTful架构，使用HTTP请求来访问和使用数据。因此，它们被设计成可以操纵HTTP请求，使用参数返回所需的数据，通常是JSON (JavaScript Object Notation)格式。</p><h1 id="5961" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">因素</h1><p id="baa8" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">当使用API时，第一件要做的事情是<strong class="ih hj">阅读文档</strong>。这样做可以防止以后出现错误，并且理解如何使用内置参数只会让您的工作更轻松，尤其是在处理大型数据库时。有几种类型的参数。</p><p id="8729" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">头</strong> <strong class="ih hj">参数</strong>包含在请求头中，通常与授权相关。大多数私有或订阅API都需要在头参数中有一个唯一的键来接收响应。</p><p id="aefd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">路径参数</strong>在端点的路径内。端点是API访问返回响应所需信息的地方。通常，路径参数由<code class="du kt ku kv kw b">/</code>分隔。这方面的一个例子是下面对星球大战API的请求:</p><pre class="jf jg jh ji fd kx kw ky kz aw la bi"><span id="2748" class="lb jr hi kw b fi lc ld l le lf">https://swapi.dev/api/<strong class="kw hj"><em class="jd">people</em></strong>/<strong class="kw hj"><em class="jd">1</em></strong>/</span></pre><p id="ea64" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du kt ku kv kw b">swapi.dev/api/</code>是端点的基本URL。后面跟有<code class="du kt ku kv kw b">1</code>的<code class="du kt ku kv kw b">people</code>是获取特定person实例的路径参数。在这种情况下，<em class="jd">卢克·天行者</em></p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es lg"><img src="../Images/c3b5fe5dbc6639ea4839cc65b9414ac3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wqmm9IU8Hiaokb160RoWjw.png"/></div></div><figcaption class="lh li et er es lj lk bd b be z dx">The Star Wars API returns a nicely rendered HTML of the instance(s), photo not included.</figcaption></figure><p id="a643" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果<code class="du kt ku kv kw b">1</code>没有被添加到端点，<code class="du kt ku kv kw b">/people</code>将返回星球大战宇宙中的所有人或角色。在这里亲自尝试一下。</p><p id="477c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">查询字符串参数</strong>出现在端点<code class="du kt ku kv kw b">?</code>之后。问号<code class="du kt ku kv kw b">?</code>后面是参数及其值，通常称为“查询字符串”。如果使用得当，这为向RESTful APIs添加基本过滤提供了最简单的方法。</p><h1 id="446e" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">如何使用查询字符串参数</h1><p id="58b6" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">在使用查询字符串参数之前，请务必参考API的文档。并非每个API的设计都相同，也并非每个查询字符串格式都适用于该API。但是，有一些标准规则可以帮助您入门并轻松过滤数据。</p><p id="7a48" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要添加查询字符串参数，在基本URL和路径参数(如果有的话)后面的端点上添加一个问号(<code class="du kt ku kv kw b">?</code>)。在<code class="du kt ku kv kw b">?</code>之后是指定特定参数和值的查询字符串。</p><pre class="jf jg jh ji fd kx kw ky kz aw la bi"><span id="c288" class="lb jr hi kw b fi lc ld l le lf">http://exampleAPI.com/{<em class="jd">path-parameter}</em>?<strong class="kw hj">parameter=value</strong></span></pre><p id="2038" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这些参数可以一个接一个地串连起来，用一个“与”符号(<code class="du kt ku kv kw b">&amp;</code>)将它们分开。参数的具体顺序无关紧要。</p><p id="b3a4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">API之间的查询字符串各不相同。因此，再次强调，参考文档来理解这些功能是非常重要的。对于较大的API数据库，常见的查询字符串参数包括<code class="du kt ku kv kw b">limit</code>、<code class="du kt ku kv kw b">offset</code>和<code class="du kt ku kv kw b">page</code>。Limit提供了您想要返回的资源/实例的数量，而offset规定了从哪里开始计数。它们经常相互结合使用，就像下面的Pokemon API的例子一样。</p><pre class="jf jg jh ji fd kx kw ky kz aw la bi"><span id="e848" class="lb jr hi kw b fi lc ld l le lf"><a class="ae ll" href="https://pokeapi.co/api/v2/pokemon/?limit=7&amp;offset=24" rel="noopener ugc nofollow" target="_blank">https://pokeapi.co/api/v2/pokemon/?<strong class="kw hj">limit=7&amp;offset=24</strong></a></span></pre><p id="932c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在<code class="du kt ku kv kw b">?</code>之后的查询字符串是<code class="du kt ku kv kw b">limit=7&amp;offset=24</code>。这要求Pokemon API发送回7个Pokemon实例，从编号25开始。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es lm"><img src="../Images/504ee6761c532bb46aa64cd567f6a3fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_S7XwbxAHlbZB-KcY2UbRQ.png"/></div></div><figcaption class="lh li et er es lj lk bd b be z dx">The API information is returned in a simple JSON format with links to the specific endpoints to get a specific Pokemon’s information.</figcaption></figure><p id="981f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Page类似于limit &amp; offset，除了已经有一个关于渲染多少实例的内置限制，开发人员只需要一个page参数来访问下一个/上一个数据集。下面这个来自Rick &amp; Morty API的例子有一个内置的限制，每页显示20个字符。</p><pre class="jf jg jh ji fd kx kw ky kz aw la bi"><span id="3b78" class="lb jr hi kw b fi lc ld l le lf"><a class="ae ll" href="https://rickandmortyapi.com/api/character/?page=2" rel="noopener ugc nofollow" target="_blank">https://rickandmortyapi.com/api/character/?<strong class="kw hj">page=2</strong></a></span></pre><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es ln"><img src="../Images/813cc33a02769496c78ae7d0a91ab671.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LvxGM8ApMcZNE5g6BEl3NA.png"/></div></div><figcaption class="lh li et er es lj lk bd b be z dx"><em class="lo">Brief cameo of Aqua Morty and Aqua Rick from </em>S01E10 “Close Rick-counters of the Rick Kind”<em class="lo">.</em></figcaption></figure><p id="31cd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如上图所示，Rick和Morty API的第二页只显示了id为21–40的字符。随着页码的增加或减少，显示的字符将变为下一个或前20个。</p><p id="12d8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">虽然限制响应实例的数量非常有用，但是一些API能够使用实例的属性形成查询字符串。可能的疑问总是列在文档中。Rick和Morty API允许基于几个字符属性的查询，包括姓名、状态、物种、类型和性别，可以这样使用:</p><pre class="jf jg jh ji fd kx kw ky kz aw la bi"><span id="0446" class="lb jr hi kw b fi lc ld l le lf"><a class="ae ll" href="https://rickandmortyapi.com/api/character/?status=alive&amp;gender=male&amp;name=pick" rel="noopener ugc nofollow" target="_blank">https://rickandmortyapi.com/api/character/?<strong class="kw hj">status</strong>=<strong class="kw hj">alive</strong>&amp;<strong class="kw hj">gender</strong>=<strong class="kw hj">male</strong>&amp;<br/><strong class="kw hj">name</strong>=<strong class="kw hj">pick</strong></a></span></pre><p id="e41e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该端点搜索API中所有状态为alive、性别为男性、<em class="jd">和</em>姓名包含pick的字符。结果如下。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es lp"><img src="../Images/ba3b27b90f03a71babb3f87b8297873b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SNKDpkkR36nXSXhEswXKyw.png"/></div></div><figcaption class="lh li et er es lj lk bd b be z dx">Pickle Rick!</figcaption></figure><h1 id="0c3b" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">最后</h1><p id="ffa5" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">当从API访问信息时，查询字符串参数是有用的工具。在最基本的情况下，使用正确的查询字符串可以限制返回的响应数量，而其他人则能够在一个端点上嵌入多个表和数据库。可能性是无穷无尽的。</p><p id="fc49" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">随着API的不断发展，有一个设计合理的框架来实现易用性是至关重要的。使用参数(尤其是查询字符串参数)过滤和排序数据的能力只会优化API并为开发人员提供更多工具。最后，永远记得阅读文档！</p><p id="410a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">关于API或本文引用的API的更多信息:</em></p><ul class=""><li id="064a" class="lq lr hi ih b ii ij im in iq ls iu lt iy lu jc lv lw lx ly bi translated"><a class="ae ll" href="https://swapi.dev/documentation" rel="noopener ugc nofollow" target="_blank">星球大战API </a></li><li id="409a" class="lq lr hi ih b ii lz im ma iq mb iu mc iy md jc lv lw lx ly bi translated"><a class="ae ll" href="https://pokeapi.co/docs/v2" rel="noopener ugc nofollow" target="_blank">口袋妖怪API </a></li><li id="ee81" class="lq lr hi ih b ii lz im ma iq mb iu mc iy md jc lv lw lx ly bi translated"><a class="ae ll" href="https://rickandmortyapi.com/documentation/" rel="noopener ugc nofollow" target="_blank">瑞克和莫蒂API </a></li><li id="df87" class="lq lr hi ih b ii lz im ma iq mb iu mc iy md jc lv lw lx ly bi translated"><a class="ae ll" href="https://searchapparchitecture.techtarget.com/definition/RESTful-API" rel="noopener ugc nofollow" target="_blank">RESTful API</a></li><li id="4f8c" class="lq lr hi ih b ii lz im ma iq mb iu mc iy md jc lv lw lx ly bi translated"><a class="ae ll" href="https://www.moesif.com/blog/technical/api-design/REST-API-Design-Filtering-Sorting-and-Pagination/" rel="noopener ugc nofollow" target="_blank"> REST API设计:过滤、排序和分页</a></li><li id="586f" class="lq lr hi ih b ii lz im ma iq mb iu mc iy md jc lv lw lx ly bi translated"><a class="ae ll" href="https://www.moesif.com/blog/technical/api-design/REST-API-Design-Best-Practices-for-Parameters-and-Query-String-Usage/" rel="noopener ugc nofollow" target="_blank">针对参数和查询字符串用法的REST API设计最佳实践</a></li></ul></div></div>    
</body>
</html>