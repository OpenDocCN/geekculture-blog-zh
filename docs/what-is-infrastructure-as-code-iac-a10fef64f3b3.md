# 什么是基础设施即代码(IaC)？

> 原文：<https://medium.com/geekculture/what-is-infrastructure-as-code-iac-a10fef64f3b3?source=collection_archive---------13----------------------->

![](img/db0f027e7e1152ef6df2ca1cd422c3d1.png)

Photo by [Mitchell Luo](https://unsplash.com/@mitchel3uo?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)

过去，IT 基础架构管理必须手动完成，由管理员手动配置和部署所有硬件和软件。现在，随着云计算的出现，一种管理基础设施的新方法浮出水面，即基础设施即代码(IaC)。

我们将简要介绍什么是 IaC，它的好处，它为什么存在，一些最佳实践，以及一些 IaC 工具的例子。

# 什么是 IaC？

基础架构即代码是通过机器可读文件(如代码)管理和配置 IT 基础架构的过程，而不是物理或手动部署它们。

您可以使用 IaC 在配置文件中定义基础结构，该文件包含组件所需的规范、设置和其他信息。这个文件作为一个模板，可以用同样的方法重新部署多次。它还充当您的环境的文档，并引入了诸如回滚和版本控制之类的源代码控制特性。

IaC 消除了手动管理的痛点，如人力短缺和应用程序的可伸缩性。手动配置非常缓慢和繁琐，并且当试图手动复制环境时，仍然存在人为错误的可能性。有了定义您的环境的代码模板，每个开发人员都能够轻松快速地复制精确的基础设施，而不会出现任何错误。

# IaC 的方法

## 宣言的

IaC 的声明性方法在模板中定义了所需的资源及其属性，然后传递给 IaC 工具为您进行配置和供应。这相当于所提供资源的当前状态列表，便于部署和拆除。

使用声明式方法，您只需要定义您的资源，让 IaC 工具处理剩下的事情。这通常是 IaC 中使用的首选和更常用的方法。

## 必要的

命令式方法定义了配置环境所需的特定命令，并按照定义的顺序传递要执行的命令。您需要确切地知道如何使用命令部署和配置您的资源，而 IaC 工具只会简单地帮助您执行这些命令。

# IaC 的优势

IT 基础架构的手动配置一直是一个非常耗时且成本高昂的过程。IaC 与云计算合作带来了许多好处，解决了手动管理的问题，我们将在这里深入探讨一些更大的好处。

## 部署速度

手动配置资源需要很长时间，并且需要对系统管理员进行大量培训。然而，IaC 使开发人员能够通过执行一个脚本轻松快速地部署他们的环境，具有许多好处，如分段、版本控制等等。

IaC 还允许轻松快速地部署多种环境，如开发、生产和测试。可以进行更改和部署，同时可以快速拆除不再需要的环境。这利用了云计算的优势，可以根据需要轻松部署和移除资源。

## 一致性和减少错误

在手动部署和复制环境时，总是有可能出现人为错误。这可能是由于各种各样的原因，如疲劳、交流、记忆和几乎任何影响我们脆弱生物的东西。然而，IaC 遵循一个定义好的模板，总是部署相同的资源，而不管它启动了多少次或者在哪里启动(有一些例外！).

这使您可以多次或在多个位置一致地部署基础架构，而没有人为故障的风险。您可以相信，只要您的模板文件没有改变，您的环境将是相同的。

## 版本控制

利用 IaC 配置文件带来了版本控制的许多好处，并允许您跟踪更改以及更改的时间。大多数工具还允许您回滚任何有问题的增量，这样问题就不是永久性的了，可以在修补程序或解决方案正在工作时通过回滚来修复。

## 成本节约

使用 IaC 使得一个开发人员就可以在多个地方部署基础设施，并减少了雇佣大型团队来部署基础设施的需要。您也不需要在硬件或采购上花钱，这为您节省了一大笔资本支出。

开发人员和系统管理员可以使用工具轻松地部署基础架构，并将更多时间花在实际需要他们的时间和专业知识的任务上。这样，你付给他们的钱可以得到最有效的利用。

# 最佳实践

## 一致性

尽管在转移到 IaC 时肯定会遇到困难，但您需要保持一致，并确保在配置文件中显式定义所有资源。不要在这里使用混合方法，因为它可能会使你困惑，并导致更多的问题。

## 测试、监控和自动化

借助 IaC，您可以轻松测试、监控和自动化您的环境。在生产中部署之前，请确保利用这些优势并测试所有配置。您还可以利用监控工具来帮助进行错误检查和补救。

应该尽可能地使用自动化来节省时间，尽可能地简化开发过程。这可以允许产品更快的迭代，也可以删除一些无聊的重复任务，腾出时间来关注更重要的问题。

## 利用版本控制

确保所有配置文件都在源代码控制之下。句号。

# IaC 工具示例

*   将（行星）地球化（以适合人类居住）
*   厨师
*   木偶
*   自动气象站云形成
*   盐堆
*   RedHat Ansible