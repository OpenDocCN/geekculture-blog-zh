<html>
<head>
<title>Kubernetes Pods &amp; Docker Containers: Spin VM using Virtual Box in Windows 10 Home</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">kubernetes Pods &amp; Docker Containers:在Windows 10 Home中使用虚拟盒子旋转虚拟机</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/kubernetes-pods-docker-containers-spin-vm-using-virtual-box-in-windows-10-home-d3be783ff087?source=collection_archive---------15-----------------------#2021-05-18">https://medium.com/geekculture/kubernetes-pods-docker-containers-spin-vm-using-virtual-box-in-windows-10-home-d3be783ff087?source=collection_archive---------15-----------------------#2021-05-18</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><h2 id="f385" class="hg hh hi bd b fp hj hk hl hm hn ho dx hp translated" aria-label="kicker paragraph">托管虚拟机管理程序:类型2 + MicroK8s + Docker Hub</h2><div class=""/><div class=""><h2 id="bc22" class="pw-subtitle-paragraph io hr hi bd b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf dx translated">Kubernetes滚动更新和声明式部署</h2></div><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/9df8e65a10aa6c4f6a969552d6faa9f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*YnMzYyM_sjx_7Rn9FjRVAA.gif"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx">Windows 10 Home + Virtual Box VM’s + Ubuntu + Spring Boot + Docker + Kubernetes</figcaption></figure><h1 id="cf69" class="jw jx hi bd jy jz ka kb kc kd ke kf kg ix kh iy ki ja kj jb kk jd kl je km kn bi translated">范围</h1><p id="ee38" class="pw-post-body-paragraph ko kp hi kq b kr ks is kt ku kv iv kw kx ky kz la lb lc ld le lf lg lh li lj hb bi translated">本文解释了如何使用声明式部署来创建Kubernetes pods和服务。它通过从Docker Hub获取更新的映像来执行滚动更新。</p><p id="8a06" class="pw-post-body-paragraph ko kp hi kq b kr lk is kt ku ll iv kw kx lm kz la lb ln ld le lf lo lh li lj hb bi translated">这个练习在主机操作系统Windows 10家庭版中完成。由于Home edition不提供Hyper-V(第1类虚拟机管理程序),因此需要安装Oracle Virtual Box作为托管的第2类虚拟机管理程序，以便在虚拟机中以Ubuntu操作系统作为来宾来运行虚拟机。</p><p id="71de" class="pw-post-body-paragraph ko kp hi kq b kr lk is kt ku ll iv kw kx lm kz la lb ln ld le lf lo lh li lj hb bi translated"><strong class="kq hs">要试用这个练习，要求读者具备以下</strong><em class="lp"/><strong class="kq hs">中的任意一个:</strong> <br/> <strong class="kq hs">选项1 </strong>。Unix/Linux风格的操作系统，安装Docker和Kubernetes。(非Windows) <br/>(或)<br/> <strong class="kq hs">选项2 </strong>。带有Hyper-V、虚拟机、Docker和Kubernetes的Windows操作系统。<br/>(或)<br/> <strong class="kq hs"> <em class="lp">选项3 </em> </strong> <em class="lp">。Windows 10家庭版，配有Oracle Virtual Box、虚拟机、Docker、Kubernetes。</em> <strong class="kq hs"> <em class="lp">(本文基于选项3设置)</em> </strong></p><p id="15c7" class="pw-post-body-paragraph ko kp hi kq b kr lk is kt ku ll iv kw kx lm kz la lb ln ld le lf lo lh li lj hb bi translated">我们设计了构建为容器映像的Spring boot微服务。图像将被标记并<strong class="kq hs"> <em class="lp">推/上传</em> </strong>到Docker Hub。Kubernetes将执行声明式部署，并将映像作为滚动更新，用于Spring boot应用程序中的未来更改。</p><p id="b83e" class="pw-post-body-paragraph ko kp hi kq b kr lk is kt ku ll iv kw kx lm kz la lb ln ld le lf lo lh li lj hb bi translated">上面的动画图显示了安装在其他产品之上的每个产品，其中Spring Boot、Docker和Kubernetes安装在Ubuntu客户操作系统中，如<strong class="kq hs"> <em class="lp">选项3 </em> </strong> <em class="lp">中所列。</em></p><h1 id="0842" class="jw jx hi bd jy jz ka kb kc kd ke kf kg ix kh iy ki ja kj jb kk jd kl je km kn bi translated">先决条件</h1><ol class=""><li id="23cd" class="lq lr hi kq b kr ks ku kv kx ls lb lt lf lu lj lv lw lx ly bi translated">Windows 10家庭版(最低)</li><li id="dd76" class="lq lr hi kq b kr lz ku ma kx mb lb mc lf md lj lv lw lx ly bi translated">Oracle虚拟机箱6.1版</li><li id="57b1" class="lq lr hi kq b kr lz ku ma kx mb lb mc lf md lj lv lw lx ly bi translated">Ubuntu操作系统ISO镜像</li><li id="3f52" class="lq lr hi kq b kr lz ku ma kx mb lb mc lf md lj lv lw lx ly bi translated">码头中心账户</li><li id="def4" class="lq lr hi kq b kr lz ku ma kx mb lb mc lf md lj lv lw lx ly bi translated">码头工人</li><li id="713b" class="lq lr hi kq b kr lz ku ma kx mb lb mc lf md lj lv lw lx ly bi translated">Kubernetes - MicroK8s(试验台，单节点集群)</li><li id="7da3" class="lq lr hi kq b kr lz ku ma kx mb lb mc lf md lj lv lw lx ly bi translated">Spring Boot管理依赖性和设计微服务</li></ol><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/b7177cda3564d4ac1f7f8ef2bb7a8491.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T0zoUwB8YzikUmfXCMNsOw.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx">Ubuntu Guest OS running in Virtual Machine</figcaption></figure><h1 id="0fab" class="jw jx hi bd jy jz ka kb kc kd ke kf kg ix kh iy ki ja kj jb kk jd kl je km kn bi translated">安装Docker和依赖项</h1><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es me"><img src="../Images/b66273ec9c903b976cdf91255eff0e70.png" data-original-src="https://miro.medium.com/v2/resize:fit:1160/format:webp/1*3uBU4SUxinK78rDr0K6AJg.png"/></div><figcaption class="js jt et er es ju jv bd b be z dx">command to Install docker, and its dependencies</figcaption></figure><h1 id="908d" class="jw jx hi bd jy jz ka kb kc kd ke kf kg ix kh iy ki ja kj jb kk jd kl je km kn bi translated">安装Oracle JDK 1.8版</h1><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mf"><img src="../Images/1308fc289e849e41d9e214109102163a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OdBe8Vys3TtzFE_o-3ivIQ.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx">command to Install Open JDK v1.8</figcaption></figure><h1 id="1ec3" class="jw jx hi bd jy jz ka kb kc kd ke kf kg ix kh iy ki ja kj jb kk jd kl je km kn bi translated">设置JAVA_HOME和JRE_HOME环境变量</h1><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mg"><img src="../Images/26c8831a6d17eaeb84bbf96b0135a05a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y9DkosrSw6ab15yRslw-kw.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx">SET Environment variables</figcaption></figure><h1 id="6679" class="jw jx hi bd jy jz ka kb kc kd ke kf kg ix kh iy ki ja kj jb kk jd kl je km kn bi translated">安装Maven</h1><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mh"><img src="../Images/7c867e2f3542493a1880810bbb0c89c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SN4xzd5YdQCAZ1zpHL-oUg.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx">command to Install Maven</figcaption></figure><h1 id="0fdb" class="jw jx hi bd jy jz ka kb kc kd ke kf kg ix kh iy ki ja kj jb kk jd kl je km kn bi translated">创建Spring Boot微服务</h1><ol class=""><li id="08a8" class="lq lr hi kq b kr ks ku kv kx ls lb lt lf lu lj lv lw lx ly bi translated">创建一个简单的spring boot微服务，按照下面的命令打包并运行。</li></ol><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mi"><img src="../Images/f629d8f8f8c1de067dd1529282185e75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d59DH6Cre1Ak4lCOEu65cQ.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx">Package, Run, Launch</figcaption></figure><h1 id="31b8" class="jw jx hi bd jy jz ka kb kc kd ke kf kg ix kh iy ki ja kj jb kk jd kl je km kn bi translated">构建映像和运行容器的步骤</h1><ol class=""><li id="86b5" class="lq lr hi kq b kr ks ku kv kx ls lb lt lf lu lj lv lw lx ly bi translated">创建Dockerfile文件</li></ol><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es mj"><img src="../Images/368ac342e1bb7f8e136eef1a0570ce18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1116/format:webp/1*IOz2jD1JW34gSpxCH9NGng.png"/></div><figcaption class="js jt et er es ju jv bd b be z dx">command to create Dockerfile</figcaption></figure><p id="f5b0" class="pw-post-body-paragraph ko kp hi kq b kr lk is kt ku ll iv kw kx lm kz la lb ln ld le lf lo lh li lj hb bi translated">2.在Dockerfile中添加以下内容并保存。我们将容器端口8090公开为映射到容器外部的端口8080。</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mk"><img src="../Images/984908938c68f228c97256a5af886039.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F0ZDrYvaPFfbajV6c51_Cw.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx">contents in Dockerfile</figcaption></figure><p id="bc31" class="pw-post-body-paragraph ko kp hi kq b kr lk is kt ku ll iv kw kx lm kz la lb ln ld le lf lo lh li lj hb bi translated">3.构建图像</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es ml"><img src="../Images/42df55fa902c6181e925b62d355d4476.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WsQsP3kyjJ5Q-byjphvZBg.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx">Build Image</figcaption></figure><p id="8cfc" class="pw-post-body-paragraph ko kp hi kq b kr lk is kt ku ll iv kw kx lm kz la lb ln ld le lf lo lh li lj hb bi translated">上面的命令将查找在当前目录中创建的Dockerfile。)点</p><p id="4465" class="pw-post-body-paragraph ko kp hi kq b kr lk is kt ku ll iv kw kx lm kz la lb ln ld le lf lo lh li lj hb bi translated">4.检查图像是否成功创建。</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es mm"><img src="../Images/3b988903c944442ffcb562f1bf43c4b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1176/format:webp/1*hKyEoREFnzA54Iq930pfEA.png"/></div><figcaption class="js jt et er es ju jv bd b be z dx">List docker images</figcaption></figure><p id="2a50" class="pw-post-body-paragraph ko kp hi kq b kr lk is kt ku ll iv kw kx lm kz la lb ln ld le lf lo lh li lj hb bi translated">5.运行容器</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mn"><img src="../Images/d6fd9d616488a25bc75f6edc4eb80970.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6MrP0uvNsefx9hg8JbZm9Q.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx">Run Container</figcaption></figure><p id="2fe1" class="pw-post-body-paragraph ko kp hi kq b kr lk is kt ku ll iv kw kx lm kz la lb ln ld le lf lo lh li lj hb bi translated">我们将容器的端口8090公开给本地机器的端口8080。<br/>该应用程序可在<a class="ae mo" href="http://localhost:8080" rel="noopener ugc nofollow" target="_blank"> http://localhost:8080 </a>上访问。</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es mp"><img src="../Images/51b06c839de7283637a9f97703bbf681.png" data-original-src="https://miro.medium.com/v2/resize:fit:1390/format:webp/1*YIuAlX6vrYDnkVm0RSnt3g.png"/></div><figcaption class="js jt et er es ju jv bd b be z dx">cURL command to execute API</figcaption></figure><h1 id="a11a" class="jw jx hi bd jy jz ka kb kc kd ke kf kg ix kh iy ki ja kj jb kk jd kl je km kn bi translated">标记并将图像推送到Docker Hub</h1><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mq"><img src="../Images/ceb27ca6ab551d79c680d25cec045291.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s2Rz66KHuq8VUBOz2VQv4Q.png"/></div></div></figure><p id="c80c" class="pw-post-body-paragraph ko kp hi kq b kr lk is kt ku ll iv kw kx lm kz la lb ln ld le lf lo lh li lj hb bi translated">在将图像推送到Docker hub之前，需要执行以下步骤:<br/> 1 .在码头中心创建码头id。这是Docker Hub用户名。<br/> 2。一旦您有了Docker ID，您必须授权Docker连接到Docker Hub帐户。<br/> 3。在你上传你的图片之前，上传到Docker Hub的图片必须有一个<strong class="kq hs"> <em class="lp">用户名/图片:标签<br/> </em> </strong> 4格式的名称。<strong class="kq hs"> <em class="lp">用户名</em> </strong>是你的Docker ID，<strong class="kq hs"> <em class="lp">图片</em> </strong> <em class="lp"> </em>是图片的名称，<strong class="kq hs"> <em class="lp">标签</em> </strong>是一个可选的附加属性——通常它用来表示图片的版本。<br/> 5。要根据此格式重命名图像，请运行以下命令:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mr"><img src="../Images/49bb7ebe1aee70766e999139a3885efd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S5QJuYk6MStev4X8ZuNtpg.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx">command to Tag image to the format of Docker Hub account</figcaption></figure><p id="2df0" class="pw-post-body-paragraph ko kp hi kq b kr lk is kt ku ll iv kw kx lm kz la lb ln ld le lf lo lh li lj hb bi translated">6.将新创建的映像推送到Docker Hub。</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es ms"><img src="../Images/888e2190974fbcb6d0e51da35a9d1f88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ICZhsr86HWXMfwp6G2gYRA.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx">command to Push image to Docker Hub</figcaption></figure><h1 id="7bb8" class="jw jx hi bd jy jz ka kb kc kd ke kf kg ix kh iy ki ja kj jb kk jd kl je km kn bi translated">kubernetes——容器编制者</h1><h2 id="cd07" class="mt jx hi bd jy mu mv mw kc mx my mz kg kx na nb ki lb nc nd kk lf ne nf km ho bi translated">安装Kubernetes-micro k8s(试验台)</h2><ol class=""><li id="3cc5" class="lq lr hi kq b kr ks ku kv kx ls lb lt lf lu lj lv lw lx ly bi translated"><strong class="kq hs"> <em class="lp">为什么要</em></strong><em class="lp">MicroK8s</em><strong class="kq hs"><em class="lp">Testbed？</em> </strong> <br/>有时候您可能想释放Kubernetes的单个节点实例。比方说，你正在开发一个应用程序或服务，你需要测试它。在投入生产之前，为什么不在Kubernetes测试平台上部署它呢？或者，您可能正在寻求改进您的Kubernetes开发。与成熟的Kubernetes集群不同，单个节点是开发和测试的最佳实例之一。</li></ol><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es ng"><img src="../Images/f9e0f8ccbe89bbe1b8ca68aab2a4956b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o6LUjhw6qgwJxWs-O0M7JQ.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx">command to Install MicroK8s — Kubernetes</figcaption></figure><p id="1465" class="pw-post-body-paragraph ko kp hi kq b kr lk is kt ku ll iv kw kx lm kz la lb ln ld le lf lo lh li lj hb bi translated">2.<strong class="kq hs">启动/停止MicroK8s </strong></p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es nh"><img src="../Images/f166ad74fa28b6ee8ad3cd5b91a660ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1216/format:webp/1*HhGOyG4Bmz2CQBCH0VNhKg.png"/></div><figcaption class="js jt et er es ju jv bd b be z dx">command to start and stop MicroK8s</figcaption></figure><p id="06ad" class="pw-post-body-paragraph ko kp hi kq b kr lk is kt ku ll iv kw kx lm kz la lb ln ld le lf lo lh li lj hb bi translated">3.<strong class="kq hs">检查状态并访问仪表板。</strong></p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es ni"><img src="../Images/8b80472899a2a4324e10a65235ee438b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Pe8hT0wObKUG2Zcq2v84GQ.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx">command to Check Status and find IP of Kubernetes dashboard</figcaption></figure><h1 id="f859" class="jw jx hi bd jy jz ka kb kc kd ke kf kg ix kh iy ki ja kj jb kk jd kl je km kn bi translated">用于访问Kubernetes仪表板的令牌</h1><p id="1af6" class="pw-post-body-paragraph ko kp hi kq b kr ks is kt ku kv iv kw kx ky kz la lb lc ld le lf lg lh li lj hb bi translated">Kubernetes仪表板需要令牌才能访问。你怎么找到那个令牌的？首先，您必须使用以下命令让Microk8s列出所有可用的秘密:</p><ol class=""><li id="c531" class="lq lr hi kq b kr lk ku ll kx nj lb nk lf nl lj lv lw lx ly bi translated">列表机密</li></ol><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es nm"><img src="../Images/ce1e8fcaab510e7344fb6ff77171643a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lbfjZGpjlJU3ht29avwO0g.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx">command to find Kubernetes dashboard secret</figcaption></figure><p id="1b74" class="pw-post-body-paragraph ko kp hi kq b kr lk is kt ku ll iv kw kx lm kz la lb ln ld le lf lo lh li lj hb bi translated">2.检索服务的秘密令牌</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es nn"><img src="../Images/1d48fdd84cfac7e80aa1ff9507978c0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y1McJ6E3qned1j2nQypTHQ.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx">command to retrieve Kubernetes dashboard token</figcaption></figure><p id="2a47" class="pw-post-body-paragraph ko kp hi kq b kr lk is kt ku ll iv kw kx lm kz la lb ln ld le lf lo lh li lj hb bi translated">3.使用令牌登录仪表板</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/8f90f220d6d45aeccfd12a6c36b2a2c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1qTRNy9lxx2mVe6ly47lnA.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx">Kubernetes — MicroK8s dashboard</figcaption></figure><h1 id="3f4e" class="jw jx hi bd jy jz ka kb kc kd ke kf kg ix kh iy ki ja kj jb kk jd kl je km kn bi translated">准备Kubernetes声明性部署</h1><ol class=""><li id="947e" class="lq lr hi kq b kr ks ku kv kx ls lb lt lf lu lj lv lw lx ly bi translated">为了让Kubernetes访问Docker Hub映像，将您在Kubernetes集群中的Docker凭据设置为一个秘密，您可以选择任何名称<anysecretname>。</anysecretname></li><li id="76ce" class="lq lr hi kq b kr lz ku ma kx mb lb mc lf md lj lv lw lx ly bi translated">该命令将采用以下参数:<br/>&lt;your-Registry-server&gt;是您的私有Docker注册表FQDN。将<a class="ae mo" href="https://index.docker.io/v2/" rel="noopener ugc nofollow" target="_blank">https://index.docker.io/v2/</a>用于DockerHub。<br/> &lt;你的名字&gt;是你的码头工人用户名。<br/> &lt; your-pword &gt;是你的Docker密码。<br/> &lt;你的-email &gt;是你的Docker email。</li><li id="76ff" class="lq lr hi kq b kr lz ku ma kx mb lb mc lf md lj lv lw lx ly bi translated">在Kubernetes集群中创建秘密以从Docker Hub访问图像。</li></ol><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es no"><img src="../Images/31838fd9549793d7680854cd9e8379d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iksXypLtD7R_DLjRiyJS_Q.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx">command to create secret in Kubernetes cluster</figcaption></figure><p id="b500" class="pw-post-body-paragraph ko kp hi kq b kr lk is kt ku ll iv kw kx lm kz la lb ln ld le lf lo lh li lj hb bi translated">4.创建声明式部署—<strong class="kq hs"><em class="lp">deployment . YAML<br/></em></strong><em class="lp">我们可以将</em> <strong class="kq hs"> <em class="lp"> </em> </strong>提供的<strong class="kq hs"> D <em class="lp">部署</em> </strong> <em class="lp">类</em>和<strong class="kq hs"> <em class="lp">服务</em> </strong> <em class="lp">类</em>配置在单个<strong class="kq hs"> <em class="lp"> yaml </em> </strong>文件中如下所示。<br/>用<strong class="kq hs"> <em class="lp"> (3破折号)</em> </strong>把它们分开就行了</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es np"><img src="../Images/dadaa83e217d32897db0d534539e7602.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Eorsi3N7lLcDfIop5C_I5Q.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx">Deployment kind and Service kind configuration for Declarative deployment</figcaption></figure><p id="5112" class="pw-post-body-paragraph ko kp hi kq b kr lk is kt ku ll iv kw kx lm kz la lb ln ld le lf lo lh li lj hb bi translated">5.创建部署、单元、服务</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es nq"><img src="../Images/6df8156cada22afc78fb3f81fcb4ffcc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*USutBSPy47OkxJYkMA2F-Q.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx">command to create Deployment, Pods, Services</figcaption></figure><p id="f442" class="pw-post-body-paragraph ko kp hi kq b kr lk is kt ku ll iv kw kx lm kz la lb ln ld le lf lo lh li lj hb bi translated">6.库伯内特斯的鱼鳞荚</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es nr"><img src="../Images/4f9bd6705c3c5497de2b30137d267f13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3PPjl7ri2XCPt_eKRY3QDw.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx">command to Scale Pods in Kubernetes cluster</figcaption></figure><p id="32db" class="pw-post-body-paragraph ko kp hi kq b kr lk is kt ku ll iv kw kx lm kz la lb ln ld le lf lo lh li lj hb bi translated">7.查找服务IP、Pod IP以访问服务</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es ns"><img src="../Images/647a4ef95032eaecbff9c5dc4e2af40b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qvELvILmXuey4uKW8fMHYw.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx">command to find Service IP, Pod IP</figcaption></figure><p id="68ed" class="pw-post-body-paragraph ko kp hi kq b kr lk is kt ku ll iv kw kx lm kz la lb ln ld le lf lo lh li lj hb bi translated">8.访问Kubernetes集群之外的服务<br/>要访问Kubernetes集群之外的微服务，应该使用<strong class="kq hs"> <em class="lp">节点端口</em> </strong>，它又映射到Pod。<br/>要找到<strong class="kq hs"> <em class="lp">节点端口</em> </strong>，发出命令:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es nt"><img src="../Images/540e2544aced2c9267897235e73073f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UeveZ3X4wGV7G_owTUDi-A.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx">Find NodePort to access service from outside Kubernetes cluster</figcaption></figure><p id="628c" class="pw-post-body-paragraph ko kp hi kq b kr lk is kt ku ll iv kw kx lm kz la lb ln ld le lf lo lh li lj hb bi translated"><strong class="kq hs"><em class="lp">Node-IP:Node port</em></strong><br/><a class="ae mo" href="http://localhost:31312/hello" rel="noopener ugc nofollow" target="_blank">http://localhost:31312/</a>k8</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es nu"><img src="../Images/4ba5e17c06fbf8e60a892bcd08c2976a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KO0CqYFO2-T35q_OwXeXNQ.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx">Microservice accessed from outside Kubernetes cluster</figcaption></figure><h1 id="98c6" class="jw jx hi bd jy jz ka kb kc kd ke kf kg ix kh iy ki ja kj jb kk jd kl je km kn bi translated">Kubernetes滚动更新</h1><p id="17d8" class="pw-post-body-paragraph ko kp hi kq b kr ks is kt ku kv iv kw kx ky kz la lb lc ld le lf lg lh li lj hb bi translated">到目前为止，我们在Kubernetes中看到的配置不需要在应用程序的任何未来更新中重复。<br/>更新后的应用需要重新构建，镜像需要推送到Docker Hub。<br/> Kubernetes将使用以下命令获取修改后的映像版本，并执行滚动更新，这将使部署在Kubernetes集群中的应用程序能够向用户提供最新的更改。</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es nv"><img src="../Images/34cf63a901ba2a77df51df76754ee3ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Oc6Pbw691y-GgnSGlo5EBA.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx">command to execute Rolling updates — Kubernetes cluster</figcaption></figure><h1 id="da95" class="jw jx hi bd jy jz ka kb kc kd ke kf kg ix kh iy ki ja kj jb kk jd kl je km kn bi translated">结论</h1><p id="ae1e" class="pw-post-body-paragraph ko kp hi kq b kr ks is kt ku kv iv kw kx ky kz la lb lc ld le lf lg lh li lj hb bi translated">本文解释了Docker、Kubernetes、Java platform、Maven和Spring Boot的安装和配置。主要重点是理解如何构建Docker映像和运行容器。创建和扩展Kubernetes Pods、服务、声明式部署和滚动更新。</p><p id="01e9" class="pw-post-body-paragraph ko kp hi kq b kr lk is kt ku ll iv kw kx lm kz la lb ln ld le lf lo lh li lj hb bi translated"><strong class="kq hs">出版于2021年5月18日</strong></p></div><div class="ab cl nw nx gp ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="hb hc hd he hf"><blockquote class="od oe of"><p id="46f0" class="ko kp lp kq b kr lk is kt ku ll iv kw og lm kz la oh ln ld le oi lo lh li lj hb bi translated"><strong class="kq hs">其他媒体文章，<em class="hi">由</em> Ganesh Nagalingam </strong></p><p id="9335" class="ko kp lp kq b kr lk is kt ku ll iv kw og lm kz la oh ln ld le oi lo lh li lj hb bi translated"><a class="ae mo" rel="noopener" href="/geekculture/quest-syntax-tree-and-remedy-code-smell-using-japa-visitor-patterns-f023a89842cf">使用JAPA访问者模式探索语法树和补救代码气味</a></p><p id="095e" class="ko kp lp kq b kr lk is kt ku ll iv kw og lm kz la oh ln ld le oi lo lh li lj hb bi translated"><a class="ae mo" rel="noopener" href="/nerd-for-tech/asynchronous-websocket-messaging-middleware-and-microservices-1a50a8f14e4b"> <em class="hi">异步WebSocket消息中间件和微服务</em> </a></p><p id="bd14" class="ko kp lp kq b kr lk is kt ku ll iv kw og lm kz la oh ln ld le oi lo lh li lj hb bi translated"><a class="ae mo" rel="noopener" href="/geekculture/amalgamate-angular-with-spring-cloud-architecture-through-cors-7f13b5fdb98f"> <em class="hi">通过CORS </em> </a>融合棱角与春云建筑</p><p id="7a14" class="ko kp lp kq b kr lk is kt ku ll iv kw og lm kz la oh ln ld le oi lo lh li lj hb bi translated"><a class="ae mo" rel="noopener" href="/geekculture/multi-broker-insights-into-apache-kafka-cluster-architecture-617b0abfc53e">多代理洞察Apache Kafka集群架构</a></p><p id="0adb" class="ko kp lp kq b kr lk is kt ku ll iv kw og lm kz la oh ln ld le oi lo lh li lj hb bi translated"><a class="ae mo" href="https://ganeshblog.medium.com/remote-queue-definition-ibm-mq-v9-2-c3ec4f568dab?source=user_profile---------5----------------------------" rel="noopener"> <em class="hi">远程队列定义:IBM MQ v 9.2</em>T3】</a></p><p id="0bfa" class="ko kp lp kq b kr lk is kt ku ll iv kw og lm kz la oh ln ld le oi lo lh li lj hb bi translated"><a class="ae mo" href="https://ganesh-nagalingam.medium.com/federate-okta-idp-wso2-api-manager-as-gateway-to-spring-boot-microservices-integration-ba567567e81" rel="noopener"> <em class="hi">联合OKTA IdP与WSO2 API Manager作为Spring boot微服务集成的网关</em> </a></p><p id="400f" class="ko kp lp kq b kr lk is kt ku ll iv kw og lm kz la oh ln ld le oi lo lh li lj hb bi translated"><a class="ae mo" href="https://ganesh-nagalingam.medium.com/integrate-service-providers-sps-with-okta-identity-provider-idp-ce64a4e262ae" rel="noopener">整合服务提供商(sp)和OKTA身份提供商(IdP) </a></p><p id="eda1" class="ko kp lp kq b kr lk is kt ku ll iv kw og lm kz la oh ln ld le oi lo lh li lj hb bi translated"><a class="ae mo" href="https://ganeshblog.medium.com/integrate-ibm-business-process-manager-with-hybrid-mobilefirst-application-5aed20841bf3?source=user_profile---------2----------------------------" rel="noopener"> <em class="hi">将IBM业务流程管理器与混合MobileFirst应用程序集成</em> </a></p><p id="2606" class="ko kp lp kq b kr lk is kt ku ll iv kw og lm kz la oh ln ld le oi lo lh li lj hb bi translated"><a class="ae mo" href="https://ganeshblog.medium.com/kerberos-v5-sso-authentication-in-windows-10-home-using-apache-directory-studio-fb0151899185?source=user_profile---------3----------------------------" rel="noopener"><em class="hi">Kerberos V5:Windows 10 Home中使用Apache directory studio的SSO认证</em> </a></p><p id="b115" class="ko kp lp kq b kr lk is kt ku ll iv kw og lm kz la oh ln ld le oi lo lh li lj hb bi translated"><a class="ae mo" href="https://ganeshblog.medium.com/integrate-ibm-websphere-service-registry-and-repository-with-ibm-process-server-f97eeb0e2ea?source=user_profile---------6----------------------------" rel="noopener"> <em class="hi">将IBM WebSphere Service Registry and Repository与IBM Process Server集成</em> </a></p></blockquote></div></div>    
</body>
</html>