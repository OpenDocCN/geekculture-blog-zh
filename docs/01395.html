<html>
<head>
<title>How to manage states in React applications effectively</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何有效地管理React应用程序中的状态</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/how-to-manage-states-in-react-applications-effectively-d31b2f740496?source=collection_archive---------20-----------------------#2021-04-08">https://medium.com/geekculture/how-to-manage-states-in-react-applications-effectively-d31b2f740496?source=collection_archive---------20-----------------------#2021-04-08</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/90dd2dc724a7ab30d77b08bf1c2f2b74.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qWYmQHIF1PXdWzfg5VuwLQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Template created by <a class="ae iu" href="http://www.canva.com" rel="noopener ugc nofollow" target="_blank">www.canva.com</a></figcaption></figure><p id="aa45" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="jt">本文假设你已经对React/Redux有了基本的了解。顺便说一下，如果你对表示容器模式有所了解，你会在这篇文章中找到创新的想法。</em></p><blockquote class="ju jv jw"><p id="80fb" class="iv iw jt ix b iy iz ja jb jc jd je jf jx jh ji jj jy jl jm jn jz jp jq jr js hb bi translated">考虑一下:我们希望在一个表中创建一个搜索文本框，它更新该表的条目，并且对其他组件没有影响。要不要创造动作，还原器，把这种状态放入商店？</p></blockquote><p id="5efa" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">说实话，你不需要。当您在第一阶段开始构建您的应用程序时，本地组件状态可能会在几乎所有组件和模块中帮助我们。</p><p id="d312" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在我作为“看门人”的大部分工作时间里，我经常在一些实现Redux的项目中看到的常见错误是将每个状态放入Redux存储中，然后为每个相关的状态创建actions和reducers。于是，噩梦开始了——你的Redux店铺越来越大。在某些日子里，它大到每天都能让你大吃一惊，以至于你不得不怀疑为什么要在应用程序中实现Redux。</p><p id="965c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">当然，状态管理(如Redux)可能很复杂，但这并不意味着当应用程序增长时，状态管理总是成为一个问题。它依赖于您在应用程序中实现Redux的方式。</p><p id="9dd4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">所以，我给了一些下面的场景。它们是我们在构建组件甚至应用程序时应该经历的步骤。</p><h1 id="7389" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">场景1:作为一名用户，我希望以列表形式查看产品，并拥有一个用于搜索产品的文本框。</h1><p id="8057" class="pw-post-body-paragraph iv iw hi ix b iy ky ja jb jc kz je jf jg la ji jj jk lb jm jn jo lc jq jr js hb bi translated">这个场景中我们唯一需要的是<strong class="ix hj">使用状态</strong>和<strong class="ix hj">使用效果</strong>。这意味着在这种情况下使用本地组件状态就足够了。</p><figure class="le lf lg lh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ld"><img src="../Images/d6f1c65e802d37ce06d75ff8bfd9fef6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kfKo54QWjoagK-O1lntErg.png"/></div></div></figure><h1 id="1574" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">场景2:用户希望拥有一个UI不同但产品相同的产品表。</h1><p id="7578" class="pw-post-body-paragraph iv iw hi ix b iy ky ja jb jc kz je jf jg la ji jj jk lb jm jn jo lc jq jr js hb bi translated">首先，如果我们尝试对<code class="du li lj lk ll b">ProductTable</code>做与场景1相同的事情，我们会发现产品和<code class="du li lj lk ll b">fetchProducts</code>将会重复。因此，我们可以通过创建一个用于管理产品的自定义钩子来解决上述问题。</p><figure class="le lf lg lh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lm"><img src="../Images/8512db0335176a0b766d2057eaa8ef0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N_GMWiAHdPrUp1KqaNAlFA.png"/></div></div></figure><p id="5a68" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然后，在接下来的步骤中，我们用我们的<code class="du li lj lk ll b">useProducts</code>定制挂钩替换产品的<code class="du li lj lk ll b">useState</code>和<code class="du li lj lk ll b">useEffect</code>。</p><figure class="le lf lg lh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ln"><img src="../Images/142b03782cb575da4c0461a5f8d0242a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7oGQRVt6M0z1DaLVEbYoBA.png"/></div></div></figure><p id="b8fa" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">并且，我们可以简单地将<code class="du li lj lk ll b">useProducts</code>作为<code class="du li lj lk ll b">ProductTable</code>实现到我们的新组件中</p><figure class="le lf lg lh fd ij er es paragraph-image"><div class="er es lo"><img src="../Images/27a63b78b98918a0afe2b5c220dcb3b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1396/format:webp/1*S62ndnBrji878rVBIiJPkA.png"/></div></figure><p id="f9e8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">按照上面的代码片段，如果我们把<code class="du li lj lk ll b">ProductList</code>和<code class="du li lj lk ll b">ProductTable</code>放在不同的页面，就没问题了。相反，当我们在同一个页面中实现上述两个组件时，<code class="du li lj lk ll b">fetchProducts</code>将被执行两次。实际上，这是一个已知的问题，因为我们期望遵循组件间独立性的方法。</p><p id="7113" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">不过，我们完全可以通过在父页面中实现<code class="du li lj lk ll b">useProducts</code>而不是每个组件，并将<code class="du li lj lk ll b">products</code>作为每个组件的道具来传递来解决这个问题。</p><h1 id="72a5" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">场景3:我们的应用程序足够大，可以实现状态管理</h1><p id="a244" class="pw-post-body-paragraph iv iw hi ix b iy ky ja jb jc kz je jf jg la ji jj jk lb jm jn jo lc jq jr js hb bi translated">当您发现自己一遍又一遍地在组件之间传递状态(正如上面提到的问题)或者一层又一层地冒泡子组件状态，以便父组件或更高级别的组件可以使用该状态时，您就知道是时候解决问题了。</p><figure class="le lf lg lh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lp"><img src="../Images/1d200add4029845fe8e76831be5dfa8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xm7r21SdHCMn6U6xWTH0RA.png"/></div></div></figure><p id="6502" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果需要，我们应该使用状态管理，但是请记住，我们可以一起使用本地状态和全局状态。布兰登在<a class="ae iu" href="https://www.telerik.com/amp/3-essential-tips-for-managing-state-in-react-applications/WEx1ZE1sRUVUWkE5S0dNbEhBNXJyUkU3T1Q4PQ2" rel="noopener ugc nofollow" target="_blank">的这篇</a>文章中提醒大家:</p><p id="271c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="jt">使用本地状态是可以的，特别是如果它能帮助你保持全局状态的整洁和有序。</em></p><h1 id="0672" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">结论</h1><p id="8c90" class="pw-post-body-paragraph iv iw hi ix b iy ky ja jb jc kz je jf jg la ji jj jk lb jm jn jo lc jq jr js hb bi translated">在这篇文章中，我们已经了解了在React应用程序中管理本地状态和全局状态的方法。此外，我给出了一些在React组件中实现状态时可能发生的基本场景的示例。</p><p id="2267" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">记住所有这些，希望你不仅可以保持一个干净和可读的状态管理，而且可以减少应用程序中复杂的逻辑处理。</p><h2 id="dae0" class="lq kb hi bd kc lr ls lt kg lu lv lw kk jg lx ly ko jk lz ma ks jo mb mc kw md bi translated">参考资源:</h2><p id="e57c" class="pw-post-body-paragraph iv iw hi ix b iy ky ja jb jc kz je jf jg la ji jj jk lb jm jn jo lc jq jr js hb bi translated"><a class="ae iu" href="https://www.telerik.com/amp/3-essential-tips-for-managing-state-in-react-applications/WEx1ZE1sRUVUWkE5S0dNbEhBNXJyUkU3T1Q4PQ2" rel="noopener ugc nofollow" target="_blank">https://www . telerik . com/amp/3-essential-tips-for-managing-state-in-react-applications/wex 1 ze 1 sruvuke 5s 0 dnbehbbnxjyuku 3t 1 q 4 pq 2</a></p><p id="7e78" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae iu" rel="noopener" href="/voobans-tech-stories/5-ways-to-stop-wasting-renders-in-react-redux-73b3c5d86f50">https://medium . com/voobans-tech-stories/5-waste-renders-in-react-redux-73 B3 C5 d 86 f 50</a></p><p id="e642" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae iu" href="https://www.welcometothejungle.com/en/articles/atomic-design-front-end-developer" rel="noopener ugc nofollow" target="_blank">https://www . welcometothejungle . com/en/articles/atomic-design-front-end-developer</a></p></div></div>    
</body>
</html>