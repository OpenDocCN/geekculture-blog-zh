<html>
<head>
<title>END TO END Movie Recommendation System</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">端到端电影推荐系统</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/end-to-end-movie-recommendation-system-49b29a8b57ac?source=collection_archive---------3-----------------------#2021-09-25">https://medium.com/geekculture/end-to-end-movie-recommendation-system-49b29a8b57ac?source=collection_archive---------3-----------------------#2021-09-25</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="8ac0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">使用Docker和Kubernetes收集数据、构建模型、创建前端并进行部署</em></p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/2b80323b2132b548ee6c1a1e1e65277e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AioDCH3cwN6xgqzRU8IZdw.jpeg"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx">source: <a class="ae ju" href="https://erikhollanderdesign.com/MOVIE-CLASSICS-COLLAGE" rel="noopener ugc nofollow" target="_blank">https://erikhollanderdesign.com/MOVIE-CLASSICS-COLLAGE</a></figcaption></figure><p id="ac74" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">过去的一年半，我们被锁在家里，这让我们渴望室内娱乐，还有什么比看整部电影更好的娱乐方式呢！</p><p id="3e22" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有N部电影可以从各种流媒体网站上选择，当我们想看一部电影的时候，我们会选择哪一部呢？我们通常会根据演员、导演等选择一部电影，或者选择一部与我们喜欢的电影或朋友推荐的电影相似的电影，不是吗？</p><p id="559b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">如果</strong> …我们建立自己的推荐系统会怎么样？</p><p id="6697" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本文中，我将解释从头构建一个端到端电影推荐系统所需的过程。以下是所有步骤的总结:</p><ul class=""><li id="75a1" class="jv jw hi ih b ii ij im in iq jx iu jy iy jz jc ka kb kc kd bi translated"><strong class="ih hj">使用BeautifulSoup从网络上抓取</strong>数据(<strong class="ih hj">数据提取</strong>)</li><li id="8a9e" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated">构建一个简单而有效的基于内容的推荐系统</li><li id="7614" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated">为我们的模型设计一个<strong class="ih hj">前端web应用</strong>(使用streamlit)来查看电影推荐</li><li id="9a84" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated"><strong class="ih hj">容器化</strong>我们的模型(使用docker)并准备配置文件</li><li id="1e2a" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated"><strong class="ih hj">在Google Kubernetes引擎中部署</strong>容器化应用</li></ul><h1 id="a6ee" class="kj kk hi bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated">数据析取</h1><p id="889c" class="pw-post-body-paragraph if ig hi ih b ii lh ik il im li io ip iq lj is it iu lk iw ix iy ll ja jb jc hb bi translated">最佳推荐引擎通过收集和研究许多其他类似用户的偏好来预测用户的偏好。这就是网飞所做的。例如，如果你喜欢蝙蝠侠电影，那么网飞会推荐其他喜欢蝙蝠侠电影的人喜欢的电影。这种方法叫做<strong class="ih hj">协同过滤，</strong>它需要用户偏好数据。另一种方法叫做<strong class="ih hj">基于内容的推荐器</strong>推荐与你喜欢的电影内容相似的电影，虽然简单，但它在推荐电影方面是有效的，并且非常适合这个项目。基于内容的推荐系统不需要随时间变化并需要不断更新的用户偏好数据。</p><p id="7d72" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我从IMDB网站 的<a class="ae ju" href="https://www.imdb.com/search/title/?title_type=feature&amp;primary_language=en&amp;ref_=adv_prv" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">上搜集了这个项目的数据。它包含基于当前流行程度的电影列表。</strong></a></p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es lm"><img src="../Images/7945025f8ffe2848a0eaae16732e4c41.png" data-original-src="https://miro.medium.com/v2/resize:fit:1088/format:webp/1*Pv6_yXYvQhHwd8ZN1jPTcA.png"/></div><figcaption class="jq jr et er es js jt bd b be z dx">Results from the IMDB link mentioned above</figcaption></figure><p id="0fab" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面的web抓取代码是一个简单的脚本，它使用beautifulsoup从站点的各种搜索页面中提取必要的字段。</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="ln lo l"/></div></figure><p id="c2e6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是一个从网站上搜集的数据的例子，</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es lp"><img src="../Images/8ee94f421a5115b1d2b1370606ee5995.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*jTh2NH63EohhKwuzpx5vWQ.png"/></div><figcaption class="jq jr et er es js jt bd b be z dx">Web scraped data that will be used for modeling</figcaption></figure><h1 id="a5a2" class="kj kk hi bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated">构建基于内容的推荐系统</h1><p id="d7c4" class="pw-post-body-paragraph if ig hi ih b ii lh ik il im li io ip iq lj is it iu lk iw ix iy ll ja jb jc hb bi translated">这种方法使用内容的属性来推荐相似的内容。它没有冷启动问题，因为它通过内容的属性或标签工作，如演员、流派或导演，以便新电影可以立即被推荐。例如，用户X喜欢《LOTR》、《星际迷航》电影(动作片、冒险片),那么我们的模型将向用户X推荐类似内容的电影，如《星球大战》等</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es lq"><img src="../Images/33243f11a89087f8eb2c0243600c1b9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/1*seBNtEqy_FGnkJzIHcPq-Q.png"/></div><figcaption class="jq jr et er es js jt bd b be z dx">Captions from offerzen.com</figcaption></figure><p id="7247" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">造型</strong></p><p id="b731" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">导入所有依赖项并加载抓取的数据。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es lp"><img src="../Images/986328644a8999e2e7dabe1e48c3c324.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*pX6zTjeF4Jeuei9gr9Bp1w.png"/></div></figure><p id="bb0c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将标题、导演、类型、描述连接成一个单一的特征。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es lp"><img src="../Images/d5c6400ac6ce2ae7534186d729cf4427.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*9li_srDgL7GINj4VjGzWaw.png"/></div></figure><p id="b4e6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这样做是因为我们的推荐系统不仅通过推荐相似类型的电影，而且还基于电影的演员、导演和情节的组合。</p><p id="b545" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下一步是矢量化该特征以计算相似性。</p><p id="aa0b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> TF-IDF矢量器</strong></p><p id="daf0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> TF(术语频率)是</strong>给定术语在文档中出现的次数。</p><pre class="jf jg jh ji fd lr ls lt lu aw lv bi"><span id="6e7e" class="lw kk hi ls b fi lx ly l lz ma">TF(t) = (Number of times term t appears in a document) / (Total number of terms in the document)</span></pre><p id="6620" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> IDF(逆文档频率)</strong>是对该术语在整个语料库中的重要性的度量。</p><pre class="jf jg jh ji fd lr ls lt lu aw lv bi"><span id="c566" class="lw kk hi ls b fi lx ly l lz ma">IDF(t) = log (Total number of documents / Number of documents containing the term t in it).</span></pre><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es mb"><img src="../Images/4ac0d4ad066e844cdaa5509f99371e5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:812/format:webp/1*UqtHXGvkwJYHhOVu9maaDw.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx">TF*IDF</figcaption></figure><p id="d36e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">选择TF-IDF的原因是因为它给不频繁的术语更多的权重，给频繁的术语更少的权重，这对我们的模型很重要。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es lp"><img src="../Images/fd1c9eef8406e4fa1355a63ef611593a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*xLMzlo15CQ9vDR-ApehZng.png"/></div></figure><p id="b826" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">余弦相似度</strong></p><p id="f9e0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下一步是计算电影之间的相似度。我们可以使用余弦相似度来计算两个向量之间的距离。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es mc"><img src="../Images/14408041c5f2717a7d51fe5c4fff1544.png" data-original-src="https://miro.medium.com/v2/resize:fit:930/format:webp/1*IkaOqNKtiHyHWl3Lik7dsg.png"/></div></figure><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es mc"><img src="../Images/67ab90cbbda83cd02b4be85452a0661b.png" data-original-src="https://miro.medium.com/v2/resize:fit:930/format:webp/1*RGoeSVUwO-17h1EN1NeU7Q.png"/></div></figure><p id="aab3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们需要编写一个逻辑，以电影标题作为输入，并根据余弦相似度返回前5个相似的电影。</p><p id="b54c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为此，我们可以创建一个函数来计算我们的输入与语料库中其他电影的相似性得分，然后按降序对得分进行排序，以获得具有最高相似性得分的前5部电影。这里，索引0在sim_scores变量中被丢弃，这样函数就不会返回与输入中输入的电影相同的电影。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es lp"><img src="../Images/34ea701149df5a41394c819373a212b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*vu4EHrUuLvkIlfvayb_Itg.png"/></div></figure><p id="e101" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">测试我们的推荐引擎</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es md"><img src="../Images/51b13f4054b41bbdb982ce17fc072bfa.png" data-original-src="https://miro.medium.com/v2/resize:fit:558/format:webp/1*4a69LQ7rfdJ8NLzBBxCdmg.png"/></div></figure><p id="7ff1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Pickle 是一个已经内置在Python中的序列化/反序列化模块:使用它我们可以将任意的Python对象(有一些例外)保存到一个文件中。一旦我们有了一个文件，我们就可以在不同的过程中从那里加载模型。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es lp"><img src="../Images/68e60eae2d64f68d5219c918c7cfb10d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*Zg-xeq-liv2nxDtwMGHeLA.png"/></div></figure><p id="1d2c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">建模的完整代码，</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="ln lo l"/></div></figure><h1 id="3c45" class="kj kk hi bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated">设计前端</h1><p id="6f27" class="pw-post-body-paragraph if ig hi ih b ii lh ik il im li io ip iq lj is it iu lk iw ix iy ll ja jb jc hb bi translated">现在我们已经完成了模型的构建，我们可以开始创建web应用程序了。</p><p id="6a16" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们的模型前端使用Streamlit。<a class="ae ju" href="https://www.streamlit.io/" rel="noopener ugc nofollow" target="_blank"> Streamlit </a>是一个开源的Python库，可以轻松地为机器学习和数据科学构建漂亮的定制web应用。</p><pre class="jf jg jh ji fd lr ls lt lu aw lv bi"><span id="a041" class="lw kk hi ls b fi lx ly l lz ma">pip install <strong class="ls hj">streamlit</strong></span></pre><p id="5c7d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">streamlit上已经有很多好的教程了，比如<a class="ae ju" href="https://towardsdatascience.com/streamlit-101-an-in-depth-introduction-fc8aad9492f2" rel="noopener" target="_blank">这个</a>。所以我不想详述我所有的过程。总的来说，我的目标是构建一个获取用户输入并推荐相似电影列表的前端。</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="ln lo l"/></div></figure><p id="cf42" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦你建立了前端，你可以在命令提示符下测试它。</p><p id="ccd1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">确保您位于包含所有文件的目录中，然后在cmd中键入以下命令</p><pre class="jf jg jh ji fd lr ls lt lu aw lv bi"><span id="ce9d" class="lw kk hi ls b fi lx ly l lz ma"><strong class="ls hj">streamlit run app.py</strong></span></pre><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es lp"><img src="../Images/1e3054b4164b5519a8bbd9006ce6417f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*B6jCCb5Ha_ZyoD2RcB818w.png"/></div></figure><h1 id="1162" class="kj kk hi bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated">将我们的模型容器化</h1><p id="9a95" class="pw-post-body-paragraph if ig hi ih b ii lh ik il im li io ip iq lj is it iu lk iw ix iy ll ja jb jc hb bi translated">什么是docker容器？</p><p id="d07f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一个<strong class="ih hj">容器</strong>是一种打包应用程序及其所有依赖项的软件，因此应用程序可以从一个计算环境可靠地运行到另一个计算环境，而<strong class="ih hj"> Docker </strong>是一种用于构建和管理容器的软件。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es md"><img src="../Images/9fa607f351f1c23f4cfe6aca21289fd2.png" data-original-src="https://miro.medium.com/v2/resize:fit:558/format:webp/1*mbAxo7W6CzDGeKYejce89w.png"/></div></figure><p id="46b9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为什么我们需要码头集装箱？</p><p id="38e5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您是否曾经遇到过这样的问题:您的代码在您的计算机上运行良好，但当您的朋友试图在他的计算机上运行相同的代码时，代码却无法运行？这个问题的答案是<strong class="ih hj">环境。环境包括编程语言和所有的库和依赖项。</strong></p><p id="ebf4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果我们可以创建一个可以转移到其他机器上的环境(例如，你朋友的电脑或者像GCP、AWS这样的云服务提供商)，我们就可以在任何地方重现结果。因此<strong class="ih hj">，容器</strong>是一种打包应用程序及其所有依赖项的软件，因此应用程序可以从一个计算环境可靠地运行到另一个计算环境。</p><p id="576f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了将我们的应用程序进行容器化部署，我们需要一个docker映像，它在运行时成为一个容器。使用包含一组指令的docker文件创建docker映像。该项目的docker文件如下所示:</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="ln lo l"/></div></figure><p id="206a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">为Kubernetes准备配置文件</strong></p><p id="2145" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">什么是Kubernetes？</p><p id="64aa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae ju" href="https://kubernetes.io/" rel="noopener ugc nofollow" target="_blank"> Kubernetes </a>是一个开源<a class="ae ju" href="https://blog.newrelic.com/engineering/container-orchestration-explained/" rel="noopener ugc nofollow" target="_blank">容器编排</a>平台，旨在自动化容器化应用的部署、扩展和管理。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es me"><img src="../Images/0ab33c98167d35d3d0b1475e7a43e37f.png" data-original-src="https://miro.medium.com/v2/resize:fit:450/format:webp/1*qZHIoB3Ra-EhMJMutzRDfQ.png"/></div></figure><p id="d373" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要在Kubernetes中部署我们的应用程序，我们需要某些配置文件。</p><p id="83ed" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一次部署。YAML是Kubernetes中的一个配置文件，允许您管理一组相同的pod。如果没有部署，您将需要手动创建、更新和删除一批pod。</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="ln lo l"/></div></figure><p id="3d8b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后，我们需要创建一个服务。YAML</p><p id="b8ef" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">服务配置文件用于允许对一组pod进行网络访问。</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="ln lo l"/></div></figure><h1 id="f998" class="kj kk hi bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated">在Google Kubernetes引擎中部署</h1><p id="dee5" class="pw-post-body-paragraph if ig hi ih b ii lh ik il im li io ip iq lj is it iu lk iw ix iy ll ja jb jc hb bi translated">什么是Google Kubernetes引擎？</p><p id="add0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">Google Kubernetes Engine(GKE)</strong>是一个针对Docker容器和容器集群的管理和编排系统，运行在Google的公共云服务中。Google Kubernetes引擎基于Kubernetes，Google的开源容器管理系统。</p><p id="a6bf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">其他选择还有<a class="ae ju" href="https://aws.amazon.com/eks/" rel="noopener ugc nofollow" target="_blank">亚马逊弹性库本内特服务(EKS) </a>和<a class="ae ju" href="https://azure.microsoft.com/en-us/services/kubernetes-service/" rel="noopener ugc nofollow" target="_blank">微软Azure库本内特服务</a>。</p><p id="cfb7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">GCP为新客户提供90天300美元的免费信贷，这对这个项目来说绰绰有余。</p><p id="22f5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤1: </strong>注册并登录GCP</p><p id="87fd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">登录到您的GCP控制台并创建一个新项目</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es mf"><img src="../Images/53a89d7cc721f5dde5b2bab19c2bed24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1108/format:webp/1*5o_7NbZwLkk8J11Djb3Agg.png"/></div></figure><p id="10ae" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">点击新建项目，用您喜欢的名称创建一个新项目，并记下<strong class="ih hj">项目id </strong></p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es lp"><img src="../Images/16a1db86d7c57c62e367ef6ceb40fcd1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*dYZB7HvjrPO8Ic7k8diU1A.png"/></div></figure><p id="5779" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第二步:</strong>导入项目代码</p><p id="43ec" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">单击控制台窗口右上角的“激活云壳”按钮打开云壳。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es mg"><img src="../Images/c7fb92b5a6f19a5e30675c6bb6d6c44f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1138/format:webp/1*HB-bQ6zF5J4teUnlG2MqPg.png"/></div></figure><p id="d060" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以下命令将帮助您克隆用于这个项目的GitHub库，或者您可以直接将源文件夹从您的计算机复制到GCP。</p><pre class="jf jg jh ji fd lr ls lt lu aw lv bi"><span id="3bf4" class="lw kk hi ls b fi lx ly l lz ma">git clone <a class="ae ju" href="https://github.com/Chandru-21/End-to-End-Movie-Recommendation-System-with-deployment-using-docker-and-kubernetes.git" rel="noopener ugc nofollow" target="_blank">https://github.com/Chandru-21/End-to-End-Movie-Recommendation-System-with-deployment-using-docker-and-kubernetes.git</a></span></pre><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es mh"><img src="../Images/729af49ad2d662e6729a091e05435d50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1236/format:webp/1*1uWfW_HQTLa6lW_5J6mFbA.png"/></div></figure><p id="0949" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">单击open editor选项，在GCP找到您的存储库。</p><p id="99e1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤3: </strong>构建docker映像</p><p id="bd20" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在构建docker映像之前，请确保您已经在您的服务帐户中启用了执行此项目所需的必要IAM权限，并记下您的服务帐户id。</p><p id="0e8e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">导航到您的项目文件夹，然后构建应用程序的docker映像，并通过执行以下命令对其进行标记以便上传:</p><pre class="jf jg jh ji fd lr ls lt lu aw lv bi"><span id="fcb1" class="lw kk hi ls b fi lx ly l lz ma">docker build -t gcr.io/${YOUR_PROJECT_ID}/movie_rs:latest .</span></pre><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es lp"><img src="../Images/187c7a6464c1ca2e80a25519b8277649.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*pbwB9ATVZ-pvI-Lv1E1KAQ.png"/></div></figure><p id="c0eb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以通过运行以下命令来检查可用的图像:</p><pre class="jf jg jh ji fd lr ls lt lu aw lv bi"><span id="5496" class="lw kk hi ls b fi lx ly l lz ma"><strong class="ls hj">docker </strong>images</span></pre><p id="c17f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤4: </strong>上传容器图像</p><p id="a3f9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">执行下面的代码将docker图像上传到google容器注册中心</p><pre class="jf jg jh ji fd lr ls lt lu aw lv bi"><span id="1419" class="lw kk hi ls b fi lx ly l lz ma">docker push gcr.io/${YOUR_PROJECT_ID}/ movie_rs:latest </span></pre><p id="acec" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤5: </strong>创建一个Kubernetes集群</p><p id="f7c8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一个<a class="ae ju" href="https://cloud.google.com/kubernetes-engine/docs/concepts/cluster-architecture" rel="noopener ugc nofollow" target="_blank">集群</a>由至少一个<em class="jd">控制平面</em>机器和多个称为<em class="jd">节点</em> : <a class="ae ju" href="https://cloud.google.com/compute/docs/instances/" rel="noopener ugc nofollow" target="_blank">计算引擎虚拟机</a>实例组成，这些实例运行必要的Kubernetes进程，使它们成为集群的一部分。</p><pre class="jf jg jh ji fd lr ls lt lu aw lv bi"><span id="d8cd" class="lw kk hi ls b fi lx ly l lz ma">gcloud container clusters create movie-rs — zone “us-west1-b” — machine-type “n1-standard-1” — num-nodes “1” — service-account ${YOUR_GOOGLE _SERVICEACCOUNT}</span></pre><p id="c592" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤6: </strong>应用配置文件</p><p id="1fa6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">导航到GCP的容器注册表，单击您创建的容器，并复制其路径。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es mi"><img src="../Images/0cfc3e4d705586b6de5f14b093025e17.png" data-original-src="https://miro.medium.com/v2/resize:fit:898/format:webp/1*4HiBtik--qJ7gM3l0sP6HQ.png"/></div></figure><p id="ec9a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">确保部署中存在复制的路径。YAML文件</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es lp"><img src="../Images/607b91becb07ccb53f45b826f9f95baf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*erNIP8yYx-eQ7K_CBEi8Aw.png"/></div></figure><p id="518f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">执行以下命令将配置应用到Kubernetes集群</p><pre class="jf jg jh ji fd lr ls lt lu aw lv bi"><span id="8c7d" class="lw kk hi ls b fi lx ly l lz ma">kubectl apply -f deployment.yaml</span></pre><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es lp"><img src="../Images/519bda259a27f8560c524d28ae7b6412.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*UEVLNzzxhIen2dt5ui1R5Q.png"/></div></figure><p id="403b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在执行服务。YAML配置文件，并等待几分钟，直到<strong class="ih hj">我们的外部IP </strong>生成。</p><pre class="jf jg jh ji fd lr ls lt lu aw lv bi"><span id="e88e" class="lw kk hi ls b fi lx ly l lz ma">kubectl apply -f service.yaml</span></pre><p id="aa39" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> kubectl获取服务，</strong>命令检查服务的状态</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es lp"><img src="../Images/3aed849c36bcd4ae33f45095b1179dca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*AuDDAiVd_IYSX6dmTAp6kg.png"/></div></figure><p id="a390" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第七步:</strong>通过公共网址访问应用程序</p><p id="77f8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将外部IP粘贴到您选择的任何浏览器中，然后<strong class="ih hj">瞧</strong>您就可以从头开始构建自己的电影推荐系统了。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es lp"><img src="../Images/63f4eb7b9d6ca0ae24fa11ba89d34c7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*gnWJh_5299XThA69Qk2CUg.png"/></div><figcaption class="jq jr et er es js jt bd b be z dx">Recommendations for the movie Wrath of Man</figcaption></figure><p id="36ca" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此应用程序的<a class="ae ju" href="http://35.230.8.59/" rel="noopener ugc nofollow" target="_blank">链接</a></p><p id="02c1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">注意:</strong>当您访问该链接时，它可能会从公共地址中删除，以限制资源消耗。</p><p id="1aaf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Github链接获取本文中使用的所有代码和文件，</p><div class="mj mk ez fb ml mm"><a href="https://github.com/Chandru-21/End-to-End-Movie-Recommendation-System-with-deployment-using-docker-and-kubernetes" rel="noopener  ugc nofollow" target="_blank"><div class="mn ab dw"><div class="mo ab mp cl cj mq"><h2 class="bd hj fi z dy mr ea eb ms ed ef hh bi translated">GitHub …</h2><div class="mt l"><h3 class="bd b fi z dy mr ea eb ms ed ef dx translated">第一步:数据抓取数据是从IMDB网站上抓取的(使用美人汤)。参考网页抓取_new.py…</h3></div><div class="mu l"><p class="bd b fp z dy mr ea eb ms ed ef dx translated">github.com</p></div></div><div class="mv l"><div class="mw l mx my mz mv na jo mm"/></div></div></a></div><h1 id="9e60" class="kj kk hi bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated">结论</h1><p id="5708" class="pw-post-body-paragraph if ig hi ih b ii lh ik il im li io ip iq lj is it iu lk iw ix iy ll ja jb jc hb bi translated">唷！这是一个很长的帖子，我希望我没有在中间失去很多人。我的目的只是演示创建一个端到端的电影推荐系统所需的基本步骤，而不是深入到每一个细节。</p><p id="6f5a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">非常感谢你花时间阅读这篇文章，我希望这篇文章对你有所帮助。如果您有任何疑问、澄清或建议，请告诉我。下次再见，保重！</p></div></div>    
</body>
</html>