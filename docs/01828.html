<html>
<head>
<title>From REST to GraphQL</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从REST到GraphQL</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/from-rest-to-graphql-ffa97fba9f63?source=collection_archive---------14-----------------------#2021-04-25">https://medium.com/geekculture/from-rest-to-graphql-ffa97fba9f63?source=collection_archive---------14-----------------------#2021-04-25</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><h1 id="1fa6" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">关于GraphQL</h1><p id="7547" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">GraphQL是一种用于API的查询语言，它支持声明性数据提取，使客户端能够准确指定API所需的数据。随着时间的推移，API的发展变得更加容易。</p><p id="38c4" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">GraphQL和数据库没有任何关系。它不是SQL的替代品，也不是全新的ORM。</p><p id="14b8" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">在我们的组织中，我们从一开始就使用REST来构建API，这种做法非常有效。但作为一家金融科技公司，我们的要求发展非常迅速。</p><h1 id="61b0" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">REST与GraphQL的数据获取</h1><p id="67b5" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">使用REST API，您通常会通过访问多个端点来收集数据。在本例中，这些可以是/users/ <id>端点来获取初始用户数据。其次，可能会有一个/users/ <id> /posts端点返回用户的所有帖子。第三个端点将是/users/ <id> /followers，它返回每个用户的关注者列表。</id></id></id></p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es kg"><img src="../Images/f643c052492a3cc6ba0d9bd48e5b87c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*24uvIsNSYpbEDBop"/></div></div></figure><p id="4fb8" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">使用REST，您必须向不同的端点发出三个请求来获取所需的数据。由于端点会返回不需要的额外信息，所以您还会<em class="ks">过度获取</em>。</p><p id="80a0" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">另一方面，在GraphQL中，您只需向GraphQL服务器发送一个包含具体数据需求的查询。然后，服务器用一个满足这些要求的JSON对象来响应。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es kt"><img src="../Images/68745ddcf4f3c60e9566aebf190ef820.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*OEal7AUPIb2DM_tc"/></div></div></figure><p id="8cb5" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">使用GraphQL，客户机可以在一个<em class="ks">查询</em>中准确地指定它需要的数据。注意，服务器响应的<em class="ks">结构</em>完全遵循查询中定义的嵌套结构。</p><p id="2dac" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">我们必须向不同的外部供应商公开API，我们正在构建我们的移动应用程序。虽然这两个都可以由REST APIs完成，但GraphQL似乎是一个更好的选择，原因如下</p><h1 id="4274" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">不再出现过度抓取和抓取不足</h1><p id="e27c" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">REST最常见的一个问题是提取过量和不足。这是因为客户端下载数据的唯一方式是点击返回固定数据结构的端点。很难设计API来为客户提供他们确切的数据需求。</p><p id="fae4" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">过量提取意味着返回的数据比需要的多，从而增加了网络上的数据传输，使应用程序变慢。</p><p id="223f" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">提取不足意味着没有返回所有需要的数据，需要发出更多的请求来获取所需的数据。因此增加了响应时间。</p><p id="4b77" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">在慢速网络中，这些延迟变得更加明显，许多移动应用程序用户可能就是这种情况。</p><h1 id="6447" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">外地一级的授权</h1><p id="47c6" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">REST APIs为所有授权用户提供固定的响应。使用GraphQL，您可以在字段级别获得授权。对于外部供应商的API来说，这是很有帮助的，这样他们就不能获取任何未经授权的数据。对于REST，我们需要构建多个API来限制这一点。</p><h1 id="bb0c" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">后端的深入分析</h1><p id="54b2" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">GraphQL允许您对后端请求的数据有细粒度的了解。由于每个客户端都明确指定了自己感兴趣的信息，因此可以深入了解可用数据的使用情况。例如，这可以有助于发展API，并减少不再被任何客户端请求的特定字段。</p><p id="1dcf" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">使用GraphQL，您还可以对服务器处理的请求进行底层性能监控。GraphQL使用<em class="ks">解析器函数</em>的概念来收集客户端请求的数据。检测和测量这些解析器的性能可以提供关于系统瓶颈的重要信息。</p><h1 id="652e" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">自我记录</h1><p id="387a" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">每个GraphQL API都符合一个“模式”:图形数据模型和客户机可以进行的查询类型。这允许社区构建许多很酷的工具来探索和可视化您的API，或者创建IDE插件来自动完成您的GraphQL查询，甚至执行“codegen”。</p><h1 id="5343" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">实现GraphQL</h1><p id="4f19" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">说了这么多，如果您已经构建了基础设施，那么将所有API从REST迁移到GraphQL是说起来容易做起来难。我们的情况也是如此。实际上，REST和GraphQL之间没有非此即彼的选择，它们可以共存，我们也是这样做的。</p><p id="d891" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">有两种方法可以从现有的REST APIs中创建GraphQL APIs，并使它们都就位。它们都有各自的优点和缺点，如下所述。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es ku"><img src="../Images/b41fde091c5929cae9ccdbf0a28c19fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*MlhymhKIInRFk-vf"/></div></div></figure><p id="7c82" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">请继续关注更多关于如何实现它的博客，以及一些高级特性，如Oauth和/或JWT的字段级授权。以及所有请求、响应和延迟的集中记录，以便在需要时用于各种类型的分析和可视化。</p><p id="5d46" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">希瓦姆·阿格拉瓦尔</strong></p><p id="7108" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">(shivamagrawal1129@gmail.com)</p><p id="ba9a" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">高级软件工程师</strong></p><p id="0fdc" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj"> Indifi技术公司</strong></p></div></div>    
</body>
</html>