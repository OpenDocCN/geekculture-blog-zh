<html>
<head>
<title>What is Lazy Loading and How to do Lazy Loading in Angular 12?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">什么是懒加载，Angular 12怎么做懒加载？</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/lazy-loading-in-angular-12-3038b434fcf3?source=collection_archive---------5-----------------------#2021-07-30">https://medium.com/geekculture/lazy-loading-in-angular-12-3038b434fcf3?source=collection_archive---------5-----------------------#2021-07-30</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/52b04a52820feaa2ed3fe0f0014d6c3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*txu9eFD2HVnzW6mMUze-Bw.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Lazy Loading in Angular (Bhanu Maniktahla)</figcaption></figure><p id="4e65" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">延迟加载并不是一个新概念。自从我们JavaScripter开始开发库和框架以来，它就存在了。在这篇文章中，我们将从角度探索<br/>延迟加载，我们将创建一个非常简单的web应用程序来实现延迟加载的概念。</p><p id="7042" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">首先要做的事。什么是懒装。我们的单页应用程序(SPA)主要以两种不同的方式加载到浏览器中。</p><ul class=""><li id="3eeb" class="js jt hi iw b ix iy jb jc jf ju jj jv jn jw jr jx jy jz ka bi translated">急切地装载</li><li id="4d84" class="js jt hi iw b ix kb jb kc jf kd jj ke jn kf jr jx jy jz ka bi translated">延迟加载</li></ul><p id="64ac" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在<strong class="iw hj"> <em class="kg">急切加载</em> </strong>中，所有的组件/模块被一次加载，因此它们增加了网络负载。对于小型应用程序来说，这是一个很好的方法，但是当应用程序增长时，它会降低加载速度，严重影响页面的性能。在<strong class="iw hj"> <em class="kg">延迟加载的</em> </strong>应用中，所有页面不会一次加载，而是按需加载。每当请求一个特定的路由时，该组件或模块的包就作为一个块加载。通过这种方式，应用程序的性能得到了显著增强。</p><p id="83d5" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">让我们看一个简单的例子。我们有一个Angular应用程序，当我们点击它的URL(比如说— Localhost:4200)时就会加载它。现在，当我们点击URL加载具有多个页面的应用程序时，很有可能应用程序中的一些页面占用了大量带宽&amp;内容，并且可能是用户现在最不需要的。我们从中了解到什么。不知何故，我们在某处犯了一个错误。我们正在加载所有无用的页面(有些页面也很重)，但是这会影响应用程序的加载时间和响应时间。</p><p id="77e6" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">我们如何避免？</strong><br/><br/>angular中有一个非常复杂的特性，可以帮助我们实现延迟加载。惰性加载允许我们不在点击应用程序时加载应用程序的某些部分或组件，而是当我们点击该组件或<br/>时，仅当用户需要/要求时才加载。<br/> <br/>例如，假设我们有一个应用程序，该应用程序的一个页面是一个图片库，这表明它是一个沉重的页面，将需要更多的带宽来加载它。如果不延迟加载，当我们点击应用程序时，这个页面也将被加载到用户的浏览器中，即使有可能它从来没有被要求过，当然这将花费更多的时间。既然可以避免，为什么还要增加加载时间呢？？？<br/> <br/>该页面只有在用户点击页面时才会加载。<br/>让我们看看惰性加载概念的实际应用。考虑具有三条路线的示例:<br/> i)书店<br/> ii)电子商店<br/> iii)家庭<br/>我们将使书店延迟加载，电子组件将首先被急切地加载，稍后我们将把它改变为延迟加载，以便<br/>如果你有一个具有某些组件的应用程序，你可以将它们改变为延迟加载。</p><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="d019" class="kq kr hi km b fi ks kt l ku kv"> ng new lazyLoading // create a new Angular application<br/> <br/> cd lazyLoading // step into the application<br/> <br/> ng g m books --route books -m app<br/> </span></pre><p id="3ef8" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">app.component.html</strong></p><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="0277" class="kq kr hi km b fi ks kt l ku kv"> &lt;button routerLink='books'&gt; Books Shop &lt;/button&gt;<br/> &lt;button routerLink="electronics"&gt;Electronics Shop &lt;/button&gt;<br/> &lt;button routerLink='/'&gt; Home &lt;/button&gt;<br/> &lt;router-outlet&gt;&lt;/router-outlet&gt;</span></pre><p id="ffac" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj"> book.module.ts : </strong></p><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="d5b9" class="kq kr hi km b fi ks kt l ku kv"><br/> import { NgModule } from '@angular/core';<br/> import { CommonModule } from '@angular/common';<br/> <br/> import { BooksRoutingModule } from './books-routing.module';<br/> import { BooksComponent } from './books.component';<br/> <br/> <br/> @NgModule({<br/>   declarations: [<br/>     BooksComponent<br/>   ],<br/>   imports: [<br/>     CommonModule,<br/>     BooksRoutingModule<br/>   ]<br/> })<br/> export class BooksModule { }</span></pre><p id="bad3" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj"> books-routing.module.ts </strong></p><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="a5e2" class="kq kr hi km b fi ks kt l ku kv"> import { NgModule } from '@angular/core';<br/> import { RouterModule, Routes } from '@angular/router';<br/> import { BooksComponent } from './books.component';<br/> <br/> const routes: Routes = [{ path: 'books', component: BooksComponent }];<br/> <br/> @NgModule({<br/>   imports: [RouterModule.forChild(routes)],<br/>   exports: [RouterModule]<br/> })<br/> export class BooksRoutingModule { }</span></pre><p id="b373" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">应用模块ts </strong></p><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="3d24" class="kq kr hi km b fi ks kt l ku kv">import { NgModule } from '@angular/core';<br/> import { BrowserModule } from '@angular/platform-browser';<br/> <br/> import { AppRoutingModule } from './app-routing.module';<br/> import { AppComponent } from './app.component';<br/> import { BooksModule } from './books/books.module';<br/> <br/> <br/> <br/> @NgModule({<br/>   declarations: [<br/>     AppComponent,<br/>  <br/>   ],<br/>   imports: [<br/>     BrowserModule,<br/>     AppRoutingModule,<br/>     BooksModule<br/>   ],<br/>   providers: [],<br/>   bootstrap: [AppComponent]<br/> })<br/> export class AppModule { }</span></pre><p id="1793" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj"> app.routing.module.ts </strong></p><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="dad9" class="kq kr hi km b fi ks kt l ku kv"> import { NgModule } from '@angular/core';<br/> import { RouterModule, Routes } from '@angular/router';<br/> <br/> import { HomeComponent } from './home/home.component';<br/> <br/> const routes: Routes = [{ path: 'books', loadChildren: () =&gt;          import('./books/books.module').then(m =&gt; m.BooksModule) }];<br/> <br/> @NgModule({<br/>   imports: [RouterModule.forRoot(routes)],<br/>   exports: [RouterModule]<br/> })<br/> export class AppRoutingModule { }</span></pre><p id="19fb" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在，让我们通过生成命令再创建2个组件:</p><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="d0b0" class="kq kr hi km b fi ks kt l ku kv"> ng generate component electronics<br/> ng generate component home</span></pre><p id="6d64" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在，我们首先将家庭和电子设备添加为急切加载的组件<br/>，然后将电子设备设置为延迟加载。</p><p id="fac0" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj"> app-routing.module.ts </strong></p><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="a4e1" class="kq kr hi km b fi ks kt l ku kv">import { NgModule } from '@angular/core';<br/> import { RouterModule, Routes } from '@angular/router';<br/> <br/> import { HomeComponent } from './home/home.component';<br/> <br/> const routes: Routes = [{ path: 'books', loadChildren: () =&gt; import('./books/books.module').then(m =&gt; m.BooksModule) },<br/> <br/> <br/>  {<br/>    path:'electronics',<br/>    component: ElectronicsComponent<br/>  },<br/> {<br/>   path:'',<br/>   component: HomeComponent<br/> }];<br/> <br/> @NgModule({<br/>   imports: [RouterModule.forRoot(routes)],<br/>   exports: [RouterModule]<br/> })<br/> export class AppRoutingModule { }</span></pre><p id="c4ca" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj"> app.module.ts </strong></p><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="b0ac" class="kq kr hi km b fi ks kt l ku kv">import { NgModule } from '@angular/core';<br/> import { BrowserModule } from '@angular/platform-browser';<br/> <br/> import { AppRoutingModule } from './app-routing.module';<br/> import { AppComponent } from './app.component';<br/> import { BooksModule } from './books/books.module';<br/>  import { ElectronicsComponent } from './electronics/electronics/electronics.component';<br/> import { HomeComponent } from './home/home.component';<br/> <br/> <br/> @NgModule({<br/>   declarations: [<br/>     AppComponent,<br/>     ElectronicsComponent,<br/>     HomeComponent<br/>   ],<br/>   imports: [<br/>     BrowserModule,<br/>     AppRoutingModule,<br/>     BooksModule<br/>   ],<br/>   providers: [],<br/>   bootstrap: [AppComponent]<br/> })<br/> export class AppModule { }</span></pre><p id="f761" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">让我们创造一个新的模块:电子学</p><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="d5c4" class="kq kr hi km b fi ks kt l ku kv">ng generate module electronics</span></pre><p id="3cb9" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">新创建的电子模块的代码应该是这样的。</p><p id="d153" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">电子模块ts </strong></p><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="fb6f" class="kq kr hi km b fi ks kt l ku kv"> import { NgModule } from '@angular/core';<br/> import { CommonModule } from '@angular/common';<br/> import { ElectronicsComponent } from './electronics/electronics.component';<br/> <br/> import { RouterModule, Routes } from '@angular/router';<br/> <br/> const routes: Routes = [{ path: 'electronics', component: ElectronicsComponent }];<br/> @NgModule({<br/>   declarations: [<br/>     ElectronicsComponent<br/>   ],<br/>   imports: [<br/>     CommonModule,<br/>     RouterModule.forChild(routes)<br/>   ]<br/> })<br/> export class ElectronicsModule { }</span></pre><p id="4a1f" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在让我们在app.routing.module中延迟加载电子组件。</p><p id="cfcb" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj"> app.routing.module.ts </strong></p><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="b834" class="kq kr hi km b fi ks kt l ku kv">import { NgModule } from '@angular/core';<br/> import { RouterModule, Routes } from '@angular/router';<br/> import { HomeComponent } from './home/home.component';<br/> <br/> const routes: Routes = [{ path: 'books', loadChildren: () =&gt; import('./books/books.module').then(m =&gt; m.BooksModule) },<br/> { path: 'electronics', loadChildren: () =&gt; import('./electronics/electronics.module').then(m =&gt; m.ElectronicsModule) },<br/>  <br/> {<br/>   path:'',<br/>   component: HomeComponent<br/> }];<br/> <br/> @NgModule({<br/>   imports: [RouterModule.forRoot(routes)],<br/>   exports: [RouterModule]<br/> })<br/> export class AppRoutingModule { }</span></pre><p id="21d1" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这是一个非常基本的初学者友好的惰性加载概念的介绍。</p></div></div>    
</body>
</html>