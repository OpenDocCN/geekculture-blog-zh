<html>
<head>
<title>The curious and ambiguous case of string slicing in Python (3)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中奇怪而模糊的字符串切片案例(3)</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/the-curious-and-ambiguous-case-of-string-slicing-in-python-3-ea61671498eb?source=collection_archive---------16-----------------------#2021-07-25">https://medium.com/geekculture/the-curious-and-ambiguous-case-of-string-slicing-in-python-3-ea61671498eb?source=collection_archive---------16-----------------------#2021-07-25</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/e55f0ee15a8d7257f0d6fe4beaacf81c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1174/format:webp/1*44XyT4RGqg39aLckWp1vkA.png"/></div></figure><p id="dad8" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">当你深入某些概念时，它们往往会让你困惑很多次，但也会增加你的兴奋感。Python字符串切片曾经是这样一个概念，就其执行行为而言，它有许多隐藏的秘密，很容易使许多人困惑。</p><p id="940b" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在这篇文章中，我将讨论python中字符串切片的多种情况及其所有情况下的执行行为。我会根据需要添加代码片段，并分享我的Google Colab笔记本供人们尝试。</p></div><div class="ab cl jk jl gp jm" role="separator"><span class="jn bw bk jo jp jq"/><span class="jn bw bk jo jp jq"/><span class="jn bw bk jo jp"/></div><div class="hb hc hd he hf"><h1 id="3420" class="jr js hi bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">让我们开始吧Python中的字符串</h1><p id="2487" class="pw-post-body-paragraph im in hi io b ip kp ir is it kq iv iw ix kr iz ja jb ks jd je jf kt jh ji jj hb bi translated">切片的意思是从某物上切下一部分。在python中，字符串可以被视为一个数组，其中字符串的每个字符都有一个索引位置。让我们看看下面的代码片段及其表示</p><pre class="ku kv kw kx fd ky kz la lb aw lc bi"><span id="8dbf" class="ld js hi kz b fi le lf l lg lh">str  = "Welcome to my blog"</span></pre><p id="53dd" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">让我们看看上面的字符串在Python中是如何表示的</p><figure class="ku kv kw kx fd ij er es paragraph-image"><div class="er es if"><img src="../Images/e55f0ee15a8d7257f0d6fe4beaacf81c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1174/format:webp/1*44XyT4RGqg39aLckWp1vkA.png"/></div><figcaption class="li lj et er es lk ll bd b be z dx">Index based representation of a string in Python</figcaption></figure><p id="8006" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">上面的图片显示了python中有两种类型的索引模式</p><ul class=""><li id="0108" class="lm ln hi io b ip iq it iu ix lo jb lp jf lq jj lr ls lt lu bi translated">正常索引-从0开始，到17结束</li><li id="7ea3" class="lm ln hi io b ip lv it lw ix lx jb ly jf lz jj lr ls lt lu bi translated">负索引—从-1(从字符串末尾)开始，到字符串开头(-18)结束</li></ul><p id="66e4" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在让我们做一些非常基本的事情，如下图所示</p><pre class="ku kv kw kx fd ky kz la lb aw lc bi"><span id="a16e" class="ld js hi kz b fi le lf l lg lh">str = "Welcome to my blog"<br/>print(str[0]) #prints W<br/>print(str[1]) #prints e </span></pre><p id="139a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">上述代码博客将str视为一个列表，并在索引位置0和1打印字符</p><h1 id="6022" class="jr js hi bd jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk me km kn ko bi translated">Python中的字符串切片入门</h1><p id="d5a2" class="pw-post-body-paragraph im in hi io b ip kp ir is it kq iv iw ix kr iz ja jb ks jd je jf kt jh ji jj hb bi translated">切片遵循以下示例给出的语法</p><pre class="ku kv kw kx fd ky kz la lb aw lc bi"><span id="b37c" class="ld js hi kz b fi le lf l lg lh">str[start_index : end_index : increment]</span></pre><p id="dfe7" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">让我们看看上面的字符串的基本解释</p><figure class="ku kv kw kx fd ij er es paragraph-image"><div class="er es if"><img src="../Images/e55f0ee15a8d7257f0d6fe4beaacf81c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1174/format:webp/1*44XyT4RGqg39aLckWp1vkA.png"/></div></figure><pre class="ku kv kw kx fd ky kz la lb aw lc bi"><span id="b8a8" class="ld js hi kz b fi le lf l lg lh">str = "Welcome to my blog"<br/>print(str[0:7])</span></pre><p id="1327" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">程序的输出是<strong class="io hj"> <em class="mf"> Welcome </em> </strong>，可以解释如下-</p><ul class=""><li id="2d24" class="lm ln hi io b ip iq it iu ix lo jb lp jf lq jj lr ls lt lu bi translated">起始索引= 0，即“W”</li><li id="f2a1" class="lm ln hi io b ip lv it lw ix lx jb ly jf lz jj lr ls lt lu bi translated">结束索引= 7 — 1 = 6(结束索引总是比提到的索引小一)</li><li id="84f3" class="lm ln hi io b ip lv it lw ix lx jb ly jf lz jj lr ls lt lu bi translated">增量= 1(未提及时，默认增量为1)</li></ul><p id="72a2" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在让我们看一个增量值的例子</p><pre class="ku kv kw kx fd ky kz la lb aw lc bi"><span id="c8cf" class="ld js hi kz b fi le lf l lg lh">str = "Welcome to my blog"<br/>print(str[0:10:2])</span></pre><p id="e295" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">上面截取的代码将以2步打印<strong class="io hj"> Wloet </strong></p><h1 id="9a79" class="jr js hi bd jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk me km kn ko bi translated"><strong class="ak">现在让我们看几个负指数的例子</strong></h1><figure class="ku kv kw kx fd ij er es paragraph-image"><div class="er es if"><img src="../Images/e55f0ee15a8d7257f0d6fe4beaacf81c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1174/format:webp/1*44XyT4RGqg39aLckWp1vkA.png"/></div></figure><pre class="ku kv kw kx fd ky kz la lb aw lc bi"><span id="a676" class="ld js hi kz b fi le lf l lg lh">"""<br/>Start index = -15 ('c')<br/>End index = -9 - (1) = -10<br/>increment with  = 1 default)<br/>"""<br/>print(str[-15:-9])<br/>#Output - come t</span><span id="119a" class="ld js hi kz b fi mg lf l lg lh">"""<br/>Start index = -9 ('o')<br/>End index = -15 - 1 = -16 <br/>increment with  = 1 (default)<br/>"""</span><span id="b3bb" class="ld js hi kz b fi mg lf l lg lh">print(str[-9:-15])<br/>#Output - Prints nothing as start index is larger than end index - -9&gt;-15 in mathematics </span></pre><p id="45f4" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">上面的代码片段不打印任何内容，因为开始索引大于结束索引，解析从左到右进行</p><figure class="ku kv kw kx fd ij er es paragraph-image"><div class="er es if"><img src="../Images/e55f0ee15a8d7257f0d6fe4beaacf81c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1174/format:webp/1*44XyT4RGqg39aLckWp1vkA.png"/></div></figure><p id="e9a3" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在让我们试着加-1作为一个增量或步长</p><pre class="ku kv kw kx fd ky kz la lb aw lc bi"><span id="2cf7" class="ld js hi kz b fi le lf l lg lh">"""<br/>Start index = -9 ('o')<br/>End index = -15 - 1 = -16 <br/>increment with  = -1 <br/>"""<br/>print(str[-9:-15:-1])</span><span id="fa8c" class="ld js hi kz b fi mg lf l lg lh">#Output = ot emo</span></pre><p id="f004" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">即使开始索引(-9)大于结束索引(-14)，上面的代码片段仍然有效。原因是-1现在改变了字符串解析的方向，使python从右向左(负方向)解析和读取字符串</p><p id="ee05" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">是-步长值也指示解析的方向。如果是负数(-1，-2，-5等等。)，它会强制python从右向左开始读取字符串。如果是正的(1，2，5等。).它将强制python从左向右读取字符串，这也是默认行为</p><p id="cfdd" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">让我知道涵盖另一个例子如下</p><pre class="ku kv kw kx fd ky kz la lb aw lc bi"><span id="f3ce" class="ld js hi kz b fi le lf l lg lh">"""<br/>Start index = 8 ('t')<br/>End index = - 1 = 'g'<br/>increment with = 1<br/>"""</span><span id="d0cb" class="ld js hi kz b fi mg lf l lg lh">print(str[8:-1:1])</span><span id="b7e2" class="ld js hi kz b fi mg lf l lg lh">#Output - to my blo</span></pre><p id="187f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">上面的代码片段如下所示</p><ul class=""><li id="83c0" class="lm ln hi io b ip iq it iu ix lo jb lp jf lq jj lr ls lt lu bi translated">开始索引大于结束索引(8 &gt; -1)</li><li id="1d8c" class="lm ln hi io b ip lv it lw ix lx jb ly jf lz jj lr ls lt lu bi translated">通常我们用-1减去结束索引。在end-index = -1的情况下不会发生这种情况，因此结束位置变为-1。总是跳过结束位置值</li></ul><h1 id="8425" class="jr js hi bd jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk me km kn ko bi translated">结论</h1><p id="ec9d" class="pw-post-body-paragraph im in hi io b ip kp ir is it kq iv iw ix kr iz ja jb ks jd je jf kt jh ji jj hb bi translated">有许多用例需要涵盖，在这篇博文中不可能写出来。我将分享一个工作的Google Colab笔记本，让人们看到许多其他有趣的组合和结果，但这里是我对字符串切片行为的结论-</p><ul class=""><li id="fe6d" class="lm ln hi io b ip iq it iu ix lo jb lp jf lq jj lr ls lt lu bi translated"><strong class="io hj">增量值决定解析的方向</strong> —切片中提到的增量运算符，例如<strong class="io hj"> <em class="mf"> `str[4:9:2]` </em> </strong> 2，如果这个片段有方向。如果是正数，它将从左向右移动解析逻辑；如果是负数，<strong class="io hj"> <em class="mf"> `str[4:9:-2]` </em> </strong>它将从右向左移动解析逻辑</li><li id="b4f1" class="lm ln hi io b ip lv it lw ix lx jb ly jf lz jj lr ls lt lu bi translated">如果起始索引小于结束索引，它将根据字符串内容完美地打印出来—<strong class="io hj"><em class="mf">` str[5:10]`</em></strong>根据字符串内容也能很好地工作</li><li id="ba93" class="lm ln hi io b ip lv it lw ix lx jb ly jf lz jj lr ls lt lu bi translated">如果开始索引大于结束索引，那么它将依赖于增量运算符<strong class="io hj"><em class="mf">` str[10:5:1]`</em></strong>将不打印任何内容，因为1是强制从左向右解析的增量。如果它是<strong class="io hj"><em class="mf">` str[10:5:-1]`</em></strong>它工作正常，并将打印为now -1增量将强制从右向左解析</li><li id="3ef0" class="lm ln hi io b ip lv it lw ix lx jb ly jf lz jj lr ls lt lu bi translated">-1作为结束索引<strong class="io hj"><em class="mf">` str[8:-1]`</em></strong>——-1将始终替换字符串的结束字符索引，因此将正常工作。</li><li id="0ea0" class="lm ln hi io b ip lv it lw ix lx jb ly jf lz jj lr ls lt lu bi translated">如果它是作为结束索引的任何其他负数，那么它将作为end-index-1工作，例如<strong class="io hj"><em class="mf">` str[8:-9]`</em>`<em class="mf">` str[8:-9—(1)]`</em>`</strong>=<strong class="io hj"><em class="mf">` str[8:-10]`</em></strong>然后将依赖于递增运算符来确定解析方向</li></ul><h1 id="0922" class="jr js hi bd jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk me km kn ko bi translated">链接到我的Google Colab笔记本</h1><div class="mh mi ez fb mj mk"><a href="https://colab.research.google.com/drive/1sEdXEi5sNxYSjnBMFo_jP_bi2lnRkVP0?usp=sharing" rel="noopener  ugc nofollow" target="_blank"><div class="ml ab dw"><div class="mm ab mn cl cj mo"><h2 class="bd hj fi z dy mp ea eb mq ed ef hh bi translated">谷歌联合实验室</h2><div class="mr l"><h3 class="bd b fi z dy mp ea eb mq ed ef dx translated">Python字符串切片有一些有趣的行为和组合，这本笔记本肯定会让你深入了解它的行为colab.research.google.com</h3></div></div><div class="ms l"><div class="mt l mu mv mw ms mx ik mk"/></div></div></a></div></div></div>    
</body>
</html>