<html>
<head>
<title>How to Use Braintree Drop-In, Google Pay, and ThreeDSecure on Android</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Android上使用Braintree插件、Google Pay和ThreeDSecure</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/how-to-use-braintree-drop-in-google-pay-and-threedsecure-on-android-2f8c710abb5f?source=collection_archive---------21-----------------------#2021-05-08">https://medium.com/geekculture/how-to-use-braintree-drop-in-google-pay-and-threedsecure-on-android-2f8c710abb5f?source=collection_archive---------21-----------------------#2021-05-08</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/9869cd9e96f41a43b4817716308b09d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*McHcrAq88haRgJwu"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Photo by <a class="ae iu" href="https://unsplash.com/@mattykwong1?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Matthew Kwong</a> on <a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="9105" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">将Google Pay和ThreeDSecure与Braintree插件UI一起使用会返回CardNonce，而不是GooglePaymentCardNonce。这是解决办法</p><p id="0b5f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们最近接受了一项任务，在我们的一个应用程序上使用Braintree插件UI实现新的支付集成。然而，我们在使用Google Pay请求ThreeDSecure时遇到了一个问题。</p><p id="186f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">ThreeDSecure为在线信用卡和借记卡交易提供了额外的安全层，如果您正在处理卡支付，这是一个基本的协议。Braintree提供了一种简单的方法来实现卡支付以及与ThreeDSecure的集成。它还提供了一种同样简单的方式来实现Google Pay。</p><h1 id="3985" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">Google Pay需要三重安全吗？</h1><p id="251d" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">有两种类型的卡可以与Google Pay一起使用，PAN卡(非网络令牌化的标准信用卡)和DPAN卡(网络令牌化的卡，具有生成的带有设备特定账号的虚拟卡)。ThreeDSecure不适用于DPAN卡，因为它们已经被认为是安全的。但是，当使用PAN卡时，您需要实现它。Braintree插件UI会检测卡的类型，如果它检测到PAN卡并且您已经请求了ThreeDSecure，它会自动处理这个实现。您可以使用下面的Kotlin代码来实现这一点:</p><figure class="kw kx ky kz fd ij"><div class="bz dy l di"><div class="la lb l"/></div></figure><p id="2b2a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">强烈建议您将ThreeDSecure与PAN卡一起使用，以提高它们的安全性。</p><h1 id="3d04" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">我们做了什么？</h1><p id="dd4b" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">我们选择了用户明确填写他们的详细信息(如电子邮件和地址)的场景，然后我们可以使用这些信息来授权支付。我们以此为契机，衡量了在iOS上使用Apple Pay的“快速结账”转换率(因为Apple Pay不需要三次安全支付)，以了解摆脱嵌入式用户界面是否值得。我们预计转化率将会提高，而且我们也预测转化率会提高。</p><p id="d2de" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">总而言之，Braintree插件UI使用起来极其简单。但是，您可能必须在解决方案的灵活性上做出妥协。希望这篇博文能帮助面临类似情况的人，并在实施ThreeDSecure和GooglePay时节省他们的时间。</p><h1 id="ab99" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">哪里出了问题？</h1><p id="75ee" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">不幸的是，我们遇到了一个问题，在使用Google Pay完成ThreeDSecure后，返回类型。通常情况下，使用Google pay完成支付后的返回类型是GooglePaymentCardNonce。这不是我们所期望的；当使用GooglePay完成支付并请求ThreeDSecure时，这是一个正常的卡顿事件。这意味着我们丢失了授权购买所需的账单信息。</p><p id="d977" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们联系了Braintree，发现在完成ThreeDSecure之后，插件UI当前无法返回一个GooglePaymentCardNonce。我们要么明确地让用户提供他们的账单细节(去掉“快速结账”的选项)，要么转到Braintree的托管字段(为了摆脱插件UI，有必要进行重大的重组)。</p></div><div class="ab cl lc ld gp le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="hb hc hd he hf"><p id="7191" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="lj">最初发表于</em><a class="ae iu" href="https://www.brightec.co.uk/blog/how-to-use-braintree-drop-in-google-pay-and-threedsecure-on-android" rel="noopener ugc nofollow" target="_blank"><em class="lj">【https://www.brightec.co.uk】</em></a><em class="lj">。</em></p></div></div>    
</body>
</html>