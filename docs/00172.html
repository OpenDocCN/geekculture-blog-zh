<html>
<head>
<title>An Approach to Build an Online News Distribution System</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">一种构建在线新闻发布系统的方法</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/an-approach-to-build-an-online-news-distribution-system-acda2aa8059b?source=collection_archive---------1-----------------------#2020-09-08">https://medium.com/geekculture/an-approach-to-build-an-online-news-distribution-system-acda2aa8059b?source=collection_archive---------1-----------------------#2020-09-08</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/39a3ba3b58d8be503d456d4c043e27a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m9d7IXkza5VEYjsJU9FL2w.jpeg"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx">Photo by <a class="ae hv" href="https://unsplash.com/@markuswinkler?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Markus Winkler</a> on <a class="ae hv" href="https://unsplash.com/s/photos/news?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><div class=""/><div class=""><h2 id="3f16" class="pw-subtitle-paragraph iv hx hy bd b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm dx translated">怎样才能轻松提升自己的新闻阅读体验？</h2></div><p id="1e5e" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">新闻一直是我们社会中非常重要的一部分。在过去，我们主要依靠新闻频道和报纸来获取信息和更新自己。目前，在快节奏的世界中，新闻媒体和机构已经开始使用互联网来接触读者。事实证明，这一尝试非常有帮助，因为它让书屋扩大了读者群。</p><p id="db77" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">在当今世界，有许多媒体渠道，因此，很容易确定，由于繁忙的生活日程，一个人不可能去所有的渠道收集新闻。此外，每个媒体渠道对每个故事的报道都不一样。一些读者喜欢比较不同的故事，从不同的角度阅读同一个故事，以获得对一个事件的全面了解。所有这些需求都可以通过一种目前越来越流行的应用程序来解决，这就是在线新闻发布应用程序。这些应用程序旨在从多个来源收集新闻，并作为提要提供给用户。在本文中，我们将研究构建这样一个应用程序的方法。</p><h2 id="d052" class="kj kk hy bd kl km kn ko kp kq kr ks kt jw ku kv kw ka kx ky kz ke la lb lc ld bi translated">这个想法</h2><p id="b419" class="pw-post-body-paragraph jn jo hy jp b jq le iz js jt lf jc jv jw lg jy jz ka lh kc kd ke li kg kh ki hb bi translated">这种应用程序的主要组成部分当然是新闻。我使用了印度四家最受欢迎的媒体公司作为应用程序的来源。所有的媒体都有自己的网站，我们从那里收集标题链接和故事。我们将使用<a class="ae hv" href="https://towardsdatascience.com/understanding-automatic-text-summarization-1-extractive-methods-8eb512b21ecc" rel="noopener" target="_blank">提取文本摘要</a>从3到5个句子的故事中提取要点。我们会将收集到的信息与来源一起存储，即出版媒体的名称、日期、时间和故事的标题。每个按日期排序的文件将给出该特定日期的提要。</p><p id="b0ad" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">现在，我们可以从故事标题中提取另一条信息，即故事的主题。每个标题都有一些相关的信息，它可能是一个人的名字，一个国家，一个组织，或任何重要的话题，例如，新冠肺炎。名字或主题大多是故事的主题。我们将从标题中提取这些感兴趣的单词，并将它们用作相应故事的标签或标记。我们将把这些标签和标题一起保存在文件中。</p><p id="e95d" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">不同类型的用户可以使用一个应用程序，因此，我们必须创建一个过滤或推荐机制，根据用户的兴趣定制他/她的提要。为此，我们需要创建一个登录系统，单独记录每个用户阅读的故事类型，并根据他/她的帐户向他/她推荐。我们将维护一个数据库，其中包含用户的姓名，电子邮件，电话号码(可选)和密码。这封邮件将是我们唯一的钥匙。</p><p id="64d6" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">我们还将维护两个JSON文件，一个记录每个用户阅读的故事和相应的标签。在这种情况下，我们使用用户的电子邮件作为密钥。标签会不断告诉我们用户感兴趣的主题。另一个文件记录阅读故事的用户。在这个文件中，我们形成了一个唯一的密钥，格式如下:</p><blockquote class="lj lk ll"><p id="c2a2" class="jn jo lm jp b jq jr iz js jt ju jc jv ln jx jy jz lo kb kc kd lp kf kg kh ki hb bi translated">出版社+$+出版日期+$+故事标题</p></blockquote><p id="d584" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">这个惟一的键将被用作我们的JSON文件中的键。每个键都有阅读这个故事的用户的电子邮件。这背后的想法是，用户文件中附加到每封电子邮件的标签将允许我们进行<a class="ae hv" href="https://towardsdatascience.com/introduction-to-recommender-systems-1-971bd274f421" rel="noopener" target="_blank">基于内容的推荐</a>，如果我们一起使用这两个文件，我们可以创建一个完整的用户-项目交互矩阵，该矩阵可用于创建基于协作过滤的推荐。</p><p id="7779" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">现在，我们可以向用户提供三种类型的新闻发布:</p><ol class=""><li id="4925" class="lq lr hy jp b jq jr jt ju jw ls ka lt ke lu ki lv lw lx ly bi translated">最新饲料:每天的新鲜饲料</li><li id="3085" class="lq lr hy jp b jq lz jt ma jw mb ka mc ke md ki lv lw lx ly bi translated">最受欢迎的故事</li><li id="c57d" class="lq lr hy jp b jq lz jt ma jw mb ka mc ke md ki lv lw lx ly bi translated">定制提要:可能包含最近2-3天未访问的提要，但将根据用户的兴趣进行调整。</li></ol><p id="1fb6" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">值得注意的一件事是，最新的提要既没有调优，也不是最受欢迎的，但它仍然是必不可少的，以确保所有的故事都到达用户手中，并确保一点随机性，否则整个事情将过于偏颇。最新的故事将仅是当前日期的提要。我们将使用JSON文件来获取每个故事的流行度，该文件包含了所有访问过该故事的用户的电子邮件记录。一个故事的受欢迎程度就是这个故事的电子邮件记录的总长度。</p><p id="5327" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">接下来我们必须做的是，添加一个搜索选项。作为读者，我们经常想阅读某个特定的主题。该选项将帮助我们的用户使用该功能。</p><p id="50ba" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">最后，我们需要给出一个“相似故事”选项。如果我们访问一个电子商务网站，如果我们购买一种产品，它会向我们展示类似的产品，以方便用户浏览。我们将使用类似的功能。如果用户选择阅读一个特定的故事，我们会向他/她展示类似的故事，以使他/她的体验更好。</p><p id="2971" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">我们已经看到了整个想法，现在，让我们进入应用部分。</p><h2 id="15c2" class="kj kk hy bd kl km kn ko kp kq kr ks kt jw ku kv kw ka kx ky kz ke la lb lc ld bi translated">应用</h2><p id="5d57" class="pw-post-body-paragraph jn jo hy jp b jq le iz js jt lf jc jv jw lg jy jz ka lh kc kd ke li kg kh ki hb bi translated">我们先来看看新闻网站是什么样子的，怎么才能轻松的刮到需要的数据。</p><figure class="mf mg mh mi fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es me"><img src="../Images/f72a806a1e2da6e7a2a8335572ec3169.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*jO4v6tiQNuw40-auJeSrtg.gif"/></div></div></figure><p id="68de" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">上图用红色显示了故事标题，用绿色显示了HTML脚本中相应的链接。我们将需要从代码中提取新闻故事链接，并转到故事中提取它们。</p><pre class="mf mg mh mi fd mj mk ml mm aw mn bi"><span id="e68a" class="kj kk hy mk b fi mo mp l mq mr">from bs4 import BeautifulSoup<br/>import requests</span><span id="2d35" class="kj kk hy mk b fi ms mp l mq mr">def News_18_scraper():<br/>    URL="<a class="ae hv" href="https://www.news18.com/" rel="noopener ugc nofollow" target="_blank">https://www.news18.com/</a>"<br/>    r=requests.get(URL)<br/>    #print(r)<br/>    soup = BeautifulSoup(r.content,'html5lib')  <br/>    #print(soup)<br/>    heads={}<br/>    sub= soup.find('div',attrs={'class': 'lead-story'})<br/>    #print(sub)<br/>    rows=sub.findAll('p')<br/>    #print(rows)<br/>    for row in rows:<br/>        <br/>        head=row.text<br/>        heads[head]={}<br/>        heads[head]['Source']='News18'<br/>        #print(head)<br/>        #print(row.a["href"])<br/>        heads[head]['link']=row.a["href"]<br/>        <br/>    sub= soup.find('ul',attrs={'class': 'lead-mstory'})<br/>    rows=sub.findAll('li')<br/>    for row in rows:<br/>        head=row.text<br/>        heads[head]={}<br/>        heads[head]["Source"]='News18'<br/>        heads[head]["link"]=row.a["href"]<br/>    <br/>    return heads</span></pre><p id="9b74" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">上面这段代码用于提取这个特定媒体机构的新闻故事的链接。</p><figure class="mf mg mh mi fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es me"><img src="../Images/bb95aa5a7cd0b43ccadfc817487c5177.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*SyZogq1lB_bcliMQ0AlJWg.gif"/></div></div></figure><p id="fdb9" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">上图显示了故事网页的外观。它用绿色显示故事的标题，用红色显示故事，用蓝色显示源代码中的故事。我们需要搜集所有需要的数据。</p><pre class="mf mg mh mi fd mj mk ml mm aw mn bi"><span id="d678" class="kj kk hy mk b fi mo mp l mq mr">def extractor_n18(news):<br/>    for n in news.keys():<br/>        #print(n)<br/>        link=news[n]['link']<br/>        <br/>        r=requests.get(link)<br/>        #print(link)<br/>        <br/>        soup = BeautifulSoup(r.content, 'html5lib')<br/>        Briefs=[]<br/>        #print(link)<br/>        #print(soup)<br/>        sub=soup.find("title")<br/>        news[n]['Titles']=[sub.text]<br/>        tit=sub.text<br/>        flag=0<br/>        try:<br/>            flag=1<br/>            text=""<br/>            sub=soup.find('div',{'class':'lbcontent paragraph'})<br/>            #print(sub)<br/>            text+=sub.text+"\n"<br/>            sub_2=soup.find('div',{'id':'article_body'})<br/>            text+=sub_2.text<br/>            summary=summarizer(text)<br/>           #print(summary)<br/>            #print(text)<br/>        except:<br/>            flag=0<br/>            i=1<br/>            <br/>        if flag==0:<br/>            text=""<br/>            try:<br/>                sub=soup.find('article',{'class':'article-content-box first_big_character'})<br/>                rows=sub.findAll('p')<br/>                for row in rows:<br/>                    text+=row.text+"\n"<br/>                summary=summarizer(text)<br/>                    <br/>            except:<br/>                summary=tit<br/>        #print(summary)<br/>        news[n]['gists']=summary<br/>        date=datetime.today().strftime('%Y-%m-%d')<br/>        time=str(datetime.now().time())<br/>        <br/>        news[n]['Date']=date<br/>        news[n]['Time']=time<br/>        <br/>    return news</span></pre><p id="a9c1" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">上面的代码可以用来为新闻机构提取故事。</p><p id="3fd5" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">我已经创建了自己的文本摘要使用网页排名算法。</p><pre class="mf mg mh mi fd mj mk ml mm aw mn bi"><span id="6fb8" class="kj kk hy mk b fi mo mp l mq mr">def pagerank(text, eps=0.000001, d=0.85):<br/>    score_mat = np.ones(len(text)) / len(text)<br/>    delta=1<br/>    while delta&gt;eps:<br/>        score_mat_new = np.ones(len(text)) * (1 - d) / len(text) + d * text.T.dot(score_mat)<br/>        delta = abs(score_mat_new - score_mat).sum()<br/>        score_mat = score_mat_new</span><span id="580e" class="kj kk hy mk b fi ms mp l mq mr">return score_mat_new</span></pre><p id="22e9" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">上面的代码展示了页面排名算法。我将在最后提供完整代码的链接。</p><p id="9b79" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">现在，我们有四个这样的新闻来源。我们必须一个一个地搜集所有的，然后在数据库中编译。</p><pre class="mf mg mh mi fd mj mk ml mm aw mn bi"><span id="85a9" class="kj kk hy mk b fi mo mp l mq mr">import pandas as pd<br/>def Merge(dict1, dict2, dict3, dict4): <br/>    res = {**dict1, **dict2, **dict3, **dict4} <br/>    return res</span><span id="376a" class="kj kk hy mk b fi ms mp l mq mr">def file_creater(date):<br/>    news_times=times_now_scraper()<br/>    times_now=extract_news_times(news_times)<br/>    news_rep=republic_tv_scraper()<br/>    republic_tv=extract_news_rep(news_rep)<br/>    news_it=india_today_scraper()<br/>    india_today=extractor_it(news_it)<br/>    n_18=News_18_scraper()<br/>    News_18=extractor_n18(n_18)<br/>    <br/>    Merged=Merge(times_now,republic_tv,india_today,News_18)<br/>    <br/>    Merged_df=pd.DataFrame(Merged)<br/>    Merged_df_final=Merged_df.transpose()<br/>    df_final=Merged_df_final.reset_index()<br/>    df_final_2=df_final.drop(['index'],axis=1)<br/>    df_final_2.to_csv('feeds/Feed_'+date+'.csv',index=False)<br/>    get_names('feeds/Feed_'+date+'.csv')<br/>    <br/>    return df_final_2</span></pre><p id="3bb4" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">上面的代码一起获得所有的新闻，并为传递的日期形成一个数据csv文件。</p><p id="0eb1" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">get_names()函数使用Spacy库的命名实体识别特性从故事标题中提取名称或主题。</p><p id="9abb" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">在完整的处理之后，我们获得一个包含每个日期的提要文件的CSV。</p><figure class="mf mg mh mi fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mt"><img src="../Images/a420e49c5d3ff954a996b9e10714b7d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C8oVDsacuCyGa6TVJYc7vQ.png"/></div></div></figure><figure class="mf mg mh mi fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mu"><img src="../Images/5cecaa400d8f64c1e61250efb3af1a7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Hv6sNpr23RRgd9k6qXOjpQ.png"/></div></div></figure><p id="ae87" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">上面的图片描述了我们的新闻文件数据库的样子。</p><p id="517b" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">接下来，我们来看用户控制部分。它从登录和注册页面开始。</p><pre class="mf mg mh mi fd mj mk ml mm aw mn bi"><span id="0af6" class="kj kk hy mk b fi mo mp l mq mr">import pandas as pd<br/>def signup():<br/>    Name=input("Name:")<br/>    Email=input("Email:")<br/>    Phone=input("Phone:")<br/>    Password=input("Password:")<br/>    Con_password=input("Confirm Password:")<br/>    if Con_password!=Password:<br/>        print("Passwords don't match. Please Retry")<br/>        signup()<br/>    df=pd.read_csv('user_data.csv')<br/>    df_2=df[df['email']==Email]<br/>    if len(df_2)!=0:<br/>        print("Email already exists try different email")<br/>        signup()<br/>        <br/>    wr=open('user_data.csv','a')<br/>    wr.write(Name+","+Email+","+Password+","+Phone+"\n")<br/>    wr.close()    <br/>    print("Now please log in")<br/>def login():<br/>    print("1 to Signup, 2 to Login")<br/>    ch=int(input())<br/>    if ch==1:<br/>        signup()<br/>    df=pd.read_csv('user_data.csv')<br/>    Email=input("Email:")<br/>    Pass=input("Pass:")<br/>    <br/>    df_2=df[df['email']==Email]<br/>    #print(df_2)<br/>    <br/>    if len(df_2)==0:<br/>        print("Email not found, try again")<br/>        login()<br/>    <br/>    if str(df_2.iloc[0]['password'])==Pass:<br/>        print("Welcome "+df.iloc[0]['Name'])<br/>        surf(Email)<br/>        <br/>    else:<br/>        print("Password Wrong, try again")<br/>        login()</span></pre><p id="6a7e" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">上面的代码片段处理登录和注册。</p><figure class="mf mg mh mi fd hk er es paragraph-image"><div class="er es mv"><img src="../Images/3ce4967af8282af00cf491b096d658cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:972/format:webp/1*LS9u_YlneAYv01nqQICvwg.png"/></div></figure><p id="2f9b" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">上图展示了注册部分。它有某些检查，如如果电子邮件已经存在，它告诉注册一个不同的电子邮件。</p><figure class="mf mg mh mi fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mw"><img src="../Images/81431713cd5db560ad9b74614c75cc9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0k-8Eg6lo-3uQfPAwBkemA.png"/></div></div></figure><p id="1e42" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">上图显示了用户数据库的结构。现在，让我们看看两个JSON文件结构。</p><figure class="mf mg mh mi fd hk er es paragraph-image"><div class="er es mx"><img src="../Images/12799ced96797a368073d8d553c9502d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1350/format:webp/1*P1nMmhhWil8CxiE_zfLheA.png"/></div></figure><p id="5126" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">第一个文件<em class="lm"> user_records.json </em>如上图所示。正如所讨论的，它显示，我们已经记录了新闻和相应的标签，由电子邮件XYZ@gmail.com的用户访问。</p><figure class="mf mg mh mi fd hk er es paragraph-image"><div class="er es mx"><img src="../Images/7af6c9f3e30aa6b80603b66396bf11d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1350/format:webp/1*CJ2d7FBUu4hFPlM4r_KI2g.png"/></div></figure><p id="dd63" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">该图显示了我们的第二个文件<em class="lm"> stories_records.json. </em>如前所述，它创建了一个键并记录了访问该故事的用户的电子邮件。游客名单的长度为我们提供了故事的受欢迎程度。</p><p id="4f70" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">现在，让我们回到应用程序的工作上来。</p><figure class="mf mg mh mi fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es my"><img src="../Images/7f0d879528809ad7239507cf1d9d92c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TtsDRPF3FNnci89KHTRXuw.png"/></div></div></figure><p id="6cf6" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">它显示了工作。我们一登录，它就用电子邮件id创建一个会话，并根据电子邮件id记录操作。它为我们提供了最新的提要，并随后提供了如下选项:</p><ol class=""><li id="d456" class="lq lr hy jp b jq jr jt ju jw ls ka lt ke lu ki lv lw lx ly bi translated">搜索</li><li id="5fbd" class="lq lr hy jp b jq lz jt ma jw mb ka mc ke md ki lv lw lx ly bi translated">从提供的提要中阅读</li><li id="6131" class="lq lr hy jp b jq lz jt ma jw mb ka mc ke md ki lv lw lx ly bi translated">流行故事</li><li id="d12a" class="lq lr hy jp b jq lz jt ma jw mb ka mc ke md ki lv lw lx ly bi translated">定制的故事</li></ol><p id="12a7" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">如果我们想从提要中读取，它会告诉我们输入索引。它启动所选的故事，并给我们一个类似的故事列表供我们选择。</p><p id="9dcd" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">对于相似的故事，我只是在经过一些预处理后，根据与所选故事标题的余弦相似性对故事标题进行了排序。需要记住的一点是，我们将只在最近连续3天使用订阅源，也就是说，如果用户在4日使用应用程序，我们的订阅源将有2日至4日的数据。这将阻止我们的应用程序显示超旧的提要，并减少计算。</p><pre class="mf mg mh mi fd mj mk ml mm aw mn bi"><span id="3bb7" class="kj kk hy mk b fi mo mp l mq mr">from nltk.tokenize import sent_tokenize, word_tokenize <br/>def clean_sentence(sentence):<br/>    #extracts=sent_tokenize(article)<br/>    sentences=[]<br/>  <br/>    #print(extract)<br/>    clean_sentence=sentence.replace("[^a-zA-Z0-9]"," ")   ## Removing special characters<br/>    #print(clean_sentence)<br/>    obtained=word_tokenize(clean_sentence) <br/>    #print(obtained)<br/>    sentences.append(obtained)</span><span id="e23c" class="kj kk hy mk b fi ms mp l mq mr">return sentence<br/>import nltk<br/>nltk.download('punkt')<br/>nltk.download('stopwords')<br/>from nltk.cluster.util import cosine_distance<br/>def get_similarity(sent_1,sent_2,stop_words):<br/>  <br/>  sent_1=[w.lower() for w in sent_1]<br/>  sent_2=[w.lower() for w in sent_2]</span><span id="5d69" class="kj kk hy mk b fi ms mp l mq mr">total=list(set(sent_1+sent_2)) ## Removing duplicate words in total set</span><span id="488f" class="kj kk hy mk b fi ms mp l mq mr">vec_1= [0] * len(total)<br/>  vec_2= [0] * len(total)</span><span id="2762" class="kj kk hy mk b fi ms mp l mq mr">## Count Vectorization of two sentences<br/>  for w in sent_1:<br/>      if w not in stop_words:<br/>      vec_1[total.index(w)]+=1</span><span id="cff7" class="kj kk hy mk b fi ms mp l mq mr">for w in sent_2:<br/>    if w not in stop_words:<br/>     vec_2[total.index(w)]+=1</span><span id="8c83" class="kj kk hy mk b fi ms mp l mq mr">return 1-cosine_distance(vec_1,vec_2)</span></pre><p id="d11b" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">上述代码用于预处理数据并获得余弦相似度。这些代码删除任何特殊字符，将所有内容转换为小写，并且还删除了停用词。</p><p id="fec3" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">接下来，我们移动到搜索部分。用户输入一个主题，我们将选择该主题，并再次分别获得与故事标题的余弦相似度，并按非递增顺序对它们进行排序，以获得搜索结果。我们可能使用了标签，但它们不是手动提取的，因此可能会导致性能下降。</p><pre class="mf mg mh mi fd mj mk ml mm aw mn bi"><span id="7914" class="kj kk hy mk b fi mo mp l mq mr">def search(email,df):<br/>    clear()<br/>    search=input("search")<br/>    df_temp=df<br/>    sim=[]<br/>    for i in range(len(df)):<br/>        try:<br/>            title=ast.literal_eval(df.iloc[i]['Titles'])[0]<br/>            cleaned_1=clean_sentence(search)<br/>            cleaned_2=clean_sentence(title)<br/>            stop_words = stopwords.words('english')<br/>            s=get_similarity(cleaned_1,cleaned_2,stop_words)<br/>            if s&lt;0.95:<br/>                sim.append(s)<br/>            else:<br/>                sim.append(0)<br/>        except:<br/>            sim.append(0)<br/>            <br/>    df_temp['Sim']=sim<br/>    df_temp.sort_values(by=['Sim'], inplace=True,ascending=False)<br/>    #print(df_temp.head())<br/>    print("\n\n Top 5 Results \n")<br/>    for i in range(5):<br/>        <br/>            res = ast.literal_eval(df_temp.iloc[i]['Titles']) <br/>            print(str(i+1)+"-&gt; "+res[0])<br/>            print(df_temp.iloc[i]['Source']+" , "+df_temp.iloc[i]['Date'])<br/>        <br/>            print('\n\n')<br/>        <br/>    ind=int(input("Please Provide the index of the story"))<br/>        #print(str(stories_checked.iloc[indices[ind-1]]['link']))<br/>    <br/>            #ind=int(input("Please Provide the index of the story"))<br/>    webbrowser.open(df_temp.iloc[ind-1]['link'])<br/>    time.sleep(3)<br/>    <br/>    try:<br/>    <br/>            file_u = open('user_records.json')<br/>            users=json.load(file_u)</span><span id="df3d" class="kj kk hy mk b fi ms mp l mq mr">if email not in users.keys():<br/>                users[email]={}<br/>                <br/>                users[email]['news']=[df_temp[ind-1]['Source']+df_temp.iloc[ind-1]['Date']+ast.literal_eval(df_temp.iloc[ind-1]['Titles'])[0]]<br/>                lab=[z for z in ast.literal_eval(df_temp.iloc[ind-1]['labels'])]<br/>                users[email]['labels']=lab<br/>            else:<br/>                users[email]['news'].append(df_temp.iloc[ind-1]['Source']+df_temp.iloc[ind-1]['Date']+ast.literal_eval(df_temp.iloc[ind-1]['Titles'])[0])<br/>                lab=[z for z in ast.literal_eval(df_temp.iloc[ind-1]['labels'])]<br/>                for l in lab:<br/>                    users[email]['labels'].append(l)<br/>        <br/>            with open("user_records.json", "w") as outfile: <br/>                json.dump(users, outfile)<br/>    <br/>            file_s = open('story_records.json')<br/>            stories=json.load(file_s)<br/>            key=df_temp.iloc[ind-1]['Source']+df_temp.iloc[ind-1]['Date']+ast.literal_eval(df_temp.iloc[ind-1]['Titles'])[0]</span><span id="009a" class="kj kk hy mk b fi ms mp l mq mr">if key not in stories.keys():</span><span id="8703" class="kj kk hy mk b fi ms mp l mq mr">stories[key]=[email]<br/>            else:<br/>                stories[key].append(email)</span><span id="c00d" class="kj kk hy mk b fi ms mp l mq mr">with open("story_records.json", "w") as outfile: <br/>                json.dump(stories, outfile)</span></pre><p id="0698" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">以上代码用于搜索。该函数接收电子邮件和我们需要搜索的新闻数据库。</p><figure class="mf mg mh mi fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mz"><img src="../Images/e790ce5dde3e28d81875375e5d3e21d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Px6c4hfb64QOD9bdcHt4wA.png"/></div></div></figure><p id="c1ac" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">上图显示了搜索功能。如果我们搜索新冠肺炎，应用程序会给出5个与新冠肺炎最匹配的媒体机构和出版日期。</p><p id="62e2" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><strong class="jp hz">基于内容的过滤</strong></p><p id="a422" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">我们不会完全使用基于内容的过滤。我们只是要用这个方法背后的想法。我们将从JSON文件中提取用户访问过的标签。我们将只考虑最近访问的20个标签，因为如果我们考虑更多，推荐将不会随着用户兴趣的改变而改变。接下来，我们将比较用户查看的标签和各个故事的标签之间的重叠，并将推荐前10个重叠。现在，需要注意的一点是，我们不会显示用户已经看过的故事，我们会在外部将重叠设置为0，以防止这种情况发生。我们可以从story_records.json文件中获取信息。</p><p id="5bc1" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">为了检查故事标签的相似性，我们将再次使用余弦相似性。有一点要注意的是每次我们都是用计数矢量化的方法来获得相似度。</p><figure class="mf mg mh mi fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es na"><img src="../Images/aa735fd44ccfe1ba9ef89b674b0e501a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5PNDL7GWfAfSYnir9iUEog.png"/></div></div></figure><p id="530b" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">该图显示了自定义故事功能的应用。</p><p id="1371" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">这几乎概括了整个应用程序描述和应用程序。</p><h2 id="0f7a" class="kj kk hy bd kl km kn ko kp kq kr ks kt jw ku kv kw ka kx ky kz ke la lb lc ld bi translated">结果</h2><figure class="mf mg mh mi fd hk"><div class="bz dy l di"><div class="nb nc l"/></div></figure><p id="7c5b" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">上面的视频提供了该应用程序的简短演示。</p><h2 id="326e" class="kj kk hy bd kl km kn ko kp kq kr ks kt jw ku kv kw ka kx ky kz ke la lb lc ld bi translated">结论</h2><p id="940a" class="pw-post-body-paragraph jn jo hy jp b jq le iz js jt lf jc jv jw lg jy jz ka lh kc kd ke li kg kh ki hb bi translated">我们已经看到了如何开发在线新闻发布应用程序。</p><p id="02a8" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">github链接在这里是<a class="ae hv" href="https://github.com/abr-98/News_distribution_application" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="f7a2" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">希望这有所帮助。</p></div></div>    
</body>
</html>