<html>
<head>
<title>A primer on the Operations Research libraries in Python and Julia</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python和Julia中的运筹学库入门</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/a-primer-on-the-operations-research-libraries-in-python-and-julia-d10da69591ff?source=collection_archive---------25-----------------------#2021-06-28">https://medium.com/geekculture/a-primer-on-the-operations-research-libraries-in-python-and-julia-d10da69591ff?source=collection_archive---------25-----------------------#2021-06-28</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="f967" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">作为过去两年的Medium用户，我必须说这个社区到目前为止非常棒。一个由志趣相投的人组成的庞大社区，他们不懈地追求知识。</p><p id="8b71" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">作为一个从其他作者的文章中受益匪浅的人，我也很乐意这样做。</em></p><p id="b972" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">如果把十几个不同来源的材料综合成一篇文章，可以缩短哪怕一个人的学习旅程，我认为这本身就是一项有价值的努力。</em></p><p id="d928" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这也是对我的理智检查，以确保我确实理解了我所读的内容。</p><p id="1aaf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">毕竟，如果我缺乏以令人信服的方式记录和解释我的知识的能力，这一定意味着我的掌握不够。</p><p id="175f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">话虽如此，我们还是直入主题吧。</p></div><div class="ab cl je jf gp jg" role="separator"><span class="jh bw bk ji jj jk"/><span class="jh bw bk ji jj jk"/><span class="jh bw bk ji jj"/></div><div class="hb hc hd he hf"><h1 id="f9ef" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">运筹学是什么？</h1><p id="64aa" class="pw-post-body-paragraph if ig hi ih b ii kj ik il im kk io ip iq kl is it iu km iw ix iy kn ja jb jc hb bi translated">运筹学和最优化。这两个术语在学术和商业领域中可以互换使用。</p><p id="0648" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从广义上讲，它们可以被看作是利用数学工具，从天文数字般大量的可能路径中寻找最合适的行动路线。</p><p id="dc43" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">虽然这种术语听起来令人生畏，但这个领域非常广阔，运筹学有很多可能的用途，即使没有严格的技术基础，也可以很好地理解。</p><p id="a055" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以下面的例子为例:<strong class="ih hj">灰狼优化</strong>算法。</p><p id="c1d5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">它起源于狼及其猎物的种群动态。</p><div class="ko kp ez fb kq kr"><a href="https://www.geeksforgeeks.org/implementation-of-grey-wolf-optimization-gwo-algorithm/" rel="noopener  ugc nofollow" target="_blank"><div class="ks ab dw"><div class="kt ab ku cl cj kv"><h2 class="bd hj fi z dy kw ea eb kx ed ef hh bi translated">灰狼优化(GWO)算法的实现——GeeksforGeeks</h2><div class="ky l"><h3 class="bd b fi z dy kw ea eb kx ed ef dx translated">以前的文章灰狼优化-介绍谈到了灰狼优化的灵感，及其…</h3></div><div class="kz l"><p class="bd b fp z dy kw ea eb kx ed ef dx translated">www.geeksforgeeks.org</p></div></div><div class="la l"><div class="lb l lc ld le la lf lg kr"/></div></div></a></div><figure class="li lj lk ll fd lm er es paragraph-image"><div class="er es lh"><img src="../Images/d3be847ebbc5675a7aab8779e9d14978.png" data-original-src="https://miro.medium.com/v2/resize:fit:900/format:webp/0*UetEuOrFYFlutCrH.png"/></div><figcaption class="lo lp et er es lq lr bd b be z dx">A plot of the Rastrigin function in the GWO algorithm</figcaption></figure><h1 id="920e" class="jl jm hi bd jn jo ls jq jr js lt ju jv jw lu jy jz ka lv kc kd ke lw kg kh ki bi translated"><strong class="ak">我们试图优化什么？</strong></h1><p id="cc34" class="pw-post-body-paragraph if ig hi ih b ii kj ik il im kk io ip iq kl is it iu km iw ix iy kn ja jb jc hb bi translated">运筹学的关键任务是<strong class="ih hj">目标函数</strong>的最大化(或最小化)。这取决于我们如何看待这个问题。</p><p id="f65b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在不同的文献中也称为<strong class="ih hj">损失</strong>或<strong class="ih hj">代价函数</strong>。</p><div class="ko kp ez fb kq kr"><a href="https://en.wikipedia.org/wiki/Loss_function" rel="noopener  ugc nofollow" target="_blank"><div class="ks ab dw"><div class="kt ab ku cl cj kv"><h2 class="bd hj fi z dy kw ea eb kx ed ef hh bi translated">损失函数-维基百科</h2><div class="ky l"><h3 class="bd b fi z dy kw ea eb kx ed ef dx translated">在数学优化和决策理论中，损失函数或成本函数(有时也称为误差…</h3></div><div class="kz l"><p class="bd b fp z dy kw ea eb kx ed ef dx translated">en.wikipedia.org</p></div></div></div></a></div><p id="470e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在Rastrigin函数的彩色图中，我们可以看到该函数的局部最大值和最小值，由暗红色和暗蓝色的尖点特征给出。</p><blockquote class="lx ly lz"><p id="c396" class="if ig jd ih b ii ij ik il im in io ip ma ir is it mb iv iw ix mc iz ja jb jc hb bi translated">挑战在于找到一个足够高的峰值，或者足够低的谷值，来解决我们的问题。</p></blockquote></div><div class="ab cl je jf gp jg" role="separator"><span class="jh bw bk ji jj jk"/><span class="jh bw bk ji jj jk"/><span class="jh bw bk ji jj"/></div><div class="hb hc hd he hf"><h1 id="974e" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">代码实现</h1><p id="0759" class="pw-post-body-paragraph if ig hi ih b ii kj ik il im kk io ip iq kl is it iu km iw ix iy kn ja jb jc hb bi translated">在接下来的小节中，我将通过一个简单的例子来演示一个优化问题的从头到尾的过程。从公式化问题，到解决它以获得期望的值。</p><h2 id="ea28" class="md jm hi bd jn me mf mg jr mh mi mj jv iq mk ml jz iu mm mn kd iy mo mp kh mq bi translated">Python实现</h2><p id="06d5" class="pw-post-body-paragraph if ig hi ih b ii kj ik il im kk io ip iq kl is it iu km iw ix iy kn ja jb jc hb bi translated">对于Python版本，我们使用了Google运筹学工具包<strong class="ih hj">【Google OR-Tools】。</strong>它包含了一整套由谷歌开源的优化库。</p><div class="ko kp ez fb kq kr"><a href="https://developers.google.com/optimization" rel="noopener  ugc nofollow" target="_blank"><div class="ks ab dw"><div class="kt ab ku cl cj kv"><h2 class="bd hj fi z dy kw ea eb kx ed ef hh bi translated">或者-工具|谷歌开发者</h2><div class="ky l"><h3 class="bd b fi z dy kw ea eb kx ed ef dx translated">OR-Tools套件提供了运筹学软件库和API，用于约束优化、线性…</h3></div><div class="kz l"><p class="bd b fp z dy kw ea eb kx ed ef dx translated">developers.google.com</p></div></div><div class="la l"><div class="mr l lc ld le la lf lg kr"/></div></div></a></div><p id="5ed6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里列出了OR-tools中给出的一个例子。</p><p id="5250" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一个有3个变量和4个<strong class="ih hj">约束的问题。</strong></p><p id="15a3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">或者从技术上来说，我们可以说是<strong class="ih hj"> 5 </strong>约束，甚至高达<strong class="ih hj"> 7 </strong>。考虑到我们将所有3个变量限制为整数值。</p><figure class="li lj lk ll fd lm er es paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="er es ms"><img src="../Images/f6e0ddb015d430f7414d0bcdae0f546c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EnDu5kF41PbtxXu3ayB09A.png"/></div></div><figcaption class="lo lp et er es lq lr bd b be z dx">A typical problem in constraint optimization.</figcaption></figure><pre class="li lj lk ll fd mx my mz na aw nb bi"><span id="0683" class="md jm hi my b fi nc nd l ne nf"><strong class="my hj">#Import the relevant library in command prompt#</strong></span><span id="93c6" class="md jm hi my b fi ng nd l ne nf">python -m pip install --upgrade --user ortools </span><span id="a772" class="md jm hi my b fi ng nd l ne nf"><strong class="my hj">#Declaring the model#<br/></strong>from ortools.sat.python import cp_model<br/>model = cp_model.CpModel()</span></pre><p id="f1e1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">*注意*</p><p id="721c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该工具包中使用的CP模型是专门为处理整数而设计的，目的是提高计算速度。</p><p id="cdbc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，如果我们在问题中遇到分数，我们需要通过乘以另一个数将它们转换成整数。</p><p id="eef2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，我们将第一个等式从<strong class="ih hj"> a </strong>转换为<strong class="ih hj"> b，</strong>保持其功能不变。</p><pre class="li lj lk ll fd mx my mz na aw nb bi"><span id="8790" class="md jm hi my b fi nc nd l ne nf">a. <strong class="my hj">x + 7/2 y + 3/2 z &lt;= 25</strong><br/>b. <strong class="my hj">2x + 7y + 3z &lt;= 50 </strong></span></pre><p id="1710" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，我们需要声明变量和约束。</p><p id="1104" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">值50、45、37表示目标函数可以存在的状态空间。</p><p id="4e5c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">并且我们的变量被约束采用的整数值通过函数来表示:"<strong class="ih hj"> NewIntVar </strong>"。“新整数变量”的简写。</p><pre class="li lj lk ll fd mx my mz na aw nb bi"><span id="d158" class="md jm hi my b fi nc nd l ne nf"><strong class="my hj">#Boundaries#</strong><br/>var_upper_bound = max(50, 45, 37)</span><span id="39f9" class="md jm hi my b fi ng nd l ne nf"><strong class="my hj">#Declare variables<br/></strong>x = model.NewIntVar(0, var_upper_bound, 'x')<br/>y = model.NewIntVar(0, var_upper_bound, 'y')<br/>z = model.NewIntVar(0, var_upper_bound, 'z')</span></pre><p id="d6c0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">添加剩余的约束并调用求解器。</p><pre class="li lj lk ll fd mx my mz na aw nb bi"><span id="6c2a" class="md jm hi my b fi nc nd l ne nf"><strong class="my hj">#Remaining constraints#</strong><br/>model.Add(2*x + 7*y + 3*z &lt;= 50)<br/>model.Add(3*x - 5*y + 7*z &lt;= 45)<br/>model.Add(5*x + 2*y - 6*z &lt;= 37)</span><span id="9227" class="md jm hi my b fi ng nd l ne nf"><strong class="my hj">#Maximise objective function#</strong><br/>model.Maximize(2*x + 2*y +3*z)</span><span id="afba" class="md jm hi my b fi ng nd l ne nf"><strong class="my hj">#Output possible solution#</strong><br/>solver = cp_model.CpSolver()<br/>status = solver.Solve(model)</span><span id="87f6" class="md jm hi my b fi ng nd l ne nf">if status == cp_model.OPTIMAL:<br/>    print('Maximum value of objective function: %i' % solver.ObjectiveValue())</span><span id="7c76" class="md jm hi my b fi ng nd l ne nf">print('x value: ', solver.Value(x))<br/>print('y value: ', solver.Value(y))<br/>print('z value: ', solver.Value(z))<br/></span><span id="ce71" class="md jm hi my b fi ng nd l ne nf">output: </span><span id="f4b6" class="md jm hi my b fi ng nd l ne nf"><strong class="my hj">&lt; Maximum value of objective function: 35<br/>x value:  7<br/>y value:  3<br/>z value:  5 &gt;</strong></span></pre></div><div class="ab cl je jf gp jg" role="separator"><span class="jh bw bk ji jj jk"/><span class="jh bw bk ji jj jk"/><span class="jh bw bk ji jj"/></div><div class="hb hc hd he hf"><h2 id="a95e" class="md jm hi bd jn me mf mg jr mh mi mj jv iq mk ml jz iu mm mn kd iy mo mp kh mq bi translated">Julia实现</h2><p id="32ef" class="pw-post-body-paragraph if ig hi ih b ii kj ik il im kk io ip iq kl is it iu km iw ix iy kn ja jb jc hb bi translated">Julia实现来自于Julia中的<strong class="ih hj">跳转</strong>库</p><div class="ko kp ez fb kq kr"><a href="https://jump.dev/JuMP.jl/stable/" rel="noopener  ugc nofollow" target="_blank"><div class="ks ab dw"><div class="kt ab ku cl cj kv"><h2 class="bd hj fi z dy kw ea eb kx ed ef hh bi translated">简介跳转</h2><div class="ky l"><h3 class="bd b fi z dy kw ea eb kx ed ef dx translated">JuMP是嵌入在Julia中的用于数学优化的特定领域建模语言。它目前支持…</h3></div><div class="kz l"><p class="bd b fp z dy kw ea eb kx ed ef dx translated">跳转. dev</p></div></div><div class="la l"><div class="nh l lc ld le la lf lg kr"/></div></div></a></div><p id="de21" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我之所以包括它，是因为Julia在最近几年取得了巨大的进步，在易用性方面紧跟Python。</p><figure class="li lj lk ll fd lm er es paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="er es ni"><img src="../Images/1e4b5c0c8f684aa85c5c936feaf26f24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K0blnakYLThvad2lcGhd2w.png"/></div></div><figcaption class="lo lp et er es lq lr bd b be z dx">My Julia command line</figcaption></figure><pre class="li lj lk ll fd mx my mz na aw nb bi"><span id="7482" class="md jm hi my b fi nc nd l ne nf"><strong class="my hj">#Import dependencies in Julia#</strong><br/>using Pkg<br/>Pkg.add("JuMP")<br/>Pkg.add("Cbc")<br/>Pkg.add("GLPK")</span><span id="cbe2" class="md jm hi my b fi ng nd l ne nf">using JuMP, Cbc, GLPK</span></pre><p id="aab7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">声明优化模型。这里使用的模型是<strong class="ih hj">硬币分支和切割</strong> (Cbc)。</p><pre class="li lj lk ll fd mx my mz na aw nb bi"><span id="d1f4" class="md jm hi my b fi nc nd l ne nf">m = Model(Cbc.Optimizer)</span></pre><figure class="li lj lk ll fd lm er es paragraph-image"><div class="er es nj"><img src="../Images/66dcf583786707b1ae3f166410e1adb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*QTv-LH3ayBy_Vw4YOoJhag.png"/></div></figure><pre class="li lj lk ll fd mx my mz na aw nb bi"><span id="c9b6" class="md jm hi my b fi nc nd l ne nf"><strong class="my hj">#Declare variables#</strong></span><span id="2b2e" class="md jm hi my b fi ng nd l ne nf">@variable(m, 0 &lt;= x &lt;= 10)<br/>@variable(m, y &gt;= 0)<br/>@variable(m, z &gt;= 0)<br/></span><span id="d951" class="md jm hi my b fi ng nd l ne nf"><strong class="my hj">#Declare objective function#</strong><br/>@objective(m, Max, x + 2y + 5z)<br/></span><span id="6b68" class="md jm hi my b fi ng nd l ne nf"><strong class="my hj">#Declare constraints#</strong><br/>@constraint(m, constraint1, -x + y + 3z &lt;= -5)<br/>@constraint(m, constraint2, x + 3y -  7z &lt;= 10)</span><span id="d9b0" class="md jm hi my b fi ng nd l ne nf">println(m)</span></pre><p id="b52d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Julia的好处是它允许你以一种更接近人类直觉的方式来看待你所宣布的目标。这使得校对更加容易。</p><figure class="li lj lk ll fd lm er es paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="er es nk"><img src="../Images/4a7745d5b20af7d0bb99f088d7a336f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BNZVQSUTIYDnmASJ9_5DPg.png"/></div></div><figcaption class="lo lp et er es lq lr bd b be z dx">Output in the terminal</figcaption></figure><p id="f628" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从求解器中提取我们的解</p><pre class="li lj lk ll fd mx my mz na aw nb bi"><span id="5dda" class="md jm hi my b fi nc nd l ne nf">optimize!(m)</span><span id="1a2c" class="md jm hi my b fi ng nd l ne nf">println("optimal solution is found at: ", objective_value(m))<br/>println("x: ", getvalue(x))<br/>println("y: ", getvalue(y))<br/>println("z: ", getvalue(z))</span></pre><figure class="li lj lk ll fd lm er es paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="er es nl"><img src="../Images/71de2ee0341107fcaa0d0d6d164e66e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KqlaGBMvtWxxrMfYJIzZYQ.png"/></div></div></figure><figure class="li lj lk ll fd lm er es paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="er es nm"><img src="../Images/1e6b0106781172a20259968500c48d08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KFA1wl215dEinRY5VuO8TQ.png"/></div></div></figure></div><div class="ab cl je jf gp jg" role="separator"><span class="jh bw bk ji jj jk"/><span class="jh bw bk ji jj jk"/><span class="jh bw bk ji jj"/></div><div class="hb hc hd he hf"><p id="5a17" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这将是这篇文章的结尾，我们已经用Python和Julia语言演示了将约束优化问题传递给不同的求解器。</p></div></div>    
</body>
</html>