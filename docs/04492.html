<html>
<head>
<title>Some use cases for HTTP HEAD</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">HTTP头的一些用例</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/some-use-cases-for-http-head-5a8126ef98b6?source=collection_archive---------32-----------------------#2021-06-28">https://medium.com/geekculture/some-use-cases-for-http-head-5a8126ef98b6?source=collection_archive---------32-----------------------#2021-06-28</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="5d42" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">HTTP HEAD是一个有趣而强大的HTTP方法。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/f2816a78711ef8d72a0195cc4ddc8ea5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7f1BYkRkwU2dMLy2"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx">Photo by <a class="ae jt" href="https://unsplash.com/@umityildirim?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Ümit Yıldırım</a> on <a class="ae jt" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="d9c4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">HTTP是目前最有效、最大、最复杂的系统。</p><p id="9a5b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正如乔恩·弗兰德斯在他的书《宁静》中解释的那样。Net  <em class="ju">“网络的成功可以部分归功于运气和时机，但它的成功也可以归功于它的架构。Web的架构基于一些基本原则，这些原则使它从最初的小规模发展到今天的大量信息和功能。”</em></p><h1 id="f383" class="jv jw hi bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">HTTP头方法到底是什么？</h1><p id="02f8" class="pw-post-body-paragraph if ig hi ih b ii kt ik il im ku io ip iq kv is it iu kw iw ix iy kx ja jb jc hb bi translated">好奇心让我们成为更好的工程师是如此陈词滥调，它必须是真实的。如果您是软件工程师，对HTTP协议的本质细节有很好的理解是一项资产，如果您是安全工程师，这一点甚至更重要，因为您可以根据应用程序(或服务)的设计方式来定义威胁模型。</p><p id="6eae" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然而，一个好的起点应该是<a class="ae jt" href="https://datatracker.ietf.org/doc/html/rfc2616" rel="noopener ugc nofollow" target="_blank">超文本传输协议RFC 2616 </a>。让我们看看HTTP Head的定义，它在规范的第<a class="ae jt" href="https://datatracker.ietf.org/doc/html/rfc2616#section-9.4" rel="noopener ugc nofollow" target="_blank"> 9.4 </a>节中定义:</p><p id="83ca" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">除了服务器不能在响应中返回消息体之外，HEAD方法与GET完全相同。响应HEAD请求的HTTP头中包含的元信息应该与响应GET请求发送的信息相同。该方法可用于获取请求所隐含的实体的元信息，而无需传输实体体本身。这种方法通常用于测试超文本链接的有效性、可访问性、最近的修改。</p><p id="b1d4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="ju">在响应中包含的<br/>信息可用于从该资源更新<br/>先前缓存的实体的意义上，对HEAD请求的响应是可缓存的。如果新的字段值<br/>指示缓存的实体不同于当前实体(因为<br/>将由内容长度、内容MD5、ETag <br/>或最后修改的改变来指示)，则缓存必须将缓存条目视为<br/>陈旧</em>。<em class="ju"/></p><p id="7749" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这很有意思，头脑的表现和它不归任何人的差别一模一样。从这个定义中，我们可以看到一组性能用例。</p><h1 id="3b9e" class="jv jw hi bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">用例:依靠HTTP头下载提要</h1><p id="47f2" class="pw-post-body-paragraph if ig hi ih b ii kt ik il im ku io ip iq kv is it iu kw iw ix iy kx ja jb jc hb bi translated">为了说明HTT Head的强大功能，让我们假设我们想要丰富我们的安全解决方案来监控网络流量，并且我们想要实现一个警报，当有到tor出口节点的连接时触发该警报。</p><p id="016d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有几个地方跟踪tor出口节点的IP地址，但是，对于这个用例，我们将使用来自<a class="ae jt" href="https://check.torproject.org/torbulkexitlist" rel="noopener ugc nofollow" target="_blank">https://check.torproject.org/torbulkexitlist</a>的官方列表。</p><p id="75dc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以下cURL命令执行HTTP head以获取tor出口节点头:</p><p id="dee9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">https://check.torproject.org/torbulkexitlist的curl -I <a class="ae jt" href="https://check.torproject.org/torbulkexitlist" rel="noopener ugc nofollow" target="_blank"/></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ky"><img src="../Images/f3a7b6f2172f618732be259245533254.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5JYUpdjhpnQUY0sMpUrBjg.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx">HTTP Head</figcaption></figure><p id="5a5a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">顾名思义，HEAD从服务器返回关于头部的信息，但不返回主体。请注意，通过这种方法，我们还可以对HTTP服务器进行指纹识别，这可以用来最大化Web应用程序渗透测试的有效性。</p><p id="274f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果我们想自动下载这个提要，而不知道这个提要更新的频率(和时间)(以保证保持缓存列表最新),那么我们可以依赖Last-Modified响应头。</p><p id="6b8a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这样，我们将最后修改的响应头的值缓存在磁盘中，然后我们可以配置脚本每小时运行一次，对资源执行HTTP头，然后将缓存的日期与响应头进行比较。</p><p id="5b7c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果响应头值比缓存值新，我们需要运行HTTP GET来下载最新的提要并更新缓存。</p><p id="d5e5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">https://check.torproject.org/torbulkexitlist curl-I<a class="ae jt" href="https://check.torproject.org/torbulkexitlist" rel="noopener ugc nofollow" target="_blank"/>| grep“最后修改”</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kz"><img src="../Images/678a6aa268e3b4d5932b7d183dac07ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mom3qjrreIo1KpAK3LeHiA.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx">Last-Modified header</figcaption></figure><p id="f718" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这样做可以极大地提高性能，想象一下你要下载的资源有多大，如果只有几个GB的话！</p></div></div>    
</body>
</html>