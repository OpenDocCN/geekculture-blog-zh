<html>
<head>
<title>IoT Security</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">物联网安全</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/iot-security-b85f6d0e9426?source=collection_archive---------18-----------------------#2021-04-01">https://medium.com/geekculture/iot-security-b85f6d0e9426?source=collection_archive---------18-----------------------#2021-04-01</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="e050" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">构建物联网系统？更好的保证安全。</h2></div><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="ab fe cl jc"><img src="../Images/1e5e77684baf6f32375d288aeca45a8f.png" data-original-src="https://miro.medium.com/v2/format:webp/0*Y1hMDXKgQhGYIwdW.jpg"/></div></figure><p id="7106" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">随着技术的进步，IoT(物联网)系统也在发展，但这个过程也带来了许多安全漏洞。如今，我们有如此多的互联设备，并且正在创建一个更广阔的网络，因此我们有更大的安全顾虑。</p><p id="f302" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">保护物联网设备及其连接的网络的行为被称为<em class="kb">物联网安全</em>。它包括:</p><ul class=""><li id="a7e2" class="kc kd hi jh b ji jj jl jm jo ke js kf jw kg ka kh ki kj kk bi translated">为新的物联网设备和解决方案设计安全架构设计</li><li id="7083" class="kc kd hi jh b ji kl jl km jo kn js ko jw kp ka kh ki kj kk bi translated">通过物联网设备和解决方案的安全测试</li><li id="d485" class="kc kd hi jh b ji kl jl km jo kn js ko jw kp ka kh ki kj kk bi translated">遵守个人数据安全和网络安全法规</li></ul><p id="4cd9" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">物联网系统中安全重要性的一个例子是<em class="kb"> Mirai未来组合</em>。2016年的攻击中已知的一种恶意软件，后来成为开源的，并最终成为许多其他恶意软件的根源，最初是为了攻击物联网设备并将其转化为远程控制机器人，又名<em class="kb">僵尸设备</em>。</p><p id="0ea2" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">我们在许多领域使用物联网设备:智能家居、智能能源、汽车、智能城市、智能照明、支付系统、人工智能系统、电子医疗…</p><p id="897f" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">物联网设备也不通过单一的通信平台连接:一些设备通过Wifi连接，一些设备通过GSM或LTE连接，一些设备通过蓝牙(BLE)连接，一些设备通过Zigbee或Z-Wave等非ip系统连接，一些设备通过rf(射频)连接。</p><p id="c2cb" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">允许用户控制设备的应用程序可以在iOS、Android等平台上运行，或者您可以简单地创建一个web应用程序。</p><p id="b80c" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">你的系统将使用的云提供商也不同:你可以使用AWS，谷歌，Azure，图雅，混合解决方案或个人解决方案。根据您使用的云平台，您的系统的安全需求也会有所不同。</p><p id="a79b" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">通信协议也将有所不同，就像您的设备在系统内相互通信时所使用的语言一样。它可能是WS、HTTPS、MQTT(目前世界上最流行的物联网协议)、OCPP(主要用于电动汽车充电站)、CoAp。</p><p id="80f2" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">有了所有这些选项，确保物联网安全可能会有点棘手。有一点可能并不适用于所有类型的设备和系统。因此，我们有一个完整的物联网安全主题可以挖掘。由于物联网领域相对较新，我们做事的方式有很多种选择，因此世界上对具有物联网安全测试和设计专业知识的人有巨大的需求。</p><h1 id="69b0" class="kq kr hi bd ks kt ku kv kw kx ky kz la io lb ip lc ir ld is le iu lf iv lg lh bi translated">MQTT</h1><p id="8b84" class="pw-post-body-paragraph jf jg hi jh b ji li ij jk jl lj im jn jo lk jq jr js ll ju jv jw lm jy jz ka hb bi translated">MQTT(消息队列遥测传输)是一种在设备之间发送和接收消息的网络协议。您可以将协议视为电子设备使用的语言，因此，为了让两台设备连接，它们必须使用相同的协议。</p><p id="d5b1" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">虽然有许多协议可以用于物联网系统，但MQTT恰好是最受欢迎的一种，因为它很容易应用到系统中，并且比其他替代方案更轻量级。</p><p id="04c6" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">MQTT协议的基本逻辑是<em class="kb">发布和订阅</em>系统，其中作为发布者的设备将发布消息，而订阅者设备将简单地接收消息。每个设备，无论是发布还是订阅，都被认为是一个<em class="kb">客户端</em>。客户端不互相订阅，也不直接在它们之间传输消息，而是通过一个<em class="kb"> MQTT代理</em>进行通信。MQTT代理是一个服务器，它收集消息并将它们发送到适当的客户机。客户端订阅MQTT代理上的一个<em class="kb">主题</em>，在该主题下发布的任何消息都基于此被发送到正确的客户端。</p><h2 id="adb8" class="ln kr hi bd ks lo lp lq kw lr ls lt la jo lu lv lc js lw lx le jw ly lz lg ma bi translated">MQTT的弱点</h2><ul class=""><li id="8a31" class="kc kd hi jh b ji li jl lj jo mb js mc jw md ka kh ki kj kk bi translated"><strong class="jh hj">案例1: </strong>如果攻击者知道发布消息的主题，并且没有定期检查该主题上发布的消息是否受到攻击，那么攻击者也可以发布该主题上的消息。例如，如果主题是智能烤箱，攻击者可以打开烤箱并引起火灾。</li><li id="62e4" class="kc kd hi jh b ji kl jl km jo kn js ko jw kp ka kh ki kj kk bi translated"><strong class="jh hj">案例2: </strong>如果您没有对发布者和代理之间的通信进行加密，或者对中间人攻击执行一些其他安全措施，任何外部设备都可以连接到您的发布者客户端并侦听发送的消息。这对messenger应用程序尤其重要。</li></ul><h2 id="2f1b" class="ln kr hi bd ks lo lp lq kw lr ls lt la jo lu lv lc js lw lx le jw ly lz lg ma bi translated">MQTT安全性:</h2><ol class=""><li id="9900" class="kc kd hi jh b ji li jl lj jo mb js mc jw md ka me ki kj kk bi translated"><strong class="jh hj">传输层安全性(TLS) </strong></li></ol><p id="2d64" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">我们需要做的第一件事是确保通过使用MQTT协议的代理相互连接的设备之间的安全通信。使用TLS方法，代理将向客户端发送签名的根SSL证书(由可信的证书颁发机构颁发的证书),客户端将批准代理的证书是否真实。然后，如果一切看起来安全，就会有加密通信。</p><p id="3bd4" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">例如，当你登录Instagram帐户时，服务器会在你不注意的情况下将其根证书发送到你的浏览器。然后，如果证书被批准，他们将交换私钥，从那时起，双方之间的所有通信都将被加密。</p><p id="9cf2" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">注意:签名只是为您的内容创建两个密钥，一个私有，一个公共。然后，用户可以使用您的公钥来查看发布的内容是否真的是您的。用私钥加密的数据只能用公钥查看，反之亦然，用公钥加密的数据只能用私钥查看。</p><p id="cc6c" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">如果客户端是，比如说，android设备，那么根证书将被自动加载，这个过程将自己完成。但是，如果客户端是物联网设备，您应该采取一些步骤来确保TLS</p><ul class=""><li id="21f9" class="kc kd hi jh b ji jj jl jm jo ke js kf jw kg ka kh ki kj kk bi translated">对于您的系统将要使用的服务器，您应该获得一个可信的CA SSL证书。</li><li id="53c7" class="kc kd hi jh b ji kl jl km jo kn js ko jw kp ka kh ki kj kk bi translated">对于系统中的客户端，将根证书应用到您的设备。</li><li id="e82f" class="kc kd hi jh b ji kl jl km jo kn js ko jw kp ka kh ki kj kk bi translated">实现将对客户端执行密钥交换的信任管理器。</li></ul><p id="19d8" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated"><strong class="jh hj"> 2。客户端认证</strong></p><p id="a508" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">身份验证帮助我们从所有发送订阅请求的设备中筛选出可以订阅某些主题的设备。客户端身份验证不同于TLS，因为这一次客户端不批准代理，而是代理批准客户端。这可以通过三种方法实现；</p><ul class=""><li id="5ce9" class="kc kd hi jh b ji jj jl jm jo ke js kf jw kg ka kh ki kj kk bi translated">每个客户端都可以使用授予他们的用户名和密码连接到代理。然后，连接到代理的认证服务器将检查用户名-密码组合是否正确，然后允许连接。</li><li id="298f" class="kc kd hi jh b ji kl jl km jo kn js ko jw kp ka kh ki kj kk bi translated">SSL客户端证书是发给每个希望连接到代理的客户端的证书。然后，代理将从客户端接收根证书，然后检查它是否有效。然后会有一个密钥交换，根据这个交换，数据将被加密。(与TLS完全相反)</li><li id="3ed6" class="kc kd hi jh b ji kl jl km jo kn js ko jw kp ka kh ki kj kk bi translated">客户端和代理都可以获得根证书，交换它们并确保双方安全连接。然后，交换公钥，最后传输加密数据。这称为相互认证。</li></ul><p id="520e" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated"><strong class="jh hj"> 3。客户授权</strong></p><p id="de11" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">这个基于规则的系统根据特定的规则授予访问权和授权操作。例如，如果客户端A只被允许在主题A上发布，他们将不能在主题B上发布任何内容，如果他们试图发布，他们的连接将被断开。为了确保这种安全性，系统开发者必须设计一个控制单元并实现一些规则。</p><p id="4fcb" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">如果您确保采取了这三个步骤，那么MQTT通信将会安全地执行。</p><h1 id="0481" class="kq kr hi bd ks kt ku kv kw kx ky kz la io lb ip lc ir ld is le iu lf iv lg lh bi translated">物联网安全的四个步骤</h1><p id="ccd0" class="pw-post-body-paragraph jf jg hi jh b ji li ij jk jl lj im jn jo lk jq jr js ll ju jv jw lm jy jz ka hb bi translated"><strong class="jh hj">第一步:设备安全</strong></p><ul class=""><li id="bc27" class="kc kd hi jh b ji jj jl jm jo ke js kf jw kg ka kh ki kj kk bi translated">确保在开始使用物联网系统之前，不要忘记清除调试/测试接口。这些接口经常被遗忘，为攻击者创造了一个易受攻击的地方。</li><li id="46ed" class="kc kd hi jh b ji kl jl km jo kn js ko jw kp ka kh ki kj kk bi translated">像USB这样的用户连接接口也应该被正确授权，否则你可能会通过这些端口被黑客攻击。</li><li id="58ab" class="kc kd hi jh b ji kl jl km jo kn js ko jw kp ka kh ki kj kk bi translated">您的物联网系统可能通过网络提供一些服务，但是，如果您对所述服务犯了授权错误，攻击者就可以使用网络并通过它入侵您的系统或控制您的固件。</li><li id="54ed" class="kc kd hi jh b ji kl jl km jo kn js ko jw kp ka kh ki kj kk bi translated">无论是为了对某些用户执行某些网络服务而故意为之，还是在测试阶段无意中为之，您可能会让某些监听端口(如TCP/UDP)保持打开状态。这些也成为系统的一个漏洞，如果你不授权，攻击者可以通过它们连接到固件并获得管理权限(使用外壳)。</li><li id="572c" class="kc kd hi jh b ji kl jl km jo kn js ko jw kp ka kh ki kj kk bi translated">当连接到本地网络服务时，您的程序必须要求用户提供强密码。当使用默认密码时，网络更有可能被黑客攻击。</li><li id="ec04" class="kc kd hi jh b ji kl jl km jo kn js ko jw kp ka kh ki kj kk bi translated">操作系统有被攻击者发现的弱点，然而，为了确保最大的安全性，操作系统公司将在必要时更新他们的软件。如果您不更新您使用的软件，而是使用过时的版本，该软件将容易受到攻击者的攻击。所以一定要更新你的操作系统，安装所有的安全补丁。</li><li id="5af2" class="kc kd hi jh b ji kl jl km jo kn js ko jw kp ka kh ki kj kk bi translated">第三方组件、服务、库等。也可能是一个漏洞。确保从安全的来源下载最新版本。</li></ul><p id="928c" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated"><strong class="jh hj">步骤2:设备配置</strong></p><p id="f836" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">设备配置包括将物联网设备连接到WiFi、云甚至其他设备，并管理该连接。</p><ul class=""><li id="e13e" class="kc kd hi jh b ji jj jl jm jo ke js kf jw kg ka kh ki kj kk bi translated">使用默认的用户名，密码，凭证，网址将最终被披露，并导致安全漏洞。</li><li id="ae4d" class="kc kd hi jh b ji kl jl km jo kn js ko jw kp ka kh ki kj kk bi translated">每台设备都应该有唯一的密码或安全证书，以便安全地相互连接。</li><li id="17ee" class="kc kd hi jh b ji kl jl km jo kn js ko jw kp ka kh ki kj kk bi translated">暴力攻击是一种依赖于密码试错法的攻击。您应该确保您的密码在暴力攻击方面是安全的。为此，您可以锁定连续多次输入错误密码的设备。然后，可以在一段时间后再次尝试连接，或者您可以请求主密钥以便再次连接。</li><li id="7e40" class="kc kd hi jh b ji kl jl km jo kn js ko jw kp ka kh ki kj kk bi translated">将新设备连接到本地系统时会用到配置参数。但是，我们如何确保新设备可以安全连接呢？通过确保设备源得到验证。在执行输入验证之后，并且因此验证了传入的配置文件是安全来源的，系统可以最终对新设备进行记账。</li><li id="b877" class="kc kd hi jh b ji kl jl km jo kn js ko jw kp ka kh ki kj kk bi translated">一些物联网系统在工作过程中在设备之间传递用户名和密码，然而，由于这些数据在通信过程中被传输，使得系统容易受到中间人攻击。黑客可以监听通信，并通过这些数据入侵整个系统，因此这些数据绝不能传输到设备上。</li></ul><p id="d8fb" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated"><strong class="jh hj">第三步:软件更新</strong></p><ul class=""><li id="631a" class="kc kd hi jh b ji jj jl jm jo ke js kf jw kg ka kh ki kj kk bi translated">正如我们之前提到的，设备上运行的任何软件都应该是安全的，并且该软件中使用的所有库都应该是最新的。移动应用可以通过IOS或Android安全更新，但对于物联网设备，您有责任确保安全更新。作为用户，您应该创建更新设备的机制。如果您未能安全地更新系统，任何攻击者都可以将他们的软件上传到您的设备，并因此将设备用于非预期的目的:例如监听设备的环境，使用设备攻击物联网系统，捕捉声音和图像记录，或任何其他可能伤害您或他人的事情。</li><li id="51df" class="kc kd hi jh b ji kl jl km jo kn js ko jw kp ka kh ki kj kk bi translated">确保安全更新的第一步是确保您尝试下载的软件更新已经过验证。这是通过签名参数实现的。您首先需要创建软件更新映像(固件)，使用SHA256或SHA384等哈希算法创建固件的哈希(创建数据的影子)，使用ECDSA或RSA等非对称算法进行签名过程，在该过程中，您使用私钥对哈希数据进行签名(加密)(任何私钥都有与之配对的公钥， 任何用其中一个加密的数据只能用另一个查看——你可以从一个私钥创建一个公钥，但不可能这样做，反之亦然),最后得到签名参数。</li><li id="8490" class="kc kd hi jh b ji kl jl km jo kn js ko jw kp ka kh ki kj kk bi translated">为了将软件更新发送到软件的其他发行版，您需要构建一种机制，如更新服务器。在那里，您可以上传签名的软件文件，并让设备定期访问服务器，以检查是否有关于它们的任何更新。在这样的系统中，下载更新的软件文件后，设备要做的第一件事应该是检查签名文件，为了让设备能够做到这一点，您用于签名的私钥的公钥匹配应该已经在物联网设备中实现。下载后，设备将遵循类似于签名过程的路径来验证更新并安装它。</li><li id="aaf2" class="kc kd hi jh b ji kl jl km jo kn js ko jw kp ka kh ki kj kk bi translated">该设备不应该错误地下载旧版本的软件。这可以通过向更新系统添加简单的版本控制机制来实现。</li><li id="4181" class="kc kd hi jh b ji kl jl km jo kn js ko jw kp ka kh ki kj kk bi translated">更新服务器和设备之间的通信应该是安全的和加密的，通过TLS或一些类似的系统。</li><li id="0be1" class="kc kd hi jh b ji kl jl km jo kn js ko jw kp ka kh ki kj kk bi translated">请记住，软件更新机制的安全性是大多数国家销售任何物联网系统和/或设备的强制性规定。</li></ul><p id="b8d4" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated"><strong class="jh hj">第四步:通信安全</strong></p><ul class=""><li id="2fde" class="kc kd hi jh b ji jj jl jm jo ke js kf jw kg ka kh ki kj kk bi translated">如果您的设备通过WiFi与物联网系统的其余部分通信，它必须使用WPA2或WPA3等安全算法。WPA等旧版本存在安全漏洞，因此不推荐使用。</li><li id="70c6" class="kc kd hi jh b ji kl jl km jo kn js ko jw kp ka kh ki kj kk bi translated">为了确保云设备通信的安全性，使用TLS或DTLS(TLS用于通过UDP的通信)和强大的密码套件支持。</li><li id="26a0" class="kc kd hi jh b ji kl jl km jo kn js ko jw kp ka kh ki kj kk bi translated">将设备和库中的SSL证书保持在最新状态。如果没有，由于旧版本已经发现了漏洞，云与设备之间的通信可能会被黑客攻击。</li><li id="3c8b" class="kc kd hi jh b ji kl jl km jo kn js ko jw kp ka kh ki kj kk bi translated">确保定期更新设备中的根证书，或者使任何外部来源都无法更改这些根证书，因为攻击者可以在设备中嵌入他们自己的伪造根证书，从而获得监视、控制和阻止设备与代理之间的流量的权限。但在继续这一步之前，请记住，您最初嵌入物联网解决方案的证书应该来自可信机构。</li><li id="03fa" class="kc kd hi jh b ji kl jl km jo kn js ko jw kp ka kh ki kj kk bi translated">您也可以使用自签名证书，而不是来自可信证书颁发机构的证书。如果您正在开发私有的本地物联网解决方案并通过OpenSSL开发，这通常是首选。确保实现证书并激活信任管理器，就像处理来自可信机构的证书一样。</li><li id="3b0e" class="kc kd hi jh b ji kl jl km jo kn js ko jw kp ka kh ki kj kk bi translated">如果证书未经验证，物联网系统应被编程为拒绝来自某个来源的任何通信。</li><li id="e435" class="kc kd hi jh b ji kl jl km jo kn js ko jw kp ka kh ki kj kk bi translated">确保所有的库都是最新的。</li></ul></div></div>    
</body>
</html>