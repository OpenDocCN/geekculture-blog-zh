<html>
<head>
<title>Combining Back-End and Front-End with NodeJs and ReactJs-Login(Part 6)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将后端和前端与NodeJs和ReactJs-Login结合起来(第6部分)</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/combining-back-end-and-front-end-with-nodejs-and-reactjs-login-part-6-1c8cb6bf4b91?source=collection_archive---------15-----------------------#2021-05-09">https://medium.com/geekculture/combining-back-end-and-front-end-with-nodejs-and-reactjs-login-part-6-1c8cb6bf4b91?source=collection_archive---------15-----------------------#2021-05-09</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/b91002dd32bd4216cfc2c19f6bff7626.png" data-original-src="https://miro.medium.com/v2/resize:fit:894/format:webp/0*eyl039MWdrMMmfxu.png"/></div></figure><p id="65fb" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在本文中，我将继续登录部分。对于以前的文章，你可以去个人资料。我们开始吧。</p><p id="c838" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">像以前的文章一样，我会给你一个登录表单。我不写它的代码，CSS在这个页面上不存在。函数的返回部分如下:</p><pre class="jk jl jm jn fd jo jp jq jr aw js bi"><span id="acad" class="jt ju hi jp b fi jv jw l jx jy">&lt;div <em class="jz">className</em>="wrapper1"&gt;<br/>&lt;div <em class="jz">className</em>="form-wrapper"&gt;<br/>&lt;h1&gt;{t('Sign.signin')}&lt;/h1&gt;</span><span id="4b2f" class="jt ju hi jp b fi ka jw l jx jy">&lt;form &gt;</span><span id="c381" class="jt ju hi jp b fi ka jw l jx jy">&lt;div <em class="jz">className</em>="email"&gt;</span><span id="02da" class="jt ju hi jp b fi ka jw l jx jy">&lt;label <em class="jz">htmlFor</em>="email"&gt;&lt;/label&gt;</span><span id="4874" class="jt ju hi jp b fi ka jw l jx jy">&lt;input</span><span id="5c55" class="jt ju hi jp b fi ka jw l jx jy"><em class="jz">type</em>="text"</span><span id="96e7" class="jt ju hi jp b fi ka jw l jx jy"><em class="jz">className</em>=""</span><span id="e01d" class="jt ju hi jp b fi ka jw l jx jy"><em class="jz">placeholder</em>="E-mail"</span><span id="fe51" class="jt ju hi jp b fi ka jw l jx jy"><em class="jz">type</em>="email"</span><span id="8fec" class="jt ju hi jp b fi ka jw l jx jy"><em class="jz">name</em>="email"</span><span id="1c9a" class="jt ju hi jp b fi ka jw l jx jy">/&gt;</span><span id="97ef" class="jt ju hi jp b fi ka jw l jx jy">&lt;/div&gt;</span><span id="4512" class="jt ju hi jp b fi ka jw l jx jy">&lt;div <em class="jz">className</em>="password"&gt;</span><span id="f1b7" class="jt ju hi jp b fi ka jw l jx jy">&lt;label <em class="jz">htmlFor</em>="password"&gt;&lt;/label&gt;</span><span id="19c4" class="jt ju hi jp b fi ka jw l jx jy">&lt;input</span><span id="97d3" class="jt ju hi jp b fi ka jw l jx jy"><em class="jz">type</em>="text"</span><span id="8ec0" class="jt ju hi jp b fi ka jw l jx jy"><em class="jz">className</em>=""</span><span id="da3f" class="jt ju hi jp b fi ka jw l jx jy"><em class="jz">placeholder</em>="Password"</span><span id="deaa" class="jt ju hi jp b fi ka jw l jx jy"><em class="jz">type</em>="password"</span><span id="9aea" class="jt ju hi jp b fi ka jw l jx jy"><em class="jz">name</em>="password"<br/>/&gt;<br/>&lt;/div&gt;</span><span id="2dcf" class="jt ju hi jp b fi ka jw l jx jy">&lt;button <em class="jz">className</em>="buttonsign" </span><span id="5bb5" class="jt ju hi jp b fi ka jw l jx jy"><em class="jz">value</em> = "Submit"</span><span id="e62c" class="jt ju hi jp b fi ka jw l jx jy">&gt;<br/>Login</span><span id="c83d" class="jt ju hi jp b fi ka jw l jx jy">&lt;h5&gt;{t('Sign.signin')}&lt;/h5&gt;<br/>&lt;/button&gt;</span><span id="05cd" class="jt ju hi jp b fi ka jw l jx jy">&lt;<em class="jz">Link</em> <em class="jz">className</em>="linksignin" <em class="jz">to</em>="/signup" &gt;</span><span id="35e2" class="jt ju hi jp b fi ka jw l jx jy">{t('Sign.accountUp')}</span><span id="5d22" class="jt ju hi jp b fi ka jw l jx jy">&lt;/<em class="jz">Link</em>&gt;</span><span id="ec95" class="jt ju hi jp b fi ka jw l jx jy">&lt;/form&gt;</span><span id="42ea" class="jt ju hi jp b fi ka jw l jx jy">&lt;/div&gt;</span><span id="b606" class="jt ju hi jp b fi ka jw l jx jy">&lt;/div&gt;</span></pre><p id="96a4" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">对于函数，我们将编写:</p><pre class="jk jl jm jn fd jo jp jq jr aw js bi"><span id="511f" class="jt ju hi jp b fi jv jw l jx jy">export default function SignIn(){<br/>}</span></pre><p id="31ef" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在，我们必须设置名为email和password的变量。为此，我们将使用useState()。那我们就写:</p><pre class="jk jl jm jn fd jo jp jq jr aw js bi"><span id="5182" class="jt ju hi jp b fi jv jw l jx jy">const history = useHistory();</span></pre><p id="e4da" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在这个函数中，我们也需要一个小函数。这将是一个名为submit的异步函数。在submit中，我们将让一个名为item的变量等于{ email，password }。然后让一个变量也，并给出名称结果。在此之后，我们必须获取数据:</p><pre class="jk jl jm jn fd jo jp jq jr aw js bi"><span id="fd31" class="jt ju hi jp b fi jv jw l jx jy">let result = await fetch("http://localhost:5000/login",</span><span id="3736" class="jt ju hi jp b fi ka jw l jx jy">{</span><span id="2a83" class="jt ju hi jp b fi ka jw l jx jy">method: "POST",</span><span id="d4b7" class="jt ju hi jp b fi ka jw l jx jy">body:JSON.stringify(item),</span><span id="d906" class="jt ju hi jp b fi ka jw l jx jy">headers: {</span><span id="5c9e" class="jt ju hi jp b fi ka jw l jx jy">"Content-Type":"application/json",</span><span id="b20c" class="jt ju hi jp b fi ka jw l jx jy">"Accept":"application/json"</span><span id="a23a" class="jt ju hi jp b fi ka jw l jx jy">}</span><span id="5383" class="jt ju hi jp b fi ka jw l jx jy">}).then(history.push("/") )</span></pre><p id="ebe1" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">Url是关于路线的，所以如果你遵循这个教程，链接看起来就像这样。方法是POST，主体是item，我们有headers。之后，我们将使用history . push(“/”)。这将把我们带到主页。可能以后会改吧。</p><p id="7728" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">然后</p><pre class="jk jl jm jn fd jo jp jq jr aw js bi"><span id="c359" class="jt ju hi jp b fi jv jw l jx jy">result = await result.json()<br/>console.log(“result”, result)</span></pre><p id="6d2d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">结果将显示我们之前编写的后端响应。</p><p id="0d75" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在，我们将转到第一个div，并将其添加为:</p><pre class="jk jl jm jn fd jo jp jq jr aw js bi"><span id="1624" class="jt ju hi jp b fi jv jw l jx jy"><em class="jz">onChange</em> =  {(<em class="jz">e</em>) =&gt; setEmail(<em class="jz">e</em>.target.value)}</span></pre><p id="d5ae" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">对于第二个div，只需将setEmail更改为setPassword。最后，转到按钮并添加onClick{submit}。</p><p id="8af0" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">有了这个，文章就完成了！现在，和上一篇文章一样，我们将从后端开始</p><pre class="jk jl jm jn fd jo jp jq jr aw js bi"><span id="d4ae" class="jt ju hi jp b fi jv jw l jx jy">npm run dev</span></pre><p id="c866" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">和前端</p><pre class="jk jl jm jn fd jo jp jq jr aw js bi"><span id="93ae" class="jt ju hi jp b fi jv jw l jx jy">npm start</span></pre><p id="0803" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">如果我们将确认写为true，它将返回成功:true和一个令牌。如果确认为假，成功将为假，错误:无效凭证。</p><p id="215a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在下一篇文章中，我将解释如何组合注销部分。感谢阅读！</p></div></div>    
</body>
</html>