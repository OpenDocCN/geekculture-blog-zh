<html>
<head>
<title>Comprehensions in Python: What are they? Why Should you use them?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中的理解:它们是什么？为什么应该使用它们？</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/comprehensions-in-python-what-are-they-why-should-you-use-them-ff24a49460e7?source=collection_archive---------10-----------------------#2022-01-26">https://medium.com/geekculture/comprehensions-in-python-what-are-they-why-should-you-use-them-ff24a49460e7?source=collection_archive---------10-----------------------#2022-01-26</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/315cefba95777461bdc8ce56989d801d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sbnx8213bpAroEq6t_hg_g.jpeg"/></div></div></figure><p id="5e7a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">作为这种语言中最具代表性和最深奥的语法之一，我确信每个人都已经听说过或者使用过列表理解。</p><p id="14f3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">但是你知道语言中还有三种其他类型的理解吗？</p><p id="cf1d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这篇文章中，我将谈论什么是<em class="jo"> Python </em>中的理解，以及为什么人们会使用它们。我还将讨论什么时候使用理解会损害代码的可读性。</p><h1 id="2665" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">Python中的理解是什么？</h1><p id="661c" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">从本质上来说，<em class="jo"> Python </em>中的理解是通过对另一个可迭代对象执行操作来创建新序列的语法。</p><p id="1cc4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在<em class="jo"> Python中有四种类型的理解。</em></p><ol class=""><li id="7f56" class="ks kt hi is b it iu ix iy jb ku jf kv jj kw jn kx ky kz la bi translated"><strong class="is hj">列举理解</strong></li><li id="df2b" class="ks kt hi is b it lb ix lc jb ld jf le jj lf jn kx ky kz la bi translated"><strong class="is hj">字典理解</strong></li><li id="445e" class="ks kt hi is b it lb ix lc jb ld jf le jj lf jn kx ky kz la bi translated"><strong class="is hj">集合理解</strong></li><li id="9796" class="ks kt hi is b it lb ix lc jb ld jf le jj lf jn kx ky kz la bi translated"><strong class="is hj">发电机理解</strong></li></ol><p id="dcba" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">大多数初学者对理解的一个常见误解是，最初的iterable需要与理解的类型相同。然而，事实并非如此，例如，如果你正在处理一个<em class="jo">字典理解</em>原始的iterable也可以是一个列表。</p><p id="3b83" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">名称中提到的类型是从理解中返回的序列的类型。</p><h1 id="f232" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">为什么要用Python来理解？</h1><p id="7c13" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">我们在我们的代码中使用理解，因为使用它们会更有条理和可读性。然而，在某些情况下使用它们时需要小心，因为有时它们会产生相反的效果。</p><h1 id="fbf5" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">列表理解</h1><p id="cc70" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">列表理解是<em class="jo"> Python </em>中最常见的理解类型，它遵循简单的语法:</p><figure class="lg lh li lj fd ij"><div class="bz dy l di"><div class="lk ll l"/></div></figure><p id="ad75" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">正如我们在这里看到的，条件是完全可选的，但是如果你使用它，取决于你是否使用<em class="jo"> else </em>子句，它在<em class="jo">列表理解</em>中的位置将会改变。</p><p id="c665" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们还可以看到，它们非常容易使用，可以很方便地减少循环中<strong class="is hj">的使用，使代码更加整洁。</strong></p><p id="bf38" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">掌握它的最佳方法是亲自和它们一起玩，了解它们的局限性。下面是一个真实的用法例子，让你了解一下。</p><figure class="lg lh li lj fd ij"><div class="bz dy l di"><div class="lk ll l"/></div></figure><h1 id="f309" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">词典理解</h1><p id="a519" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">正如我前面提到的，理解名称中提到的<em class="jo">类型</em>指的是它创建的序列类型，而不是理解中使用的iterable类型。</p><pre class="lg lh li lj fd lm ln lo lp aw lq bi"><span id="d705" class="lr jq hi ln b fi ls lt l lu lv">The syntax for a dictionary comprehension is:</span></pre><figure class="lg lh li lj fd ij"><div class="bz dy l di"><div class="lk ll l"/></div></figure><p id="4d7b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">同样，这里的条件是可选的。</p><p id="bc10" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您可以在许多不同的场景中使用它，例如，假设您希望能够根据员工在公司中的职位来比较他们的工资，并且您有一个很长的字典列表，其中包含每个员工的各种信息。</p><p id="1e89" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">事实是，如果你只关心职位和薪水，你也许可以使用它，但是有比需要的更多的信息，因此我们可以使用字典理解来轻松地创建一个只包含我们想要的信息的新字典。</p><figure class="lg lh li lj fd ij"><div class="bz dy l di"><div class="lk ll l"/></div></figure><p id="b53b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">正如你在上面看到的，我们可以使用<em class="jo"> dict comprehension在一行中非常容易和干净地实现这一点。</em></p><h1 id="2a48" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">集合理解</h1><p id="8911" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">一个<em class="jo">集合理解</em>的功能类似于一个<em class="jo">列表理解</em>，除了它拥有集合的所有好处，即集合中的项目不能重复，并且值没有顺序。</p><p id="d1a1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">它也使用了类似于列表理解的语法，除了它使用了花括号而不是方括号。</p><figure class="lg lh li lj fd ij"><div class="bz dy l di"><div class="lk ll l"/></div></figure><p id="60d0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">有时这可能是有用的，但您必须记住要小心，因为如果需要对结果进行排序，集合的有利方面可能会导致问题，如下所示:</p><figure class="lg lh li lj fd ij"><div class="bz dy l di"><div class="lk ll l"/></div></figure><h1 id="39b9" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">生成器理解</h1><p id="fcfb" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated"><em class="jo">生成器理解</em>是我们在<em class="jo"> Python </em>中最不为人知的理解类型。</p><p id="f30f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一个<em class="jo">生成器</em>是一个返回一个对象(迭代器)的函数，我们可以一次迭代一个对象，这是python中一个独特的语法，通常由带有<strong class="is hj"> yield </strong>关键字的函数生成。</p><p id="c964" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">生成器理解的语法和所有其他语法一样简单:</p><figure class="lg lh li lj fd ij"><div class="bz dy l di"><div class="lk ll l"/></div></figure><p id="f3dc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">使用生成器的美妙之处在于，我们可以简单地通过使用内置函数<strong class="is hj"> next() </strong>一步一步地迭代它。</p><figure class="lg lh li lj fd ij"><div class="bz dy l di"><div class="lk ll l"/></div></figure><h1 id="90e3" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">什么时候不应该使用理解？</h1><blockquote class="lw lx ly"><p id="2d58" class="iq ir jo is b it iu iv iw ix iy iz ja lz jc jd je ma jg jh ji mb jk jl jm jn hb bi translated">读完这里的所有内容后，总是使用理解似乎是显而易见的，对吗？</p></blockquote><p id="caa8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">没有。</p><p id="7d9f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">python中的理解可以以上述所有方式用于创建可读代码，但是当我们使用<em class="jo">嵌套的理解</em>时，我们需要小心，因为它会导致代码可读性降低。</p><h1 id="6786" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">嵌套理解</h1><p id="e68d" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">嵌套理解是我们用来指在其他理解中完成的理解的术语。</p><p id="7880" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">虽然这是一个非常强大的功能，但它也会在可读性方面产生相反的效果。</p><p id="1b89" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">例如，下面的两个脚本创建了下面的金字塔。</p><figure class="lg lh li lj fd ij"><div class="bz dy l di"><div class="lk ll l"/></div></figure><pre class="lg lh li lj fd lm ln lo lp aw lq bi"><span id="c25c" class="lr jq hi ln b fi ls lt l lu lv">#<br/>##<br/>###<br/>####<br/>#####<br/>######<br/>#######</span></pre><p id="5d78" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">正如我们所看到的，虽然这是一个相当基本的例子，但在没有嵌套理解的情况下，可读性已经更好了，随着复杂性的增加，保持可读性就越困难。</p></div><div class="ab cl mc md gp me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="hb hc hd he hf"><p id="a94d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">通读了文章并理解了理解，我们不能完全理解它们给语言带来的力量，但与此同时，我们需要注意不要滥用它们，因为当逻辑不简单时，它会很快损害可读性。</p><p id="6433" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">每当我开始自己嵌套理解时，我总是喜欢记住这句简单的话:</p><blockquote class="lw lx ly"><p id="f8fa" class="iq ir jo is b it iu iv iw ix iy iz ja lz jc jd je ma jg jh ji mb jk jl jm jn hb bi translated">代码应该解释注释，而不是注释解释代码。</p></blockquote><p id="fb4f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后决定是否最好在没有理解的情况下写出逻辑。</p><p id="b752" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">使用理解的美妙之处在于，当正确使用时，它可以帮助你产生高效可读的代码。</p><p id="79a0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我希望你喜欢阅读并继续学习！</p></div></div>    
</body>
</html>