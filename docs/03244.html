<html>
<head>
<title>Checking if a String starts with specific characters in ServiceNow Client Scripts</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">检查ServiceNow客户端脚本中的字符串是否以特定字符开头</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/javascript-startswith-method-alternatives-for-servicenow-client-scripts-59c713cf36da?source=collection_archive---------7-----------------------#2021-06-04">https://medium.com/geekculture/javascript-startswith-method-alternatives-for-servicenow-client-scripts-59c713cf36da?source=collection_archive---------7-----------------------#2021-06-04</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="1d7b" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">ServiceNow客户端脚本的JavaScript字符串startWith()的两种替代方法。</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/b1d3033393fddf1a2491fcddd7cd75e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*haMEQHfMceoIpoEs30wzuA.jpeg"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Photo by <a class="ae jn" href="https://unsplash.com/@grakozy?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Greg Rakozy</a> on <a class="ae jn" href="https://unsplash.com/s/photos/javascript?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="9b47" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">有时，当我们在ServiceNow客户端脚本中工作时，我们必须检查表单中以一组字符开头的字段。如果我们从事web开发，我们可以使用在<a class="ae jn" href="https://www.w3schools.com/js/js_es6.asp" rel="noopener ugc nofollow" target="_blank">JavaScript ES6(ECMAScript 2015)</a>中引入的startWith()方法。一个简单易用的方法允许检查字符串的前缀，并根据给定的字符串是否以指定的字母或单词开头返回布尔值true或false。在写这篇文章的时候，ServiceNow不支持使用这种方法，所以一般来说，当我必须实现一个需要startWith()这样的函数的需求时，我会使用这两种替代方法，这两种方法可以让我完成相同的输出，第一种是<code class="du kk kl km kn b">indexOf()</code>，第二种是<code class="du kk kl km kn b">substring().</code></p><p id="2f7c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在讨论indexOf()和substring()之前，我们先来了解一下在现代JavaScript中我们是如何使用startWith()的。</p><h2 id="0356" class="ko kp hi bd kq kr ks kt ku kv kw kx ky jx kz la lb kb lc ld le kf lf lg lh li bi translated">startWith()语法:</h2><p id="e3ca" class="pw-post-body-paragraph jo jp hi jq b jr lj ij jt ju lk im jw jx ll jz ka kb lm kd ke kf ln kh ki kj hb bi translated"><code class="du kk kl km kn b">str.startsWith(searchString[, position])</code></p><p id="37ce" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在这个例子中，我们使用<code class="du kk kl km kn b">const,</code>声明了一个名为<code class="du kk kl km kn b">str</code>的变量，关键字const也是ECMAScript 2015。我们给字符串赋值JavaScript很棒’。我们可以使用浏览器控制台或者我最喜欢的JS片段测试器<a class="ae jn" href="https://jsbin.com/" rel="noopener ugc nofollow" target="_blank"> JSBin </a>来测试它。</p><pre class="iy iz ja jb fd lo kn lp lq aw lr bi"><span id="e2fb" class="ko kp hi kn b fi ls lt l lu lv">const str = ‘JavaScript is great’;</span></pre><p id="9f9f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">然后，我们用console.log登录浏览器调试控制台，用<code class="du kk kl km kn b">startWith()</code>判断字符串是否以指定的字符串开头。如果字符串以指定的字符开始，这个方法返回<code class="du kk kl km kn b">true</code>，否则返回<code class="du kk kl km kn b">false</code>，记住这是区分大小写的。</p><p id="e2c6" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在第一个例子中，预期的输出为真，因为指定的字符串与存储在<code class="du kk kl km kn b">str.</code>中的值相匹配</p><pre class="iy iz ja jb fd lo kn lp lq aw lr bi"><span id="5139" class="ko kp hi kn b fi ls lt l lu lv">console.log(str.startsWith(‘JavaScript is’)); //true</span></pre><p id="65cf" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果字符串不是以指定的字符开头，则返回false。</p><pre class="iy iz ja jb fd lo kn lp lq aw lr bi"><span id="2e65" class="ko kp hi kn b fi ls lt l lu lv">console.log(str.startsWith(‘Java is’)); //false</span></pre><p id="12de" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">第4行和第5行的其他错误退货示例:</p><pre class="iy iz ja jb fd lo kn lp lq aw lr bi"><span id="cf65" class="ko kp hi kn b fi ls lt l lu lv">const str = ‘JavaScript is great’; <br/>console.log(str.startsWith(‘JavaScript is’)); //true<br/>console.log(str.startsWith(‘Java is’)); //false<br/>console.log(str.startsWith(‘Python is’, 3)); //false</span></pre><p id="73f0" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">现在，如何在ServiceNow中使用substring()实现上述操作。如果<em class="lw">简短描述</em>以单词“SAP”开头，我们希望向<em class="lw">简短描述</em>字段添加一条字段消息</p><h2 id="03be" class="ko kp hi bd kq kr ks kt ku kv kw kx ky jx kz la lb kb lc ld le kf lf lg lh li bi translated">substring()语法:</h2><pre class="iy iz ja jb fd lo kn lp lq aw lr bi"><span id="fd1b" class="ko kp hi kn b fi ls lt l lu lv"><em class="lw">string</em>.substring(start_position [, end_position]);</span></pre><p id="b63c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">start_position是<em class="lw">字符串</em>中开始提取的位置。<em class="lw">字符串</em>中的第一个位置是0，end_position是3，对于单词“SAP”的分隔如下/S/A/P，在“S”之前是零，如果不提供该参数，substring()方法将返回到<em class="lw">字符串</em>末尾的所有字符。</p><p id="848c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">首先，让我们声明一个变量来分配一个简短描述的值。这是一个基于<em class="lw">简短描述的<em class="lw"> onChang </em> e类型的客户端脚本。</em></p><pre class="iy iz ja jb fd lo kn lp lq aw lr bi"><span id="0ef5" class="ko kp hi kn b fi ls lt l lu lv">var shortDesc = g_form.getValue('short_description');</span></pre><p id="1120" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">然后，我们使用条件<code class="du kk kl km kn b">if</code>和<code class="du kk kl km kn b">substring()</code>，我们为单词SAP指定字符串的开始和结束，在本例中为(0，3)。</p><pre class="iy iz ja jb fd lo kn lp lq aw lr bi"><span id="0d5c" class="ko kp hi kn b fi ls lt l lu lv">if (shortDesc.substring(0, 3) == 'SAP') {<br/>//do something if true<br/>}</span></pre><p id="3246" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果为真，则显示字段消息。</p><pre class="iy iz ja jb fd lo kn lp lq aw lr bi"><span id="49e9" class="ko kp hi kn b fi ls lt l lu lv">g_form.showFieldMsg('short_description', 'SAP Incident Ticket');</span></pre><p id="e233" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">完整的客户端脚本:</p><pre class="iy iz ja jb fd lo kn lp lq aw lr bi"><span id="616f" class="ko kp hi kn b fi ls lt l lu lv">g_form.showFieldMsg('short_description', 'SAP Incident Ticket');</span><span id="8bdf" class="ko kp hi kn b fi lx lt l lu lv">function onChange(control, oldValue, newValue, isLoading, isTemplate) {<br/>    if (isLoading || newValue === '') {<br/>        return;<br/>    }<br/>    var shortDesc = g_form.getValue('short_description');</span><span id="5dac" class="ko kp hi kn b fi lx lt l lu lv">if (shortDesc.substring(0, 3) == 'SAP') {<br/>        g_form.showFieldMsg('short_description', 'SAP Incident Ticket');<br/>    }<br/>}</span></pre><p id="575d" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">现在，让我们使用indexOf()。当我们操作一个字符串时，我们经常需要知道一个特定的元素是否存在，以及在哪个位置。当然，我们可以创建一个方法来遍历所有包含的元素，但是indexOf()是为了节省我们的时间而特意构建的。</p><p id="b7cc" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在浏览器控制台或<a class="ae jn" href="https://jsbin.com/" rel="noopener ugc nofollow" target="_blank"> JSbin </a>中，我们尝试下面的脚本。</p><pre class="iy iz ja jb fd lo kn lp lq aw lr bi"><span id="77d6" class="ko kp hi kn b fi ls lt l lu lv">var str = "JavaScript is great!";<br/>console.log(str.indexOf("JavaScript"));    // return 0<br/>console.log(str.indexOf("Python"));// return -1</span></pre><p id="b9e4" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在上面的例子中，如果简短描述匹配，它将返回0，如果不匹配，则返回-1，我们也可以将这个输出用于我们的客户端脚本。首先，我们声明我们的变量<code class="du kk kl km kn b">shortDesc</code>，并为<em class="lw">简短描述</em>字段赋值。</p><pre class="iy iz ja jb fd lo kn lp lq aw lr bi"><span id="dee1" class="ko kp hi kn b fi ls lt l lu lv">var shortDesc = g_form.getValue(‘short_description’);</span></pre><p id="d1b3" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">然后，我们使用一个if语句来检查条件是否为真，利用<code class="du kk kl km kn b">indexOf().</code></p><pre class="iy iz ja jb fd lo kn lp lq aw lr bi"><span id="7062" class="ko kp hi kn b fi ls lt l lu lv">if ((shortDesc.indexOf(‘SAP’)) == 0) { //return true<br/> //do something<br/> }</span></pre><p id="e33e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">对于这个特定的演示，我们在<em class="lw">简短描述</em>字段下方显示一条消息。</p><pre class="iy iz ja jb fd lo kn lp lq aw lr bi"><span id="9be0" class="ko kp hi kn b fi ls lt l lu lv">g_form.showFieldMsg(‘short_description’, ‘SAP Incident Ticket’);</span></pre><p id="dbd8" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">使用indexOf()检查简短描述是否以“SAP”开头的完整客户端脚本。</p><pre class="iy iz ja jb fd lo kn lp lq aw lr bi"><span id="9903" class="ko kp hi kn b fi ls lt l lu lv">function onChange(control, oldValue, newValue, isLoading, isTemplate) {<br/>    if (isLoading || newValue === '') {<br/>        return;<br/>    }<br/>    var shortDesc = g_form.getValue('short_description');<br/>    if ((shortDesc.indexOf('SAP')) == 0) {<br/>        g_form.showFieldMsg('short_description', 'SAP Incident Ticket');<br/>    }<br/>}</span></pre><h1 id="7a6e" class="ly kp hi bd kq lz ma mb ku mc md me ky io mf ip lb ir mg is le iu mh iv lh mi bi translated">最终注释:</h1><p id="c6bc" class="pw-post-body-paragraph jo jp hi jq b jr lj ij jt ju lk im jw jx ll jz ka kb lm kd ke kf ln kh ki kj hb bi translated">JavaScript中有许多内置方法可以帮助我们处理字符串。这两个substring()和indexOf()可以作为startWith()的替代。重述一下，substring()方法获取原字符串的一部分并作为新字符串返回，indexOf()方法起作用；不同的是，此方法返回指定值在字符串中第一次出现的位置，如果要搜索的值从未出现，则返回-1。</p></div></div>    
</body>
</html>