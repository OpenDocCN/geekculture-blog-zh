<html>
<head>
<title>Automate the Wiki-Link Game with Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python实现维基链接游戏的自动化</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/automate-the-wiki-link-game-with-python-6f8f2aee3594?source=collection_archive---------41-----------------------#2021-08-03">https://medium.com/geekculture/automate-the-wiki-link-game-with-python-6f8f2aee3594?source=collection_archive---------41-----------------------#2021-08-03</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="ee25" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">…并添加有趣的随机扭曲！</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/05a9c039bbafef49a61369cbadaf4e04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5I5tKqVniuRB_PWJ"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Photo by <a class="ae jn" href="https://unsplash.com/@lukechesser?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Luke Chesser</a> on <a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="33c1" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><a class="ae jn" href="https://en.wikipedia.org/wiki/Wikipedia:Wiki-Link_Game" rel="noopener ugc nofollow" target="_blank">维基链接游戏</a>是维基百科上的一种游戏，玩家从一个随机页面开始，通过连续点击页面上的第<em class="kk">个</em>链接进行游戏(其中<em class="kk"> N </em>是玩家事先选择的随机数)。通过这样做，播放器将从一个页面重定向到另一个页面，直到一个页面没有链接可点击(称为短页面结束)或链接到以前访问过的页面(无限循环结束)。发生这种情况之前被访问的页面数量是最终得分。</p><p id="09d1" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">听起来很无聊？根据维基百科，它<a class="ae jn" href="https://en.wikipedia.org/wiki/Wikipedia:Wiki-Link_Game" rel="noopener ugc nofollow" target="_blank">“旨在浪费时间和生命”</a>，所以我也不建议在周末和朋友玩它。然而，如果你还在读这篇文章，你可能是个程序员，而且程序员通常不会被邀请参加周末聚会。相反，我们编写Python脚本。(还是只有我这样？)</p><p id="5310" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">因此，本文将关注使用Python实现维基链接的自动化。更具体地说，这个程序将研究这个游戏具有的一个非常有趣的特征，即当<em class="kk"> N=1 </em>(即总是点击每个页面的第一个链接)游戏大约97%的时间在维基百科的“哲学”页面<a class="ae jn" href="https://www.daniellamprecht.com/wp-content/uploads/2016/08/Evaluating-and-Improving-Navigability-of-Wikipedia-a-Comparative-Study-of-eight-Language-Editions.pdf" rel="noopener ugc nofollow" target="_blank">结束</a>。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es kl"><img src="../Images/268e3f4e4e83524e98513c8001880193.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*X1olMP80cwtpHnw4apVXtg.png"/></div><figcaption class="jj jk et er es jl jm bd b be z dx">Figure 1: <a class="ae jn" href="https://xefer.com/2011/05/wikipedia" rel="noopener ugc nofollow" target="_blank">All Roads Lead to “Philosophy” from Xefer</a></figcaption></figure><p id="aaf3" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">然而，这项研究没有表明的是，这一结果是否源于只使用维基百科结构中每个页面的第一个链接<em class="kk">或</em>。因此，本文旨在用一个随机的<em class="kk"> N </em>(即在每个页面上随机选择一个链接)来重做这项研究。通过这样做，我们可以丢弃我们使用的链接的元素，并立即获得维基百科整体结构的概述。<em class="kk">那么让我们开始吧！</em></p></div><div class="ab cl km kn gp ko" role="separator"><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr"/></div><div class="hb hc hd he hf"><h2 id="c7b2" class="kt ku hi bd kv kw kx ky kz la lb lc ld jx le lf lg kb lh li lj kf lk ll lm ln bi translated">创建程序</h2><p id="9854" class="pw-post-body-paragraph jo jp hi jq b jr lo ij jt ju lp im jw jx lq jz ka kb lr kd ke kf ls kh ki kj hb bi translated">创建这个程序的第一步是把维基百科的数据放到我们的环境中。这可以通过多种网络抓取工具来完成，但是对于这个程序，我们选择了Python的<code class="du lt lu lv lw b">wikipedia</code> API。有了这个API，我们可以基于一个搜索词(用户通常放在搜索栏中)访问所有维基百科页面。</p><p id="c5fd" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">但是，一些搜索词可以引用多个页面。例如，搜索词“纽约”可以指“纽约(州)”的页面或“纽约市”的页面。这叫做<code class="du lt lu lv lw b">Disambiguation Error</code>。为了处理这个错误，我们的程序总是选择第一个(最有可能的)选项。</p><pre class="iy iz ja jb fd lx lw ly lz aw ma bi"><span id="435b" class="kt ku hi lw b fi mb mc l md me"><strong class="lw hj">try:</strong><br/>    p = wikipedia.page(page)<br/><strong class="lw hj">except</strong> wikipedia.DisambiguationError <strong class="lw hj">as</strong> e:<br/>    s = options[0]<br/>    p = wikipedia.page(s)</span></pre><p id="ba34" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">接下来，在选择页面之后，我们需要提取可用的链接。这可以通过在页面名称中添加<code class="du lt lu lv lw b">links</code>属性来实现。然后我们从这些链接中选择一个随机的链接来继续这个维基链接游戏。</p><pre class="iy iz ja jb fd lx lw ly lz aw ma bi"><span id="49ae" class="kt ku hi lw b fi mb mc l md me">link = random.choice(p.links)</span></pre><p id="8df4" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在选择一个链接后，我们检查它是否有效，并引导到一个页面，在那里我们可以继续我们的游戏。如果这是真的，游戏进行到下一页。如果没有，游戏结束，呈现最终得分。</p><pre class="iy iz ja jb fd lx lw ly lz aw ma bi"><span id="e89a" class="kt ku hi lw b fi mb mc l md me"><strong class="lw hj">try:</strong><br/>    p = wikipedia.page(link)<br/><strong class="lw hj">except</strong> wikipedia.exceptions.PageError:<br/>    print('game over. Your score:', score)<br/>    exit(0)</span><span id="2758" class="kt ku hi lw b fi mf mc l md me">wiki_link(link, score + 1)</span></pre><p id="8b03" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这段代码的完整版本可以在下面的附录中找到，还有一个到repl.it的链接，在那里你可以自己尝试这个程序！</p></div><div class="ab cl km kn gp ko" role="separator"><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr"/></div><div class="hb hc hd he hf"><h2 id="9458" class="kt ku hi bd kv kw kx ky kz la lb lc ld jx le lf lg kb lh li lj kf lk ll lm ln bi translated">结果</h2><p id="cf7a" class="pw-post-body-paragraph jo jp hi jq b jr lo ij jt ju lp im jw jx lq jz ka kb lr kd ke kf ls kh ki kj hb bi translated">最后，在创建程序之后，我们可以开始绘制它的结果。为了做到这一点，我们用相同的起始页面运行程序三次，并用图形表示它后面的页面。我们在本文中试验的两个不同的起点是<strong class="jq hj">计算机</strong> <strong class="jq hj">编程</strong>和<strong class="jq hj">数据科学</strong>(非常合适……)。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mg"><img src="../Images/15e2226d332130074e4c1c264932eadd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*acHTIhy8ACA380d2zIQDgw.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Figure 2: Pages visited with <strong class="bd kv">computer programming</strong> as a starting point</figcaption></figure><p id="9f38" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">首先是以计算机编程为起点的网页。到目前为止，还没有可以观察到的模式。除了所有被访问的页面都是与编程相关的。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mh"><img src="../Images/257b78ff8c5929f07d98a9378448b703.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7kUrh6FNjwuk7-4G05CIPA.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Figure 3: Pages visited with <strong class="bd kv">data science </strong>as a starting point</figcaption></figure><p id="f5b6" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">其次是以数据科学为起点的页面。就像前面的图一样，没有真正的模式可以观察。图2和图3唯一的共同点是它们都有相似的长度。</p></div><div class="ab cl km kn gp ko" role="separator"><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr"/></div><div class="hb hc hd he hf"><h2 id="bada" class="kt ku hi bd kv kw kx ky kz la lb lc ld jx le lf lg kb lh li lj kf lk ll lm ln bi translated">最后</h2><p id="27a3" class="pw-post-body-paragraph jo jp hi jq b jr lo ij jt ju lp im jw jx lq jz ka kb lr kd ke kf ls kh ki kj hb bi translated">为本文编写的程序通常是有效的，并且可能非常适合那些仍然对“<a class="ae jn" href="https://en.wikipedia.org/wiki/Wikipedia:Wiki-Link_Game" rel="noopener ugc nofollow" target="_blank">浪费时间和生命”</a>(维基链接游戏的意图)感兴趣的人。因此，在下面的附录中给出了该程序的工作副本的链接。</p><p id="e384" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">就研究而言。程序没有发现任何使用随机链接的相似模式。因此，看起来这种特性部分是只使用第一个链接而不仅仅是维基百科所固有的。然而，如果实验可以扩大到更大的规模，也许仍然可以发现不同的模式。</p><h2 id="4038" class="kt ku hi bd kv kw kx ky kz la lb lc ld jx le lf lg kb lh li lj kf lk ll lm ln bi translated">附录</h2><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mi mj l"/></div></figure><div class="mk ml ez fb mm mn"><a href="https://replit.com/@timokats/wikilink#main.py" rel="noopener  ugc nofollow" target="_blank"><div class="mo ab dw"><div class="mp ab mq cl cj mr"><h2 class="bd hj fi z dy ms ea eb mt ed ef hh bi translated">维基_链接</h2><div class="mu l"><h3 class="bd b fi z dy ms ea eb mt ed ef dx translated">timokats的Python repl</h3></div><div class="mv l"><p class="bd b fp z dy ms ea eb mt ed ef dx translated">replit.com</p></div></div><div class="mw l"><div class="mx l my mz na mw nb jh mn"/></div></div></a></div></div></div>    
</body>
</html>