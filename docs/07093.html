<html>
<head>
<title>Deploying an HA Kubernetes Cluster on AWS with KubeKey</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用KubeKey在AWS上部署HA Kubernetes集群</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/deploying-an-ha-kubernetes-cluster-on-aws-with-kubekey-aec98b7d36b0?source=collection_archive---------15-----------------------#2021-09-07">https://medium.com/geekculture/deploying-an-ha-kubernetes-cluster-on-aws-with-kubekey-aec98b7d36b0?source=collection_archive---------15-----------------------#2021-09-07</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="f1c5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">应该认真对待生产环境中集群的高可用性(HA)。Kubernetes和AWS EC2实例广泛用于各种生产环境中。然而，对于许多用户来说，在AWS上运行Kubernetes同时确保HA可能是复杂的。在本文中，我们将演示KubeKey如何帮助您在AWS上轻松部署Kubernetes并确保HA。</p><p id="0071" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了满足AWS中Kubernetes的HA服务需求，我们需要保证kube-apiserver的HA。您可以使用以下任一方法来达到目标:</p><ul class=""><li id="1fda" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">使用自动气象站ELB(推荐)。</li><li id="5704" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">使用keepalived+haproxy实现kube-apiserver的负载均衡。</li></ul><p id="6212" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">本文以AWS ELB服务为例。</p><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="er es jr"><img src="../Images/7bbbc312781878581e4831d02b11f294.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*67s2DqOJD6EFuR3rhk3l0A.png"/></div></div></figure><h1 id="7999" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">先决条件</h1><ul class=""><li id="5ca2" class="jd je hi ih b ii lb im lc iq ld iu le iy lf jc ji jj jk jl bi translated">您需要创建一个基于NFS、GlusterFS或Ceph的存储系统。考虑到数据持久性，我们不建议生产环境使用OpenEBS。本文使用OpenEBS将LocalPV配置为仅用于测试的默认存储服务。</li><li id="f1e1" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">所有节点都可以通过SSH访问。</li><li id="415a" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">所有节点的时间必须同步。</li><li id="4e4f" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">Red Hat系统默认包含SELinux。如果您使用Red Hat系统，您需要禁用SELinux或将SELinux设置为许可模式。</li></ul><h1 id="b3ea" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">主机</h1><p id="ede5" class="pw-post-body-paragraph if ig hi ih b ii lb ik il im lc io ip iq lg is it iu lh iw ix iy li ja jb jc hb bi translated">本文使用三个运行Ubuntu 18.04 Server 64位的AWS EC2实例。每个EC2实例有2个CPU内核和4 GB内存。</p><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="er es lj"><img src="../Images/2b90748ef4beee9c8b4c53e075690f7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J00sl7k5PQjhavgLwPKiSA.png"/></div></div></figure><p id="f0a8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">主机IP地址主机名称角色192 . 168 . 1 . 10主机1主机、节点等192 . 168 . 1 . 11主机2主机、节点等192 . 168 . 1 . 12主机3主机、节点等</p><blockquote class="lk ll lm"><p id="9c0c" class="if ig ln ih b ii ij ik il im in io ip lo ir is it lp iv iw ix lq iz ja jb jc hb bi translated">注意:上述配置仅用于演示。在生产环境中，建议您为节点分配不同的角色，并分别部署etcd和worker节点以提高稳定性。</p></blockquote><h1 id="6911" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">创造一个VPC</h1><p id="dc21" class="pw-post-body-paragraph if ig hi ih b ii lb ik il im lc io ip iq lg is it iu lh iw ix iy li ja jb jc hb bi translated">登录AWS控制台，转到VPC仪表板，并使用以下设置创建VPC。</p><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="er es lr"><img src="../Images/557abf1d34ff74b6b24cac99384ce8a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*MDc-l_yW-d5IykH6.png"/></div></div></figure><h1 id="92b9" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">创建子网</h1><p id="0636" class="pw-post-body-paragraph if ig hi ih b ii lb ik il im lc io ip iq lg is it iu lh iw ix iy li ja jb jc hb bi translated">使用以下设置为VPC创建子网。</p><h1 id="6639" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">创建互联网网关</h1><p id="415d" class="pw-post-body-paragraph if ig hi ih b ii lb ik il im lc io ip iq lg is it iu lh iw ix iy li ja jb jc hb bi translated">创建一个互联网网关并将其连接到VPC。</p><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="er es lr"><img src="../Images/0797855c3211905163e2a7c115a5940f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*qCDwaVXMgu07kO_P.png"/></div></div></figure><h1 id="8163" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">配置路由表</h1><p id="4cc3" class="pw-post-body-paragraph if ig hi ih b ii lb ik il im lc io ip iq lg is it iu lh iw ix iy li ja jb jc hb bi translated">将<code class="du ls lt lu lv b">0.0.0.0/0</code>路由添加到VPC的默认路由表中。</p><h1 id="1d45" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">创建安全组</h1><p id="e688" class="pw-post-body-paragraph if ig hi ih b ii lb ik il im lc io ip iq lg is it iu lh iw ix iy li ja jb jc hb bi translated">将以下入站规则添加到VPC的默认安全组。</p><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="er es lr"><img src="../Images/aeaab0add4d4631171be152237458033.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*VOUD6Z3QRh-1Fq6E.png"/></div></div></figure><h1 id="e070" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">创建主机</h1><p id="cdec" class="pw-post-body-paragraph if ig hi ih b ii lb ik il im lc io ip iq lg is it iu lh iw ix iy li ja jb jc hb bi translated">转到EC2实例创建页面，使用以下设置创建三个EC2实例。</p><ul class=""><li id="554f" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">选择一个图像。</li></ul><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="er es lw"><img src="../Images/8f38876df344d58f35505ddf6a7f380a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DoX0psHAK569KGR4JBgrOA.png"/></div></div></figure><ul class=""><li id="e1d7" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">选择实例类型。</li></ul><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="er es lr"><img src="../Images/5af7618b144b84acc732528401a3199b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*_0Ld_9MGF5HcGRov.png"/></div></div></figure><ul class=""><li id="5d3d" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">选择VPC和子网。</li></ul><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="er es lr"><img src="../Images/b232083fd00aeb8487fc1b678212b3f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*AFK8aGksEWBhMsLy.png"/></div></div></figure><ul class=""><li id="db9a" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">选择安全组。</li></ul><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="er es lr"><img src="../Images/edc4cccd8e87f011cfbddf45d4806381.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*nBjt3TQ_nBQQw-Ys.png"/></div></div></figure><ul class=""><li id="fd30" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">创建EC2实例后，将一个弹性IP地址与每个实例相关联，该地址将用于远程访问。</li></ul><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="er es lr"><img src="../Images/ad01abf314f85d01cdf6e36b1f77594c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*YxOfx7D3Gl8Aa4bd.png"/></div></div></figure><h1 id="efd6" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">创建负载平衡器</h1><ul class=""><li id="4a09" class="jd je hi ih b ii lb im lc iq ld iu le iy lf jc ji jj jk jl bi translated">在EC2仪表板上，选择<strong class="ih hj">负载均衡</strong> &gt; <strong class="ih hj">目标组</strong>，创建一个目标组，注册EC2实例的端口6443。</li></ul><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="er es lr"><img src="../Images/82c8195c87076baba4c53b8062dcafe6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*eg1ZmRySX2y9i4ae.png"/></div></div></figure><ul class=""><li id="f631" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">创建网络负载平衡器，并为负载平衡器选择VPC和子网。</li></ul><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="er es lr"><img src="../Images/1f5319f754a528c18af73c7b9cf4c86d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*jQH-XuWqnk37tN4g.png"/></div></div></figure><ul class=""><li id="39aa" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">配置监听器监听端口6443并连接到目标组。</li></ul><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="er es lr"><img src="../Images/9b6dc7868ad908aa428b014a591984df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Y4C66AaYw4N5X87r.png"/></div></div></figure><h1 id="eea9" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">检查负载平衡器的IP地址</h1><p id="02ff" class="pw-post-body-paragraph if ig hi ih b ii lb ik il im lc io ip iq lg is it iu lh iw ix iy li ja jb jc hb bi translated">在左侧导航窗格中，选择<strong class="ih hj">网络&amp;安全</strong> &gt; <strong class="ih hj">网络接口</strong>，获取自动生成的ELB网络接口的公有和私有IP地址。</p><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="er es lr"><img src="../Images/53e5d81358a037640a9039273181df9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*GBN9dVqw6bk-9z-d.png"/></div></div></figure><h1 id="4045" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">更改AWS EC2实例的SSH密码</h1><p id="8480" class="pw-post-body-paragraph if ig hi ih b ii lb ik il im lc io ip iq lg is it iu lh iw ix iy li ja jb jc hb bi translated">登录到每个AWS EC2实例，并更改<code class="du ls lt lu lv b">ubuntu</code>用户的密码。</p><pre class="js jt ju jv fd lx lv ly lz aw ma bi"><span id="86af" class="mb ke hi lv b fi mc md l me mf">sudo passwd ubuntu</span></pre><p id="7be3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">更改SSH设置。</p><pre class="js jt ju jv fd lx lv ly lz aw ma bi"><span id="3b5b" class="mb ke hi lv b fi mc md l me mf"># Locate PasswordAuthentication, and change PasswordAuthentication no to: PasswordAuthentication yes<br/>sudo vi /etc/ssh/sshd_config</span></pre><p id="eace" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">重新启动SSH服务。</p><pre class="js jt ju jv fd lx lv ly lz aw ma bi"><span id="3ae2" class="mb ke hi lv b fi mc md l me mf">sudo systemctl restart sshd</span></pre><h1 id="cdfd" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">获取KubeKey部署工具</h1><p id="b998" class="pw-post-body-paragraph if ig hi ih b ii lb ik il im lc io ip iq lg is it iu lh iw ix iy li ja jb jc hb bi translated">从<a class="ae mg" href="https://github.com/kubesphere/kubekey/releases" rel="noopener ugc nofollow" target="_blank"> Github发布页面</a>下载KubeKey或运行以下命令:</p><pre class="js jt ju jv fd lx lv ly lz aw ma bi"><span id="a317" class="mb ke hi lv b fi mc md l me mf">curl -sfL https://get-kk.kubesphere.io | VERSION=v1.1.1 sh -</span></pre><h1 id="2f06" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">使用KubeKey部署Kubernetes集群</h1><p id="abc7" class="pw-post-body-paragraph if ig hi ih b ii lb ik il im lc io ip iq lg is it iu lh iw ix iy li ja jb jc hb bi translated">创建<code class="du ls lt lu lv b">config-HA.yaml</code>部署配置文件。</p><pre class="js jt ju jv fd lx lv ly lz aw ma bi"><span id="371b" class="mb ke hi lv b fi mc md l me mf">./kk create config -f config-HA.yaml</span></pre><h1 id="84bb" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">配置群集信息</h1><p id="ead9" class="pw-post-body-paragraph if ig hi ih b ii lb ik il im lc io ip iq lg is it iu lh iw ix iy li ja jb jc hb bi translated">在配置文件中配置集群信息。更多信息，请参见<a class="ae mg" href="https://kubesphere.io/docs/installing-on-linux/introduction/multioverview/" rel="noopener ugc nofollow" target="_blank">多节点安装</a>和<a class="ae mg" href="https://kubesphere.io/docs/installing-on-linux/introduction/vars/" rel="noopener ugc nofollow" target="_blank"> Kubernetes集群配置</a>。</p><pre class="js jt ju jv fd lx lv ly lz aw ma bi"><span id="6962" class="mb ke hi lv b fi mc md l me mf">apiVersion: kubekey.kubesphere.io/v1alpha1<br/>kind: Cluster<br/>metadata:<br/>  name: sample<br/>spec:<br/>  hosts:<br/>  - {name: master1, address: 192.168.0.10, internalAddress: 192.168.0.10, user: ubuntu, password: password}<br/>  - {name: master2, address: 192.168.0.11, internalAddress: 192.168.0.11, user: ubuntu, password: password}<br/>  - {name: master3, address: 192.168.0.12, internalAddress: 192.168.0.12, user: ubuntu, password: password}<br/>  roleGroups:<br/>    etcd:<br/>    - master1<br/>    - master2<br/>    - master3<br/>    master:<br/>    - master1<br/>    - master2<br/>    - master3<br/>    worker:<br/>    - master1<br/>    - master2<br/>    - master3<br/>  controlPlaneEndpoint:<br/>    domain: lb.kubesphere.local<br/>    address: "192.168.0.151"<br/>    port: 6443<br/>  kubernetes:<br/>    version: v1.19.8<br/>    imageRepo: kubesphere<br/>    clusterName: cluster.local<br/>  network:<br/>    plugin: calico<br/>    kubePodsCIDR: 10.233.64.0/18<br/>    kubeServiceCIDR: 10.233.0.0/18<br/>  registry:<br/>    registryMirrors: []<br/>    insecureRegistries: []<br/>  addons: []</span></pre><h1 id="7001" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">创建一个Kubernetes集群</h1><p id="daf2" class="pw-post-body-paragraph if ig hi ih b ii lb ik il im lc io ip iq lg is it iu lh iw ix iy li ja jb jc hb bi translated">运行以下命令在AWS上安装Kubernetes:</p><pre class="js jt ju jv fd lx lv ly lz aw ma bi"><span id="f9c3" class="mb ke hi lv b fi mc md l me mf">./kk create cluster -f config-HA.yaml</span></pre><blockquote class="lk ll lm"><p id="2780" class="if ig ln ih b ii ij ik il im in io ip lo ir is it lp iv iw ix lq iz ja jb jc hb bi translated">如果显示的信息表明conntrack丢失，运行<code class="du ls lt lu lv b">sudo apt-get install conntrack</code>命令安装conntrack。</p></blockquote><h1 id="61ac" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">检查部署结果</h1><p id="4f54" class="pw-post-body-paragraph if ig hi ih b ii lb ik il im lc io ip iq lg is it iu lh iw ix iy li ja jb jc hb bi translated">运行以下命令检查部署结果:</p><ul class=""><li id="aae9" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">运行<code class="du ls lt lu lv b">kubectl get node -o wide</code>命令。如果所有集群节点的<strong class="ih hj">状态</strong>栏中显示<code class="du ls lt lu lv b">Ready</code>，则集群节点运行正常。</li></ul><pre class="js jt ju jv fd lx lv ly lz aw ma bi"><span id="ba16" class="mb ke hi lv b fi mc md l me mf">ubuntu@master1:~$ kubectl get node -o wide<br/>NAME      STATUS   ROLES             AGE          VERSION   <br/>master1   Ready    master,worker     3m45s        v1.19.8<br/>master2   Ready    master,worker     95s          v1.19.8<br/>master3   Ready    master,worker     2m           v1.19.8</span><span id="d83d" class="mb ke hi lv b fi mh md l me mf">INTERNAL-IP        EXTERNAL-IP         OS-IMAGE<br/>192.168.0.10       &lt;none&gt;              Ubuntu 18.04.5 LTS<br/>192.168.0.11       &lt;none&gt;              Ubuntu 18.04.5 LTS<br/>192.168.0.12       &lt;none&gt;              Ubuntu 18.04.5 LTS</span><span id="8d60" class="mb ke hi lv b fi mh md l me mf"><br/>ERNEL-VERSION      CONTAINER-RUNTIME<br/>5.4.0-1045-aws     docker://20.10.7<br/>5.4.0-1045-aws     docker://20.10.7<br/>5.4.0-1045-aws     docker://20.10.7</span></pre><ul class=""><li id="8e94" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">运行<code class="du ls lt lu lv b">kubectl get po -A</code>命令。如果<code class="du ls lt lu lv b">Running</code>显示在<code class="du ls lt lu lv b">kube-system</code>名称空间中所有组件的<strong class="ih hj">状态</strong>列中，则所有Kubernetes组件运行正常。</li></ul><pre class="js jt ju jv fd lx lv ly lz aw ma bi"><span id="0e95" class="mb ke hi lv b fi mc md l me mf">ubuntu@master1:~$ kubectl get po -A<br/>NAMESPACE     NAME          READY   STATUS          RESTARTS     AGE<br/>kube-system   calico-kube<br/>             -controllers<br/>             -8f59968d4<br/>             -gchrc         1/1     Running         0          104s<br/>kube-system   calico<br/>             -node-c65wl    1/1     Running         0          105s<br/>kube-system   calico-node<br/>             -kt4qd         1/1     Running         0          105s<br/>kube-system   calico<br/>             -node-njxsh    1/1     Running         0          105s<br/>kube-system   coredns<br/>             -86cfc99d74<br/>             -ldx9b         1/1     Running         0          3m59s<br/>kube-system   coredns<br/>             -86cfc99d74<br/>             -pg5lj         1/1     Running         0          3m59s<br/>kube-system   kube-apiserver<br/>             -master1       1/1     Running         0          4m19s<br/>kube-system   kube-apiserver<br/>             -master2       1/1     Running         0          115s<br/>kube-system   kube-apiserver<br/>             -master3       1/1     Running         0          2m33s<br/>kube-system   kube<br/>             -controller<br/>             -manager<br/>             -master1       1/1     Running         0          4m19s<br/>kube-system   kube<br/>             -controller<br/>             -manager<br/>             -master2       1/1     Running         0          115s<br/>kube-system   kube<br/>             -controller<br/>             -manager<br/>             -master3       1/1     Running         0          2m34s<br/>kube-system   kube-proxy<br/>             -klths         1/1     Running         0          2m12s<br/>kube-system   kube-proxy<br/>             -nm79t         1/1     Running         0          3m59s<br/>kube-system   kube-proxy<br/>             -nsvmh         1/1     Running         0          2m37s<br/>kube-system   kube-scheduler<br/>             -master1       1/1     Running         0          4m19s<br/>kube-system   kube-scheduler<br/>             -master2       1/1     Running         0          115s<br/>kube-system   kube-scheduler<br/>             -master3       1/1     Running         0          2m34s<br/>kube-system   nodelocaldns<br/>             -nblsl         1/1     Running         0          2m12s<br/>kube-system   nodelocaldns<br/>             -q78k4         1/1     Running         0          3m54s<br/>kube-system   nodelocaldns<br/>             -q9244         1/1     Running         0          2m37s</span></pre><ul class=""><li id="a889" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">运行<code class="du ls lt lu lv b">kubectl get ep</code>命令。如果所有主节点的IP地址都显示在<strong class="ih hj">端点</strong>列中，那么对于AWS管理的Kubernetes集群，HA运行正常。</li></ul><pre class="js jt ju jv fd lx lv ly lz aw ma bi"><span id="39d7" class="mb ke hi lv b fi mc md l me mf">ubuntu@master1:~$ kubectl get ep<br/>NAME         ENDPOINTS                                               AGE<br/>kubernetes   192.168.0.10:6443,192.168.0.11:6443,192.168.0.12:6443   5m10s</span></pre><h1 id="15f0" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">关于KubeSphere</h1><p id="eb84" class="pw-post-body-paragraph if ig hi ih b ii lb ik il im lc io ip iq lg is it iu lh iw ix iy li ja jb jc hb bi translated">KubeSphere是一个基于Kubernetes的开源容器平台，其核心是应用程序。它提供全栈It自动化操作和简化的开发运维工作流。</p><p id="cafb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae mg" href="https://kubesphere.io/" rel="noopener ugc nofollow" target="_blank"> KubeSphere </a>已被全球数千家企业采用，如<strong class="ih hj"> Aqara、新浪、奔来、中国太平、华夏银行、国药控股、微众银行、Geko Cloud、VNG公司、Radore </strong>。KubeSphere为运维提供向导界面和各种企业级功能，包括Kubernetes资源管理、<a class="ae mg" href="https://kubesphere.io/devops/" rel="noopener ugc nofollow" target="_blank">、DevOps (CI/CD) </a>、应用生命周期管理、服务网格、多租户管理、<a class="ae mg" href="https://kubesphere.io/observability/" rel="noopener ugc nofollow" target="_blank">监控</a>、日志记录、警报、通知、存储和网络管理以及GPU支持。有了KubeSphere，企业能够快速建立一个强大且功能丰富的容器平台。</p><p id="b5cb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">欲了解更多信息，请访问<a class="ae mg" href="https://kubesphere.io/" rel="noopener ugc nofollow" target="_blank"> https://kubesphere.io </a></p></div></div>    
</body>
</html>