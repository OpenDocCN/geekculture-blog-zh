<html>
<head>
<title>How to if Grand Total calculation is different in Tableau?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如果总计计算在表格中不一样怎么办？</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/how-to-if-grand-total-calculation-is-different-in-tableau-d8c411ca0ad7?source=collection_archive---------11-----------------------#2022-07-30">https://medium.com/geekculture/how-to-if-grand-total-calculation-is-different-in-tableau-d8c411ca0ad7?source=collection_archive---------11-----------------------#2022-07-30</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/2b9957e17cd79c317a2f5251f2f69818.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hNaZjc3xy33LbjxLYIhxMw.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx">Grand Total (Pic Credit: Author)</figcaption></figure><div class=""/><p id="28b6" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">您是否遇到过这样的情况，您的总计计算可能与行中指定的略有不同？让我给你一个背景。为此，让我们考虑一下我们良好的ol' Tableau超市数据集。</p><p id="8b05" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">对于这个数据集，我们将使用可以按利润排序的“产品名称”列。该列可以进一步按三个值排序——前N、后N和全部——其中用户选择的变量“N”是可见的排序行数，例如，<strong class="iw hy">前10位</strong>、<strong class="iw hy">后20位</strong>等等。</p><p id="c604" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><em class="js">(这里，我将假设读者知道如何使用集合来排序和显示参数中输入的行数。如果没有，请参考博客末尾给出的工作簿链接。)</em></p><p id="95d1" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">此外，对于显示的每个产品名称行，要求是首先在选择的N个产品中显示该产品的“利润贡献百分比”;其次，在数据集中的所有产品中。</p><p id="35d6" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">对于那些不知情的人来说，产品的利润贡献百分比是通过将产品的利润除以所选产品或数据集中的产品的总利润来评估的。</p><p id="7869" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">当我选择“所有”行时，总计将是100%。但是当选择顶部/底部时，总计将显示“N”参数中指定的可见产品(记录)的利润贡献百分比。让我们来看看实现这一目标的两种方法。</p><p id="1c4c" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">首先，找到所选可见产品(记录)的利润贡献百分比。将此计算命名为“%排序范围中的利润贡献”。此计算将用于进一步的计算。</p><figure class="ju jv jw jx fd hk er es paragraph-image"><div class="er es jt"><img src="../Images/852f6a21f53765a255eb95f3e9ad69d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1262/format:webp/1*xWZ8MXrYZ5tbO7dT2BjZTQ.png"/></div><figcaption class="hr hs et er es ht hu bd b be z dx">%Profit Contribution in Sort universe (Pic Credit: Author)</figcaption></figure><h2 id="4b00" class="jy jz hx bd ka kb kc kd ke kf kg kh ki jf kj kk kl jj km kn ko jn kp kq kr ks bi translated">方法1</h2><p id="a418" class="pw-post-body-paragraph iu iv hx iw b ix kt iz ja jb ku jd je jf kv jh ji jj kw jl jm jn kx jp jq jr hb bi translated">第一种方法是我们使用最小值和最大值函数。我更喜欢这个，因为这是一个简单的方法。但是这种方法有一个问题，这个问题将在本博客后面讨论。创建以下名为“%利润贡献(最小最大值)”的计算字段。</p><figure class="ju jv jw jx fd hk er es paragraph-image"><div class="er es ky"><img src="../Images/93e1d7f28ce5061a7e168a2bb94f3f30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/format:webp/1*kQJ0vV0OQHkmPndugulnKQ.png"/></div><figcaption class="hr hs et er es ht hu bd b be z dx">% Profit Contribution (min max) (Pic Credit: Author)</figcaption></figure><h2 id="e45a" class="jy jz hx bd ka kb kc kd ke kf kg kh ki jf kj kk kl jj km kn ko jn kp kq kr ks bi translated">方法2</h2><p id="31ff" class="pw-post-body-paragraph iu iv hx iw b ix kt iz ja jb ku jd je jf kv jh ji jj kw jl jm jn kx jp jq jr hb bi translated">第二种方法是使用Size函数。在详图标记中放置一个名为“SIZE”的计算字段，包含以下文本:Size()。</p><p id="ac4d" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这里要确保两件事。在工作表中放置“大小”字段之前，在工作表中放置计算“%利润贡献”时需要考虑的所有维度。然后，右键单击计算字段“大小”，并选择“编辑表格计算”。在这种情况下，它将是表(下)。</p><figure class="ju jv jw jx fd hk er es paragraph-image"><div class="er es kz"><img src="../Images/0839d6e0cffadd6474b7c41725cd3338.png" data-original-src="https://miro.medium.com/v2/resize:fit:676/format:webp/1*kgLj__HiYabHph2pmMwm_Q.png"/></div><figcaption class="hr hs et er es ht hu bd b be z dx">Table Calculations (Pic Credit: Author)</figcaption></figure><p id="acf0" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">但是您在上述对话框的所有可见选项中选择什么取决于场景。有一些要求，其中有一个行总计和“跨表”需要选择。或者需要执行行总计，然后是列总计，需要选择选项“表格(横向然后向下)”。您甚至可以选择特定的维度，按照您希望的特定顺序进行计算。因此，简而言之，评估场景，将维度放在行/列栏中，然后相应地选择选项。</p><p id="ffb6" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">完成此步骤后，检查“总计”列中出现的“大小”值，并在下面的计算中使用该值。现在用下面的文本创建一个名为“%利润贡献(大小)”的字段。</p><figure class="ju jv jw jx fd hk er es paragraph-image"><div class="er es la"><img src="../Images/f041faf85d81014a57334004999cc0dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1322/format:webp/1*p-3UcuQbedVTHzqYXZapCQ.png"/></div><figcaption class="hr hs et er es ht hu bd b be z dx">% Profit Contribution (size) (Pic Credit: Author)</figcaption></figure><p id="f140" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">将此计算字段放在工作表上后，右键单击计算字段并选择“编辑表格计算”，然后对上面的“大小”计算字段执行相同的设置。</p><p id="f5e1" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">要全面理解这一点，请再添加一列利润，右键单击并选择速算表计算下的总百分比。您会注意到，总计将始终是100%，因为它将是所有可见产品的利润贡献百分比的总和。在我们的谈话中，除了客观地看待事物和进行比较之外，我们没有其他用处。</p><p id="2995" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">因此，这就结束了要采取的步骤，但人们不知道最小最大函数的问题是什么。</p><h2 id="3fca" class="jy jz hx bd ka kb kc kd ke kf kg kh ki jf kj kk kl jj km kn ko jn kp kq kr ks bi translated">使用最小最大函数的问题</h2><p id="0d09" class="pw-post-body-paragraph iu iv hx iw b ix kt iz ja jb ku jd je jf kv jh ji jj kw jl jm jn kx jp jq jr hb bi translated">当我们在“N”参数中输入1时，我们使用MIN MAX函数的列中的总计显示错误。因此，为了避免这种情况，将“N”参数的最小值限制为2。</p><p id="d56b" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我建议访问这个<a class="ae lb" href="https://public.tableau.com/app/profile/priya.yogendra/viz/HowtoifGrandTotalFormulaisdifferent/DifferentGrandTotalFormula?publish=yes" rel="noopener ugc nofollow" target="_blank">链接</a>，以便更好地了解它。我把这些放在一个仪表板上，你可以在那里测试，甚至可以下载工作簿。下次见。再见。</p></div></div>    
</body>
</html>