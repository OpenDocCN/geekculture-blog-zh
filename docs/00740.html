<html>
<head>
<title>Firebase Auth with React and Typescript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">具有反应和类型脚本的Firebase Auth</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/firebase-auth-with-react-and-typescript-abeebcd7940a?source=collection_archive---------0-----------------------#2021-03-12">https://medium.com/geekculture/firebase-auth-with-react-and-typescript-abeebcd7940a?source=collection_archive---------0-----------------------#2021-03-12</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="002e" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">了解在React项目中使用Firebase集成身份验证系统是多么容易。</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es ix"><img src="../Images/ac982f1104e17ab0746ca0e6e82abcce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/1*22qKX_yPQ8ZaDG1wgyhR4Q.png"/></div></figure><p id="d282" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">今天，我们将通过一个非常简单的例子来演示如何在React应用程序中设置身份验证。身份验证可能是一个非常可怕的话题，但由于Firebase等工具，现在向应用程序添加身份验证变得非常简单。</p></div><div class="ab cl kb kc gp kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hb hc hd he hf"><h1 id="2679" class="ki kj hi bd kk kl km kn ko kp kq kr ks io kt ip ku ir kv is kw iu kx iv ky kz bi translated">先决条件</h1><p id="c119" class="pw-post-body-paragraph jf jg hi jh b ji la ij jk jl lb im jn jo lc jq jr js ld ju jv jw le jy jz ka hb bi translated">为了更好地理解本演练，您需要对以下技术有基本的了解:</p><ul class=""><li id="d1f6" class="lf lg hi jh b ji jj jl jm jo lh js li jw lj ka lk ll lm ln bi translated">反应</li><li id="bbf2" class="lf lg hi jh b ji lo jl lp jo lq js lr jw ls ka lk ll lm ln bi translated">Typescript(我将详细介绍typescript的各个部分，所以如果您不太熟悉，也不用担心)</li><li id="df58" class="lf lg hi jh b ji lo jl lp jo lq js lr jw ls ka lk ll lm ln bi translated">Java Script语言</li></ul><p id="0b57" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated"><em class="lt">节点和NPM也需要安装</em></p></div><div class="ab cl kb kc gp kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hb hc hd he hf"><h1 id="2935" class="ki kj hi bd kk kl km kn ko kp kq kr ks io kt ip ku ir kv is kw iu kx iv ky kz bi translated">我们将建造什么</h1><p id="4d82" class="pw-post-body-paragraph jf jg hi jh b ji la ij jk jl lb im jn jo lc jq jr js ld ju jv jw le jy jz ka hb bi translated">为了演示使用Firebase在React应用程序中设置身份验证是多么简单，我也将保持这个应用程序极其简单。基本上，我们要建立的是一个应用程序，将欢迎用户登录时，他们在网站上，如果没有用户将显示一个登录屏幕。这将提供一个很好的构建模块，可以在任何需要身份验证的应用程序中使用。</p><p id="cc6e" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated"><strong class="jh hj">用户未登录时会是这样的</strong></p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="er es lu"><img src="../Images/c95f64540f33a8fb1b47d2132d3a77c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JzYtJbxVhDektMRlPfOuGg.png"/></div></div><figcaption class="lz ma et er es mb mc bd b be z dx">Sign In Screen</figcaption></figure><p id="6889" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated"><strong class="jh hj">用户登录</strong>后会是这样</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="er es lu"><img src="../Images/405cebb5c291922a3fa38cf6375b1d2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G6pv5D5v79xiqFDEFyA5hQ.png"/></div></div><figcaption class="lz ma et er es mb mc bd b be z dx">Signed In Screen</figcaption></figure></div><div class="ab cl kb kc gp kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hb hc hd he hf"><h1 id="7ac4" class="ki kj hi bd kk kl km kn ko kp kq kr ks io kt ip ku ir kv is kw iu kx iv ky kz bi translated">我们将如何建造它</h1><p id="3955" class="pw-post-body-paragraph jf jg hi jh b ji la ij jk jl lb im jn jo lc jq jr js ld ju jv jw le jy jz ka hb bi translated">如上所述，我们将使用react和typescript来构建这个应用程序。为了进一步简化这个过程，我们将使用create-react-app，它抽象出创建react应用程序背后的设置过程。第一步是打开一个新的终端，并导航到您想要创建项目的目录。一旦你选择了一个你满意的目录，你将运行下面的命令来创建我们将要使用的react应用程序。</p><pre class="iy iz ja jb fd md me mf mg aw mh bi"><span id="46fd" class="mi kj hi me b fi mj mk l ml mm">npx create-react-app --template typescript firebase-auth-tutorial</span></pre><p id="d659" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">本质上，这是要做的是样板一个反应应用程序，使用typescript。安装完成后，运行此命令切换到项目。</p><pre class="iy iz ja jb fd md me mf mg aw mh bi"><span id="0847" class="mi kj hi me b fi mj mk l ml mm">cd firebase-auth-tutorial</span></pre><p id="07b8" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">一旦我们在命令行中导航到该项目，我们将安装该项目所需的几个包</p><pre class="iy iz ja jb fd md me mf mg aw mh bi"><span id="22de" class="mi kj hi me b fi mj mk l ml mm">npm install firebase react-bootstrap bootstrap</span></pre><p id="d2e1" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">我们需要<strong class="jh hj"> firebase </strong>包来为教程做认证设置，我们将使用<strong class="jh hj"> react-bootstrap </strong>和<strong class="jh hj"> bootstrap </strong>包来设计我们的应用程序。由于本教程的重点不是学习css，我们将使用bootstrap来简化事情。</p><p id="5a20" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">现在项目已经设置好了，你可以在你选择的代码编辑器中打开<em class="lt"> firebase-auth-tutorial </em>文件夹。我强烈推荐Visual Studio代码。它是由微软创建的免费代码编辑器。如果你想试试的话，我在下面放了一个链接。</p><div class="mn mo ez fb mp mq"><a href="https://code.visualstudio.com/" rel="noopener  ugc nofollow" target="_blank"><div class="mr ab dw"><div class="ms ab mt cl cj mu"><h2 class="bd hj fi z dy mv ea eb mw ed ef hh bi translated">Visual Studio代码-代码编辑。重新定义的</h2><div class="mx l"><h3 class="bd b fi z dy mv ea eb mw ed ef dx translated">Visual Studio Code是一个重新定义和优化的代码编辑器，用于构建和调试现代web和云…</h3></div><div class="my l"><p class="bd b fp z dy mv ea eb mw ed ef dx translated">code.visualstudio.com</p></div></div><div class="mz l"><div class="na l nb nc nd mz ne jd mq"/></div></div></a></div><p id="bdbb" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">在您选择的代码编辑器中打开项目后，下一步是删除本教程中不必要的文件。您可以删除src文件夹中的以下文件:</p><ul class=""><li id="bf7e" class="lf lg hi jh b ji jj jl jm jo lh js li jw lj ka lk ll lm ln bi translated">App.css</li><li id="bd9a" class="lf lg hi jh b ji lo jl lp jo lq js lr jw ls ka lk ll lm ln bi translated">App.test.tsx</li><li id="9f1e" class="lf lg hi jh b ji lo jl lp jo lq js lr jw ls ka lk ll lm ln bi translated">index.css</li><li id="1a78" class="lf lg hi jh b ji lo jl lp jo lq js lr jw ls ka lk ll lm ln bi translated">徽标. svg</li><li id="9df8" class="lf lg hi jh b ji lo jl lp jo lq js lr jw ls ka lk ll lm ln bi translated">reportWebVitals.ts</li><li id="f8f6" class="lf lg hi jh b ji lo jl lp jo lq js lr jw ls ka lk ll lm ln bi translated">setupTest.ts</li></ul><p id="1958" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">完成后，src文件夹应该如下所示</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es nf"><img src="../Images/d027bf823cef77de74c0e2c64710d709.png" data-original-src="https://miro.medium.com/v2/resize:fit:510/format:webp/1*cmdPUV0aZmkvUzRU6NcGwg.png"/></div></figure><p id="b86f" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">我们现在将使用以下代码替换App.tsx和index.tsx文件。基本上，我们将尽可能简化它。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ng nh l"/></div></figure><p id="e3fb" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">完成这些更改后，您现在应该能够运行代码了。为此，您只需在终端的项目文件夹中运行以下命令</p><pre class="iy iz ja jb fd md me mf mg aw mh bi"><span id="2737" class="mi kj hi me b fi mj mk l ml mm">npm start</span></pre></div><div class="ab cl kb kc gp kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hb hc hd he hf"><h1 id="3d51" class="ki kj hi bd kk kl km kn ko kp kq kr ks io kt ip ku ir kv is kw iu kx iv ky kz bi translated">Firebase设置</h1><p id="dcfc" class="pw-post-body-paragraph jf jg hi jh b ji la ij jk jl lb im jn jo lc jq jr js ld ju jv jw le jy jz ka hb bi translated">设置Firebase是一个相当简单的过程。在接下来的几分钟里，我将向您介绍如何进行这项工作。</p><p id="be18" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">重要的事情是第一位的。你需要一个gmail账户来使用firebase。我假设大多数人已经有了这个，但如果没有，你将需要一个。</p><p id="8ec0" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">之后，您可以导航到以下链接</p><div class="mn mo ez fb mp mq"><a href="https://console.firebase.google.com/" rel="noopener  ugc nofollow" target="_blank"><div class="mr ab dw"><div class="ms ab mt cl cj mu"><h2 class="bd hj fi z dy mv ea eb mw ed ef hh bi translated">登录- Google帐户</h2><div class="mx l"><h3 class="bd b fi z dy mv ea eb mw ed ef dx translated">编辑描述</h3></div><div class="my l"><p class="bd b fp z dy mv ea eb mw ed ef dx translated">console.firebase.google.com</p></div></div><div class="mz l"><div class="ni l nb nc nd mz ne jd mq"/></div></div></a></div><p id="ba55" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">如果您尚未登录，系统会提示您登录您的google帐户。一旦你登录，你会看到一个类似这样的屏幕</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="er es nj"><img src="../Images/0bd5d4fe0e8a629e2f600fca2bd1f009.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EXgf6sVooEBIlf34gUIEHA.png"/></div></div></figure><p id="2f7b" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">如果你已经有了项目，或者如果他们将来改变了这个屏幕的外观，它可能会稍有变化，但是屏幕应该看起来像这样。接下来，我们将单击“创建项目”按钮。对于项目名称，您可以随意称呼它，但是为了清楚起见，我将称它为firebase-auth-tut</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="er es nk"><img src="../Images/f77d5b955513f4da1568edcf843c65b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eleQixjs5BoFuLDY9aaH2g.png"/></div></div></figure><p id="97df" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">接下来，它将询问您是否要为项目设置分析。您可以取消选中该框，因为我们不会在该项目中使用分析。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="er es nl"><img src="../Images/d95047c29117e159b10b33216037714b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UtCns292VoCe1s-FDrd8nQ.png"/></div></div></figure><p id="def0" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">现在继续并点击创建项目。这可能需要一段时间来为您设置好一切，但还不算太糟。</p><p id="2acf" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">你将会看到一个类似如下的屏幕，但是在本教程中，我们只对认证感兴趣。那么，继续操作，单击“authentication ”,我们接下来将进行设置。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="er es nm"><img src="../Images/537567e0faf37c92cb2ab0ae83af772a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yN1ABgwIbUGFeSfjyy3o5Q.png"/></div></div></figure><p id="1cb7" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">一旦你点击了认证。继续并点击开始。之后，你会看到一个屏幕，上面有所有不同的签名提供者和配置选项。这个屏幕可能看起来令人生畏，但它真的不是。我们真正关心的唯一事情是登录提供商下面的电子邮件/密码部分。请点击启用，然后按保存。你可以参考下面的截图了解更多信息。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="er es nn"><img src="../Images/7641f719d534434afdadf820f2858485.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DuHw8PFGwtWFBt6jyRVx1w.png"/></div></div></figure><p id="1e03" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">启用此功能后，在我们开始编码之前，firebase控制台中还有最后一件事情要处理🎉🎉🎉</p><p id="904c" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">最后一步是创建我们的网络应用程序，这也非常简单。我们只需要再点击几下按钮。</p><p id="8d48" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">单击返回项目概述页面，然后单击web应用程序图标，如下图中黄色框所示。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="er es no"><img src="../Images/d01e98332ead7387b0f437e8e1030215.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WR5NeTneUIIw4HUuwRtYCQ.png"/></div></div></figure><p id="8668" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">你会看到一个类似这样的屏幕，要求输入一个应用昵称，这是firebase中web应用所必需的。任何名字都可以，但我会像下面的截图一样称呼我的名字。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es np"><img src="../Images/5beddf7ee651b212d4cb82d5403572da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1084/format:webp/1*WUb7VF_IxADDogdZMhc5Ng.png"/></div></figure><p id="a601" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">命名后点击注册应用程序。然后，您应该会看到类似这样的代码块。你不会需要它的大部分，但你可以继续复制和存储截图中的黄色框。</p><p id="dbfa" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">我给你看我的证书，因为我将在本教程结束后删除我的项目。尽管只要设置了适当的安全规则(另一个主题),共享firebase凭证通常是安全的，但最好不要与其他人共享这些凭证。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="er es nq"><img src="../Images/12d9a408bf7db11d580f3e172c9077fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E8kZnyEr1a8bywWMSbSSOA.png"/></div></div></figure><p id="f085" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">好吧，就这样。您可以点击继续进入控制台。Firebase已经准备就绪。现在开始编码！</p></div><div class="ab cl kb kc gp kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hb hc hd he hf"><h1 id="69e0" class="ki kj hi bd kk kl km kn ko kp kq kr ks io kt ip ku ir kv is kw iu kx iv ky kz bi translated">如何在React应用程序中编写使用Firebase的代码</h1><p id="c6df" class="pw-post-body-paragraph jf jg hi jh b ji la ij jk jl lb im jn jo lc jq jr js ld ju jv jw le jy jz ka hb bi translated">我们要对代码做的第一件事是在src目录下创建一个名为<strong class="jh hj"> firebaseSetup.ts. </strong>的新文件，名字并不重要，但这就是我要给它起的名字。这是我们需要你的证件的地方。我将在下面解释。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ng nh l"/></div></figure><p id="2d3a" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">基本上，这个文件负责建立与firebase的连接，并为我们提供从react应用程序与它交互所需的工具。因为我们在firebase应用程序中唯一要做的事情就是身份验证，这是我们必须引入应用程序的唯一库。您可以在第2行看到我们正在导入firebase/auth名称空间。在第15行，我们导出auth，这基本上是我们需要在react应用程序中登录和退出的所有方法和函数。还要记住<strong class="jh hj">非常重要的一点是</strong>，你<strong class="jh hj">用我让你复制并保存在某个地方的行来替换</strong>行<strong class="jh hj">5–10</strong>(否则你的应用将无法工作)。</p><p id="7dd1" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">安装好firebase并准备在项目中使用。是时候进入本教程的反应部分了。我们要做的第一件事是设置一个上下文和提供者，这将允许我们在react应用程序中的任何地方传递登录的用户。在这么小的应用程序中这样做没有太大的意义，但这将是中型到大型react应用程序的救命稻草，在这些应用程序中，将道具传递到深度嵌套的组件会变得非常困难。</p><p id="3e2c" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">我们将在src目录中创建两个新文件夹和文件。<strong class="jh hj">context/auth context . tsx</strong>和<strong class="jh hj">provider/auth provider . tsx</strong></p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ng nh l"/></div></figure><p id="a5f5" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">我们的<strong class="jh hj"> AuthContext.tsx </strong>文件非常简单。它基本上只是创建我们的上下文，给它一个typescript类型，并给它一个null初始值。&lt;燃烧基地。对于不熟悉的人来说，创建上下文后的User | null &gt;就是所谓的typescript泛型。在这个场景中，我们所说的是我们的AuthContext的类型可以是两种情况之一。要么是<em class="lt">的火力基地。用户</em>或<em class="lt">为空</em>。当用户未登录时，值将为Null。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ng nh l"/></div></figure><p id="f6e1" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">这是我们的<strong class="jh hj"> AuthProvider.tsx </strong>文件，它所做的高级总结是，每当我们登录、创建帐户或注销时，它都会相应地设置我们用户的状态。当没有用户登录时，它将状态设置为登录用户或null。</p><h2 id="5951" class="mi kj hi bd kk nr ns nt ko nu nv nw ks jo nx ny ku js nz oa kw jw ob oc ky od bi translated">该文件的类型脚本部分的简短描述</h2><p id="ae7f" class="pw-post-body-paragraph jf jg hi jh b ji la ij jk jl lb im jn jo lc jq jr js ld ju jv jw le jy jz ka hb bi translated">在第6行，我们将AuthProvider的类型设置为React。FC(基本上是功能组件)。我们这样做是因为typescript无法自己推断AuthProvider的类型。这很重要，因为如果它不知道正确的类型，我们就无法在这一行分解子元素。</p><h2 id="3a10" class="mi kj hi bd kk nr ns nt ko nu nv nw ks jo nx ny ku js nz oa kw jw ob oc ky od bi translated">对使用效果中实际发生情况的解释</h2><p id="6b93" class="pw-post-body-paragraph jf jg hi jh b ji la ij jk jl lb im jn jo lc jq jr js ld ju jv jw le jy jz ka hb bi translated">在第10行，我们创建了一个对firebase的订阅，每当用户的状态改变时，它都会向我们反馈信息。firebase反馈的信息是我们函数的第一个参数(我称之为firebaseUser)。这要么会作为一个<em class="lt">火基回来。用户</em>类型或<em class="lt">为空</em>。这非常方便，因为这正是我们所期望的🤔</p><h1 id="bf3d" class="ki kj hi bd kk kl oe kn ko kp of kr ks io og ip ku ir oh is kw iu oi iv ky kz bi translated">现在是时候编写UI了</h1><p id="776c" class="pw-post-body-paragraph jf jg hi jh b ji la ij jk jl lb im jn jo lc jq jr js ld ju jv jw le jy jz ka hb bi translated">就像我之前在教程中说的，为了简单起见，我们不会为这个应用编写自己的css，而是使用react-bootstrap。在我们开始使用bootstrap编写ui之前，我们将首先在之前创建的AuthProvider组件中包装我们的应用程序，并导入bootstrap所需的css文件。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ng nh l"/></div></figure><p id="9837" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">所有这些都是在整个应用程序中提供身份验证上下文，因此无论您在应用程序中的哪个位置，都可以获取登录的用户。</p><h2 id="1026" class="mi kj hi bd kk nr ns nt ko nu nv nw ks jo nx ny ku js nz oa kw jw ob oc ky od bi translated">现在该使用react-bootstrap了</h2><p id="374c" class="pw-post-body-paragraph jf jg hi jh b ji la ij jk jl lb im jn jo lc jq jr js ld ju jv jw le jy jz ka hb bi translated">我不会详细解释react-bootstrap组件的功能，但是它们没有什么特别的。如果你想为此创建自己的设计，请随意(我鼓励你这样做)。如果没有，你可以跟着我做什么。</p><p id="3c45" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">这是我们应用程序的基本布局</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ng nh l"/></div></figure><p id="b677" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">现在，您应该能够使用</p><pre class="iy iz ja jb fd md me mf mg aw mh bi"><span id="96c2" class="mi kj hi me b fi mj mk l ml mm">npm start</span></pre><p id="8097" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">如果你跟着我，你应该得到类似这样的东西。如果不多呆一会儿。我们即将为我们的应用程序实现登录注销逻辑。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="er es oj"><img src="../Images/2a234296ac611ff5580fd1d569b094be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hLGVGNzx1J90mKWMCuLg0A.png"/></div></div></figure><p id="4e98" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">在我们能够创建帐户之前，我们需要引用电子邮件和密码的值。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ng nh l"/></div></figure><p id="c2bc" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">创建参照后，可以将它们添加到表单控件中。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ng nh l"/></div></figure><p id="3802" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">添加了refs之后，是时候进行身份验证逻辑了。登录、注销和创建帐户的时间到了。</p><p id="17b0" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">我们可以将以下函数添加到refs下面的应用程序函数中。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ng nh l"/></div></figure><p id="8bd8" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">这就是使用firebase进行身份验证的好处。所有的逻辑都由firebase处理，所以你不用担心。创建了这些函数后，只需点击按钮调用它们，然后更新我们的ui以反映变化。我们快完成了。</p><p id="1fde" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">让我们将点击事件添加到按钮中</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ng nh l"/></div></figure><p id="08ca" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">将这些添加到我们的应用程序后，登录和创建帐户功能现在就可以工作了。最后一个问题。我们的用户界面没有更新以指示我们已登录，我们需要一个注销按钮当我们登录时。</p><p id="a5a7" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">这里有一个解决方案，我将用于演示目的，但请随意使用您自己的想法。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ng nh l"/></div></figure></div><div class="ab cl kb kc gp kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hb hc hd he hf"><h1 id="a5a0" class="ki kj hi bd kk kl km kn ko kp kq kr ks io kt ip ku ir kv is kw iu kx iv ky kz bi translated">包裹</h1><p id="da9c" class="pw-post-body-paragraph jf jg hi jh b ji la ij jk jl lb im jn jo lc jq jr js ld ju jv jw le jy jz ka hb bi translated">仅此而已。我们现在已经使用typescript、react和firebase创建了一个身份验证系统。使用firebase auth之类的东西进行身份验证的好处在于，您不必精通与身份验证相关的所有事情。如果auth实现得不好，很容易给代码库带来安全缺陷，但是有了这样的工具，这就不再是问题了。</p></div></div>    
</body>
</html>