<html>
<head>
<title>When to SQL over Code?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">什么时候对代码使用SQL？</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/when-to-sql-over-code-39047640269?source=collection_archive---------7-----------------------#2022-10-10">https://medium.com/geekculture/when-to-sql-over-code-39047640269?source=collection_archive---------7-----------------------#2022-10-10</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="4e09" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">在SQL查询中执行ETL转换和在JAVA / Python代码中执行ETL转换的优缺点是什么</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/4921ca87fe41b9a3fc873024b3e21ba7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4AoJVAFpMcnvNYlemC3fCA.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Image by <a class="ae jn" href="https://pixabay.com/users/kropekk_pl-114936/?utm_source=link-attribution&amp;amp;utm_medium=referral&amp;amp;utm_campaign=image&amp;amp;utm_content=1835333" rel="noopener ugc nofollow" target="_blank">Anna</a> from Pixabay</figcaption></figure><h1 id="b3ac" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">让我先打个比方</h1><p id="d76f" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">如果你想在印度买一条金项链，金匠可以坐在开普敦或新德里，这是一个技巧和品味的问题。但是你绝对不会为了这个把成吨的T4金矿从南非运到印度。矿石在矿区(或至少在附近)加工，只有黄金被运送。数据库和ETL也是如此！</p><p id="82d9" class="pw-post-body-paragraph kg kh hi ki b kj ld ij kl km le im ko kp lf kr ks kt lg kv kw kx lh kz la lb hb bi translated">就<strong class="ki hj">SQL</strong>而言，您几乎可以在查询服务器上做任何事情，非常高效。现代关系数据库系统，尤其是分布式查询引擎擅长执行复杂的查询。</p><p id="a29e" class="pw-post-body-paragraph kg kh hi ki b kj ld ij kl km le im ko kp lf kr ks kt lg kv kw kx lh kz la lb hb bi translated">SQL的能力和表现力被严重低估了。自从<a class="ae jn" href="https://en.wikipedia.org/wiki/Window_function_%28SQL%29#Window_function" rel="noopener ugc nofollow" target="_blank">窗口函数</a>的引入，很多非严格面向集合的计算都可以在数据库中非常轻松优雅地执行。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es li"><img src="../Images/3f5fc995b9a57a560d949912532e4880.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*X6lNTKr0NK35ibyb"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Photo by <a class="ae jn" href="https://unsplash.com/@zlataky?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Zlaťáky.cz</a> on <a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="fa45" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">数据移动三元组</h1><p id="e48b" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">无论整个应用程序架构如何，都应该始终遵循三条经验法则:</p><ul class=""><li id="8dc6" class="lj lk hi ki b kj ld km le kp ll kt lm kx ln lb lo lp lq lr bi translated">保持数据库和应用程序之间传输的数据量较小(有利于数据库中的计算)</li><li id="f612" class="lj lk hi ki b kj ls km lt kp lu kt lv kx lw lb lo lp lq lr bi translated">保持数据库从磁盘加载的数据量较小(有利于让数据库优化语句以避免不必要的数据访问)</li><li id="baaa" class="lj lk hi ki b kj ls km lt kp lu kt lv kx lw lb lo lp lq lr bi translated">不要用复杂的并发计算将数据库推到它的CPU极限(支持将数据拉入应用程序内存并在那里执行计算)。然而，根据我的经验，如果有一个不错的DBA和一些不错的数据库知识，您不会很快遇到DBs CPU限制</li></ul><h1 id="a4e0" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">开发商做错了什么？</h1><p id="8a08" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">许多开发人员从数据库中获取结果集。使用地图、列表等数据结构。执行过滤和其他处理任务，这些任务可以在数据库级别轻松完成。在SQL中进行最大量的数据处理比在Java或Python代码中编写逻辑更高效、更快。</p><p id="48a6" class="pw-post-body-paragraph kg kh hi ki b kj ld ij kl km le im ko kp lf kr ks kt lg kv kw kx lh kz la lb hb bi translated">虽然这并不总是错的，但它取决于许多因素，但最重要的是:</p><ul class=""><li id="c7a0" class="lj lk hi ki b kj ld km le kp ll kt lm kx ln lb lo lp lq lr bi translated"><strong class="ki hj">计算的复杂性</strong>——更喜欢在应用服务器上进行复杂的计算，因为这样会扩大<em class="lc">的规模</em>；而不是数据库服务器，后者扩展了<em class="lc">和</em></li><li id="cc59" class="lj lk hi ki b kj ls km lt kp lu kt lv kx lw lb lo lp lq lr bi translated"><strong class="ki hj">数据量</strong> —如果您需要访问/聚合大量数据，在数据库服务器上执行将节省带宽，如果聚合可以在索引内完成，还可以节省磁盘IO</li><li id="0c86" class="lj lk hi ki b kj ls km lt kp lu kt lv kx lw lb lo lp lq lr bi translated"><strong class="ki hj">便利性</strong> —SQL不是复杂工作的最佳语言——尤其是对程序性工作来说不太好，但对基于集合的工作来说非常好</li></ul><h2 id="4d54" class="lx jp hi bd jq ly lz ma ju mb mc md jy kp me mf ka kt mg mh kc kx mi mj ke mk bi translated">一些决策建议</h2><ul class=""><li id="72c1" class="lj lk hi ki b kj kk km kn kp ml kt mm kx mn lb lo lp lq lr bi translated">如果它涉及数据—SQL</li><li id="c8a0" class="lj lk hi ki b kj ls km lt kp lu kt lv kx lw lb lo lp lq lr bi translated">如果是计算傅立叶变换—Java/Python代码</li><li id="c680" class="lj lk hi ki b kj ls km lt kp lu kt lv kx lw lb lo lp lq lr bi translated">如果是处理数据—SQL</li><li id="7d40" class="lj lk hi ki b kj ls km lt kp lu kt lv kx lw lb lo lp lq lr bi translated">如果是生成图形—Java/Python代码</li><li id="e852" class="lj lk hi ki b kj ls km lt kp lu kt lv kx lw lb lo lp lq lr bi translated">如果它针对数据执行任何大小、形状或形式的事务—SQL</li></ul><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mo"><img src="../Images/416f3eec8822948aafbb3877baf77a77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rOzoncElqdqIAThTj8Idgg.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">alaa kaddour, via <a class="ae jn" href="https://commons.wikimedia.org/wiki/File:Sql_data_base_with_logo.png" rel="noopener ugc nofollow" target="_blank">Wikimedia</a> Commons</figcaption></figure><h1 id="5736" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">包裹</h1><p id="d8fe" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">对于数据转换逻辑的哪些部分应该在SQL中执行，哪些部分应该在您的代码或应用程序中执行，并没有明确的规定。</p><p id="f267" class="pw-post-body-paragraph kg kh hi ki b kj ld ij kl km le im ko kp lf kr ks kt lg kv kw kx lh kz la lb hb bi translated">然而，现代数据库是水平扩展的。这些系统已经实现了高可用性和容错。利用这一点，尝试简化您的应用程序空间并更有效地执行转换！</p></div><div class="ab cl mp mq gp mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="hb hc hd he hf"><p id="5693" class="pw-post-body-paragraph kg kh hi ki b kj ld ij kl km le im ko kp lf kr ks kt lg kv kw kx lh kz la lb hb bi translated">我希望，这篇短文对你有用。感谢您的阅读！</p><p id="4aab" class="pw-post-body-paragraph kg kh hi ki b kj ld ij kl km le im ko kp lf kr ks kt lg kv kw kx lh kz la lb hb bi translated">▶️ <em class="lc">请在下面的评论中提出任何问题/疑问或分享任何建议。</em></p><p id="af89" class="pw-post-body-paragraph kg kh hi ki b kj ld ij kl km le im ko kp lf kr ks kt lg kv kw kx lh kz la lb hb bi translated">▶️ <em class="lc">如果你喜欢这篇文章，那么请考虑关注我&amp;把它分享给你的朋友吧:)</em></p><p id="15fe" class="pw-post-body-paragraph kg kh hi ki b kj ld ij kl km le im ko kp lf kr ks kt lg kv kw kx lh kz la lb hb bi translated">▶️ <em class="lc">可以联系我在—</em><a class="ae jn" href="https://www.linkedin.com/in/garvitarya/" rel="noopener ugc nofollow" target="_blank"><em class="lc">LinkedIn</em></a><em class="lc">|</em><a class="ae jn" href="https://twitter.com/garvitishere" rel="noopener ugc nofollow" target="_blank"><em class="lc">Twitter</em></a><em class="lc">|</em><a class="ae jn" href="https://github.com/GarvitArya/" rel="noopener ugc nofollow" target="_blank"><em class="lc">github</em></a><em class="lc">|</em><a class="ae jn" href="https://www.instagram.com/garvitarya/" rel="noopener ugc nofollow" target="_blank"><em class="lc">insta gram</em></a>|<a class="ae jn" href="https://www.facebook.com/garvitishere" rel="noopener ugc nofollow" target="_blank"><em class="lc">Facebook</em></a><em class="lc">(几乎无处不在:p</em></p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mw"><img src="../Images/7d93e0d42dc2bedcc2fbf24be00a0145.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ZZ5CMnh9PKmjFXJE"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Photo by <a class="ae jn" href="https://unsplash.com/@towfiqu999999?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Towfiqu barbhuiya</a> on <a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure></div></div>    
</body>
</html>