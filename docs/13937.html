<html>
<head>
<title>Open Lakehouse — A journey</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">开放的湖边小屋——一次旅行</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/open-lakehouse-a-journey-9c9dd59914d4?source=collection_archive---------1-----------------------#2022-08-06">https://medium.com/geekculture/open-lakehouse-a-journey-9c9dd59914d4?source=collection_archive---------1-----------------------#2022-08-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/78619808787379f1cbc679dcf2469562.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XAWdosAqQJJ1Fuoh5Z-Vug.jpeg"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx">Photo by <a class="ae hv" href="https://unsplash.com/@janerzhang?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">janer zhang</a> on <a class="ae hv" href="https://unsplash.com/s/photos/lakehouse?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><div class=""/><p id="ec26" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">关于Dremio的任何SQL</p><p id="3d35" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在每个公司都依靠数据来做决策。因此，每个公司都需要一个数据基础设施来处理他们的用例。用例也随着时间的推移而发展。随着用例的变化，我们看到了不同的解决方案，如数据仓库、Hadoop、数据集市、数据湖、云数据仓库和lakehouse。</p><figure class="ju jv jw jx fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es jt"><img src="../Images/90525ba459fc04ebea8ac28d1f023c2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P5k7dwrBY95PKEy_ptKJpw.png"/></div></div></figure><h1 id="a286" class="jy jz hy bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">本地数据仓库</h1><p id="d8ba" class="pw-post-body-paragraph iv iw hy ix b iy kw ja jb jc kx je jf jg ky ji jj jk kz jm jn jo la jq jr js hb bi translated">数据仓库是帮助将分散的数据孤岛集成到一个平台中的第一次尝试，作为事实的单一来源。它使用历史交易、记录、操作和其他应用程序，使数据可供业务用户分析使用。</p><p id="701b" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">随着时间的推移，公司意识到每个OU(销售、营销、财务)都需要一个定制的数据视图，这为数据集市带来了生机。这导致了不同BI数据集和报告工具的多个数据副本。</p><p id="993e" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">扩展本地数据仓库是一个巨大的挑战。这些数据仓库的许可和运营成本超过了它们的回报。</p><h1 id="c4be" class="jy jz hy bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">数据湖</h1><p id="2b7e" class="pw-post-body-paragraph iv iw hy ix b iy kw ja jb jc kx je jf jg ky ji jj jk kz jm jn jo la jq jr js hb bi translated">它最初是作为一种经济高效的替代存储解决方案在内部部署的，以替代数据仓库，用于具有大量、快速和多种数据的数据源。数据湖优先考虑分析方法的灵活性。Hive试图提供一种在数据湖上高效运行SQL的方法。它提供了数据库、模式和表的概念，以某种方式描述数据湖的结构，让BI工具有效地遍历数据。Hive在仓库竞赛中胜出。但是很快这个解决方案开始遇到基础设施的缺点，如数据仓库。</p><h1 id="0315" class="jy jz hy bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">云数据湖+数据仓库</h1><p id="cf66" class="pw-post-body-paragraph iv iw hy ix b iy kw ja jb jc kx je jf jg ky ji jj jk kz jm jn jo la jq jr js hb bi translated">BigQuery首次尝试降低运营成本，其基础设施由GCP管理。很快，AWS提供了Redshift，并主导了云数据仓库市场，直到雪花的推出。所有这些产品都使用托管存储提供了更快的查询速度。在所有这些产品中，ETL过程会将源数据移动到云数据湖中，并在仓库中加载一个经过管理和修整的版本。像S3这样的云对象存储充当了一个经济高效的数据湖。但这里我们也有数据副本的问题。此外，仓库中加载的一个数据只能从产品中查询。</p><h1 id="0c0b" class="jy jz hy bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">数据网格和数据结构</h1><p id="1067" class="pw-post-body-paragraph iv iw hy ix b iy kw ja jb jc kx je jf jg ky ji jj jk kz jm jn jo la jq jr js hb bi translated">数据网格和数据结构都试图克服数据湖的缺点。</p><p id="b528" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">Data Mesh是一种分析数据架构，它通过将数据组织成产品并以分布式方式将其划分到各个领域来尝试这一点。治理和架构是联合的。它有一个不同数据产品的集中目录。</p><p id="567d" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">与数据网格不同，数据结构采用集中的元数据驱动和以技术为中心的方法。治理和架构是集中的。部分数据被虚拟化。大多数数据都是集中的，并且使用API来交付。参见<a class="ae hv" href="https://github.com/open-data-fabric/open-data-fabric" rel="noopener ugc nofollow" target="_blank">开放式数据结构</a>。</p><h1 id="1695" class="jy jz hy bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">开放式湖边小屋</h1><p id="8b1c" class="pw-post-body-paragraph iv iw hy ix b iy kw ja jb jc kx je jf jg ky ji jj jk kz jm jn jo la jq jr js hb bi translated"><a class="ae hv" rel="noopener" href="/geekculture/open-table-formats-delta-iceberg-hudi-732f682ec0bb">开放表格格式</a>的推出开启了数据管理领域的新篇章。这些文件格式为数据湖带来了仓库的高性能SQL功能。开放文件格式为数据湖引入了以下功能:</p><ul class=""><li id="3aa1" class="lb lc hy ix b iy iz jc jd jg ld jk le jo lf js lg lh li lj bi translated">数据作为产品—版本化数据，回滚</li><li id="cbe7" class="lb lc hy ix b iy lk jc ll jg lm jk ln jo lo js lg lh li lj bi translated">事务一致性—通过完全读取隔离对文件进行原子更新。</li><li id="bd98" class="lb lc hy ix b iy lk jc ll jg lm jk ln jo lo js lg lh li lj bi translated">模式演变，以跟踪表随时间的变化。</li><li id="26bf" class="lb lc hy ix b iy lk jc ll jg lm jk ln jo lo js lg lh li lj bi translated">时间旅行来查询历史数据。</li></ul><h2 id="a38a" class="lp jz hy bd ka lq lr ls ke lt lu lv ki jg lw lx km jk ly lz kq jo ma mb ku mc bi translated">开放性支柱</h2><ul class=""><li id="2b3e" class="lb lc hy ix b iy kw jc kx jg md jk me jo mf js lg lh li lj bi translated">开放格式—非专有格式</li><li id="52d1" class="lb lc hy ix b iy lk jc ll jg lm jk ln jo lo js lg lh li lj bi translated">开放接口— ANSI SQL、JDBC/ODBC连接</li><li id="7494" class="lb lc hy ix b iy lk jc ll jg lm jk ln jo lo js lg lh li lj bi translated">与云无关—使用容器进行部署</li><li id="f8bf" class="lb lc hy ix b iy lk jc ll jg lm jk ln jo lo js lg lh li lj bi translated">开源—软件的非专有代码</li></ul><figure class="ju jv jw jx fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mg"><img src="../Images/8afc6fd56a282651e17d1422b4b5c9c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ovJTklbkZ23JS1nMBO6KxQ.png"/></div></div></figure><figure class="ju jv jw jx fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mh"><img src="../Images/a8f5e9d9e4baecbd31b2c64b9ee4bc28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jFwdeK654q5J6bj0YcdOzQ.png"/></div></div></figure><h1 id="9c71" class="jy jz hy bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">德雷米奥</h1><p id="0440" class="pw-post-body-paragraph iv iw hy ix b iy kw ja jb jc kx je jf jg ky ji jj jk kz jm jn jo la jq jr js hb bi translated">利用这些功能，Dremio推出了一个开放的lakehouse平台。该平台具有以下优势</p><ul class=""><li id="cbdf" class="lb lc hy ix b iy iz jc jd jg ld jk le jo lf js lg lh li lj bi translated">任何数据上的SQL</li><li id="3358" class="lb lc hy ix b iy lk jc ll jg lm jk ln jo lo js lg lh li lj bi translated">降低基础设施管理成本</li><li id="1c8b" class="lb lc hy ix b iy lk jc ll jg lm jk ln jo lo js lg lh li lj bi translated">查询您的数据所在的位置</li><li id="59e4" class="lb lc hy ix b iy lk jc ll jg lm jk ln jo lo js lg lh li lj bi translated">没有不必要的数据移动和拷贝</li><li id="97ef" class="lb lc hy ix b iy lk jc ll jg lm jk ln jo lo js lg lh li lj bi translated">没有供应商限制，因为它使用开源组件</li></ul><h2 id="fd4e" class="lp jz hy bd ka lq lr ls ke lt lu lv ki jg lw lx km jk ly lz kq jo ma mb ku mc bi translated">Dremio的技术组件</h2><ul class=""><li id="ffbd" class="lb lc hy ix b iy kw jc kx jg md jk me jo mf js lg lh li lj bi translated"><a class="ae hv" href="https://asrathore08.medium.com/apache-arrow-2d72137d9e84" rel="noopener"> Apache箭头</a> —柱状内存数据处理和交换</li><li id="fb92" class="lb lc hy ix b iy lk jc ll jg lm jk ln jo lo js lg lh li lj bi translated"><a class="ae hv" href="https://asrathore08.medium.com/apache-arrow-2d72137d9e84" rel="noopener"> Apache Arrow Flight </a> —基于gRPC和HTTP/2的数据互操作性</li><li id="5c86" class="lb lc hy ix b iy lk jc ll jg lm jk ln jo lo js lg lh li lj bi translated">Apache方解石— SQL解析器和CBO</li><li id="4f8d" class="lb lc hy ix b iy lk jc ll jg lm jk ln jo lo js lg lh li lj bi translated">RocksDB —协调器上的元数据存储</li><li id="b6dc" class="lb lc hy ix b iy lk jc ll jg lm jk ln jo lo js lg lh li lj bi translated">Gandiv — (LLVM内核)</li><li id="c53c" class="lb lc hy ix b iy lk jc ll jg lm jk ln jo lo js lg lh li lj bi translated">Apache parquet —一种用于磁盘溢出的文件格式</li><li id="e4b7" class="lb lc hy ix b iy lk jc ll jg lm jk ln jo lo js lg lh li lj bi translated">尼斯——冰山目录</li><li id="b573" class="lb lc hy ix b iy lk jc ll jg lm jk ln jo lo js lg lh li lj bi translated">Kubernetes上的生产部署—弹性扩展平台</li></ul><h2 id="85e1" class="lp jz hy bd ka lq lr ls ke lt lu lv ki jg lw lx km jk ly lz kq jo ma mb ku mc bi translated">Dremio的逻辑组件</h2><ul class=""><li id="c154" class="lb lc hy ix b iy kw jc kx jg md jk me jo mf js lg lh li lj bi translated">协调者—为UI提供服务，为API连接提供动力，管理元数据</li><li id="d532" class="lb lc hy ix b iy lk jc ll jg lm jk ln jo lo js lg lh li lj bi translated">执行者—执行查询</li><li id="0b8d" class="lb lc hy ix b iy lk jc ll jg lm jk ln jo lo js lg lh li lj bi translated">分布式存储—使用外部，如HDFS/S3</li><li id="03a4" class="lb lc hy ix b iy lk jc ll jg lm jk ln jo lo js lg lh li lj bi translated">管理员—执行日常管理和后台任务</li><li id="6585" class="lb lc hy ix b iy lk jc ll jg lm jk ln jo lo js lg lh li lj bi translated">动物园管理员—集群协调(使用外部)</li></ul><figure class="ju jv jw jx fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mi"><img src="../Images/a9c353a0474b85d329dcc1c8df12d35e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bloy4YvgoofhWwojnJkbUg.png"/></div></div></figure><h2 id="50a7" class="lp jz hy bd ka lq lr ls ke lt lu lv ki jg lw lx km jk ly lz kq jo ma mb ku mc bi translated">Dremio的整体工作流程</h2><figure class="ju jv jw jx fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mj"><img src="../Images/1da74faa033522915abc9087cde530c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eRuMGoEowUEndLE6lFpa5A.png"/></div></div></figure><p id="3824" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在上面的图片中，我展示了两种不同的存储，因为Dremio以两种关键方式利用存储:<a class="ae hv" href="https://docs.dremio.com/data-sources/" rel="noopener ugc nofollow" target="_blank">数据湖</a>和<a class="ae hv" href="https://docs.dremio.com/deployment/distributed-storage.html" rel="noopener ugc nofollow" target="_blank">分布式存储</a>。</p><h2 id="03bc" class="lp jz hy bd ka lq lr ls ke lt lu lv ki jg lw lx km jk ly lz kq jo ma mb ku mc bi translated">从5000英尺高度进行Dremio优化</h2><ul class=""><li id="8225" class="lb lc hy ix b iy kw jc kx jg md jk me jo mf js lg lh li lj bi translated">数据反映</li><li id="5b32" class="lb lc hy ix b iy lk jc ll jg lm jk ln jo lo js lg lh li lj bi translated">超高性能的矢量拼花阅读器</li><li id="c188" class="lb lc hy ix b iy lk jc ll jg lm jk ln jo lo js lg lh li lj bi translated">柱状云缓存(C3)(位于NVMe)</li><li id="38ba" class="lb lc hy ix b iy lk jc ll jg lm jk ln jo lo js lg lh li lj bi translated">预测流水线</li><li id="c9a6" class="lb lc hy ix b iy lk jc ll jg lm jk ln jo lo js lg lh li lj bi translated">用于S3兼容存储的高性能并行读取器</li></ul><p id="06d6" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="mk">注:我碰到了</em> <a class="ae hv" href="https://github.com/meta-soul/LakeSoul" rel="noopener ugc nofollow" target="_blank"> <em class="mk"> LakeSoul </em> </a> <em class="mk">，一种新的表格格式。但是找不到太多关于它的文档。此外，它的目标是Spark引擎，而不是SQL引擎。这里只是提一下，供以后参考。</em></p><h2 id="c3ca" class="lp jz hy bd ka lq lr ls ke lt lu lv ki jg lw lx km jk ly lz kq jo ma mb ku mc bi translated">使用Dremio时的注意事项</h2><ul class=""><li id="4a48" class="lb lc hy ix b iy kw jc kx jg md jk me jo mf js lg lh li lj bi translated">原生于拼花文件格式，具有查询ORC文件的挑战性(通过Hive)</li><li id="8fb5" class="lb lc hy ix b iy lk jc ll jg lm jk ln jo lo js lg lh li lj bi translated">旧版本的Hive ( &lt;1.x) is not supported</li><li id="686b" class="lb lc hy ix b iy lk jc ll jg lm jk ln jo lo js lg lh li lj bi translated">It follows Storage based auth models, and does allow impersonation</li><li id="9081" class="lb lc hy ix b iy lk jc ll jg lm jk ln jo lo js lg lh li lj bi translated">Be consistent with hardware selection, don’t mix different hardware for same query.</li><li id="dc37" class="lb lc hy ix b iy lk jc ll jg lm jk ln jo lo js lg lh li lj bi translated">Their is no auto submit of queries when partial node failure happens, user will need to resubmit</li><li id="f39b" class="lb lc hy ix b iy lk jc ll jg lm jk ln jo lo js lg lh li lj bi translated">Reflection management needs to be planned well.</li></ul><h2 id="3857" class="lp jz hy bd ka lq lr ls ke lt lu lv ki jg lw lx km jk ly lz kq jo ma mb ku mc bi translated">Features only available in Enterprise Edition</h2><ul class=""><li id="e578" class="lb lc hy ix b iy kw jc kx jg md jk me jo mf js lg lh li lj bi translated">User management</li><li id="3ba8" class="lb lc hy ix b iy lk jc ll jg lm jk ln jo lo js lg lh li lj bi translated">LDAP &amp; Ranger Integration,</li><li id="1ef3" class="lb lc hy ix b iy lk jc ll jg lm jk ln jo lo js lg lh li lj bi translated">SSL connection</li><li id="8453" class="lb lc hy ix b iy lk jc ll jg lm jk ln jo lo js lg lh li lj bi translated">WLM</li></ul><h2 id="5a19" class="lp jz hy bd ka lq lr ls ke lt lu lv ki jg lw lx km jk ly lz kq jo ma mb ku mc bi translated">Appendix</h2><p id="53e9" class="pw-post-body-paragraph iv iw hy ix b iy kw ja jb jc kx je jf jg ky ji jj jk kz jm jn jo la jq jr js hb bi translated"><strong class="ix hz">数据架构演进</strong></p><blockquote class="ml mm mn"><p id="a1b4" class="iv iw mk ix b iy iz ja jb jc jd je jf mo jh ji jj mp jl jm jn mq jp jq jr js hb bi translated">运营数据存储→数据仓库→数据集市→多维数据库(Oracle Express、Hyperion Essbase)→设备(Teradata、Netezza)→数据湖(S3)→数据结构(HPE Ezmeral)→数据虚拟化(Denodo)→湖屋→三角洲湖(Databricks)→数据网格(ThoughtWorks)</p></blockquote><p id="88e9" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">快乐阅读！！</p></div></div>    
</body>
</html>