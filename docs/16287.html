<html>
<head>
<title>Using the useState Hook in Next.js and TypeScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Next.js和TypeScript中使用useState挂钩</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/using-the-usestate-hook-in-next-js-and-typescript-1df2c088b1aa?source=collection_archive---------5-----------------------#2022-12-20">https://medium.com/geekculture/using-the-usestate-hook-in-next-js-and-typescript-1df2c088b1aa?source=collection_archive---------5-----------------------#2022-12-20</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="8c2e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">用React和它的子集框架构建的最好的部分之一是你使用的钩子，最常用的钩子是useState钩子。很好地理解Next.js和hooks在这里是有帮助的。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/3d7845894bfcc68e59e3f38a7b564c47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Vi03kJfyr8FgLGLbQoILNw.jpeg"/></div></div></figure><p id="d255" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您正在将TypeScript集成到您的Next.js web应用程序中，最好的方法就是以正确的方式完成它。</p><h2 id="e74f" class="jq jr hi bd js jt ju jv jw jx jy jz ka iq kb kc kd iu ke kf kg iy kh ki kj kk bi translated">初始化:</h2><pre class="jf jg jh ji fd kl km kn bn ko kp bi"><span id="e520" class="kq jr hi km b be kr ks l kt ku">const [name, setName] = useState&lt;string&gt;('John Doe')</span></pre><p id="0087" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">注意到与普通js文件的主要区别了吗？创建状态时，还必须指定将存储在该状态中的数据类型。为什么？<br/> <strong class="ih hj"> <em class="jd">简答:</em> </strong> <em class="jd">这使我们在试图更新和使用那个状态及其值时避免了逻辑错误。</em></p><p id="ecbd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">例如，如果您试图在调用setName函数时将一个数字放入该状态的括号中。<strong class="ih hj">您会收到类似这样的错误:</strong><br/><em class="jd">【number】类型的参数不能赋给string | (() = &gt; string) </em>类型的参数</p><p id="81e1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">那么，如果我们在一个状态容器中存储了多种数据类型会怎么样呢？例如，如果我们打算存储一个人的姓名、年龄和状态，它们分别是字符串、数字和布尔值。</p><p id="ab69" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">实现这一点的最平滑的方法是用列出的那些类型定义一个类型对象，然后用它来初始化你的状态，如下所示。</p><p id="c789" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一种类型的对象看起来像这样:</p><pre class="jf jg jh ji fd kl km kn bn ko kp bi"><span id="77b4" class="kq jr hi km b be kr ks l kt ku">type UserData = {<br/>  name: string,<br/>  age: number,<br/>  status: boolean<br/>}</span></pre><p id="c16b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用type对象初始化新状态:</p><pre class="jf jg jh ji fd kl km kn bn ko kp bi"><span id="7f28" class="kq jr hi km b be kr ks l kt ku">type UserData = {<br/>  name: string,<br/>  age: number,<br/>  status: boolean<br/>}<br/>// New State<br/>const [user, setUser] = useState&lt;UserData&gt;({name: 'John Doe'})</span></pre><p id="c059" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然而，当你这样做的时候，你会遇到这样的错误:</p><p id="6b94" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"><em class="jd">Type“{ name:string；“}”缺少类型“UserData”的以下属性:年龄、状态</em> </strong></p><p id="bc38" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">问题出在错误说明的最后部分，指出我们不能忽略其他变量，而只能初始化名称和值，因此解决方案如下所示:</p><pre class="jf jg jh ji fd kl km kn bn ko kp bi"><span id="1090" class="kq jr hi km b be kr ks l kt ku">type UserData = {<br/>  name: string,<br/>  age: number,<br/>  status: boolean<br/>}<br/>// New State<br/>const [user, setUser]=useState&lt;UserData&gt;({name: 'Johnn Doe', age: 12, status: true})</span></pre><p id="4a0d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是如果我们一开始就没有虚拟数据，并且我们想在状态没有更新的情况下返回一个空对象而不是占位符，那该怎么办呢？</p><p id="7244" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">解决方案:</strong>在我们的类型对象中，我们简单地在变量名后添加问号</p><pre class="jf jg jh ji fd kl km kn bn ko kp bi"><span id="b046" class="kq jr hi km b be kr ks l kt ku">type UserData = {<br/>  name?: string,<br/>  age?: number,<br/>  status?: boolean<br/>}<br/>// New State<br/>const [user, setUser]=useState&lt;UserData&gt;({age: 12})</span></pre><p id="891f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">注意到问号了吗？这告诉typescript，每次操作状态时都不需要该变量。</p><p id="3f4b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于更新状态，我将在处理表单的文章中介绍。</p><p id="f84c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">提示:传递给这些状态的任何其他数据类型当然都会导致错误。</p></div></div>    
</body>
</html>