<html>
<head>
<title>Coding as Sorcery: Potions &amp; Object Composition in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">作为巫术的编码:JavaScript中的药剂和对象组合</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/coding-is-sorcery-potions-object-composition-in-javascript-245310cfb405?source=collection_archive---------52-----------------------#2021-09-13">https://medium.com/geekculture/coding-is-sorcery-potions-object-composition-in-javascript-245310cfb405?source=collection_archive---------52-----------------------#2021-09-13</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="3856" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果编码是巫术(确实如此)，那么编码中的不同概念与来自幻想小说、神话和黑暗艺术历史的各种魔法系统相比如何？</p><p id="aa60" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这一次，我将着眼于面向对象的Javascript，特别是<strong class="ih hj">对象组合</strong>类似于调制药水的方式。</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="ji jj l"/></div></figure><p id="165c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我的上一篇文章中，我将Ruby中的类继承比作真实名字的魔法，这是一个贯穿魔法和神话历史的魔法特征，从古代埃及到Ursula Le Guin的地海系列或者Patrick Rothfuss的风的名字。在Ruby中，例如，如果我们知道<em class="jl">地海巫师</em>中Ged的船<code class="du jm jn jo jp b">lookfar</code>是类<code class="du jm jn jo jp b">Boat</code>的一个实例，那么我们也知道关于<code class="du jm jn jo jp b">lookfar</code>的一堆信息和一堆我们可以调用它的方法:</p><pre class="jd je jf jg fd jq jp jr js aw jt bi"><span id="420e" class="ju jv hi jp b fi jw jx l jy jz">$ lookfar.sails <br/># =&gt; mainsail</span></pre><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es ka"><img src="../Images/3cf373e219e9c6f72c0d6dfd0558d22b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I9QVTt1fONyAag5v9ITVKg.jpeg"/></div></div><figcaption class="kh ki et er es kj kk bd b be z dx">Fanart by <a class="ae jk" href="https://www.deviantart.com/ffaunax/art/Lookfar-at-the-world-s-end-880089346" rel="noopener ugc nofollow" target="_blank">Ffaunax</a> of Ged and Vetch in the boat Lookfar from Le Guin’s “A Wizard of Earthsea”</figcaption></figure><p id="671c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此外，如果我们知道<code class="du jm jn jo jp b">Boat</code>作为一个类继承自<code class="du jm jn jo jp b">WaterCraft</code>，那么我们对它的了解会更多，因为<code class="du jm jn jo jp b">Boat</code>继承自<code class="du jm jn jo jp b">WaterCraft</code>的方法。</p><h1 id="cfcd" class="kl jv hi bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">原型继承与类继承</h1><p id="f639" class="pw-post-body-paragraph if ig hi ih b ii li ik il im lj io ip iq lk is it iu ll iw ix iy lm ja jb jc hb bi translated">然而，JavaScript并不像Ruby那样使用类继承。在Ruby中，对象是一个类的实例，它从其他类继承方法和数据。从ES6开始，JavaScript包含了关键字<code class="du jm jn jo jp b">class</code>，但是它是一个语法上的糖，代表一个通过<em class="jl">原型继承将两个对象链接在一起的构造函数。</em></p><pre class="jd je jf jg fd jq jp jr js aw jt bi"><span id="11f1" class="ju jv hi jp b fi jw jx l jy jz">class MyClass {}<br/>typeof MyClass<br/><em class="jl">#=&gt; function</em></span></pre><p id="6f32" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有什么区别？JavaScript中的几乎所有东西都是对象，每个对象都有一个私有属性将它链接到另一个对象，它的<em class="jl">原型、</em>一直追溯到全局对象、<a class="ae jk" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects" rel="noopener ugc nofollow" target="_blank">对象</a>(不要与更通用的术语<a class="ae jk" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects" rel="noopener ugc nofollow" target="_blank"> <em class="jl">全局对象</em> </a> <em class="jl">、</em>混淆，后者表示标准的内置对象或全局范围内的对象)。</p><p id="1488" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">关于哪种系统更好有很多争论。</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="ji jj l"/></div><figcaption class="kh ki et er es kj kk bd b be z dx">Of course there’s a lot of debate. This is coding.</figcaption></figure><p id="d1f6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我不打算深入讨论。相反，让我们谈谈原型继承允许我们使用的技术之一——通过使用<strong class="ih hj">对象组合</strong>像调制药水一样调制它们来定义对象。</p><h1 id="63e3" class="kl jv hi bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">什么是物体构成？</h1><p id="9e23" class="pw-post-body-paragraph if ig hi ih b ii li ik il im lj io ip iq lk is it iu ll iw ix iy lm ja jb jc hb bi translated">JavaScript的原型继承允许我们定义只继承您真正需要的东西的对象，而不是定义继承父类的所有信息和方法的类。它是这样工作的:</p><pre class="jd je jf jg fd jq jp jr js aw jt bi"><span id="29fd" class="ju jv hi jp b fi jw jx l jy jz">const snakeFang = { snakeFang: 6 }<br/>const pocupineQuill = { porcupineQuill: 2 }<br/>const wolfsbaneSprig = { wolfsbaneSprig: 1 }<br/>const valerianRoot = { valerianRoot: 1 }</span><span id="675c" class="ju jv hi jp b fi ln jx l jy jz">const WideyePotion = (options) =&gt; {<br/>  return Object.assign({}, snakeFang, wolfsbaneSprig, options)<br/>}</span><span id="8810" class="ju jv hi jp b fi ln jx l jy jz">const CureForBoilsPotion = (options) =&gt; {<br/>  return Object.assign({}, snakeFang, pocupineQuill, options)<br/>}</span><span id="ec91" class="ju jv hi jp b fi ln jx l jy jz">const DraughtOfPeace = (options) =&gt; {<br/>  return Object.assign({}, pocupineQuill, valerianRoot, options)<br/>}</span></pre><p id="15f6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">(我把这些食谱简化了，但是你懂了。尽管如此，还是不要在家里尝试。)</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="lo jj l"/></div></figure><p id="1bb0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这个例子中，我们的配料是所谓的<strong class="ih hj">混合料。</strong>什么是mixin？名字说明了一切——你把它混合在一起。根据<a class="ae jk" href="https://javascript.info/mixins" rel="noopener ugc nofollow" target="_blank"><em class="jl">JavaScript . info</em></a><em class="jl"/></p><blockquote class="lp lq lr"><p id="4292" class="if ig jl ih b ii ij ik il im in io ip ls ir is it lt iv iw ix lu iz ja jb jc hb bi translated">一个<a class="ae jk" href="https://en.wikipedia.org/wiki/Mixin" rel="noopener ugc nofollow" target="_blank"> mixin </a>是一个包含方法的类，这些方法可以被其他类使用，而不需要从它继承。</p></blockquote><p id="fcd8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">用混合剂制作一个物品可以让我们在药剂中只包含我们想要的成分。这有什么大不了的？</p><h1 id="fcf2" class="kl jv hi bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">偏爱合成而非遗传</h1><blockquote class="lp lq lr"><p id="1b89" class="if ig jl ih b ii ij ik il im in io ip ls ir is it lt iv iw ix lu iz ja jb jc hb bi translated">"优先选择对象组合而不是类继承."~四人帮，“<a class="ae jk" href="https://www.amazon.com/gp/product/0201633612?ie=UTF8&amp;camp=213733&amp;creative=393185&amp;creativeASIN=0201633612&amp;linkCode=shr&amp;tag=eejs-20&amp;linkId=WMUILDJNIUXY4NSH" rel="noopener ugc nofollow" target="_blank">设计模式:可重用面向对象软件的要素</a>”</p></blockquote><p id="1437" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">挑选对象的成分有助于我们避免类继承的一些主要陷阱。它使你的代码变得灵活，而继承层次必然变得灵活，要求你复制代码以便加入你现有代码不能适应的新特性。</p><p id="6e6a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此外，避免了所谓的类继承的大猩猩/香蕉问题:即使您只需要使用父类中的一个方法，子类仍然可以继承整个megillah。正如编程语言<a class="ae jk" href="https://en.wikipedia.org/wiki/Erlang_(programming_language)" rel="noopener ugc nofollow" target="_blank"> Erlang </a>的创造者<a class="ae jk" href="https://en.wikipedia.org/wiki/Joe_Armstrong_(programmer)" rel="noopener ugc nofollow" target="_blank">乔·阿姆斯特朗</a>所解释的，</p><blockquote class="lp lq lr"><p id="ca62" class="if ig jl ih b ii ij ik il im in io ip ls ir is it lt iv iw ix lu iz ja jb jc hb bi translated">面向对象语言的问题是，它们拥有所有这些隐含的环境。你想要一个香蕉，但你得到的是一只大猩猩拿着香蕉和整个丛林。</p></blockquote><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es lv"><img src="../Images/5cf22e4889d10d46e0b79332c49f2176.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*PboCTr_gzuCZ8voG7Qg5qA.jpeg"/></div><figcaption class="kh ki et er es kj kk bd b be z dx">There’s a flaw in this metaphor. Gorillas in the wild don’t generally eat bananas because wild bananas are often barely edible and sometimes even toxic. They do love human-engineered bananas if they can get their hands on them, but then you’d be inheriting agriculture, not the entire jungle.</figcaption></figure><p id="f619" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我们的魔药类比中，类继承会要求我们把世界上所有的东西都放入我们的坩埚中，然后以某种方式告诉我们的魔药只能由我们真正想要的东西制成。</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="lw jj l"/></div><figcaption class="kh ki et er es kj kk bd b be z dx">That’s overdoing it with the ingredients! Stop!</figcaption></figure><h1 id="2cc4" class="kl jv hi bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">让我知道你的想法！</h1><p id="e288" class="pw-post-body-paragraph if ig hi ih b ii li ik il im lj io ip iq lk is it iu ll iw ix iy lm ja jb jc hb bi translated">一如既往，我很想知道你对编码和魔术之间的相似和重叠的想法。请在<em class="jl"> Medium </em>上给我写一个回复，或者在<a class="ae jk" href="https://www.linkedin.com/in/alec-magnet/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上给我留言，让这个对话继续下去！</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es lx"><img src="../Images/063870848884e5c164cf6c76762bd90c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AG3eYG1UVVdM1VC714mAQw.jpeg"/></div></div></figure><h1 id="2f03" class="kl jv hi bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">来源</h1><p id="6d57" class="pw-post-body-paragraph if ig hi ih b ii li ik il im lj io ip iq lk is it iu ll iw ix iy lm ja jb jc hb bi translated">Eric Elliot，“<a class="ae jk" rel="noopener" href="/javascript-scene/master-the-javascript-interview-what-s-the-difference-between-class-prototypal-inheritance-e4cd0a7562e9#.h96dymht1">大师访谈:类&amp;原型继承有什么不同？</a></p><p id="0a67" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">——,“<a class="ae jk" rel="noopener" href="/javascript-scene/3-different-kinds-of-prototypal-inheritance-es6-edition-32d777fa16c9">3种不同的原型继承:ES6+版本</a>”</p><p id="f496" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Alex Jover Morales，“JavaScript中的<a class="ae jk" href="https://alligator.io/js/class-composition/#:~:text=A%20common%20composition%20pattern%20in,have%20an%20Animal%20and%20FlyingAnimal%20." rel="noopener ugc nofollow" target="_blank">类组合</a>”</p></div></div>    
</body>
</html>