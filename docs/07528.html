<html>
<head>
<title>Simple Decentralized Application using Flutter and Solidity</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">利用颤振和坚固性的简单分散应用</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/simple-dapp-using-flutter-and-solidity-b64f5267acf4?source=collection_archive---------4-----------------------#2021-09-21">https://medium.com/geekculture/simple-dapp-using-flutter-and-solidity-b64f5267acf4?source=collection_archive---------4-----------------------#2021-09-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/ccd8c075de79c960aa4feb901724cb9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tP5GvJo--r0r68Mr9pdpNA.png"/></div></div></figure><p id="b25f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">分散式应用程序或<strong class="is hj"> Dapps </strong>是运行在分散式计算系统上的数字程序，如区块链、p2p网络等。不受中央政府控制的。区块链技术仍处于非常早期的发展阶段，我相信Dapps将在实现该技术的真正潜力方面发挥重要作用。为了理解Dapps，我们需要知道什么是<strong class="is hj">智能合约</strong>。</p><p id="a0b0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">智能合同是一种自动执行的合同，买卖双方的协议条款被直接写入代码行。守则和其中包含的协议存在于一个分散的区块链网络中。</p><div class="jo jp ez fb jq jr"><a href="https://www.ibm.com/in-en/topics/smart-contracts" rel="noopener  ugc nofollow" target="_blank"><div class="js ab dw"><div class="jt ab ju cl cj jv"><h2 class="bd hj fi z dy jw ea eb jx ed ef hh bi translated">什么是区块链智能合约</h2><div class="jy l"><h3 class="bd b fi z dy jw ea eb jx ed ef dx translated">了解智能合同以及区块链网络如何在预定条款生效时自动执行合同…</h3></div><div class="jz l"><p class="bd b fp z dy jw ea eb jx ed ef dx translated">www.ibm.com</p></div></div><div class="ka l"><div class="kb l kc kd ke ka kf io jr"/></div></div></a></div><p id="96c9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">今天，我们将看看如何在以太坊的testnet上实现智能合约，以及如何通过flutter应用程序访问它。在实际编写智能合约之前，我们需要正确设置一些东西，以便我们可以在网络上部署智能合约。</p><figure class="kh ki kj kk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kg"><img src="../Images/2db573fe1c6237ff91a2e7de18d72fc7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*K7daLennRYV_Wz_Y"/></div></div><figcaption class="kl km et er es kn ko bd b be z dx">Photo by <a class="ae kp" href="https://unsplash.com/@nick604?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Nick Chong</a> on <a class="ae kp" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="6280" class="kq kr hi bd ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">元掩码</h1><figure class="kh ki kj kk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lo"><img src="../Images/2a2647f1bfb1c6d54aae953a98d9a16d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jD8cypcmNwnzAZjI0y_lIg.png"/></div></div></figure><p id="8131" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Metamask是一种加密货币钱包，它与以太坊区块链交互，并允许用户通过浏览器扩展访问他们的以太坊钱包。您需要在浏览器中添加元掩码扩展。永远记得写下你的种子短语，因为它有助于恢复你的钱包，不要与任何人分享你的种子短语。</p><p id="274e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">点击下面为chrome和brave安装Metamask扩展。</p><div class="jo jp ez fb jq jr"><a href="https://chrome.google.com/webstore/detail/metamask/nkbihfbeogaeaoehlefnkodbefgpgknn?hl=en" rel="noopener  ugc nofollow" target="_blank"><div class="js ab dw"><div class="jt ab ju cl cj jv"><h2 class="bd hj fi z dy jw ea eb jx ed ef hh bi translated">元掩码—扩展</h2><div class="jy l"><h3 class="bd b fi z dy jw ea eb jx ed ef dx translated">浏览器中的以太坊钱包</h3></div><div class="jz l"><p class="bd b fp z dy jw ea eb jx ed ef dx translated">chrome.google.com</p></div></div><div class="ka l"><div class="lp l kc kd ke ka kf io jr"/></div></div></a></div><p id="3f5a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">安装后，你会得到这样的东西。</p><figure class="kh ki kj kk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lq"><img src="../Images/1ef5f6d2604fc42058f2f8037f4e8972.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xmR5Tw3LgkG2jyZ-ikvnug.png"/></div></div><figcaption class="kl km et er es kn ko bd b be z dx">Metamask Extension expanded view.</figcaption></figure><p id="96a2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">正如您所看到的，Metamask扩展提供了连接到除mainnet之外的各种以太坊测试网的选项。作为一名开发人员，我们需要首先在一个测试网上测试我们的智能合约，然后再将它部署到mainnet上。对于本教程，我们将使用<strong class="is hj"> Rinkeby测试网络</strong>。</p><figure class="kh ki kj kk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lr"><img src="../Images/8721a48a93c40822a8be43d47bc741b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cvYoeX4B1XWjNaP3lAb6ow.png"/></div></div><figcaption class="kl km et er es kn ko bd b be z dx">Metamask Mainnet and Testnet options.</figcaption></figure><p id="8afb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为了在以太坊网络上部署智能合约，我们需要以以太网的形式向网络支付<strong class="is hj">天然气费</strong>。</p><p id="e250" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> Gas </strong>是指测量在以太坊网络上执行特定操作所需的计算工作量的单位。由于每个以太坊交易都需要计算资源来执行，所以每个交易都需要费用。气是指在以太坊上成功进行交易所需的费用。</p><p id="0492" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">因此，即使我们在测试网络上进行测试，我们也需要汽油费来在网络上部署合同。但是不要担心！你不需要使用真正的乙醚，我们可以要求<strong class="is hj">测试乙醚</strong>。</p><p id="d509" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在Metamask上将网络改为Rinkeby，点击购买。你可以看到它问你是想直接存乙醚还是请求<strong class="is hj">测试龙头</strong>。</p><figure class="kh ki kj kk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ls"><img src="../Images/9d54110397ea514838adf7b9d381491c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OhRas0uXiqT7DdeXsVoxAQ.png"/></div></div><figcaption class="kl km et er es kn ko bd b be z dx">Deposit or Get Ether</figcaption></figure><p id="bf7a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">加密龙头</strong>是网站和移动应用程序，允许用户以完成特定任务为交换获得少量加密货币。当你点击“获取以太”按钮时，你将被重定向到rinkeby.io。</p><figure class="kh ki kj kk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/a687d3c720abdbee48f215b478422ced.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d2WJ1tXFHjwwyD-S3FAEiw.png"/></div></div><figcaption class="kl km et er es kn ko bd b be z dx">Rinkeby.io</figcaption></figure><p id="2078" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要获得免费的测试乙醚，你需要通过twitter或脸书申请。</p><p id="f272" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要通过<strong class="is hj"> Twitter </strong>申请资金，从你的Metamask钱包中用以太坊地址发一条推文，然后将推文的URL复制粘贴到Rinkeby.io的加密龙头提供的输入框中。</p><figure class="kh ki kj kk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lt"><img src="../Images/5b2e1ecf4aed47aff030402f0b50388a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LVhGTCfq1pIERtJu6t3aqw.png"/></div></div><figcaption class="kl km et er es kn ko bd b be z dx">Make a tweet with the Metamask wallet address like this.</figcaption></figure><p id="fb33" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要通过<strong class="is hj">脸书</strong>申请资金，从你的Metamask钱包中发布一个带有以太坊地址的新<strong class="is hj">公共</strong>帖子，并将帖子的URL复制粘贴到Rinkeby.io的加密龙头提供的输入框中。</p><figure class="kh ki kj kk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/cdb86d8de0ec10dd6410b5fbde607fbe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oLd3qL_fJlPSlsejnTZ6eA.png"/></div></div><figcaption class="kl km et er es kn ko bd b be z dx">Enter the tweet or post URL in the input box and press Get Ether.</figcaption></figure><p id="49c6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你做了以上所有正确的步骤，那么你的Metamask钱包里将会有一些免费的测试乙醚。</p><figure class="kh ki kj kk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lu"><img src="../Images/a6b0fb8f074022a0d3bd95a831d8f989.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tC0zAqFC_1uRw1-fV1GdWw.png"/></div></div></figure><p id="ba01" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">恭喜你！现在你可以开始写智能合同了。</p><h1 id="ed8f" class="kq kr hi bd ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">智能合同</h1><p id="bf7e" class="pw-post-body-paragraph iq ir hi is b it lv iv iw ix lw iz ja jb lx jd je jf ly jh ji jj lz jl jm jn hb bi translated">我们将使用solidity编写一个简单的智能合同。你可以在你选择的任何IDE上编写智能合同，但是我推荐在线IDE，remix.ethereum.org，在那里我们可以编写智能合同，编译它，然后在网络上部署它。</p><figure class="kh ki kj kk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/4afc05507466b6560afc229c0ee65ac2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8pNdCCtYljRHChh4EkcLRQ.png"/></div></div></figure><div class="jo jp ez fb jq jr"><a href="https://remix.ethereum.org/" rel="noopener  ugc nofollow" target="_blank"><div class="js ab dw"><div class="jt ab ju cl cj jv"><h2 class="bd hj fi z dy jw ea eb jx ed ef hh bi translated">Remix -以太坊IDE</h2><div class="jy l"><h3 class="bd b fi z dy jw ea eb jx ed ef dx translated">Remix IDE是一个开源的web和桌面应用程序，它通过直观的图形用户界面促进了快速开发周期和丰富的插件集。Remix用于部署智能的整个过程…</h3></div><div class="jz l"><p class="bd b fp z dy jw ea eb jx ed ef dx translated">remix.ethereum.org</p></div></div></div></a></div><p id="3037" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果需要，创建一个新的工作空间，并在contracts文件夹下创建一个新的solidity文件。我将把我的合同命名为“Xcoin.sol”。现在我们写一个简单的智能合同！</p><p id="6862" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">智能契约的第一行代码是一个<strong class="is hj"> pragma指令</strong>。</p><figure class="kh ki kj kk fd ij er es paragraph-image"><div class="er es ma"><img src="../Images/66396c119916e8dc2ef5787501efb867.png" data-original-src="https://miro.medium.com/v2/resize:fit:996/format:webp/1*VjAV3NioPnmbmBHXcEzzHw.png"/></div><figcaption class="kl km et er es kn ko bd b be z dx">Pragma Directive</figcaption></figure><p id="6333" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Pragma指令告诉编译器包含和不包含哪个版本的实体。pragma指令始终位于源文件的本地，如果您导入另一个文件，该文件中的pragma不会自动应用于导入的文件。</p><p id="8b33" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在我们用三个函数来定义我们的契约“Xcoin”，<strong class="is hj">get balance()</strong>,<strong class="is hj">deposit balance()</strong>和【withdrawBalance()。</p><figure class="kh ki kj kk fd ij er es paragraph-image"><div class="er es mb"><img src="../Images/882069453b68e654c7c6084f1526c256.png" data-original-src="https://miro.medium.com/v2/resize:fit:1224/format:webp/1*-feUjTaz80oZpK9t-2B7-g.png"/></div><figcaption class="kl km et er es kn ko bd b be z dx">Simple Smart Contract.</figcaption></figure><p id="42ac" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Solidity中的契约<strong class="is hj">类似于面向对象语言中的类。它们包含状态变量中的持久数据，以及可以修改这些变量的函数。</strong></p><p id="ce36" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">整数“balance”是<strong class="is hj">状态变量</strong>，上述三个函数修改“balance”变量中的数据。</p><h2 id="e57b" class="mc kr hi bd ks md me mf kw mg mh mi la jb mj mk le jf ml mm li jj mn mo lm mp bi translated">getBalance()</h2><p id="8a15" class="pw-post-body-paragraph iq ir hi is b it lv iv iw ix lw iz ja jb lx jd je jf ly jh ji jj lz jl jm jn hb bi translated">这个函数只是返回存储在状态变量中的值。我们将该函数声明为一个<strong class="is hj">视图</strong>，这意味着该函数承诺不修改变量。</p><p id="dbde" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">默认情况下，对契约的读访问是受限制的，但是我们需要将函数<strong class="is hj">设为公共函数</strong>，以便访问状态变量。</p><h2 id="cbb9" class="mc kr hi bd ks md me mf kw mg mh mi la jb mj mk le jf ml mm li jj mn mo lm mp bi translated">存款余额()</h2><p id="4e68" class="pw-post-body-paragraph iq ir hi is b it lv iv iw ix lw iz ja jb lx jd je jf ly jh ji jj lz jl jm jn hb bi translated">顾名思义，这个函数存放Xcoins。</p><p id="5e24" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">该函数采用参数'<strong class="is hj"> amount' </strong>,这是您要存入的Xcoins的数量。该函数只是将金额添加到余额中。</p><h2 id="6eca" class="mc kr hi bd ks md me mf kw mg mh mi la jb mj mk le jf ml mm li jj mn mo lm mp bi translated">提款余额()</h2><p id="e4ec" class="pw-post-body-paragraph iq ir hi is b it lv iv iw ix lw iz ja jb lx jd je jf ly jh ji jj lz jl jm jn hb bi translated">这个函数提取Xcoins。它还接受参数'<strong class="is hj">金额</strong>，并从余额中扣除该金额。</p><p id="ccaf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这是你的简单智能合同。现在我们需要使用remix.ethereum.org提供的Solidity编译器来编译我们的智能合同。</p><figure class="kh ki kj kk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mq"><img src="../Images/6ed1ae43eb3d9487574a534be9b60290.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DhJqhq-APuxhbKBv8CRNAQ.png"/></div></div><figcaption class="kl km et er es kn ko bd b be z dx">Compile the Smart Contract.</figcaption></figure><p id="d963" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，我们将在Rinkeby测试网络上部署智能合约。选择“部署并运行事务”并选择环境。</p><figure class="kh ki kj kk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mr"><img src="../Images/0d8a02da078f53036d3975dcc586a073.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AYjuaiEzzGX2eqzTu_tL5w.png"/></div></div><figcaption class="kl km et er es kn ko bd b be z dx">Selecting Environment and deploying.</figcaption></figure><p id="3e1a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们可以看到它提供了各种环境供我们选择。</p><p id="bbc5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">前两个选项是<strong class="is hj"> JavaScript VMs </strong>，其中所有事务都将在浏览器的沙盒区块链中执行。JsVM是它自己的区块链，每次重新加载它都会启动一个新的区块链，旧的不会被保存。</p><p id="bb97" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">第三个选项是<strong class="is hj">注入的Web3 </strong>，其中remix将连接到注入的Web3提供者，如Metamask。</p><p id="bbdd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">第四个选项是<strong class="is hj"> Web3 Provider </strong>，其中remix将连接到一个远程节点，您需要提供所选提供者的URL:geth、parity或任何以太坊客户端。</p><p id="43cb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">对我们来说，我们将使用注入的Web3，因为我们将使用Metamask。一旦你选择了这个选项，你会看到混音已经自动检测到测试网络和你的元掩码地址。点击部署，您的Metamask钱包将弹出，要求您确认汽油费。</p><figure class="kh ki kj kk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ms"><img src="../Images/62cf9b97f6cba94b67cec8ae76ec04dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tUVROGe85B1YARULvQckrw.png"/></div></div><figcaption class="kl km et er es kn ko bd b be z dx">Gas fee Confirmation popup.</figcaption></figure><p id="a610" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">确认气费后，智能合约会在几秒钟后部署在Rinkeby网络上。部署合同后，您可以选择<strong class="is hj">已部署的合同</strong>与智能合同进行交互。</p><figure class="kh ki kj kk fd ij er es paragraph-image"><div class="er es mt"><img src="../Images/e54ba2d13980d593cf4b2be6eae3d163.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/format:webp/1*sPwc0NOjNhAoKIbmKgQG5w.png"/></div></figure><p id="83a3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们可以看到，当我们点击<strong class="is hj"> getBalance </strong>时，余额为0。现在让我们投入20枚硬币。由于<strong class="is hj"> depositBalance() </strong>进行了交易，Metamask将再次要求确认燃气费。</p><figure class="kh ki kj kk fd ij er es paragraph-image"><div class="er es mu"><img src="../Images/b1a2033146b1f3dfb37419ec52698fc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:894/format:webp/1*-60EAMcUVbGdgT4lZi5HRQ.png"/></div><figcaption class="kl km et er es kn ko bd b be z dx">depositBalance(20)</figcaption></figure><p id="4e0c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们看到现在我们的余额是20。让我们通过提取5枚硬币来检查<strong class="is hj">提取余额()</strong>。由于该函数执行交易，因此将再次要求确认。</p><figure class="kh ki kj kk fd ij er es paragraph-image"><div class="er es mv"><img src="../Images/021d54319ee472291141621c2d60c0c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:912/format:webp/1*Fy9Zhdz7VfKOTGSNmRdy-Q.png"/></div><figcaption class="kl km et er es kn ko bd b be z dx">withdrawBalance(5)</figcaption></figure><p id="10c8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在我们看到，在提款后，我们有15的余额。我们已经成功地在测试网络上部署了合同，并与合同进行了交互。</p><p id="404f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，我们的目标是在flutter上构建一个移动应用程序，与我们刚刚部署的智能合约进行交互。让我们看看如何！</p><h1 id="ba7f" class="kq kr hi bd ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">颤动Dapp</h1><p id="8071" class="pw-post-body-paragraph iq ir hi is b it lv iv iw ix lw iz ja jb lx jd je jf ly jh ji jj lz jl jm jn hb bi translated">我们将构建一个具有简单UI的flutter Dapp，让用户与智能合约进行交互。在我们开始编写flutter Dapp之前，我们需要设置一个API来处理Dapp与智能契约交互的请求。为此，我们将使用<strong class="is hj"> Infura，</strong>一个以太坊API。</p><figure class="kh ki kj kk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mw"><img src="../Images/5705de9ea207a47a4fba6e2ee66ce638.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zVBecHY6de3TIwPcg35TdA.png"/></div></div><figcaption class="kl km et er es kn ko bd b be z dx">Infura.io</figcaption></figure><p id="1e24" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您也可以使用其他方法，比如使用<strong class="is hj"> Ganche </strong>，这是一个用于快速以太坊和Corda分布式应用程序开发的个人区块链。</p><figure class="kh ki kj kk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mx"><img src="../Images/2289cdedc3726bdd0d2f6d6fa25bde8e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Wekusqt_p2PZyp6jW_5olQ.png"/></div></div><figcaption class="kl km et er es kn ko bd b be z dx">Ganache | Truffle</figcaption></figure><p id="80cf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在Infura上创建一个帐户，</p><div class="jo jp ez fb jq jr"><a href="https://infura.io/" rel="noopener  ugc nofollow" target="_blank"><div class="js ab dw"><div class="jt ab ju cl cj jv"><h2 class="bd hj fi z dy jw ea eb jx ed ef hh bi translated">以太坊API | IPFS API和网关|以太网节点即服务| Infura</h2><div class="jy l"><h3 class="bd b fi z dy jw ea eb jx ed ef dx translated">我们的高可用性API和开发工具套件提供了对以太坊和IPFS的快速、可靠的访问…</h3></div><div class="jz l"><p class="bd b fp z dy jw ea eb jx ed ef dx translated">infura.io</p></div></div><div class="ka l"><div class="my l kc kd ke ka kf io jr"/></div></div></a></div><p id="30a9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">创建帐户后，您将被重定向到仪表板，在那里您必须创建一个新项目。</p><figure class="kh ki kj kk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mz"><img src="../Images/6f7d4ea636734079a90cc28d9f72375d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VCQwfdwxC_RZOh8mj7gfDg.png"/></div></div><figcaption class="kl km et er es kn ko bd b be z dx">Create Infura Project.</figcaption></figure><p id="fef9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">创建一个新项目后，您需要转到设置并将端点更改为Rinkeby，因为我们需要与之交互的契约位于Rinkeby测试网络中。</p><figure class="kh ki kj kk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es na"><img src="../Images/347721c0441dc475d7b4c3de3c068616.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*28RTtpDZg1NVJnsHdL1yxg.png"/></div></div><figcaption class="kl km et er es kn ko bd b be z dx">Change Endpoints to Rinkeby.</figcaption></figure><p id="4abf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">不，API已经设置好了，让我们开始使用flutter编写Dapp。</p><h2 id="6916" class="mc kr hi bd ks md me mf kw mg mh mi la jb mj mk le jf ml mm li jj mn mo lm mp bi translated">属国</h2><p id="4628" class="pw-post-body-paragraph iq ir hi is b it lv iv iw ix lw iz ja jb lx jd je jf ly jh ji jj lz jl jm jn hb bi translated">创建了flutter项目后，我们需要一些来自<strong class="is hj"> pub.dev </strong>的依赖项来正确实现我们的Dapp。</p><figure class="kh ki kj kk fd ij er es paragraph-image"><div class="er es nb"><img src="../Images/deea1951ec35488b366d964aaa6f182d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1012/format:webp/1*yl5p3b59tT6f3TbosAoerQ.png"/></div><figcaption class="kl km et er es kn ko bd b be z dx">pubspec.yaml dependencies.</figcaption></figure><p id="a83b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们需要的第一个依赖项是<strong class="is hj"> web3dart </strong>。它是一个dart库，连接到一个以太坊节点来发送交易，与智能合约交互等等。</p><div class="jo jp ez fb jq jr"><a href="https://pub.dev/packages/web3dart" rel="noopener  ugc nofollow" target="_blank"><div class="js ab dw"><div class="jt ab ju cl cj jv"><h2 class="bd hj fi z dy jw ea eb jx ed ef hh bi translated">web3dart | Dart包</h2><div class="jy l"><h3 class="bd b fi z dy jw ea eb jx ed ef dx translated">一个dart库，用于连接以太坊区块链并与之交互。它连接到以太坊节点发送…</h3></div><div class="jz l"><p class="bd b fp z dy jw ea eb jx ed ef dx translated">公共开发</p></div></div><div class="ka l"><div class="nc l kc kd ke ka kf io jr"/></div></div></a></div><p id="7155" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们需要的第二个依赖项是<strong class="is hj"> http。</strong>这个包包含了一组高级的函数和类，使得消费HTTP资源变得很容易。</p><div class="jo jp ez fb jq jr"><a href="https://pub.dev/packages/http" rel="noopener  ugc nofollow" target="_blank"><div class="js ab dw"><div class="jt ab ju cl cj jv"><h2 class="bd hj fi z dy jw ea eb jx ed ef hh bi translated">http | Dart包</h2><div class="jy l"><h3 class="bd b fi z dy jw ea eb jx ed ef dx translated">一个可组合的、基于未来的库，用于发出HTTP请求。这个包包含一组高级功能和…</h3></div><div class="jz l"><p class="bd b fp z dy jw ea eb jx ed ef dx translated">公共开发</p></div></div><div class="ka l"><div class="nd l kc kd ke ka kf io jr"/></div></div></a></div><p id="c50e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">第三个包<strong class="is hj">sync fusion _ flutter _ sliders</strong>只是一个滑块的库。你可以使用任何你想要的滑块包。</p><div class="jo jp ez fb jq jr"><a href="https://pub.dev/packages/syncfusion_flutter_sliders" rel="noopener  ugc nofollow" target="_blank"><div class="js ab dw"><div class="jt ab ju cl cj jv"><h2 class="bd hj fi z dy jw ea eb jx ed ef hh bi translated">sync fusion _ Flutter _ sliders | Flutter包</h2><div class="jy l"><h3 class="bd b fi z dy jw ea eb jx ed ef dx translated">Flutter Sliders包是用Dart原生编写的，用于为…创建高度交互式和UI丰富的slider小部件</h3></div><div class="jz l"><p class="bd b fp z dy jw ea eb jx ed ef dx translated">公共开发</p></div></div><div class="ka l"><div class="ne l kc kd ke ka kf io jr"/></div></div></a></div><h1 id="cb29" class="kq kr hi bd ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">颤动代码</h1><p id="ed5b" class="pw-post-body-paragraph iq ir hi is b it lv iv iw ix lw iz ja jb lx jd je jf ly jh ji jj lz jl jm jn hb bi translated">我们正在创建一个简单的Dapp，所以我们不会严重依赖UI，而是我们只对通过我们的Dapp访问智能合同感兴趣。</p><h2 id="4103" class="mc kr hi bd ks md me mf kw mg mh mi la jb mj mk le jf ml mm li jj mn mo lm mp bi translated">头球</h2><figure class="kh ki kj kk fd ij er es paragraph-image"><div class="er es nf"><img src="../Images/e05b5fad3609d6637d129cafe0890d37.png" data-original-src="https://miro.medium.com/v2/resize:fit:1322/format:webp/1*_3fKhoO4Dv-kZeHCebgK1Q.png"/></div><figcaption class="kl km et er es kn ko bd b be z dx">Headers.</figcaption></figure><p id="872b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们需要<strong class="is hj"> services.dart </strong>文件来调用rootbundle。我们将很快看到为什么我们需要调用rootbundle。我们还为<strong class="is hj"> web3dart </strong>、<strong class="is hj"> http </strong>和<strong class="is hj">sync fusion _ flutter _ sliders</strong>导入文件。</p><h2 id="e651" class="mc kr hi bd ks md me mf kw mg mh mi la jb mj mk le jf ml mm li jj mn mo lm mp bi translated">主()</h2><figure class="kh ki kj kk fd ij er es paragraph-image"><div class="er es ng"><img src="../Images/558b5914d4beaeecbaa571df72e084e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1186/format:webp/1*ujp-VNW2kjnqPZgap4tigA.png"/></div><figcaption class="kl km et er es kn ko bd b be z dx">Main function.</figcaption></figure><p id="822f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将创建一个单页面Dapp，所以我们将在MyHomePage()类中编写所有的实现过程。</p><p id="c44e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在解释MyHomePage()类的实现之前，我们还需要做一件事。我们需要部署的智能合约的ABI。</p><p id="a635" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">合同应用二进制接口(ABI) </strong>是与以太坊生态系统中的合同进行交互的标准方式，包括来自区块链之外的以及合同对合同的交互。</p><p id="5241" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们可以从remix.ethereum的<strong class="is hj">编译细节</strong>中获得ABI，我们使用它部署我们的合同。</p><figure class="kh ki kj kk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nh"><img src="../Images/05179fefec149005cbb486a3163a60cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3foKNu-lZsRY6fY1hICM2g.png"/></div></div></figure><p id="4154" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">复制ABI并在我们的flutter项目中创建一个资产文件夹，在这里我们必须创建一个<strong class="is hj"> abi.json </strong>文件。</p><figure class="kh ki kj kk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ni"><img src="../Images/1aa6e0758349788ef25b9e621a070c3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Bk1LatGbDWBRTSEg2cC-ag.png"/></div></div></figure><h2 id="5166" class="mc kr hi bd ks md me mf kw mg mh mi la jb mj mk le jf ml mm li jj mn mo lm mp bi translated">我的主页()</h2><p id="d592" class="pw-post-body-paragraph iq ir hi is b it lv iv iw ix lw iz ja jb lx jd je jf ly jh ji jj lz jl jm jn hb bi translated">我们将创建一个StatefulWidget，MyHomePage()。</p><figure class="kh ki kj kk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nj"><img src="../Images/dc217a63b5f7261ba97779d437f41807.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2vhoTc-Ba7uCYoFwUqTSSw.png"/></div></div><figcaption class="kl km et er es kn ko bd b be z dx">class MyHomePage()</figcaption></figure><p id="653d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">首先我们声明一个http客户端，<strong class="is hj"> httpclient。</strong>然后我们需要一个Web3Client，<strong class="is hj"> ethclient </strong>。</p><figure class="kh ki kj kk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nk"><img src="../Images/a9fe815a3bb2f3409498f17a6ea3ce2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0ilvWbRTeGzQxOfx9gZ09w.png"/></div></div><figcaption class="kl km et er es kn ko bd b be z dx">http client, web3client and Metamask address.</figcaption></figure><p id="f4a7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">客户端</strong>类来自http库。它是HTTP客户端的接口，负责维护对同一服务器的多个请求之间的持久连接。</p><p id="52dc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> Web3Client </strong>类来自web3dart库。它用于通过HTTP JSON-RPC API端点向以太坊客户端发送请求。这个库不会使用客户端的帐户功能来创建交易，我们将不得不自己获取帐户的私钥。</p><p id="cafc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">my address</strong>变量存储元掩码的Rinkeby Testnet wallet地址。</p><figure class="kh ki kj kk fd ij er es paragraph-image"><div class="er es nl"><img src="../Images/2255d48aa8d61a2d471678051372ce14.png" data-original-src="https://miro.medium.com/v2/resize:fit:754/format:webp/1*nc0FaEHn6X1nsExIsb45sg.png"/></div><figcaption class="kl km et er es kn ko bd b be z dx">More variables.</figcaption></figure><p id="12cf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将声明我们需要使用的另外三个变量。下面是UI的代码，我们将在后面看到这些函数的实现。</p><figure class="kh ki kj kk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nm"><img src="../Images/97d2553b33a0517964a70eac963e1479.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*StOEnBfCtq9iXK63iKW__Q.png"/></div></div><figcaption class="kl km et er es kn ko bd b be z dx">initState()</figcaption></figure><p id="9747" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将在<strong class="is hj"> initState() </strong>方法中初始化<strong class="is hj"> httpClient </strong>和<strong class="is hj"> ethCLient </strong>。需要为Web3Client提供的URL可以在Infura设置中找到。</p><figure class="kh ki kj kk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nn"><img src="../Images/ee6b192d1cd78184db0ecad716a847f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*81bRR-N3WIhYpeqV0cIvOw.png"/></div></div><figcaption class="kl km et er es kn ko bd b be z dx">Endpoints</figcaption></figure><p id="ef0f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们还将在initState()中调用getBalance()函数，这样当我们启动Dapp时，我们将总是获得当前余额。</p><figure class="kh ki kj kk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es no"><img src="../Images/3bf28d3e23a124bf062c76b1cfa71ef6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BXhP_Vt_XzBu3YnDQOXGLw.png"/></div></div></figure><p id="b5ed" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> SfSlider </strong>类来自syncfusion_flutter_sliders库。我们将滑块的最小值设置为0.0，最大值设置为10.0，我们使用这个滑块来获得我们需要存款或取款的金额。我们将滑块的舍入值存储到变量<strong class="is hj"> myAmount </strong>中。</p><figure class="kh ki kj kk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es np"><img src="../Images/9f12cde415031891da02d38a514e761b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OktEUmyPES5nLseqDD1fww.png"/></div></div><figcaption class="kl km et er es kn ko bd b be z dx">getBalance(), query() and loadContract() functions</figcaption></figure><p id="307a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们要编写的第一个函数是<strong class="is hj"> getBalance() </strong>函数，它请求智能合约返回当前余额的值。它将<strong class="is hj">目标地址</strong>作为参数。getBalance()函数向智能契约发送查询，其中包含我们希望从契约中执行的函数名。</p><p id="100f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> loadContract() </strong>函数加载我们从编译细节中复制的ABI文件。我们还需要我们的部署合同的地址，我们可以从remix.ethereum.org获得。</p><figure class="kh ki kj kk fd ij er es paragraph-image"><div class="er es nq"><img src="../Images/dfe21e865268c1a81bca9461570e256a.png" data-original-src="https://miro.medium.com/v2/resize:fit:906/format:webp/1*oz3CtJ2LuV_vfzW9jErv4Q.png"/></div><figcaption class="kl km et er es kn ko bd b be z dx">Contract address.</figcaption></figure><p id="3cd3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们通过使用来自web3dart，<strong class="is hj"> DeployedContract的helper类来获取契约。</strong>这个类定义了一个与已经部署在以太坊区块链上的已知ABI的合同。它需要两个参数，ABI和以太坊地址。</p><p id="f250" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> query() </strong>函数将一个函数名和一列参数作为参数。它调用loadContract()函数，将协定加载到一个变量中，并使用functionName参数从协定中提取函数。</p><p id="90ce" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">最后，query()函数使用Web3Client <strong class="is hj">调用方法</strong>存储结果，该方法调用智能合约中定义的函数并返回其结果。</p><p id="8420" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">类似地，我们实现了<strong class="is hj">存款币</strong>和<strong class="is hj">取款币</strong>方法。</p><figure class="kh ki kj kk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nr"><img src="../Images/4596a511811818aa980afe2eb5349c73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sCFRJhejjdcK8kVjlRBsRQ.png"/></div></div><figcaption class="kl km et er es kn ko bd b be z dx">withdrawCoin(), depositCoin() and submit() methods.</figcaption></figure><p id="c5a2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> submit() </strong>函数实质上签署并发送一个事务到区块链网络，我们使用web3dart库中的<strong class="is hj"> sendTransaction() </strong>方法<strong class="is hj"> </strong>来实现这一点。为了签署合同，它需要一个私钥。这里我使用了一个随机的私钥。您可以使用元掩码钱包中的私钥或任何其他私钥。</p><p id="38cb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">sendTransaction()方法的<strong class="is hj"> chainId </strong>设置为4，代表Rinkeby测试网络。您还应该小心地为契约设置一个<strong class="is hj"> maxGas </strong>值，否则它可能会给出一个错误消息，<em class="ns">RPC error:got code-32000 with msg“transaction under priced”。</em></p><h1 id="9cdd" class="kq kr hi bd ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">演示</h1><p id="37e5" class="pw-post-body-paragraph iq ir hi is b it lv iv iw ix lw iz ja jb lx jd je jf ly jh ji jj lz jl jm jn hb bi translated">正如我们所见，目前的余额已经是15 Xcoins，因为我们直接从remix.ethereum.org存入和取出硬币。</p><figure class="kh ki kj kk fd ij er es paragraph-image"><div class="er es nt"><img src="../Images/b1627198ffade191946c737f3f00c332.png" data-original-src="https://miro.medium.com/v2/resize:fit:778/format:webp/1*XX3I0TrE5T9LG7DjOGvLyw.png"/></div></figure><p id="ab07" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们现在将存入10枚硬币并刷新。现在当前余额变成25 Xcoins。</p><figure class="kh ki kj kk fd ij er es paragraph-image"><div class="er es nt"><img src="../Images/01cb1fe596eb5d662613e689606353bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:778/format:webp/1*8WsgzDk0MZ9eo3EACyzxvg.png"/></div></figure><p id="1ade" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果我们提取5个硬币，然后刷新，我们可以看到当前余额为20 Xcoins。</p><figure class="kh ki kj kk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nu"><img src="../Images/3cc1cf5af8dfafe98e784d1efbbb042e.png" data-original-src="https://miro.medium.com/v2/resize:fit:792/format:webp/1*_c96J2hFIXHK8uctH3LwLQ.png"/></div></div></figure><p id="4b09" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您可以检查Infura以了解您的智能合同的状态以及您的flutter Dapp向合同发送了多少请求。</p><figure class="kh ki kj kk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nv"><img src="../Images/2c2ce5db50ad748d9e3f5be3b1feee32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WUFHbUCnr0P8VQTPqVbkrw.png"/></div></div></figure><h1 id="fb42" class="kq kr hi bd ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">参考，</h1><h2 id="6510" class="mc kr hi bd ks md me mf kw mg mh mi la jb mj mk le jf ml mm li jj mn mo lm mp bi translated"><a class="ae kp" href="https://www.youtube.com/watch?v=3Eeh3pJ6PeA" rel="noopener ugc nofollow" target="_blank">打造你的第一款区块链Flutter App | Solidity | meta mask</a></h2><div class="jo jp ez fb jq jr"><a href="https://ethereum.org/en/developers/docs/programming-languages/dart/" rel="noopener  ugc nofollow" target="_blank"><div class="js ab dw"><div class="jt ab ju cl cj jv"><h2 class="bd hj fi z dy jw ea eb jx ed ef hh bi translated">Dart开发者以太坊| ethereum.org</h2><div class="jy l"><h3 class="bd b fi z dy jw ea eb jx ed ef dx translated">了解如何使用Dart语言为以太坊开发</h3></div><div class="jz l"><p class="bd b fp z dy jw ea eb jx ed ef dx translated">ethereum.org</p></div></div><div class="ka l"><div class="nw l kc kd ke ka kf io jr"/></div></div></a></div></div></div>    
</body>
</html>