<html>
<head>
<title>Getting Started with SQLAlchemy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SQLAlchemy入门</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/getting-started-with-sqlalchemy-d132d04c940?source=collection_archive---------8-----------------------#2021-06-23">https://medium.com/geekculture/getting-started-with-sqlalchemy-d132d04c940?source=collection_archive---------8-----------------------#2021-06-23</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="5c83" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">用Python实现数据库操作的SQLAlchemy</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/abbe9040695b6e0a7246ff44b06358f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2gcZYBv6jmcbRtnY"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Image <a class="ae jn" rel="noopener" href="/swlh/orm-and-sqlalchemy-the-magic-wand-in-database-management-a2d02877a57a">Reference</a>: Medium</figcaption></figure><h2 id="b8fd" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">SQLAlchemy是什么？</h2><p id="4ac0" class="pw-post-body-paragraph km kn hi ko b kp kq ij kr ks kt im ku jz kv kw kx kd ky kz la kh lb lc ld le hb bi translated">SQLAlchemy是一个用于Python的开源SQL工具包和对象关系映射器(ORM)。</p><p id="a46d" class="pw-post-body-paragraph km kn hi ko b kp lf ij kr ks lg im ku jz lh kw kx kd li kz la kh lj lc ld le hb bi translated">它促进了Python程序和数据库之间的通信。大多数时候，这个库被用作ORM工具。</p><p id="addb" class="pw-post-body-paragraph km kn hi ko b kp lf ij kr ks lg im ku jz lh kw kx kd li kz la kh lj lc ld le hb bi translated"><strong class="ko hj">什么是ORM？</strong></p><p id="7f54" class="pw-post-body-paragraph km kn hi ko b kp lf ij kr ks lg im ku jz lh kw kx kd li kz la kh lj lc ld le hb bi translated">ORM是一种编程技术，用于在编程语言中将数据库记录表示为相应的对象。因此，我们可以在这些数据库记录上进行交互和操作，就像我们在处理对象一样。</p><p id="7ced" class="pw-post-body-paragraph km kn hi ko b kp lf ij kr ks lg im ku jz lh kw kx kd li kz la kh lj lc ld le hb bi translated">ORM让我们有能力<strong class="ko hj">将数据库记录转化为对象</strong>，使得数据库交互和修改像在编程语言中处理对象一样轻松。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lk"><img src="../Images/550e2fdc40207390e68ad456778fdf30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8lIvu14MzJWgYLhk"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx"><a class="ae jn" href="https://www.fullstackpython.com/" rel="noopener ugc nofollow" target="_blank">Image Reference</a></figcaption></figure><p id="3bdf" class="pw-post-body-paragraph km kn hi ko b kp lf ij kr ks lg im ku jz lh kw kx kd li kz la kh lj lc ld le hb bi translated"><strong class="ko hj">ORM有哪些利弊？</strong></p><p id="3fd5" class="pw-post-body-paragraph km kn hi ko b kp lf ij kr ks lg im ku jz lh kw kx kd li kz la kh lj lc ld le hb bi translated"><strong class="ko hj">优点</strong></p><ul class=""><li id="dffa" class="ll lm hi ko b kp lf ks lg jz ln kd lo kh lp le lq lr ls lt bi translated"><strong class="ko hj">简洁。</strong> ORM允许用户使用他们选择的编程语言，其语法比使用原始SQL查询更简洁，减少了所需的代码量。</li><li id="cddc" class="ll lm hi ko b kp lu ks lv jz lw kd lx kh ly le lq lr ls lt bi translated"><strong class="ko hj">最优。通过将数据库记录表示为对象，ORM还使用户能够利用面向对象编程的优化，如继承、封装和抽象。</strong></li><li id="1a58" class="ll lm hi ko b kp lu ks lv jz lw kd lx kh ly le lq lr ls lt bi translated"><strong class="ko hj">灵活性。</strong>使用ORM，用户可以轻松地在不同的数据库管理系统(MySQL、Sqlite3、PostgreSQL……)之间切换，而无需对这些系统和SQL语言有很好的理解。</li></ul><p id="ba49" class="pw-post-body-paragraph km kn hi ko b kp lf ij kr ks lg im ku jz lh kw kx kd li kz la kh lj lc ld le hb bi translated"><strong class="ko hj">缺点</strong></p><ul class=""><li id="580e" class="ll lm hi ko b kp lf ks lg jz ln kd lo kh lp le lq lr ls lt bi translated"><strong class="ko hj">时间。因为ORM是框架，用户必须花时间学习和熟悉这些工具。</strong></li><li id="d67c" class="ll lm hi ko b kp lu ks lv jz lw kd lx kh ly le lq lr ls lt bi translated"><strong class="ko hj">较少控制。</strong>使用ORM，用户对数据库的控制权和主动权将会减少。</li></ul><blockquote class="lz ma mb"><p id="d6d1" class="km kn mc ko b kp lf ij kr ks lg im ku md lh kw kx me li kz la mf lj lc ld le hb bi translated"><strong class="ko hj">让我们学习如何使用SQLAlchemy，</strong>这是Python编程语言中一个相当著名的ORM，看看这个工具如何帮助您在处理数据库时节省大量的时间和精力。</p></blockquote><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mg"><img src="../Images/834e34f87cec2c50dcf423c707cd5c76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1092/format:webp/0*px8S9MKMQ6eSXtqS.jpg"/></div></figure><h2 id="07cf" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">安装</h2><pre class="iy iz ja jb fd mh mi mj mk aw ml bi"><span id="e9e0" class="jo jp hi mi b fi mm mn l mo mp">!pip install sqlalchemy<br/>!pip install pymysql</span></pre><h2 id="00a3" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">导入:</h2><pre class="iy iz ja jb fd mh mi mj mk aw ml bi"><span id="dbcd" class="jo jp hi mi b fi mm mn l mo mp">try:<br/>    import sqlalchemy as db<br/>    from sqlalchemy import create_engine<br/>    from sqlalchemy import *<br/>    import pymysql<br/>    print("all imported")<br/>    <br/>except:<br/>    print("error in importing")</span></pre><h2 id="5349" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">SQLAlchemy中的引擎配置</h2><p id="4d2a" class="pw-post-body-paragraph km kn hi ko b kp kq ij kr ks kt im ku jz kv kw kx kd ky kz la kh lb lc ld le hb bi translated">根据SQLAlchemy文档:引擎是任何SQLAlchemy应用程序的起点。它是实际数据库及其DBAPI的“大本营”,通过连接池和方言交付给SQLAlchemy应用程序，后者描述了如何与特定种类的数据库/DBAPI组合进行对话。</p><p id="2325" class="pw-post-body-paragraph km kn hi ko b kp lf ij kr ks lg im ku jz lh kw kx kd li kz la kh lj lc ld le hb bi translated">一般结构可以说明如下:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mq"><img src="../Images/f1ffa17bf187b56aa7d89d584fb231ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1366/format:webp/0*V6X3SPaO3--h4Rpc.png"/></div><figcaption class="jj jk et er es jl jm bd b be z dx"><a class="ae jn" href="https://docs.sqlalchemy.org/en/14/core/engines.html" rel="noopener ugc nofollow" target="_blank">Image Reference</a></figcaption></figure><p id="ee60" class="pw-post-body-paragraph km kn hi ko b kp lf ij kr ks lg im ku jz lh kw kx kd li kz la kh lj lc ld le hb bi translated">在上面的例子中，一个引擎引用一个方言和一个池，它们一起解释DBAPI的模块功能以及数据库的行为。</p><p id="ecd3" class="pw-post-body-paragraph km kn hi ko b kp lf ij kr ks lg im ku jz lh kw kx kd li kz la kh lj lc ld le hb bi translated">创建引擎只是发出一个调用create_engine()的问题。我们正在使用的数据库的API方言在create_engine中传递。</p><h2 id="73d6" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">对于PostgreSQL</h2><h2 id="8f0c" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">默认值:</h2><blockquote class="lz ma mb"><p id="484f" class="km kn mc ko b kp lf ij kr ks lg im ku md lh kw kx me li kz la mf lj lc ld le hb bi translated">engine = create _ engine(' PostgreSQL://Scott:tiger @ localhost/my database ')</p></blockquote><h2 id="1aeb" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">其他:</h2><blockquote class="lz ma mb"><p id="64ef" class="km kn mc ko b kp lf ij kr ks lg im ku md lh kw kx me li kz la mf lj lc ld le hb bi translated">engine = create _ engine(' PostgreSQL+psycopg 2://Scott:tiger @ localhost/my database ')</p><p id="e6f1" class="km kn mc ko b kp lf ij kr ks lg im ku md lh kw kx me li kz la mf lj lc ld le hb bi translated">engine = create _ engine(' PostgreSQL+pg 8000://Scott:tiger @ localhost/my database ')</p></blockquote><h2 id="6a77" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">对于MySQL</h2><h2 id="7754" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">默认</h2><blockquote class="lz ma mb"><p id="da36" class="km kn mc ko b kp lf ij kr ks lg im ku md lh kw kx me li kz la mf lj lc ld le hb bi translated">engine = create _ engine(' MySQL://Scott:tiger @ localhost/foo ')</p></blockquote><h2 id="6974" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">其他:</h2><blockquote class="lz ma mb"><p id="8581" class="km kn mc ko b kp lf ij kr ks lg im ku md lh kw kx me li kz la mf lj lc ld le hb bi translated">mysqlclient</p></blockquote><ul class=""><li id="88a5" class="ll lm hi ko b kp lf ks lg jz ln kd lo kh lp le lq lr ls lt bi translated">engine = create _ engine(' MySQL+mysqldb://Scott:tiger @ localhost/foo ')</li></ul><blockquote class="lz ma mb"><p id="b33c" class="km kn mc ko b kp lf ij kr ks lg im ku md lh kw kx me li kz la mf lj lc ld le hb bi translated">PyMySQL</p></blockquote><ul class=""><li id="225d" class="ll lm hi ko b kp lf ks lg jz ln kd lo kh lp le lq lr ls lt bi translated">engine = create _ engine(' MySQL+pymysql://Scott:tiger @ localhost/foo ')</li></ul><h2 id="7b23" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">其他数据库也是如此:</h2><h2 id="1d9d" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">甲骨文:</h2><blockquote class="lz ma mb"><p id="1821" class="km kn mc ko b kp lf ij kr ks lg im ku md lh kw kx me li kz la mf lj lc ld le hb bi translated">engine = create _ engine(' Oracle://Scott:tiger @ 127 . 0 . 0 . 1:1521/sid name ')</p></blockquote><h2 id="19d9" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">Microsoft SQL Server</h2><blockquote class="lz ma mb"><p id="790e" class="km kn mc ko b kp lf ij kr ks lg im ku md lh kw kx me li kz la mf lj lc ld le hb bi translated">engine = create _ engine(' MSSQL+pymssql://Scott:tiger @ hostname:port/dbname ')</p></blockquote><h2 id="4944" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">SQLite</h2><p id="eb34" class="pw-post-body-paragraph km kn hi ko b kp kq ij kr ks kt im ku jz kv kw kx kd ky kz la kh lb lc ld le hb bi translated">SQLite连接到基于文件的数据库，默认情况下使用Python内置模块sqlite3。由于SQLite连接到本地文件，URL格式略有不同。URL的“文件”部分是数据库的文件名。对于相对文件路径，这需要三个斜杠。三个斜线后面是绝对路径:</p><blockquote class="lz ma mb"><p id="3afc" class="km kn mc ko b kp lf ij kr ks lg im ku md lh kw kx me li kz la mf lj lc ld le hb bi translated">engine = create _ engine(' SQLite:///foo . db ')</p></blockquote><h2 id="5182" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">让我们开始并连接到我的Mysql数据库:</h2><blockquote class="lz ma mb"><p id="e3b4" class="km kn mc ko b kp lf ij kr ks lg im ku md lh kw kx me li kz la mf lj lc ld le hb bi translated"><code class="du mr ms mt mi b">format for mysql : create_engine('mysql+pymysql://&lt;username&gt;:&lt;password&gt;@&lt;host&gt;/&lt;dbname&gt;')<br/><br/>dialect+driver : mysql+pymysql</code></p></blockquote><pre class="iy iz ja jb fd mh mi mj mk aw ml bi"><span id="3af2" class="jo jp hi mi b fi mm mn l mo mp">engine = db.create_engine('mysql+pymysql://root:shelvi31@127.0.0.1/errors?host=localhost?port=3306')</span><span id="b208" class="jo jp hi mi b fi mu mn l mo mp">connection = engine.connect()<br/>print(engine.table_names())</span></pre><h2 id="2180" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">反射:读取数据库并构建SQLAlchemy表对象</h2><p id="9805" class="pw-post-body-paragraph km kn hi ko b kp kq ij kr ks kt im ku jz kv kw kx kd ky kz la kh lb lc ld le hb bi translated">SQLAlchemy可以用来通过反射从数据库中自动加载表。反射是读取数据库并基于该信息构建元数据的过程。</p><p id="3f0a" class="pw-post-body-paragraph km kn hi ko b kp lf ij kr ks lg im ku jz lh kw kx kd li kz la kh lj lc ld le hb bi translated">导入反射所需的元数据和表。元数据是一个对象，是一个存储数据库信息的目录，比如一个表，这样我们就不需要一直查找它们。</p><pre class="iy iz ja jb fd mh mi mj mk aw ml bi"><span id="6225" class="jo jp hi mi b fi mm mn l mo mp">from sqlalchemy import MetaData,Table <br/>metadata = db.MetaData()</span><span id="63a1" class="jo jp hi mi b fi mu mn l mo mp"><strong class="mi hj">#Defining table object by giving name of table stores in db:</strong><br/>dummy = Table("dummy",metadata,autoload = True, autoload_with=engine)</span><span id="913f" class="jo jp hi mi b fi mu mn l mo mp"><strong class="mi hj">#Using Function repr to view the details of the table that we stored as dummy:</strong><br/>print(repr(dummy));</span><span id="bab6" class="jo jp hi mi b fi mu mn l mo mp"><strong class="mi hj"># Print only the column names</strong><br/>print(dummy.columns.keys())</span></pre><p id="2289" class="pw-post-body-paragraph km kn hi ko b kp lf ij kr ks lg im ku jz lh kw kx kd li kz la kh lj lc ld le hb bi translated">请注意，在调用Engine.connect()方法或调用依赖于此方法的操作(如Engine.execute())之前，引擎及其底层池不会建立第一个实际的DBAPI连接。</p><h2 id="0592" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">询问</h2><pre class="iy iz ja jb fd mh mi mj mk aw ml bi"><span id="5ba8" class="jo jp hi mi b fi mm mn l mo mp">query = db.select([dummy]).where(dummy.columns.seic &gt;= 20)<br/>result = connection.execute(query)<br/>resultset = result.fetchall()<br/>resultset[0:4]</span><span id="ae14" class="jo jp hi mi b fi mu mn l mo mp"><strong class="mi hj">#Converting the result database to df:</strong><br/>import pandas as pd <br/>df = pd.DataFrame(resultset)<br/>df.columns = resultset[0].keys()<br/>df.head(10)</span></pre><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="ab fe cl mv"><img src="../Images/9d2ee6e3e54c56dc44e523bf114250ac.png" data-original-src="https://miro.medium.com/v2/format:webp/1*8efEu_v0PVQ5iL2kwWBo4A.png"/></div></figure><h2 id="6016" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">执行更多查询</h2><h2 id="81d4" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">使用位置:</h2><pre class="iy iz ja jb fd mh mi mj mk aw ml bi"><span id="59a4" class="jo jp hi mi b fi mm mn l mo mp">query = db.select([dummy.columns.seic,dummy.columns.seic_benefit]).where(dummy.columns.seic &gt;= 70)<br/>result = connection.execute(query)<br/><br/>resultset = result.fetchall()<br/>resultset[:10]</span></pre><h2 id="0772" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">使用于:</h2><pre class="iy iz ja jb fd mh mi mj mk aw ml bi"><span id="7465" class="jo jp hi mi b fi mm mn l mo mp">query = db.select([dummy.columns.seic,dummy.columns.seic_benefit]).where(dummy.columns.seic.in_([72.6,70,60]))<br/><br/>result = connection.execute(query)<br/><br/>resultset = result.fetchall()<br/>resultset[:]</span><span id="f608" class="jo jp hi mi b fi mu mn l mo mp">[(60.0, '89664'), (60.0, '17082'), (70.0, '76108'), (60.0, '27696')]</span></pre><h2 id="48be" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">和，或者，不是</h2><pre class="iy iz ja jb fd mh mi mj mk aw ml bi"><span id="1f36" class="jo jp hi mi b fi mm mn l mo mp"># SQL :<br/># SELECT * FROM dummy<br/># WHERE seic = 70 AND NOT scheme1_benefit = 'Eligible'<br/><br/># SQLAlchemy :<br/>query = db.select([dummy.columns.seic,dummy.columns.scheme1_benefit]).where(db.and_(dummy.columns.seic &gt;= 80, dummy.columns.scheme1_benefit != 'Eligible'))<br/>result = connection.execute(query)<br/><br/>resultset = result.fetchall()<br/>resultset[:]</span><span id="a741" class="jo jp hi mi b fi mu mn l mo mp"># SQL :<br/># SELECT * FROM dummy<br/># WHERE seic = 70 OR NOT scheme1_benefit = 'Eligible'<br/><br/># SQLAlchemy :<br/>query = db.select([dummy.columns.seic,dummy.columns.scheme1_benefit]).where(db.or_(dummy.columns.seic &gt;= 80, dummy.columns.scheme1_benefit != 'Eligible'))<br/>result = connection.execute(query)<br/>resultset = result.fetchall()<br/>resultset[:]</span></pre><h2 id="422c" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">排序依据:</h2><pre class="iy iz ja jb fd mh mi mj mk aw ml bi"><span id="918f" class="jo jp hi mi b fi mm mn l mo mp"># SQL :<br/># SELECT * FROM dummy<br/># ORDER BY seic DESC, seic_benefit DESC<br/><br/># SQLAlchemy :<br/>query = db.select([dummy]).where(dummy.columns.seic==60).order_by(db.desc(dummy.columns.seic), dummy.columns.seic_benefit)<br/><br/>result = connection.execute(query)<br/>resultset = result.fetchall()<br/>resultset[:10]</span></pre><h2 id="c533" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">功能:</h2><pre class="iy iz ja jb fd mh mi mj mk aw ml bi"><span id="015b" class="jo jp hi mi b fi mm mn l mo mp"># SQL :<br/># SELECT COUNT(seic)<br/># FROM dummy<br/># WHERE seic==70<br/><br/><br/># SQLAlchemy :<br/>query = db.select([db.func.count(dummy.columns.seic)]).where(dummy.columns.seic==60)<br/>result = connection.execute(query)<br/>resultset = result.fetchall()<br/>resultset[:10]</span><span id="e61b" class="jo jp hi mi b fi mu mn l mo mp">[(3,)]</span></pre><p id="f4b2" class="pw-post-body-paragraph km kn hi ko b kp lf ij kr ks lg im ku jz lh kw kx kd li kz la kh lj lc ld le hb bi translated">其他功能包括平均值，总和，最小值，最大值…</p><h2 id="73ff" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">分组依据:</h2><pre class="iy iz ja jb fd mh mi mj mk aw ml bi"><span id="7b3d" class="jo jp hi mi b fi mm mn l mo mp"># SQL :<br/># SELECT SUM(seic) as SEIC<br/># FROM dummy<br/># GROPU BY scheme1_benefit<br/><br/># SQLAlchemy :<br/>query= db.select([db.func.sum(dummy.columns.seic).label('SEIC')]).group_by(dummy.columns.scheme1_benefit)<br/>result = connection.execute(query)<br/>resultset = result.fetchall()<br/>resultset[:5]</span><span id="b8d8" class="jo jp hi mi b fi mu mn l mo mp">[(13828.999965667725,), (15699.400007247925,)]</span></pre><h2 id="716e" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">明显的</h2><pre class="iy iz ja jb fd mh mi mj mk aw ml bi"><span id="7098" class="jo jp hi mi b fi mm mn l mo mp"># SQL :<br/># SELECT DISTINCT seic<br/># FROM dummy<br/><br/><br/># SQLAlchemy :<br/>query = db.select([db.func.count(dummy.columns.seic.distinct())])<br/>result = connection.execute(query)<br/>resultset = result.fetchall()<br/>resultset[:5]</span><span id="6684" class="jo jp hi mi b fi mu mn l mo mp">[(197,)]</span></pre><p id="c0bb" class="pw-post-body-paragraph km kn hi ko b kp lf ij kr ks lg im ku jz lh kw kx kd li kz la kh lj lc ld le hb bi translated">在这里找到我的Jupyter笔记本和数据集:<a class="ae jn" href="https://github.com/shelvi31/SQLALchemy-in-python" rel="noopener ugc nofollow" target="_blank">https://github.com/shelvi31/SQLALchemy-in-python</a></p><h2 id="b578" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">参考资料:</h2><ol class=""><li id="b7db" class="ll lm hi ko b kp kq ks kt jz mw kd mx kh my le mz lr ls lt bi translated"><a class="ae jn" href="https://towardsdatascience.com/sqlalchemy-python-tutorial-79a577141a91" rel="noopener" target="_blank">https://towardsdatascience . com/sqlalchemy-python-tutorial-79a 577141 a91</a></li><li id="191f" class="ll lm hi ko b kp lu ks lv jz lw kd lx kh ly le mz lr ls lt bi translated"><a class="ae jn" href="https://docs.sqlalchemy.org/en/14/core/engines.html" rel="noopener ugc nofollow" target="_blank">https://docs.sqlalchemy.org/en/14/core/engines.html</a></li><li id="8b8e" class="ll lm hi ko b kp lu ks lv jz lw kd lx kh ly le mz lr ls lt bi translated"><a class="ae jn" rel="noopener" href="/swlh/orm-and-sqlalchemy-the-magic-wand-in-database-management-a2d02877a57a">https://medium . com/swlh/ORM-and-sqlalchemy-the-magic-wand-in-database-management-a2d 02877 a57a</a></li></ol></div></div>    
</body>
</html>