# Go 1.18 新通用功能

> 原文：<https://medium.com/geekculture/go-1-18-new-generic-feature-7ce4d2b21248?source=collection_archive---------5----------------------->

![](img/1cd703df53d7b735114a6b5731874fa4.png)

go generics

Go 是广泛用于创建微服务和基于 web 的应用程序的语言之一。大多数项目现在都在将他们的代码库转移到 golang。go 在标准库中提供的特性、易用性及其在多处理器系统上的快速执行是其需求不断增长的原因。

虽然程序员来自 python、java 等语言，这些语言提供了许多动态函数来处理数据结构，可以很容易地用来修改和处理数据结构，如 push、pop 等。而在 golang 中，你必须使用带有线性函数的基本数据结构(如在循环中)来修改或处理它们，如处理队列、堆栈。

为了提供处理数据结构的函数，golang 团队一直在开发静态类型语言，以在其标准库中提供特性和数据结构，从而使 python 或其他语言更易于使用。

在 go 1.18 的新更新中提供了使用泛型处理不同数据类型的一个最常见的特性。因为 golang 是静态语言，所以它不能提供一个可以容纳多种类型的动态数据类型。例如，python 提供了 max 和 min 函数，用于查找数组中的最小数字或查找两个对象或数字中的最小值。而在 golang 的情况下，我们需要为每个原语类型(int 或 string)创建两个独立的函数。虽然有一种方法可以让我们将 interface 作为泛型类型使用，但是当使用 interface 时，我们仍然需要提取底层的原语类型来执行执行，这也不是一种通用的做事方法。

在 go 1.18 中，引入了一些新特性，这是 go 用户不断询问的问题，其中之一是引入泛型。go 中引入的泛型与 python 或任何其他语言都不相似，但它承诺了相同的功能。我们可以使用`any` type 在函数中声明类型及其参数，并在方法中提供类型的元类型，然后将其用于多个原始类型。这些被称为类型约束，在参数前用函数声明。

举一个例子，创建一个方法来处理反转字符串，然后使用一个泛型方法来实现相同的整数切片。

在上面的函数中，如果我们需要创建一个相同的逻辑来反转整数切片，我们需要一个单独的方法来接受不同的类型，即使逻辑是相似的。

我们可以将一个类型声明为`any`类型来创建一个泛型方法，它可以接受整数和字符串来分别反转它们。这将通过声明`any`类型的元类型来创建，元类型将具有整数和字符串的值类型。

Generic method implementation

在上面的例子中，我们可以看到我们使用了一个单一的泛型函数来定义类型`any`的元类型，它用于接受任何类型的接口。这可用于创建在多种类型上提供类似功能的通用函数。

类型约束允许我们声明一个类型以及函数参数，函数参数可用于适应在声明约束时定义的多种类型。例如:- `func SumIntsOrFloats[K comparable, V int64 | float64](m map[K]V)`

在上述函数中声明约束类型的另一种方法是使用一个内部定义了原语的接口。

```
type Number interface {
    int64 | float64
}
```

声明后，可以通过定义声明的函数约束类型所期望的类型来调用函数，也可以在对泛型函数的调用中跳过类型参数(方括号中的类型名)。Go 编译器可以从其他参数中推断出类型参数。

```
SumIntsOrFloats[string, int64](ints), ==> generic function call
SumIntsOrFloats[string, float64](floats))
or
SumIntsOrFloats(ints), ==> generic function call
SumIntsOrFloats(floats))
```

我用了一个相反的例子来描述我们如何实现契约类型来创建一个泛型函数。但是有许多常用的功能可以用类似的方式实现，即

*   查找切片中最小/最大的元素
*   找出切片的平均值/标准偏差
*   计算地图的并/交
*   在节点/边图中查找最短路径
*   对切片/图应用变换函数，返回新的切片/图

> **如何联系到** :-如有相关疑问，请发邮件至【himanshusdec8@gmail.com】:*。*

*拍手声👏如果你喜欢这篇文章。关注 [Himanshu Chaudhary](https://medium.com/u/64edd4213f30?source=post_page-----7ce4d2b21248--------------------------------) 获取更多关于云和云技术的文章。谢谢读者。🙂*

*参考文件的链接:-*

*   *[https://go.dev/blog/why-generics](https://go.dev/blog/why-generics)*