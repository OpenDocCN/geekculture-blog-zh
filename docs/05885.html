<html>
<head>
<title>The Raspberry Pico Microcontroller: Hardware and GPIO Functions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Raspberry Pico微控制器:硬件和GPIO功能</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/the-raspberry-pico-microcontroller-hardware-and-gpio-functions-7c1200ec5f4c?source=collection_archive---------12-----------------------#2021-08-02">https://medium.com/geekculture/the-raspberry-pico-microcontroller-hardware-and-gpio-functions-7c1200ec5f4c?source=collection_archive---------12-----------------------#2021-08-02</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/1bc56d058de97b1bd6ad1a64575b73bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cYCMc0v1dPFk-AWsQcyH-Q.jpeg"/></div></div></figure><p id="1c21" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Raspberry Pi Pico，简称Pico，是Raspberry Pi基金会的一款新型微控制器。从硬件方面来说，它提供了一个双核ARM处理器，2MB的闪存和26个GPIO引脚。从软件方面来说，它提供了一个广泛的C/C++ SDK和一个MicroPython端口。</p><p id="6f2e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">本文详细介绍了Pico的硬件、数字和模拟引脚，以及它提供的引脚功能。</p><p id="3981" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="jo">本文原载于</em> <a class="ae jp" href="https://admantium.com/blog/micro04_raspberry_pico/" rel="noopener ugc nofollow" target="_blank"> <em class="jo">我的博客</em> </a>。</p><h1 id="863a" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">微微</h1><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ko"><img src="../Images/bc8318f5dff5921ff741cbec0ce6b1b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*mGV4FYHaJTi9QUci.jpg"/></div></div></figure><p id="dc17" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="jo">来源:</em><a class="ae jp" href="https://www.raspberrypi.org/products/" rel="noopener ugc nofollow" target="_blank"><em class="jo">raspberrypi.org</em></a></p><p id="8d1b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Pico具有以下规格:</p><p id="1ab5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">处理器:双核Cortex M0+ <br/>闪存:2MB <br/> SRAM: 264 KB <br/>时钟速度:133Mhz <br/> GPIO: 26 (22个数字，3个模拟，1个内置LED)</p><h1 id="2492" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">数字引脚</h1><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ko"><img src="../Images/465b8cd76dca6478deba704f5cc77ecf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Fw1mPsxMy58ThVF9.png"/></div></div></figure><p id="4da7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="jo">来源:</em><a class="ae jp" href="https://kofler.info/raspberry-pi-pico/" rel="noopener ugc nofollow" target="_blank"><em class="jo">koffler . info</em></a></p><p id="e06e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">共有23个数字GPIOs，GP00至GP22。此外，如果需要，模拟引脚GP26–28可以用作数字引脚。</p><h1 id="f864" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">数字输入</h1><p id="154a" class="pw-post-body-paragraph iq ir hi is b it kt iv iw ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn hb bi translated">默认情况下，输出数字引脚。为了明确地设置它们，语句<code class="du ky kz la lb b">gpio_set_dir(pinNumber, GPIO_IN)</code>。二进制值分别解释为<code class="du ky kz la lb b">1</code>和<code class="du ky kz la lb b">0</code>。当前值可通过<code class="du ky kz la lb b">gpio_get(pinNumber)</code>读取。</p><h1 id="3d9e" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">数字输出</h1><p id="a6f4" class="pw-post-body-paragraph iq ir hi is b it kt iv iw ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn hb bi translated">通过执行<code class="du ky kz la lb b">gpio_set_dir(pinNUmber, GPIO_OUT)</code>，可以将数字引脚配置为二进制输出。二进制值用<code class="du ky kz la lb b">gpio_put(pinNumber, value)</code>写，这里<code class="du ky kz la lb b">value</code>就是简单的<code class="du ky kz la lb b">0</code>或者<code class="du ky kz la lb b">1</code>。</p><h1 id="c0a6" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">模拟引脚</h1><p id="d15c" class="pw-post-body-paragraph iq ir hi is b it kt iv iw ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn hb bi translated">3引脚——GP26、GP27和GP28可用作ADC——模数转换器。</p><p id="6e23" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">从技术上讲，Pico还有两个模拟引脚:GP28 / <code class="du ky kz la lb b">ADC3</code>输出所有模拟引脚的基准电压，它可以用于微调ADC样本或强制电源进入PWM模式，减少ADC引脚的干扰。而<code class="du ky kz la lb b">ADC4</code>，不存在分线引脚，可以用来测量处理器的温度。</p><h1 id="274c" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">模拟输入</h1><p id="843f" class="pw-post-body-paragraph iq ir hi is b it kt iv iw ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn hb bi translated">模拟引脚需要用一系列语句进行配置。</p><p id="f821" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">首先，初始化ADC——模数转换器——硬件。然后重置目标引脚，并将其配置为模拟引脚。最后，您可以读取12位模拟信号。</p><pre class="kp kq kr ks fd lc lb ld le aw lf bi"><span id="ffc5" class="lg jr hi lb b fi lh li l lj lk">#include &lt;hardware/gpio.h&gt;<br/>#include &lt;hardware/adc.h&gt;</span><span id="bdb9" class="lg jr hi lb b fi ll li l lj lk">int main() {<br/>  adc_init();<br/>  adc_gpio_init(PIN_NUMBER);<br/>  adc_select_input(PIN_NUMBER); //pin number 0-3<br/>  uint16_t result = adc_read();<br/>}</span></pre><p id="eeb8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您还可以使用<code class="du ky kz la lb b">adc_set_round_robin(bitPattern)</code>同时读取多个模拟引脚，其中<code class="du ky kz la lb b">bitPattern</code>定义了您想要读取的特定引脚。</p><h1 id="6cb2" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">模拟输出</h1><p id="4964" class="pw-post-body-paragraph iq ir hi is b it kt iv iw ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn hb bi translated">Pico可以在多达8个两引脚模块中输出12Hz PWM信号，提供令人印象深刻的16引脚总输出容量。</p><p id="79ba" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">配置输出引脚需要几个步骤。首先，将引脚定义为PWM输出。然后，您不直接配置这个管脚，而是配置它所属的“片”。PWM的特性由每个脉冲的周期数和高低压输出之间的比例决定。最后，你涉及到PWM信号。</p><p id="ee56" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下面是一个完整的例子:</p><pre class="kp kq kr ks fd lc lb ld le aw lf bi"><span id="13ef" class="lg jr hi lb b fi lh li l lj lk">#include &lt;hardware/pwm.h&gt;</span><span id="9cc7" class="lg jr hi lb b fi ll li l lj lk">gpio_set_function(PIN_NUMBER, GPIO_FUNC_PWM);<br/>int SLICE_NUMBER =  `gpio_pwm_to_slice(PIN_NUMBER);</span><span id="c3f3" class="lg jr hi lb b fi ll li l lj lk">pwm_set_wrap(SLICE_NUMBER, NR_OF_CYCLES); //Total number of cycles<br/>pwm_set_chan_level(SLICE_NUMBER, PWM_CHAN_A, 1); // HIGH Output<br/>pwm_set_chan_level(SLICE_NUMBER, PWM_CHAN_B, 5); // LOW Output</span><span id="117b" class="lg jr hi lb b fi ll li l lj lk">pwm_set_enabled(SLICE_NUMBER, true);</span></pre><h1 id="5400" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">GPIO功能</h1><p id="8caa" class="pw-post-body-paragraph iq ir hi is b it kt iv iw ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn hb bi translated">Pico提供了很大的灵活性:大多数GPIO功能和协议可以配置为支持不同的协议。在<a class="ae jp" href="https://datasheets.raspberrypi.org/rp2040/rp2040-datasheet.pdf" rel="noopener ugc nofollow" target="_blank">官方文件的第2.19.2节中可以找到支持什么的确切细节。功能选择</a>。</p><p id="7565" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要设置特定功能:</p><pre class="kp kq kr ks fd lc lb ld le aw lf bi"><span id="b9ba" class="lg jr hi lb b fi lh li l lj lk">#include &lt;hardware/gpio.h&gt;</span><span id="1467" class="lg jr hi lb b fi ll li l lj lk">int main() {<br/>  gpio_set_function(pinNumber, functionEnum)<br/>}</span></pre><p id="9399" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><code class="du ky kz la lb b">functionEnum</code>可以取下列任何一个值:</p><pre class="kp kq kr ks fd lc lb ld le aw lf bi"><span id="93b6" class="lg jr hi lb b fi lh li l lj lk">enum gpio_function { GPIO_FUNC_XIP = 0, GPIO_FUNC_SPI = 1, GPIO_FUNC_UART = 2, GPIO_FUNC_I2C = 3, GPIO_FUNC_PWM = 4, GPIO_FUNC_SIO = 5, GPIO_FUNC_PIO0 = 6, GPIO_FUNC_PIO1 = 7, GPIO_FUNC_GPCK = 8, GPIO_FUNC_USB = 9, GPIO_FUNC_NULL = 0xf }</span></pre><ul class=""><li id="1449" class="lm ln hi is b it iu ix iy jb lo jf lp jj lq jn lr ls lt lu bi translated">XIP:通过<a class="ae jp" href="https://en.wikipedia.org/wiki/Execute_in_place" rel="noopener ugc nofollow" target="_blank">就地执行</a>功能，可以直接访问和修改非RAM数据，例如闪存卡或SSD。</li><li id="972a" class="lm ln hi is b it lv ix lw jb lx jf ly jj lz jn lr ls lt lu bi translated">SPI:<a class="ae jp" href="https://en.wikipedia.org/wiki/Serial_Peripheral_Interface" rel="noopener ugc nofollow" target="_blank">SPI</a>协议是一种用于交换数据的全双工单服务器、多客户端协议。</li><li id="4bd5" class="lm ln hi is b it lv ix lw jb lx jf ly jj lz jn lr ls lt lu bi translated">UART:<a class="ae jp" href="https://en.wikipedia.org/wiki/Universal_asynchronous_receiver-transmitter" rel="noopener ugc nofollow" target="_blank">UART</a>异步串行通信标准通常被实现为<a class="ae jp" href="https://en.wikipedia.org/wiki/RS-232" rel="noopener ugc nofollow" target="_blank"> RS-232 </a>，它提供两个设备之间的直接连接。</li><li id="f614" class="lm ln hi is b it lv ix lw jb lx jf ly jj lz jn lr ls lt lu bi translated">I2C:<a class="ae jp" href="https://en.wikipedia.org/wiki/I%C2%B2C" rel="noopener ugc nofollow" target="_blank">I2C</a>协议是一种用于交换数据的同步、多服务器和多客户端协议。</li><li id="c8a8" class="lm ln hi is b it lv ix lw jb lx jf ly jj lz jn lr ls lt lu bi translated">PWM: <a class="ae jp" href="https://en.wikipedia.org/wiki/Pulse-width_modulation" rel="noopener ugc nofollow" target="_blank">脉冲宽度调制</a>是一种信号技术，在这种技术中，数字信号以一定的频率在高电平和低电平两种状态之间快速切换。有16个PWM通道可用。</li><li id="563e" class="lm ln hi is b it lv ix lw jb lx jf ly jj lz jn lr ls lt lu bi translated">SIO:访问内部CPU寄存器。</li><li id="366b" class="lm ln hi is b it lv ix lw jb lx jf ly jj lz jn lr ls lt lu bi translated">Pio 0 &amp; PI01:<a class="ae jp" href="https://datasheets.raspberrypi.org/pico/raspberry-pi-pico-c-sdk.pdf" rel="noopener ugc nofollow" target="_blank">PIO可编程I/O硬件子系统</a>允许编写高效代码来访问任何新硬件，类似于其他硬件架构中的<a class="ae jp" href="https://en.wikipedia.org/wiki/Field-programmable_gate_array" rel="noopener ugc nofollow" target="_blank"> FGPA </a>和<a class="ae jp" href="https://en.wikipedia.org/wiki/Complex_programmable_logic_device" rel="noopener ugc nofollow" target="_blank"> CPLD </a>。Pico有两个PIO系统，当访问硬件时，可以设置引脚来“加入”这些系统。</li><li id="f63f" class="lm ln hi is b it lv ix lw jb lx jf ly jj lz jn lr ls lt lu bi translated">GPCK:允许访问Pico的内部时钟。</li><li id="78dd" class="lm ln hi is b it lv ix lw jb lx jf ly jj lz jn lr ls lt lu bi translated">USB:在撰写本文时，我还不知道如何使用这种模式。</li></ul><p id="e653" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">除了许多功能外，您还可以使用<code class="du ky kz la lb b">gpio_set_irq_enabled(pinNumber, eventsBitmask, 1)</code>设置引脚的中断级别，其中事件位屏蔽指的是<code class="du ky kz la lb b">LEVEL_LOW</code>、<code class="du ky kz la lb b">LEVEL_HIGH</code>、<code class="du ky kz la lb b">EDGE_FALL</code>和<code class="du ky kz la lb b">EDGE_RISE</code>。</p><h1 id="03c2" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">结论</h1><p id="f366" class="pw-post-body-paragraph iq ir hi is b it kt iv iw ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn hb bi translated">Raspberry Pico提供独特的微控制器概念。GPIO使用的灵活性以及新的PIO系统为连接许多不同形式的硬件提供了机会。看看开发者社区如何利用这些机会将会很有趣。</p></div></div>    
</body>
</html>