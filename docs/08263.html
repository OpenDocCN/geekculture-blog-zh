<html>
<head>
<title>Caffeinate with Tasker — Improved version</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">含Tasker的咖啡因——改良版</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/caffeinate-with-tasker-improved-version-f7f20c918b05?source=collection_archive---------9-----------------------#2021-10-22">https://medium.com/geekculture/caffeinate-with-tasker-improved-version-f7f20c918b05?source=collection_archive---------9-----------------------#2021-10-22</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/260011012e05f67de4884312e1a0c679.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vRHk3LDb3hypqZ_hkEXbmA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Photos by <a class="ae iu" href="https://unsplash.com/@rmrdnl?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Daniel Romero</a> and <a class="ae iu" href="https://unsplash.com/@nate_dumlao?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Nathan Dumlao</a> on <a class="ae iu" href="https://unsplash.com/s/photos/android?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="0661" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这篇<a class="ae iu" rel="noopener" href="/geekculture/caffeinate-with-tasker-301bed100e60">文章</a>中，我描述了一个Tasker项目来增加任务的显示超时。</p><p id="f97d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这个版本的问题是超时步骤是硬编码的，使得<em class="jt">咖啡因</em>任务错综复杂，重复，难以编辑。</p><p id="1ae1" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我决定投入一些时间，改进如下。</p><h1 id="2313" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">项目描述</h1><p id="d31a" class="pw-post-body-paragraph iv iw hi ix b iy ks ja jb jc kt je jf jg ku ji jj jk kv jm jn jo kw jq jr js hb bi translated">项目现在使用以下变量工作:</p><ol class=""><li id="ba8b" class="kx ky hi ix b iy iz jc jd jg kz jk la jo lb js lc ld le lf bi translated"><em class="jt">%咖啡因状态</em>:任务活动时<strong class="ix hj">为真</strong>；<strong class="ix hj">假</strong>否则。</li><li id="2d0e" class="kx ky hi ix b iy lg jc lh jg li jk lj jo lk js lc ld le lf bi translated"><em class="jt"> %caffeinateDefault </em>:以秒为单位定义默认超时。</li><li id="ad8d" class="kx ky hi ix b iy lg jc lh jg li jk lj jo lk js lc ld le lf bi translated"><em class="jt"> %caffeinateSteps </em>:这个数组包含了任务使用的所有超时步骤。</li><li id="589e" class="kx ky hi ix b iy lg jc lh jg li jk lj jo lk js lc ld le lf bi translated"><em class="jt"> %caffeinateStepIndex </em>:标记<em class="jt"> %caffeinateSteps </em>数组中哪个步骤是活动的。</li></ol><p id="f28a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">它包含以下任务:</p><ul class=""><li id="9866" class="kx ky hi ix b iy iz jc jd jg kz jk la jo lb js ll ld le lf bi translated"><strong class="ix hj">咖啡因设置</strong>:询问用户默认超时以及<em class="jt">咖啡因</em>任务需要的各个步骤。它在导入此项目时运行。</li><li id="0503" class="kx ky hi ix b iy lg jc lh jg li jk lj jo lk js ll ld le lf bi translated"><strong class="ix hj">咖啡因</strong>:循环执行各个步骤，当执行到最后一个步骤时，它会将超时时间重置为默认值。它会显示一个通知，要求转到下一步或将超时重置为默认值。</li><li id="3afb" class="kx ky hi ix b iy lg jc lh jg li jk lj jo lk js ll ld le lf bi translated"><strong class="ix hj">咖啡因复位</strong>:恢复默认超时。</li><li id="1618" class="kx ky hi ix b iy lg jc lh jg li jk lj jo lk js ll ld le lf bi translated"><strong class="ix hj">咖啡因老</strong>:原任务从故事开始。</li></ul><p id="0e76" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">还有一个名为<strong class="ix hj">咖啡因重置</strong>的配置文件，它在用户关闭显示器时运行同音异义任务。你可以在<a class="ae iu" rel="noopener" href="/geekculture/caffeinate-with-tasker-301bed100e60#caee"> <em class="jt">第二步了解更多。简介</em> </a>来自原文章。</p><p id="469a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">你可以在这里下载项目<a class="ae iu" href="https://taskernet.com/shares/?user=AS35m8nzU8Z2OxB1WGqHbYHDLajdlq0DG%2B8k8f7L2XfQM3eHbHEAthA2xNvalA2%2FZaJvRZj2roE7ow%3D%3D&amp;id=Project%3ACaffeinate" rel="noopener ugc nofollow" target="_blank">。</a></p><h1 id="1c9e" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">改进的任务概述</h1><p id="802b" class="pw-post-body-paragraph iv iw hi ix b iy ks ja jb jc kt je jf jg ku ji jj jk kv jm jn jo kw jq jr js hb bi translated">在下面的段落中，我将解释前面介绍的任务。</p><h2 id="50d1" class="lm jv hi bd jw ln lo lp ka lq lr ls ke jg lt lu ki jk lv lw km jo lx ly kq lz bi translated"><strong class="ak">咖啡因的设置</strong></h2><figure class="mb mc md me fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ma"><img src="../Images/f3566ceede18abb6b0aabff359a8e37e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C05BTX741OG3XDScGRF9kQ.png"/></div></div></figure><p id="4a51" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">它执行以下操作:</p><ol class=""><li id="8269" class="kx ky hi ix b iy iz jc jd jg kz jk la jo lb js lc ld le lf bi translated"><strong class="ix hj">锚</strong>:定义一个“准备数组”标签。</li><li id="6b88" class="kx ky hi ix b iy lg jc lh jg li jk lj jo lk js lc ld le lf bi translated"><strong class="ix hj">数组清零</strong>:清零<em class="jt"> %caffeinateSteps </em>数组的值。</li><li id="9b96" class="kx ky hi ix b iy lg jc lh jg li jk lj jo lk js lc ld le lf bi translated"><strong class="ix hj">变量集</strong>:将<em class="jt"> %caffeinateStepIndex </em>变量的值设置为<strong class="ix hj"> 0 </strong>。</li><li id="9301" class="kx ky hi ix b iy lg jc lh jg li jk lj jo lk js lc ld le lf bi translated"><strong class="ix hj">锚</strong>:定义一个“定义默认”标签。</li><li id="56a7" class="kx ky hi ix b iy lg jc lh jg li jk lj jo lk js lc ld le lf bi translated"><strong class="ix hj">输入对话框</strong>:要求用户以秒为单位输入默认显示超时，并保存在<em class="jt">%输入</em>变量中。它接受一个数字。</li><li id="7bd0" class="kx ky hi ix b iy lg jc lh jg li jk lj jo lk js lc ld le lf bi translated"><strong class="ix hj">变量集</strong>:将<em class="jt"> %caffeinateStepIndex </em>变量的值设置为<em class="jt"> %input </em>。</li><li id="ee06" class="kx ky hi ix b iy lg jc lh jg li jk lj jo lk js lc ld le lf bi translated"><strong class="ix hj">锚</strong>:定义一个“定义步骤”标签。</li><li id="c574" class="kx ky hi ix b iy lg jc lh jg li jk lj jo lk js lc ld le lf bi translated"><strong class="ix hj">变量增加</strong>:将<em class="jt">% caffeinatesteindex</em>变量增加<strong class="ix hj"> 1 </strong>。</li><li id="d709" class="kx ky hi ix b iy lg jc lh jg li jk lj jo lk js lc ld le lf bi translated"><strong class="ix hj">输入对话框</strong>:要求用户以秒为单位显示超时的步长，并保存在<em class="jt"> %input </em>变量中。它接受一个数字。</li><li id="a4c2" class="kx ky hi ix b iy lg jc lh jg li jk lj jo lk js lc ld le lf bi translated"><strong class="ix hj">数组推送</strong>:将<em class="jt">%输入</em>添加到<em class="jt"> %caffeinateSteps </em>数组的<em class="jt"> %caffeinateStepIndex </em>位置。</li><li id="93bb" class="kx ky hi ix b iy lg jc lh jg li jk lj jo lk js lc ld le lf bi translated"><strong class="ix hj">选择输入对话框</strong>:要求用户添加另一个步骤并保存在<em class="jt"> %input </em>变量中。这是一个是/否对话框。</li><li id="508c" class="kx ky hi ix b iy lg jc lh jg li jk lj jo lk js lc ld le lf bi translated"><strong class="ix hj">转到</strong>:如果<em class="jt">%输入</em>变量的值为<strong class="ix hj">是</strong>，返回到带有“定义步骤”标签的<em class="jt">锚</em>。</li><li id="437e" class="kx ky hi ix b iy lg jc lh jg li jk lj jo lk js lc ld le lf bi translated"><strong class="ix hj">锚</strong>:定义一个“初始化咖啡因”标签。</li><li id="8de4" class="kx ky hi ix b iy lg jc lh jg li jk lj jo lk js lc ld le lf bi translated"><strong class="ix hj">执行任务</strong>:运行<strong class="ix hj">咖啡因重置</strong>任务，恢复显示超时和变量值。</li></ol><h2 id="e10a" class="lm jv hi bd jw ln lo lp ka lq lr ls ke jg lt lu ki jk lv lw km jo lx ly kq lz bi translated">咖啡因</h2><figure class="mb mc md me fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mf"><img src="../Images/f24f0df708c43240f7ef248611b42fa6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*db8TBQRHRIpriBjuTmVZuQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">On the left, the Caffeinate task. On the center and the right, the configurations of respectively Action 6 and 7.</figcaption></figure><p id="f73b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">它执行以下操作:</p><ol class=""><li id="fd46" class="kx ky hi ix b iy iz jc jd jg kz jk la jo lb js lc ld le lf bi translated"><strong class="ix hj">锚</strong>:定义一个“初始化变量”标签。</li><li id="319e" class="kx ky hi ix b iy lg jc lh jg li jk lj jo lk js lc ld le lf bi translated"><strong class="ix hj">变量集</strong>:将<em class="jt"> %caffeinateState </em>变量的值设置为<strong class="ix hj">真</strong>。</li><li id="3ccc" class="kx ky hi ix b iy lg jc lh jg li jk lj jo lk js lc ld le lf bi translated"><strong class="ix hj">变量增加</strong>:将<em class="jt">% caffeinatesteindex</em>变量增加<strong class="ix hj"> 1 </strong>。</li><li id="9774" class="kx ky hi ix b iy lg jc lh jg li jk lj jo lk js lc ld le lf bi translated"><strong class="ix hj"> If </strong>:变量<em class="jt"> %caffeinateStepIndex </em>小于或等于<em class="jt"> %caffeinateSteps </em>数组大小时运行的执行分支。</li><li id="6e9a" class="kx ky hi ix b iy lg jc lh jg li jk lj jo lk js lc ld le lf bi translated"><strong class="ix hj">显示超时</strong>:在<em class="jt"> %caffeinateStepIndex </em>处将显示超时设置为<em class="jt"> %caffeinateSteps </em>的值。</li><li id="89ea" class="kx ky hi ix b iy lg jc lh jg li jk lj jo lk js lc ld le lf bi translated"><strong class="ix hj">通知</strong>:显示如下说明的通知。只有当<em class="jt"> %caffeinateStepIndex </em>小于<em class="jt"> %caffeinateSteps </em>数组大小时，它才会运行这个操作。它显示了下面描述的两个按钮。</li><li id="f8ce" class="kx ky hi ix b iy lg jc lh jg li jk lj jo lk js lc ld le lf bi translated"><strong class="ix hj">通知</strong>:显示如下说明的通知。只有当<em class="jt"> %caffeinateStepIndex </em>等于<em class="jt"> %caffeinateSteps </em>数组大小时，它才会运行这个操作。它仅显示下述<em class="jt">停止</em>按钮。</li><li id="816a" class="kx ky hi ix b iy lg jc lh jg li jk lj jo lk js lc ld le lf bi translated"><strong class="ix hj">否则</strong>:如果<em class="jt">动作4 </em>条件为<strong class="ix hj">假</strong>时运行的执行分支。</li><li id="1f89" class="kx ky hi ix b iy lg jc lh jg li jk lj jo lk js lc ld le lf bi translated"><strong class="ix hj">执行任务</strong>:运行<strong class="ix hj">咖啡因重置</strong>任务，恢复显示超时和变量值。</li></ol><p id="0120" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">动作6和7显示了一个带有显示超时信息的持久通知。它有以下按钮:</p><ul class=""><li id="7569" class="kx ky hi ix b iy iz jc jd jg kz jk la jo lb js ll ld le lf bi translated"><strong class="ix hj">增加</strong>:用<em class="jt">执行任务</em>动作调用<strong class="ix hj">咖啡因</strong>任务，增加超时。只有当有其他步骤可用时，此按钮才会出现。</li><li id="4495" class="kx ky hi ix b iy lg jc lh jg li jk lj jo lk js ll ld le lf bi translated"><strong class="ix hj">停止</strong>:通过<em class="jt">执行任务</em>动作调用<strong class="ix hj">咖啡因重置</strong>任务，恢复显示超时。</li></ul><h2 id="5e3d" class="lm jv hi bd jw ln lo lp ka lq lr ls ke jg lt lu ki jk lv lw km jo lx ly kq lz bi translated">咖啡因重置</h2><figure class="mb mc md me fd ij er es paragraph-image"><div class="er es mg"><img src="../Images/006e72ae34673597736ca1cf56e02644.png" data-original-src="https://miro.medium.com/v2/resize:fit:720/format:webp/1*84r5FBo92gAeJFKngNW7Bg.png"/></div></figure><p id="f2e3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">它执行以下操作:</p><ol class=""><li id="aabe" class="kx ky hi ix b iy iz jc jd jg kz jk la jo lb js lc ld le lf bi translated"><strong class="ix hj">变量集</strong>:将<em class="jt"> %caffeinateStepIndex </em>变量的值设置为<strong class="ix hj"> 0 </strong>。</li><li id="0450" class="kx ky hi ix b iy lg jc lh jg li jk lj jo lk js lc ld le lf bi translated"><strong class="ix hj">变量设置</strong>:将<em class="jt"> %caffeinateState </em>变量的值设置为<strong class="ix hj"> false </strong>。</li><li id="be91" class="kx ky hi ix b iy lg jc lh jg li jk lj jo lk js lc ld le lf bi translated"><strong class="ix hj">通知取消</strong>:删除<em class="jt">咖啡因任务</em>显示的通知。</li><li id="a963" class="kx ky hi ix b iy lg jc lh jg li jk lj jo lk js lc ld le lf bi translated"><strong class="ix hj">显示超时</strong>:将显示超时设置为<em class="jt"> %caffeinateDefault </em>变量的值。</li></ol><h2 id="344e" class="lm jv hi bd jw ln lo lp ka lq lr ls ke jg lt lu ki jk lv lw km jo lx ly kq lz bi translated"><strong class="ak">含咖啡因的老</strong></h2><p id="4dda" class="pw-post-body-paragraph iv iw hi ix b iy ks ja jb jc kt je jf jg ku ji jj jk kv jm jn jo kw jq jr js hb bi translated">可以参考<a class="ae iu" rel="noopener" href="/geekculture/caffeinate-with-tasker-301bed100e60#25b6"> <em class="jt">步骤1。任务&gt;咖啡因</em>来自原文章</a>对其的描述。</p><h1 id="2e4a" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">使用</h1><p id="c40b" class="pw-post-body-paragraph iv iw hi ix b iy ks ja jb jc kt je jf jg ku ji jj jk kv jm jn jo kw jq jr js hb bi translated">可以参考<a class="ae iu" rel="noopener" href="/geekculture/caffeinate-with-tasker-301bed100e60#f444"> <em class="jt">第三步。快速设置瓷砖</em>和</a>的使用方法见原文章<em class="jt">快速设置瓷砖</em>。</p></div></div>    
</body>
</html>