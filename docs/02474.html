<html>
<head>
<title>A Virtual YouTuber System Without Deep Learning</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">一个没有深度学习的虚拟YouTuber系统</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/a-virtual-youtuber-system-without-deep-learning-820d9cd0f98a?source=collection_archive---------17-----------------------#2021-05-16">https://medium.com/geekculture/a-virtual-youtuber-system-without-deep-learning-820d9cd0f98a?source=collection_archive---------17-----------------------#2021-05-16</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="4418" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">只需CPU和网络摄像头即可创建您的VTuber系统！</h2></div><p id="599a" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这篇文章中，我将展示一个用C++编写的虚拟YouTube(VTuber)系统，它只使用一个普通的CPU和网络摄像头。我还会讲一下VTuber的现象和视线追踪的一些基础知识。最后，在完成这个系统之后，我会留下一些个人的想法。</p><h1 id="59a3" class="jt ju hi bd jv jw jx jy jz ka kb kc kd io ke ip kf ir kg is kh iu ki iv kj kk bi translated">VTuber简介</h1><p id="8cd4" class="pw-post-body-paragraph ix iy hi iz b ja kl ij jc jd km im jf jg kn ji jj jk ko jm jn jo kp jq jr js hb bi translated">VTuber指的是一个人通过流媒体或上传到YouTube，并实时跟随他的运动的动漫头像。[ ]虽然VTuber起源于2010年年中的日本，但在新冠肺炎的帮助下，在hololive [ ]和nijisanji等一些商业公司的推动下，它从2020年初开始蓬勃发展。[ ]</p><h1 id="93ef" class="jt ju hi bd jv jw jx jy jz ka kb kc kd io ke ip kf ir kg is kh iu ki iv kj kk bi translated">动机</h1><p id="ba04" class="pw-post-body-paragraph ix iy hi iz b ja kl ij jc jd km im jf jg kn ji jj jk ko jm jn jo kp jq jr js hb bi translated">有一天，我的朋友给我发了一个项目，他用Python写了一个VTuber系统。在浏览了他的代码后，我有了一个想法:为什么不用C++实现这个VTuber系统来提高性能，并展示我的C++能力呢？此外，我想通过实施这个VTuber项目来加强我的图像处理知识。</p><p id="d874" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">此外，许多VTuber系统使用深度学习技术或专门的硬件来进行非常精确的运动捕捉[⁴]，但不是每个人都负担得起专门的硬件或GPU等设备。此外，它需要更多的设置过程或环境，这在某些场景中可能是不可行的。相比之下，这种VTuber系统只需要一个普通的CPU和一个网络摄像头，以便于设置和成本效益。</p><figure class="ks kt ku kv fd kw er es paragraph-image"><div class="er es kr"><img src="../Images/0ef85d9127f3a1ad5f477c0633a1486f.png" data-original-src="https://miro.medium.com/v2/resize:fit:880/1*T3JuvqOYPH88o7485YD8LA.gif"/></div><figcaption class="kz la et er es lb lc bd b be z dx">An example of an open-source VTuber system using deep learning. Adopted from [⁵].</figcaption></figure><h1 id="cd33" class="jt ju hi bd jv jw jx jy jz ka kb kc kd io ke ip kf ir kg is kh iu ki iv kj kk bi translated">体系结构</h1><p id="3c97" class="pw-post-body-paragraph ix iy hi iz b ja kl ij jc jd km im jf jg kn ji jj jk ko jm jn jo kp jq jr js hb bi translated">该系统的架构描述如下:</p><h2 id="5347" class="ld ju hi bd jv le lf lg jz lh li lj kd jg lk ll kf jk lm ln kh jo lo lp kj lq bi translated">计算机网络服务器</h2><p id="7525" class="pw-post-body-paragraph ix iy hi iz b ja kl ij jc jd km im jf jg kn ji jj jk ko jm jn jo kp jq jr js hb bi translated">服务器负责检测用户的面部及其标志。在检测到地标后，它会计算眼睛和嘴巴的运动。接下来，运动数据将通过WebSocket传输到客户端。</p><h2 id="6052" class="ld ju hi bd jv le lf lg jz lh li lj kd jg lk ll kf jk lm ln kh jo lo lp kj lq bi translated">客户</h2><p id="a88e" class="pw-post-body-paragraph ix iy hi iz b ja kl ij jc jd km im jf jg kn ji jj jk ko jm jn jo kp jq jr js hb bi translated">客户端负责显示VTuber及其运动。为了实时显示，客户端使用WebSocket接收运动数据。客户端收到服务器发送的数据后，将在浏览器中显示VTyber及其移动。</p><h1 id="41c0" class="jt ju hi bd jv jw jx jy jz ka kb kc kd io ke ip kf ir kg is kh iu ki iv kj kk bi translated">视线跟踪和嘴部运动的加工过程</h1><p id="917f" class="pw-post-body-paragraph ix iy hi iz b ja kl ij jc jd km im jf jg kn ji jj jk ko jm jn jo kp jq jr js hb bi translated">我猜你会想知道服务器是如何检测人脸并计算引擎盖下的运动的。所以在这一段中，我将讲述从网络摄像头到面部运动流数据的细节。</p><ol class=""><li id="7741" class="lr ls hi iz b ja jb jd je jg lt jk lu jo lv js lw lx ly lz bi translated"><strong class="iz hj">从网络摄像头捕捉视频流，一张一张地拍摄。</strong></li><li id="3d54" class="lr ls hi iz b ja ma jd mb jg mc jk md jo me js lw lx ly lz bi translated"><strong class="iz hj">调整输入图片的大小。</strong> <br/>众所周知，调整图像大小可以提高图像处理速度，因为像素更少。经过测试，将输入图像的大小调整为宽度和高度的一半可以获得2倍的速度，同时不会严重影响面部检测和视线跟踪过程。</li><li id="3383" class="lr ls hi iz b ja ma jd mb jg mc jk md jo me js lw lx ly lz bi translated"><strong class="iz hj">对输入的图片进行灰度处理。</strong> <br/>同样，如果你不需要颜色通道做进一步处理，你应该灰度化你的图像。此外，与RGB相比，Dlib人脸检测器在灰度模式下运行速度更快。</li><li id="3f07" class="lr ls hi iz b ja ma jd mb jg mc jk md jo me js lw lx ly lz bi translated"><strong class="iz hj">通过Dlib运行面部标志检测。</strong></li><li id="2ac1" class="lr ls hi iz b ja ma jd mb jg mc jk md jo me js lw lx ly lz bi translated"><strong class="iz hj">检测眼睛的区域。</strong> <br/>在这个程序中，我们将要检测眼睛。以加速处理并获得更准确的结果。我裁剪了只包含眼睛的图像。</li><li id="93f7" class="lr ls hi iz b ja ma jd mb jg mc jk md jo me js lw lx ly lz bi translated"><strong class="iz hj">检索每个眼睛区域的瞳孔。</strong> <br/>如【⁶】所示，使用5到100之间的阈值然后按瞳孔轮廓面积排序后选择最后第二个可以适合大多数情况。因此，我修改了这个Python包，然后用C++重新编写了它，以适合我的项目。</li><li id="2b87" class="lr ls hi iz b ja ma jd mb jg mc jk md jo me js lw lx ly lz bi translated"><strong class="iz hj">计算面部运动(凝视和嘴巴)。<br/> </strong>得到人脸地标和瞳孔位置后，就该计算人脸运动了。该计算改编自我朋友在[⁷].]的VTuber项目</li><li id="1c57" class="lr ls hi iz b ja ma jd mb jg mc jk md jo me js lw lx ly lz bi translated"><strong class="iz hj">通过WebSocket将数据传输到客户端。</strong></li></ol><h1 id="e0ab" class="jt ju hi bd jv jw jx jy jz ka kb kc kd io ke ip kf ir kg is kh iu ki iv kj kk bi translated">系统设置</h1><p id="e834" class="pw-post-body-paragraph ix iy hi iz b ja kl ij jc jd km im jf jg kn ji jj jk ko jm jn jo kp jq jr js hb bi translated">在这一部分，我将总结这个vface-server-cpp项目的设置。</p><h2 id="1bb3" class="ld ju hi bd jv le lf lg jz lh li lj kd jg lk ll kf jk lm ln kh jo lo lp kj lq bi translated">计算机网络服务器</h2><ol class=""><li id="9fa4" class="lr ls hi iz b ja kl jd km jg mf jk mg jo mh js lw lx ly lz bi translated">从这里下载vface-server-CPP:<a class="ae kq" href="https://github.com/Cuda-Chen/vface-server-cpp" rel="noopener ugc nofollow" target="_blank">https://github.com/Cuda-Chen/vface-server-cpp</a></li><li id="728c" class="lr ls hi iz b ja ma jd mb jg mc jk md jo me js lw lx ly lz bi translated">安装依赖项，即:<br/>* OpenCV<br/>*<a class="ae kq" href="https://github.com/joewalnes/websocketd" rel="noopener ugc nofollow" target="_blank">websocketd</a></li><li id="8462" class="lr ls hi iz b ja ma jd mb jg mc jk md jo me js lw lx ly lz bi translated">输入<br/> <code class="du mi mj mk ml b">mkdir build &amp;&amp; cd build &amp;&amp; cmake .. &amp;&amp; make</code>编译项目</li><li id="9bc8" class="lr ls hi iz b ja ma jd mb jg mc jk md jo me js lw lx ly lz bi translated">输入<br/> <code class="du mi mj mk ml b">$ websocketd --port=5566 ./vface_server_cpp</code>执行程序</li><li id="b2c2" class="lr ls hi iz b ja ma jd mb jg mc jk md jo me js lw lx ly lz bi translated">运行客户端(即<a class="ae kq" href="https://github.com/c910335/vface-web" rel="noopener ugc nofollow" target="_blank"> vface-web </a>)。</li></ol><h2 id="264c" class="ld ju hi bd jv le lf lg jz lh li lj kd jg lk ll kf jk lm ln kh jo lo lp kj lq bi translated">客户</h2><p id="a470" class="pw-post-body-paragraph ix iy hi iz b ja kl ij jc jd km im jf jg kn ji jj jk ko jm jn jo kp jq jr js hb bi translated">对于客户设置，由于回购由我的朋友维护，您可以访问回购设置:<a class="ae kq" href="https://github.com/c910335/vface-web" rel="noopener ugc nofollow" target="_blank">https://github.com/c910335/vface-web</a></p><h1 id="0656" class="jt ju hi bd jv jw jx jy jz ka kb kc kd io ke ip kf ir kg is kh iu ki iv kj kk bi translated">结果</h1><p id="2cdc" class="pw-post-body-paragraph ix iy hi iz b ja kl ij jc jd km im jf jg kn ji jj jk ko jm jn jo kp jq jr js hb bi translated">由于图像处理中使用的常见方法，如调整大小、阈值和感兴趣区域(ROI)，我的VTuber系统可以在大约10毫秒内检测和计算人脸关键点。计算后，数据将传输到客户端，然后绘制您选择的动画角色。</p><p id="7bf9" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">下图用我的脸创造了这个可爱的角色:</p><figure class="ks kt ku kv fd kw er es paragraph-image"><div class="er es mm"><img src="../Images/59faee277aec27da807f1e31c583d5bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/0*Ud1q3kTBbbPbsIkk.gif"/></div></figure><p id="4481" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">因此，你可以注意到这个角色不能完全闭上眼睛。原因是我坐得离摄像头太远，闭眼动作需要根据个人情况进一步调整。</p><h1 id="a531" class="jt ju hi bd jv jw jx jy jz ka kb kc kd io ke ip kf ir kg is kh iu ki iv kj kk bi translated">摘要</h1><p id="10dd" class="pw-post-body-paragraph ix iy hi iz b ja kl ij jc jd km im jf jg kn ji jj jk ko jm jn jo kp jq jr js hb bi translated">在这篇文章中，我向你们展示了我的VTuber系统，并介绍了VTuber的背景。我还列出了从分幅人脸、检测和计算人脸关键点的处理过程。最后，对结果进行了演示，并留下了一些有待进一步改进的地方。</p><h1 id="59b0" class="jt ju hi bd jv jw jx jy jz ka kb kc kd io ke ip kf ir kg is kh iu ki iv kj kk bi translated">参考</h1><p id="2e99" class="pw-post-body-paragraph ix iy hi iz b ja kl ij jc jd km im jf jg kn ji jj jk ko jm jn jo kp jq jr js hb bi translated">[]<a class="ae kq" href="https://www.urbandictionary.com/define.php?term=VTuber" rel="noopener ugc nofollow" target="_blank">https://www.urbandictionary.com/define.php?term=VTuber</a></p><p id="3b8c" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">https://en.hololive.tv/<a class="ae kq" href="https://en.hololive.tv/" rel="noopener ugc nofollow" target="_blank"/></p><p id="00ce" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">https://www.nijisanji.jp/<a class="ae kq" href="https://www.nijisanji.jp/" rel="noopener ugc nofollow" target="_blank"/></p><p id="c075" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">【⁴】<a class="ae kq" href="https://gist.github.com/emilianavt/cbf4d6de6f7fb01a42d4cce922795794" rel="noopener ugc nofollow" target="_blank">https://gist . github . com/emilian avt/CBF 4d 6 de 6 f 7 FB 01 a 42d 4c ce 922795794</a></p><p id="91f7" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">https://github.com/DeepVTuber/DeepVTB#head-pose-estimation<a class="ae kq" href="https://github.com/DeepVTuber/DeepVTB#head-pose-estimation" rel="noopener ugc nofollow" target="_blank">⁵</a></p><p id="7047" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">https://github.com/antoinelame/GazeTracking<a class="ae kq" href="https://github.com/antoinelame/GazeTracking" rel="noopener ugc nofollow" target="_blank">⁶</a></p><p id="0b66" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">【⁷】<a class="ae kq" href="https://github.com/c910335/vface-server/blob/master/calculator.py" rel="noopener ugc nofollow" target="_blank">https://github . com/c 910335/vface-server/blob/master/calculator . py</a></p></div><div class="ab cl mn mo gp mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="hb hc hd he hf"><p id="a43b" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="mu">原载于2021年5月16日</em><a class="ae kq" href="https://cuda-chen.github.io/image%20processing/2021/05/16/a-virtual-youtuber-system-without-deep-learning.html" rel="noopener ugc nofollow" target="_blank"><em class="mu">https://cuda-Chen . github . io</em></a><em class="mu">。</em></p></div><div class="ab cl mn mo gp mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="hb hc hd he hf"><blockquote class="mv mw mx"><p id="e12a" class="ix iy mu iz b ja jb ij jc jd je im jf my jh ji jj mz jl jm jn na jp jq jr js hb bi translated">如果您有任何想法和问题要分享，请通过<strong class="iz hj">clh 960524【at】Gmail . com</strong>联系我。此外，您可以查看我的GitHub资源库中的其他作品。如果你像我一样对机器学习、图像处理和并行计算充满热情，请随时在LinkedIn上添加我。</p></blockquote></div><div class="ab cl mn mo gp mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="hb hc hd he hf"><figure class="ks kt ku kv fd kw"><div class="bz dy l di"><div class="nb nc l"/></div></figure></div></div>    
</body>
</html>