<html>
<head>
<title>Arc I: Raison D’être</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Arc I:存在的理由</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/arc-i-raison-d%C3%AAtre-b755866f7844?source=collection_archive---------75-----------------------#2021-06-22">https://medium.com/geekculture/arc-i-raison-d%C3%AAtre-b755866f7844?source=collection_archive---------75-----------------------#2021-06-22</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="29b3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是mlpack下GSoC编码阶段第二周的结束。时间过得相当快。通过这篇文章，我想总结一下我在过去两周内的成就、失败和经验。</p><p id="0470" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在开始之前，我想感谢我的导师马库斯·埃德尔、詹姆斯·巴拉穆塔和萨扬·戈斯瓦米。没有他们不懈的支持，这个项目不可能进展顺利。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/89c7b8e9100393257236878f99c84f6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pgMfcf3mEqNZiLNV1kac_A.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx">Just Windows things :)</figcaption></figure><h1 id="1a50" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">社区纽带</h1><p id="9306" class="pw-post-body-paragraph if ig hi ih b ii kr ik il im ks io ip iq kt is it iu ku iw ix iy kv ja jb jc hb bi translated">是时候见见大家并介绍我自己了。老实说，我不太擅长这种会议。谢天谢地，事情比预期的要顺利，我对导师和我的同事有了更多的了解。他们的爱好，他们的激情，他们喜欢的事情。有些人喜欢跳伞，有些人喜欢滑翔伞，有些人弹钢琴，有些人在驾驶中找到乐趣。</p><p id="a102" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">过去，ensmallen图书馆广泛关注单目标问题(SOP)。这意味着，所有的回调、优化器和测试用例都是在牢记这个概念的情况下编写的。最初，计划是增加一些多目标优化器(MOO)。这很快转变为一场“革命”(我喜欢称之为:-)，以适应基于MOO的问题的库。因此我的项目名为“多目标优化框架”。</p><p id="f20f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从头开始制作算法的一个关键部分包括彻底的测试。一个好的测试套件应该覆盖算法的长度和宽度。ZDT(齐兹勒、黛比和蒂勒)测试套件符合这一描述以及更多。它提供了无数的目标函数，专门用来测试算法克服各种困难情况的能力。编码部分不是很大的障碍，尽管我们跳过了一个测试，因为论文中的这部分对我来说是模糊的。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kw"><img src="../Images/c9585c50c4519dcd3f072b31507e9098.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EJNe7OiXemaUH0ZlyThURg.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx">Fig 1. The shapes of the Pareto Fronts of the ZDT test problems. For more info, see this <a class="ae kx" href="https://github.com/mlpack/ensmallen/pull/273" rel="noopener ugc nofollow" target="_blank">link</a>.</figcaption></figure><p id="de5c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后注意力转移到实际应用的演示上。马库斯建议为此写一个xeus-clish笔记本。我们的想法是用它来平衡给定股票数据的用户的收益和波动性。同时优化相互冲突的目标是多目标进化算法(MOEA)的强项。</p><p id="4995" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，需要一种在现场生成股票数据的方法。pandas-datareaderPython模块被认为适合这个任务。通过几行代码，它允许用户查询Yahoo Finance API并输出一个CSV文件。下一步是在Python和C++接口之间建立一个网关。输入:“Python C API”。很多人认为，Python C API是哈迪斯在地狱无聊时出没的地方。玩笑归玩笑，在Python C API中调试可能会很累人，我在调试过程中遇到了这个令人捧腹的<a class="ae kx" href="https://stackoverflow.com/q/17532371" rel="noopener ugc nofollow" target="_blank">回复</a>(见第一条评论)。</p><blockquote class="kz la lb"><p id="193d" class="if ig ky ih b ii ij ik il im in io ip lc ir is it ld iv iw ix le iz ja jb jc hb bi translated">你忘了用鸡血画五边形并点燃黑色蜡烛的步骤。当混合C和Python时，这通常对我有用</p></blockquote><p id="717a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">随着这一问题的解决，出现了新一轮回调的需要。它的工作是通过缓存当前的帕累托前沿来跟踪进化过程。mlpack存储库在很大程度上依赖于模板元编程来将大部分工作推到编译阶段本身。回调利用了相同的思想，它们在这里作为模板参数传递。因为以前的回调是专门为SOP编写的，所以它必须从头开始构建才能在这里工作。</p><p id="dacd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">终于到了将我们的算法部署到现实世界的时候了，结果是…令人印象深刻。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lf"><img src="../Images/4f833cd188ff958e9bad11d991113a0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*icz8fhlqW03wdZzov1t67A.jpeg"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx">Fig. 2: Left to right. The generated Pareto Front vs the expected Pareto Front.</figcaption></figure><p id="e12b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">失败之后，我开始怀疑我迄今为止所有工作的可信度。我写的所有代码都是错的吗？导师们确信，事实并非如此。彻底的事后分析表明，实现确实是正确的(耶！)，但人口规模太低，无法观察到任何有意义的东西。这标志着社区结合期的结束。</p><h1 id="0875" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">第一周</h1><p id="7ccd" class="pw-post-body-paragraph if ig hi ih b ii kr ik il im ks io ip iq kt is it iu ku iw ix iy kv ja jb jc hb bi translated">以前，人工问题集(ZDT)被合并，以测试算法对预定义挫折的鲁棒性。然而，帕累托集合(可变空间中的最终群体)形状惊人地简单。现实世界中的问题绝对没有理由会是这样的。艾尔。).这是本周的主题，寻找一种在变量空间和目标空间都表现良好的算法。</p><p id="c0ba" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">“使用分解的多目标进化算法—差分变异(MOEA/D-DE)”[1]。唷，好长的名字。这种算法有望完全符合上述标准。</p><p id="7dea" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这种算法的显著特点是:</p><p id="ad86" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">A)参考方向:从目标空间中的单位单形采样的一组向量。他们引导人们走向真正的帕累托前沿。</p><p id="059d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">b)分解:使用参考方向将多目标问题“分解”成标量优化问题的目标函数。</p><p id="9747" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该研究论文就其相对于传统的NSGA-II算法的速度和准确性提出了一些大胆的主张，稍后将对此进行更多介绍。第一步是编写一些分解算法。</p><p id="dbeb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">关于分解算法的一个有趣的见解，本质上它们将群体推向参考方向。对于ex:加权平均分解，其目标是最小化参考方向和给定目标向量之间的点积。也就是说，最大化它们之间的相似性。这样的实现帮助我们理解算法的核心是什么。</p><p id="a42c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在那个笔记上，发现基于策略的交集分解(PBI)在论文中被错误地实现。文中的参考方向在相乘之前没有归一化。检查其他著名的代码库，我的怀疑是正确的。我最后为它写了一个迷你<a class="ae kx" href="https://github.com/mlpack/ensmallen/pull/293#issuecomment-862655215" rel="noopener ugc nofollow" target="_blank"> <em class="ky">数学证明</em></a>；D</p><h1 id="67cc" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">第二周</h1><p id="c19e" class="pw-post-body-paragraph if ig hi ih b ii kr ik il im ks io ip iq kt is it iu ku iw ix iy kv ja jb jc hb bi translated">本周的重点是生成这些“参考方向”。这些是进化过程的指路明灯，它允许对产生的种群的多样性进行明确的控制。群体中的均匀分布是期望的特征，因此仅期望参考方向分布是均匀的[2]。</p><p id="d204" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个问题的数学公式可以归结为一个简单的概念，“找到一种对单位单纯形进行均匀采样的方法”。向下堆栈溢出的巡视揭示了三种可行的方法:</p><p id="1317" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">a)贝叶斯自助<br/> b)丹尼斯采样<br/> c)狄利克雷采样</p><p id="1e63" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在所有这些中，Das-Dennis是最难实现的。它涉及多层递归，所以堆栈限制可能会成为一个问题。值得庆幸的是，pymoo有一个无递归的实现，优雅而简洁。</p><p id="4e03" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在将MOEA/发展经济学与政策设计合并之后。Das Dennis砝码初始化的当前拉式请求仍处于挂起状态。尽管如此，我还是冒昧地将我们的算法与NSGA-II进行了比较，观察到了以下情况。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lg"><img src="../Images/dae2a7355c4754e36ed332958912542c.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/format:webp/1*1oL4-E8Q5VNgSh8wDURG1A.png"/></div></figure><p id="9a04" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我又运行了几次，但结果还是差不多。这意味着MOEAD不仅更准确，而且比NSGA-II平均快30倍。</p><p id="7676" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">大比分胜利！那是本周工作的致命一击。我们决定今天到此为止，稍微休息一下。</p><h2 id="7288" class="lh ju hi bd jv li lj lk jz ll lm ln kd iq lo lp kh iu lq lr kl iy ls lt kp lu bi translated">结束注释</h2><p id="afb1" class="pw-post-body-paragraph if ig hi ih b ii kr ik il im ks io ip iq kt is it iu ku iw ix iy kv ja jb jc hb bi translated">在开始编写算法之前，我必须修改许多现有的代码。这包括编写全新的测试套件、重写回调、删除旧代码等等。我相信所有这些努力都是值得的，所有这些都使得移植代码变得更加容易。或者我应该说，它的“存在理由”已经实现了。</p><p id="51ce" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">祝大家这周过得愉快！</p><h2 id="fa02" class="lh ju hi bd jv li lj lk jz ll lm ln kd iq lo lp kh iu lq lr kl iy ls lt kp lu bi translated">文献学</h2><ol class=""><li id="903a" class="lv lw hi ih b ii kr im ks iq lx iu ly iy lz jc ma mb mc md bi translated">李，惠，张庆福。"具有复杂帕累托集的多目标最优化问题，MOEA/D和NSGA-II . "《IEEE进化计算汇刊》13.2(2008):284–302。</li><li id="6ddf" class="lv lw hi ih b ii me im mf iq mg iu mh iy mi jc ma mb mc md bi translated">李，，姚昕。“什么重量适合你？在基于分解的进化多目标优化中为任何Pareto前沿形状调整权重。”<em class="ky">进化计算</em>28.2(2020):227–253。</li></ol></div></div>    
</body>
</html>