<html>
<head>
<title>Understanding packages in Golang</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">了解Golang中的包</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/understanding-packages-in-golang-9a5825ac869f?source=collection_archive---------6-----------------------#2021-08-01">https://medium.com/geekculture/understanding-packages-in-golang-9a5825ac869f?source=collection_archive---------6-----------------------#2021-08-01</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="a60c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">基本面</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/d60a747c8d56100879839d5d3e3c312b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5vNRTpBH9SNK8vvQN_oNIw.jpeg"/></div></div></figure><p id="1643" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">无论你是一个经验丰富的Golang开发者还是Golang初学者，你可能已经听过很多次<code class="du jp jq jr js b">package</code>和<code class="du jp jq jr js b">module</code>这两个词，或者你至少在一些阅读材料中遇到过。</p><p id="39dc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最初，我纠结于这两个概念，不是关于它们的定义是什么，而是当你在Golang中构建/编写程序时，它们对你所在的生态系统意味着什么。</p><p id="6ffc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这一部分中，我们将简单介绍一下什么是包以及关于包的一些重要概念。</p><h1 id="15c2" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">包装</h1><p id="87e7" class="pw-post-body-paragraph if ig hi ih b ii kr ik il im ks io ip iq kt is it iu ku iw ix iy kv ja jb jc hb bi translated">包是一个文件或一组具有名称空间和一些代码或相关代码的文件。这意味着一个包可以存在于一个文件中，比如<code class="du jp jq jr js b">math.go</code>，也可以存在于多个文件中，比如<code class="du jp jq jr js b">add.go</code>、<code class="du jp jq jr js b">subctract.go</code>、<code class="du jp jq jr js b">multiply.go</code>，例如，许多文件或单个文件的命名空间为<code class="du jp jq jr js b">package math</code>。</p><p id="81d0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一个包将有一个类似这样的环绕目录:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kw"><img src="../Images/ce08da84b0abb2d2b57e3c0457f54123.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CRz9UcGJl5dXohP0DAIDnw.png"/></div></div><figcaption class="kx ky et er es kz la bd b be z dx">The math package with both styles we spoke about above</figcaption></figure><p id="6b3b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du jp jq jr js b">math.go</code>的内容可能类似于:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lb"><img src="../Images/bc8eb06b5053912ca8f49db3d4e74dcd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cLCrPThTVMYaHIJXa6PAIg.png"/></div></div><figcaption class="kx ky et er es kz la bd b be z dx">Having all the code for our math package in one file</figcaption></figure><p id="ebfd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果我们决定将这个数学包分割成多个文件，我们可以制作三个文件<code class="du jp jq jr js b">add.go</code>、<code class="du jp jq jr js b">subctract.go</code>、<code class="du jp jq jr js b">multiply.go</code>，内容如下</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lc"><img src="../Images/4ac81c4dd0c1c09e4f93dbbed09e7748.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2JiKonukU2hGTWTvKdhxqg.png"/></div></div><figcaption class="kx ky et er es kz la bd b be z dx">add.go from the math package</figcaption></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ld"><img src="../Images/d31a7e2ec1f3cea012d37c72edfa9286.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ceqY4gXb0i05mHfqAqsoIQ.png"/></div></div><figcaption class="kx ky et er es kz la bd b be z dx">subtract.go from the math package</figcaption></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lb"><img src="../Images/5f1b2ac7482a381012cb99b37884335a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ehsW84prq-7NEDeGgX8DwA.png"/></div></div><figcaption class="kx ky et er es kz la bd b be z dx">multiply.go from the math package</figcaption></figure><p id="ace8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">查看所有三个结果文件，您可能已经注意到了共同点——它们都共享相同的包名称空间<code class="du jp jq jr js b">math</code>。当然，你可能永远不会发现有人这样做，除非他们把非常大的文件分割成多个文件。对于我们接下来将要讨论的内容，理解共享名称空间的概念是非常重要的👌</p><h2 id="3f11" class="le ju hi bd jv lf lg lh jz li lj lk kd iq ll lm kh iu ln lo kl iy lp lq kp lr bi translated">导出的和本地的函数/方法</h2><p id="e085" class="pw-post-body-paragraph if ig hi ih b ii kr ik il im ks io ip iq kt is it iu ku iw ix iy kv ja jb jc hb bi translated">用Golang编写包背后的想法是创建模块化的代码片段，这些代码片段可以在您的项目之间共享，或者与其他开发人员共享，以便在他们自己的项目中使用，Golang，加油！我喜欢你慷慨的天性💌。</p><p id="7ace" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，为了实现这一点，并且为了安全地实现这一点，我们可能希望将我们代码的某些部分作为外部API公开，以供进一步使用，同时将包的某些方面隐藏得更深，不那么容易访问。一些语言提供了像<code class="du jp jq jr js b">public</code>、<code class="du jp jq jr js b">private</code>、<code class="du jp jq jr js b">protected</code>这样的结构来帮助解决这个问题，但是在Golang中，<code class="du jp jq jr js b">public</code>和<code class="du jp jq jr js b">private</code>API的概念隐含在我们命名函数、方法和属性的方式中。让我们看一个例子👇🏽</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ls"><img src="../Images/ac0215b69dab9cc66f0c68a54708b36e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g6gixbhOwjmVtt6MHYnGnA.png"/></div></div><figcaption class="kx ky et er es kz la bd b be z dx">Illustrating exported and local functions</figcaption></figure><p id="a172" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">看上面的插图，我们有两个同名的函数，有一点不同，一个是小写的<code class="du jp jq jr js b">multiply</code>，另一个是以大写字母<code class="du jp jq jr js b">Multiply</code>开头的，这个细微的差别就是Golang中本地函数和导出函数之间的区别。你可以猜猜哪个是哪个😂从它们的结构来看，你可能是对的，但是尽管如此，在Golang中，当你用小写字母命名时，它是本地化的，不能在这个包之外访问(还记得什么是包吗？再看一眼？😉 ).另一方面，任何以大写字母开头的东西都可以从定义/声明它的包的内部和外部访问。</p><p id="6b92" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，如果我们今天发布我们的包(我们很快就会看到发布包👌)，我们可以导入这个<code class="du jp jq jr js b">math</code>包并访问<code class="du jp jq jr js b">Multiply</code>，但是试图访问<code class="du jp jq jr js b">multiply</code>肯定会抛出错误！👇🏽</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lt"><img src="../Images/ebae8f5f2f37679f79d73ff3335aaf8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yab39wign2RIrcXypKq_qg.png"/></div></div><figcaption class="kx ky et er es kz la bd b be z dx">Trying to access an exported and an unexported Function from the math package</figcaption></figure><p id="3859" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然而，我们可以在同一个名称空间下访问<code class="du jp jq jr js b">multiply</code>，甚至在另一个文件中！👇🏽</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lu"><img src="../Images/0de638a5a437e8c2adda639eb2a641a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lntTOnBePTchfh6azxRKGw.png"/></div></div></figure><p id="dd73" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这些概念可能是一些漂亮的和创造性结构的Go代码和一些混乱的程序之间的区别。这里需要注意的一点是这里的<code class="du jp jq jr js b">math</code>是作为一个说明性的包名使用的，不要在任何真实的或游戏应用中使用它，因为Golang已经有了一个内置的数学包，这肯定会导致一些意想不到的行为(如果你好奇，可以尝试一下😉).</p><h2 id="1513" class="le ju hi bd jv lf lg lh jz li lj lk kd iq ll lm kh iu ln lo kl iy lp lq kp lr bi translated">概括起来</h2><ul class=""><li id="1572" class="lv lw hi ih b ii kr im ks iq lx iu ly iy lz jc ma mb mc md bi translated">一个包可以被认为是一个包含一些相关代码的命名空间(在顶部)的文件</li><li id="07b9" class="lv lw hi ih b ii me im mf iq mg iu mh iy mi jc ma mb mc md bi translated">它也可以是一堆具有相同名称空间的文件，包含相关的代码</li><li id="ee6d" class="lv lw hi ih b ii me im mf iq mg iu mh iy mi jc ma mb mc md bi translated">除非非常必要，否则不要过早地将包分成多个文件，例如，文件变得不可管理，或者您有一些在运行时动态生成的代码(我们将很快讨论代码生成😉)，等等。此外，即使您将包拆分成不同的文件，它们也必须位于相同的目录中，否则您将会搞乱您的导入。</li><li id="985a" class="lv lw hi ih b ii me im mf iq mg iu mh iy mi jc ma mb mc md bi translated">在Golang中，私有和公共函数、方法和类型的概念是基于如何命名构造而隐含的。如果你以大写字母开始，当前包之外的包可以访问它们，如果你小写，它们变成<em class="mj"> "private" </em>并且从当前包之外不可访问/不可触及。</li></ul><p id="9520" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">就是这样！走，走，走🏃‍♂️，你今天学了一点高尔夫🎉，非常感谢您的参与！在我的下一篇文章中，我们将讨论模块以及它们如何与包的概念联系起来，再见👋</p></div></div>    
</body>
</html>