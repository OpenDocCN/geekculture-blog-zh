<html>
<head>
<title>Headless WooCommerce &amp; Next.js: Set up WooCommerce &amp; Test with Postman</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Headless WooCommerce &amp; Next.js:用Postman设置WooCommerce &amp; Test</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/headless-woocommerce-next-js-set-up-woocommerce-test-with-postman-5e7859c65626?source=collection_archive---------8-----------------------#2021-07-29">https://medium.com/geekculture/headless-woocommerce-next-js-set-up-woocommerce-test-with-postman-5e7859c65626?source=collection_archive---------8-----------------------#2021-07-29</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/715496b60d840ab864377476c5e6d2ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*YkSFKZHuNRntn--V"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Photo by <a class="ae iu" href="https://unsplash.com/@romankraft?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Roman Kraft</a> on <a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="8dbc" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在你的WordPress站点已经安装了WooCommerce，是时候配置WooCommerce并开始添加一些销售产品了！</p><h1 id="7dc4" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">配置WooCommerce设置</h1><p id="7c83" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">在你的WordPress站点中，点击WooCommerce菜单选项并进入<code class="du kw kx ky kz b">Settings</code>。在“设置”页面中，不同的选项卡下会有更多的选项可供选择(例如，常规、产品、运输、支付)。</p><p id="e74f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">慢慢来，让自己熟悉这些设置，但我在这篇文章中只是轻轻一碰，因为我想和你讨论的主要问题是如何让产品进入你的网站，并能够结账和付款。</p><p id="06af" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">至少让我们确保货币设置正确—我使用的是<code class="du kw kx ky kz b">Pound sterling(£)</code>。记得点击屏幕底部的<code class="du kw kx ky kz b">Save changes</code>。</p><p id="99a2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们将在稍后阶段处理支付，届时我们可以使用Stripe来帮助我们处理卡支付。</p><p id="82c1" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在<code class="du kw kx ky kz b">Advanced</code>选项卡中点击<code class="du kw kx ky kz b">REST API</code>链接并添加一个密钥。使用您喜欢的任何描述，并确保权限设置为<code class="du kw kx ky kz b">Read/Write</code>。这将生成一个<strong class="ix hj">消费者密钥</strong>和<strong class="ix hj">消费者秘密</strong>，您将需要它们来访问WooCommerce API端点。</p><h1 id="7750" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">添加产品</h1><p id="8a25" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">点击导航栏上的产品菜单选项，并转到<code class="du kw kx ky kz b">Add New</code>。同样，这里有很多选项可供选择，我们将保持简单。在这个例子中，我们需要一个产品名称、描述、图片和价格。这个例子将只使用<code class="du kw kx ky kz b">Simple products</code>,但是你可以在感觉舒服的时候进行实验。</p><figure class="lb lc ld le fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es la"><img src="../Images/559d1763b59dcbca6a69c93c740bf487.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ByNLWdhkZlW1-iuZ6OLL4Q.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Screenshot showing the Add Product screen in WooCommerce</figcaption></figure><p id="d297" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">添加图片时，你可以上传一个文件(并添加<code class="du kw kx ky kz b">alt text</code>)，这样图片就会保存在你的Wordpress站点中，如果你想的话，你可以通过URL访问它。准备好之后点击<code class="du kw kx ky kz b">Publish</code>或<code class="du kw kx ky kz b">Save draft</code>如果您想稍后再做。</p><p id="d3e3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">首先添加一些产品，然后我们将使用Postman来测试我们是否可以获得数据。</p><p id="cea8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">注意:确保您在<code class="du kw kx ky kz b">Settings &gt; Permalinks</code>中使用了漂亮的永久链接，以便支持自定义端点。<strong class="ix hj">默认永久链接无效。</strong></p></div><div class="ab cl lf lg gp lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="hb hc hd he hf"><figure class="lb lc ld le fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lm"><img src="../Images/f5e040b9926abac2ca59479758303d77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7ymdZrBfMQxrCvAk"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Photo by <a class="ae iu" href="https://unsplash.com/@rocinante_11?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Mick Haupt</a> on <a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="fe21" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">邮递员</h1><p id="7635" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated"><a class="ae iu" href="https://www.postman.com/" rel="noopener ugc nofollow" target="_blank"> Postman是一个方便的工具</a>，它可以让你向API端点发出请求，而不需要进入代码。使用这个工具，我们可以预览正在获取的数据。</p><p id="58cd" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">是时候让我们看看WooCommerce开发者文档了，尤其是他们的REST API文档。首先，它告诉我们1)需求是什么，2)它有一个官方的JavaScript库<a class="ae iu" href="https://www.npmjs.com/package/@woocommerce/woocommerce-rest-api" rel="noopener ugc nofollow" target="_blank">，以及3)我们需要做什么来验证API调用。</a></p><p id="04cf" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">重要的是，根据您使用的是HTTP (OAuth 1.0a)还是HTTP <strong class="ix hj"> S </strong>(基本身份验证)，有不同的身份验证方法。因为我使用的是本地开发网站，所以我需要使用OAuth 1.0a进行认证。WooCommerce开发人员文档提供了大量相关信息，但很快就会让人不知所措。让我们先看看如何使用Postman让它工作。</p><figure class="lb lc ld le fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ln"><img src="../Images/32123856c6952205ddc55f6e789654bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rtAW51DpoDzpb0oazF4lTg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Screenshot of Postman</figcaption></figure><p id="f61b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在Postman中创建一个新标签，点击<code class="du kw kx ky kz b">Authorization</code>选项。在这里，我们可以选择不同的认证类型。我们要<code class="du kw kx ky kz b">OAuth 1.0</code>。在右边的面板中，我们需要输入我们的凭据。WooCommerce已经指定它需要的签名方法是HMAC-SHA1，所以让我们选择这个。接下来的两个字段与<code class="du kw kx ky kz b">Consumer Key</code>和<code class="du kw kx ky kz b">Consumer Secret</code>相关。您之前已经在WooCommerce设置选项卡(在高级下)中生成了这些值，因此请将这些值复制并粘贴到这里。不需要包括<code class="du kw kx ky kz b">Access Token</code>或<code class="du kw kx ky kz b">Token Secret</code>。</p><p id="674a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">有了身份验证凭证，我们需要输入我们想要点击/使用的API端点。</p><p id="37fe" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们想列出我们最近添加到WooCommerce的所有产品。在WooCommerce开发者文档中，有一部分是关于产品-&gt;列出所有产品。文档告诉我们HTTP请求是:<code class="du kw kx ky kz b">GET /wp-json/wc/v3/products</code>。我们知道这是一个GET请求，端点被附加到您的基本URL上——在我们的例子中，基本URL是<code class="du kw kx ky kz b">http://localhost/woocommercenextjs</code>。</p><p id="b33e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在Postman中，确保请求是GET，并键入URL，其中基本URL后跟API端点。</p><pre class="lb lc ld le fd lo kz lp lq aw lr bi"><span id="88c0" class="ls ju hi kz b fi lt lu l lv lw">GET <br/>http://localhost/woocommercenextjs/wp-json/wc/v3/products</span></pre><p id="4d50" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">认证凭证已经设置好了，所以您可以点击<code class="du kw kx ky kz b">Send</code>并看到一个成功的响应。</p><figure class="lb lc ld le fd ij er es paragraph-image"><div class="er es lx"><img src="../Images/a2e5f99ad9e64c2c5b862a42e1fbcd8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1306/format:webp/1*kZMDmQiyKUOyfhb0WYjPlA.png"/></div><figcaption class="iq ir et er es is it bd b be z dx">Screenshot of a successful JSON response from WooCommerce API end point</figcaption></figure><p id="e5e0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您可以看到我们得到的响应与WooCommerce开发人员文档中的示例结构相同。因此，如果您不希望使用Postman进行测试，那么您可以将文档中的示例作为JSON响应的参考。</p><p id="03c8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在我们知道我们能够从WooCommerce获取数据，我们可以将注意力转向前端和Next.js。</p></div><div class="ab cl lf lg gp lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="hb hc hd he hf"><p id="9006" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">第1部分:用WooCommerce创建一个本地WordPress</p><p id="f895" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae iu" href="https://leojbchan.medium.com/headless-woocommerce-next-js-set-up-woocommerce-test-with-postman-5e7859c65626" rel="noopener">第2部分:设置WooCommerce &amp;测试与邮递员</a></p><p id="ad3a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae iu" href="https://leojbchan.medium.com/headless-woocommerce-next-js-set-up-next-js-b8d2193b2688" rel="noopener">第三部分:设置Next.js </a></p><p id="b99d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae iu" href="https://leojbchan.medium.com/headless-woocommerce-next-js-set-up-styled-components-with-typescript-and-next-js-18cc047ccd79" rel="noopener">第4部分:用TypeScript和Next.js设置样式组件</a></p><p id="9883" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae iu" href="https://leojbchan.medium.com/headless-woocommerce-next-js-display-products-and-create-orders-593a6c5aee86" rel="noopener">第5部分:展示产品并创建订单</a></p><p id="e794" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae iu" href="https://leojbchan.medium.com/headless-woocommerce-next-js-set-up-redux-toolkit-for-state-management-c605adda58fe" rel="noopener">第6部分:为状态管理建立Redux工具包</a></p><p id="907f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae iu" href="https://leojbchan.medium.com/headless-woocommerce-next-js-create-a-cart-8a3e49b90076" rel="noopener">第7部分:创建购物车</a></p><p id="2012" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae iu" href="https://leojbchan.medium.com/headless-woocommerce-next-js-set-up-stripe-and-create-checkout-d01333607a66" rel="noopener">第8部分:设置条带并创建检验</a></p></div></div>    
</body>
</html>