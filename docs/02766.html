<html>
<head>
<title>Simple Ammo Count System in Unity</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Unity中的简单弹药计数系统</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/simple-ammo-count-system-in-unity-af48844c0dd6?source=collection_archive---------25-----------------------#2021-05-25">https://medium.com/geekculture/simple-ammo-count-system-in-unity-af48844c0dd6?source=collection_archive---------25-----------------------#2021-05-25</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/ba603c27fc16cebbdabd3b4a906e226a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*k4R6Q1yIW0ByAa9zClZs7g.gif"/></div></div></figure><p id="b96b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">显示我们玩家的弹药数量不仅非常有用，而且为游戏增加了全新的深度。有限的弹药让玩家更加小心，能够主动看到他们还剩多少弹药可以帮助他们准备更好的策略。</p><p id="f2ae" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">目标:在这篇文章中，你将学习如何添加一个弹药计数界面，当玩家开火时它会自动更新。一旦弹药耗尽，玩家将无法射击，一个“空弹药”的音频将播放。</p><blockquote class="jo jp jq"><p id="ca33" class="iq ir jr is b it iu iv iw ix iy iz ja js jc jd je jt jg jh ji ju jk jl jm jn hb bi translated"><strong class="is hj">编辑注:</strong> <a class="ae jv" href="https://dennisse-pd.medium.com/refill-player-ammo-without-overshooting-the-clip-capacity-1e9a890857d2" rel="noopener">弹药收藏篇</a>已经发布！如果你想学习如何增加弹药，看看这篇文章。在这里，你可以学习如何制作弹药收藏品来补充玩家的弹药！它添加到了本文的代码中，所以请务必看一看！</p></blockquote></div><div class="ab cl jw jx gp jy" role="separator"><span class="jz bw bk ka kb kc"/><span class="jz bw bk ka kb kc"/><span class="jz bw bk ka kb"/></div><div class="hb hc hd he hf"><p id="3b8b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我以前在这篇文章中讨论过如何设置UI文本，这篇文章将集中在编程方面。</p><h1 id="6117" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">编程弹药计数行为</h1><ol class=""><li id="882a" class="lb lc hi is b it ld ix le jb lf jf lg jj lh jn li lj lk ll bi translated">为弹药数量创建一个全局变量。如果您希望从检查器中调整值，这可以是一个SerializeField。</li></ol><figure class="ln lo lp lq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lm"><img src="../Images/f949f936a3b60dbf5e20f4251a5a29c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fsveUdMCSzNr121Unyrvjw.png"/></div></div></figure><p id="1edc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">2.创建一个计算金额的方法。它将有一个int参数变量，我们可以在调用该方法时将它设置为任何值。在这个方法中，我们声明弹药计数的值将是弹药计数加上子弹数(这是我们的参数变量)。</p><blockquote class="jo jp jq"><p id="7ac5" class="iq ir jr is b it iu iv iw ix iy iz ja js jc jd je jt jg jh ji ju jk jl jm jn hb bi translated"><strong class="is hj">注意</strong>:这个参数变量可以用来增加或减少你弹药数量中的子弹数量，但是我们现在将重点放在减少上。</p></blockquote><figure class="ln lo lp lq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lr"><img src="../Images/46da7d349af003b44a75dbe4952e5ca0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZD8eERoAgkbm1eaarkJ_mA.png"/></div></div></figure><p id="3491" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">3.每当玩家开火时调用该方法。在我的例子中，我将从FireLaser()方法中调用它，然后每当玩家按下空格键时就会调用它。</p><p id="e455" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下面的代码显示了前面提到的FireLaser方法，但是我突出显示了弹药计数代码所必需的部分。如您所见，当我调用该方法时，参数变量被设置为-1，因此项目符号减少了所述值。</p><figure class="ln lo lp lq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ls"><img src="../Images/a3c413adac8fdba0c0904b74259dc198.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ibPKa226ikF2m9U1K5-22w.png"/></div></div></figure><p id="6616" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">4.确保玩家在弹药耗尽时不能继续开火，这可以通过使用return来实现；在if语句中。Return是一个语句，只要它在同一个方法中，它就终止后面任何东西的执行。因为我的FireLaser()方法是直接调用的，所以如果没有我们想要的弹药，它就不会运行开火逻辑。或者，您可以使用您的触发逻辑，而不包含在这里的方法中，它应该以相同的方式工作。</p><figure class="ln lo lp lq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lt"><img src="../Images/5b7d7dfcc4e177bd73109145c0d8a820.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kStd4BVG6FuFV6hJqkLunw.png"/></div></div></figure></div><div class="ab cl jw jx gp jy" role="separator"><span class="jz bw bk ka kb kc"/><span class="jz bw bk ka kb kc"/><span class="jz bw bk ka kb"/></div><div class="hb hc hd he hf"><h1 id="e827" class="kd ke hi bd kf kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la bi translated">弹药耗尽时增加音频反馈</h1><ol class=""><li id="b745" class="lb lc hi is b it ld ix le jb lf jf lg jj lh jn li lj lk ll bi translated">用SerializeField创建一个全局变量。然后，在检查器中设定音频。</li></ol><blockquote class="jo jp jq"><p id="58ff" class="iq ir jr is b it iu iv iw ix iy iz ja js jc jd je jt jg jh ji ju jk jl jm jn hb bi translated"><strong class="is hj">注</strong>:我在这里得到了我的音频<a class="ae jv" href="https://freesound.org/people/PacmanGamer/sounds/165660/" rel="noopener ugc nofollow" target="_blank">，这是一个免费使用的剪辑。</a></p></blockquote><figure class="ln lo lp lq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lz"><img src="../Images/24d9ad743a1b8f708153d7deb5f7264a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Rx1wrTSeSjhpfQdw1I5jsw.png"/></div></div></figure><figure class="ln lo lp lq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ma"><img src="../Images/b98d3df830de6e9edd6baafe118ce86d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*usIIS2eL0iqOPjY-qPJcAw.gif"/></div></div></figure><p id="0249" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">2.现在，你可以在我们之前设定的if语句中，让玩家在弹药耗尽时播放音频。</p><p id="c57a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这里我用的是<a class="ae jv" href="https://docs.unity3d.com/ScriptReference/AudioSource.PlayClipAtPoint.html" rel="noopener ugc nofollow" target="_blank">音源。PlayClipAtPoint </a>，正如它所说，在它被激活的点或位置播放剪辑(在这个例子中是从我们的播放器)。这对于一次性来说是极好的，因为该功能创建音频，但是当剪辑播放完毕时会自动处理它。</p><figure class="ln lo lp lq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mb"><img src="../Images/ca56c271c5bc48c6690ec6a67cb78a4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d0Za6uEiIpPzHetXjs_4JQ.png"/></div></div></figure></div><div class="ab cl jw jx gp jy" role="separator"><span class="jz bw bk ka kb kc"/><span class="jz bw bk ka kb kc"/><span class="jz bw bk ka kb"/></div><div class="hb hc hd he hf"><h1 id="555b" class="kd ke hi bd kf kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la bi translated">在用户界面中显示弹药</h1><p id="17f3" class="pw-post-body-paragraph iq ir hi is b it ld iv iw ix le iz ja jb mc jd je jf md jh ji jj me jl jm jn hb bi translated">在这一节中，我使用了我在<a class="ae jv" href="https://levelup.gitconnected.com/ease-of-building-ui-elements-in-unity-4f501c7e7c5e" rel="noopener ugc nofollow" target="_blank">上一篇文章</a>中创建的UI管理器脚本，但是，您可以在任何您认为合适的地方实现相同的逻辑。</p><ol class=""><li id="a31c" class="lb lc hi is b it iu ix iy jb mf jf mg jj mh jn li lj lk ll bi translated">创建弹药计数文本的控制柄，然后在检查器中设定它。</li></ol><figure class="ln lo lp lq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mi"><img src="../Images/31a394461fe5281a232a4cd1220aadb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RxEP6PRE7iRjknUHngOkFA.png"/></div></div></figure><figure class="ln lo lp lq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mj"><img src="../Images/c836c3ad960ef970fd5d34b914fd5ea7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*2CC_qDx3diIZ5BE-ROmVsw.gif"/></div></div></figure><p id="ea78" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">2.在Start方法中设置Amm计数。这个值实际上会显示在屏幕上，因为它是一个int值，我们需要使用<em class="jr"> ToString() </em>来将它转换成一个可以显示的字符串。</p><figure class="ln lo lp lq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mk"><img src="../Images/9381c1de8ecf8f0a96c6e35d13d23362.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6pyoU2qvtFpCci947wNL7A.png"/></div></div></figure><p id="113b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">3.创建一个方法来更新弹药计数文本，这类似于我们之前创建的方法，但这一次将集中在文本上。</p><figure class="ln lo lp lq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ml"><img src="../Images/20bd056c88e1fa211d2118f27368a069.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cEDKbW8-wXc59yUA_zjVtA.png"/></div></div></figure><p id="831d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">4.从我们之前创建的AmmoCount方法中调用updateAmmoCount方法。如果您使用单独的文本脚本，您将需要<a class="ae jv" rel="noopener" href="/codex/script-communication-in-unity-using-getcomponent-ca4444bfec6">脚本通信</a>来完成。</p><p id="18c3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">请注意，参数变量与通过减去或增加子弹数来记录弹药数量的变量是相同的。</p><figure class="ln lo lp lq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mm"><img src="../Images/0e8c9671eeacc8b64ad06c14e24a19d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uSxoxHuAc1DzJv_f9sfqwQ.png"/></div></div></figure></div><div class="ab cl jw jx gp jy" role="separator"><span class="jz bw bk ka kb kc"/><span class="jz bw bk ka kb kc"/><span class="jz bw bk ka kb"/></div><div class="hb hc hd he hf"><p id="27ab" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">结果</strong></p><figure class="ln lo lp lq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mn"><img src="../Images/50923107540acc5103ac1d8441242f95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*m-z2adT2-kzz_IOmmwAJVA.gif"/></div></div></figure></div><div class="ab cl jw jx gp jy" role="separator"><span class="jz bw bk ka kb kc"/><span class="jz bw bk ka kb kc"/><span class="jz bw bk ka kb"/></div><div class="hb hc hd he hf"><p id="7cb8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在下一篇文章中，我将介绍如何创建一个<a class="ae jv" href="https://dennisse-pd.medium.com/refill-player-ammo-without-overshooting-the-clip-capacity-1e9a890857d2" rel="noopener">弹药收集来补充弹药！</a></p></div></div>    
</body>
</html>