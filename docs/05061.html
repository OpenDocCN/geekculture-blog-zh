<html>
<head>
<title>Deploying Strapi MongoDB for Flutter on Heroku 🚀</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为Heroku上的颤振部署Strapi MongoDB🚀</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/deploying-strapi-mongobd-for-flutter-on-heroku-f399bb3396a7?source=collection_archive---------17-----------------------#2021-07-08">https://medium.com/geekculture/deploying-strapi-mongobd-for-flutter-on-heroku-f399bb3396a7?source=collection_archive---------17-----------------------#2021-07-08</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/78dde5b203f6c46b3b65f3390e189805.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WZIVXtVYET-f-5_ZpDWE8A.png"/></div></div></figure><p id="a1c0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">又一个介绍:Strapi，MongoDB，Heroku和Flutter </p><p id="10d0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Strapi是一个无头的CMS，它非常适合创建api，您可以轻松地管理连接到应用程序的数据库🔮</p><p id="e5d2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在托管服务器的时候，我看到了很多不错的文章😪但是对于提供设置Strapi服务器的步骤来说并不全面。对于从未主持过Strapi的人来说，让我们在这篇文章中简化整个过程。</p><p id="92bb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我将假设您已经在您的开发环境中本地设置了Strapi，并且一切都运行良好，在我的例子中，我已经将Strapi与Mongo DB一起使用，所以我们将在Heroku上托管我们的Strapi服务器。</p><p id="2a6d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">第一步:在git上上传回购:</strong></p><p id="f6a2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们的第一步是将我们的服务器文件上传到Github上。你可能还记得你在Flutter应用程序目录中创建的Strapi文件夹的名称，在我的例子中，这个名称是server，看起来应该像这样🤷‍♂️</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jo"><img src="../Images/9f07d217a2e8e936e9e6926a0981b906.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L2jj6lAI-0Ak9K1h6Vr_hw.png"/></div></div></figure><p id="d4fe" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们在服务器文件夹中使用下面的初始化命令来初始化GIT。我们需要在我们的机器上安装并初始化GIT，然后我们可以在机器上打开终端或Power Shell。</p><p id="fb7f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，我们可以在Github上创建一个目录，初始化git，并通过在终端上键入以下命令将原点设置为新创建的目录。我们将在创建一个repo后得到这些命令，但我们还是要提到它们。</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="e421" class="jy jz hi ju b fi ka kb l kc kd">git init<br/>git remote add origin *here_will_be_link_to_your_repo*</span></pre><p id="f993" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在让我们添加服务器目录中的所有文件夹</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="d33d" class="jy jz hi ju b fi ka kb l kc kd">git add.</span></pre><p id="ab32" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们确保我们提交了更改</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="d3ec" class="jy jz hi ju b fi ka kb l kc kd">git commit -m "Strapi server initial commit"</span></pre><p id="91e1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们准备在Github上推送我们现有的文件</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="6ccc" class="jy jz hi ju b fi ka kb l kc kd">git push --set-upstream origin master</span></pre><p id="7586" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">从这里开始，最好有两种方法来托管heroku上的服务器，在这两种方法中，你都必须在heroku上创建一个帐户，然后你可以在heroku上创建一个新项目。</p><p id="d24b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">方法一:从Heroku连接Github</strong></p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ke"><img src="../Images/b502149882d0cef34dfe0ec19167cb18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zKkOjJsHuJqoc6Mq5hc4hw.png"/></div></div></figure><p id="4c51" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">对于这个例子，让我们使用我的应用程序的名称，选择你最接近的地区，然后点击创建应用程序😬</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ke"><img src="../Images/1c96dc08b91ac29d58937b27614dc0c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EGZICGh8aLOOSoQKnyzPPQ.png"/></div></div></figure><p id="306d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">最简单的方法是将您的Heroku项目与您刚刚创建的Github repo连接起来🤩，只要找到你的回购点击搜索，然后点击连接按钮。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jo"><img src="../Images/58d53d53201631e091aba91016c5195d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eWUdq3fyRtTsd7bzswe9Rw.png"/></div></div></figure><p id="ab0f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们会遇到一个错误，因为环境是生产环境，我们还没有设置环境变量。让我们讨论一下通过CLI完成后，您可以跳过CLI方法，直接跳到环境变量一节</p><p id="c627" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">方法二:Heroku CLI </strong></p><p id="ebd6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">第二种方法是使用终端或命令提示符完成同样的操作</p><p id="d3fd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">按照以下命令将github repo与Heroku链接起来，我们需要安装Heroku CLI</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="3d68" class="jy jz hi ju b fi ka kb l kc kd">heroku git:remote -a my-app-something<br/>git push heroku master<br/>heroku open<br/>heroku logs --tail</span></pre><p id="3b01" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在完成该过程后使用命令“heroku open”时，我们会遇到一个与空字符串传递相关的错误，该错误可以通过“heroku logs-tail”找到。这是因为在strapi的生产环境中，您必须在heroku中指定环境变量，这将有助于建立到Mongo DB的连接</p><p id="f2f7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">第三步:环境变量</strong></p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jo"><img src="../Images/4844bab68ab0e9bbb5953fbba1dd2d5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*exKvwJj6vbsLakj6sOZS7A.png"/></div></div></figure><p id="2e4e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们在Heroku上添加环境变量，方法是继续设置，然后显示配置变量。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jo"><img src="../Images/90815487c6f2d9a071ba116c6872b37f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HYWlObF7srIaSbkV_5hnVQ.png"/></div></div></figure><p id="afc1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">以下是您需要添加到Heroku中的环境变量，请确保您删除了对Strapisince中开发环境的访问，因为这会向公众泄露您的Mongo DB服务器凭据，如果我们要将它用于生产，我们不想出现这种情况🤗。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jo"><img src="../Images/98db17e86ff894553631232eb9f9c07e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xep4aZDj7ZMAu_7RUcDlNQ.png"/></div></div></figure><p id="6dcf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">快速破解你已经在你的开发服务器中有了环境值，路径如下，只需从开发文件中复制值😜</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="1334" class="jy jz hi ju b fi ka kb l kc kd">/server/config/environments/development/database.json</span></pre><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jo"><img src="../Images/db4ae5be2b297652e8f531451b8a62a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eWTeP--amksx1yjzG7mzgw.png"/></div></div></figure><p id="6f12" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">第四步:更换链接</strong></p><p id="bb4d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们可以从Heroku打开我们的Strapi仪表板，现在我们已经准备好在我们的flutter应用程序中使用我们的api，你只需要用你上传到Heroku上的服务器链接替换你的API链接，这里有一个例子</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jo"><img src="../Images/ed1761d17601da08600d76a657e2a1f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HeewGQklPATA07HllSvKNw.png"/></div></div></figure><p id="50e4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">确保替换对服务器的所有api请求。</p><p id="c238" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">我们完成了🎉</strong></p><p id="66d3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">恭喜🥳，我们已经在Heroku上上传了Strapi flutter服务器，你可以用Google cloud AWS或Azure做同样的事情。</p><p id="7273" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这里有一个额外的奖励，因为Heroku的托管服务器的正常运行时间有限，所以让我们给我们的应用程序一些咖啡☕️</p><div class="kf kg ez fb kh ki"><a href="https://kaffeine.herokuapp.com" rel="noopener  ugc nofollow" target="_blank"><div class="kj ab dw"><div class="kk ab kl cl cj km"><h2 class="bd hj fi z dy kn ea eb ko ed ef hh bi translated">卡夫因</h2><div class="kp l"><h3 class="bd b fi z dy kn ea eb ko ed ef dx translated">项目名称只能包含字母、数字和破折号。时间必须有小时、分钟和AM/PM！琴弦需要…</h3></div><div class="kq l"><p class="bd b fp z dy kn ea eb ko ed ef dx translated">kaffeine.herokuapp.com</p></div></div><div class="kr l"><div class="ks l kt ku kv kr kw io ki"/></div></div></a></div><p id="c666" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">感谢和分享，如果这是有用的，快乐的编码👋</p></div></div>    
</body>
</html>