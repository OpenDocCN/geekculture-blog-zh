<html>
<head>
<title>What Is Load Balancing and What Are the Usages of Load Balancing</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">什么是负载平衡，负载平衡的用途是什么</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/what-is-load-balancing-and-what-are-the-usages-of-load-balancing-144a75f1bc6a?source=collection_archive---------3-----------------------#2021-02-23">https://medium.com/geekculture/what-is-load-balancing-and-what-are-the-usages-of-load-balancing-144a75f1bc6a?source=collection_archive---------3-----------------------#2021-02-23</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/dcf3471c144debbc390f16b8c1cc536b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Vx7dZWOTQXQrH6vf.jpg"/></div></div></figure><p id="7752" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi jo translated">如果你在大公司工作，如果你想处理大量的流量，你应该听说过人们经常使用的术语<strong class="is hj">负载平衡器</strong>。让我们看看<strong class="is hj">什么是</strong>负载均衡和<strong class="is hj">为什么我们更喜欢</strong>负载均衡。</p><h2 id="61e5" class="jx jy hi bd jz ka kb kc kd ke kf kg kh jb ki kj kk jf kl km kn jj ko kp kq kr bi translated">什么是负载平衡？</h2><p id="b2aa" class="pw-post-body-paragraph iq ir hi is b it ks iv iw ix kt iz ja jb ku jd je jf kv jh ji jj kw jl jm jn hb bi translated">我们以亚马逊为例。Amazon可能会在UI部分的后端部署很多服务器。让我们考虑部署在Amazon基础设施中的不同服务器，它们运行与Amazon UI相同的代码。现在，请求到达了这些服务器中的每一个吗？假设我正在访问Amazon.com网站，亚马逊如何知道它需要重定向到特定的实例？一个新的请求需要如何到达一个不同的实例。这很好<strong class="is hj">负载平衡器</strong>是有用的。<strong class="is hj">负载平衡器</strong>执行路由(例如:请求1去往标记为<strong class="is hj">绿色</strong>的特定服务器，请求2去往标记为<strong class="is hj">黄色</strong>的不同服务器，请求3去往<strong class="is hj">红色</strong>服务器，请求4去往<strong class="is hj">黑色</strong>服务器)。所有这些请求可能来自不同的用户，也可能来自同一个用户。这样，我们可以通过将请求分配给几个服务器来平衡负载。</p><figure class="ky kz la lb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kx"><img src="../Images/f4831f89ef39e0a91ab771ac16c5d1e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D9dQc4FjWJQ5onTtiYxNQA.png"/></div></div></figure><h2 id="b4d8" class="jx jy hi bd jz ka kb kc kd ke kf kg kh jb ki kj kk jf kl km kn jj ko kp kq kr bi translated">负载平衡的用途是什么</h2><p id="b08d" class="pw-post-body-paragraph iq ir hi is b it ks iv iw ix kt iz ja jb ku jd je jf kv jh ji jj kw jl jm jn hb bi translated"><strong class="is hj">负载平衡器</strong>，</p><ul class=""><li id="f9a3" class="lc ld hi is b it iu ix iy jb le jf lf jj lg jn lh li lj lk bi translated"><strong class="is hj">通过在多台服务器之间高效分配，将传入流量</strong>分配到网络。</li><li id="5d26" class="lc ld hi is b it ll ix lm jb ln jf lo jj lp jn lh li lj lk bi translated"><strong class="is hj">可靠性和高可用性</strong>通过只将请求重定向到网络中可用的服务器来维护。如果有不可用或脱机的服务器，这些服务器将从负载平衡设置中删除。内部负载平衡器维护所有服务器的健康检查。并且该请求将仅被重定向到可用的服务器。</li><li id="444b" class="lc ld hi is b it ll ix lm jb ln jf lo jj lp jn lh li lj lk bi translated"><strong class="is hj">易于使用</strong>根据需求添加和移除网络中的服务器。比方说，亚马逊需要为一项特殊功能扩展其服务器。他们知道对服务器的请求数量会更多。在此基础上，他们可以根据需求扩大或缩小规模。他们只需要简单的配置更改。</li></ul><h2 id="b90c" class="jx jy hi bd jz ka kb kc kd ke kf kg kh jb ki kj kk jf kl km kn jj ko kp kq kr bi translated">负载平衡算法</h2><p id="a138" class="pw-post-body-paragraph iq ir hi is b it ks iv iw ix kt iz ja jb ku jd je jf kv jh ji jj kw jl jm jn hb bi translated">负载平衡器使用不同的算法来重定向来自不同服务器的请求。我们可以看到3种不同的常用算法，公司更喜欢用它们来设置负载平衡。</p><ul class=""><li id="1490" class="lc ld hi is b it iu ix iy jb le jf lf jj lg jn lh li lj lk bi translated"><strong class="is hj">循环调度</strong> ( <strong class="is hj">顺序请求分配</strong> ) —请求在这里被重定向到不同的服务器。假设网络中有3个服务器，第一个请求发送到第一个服务器，第二个发送到第二个服务器，第三个发送到第三个服务器，所有请求都遵循这个顺序。每个服务器每次都会收到一个新的请求。</li><li id="2659" class="lc ld hi is b it ll ix lm jb ln jf lo jj lp jn lh li lj lk bi translated"><strong class="is hj">最少连接</strong> ( <strong class="is hj">请求发送到网络中最少使用的服务器</strong> ) —请求将被发送到请求最少或处理资源最少的服务器。为了做到这一点，负载均衡器需要知道哪个服务器具有最少的资源，从而需要做一些额外的计算，因为要知道所使用的资源的计数。这可能会从所有服务器获取一些元数据，并获得一些计算时间。</li><li id="2da1" class="lc ld hi is b it ll ix lm jb ln jf lo jj lp jn lh li lj lk bi translated"><strong class="is hj"> IP哈希</strong> ( <strong class="is hj">根据客户端IP向服务器发送请求</strong> ) —当某些网络或某些特定服务器需要防止优先于其他服务器时，这很有用。假设客户端发送一个请求，客户端请求需要小心地发送到一组特定的服务器。也就是说，使用了IP哈希。因此，重定向可以基于客户端IP地址来完成，并且只有特定于该客户端IP地址的特定服务器才会被重定向到该特定网络。</li></ul><blockquote class="lq lr ls"><p id="9b1d" class="iq ir lt is b it iu iv iw ix iy iz ja lu jc jd je lv jg jh ji lw jk jl jm jn hb bi translated">您可以在IP哈希上重定向特定服务器的特定请求，并基于此来提高服务器的性能。</p></blockquote><h2 id="ed8b" class="jx jy hi bd jz ka kb kc kd ke kf kg kh jb ki kj kk jf kl km kn jj ko kp kq kr bi translated">负载平衡器中的会话持久性</h2><p id="0102" class="pw-post-body-paragraph iq ir hi is b it ks iv iw ix kt iz ja jb ku jd je jf kv jh ji jj kw jl jm jn hb bi translated">例如，我们正在使用亚马逊购物车，我们在购物车中添加了大量信息。这个特定的购物车信息存储在会话中(客户端浏览器)。浏览器通常存储所有的缓存信息并存储它。而且每次有新的请求发出，浏览器都会给出相同的会话ID。因此，通常情况下，如果请求被重定向到不同的服务器，会话ID往往会丢失。因为服务器1生成的第一个会话可能对服务器2不可见。因此会话信息将丢失，购物车也将消失。</p><p id="9fc2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这是一个常见的用例，我们必须在应用程序端处理它。我们可以使用一个公共缓存(Redis缓存来存储我们的会话信息),或者我们需要允许负载平衡器每次都访问同一个实例。一般来说，这些负载平衡器有粘性会话的概念。因为他们知道特定的会话ID第一次出现时应该被重定向到服务器1，而对于第二次出现的相同请求，我需要重定向到服务器1，我不会考虑流量和其他因素。</p><figure class="ky kz la lb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lx"><img src="../Images/804d3522ac017cbd0b978cb56822f4b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vaX4mdEcJUqBtwD2jJs6AQ.png"/></div></div></figure><p id="aa37" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">大多数负载平衡器都有会话持久性的概念，因为它们知道如果请求是从同一个客户端发送的，它们需要重定向到同一个实例。一般来说，假设您需要处理这个问题，那么您可以使用缓存机制，将这个会话ID存储在不同的缓存中或存储在单独的数据库中，并将请求路由到不同的服务器。</p><p id="51c3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这些方法之间的唯一区别是读取操作会更多，并且缓存机制中的<strong class="is hj">性能</strong>会更高。</p><p id="b8d6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">因此，在本教程中，我们讨论了<strong class="is hj">什么是负载平衡，负载平衡器的用法，负载平衡算法，以及会话持久性</strong>。我希望大家对负载平衡器有一个基本了解，并能够在企业应用程序实现中使用它。</p><p id="0618" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">谢谢大家！</p></div></div>    
</body>
</html>