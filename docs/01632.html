<html>
<head>
<title>Migrate From WordPress to Ghost CMS: Because Ghost Migration Plugin Isn’t Enough</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从WordPress迁移到Ghost CMS:因为Ghost迁移插件是不够的</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/migrate-from-wordpress-to-ghost-cms-b19d30950520?source=collection_archive---------9-----------------------#2021-04-18">https://medium.com/geekculture/migrate-from-wordpress-to-ghost-cms-b19d30950520?source=collection_archive---------9-----------------------#2021-04-18</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="db81" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我写了一篇关于在亚马逊Lightsail上安装Ghost 4.0的文章后，我使用了Bitnami和S3集成以及Mailgun</p><p id="16b1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我收到了一位新客户的邮件，内容是关于帮助他将使用WordPress的社区新闻网站迁移到Ghost CMS。</p><p id="938e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">他想迁移到Ghost CMS的原因之一是因为Ghost CMS上的会员订阅功能非常强大。</p><p id="541b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">他有成千上万的数据和每天十万的访问者。因此，将WordPress迁移到Ghost CMS可能会很痛苦。</p><p id="ab9a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Google上关于从WordPress迁移到ghost cms的迁移文章可能只适用于安装了标准插件的少量数据的WordPress网站。</p><p id="55d8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">相信我，我在谷歌上尝试了许多关于如何将WordPress迁移到Ghost CMS的可用解决方案，但没有一个有效。</p><p id="8ea6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你已经安装了与你的WordPress文章集成的插件，Ghost CMS迁移插件也不会工作。</p><p id="07c4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我来和大家分享一下我所面临的问题，以及我解决问题的方式。</p><h1 id="f8a6" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">1.ghost导出时出现严重错误</h1><p id="dc90" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">“该网站出现了一个严重错误。请查看您的站点管理员电子邮件收件箱以获取说明。了解更多有关WordPress疑难解答的信息。</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es kh"><img src="../Images/20a01180c91e72770d29f96c970d393b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hkm2FZC3FDp_QCM_2XocIQ.png"/></div></div></figure><p id="5fe1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这不仅仅是关于内存大小限制，最大主体大小，或者PHP配置或WordPress配置的超时问题。这是因为库行为需要巨大的内存，而我的客户机只有有限的内存资源。</p><p id="6afa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">解决了</strong></p><p id="0a3f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我可以通过安装WordPress插件<a class="ae jd" href="https://wordpress.org/plugins/all-in-one-wp-migration /" rel="noopener ugc nofollow" target="_blank">多合一WP迁移</a>并导出21GB帖子和图片的数据来解决这个问题。</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es kt"><img src="../Images/4ab41eefc6b7cb988d8c0b890d849625.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1Z5zM80wDwpLnxjvfqYX1w.png"/></div></div></figure><p id="dd52" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在那之后，我使用<a class="ae jd" href="http://docker.com/" rel="noopener ugc nofollow" target="_blank"> Docker </a>在我的本地系统上安装WordPress，在我的本地恢复由<a class="ae jd" href="https://wordpress.org/plugins/all-in-one-wp-migration /" rel="noopener ugc nofollow" target="_blank"> All-in-One WP Migration </a>导出的数据，然后使用<a class="ae jd" href="https://wordpress.org/plugins/ghost/" rel="noopener ugc nofollow" target="_blank"> Ghost插件</a>转换数据以便能够在Ghost CMS中使用。</p><p id="96cb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Docker帮助我节省时间和精力。你可以在这里跟随docker-compose WordPress教程<a class="ae jd" href="https://docs.docker.com/compose/wordpress/" rel="noopener ugc nofollow" target="_blank">，也可以从我的公共gist使用我之前用过的</a><a class="ae jd" href="https://gist.github.com/rririanto/54a40fe25838efe7130bc7ac1ce75191" rel="noopener ugc nofollow" target="_blank"> docker-composer.yml </a>。</p><h1 id="7c07" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">2.504网关超时幽灵cms</h1><p id="097b" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">在我成功地将数据从服务器备份和恢复到我的本地系统之后。当我试图从ghost网站导入Ghost导出插件时，我遇到了一个错误。</p><p id="c530" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果我调查，我发现它的发生是因为JSON结构无效。导出结果留下了无效的结构关键字。</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es ku"><img src="../Images/a78ffc6f39b12db9f1d5efc0fd1fb91f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aJghxpE6PdklOGuo9nYy5w.png"/></div></div></figure><p id="f895" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，我们有两个选择来解决这些问题。<br/> 1。通过使用自动化脚本(如https://github.com/hughrun/ghost-to-wp的<a class="ae jd" href="https://github.com/hughrun/ghost-to-wp" rel="noopener ugc nofollow" target="_blank">和T2的</a><a class="ae jd" href="https://github.com/hughrun/ghost-to-wp" rel="noopener ugc nofollow" target="_blank">)来精炼JSON文件</a></p><p id="e2a8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.使用Ghost <a class="ae jd" href="https://ghost.org/docs/content-api/" rel="noopener ugc nofollow" target="_blank">内容API </a>和<a class="ae jd" href="https://ghost.org/docs/admin-api/" rel="noopener ugc nofollow" target="_blank">管理API </a>创建脚本来插入数据。</p><p id="07d8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我选择第二个选项，因为我想确保一切都如我所愿。</p><h2 id="21b6" class="kv jf hi bd jg kw kx ky jk kz la lb jo iq lc ld js iu le lf jw iy lg lh ka li bi translated">创建内容API和管理API</h2><p id="21ae" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">我非常喜欢Ghost CMS的一点是它的无头特性。我们可以通过创建API集成来进行任何我们想要的集成。</p><p id="7117" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">只需进入<strong class="ih hj"> <em class="lj">集成- &gt;添加自定义集成</em> </strong></p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es lk"><img src="../Images/51886c7d2953a97335f0d458f80bf3d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JsAohwq5mQ0uo60DxRsLZw.png"/></div></div></figure><p id="be78" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">创建集成名称<strong class="ih hj">内容&amp;管理API </strong></p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es ll"><img src="../Images/7a52956bd73d5968f9fd812425c2a1cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m1LUd9scaEiRLT2gLWwsMQ.png"/></div></div></figure><p id="91f6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将使用这些API凭证从我们的备份中加载帖子，并在Ghost CMS上创建帖子。</p><h2 id="68aa" class="kv jf hi bd jg kw kx ky jk kz la lb jo iq lc ld js iu le lf jw iy lg lh ka li bi translated">使用Ghost CMS管理API创建Python脚本来恢复内容</h2><p id="a1e8" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">我们基本上创建了自己的脚本来将我们的帖子从WordPress恢复到Ghost CMS。不要忘记安装依赖项。</p><figure class="ki kj kk kl fd km"><div class="bz dy l di"><div class="lm ln l"/></div></figure><p id="47df" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">用您的凭据替换它</p><pre class="ki kj kk kl fd lo lp lq lr aw ls bi"><span id="b346" class="kv jf hi lp b fi lt lu l lv lw">CONTENT_API = "&lt;YOUR CONTENT API&gt;"<br/>ADMIN_API = "&lt;YOUR ADMIN API&gt;"<br/>API_URL = "&lt;URL ENDPOINT&gt;"<br/>JSON_PATH = "&lt;YOUR JSON PATH&gt;"</span></pre><p id="4788" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">确保JSON的路径文件是正确的。最好创建一个新目录，并将脚本与JSON文件放在同一个目录中。然后运行脚本即可。</p><h2 id="c24d" class="kv jf hi bd jg kw kx ky jk kz la lb jo iq lc ld js iu le lf jw iy lg lh ka li bi translated">恢复图像</h2><p id="4130" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">要恢复图像，我们可以上传使用<a class="ae jd" href="https://wordpress.org/plugins/all-in-one-wp-migration /" rel="noopener ugc nofollow" target="_blank">多功能一体机</a>下载的图像。使用SCP或SFTP协议上传到目录/ghost/content/images。</p><h2 id="1c0a" class="kv jf hi bd jg kw kx ky jk kz la lb jo iq lc ld js iu le lf jw iy lg lh ka li bi translated">创建Python脚本来恢复图像</h2><p id="b56f" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">由于我不选择图像的备份，我需要创建一个脚本来从以前的网站下载图像。基本上，在我们将主域名指向新网站(Ghost CMS版本)之前，我们仍然有WordPress版本。</p><p id="54ec" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我把脚本上传到了/ghost/content/images目录下。并从那里运行脚本。我其实很想用<a class="ae jd" href="https://ghost.org/docs/admin-api/#images" rel="noopener ugc nofollow" target="_blank"> Ghost Admin API </a>上传图片，可惜不行。这么多关于图像API的问题，但没有一个是Ghost解决的。</p><p id="dfa7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">确保您还将JSON文件上传到/ghost/content/images，因为脚本将加载JSON文件并细化路径，然后下载图像。</p><figure class="ki kj kk kl fd km"><div class="bz dy l di"><div class="lm ln l"/></div></figure><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es lx"><img src="../Images/db167cca27296b306fd25bb40640eca3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*myDxatQjGC0F1t9ojwz8Zw.png"/></div></div></figure><p id="282c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">之后，我们用Ghost CMS版本将主域名指向我们的新网站。我们最终成功地将WordPress网站迁移到Ghost CMS。</p><p id="2fad" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我知道我们可以创建一个脚本来简化这个过程。这一次，我想分解一下，这样我们就可以看到将网站迁移到Ghost CMS所需的每个步骤和过程。</p><p id="19b0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我知道这需要技术含量，但是如果你不是技术人员，你可以给我发电子邮件。</p><p id="5e17" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">希望这有帮助！请<a class="ae jd" href="mailto:hi@rahmatramadhan.com" rel="noopener ugc nofollow" target="_blank">给我</a>一些反馈！</p></div></div>    
</body>
</html>