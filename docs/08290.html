<html>
<head>
<title>Fully Understand Email Authentication Protocols(SPF, DKIM, DMARC) in One Go</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">一口气完全理解电子邮件认证协议(SPF、DKIM、DMARC)</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/fully-understand-email-authentication-protocols-spf-dkim-dmarc-in-one-go-f7a8508fc5f3?source=collection_archive---------3-----------------------#2021-10-24">https://medium.com/geekculture/fully-understand-email-authentication-protocols-spf-dkim-dmarc-in-one-go-f7a8508fc5f3?source=collection_archive---------3-----------------------#2021-10-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/6b8eb065fbb7218d4d54cae979f915ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ce1nSVVKQYjIpKgFs8Rumg.jpeg"/></div></div></figure><p id="e93b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当我学习电子邮件认证协议时，我是从不同的博客或网站上分别学习的。我认为，对于新来者来说，在一篇文章中理解所有这些内容并获得更清晰的全貌会更有效、更有帮助，这也是我这篇文章的目的。</p><h1 id="9f0a" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">发件人策略框架</h1><p id="4727" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">一句话，<strong class="is hj"> SPF记录说明了可以从您的域名发送电子邮件的所有授权来源。</strong></p><p id="077d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">用更专业的术语来说，SPF记录是一个DNS TXT记录，拥有/引用可以代表您的域发送电子邮件的授权IP地址列表。以下面的SPF记录为例:</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="bef3" class="la jp hi kw b fi lb lc l ld le">v=spf1 include:zoho.com ~all</span></pre><p id="95f2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><code class="du lf lg lh kw b">include:zoho.com</code>语句指示接收服务器也包含来自zoho.com的SPF记录，它最终应该由一个授权IP地址列表组成。</p><p id="1b99" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">v语句表示正在使用的SPF版本。最后的<code class="du lf lg lh kw b">~all</code>意味着所有其他与<code class="du lf lg lh kw b">include:zoho.com</code>不匹配的电子邮件都应该被标记为“软故障”。</p><p id="a81e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果您没有为您的发送域设置SPF，其他假装从您的域名发送邮件的人可能会以您的身份发送电子邮件，并对您的业务和声誉造成负面损害。</p><p id="d4db" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这是我在Zoho上找到的一张非常有用的图片，它解释了涉及SPF角色的整个电子邮件发送过程:</p><figure class="kr ks kt ku fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es li"><img src="../Images/3020b5ac804f77aa60a5d4aae4cc561e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*VgWAvwgRPW_osfbm"/></div></div><figcaption class="lj lk et er es ll lm bd b be z dx">source: <a class="ae ln" href="https://help.zoho.com/portal/en/kb/campaigns/deliverability-guide/domain-authentication/domain-authentication-techniques/articles/what-is-sender-policy-framework-spf#How_SPF_works" rel="noopener ugc nofollow" target="_blank">https://help.zoho.com/portal/en/kb/campaigns/deliverability-guide/domain-authentication/domain-authentication-techniques/articles/what-is-sender-policy-framework-spf#How_SPF_works</a></figcaption></figure><p id="cb3d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">关于SPF语法的更详细的解释，请参见本文:<a class="ae ln" href="https://dmarcian.com/spf-syntax-table/" rel="noopener ugc nofollow" target="_blank">https://dmarcian.com/spf-syntax-table/</a>。</p><h1 id="7ef5" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">DKIM(域名密钥识别邮件)</h1><p id="0939" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">简言之，DKIM是一种电子邮件安全标准，旨在确保邮件在发送时不会被更改。</p><p id="52f6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">用更专业的术语来说，DKIM是一个包含公开密钥的DNS TXT记录。发送邮件服务器从邮件消息的内容和标题中创建散列，然后使用私钥对邮件进行签名。DKIM签名作为发送邮件的标题包含在内。接收服务器从查询的DKIM记录中获取公钥，并使用它来解密DKIM签名。如果解密的内容和邮件头与邮件的内容和邮件头匹配，则邮件会通过DKIM，被认为是可信的。</p><p id="a8a8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我发现一个流程图很好地解释了DKIM:</p><figure class="kr ks kt ku fd ij er es paragraph-image"><div class="er es lo"><img src="../Images/20b200139eb822412158b92e0afcaf40.png" data-original-src="https://miro.medium.com/v2/resize:fit:1220/0*7Lsg16mZ_rKjmWTY"/></div><figcaption class="lj lk et er es ll lm bd b be z dx">source: <a class="ae ln" href="https://postmarkapp.com/guides/dkim" rel="noopener ugc nofollow" target="_blank">https://postmarkapp.com/guides/dkim</a></figcaption></figure><h1 id="946f" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">基于域的消息认证报告和一致性</h1><p id="6cd0" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">一句话，DMARC确保你发送的电子邮件的认证，并指示收件人如何处理声称从你的域发送的垃圾邮件。</p><p id="9aa2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">用更专业的术语来说，DMARC是基于SPF和/或DKIM的结果，因此至少要为电子邮件域设置其中一个。要部署DMARC，您需要在DNS中发布一个<a class="ae ln" href="https://dmarcian.com/dmarc-record/" rel="noopener ugc nofollow" target="_blank"> DMARC记录</a> (TXT记录)。如果SPF、DKIM或两者都通过，DMARC将进行身份验证。您可以将DMARC策略设置为以下3个选项之一:</p><h2 id="09e8" class="la jp hi bd jq lp lq lr ju ls lt lu jy jb lv lw kc jf lx ly kg jj lz ma kk mb bi translated">p =无</h2><p id="9d05" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">监控您的电子邮件流量。不采取进一步的行动。</p><h2 id="cb0c" class="la jp hi bd jq lp lq lr ju ls lt lu jy jb lv lw kc jf lx ly kg jj lz ma kk mb bi translated">p =隔离</h2><p id="128c" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">将未经授权的电子邮件发送到垃圾邮件文件夹。</p><h2 id="cd8b" class="la jp hi bd jq lp lq lr ju ls lt lu jy jb lv lw kc jf lx ly kg jj lz ma kk mb bi translated">p =拒绝</h2><p id="732a" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">实施DMARC的最终政策和最终目标。该策略确保未经授权的电子邮件根本不会被发送。</p><p id="1551" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">DMARC记录还指示接收电子邮件服务器将XML报告发送回DMARC记录中列出的报告电子邮件地址。这些报告提供了关于您的电子邮件如何在生态系统中移动的见解，并允许您识别正在使用您的电子邮件域的所有内容。</p><p id="e07d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">更多信息，请访问https://dmarc.org/overview/的<a class="ae ln" href="https://dmarc.org/overview/" rel="noopener ugc nofollow" target="_blank">。</a></p></div></div>    
</body>
</html>