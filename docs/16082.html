<html>
<head>
<title>Teaching Your Computer to Be Polite</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">教你的电脑懂礼貌</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/teaching-your-computer-to-be-polite-3ccf5caba7f7?source=collection_archive---------17-----------------------#2022-12-09">https://medium.com/geekculture/teaching-your-computer-to-be-polite-3ccf5caba7f7?source=collection_archive---------17-----------------------#2022-12-09</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><h2 id="e6f1" class="hg hh hi bd b fp hj hk hl hm hn ho dx hp translated" aria-label="kicker paragraph">引用</h2><div class=""/><div class=""><h2 id="558e" class="pw-subtitle-paragraph io hr hi bd b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf dx translated"><em class="jg">出自</em> <a class="ae jh" href="https://www.manning.com/books/tiny-c-projects?utm_source=medium&amp;utm_medium=referral&amp;utm_campaign=book_gookin_tiny_9_29_21" rel="noopener ugc nofollow" target="_blank"> <em class="jg">微型C项目</em> </a> <em class="jg">出自丹·古金</em></h2></div><figure class="jj jk jl jm fd jn er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es ji"><img src="../Images/bd7e6d0b9a9f7808f3996007e910af3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K7bDPfwPgstAV279dS4LuA.jpeg"/></div></div><figcaption class="ju jv et er es jw jx bd b be z dx">Photo by <a class="ae jh" href="https://unsplash.com/@lorenzoherrera?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Lorenzo Herrera</a> on <a class="ae jh" href="https://unsplash.com/s/photos/computers?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="1ccb" class="pw-post-body-paragraph jy jz hi ka b kb kc is kd ke kf iv kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated"><em class="ku">这篇文章讲述了如何编写一个C程序，当你启动电脑时，它会根据一天中的不同时间为你写一个合适的问候语。</em></p></div><div class="ab cl kv kw gp kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="hb hc hd he hf"><p id="ca0b" class="pw-post-body-paragraph jy jz hi ka b kb kc is kd ke kf iv kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated">在<a class="ae jh" href="https://www.manning.com/books/tiny-c-projects?utm_source=medium&amp;utm_medium=referral&amp;utm_campaign=book_gookin_tiny_9_29_21" rel="noopener ugc nofollow" target="_blank">manning.com</a>结账时，在折扣代码框中输入<strong class="ka hs"> fccgookin </strong>即可享受35%的折扣。</p></div><div class="ab cl kv kw gp kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="hb hc hd he hf"><h2 id="f59e" class="lc ld hi bd le lf lg lh li lj lk ll lm kh ln lo lp kl lq lr ls kp lt lu lv ho bi translated"><strong class="ak">一句简单的问候</strong></h2><p id="f53e" class="pw-post-body-paragraph jy jz hi ka b kb lw is kd ke lx iv kg kh ly kj kk kl lz kn ko kp ma kr ks kt hb bi translated">所有主要的编程项目开始时都很简单，并且有发展成复杂丑陋的怪物的趋势。我敢肯定，Excel最初是作为一个快速而肮脏的文本模式计算器而存在的，现在看看它。无论如何，不要在开始一个项目的时候就一次完成所有需要的东西，这是很好的编程实践。不，最好是增长项目，从简单愚蠢的事情开始，这是本节的重点。</p><h2 id="d457" class="lc ld hi bd le lf lg lh li lj lk ll lm kh ln lo lp kl lq lr ls kp lt lu lv ho bi translated"><strong class="ak">编码问候</strong></h2><p id="59fe" class="pw-post-body-paragraph jy jz hi ka b kb lw is kd ke lx iv kg kh ly kj kk kl lz kn ko kp ma kr ks kt hb bi translated">你能做的最基本的问候程序是一个简单的愚蠢的<em class="ku"> Hello World </em>程序的反流，它引领着自摩西以来每一本C编程入门书籍的页面。清单1展示了您可以为问候程序编写的版本。</p><p id="f982" class="pw-post-body-paragraph jy jz hi ka b kb kc is kd ke kf iv kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated"><strong class="ka hs">清单1 greet01_basic.c </strong></p><pre class="jj jk jl jm fd mb mc md me aw mf bi"><span id="f471" class="lc ld hi mc b fi mg mh l mi mj">#include &lt;stdio.h&gt;<br/>  <br/> int main()<br/> {<br/>     printf("Hello, Dan!\n");<br/>  <br/>     return(0);<br/> }</span></pre><p id="afa8" class="pw-post-body-paragraph jy jz hi ka b kb kc is kd ke kf iv kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated">不要建。不要跑。如果你这样做了，使用这个命令构建一个名为<em class="ku"> greetings </em>的程序:</p><pre class="jj jk jl jm fd mb mc md me aw mf bi"><span id="a155" class="lc ld hi mc b fi mg mh l mi mj">clang -Wall greet01_basic.c -o greetings</span></pre><p id="41a7" class="pw-post-body-paragraph jy jz hi ka b kb kc is kd ke kf iv kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated">你可以用你最喜欢的但不太好的编译器来代替<code class="du mk ml mm mc b">clang</code>。成功后，产生的程序被命名为<code class="du mk ml mm mc b">greetings</code>。将该程序设置到shell的启动脚本中，添加最后一行，如下所示:</p><pre class="jj jk jl jm fd mb mc md me aw mf bi"><span id="c0cf" class="lc ld hi mc b fi mg mh l mi mj">Greetings</span></pre><p id="a49c" class="pw-post-body-paragraph jy jz hi ka b kb kc is kd ke kf iv kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated">确保在程序名前面加上路径名，或者是完整的路径名，如下所示:</p><pre class="jj jk jl jm fd mb mc md me aw mf bi"><span id="a9cd" class="lc ld hi mc b fi mg mh l mi mj">/home/dang/bin/greetings</span></pre><p id="80d8" class="pw-post-body-paragraph jy jz hi ka b kb kc is kd ke kf iv kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated">或相对路径名:</p><pre class="jj jk jl jm fd mb mc md me aw mf bi"><span id="b664" class="lc ld hi mc b fi mg mh l mi mj">~/bin/greetings</span></pre><p id="ea9e" class="pw-post-body-paragraph jy jz hi ka b kb kc is kd ke kf iv kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated">启动脚本不能神奇地定位程序文件，除非您指定一个路径，比如到我的个人~/bin目录，如示例所示。(我还使用我的shell启动脚本将我的个人~/bin目录放在搜索路径上——这是另一本书中找到的另一个Linux技巧。)</p><p id="89f3" class="pw-post-body-paragraph jy jz hi ka b kb kc is kd ke kf iv kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated">更新启动脚本后，您打开的下一个终端窗口将运行一个启动脚本，该脚本输出以下行，让您的一天更加愉快:</p><pre class="jj jk jl jm fd mb mc md me aw mf bi"><span id="c084" class="lc ld hi mc b fi mg mh l mi mj">Hello, Dan!</span></pre><p id="0084" class="pw-post-body-paragraph jy jz hi ka b kb kc is kd ke kf iv kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated">如果你的名字不是丹，那么这种问候与其说令人愉快，不如说令人困惑。</p><h2 id="c5bb" class="lc ld hi bd le lf lg lh li lj lk ll lm kh ln lo lp kl lq lr ls kp lt lu lv ho bi translated"><strong class="ak">增加一个名字作为参数</strong></h2><p id="55d8" class="pw-post-body-paragraph jy jz hi ka b kb lw is kd ke lx iv kg kh ly kj kk kl lz kn ko kp ma kr ks kt hb bi translated">最初版本的<em class="ku">问候</em>程序是不灵活的。这可能就是为什么你没有编码它，而是急于用一些定制来修改它。</p><p id="0b6e" class="pw-post-body-paragraph jy jz hi ka b kb kc is kd ke kf iv kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated">考虑清单2中提供的适度改进。对代码的这一更新允许您用一个参数来表示程序，从而使它更加灵活。</p><p id="a9ad" class="pw-post-body-paragraph jy jz hi ka b kb kc is kd ke kf iv kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated"><strong class="ka hs">清单2 greet02_basic.c </strong></p><pre class="jj jk jl jm fd mb mc md me aw mf bi"><span id="1660" class="lc ld hi mc b fi mg mh l mi mj">#include &lt;stdio.h&gt;<br/>  <br/> int main(int argc, char *argv[])<br/> {<br/>     if( argc&lt;2)    #A<br/>         puts("Hello, you handsome beast!");<br/>     else<br/>         printf("Hello, %s!\n",argv[1]);    #B<br/>  <br/>     return(0);<br/> }</span></pre><p id="e9cf" class="pw-post-body-paragraph jy jz hi ka b kb kc is kd ke kf iv kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated"><strong class="ka hs"> #A程序名的参数计数始终为1。如果是，则输出默认消息。</strong></p><p id="f2e2" class="pw-post-body-paragraph jy jz hi ka b kb kc is kd ke kf iv kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated"><strong class="ka hs"> #B在程序名后输入的任何内容(只有一个单词)都表示为argv[1]并在此输出。</strong></p><p id="338b" class="pw-post-body-paragraph jy jz hi ka b kb kc is kd ke kf iv kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated">将这些代码构建成一个程序，并将其插入到您的shell的启动脚本中，正如在古代卷轴以及前面的章节中所写的那样。</p><pre class="jj jk jl jm fd mb mc md me aw mf bi"><span id="adec" class="lc ld hi mc b fi mg mh l mi mj">greetings Danny</span></pre><p id="d66c" class="pw-post-body-paragraph jy jz hi ka b kb kc is kd ke kf iv kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated">现在，当您打开新的终端窗口时，程序会输出以下消息:</p><pre class="jj jk jl jm fd mb mc md me aw mf bi"><span id="2aa8" class="lc ld hi mc b fi mg mh l mi mj">Hello, Danny!</span></pre><p id="a14b" class="pw-post-body-paragraph jy jz hi ka b kb kc is kd ke kf iv kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated">这个新消息比原来的要乐观得多，但仍需要一些改进。</p><h2 id="f6fb" class="lc ld hi bd le lf lg lh li lj lk ll lm kh ln lo lp kl lq lr ls kp lt lu lv ho bi translated"><strong class="ak">一天中的时间</strong></h2><p id="0966" class="pw-post-body-paragraph jy jz hi ka b kb lw is kd ke lx iv kg kh ly kj kk kl lz kn ko kp ma kr ks kt hb bi translated">每当我启动电脑时，我为旧的DOS电脑编写的第一批程序中的一个就会向我打招呼。遗憾的是，这个节目有点无聊。为了增加趣味，受我在现实生活中遇到的与人的口头交流的启发，我添加了代码来使问候反映一天中的时间。你也可以以不同的准确度来做这件事。</p><h2 id="a74a" class="lc ld hi bd le lf lg lh li lj lk ll lm kh ln lo lp kl lq lr ls kp lt lu lv ho bi translated"><strong class="ak">获取当前时间</strong></h2><p id="c47e" class="pw-post-body-paragraph jy jz hi ka b kb lw is kd ke lx iv kg kh ly kj kk kl lz kn ko kp ma kr ks kt hb bi translated">有人知道现在几点了吗？电脑可以猜测。它保持半精确的时间，因为它不时地与互联网时间服务器联系。否则，电脑的时钟每天都会慢几分钟。相信我，电脑制造的时钟很糟糕，但这个事实并不能阻止你从内部获取当前时间。</p><p id="f62f" class="pw-post-body-paragraph jy jz hi ka b kb kc is kd ke kf iv kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated">C库中充斥着时间函数，它们都定义在<code class="du mk ml mm mc b">time.h</code>头文件中。标题中还定义了<em class="ku"> time_t </em>数据类型。对于大多数编译器来说，<em class="ku"> time_t </em>数据类型是一个正整数值(<em class="ku"> long </em>数据类型，<em class="ku"> printf() </em>占位符<code class="du mk ml mm mc b">%ld</code>)，用于存储Unix纪元，即自1970年1月1日午夜以来流逝的秒数。</p><p id="8ce5" class="pw-post-body-paragraph jy jz hi ka b kb kc is kd ke kf iv kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated">Unix epoch在您的greetings程序中非常有用。例如，想象一下每天当你启动终端时，你看到以下快乐的消息时的喜悦:</p><pre class="jj jk jl jm fd mb mc md me aw mf bi"><span id="1db4" class="lc ld hi mc b fi mg mh l mi mj">Hello, Danny, it's 1624424373</span></pre><p id="ee8e" class="pw-post-body-paragraph jy jz hi ka b kb kc is kd ke kf iv kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated">当然，<em class="ku"> time_t </em>值必须被处理成更有用的东西。清单1显示了一些示例代码。注意许多时间函数，例如<code class="du mk ml mm mc b">time01.c</code>代码中使用的<em class="ku"> time() </em>和<em class="ku"> ctime() </em>，需要<em class="ku"> time_t </em>变量的地址。是的，它们是指针。</p><p id="2d81" class="pw-post-body-paragraph jy jz hi ka b kb kc is kd ke kf iv kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated"><strong class="ka hs">清单3 time01.c </strong></p><pre class="jj jk jl jm fd mb mc md me aw mf bi"><span id="00db" class="lc ld hi mc b fi mg mh l mi mj">#include &lt;stdio.h&gt;<br/> #include &lt;time.h&gt;    #A<br/>  <br/> int main()<br/> {<br/>     time_t now;<br/>  <br/>     time(&amp;now);    #B<br/>     printf("The computer thinks it's %ld\n",now);<br/>     printf("%s",ctime(&amp;now));    #C<br/>  <br/>     return(0);<br/> }</span></pre><p id="11c2" class="pw-post-body-paragraph jy jz hi ka b kb kc is kd ke kf iv kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated"><strong class="ka hs"> #A这个</strong> <code class="du mk ml mm mc b">time.h</code> <strong class="ka hs">头文件是必需的，以免编译器跟你生气。</strong></p><p id="64c2" class="pw-post-body-paragraph jy jz hi ka b kb kc is kd ke kf iv kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated"><strong class="ka hs"># B<em class="ku">time()</em>函数需要<em class="ku"> time_t </em>变量的地址，此处前缀为&amp; address-of运算符。</strong></p><p id="55f9" class="pw-post-body-paragraph jy jz hi ka b kb kc is kd ke kf iv kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated">函数需要一个指针参数，并返回一个附加了换行符的字符串。</p><p id="2b69" class="pw-post-body-paragraph jy jz hi ka b kb kc is kd ke kf iv kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated"><strong class="ka hs">下面是结果程序的示例输出:</strong></p><pre class="jj jk jl jm fd mb mc md me aw mf bi"><span id="7765" class="lc ld hi mc b fi mg mh l mi mj">The computer thinks it's 1624424373<br/> Tue Jun 22 21:59:33 2021</span></pre><p id="b42e" class="pw-post-body-paragraph jy jz hi ka b kb kc is kd ke kf iv kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated">输出显示了自1970年以来的计时秒数。这个相同的值被函数<em class="ku"> ctime() </em>接收，输出一个格式化的时间字符串。这个结果在您的问候语程序中可能是可以接受的，但是时间数据可以进一步定制。解开具体时间细节的关键在<em class="ku"> localtime() </em>函数中，如清单4中的代码所示。</p><p id="bb18" class="pw-post-body-paragraph jy jz hi ka b kb kc is kd ke kf iv kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated"><strong class="ka hs">清单4 time02.c </strong></p><pre class="jj jk jl jm fd mb mc md me aw mf bi"><span id="4d9c" class="lc ld hi mc b fi mg mh l mi mj">#include &lt;stdio.h&gt;<br/> #include &lt;time.h&gt;<br/>  <br/> int main()<br/> {<br/>     time_t now;<br/>     struct tm *clock;    #A<br/>  <br/>     time(&amp;now);<br/>     clock = localtime(&amp;now);<br/>     puts("Time details:");<br/>     printf(" Day of the year: %d\n",clock-&gt;tm_yday);<br/>     printf(" Day of the week: %d\n",clock-&gt;tm_wday);    #B<br/>     printf("            Year: %d\n",clock-&gt;tm_year+1900);    #C<br/>     printf("           Month: %d\n",clock-&gt;tm_mon+1);    #D<br/>     printf("Day of the month: %d\n",clock-&gt;tm_mday);<br/>     printf("            Hour: %d\n",clock-&gt;tm_hour);<br/>     printf("          Minute: %d\n",clock-&gt;tm_min);<br/>     printf("          Second: %d\n",clock-&gt;tm_sec);<br/>  <br/>     return(0);<br/> }</span></pre><p id="1ada" class="pw-post-body-paragraph jy jz hi ka b kb kc is kd ke kf iv kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated"><strong class="ka hs"> A#因为<em class="ku"> localtime() </em>返回一个指针，所以最好将结构声明为指针。</strong></p><p id="f3cf" class="pw-post-body-paragraph jy jz hi ka b kb kc is kd ke kf iv kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated"><strong class="ka hs"> B#周日一周的第一天为0</strong></p><p id="a6e6" class="pw-post-body-paragraph jy jz hi ka b kb kc is kd ke kf iv kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated"><strong class="ka hs"> C#必须将1900加到</strong> <code class="du mk ml mm mc b">tm_year</code> <strong class="ka hs">成员才能得到当前年份。你会忘记这一点。</strong></p><p id="d42c" class="pw-post-body-paragraph jy jz hi ka b kb kc is kd ke kf iv kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated"><strong class="ka hs"/><strong class="ka hs">D #成员范围从0到11。</strong></p><p id="fc86" class="pw-post-body-paragraph jy jz hi ka b kb kc is kd ke kf iv kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated">我用大量空格格式化了清单4中的代码，以便您可以容易地识别出<code class="du mk ml mm mc b">tm</code>结构的成员。这些变量表示<em class="ku"> localtime() </em>函数从<code class="du mk ml mm mc b">time_t</code>值中提取的时间花絮。确保您记得调整一些值，如清单2所示:年份值<code class="du mk ml mm mc b">tm_year</code>必须增加1900以反映当前的有效年份；月份值<code class="du mk ml mm mc b">tm_mon</code>从零开始，而不是一。</p><p id="eb9e" class="pw-post-body-paragraph jy jz hi ka b kb kc is kd ke kf iv kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated">输出是微不足道的，所以我不需要展示它——除非您给我一张5美元的支票。尽管如此，代码的目的是展示如何获得有用的时间信息，以便在终端问候中适当地加入一些内容。</p><h2 id="688e" class="lc ld hi bd le lf lg lh li lj lk ll lm kh ln lo lp kl lq lr ls kp lt lu lv ho bi translated"><strong class="ak">在一天中的一般时间混合</strong></h2><p id="2fb2" class="pw-post-body-paragraph jy jz hi ka b kb lw is kd ke lx iv kg kh ly kj kk kl lz kn ko kp ma kr ks kt hb bi translated">我几年前为我的DOS电脑编写的程序叫做<code class="du mk ml mm mc b">GREET.COM</code>。它是我电脑的<code class="du mk ml mm mc b">AUTOEXEC.BAT</code>程序的一部分，每次我启动我那台值得信赖的IBM个人电脑时，它都会运行。因为我喜欢怀旧的东西，所以我保留了一份节目单。用x86汇编写的，还是在DOSBox下运行。啊，数字时代的甜蜜香水。闻起来像臭氧。</p><p id="b65c" class="pw-post-body-paragraph jy jz hi ka b kb kc is kd ke kf iv kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated">唉，我没有我的<code class="du mk ml mm mc b">GREET.COM</code>程序的源代码。根据记忆(和反汇编)，我看到代码获取一天中的当前时间并输出一个合适的时间问候:早上好、下午好或晚上好。你可以用同样的技巧编写代码——尽管是用C语言为你当前的计算机编写，而不是用x86汇编语言为一台老式的IBM PC编写。</p><p id="472c" class="pw-post-body-paragraph jy jz hi ka b kb kc is kd ke kf iv kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated">清单5汇集了本章第一部分的资源，展示了我的旧greetings程序的当前版本。</p><p id="05d6" class="pw-post-body-paragraph jy jz hi ka b kb kc is kd ke kf iv kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated"><strong class="ka hs">清单5 greet03_time.c </strong></p><pre class="jj jk jl jm fd mb mc md me aw mf bi"><span id="ea45" class="lc ld hi mc b fi mg mh l mi mj">#include &lt;stdio.h&gt;<br/> #include &lt;time.h&gt;<br/>  <br/> int main(int argc, char *argv[])<br/> {<br/>     time_t now;<br/>     struct tm *clock;<br/>     int hour;<br/>  <br/>     time(&amp;now);<br/>     clock = localtime(&amp;now);<br/>     hour = clock-&gt;tm_hour;    #A<br/>  <br/>     printf("Good ");<br/>     if( hour &lt; 12 )    #B<br/>         printf("morning");<br/>     else if( hour &lt; 17 )    #C<br/>         printf("afternoon");<br/>     else    #D<br/>         printf("evening");<br/>  <br/>     if( argc&gt;1 )    #E<br/>         printf(", %s",argv[1]);<br/>  <br/>     putchar('\n');<br/>  <br/>     return(0);<br/> }</span></pre><p id="ccc4" class="pw-post-body-paragraph jy jz hi ka b kb kc is kd ke kf iv kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated"><strong class="ka hs"> #A这种说法是为了避免反复使用</strong><code class="du mk ml mm mc b">clock-&gt;tm_hour</code><strong class="ka hs"/></p><p id="c5f3" class="pw-post-body-paragraph jy jz hi ka b kb kc is kd ke kf iv kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated"><strong class="ka hs"> #B中午之前，说“早上好”</strong></p><p id="8f31" class="pw-post-body-paragraph jy jz hi ka b kb kc is kd ke kf iv kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated"><strong class="ka hs"> #C从中午到下午5点，说“下午好”</strong></p><p id="6721" class="pw-post-body-paragraph jy jz hi ka b kb kc is kd ke kf iv kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated"><strong class="ka hs"> #D否则，就是晚上了</strong></p><p id="6987" class="pw-post-body-paragraph jy jz hi ka b kb kc is kd ke kf iv kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated"><strong class="ka hs"> #E检查并输出第一个命令行参数</strong></p><p id="57b9" class="pw-post-body-paragraph jy jz hi ka b kb kc is kd ke kf iv kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated">假设构建的程序名为<em class="ku"> greetings </em>，用户键入<strong class="ka hs"> Danny </strong>作为命令行参数，现在是下午4点，下面是代码的输出:</p><pre class="jj jk jl jm fd mb mc md me aw mf bi"><span id="2ba8" class="lc ld hi mc b fi mg mh l mi mj">Good afternoon, Danny</span></pre><p id="dddd" class="pw-post-body-paragraph jy jz hi ka b kb kc is kd ke kf iv kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated">这段代码有效地复制了我几十年前写的我的<code class="du mk ml mm mc b">GREET.COM</code>程序。输出是一个愉快的、与时间相关的问候，给出了当天的当前时间。</p><p id="b96e" class="pw-post-body-paragraph jy jz hi ka b kb kc is kd ke kf iv kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated">对于额外的幽默，您可以添加一个针对早期时间的测试，例如午夜到凌晨4点。输出一些异想天开的文本，如“工作到很晚？”或者“你还没睡吗？”哦，真滑稽！我希望你的两侧不疼。</p><h2 id="b151" class="lc ld hi bd le lf lg lh li lj lk ll lm kh ln lo lp kl lq lr ls kp lt lu lv ho bi translated"><strong class="ak">添加具体时间信息</strong></h2><p id="e322" class="pw-post-body-paragraph jy jz hi ka b kb lw is kd ke lx iv kg kh ly kj kk kl lz kn ko kp ma kr ks kt hb bi translated">打开终端窗口时，另一种犒劳自己的方式是输出一个详细的时间字符串。完成这项任务的简单方法是输出问候语，后跟由<em class="ku"> ctime() </em>函数生成的时间字符串。下面是两行相关的代码:</p><pre class="jj jk jl jm fd mb mc md me aw mf bi"><span id="f100" class="lc ld hi mc b fi mg mh l mi mj">printf(“Good day, %s\n”,argv[1]);<br/> printf(“It’s %s”,ctime(&amp;now);</span></pre><p id="2d05" class="pw-post-body-paragraph jy jz hi ka b kb kc is kd ke kf iv kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated">这两条语句应该让您对代码的样子有所了解。尽管如此，该计划是懒惰的。最好包含<em class="ku"> strftime() </em>函数，它根据您的规范格式化时间戳字符串。</p><p id="d35d" class="pw-post-body-paragraph jy jz hi ka b kb kc is kd ke kf iv kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated"><em class="ku"> strftime() </em>函数的工作方式类似于<em class="ku"> printf() </em>，它使用一个特殊的字符串来格式化时间信息。该函数的输出保存在一个缓冲区中，您的代码可以在以后使用它。清单6中的代码演示了。</p><p id="765a" class="pw-post-body-paragraph jy jz hi ka b kb kc is kd ke kf iv kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated"><strong class="ka hs">清单6 greet04_time.c </strong></p><pre class="jj jk jl jm fd mb mc md me aw mf bi"><span id="3d1a" class="lc ld hi mc b fi mg mh l mi mj">#include &lt;stdio.h&gt;<br/> #include &lt;time.h&gt;<br/>  <br/> int main(int argc, char *argv[])<br/> {<br/>     time_t now;<br/>     struct tm *clock;<br/>     char time_string[64];    #A<br/>  <br/>     time(&amp;now);<br/>     clock = localtime(&amp;now);    #B<br/>  <br/>     strftime(time_string,64,"Today is %A, %B %d, %Y%nIt is %r%n",clock);<br/>  <br/>     printf("Greetings");<br/>     if( argc&gt;1 )<br/>         printf(", %s",argv[1]);<br/>     printf("!\n%s",time_string);<br/>  <br/>     return(0);<br/> }</span></pre><p id="8d4c" class="pw-post-body-paragraph jy jz hi ka b kb kc is kd ke kf iv kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated"><strong class="ka hs">#存储由<em class="ku"> strftime() </em>函数填充的字符串。</strong></p><p id="ee25" class="pw-post-body-paragraph jy jz hi ka b kb kc is kd ke kf iv kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated"><strong class="ka hs"> #B您必须填充一个<em class="ku">local time()</em></strong><code class="du mk ml mm mc b">tm</code><strong class="ka hs">结构才能使<em class="ku"> strftime() </em>函数工作。</strong></p><p id="f4e8" class="pw-post-body-paragraph jy jz hi ka b kb kc is kd ke kf iv kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated">你可以查看<em class="ku"> strftime() </em>的<em class="ku"> man </em>页面，发现所有有趣的占位符以及它们的作用。像<em class="ku"> printf() </em>函数一样，占位符以一个<code class="du mk ml mm mc b">%</code>字符为前缀。格式化字符串中的任何其他文本按原样输出。下面是清单6中的<em class="ku"> strftime() </em>语句的亮点:</p><figure class="jj jk jl jm fd jn er es paragraph-image"><div class="er es mn"><img src="../Images/2684c88248d89a512d6b4b44821b9ec6.png" data-original-src="https://miro.medium.com/v2/resize:fit:784/format:webp/0*dPkhpDhDhh6_ypTY.png"/></div></figure></div><div class="ab cl kv kw gp kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="hb hc hd he hf"><p id="7150" class="pw-post-body-paragraph jy jz hi ka b kb kc is kd ke kf iv kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated">输出反映了产生并存储在<code class="du mk ml mm mc b">time_string[]</code>缓冲器中的时间字符串。如本文前面所述，时间字符串出现在常规问候语之后:</p><pre class="jj jk jl jm fd mb mc md me aw mf bi"><span id="a481" class="lc ld hi mc b fi mg mh l mi mj">Greetings, Danny!<br/> Today is Wednesday, June 23, 2021<br/> It is 04:24:47 PM</span></pre><p id="f15e" class="pw-post-body-paragraph jy jz hi ka b kb kc is kd ke kf iv kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated">此时，有人可能会说，所有这些输出都可以通过使用shell脚本语言轻松完成，不管怎样，shell脚本语言是shell启动和配置文件的母语。尽管如此，作为一名C程序员，你的工作是为问候语提供更多的洞察力和力量。当使用一种可悲的小shell脚本语言时，这样的添加是不可能的。</p><p id="1746" class="pw-post-body-paragraph jy jz hi ka b kb kc is kd ke kf iv kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated">本文到此为止。如果你想了解这本书的更多信息，请点击这里查看。</p></div></div>    
</body>
</html>