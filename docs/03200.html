<html>
<head>
<title>Custom Animation in Flutter</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">颤振中的自定义动画</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/custom-animation-in-flutter-1cca2752a2ab?source=collection_archive---------10-----------------------#2021-06-03">https://medium.com/geekculture/custom-animation-in-flutter-1cca2752a2ab?source=collection_archive---------10-----------------------#2021-06-03</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="02d6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以及如何有效应用。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/e79d624787b0232d4ff4c7d233785b1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*NozNJBFXMyOwqbcG"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx">Photo by <a class="ae jt" href="https://unsplash.com/@contentpixie?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Content Pixie</a> on <a class="ae jt" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="d9d5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi ju translated"><span class="l jv jw jx bm jy jz ka kb kc di"> H </span>我，各位。这是<a class="ae jt" href="http://linkedin.com/in/yusasarisoy" rel="noopener ugc nofollow" target="_blank">yua</a>，我在<a class="ae jt" href="http://wewalk.io/" rel="noopener ugc nofollow" target="_blank"> WeWALK </a>做软件工程师。近期开始学习Flutter，真的很喜欢。我认为，颤振的一个迷人的概念是动画。在这个故事中，我们将看看动画以及如何定制它。您可以对任何项目使用相同的方法来自定义动画。所以，让我们来看看我们能做些什么。</p></div><div class="ab cl kd ke gp kf" role="separator"><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki"/></div><div class="hb hc hd he hf"><h1 id="efe6" class="kk kl hi bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">初始化AnimationController</h1><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es li"><img src="../Images/1dad15138826b0ad33d86a129fe43329.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*byIMmBHW-BA3yvcX"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx">Photo by <a class="ae jt" href="https://unsplash.com/@fedevitale?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Federico Vitale</a> on <a class="ae jt" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="6f34" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先我们会定义<a class="ae jt" href="https://api.flutter.dev/flutter/animation/AnimationController-class.html" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj">animation controller</strong></a>来动画出我们想要的东西。</p><pre class="je jf jg jh fd lj lk ll lm aw ln bi"><span id="fc77" class="lo kl hi lk b fi lp lq l lr ls"><strong class="lk hj">late</strong> <strong class="lk hj">AnimationController</strong> controller;</span></pre><p id="279a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们使用关键字“<strong class="ih hj"> late </strong>”，因为我们将在<a class="ae jt" href="https://api.flutter.dev/flutter/widgets/State/initState.html" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj"> initState </strong> </a>方法中初始化控制器，它不必立即初始化。</p></div><div class="ab cl kd ke gp kf" role="separator"><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki"/></div><div class="hb hc hd he hf"><pre class="je jf jg jh fd lj lk ll lm aw ln bi"><span id="b89a" class="lo kl hi lk b fi lp lq l lr ls"><strong class="lk hj">@override<br/>void</strong> <strong class="lk hj">initState</strong>() {<br/>  <strong class="lk hj">super</strong>.<strong class="lk hj">initState</strong>();</span><span id="2793" class="lo kl hi lk b fi lt lq l lr ls">  controller = <strong class="lk hj">AnimationController</strong>(<br/>    duration: <strong class="lk hj">Duration</strong>(seconds: <strong class="lk hj">1</strong>),<br/>    vsync: <strong class="lk hj">this</strong>,<br/>  );</span><span id="c74e" class="lo kl hi lk b fi lt lq l lr ls">  controller.<strong class="lk hj">forward</strong>();</span><span id="fef3" class="lo kl hi lk b fi lt lq l lr ls">  controller.<strong class="lk hj">addListener</strong>(() {<br/>    <strong class="lk hj">setState</strong>(() {});<br/>  });<br/>}</span></pre><p id="4551" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">之后，我们在initState中初始化<strong class="ih hj">控制器</strong>，以便在视图准备就绪时激活。我们将<strong class="ih hj">持续时间</strong>设定为<strong class="ih hj"> 1秒</strong>。<a class="ae jt" href="https://api.flutter.dev/flutter/animation/AnimationController/forward.html" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj"> forward </strong> </a>()方法提供开始动画直到结束，<a class="ae jt" href="https://api.flutter.dev/flutter/animation/ReverseAnimation/addListener.html" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj"> addListener </strong> </a>()每次值变化时调用监听器。我们设置<strong class="ih hj"> setState </strong>以便能够在我们的小部件上显示更改。关键参数是<strong class="ih hj"> vsnyc </strong>。对于<strong class="ih hj"> vsync </strong>，我们必须设置一个<a class="ae jt" href="https://api.flutter.dev/flutter/scheduler/TickerProvider-class.html" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj">ticker provider</strong></a>值。我们将用<strong class="ih hj"> this </strong>关键字为此设置我们的类。为了能够做到这一点，我们必须对我们的类做一些添加，“T42与SingleTickerProviderStateMixin”。</p><pre class="je jf jg jh fd lj lk ll lm aw ln bi"><span id="996b" class="lo kl hi lk b fi lp lq l lr ls"><strong class="lk hj">class</strong> <strong class="lk hj">_WelcomeScreenState</strong> <strong class="lk hj">extends</strong> <strong class="lk hj">State</strong>&lt;<strong class="lk hj">WelcomeScreen</strong>&gt; <strong class="lk hj">with</strong> <strong class="lk hj">SingleTickerProviderStateMixin</strong></span></pre></div><div class="ab cl kd ke gp kf" role="separator"><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki"/></div><div class="hb hc hd he hf"><h1 id="ea1e" class="kk kl hi bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">初始化曲线动画</h1><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lu"><img src="../Images/abec2126e0333a7d25be93b076a1e4f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8exa11gPKDWsEXMV"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx">Photo by <a class="ae jt" href="https://unsplash.com/@mrsamuelelias?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Samuel-Elias Nadler</a> on <a class="ae jt" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="a11c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jt" href="https://api.flutter.dev/flutter/animation/CurvedAnimation-class.html" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">曲线动画</strong> </a>允许我们将曲线应用到另一个动画中。</p><p id="4a98" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">像AnimationController一样，我们使用关键字“<strong class="ih hj"> late </strong>”，因为我们将在<a class="ae jt" href="https://api.flutter.dev/flutter/widgets/State/initState.html" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj"> initState </strong> </a>方法中初始化控制器，它不必立即初始化。</p><pre class="je jf jg jh fd lj lk ll lm aw ln bi"><span id="652a" class="lo kl hi lk b fi lp lq l lr ls"><strong class="lk hj">late</strong> <strong class="lk hj">Animation</strong> animation;</span></pre><p id="f2b3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，我们在<strong class="ih hj"> initState </strong>()中初始化它。</p><pre class="je jf jg jh fd lj lk ll lm aw ln bi"><span id="bef9" class="lo kl hi lk b fi lp lq l lr ls">animation = <strong class="lk hj">CurvedAnimation</strong>(parent<strong class="lk hj">:</strong> controller, curve<strong class="lk hj">:</strong> <strong class="lk hj">Curves</strong>.bounceOut);</span></pre><p id="23da" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">曲线动画</strong>有两个参数。第一个是<strong class="ih hj">父</strong>，接受一个<strong class="ih hj">动画控制器</strong>实例；第二个是<strong class="ih hj">曲线</strong>，接受我们想要使用的一种类型的<a class="ae jt" href="https://api.flutter.dev/flutter/animation/Curves-class.html" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">曲线</strong> </a>。我想用<strong class="ih hj">反弹</strong>的曲线。</p><p id="6e28" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因为<strong class="ih hj"> animation.value </strong>取0到1之间的值，所以我将该值乘以100。</p><pre class="je jf jg jh fd lj lk ll lm aw ln bi"><span id="7e89" class="lo kl hi lk b fi lp lq l lr ls"><strong class="lk hj">Hero</strong>(<br/>  tag: 'logo',<br/>  child: <strong class="lk hj">Container</strong>(<br/>    child: <strong class="lk hj">Image</strong>.asset('images/logo.png'),<br/>    height: animation.value * 100,<br/>  ),<br/>)</span></pre><p id="356f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将该值设置为app logo的高度，这是一个<a class="ae jt" href="https://api.flutter.dev/flutter/widgets/Image-class.html" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">图像</strong> </a>，让我们看看会发生什么。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lv lw l"/></div><figcaption class="jp jq et er es jr js bd b be z dx">Animation of the app logo.</figcaption></figure></div><div class="ab cl kd ke gp kf" role="separator"><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki"/></div><div class="hb hc hd he hf"><h1 id="8fde" class="kk kl hi bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">初始化ColorTween</h1><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lx"><img src="../Images/d6a62262c2e428038b4a651a33a1bcb6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*GNZ_100UYh9FMk18"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx">Photo by <a class="ae jt" href="https://unsplash.com/@virgin?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">IIONA VIRGIN</a> on <a class="ae jt" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="d0c7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以用<a class="ae jt" href="https://api.flutter.dev/flutter/animation/ColorTween-class.html" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj"/></a>来代替<strong class="ih hj">曲线动画</strong>。ColorTween 提供两种颜色之间的插值。例如，如果我们想在<strong class="ih hj">红色</strong>和<strong class="ih hj">蓝色</strong>之间进行插值，我们可以用下面的代码行来完成。</p><pre class="je jf jg jh fd lj lk ll lm aw ln bi"><span id="7018" class="lo kl hi lk b fi lp lq l lr ls">animation = <strong class="lk hj">ColorTween</strong>(begin: <strong class="lk hj">Colors</strong>.red, end: <strong class="lk hj">Colors</strong>.blue).<strong class="lk hj">animate</strong>(controller);</span></pre><p id="9e3b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我想保持<strong class="ih hj">图像</strong>的高度，并用这个改变的值改变背景颜色。</p><pre class="je jf jg jh fd lj lk ll lm aw ln bi"><span id="97d5" class="lo kl hi lk b fi lp lq l lr ls"><strong class="lk hj">@override</strong><br/><strong class="lk hj">Widget</strong> <strong class="lk hj">build</strong>(<strong class="lk hj">BuildContext</strong> context) {<br/>  <strong class="lk hj">return</strong> <strong class="lk hj">Scaffold</strong>(<br/>    backgroundColor<strong class="lk hj">:</strong> animation.value,</span><span id="1e4c" class="lo kl hi lk b fi lt lq l lr ls"><strong class="lk hj">...</strong></span></pre><p id="b459" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后，我们来看看背景色会有什么变化。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lv lw l"/></div><figcaption class="jp jq et er es jr js bd b be z dx">Change of the background color from red to blue.</figcaption></figure></div><div class="ab cl kd ke gp kf" role="separator"><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki"/></div><div class="hb hc hd he hf"><h1 id="97fa" class="kk kl hi bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">处置动画控制器</h1><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ly"><img src="../Images/f04b4394335a9d8150d5b128adf815ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*szqItLXgojljEV-f"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx">Photo by <a class="ae jt" href="https://unsplash.com/@inkyhills?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Callum Hill</a> on <a class="ae jt" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="4269" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当动画运行时，它会消耗大量内存。为了避免这种情况，当类被销毁时，我们必须处理掉<strong class="ih hj">动画控制器</strong>。为了实现这一点，我们可以覆盖<a class="ae jt" href="https://api.flutter.dev/flutter/widgets/State/dispose.html" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj"> dispose </strong> </a>方法并处置<strong class="ih hj"> AnimationController </strong>实例。这样，它就停止了霸占所有的资源。</p><pre class="je jf jg jh fd lj lk ll lm aw ln bi"><span id="c645" class="lo kl hi lk b fi lp lq l lr ls"><strong class="lk hj">@override</strong><br/><strong class="lk hj">void</strong> <strong class="lk hj">dispose</strong>() {  <br/>  <strong class="lk hj">super</strong>.<strong class="lk hj">dispose</strong>();<br/>  <br/>  controller.<strong class="lk hj">dispose</strong>();<br/>}</span></pre></div><div class="ab cl kd ke gp kf" role="separator"><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki"/></div><div class="hb hc hd he hf"><h1 id="a19c" class="kk kl hi bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">结论</h1><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lu"><img src="../Images/60f216c440f38a8ebd7f9d1a4293d1ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*86sJgTojMeXHvn81"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx">Photo by <a class="ae jt" href="https://unsplash.com/@davidsonluna?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">D A V I D S O N L U N A</a> on <a class="ae jt" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="fa62" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">作为结论；我们学习了如何使用Flutter制作自定义动画。还学习了如何在两种不同的颜色之间改变背景。你可以在这里 访问我使用动画<a class="ae jt" href="https://github.com/yusasarisoy/chatalk" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">的GitHub库。</strong></a></p></div><div class="ab cl kd ke gp kf" role="separator"><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki"/></div><div class="hb hc hd he hf"><p id="30ea" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">更新:</strong>我有个好消息要告诉你！你可能知道,“我们行走”曾被《时代》杂志评为年度最佳发明之一。现在，WeWALK已经被亚马逊评选为5大创业公司之一。获胜者将在7月7日之前通过公众投票选出，并将由亚马逊宣布为“年度创业公司”凭借€100，000奖金，我们将把它用于向世界各地更多的视障人士提供智能手杖。请投票支持我们的使命。</p><p id="b07d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面是链接:【www.wewalk.io/amazonT2】</p><p id="7cf3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">谢谢大家的支持！</p><p id="c2ad" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">祝大家有个健康的一天！</strong></p><p id="aed0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">#跨#扑#镖#动画#自定义动画</strong></p></div></div>    
</body>
</html>