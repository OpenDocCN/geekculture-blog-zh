<html>
<head>
<title>Building a Bar Chart in Tableau: Number of Grocery Trips per Hour of Day</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Tableau中构建条形图:一天中每小时的食品杂货行程数</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/building-a-bar-chart-in-tableau-number-of-grocery-trips-per-hour-of-day-494dc7eb6df4?source=collection_archive---------13-----------------------#2022-07-22">https://medium.com/geekculture/building-a-bar-chart-in-tableau-number-of-grocery-trips-per-hour-of-day-494dc7eb6df4?source=collection_archive---------13-----------------------#2022-07-22</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="7dc6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从2020年1月8日到2021年2月21日，我试图记录我去杂货店的每个人，试图了解我作为顾客的行为。我希望这能让我发现那些让我倾向于花更多钱或购买“坏”食物的习惯。通过了解它们，我可以避免它们，并希望过上更健康的生活方式。我在这里讨论更多关于它的<a class="ae jd" rel="noopener" href="/@alexistats/groceries-insights-trying-to-improve-my-life-through-data-analysis-738a976074ee">。</a></p><p id="331b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">今天，我们将使用流行的数据可视化工具Tableau。目标？构建一个条形图来表示一天中每小时的旅行次数，以及一天中每小时每次旅行的平均花费金额。或许是我基于时间不自觉的改变了购买习惯。</p><p id="2040" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们开始吧。</p><h1 id="fed7" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">步骤1:加载数据</h1><p id="9e0a" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">数据是excel格式的。我们可以简单地将文件拖到Tableau，它将正确地加载数据。</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es kh"><img src="../Images/d6a17163f36dd92533affe37fbe9385c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E1RG2P61Q0IMHO1B4wQYHA.png"/></div></div><figcaption class="kt ku et er es kv kw bd b be z dx">Loading the data</figcaption></figure><p id="1c8f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Tableau会自动检测列和数据类型，所以这里不需要做任何事情。让我们将“Sheet 1”重命名为“trips_per_hour ”,并单击工作表开始构建可视化。</p><h1 id="f3b1" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">步骤2:构建“小时”维度</h1><p id="5f24" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">我们正在寻找建立一个条形图，其中“一天中的时间”将是一个核心维度。然而，这个特定的数据集不包含“一天中的小时”维度，只有“日期”和“时间”维度。所以，我们来提取一下吧！</p><p id="18d9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">幸运的是，这在画面中很简单。</p><p id="763e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">单击时间维度旁边的箭头，然后将鼠标悬停在“创建”上，单击“自定义日期”(见下面的截图)</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es kx"><img src="../Images/075c14b5e0f3e97f9a22b5256f650590.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Do-vB2UCAo8Sl3L_s6vMLQ.png"/></div></div></figure><p id="3b10" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将该字段命名为“一天中的某个小时”，对于细节，我们使用“小时”。最后选择“日期部分”。我们的新维度已经可以使用了！</p><figure class="ki kj kk kl fd km er es paragraph-image"><div class="er es ky"><img src="../Images/afd15b6079f24322613b414b6f6324a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:368/format:webp/1*HYOavp1PrMQljoKOsTgdpg.png"/></div></figure><p id="6835" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在Tableau中，将新创建的维度“一天中的小时”拖到“列”字段中。将“ID”维度引入“行”字段。以下是结果输出:</p><figure class="ki kj kk kl fd km er es paragraph-image"><div class="er es kz"><img src="../Images/41a541baa67af522e3694a915ae2743f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1148/format:webp/1*8k5_dtmSq9UZWnHP0VgZWg.png"/></div></figure><p id="c696" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这没有什么意义，因为我们需要计算不同ID的数量。为此，单击ID维度并将鼠标悬停在“Measure”上，单击“Count (Distinct)”。</p><figure class="ki kj kk kl fd km er es paragraph-image"><div class="er es la"><img src="../Images/995a00ef4d2e6e89e356b107a436bf8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1162/format:webp/1*_zLByF2pftBr1unbVHHOMQ.png"/></div></figure><p id="36c3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们可以看到我们真正想要的，那就是一天中每小时的出行次数！让我们确保显示的是一个条形图。为此，在“标记”下，选择“栏”可视化。</p><figure class="ki kj kk kl fd km er es paragraph-image"><div class="er es lb"><img src="../Images/7b423bea5436992a37ab71298fecc675.png" data-original-src="https://miro.medium.com/v2/resize:fit:1350/format:webp/1*CPO43jHyAwMLvIDVxZPJgg.png"/></div></figure><p id="25d6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们有了一个条形图，它代表了我们想要的东西！不过有点丑，还是美化一下吧。</p><h1 id="285a" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">第四步:条形图的美化</h1><p id="a27c" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">第一步，在标记菜单中，将尺寸调整到你喜欢的尺寸。我个人喜欢酒吧靠近在一起，但不完全接触。</p><p id="df4e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第二，再次在标记菜单下，我选择了“标签”并选中了“显示标记标签”,以直接查看每个条形上方的旅行计数。</p><p id="bba2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第三，在纵轴上，我右键点击“编辑轴”。在该菜单下，我选择了“Tick Marks”子菜单，并选择“None”作为主要刻度。因此，消除了垂直轴上的冗余数字(它们已经出现在条形的顶部)。</p><p id="5145" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在该菜单中，我返回到“常规”子菜单，将我的轴的标题修改为“旅行次数”。</p><p id="dacf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第四，在Tableau的格式菜单下，我浏览了“工作表”、“行”和“列”子菜单，将网格线设置为“无”。</p><p id="5f46" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">开始了。一个漂亮的酒吧推车，显示每天每小时去杂货店的次数。我真的很喜欢下午6点以后去杂货店！</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es lc"><img src="../Images/101dfd7b33f33d31190157722ed9d83c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9bDwvh4lU8GlmW16-BuTdQ.png"/></div></div></figure><h1 id="b69d" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">额外:每天每小时的平均花费</h1><p id="55ba" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">我们现在有一个漂亮的条形图，但这不是很可行。当然，我晚上去杂货店，但是有一个小时我比另一个小时花更多的钱吗？</p><p id="1821" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，让我们只过滤食物。让我们将“Food yesno”字段拖到filters框中，并只选择“y”。</p><figure class="ki kj kk kl fd km er es paragraph-image"><div class="er es ld"><img src="../Images/dd7185075adc2c35139133bcce0dcc13.png" data-original-src="https://miro.medium.com/v2/resize:fit:752/format:webp/1*dqIjlL2vvDESuWN2DTyoVA.png"/></div></figure><p id="638a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">其次，从“ID”维度创建一个计算字段。</p><figure class="ki kj kk kl fd km er es paragraph-image"><div class="er es le"><img src="../Images/fe4fc1e47158a41332bea5720035695b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1298/format:webp/1*Z1qmhA5Bj2TD4g8wX_WT9g.png"/></div></figure><p id="2723" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在出现的框中，输入以下代码:</p><pre class="ki kj kk kl fd lf lg lh li aw lj bi"><span id="003c" class="lk jf hi lg b fi ll lm l ln lo">SUM([Price (total)])/COUNTD([ID]) </span></pre><p id="253f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">也就是说，价格的总和除以ID的不同计数。</p><p id="43f8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我把这个新的衡量标准称为“平均”。耗尽”并将其拖到不同id的计数旁边。</p><p id="4165" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这两个图表一个在另一个上面是很有趣的，因为旅行的次数让我了解了可用数据的数量，而每天每小时的平均花费让我了解了y习惯。</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es lp"><img src="../Images/1501c638c3d537f6fbe474c351c5616d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MA1CLkjoksYC4sIvkb4tOg.png"/></div></div></figure><p id="e5df" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该分布明显缺乏数据量，但可视化表明我在一天的晚些时候花费更多，除了下午6点和9点这两个明显的例外。</p><p id="0376" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是，看起来我可以在下午5点前购物节省4-5美元。</p><p id="5e0e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下一次，我将探索如何在Tableau中执行“前10名”,尝试并发现我最喜欢的产品/物品或商店！</p></div></div>    
</body>
</html>