<html>
<head>
<title>How I Clean My Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我如何清理我的代码</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/how-i-clean-my-code-90d1f0ea0175?source=collection_archive---------9-----------------------#2021-04-06">https://medium.com/geekculture/how-i-clean-my-code-90d1f0ea0175?source=collection_archive---------9-----------------------#2021-04-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/060d5e8122fde943731ba8a610f4afff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U_CE31e7KoLuPn-0QodKuQ.png"/></div></div></figure><blockquote class="iq"><p id="19dd" class="ir is hi bd it iu iv iw ix iy iz ja dx translated">本文是为PPL CSUI 2021撰写的个人评论的一部分</p></blockquote><p id="91b6" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx ja hb bi translated">在过去的三年里，我写了很多代码来追逐我的学位。有一天，我试图再次阅读我过去写的代码。由此，我意识到随着时间的推移，我的代码更容易阅读。我们举个例子。</p><h2 id="c7a7" class="jy jz hi bd ka kb kc kd ke kf kg kh ki jm kj kk kl jq km kn ko ju kp kq kr ks bi translated">从这个(旧的)</h2><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="4394" class="jy jz hi ky b fi lc ld l le lf">def base_n_to_dec(numb_in_str,base):<br/>    val = 0<br/>    power = 0<br/>    # Change base 2-10 to base 10<br/>    if base != 16:<br/>        for i in range (len(numb_in_str)):<br/>            index = len(numb_in_str) - i - 1<br/>            number = int(numb_in_str[index])            <br/>            val += number * base ** power<br/>            power += 1<br/><br/>    # Change base 16 to 10<br/>    elif base == 16:<br/>        for i in range (len(numb_in_str)):<br/>            index = len(numb_in_str) - i - 1<br/>            number = numb_in_str[index]<br/>            if number == 'a' or number == 'A':<br/>                number = 10<br/>            elif number == 'b' or number == 'B':<br/>                number = 11<br/>            elif number == 'c' or number == 'C':<br/>                number = 12<br/>            elif number == 'd' or number == 'D':<br/>                number = 13<br/>            elif number == 'e' or number == 'E':<br/>                number = 14<br/>            elif number == 'f' or number == 'F':<br/>                number = 15<br/>            else:<br/>                number = int(number) <br/>            val += number * base ** power<br/>            power += 1              <br/>    return val</span></pre><h2 id="ee81" class="jy jz hi bd ka kb kc kd ke kf kg kh ki jm kj kk kl jq km kn ko ju kp kq kr ks bi translated">到此(“已清理”)</h2><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="1f78" class="jy jz hi ky b fi lc ld l le lf">def base_n_to_dec(numb_in_str,base):<br/>    numb_in_str = numb_in_str.upper()<br/>    dec_eq = [<br/>        "0","1","2","3","4","5","6","7",<br/>        "8","9","A","B","C","D","E","F"<br/>    ]<br/>    sum = 0<br/>    for index in range(len(numb_in_str)):<br/>        digit = dec_eq.index(numb_in_str[index])<br/>        power = (len(numb_in_str)-index-1)<br/>        sum +=  digit * (base ** power)<br/>    return sum</span></pre><p id="ed61" class="pw-post-body-paragraph jb jc hi jd b je lg jg jh ji lh jk jl jm li jo jp jq lj js jt ju lk jw jx ja hb bi translated">这段代码是我在大学第一年写的，我试图“清理”它。该代码尝试将基数为2–10和16的数字转换为基数为10的数字。在我的旧代码中，它做得很好。但是，两年后我很难理解。在我的“干净”版本代码中，我尝试扩展功能，将基数为2–16的数字转换为基数为10的数字，并增加代码的可读性。</p></div><div class="ab cl ll lm gp ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="hb hc hd he hf"><h1 id="aaea" class="ls jz hi bd ka lt lu lv ke lw lx ly ki lz ma mb kl mc md me ko mf mg mh kr mi bi translated">创建“干净”代码时我所关心的事情</h1><h2 id="86a2" class="jy jz hi bd ka kb kc kd ke kf kg kh ki jm kj kk kl jq km kn ko ju kp kq kr ks bi translated">有意义的名字—</h2><p id="da89" class="pw-post-body-paragraph jb jc hi jd b je mj jg jh ji mk jk jl jm ml jo jp jq mm js jt ju mn jw jx ja hb bi translated">让我们看一个例子</p><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="cc7f" class="jy jz hi ky b fi lc ld l le lf">def x(a, b):<br/>    return a * b</span></pre><p id="6c6f" class="pw-post-body-paragraph jb jc hi jd b je lg jg jh ji lh jk jl jm li jo jp jq lj js jt ju lk jw jx ja hb bi translated">看了上面的代码之后，你知道代码试图做什么吗？我很确定你还是做对了。但是，是吗？</p><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="3976" class="jy jz hi ky b fi lc ld l le lf">def rectangle_area(length, width):<br/>    return length * width</span></pre><p id="7570" class="pw-post-body-paragraph jb jc hi jd b je lg jg jh ji lh jk jl jm li jo jp jq lj js jt ju lk jw jx ja hb bi translated">跨变量、方法甚至类创建有意义的名称有助于更容易理解代码。</p><h2 id="72b9" class="jy jz hi bd ka kb kc kd ke kf kg kh ki jm kj kk kl jq km kn ko ju kp kq kr ks bi translated">删除不明确的代码—</h2><p id="899e" class="pw-post-body-paragraph jb jc hi jd b je mj jg jh ji mk jk jl jm ml jo jp jq mm js jt ju mn jw jx ja hb bi translated">看一下这段代码</p><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="27c4" class="jy jz hi ky b fi lc ld l le lf">if dosen_type == 1:<br/>    #do something</span></pre><p id="195e" class="pw-post-body-paragraph jb jc hi jd b je lg jg jh ji lh jk jl jm li jo jp jq lj js jt ju lk jw jx ja hb bi translated">在代码上，我们不知道第一类是什么讲师。我们可以用下面的代码来改善这一点</p><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="1688" class="jy jz hi ky b fi lc ld l le lf">if dosen_type == DOSEN_KONTRAK:<br/>    #do something</span></pre><p id="2914" class="pw-post-body-paragraph jb jc hi jd b je lg jg jh ji lh jk jl jm li jo jp jq lj js jt ju lk jw jx ja hb bi translated">上面的代码试图将“1”保存到一个名为DOSEN_KONTRAK的变量中，这样我们可以更容易地阅读它。</p><h2 id="e669" class="jy jz hi bd ka kb kc kd ke kf kg kh ki jm kj kk kl jq km kn ko ju kp kq kr ks bi translated">如有必要，添加注释—</h2><p id="692d" class="pw-post-body-paragraph jb jc hi jd b je mj jg jh ji mk jk jl jm ml jo jp jq mm js jt ju mn jw jx ja hb bi translated">添加注释可以帮助您理解代码。但是，如果你的代码已经可读，有必要添加吗？</p><p id="c264" class="pw-post-body-paragraph jb jc hi jd b je lg jg jh ji lh jk jl jm li jo jp jq lj js jt ju lk jw jx ja hb bi translated">我们可以从“有意义的名字”一节举个例子</p><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="0048" class="jy jz hi ky b fi lc ld l le lf"># Compute area of a rectangle<br/>def rectangle_area(length, width):<br/>    return length * width</span></pre><p id="6018" class="pw-post-body-paragraph jb jc hi jd b je lg jg jh ji lh jk jl jm li jo jp jq lj js jt ju lk jw jx ja hb bi translated">上面例子中的函数已经很清楚了，所以<strong class="jd hj">我们不应该</strong>在上面添加更多的注释。</p><h2 id="29b4" class="jy jz hi bd ka kb kc kd ke kf kg kh ki jm kj kk kl jq km kn ko ju kp kq kr ks bi translated">使用编码标准—</h2><p id="6b47" class="pw-post-body-paragraph jb jc hi jd b je mj jg jh ji mk jk jl jm ml jo jp jq mm js jt ju mn jw jx ja hb bi translated">当我用一种新语言写代码时，我会直接去谷歌搜索，输入“T2的编码标准”。这有助于您在编写代码时保持一致。</p><p id="7ab4" class="pw-post-body-paragraph jb jc hi jd b je lg jg jh ji lh jk jl jm li jo jp jq lj js jt ju lk jw jx ja hb bi translated">你可以从<a class="ae mo" href="https://www.python.org/dev/peps/pep-0008/#:~:text=Use%20the%20function%20naming%20rules,invoke%20Python's%20name%20mangling%20rules." rel="noopener ugc nofollow" target="_blank"> PEP 8 python </a>获取示例编码标准</p><h2 id="3c09" class="jy jz hi bd ka kb kc kd ke kf kg kh ki jm kj kk kl jq km kn ko ju kp kq kr ks bi translated">减少冗余—</h2><p id="1875" class="pw-post-body-paragraph jb jc hi jd b je mj jg jh ji mk jk jl jm ml jo jp jq mm js jt ju mn jw jx ja hb bi translated">有时候，你需要多次做同样的事情。功能可能是你的生活救星。这里是我的PPL项目SISIDANG的一些代码片段。</p><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="ab96" class="jy jz hi ky b fi lc ld l le lf">ADMIN_CRED = ['admin', 'tes']<br/>MAHASISWA_CRED = ['mahasiswa', 'tes']<br/><br/>def login_helper(self, data):<br/>    username = data[0]<br/>    password = data[1]<br/>    session = self.client.session<br/>    session["kodeidentitas"] = kode_id<br/>    session.save()<br/><br/>def test_admin_can_access_generate_penilaian(self):<br/>    self.login_helper(self.ADMIN_CRED)<br/>    response = self.client.get("/generate-nilai/?pk={}".format(self.sidang.pk))<br/>    self.assertEqual(response.status_code, 200)<br/><br/>def test_mahasiswa_cant_access_generate_penilaian(self):<br/>    self.login_helper(self.MAHASISWA_CRED)<br/>    response = self.client.get("/generate-nilai/?pk={}".format(self.sidang.pk))<br/>    self.assertEqual(response.status_code, 302)</span></pre><p id="d06d" class="pw-post-body-paragraph jb jc hi jd b je lg jg jh ji lh jk jl jm li jo jp jq lj js jt ju lk jw jx ja hb bi translated">上面的代码是我在项目中做的单元测试的代码片段。正如你所看到的，我写的每个测试都需要登录到SISIDANG，所以我写了一个函数来帮助我(login_helper)</p><h2 id="5a26" class="jy jz hi bd ka kb kc kd ke kf kg kh ki jm kj kk kl jq km kn ko ju kp kq kr ks bi translated">删除未使用的代码—</h2><p id="f5ab" class="pw-post-body-paragraph jb jc hi jd b je mj jg jh ji mk jk jl jm ml jo jp jq mm js jt ju mn jw jx ja hb bi translated">我经常将我的代码作为注释，作为开发代码的备份。这种未使用的代码称为死代码，我将在生产环境(代码准备发布的环境)中删除它</p></div><div class="ab cl ll lm gp ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="hb hc hd he hf"><h1 id="3773" class="ls jz hi bd ka lt lu lv ke lw lx ly ki lz ma mb kl mc md me ko mf mg mh kr mi bi translated">通过保持代码整洁，我得到了什么</h1><h2 id="b1bf" class="jy jz hi bd ka kb kc kd ke kf kg kh ki jm kj kk kl jq km kn ko ju kp kq kr ks bi translated">首先—简单</h2><p id="ca75" class="pw-post-body-paragraph jb jc hi jd b je mj jg jh ji mk jk jl jm ml jo jp jq mm js jt ju mn jw jx ja hb bi translated">这有助于我阅读我过去的项目代码，也有助于其他人理解它。通过这样做，我在编写代码时变得更有效率，并产生高质量的代码</p><h2 id="cafb" class="jy jz hi bd ka kb kc kd ke kf kg kh ki jm kj kk kl jq km kn ko ju kp kq kr ks bi translated">第二，更容易找到Bug</h2><p id="4e86" class="pw-post-body-paragraph jb jc hi jd b je mj jg jh ji mk jk jl jm ml jo jp jq mm js jt ju mn jw jx ja hb bi translated">有了干净的代码，我的代码中出现的错误就显而易见了。帮助我摆脱那些bug，产生工作代码:)。它还帮助我创建单元测试来保持项目正常运行。</p><h2 id="4ef6" class="jy jz hi bd ka kb kc kd ke kf kg kh ki jm kj kk kl jq km kn ko ju kp kq kr ks bi translated"><strong class="ak">第三——成本节约</strong></h2><p id="4650" class="pw-post-body-paragraph jb jc hi jd b je mj jg jh ji mk jk jl jm ml jo jp jq mm js jt ju mn jw jx ja hb bi translated">正如我在第一点中提到的，我生产代码的效率变得更高了。在开发项目时，它节省了我的时间<em class="mp">(也节省了我买食物陪我编码的钱)</em></p></div><div class="ab cl ll lm gp ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="hb hc hd he hf"><h1 id="759c" class="ls jz hi bd ka lt lu lv ke lw lx ly ki lz ma mb kl mc md me ko mf mg mh kr mi bi translated">结论</h1><p id="0ac5" class="pw-post-body-paragraph jb jc hi jd b je mj jg jh ji mk jk jl jm ml jo jp jq mm js jt ju mn jw jx ja hb bi translated">干净的代码是软件工程师必须做的事情。这不是一件容易的事。需要练习来保持你的代码干净。通过编写干净的代码，您将节省时间并更容易开发项目。</p></div><div class="ab cl ll lm gp ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="hb hc hd he hf"><h1 id="975a" class="ls jz hi bd ka lt lu lv ke lw lx ly ki lz ma mb kl mc md me ko mf mg mh kr mi bi translated">参考:</h1><ol class=""><li id="a1f6" class="mq mr hi jd b je mj ji mk jm ms jq mt ju mu ja mv mw mx my bi translated"><a class="ae mo" href="https://dzone.com/articles/clean-code-explanation-benefits-amp-examples#:~:text=By%20building%20clean%20code%2C%20automated,the%20number%20of%20software%20defects" rel="noopener ugc nofollow" target="_blank">https://dzone . com/articles/clean-code-explain-benefits-amp-examples #:~:text = By % 20 building % 20 clean % 20 code % 2C % 20 automated，the % 20 number % 20 of % 20 software % 20 defects</a>。</li></ol></div></div>    
</body>
</html>