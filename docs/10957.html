<html>
<head>
<title>Generate Bitcoin Wallet Address using Bitcoin Improvement Proposal 44</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用比特币改进提案生成比特币钱包地址44</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/generate-bitcoin-wallet-address-using-bitcoin-improvement-proposal-44-4672e5057bb?source=collection_archive---------1-----------------------#2022-02-24">https://medium.com/geekculture/generate-bitcoin-wallet-address-using-bitcoin-improvement-proposal-44-4672e5057bb?source=collection_archive---------1-----------------------#2022-02-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/f90c84dcc5ed8f5035e87b63d6b4a753.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vFToc5m9q74LA-nrHp0B6w.jpeg"/></div></div></figure><p id="4e3a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">比特币改进提案44 </strong>或<strong class="is hj"> BIP-44 </strong>基于BIP-32中描述的算法和BIP-43中描述的目的方案定义了确定性钱包的逻辑层次。</p><p id="534c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将通过用python实现一个多账户分层确定性钱包地址来学习BIP-32、BIP-39和BIP-44的应用。让我们不要再多费周折了，开始吧。</p><p id="5682" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">本文的源代码可以在我的github repo上找到。</p><div class="jo jp ez fb jq jr"><a href="https://github.com/tionx3na/BIP_implementations" rel="noopener  ugc nofollow" target="_blank"><div class="js ab dw"><div class="jt ab ju cl cj jv"><h2 class="bd hj fi z dy jw ea eb jx ed ef hh bi translated">GitHub-tion x3na/BIP _实现:各种比特币改进的Python实现…</h2><div class="jy l"><p class="bd b fp z dy jw ea eb jx ed ef dx translated">github.com</p></div></div><div class="jz l"><div class="ka l kb kc kd jz ke io jr"/></div></div></a></div><h1 id="9198" class="kf kg hi bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">记忆生成</h1><p id="91fa" class="pw-post-body-paragraph iq ir hi is b it ld iv iw ix le iz ja jb lf jd je jf lg jh ji jj lh jl jm jn hb bi translated">我们将遵循比特币改进提案39中的程序来生成助记符。如果你不知道它背后的理论，请阅读我关于BIP-39的文章。</p><div class="jo jp ez fb jq jr"><a rel="noopener follow" target="_blank" href="/geekculture/what-is-bitcoin-improvement-proposal-39-bip-39-9a95ed07cb03"><div class="js ab dw"><div class="jt ab ju cl cj jv"><h2 class="bd hj fi z dy jw ea eb jx ed ef hh bi translated">什么是比特币改进提案39 (BIP-39)？</h2><div class="li l"><h3 class="bd b fi z dy jw ea eb jx ed ef dx translated">比特币改进提案或BIP是一个设计文件，为比特币社区提供信息或描述一个…</h3></div><div class="jy l"><p class="bd b fp z dy jw ea eb jx ed ef dx translated">medium.com</p></div></div><div class="jz l"><div class="lj l kb kc kd jz ke io jr"/></div></div></a></div><p id="e1f4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在助记符生成部分，我们的目标是将熵转化为助记符。</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div class="er es lk"><img src="../Images/5b7bfd330d7101d83bad22344334c65f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*WYE9-djqptacXwmqbPW7gA.png"/></div><figcaption class="lp lq et er es lr ls bd b be z dx">Generating Entropy</figcaption></figure><p id="f93b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这里，我们定义熵的长度为<strong class="is hj"> 256 </strong>。根据BIP-39，它可以从128到256，但应该是32的倍数。我们使用操作系统库的“urandom”函数生成了<strong class="is hj">熵</strong>,并将其转换为十六进制和二进制，以便将来操作。</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lt"><img src="../Images/e6a7f10000da70cb767972e8559bdaee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bhv21hweQIjUfJDIaGPi6Q.png"/></div></div><figcaption class="lp lq et er es lr ls bd b be z dx">Appending checksum to entropy</figcaption></figure><p id="d51d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将熵的hash256的前<strong class="is hj"> ENT / 32 </strong>位作为<strong class="is hj">校验和</strong>并将其附加到初始熵上。</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lu"><img src="../Images/5f55f9b09e342027118f83d54b646384.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Fzsb7hdL0j4d8cFBganbxg.png"/></div></div><figcaption class="lp lq et er es lr ls bd b be z dx">Converting Entropy to Mnemonic Phrase</figcaption></figure><p id="0ccb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，我们将手头的最终熵转化为助记短语，这要借助下面链接中的标准化单词表。为了兼容性，请使用此单词表。</p><div class="jo jp ez fb jq jr"><a href="https://github.com/bitcoin/bips/blob/master/bip-0039/english.txt" rel="noopener  ugc nofollow" target="_blank"><div class="js ab dw"><div class="jt ab ju cl cj jv"><h2 class="bd hj fi z dy jw ea eb jx ed ef hh bi translated">比特币大师bips/english.txt</h2><div class="li l"><h3 class="bd b fi z dy jw ea eb jx ed ef dx translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="jy l"><p class="bd b fp z dy jw ea eb jx ed ef dx translated">github.com</p></div></div><div class="jz l"><div class="lv l kb kc kd jz ke io jr"/></div></div></a></div><p id="ed65" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将单词列表中的每个单词存储到一个列表中。然后，我们将最终熵分成11位组，每组11位，每组编码一个从0到20147的索引号。然后，我们将与索引相对应的单词组合成一个短语，得到我们最终的<strong class="is hj">助记短语。</strong></p><h1 id="148a" class="kf kg hi bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">Seed助记符</h1><p id="92b9" class="pw-post-body-paragraph iq ir hi is b it ld iv iw ix le iz ja jb lf jd je jf lg jh ji jj lh jl jm jn hb bi translated">为了从助记符创建二进制种子，我们使用<strong class="is hj"> PBKDF2函数</strong>，其中一个助记符句子(在UTF-8 NFKD中)用作密码，字符串<strong class="is hj">“助记符”+密码短语</strong>(同样在UTF-8 NFKD中)用作<strong class="is hj"> salt </strong>。</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lw"><img src="../Images/b82b7a2f94ad4ec0c2b0b556f17f7cff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2v1EPrQff8OtSJkbl6BkFQ.png"/></div></div></figure><p id="1712" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">迭代计数被设置为<strong class="is hj"> 2048 </strong>并且<strong class="is hj"> HMAC-SHA512 </strong>被用作伪随机函数。用户可以提供一个密码，如果没有，则留空。</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lx"><img src="../Images/c4443a82bfc45149b0698be0b189dc97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4AWIu_zCF8tYk6G0lTE-oQ.png"/></div></div><figcaption class="lp lq et er es lr ls bd b be z dx">Output</figcaption></figure><p id="cac3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">正如你所看到的，我们得到了一个助记短语及其对应的种子。您可以在下面的链接中检查种子和生成的助记符是否符合BIP-39。</p><div class="jo jp ez fb jq jr"><a href="https://iancoleman.io/bip39/" rel="noopener  ugc nofollow" target="_blank"><div class="js ab dw"><div class="jt ab ju cl cj jv"><h2 class="bd hj fi z dy jw ea eb jx ed ef hh bi translated">BIP39 -助记码</h2><div class="li l"><h3 class="bd b fi z dy jw ea eb jx ed ef dx translated">阅读更多BIP39官方规范阅读更多BIP32官方规范查看BIP32演示阅读更多…</h3></div><div class="jy l"><p class="bd b fp z dy jw ea eb jx ed ef dx translated">iancoleman.io</p></div></div></div></a></div><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ly"><img src="../Images/ecf5fa37e7c6393af9a82b7153490194.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eGpHIL2XQkUgoHbr876e6w.png"/></div></div><figcaption class="lp lq et er es lr ls bd b be z dx">bip-39 menmonic and bip-39 seed</figcaption></figure><p id="a76e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如您所见，我们生成的助记短语和种子都符合BIP-39标准。</p><h1 id="b44c" class="kf kg hi bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">BIP-32密钥派生</h1><p id="f375" class="pw-post-body-paragraph iq ir hi is b it ld iv iw ix le iz ja jb lf jd je jf lg jh ji jj lh jl jm jn hb bi translated">BIP-32描述了分级确定性钱包(或“HD钱包”):可以与不同系统部分或全部共享的钱包，每个系统都有或没有花硬币的能力。要了解更多关于BIP-32的信息，请阅读我的相关文章。</p><div class="jo jp ez fb jq jr"><a rel="noopener follow" target="_blank" href="/geekculture/what-is-bitcoin-improvement-proposal-32-bip-32-586a3f36a95c"><div class="js ab dw"><div class="jt ab ju cl cj jv"><h2 class="bd hj fi z dy jw ea eb jx ed ef hh bi translated">什么是比特币改进提案32 (BIP-32)？</h2><div class="li l"><h3 class="bd b fi z dy jw ea eb jx ed ef dx translated">比特币改进提案-32或BIP-32是一种信息BIP，描述了等级确定性…</h3></div><div class="jy l"><p class="bd b fp z dy jw ea eb jx ed ef dx translated">medium.com</p></div></div><div class="jz l"><div class="lz l kb kc kd jz ke io jr"/></div></div></a></div><p id="722d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">对于主私钥生成，我们需要计算</p><blockquote class="ma mb mc"><p id="9673" class="iq ir md is b it iu iv iw ix iy iz ja me jc jd je mf jg jh ji mg jk jl jm jn hb bi translated">I = HMAC-SHA512(Key = "比特币种子"，Data = S)</p></blockquote><p id="b231" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">根据BIP-32的说法，我们需要用密钥<strong class="is hj">“比特币种子”</strong>获取BIP-39种子的sha512摘要。</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mh"><img src="../Images/403d1d55ca09758494b73ae90543e6ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JP9clBZJdywSpJyEKuGxeA.png"/></div></div><figcaption class="lp lq et er es lr ls bd b be z dx">BIP-39 seed to I, Ir and Il</figcaption></figure><p id="5809" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将摘要<strong class="is hj">【我】</strong>拆分成<strong class="is hj">【伊尔】</strong>和<strong class="is hj">【伊尔】</strong>，两者都是32字节。Il给出了<strong class="is hj">密钥</strong>，而Ir给出了<strong class="is hj">链码</strong>。</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mi"><img src="../Images/4903776ea071bae1fe39b4976bc364d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FAs58IBwFHuAmT5O30-b9A.png"/></div></div><figcaption class="lp lq et er es lr ls bd b be z dx">xprv, xpub, depth, fpr and index</figcaption></figure><p id="dee1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为了序列化<strong class="is hj">扩展私钥(xprv) </strong>和<strong class="is hj">扩展公钥(xpub) </strong>，我们使用BIP-32序列化格式中描述的标准化。</p><blockquote class="ma mb mc"><p id="e649" class="iq ir md is b it iu iv iw ix iy iz ja me jc jd je mf jg jh ji mg jk jl jm jn hb bi translated"><strong class="is hj"> Mainnet </strong> : 0x0488B21E公有，0x0488ADE4私有用于<strong class="is hj">比特币</strong></p><p id="76c3" class="iq ir md is b it iu iv iw ix iy iz ja me jc jd je mf jg jh ji mg jk jl jm jn hb bi translated"><strong class="is hj">深度</strong>:主节点0x00</p><p id="af65" class="iq ir md is b it iu iv iw ix iy iz ja me jc jd je mf jg jh ji mg jk jl jm jn hb bi translated"><strong class="is hj">父密钥的指纹</strong> t(如果是主密钥，则为0x00000000)</p></blockquote><p id="13e6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">struct.pack()中的<strong class="is hj"> " &gt; L" </strong>意味着我们以Big Endian格式存储孩子。</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div class="er es mj"><img src="../Images/be3ac706f7df30c828b5211798239a15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1372/format:webp/1*nbzIGiSRZZN9Hqzk2x-IMw.png"/></div><figcaption class="lp lq et er es lr ls bd b be z dx">parse256(secret)</figcaption></figure><p id="7364" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们通过向<strong class="is hj"> SECP256k1 </strong>曲线提供我们的秘密密钥来创建<strong class="is hj">签名密钥</strong>。这在BIP-32中被定义为<strong class="is hj"> parse256(p) </strong>，它将一个32字节的序列解释为一个256位数，最高有效字节优先。</p><p id="9279" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">根据BIP-32的序列号，</p><blockquote class="ma mb mc"><p id="fb89" class="iq ir md is b it iu iv iw ix iy iz ja me jc jd je mf jg jh ji mg jk jl jm jn hb bi translated">公钥或私钥数据(<strong class="is hj"> serP(K) </strong>为公钥，0x00 || <strong class="is hj"> ser256(k) </strong>为私钥)</p></blockquote><p id="7729" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">因此，我们必须将0x00连接到ser256(签名密钥)。</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mk"><img src="../Images/32dea5edc601cfb70422fa0f991f4867.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XSkWKNVs01CaJpq7vbSsGQ.png"/></div></div></figure><p id="aee3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">对于公钥生成，BIP-39定义了一个约定，<strong class="is hj"> serP(P) </strong>，其中<strong class="is hj"> </strong>使用SEC1的压缩形式将坐标对P = (x，y)序列化为字节序列:<strong class="is hj"> (0x02或0x03) || ser256(x) </strong>，其中头字节取决于省略的y坐标的奇偶性。</p><p id="ed71" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后，我们计算原始私钥和公钥。</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div class="er es ml"><img src="../Images/0fdc1ca9b13ab311bde4aee779c0bc48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1246/format:webp/1*SyvBwC44fxnXOmmNRpGrpg.png"/></div><figcaption class="lp lq et er es lr ls bd b be z dx">Generating Master Private Key and Public Key</figcaption></figure><p id="b282" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们通过采用<strong class="is hj">双sha256散列</strong>并将<strong class="is hj">的前4个字节</strong>附加到相应的密钥来找到私钥和公钥的校验和。然后，我们将原始的私有和公共密钥编码为<strong class="is hj"> base 58 </strong>，这是比特币网络中使用的密钥的兼容版本。</p><h2 id="74e6" class="mm kg hi bd kh mn mo mp kl mq mr ms kp jb mt mu kt jf mv mw kx jj mx my lb mz bi translated">输出</h2><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es na"><img src="../Images/1b2fb5ad319ca1bdef3650125746fe86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cSIMnSc6bq-DV8Ud4tW0lg.png"/></div></div></figure><p id="355e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们生成了我们的<strong class="is hj">扩展私有根密钥</strong>以及扩展的<strong class="is hj">公共根密钥</strong>。我们可以在iancoleman.io上查看它的兼容性。</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nb"><img src="../Images/4f2e4b980a73c1b7cac2199702774f20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mRsMW_itLsB3Z_CsN61bAw.png"/></div></div><figcaption class="lp lq et er es lr ls bd b be z dx">compatibility check</figcaption></figure><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/cfc25a14c56391858bfc72d0037e6e71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*puwBQ1q8wt1SzFWCvcV5FA.png"/></div></div><figcaption class="lp lq et er es lr ls bd b be z dx">Extended Keys Compatibility Check</figcaption></figure><h1 id="d26a" class="kf kg hi bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">BIP-44地址生成</h1><p id="de56" class="pw-post-body-paragraph iq ir hi is b it ld iv iw ix le iz ja jb lf jd je jf lg jh ji jj lh jl jm jn hb bi translated">BIP-44基于BIP-0032中描述的算法和BIP-0043中描述的目的方案为确定性钱包定义了一个<strong class="is hj">逻辑层次。</strong></p><p id="1804" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">更多关于BIP-44的信息，</p><div class="jo jp ez fb jq jr"><a href="https://github.com/bitcoin/bips/blob/master/bip-0044.mediawiki" rel="noopener  ugc nofollow" target="_blank"><div class="js ab dw"><div class="jt ab ju cl cj jv"><h2 class="bd hj fi z dy jw ea eb jx ed ef hh bi translated">bips/bip-0044 . mediawiki at master bit coin/bips</h2><div class="li l"><h3 class="bd b fi z dy jw ea eb jx ed ef dx translated">BIP: 44层:应用程序标题:确定性钱包的多帐户层次结构作者:马雷克·帕拉蒂纳斯·帕沃尔…</h3></div><div class="jy l"><p class="bd b fp z dy jw ea eb jx ed ef dx translated">github.co</p></div></div><div class="jz l"><div class="nc l kb kc kd jz ke io jr"/></div></div></a></div><p id="45a8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">BIP-44在BIP32路径中定义了以下5个级别:</p><pre class="ll lm ln lo fd nd ne nf ng aw nh bi"><span id="35bb" class="mm kg hi ne b fi ni nj l nk nl">m / purpose' / coin_type' / account' / change / address_index</span></pre><p id="acb1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">路径中的撇号表示使用了BIP32 <strong class="is hj">硬化派生</strong>。查看BIP-32文章，了解更多关于硬化衍生的内容。</p><h2 id="339b" class="mm kg hi bd kh mn mo mp kl mq mr ms kp jb mt mu kt jf mv mw kx jj mx my lb mz bi translated">目的</h2><p id="3cda" class="pw-post-body-paragraph iq ir hi is b it ld iv iw ix le iz ja jb lf jd je jf lg jh ji jj lh jl jm jn hb bi translated">目的是遵循BIP43建议设置为<strong class="is hj">44’(或0x8000002C) </strong>的常量。<strong class="is hj">在这个级别使用硬化派生。</strong></p><h2 id="1a43" class="mm kg hi bd kh mn mo mp kl mq mr ms kp jb mt mu kt jf mv mw kx jj mx my lb mz bi translated">硬币类型</h2><p id="340f" class="pw-post-body-paragraph iq ir hi is b it ld iv iw ix le iz ja jb lf jd je jf lg jh ji jj lh jl jm jn hb bi translated">硬币类型是一个常数，为每个加密硬币设置。在这一级使用了强化派生。对于比特币，币别为0。你可以在这里看到其他硬币的注册硬币类型。<strong class="is hj">在这个级别使用硬化派生。</strong></p><div class="jo jp ez fb jq jr"><a href="https://github.com/satoshilabs/slips/blob/master/slip-0044.md" rel="noopener  ugc nofollow" target="_blank"><div class="js ab dw"><div class="jt ab ju cl cj jv"><h2 class="bd hj fi z dy jw ea eb jx ed ef hh bi translated">master satoshilabs的slips/slips-0044 . MD</h2><div class="li l"><h3 class="bd b fi z dy jw ea eb jx ed ef dx translated">编号:SLIP-0044标题:BIP注册硬币类型-0044类型:标准状态:活跃作者:Pavol Rusnak Marek…</h3></div><div class="jy l"><p class="bd b fp z dy jw ea eb jx ed ef dx translated">github.com</p></div></div><div class="jz l"><div class="nm l kb kc kd jz ke io jr"/></div></div></a></div><h2 id="9ca9" class="mm kg hi bd kh mn mo mp kl mq mr ms kp jb mt mu kt jf mv mw kx jj mx my lb mz bi translated">账户</h2><p id="c3be" class="pw-post-body-paragraph iq ir hi is b it ld iv iw ix le iz ja jb lf jd je jf lg jh ji jj lh jl jm jn hb bi translated">这个级别将密钥空间分割成独立的用户身份，因此钱包不会将不同账户的硬币混在一起。帐户从索引0开始按顺序递增的方式编号。该数字用作BIP32派生中的子索引。<strong class="is hj">这一级用的是硬化衍生。</strong></p><h2 id="b0b8" class="mm kg hi bd kh mn mo mp kl mq mr ms kp jb mt mu kt jf mv mw kx jj mx my lb mz bi translated">变化</h2><p id="2fd4" class="pw-post-body-paragraph iq ir hi is b it ld iv iw ix le iz ja jb lf jd je jf lg jh ji jj lh jl jm jn hb bi translated">常数0用于外部链，常数1用于内部链(也称为更改地址)。外部链用于在钱包外部可见的地址(例如，用于接收付款)。内部链用于在钱包外不可见的地址，并用于退货交易变更。<strong class="is hj">公共派生在这一级使用。</strong></p><h2 id="248a" class="mm kg hi bd kh mn mo mp kl mq mr ms kp jb mt mu kt jf mv mw kx jj mx my lb mz bi translated">索引</h2><p id="1381" class="pw-post-body-paragraph iq ir hi is b it ld iv iw ix le iz ja jb lf jd je jf lg jh ji jj lh jl jm jn hb bi translated">地址从索引0开始按顺序递增的方式编号。该数字用作BIP32派生中的子索引。<strong class="is hj">公共派生在这一级使用。</strong></p><blockquote class="ma mb mc"><p id="7dd6" class="iq ir md is b it iu iv iw ix iy iz ja me jc jd je mf jg jh ji mg jk jl jm jn hb bi translated">我们将在另一篇文章中从头开始实现BIP-32算法。现在，我们将使用pypi中可用的bip32 python包。</p></blockquote><div class="jo jp ez fb jq jr"><a href="https://pypi.org/project/bip32/" rel="noopener  ugc nofollow" target="_blank"><div class="js ab dw"><div class="jt ab ju cl cj jv"><h2 class="bd hj fi z dy jw ea eb jx ed ef hh bi translated">bip32</h2><div class="li l"><h3 class="bd b fi z dy jw ea eb jx ed ef dx translated">bip-0032的基本实现。&gt;&gt;&gt;从bip32导入BIP32，HARDENED_INDEX &gt;&gt;&gt; bip32 = BIP32。来自种子(…</h3></div><div class="jy l"><p class="bd b fp z dy jw ea eb jx ed ef dx translated">pypi.org</p></div></div><div class="jz l"><div class="nn l kb kc kd jz ke io jr"/></div></div></a></div><p id="d960" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在上一节中，我们导出了帐户扩展的私有和公共根密钥。现在我们必须生成bip32扩展密钥。</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div class="er es no"><img src="../Images/edb9047f82996051a1be8521e76952e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1312/format:webp/1*SYr32NNBKx1JdenH0YM-Gw.png"/></div><figcaption class="lp lq et er es lr ls bd b be z dx">Generating BIP-32 extended private and public keys.</figcaption></figure><p id="4a3f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们向BIP32类中的函数<em class="md"> from_xpriv() </em>提供帐户私有根密钥。如果你在包中检查这个函数的代码，你可以看到这个函数提取像网络，深度，指纹，链码等信息。从扩展根密钥创建一个BIP32钱包。</p><p id="018e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后，我们通过提供BIP-32路径，<strong class="is hj"> m/44h/0h/0h/0 </strong>来生成BIP-32扩展公钥和私钥，其中<em class="md"> h </em>代表硬化密钥。</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div class="er es np"><img src="../Images/0db5cda7b59fff1d64de1920189578ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/1*JcZ_0T3uHVhhvaRtF2CgvQ.png"/></div><figcaption class="lp lq et er es lr ls bd b be z dx">Generating BIP-44 Bitcoin Address.</figcaption></figure><p id="4029" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要生成地址，我们需要从BIP-32扩展私钥中导出私钥，然后从私钥中导出公钥。</p><p id="b07b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要将这个公钥转换成比特币地址，首先我们需要对公钥执行sha-256哈希，然后对<strong class="is hj"> SHA-256 </strong>的结果执行ripemd-160哈希。版本字节加在<strong class="is hj"> RIPEMD-160 hash </strong>(主网0x00)前面。</p><p id="77e9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后，我们使用base58encode将ripemd160结果编码为比特币地址。点击此处查看有关base58编码的更多信息。</p><div class="jo jp ez fb jq jr"><a href="https://en.bitcoin.it/wiki/Base58Check_encoding" rel="noopener  ugc nofollow" target="_blank"><div class="js ab dw"><div class="jt ab ju cl cj jv"><h2 class="bd hj fi z dy jw ea eb jx ed ef hh bi translated">Base58Check检查编码</h2><div class="li l"><h3 class="bd b fi z dy jw ea eb jx ed ef dx translated">一种改进的Base 58二进制到文本编码被称为Base58Check，用于编码比特币地址。更多…</h3></div><div class="jy l"><p class="bd b fp z dy jw ea eb jx ed ef dx translated">en .比特币. it</p></div></div></div></a></div><p id="9549" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">简而言之，base58编码对之前的结果执行另一个sha256两次，并获取第二个SHA-256哈希的前4个字节，将其添加到我们之前计算的扩展RIPEMD-160结果的末尾。</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ly"><img src="../Images/bfe2cfdccf7f712b93088f958608c21e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H8SkMaUjDxjc3F9jtURVtw.png"/></div></div><figcaption class="lp lq et er es lr ls bd b be z dx">Bitcoin address and extended keys.</figcaption></figure><p id="6a8c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，我们可以检查我们的输出是否正确。</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nq"><img src="../Images/7294246f230af02dac8c0dea6f17002c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*svur7jXpedptjlrG-WYUYw.png"/></div></div><figcaption class="lp lq et er es lr ls bd b be z dx">BIP32 Root Key</figcaption></figure><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nr"><img src="../Images/cf46a30487f8993eccba42500d31808f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_x4IWdMszeuhkWVcStXWzA.png"/></div></div><figcaption class="lp lq et er es lr ls bd b be z dx">BIP32 Extended Keys</figcaption></figure><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ns"><img src="../Images/9a0a7ff4b715b2de8d86de55892962de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z__Rv0laMMQrpIJZqGLjhg.png"/></div></div><figcaption class="lp lq et er es lr ls bd b be z dx">Bitcoin Address</figcaption></figure><p id="dfb2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">正如我们所看到的，我们生成的地址和扩展密钥是正确且兼容的。</p><h1 id="7b3c" class="kf kg hi bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">结论</h1><p id="a224" class="pw-post-body-paragraph iq ir hi is b it ld iv iw ix le iz ja jb lf jd je jf lg jh ji jj lh jl jm jn hb bi translated">注意，我们的比特币地址以一个<strong class="is hj">‘1’</strong>开头。这意味着我们的比特币地址是一个<strong class="is hj">遗留地址。2009年比特币推出时，这是创建地址的唯一方式。现在还有其他的地址格式，比如<strong class="is hj"> segwit </strong>和<strong class="is hj"> native segwit。我们将在下一篇文章中看到如何对这些地址进行编码。</strong></strong></p><h1 id="6cad" class="kf kg hi bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">参考</h1><div class="jo jp ez fb jq jr"><a href="https://github.com/bitcoin/bips" rel="noopener  ugc nofollow" target="_blank"><div class="js ab dw"><div class="jt ab ju cl cj jv"><h2 class="bd hj fi z dy jw ea eb jx ed ef hh bi translated">GitHub -比特币/bips:比特币改进建议</h2><div class="li l"><h3 class="bd b fi z dy jw ea eb jx ed ef dx translated">希望提交bip的人，首先应该将他们的想法或文档提交到bit coin-dev @ lists . Linux foundation . org…</h3></div><div class="jy l"><p class="bd b fp z dy jw ea eb jx ed ef dx translated">github.com</p></div></div><div class="jz l"><div class="nt l kb kc kd jz ke io jr"/></div></div></a></div><blockquote class="nu"><p id="d016" class="nv nw hi bd nx ny nz oa ob oc od jn dx translated">加入Coinmonks <a class="ae oe" href="https://t.me/coincodecap" rel="noopener ugc nofollow" target="_blank">电报频道</a>和<a class="ae oe" href="https://www.youtube.com/c/coinmonks/videos" rel="noopener ugc nofollow" target="_blank"> Youtube频道</a>了解加密交易和投资</p></blockquote><h1 id="b356" class="kf kg hi bd kh ki kj kk kl km kn ko kp kq of ks kt ku og kw kx ky oh la lb lc bi translated">另外，阅读</h1><ul class=""><li id="8d7d" class="oi oj hi is b it ld ix le jb ok jf ol jj om jn on oo op oq bi translated"><a class="ae oe" href="https://coincodecap.com/crypto-trading-terminals" rel="noopener ugc nofollow" target="_blank"> 5款最佳加密交易终端</a> | <a class="ae oe" href="https://coincodecap.com/best-defi-apps" rel="noopener ugc nofollow" target="_blank">最佳DeFi应用</a></li><li id="370c" class="oi oj hi is b it or ix os jb ot jf ou jj ov jn on oo op oq bi translated"><a class="ae oe" href="https://coincodecap.com/coinbase-vs-wazirx" rel="noopener ugc nofollow" target="_blank">比特币基地vs瓦济克斯</a> | <a class="ae oe" href="https://coincodecap.com/bitrue-review" rel="noopener ugc nofollow" target="_blank">比特鲁点评</a> | <a class="ae oe" href="https://coincodecap.com/poloniex-vs-bittrex" rel="noopener ugc nofollow" target="_blank">波洛涅克斯vs比特鲁</a></li><li id="10cd" class="oi oj hi is b it or ix os jb ot jf ou jj ov jn on oo op oq bi translated"><a class="ae oe" href="https://coincodecap.com/crypto-exchanges-in-germany" rel="noopener ugc nofollow" target="_blank">德国最佳加密交易所</a> | <a class="ae oe" href="https://coincodecap.com/arbitrum" rel="noopener ugc nofollow" target="_blank"> Arbitrum:第二层解决方案</a></li><li id="936e" class="oi oj hi is b it or ix os jb ot jf ou jj ov jn on oo op oq bi translated"><a class="ae oe" rel="noopener" href="/coinmonks/binance-trading-bots-d0d57bb62c4c">币安交易机器人</a> | <a class="ae oe" rel="noopener" href="/coinmonks/okex-review-6b369304110f"> OKEx评论</a> | <a class="ae oe" href="https://coincodecap.com/atani-review" rel="noopener ugc nofollow" target="_blank"> Atani评论</a></li><li id="f638" class="oi oj hi is b it or ix os jb ot jf ou jj ov jn on oo op oq bi translated"><a class="ae oe" rel="noopener" href="/coinmonks/best-crypto-signals-telegram-5785cdbc4b2b">最佳加密交易信号电报</a> | <a class="ae oe" rel="noopener" href="/coinmonks/moonxbt-review-6e4ab26d037"> MoonXBT评论</a></li><li id="e7fd" class="oi oj hi is b it or ix os jb ot jf ou jj ov jn on oo op oq bi translated"><a class="ae oe" href="https://coincodecap.com/buy-shiba-bitbns" rel="noopener ugc nofollow" target="_blank">如何在Bitbns上购买柴犬(SHIB)币？</a> | <a class="ae oe" href="https://coincodecap.com/buy-floki-inu-token" rel="noopener ugc nofollow" target="_blank">买弗洛基</a></li><li id="d3d6" class="oi oj hi is b it or ix os jb ot jf ou jj ov jn on oo op oq bi translated"><a class="ae oe" href="https://coincodecap.com/coinflex-review" rel="noopener ugc nofollow" target="_blank"> CoinFLEX评论</a> | <a class="ae oe" href="https://coincodecap.com/aex-exchange-review" rel="noopener ugc nofollow" target="_blank"> AEX交易所评论</a> | <a class="ae oe" href="https://coincodecap.com/upbit-review" rel="noopener ugc nofollow" target="_blank"> UPbit评论</a></li><li id="4c8d" class="oi oj hi is b it or ix os jb ot jf ou jj ov jn on oo op oq bi translated"><a class="ae oe" href="https://coincodecap.com/best-cryptocurrency-blogs" rel="noopener ugc nofollow" target="_blank">十大最佳加密货币博客</a> | <a class="ae oe" href="https://coincodecap.com/youhodler-review" rel="noopener ugc nofollow" target="_blank"> YouHodler评论</a></li></ul></div></div>    
</body>
</html>