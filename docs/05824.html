<html>
<head>
<title>Headless WooCommerce &amp; Next.js: Set up styled-components with TypeScript and Next.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Headless WooCommerce &amp; Next.js:用TypeScript和Next.js设置样式化组件</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/headless-woocommerce-next-js-set-up-styled-components-with-typescript-and-next-js-18cc047ccd79?source=collection_archive---------3-----------------------#2021-07-31">https://medium.com/geekculture/headless-woocommerce-next-js-set-up-styled-components-with-typescript-and-next-js-18cc047ccd79?source=collection_archive---------3-----------------------#2021-07-31</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/8c489516ff3400148784e676c1b8a075.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0qcztuA1ZBHhoK7G"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Photo by <a class="ae iu" href="https://unsplash.com/@marcus_ganahl?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Marcus Ganahl</a> on <a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="6d86" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这真的应该比我认为的要容易！我喜欢使用样式化组件，为了让它与Next.js和TypeScript配合得更好，您需要配置一些东西。我认为有一篇文章专门介绍这种流行组合的正确设置会很有用。</p><h1 id="3a0f" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">安装依赖项</h1><p id="43a7" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">如果你使用的是JavaScript，那么常规的依赖就可以了，但是如果你使用的是TypeScript，那么你还需要安装类型来避免错误(取决于你有多严格)。</p><p id="0f77" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">依赖关系:</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="af6c" class="lf ju hi lb b fi lg lh l li lj">yarn add styled-components</span></pre><p id="0ba3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">devDependencies:</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="5b41" class="lf ju hi lb b fi lg lh l li lj">yarn add babel-plugin-styled-components --dev<br/>yarn add @types/styled-components --dev</span></pre><h1 id="6fa9" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">巴比伦式的城市</h1><p id="7179" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated"><a class="ae iu" href="https://styled-components.com/docs/advanced#server-side-rendering" rel="noopener ugc nofollow" target="_blank"> styled-components支持带有样式表再水合的并发服务器端呈现</a>，这很重要，因为Next.js使用服务器端呈现。为了可靠地工作，你需要使用样式组件的巴别塔插件；因此将其添加为开发依赖项。添加后，您需要在根文件夹中创建一个名为<code class="du lk ll lm lb b">.babelrc</code>的新文件，配置如下:</p><figure class="kw kx ky kz fd ij"><div class="bz dy l di"><div class="ln lo l"/></div></figure><h1 id="97ef" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">自定义“文档”和谷歌字体</h1><p id="4418" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">我们需要添加一个自定义的<code class="du lk ll lm lb b">/pages/_document.tsx</code>，然后使用样式化组件的逻辑将服务器端呈现的样式注入到<code class="du lk ll lm lb b">&lt;head&gt;</code>中。styled-components <a class="ae iu" href="https://github.com/vercel/next.js/tree/master/examples/with-styled-components" rel="noopener ugc nofollow" target="_blank">有一个例子</a>你可以跟随，但是它并不适合TypeScript。</p><p id="9b6f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然而，在我向你展示我的定制<code class="du lk ll lm lb b">_document.tsx</code>文件之前，我想掩盖一下我是如何扩展它的，这样我就可以一次性地展示这个文件。</p><p id="3120" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">再往前看一点，我知道我想包括谷歌字体和Next.js(从v10.2开始)已经内置了网页字体优化。我们需要做的就是在<code class="du lk ll lm lb b">&lt;head&gt;</code>中加入一个<code class="du lk ll lm lb b">&lt;link&gt;</code>。您可以使用自定义“文档”将字体添加到特定页面或整个应用程序中。考虑到这一点，我想扩展自定义的<code class="du lk ll lm lb b">_document.tsx</code>来包含这个特性。</p><p id="00e0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这里是我使用的自定义<code class="du lk ll lm lb b">_document.tsx</code>文件，包括<code class="du lk ll lm lb b">DocumentContext</code>和<code class="du lk ll lm lb b">DocumentInitialProps</code>类型。</p><figure class="kw kx ky kz fd ij"><div class="bz dy l di"><div class="ln lo l"/></div></figure><h1 id="4e8f" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">全局样式</h1><p id="acd8" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">老实说，我们已经准备好了，但我喜欢包含一个全局样式文件，它利用了<a class="ae iu" href="https://styled-components.com/docs/api#createglobalstyle" rel="noopener ugc nofollow" target="_blank">样式组件的帮助函数</a>，所以可以应用CSS重置或基本样式表之类的东西。我喜欢在根目录下创建一个<code class="du lk ll lm lb b">\styles</code>文件夹，并添加一个名为<code class="du lk ll lm lb b">globalStyles.ts</code>的文件。在这里你可以添加你想要全局应用的CSS(例如，从H1标签中移除边距)。</p><figure class="kw kx ky kz fd ij"><div class="bz dy l di"><div class="ln lo l"/></div></figure><p id="9e8c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">将这个组件放在<code class="du lk ll lm lb b">_app.tsx</code>中React树的顶部，当组件被“渲染”时，全局样式将被注入。</p><h1 id="847f" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">主题</h1><p id="5117" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">您可能希望您的项目有一个主题，而styled-components通过导出一个提供所有styled-components都可以访问的主题对象的<code class="du lk ll lm lb b">&lt;ThemeProvider&gt;</code>包装器组件，提供了<a class="ae iu" href="https://styled-components.com/docs/advanced#theming" rel="noopener ugc nofollow" target="_blank">完整的主题支持</a>。</p><p id="98f5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">有不同的方法来使用主题化支持，我在保存在<code class="du lk ll lm lb b">\styles</code>文件夹中的文件<code class="du lk ll lm lb b">theme.ts</code>中创建了一个主题对象。据我所知，您可以创建任何您喜欢的JSON对象，并且您将能够在您的样式化组件中访问这些属性。</p><figure class="kw kx ky kz fd ij"><div class="bz dy l di"><div class="ln lo l"/></div></figure><p id="c2dd" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，在<code class="du lk ll lm lb b">_app.tsx</code>中，我们需要用<code class="du lk ll lm lb b">&lt;ThemeProvider&gt;</code>包装我们的应用程序，并将主题传递给组件。</p><figure class="kw kx ky kz fd ij"><div class="bz dy l di"><div class="ln lo l"/></div></figure><p id="a42a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">从这里开始，我们可以在样式化组件中访问我们的主题对象。</p><h1 id="d663" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">使用主题</h1><p id="15ca" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">在一个快速演示中，我剥离了<code class="du lk ll lm lb b">index.tsx</code>文件中的默认样板代码，并删除了所有冗余的代码、导入和文件。我想做的就是使用从<code class="du lk ll lm lb b">&lt;ThemeProvider&gt;</code>中获得的主题对象显示一个样式化的H1标签。</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="3ae7" class="lf ju hi lb b fi lg lh l li lj">&lt;StyledH1&gt;Welcome to Next.js!&lt;/StyledH1&gt;</span></pre><p id="5a08" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然后<a class="ae iu" href="https://styled-components.com/docs/basics#define-styled-components-outside-of-the-render-method" rel="noopener ugc nofollow" target="_blank">在组件的渲染方法之外</a>我们定义了样式化组件。</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="eb92" class="lf ju hi lb b fi lg lh l li lj">const StyledH1 = styled.h1`</span><span id="9338" class="lf ju hi lb b fi lp lh l li lj">  font-family: ${(props) =&gt; props.theme.font.heading};</span><span id="c210" class="lf ju hi lb b fi lp lh l li lj">`;</span></pre><p id="d751" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在我们的主题文件中，我在字体下指定了两个属性(<code class="du lk ll lm lb b">heading</code>和<code class="du lk ll lm lb b">body</code>)，所以如果你把属性改为<code class="du lk ll lm lb b">body</code>，你应该会看到不同的字体。您可能需要重新启动服务器才能看到更改。</p></div><div class="ab cl lq lr gp ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="hb hc hd he hf"><p id="4513" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae iu" href="https://leojbchan.medium.com/headless-woocommerce-next-js-create-a-local-wordpress-with-woocommerce-4411b24a160e" rel="noopener">第1部分:用WooCommerce创建一个本地WordPress】</a></p><p id="f895" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae iu" href="https://leojbchan.medium.com/headless-woocommerce-next-js-set-up-woocommerce-test-with-postman-5e7859c65626" rel="noopener">第2部分:设置WooCommerce &amp;测试与邮递员</a></p><p id="ad3a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae iu" href="https://leojbchan.medium.com/headless-woocommerce-next-js-set-up-next-js-b8d2193b2688" rel="noopener">第三部分:设置Next.js </a></p><p id="b99d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae iu" href="https://leojbchan.medium.com/headless-woocommerce-next-js-set-up-styled-components-with-typescript-and-next-js-18cc047ccd79" rel="noopener">第4部分:用TypeScript和Next.js设置样式组件</a></p><p id="9883" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae iu" href="https://leojbchan.medium.com/headless-woocommerce-next-js-display-products-and-create-orders-593a6c5aee86" rel="noopener">第5部分:展示产品并创建订单</a></p><p id="e794" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae iu" href="https://leojbchan.medium.com/headless-woocommerce-next-js-set-up-redux-toolkit-for-state-management-c605adda58fe" rel="noopener">第6部分:为状态管理建立Redux工具包</a></p><p id="907f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae iu" href="https://leojbchan.medium.com/headless-woocommerce-next-js-create-a-cart-8a3e49b90076" rel="noopener">第7部分:创建购物车</a></p><p id="a123" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae iu" href="https://leojbchan.medium.com/headless-woocommerce-next-js-set-up-stripe-and-create-checkout-d01333607a66" rel="noopener">第8部分:设置条带并创建检验</a></p></div></div>    
</body>
</html>