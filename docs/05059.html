<html>
<head>
<title>Swift ‘Find Me’ Address Location Tracker</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Swift“找到我”地址位置跟踪器</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/swift-find-me-address-location-tracker-86d0bca93ab3?source=collection_archive---------15-----------------------#2021-07-08">https://medium.com/geekculture/swift-find-me-address-location-tracker-86d0bca93ab3?source=collection_archive---------15-----------------------#2021-07-08</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="4192" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">“查找我”功能将查找并显示用户电话位置的地址</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/d128791cfea6c3a84e3b3d503d91f7d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:648/format:webp/1*zoPdtEVeBelHe9rt5ydZNw.png"/></div><figcaption class="jl jm et er es jn jo bd b be z dx">AppsGym ToDo App Find Me Feature</figcaption></figure><h1 id="2add" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">方案</h1><p id="eb4d" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">我们的应用程序主ToDo视图将有一个位置文本字段，用户可以在其中输入街道地址。可选地，该应用程序还将提供一个“找到我”按钮。用户将点击/触摸按钮，授权位置跟踪，应用程序将检索当前用户位置的地址，并自动在位置文本字段中填充地址。</p><h1 id="a35d" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">技术</h1><p id="a569" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">我们将利用<strong class="ih hj">核心位置</strong>框架、<strong class="ih hj"> CLLocationManager() </strong>，并进行反向地理编码。<strong class="ih hj">地理编码</strong>是将地址(如街道地址)转换为地理坐标(如纬度和经度)的过程，您可以使用地理坐标在地图上放置标记或定位地图。<strong class="ih hj">反向地理编码</strong>是将地理坐标转换成人类可读地址的过程(参考谷歌)。</p><p id="844e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我们看来,“查找我”按钮会将设备位置坐标转换为位置地址文本(反向地理编码)。因此，我们将利用<strong class="ih hj">地理编码器..)</strong>函数，检索一个<strong class="ih hj"> CLPlacemark() </strong>，一个地理坐标的用户友好描述，然后在一行文本字段中构造地址。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ks"><img src="../Images/bf406b0d7745e81b437417ee50943599.png" data-original-src="https://miro.medium.com/v2/resize:fit:572/1*z3Qdn7CVbjisVs0AJGTbsw.gif"/></div><figcaption class="jl jm et er es jn jo bd b be z dx">GIF AppsGym ToDo Find Me Button and Address</figcaption></figure><h1 id="bc30" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">观众</h1><p id="d86a" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">本文面向寻求完整、成熟、以代码为中心的解决方案来加速开发项目的Swift开发人员。下面的代码片段可以通过最小的定制(你的应用程序按钮和文本字段)来使用。</p><h1 id="8112" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">应用模型</h1><p id="76b8" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">我们的文章基于苹果应用商店上发布的AppsGym <a class="ae kt" href="https://appsgym.com/todo-lists-notifications-multimedia/" rel="noopener ugc nofollow" target="_blank"> ToDo </a>模型应用，你可以在AppsGym.com上免费下载完整的<a class="ae kt" href="https://appsgym.com/downloads/" rel="noopener ugc nofollow" target="_blank"> Xcode </a>项目。</p><h1 id="2233" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">用户界面</h1><p id="c0b1" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">我们需要一个UITextField和一个Find Me ui button T21。文本字段将存储街道地址，无论用户是手动添加(通过键入)还是通过“查找我”按钮反向地理编码逻辑自动添加。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ku"><img src="../Images/33426ad658788f747be4383ed24c25fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:830/format:webp/1*_g4CE_pCBnactLMk2C1J6Q.png"/></div><figcaption class="jl jm et er es jn jo bd b be z dx">AppsGym ToDo Location Text Field and Find Me Button</figcaption></figure><h1 id="4d86" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">逻辑</h1><p id="80a1" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated"><strong class="ih hj">noteviewcontroller . swift</strong>将作为<strong class="ih hj">CLLocationManagerDelegate</strong>，因此它可以检索CLLocationManager获得的位置信息。</p><p id="97b3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> findMeButtonAction() </strong>将触发<strong class="ih hj"> findMe() </strong>函数，该函数将实例化<strong class="ih hj"> CLLocationManager() </strong>，请求授权，并开始更新位置，将每个位置添加到数组locations[]中。我们将只选择第一个条目<strong class="ih hj">位置【0】</strong>，然后停止位置跟踪。</p><p id="dca5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们有了位置信息，我们将使用<strong class="ih hj"> reverseGeocodeLocation(..)</strong>将位置转换为一个<a class="ae kt" href="https://developer.apple.com/documentation/corelocation/clplacemark" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj"> CLPlacemark </strong> </a>，一个预定义的变量，存储地址的组成部分。我们将检查每个组件，如果有值，就将它存储在相应的文本变量中。最终地址将是所有组件的串联。</p><p id="9e86" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">CLPlacemark的主要组成部分有:subThoroughfare、cancel、subLocality、Locality、subAdministrativeArea、postalCode和Country。</p><p id="888f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"/></p><h1 id="b53a" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">密码</h1><p id="cd10" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated"><strong class="ih hj">noteviewcontroller . swift</strong>T22】初始化&amp; findMeButtonAction() </p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kw kx l"/></div></figure><p id="75da" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">noteviewcontroller . swift find me()</strong></p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kw kx l"/></div></figure><p id="8c7a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">noteviewcontroller . swift location manager(..)委派法</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kw kx l"/></div></figure><p id="4779" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">位置跟踪授权的信息列表</strong>条目</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ky"><img src="../Images/5b7c5ba146a74663f630998118b6d4c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1282/format:webp/1*P-JkRMr4j4Qi-p9gbOMyVg.png"/></div><figcaption class="jl jm et er es jn jo bd b be z dx">Info.plist Privacy for Location Tracking Authorisation</figcaption></figure><p id="ec88" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">本文介绍了允许用户自动输入位置地址或检索当前位置地址的完整逻辑和代码。我们称检索位置地址为反向地理编码。用户将点击“查找我”按钮并授权位置跟踪，然后应用程序将检索位置坐标，转换为街道地址并填充位置文本字段。希望你觉得它在你的应用程序中有用。感谢阅读！</p></div></div>    
</body>
</html>