<html>
<head>
<title>Airflow 2: Managed vs Non-Managed Solution?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">气流2:托管与非托管解决方案？</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/managed-vs-non-managed-airflow-2-184e7cbb0a3b?source=collection_archive---------1-----------------------#2022-06-06">https://medium.com/geekculture/managed-vs-non-managed-airflow-2-184e7cbb0a3b?source=collection_archive---------1-----------------------#2022-06-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><h2 id="0aed" class="hg hh hi bd b fp hj hk hl hm hn ho dx hp translated" aria-label="kicker paragraph">气流/最佳实践</h2><div class=""/><div class=""><h2 id="8ac0" class="pw-subtitle-paragraph io hr hi bd b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf dx translated">根据您的需求，您应该选择哪种风格的气流？天文学家？AWS MWAA？GCP·克劳德作曲家？还是自我管理安装？</h2></div><p id="0260" class="pw-post-body-paragraph jg jh hi ji b jj jk is jl jm jn iv jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated"><em class="kc">注意:以下描述的观点是我个人的观点，不代表我的雇主。</em></p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es kd"><img src="../Images/939c529e1594cdd3ea7814c934366d92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FJsMPN5kPMI7JuqhsaP7rA.png"/></div></div></figure><h2 id="016d" class="kp kq hi bd kr ks kt ku kv kw kx ky kz jp la lb lc jt ld le lf jx lg lh li ho bi translated">议程</h2><ol class=""><li id="66ed" class="lj lk hi ji b jj ll jm lm jp ln jt lo jx lp kb lq lr ls lt bi translated">背景</li><li id="37a8" class="lj lk hi ji b jj lu jm lv jp lw jt lx jx ly kb lq lr ls lt bi translated">气流2安装可用的选项</li><li id="2fcf" class="lj lk hi ji b jj lu jm lv jp lw jt lx jx ly kb lq lr ls lt bi translated">根据评估标准评估备选方案</li><li id="ddd3" class="lj lk hi ji b jj lu jm lv jp lw jt lx jx ly kb lq lr ls lt bi translated">气流2选项总结</li><li id="6460" class="lj lk hi ji b jj lu jm lv jp lw jt lx jx ly kb lq lr ls lt bi translated">建议</li></ol></div><div class="ab cl lz ma gp mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="hb hc hd he hf"><h1 id="f5e9" class="mg kq hi bd kr mh mi mj kv mk ml mm kz ix mn iy lc ja mo jb lf jd mp je li mq bi translated">1.背景</h1><p id="aed5" class="pw-post-body-paragraph jg jh hi ji b jj ll is jl jm lm iv jo jp mr jr js jt ms jv jw jx mt jz ka kb hb bi translated">气流的第1版于2021年6月达到寿命终止(EOL)，不再受气流支持(参见:【airflow.apache.org】气流支持版本)。因此，我们需要根据我们当前的需求和难点，了解设置和安装Airflow 2的可用选项。</p><p id="1895" class="pw-post-body-paragraph jg jh hi ji b jj jk is jl jm jn iv jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">结果——不是一个简单的决定！为了帮助我们的选择过程，我们在反复试验后，建立了评估的<strong class="ji hs">关键</strong>业务标准。这篇文章旨在分享我们的发现，以帮助你的决策。</p></div><div class="ab cl lz ma gp mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="hb hc hd he hf"><h1 id="bc7e" class="mg kq hi bd kr mh mi mj kv mk ml mm kz ix mn iy lc ja mo jb lf jd mp je li mq bi translated">2.气流2安装可用的选项</h1><p id="3905" class="pw-post-body-paragraph jg jh hi ji b jj ll is jl jm lm iv jo jp mr jr js jt ms jv jw jx mt jz ka kb hb bi translated">有四个选项可用于为生产级环境设置气流2。其中，下面列出的前三个选项是托管服务产品:</p><ol class=""><li id="d2b6" class="lj lk hi ji b jj jk jm jn jp mv jt mw jx mx kb lq lr ls lt bi translated">天文学家:'<em class="kc">任何云</em>为气流管理服务</li><li id="54c9" class="lj lk hi ji b jj lu jm lv jp lw jt lx jx ly kb lq lr ls lt bi translated">AWS MWAA: AWS管理的气流服务</li><li id="fe54" class="lj lk hi ji b jj lu jm lv jp lw jt lx jx ly kb lq lr ls lt bi translated">谷歌云作曲家:GCP管理的气流服务</li><li id="96b8" class="lj lk hi ji b jj lu jm lv jp lw jt lx jx ly kb lq lr ls lt bi translated">自我管理气流安装</li></ol><p id="2efd" class="pw-post-body-paragraph jg jh hi ji b jj jk is jl jm jn iv jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">第四个选项是在Kubernetes集群上安装和配置您的气流环境。</p><h2 id="ac56" class="kp kq hi bd kr ks kt ku kv kw kx ky kz jp la lb lc jt ld le lf jx lg lh li ho bi translated">评定标准</h2><p id="d637" class="pw-post-body-paragraph jg jh hi ji b jj ll is jl jm lm iv jo jp mr jr js jt ms jv jw jx mt jz ka kb hb bi translated">如前所述，建立标准并不简单。每个选项都有优点和缺点，并且您的场景会有独特的需求。然而，为了帮助形成评估，我们首先为评估建立了我们的<strong class="ji hs">关键</strong>业务标准。这些建议如下:</p><p id="7d62" class="pw-post-body-paragraph jg jh hi ji b jj jk is jl jm jn iv jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated"><strong class="ji hs">标准1: ML工作量要求？</strong>该解决方案能够支持机器学习/数据科学工作负载吗？需要吗？</p><p id="598b" class="pw-post-body-paragraph jg jh hi ji b jj jk is jl jm jn iv jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated"><strong class="ji hs">标准2:灵活性— </strong>托管服务的定制程度如何？有哪些气流执行器类型可用，即K8s/CeleryK8s执行器是否可用？气流释放是否经常可用？</p><p id="e584" class="pw-post-body-paragraph jg jh hi ji b jj jk is jl jm jn iv jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated"><strong class="ji hs">标准3: K8s专业知识</strong> —您有多少K8s内部知识来支持任何潜在的解决方案？他们的带宽是多少？</p><p id="c129" class="pw-post-body-paragraph jg jh hi ji b jj jk is jl jm jn iv jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated"><strong class="ji hs">标准4:价值主张</strong> —一个气流实施提供了哪些其他实施没有的东西？</p><p id="ab62" class="pw-post-body-paragraph jg jh hi ji b jj jk is jl jm jn iv jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated"><strong class="ji hs">标准5:所需的设置工作</strong> —该值能否证明解决方案所需设置的复杂性？</p><p id="a0f8" class="pw-post-body-paragraph jg jh hi ji b jj jk is jl jm jn iv jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated"><strong class="ji hs">标准6:“本地”开发环境</strong>——该环境的独立版本是否可以轻松配置并安装在用户的机器上？</p></div><div class="ab cl lz ma gp mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="hb hc hd he hf"><h1 id="3765" class="mg kq hi bd kr mh mi mj kv mk ml mm kz ix mn iy lc ja mo jb lf jd mp je li mq bi translated">3.根据评估标准评估备选方案</h1><p id="a22f" class="pw-post-body-paragraph jg jh hi ji b jj ll is jl jm lm iv jo jp mr jr js jt ms jv jw jx mt jz ka kb hb bi translated">话不多说，让我们来看看四个气流选项与评估标准的对比情况。</p><blockquote class="my mz na"><p id="2efb" class="jg jh kc ji b jj jk is jl jm jn iv jo nb jq jr js nc ju jv jw nd jy jz ka kb hb bi translated"><strong class="ji hs">标准1: ML工作量要求？</strong>该解决方案能够支持机器学习/数据科学工作负载吗？需要吗？</p></blockquote><h2 id="5e06" class="kp kq hi bd kr ks kt ku kv kw kx ky kz jp la lb lc jt ld le lf jx lg lh li ho bi translated">气流执行器类型</h2><p id="ba91" class="pw-post-body-paragraph jg jh hi ji b jj ll is jl jm lm iv jo jp mr jr js jt ms jv jw jx mt jz ka kb hb bi translated">执行器类型的选择对于您希望使用Airflow编排的工作负载至关重要。执行器会显著影响任务的吞吐量、可伸缩性和维护。不同类型气流执行器的优点总结如下:</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es ne"><img src="../Images/4ff35b68ae66855aa43be7f6c987bb52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ty0pT0ieiuKllRzm"/></div></div></figure><ul class=""><li id="aec6" class="lj lk hi ji b jj jk jm jn jp mv jt mw jx mx kb nf lr ls lt bi translated"><strong class="ji hs">任务执行速度:</strong>k8x executor需要更多的时间，因为它需要旋转一个pod，将它分配给一个节点，运行docker映像，等等。所以如果你有很多小任务，它可能不是最好的。</li><li id="2dac" class="lj lk hi ji b jj lu jm lv jp lw jt lx jx ly kb nf lr ls lt bi translated">简单性:local executor是最简单的一个。非常容易设置和运行，但扩展性不好。K8sExecutor更具挑战性，因为它依赖于Kubernetes。</li><li id="422a" class="lj lk hi ji b jj lu jm lv jp lw jt lx jx ly kb nf lr ls lt bi translated">隔离:K8sExecutor为每个任务创建一个pod。这避免了依赖性冲突并增加了任务执行的可靠性。</li><li id="f666" class="lj lk hi ji b jj lu jm lv jp lw jt lx jx ly kb nf lr ls lt bi translated"><strong class="ji hs">定制资源:</strong>如果你真的想管理你的资源，K8sExecutor是个不错的选择。您可以分配资源(CPU、内存等。)分配给一项任务。</li></ul><p id="d411" class="pw-post-body-paragraph jg jh hi ji b jj jk is jl jm jn iv jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">因此，如果您希望使用气流来编排ML管道，您需要使用Kubernetes(或CeleryKubernetes)执行器。如下所示，鉴于他们是唯一提供K8s或CeleryK8s执行器的公司，只有天文学家或自管理气流是使用气流运行MLOps管道的唯一可行选项:</p><figure class="ke kf kg kh fd ki"><div class="bz dy l di"><div class="ng nh l"/></div></figure></div><div class="ab cl lz ma gp mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="hb hc hd he hf"><blockquote class="my mz na"><p id="ca24" class="jg jh kc ji b jj jk is jl jm jn iv jo nb jq jr js nc ju jv jw nd jy jz ka kb hb bi translated"><strong class="ji hs">标准2:灵活性— </strong>托管服务的定制程度如何？有哪些气流执行器类型可用，即K8s/CeleryK8s执行器是否可用？气流释放是否频繁？</p></blockquote><h2 id="ed07" class="kp kq hi bd kr ks kt ku kv kw kx ky kz jp la lb lc jt ld le lf jx lg lh li ho bi translated">选择遗嘱执行人类型的能力？</h2><p id="1440" class="pw-post-body-paragraph jg jh hi ji b jj ll is jl jm lm iv jo jp mr jr js jt ms jv jw jx mt jz ka kb hb bi translated">下面显示的是同一个表，列出了哪些产品允许哪些类型的执行者:</p><figure class="ke kf kg kh fd ki"><div class="bz dy l di"><div class="ng nh l"/></div></figure><p id="dbb7" class="pw-post-body-paragraph jg jh hi ji b jj jk is jl jm jn iv jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">如您所见，只有天文学家&amp;自管理安装选项允许您选择所使用的执行器类型。因此，如果您希望使用气流来编排ML管道，您将需要使用这两个选项中的任何一个。</p><p id="b21c" class="pw-post-body-paragraph jg jh hi ji b jj jk is jl jm jn iv jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">受管服务的本质决定了平台工程师根据其环境要求配置安装的选择有限。</p><h2 id="fde6" class="kp kq hi bd kr ks kt ku kv kw kx ky kz jp la lb lc jt ld le lf jx lg lh li ho bi translated">气流版本发布的频率</h2><p id="f3f3" class="pw-post-body-paragraph jg jh hi ji b jj ll is jl jm lm iv jo jp mr jr js jt ms jv jw jx mt jz ka kb hb bi translated">这里值得注意的另一件事是托管服务产品的发布频率:</p><figure class="ke kf kg kh fd ki"><div class="bz dy l di"><div class="ng nh l"/></div></figure><ul class=""><li id="9b9c" class="lj lk hi ji b jj jk jm jn jp mv jt mw jx mx kb nf lr ls lt bi translated">天文学家是这里的顶级商店，提供非常有规律的释放</li><li id="6944" class="lj lk hi ji b jj lu jm lv jp lw jt lx jx ly kb nf lr ls lt bi translated">Cloud Composer提供常规/频繁版本，但没有天文学家那么多。</li><li id="1636" class="lj lk hi ji b jj lu jm lv jp lw jt lx jx ly kb nf lr ls lt bi translated">AWS MWAA——在这个部门相当糟糕。在撰写本文时，它只提供了三个版本的Airflow作为其托管服务产品的一部分:v1.10、2.02和2.2.2</li></ul><p id="e90f" class="pw-post-body-paragraph jg jh hi ji b jj jk is jl jm jn iv jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">如您所见，托管服务的本质导致配置安装的灵活性有限。相比之下，选项4(自我管理安装)作为非管理服务选项，提供了全面的灵活性。</p></div><div class="ab cl lz ma gp mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="hb hc hd he hf"><blockquote class="my mz na"><p id="9b6e" class="jg jh kc ji b jj jk is jl jm jn iv jo nb jq jr js nc ju jv jw nd jy jz ka kb hb bi translated"><strong class="ji hs">标准3: K8s专业知识</strong> —您有多少内部K8s专业知识来支持任何潜在的解决方案？他们的带宽是多少？</p></blockquote><figure class="ke kf kg kh fd ki"><div class="bz dy l di"><div class="ng nh l"/></div></figure><p id="1f19" class="pw-post-body-paragraph jg jh hi ji b jj jk is jl jm jn iv jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">有点没脑子；只有选项4大部分需要K8s。GCP Cloud Composer在如何为您的气流集群部署K8s方面提供了极大的灵活性。因此，它也是(部分)选项1所要求的。</p></div><div class="ab cl lz ma gp mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="hb hc hd he hf"><blockquote class="my mz na"><p id="66db" class="jg jh kc ji b jj jk is jl jm jn iv jo nb jq jr js nc ju jv jw nd jy jz ka kb hb bi translated"><strong class="ji hs">标准4:价值主张</strong>—一个气流实现提供了什么其他实现没有的东西？</p></blockquote><p id="2fc4" class="pw-post-body-paragraph jg jh hi ji b jj jk is jl jm jn iv jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated"><strong class="ji hs"> GCP </strong></p><ul class=""><li id="b259" class="lj lk hi ji b jj jk jm jn jp mv jt mw jx mx kb nf lr ls lt bi translated">如果你还没有使用GCP，GCP云组件提供的价值还不足以证明最初的GCP帐户设置(基础设施/网络/IAM)。</li></ul><p id="84eb" class="pw-post-body-paragraph jg jh hi ji b jj jk is jl jm jn iv jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated"><strong class="ji hs">天文学家</strong></p><ul class=""><li id="2e37" class="lj lk hi ji b jj jk jm jn jp mv jt mw jx mx kb nf lr ls lt bi translated">任何云托管解决方案都可以灵活地将气流实施从一个云提供商转移到天文学家生态系统中的另一个云提供商。</li><li id="f2ab" class="lj lk hi ji b jj lu jm lv jp lw jt lx jx ly kb nf lr ls lt bi translated">理论上，天文学家似乎是一个很好的候选人，提供了类似的灵活性。然而，企业级支持是我们用例的基本需求，我们需要保证在APAC提供的服务(来自海外资源)将满足我们的需求。如果没有APAC多个行业的证明来证明这一点，我们无法考虑这一选择。</li></ul><p id="977a" class="pw-post-body-paragraph jg jh hi ji b jj jk is jl jm jn iv jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated"><strong class="ji hs"> AWS MWAA </strong></p><ul class=""><li id="7d6e" class="lj lk hi ji b jj jk jm jn jp mv jt mw jx mx kb nf lr ls lt bi translated">留在AWS生态系统中大大简化了集成考虑，特别是秘密和日志管理。</li><li id="b2ef" class="lj lk hi ji b jj lu jm lv jp lw jt lx jx ly kb nf lr ls lt bi translated">然而，受管AWS气流服务本身是一个折衷的解决方案。参见下面的“标准5:所需的设置工作”。</li><li id="7a3d" class="lj lk hi ji b jj lu jm lv jp lw jt lx jx ly kb nf lr ls lt bi translated">此外，AWS MWAA提供的气流版本不允许我们开发气流RBAC实现。</li></ul><p id="f243" class="pw-post-body-paragraph jg jh hi ji b jj jk is jl jm jn iv jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated"><strong class="ji hs">自管理气流安装</strong></p><ul class=""><li id="a61b" class="lj lk hi ji b jj jk jm jn jp mv jt mw jx mx kb nf lr ls lt bi translated">自我管理的Airflow 2环境提供了所需的最大灵活性，允许您:a)选择所需的执行器类型，b)配置定制的Airflow RBAC角色，以及c)在所需的Airflow实例上轻松安装附加库。</li></ul></div><div class="ab cl lz ma gp mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="hb hc hd he hf"><blockquote class="my mz na"><p id="6c2e" class="jg jh kc ji b jj jk is jl jm jn iv jo nb jq jr js nc ju jv jw nd jy jz ka kb hb bi translated"><strong class="ji hs">标准5:所需的设置工作</strong> —该值能否证明解决方案所需设置的复杂性？</p></blockquote><ul class=""><li id="3d1d" class="lj lk hi ji b jj jk jm jn jp mv jt mw jx mx kb nf lr ls lt bi translated">GCP云作曲家:如果你还没有使用GCP，这不是一个候选选项。基本GCP帐户设置所需的金额不足以支持此选项。</li><li id="a7c8" class="lj lk hi ji b jj lu jm lv jp lw jt lx jx ly kb nf lr ls lt bi translated">天文学家:我不能谈论所需的设置工作，因为这需要一份供应商协议。因此，这种评估需要一个技术高峰。</li><li id="1887" class="lj lk hi ji b jj lu jm lv jp lw jt lx jx ly kb nf lr ls lt bi translated">AWS MWAA :糟糕的设置体验，与不频繁的发布和缺乏定制联系在一起，使得这个选项只适合你寻找一个快速的“无装饰”气流2环境</li><li id="7241" class="lj lk hi ji b jj lu jm lv jp lw jt lx jx ly kb nf lr ls lt bi translated"><strong class="ji hs">自我管理气流</strong>:如果你有K8s的专业知识，这可能是最好的选择。然而，如果没有，我建议进一步调查天文学家。</li></ul><blockquote class="my mz na"><p id="f397" class="jg jh kc ji b jj jk is jl jm jn iv jo nb jq jr js nc ju jv jw nd jy jz ka kb hb bi translated"><strong class="ji hs">标准6:“本地”开发环境</strong>——该环境的独立版本可以很容易地配置并安装在用户的机器上吗？</p></blockquote><p id="b7ef" class="pw-post-body-paragraph jg jh hi ji b jj jk is jl jm jn iv jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">可以为所有四个选项创建一个“本地”气流开发环境。然而:</p><ul class=""><li id="4482" class="lj lk hi ji b jj jk jm jn jp mv jt mw jx mx kb nf lr ls lt bi translated">AWS MWAA:本地开发环境是社区支持的(<a class="ae mu" href="https://github.com/aws/aws-mwaa-local-runner" rel="noopener ugc nofollow" target="_blank"> GitHub repo link </a>)。因此，它很容易出错</li><li id="49a8" class="lj lk hi ji b jj lu jm lv jp lw jt lx jx ly kb nf lr ls lt bi translated">使用K8s自我管理气流是可能的，但一些设置和配置并不简单。需要K8s专业知识</li></ul></div><div class="ab cl lz ma gp mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="hb hc hd he hf"><h2 id="df70" class="kp kq hi bd kr ks kt ku kv kw kx ky kz jp la lb lc jt ld le lf jx lg lh li ho bi translated">4.气流2选项总结</h2><h2 id="ea2e" class="kp kq hi bd kr ks kt ku kv kw kx ky kz jp la lb lc jt ld le lf jx lg lh li ho bi translated">谷歌云作曲家</h2><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es ni"><img src="../Images/538f6b57a9daae70515dbee47ba963c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rHhhL0Lf2aVqHeWB-SrYXg.png"/></div></div></figure><ul class=""><li id="8370" class="lj lk hi ji b jj jk jm jn jp mv jt mw jx mx kb nf lr ls lt bi translated">如果你还没有使用GCP作为云提供商，Cloud Composer服务并不是一个足够令人信服的理由。</li><li id="eb00" class="lj lk hi ji b jj lu jm lv jp lw jt lx jx ly kb nf lr ls lt bi translated">支持GCP基金会环境、组织设置、IAM、安全、网络等所需的努力。，不值得使用Cloud Composer。</li><li id="ac92" class="lj lk hi ji b jj lu jm lv jp lw jt lx jx ly kb nf lr ls lt bi translated">这是一个比AWS MWAA更有吸引力的选择，但前提是你已经在使用GCP生态系统。</li></ul><h2 id="df22" class="kp kq hi bd kr ks kt ku kv kw kx ky kz jp la lb lc jt ld le lf jx lg lh li ho bi translated">天文学家</h2><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es nj"><img src="../Images/96aa3bbbdb6681fdb1618a33b6dbae5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JpeF__zlypPXQ5gp67m2ew.png"/></div></div></figure><p id="7b66" class="pw-post-body-paragraph jg jh hi ji b jj jk is jl jm jn iv jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">没有APAC支持模型和支持级别存在的保证，我不能推荐天文学家作为我们用例的候选。然而，如果我们对企业级的支持有信心，那么天文学家就是一个理想的选择。</p><h2 id="0b0f" class="kp kq hi bd kr ks kt ku kv kw kx ky kz jp la lb lc jt ld le lf jx lg lh li ho bi translated">AWS MWAA</h2><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es nk"><img src="../Images/723cb9a1b134ab2824a58502bd4d482c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ITGX09vYc5ZMt3Luk8EJRQ.png"/></div></div></figure><p id="950e" class="pw-post-body-paragraph jg jh hi ji b jj jk is jl jm jn iv jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">尽管AWS管理的服务产品很方便，但MWAA感觉像是一个匆忙上市的产品。特别是，关于有限的/变通的定制、不频繁的发布和糟糕的设置体验。参见我之前关于安装体验的博文:</p><div class="nl nm ez fb nn no"><a href="https://paulfry999.medium.com/review-of-aws-mwaa-i-e-aws-managed-service-for-airflow-fc7d78e7cc15" rel="noopener follow" target="_blank"><div class="np ab dw"><div class="nq ab nr cl cj ns"><h2 class="bd hs fi z dy nt ea eb nu ed ef hr bi translated">审查AWS MWAA和如何自动安装</h2><div class="nv l"><h3 class="bd b fi z dy nt ea eb nu ed ef dx translated">即AWS的气流管理服务</h3></div><div class="nw l"><p class="bd b fp z dy nt ea eb nu ed ef dx translated">paulfry999.medium.com</p></div></div><div class="nx l"><div class="ny l nz oa ob nx oc kn no"/></div></div></a></div><p id="79e8" class="pw-post-body-paragraph jg jh hi ji b jj jk is jl jm jn iv jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">如果他们能够提供更频繁的版本发布&amp;解决执行器类型的限制&amp;改进他们的通用用户指南文档(！)，这将大大有助于使AWS MWAA成为一个有吸引力的提议。</p><h2 id="fb91" class="kp kq hi bd kr ks kt ku kv kw kx ky kz jp la lb lc jt ld le lf jx lg lh li ho bi translated">使用K8s自我管理气流</h2><p id="3a02" class="pw-post-body-paragraph jg jh hi ji b jj ll is jl jm lm iv jo jp mr jr js jt ms jv jw jx mt jz ka kb hb bi translated"><strong class="ji hs">优点:</strong></p><ul class=""><li id="0613" class="lj lk hi ji b jj jk jm jn jp mv jt mw jx mx kb nf lr ls lt bi translated">完全灵活地设计您需要的气流结构</li><li id="3474" class="lj lk hi ji b jj lu jm lv jp lw jt lx jx ly kb nf lr ls lt bi translated">完全灵活的安装—没有限制，关于您可以配置什么和不可以配置什么</li><li id="5d9c" class="lj lk hi ji b jj lu jm lv jp lw jt lx jx ly kb nf lr ls lt bi translated">云本地——Kubernetes本身是一种与云无关的技术</li><li id="b3d8" class="lj lk hi ji b jj lu jm lv jp lw jt lx jx ly kb nf lr ls lt bi translated">执行者的灵活性——对您希望使用的执行者的选择没有限制</li></ul><p id="3cb2" class="pw-post-body-paragraph jg jh hi ji b jj jk is jl jm jn iv jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated"><strong class="ji hs">缺点:</strong></p><ul class=""><li id="49af" class="lj lk hi ji b jj jk jm jn jp mv jt mw jx mx kb nf lr ls lt bi translated">要求您的平台工程师具备K8s专业知识(和带宽！)</li></ul><p id="7603" class="pw-post-body-paragraph jg jh hi ji b jj jk is jl jm jn iv jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">自我管理的气流环境保证了开发的环境可以根据您的需求进行定制和构建。然而，这确实伴随着一个警告，即这个选项确实需要您的团队能够访问具有K8s专业知识的平台工程师。</p></div><div class="ab cl lz ma gp mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="hb hc hd he hf"><h1 id="2ca7" class="mg kq hi bd kr mh mi mj kv mk ml mm kz ix mn iy lc ja mo jb lf jd mp je li mq bi translated">5.建议</h1><p id="7a6d" class="pw-post-body-paragraph jg jh hi ji b jj ll is jl jm lm iv jo jp mr jr js jt ms jv jw jx mt jz ka kb hb bi translated">最终，气流管理服务领域仍有改进的空间:</p><ul class=""><li id="6c40" class="lj lk hi ji b jj jk jm jn jp mv jt mw jx mx kb nf lr ls lt bi translated">天文学家是一个强有力的竞争者，但需要在APAC有更多的存在，并围绕其企业支持模式得到更大的保证</li><li id="f7eb" class="lj lk hi ji b jj lu jm lv jp lw jt lx jx ly kb nf lr ls lt bi translated">如果你还不是GCP的用户，Cloud Composer还不足以成为你迁移的理由(我不确定你是否能证明云网络/安全/RBAC的额外需求)。特别是如果你已经是一个AWS用户，鉴于这两个产品都限制你只能使用芹菜执行器</li><li id="5bbc" class="lj lk hi ji b jj lu jm lv jp lw jt lx jx ly kb nf lr ls lt bi translated">自动气象站MWAA是一个非常“没有多余装饰”的选择，更适合那些想要在自动气象站上安装基本气流装置的人(为了留在自动气象站上)。AWS MWAA需要在其解决方案中提供更大的灵活性和更频繁的Airflow版本发布(即不仅仅是1.10、2.0.1和2.2.2)。此外，AWS MWAA限制您只能使用芹菜执行器</li></ul><p id="cbc3" class="pw-post-body-paragraph jg jh hi ji b jj jk is jl jm jn iv jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">如果您有Kubernetes的内部专业知识，我建议您选择非托管安装。这将导致以下结果:</p><ul class=""><li id="e063" class="lj lk hi ji b jj jk jm jn jp mv jt mw jx mx kb nf lr ls lt bi translated">拥有工作负载所需的设计规格</li><li id="f2fc" class="lj lk hi ji b jj lu jm lv jp lw jt lx jx ly kb nf lr ls lt bi translated">一个不妥协的解决方案，关于:设置和配置</li><li id="46dc" class="lj lk hi ji b jj lu jm lv jp lw jt lx jx ly kb nf lr ls lt bi translated">云原生解决方案</li></ul><p id="343b" class="pw-post-body-paragraph jg jh hi ji b jj jk is jl jm jn iv jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">本建议附有两项免责声明:</p><ol class=""><li id="cb72" class="lj lk hi ji b jj jk jm jn jp mv jt mw jx mx kb lq lr ls lt bi translated">你需要接触K8s的专业知识。这些通常是稀缺和有需求的，所以你也需要保证它们的可用性</li><li id="7b99" class="lj lk hi ji b jj lu jm lv jp lw jt lx jx ly kb lq lr ls lt bi translated">您的Kubernetes开发人员需要对气流概念有所了解，以构建您需要的K8s集群(并使用正确的执行器)。</li></ol><p id="a28d" class="pw-post-body-paragraph jg jh hi ji b jj jk is jl jm jn iv jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">我希望这些都有帮助。从理论上讲，天文学家也是一个不错的选择，但我渴望看到/听到APAC更多的使用案例。</p></div></div>    
</body>
</html>