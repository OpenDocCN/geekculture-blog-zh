<html>
<head>
<title>Load Balancing</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">负载平衡</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/load-balancing-da0bde7882f1?source=collection_archive---------20-----------------------#2021-06-21">https://medium.com/geekculture/load-balancing-da0bde7882f1?source=collection_archive---------20-----------------------#2021-06-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="d3a2" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">为什么我们甚至需要负载平衡器，它们是如何工作的？</h2></div><p id="2d20" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">负载平衡器(LB)是任何分布式系统的关键组件。它有助于将流量分散到服务器集群中，以提高应用程序、网站或数据库的响应能力和可用性。LB还在分发请求时跟踪所有资源的状态。如果一个服务器不能接受新的请求或者没有响应，或者错误率很高，LB将停止向这样的服务器发送流量。</p><p id="5e49" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">通常，负载平衡器位于客户端和服务器之间，接受传入的网络和应用程序流量，并使用各种算法将流量分布在多个后端服务器上。通过在多个服务器之间平衡应用程序请求，负载平衡器可以减少单个服务器的负载，防止任何一个应用程序服务器成为单点故障，从而提高整体应用程序的可用性和响应能力。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es jt"><img src="../Images/a633776b191f92686a9a5ccb4aadb463.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*CCK15OF3DizmOITk"/></div></div></figure><p id="f607" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为了充分利用可伸缩性和冗余性，我们可以平衡系统各层的负载。我们可以在三个地方添加LBs:</p><ul class=""><li id="c9c9" class="kf kg hi iz b ja jb jd je jg kh jk ki jo kj js kk kl km kn bi translated">在用户和网络服务器之间。</li><li id="08de" class="kf kg hi iz b ja ko jd kp jg kq jk kr jo ks js kk kl km kn bi translated">在web服务器和内部平台层之间，比如应用服务器或缓存服务器。</li><li id="b23e" class="kf kg hi iz b ja ko jd kp jg kq jk kr jo ks js kk kl km kn bi translated">内部平台层和数据库之间。</li></ul><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es kt"><img src="../Images/d30b112b2823d7eb1845042f08e73d29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*t_SeSg3Jqfafgkfh"/></div></div></figure><h1 id="0de2" class="ku kv hi bd kw kx ky kz la lb lc ld le io lf ip lg ir lh is li iu lj iv lk ll bi translated">负载平衡的优势</h1><ul class=""><li id="f231" class="kf kg hi iz b ja lm jd ln jg lo jk lp jo lq js kk kl km kn bi translated">用户体验更快、不间断的服务。用户不必等待一台苦苦挣扎的服务器来完成之前的任务。相反，他们的请求会立即传递给更容易获得的资源。</li><li id="43d5" class="kf kg hi iz b ja ko jd kp jg kq jk kr jo ks js kk kl km kn bi translated">服务提供商体验到更少的停机时间和更高的吞吐量。即使服务器完全故障也不会影响最终用户的体验，因为负载平衡器会简单地将其路由到健康的服务器。</li><li id="55c6" class="kf kg hi iz b ja ko jd kp jg kq jk kr jo ks js kk kl km kn bi translated">负载平衡使系统管理员更容易处理传入的请求。</li><li id="b781" class="kf kg hi iz b ja ko jd kp jg kq jk kr jo ks js kk kl km kn bi translated">智能负载平衡器提供了预测分析等优势，可以在流量瓶颈发生之前确定它们。因此，智能负载平衡器为组织提供了切实可行的见解。这些是自动化的关键，有助于推动业务决策。</li></ul><h1 id="5547" class="ku kv hi bd kw kx ky kz la lb lc ld le io lf ip lg ir lh is li iu lj iv lk ll bi translated">负载均衡器如何选择后端服务器？</h1><p id="3025" class="pw-post-body-paragraph ix iy hi iz b ja lm ij jc jd ln im jf jg lr ji jj jk ls jm jn jo lt jq jr js hb bi translated">负载平衡器在将请求转发到后端服务器之前会考虑两个因素。他们将首先确保他们选择的服务器适当地响应请求，然后使用预先配置的算法从一组健康的服务器中选择一个。</p><h2 id="2c72" class="lu kv hi bd kw lv lw lx la ly lz ma le jg mb mc lg jk md me li jo mf mg lk mh bi translated">健康检查</h2><p id="d743" class="pw-post-body-paragraph ix iy hi iz b ja lm ij jc jd ln im jf jg lr ji jj jk ls jm jn jo lt jq jr js hb bi translated">负载平衡器应该只将流量转发到“健康的”后端服务器。为了监控后端服务器的健康状况，“健康检查”会定期尝试连接到后端服务器，以确保服务器正在侦听。如果服务器运行状况检查失败，它将自动从池中删除，并且流量不会转发给它，直到它再次响应运行状况检查。</p><h2 id="8995" class="lu kv hi bd kw lv lw lx la ly lz ma le jg mb mc lg jk md me li jo mf mg lk mh bi translated">负载平衡算法</h2><p id="f63a" class="pw-post-body-paragraph ix iy hi iz b ja lm ij jc jd ln im jf jg lr ji jj jk ls jm jn jo lt jq jr js hb bi translated">有多种负载平衡方法，它们针对不同的需求使用不同的算法。</p><h2 id="710c" class="lu kv hi bd kw lv lw lx la ly lz ma le jg mb mc lg jk md me li jo mf mg lk mh bi translated">最少联系方法</h2><p id="f812" class="pw-post-body-paragraph ix iy hi iz b ja lm ij jc jd ln im jf jg lr ji jj jk ls jm jn jo lt jq jr js hb bi translated">此方法将流量定向到活动连接最少的服务器。当许多持久的客户端连接不均匀地分布在服务器之间时，这种方法相当实用。</p><h2 id="1efc" class="lu kv hi bd kw lv lw lx la ly lz ma le jg mb mc lg jk md me li jo mf mg lk mh bi translated">最短响应时间法</h2><p id="6073" class="pw-post-body-paragraph ix iy hi iz b ja lm ij jc jd ln im jf jg lr ji jj jk ls jm jn jo lt jq jr js hb bi translated">该算法将流量定向到具有最少活动连接和最低平均响应时间的服务器。</p><h2 id="7c8e" class="lu kv hi bd kw lv lw lx la ly lz ma le jg mb mc lg jk md me li jo mf mg lk mh bi translated">最小带宽法</h2><p id="7300" class="pw-post-body-paragraph ix iy hi iz b ja lm ij jc jd ln im jf jg lr ji jj jk ls jm jn jo lt jq jr js hb bi translated">此方法选择当前服务最少流量的服务器，流量以每秒兆位(Mbps)衡量。</p><h2 id="e4bf" class="lu kv hi bd kw lv lw lx la ly lz ma le jg mb mc lg jk md me li jo mf mg lk mh bi translated">循环法</h2><p id="c2fe" class="pw-post-body-paragraph ix iy hi iz b ja lm ij jc jd ln im jf jg lr ji jj jk ls jm jn jo lt jq jr js hb bi translated">该方法循环遍历服务器列表，并将每个新请求发送到下一个服务器。当它到达列表的末尾时，它从头开始。当服务器规格相同并且没有很多持久连接时，它最有用。</p><h2 id="6b67" class="lu kv hi bd kw lv lw lx la ly lz ma le jg mb mc lg jk md me li jo mf mg lk mh bi translated">加权循环法</h2><p id="d767" class="pw-post-body-paragraph ix iy hi iz b ja lm ij jc jd ln im jf jg lr ji jj jk ls jm jn jo lt jq jr js hb bi translated">加权循环调度旨在更好地处理具有不同处理能力的服务器。每个服务器被分配一个权重(一个指示处理能力的整数值)。权重较高的服务器在权重较低的服务器之前接收新连接。</p><h2 id="0cf9" class="lu kv hi bd kw lv lw lx la ly lz ma le jg mb mc lg jk md me li jo mf mg lk mh bi translated">IP哈希</h2><p id="04fa" class="pw-post-body-paragraph ix iy hi iz b ja lm ij jc jd ln im jf jg lr ji jj jk ls jm jn jo lt jq jr js hb bi translated">在这种方法下，计算客户机IP地址的散列来将请求重定向到服务器。</p><h1 id="0600" class="ku kv hi bd kw kx ky kz la lb lc ld le io lf ip lg ir lh is li iu lj iv lk ll bi translated">冗余负载平衡器</h1><p id="0954" class="pw-post-body-paragraph ix iy hi iz b ja lm ij jc jd ln im jf jg lr ji jj jk ls jm jn jo lt jq jr js hb bi translated">负载平衡器可能是单点故障。为了克服这个问题，可以将第二个负载均衡器连接到第一个负载均衡器，形成一个集群。每个负载均衡器监控另一个负载均衡器的运行状况，并且由于两个负载均衡器同样能够提供流量和故障检测，因此当主负载均衡器出现故障时，第二个负载均衡器会接管。</p></div></div>    
</body>
</html>