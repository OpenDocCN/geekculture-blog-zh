<html>
<head>
<title>How to Succeed in Huge Refactors</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在大型重构中取得成功</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/how-to-succeed-in-huge-refactors-83cbd325555c?source=collection_archive---------21-----------------------#2021-07-21">https://medium.com/geekculture/how-to-succeed-in-huge-refactors-83cbd325555c?source=collection_archive---------21-----------------------#2021-07-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="9dc6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如何把事情做好，相信自己&amp;队友的价值。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/7f78ef79db858abd70720610da54d0ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ImVFnxdCRno7bLHgWNxI1w.jpeg"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx">Photo by <a class="ae jt" href="https://unsplash.com/@zekedrone?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Martin Sanchez</a> on <a class="ae jt" href="https://unsplash.com/s/photos/mountain-lava-person?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="0a3f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我正在写一个大型重构任务的故事；一路上的主要决定是什么？我列出了各种取舍，以及我是如何在短时间内取得巨大进步的。</p><h1 id="ca57" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">出了什么问题？</h1><p id="6070" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">我们的业务逻辑层包含“应用程序”，即表示功能的类。它不是按比例编写的，我们有许多应用程序，每个应用程序都有自己的线程，它们之间有回调和依赖关系。</p><p id="793f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">问题是我们不知道什么时候会遇到竞争或死锁。为了修复这样的错误，我们必须重写整个基础设施，所以决定将其转换为单线程。</p><h1 id="d76c" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">我从以前的任务所有者那里继承了什么？</h1><p id="381d" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">这项任务已经进行了一年多，大量代码漂浮在一个大的提交中，没有被推到任何地方。我决定打开一个全新的提交，并获取旧代码的片段，因为我必须阅读并理解我自己的提交中的每一行。</p><p id="1dc8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">权衡:</p><ul class=""><li id="9a1c" class="kx ky hi ih b ii ij im in iq kz iu la iy lb jc lc ld le lf bi translated">将一个开发人员添加到一个项目中，从长远来看可以加速，而这个开发人员从零开始学习项目的开销[从短期来看很慢]</li><li id="55ed" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated">重用尚未测试的现有代码，而不是从头开始并放慢速度。</li><li id="0b43" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated">深入理解每一行代码，而不是开始使用它，然后一头扎进一个特定的问题[现在花时间，而不是以后浪费时间在不熟悉的代码上]。</li></ul><p id="cfe0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我的经理选择给这个任务添加一个新的开发人员(我)，我选择使用现有的代码<em class="ll">和</em>重新阅读并理解它的每一行。</p><h1 id="e910" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">过去阻碍这项工作完成的主要障碍是什么？</h1><p id="682a" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">当我回顾我的队友所做的工作时，我注意到需要的改变可以分成两组:</p><ul class=""><li id="ab25" class="kx ky hi ih b ii ij im in iq kz iu la iy lb jc lc ld le lf bi translated">允许多个应用程序在同一线程上运行的新基础设施</li><li id="6a04" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated">将应用从旧基础架构迁移到新基础架构。</li></ul><p id="1175" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以前的任务所有者试图在一次提交中完成所有事情，实际上改变了业务逻辑层中的每个文件。每当它们从主分支重定基础时，就会导致令人精疲力竭的合并冲突，因为需要一次又一次地检查一个特性的所有逻辑，并对新的基础结构进行必要的调整。所以自然地，这减慢了开发过程。</p><h1 id="3152" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">我的混合阶段策略是什么？</h1><p id="3642" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">我把这项任务分成几次提交；第一个包括新的基础架构，以一个应用程序转换为例。这意味着我们有两个不同的架构同时存在，每个架构上有几个应用程序。</p><p id="ad13" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">稍后，我们将能够进行小的提交；每个转换一个应用程序。</p><p id="fb6f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">混合阶段的缺点是:</p><ul class=""><li id="1454" class="kx ky hi ih b ii ij im in iq kz iu la iy lb jc lc ld le lf bi translated">更多的QA资源，因为我们必须在每次提交时进行回归测试</li><li id="c1ef" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated">让两种架构并存，容易出现逻辑错误</li><li id="a99b" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated">我们不太可能完成整个重构，因为紧急问题会导致我们离开未重构的应用程序，去解决bug。</li></ul><p id="6dce" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">优点是:</p><ul class=""><li id="c7db" class="kx ky hi ih b ii ij im in iq kz iu la iy lb jc lc ld le lf bi translated">当我获得基础架构批准时，我不需要改变基础或者考虑大部分业务逻辑。我把一些独特的问题留给了一个未解决的应用程序，因为我知道我以后会处理它们。</li><li id="f856" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated">我可以在几个冲刺阶段内提交任务。</li><li id="4024" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated">添加应用程序的任务是独立的，这意味着几个开发人员可以并行完成，并且比主要的基础设施任务更容易——因此它们可以交给经验较少的开发人员。</li></ul><p id="3629" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我对我的逻辑和设计有信心，这两种架构可以共存，所以我选择了混合策略。</p><h1 id="8edd" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">我不得不放弃哪些原则？</h1><p id="d095" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">我不得不放弃让每一段代码都尽善尽美的愿望。有太多的边缘案例和问题需要解决。在开始编码之前，我无法计划一个能解决所有问题的设计。</p><p id="dca1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">相反，我必须相信自己能够处理问题，并在工作中不断进步。</p><p id="6833" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我也不得不放弃一定程度的骄傲——独自完成任务的每一部分并允许他人帮助我的骄傲。幸运的是，我发现我真的喜欢指导，看着其他开发人员成功地钻研我的代码给了我极大的快乐。</p><h1 id="50e6" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">总结—我学到了什么？</h1><p id="9846" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">我学会了相信自己的逻辑和直觉，我的经理也信任我做出的重要决定。</p><p id="210a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我学会了把一个大任务分成小的、可分块的任务。</p><p id="d0f3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最重要的是，作为一名团队成员，我进步了，我们完成了任务。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lm"><img src="../Images/66f9e748704d8a0b74183c13edd6269d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7kC8-B4F0HyZ6jdjqq0ZLw.jpeg"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx">Photo by <a class="ae jt" href="https://unsplash.com/@timmarshall?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Tim Marshall</a> on <a class="ae jt" href="https://unsplash.com/s/photos/circle-people?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure></div></div>    
</body>
</html>