<html>
<head>
<title>Angular Basics-5</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">角度基础-5</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/angular-basics-5-e7e71a6454?source=collection_archive---------16-----------------------#2021-09-21">https://medium.com/geekculture/angular-basics-5-e7e71a6454?source=collection_archive---------16-----------------------#2021-09-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/d5fb0cd45fc43cb9016ea6f3586495d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cg98UiAWieLn_CL47_mb4g.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Photo by <a class="ae iu" href="https://unsplash.com/@xps?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">XPS</a> on <a class="ae iu" href="https://unsplash.com/s/photos/desktop?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="dfa7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">欢迎来到角度基础的第五部分。在这一部分中，我们将深入研究服务和依赖注入。</p><p id="f7a5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">Angular中的服务是一个中央存储库，可以从任何组件访问。项目的起点可以取自<a class="ae iu" href="https://drive.google.com/file/d/1kEoiW-Zplf53TLz5G-sMhvcbqhMooWpl/view?usp=sharing" rel="noopener ugc nofollow" target="_blank">这个</a> zip文件。</p><p id="e86a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们的小应用程序有三个小组件，我们传递日志和其他东西的数据。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jt"><img src="../Images/9a2eb7f85aee5adaca04a178a260f6bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tKp9Cb9g8HOhlNqB0f1FkA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Basic App</figcaption></figure><p id="8ba8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们将首先创建一个日志服务。所以，在<strong class="ix hj"> app </strong>文件夹里面创建一个文件<strong class="ix hj"> logging.service.ts </strong>。我们将把以下内容放在里面。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jy"><img src="../Images/6efb79d07db0892e1c305b471fd8b11f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8s6bBrGDfiY7gMEZGbQKLQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">logging.service.ts</figcaption></figure><p id="5bf5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，我们将在我们的<strong class="ix hj"> new-account.component.ts </strong>文件中使用这个日志服务。这里，我们必须在提供者中使用它，然后在带有类型定义的构造函数中使用它。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jz"><img src="../Images/820e6678e312a7bc347066571238d72d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*edasW81OG9zFQYUc64_qDQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">new-account.component.ts</figcaption></figure><p id="29e3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，我们还将在<strong class="ix hj"> account.component.ts </strong>文件中添加日志服务。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ka"><img src="../Images/5fbdfc2283265cac24ec3d7b62ca7b0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VmO4n4a7b2KpO5SEpuyyBQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">account.component.ts</figcaption></figure><p id="160a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，当你检查应用程序时，它们都工作正常。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kb"><img src="../Images/08b1489a3e559bca6e2e087ddea2a723.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9X4a8O_vAGh-LlegnBtRdg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">localhost</figcaption></figure><p id="ac3c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，我们将研究服务的另一个用户案例，即存储和管理数据。我们将创建一个服务<strong class="ix hj"> accounts.service.ts </strong>，它将包含我们的帐户详细信息，该信息当前位于app.component.ts文件中。</p><p id="661f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">它将包含accounts数组以及一个<strong class="ix hj"> addAccount </strong>和<strong class="ix hj"> updateStatus </strong>函数。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kc"><img src="../Images/709e67b089deee30af801bc26cbd3da9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-FdbgtJOszCCcMaJK5NCqQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">accounts.service.ts</figcaption></figure><p id="48ca" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">之后，从<strong class="ix hj">app.component.html</strong>文件中删除accountAdded和statusChanged函数。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kd"><img src="../Images/37f9e402da77b804d88571ec0bc5214c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YV2nWwQ3QElx3oMx1HFd4A.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">app.component.html</figcaption></figure><p id="7d09" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，在<strong class="ix hj"> app.component.ts </strong>文件中，我们将删除数组和函数，并调用我们的帐户服务。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ke"><img src="../Images/3d3ffc8aaffba03882e0dffe2c4ee2fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Djz5SDbz84YAjqhShGKXNA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">app.component.ts</figcaption></figure><p id="65e2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，在<strong class="ix hj">new-account . component . ts</strong>文件中，我们可以去掉发出的名称和状态。</p><p id="6939" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">取而代之的是，我们在其中增加了账户服务。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kf"><img src="../Images/cd8ef19d3ba0c13d27777167fd2ae058.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Mz99AlI-O5gzStMSwRqQVQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">new-account.component.ts</figcaption></figure><p id="3776" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，我们将在<strong class="ix hj"> account.component.ts </strong>文件中进行相同的更改，我们将在其中添加帐户服务并删除旧的发出的服务。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kg"><img src="../Images/79f727688b05186d5e58441e3e41e2c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ssjpBb6yc6L6nORq4SfWqA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">account.component.ts</figcaption></figure><p id="982c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，我们不会得到任何错误，但我们的代码被破坏，在本地主机中，我们无法添加任何服务器。</p><p id="47a2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们实际上有许多相同服务的不同实例。因此，我们将只保留<strong class="ix hj"> app.component.ts </strong>文件的父组件中的一个。</p><p id="90c4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们将首先从<strong class="ix hj"> account.component.ts </strong>文件中删除它。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kc"><img src="../Images/cf3bac66fd75bd4c3e7fbcfbd3448a20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aNK1z2a5-jd_zr-IZGU1Aw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">account.component.ts</figcaption></figure><p id="824c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们还会将它从<strong class="ix hj">new-account . component . ts</strong>文件中删除。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kh"><img src="../Images/a70cf662cbf51ae7b2194dd66f86295e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yTviYUYNl_OyE7etIq7uuA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">new-account.component.ts</figcaption></figure><p id="cd95" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，我们又可以添加新的服务器了。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ki"><img src="../Images/6d6caecbc1a29d6405b3108e44ea84e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QCXCBQIiatCn7tjXkzZhLw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">New server</figcaption></figure><p id="4e45" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">事实上，我们还应该从<strong class="ix hj"> app.component.ts </strong>文件中删除该服务。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kj"><img src="../Images/b13d4745f97ae1f67b750202f96dd3c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*62JLK7nqVJy0Ofoj1xYASQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">app.component.ts</figcaption></figure><p id="067f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们将把它添加到尽可能高的位置，即<strong class="ix hj"> app.module.ts </strong>文件。</p><p id="767a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们还将学习将一个服务注入到另一个服务中，因此我们也将在<strong class="ix hj"> app.module.ts </strong>文件中添加日志服务</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kk"><img src="../Images/de17ea85ed6a4adc2d3634f6c5aa7116.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j1nI64HXksv4lw5PzSQMig.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">app.module.ts</figcaption></figure><p id="65b0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">接下来，我们将从<strong class="ix hj"> account.component.ts </strong>文件中删除日志服务。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kk"><img src="../Images/fabe6053fcb1fc49bd2fbd5078a23621.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C6xMvX5G8z5m0s-9wLpeig.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">account.component.ts</figcaption></figure><p id="22dc" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们还将从<strong class="ix hj"> new-account.component.ts </strong>文件中删除日志服务。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kk"><img src="../Images/355259db74f4efc69570126347c27bcd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DPY7S9cUgjAa9NcxycfjtQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">new-account.component.ts</figcaption></figure><p id="89ce" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，我们将在<strong class="ix hj"> accounts.service.ts </strong>文件中添加日志服务。我们还必须使它具有可注入性，因为我们要向另一个服务添加一个服务。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kk"><img src="../Images/87a2d2191ea68a1997a3f10871a992aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1PyA-G1KzEhrkFXoAfxpxw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">accounts.service.ts</figcaption></figure><p id="8299" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，我们将学习使用服务进行跨组件通信。在帐户服务中，我们希望提供一个事件，我们可以从一个组件发出该事件，并在其他组件中捕获该事件。</p><p id="b830" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">因此，在<strong class="ix hj"> accounts.service.ts </strong>文件中，我们将有一个EventEmitter。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kl"><img src="../Images/a0f9b77f84d0c3c600f0652115123ddf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fTgkzureb3v6aXf2qcZA4g.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">accounts.service.ts</figcaption></figure><p id="aad7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，我们将首先从<strong class="ix hj"> account.component.ts </strong>文件中发出事件。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kk"><img src="../Images/8c240aeed712f9d4b8f61ddc9fcd25d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M6Vz1PMUhMNOihkg2ckJcQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">account.component.ts</figcaption></figure><p id="a714" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，我们将通过订阅来捕获<strong class="ix hj">new-account . component . ts</strong>文件中的事件。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kl"><img src="../Images/197696b516e6747aa2e355cbeef38027.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A-rLMlVPsXSfL1eL8Ge0WQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">new-account.component.ts</figcaption></figure><p id="7cf6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，我们能够在组件之间进行通信，警报显示在本地主机上。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ki"><img src="../Images/8c9612e5e3aeb64e0d9f739c155460d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6pz5Bh7qaqvo9ZBHOZ4iFA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">localhost</figcaption></figure><p id="4d1c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这就完成了我们的帖子，你可以在<a class="ae iu" href="https://github.com/nabendu82/services-deepdive" rel="noopener ugc nofollow" target="_blank">github repo中找到最终代码。</a></p></div></div>    
</body>
</html>