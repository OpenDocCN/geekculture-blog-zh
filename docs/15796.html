<html>
<head>
<title>A Beginners Guide to ggplot2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ggplot2初学者指南</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/a-beginners-guide-to-ggplot2-72b3b902a602?source=collection_archive---------1-----------------------#2022-11-22">https://medium.com/geekculture/a-beginners-guide-to-ggplot2-72b3b902a602?source=collection_archive---------1-----------------------#2022-11-22</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/0e4a2324dbf0773b872870ee33c56f61.png" data-original-src="https://miro.medium.com/v2/resize:fit:480/format:webp/1*tMHvRCV16BFoJbU2F-o3rw.png"/></div><figcaption class="im in et er es io ip bd b be z dx">Image by Author</figcaption></figure><p id="079d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">流行一句话，行动胜于雄辩，这就是为什么在数据分析领域，我们不能过分强调数据可视化的重要性。一个单一的视觉化图像有能力传达大量的信息。</p><p id="a646" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在本文中，您将学习如何使用流行的<code class="du jo jp jq jr b">ggplot2</code>包在R编程中创建数据可视化。</p><p id="835d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">ggplot2包允许您基于图形的<a class="ae js" rel="noopener" href="/tdebeus/think-about-the-grammar-of-graphics-when-improving-your-graphs-18e3744d8d18">语法创建数据可视化，图形</a>由7层组成。</p><ol class=""><li id="bd86" class="jt ju hi is b it iu ix iy jb jv jf jw jj jx jn jy jz ka kb bi translated"><code class="du jo jp jq jr b">Data</code> —您有兴趣可视化的数据</li><li id="afdb" class="jt ju hi is b it kc ix kd jb ke jf kf jj kg jn jy jz ka kb bi translated"><code class="du jo jp jq jr b">Aesthetics</code> —您将绘制数据的比例尺，这是您的<code class="du jo jp jq jr b"> x</code>和<code class="du jo jp jq jr b">y</code>-轴。</li><li id="f217" class="jt ju hi is b it kc ix kd jb ke jf kf jj kg jn jy jz ka kb bi translated"><code class="du jo jp jq jr b">Geometry</code> —这是你定义你想要的可视化形状的地方。</li><li id="cd89" class="jt ju hi is b it kc ix kd jb ke jf kf jj kg jn jy jz ka kb bi translated"><code class="du jo jp jq jr b">Facets</code> —这是将你的剧情拆分成各种支线剧情，以获得更清晰的视野的过程。</li><li id="4dac" class="jt ju hi is b it kc ix kd jb ke jf kf jj kg jn jy jz ka kb bi translated"><code class="du jo jp jq jr b">Statistics </code> —在这一层，您定义数据的统计摘要或趋势。</li><li id="8780" class="jt ju hi is b it kc ix kd jb ke jf kf jj kg jn jy jz ka kb bi translated"><code class="du jo jp jq jr b">Coordinates</code> —这是你描述你的绘图空间的地方。</li><li id="2500" class="jt ju hi is b it kc ix kd jb ke jf kf jj kg jn jy jz ka kb bi translated"><code class="du jo jp jq jr b">Themes</code> —您可以在此自定义数据中的非数据元素，如字体、图形填充和轮廓等。</li></ol><figure class="ki kj kk kl fd ij er es paragraph-image"><div class="er es kh"><img src="../Images/15b6eecd6f4ea982b3486720bd7785e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1388/format:webp/0*3k2gcWr0Vy1X57j_.png"/></div></figure><p id="4512" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在本文中，您将学习如何使用ggplot2绘制和解释5种主要的数据可视化。</p><ol class=""><li id="897d" class="jt ju hi is b it iu ix iy jb jv jf jw jj jx jn jy jz ka kb bi translated">条形图</li><li id="e6e3" class="jt ju hi is b it kc ix kd jb ke jf kf jj kg jn jy jz ka kb bi translated">箱线图</li><li id="70ec" class="jt ju hi is b it kc ix kd jb ke jf kf jj kg jn jy jz ka kb bi translated">散点图</li><li id="f6cb" class="jt ju hi is b it kc ix kd jb ke jf kf jj kg jn jy jz ka kb bi translated">线形图</li><li id="feb3" class="jt ju hi is b it kc ix kd jb ke jf kf jj kg jn jy jz ka kb bi translated">柱状图</li></ol><h1 id="a561" class="km kn hi bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">安装和装载<code class="du jo jp jq jr b"> ggplot2</code>包</h1><p id="95a3" class="pw-post-body-paragraph iq ir hi is b it lk iv iw ix ll iz ja jb lm jd je jf ln jh ji jj lo jl jm jn hb bi translated">在使用ggplot2包之前，首先需要从C.R.A.N安装这个包，C . R . a . n是几千个R包的存档。</p><p id="08b0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您可以通过运行下面的命令来安装和加载该软件包。</p><pre class="ki kj kk kl fd lp jr lq bn lr ls bi"><span id="90ca" class="lt kn hi jr b be lu lv l lw lx"># install package<br/>install.packages("ggplot2")<br/><br/># load package<br/>library(ggplot2)</span></pre><h1 id="ddeb" class="km kn hi bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">钻石数据集</h1><p id="2058" class="pw-post-body-paragraph iq ir hi is b it lk iv iw ix ll iz ja jb lm jd je jf ln jh ji jj lo jl jm jn hb bi translated">您将在本文中使用的数据集是diamonds数据集，它与<code class="du jo jp jq jr b">ggplot2</code>包一起加载。</p><p id="6469" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要方便地查看数据，请运行下面的代码。</p><pre class="ki kj kk kl fd lp jr lq bn lr ls bi"><span id="c458" class="lt kn hi jr b be lu lv l lw lx">View(diamonds)</span></pre><figure class="ki kj kk kl fd ij er es paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="er es ly"><img src="../Images/97fa26760df5f19590cf47bc8465248f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*4bdEr3uUVbpv8fLg.png"/></div></div></figure><p id="5b11" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">该数据集包含近54，000颗钻石的价格和属性。</p><ul class=""><li id="f14b" class="jt ju hi is b it iu ix iy jb jv jf jw jj jx jn md jz ka kb bi translated"><code class="du jo jp jq jr b">carat </code> —这是一颗钻石的重量</li><li id="c51b" class="jt ju hi is b it kc ix kd jb ke jf kf jj kg jn md jz ka kb bi translated"><code class="du jo jp jq jr b">cut</code> —这是钻石切割的质量；一般、良好、非常好、优质、理想。</li><li id="80f3" class="jt ju hi is b it kc ix kd jb ke jf kf jj kg jn md jz ka kb bi translated"><code class="du jo jp jq jr b">color</code> —钻石的颜色从<em class="me"> D(最好)到J(最差)</em>。</li><li id="b6cc" class="jt ju hi is b it kc ix kd jb ke jf kf jj kg jn md jz ka kb bi translated"><code class="du jo jp jq jr b">clarity</code> —衡量钻石净度的标准；<em class="me"> I1(最差)，SI2，SI1，VS2，VS1，VVS2，VVS1，IF(最好)。</em></li><li id="d006" class="jt ju hi is b it kc ix kd jb ke jf kf jj kg jn md jz ka kb bi translated"><code class="du jo jp jq jr b">depth</code> —总深度百分比= z /平均值(x，y)= 2 * z/(x+y)(43–79)</li><li id="22aa" class="jt ju hi is b it kc ix kd jb ke jf kf jj kg jn md jz ka kb bi translated"><code class="du jo jp jq jr b">width</code> —钻石顶部相对于最宽点的宽度(43–95)。</li><li id="604f" class="jt ju hi is b it kc ix kd jb ke jf kf jj kg jn md jz ka kb bi translated"><code class="du jo jp jq jr b">x</code> —钻石长度<em class="me">毫米</em></li><li id="e7da" class="jt ju hi is b it kc ix kd jb ke jf kf jj kg jn md jz ka kb bi translated"><code class="du jo jp jq jr b">y</code> —宽度为<em class="me">毫米</em></li><li id="26c5" class="jt ju hi is b it kc ix kd jb ke jf kf jj kg jn md jz ka kb bi translated"><code class="du jo jp jq jr b">z</code> —深度为<em class="me">毫米</em></li></ul><p id="eb16" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在数据可视化的帮助下，您将使用这个数据集来回答各种问题，例如</p><ul class=""><li id="5b70" class="jt ju hi is b it iu ix iy jb jv jf jw jj jx jn md jz ka kb bi translated">最昂贵的钻石</li><li id="9573" class="jt ju hi is b it kc ix kd jb ke jf kf jj kg jn md jz ka kb bi translated">最便宜的钻石</li><li id="3cf8" class="jt ju hi is b it kc ix kd jb ke jf kf jj kg jn md jz ka kb bi translated">钻石价格分布均匀吗？</li><li id="e2a3" class="jt ju hi is b it kc ix kd jb ke jf kf jj kg jn md jz ka kb bi translated">钻石的平均价格和中间价格。</li><li id="6a2f" class="jt ju hi is b it kc ix kd jb ke jf kf jj kg jn md jz ka kb bi translated">钻石克拉有可能影响钻石价格吗？</li></ul><h1 id="7235" class="km kn hi bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">ggplot2的结构</h1><p id="60c9" class="pw-post-body-paragraph iq ir hi is b it lk iv iw ix ll iz ja jb lm jd je jf ln jh ji jj lo jl jm jn hb bi translated">不管你想构建什么样的情节，<code class="du jo jp jq jr b">ggplot2</code>都有一个特定的结构。</p><pre class="ki kj kk kl fd lp jr lq bn lr ls bi"><span id="256c" class="lt kn hi jr b be lu lv l lw lx">ggplot(data = diamonds,<br/>       mapping = aes(<br/>         x = cut,<br/>         y = price<br/>       ))</span></pre><p id="24fb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><code class="du jo jp jq jr b">ggplot()</code>函数是您传递数据和美学的地方，数据参数接受您正在可视化的数据，在这种情况下是钻石数据集，而<code class="du jo jp jq jr b">mapping</code>参数接受<code class="du jo jp jq jr b">x</code>和<code class="du jo jp jq jr b">y</code>轴，如果您希望有一个变量作为<code class="du jo jp jq jr b">fill</code>，我将在后面解释。</p><p id="5579" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当你运行上面的代码时，你会得到这样的结果，</p><figure class="ki kj kk kl fd ij er es paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="er es mf"><img src="../Images/42106aae7bc30cd298502a198b18ec64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*vPdOPbtxAUMJ_EN5.png"/></div></div></figure><p id="80d9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这个图表中，您将定义想要创建的可视化类型。您还可以看到您定义的轴。</p><p id="3eb9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下一步是用<code class="du jo jp jq jr b">+</code>符号添加您想要创建的可视化类型。</p><p id="87e5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">假设你要创建abox plott，创建盒图的函数是<code class="du jo jp jq jr b">geom_boxplot()</code>，要这样添加。</p><pre class="ki kj kk kl fd lp jr lq bn lr ls bi"><span id="bd94" class="lt kn hi jr b be lu lv l lw lx">ggplot(data = diamonds,<br/>       mapping = aes(<br/>         x = cut,<br/>         y = price<br/>       )) +<br/>  geom_boxplot()</span></pre><figure class="ki kj kk kl fd ij er es paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="er es mg"><img src="../Images/462d40f3ecfe6bb35a5c5803dbf17f19.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ZRXa68AkSlyqYcMY.png"/></div></div></figure><p id="4f9b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，只关注结构，这是你用<code class="du jo jp jq jr b">ggplot2</code>创建可视化的基础。</p><p id="bcb5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在接下来的章节中，您将学习如何定制您的情节。</p><p id="a5a5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">就像您添加盒状图一样，您可以使用<code class="du jo jp jq jr b">+</code>符号添加额外的元素，直到您知道您想要添加的元素的功能。</p><p id="0c15" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您的可视化可以同时具有<code class="du jo jp jq jr b">x</code>和<code class="du jo jp jq jr b">y-axis</code>，或者只有<code class="du jo jp jq jr b">x-axis</code>，我们将在条形图的情况下使用。</p><p id="096a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在让我们从最常见的数据可视化开始，条形图。</p><h1 id="c9cb" class="km kn hi bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">条形图</h1><p id="e577" class="pw-post-body-paragraph iq ir hi is b it lk iv iw ix ll iz ja jb lm jd je jf ln jh ji jj lo jl jm jn hb bi translated">条形图是数据分析中最常用的绘图类型。</p><p id="1c36" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">它用于可视化数据中分类变量的频率。</p><p id="35ef" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">就像你现在要演示的，每颗钻石切割的频率。</p><p id="475f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你要做的第一件事是首先铺设你的结构，但是这次没有使用<code class="du jo jp jq jr b">y</code>-轴，条形图只使用一个轴，因为另一个轴是你感兴趣的钻石切割的频率。</p><pre class="ki kj kk kl fd lp jr lq bn lr ls bi"><span id="d5aa" class="lt kn hi jr b be lu lv l lw lx">ggplot(data = diamonds, <br/>       mapping = aes(<br/>         x = cut<br/>       ))</span></pre><p id="8748" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后你可以添加<code class="du jo jp jq jr b">geom_bar()</code>功能</p><pre class="ki kj kk kl fd lp jr lq bn lr ls bi"><span id="29ad" class="lt kn hi jr b be lu lv l lw lx">ggplot(data = diamonds, <br/>       mapping = aes(<br/>         x = cut<br/>       )) +<br/>  geom_bar()</span></pre><figure class="ki kj kk kl fd ij er es paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="er es mh"><img src="../Images/402cb279f3928dc4f8259dc7a9be3318.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*OS-62npxWpbYGMw2.png"/></div></div></figure><p id="2a8b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你可以从柱状图中看到，频率最高和最低的菱形。</p><p id="d261" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我将把那个留给你来回答！</p><p id="d04d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这个情节看起来很枯燥，让我们通过在<code class="du jo jp jq jr b">aes()</code>函数中添加<code class="du jo jp jq jr b">fill</code>参数来使它变得丰富多彩。</p><pre class="ki kj kk kl fd lp jr lq bn lr ls bi"><span id="4a3c" class="lt kn hi jr b be lu lv l lw lx">ggplot(data = diamonds, <br/>       mapping = aes(<br/>         x = cut,<br/>         fill = cut<br/>       )) +<br/>  geom_bar()</span></pre><figure class="ki kj kk kl fd ij er es paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="er es mi"><img src="../Images/db61ec60950fab04e309aa8366141575.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*KqA0UI7_rDcAmobi.png"/></div></div></figure><p id="94c7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这还差不多，这叫竖条情节。</p><p id="285e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当您想要可视化的类别数量很少时，可以使用它。</p><p id="d2e6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果有很多类别需要可视化，建议使用水平条形图。</p><p id="78de" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们将钻石净度的频率可视化在一个水平条形图上，</p><pre class="ki kj kk kl fd lp jr lq bn lr ls bi"><span id="2cf9" class="lt kn hi jr b be lu lv l lw lx">ggplot(data = diamonds, <br/>       mapping = aes(<br/>         y = clarity,<br/>         fill = clarity<br/>       )) +<br/>  geom_bar()</span></pre><figure class="ki kj kk kl fd ij er es paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="er es mi"><img src="../Images/ad3d39178c736a0a1199460ec6b884e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*BT9xBdXPzw5oPWYg.png"/></div></div></figure><p id="ac6a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你注意到发生了什么吗？</p><p id="06fb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">美学中的<code class="du jo jp jq jr b">x</code>论证改为<code class="du jo jp jq jr b">y</code>。这个小小的改变是强大的，它改变了你剧情的走向。</p><p id="4a18" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">最初，你在<code class="du jo jp jq jr b">x-axis</code>上分类，但现在你把它切换到了<code class="du jo jp jq jr b">y- axis.</code></p><p id="965b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你也可以在竖条图上添加<code class="du jo jp jq jr b">coord_flip()</code>函数来翻转它，而不是把美学中的<code class="du jo jp jq jr b">x</code>参数改成<code class="du jo jp jq jr b">y</code>。</p><pre class="ki kj kk kl fd lp jr lq bn lr ls bi"><span id="15b9" class="lt kn hi jr b be lu lv l lw lx">ggplot(data = diamonds, <br/>       mapping = aes(<br/>         x = clarity,<br/>         fill = clarity<br/>       )) +<br/>  geom_bar() +<br/>  coord_flip()</span></pre><figure class="ki kj kk kl fd ij er es paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="er es mi"><img src="../Images/367c0d3bc96a50851d1e4769bdc5fb83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*xNEFdD5SuRQo_D9x.png"/></div></div></figure><p id="0771" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">耶！你仍然得到同样的情节。</p><p id="5159" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你选择的方法由你自己决定，都很方便使用。</p><p id="1c9c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果想看到钻石颜色在各种切工中出现的频率怎么办，怎么做？</p><h1 id="a7a0" class="km kn hi bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">堆叠和分组条形图</h1><h2 id="283f" class="mj kn hi bd ko mk ml mm ks mn mo mp kw jb mq mr la jf ms mt le jj mu mv li mw bi translated">堆积条形图</h2><p id="4030" class="pw-post-body-paragraph iq ir hi is b it lk iv iw ix ll iz ja jb lm jd je jf ln jh ji jj lo jl jm jn hb bi translated">堆积条形图允许您可视化一个分类变量到另一个分类变量的数值。</p><figure class="ki kj kk kl fd ij er es paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="er es mx"><img src="../Images/80d8e70673c6fb6aec89345de1909a5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*tPk40kWY32cj1ytj.png"/></div></div></figure><p id="1950" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">堆积条形图类似于在同一个图中绘制两个类别，不同的是，每个类别都将另一个子类别解释为子条形图。</p><p id="a852" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">从上面的图中，您可以看出<em class="me">理想</em>钻石出现的频率最高，净度<em class="me"> VS2 </em>钻石出现的频率最高，位于<em class="me">理想</em>钻石切工下方。</p><p id="2869" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我给你一个快速的练习，在所有的钻石切割中，最不清晰的是什么？</p><p id="93f3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你猜对了，这个<em class="me">如果</em>清晰的话。</p><p id="23c0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">不要担心，你现在将绘制一个并更好地掌握它，你将在各种钻石切割中可视化各种钻石颜色的频率。</p><p id="7389" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要绘制堆积条形图，唯一需要更改的是fill参数。</p><p id="2880" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在前面的例子中，<code class="du jo jp jq jr b">x</code>变量和<code class="du jo jp jq jr b">fill</code>变量是相同的，这一次子类别或填充将是数据集中的另一个分类变量。</p><pre class="ki kj kk kl fd lp jr lq bn lr ls bi"><span id="131f" class="lt kn hi jr b be lu lv l lw lx">ggplot(data = diamonds,<br/>       mapping = aes(<br/>       x = cut, <br/>       fill = color)) +<br/>geom_bar()</span></pre><figure class="ki kj kk kl fd ij er es paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="er es mx"><img src="../Images/12736f7e7cfe7cf929abfdc0a4fd1754.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Qj7Q1GGGIsgjMfVK.png"/></div></div></figure><p id="82f5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你可以看到，许多问题都可以从这个单一的图中得到答案，如颜色为J的钻石是所有切割中出现频率最低的钻石。</p><p id="9f9a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">从剧情中还能承载什么信息？</p><h2 id="a6ff" class="mj kn hi bd ko mk ml mm ks mn mo mp kw jb mq mr la jf ms mt le jj mu mv li mw bi translated">分组条形图</h2><p id="8d58" class="pw-post-body-paragraph iq ir hi is b it lk iv iw ix ll iz ja jb lm jd je jf ln jh ji jj lo jl jm jn hb bi translated">与堆积条形图类似，分组条形图将并排绘制子条形图。</p><figure class="ki kj kk kl fd ij er es paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="er es my"><img src="../Images/aae6515de55cf747af013583dca70de6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*inpFqWejgXA4LhqE.png"/></div></div></figure><p id="f81a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你可以看到，在每一颗钻石的切割中，钻石的净度都是并排的。</p><pre class="ki kj kk kl fd lp jr lq bn lr ls bi"><span id="54ed" class="lt kn hi jr b be lu lv l lw lx">ggplot(data = diamonds,           <br/>       mapping = aes(<br/>         x = cut,<br/>         fill = color)) + <br/>  geom_bar(position = "dodge")</span></pre><p id="f72a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">只需添加<code class="du jo jp jq jr b">position = “dodge”</code>参数，就可以得到分组条形图，而不是堆叠条形图。</p><h1 id="529c" class="km kn hi bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">箱线图</h1><p id="340a" class="pw-post-body-paragraph iq ir hi is b it lk iv iw ix ll iz ja jb lm jd je jf ln jh ji jj lo jl jm jn hb bi translated">箱形图是数据可视化中最全面的图之一，箱形图用于可视化基于其<a class="ae js" href="https://www.mathsisfun.com/data/quartiles.html" rel="noopener ugc nofollow" target="_blank">四分位数</a>的数值数据的分布。</p><p id="054b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">四分位数是将数据集分成四等份的值。</p><p id="0e69" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">箱线图也称为盒须图。</p><p id="19ae" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这个盒状图用于可视化一个分类变量对一个数字变量，就像你要可视化一个钻石切割对一个钻石价格。</p><p id="3d27" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">从箱线图中，你可以知道钻石价格的中位数和四分位数。</p><p id="4897" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要绘制盒状图，只需在美学函数中给<code class="du jo jp jq jr b">x</code>参数一个分类变量，而给<code class="du jo jp jq jr b">y</code>参数一个数值变量。</p><pre class="ki kj kk kl fd lp jr lq bn lr ls bi"><span id="db13" class="lt kn hi jr b be lu lv l lw lx">ggplot(data = diamonds,           <br/>       mapping = aes(<br/>         x = cut,<br/>         y = price)) + <br/>  geom_boxplot()</span></pre><figure class="ki kj kk kl fd ij er es paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="er es mg"><img src="../Images/76f5d9533fcd913f2a170ecb3122089d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*RHI-d4_awFXTqluC.png"/></div></div></figure><p id="34e2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你对此如何解读？</p><p id="8f9a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们用这张详细的图表来解释一下，</p><figure class="ki kj kk kl fd ij er es paragraph-image"><div class="er es mz"><img src="../Images/fcabd38813f57ffcc4ca09c2e0eac492.png" data-original-src="https://miro.medium.com/v2/resize:fit:1190/format:webp/0*4No04g4_6BtonTYC.png"/></div></figure><p id="f918" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">盒图由盒和须组成，因此命名为盒和须图。</p><p id="bfab" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我之前解释过，箱形图将一个数据集分成4个相等的部分，称为四分位数。</p><p id="3a62" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">因此，你有第一个四分位数，第二个四分位数，第三个四分位数。</p><ul class=""><li id="b374" class="jt ju hi is b it iu ix iy jb jv jf jw jj jx jn md jz ka kb bi translated">25%的观察值低于第一个四分位数</li><li id="73a3" class="jt ju hi is b it kc ix kd jb ke jf kf jj kg jn md jz ka kb bi translated">50%的观察值低于第二个四分位数，也称为中位数。</li><li id="a832" class="jt ju hi is b it kc ix kd jb ke jf kf jj kg jn md jz ka kb bi translated">75%的观察值低于第三个四分位数</li><li id="a467" class="jt ju hi is b it kc ix kd jb ke jf kf jj kg jn md jz ka kb bi translated">数据集中的最高值通常位于第三个四分位数之上，这是您可以看到最大值的地方。</li></ul><p id="7d6c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">回到钻石切工与钻石价格的关系图，如果你比较所有钻石切工，你会发现理想钻石的中值价格最低，而优质钻石的中值价格最高。</p><p id="8d70" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你还会注意到，在理想的<em class="me">钻石中，低于中值的价值与高于中值的价值相比并不多，同样的情况也适用于<em class="me">高级</em>钻石。</em></p><p id="4124" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">较短的方框图表示特定钻石切割中的钻石价格彼此接近，就像<em class="me">公平</em>钻石切割一样。</p><p id="2c80" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">与钻石价格不太接近的较长时期不同，这一点可以从<em class="me">优质</em>钻石中看出。</p><p id="8ec0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您可以使用<code class="du jo jp jq jr b">color</code>参数将一个变量作为颜色添加到方框图中，使其看起来更美观。</p><pre class="ki kj kk kl fd lp jr lq bn lr ls bi"><span id="5ee9" class="lt kn hi jr b be lu lv l lw lx">ggplot(data = diamonds,           <br/>       mapping = aes(<br/>         x = cut,<br/>         y = price,<br/>         color = cut)) + <br/>  geom_boxplot()</span></pre><figure class="ki kj kk kl fd ij er es paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="er es na"><img src="../Images/c46e55c7dfe0855e01953a3fab2308d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*4g6ujSVE7qcYhR1r.png"/></div></div></figure><p id="adc9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">或者，如果你觉得这看起来很奇怪，就使用<code class="du jo jp jq jr b">fill</code>论点。</p><pre class="ki kj kk kl fd lp jr lq bn lr ls bi"><span id="13fe" class="lt kn hi jr b be lu lv l lw lx">ggplot(data = diamonds,           <br/>       mapping = aes(<br/>         x = cut,<br/>         y = price,<br/>         fill = cut)) + <br/>  geom_boxplot()</span></pre><figure class="ki kj kk kl fd ij er es paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="er es nb"><img src="../Images/27c84ccceb28150fc253390cdc839ca3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*iIH4U_JZrjWxdT-U.png"/></div></div></figure><h1 id="4707" class="km kn hi bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">散点图</h1><p id="8913" class="pw-post-body-paragraph iq ir hi is b it lk iv iw ix ll iz ja jb lm jd je jf ln jh ji jj lo jl jm jn hb bi translated">相关性是两个变量之间关系的度量，例如，高智商的学生很可能比低智商的学生有更高的测试/考试分数。</p><p id="9612" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这意味着，随着学生智商的提高，他/她通过考试的可能性也会增加。</p><p id="586f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你可能想知道为什么我要谈论相关性，散点图是测量两个变量之间相关性的传统方法之一。</p><p id="acba" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">散点图可以让你知道钻石的价格和克拉数是否相关，也让你有机会知道高克拉钻石是否比低价钻石更贵。</p><p id="1be8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要了解更多关于相关性的内容，您可以查看文章<a class="ae js" rel="noopener" href="/@adejumo999/correlation-how-does-amazon-know-what-i-want-56cfccfe13c1"> <em class="me">相关性在推荐系统中是如何工作的？</em> </a></p><p id="4392" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">与上面的图不同，散点图只接受数字变量。这些变量中的这些值被绘制出来，因此图上点的方向被用来解释两个变量之间的相关性。</p><p id="e886" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们回到菱形数据集，看看<code class="du jo jp jq jr b">price</code>和<code class="du jo jp jq jr b">carat</code>变量是否有关系。</p><p id="6e0e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这一次，您将传递<code class="du jo jp jq jr b">price</code>作为您的x轴，传递<code class="du jo jp jq jr b">carat</code>作为您的y轴，并添加<code class="du jo jp jq jr b">geom_point()</code>函数。</p><pre class="ki kj kk kl fd lp jr lq bn lr ls bi"><span id="7246" class="lt kn hi jr b be lu lv l lw lx">ggplot(data = diamonds,           <br/>       mapping = aes(<br/>         x = price,<br/>         y = carat)) + <br/>  geom_point()</span></pre><figure class="ki kj kk kl fd ij er es paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="er es mx"><img src="../Images/21db16bbbe7ee34f88b4c97ad00152ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*uHZ_iUT_0vbv3Lgp.png"/></div></div></figure><p id="42fb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">从上面的图中，你会看到随着钻石克拉的增加，钻石价格也会增加，反之亦然。</p><p id="d7bc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这表明钻石和克拉有很强的正相关关系。</p><p id="8d06" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下面的图总结了你如何解释你遇到的任何散点图。</p><figure class="ki kj kk kl fd ij er es paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="er es nc"><img src="../Images/695eea3c6c9ec285a1c58a6a56bb21b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Tcti-I1UA6BoOGxk.png"/></div></div></figure><ul class=""><li id="e64b" class="jt ju hi is b it iu ix iy jb jv jf jw jj jx jn md jz ka kb bi translated">第一张图显示了正相关关系，就像你在上面绘制的钻石价格随克拉价值增加的示例图一样。</li><li id="7afd" class="jt ju hi is b it kc ix kd jb ke jf kf jj kg jn md jz ka kb bi translated">中间的图与第一张图相反，表示负相关，一个例子是学生缺课的增加和成绩的下降。一个学生缺课越多，他的成绩就越有可能下降。</li><li id="4260" class="jt ju hi is b it kc ix kd jb ke jf kf jj kg jn md jz ka kb bi translated">两个变量没有关系的情况称为<em class="me">无相关性</em>，你会得到一个看起来像最后一个图的图。</li></ul><h1 id="fdd6" class="km kn hi bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">柱状图</h1><p id="81c1" class="pw-post-body-paragraph iq ir hi is b it lk iv iw ix ll iz ja jb lm jd je jf ln jh ji jj lo jl jm jn hb bi translated">到目前为止，您应该知道条形图用于绘制数据集中分类变量的频率。</p><p id="b11e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果想得到一个数据集中数值变量的出现频率呢？</p><p id="f0d0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这就是直方图发挥作用的地方。</p><p id="500b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">直方图和条形图类似，除了前者中的条形连接在一起，而后者中的条形由相等的间距隔开。</p><p id="7bc1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">就像柱状图一样，直方图只采用一个数值变量。</p><p id="2317" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们通过将x轴设置为<code class="du jo jp jq jr b">price</code>并传递<code class="du jo jp jq jr b">geom_histogram() </code>函数，使用直方图来可视化数据集中的钻石价格。</p><pre class="ki kj kk kl fd lp jr lq bn lr ls bi"><span id="9bae" class="lt kn hi jr b be lu lv l lw lx">ggplot(data = diamonds, <br/>         mapping = aes(x = price)) +<br/>  geom_histogram(bins = 50)</span></pre><p id="8491" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">bin参数允许您在图表上设置想要的条形数量。柱的数量越多，直方图上的条的数量就越多，反之亦然。</p><p id="5fad" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">从下面的柱状图中，你会发现，大多数钻石的价格在0美元到5，000美元之间，很少有在15，000美元到20，000美元之间的。</p><figure class="ki kj kk kl fd ij er es paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="er es nd"><img src="../Images/2354612374cbeea4cc74f57532bf71dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*fp3-f6ndMlyla-Ub.png"/></div></div></figure><p id="07fe" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">将bin设置为10，您将得到一个包含10列的直方图。</p><pre class="ki kj kk kl fd lp jr lq bn lr ls bi"><span id="1659" class="lt kn hi jr b be lu lv l lw lx">ggplot(data = diamonds, <br/>         mapping = aes(x = price)) +<br/>  geom_histogram(bins = 10)</span></pre><figure class="ki kj kk kl fd ij er es paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="er es ne"><img src="../Images/6e8978b38fbf576644208681a449301f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ofpOFwLgz1EQNfd9.png"/></div></div></figure><p id="a540" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">有时使用较高的频段比使用较低的频段能提供更多的信息。</p><h1 id="a27f" class="km kn hi bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">曲线图</h1><p id="a403" class="pw-post-body-paragraph iq ir hi is b it lk iv iw ix ll iz ja jb lm jd je jf ln jh ji jj lo jl jm jn hb bi translated">折线图是一种基于时间显示数据的数据可视化类型，例如了解一个国家的人口在过去几年中是如何变化的。</p><p id="c4b4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在线图中，<code class="du jo jp jq jr b">x-axis</code>表示时间，以分钟、天、周、月或年为单位。</p><p id="eb8c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">与上面的例子一样，<code class="du jo jp jq jr b">y-axis</code>包含感兴趣的变量，即一个国家的总人口。</p><p id="c8e6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">使用<code class="du jo jp jq jr b">geom_line()</code>功能绘制线形图，就像绘制其他图形一样</p><p id="3188" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您一直使用的diamonds数据集不包含时间变量，但不用担心，我们有经济数据集，它也随ggplot2包一起提供。</p><p id="96e0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">它包含美国的经济时间序列数据，有<code class="du jo jp jq jr b">574</code>行和<code class="du jo jp jq jr b">6</code>变量。</p><figure class="ki kj kk kl fd ij er es paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="er es nf"><img src="../Images/b3cbe12c45c232e6699eec0c95d67829.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*mhjUHj_47l5OhMNp.png"/></div></div></figure><ul class=""><li id="9762" class="jt ju hi is b it iu ix iy jb jv jf jw jj jx jn md jz ka kb bi translated"><code class="du jo jp jq jr b">date </code> —数据收集的月份</li><li id="7fc4" class="jt ju hi is b it kc ix kd jb ke jf kf jj kg jn md jz ka kb bi translated"><code class="du jo jp jq jr b">pce</code> —以十亿美元计的个人消费支出</li><li id="7d33" class="jt ju hi is b it kc ix kd jb ke jf kf jj kg jn md jz ka kb bi translated"><code class="du jo jp jq jr b">pop</code> —总人口，以千计</li><li id="b014" class="jt ju hi is b it kc ix kd jb ke jf kf jj kg jn md jz ka kb bi translated"><code class="du jo jp jq jr b">psavert </code> —个人储蓄率</li><li id="9cf5" class="jt ju hi is b it kc ix kd jb ke jf kf jj kg jn md jz ka kb bi translated"><code class="du jo jp jq jr b">unempmed</code> —以周为单位的失业持续时间中位数</li><li id="cc10" class="jt ju hi is b it kc ix kd jb ke jf kf jj kg jn md jz ka kb bi translated"><code class="du jo jp jq jr b">unemploy </code> —失业人数，以千计</li></ul><p id="3199" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为了演示如何使用R可视化线形图，您将可视化美国人口从1967年到2015年的变化。</p><pre class="ki kj kk kl fd lp jr lq bn lr ls bi"><span id="abec" class="lt kn hi jr b be lu lv l lw lx">ggplot(data = economics, <br/>       mapping = aes(<br/>       x = date,<br/>       y = pop)) +<br/>  geom_line()</span></pre><figure class="ki kj kk kl fd ij er es paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="er es ng"><img src="../Images/f6d87f87c9ba494fb3fa846a49b30b4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*XF499woP3-1LOpvZ.png"/></div></div></figure><p id="a572" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你可以看到这些年来美国人口呈上升趋势。</p><p id="c0db" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">作为一个快速练习，我会让你想象任何其他变量。</p><h1 id="d986" class="km kn hi bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">标记</h1><p id="87f6" class="pw-post-body-paragraph iq ir hi is b it lk iv iw ix ll iz ja jb lm jd je jf ln jh ji jj lo jl jm jn hb bi translated">如果您已经注意到，您创建的图没有标题，变量的名称也显示为轴的名称。</p><p id="4847" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您可以自定义绘图轴和标题，并使用；</p><ul class=""><li id="5097" class="jt ju hi is b it iu ix iy jb jv jf jw jj jx jn md jz ka kb bi translated"><code class="du jo jp jq jr b">ggtitle</code> —用于标题标签</li><li id="c9f1" class="jt ju hi is b it kc ix kd jb ke jf kf jj kg jn md jz ka kb bi translated"><code class="du jo jp jq jr b">xlab</code> —用于x轴标签</li><li id="3ab8" class="jt ju hi is b it kc ix kd jb ke jf kf jj kg jn md jz ka kb bi translated"><code class="du jo jp jq jr b">ylab </code> —用于y轴标签</li></ul><p id="c915" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您在上面绘制的线形图是由重新创建的；</p><pre class="ki kj kk kl fd lp jr lq bn lr ls bi"><span id="5570" class="lt kn hi jr b be lu lv l lw lx">ggplot(data = economics, <br/>       mapping = aes(<br/>       x = date,<br/>       y = pop)) +<br/>  geom_line() +<br/>  ggtitle("Population of the United States from 1967 - 2015") +<br/>  xlab("Date") +<br/>  ylab("Population")</span></pre><figure class="ki kj kk kl fd ij er es paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="er es mg"><img src="../Images/ba4c1a26ff3041145de68e8495aa33a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*xnWDKd-1clKbw1DC.png"/></div></div></figure><h1 id="fd6b" class="km kn hi bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">刻面</h1><p id="a137" class="pw-post-body-paragraph iq ir hi is b it lk iv iw ix ll iz ja jb lm jd je jf ln jh ji jj lo jl jm jn hb bi translated">分面是将一个情节分割成不同的子情节，分面让你有机会查看不同类别的情节。</p><p id="bcec" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">通过将<code class="du jo jp jq jr b">facet_wrap()</code>或<code class="du jo jp jq jr b">facet_grid() </code>添加到可视化中，可在ggplot2中进行刻面。</p><p id="946c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">以钻石数据集为例，假设您想知道特定切割中不同颜色下的钻石数量。</p><p id="d9dc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你可以使用faceting来显示这个特殊的信息，你可以传递带有一些参数的<code class="du jo jp jq jr b">facet_wrap()</code>函数，我将在下面的代码中解释这些参数。</p><pre class="ki kj kk kl fd lp jr lq bn lr ls bi"><span id="e52b" class="lt kn hi jr b be lu lv l lw lx">library(ggplot2)<br/>ggplot(data = diamonds, <br/>       mapping = aes(x = cut,<br/>                     fill = cut)) +<br/>  geom_bar() +<br/>  facet_wrap(color ~ .)</span></pre><figure class="ki kj kk kl fd ij er es paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="er es nh"><img src="../Images/01942680692c836b3053cf92e3ca9358.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e1XBGnAmesj-HGn0nJV9Ag.png"/></div></div><figcaption class="im in et er es io ip bd b be z dx">Faceting number of diamonds by cut, by color</figcaption></figure><p id="bf44" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">符号被称为Tilda，它告诉facet函数图形应该被变量<code class="du jo jp jq jr b">color</code>分割，就像你在上面看到的一样。</p><p id="1a2e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><code class="du jo jp jq jr b">facet_grid()</code>做了同样的事情，除了传递到函数中的任何变量，将图形分割成特定变量在单行或单列上的值的数量。</p><p id="e940" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这与<code class="du jo jp jq jr b">facet_wrap()</code>不同，后者根据变量中值的数量将图分成几行和几列。</p><pre class="ki kj kk kl fd lp jr lq bn lr ls bi"><span id="2d25" class="lt kn hi jr b be lu lv l lw lx">library(ggplot2)<br/>ggplot(data = diamonds, <br/>       mapping = aes(x = cut,<br/>                     fill = cut)) +<br/>  geom_bar() +<br/>  facet_grid(color ~ .)</span></pre><figure class="ki kj kk kl fd ij er es paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="er es ni"><img src="../Images/2dd035ebcb4c60edfdb8e71f55573aef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pEdllRQB8P4CLX_pxSL5cQ.png"/></div></div><figcaption class="im in et er es io ip bd b be z dx">Facetting with facet_grid()</figcaption></figure><p id="efcd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">通过L.H.S上的faceting变量，该图按照颜色的数量(在本例中为7)水平分割成一列和多行。</p><p id="ab17" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在R.H.S上传递颜色变量，通过<code class="du jo jp jq jr b">color</code>变量中的7种情况，该图被垂直分割成多列和一行。</p><pre class="ki kj kk kl fd lp jr lq bn lr ls bi"><span id="d2f8" class="lt kn hi jr b be lu lv l lw lx">library(ggplot2)<br/>ggplot(data = diamonds, <br/>       mapping = aes(x = cut,<br/>                     fill = cut)) +<br/>  geom_bar() +<br/>  facet_grid(. ~ color)</span></pre><figure class="ki kj kk kl fd ij er es paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="er es nj"><img src="../Images/6d83ddea4da6477d8d654284774f020e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3h8QmNbMJre0HJRpfrnqkg.png"/></div></div><figcaption class="im in et er es io ip bd b be z dx">Vertical splitting of plot with facet_grid()</figcaption></figure><p id="69a0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当刻面变量有很多值时，建议使用水平分割来避免轴标签相互重叠，如上所示。</p><h1 id="33e2" class="km kn hi bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">结论</h1><p id="9e38" class="pw-post-body-paragraph iq ir hi is b it lk iv iw ix ll iz ja jb lm jd je jf ln jh ji jj lo jl jm jn hb bi translated"><code class="du jo jp jq jr b">ggplot2</code>是R编程中最常用的可视化库，在本文中，您刚刚学习了如何绘制主要的图形并解释它们。</p><p id="0050" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">有很多套装可以让你有机会扩展<code class="du jo jp jq jr b">ggplot2</code>的威力。</p><p id="ca5a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我希望在你的下一个项目中，你能融入这一点，甚至更多。</p><p id="a694" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">感谢阅读。</p><h1 id="780a" class="km kn hi bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">参考文献和相关阅读</h1><ul class=""><li id="6c6f" class="jt ju hi is b it lk ix ll jb nk jf nl jj nm jn md jz ka kb bi translated"><a class="ae js" href="https://ggplot2.tidyverse.org/" rel="noopener ugc nofollow" target="_blank"> ggplot2文档</a></li><li id="6f36" class="jt ju hi is b it kc ix kd jb ke jf kf jj kg jn md jz ka kb bi translated"><a class="ae js" href="https://posit.co/wp-content/uploads/2022/10/data-visualization-1.pdf" rel="noopener ugc nofollow" target="_blank"> ggplot2备忘单</a></li><li id="1c1e" class="jt ju hi is b it kc ix kd jb ke jf kf jj kg jn md jz ka kb bi translated"><a class="ae js" rel="noopener" href="/@adejumo999/how-to-combine-multiple-plots-in-one-page-f17c21bf930b">如何用R编程将一页中的多个图合并</a></li></ul></div><div class="ab cl nn no gp np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="hb hc hd he hf"><h1 id="dd63" class="km kn hi bd ko kp nu kr ks kt nv kv kw kx nw kz la lb nx ld le lf ny lh li lj bi translated">分级编码</h1><p id="4f66" class="pw-post-body-paragraph iq ir hi is b it lk iv iw ix ll iz ja jb lm jd je jf ln jh ji jj lo jl jm jn hb bi translated">感谢您成为我们社区的一员！在你离开之前:</p><ul class=""><li id="d59e" class="jt ju hi is b it iu ix iy jb jv jf jw jj jx jn md jz ka kb bi translated">👏为故事鼓掌，跟着作者走👉</li><li id="4ac1" class="jt ju hi is b it kc ix kd jb ke jf kf jj kg jn md jz ka kb bi translated">📰查看<a class="ae js" href="https://levelup.gitconnected.com/?utm_source=pub&amp;utm_medium=post" rel="noopener ugc nofollow" target="_blank">升级编码出版物</a>中的更多内容</li><li id="51ed" class="jt ju hi is b it kc ix kd jb ke jf kf jj kg jn md jz ka kb bi translated">🔔关注我们:<a class="ae js" href="https://twitter.com/gitconnected" rel="noopener ugc nofollow" target="_blank">Twitter</a>|<a class="ae js" href="https://www.linkedin.com/company/gitconnected" rel="noopener ugc nofollow" target="_blank">LinkedIn</a>|<a class="ae js" href="https://newsletter.levelup.dev" rel="noopener ugc nofollow" target="_blank">时事通讯</a></li></ul><p id="236d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">🚀👉<a class="ae js" href="https://jobs.levelup.dev/talent/welcome?referral=true" rel="noopener ugc nofollow" target="_blank"> <strong class="is hj">加入升级达人集体，找到一份惊艳的工作</strong> </a></p></div></div>    
</body>
</html>