<html>
<head>
<title>Agensgraph I: Setup and Modelling</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">议程图一:设置和建模</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/agensgraph-i-setup-and-modelling-71416f606fac?source=collection_archive---------15-----------------------#2021-08-01">https://medium.com/geekculture/agensgraph-i-setup-and-modelling-71416f606fac?source=collection_archive---------15-----------------------#2021-08-01</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><blockquote class="if ig ih"><p id="f9ee" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><em class="hi"> Agensgraph是Bitnine开发的基于Postgres的开源图解决方案。最近被Apache采用，正在开发为Postgres的</em> <a class="ae jh" href="https://age.apache.org/" rel="noopener ugc nofollow" target="_blank"> <em class="hi">扩展</em> </a> <em class="hi">。</em></p></blockquote><p id="553b" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">在本帖中，您将了解Agensgraph存储和查询引擎如何利用Postgres。您还将通过一些例子熟悉图建模。</p><h2 id="c91b" class="jl jm hi bd jn jo jp jq jr js jt ju jv ji jw jx jy jj jz ka kb jk kc kd ke kf bi translated">储存；储备</h2><p id="0243" class="pw-post-body-paragraph ii ij hi il b im kg io ip iq kh is it ji ki iw ix jj kj ja jb jk kk je jf jg hb bi translated">在Postgres提供的数据库隔离之上，Agensgraph提供了更细粒度的隔离，您可以使用它在单个Postgres数据库中创建多个图形数据库。</p><p id="7ef0" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">为了表示节点和它们之间的关系，Agensgraph利用Postgres表。使用一个<a class="ae jh" href="https://bitnine.net/documentations/manual/agens_graph_developer_manual_en.html" rel="noopener ugc nofollow" target="_blank"> graphid </a>标识符在整个图中唯一地标识每个节点和边。节点和边都有JSONB属性列，用于存储节点或边相关的属性。边有两个额外的列，使用图形id来表示开始节点和结束节点。</p><p id="4134" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">教师&lt;&gt;学生关系的简单图形表示可以概括如下</p><figure class="km kn ko kp fd kq er es paragraph-image"><div class="er es kl"><img src="../Images/64f4edbda172ef8943be9a9b968b95e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1070/format:webp/0*9GYAObTSWV-7MHJ_.png"/></div></figure><p id="4583" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">图中创建的每种类型的节点/边都存储在Postgres数据库中唯一的表中。</p><p id="a782" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">尽管节点和边在内部存储为Postgres关系，但Agensgraph不允许使用SQL DML查询对它们进行任何更改。只有密码查询可以用于任何数据操作。</p><h2 id="3317" class="jl jm hi bd jn jo jp jq jr js jt ju jv ji jw jx jy jj jz ka kb jk kc kd ke kf bi translated">询问</h2><p id="2a77" class="pw-post-body-paragraph ii ij hi il b im kg io ip iq kh is it ji ki iw ix jj kj ja jb jk kk je jf jg hb bi translated">根据文档查询，支持图形<a class="ae jh" href="https://bitnine.net/documentations/manual/agens_graph_developer_manual_en.html#cypher-query-language" rel="noopener ugc nofollow" target="_blank">密码</a>、<a class="ae jh" href="https://bitnine.net/documentations/manual/agens_graph_developer_manual_en.html#sql-language" rel="noopener ugc nofollow" target="_blank"> SQL </a>以及两者的<a class="ae jh" href="https://bitnine.net/documentations/manual/agens_graph_developer_manual_en.html#hybrid-query-language" rel="noopener ugc nofollow" target="_blank">组合</a>。但是Cypher标准仍在开发中，因此可能不会遵循所有的语法。</p><p id="0daf" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">在我看来，文档还不够好，因此最好借助支持Cypher的图形数据库文档，例如<a class="ae jh" href="https://neo4j.com/docs/" rel="noopener ugc nofollow" target="_blank"> Neo4j </a>。但是Agensgraph支持有限的图函数，这意味着这些其他的图查询应该尝试一次。在Agensgraph的过去的<a class="ae jh" href="https://github.com/bitnine-oss/agensgraph/issues" rel="noopener ugc nofollow" target="_blank">问题</a>页面可以找到一个更有资源的地方来查找支持的密码查询。</p><p id="f16f" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">Agensgraph广泛使用Postgres连接，我们将在下一篇文章中深入讨论Agensgraph如何使用它们。</p><h2 id="bd27" class="jl jm hi bd jn jo jp jq jr js jt ju jv ji jw jx jy jj jz ka kb jk kc kd ke kf bi translated">建模</h2><p id="a3bc" class="pw-post-body-paragraph ii ij hi il b im kg io ip iq kh is it ji ki iw ix jj kj ja jb jk kk je jf jg hb bi translated">对于给定的数据集，如何在图中表示它被称为图建模。您可以在不同的图模型中表示一个数据集。您希望运行的查询类型会影响图形模型。假设您想要表示一个涉及银行交易的数据集，并且想要跟踪一个用户的交易。每个银行交易数据集行将有一个付款人、一个收款人以及他们之间的交易金额。我可以考虑用两种方式来表示这些数据:</p><p id="a112" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated"><strong class="il hj">方法一:</strong></p><figure class="km kn ko kp fd kq er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es kt"><img src="../Images/6bb763741095fb653395d3ea842de2b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*xi1J52lrOMfhMWzI.png"/></div></div></figure><p id="b089" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated"><strong class="il hj">方法2: </strong></p><figure class="km kn ko kp fd kq er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es kt"><img src="../Images/ff785de66d260bc8a2b1683652000ef2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*DJ6XUlOHbkBrTIqt.png"/></div></div></figure><p id="b126" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">在这种情况下，第二种表示更好，因为它有更少的节点和边，并且符合我们跟踪用户事务活动的目的。此外，更少的边和节点意味着查询的性能会更好，因为数据大小会更小。</p><p id="8904" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">因此，以下是为数据集建模时可以遵循的简单步骤:</p><ol class=""><li id="84b0" class="ky kz hi il b im in iq ir ji la jj lb jk lc jg ld le lf lg bi translated">了解查询需求。</li><li id="ccd2" class="ky kz hi il b im lh iq li ji lj jj lk jk ll jg ld le lf lg bi translated">浏览样本数据集。</li><li id="c03e" class="ky kz hi il b im lh iq li ji lj jj lk jk ll jg ld le lf lg bi translated">找出用不同的节点和边来表示一个数据块的多种方法。</li><li id="bc85" class="ky kz hi il b im lh iq li ji lj jj lk jk ll jg ld le lf lg bi translated">取具有最小节点和边的表示。使用不同的文档来源找出哪个查询可以满足需求。</li><li id="e040" class="ky kz hi il b im lh iq li ji lj jj lk jk ll jg ld le lf lg bi translated">通过获取样本数据来尝试计划的查询。</li></ol><h2 id="252f" class="jl jm hi bd jn jo jp jq jr js jt ju jv ji jw jx jy jj jz ka kb jk kc kd ke kf bi translated">安装指南</h2><p id="9bae" class="pw-post-body-paragraph ii ij hi il b im kg io ip iq kh is it ji ki iw ix jj kj ja jb jk kk je jf jg hb bi translated">您可以运行这个脚本在Linux中安装Agensgraph</p><figure class="km kn ko kp fd kq"><div class="bz dy l di"><div class="lm ln l"/></div></figure><p id="95a7" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated"><strong class="il hj">参考文献</strong></p><ul class=""><li id="e3e5" class="ky kz hi il b im in iq ir ji la jj lb jk lc jg lo le lf lg bi translated"><a class="ae jh" href="https://bitnine.net/documentations/manual/agens_graph_developer_manual_en.html" rel="noopener ugc nofollow" target="_blank">https://bit nine . net/documentations/manual/agens _ graph _ developer _ manual _ en . html</a></li><li id="8fc9" class="ky kz hi il b im lh iq li ji lj jj lk jk ll jg lo le lf lg bi translated"><a class="ae jh" href="https://github.com/bitnine-oss/agensgraph/issues" rel="noopener ugc nofollow" target="_blank">https://github.com/bitnine-oss/agensgraph/issues</a></li><li id="e3b9" class="ky kz hi il b im lh iq li ji lj jj lk jk ll jg lo le lf lg bi translated"><a class="ae jh" href="https://www.opencypher.org/cips" rel="noopener ugc nofollow" target="_blank">https://www.opencypher.org/cips</a></li><li id="cd0a" class="ky kz hi il b im lh iq li ji lj jj lk jk ll jg lo le lf lg bi translated"><a class="ae jh" href="https://neo4j.com/docs/" rel="noopener ugc nofollow" target="_blank">https://neo4j.com/docs/</a></li><li id="5d68" class="ky kz hi il b im lh iq li ji lj jj lk jk ll jg lo le lf lg bi translated"><a class="ae jh" href="https://raw.githubusercontent.com/htlim/agensgraph/5e12dcd811214944588fa924baa714d5da750e2e/src/test/regress/expected/cypher_dml.out" rel="noopener ugc nofollow" target="_blank">https://raw . githubusercontent . com/htlim/agens graph/5e 12 DCD 811214944588 fa 924 baa 714 D5 da 750 e2e/src/test/regression/expected/cypher _ DML . out</a></li></ul></div></div>    
</body>
</html>