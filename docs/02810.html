<html>
<head>
<title>Phase I: Ammo Count</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">第一阶段:清点弹药</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/phase-i-ammo-count-c080cfe5e7f0?source=collection_archive---------69-----------------------#2021-05-25">https://medium.com/geekculture/phase-i-ammo-count-c080cfe5e7f0?source=collection_archive---------69-----------------------#2021-05-25</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="ccb9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">今天的目标是限制玩家的弹药。我将设置玩家可以持有的最大弹药为15发，并在弹药耗尽时提供屏幕计数器和声音提示。</p><p id="54f9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，我需要给播放器添加两个变量。我将添加一个_maxAmmo和一个_ currentAmmo变量。最大弹药将被设置为15。两者都将是私有的和连载的，如下所示。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/72eeb1b2f156e25c6225473577b7afff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Mtr46-9etMWEhd5OMNFa6g.png"/></div></div></figure><p id="4467" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在LaserControl()方法中，我将添加一个检查，检查_ currentAmmo是否大于0，如下所示。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jp"><img src="../Images/3a3b1507c879b6080132f2dc5647551b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*46HkxDl4F8T2ZdOcc6Xnqw.png"/></div></div></figure><p id="dd55" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这将确保玩家只有在有弹药可用的情况下才能开火。同样，在条件语句中，我们添加了下面两行。一种是每次发射激光时将_ current amo减1，另一种是用_ current amo更新_uiManager。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jq"><img src="../Images/0f9c2be4caad9c98533a7d4eec789b47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wkO8KM7mhLeiZe1Ung8sWQ.png"/></div></div></figure><p id="1a02" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在第一个条件之后，我们添加一个else if，它将控制没有弹药可用时会发生什么。我将使用一个名为_ canPlayAmmoDepletedAudio的私有浮点来查看如果播放器弹出fire键，是否有足够的时间再次播放音频剪辑。此外，我将在UIManager上调用一个名为AmmoDepleted的方法，只要没有弹药，它就会在屏幕上闪烁一条消息。它会演奏_ ammoDepletedAudioClip。整个“else if”如下所示。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jr"><img src="../Images/b7bef10b4bd2ff2b6942cf0c650fe695.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fOUmVsorFGr8HOEEDCWpKQ.png"/></div></div></figure><p id="cc4f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，在UIManager中，我添加了以下变量。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es js"><img src="../Images/985e6b39e6c7116738649f984053b026.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xPstaElzNp0aSpn6EGmyMg.png"/></div></div></figure><p id="e84b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我还将添加一个名为AmmoDepleted()的方法和一个名为AmmoDepletedRoutine()的IEnumerator。AmmoDepleted()方法会将_ammoDepleted bool更改为true，并启动AmmoDepletedRoutine()。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jt"><img src="../Images/541ec6205e81866d8de22f37f4b4bc2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3QJ73XDhtK_sa4NSnMdu6Q.png"/></div></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ju"><img src="../Images/54dfdd3219beb6b306e00679c6a02c5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1QsNYqfW4jHDR0XxQ4Em4A.png"/></div></div></figure><p id="d1b0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当_ammoDepleted为true时，AmmoDepletedRoutine()运行。它会在屏幕上闪现一条信息，让玩家知道他们没有弹药了。</p><p id="d76b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这包括了我如何实现弹药数量限制和当玩家弹药耗尽时的通知。在下一篇文章中，我将建立一个收藏品来补充玩家的弹药。</p><p id="96d1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下次再见，祝你在编码之旅中好运。</p></div></div>    
</body>
</html>