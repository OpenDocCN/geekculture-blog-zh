<html>
<head>
<title>Deploying a Spring Boot App in Docker Hub</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Docker Hub中部署Spring Boot应用程序</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/deploying-a-spring-boot-app-in-docker-hub-4951a52a703?source=collection_archive---------3-----------------------#2022-02-05">https://medium.com/geekculture/deploying-a-spring-boot-app-in-docker-hub-4951a52a703?source=collection_archive---------3-----------------------#2022-02-05</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="48df" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">自从Spring Boot框架诞生以来，Web应用程序的创建已经简化了很多。正如他们的官方主页所说"<strong class="ih hj"> Spring Boot使创建独立的</strong>"生产级的基于Spring的应用程序变得很容易，你可以<strong class="ih hj">"直接运行"</strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/440ada86a186e875889d88f742aafa2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:650/format:webp/1*8zstEPVUzbcObjvjAXkVsA.png"/></div></figure><p id="96ff" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="jl">今天我们将使用Eclipse创建一个基本的Spring Boot应用程序，然后继续编写docker文件，创建docker映像，然后将其推送到docker hub。</em> </strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jm"><img src="../Images/c024c6f5dc0aed9c15e614584dd9aff6.png" data-original-src="https://miro.medium.com/v2/resize:fit:616/format:webp/1*zy4gDJERSNp4Uk7lfqu-7w.jpeg"/></div></figure><p id="f8fe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们按照以下步骤完成上述过程:</p><p id="d43c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤1) </strong>在Eclipse中安装Java和Eclipse IDE以及STS(Spring Tool Suite)插件</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es jn"><img src="../Images/85eb52a038ddaa6c3e61ae77d3115f97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*a7ISPxHXGrqeXGTkRbwgug.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx">STS Plugin in Eclipse Marketplace</figcaption></figure><p id="96c8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦安装了上述插件，重启eclipse，就可以创建一个基本的Spring Boot Hello应用程序了</p><p id="0381" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在Eclipse中，让我们创建一个Spring starter项目</p><p id="5770" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">新项目-&gt; Spring starter项目</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es jn"><img src="../Images/7a19b26a431bc2863d7010ef4cc28323.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W-wdS_A3yreBuxY22Cnfpw.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx">Starter Project in Spring</figcaption></figure><p id="6e60" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们在下一个屏幕上更改几个字段，我们就准备好了，</p><p id="1a58" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> name = demo，java-version = 8，我保持最新版本。</strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es jw"><img src="../Images/cec6391f22405f06f53660609d3a647c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LRKN5uaD2AhOOPr-KtSfyg.png"/></div></div></figure><p id="45bc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">保持其他一切默认，你就可以开始了</p><p id="1476" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤3) </strong>现在让我们创建一个<strong class="ih hj">控制器类，用于Hello World的基本rest调用</strong>和<strong class="ih hj">在POM.xml中添加spring-boot-web依赖关系</strong>，</p><p id="1f88" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您不熟悉POM和Maven，POM是项目对象模型的缩写<strong class="ih hj">。pom。xml文件包含项目信息和maven构建项目的配置信息，如依赖项、构建目录、源目录、测试源目录、插件、目标等。Maven读pom。xml文件然后执行目标。</strong></p><p id="8ef7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们需要在POM.xml中添加以下依赖项</p><pre class="je jf jg jh fd jx jy jz ka aw kb bi"><span id="2c0a" class="kc kd hi jy b fi ke kf l kg kh"><br/>&lt;dependency&gt;<br/>    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;<br/>    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;<br/>    &lt;version&gt;2.6.3&lt;/version&gt;<br/>&lt;/dependency&gt;</span></pre><p id="001e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们将创建<strong class="ih hj">控制器类，它将负责在用户点击我们的API </strong>时向用户问好</p><pre class="je jf jg jh fd jx jy jz ka aw kb bi"><span id="6e15" class="kc kd hi jy b fi ke kf l kg kh">package com.example.demo.controller;</span><span id="8100" class="kc kd hi jy b fi ki kf l kg kh">import org.springframework.web.bind.annotation.GetMapping;</span><span id="26e5" class="kc kd hi jy b fi ki kf l kg kh">import org.springframework.web.bind.annotation.RestController;</span><span id="c764" class="kc kd hi jy b fi ki kf l kg kh"><br/>@RestController</span><span id="b6c2" class="kc kd hi jy b fi ki kf l kg kh">public class GreetingController {</span><span id="a79a" class="kc kd hi jy b fi ki kf l kg kh">    @GetMapping("/greeting")</span><span id="61e7" class="kc kd hi jy b fi ki kf l kg kh">    public String greetConsumer() {</span><span id="c36f" class="kc kd hi jy b fi ki kf l kg kh">        return "Hello from a basic app.";<br/>    }</span><span id="4f5a" class="kc kd hi jy b fi ki kf l kg kh">}</span></pre><p id="ceef" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里我们添加了“<strong class="ih hj"> @RestController”，这个注释被应用到一个类，将其标记为请求处理程序</strong>，Spring将在运行时进行构建并提供RESTful web服务。还有“<strong class="ih hj"> @GetMapping”注释用于将HTTP GET请求映射到特定的处理程序方法。("/问候语")</strong></p><p id="d8bc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤4) </strong>让我们通过主类(通过Spring Boot启动模板创建)启动我们的应用程序，以Spring Boot应用程序的方式运行主方法，应用程序将在<strong class="ih hj">嵌入式tomcat服务器</strong>中自动运行</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es kj"><img src="../Images/c333389cab217470954b5290190bed82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PXrDdDovwresuFPE6evE4g.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx">Main Application</figcaption></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es kk"><img src="../Images/495d12271ee91a30d4c05be4143fedc2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KFi7SKd0Y-n0g6XT2osiEw.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx">Spring app Started</figcaption></figure><p id="974c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤5) </strong>让我们在浏览器中测试我们的应用程序，在您的浏览器中点击以下URL，瞧，我们收到了欢迎消息。</p><p id="ad7c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae kl" href="https://localhost:8080/greeting" rel="noopener ugc nofollow" target="_blank">https://localhost:8080/greeting</a></p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es km"><img src="../Images/ab4caa103cbec79e97394a646fb5e526.png" data-original-src="https://miro.medium.com/v2/resize:fit:944/format:webp/1*0yEVMiJ1j1I-9PIJeKwl7w.png"/></div></figure><p id="1286" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">我们基本的Spring Boot应用程序</strong>的创建到此结束，现在让我们深入了解一下这个应用程序在Docker上的部署</p><h1 id="6e41" class="kn kd hi bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated"><strong class="ak">部署在码头</strong></h1><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es lk"><img src="../Images/c3239b335f0a54f651d2171823ef4403.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TAuDLM-jWhak79K4oCObiQ.png"/></div></div></figure><p id="84af" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Docker是一个开源的容器化平台。It <strong class="ih hj">使开发人员能够将应用程序打包到容器</strong>——标准化的可执行组件，将应用程序源代码与操作系统(OS)库以及在任何环境中运行该代码所需的依赖项相结合。Docker让我们作为开发人员的生活变得非常轻松。</p><p id="aaab" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将把我们的应用程序转换成docker图像，然后发布到docker hub上，这类似于所有图像的市场。T9】</p><p id="6aa1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤1)将你的应用打包成一个Jar文件</strong></p><p id="31b3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在Eclipse中右键单击您的项目并选择RunAs → Maven Build，这将创建您的项目所需的jar，它可以进一步用于任何平台上的部署。如果Maven要求一个目标，提供如下图所示的清洁和包装</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es ll"><img src="../Images/0eb3b0a78a1a53b0a1fe02b6fff47f7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0m6jSaVyeQgr_uI0GvIXUw.png"/></div></div></figure><p id="7881" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">完成上述步骤后，您的<strong class="ih hj"> demo-latest.jar </strong>应该可以在项目目录下的目标文件夹中找到。</p><p id="f7b8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤2)创建应用程序的docker映像</strong>，按照以下步骤操作</p><p id="ce04" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">a)在windows上安装docker桌面</p><p id="189f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">b)登录docker hub，如果您没有帐户，请创建一个。这是在Docker hub上发布您的图像所必需的。</p><p id="9a63" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">c)创建Dockerfile文件</p><p id="2f99" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在您的项目目录中创建一个Dockerfile并添加以下内容，Dockerfile是一个简单的文件，名称为“Dockerfile ”,没有任何扩展名。</p><pre class="je jf jg jh fd jx jy jz ka aw kb bi"><span id="b137" class="kc kd hi jy b fi ke kf l kg kh">FROM openjdk:8-jdk-alpine</span><span id="bb71" class="kc kd hi jy b fi ki kf l kg kh">EXPOSE 8080</span><span id="ecc1" class="kc kd hi jy b fi ki kf l kg kh">ADD target/demo-latest.jar demo.jar</span><span id="050a" class="kc kd hi jy b fi ki kf l kg kh">ENTRYPOINT ["java","-jar","/demo.jar"]</span></pre><p id="fb45" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jl">这里我们使用OpenJDK 8，在8080端口上展示我们的应用，从目标文件夹中选择我们的应用，然后为运行命令提供入口点</em></p><p id="31d1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">d)在您的项目目录中打开CMD，使用下面的docker命令构建映像，这里soumyansh是我的docker hub用户名，用您的用户名更改它。</p><pre class="je jf jg jh fd jx jy jz ka aw kb bi"><span id="70cf" class="kc kd hi jy b fi ke kf l kg kh">docker build -t soumyansh/demo.jar:latest -f Dockerfile .</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es lm"><img src="../Images/c484189dfd2485a8c753e7d58fbe325d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E39f5H2316lXr5lxk2FxuA.png"/></div></div></figure><p id="98f0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">e)在docker桌面控制面板中验证您的图像列表</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es ln"><img src="../Images/1c0037046634633b2d826f9fed24cef8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oQL-zq2zxm5Fx84fMLqzWQ.png"/></div></div></figure><p id="1301" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤3)将docker图像推送到docker hub </strong></p><p id="db23" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用CMD上的docker登录命令登录到docker hub，提供凭证，如果您已经登录到docker桌面，您应该会自动获得身份验证</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lo"><img src="../Images/52eede97c97c213d2ec6edc717d9ca0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1154/format:webp/1*G1fsD2YVbeSpojX_QFD43Q.png"/></div></figure><p id="52d2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这一步之后，启动下面的命令，将映像推送到docker hub上，根据您的Docker hub配置文件更改用户名。</p><pre class="je jf jg jh fd jx jy jz ka aw kb bi"><span id="6545" class="kc kd hi jy b fi ke kf l kg kh">docker push soumyansh/demo.jar</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es lp"><img src="../Images/66b9e96e12821d86753230f10d5a141c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jtJQuTI1WsSkjRGcTXRE7Q.png"/></div></div></figure><p id="9b10" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤4) <em class="jl">恭喜你完成了所有步骤，现在你已经将你的应用程序推送到docker hub了。在Dockerhub网站的“存储库”下验证相同的内容</em></strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es lq"><img src="../Images/bf3b237199446864bc326a36382ebe49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JdX01foJIjIgKB0SZTs9fw.png"/></div></div></figure><p id="cf9b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第5步)</strong>现在，您可以随时从Dockerhub按需获取您的映像，并在您的操作系统上运行它，请参考以下直接从docker hub获取和运行您的映像的命令。将我们的应用暴露于端口8080</p><pre class="je jf jg jh fd jx jy jz ka aw kb bi"><span id="5919" class="kc kd hi jy b fi ke kf l kg kh">docker run -p 8080:8080 soumyansh/demo.jar</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es lr"><img src="../Images/911a3ef817fa47c46c19830ef3f6ab65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XpqPLX9AJJ9oIeIZmge73A.png"/></div></div></figure><p id="f8bb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这将在端口8080上自动启动我们的应用程序，现在你可以在你最喜欢的浏览器中点击下面的URL</p><pre class="je jf jg jh fd jx jy jz ka aw kb bi"><span id="c3a7" class="kc kd hi jy b fi ke kf l kg kh">https://localhost:8080/greeting</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ls"><img src="../Images/e9ea5d973d90b24911dd5671d30e7155.png" data-original-src="https://miro.medium.com/v2/resize:fit:1010/format:webp/1*wKADbe4XF85o4-VOlYmu-A.png"/></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lt"><img src="../Images/e18fa4c13101dc34eafb26c36c3f5299.png" data-original-src="https://miro.medium.com/v2/resize:fit:550/format:webp/1*vFGjGu71CfmOmuOxYxGpwg.jpeg"/></div></figure><p id="b21f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">再次祝贺以上所有步骤的完成。</p><p id="d1f9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="jl">感谢您读到这里。在这篇文章中，我们学习了如何使用Spring-boot设计一个基本的基于Web的Rest-API，并在docker上部署了相同的API。</em>T3】</strong></p><p id="c3e3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我希望这个教程对你有用。我很好奇你是怎么想的，所以给我一些建议吧。您也可以通过<a class="ae kl" href="mailto:soumyansh@gmail.com" rel="noopener ugc nofollow" target="_blank">邮箱</a>直接与我联系，或者通过<a class="ae kl" href="https://www.linkedin.com/in/soumyansh/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>与我联系。</p></div></div>    
</body>
</html>