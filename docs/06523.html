<html>
<head>
<title>Making Life Easier with Absolute Imports - React in Javascript and Typescript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用绝对导入使生活更简单——在Javascript和Typescript中反应</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/making-life-easier-with-absolute-imports-react-in-javascript-and-typescript-bbdab8a8a3a1?source=collection_archive---------2-----------------------#2021-08-23">https://medium.com/geekculture/making-life-easier-with-absolute-imports-react-in-javascript-and-typescript-bbdab8a8a3a1?source=collection_archive---------2-----------------------#2021-08-23</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="0fe9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们习惯于导入这样的文件<code class="du jd je jf jg b">../../../Components/Dashboard/Profile</code>,这在很长一段时间内都是相当标准的。但是管理所有这些<code class="du jd je jf jg b">../</code>是一项相当艰难的工作。假设我想更改文件或文件夹的位置。等等。我应该那样做吗？不会打碎什么东西吗？这些问题突然袭击了我们。<br/>现在<strong class="ih hj">绝对导入</strong>来拯救我们了，我们现在可以以这种形式<code class="du jd je jf jg b">Components/Dashboard/Profile</code>导入文件，而不会与<code class="du jd je jf jg b">../</code>发生冲突，我们不关心两个文件的相对位置。我们只关心文件相对于项目根目录的位置。这简化了大量导入的工作。让我们来看看我们到底该怎么做。</p><figure class="ji jj jk jl fd jm er es paragraph-image"><div role="button" tabindex="0" class="jn jo di jp bf jq"><div class="er es jh"><img src="../Images/c9ca7a1407997a4dc7e4ee1aee6cc711.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-yJVVwWpEPvYAsYqROt9Gg.jpeg"/></div></div></figure><h1 id="dc6f" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">绝对进口</h1><p id="991e" class="pw-post-body-paragraph if ig hi ih b ii kr ik il im ks io ip iq kt is it iu ku iw ix iy kv ja jb jc hb bi translated">绝对导入已经在<a class="ae kw" href="https://github.com/facebook/create-react-app/releases/tag/v3.0.0" rel="noopener ugc nofollow" target="_blank"> create react app v3 </a>中启动。让我们回顾一下绝对重要的几个好处，如果你仍然不相信的话，跳过这一部分。</p><h2 id="0649" class="kx ju hi bd jv ky kz la jz lb lc ld kd iq le lf kh iu lg lh kl iy li lj kp lk bi translated">利益</h2><ul class=""><li id="f109" class="ll lm hi ih b ii kr im ks iq ln iu lo iy lp jc lq lr ls lt bi translated">没必要和<code class="du jd je jf jg b">../../../</code>争论。只关心你的代码😃(这是一个任务了)</li><li id="9e38" class="ll lm hi ih b ii lu im lv iq lw iu lx iy ly jc lq lr ls lt bi translated">您可以直接从组件中复制/粘贴代码，并在其他任何地方使用它，而无需对导入进行任何更改。</li><li id="4388" class="ll lm hi ih b ii lu im lv iq lw iu lx iy ly jc lq lr ls lt bi translated">由于绝对定位，您可以轻松定位导入的文件或组件。</li><li id="db3b" class="ll lm hi ih b ii lu im lv iq lw iu lx iy ly jc lq lr ls lt bi translated">使代码更简洁。</li><li id="b5fc" class="ll lm hi ih b ii lu im lv iq lw iu lx iy ly jc lq lr ls lt bi translated">使代码编写更容易。</li></ul><p id="7026" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这份清单足以适应绝对进口😛</p><h2 id="2ece" class="kx ju hi bd jv ky kz la jz lb lc ld kd iq le lf kh iu lg lh kl iy li lj kp lk bi translated">开始</h2><p id="5c5e" class="pw-post-body-paragraph if ig hi ih b ii kr ik il im ks io ip iq kt is it iu ku iw ix iy kv ja jb jc hb bi translated">根据<a class="ae kw" href="https://create-react-app.dev/docs/importing-a-component/" rel="noopener ugc nofollow" target="_blank"> create-react-app Docs </a>，我们可以通过在我们的项目根目录中配置一个<code class="du jd je jf jg b">jsconfig.json</code> / <code class="du jd je jf jg b">tsconfig.json</code>(对于typescript项目)文件来在我们的react项目中使用绝对导入。如果您在项目中使用TypeScript，那么您已经有了一个<code class="du jd je jf jg b">tsconfig.json</code>文件。</p><p id="d0b2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果在<strong class="ih hj"> JS </strong>下工作，在你的项目根目录下添加一个<code class="du jd je jf jg b">jsconfig.json</code>文件，内容如下:</p><figure class="ji jj jk jl fd jm"><div class="bz dy l di"><div class="lz ma l"/></div></figure><p id="edbe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您使用的是TypeScript，那么您的项目根目录中已经有了一个<code class="du jd je jf jg b">tsconfig.json</code>文件。您可以在项目的<code class="du jd je jf jg b">tsconfig.json</code>文件的<code class="du jd je jf jg b">compilerOptions</code>中配置<code class="du jd je jf jg b">baseUrl</code>设置，以开始使用绝对导入。文件内容如下所示:</p><figure class="ji jj jk jl fd jm"><div class="bz dy l di"><div class="lz ma l"/></div></figure><p id="f0cb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在上面的文件中，我刚刚在我的<code class="du jd je jf jg b">compilerOptions</code>中添加了一个值为<code class="du jd je jf jg b">src</code>的<code class="du jd je jf jg b">baseUrl</code>设置，与最初生成的<code class="du jd je jf jg b">tsconfig.json</code>相比，没有任何变化。</p><h2 id="1dcf" class="kx ju hi bd jv ky kz la jz lb lc ld kd iq le lf kh iu lg lh kl iy li lj kp lk bi translated">将相对进口转换为绝对进口</h2><p id="d875" class="pw-post-body-paragraph if ig hi ih b ii kr ik il im ks io ip iq kt is it iu ku iw ix iy kv ja jb jc hb bi translated">我们已经将项目配置为使用绝对导入，现在让我们使用它。</p><p id="c43a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是一个没有绝对导入的文件</p><figure class="ji jj jk jl fd jm"><div class="bz dy l di"><div class="lz ma l"/></div></figure><p id="764e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们只需要从进口中去掉<code class="du jd je jf jg b">../../../</code>。现在文件看起来像这样</p><figure class="ji jj jk jl fd jm"><div class="bz dy l di"><div class="lz ma l"/></div></figure><p id="f5f0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">🔥一切都结束了。我们已经成功地在React应用程序中配置和使用了绝对导入。</p><p id="7aaf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们已经将项目配置为支持绝对导入，我们可以导入位于<code class="du jd je jf jg b">src/components/Button.js</code>的模块，如下所示:</p><pre class="ji jj jk jl fd mb jg mc md aw me bi"><span id="5c2a" class="kx ju hi jg b fi mf mg l mh mi"><em class="mj">import</em> Button <em class="mj">from</em> 'components/Button';</span></pre><p id="36e5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae kw" href="https://create-react-app.dev/docs/importing-a-component/" rel="noopener ugc nofollow" target="_blank"> create-react-app文档到此结束</a>。但是还有别的事情要做。</p></div><div class="ab cl mk ml gp mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="hb hc hd he hf"><p id="089c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们已经将React应用程序配置为使用绝对导入。但是我们也需要配置我们的代码编辑器。</p><h1 id="ebb3" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">在WebStorm中配置</h1><p id="215c" class="pw-post-body-paragraph if ig hi ih b ii kr ik il im ks io ip iq kt is it iu ku iw ix iy kv ja jb jc hb bi translated">WebStorm假设绝对路径在<code class="du jd je jf jg b">node_modules</code>中(根据Node.js规则)，所以我们必须告诉它我们正在使用绝对导入。</p><p id="624a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du jd je jf jg b">Right-click</code>进入<code class="du jd je jf jg b">src</code>文件夹，选择<code class="du jd je jf jg b">Mark Directory as</code>并点击<code class="du jd je jf jg b">Resource Root</code>。</p><figure class="ji jj jk jl fd jm er es paragraph-image"><div role="button" tabindex="0" class="jn jo di jp bf jq"><div class="er es mr"><img src="../Images/09ea554c9b3d5e1097bd51dac129da1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1132/format:webp/0*9JTWsD4-ZTxkwAkp.png"/></div></div><figcaption class="ms mt et er es mu mv bd b be z dx">Mark src directory as Resources Root</figcaption></figure><ul class=""><li id="9055" class="ll lm hi ih b ii ij im in iq mw iu mx iy my jc lq lr ls lt bi translated">接下来选择<strong class="ih hj">首选项</strong> - &gt; <strong class="ih hj">编辑器</strong> - &gt; <strong class="ih hj">代码样式</strong>-&gt;<strong class="ih hj">JavaScript</strong>-&gt;<strong class="ih hj">导入</strong>并勾选<strong class="ih hj">使用相对于项目、资源或源根的路径</strong>然后点击<code class="du jd je jf jg b"><strong class="ih hj">Apply</strong></code>。</li></ul><figure class="ji jj jk jl fd jm er es paragraph-image"><div class="er es mz"><img src="../Images/742f3c6884b8d2d25359bf093bc31fe9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*5xMZDr-HzAEuh6jW.png"/></div></figure><h1 id="364e" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">VS代码</h1><p id="7370" class="pw-post-body-paragraph if ig hi ih b ii kr ik il im ks io ip iq kt is it iu ku iw ix iy kv ja jb jc hb bi translated">VS代码中不需要做任何修改。它将自动从<code class="du jd je jf jg b">jsconfig.json</code> / <code class="du jd je jf jg b">tsconfig.json</code>文件中导入配置。</p><h1 id="722f" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">埃斯林特</h1><p id="3e30" class="pw-post-body-paragraph if ig hi ih b ii kr ik il im ks io ip iq kt is it iu ku iw ix iy kv ja jb jc hb bi translated">CRA在他们的ESLint设置中有一套非常简单的规则，并对为什么会这样有一些强烈的看法。我们通常使用类似Airbnb的ESLint配置来设置ESLint。</p><p id="797d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你这样做了，你很快就会发现Airbnb使用了<a class="ae kw" href="https://github.com/benmosher/eslint-plugin-import" rel="noopener ugc nofollow" target="_blank"> eslint-plugin-import </a>，它会检查未定义的导入，并会给出如下错误:</p><figure class="ji jj jk jl fd jm er es paragraph-image"><div class="er es na"><img src="../Images/4a8f672c25744e388c69a593729f58ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1184/format:webp/0*8j62vqCatnu9CWXP.png"/></div></figure><p id="797b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以在ESLint配置中使用<code class="du jd je jf jg b">settings</code>属性来解决这个问题，告诉它您的路径可能是相对于<code class="du jd je jf jg b">src</code>的:</p><figure class="ji jj jk jl fd jm"><div class="bz dy l di"><div class="lz ma l"/></div><figcaption class="ms mt et er es mu mv bd b be z dx">EsLint Config</figcaption></figure><p id="338e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">注意，你不需要为此安装任何npm包，这个<code class="du jd je jf jg b">settings</code>块就足够了。</p><p id="1215" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于Typescript，您应该使用上面的扩展设置来解析ts中的导入。</p><h2 id="6914" class="kx ju hi bd jv ky kz la jz lb lc ld kd iq le lf kh iu lg lh kl iy li lj kp lk bi translated">真的值得吗</h2><p id="7bbd" class="pw-post-body-paragraph if ig hi ih b ii kr ik il im ks io ip iq kt is it iu ku iw ix iy kv ja jb jc hb bi translated">绝对导入使组件更加可读和干净。有些情况下，如非常密切相关的组件，相对进口更有意义，而绝对进口可能是矫枉过正。但总的来说，绝对进口带来的好处大于坏处。因此转向绝对进口可能是值得的一步。</p><h1 id="b0d7" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">结论</h1><p id="1fc3" class="pw-post-body-paragraph if ig hi ih b ii kr ik il im ks io ip iq kt is it iu ku iw ix iy kv ja jb jc hb bi translated">我希望你已经发现这是有用的。感谢您的阅读。</p><p id="02a6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你觉得这个博客有用，你可以<a class="ae kw" href="https://www.buymeacoffee.com/onlyoneaman" rel="noopener ugc nofollow" target="_blank">请我喝杯咖啡</a> ☕️😃</p></div></div>    
</body>
</html>