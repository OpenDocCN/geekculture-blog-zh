<html>
<head>
<title>Youtube — System design, MAANG interview question. How live commenting, pagination works on Youtube ?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Youtube —系统设计，MAANG面试问题。Youtube上的实时评论和分页是如何工作的？</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/youtube-system-design-maang-interview-question-20c9656b6ce8?source=collection_archive---------5-----------------------#2022-10-21">https://medium.com/geekculture/youtube-system-design-maang-interview-question-20c9656b6ce8?source=collection_archive---------5-----------------------#2022-10-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="b114" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Youtube的系统设计是前端系统设计面试中最常见的面试问题之一。原因是Youtube的简单性，设计一个看起来非常简单的系统是非常困难的。如果你是前端开发人员，不知道什么是前端系统设计？我在这里写了一篇介绍性的文章<a class="ae jd" href="https://mevasanth.medium.com/what-is-frontend-system-design-what-questions-to-expect-in-the-interview-705e5c05be9" rel="noopener">，你可以在看这个之前先看看。</a></p></div><div class="ab cl je jf gp jg" role="separator"><span class="jh bw bk ji jj jk"/><span class="jh bw bk ji jj jk"/><span class="jh bw bk ji jj"/></div><div class="hb hc hd he hf"><p id="8514" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如你所知，用文字来解释整个系统设计是相当困难的。详细解释可以看下面的视频。你也可以阅读这篇文章，在这里我会从更高的层面解释一些事情。</p><figure class="jl jm jn jo fd jp"><div class="bz dy l di"><div class="jq jr l"/></div></figure><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="er es js"><img src="../Images/6c06353040a9e9c91530689c9bca9719.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pAzymKtBUCyMTX00Xso-0Q.png"/></div></div><figcaption class="jz ka et er es kb kc bd b be z dx">Fig: System design of Youtube</figcaption></figure></div><div class="ab cl je jf gp jg" role="separator"><span class="jh bw bk ji jj jk"/><span class="jh bw bk ji jj jk"/><span class="jh bw bk ji jj"/></div><div class="hb hc hd he hf"><p id="c036" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们来看看前端系统设计的各个不同部分:</p><blockquote class="kd ke kf"><p id="3778" class="if ig kg ih b ii ij ik il im in io ip kh ir is it ki iv iw ix kj iz ja jb jc hb bi translated"><strong class="ih hj">要求:</strong></p></blockquote><p id="242c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">需求主要包括两种类型:</p><ol class=""><li id="215c" class="kk kl hi ih b ii ij im in iq km iu kn iy ko jc kp kq kr ks bi translated"><strong class="ih hj">功能需求</strong>:功能需求由那些直接影响用户体验的需求组成。</li><li id="5068" class="kk kl hi ih b ii kt im ku iq kv iu kw iy kx jc kp kq kr ks bi translated"><strong class="ih hj">非功能需求</strong>。非功能性需求包括在大多数情况下不会直接影响用户，但是从产品的角度来看非常重要的东西。</li></ol><p id="2e30" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下图列出了Youtube系统最常见的要求。</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div class="er es ky"><img src="../Images/742fd312a6e9688cc4e1d2717c788ed9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1336/format:webp/1*JzZVCI-AB3QmRiUyGgiC5g.png"/></div></figure><blockquote class="kd ke kf"><p id="eba3" class="if ig kg ih b ii ij ik il im in io ip kh ir is it ki iv iw ix kj iz ja jb jc hb bi translated"><strong class="ih hj">范围界定</strong></p></blockquote><p id="0fc4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">完成需求收集后，因为这是一个只有40分钟的面试，你不能建立一切。一般来说，面试官会挑选一些具有挑战性的项目，他们对此很了解。以下是我正在研究的项目。</p><p id="dbfd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">视频详情画面:</strong></p><p id="14f7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">-&gt;注释分页</p><p id="a53f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">现场评论</strong></p><blockquote class="kd ke kf"><p id="6917" class="if ig kg ih b ii ij ik il im in io ip kh ir is it ki iv iw ix kj iz ja jb jc hb bi translated"><strong class="ih hj">技术</strong></p></blockquote><p id="f522" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在需求和范围确定之后，下一步就是为构建“<strong class="ih hj"> Youtube </strong>”选择正确的UI技术。你会选择以下哪种技术？</p><ul class=""><li id="2157" class="kk kl hi ih b ii ij im in iq km iu kn iy ko jc kz kq kr ks bi translated">反应堆</li><li id="3e9b" class="kk kl hi ih b ii kt im ku iq kv iu kw iy kx jc kz kq kr ks bi translated">安古拉吉斯</li><li id="cfd5" class="kk kl hi ih b ii kt im ku iq kv iu kw iy kx jc kz kq kr ks bi translated">VenillaJS和HTML，CSS</li><li id="c0ff" class="kk kl hi ih b ii kt im ku iq kv iu kw iy kx jc kz kq kr ks bi translated">VueJS</li></ul><p id="e646" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在选择正确的技术之前，这里有两件事</p><ol class=""><li id="4c28" class="kk kl hi ih b ii ij im in iq km iu kn iy ko jc kp kq kr ks bi translated"><strong class="ih hj">组织依赖性:</strong>组织可能有一些内部问题。可能有一个团队全是reactJs开发人员，而没有Angular开发人员，反之亦然。正因为如此，虽然产品需要一种技术，但你不能选择它。</li></ol><p id="29e1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 2。项目依赖性:</strong>满足项目需求的合适技术是什么？理想情况下，这应该优先于<strong class="ih hj">组织依赖性。以“<strong class="ih hj"> Youtube </strong>”为例，我们可以使用ReactJS或AngularJS。另一方面，Youtube不使用这两个框架，他们有一个专门针对他们产品的内部框架。</strong></p><blockquote class="kd ke kf"><p id="a274" class="if ig kg ih b ii ij ik il im in io ip kh ir is it ki iv iw ix kj iz ja jb jc hb bi translated"><strong class="ih hj">组件架构</strong></p></blockquote><p id="adf4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这一步是可选的，取决于面试官，他们可以要求你创建一个设计的线框，然后开始提问，或者他们可以直接开始提问。</p><p id="902b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面是Youtube视频详细信息屏幕的基本设计。</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="er es la"><img src="../Images/faba470bab0ae12270f95ea34c7d1fe3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RTWPVmKdCT02Ln04jg0hLQ.png"/></div></div></figure><blockquote class="kd ke kf"><p id="7b06" class="if ig kg ih b ii ij ik il im in io ip kh ir is it ki iv iw ix kj iz ja jb jc hb bi translated"><strong class="ih hj">问题1(讨论范围项目)</strong></p></blockquote><ol class=""><li id="1474" class="kk kl hi ih b ii ij im in iq km iu kn iy ko jc kp kq kr ks bi translated"><strong class="ih hj">视频播放器:</strong>如何构建一个像<strong class="ih hj"> Youtube这样复杂的视频播放器？</strong>如果我在设计阶段，我的第一个问题会是“我们必须在多少天内推出这款产品？？“如果我们有更多的时间，那么我们可以从头开始构建播放器。如果没有，建议购买一些现有的视频播放器，并在第一次或几次发布后构建我们自己的播放器。但是如果你想知道如何自己制作一个像Youtube这样的视频播放器，你可以阅读这篇<a class="ae jd" href="https://freshman.tech/custom-html5-video/" rel="noopener ugc nofollow" target="_blank">博客文章。</a>很简单，Youtube用的是HTML &lt; video &gt;标签和mediaSource API。</li></ol><blockquote class="kd ke kf"><p id="a9c6" class="if ig kg ih b ii ij ik il im in io ip kh ir is it ki iv iw ix kj iz ja jb jc hb bi translated"><strong class="ih hj">问题2(讨论范围项目)</strong></p></blockquote><ol class=""><li id="a09c" class="kk kl hi ih b ii ij im in iq km iu kn iy ko jc kp kq kr ks bi translated"><strong class="ih hj">评论供稿:</strong>这是一个有趣的问题，需要解决。因为热门视频会有1000条评论。<strong class="ih hj">将评论添加到屏幕上的正确策略是什么？</strong></li></ol><p id="eec4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一个简单的答案是通过“<strong class="ih hj">分页</strong>”。当页面启动时，我们加载一些评论，当用户滚动到页面末尾时，更多的评论被添加到页面中。但是这里有两个主要问题。</p><ul class=""><li id="8aec" class="kk kl hi ih b ii ij im in iq km iu kn iy ko jc kz kq kr ks bi translated"><strong class="ih hj">如果已经加载的评论被编辑了怎么办？你会刷新它吗？</strong></li><li id="474f" class="kk kl hi ih b ii kt im ku iq kv iu kw iy kx jc kz kq kr ks bi translated"><strong class="ih hj">如果你选择了新的过滤器来过滤旧的评论，当你点击结束时，</strong>从技术上来说，你正在加载旧的评论。到那时，可能已经有很多新的评论了。会不会浮出水面？</li></ul><p id="df0f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有很多方法可以解决这个问题，考虑到Youtube的规模，我提出以下解决方案:</p><ol class=""><li id="1405" class="kk kl hi ih b ii ij im in iq km iu kn iy ko jc kp kq kr ks bi translated">仅过滤本地数据:我们不会在分页时加载新的注释。因为两个人同时打开的热门视频的评论数可能不一样。要获得新的评论，最好刷新页面。</li><li id="05a4" class="kk kl hi ih b ii kt im ku iq kv iu kw iy kx jc kp kq kr ks bi translated"><strong class="ih hj">分页时只加载旧评论:</strong>同上。</li><li id="7630" class="kk kl hi ih b ii kt im ku iq kv iu kw iy kx jc kp kq kr ks bi translated"><strong class="ih hj">有一个名为优先评论的特殊部分，用于刷新现有的评论列表:</strong>某些评论可能会改变整个讨论过程。在这种情况下，添加这些评论是非常必要的，尽管这是一个新的评论。这些优先评论可以在AI/ML算法的帮助下在后端进行分析。</li></ol><blockquote class="kd ke kf"><p id="dcbe" class="if ig kg ih b ii ij ik il im in io ip kh ir is it ki iv iw ix kj iz ja jb jc hb bi translated"><strong class="ih hj">问题3(现场评论)</strong></p></blockquote><p id="be45" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在视频直播过程中进行现场评论似乎是一个很容易解决的问题。但实际上不是，我来解释一下为什么？</p><ol class=""><li id="5c65" class="kk kl hi ih b ii ij im in iq km iu kn iy ko jc kp kq kr ks bi translated">在视频直播过程中，每秒钟可能会有数千条评论涌入。要更新屏幕上的内容，从服务器获取评论的正确策略是什么？</li><li id="f0ad" class="kk kl hi ih b ii kt im ku iq kv iu kw iy kx jc kp kq kr ks bi translated"><strong class="ih hj">你在本地存储了多少评论</strong>？因为像新闻频道这样的直播视频可能会在30分钟内获得10万条评论，如果你全部存储，你的网站可能会变得非常慢。</li></ol><p id="38b9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们解决这两个问题。</p><ol class=""><li id="47ab" class="kk kl hi ih b ii ij im in iq km iu kn iy ko jc kp kq kr ks bi translated">从服务器获取实时评论的正确策略是通过<strong class="ih hj">投票。每隔<strong class="ih hj"> X </strong>秒触发后端获取新的评论集。这个<strong class="ih hj"> X </strong>由AI/ML通过观察一段时间内的流来确定。例如:对于新闻频道<strong class="ih hj"> X </strong>可能很小，对于自然视频<strong class="ih hj"> X </strong>可能很大。</strong></li><li id="9cb4" class="kk kl hi ih b ii kt im ku iq kv iu kw iy kx jc kp kq kr ks bi translated">我们不必将所有的评论都存储在本地。最好有一个固定大小的注释数组，并在新的注释到达时用新的替换旧的注释。因为大多数用户都没有时间回去阅读所有的评论。同样，存储多少注释可以由AI/ML固定或确定。</li></ol><p id="c3a5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">你必须看我上面的Youtube视频才能知道直播是如何工作的</strong></p><h1 id="e22a" class="lb lc hi bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结束语</h1><ol class=""><li id="78ed" class="kk kl hi ih b ii lz im ma iq mb iu mc iy md jc kp kq kr ks bi translated">前端系统设计不涉及任何编码。</li><li id="ed14" class="kk kl hi ih b ii kt im ku iq kv iu kw iy kx jc kp kq kr ks bi translated">它只涉及到给一个系统你将如何从头开始设计它。</li><li id="4d0c" class="kk kl hi ih b ii kt im ku iq kv iu kw iy kx jc kp kq kr ks bi translated">你不必知道你用的是什么系统。例句:亚马逊可能会在他们的电子商务网站上使用ReactJS，而你提议用Angular来构建亚马逊，这没有问题。你不是在克隆产品，而是从头开始设计。</li><li id="f999" class="kk kl hi ih b ii kt im ku iq kv iu kw iy kx jc kp kq kr ks bi translated">选择您每天使用的系统，并尝试使用上述部分进行设计。</li></ol><p id="c222" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">感谢您在下一篇文章中阅读catch you。如果你还没有在媒体上关注我，那么请关注我，你可以在链接的<a class="ae jd" href="https://www.linkedin.com/in/vasanth-bhat-4180909b/" rel="noopener ugc nofollow" target="_blank">这里</a>关注我。别忘了订阅我的YouTube频道<a class="ae jd" href="https://www.youtube.com/channel/UCSCNvSCk_Z9mBvUM-FJexRg/videos" rel="noopener ugc nofollow" target="_blank">非周末</a>。</p><p id="724d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">欢迎在评论区添加您的反馈。</p><p id="277a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你想亲自和我讨论模拟面试，面试或简历审核的技巧和诀窍，你可以在这里预约:</p><p id="8be8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" href="https://topmate.io/vasanth_bhat" rel="noopener ugc nofollow" target="_blank">https://topmate.io/vasanth_bhat</a></p></div><div class="ab cl je jf gp jg" role="separator"><span class="jh bw bk ji jj jk"/><span class="jh bw bk ji jj jk"/><span class="jh bw bk ji jj"/></div><div class="hb hc hd he hf"><p id="2249" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你是reactJS开发人员，正在寻找面试准备，请点击这里观看我的完整面试准备指南:</p><figure class="jl jm jn jo fd jp"><div class="bz dy l di"><div class="jq jr l"/></div></figure><p id="13ab" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你正在准备前端开发者面试，请观看我的以下系列:</p><figure class="jl jm jn jo fd jp"><div class="bz dy l di"><div class="jq jr l"/></div></figure><p id="29d2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">来自同一作者的更多文章:</p><ol class=""><li id="41a0" class="kk kl hi ih b ii ij im in iq km iu kn iy ko jc kp kq kr ks bi translated"><a class="ae jd" rel="noopener" href="/geekculture/i-lost-50l-package-because-i-couldnt-answer-this-javascript-question-2259bf90d021">我丢了50L+包，因为我回答不了这个JavaScript问题。</a></li><li id="53ea" class="kk kl hi ih b ii kt im ku iq kv iu kw iy kx jc kp kq kr ks bi translated"><a class="ae jd" rel="noopener" href="/geekculture/dont-skip-top-5-frontend-interview-topics-to-prepare-in-2022-8adc8801677e">不要跳过| 2022年要准备的5大前端面试题目</a></li><li id="a351" class="kk kl hi ih b ii kt im ku iq kv iu kw iy kx jc kp kq kr ks bi translated"><a class="ae jd" rel="noopener" href="/geekculture/solve-meta-amazon-google-apple-interview-question-write-custom-implementation-for-array-flat-8e0072961c29">解决Meta | Amazon | Google | Apple面试问题。为Array.flat() </a>编写自定义实现</li><li id="8577" class="kk kl hi ih b ii kt im ku iq kv iu kw iy kx jc kp kq kr ks bi translated"><a class="ae jd" rel="noopener" href="/geekculture/5-mistakes-to-avoid-in-frontend-developer-interview-200-interview-experience-summarised-7e79bc87b062">前端开发人员面试要避免的5个错误| 200多次面试经验总结</a></li></ol></div></div>    
</body>
</html>