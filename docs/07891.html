<html>
<head>
<title>How to insert Dynamic Data using Express.js and Handlebars</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Express.js和Handlebars插入动态数据</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/how-to-insert-dynamic-data-using-express-js-and-handlebars-8b82461d0c7?source=collection_archive---------11-----------------------#2021-10-05">https://medium.com/geekculture/how-to-insert-dynamic-data-using-express-js-and-handlebars-8b82461d0c7?source=collection_archive---------11-----------------------#2021-10-05</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/ea2c193ef13be1a955132f97155b42f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*KgzLW3iZA3YN6e6n"/></div></div></figure><div class=""/><p id="961b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这是Express.js和把手的另一次旅程，我们将学习对我上一篇文章的一个重要改进。动态数据！！而我们需要的只是Node.js，Express.js和手柄！！！我正在一步一步地学习，所以在我的旅程中一起来。</p><p id="95d3" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">重要！因为Express-handlebar更新了它的库，所以您需要更改导入</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="987b" class="jy jz ht ju b fi ka kb l kc kd">import { engine } from 'express-handlebars';</span></pre><p id="5e78" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">并为此更改handleExp</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="c4fc" class="jy jz ht ju b fi ka kb l kc kd">app.engine( 'handlebars', engine({<br/>defaultLayout: 'main'<br/>}))</span></pre><p id="5696" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你也可以看</p><figure class="jp jq jr js fd hk"><div class="bz dy l di"><div class="ke kf l"/></div></figure><h1 id="79f7" class="kg jz ht bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">启动NPM并安装依赖项</h1><p id="498f" class="pw-post-body-paragraph iq ir ht is b it ld iv iw ix le iz ja jb lf jd je jf lg jh ji jj lh jl jm jn hb bi translated">首先调用命令来创建我们的package.json</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="59b0" class="jy jz ht ju b fi ka kb l kc kd">$ npm init -y</span></pre><p id="5747" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后安装快速和快速把手</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="e0f5" class="jy jz ht ju b fi ka kb l kc kd">$ npm i express express-handlebars</span></pre><h1 id="14d9" class="kg jz ht bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">目录</h1><p id="8c67" class="pw-post-body-paragraph iq ir ht is b it ld iv iw ix le iz ja jb lf jd je jf lg jh ji jj lh jl jm jn hb bi translated">之后，我们需要创建一个这样的目录</p><figure class="jp jq jr js fd hk er es paragraph-image"><div class="er es li"><img src="../Images/17655f14d0f2c577e229fc11a1ffc5e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:402/format:webp/1*ARWNWwabvWmkco_VR-JHhQ.png"/></div><figcaption class="lj lk et er es ll lm bd b be z dx">Example Directory</figcaption></figure><p id="32dd" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">添加数据并插入保留字“body”以将数据添加到我们的主页</p><figure class="jp jq jr js fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es ln"><img src="../Images/a54f59f3661484d1400717db7bded6f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zRAzperg5BtQQT1Xm6Ovsw.png"/></div></div><figcaption class="lj lk et er es ll lm bd b be z dx">Example main layout</figcaption></figure><p id="9620" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">向我们的渲染页面添加数据</p><figure class="jp jq jr js fd hk er es paragraph-image"><div class="er es lo"><img src="../Images/dca4485fe0d2178ee29c5e63f03985da.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/format:webp/1*POzHcsDnskW7Z7GviYVSuw.png"/></div><figcaption class="lj lk et er es ll lm bd b be z dx">404 adding data</figcaption></figure><h1 id="97ac" class="kg jz ht bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">Express.js服务器</h1><p id="54f6" class="pw-post-body-paragraph iq ir ht is b it ld iv iw ix le iz ja jb lf jd je jf lg jh ji jj lh jl jm jn hb bi translated">然后，我们需要创建我们的服务器，并创建我们的动态信息，将数据添加到fortune页面，但在此之前，我们需要在library.js文件上创建动态数据，并使用exports保留字将我们的函数导出到服务器。</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="47b5" class="jy jz ht ju b fi ka kb l kc kd">const fortunes = [</span><span id="f96f" class="jy jz ht ju b fi lp kb l kc kd">'Who sweats in training bleeds less in war',</span><span id="25e1" class="jy jz ht ju b fi lp kb l kc kd">'Own your morning elevate your life',</span><span id="387a" class="jy jz ht ju b fi lp kb l kc kd">'Meditate and will bring you peace',</span><span id="4516" class="jy jz ht ju b fi lp kb l kc kd">'Is everything is ok keep going',</span><span id="2219" class="jy jz ht ju b fi lp kb l kc kd">'Refresh'<br/>]<br/><em class="lq">exports</em>.fortune = () =&gt; fortunes[<br/>Math.floor( ( Math.random() * fortunes.length ) + 0 )<br/>]</span></pre><p id="41d2" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后，我们需要调用它，并在fortune上创建我们的服务器。第二个参数将是作为对象的数据，我们需要在fortune页面上使用它。</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="2315" class="jy jz ht ju b fi ka kb l kc kd">const express     = require( 'express' )<br/>const app         = express()<br/>const handleF     = require( 'express-handlebars' )<br/>const port        = process.env.PORT || 3000<br/>const { fortune } = require('./lib/library')<br/>app.engine( 'handlebars', handleF({<br/>defaultLayout: 'main'<br/>}))<br/>app.set('view engine', 'handlebars' )<br/>app.get( '', ( <em class="lq">req</em>, <em class="lq">res</em> ) =&gt; <em class="lq">res</em>.render( 'home' ))<br/>app.get( '/about', ( <em class="lq">req</em>, <em class="lq">res</em> ) =&gt; <em class="lq">res</em>.render( 'about' ))<br/>app.get( '/fortune', ( <em class="lq">req</em>, <em class="lq">res</em> ) =&gt; <em class="lq">res</em>.render(<br/>'fortune', { fortune } )<br/>)<br/>app.use( ( <em class="lq">req</em>, <em class="lq">res</em> ) =&gt; {<br/><em class="lq">res</em>.status( 404 )<br/><em class="lq">res</em>.render( '404' )<br/>})<br/>app.listen( port, console.log( `Server is on ${port}` ))</span></pre><figure class="jp jq jr js fd hk er es paragraph-image"><div class="er es lr"><img src="../Images/ccbb00af110bd6cca9432fae7093b69e.png" data-original-src="https://miro.medium.com/v2/resize:fit:986/format:webp/1*8ucQSDStrXIBYgr-OrDfGA.png"/></div><figcaption class="lj lk et er es ll lm bd b be z dx">Fortune dynamic data</figcaption></figure><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="2fc8" class="jy jz ht ju b fi ka kb l kc kd">&lt;h1&gt;Fortune is for Everyone&lt;/h1&gt;</span><span id="2614" class="jy jz ht ju b fi lp kb l kc kd">{{#if <em class="lq">fortune</em>}}</span><span id="e0a4" class="jy jz ht ju b fi lp kb l kc kd">&lt;blockquote&gt;{{ <em class="lq">fortune</em> }}&lt;/blockquote&gt;</span><span id="e0d7" class="jy jz ht ju b fi lp kb l kc kd">{{/if}}</span></pre><p id="4741" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">像手柄文档解释的那样添加条件，这样我们就可以创建我们想要的动态数据</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="d38d" class="jy jz ht ju b fi ka kb l kc kd">$ node server.js</span></pre><p id="470a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae jo" href="http://localhost:3000/fortune" rel="noopener ugc nofollow" target="_blank">http://localhost:3000/财富</a></p><p id="eeb4" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们会看到这样的东西</p><figure class="jp jq jr js fd hk er es paragraph-image"><div class="er es ls"><img src="../Images/71bc664fabc4186f3c9bb0ca59cd3dcf.png" data-original-src="https://miro.medium.com/v2/resize:fit:732/format:webp/1*ZaDzmxoQhidQPvJHrt3Niw.png"/></div><figcaption class="lj lk et er es ll lm bd b be z dx">Example dynamic data on fortune</figcaption></figure><p id="963f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">它真的很棒，每次我们刷新页面，它都会改变命运。</p><h1 id="b0f6" class="kg jz ht bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">结论</h1><p id="b459" class="pw-post-body-paragraph iq ir ht is b it ld iv iw ix le iz ja jb lf jd je jf lg jh ji jj lh jl jm jn hb bi translated">我们重新培训如何使用Express.js和handlebar创建服务器，以及如何使用它处理动态数据和handlebar文档的条件，有趣的是，每一小步都令人惊讶地学到了一些伟大的东西。</p><h1 id="b2be" class="kg jz ht bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">来源</h1><div class="hh hi ez fb hj lt"><a href="https://code-maven.com/handlebars-conditionals" rel="noopener  ugc nofollow" target="_blank"><div class="lu ab dw"><div class="lv ab lw cl cj lx"><h2 class="bd hu fi z dy ly ea eb lz ed ef hs bi translated">条件把手</h2><div class="ma l"><h3 class="bd b fi z dy ly ea eb lz ed ef dx translated">if name}}..{{/if}}但是您不能写{{#if name == 'Foo'}}..{{/if}}在创建助手之前，让我们看看…</h3></div><div class="mb l"><p class="bd b fp z dy ly ea eb lz ed ef dx translated">code-maven.com</p></div></div><div class="mc l"><div class="md l me mf mg mc mh hp lt"/></div></div></a></div><div class="hh hi ez fb hj lt"><a href="http://expressjs.com/" rel="noopener  ugc nofollow" target="_blank"><div class="lu ab dw"><div class="lv ab lw cl cj lx"><h2 class="bd hu fi z dy ly ea eb lz ed ef hs bi translated">Express - Node.js web应用程序框架</h2><div class="ma l"><h3 class="bd b fi z dy ly ea eb lz ed ef dx translated">Express是一个最小且灵活的Node.js web应用程序框架，它为web和…</h3></div><div class="mb l"><p class="bd b fp z dy ly ea eb lz ed ef dx translated">expressjs.com</p></div></div><div class="mc l"><div class="mi l me mf mg mc mh hp lt"/></div></div></a></div><div class="hh hi ez fb hj lt"><a href="https://www.amazon.com.mx/Web-Development-Node-Express-Leveraging/dp/1492053511/ref=sr_1_1?__mk_es_MX=%C3%85M%C3%85%C5%BD%C3%95%C3%91&amp;dchild=1&amp;keywords=ethan+brown&amp;qid=1633287426&amp;sr=8-1" rel="noopener  ugc nofollow" target="_blank"><div class="lu ab dw"><div class="lv ab lw cl cj lx"><h2 class="bd hu fi z dy ly ea eb lz ed ef hs bi translated">使用Node和Express进行Web开发:利用JavaScript堆栈</h2><div class="ma l"><h3 class="bd b fi z dy ly ea eb lz ed ef dx translated">使用Node和Express进行Web开发:利用JavaScript堆栈</h3></div><div class="mb l"><p class="bd b fp z dy ly ea eb lz ed ef dx translated">www.amazon.com.mx</p></div></div><div class="mc l"><div class="mj l me mf mg mc mh hp lt"/></div></div></a></div></div></div>    
</body>
</html>