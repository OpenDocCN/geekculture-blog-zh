<html>
<head>
<title>How to scrape data from publically available sources?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何从公开可用的资源中收集数据？</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/how-to-scrape-data-from-publically-available-sources-e9697981ed71?source=collection_archive---------12-----------------------#2021-12-28">https://medium.com/geekculture/how-to-scrape-data-from-publically-available-sources-e9697981ed71?source=collection_archive---------12-----------------------#2021-12-28</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="bea9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一个简单的一步一步的网络抓取数据指南。</p><p id="deb3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">写这篇文章的主要动机是详细了解网络抓取101。为了使它更有趣，让我们通过实现它来浏览一个网站。</p><p id="bd2d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当你试图从网站上抓取数据时。首先决定你想分析什么，你想从网站上得到什么类型的数据和数据元素？</p><p id="962e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">例如，我想提取deliveroo中的食物类型？Deliveroo是一家食品配送公司，类似于其他流行的应用程序，如uber eats、zomato等。总部设在伦敦。</p><p id="5c9c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，有两种收集数据的方法:</p><ol class=""><li id="b660" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">单独从页面上刮掉(使用漂亮的汤)</li><li id="d4b1" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">自动抓取并使用网页(使用Selenieum)</li></ol><p id="dd7d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是python中用来抓取数据的两个流行的包。了解这些包的最好方法是从文档中学习。我认为阅读软件包的文档通常是最好的资源。</p><p id="8268" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">人们确实发现最初阅读软件包有点困难，我自己强迫自己阅读文档，因为它们是可信的，并且有你需要或拥有的所有信息。您可以关注或阅读可用的文章和视频，因为我发现它们有助于理解软件包的用法。</p><p id="adb1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我想分享一个我从导师那里得到的建议。</p><h1 id="1639" class="jr js hi bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">尝试阅读和学习包装文档和技术文件。阅读它们是你们一起发展的另一项技能。</h1><p id="c300" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq kr is it iu ks iw ix iy kt ja jb jc hb bi translated">如果你想学习如何阅读<a class="ae ku" rel="noopener" href="/@laymanExplained/layman-explained-reading-documentation-36c450e77e6b">文档</a>或技术/学术<a class="ae ku" href="https://towardsdatascience.com/guide-to-reading-academic-research-papers-c69c21619de6" rel="noopener" target="_blank">论文</a>。可以参考附文。</p><p id="dff4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">回到我们的话题！如前所述，这篇文章将主要集中在使用美丽的汤，并希望在探索硒之后，我将能够在其他文章中详细解释它。</p><p id="559b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">什么是美人汤？</strong></p><p id="8960" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">简单来说，Beautiful Soup是一个python包，用于从HTML和XML文件中提取数据。它用于导航、搜索和从网站中提取数据。</p><p id="def6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">刮之前需要了解HTML吗？</strong></p><p id="4897" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你根本不需要了解html，但是了解html页面的基本语法是很有帮助的，因为它有助于导航你想要的正确数据。</p><p id="064d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您需要了解的一些基本主题:</p><ol class=""><li id="ce8c" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">头球</li><li id="f32f" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">类和ID(它们是什么，用来做什么？)</li><li id="3492" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">表格和列表(它们在html中是如何表示的？)</li></ol><p id="2d8e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你可以从<a class="ae ku" href="https://betterprogramming.pub/understanding-html-basics-for-web-scraping-ae351ee0b3f9" rel="noopener ugc nofollow" target="_blank">这里</a>详细了解。</p><p id="9df3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">Find和FindAll函数的区别？</strong></p><p id="9087" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从任何网站提取数据都至关重要的两个主要功能。</p><p id="a1e9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">查找( )</p><ol class=""><li id="5972" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">当在第一页(即，在项目列表中)找到搜索的元素时，它返回，显示满足条件的第一个元素。</li><li id="c932" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">只有第一个搜索显示为输出。</li><li id="e647" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">Find函数语法，find(标签、属性、文本、关键字等。)</li></ol><p id="831e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">findAll()</p><ol class=""><li id="ab11" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">它可以用来获取满足条件的所有元素。主要是满足条件的所有项目的列表。</li><li id="c647" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">将所有搜索作为输出打印出来。</li><li id="4cb4" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">findAll(标签，属性，文本，限制，关键字)语法。</li></ol><p id="8f29" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，最初我们将使用2个软件包，所以首先我们需要安装，如果你没有在你的本地系统。</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="794e" class="le js hi la b fi lf lg l lh li">!pip install BeautifulSoup4<br/>!pip install requests</span></pre><p id="fc44" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">安装后，我们需要导入所需的库。</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="fac9" class="le js hi la b fi lf lg l lh li">import requests<br/>import bs4 as bs<br/>import pandas as pd</span></pre><p id="4a25" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在进一步讨论之前，最好先了解我们为什么需要这些库。</p><ul class=""><li id="74b7" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc lj jj jk jl bi translated"><strong class="ih hj"> <em class="lk">请求</em> </strong>:向网站(服务器)请求数据，并将响应发送回您的本地系统(客户端)或您请求的系统。</li></ul><figure class="kv kw kx ky fd lm er es paragraph-image"><div class="er es ll"><img src="../Images/40e288164bf82249cea87642d22fd8f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1230/format:webp/1*r4sf4DQ_iUtX4LJJyINbfQ.jpeg"/></div><figcaption class="lp lq et er es lr ls bd b be z dx">Simple process by using requests library (source: <a class="ae ku" href="https://www.analyticsvidhya.com/blog/2021/08/a-simple-introduction-to-web-scraping-with-beautiful-soup/" rel="noopener ugc nofollow" target="_blank">https://www.analyticsvidhya.com/blog/2021/08/a-simple-introduction-to-web-scraping-with-beautiful-soup/</a>)</figcaption></figure><ul class=""><li id="e09a" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc lj jj jk jl bi translated"><strong class="ih hj"><em class="lk">beautiful soup(bs4):</em></strong>如上所述，请求接收的数据然后从HTML解析。它有助于与网页进行交互，就像您使用开发人员工具进行交互一样。</li><li id="dd02" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc lj jj jk jl bi translated"><strong class="ih hj"><em class="lk">【pandas(PD)</em></strong>:提取所需数据后，我们可以将数据组织成一个漂亮的表格，供以后分析使用。</li></ul><p id="721d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，在导入所需的库之后，您需要将网站(您想要从中抓取数据)分配给一个变量，或者您甚至可以将它与requests函数一起使用。</p><p id="eee2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我将请求进入<a class="ae ku" href="https://deliveroo.co.uk/" rel="noopener ugc nofollow" target="_blank">网站</a>并右击网页，点击“检查”以浏览网页的html代码。</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="7121" class="le js hi la b fi lf lg l lh li">url = '<a class="ae ku" href="https://deliveroo.co.uk/" rel="noopener ugc nofollow" target="_blank">https://deliveroo.co.uk/</a>'<br/>results = requests.get(url)</span></pre><p id="e578" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通俗地说，你将要求服务器(通过你提供的链接)从整个静态网页中提取数据。</p><p id="58ff" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你愿意的话，你可以在网站上查询你收到的数据。</p><figure class="kv kw kx ky fd lm er es paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="er es lt"><img src="../Images/6208cb3aafa51d740691a670cd429bc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tAv4zbaz0l6x8N76JXr8_w.jpeg"/></div></div><figcaption class="lp lq et er es lr ls bd b be z dx">Image by Author</figcaption></figure><p id="e587" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以从上面的输出中看到，我们正在获得带有HTML数据标签和各种链接的全部数据。</p><p id="1bcd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，为了访问我们获得的数据，我们使用BeautifulSoup解析HTML，然后使用开发人员的函数访问和提取数据。</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="5aa6" class="le js hi la b fi lf lg l lh li">soup = bs.BeautifulSoup(results.content, "html.parser)</span></pre><p id="bc98" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">关键的一步来了。我曾经发现最初试图理解我需要哪个html标签来提取数据。</p><p id="1625" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我的目标是以后从一个数据框架中提取网站上所有不同的菜单。听起来很简单。</p><figure class="kv kw kx ky fd lm er es paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="er es ly"><img src="../Images/58fa9ded500565c6049f1abb3fbdedc5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1Xv5fmV7vevm3niVgzh91w.jpeg"/></div></div><figcaption class="lp lq et er es lr ls bd b be z dx">Image from <a class="ae ku" href="https://deliveroo.co.uk/" rel="noopener ugc nofollow" target="_blank">Deliveroo</a></figcaption></figure><ul class=""><li id="e7d3" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc lj jj jk jl bi translated">首先是检查页面，找到正确的HTML标签，在标签下我们可以看到想要的列表。</li><li id="155b" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc lj jj jk jl bi translated">发现所有列表下的一个公共类都带有‘span’标签。</li></ul><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="bbff" class="le js hi la b fi lf lg l lh li">menu = soup.find_all('span',class_ = 'HomepageFeaturedCollectionTile-dca78627621916a1')</span></pre><p id="e0c2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上面将列出所有提到的带有类名的标签。</p><figure class="kv kw kx ky fd lm er es paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="er es lz"><img src="../Images/af7e360f73f29028fee914785924ce63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xix4Sd6bydVxV_MuKjKueA.jpeg"/></div></div><figcaption class="lp lq et er es lr ls bd b be z dx">Image by Author</figcaption></figure><p id="973f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从上面的输出中，下一步是只提取没有html标签的文本。</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="3087" class="le js hi la b fi lf lg l lh li">list_of_menu = []<br/>[list_of_menu.append(types.text) for typesin menu]<br/>print(list_of_menu)</span></pre><p id="1060" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，我将获得deliveroo中可用菜单类型的列表。</p><figure class="kv kw kx ky fd lm er es paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="er es ma"><img src="../Images/c4336415d5c5975e0179a81086934075.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AoXBAcZZExwyotLxekVEeQ.jpeg"/></div></div><figcaption class="lp lq et er es lr ls bd b be z dx">Image By Author</figcaption></figure><p id="b2a0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你想要数据帧格式的。</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="60ee" class="le js hi la b fi lf lg l lh li">df = pd.DataFrame(list_of_menu)<br/>df.columns = ['Menu_items']<br/>print(df)</span></pre><figure class="kv kw kx ky fd lm er es paragraph-image"><div class="er es mb"><img src="../Images/f2941e6abc3407aa0700fee784a3bc8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:530/format:webp/1*PkorhhSvlIyt3Br_CpMc3g.jpeg"/></div><figcaption class="lp lq et er es lr ls bd b be z dx">Image By Author</figcaption></figure><p id="2a8c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">就是这样！该列表可能没有用，但是对于您想要从静态网页中提取的任何类型的数据，步骤都是相同的。</p><p id="0030" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在如果你想自动进入并点击cookies，我们可以使用Selenieum软件包。(这是另一篇文章的主题)</p><p id="3e0a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">希望你能发现这个实践教程是有用的，如果你不明白，请随意评论。</p></div></div>    
</body>
</html>