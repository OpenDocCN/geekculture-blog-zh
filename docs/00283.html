<html>
<head>
<title>Thymeleaf email integration with SpringBoot REST web service</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">百里香电子邮件与SpringBoot REST web服务的集成</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/thymeleaf-email-integration-with-springboot-rest-web-service-31bea7c99b1d?source=collection_archive---------2-----------------------#2021-01-03">https://medium.com/geekculture/thymeleaf-email-integration-with-springboot-rest-web-service-31bea7c99b1d?source=collection_archive---------2-----------------------#2021-01-03</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/aaa566dc71b63b17150f8710a1bdb57b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/1*wXRwpQqdu-eydrz90bEG1Q.png"/></div></figure><p id="7731" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">如今，我们有一些技术可以将电子邮件服务与java应用程序集成在一起。但其中“百里香电子邮件集成”是发送电子邮件的一种出色方式。</p><p id="b282" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">因此，在这里，我们将按照A-Z步骤解释“如何将百里香电子邮件服务集成到SpringBoot REST web服务中”。在开始实现之前，你可以从<a class="ae jk" href="https://bitbucket.org/thymeleaf-boot-email-app-blog/thymeleaf-boot-email-app-blog/src/master/" rel="noopener ugc nofollow" target="_blank"> <strong class="io hj">这里</strong> </a>下载完整的java代码示例。在本例中，我将发送一封包含员工工资详细信息的电子邮件。</p><p id="1887" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">技术</strong></p><p id="aff5" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">Java 1.8<br/>Maven 3 . 6 . 1<br/>spring boot 2 . 2 . 7 . release<br/>百里香叶-spring 5<br/>javax . mail<br/>log4j</p><p id="2d5b" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">项目结构</strong></p><figure class="jm jn jo jp fd ij er es paragraph-image"><div class="er es jl"><img src="../Images/68575b4d1c935d4c768292cab09225c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:782/format:webp/1*lxhTisFYnIxvIj56nK8AVw.png"/></div><figcaption class="jq jr et er es js jt bd b be z dx">Project structure</figcaption></figure><p id="b342" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">第一步:POM.xml(依赖关系)</strong></p><p id="cf8c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">请从<a class="ae jk" href="https://bitbucket.org/thymeleaf-boot-email-app-blog/thymeleaf-boot-email-app-blog/src/master/pom.xml" rel="noopener ugc nofollow" target="_blank"> <strong class="io hj">这里</strong> </a>查看完整的POM文件。</p><figure class="jm jn jo jp fd ij er es paragraph-image"><div class="er es ju"><img src="../Images/7d1bf2b294763a3f74ea0ea5055cea68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1202/format:webp/1*itjz_1yckO_CoBbW3aPdiw.png"/></div></figure><p id="4f24" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">第二步:控制器电平变化</strong></p><p id="81ca" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">从请求中获取电子邮件地址和工资金额，并在验证后传递给服务层。</p><figure class="jm jn jo jp fd ij er es paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="er es jv"><img src="../Images/448bc4ca525ab96ff680de49c5ff5833.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xb5AfGsT2xEEfU_BbbGK1Q.png"/></div></div></figure><p id="0c71" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">第三步:服务层变更</strong></p><p id="2e56" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">请访问<a class="ae jk" href="https://bitbucket.org/thymeleaf-boot-email-app-blog/thymeleaf-boot-email-app-blog/src/master/src/main/java/com/cmbk/email/services/EmployeeServiceImpl.java" rel="noopener ugc nofollow" target="_blank"> <strong class="io hj">这里</strong> </a>获取完整的类文件并查看评论。我已经解释了每一步。</p><figure class="jm jn jo jp fd ij er es paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="er es ka"><img src="../Images/5d8eab54797189034a82e45d0d1ef4f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sqyTiaw8PEoEU-aCQHlwNw.png"/></div></div></figure><p id="f362" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">步骤3.1:创建电子邮件模板</strong></p><p id="1715" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在这里，我们必须在resources文件夹中创建一个名为“<strong class="io hj"> templates </strong>的文件夹，并需要添加一个HTML文件(例如:<strong class="io hj">salaryDetailEmailTemplate.html</strong>)。</p><figure class="jm jn jo jp fd ij er es paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="er es kb"><img src="../Images/d9ae817e576887abbf496ba6b77121a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WEFyJai60bFffE4zeFhaCw.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx">salaryDetailEmailTemplate.html</figcaption></figure><figure class="jm jn jo jp fd ij er es paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="er es kc"><img src="../Images/9caa253cd4d522a481be672c07ae7575.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DeNl5sLVXdbSvlEbR4i9Mg.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx">EmailTemplateServiceImpl.java</figcaption></figure><p id="5a7c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这些<strong class="io hj"> ${} </strong>值是可变参数。<a class="ae jk" href="https://bitbucket.org/thymeleaf-boot-email-app-blog/thymeleaf-boot-email-app-blog/src/master/src/main/java/com/cmbk/email/services/EmailTemplateServiceImpl.java" rel="noopener ugc nofollow" target="_blank"> <strong class="io hj">里面的EmailTemplateServiceImpl.java</strong></a><strong class="io hj">。</strong>我们将把<strong class="io hj">工资金额</strong>和<strong class="io hj">日期</strong>添加到<strong class="io hj">上下文</strong>对象中。一旦这个Context对象和HTML文件名被传递到<strong class="io hj"> process() </strong>方法中，它将以字符串值的形式返回邮件正文内容。</p><p id="2e98" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">步骤3.2:设置地址、主题和正文内容</strong></p><p id="b3ad" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">为了设置电子邮件地址、电子邮件主题和电子邮件正文内容，我使用了这个<a class="ae jk" href="https://bitbucket.org/thymeleaf-boot-email-app-blog/thymeleaf-boot-email-app-blog/src/master/src/main/java/com/cmbk/email/domain/SendEmailRequest.java" rel="noopener ugc nofollow" target="_blank"><strong class="io hj"/></a>域类。<br/>如果我们需要设置多个电子邮件地址，我们可以使用逗号分隔的字符串设置多个电子邮件地址。对于这个例子，我们从<a class="ae jk" href="https://bitbucket.org/thymeleaf-boot-email-app-blog/thymeleaf-boot-email-app-blog/src/master/src/main/resources/application.properties" rel="noopener ugc nofollow" target="_blank"> <strong class="io hj">属性文件</strong> </a>中选择电子邮件主题。</p><p id="46f6" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">步骤3.3:发送电子邮件</strong></p><p id="0ede" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">为了发送电子邮件，我们使用了一个不同的服务类，名为<a class="ae jk" href="https://bitbucket.org/thymeleaf-boot-email-app-blog/thymeleaf-boot-email-app-blog/src/master/src/main/java/com/cmbk/email/services/EmailServiceImpl.java" rel="noopener ugc nofollow" target="_blank"><strong class="io hj">EmailServiceImpl.java</strong></a>。请访问bitbucket URL查看实现。</p><p id="c649" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这是这种整合的主要部分。在代码中，我用注释解释了每一行。我们首先从<a class="ae jk" href="https://bitbucket.org/thymeleaf-boot-email-app-blog/thymeleaf-boot-email-app-blog/src/master/src/main/resources/application.properties" rel="noopener ugc nofollow" target="_blank"> <strong class="io hj">属性文件</strong> </a>中获取连接配置信息。这个例子使用的是Gmail服务器，但是在属性文件中，我也提到了AWS电子邮件服务器的相关细节。</p><figure class="jm jn jo jp fd ij er es paragraph-image"><div class="er es kd"><img src="../Images/443a0eb9fa6e6dc3999d8b986182f4c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1372/format:webp/1*Zu-ECwdN93wHZNV8U7pp2g.png"/></div></figure><p id="cb2f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这个<a class="ae jk" href="https://bitbucket.org/thymeleaf-boot-email-app-blog/thymeleaf-boot-email-app-blog/src/master/src/main/java/com/cmbk/email/services/EmailServiceImpl.java" rel="noopener ugc nofollow" target="_blank"><strong class="io hj">EmailServiceImpl.java</strong></a>的类很泛。因此，您也可以在您的项目工作中直接使用这个实现。此外，这也将支持多个发件人电子邮件地址。请参见这个类<strong class="io hj">中的“<strong class="io hj">populate addresses(String to emails)”</strong>方法。现在我们已经完成了实现，并准备测试它。</strong></p><p id="4d84" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">步骤4:测试</strong></p><p id="8487" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">简单地说，我们可以使用Postman脚本来测试这个实现。</p><p id="6d9c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">但是在运行这个脚本之前，你必须在你的Gmail帐户中做一些设置更改，因为有一些安全问题。你必须先遵循以下步骤。</p><ol class=""><li id="02fa" class="ke kf hi io b ip iq it iu ix kg jb kh jf ki jj kj kk kl km bi translated">登录您的Gmail帐户。</li><li id="48de" class="ke kf hi io b ip kn it ko ix kp jb kq jf kr jj kj kk kl km bi translated">转到<strong class="io hj">账户</strong>选项卡。</li><li id="4d7d" class="ke kf hi io b ip kn it ko ix kp jb kq jf kr jj kj kk kl km bi translated">打开<strong class="io hj">不太安全的应用程序访问。</strong></li><li id="9620" class="ke kf hi io b ip kn it ko ix kp jb kq jf kr jj kj kk kl km bi translated">在此之后，当你试图从你的应用程序发送邮件时，你会得到一个错误。</li><li id="f931" class="ke kf hi io b ip kn it ko ix kp jb kq jf kr jj kj kk kl km bi translated">然后进入<strong class="io hj">发现的安全问题</strong>(是谷歌账户安全标签的第一个选项)。这里需要验证最后一个活动是自己验证的。</li></ol><p id="3656" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">就是这样。现在你可以用邮递员或者任何你熟悉的方式发送电子邮件。请查找下面给出的邮递员请求。</p><figure class="jm jn jo jp fd ij er es paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="er es ks"><img src="../Images/c9b36e07fdc1efd8059e3952d76103ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BNZGZpuJlpWuekg9JGK8fw.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx">Postman Request and Response</figcaption></figure><p id="4142" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这是一封电子邮件。</p><figure class="jm jn jo jp fd ij er es paragraph-image"><div class="er es kt"><img src="../Images/a402acef6dcf06f691931c304b60f884.png" data-original-src="https://miro.medium.com/v2/resize:fit:1252/format:webp/1*XZuij0ueB9FyjNTMdmlCfw.png"/></div></figure><p id="b2f8" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">希望这能对你有所帮助，请访问这里的<a class="ae jk" href="https://bitbucket.org/thymeleaf-boot-email-app-blog/thymeleaf-boot-email-app-blog/src/master/" rel="noopener ugc nofollow" target="_blank"> <strong class="io hj">获取完整的代码示例</strong> </a>。如果您有任何问题，请留言或评论。</p></div></div>    
</body>
</html>