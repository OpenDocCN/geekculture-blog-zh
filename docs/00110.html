<html>
<head>
<title>What Is Serverless Framework, Build Serverless API With AWS Lambda?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">什么是无服务器框架，用AWS Lambda构建无服务器API？</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/what-is-serverless-framework-build-serverless-api-with-aws-lambda-2a38830a466?source=collection_archive---------0-----------------------#2020-06-08">https://medium.com/geekculture/what-is-serverless-framework-build-serverless-api-with-aws-lambda-2a38830a466?source=collection_archive---------0-----------------------#2020-06-08</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/b26dd5f860a108880d744b7806f98f95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bPA2w8fov_5MATrOoL4SvA.png"/></div></div></figure><p id="e3a7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">什么是</strong> <a class="ae jo" href="https://www.serverless.com/learn/why/" rel="noopener ugc nofollow" target="_blank"> <strong class="is hj">无服务器</strong> </a> <strong class="is hj">？</strong></p><p id="6409" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi jp translated"><span class="l jq jr js bm jt ju jv jw jx di"> S </span>无服务器是将您的所有基础设施需求抽象为一个简单的配置，并为您进行部署。简单地说，它允许用户编写和部署后端服务，而不用担心底层基础设施。即使我们称之为无服务器仍然使用物理服务器，但程序员不需要担心那些服务器。基础设施不是你的责任。扩展和性能是自动处理的，您只需为您使用的确切资源付费</p><p id="89b5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">像AWS、Azure和Google Cloud这样的云提供商负责提供基础设施来执行这段代码。这种发送给云提供商运行的书面代码以功能的形式出现，通常被称为功能即服务(FaaS)。因此，收费是根据执行代码所使用的资源数量来计算的(只为每个函数执行时所用的处理时间付费)。</p><p id="5ccb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae jo" href="https://aws.amazon.com/serverless/" rel="noopener ugc nofollow" target="_blank"> AWS无服务器概述</a></p><p id="f6fa" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae jo" href="https://azure.microsoft.com/en-us/solutions/serverless/#overview" rel="noopener ugc nofollow" target="_blank">微软Azure无服务器概述</a></p><p id="56b9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae jo" href="https://cloud.google.com/serverless" rel="noopener ugc nofollow" target="_blank">谷歌云无服务器概述</a></p><p id="487b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">而不涉及无服务器架构的更多细节。让我们来关注一下今天的话题什么是无服务器框架，我们可以用它来做什么样的工作。</p></div><div class="ab cl jy jz gp ka" role="separator"><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd"/></div><div class="hb hc hd he hf"><p id="abe8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">什么是</strong> <a class="ae jo" href="https://www.serverless.com/framework/docs/" rel="noopener ugc nofollow" target="_blank"> <strong class="is hj">无服务器框架</strong> </a> <strong class="is hj">？</strong></p><p id="0aa5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">另一个使用Node.js编写的开源web框架使我们能够构建可伸缩的应用程序，而无需担心基础设施的供应和管理。这将有助于摆脱服务器扩展、资源供应等。最初，它只支持在AWS Lambda上构建应用程序，但当前的无服务器框架能够在许多其他支持功能即服务的云提供商中构建和部署应用程序，其中很少是这样的，</p><ul class=""><li id="b5b0" class="kf kg hi is b it iu ix iy jb kh jf ki jj kj jn kk kl km kn bi translated">谷歌云:<a class="ae jo" href="https://cloud.google.com/functions/docs/concepts/overview" rel="noopener ugc nofollow" target="_blank">云功能</a></li><li id="0fd0" class="kf kg hi is b it ko ix kp jb kq jf kr jj ks jn kk kl km kn bi translated">IBM BlueMix: <a class="ae jo" href="https://cloud.ibm.com/docs/openwhisk?topic=openwhisk-getting-started" rel="noopener ugc nofollow" target="_blank"> IBM云功能</a></li><li id="a9cf" class="kf kg hi is b it ko ix kp jb kq jf kr jj ks jn kk kl km kn bi translated">甲骨文云:<a class="ae jo" href="https://docs.cloud.oracle.com/en-us/iaas/Content/Functions/Concepts/functionsoverview.htm" rel="noopener ugc nofollow" target="_blank">甲骨文功能</a></li><li id="919b" class="kf kg hi is b it ko ix kp jb kq jf kr jj ks jn kk kl km kn bi translated">AWS: <a class="ae jo" href="https://aws.amazon.com/lambda/" rel="noopener ugc nofollow" target="_blank"> AWS Lambda </a></li><li id="3e1b" class="kf kg hi is b it ko ix kp jb kq jf kr jj ks jn kk kl km kn bi translated">微软Azure: <a class="ae jo" href="https://azure.microsoft.com/en-in/services/functions/" rel="noopener ugc nofollow" target="_blank"> Azure功能</a></li></ul><p id="f423" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">等等。</p><p id="936a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这里有所有的<a class="ae jo" href="https://www.serverless.com/framework/docs/providers/" rel="noopener ugc nofollow" target="_blank">无服务器基础设施提供商</a></p></div><div class="ab cl jy jz gp ka" role="separator"><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd"/></div><div class="hb hc hd he hf"><p id="0068" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们用Python实现一个简单的AWS Lambda无服务器API</p><p id="30df" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">作为第一步，我们需要将<strong class="is hj"> Node.js </strong>安装到本地机器上，因为无服务器是node.js CLI工具。可以使用node.js版本检查命令来验证安装。</p><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="43d1" class="lc ld hi ky b fi le lf l lg lh">node -v</span></pre><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es li"><img src="../Images/b0427da62c2a764eecc7b88c3e4ac2b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PubXH1dhH00GpkPtOtZXfQ.png"/></div></div></figure><blockquote class="lj lk ll"><p id="9f9f" class="iq ir lm is b it iu iv iw ix iy iz ja ln jc jd je lo jg jh ji lp jk jl jm jn hb bi translated">注意:无服务器运行在节点v6或更高版本上</p></blockquote><p id="4865" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下一步是安装无服务器框架。在cmd中键入以下npm命令。</p><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="086a" class="lc ld hi ky b fi le lf l lg lh">npm install -g serverless</span></pre><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lq"><img src="../Images/6b68e8774f024acea28f0653fbc48201.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*naItCUPmfq9u9U20hfzNLw.png"/></div></div></figure><p id="bf3b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您可以使用以下命令来验证它，</p><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="7845" class="lc ld hi ky b fi le lf l lg lh">serverless -v</span></pre><p id="48a5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，我们需要配置AWS帐户来代表您供应和管理资源。</p><ul class=""><li id="db61" class="kf kg hi is b it iu ix iy jb kh jf ki jj kj jn kk kl km kn bi translated">登录<a class="ae jo" href="https://aws.amazon.com/" rel="noopener ugc nofollow" target="_blank"> AWS账户</a>(如果没有账户，创建一个AWS账户)</li><li id="8994" class="kf kg hi is b it ko ix kp jb kq jf kr jj ks jn kk kl km kn bi translated">接下来将创建一个IAM用户和<a class="ae jo" href="https://www.serverless.com/framework/docs/dashboard/access-roles/" rel="noopener ugc nofollow" target="_blank">访问角色</a>，通过启用无服务器框架来发布临时访问密钥以在AWS中部署服务，从而保护AWS上的服务部署。(在本文中，我使用默认的AWS配置文件)</li></ul><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="ad7b" class="lc ld hi ky b fi le lf l lg lh">serverless config credentials --provider aws --key &lt;AccessKey&gt; --secret &lt;secretKey&gt; --profile &lt;profile name&gt;</span></pre><p id="27a6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一旦成功，我们可以在。本地计算机中的aws文件夹。</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lr"><img src="../Images/3f8b04c98cc458f7b107d7cf4d90d1d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EaXpq0p5oksH3MwGkZ1N5Q.png"/></div></div></figure><p id="8e2a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在让我们使用无服务器创建一个简单的后端服务。</p><p id="c347" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在cmd中使用以下命令将创建一个服务。</p><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="e5af" class="lc ld hi ky b fi le lf l lg lh">serverless create --template aws-python --path backend</span></pre><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ls"><img src="../Images/2bbd4b7faca2c23625a3b0aec34b005f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dJgpqvxdzD0JsZFE4GbQlQ.png"/></div></div></figure><p id="fcf7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">使用上面的命令，我们可以创建python服务。有许多模板可用于在无服务器框架中创建服务。<a class="ae jo" href="https://www.serverless.com/framework/docs/providers/aws/cli-reference/create/#available-templates" rel="noopener ugc nofollow" target="_blank">查看此处</a>。</p><p id="1e91" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你不记得命令，在控制台中键入<em class="lm">无服务器</em>，如下图所示，我们可以创建服务。</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lt"><img src="../Images/377d486c0d75941438b7435b78ab83e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*okb9iz4WGtoz1G2fdWTtPw.png"/></div></div></figure><p id="da0c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这将在项目目录中创建两个文件。</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div class="er es lu"><img src="../Images/883d32d0ec9b80c981038960d63fa948.png" data-original-src="https://miro.medium.com/v2/resize:fit:1050/format:webp/1*D97JVxAzHT4AsVLSNmutsA.png"/></div></figure><p id="3265" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">默认<em class="lm"> serverless.yml </em>如下图所示</p><figure class="kt ku kv kw fd ij"><div class="bz dy l di"><div class="lv lw l"/></div></figure><p id="f885" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">默认<em class="lm"> handler.py </em>看起来像</p><figure class="kt ku kv kw fd ij"><div class="bz dy l di"><div class="lv lw l"/></div><figcaption class="lx ly et er es lz ma bd b be z dx">handler.py</figcaption></figure><p id="4f0b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们修改这两个文件来创建一个简单的API，我们可以用它来添加两个数值。</p><p id="58a4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">作为第一步，我们应该将<em class="lm"> serverless.yml修改为dec </em></p><ul class=""><li id="484e" class="kf kg hi is b it iu ix iy jb kh jf ki jj kj jn kk kl km kn bi translated">定义服务的名称:后端服务<em class="lm">(这应该是特定无服务器帐户的唯一服务名称)。</em></li><li id="58e1" class="kf kg hi is b it ko ix kp jb kq jf kr jj ks jn kk kl km kn bi translated">为了在无服务器仪表盘(<em class="lm">dashboard.serverless.com</em>)中监控无服务器项目，我们可以提到<em class="lm"> app </em>和<em class="lm"> org。</em></li><li id="eda3" class="kf kg hi is b it ko ix kp jb kq jf kr jj ks jn kk kl km kn bi translated">接下来，我们应该提到云提供商的配置。在我们的例子中，我们使用AWS作为我们的云服务提供商。(应该需要配置AWS配置)</li><li id="e8c6" class="kf kg hi is b it ko ix kp jb kq jf kr jj ks jn kk kl km kn bi translated">在最后一部分，我们包括了lambda函数。在我们的例子中，我们希望定义一个POST API。</li></ul><p id="ebfe" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">更多信息请参考<a class="ae jo" href="https://www.serverless.com/framework/docs/providers/aws/guide/variables/" rel="noopener ugc nofollow" target="_blank">此处</a>。</p><p id="7010" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们看看修改后的<em class="lm"> serverless.yml </em>，它包含了POST API的所有必要配置。</p><figure class="kt ku kv kw fd ij"><div class="bz dy l di"><div class="lv lw l"/></div></figure><p id="dc65" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在我们应该在handler.py中实现服务。</p><p id="5bf8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们编写一个简单的python函数来添加两个数值并返回JSON响应。</p><figure class="kt ku kv kw fd ij"><div class="bz dy l di"><div class="lv lw l"/></div></figure><p id="557d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在所有的实现和配置都完成了</p><p id="ea5b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们使用无服务器命令来部署它</p><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="b577" class="lc ld hi ky b fi le lf l lg lh">serverless deploy</span></pre><p id="f993" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一旦您执行这个命令，它将在AWS中提供所有必要的资源并部署我们的代码。</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mb"><img src="../Images/a570ff574d1c3b839b4abaa5acb93304.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*57EMKQKViUlELElYPhgF_w.png"/></div></div></figure><p id="510e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">成功的部署将返回端点URL。</p><p id="4dbf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们尝试一下使用无服务器框架创建的简单API</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mc"><img src="../Images/33ad2ba518961aee5e3dc4e52483313f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*tFwv-4pJAGfZ7oVmACSXvw.gif"/></div></div></figure><p id="9a32" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在轮到你试一试了……..</p><blockquote class="lj lk ll"><p id="14c9" class="iq ir lm is b it iu iv iw ix iy iz ja ln jc jd je lo jg jh ji lp jk jl jm jn hb bi translated"><em class="hi">* *注意:请检查AWS CloudFormation，在那里您可以看到为特定无服务器项目提供的所有AWS资源。</em></p></blockquote><p id="0730" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">请在这里随意发表你的问题…！！！！！！！！！！！！！</p></div></div>    
</body>
</html>