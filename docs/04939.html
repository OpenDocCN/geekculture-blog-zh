<html>
<head>
<title>Scraping Images Using Selenium</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用硒刮图像</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/scraping-images-using-selenium-f35fab26b122?source=collection_archive---------10-----------------------#2021-07-06">https://medium.com/geekculture/scraping-images-using-selenium-f35fab26b122?source=collection_archive---------10-----------------------#2021-07-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="792a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我是如何在几秒钟内从谷歌Chrome上抓取图片的！</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/46ffabe516922cc2d4fa90cd840ac8e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5rtYhXpwVVx_mCitPsi2Xw.png"/></div></div></figure><p id="88d9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这个小而简单的用例中，我们探索如何使用Selenium从Google Chrome中为用户搜索的任何关键字(或一组关键字)删除图像。</p><h1 id="81b8" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">目标</h1><ul class=""><li id="59be" class="ko kp hi ih b ii kq im kr iq ks iu kt iy ku jc kv kw kx ky bi translated">我们的程序应该从用户那里获取任何关键字(例如:“猫”)，以及所需的图像数量，并在Chrome浏览器上从Google Images中删除那么多图像。</li><li id="148a" class="ko kp hi ih b ii kz im la iq lb iu lc iy ld jc kv kw kx ky bi translated">图像必须存储在一个文件夹中，以搜索术语命名，并应适当编号，以便于访问和解释。</li></ul><h1 id="5dad" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">程序流程</h1><ol class=""><li id="b5cf" class="ko kp hi ih b ii kq im kr iq ks iu kt iy ku jc le kw kx ky bi translated">首先，我们的程序应该接受一个<strong class="ih hj">搜索词</strong>和要抓取的图像数量。</li><li id="ee34" class="ko kp hi ih b ii kz im la iq lb iu lc iy ld jc le kw kx ky bi translated">该程序应该检查一个与搜索词同名的<strong class="ih hj">文件夹</strong>是否已经存在。如果没有，那么它应该<strong class="ih hj">创建一个</strong>。</li><li id="a727" class="ko kp hi ih b ii kz im la iq lb iu lc iy ld jc le kw kx ky bi translated">然后，我们的程序应该为这个特定的搜索词打开<strong class="ih hj"> Google Images </strong>页面。</li><li id="dc4b" class="ko kp hi ih b ii kz im la iq lb iu lc iy ld jc le kw kx ky bi translated">然后，它应该点击每个图像，并提取其网址，可用于抓取和保存图像后。它应该提取尽可能多的指定网址。</li><li id="0a2c" class="ko kp hi ih b ii kz im la iq lb iu lc iy ld jc le kw kx ky bi translated">如果网页没有那么多图片，应该点击“<strong class="ih hj">加载更多</strong>按钮进入下一页</li><li id="9537" class="ko kp hi ih b ii kz im la iq lb iu lc iy ld jc le kw kx ky bi translated">一旦创建了URL列表，该程序应该点击每个URL，下载图像并保存在创建的文件夹中。</li></ol><h1 id="2a2a" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">先决条件</h1><h2 id="1923" class="lf jr hi bd js lg lh li jw lj lk ll ka iq lm ln ke iu lo lp ki iy lq lr km ls bi translated">铬驱动程序</h2><p id="20e6" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq lt is it iu lu iw ix iy lv ja jb jc hb bi translated">由于我们在Google Chrome上使用Selenium，我们需要安装适合我们系统的Chrome驱动程序。</p><ul class=""><li id="7a70" class="ko kp hi ih b ii ij im in iq lw iu lx iy ly jc kv kw kx ky bi translated">首先，确保你的机器上安装了Chrome</li><li id="0556" class="ko kp hi ih b ii kz im la iq lb iu lc iy ld jc kv kw kx ky bi translated">检查你的谷歌浏览器版本——点击顶部的三个点，点击帮助，然后“关于谷歌浏览器”</li></ul><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es lz"><img src="../Images/ad5d019a1b4547e8b945bf0d5c766975.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*54hUA73qvNcaPB_wSAwXDA.png"/></div></div><figcaption class="ma mb et er es mc md bd b be z dx">Check your Chrome Version</figcaption></figure><ul class=""><li id="6a3a" class="ko kp hi ih b ii ij im in iq lw iu lx iy ly jc kv kw kx ky bi translated">现在你应该看到你的版本了。在制作这个项目时，我的Chrome版本是91.0.4472.114(官方版本)(arm64)</li><li id="e7cc" class="ko kp hi ih b ii kz im la iq lb iu lc iy ld jc kv kw kx ky bi translated">现在转到<a class="ae me" href="https://chromedriver.storage.googleapis.com/index.html" rel="noopener ugc nofollow" target="_blank">这个</a>链接，点击与您的版本最接近的版本。从给定的选项中，选择适合您机器的选项。例如，如果您使用的是带有M1芯片的MacBook Pro，请选择该版本的驱动程序。</li></ul><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es mf"><img src="../Images/8be8f4e98e7709b9fa8eb9cebbf33445.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2kfkyv1Kvbtro9cvE20utQ.png"/></div></div><figcaption class="ma mb et er es mc md bd b be z dx">Choose the one that matches your machine</figcaption></figure><ul class=""><li id="3c27" class="ko kp hi ih b ii ij im in iq lw iu lx iy ly jc kv kw kx ky bi translated">下载驱动程序，并将其保存在保存项目的同一个文件中</li></ul><h1 id="b34a" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">获取图像URL</h1><h2 id="d53c" class="lf jr hi bd js lg lh li jw lj lk ll ka iq lm ln ke iu lo lp ki iy lq lr km ls bi translated">制作谷歌图片页面的URL</h2><p id="5a2d" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq lt is it iu lu iw ix iy lv ja jb jc hb bi translated">为了获取图片的URL，我们的程序应该转到Google Images页面来查找搜索到的条目。“猫”这个词的谷歌图片页面的链接是<a class="ae me" href="https://www.google.com/search?safe=off&amp;site=&amp;tbm=isch&amp;source=hp&amp;q=cat&amp;oq=cat&amp;gs_l=img" rel="noopener ugc nofollow" target="_blank">https://www.google.com/search?safe=off&amp;site =&amp;TBM = isch&amp;source = HP&amp;q = cat&amp;OQ = cat&amp;GS _ l = img</a></p><p id="315d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">注意，如果我们将URL中的单词“猫”替换为任何其他单词，比如“狗”，我们会得到狗的Google图片页面。所以我们可以做一个通用的URL<a class="ae me" href="https://www.google.com/search?safe=off&amp;site=&amp;tbm=isch&amp;source=hp&amp;q={q}&amp;oq={q}&amp;gs_l=img" rel="noopener ugc nofollow" target="_blank">https://www.google.com/search?safe=off&amp;site =&amp;TBM = isch&amp;source = HP&amp;q = {q}&amp;OQ = { q }&amp;GS _ l = img</a><br/>并用我们的搜索词代替{ q }。</p><h2 id="a971" class="lf jr hi bd js lg lh li jw lj lk ll ka iq lm ln ke iu lo lp ki iy lq lr km ls bi translated">谷歌图片无限滚动</h2><p id="2a23" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq lt is it iu lu iw ix iy lv ja jb jc hb bi translated">谷歌图片可以无限滚动到某一点。因此，当我们搜索任何术语时，它会显示一些结果，向下滚动时，它会自动加载，无需我们点击任何按钮</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es mg"><img src="../Images/64ff5af495107eb4032543fbe4ade4d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MAQ4Box-nrvykvVSKCVoTg.png"/></div></div><figcaption class="ma mb et er es mc md bd b be z dx">Image Source: <a class="ae me" href="https://addyosmani.com/blog/infinite-scroll-without-layout-shifts/" rel="noopener ugc nofollow" target="_blank">@addyosmani</a></figcaption></figure><p id="41d5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们需要确保每次加载页面时，它都位于网页的末尾。</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="mh mi l"/></div><figcaption class="ma mb et er es mc md bd b be z dx">Function for infinite Scrolling</figcaption></figure><p id="32fb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们编写一个打开网页并找到图片的程序。我们使用图像将在<strong class="ih hj"> img </strong>标签下并且每个图像有CSS选择器<strong class="ih hj"> Q4LuWd </strong>的事实来识别图像</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es mj"><img src="../Images/4959ac6fe8683fa5dd4b1486167119cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wHmA_xRjliPAzENQu-S9Kw.png"/></div></div></figure><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="mh mi l"/></div><figcaption class="ma mb et er es mc md bd b be z dx">Getting the URLs</figcaption></figure><p id="bf1d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个函数不断地将图像标签添加到列表中。然后点击图像，寻找带有<strong class="ih hj"> n3VNCb的标签。</strong>一旦找到，就保存图片来源。这样做，直到找到所需数量的图像。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es mk"><img src="../Images/35b61ecd3953377d0c67f2b020cc8180.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KwSNL-gFRyII6BgqTQ8n2g.png"/></div></div></figure><h2 id="9ad9" class="lf jr hi bd js lg lh li jw lj lk ll ka iq lm ln ke iu lo lp ki iy lq lr km ls bi translated">加载更多</h2><p id="d49b" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq lt is it iu lu iw ix iy lv ja jb jc hb bi translated">如果我们需要比第一个网页上更多的图片，我们的程序将不得不点击<strong class="ih hj">“搜索更多结果”</strong>按钮。我们已经在程序中添加了这一点，以防图像数量不符合要求。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es ml"><img src="../Images/07314410f742c864cbe5cfa2bf576acd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JOBfR5gDs4VT1-WZSoy-YA.png"/></div></div></figure><p id="fc25" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦找到了所有的URL，它们就被存储在set中，并返回那个set。</p><h1 id="0a4d" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">抓取并保存图像</h1><p id="bd2c" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq lt is it iu lu iw ix iy lv ja jb jc hb bi translated">我们现在创建一个函数，它获取一个包含图像的URL，并将其保存到指定的文件夹中:</p><ul class=""><li id="2c96" class="ko kp hi ih b ii ij im in iq lw iu lx iy ly jc kv kw kx ky bi translated">它接受文件夹名、图像URL和图像编号</li><li id="dd67" class="ko kp hi ih b ii kz im la iq lb iu lc iy ld jc kv kw kx ky bi translated">它下载图像并将其存储在文件夹中，它还使用图像编号来命名图像。</li></ul><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="mh mi l"/></div><figcaption class="ma mb et er es mc md bd b be z dx">Getting the image</figcaption></figure><h1 id="7473" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">让这一切走到一起</h1><p id="3b8f" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq lt is it iu lu iw ix iy lv ja jb jc hb bi translated">现在，我们创建一个调用上述函数的函数，并为我们的图像创建文件夹。</p><ul class=""><li id="c6b6" class="ko kp hi ih b ii ij im in iq lw iu lx iy ly jc kv kw kx ky bi translated">首先，它检查以搜索词作为名称的文件夹是否已经存在。如果没有，它就会创建一个。</li><li id="a144" class="ko kp hi ih b ii kz im la iq lb iu lc iy ld jc kv kw kx ky bi translated">然后它调用<strong class="ih hj"> fetch_image_urls </strong>函数来获取图像URL</li><li id="93d8" class="ko kp hi ih b ii kz im la iq lb iu lc iy ld jc kv kw kx ky bi translated">最后，它使用<strong class="ih hj"> persist_image </strong>函数将图像保存在创建的文件夹中。</li></ul><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="mh mi l"/></div><figcaption class="ma mb et er es mc md bd b be z dx">Calling the Functions</figcaption></figure><p id="9d73" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们走吧！我们已经成功地使用Selenium从Google Chrome中删除了图片！这些图像现在可以用于您的任何项目！</p></div><div class="ab cl mm mn gp mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="hb hc hd he hf"><p id="4731" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">你可以在我的GitHub上查看完整的代码:</em></p><div class="mt mu ez fb mv mw"><a href="https://github.com/eshitagoel/Web-Scraping/tree/main/Image%20Scraper" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab dw"><div class="my ab mz cl cj na"><h2 class="bd hj fi z dy nb ea eb nc ed ef hh bi translated">eshitagole/网页抓取</h2><div class="nd l"><h3 class="bd b fi z dy nb ea eb nc ed ef dx translated">这个项目利用Selenium从Google Chrome上删除图像——为了执行这个项目，一个合适的Chrome…</h3></div><div class="ne l"><p class="bd b fp z dy nb ea eb nc ed ef dx translated">github.com</p></div></div><div class="nf l"><div class="ng l nh ni nj nf nk jo mw"/></div></div></a></div></div></div>    
</body>
</html>