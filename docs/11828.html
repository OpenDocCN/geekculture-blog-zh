<html>
<head>
<title>The Pythonic Way of Becoming a Sudoku Master</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">成为数独高手的Pythonic式方法</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/the-pythonic-way-of-becoming-a-sudoku-master-db8e6881bb87?source=collection_archive---------8-----------------------#2022-04-11">https://medium.com/geekculture/the-pythonic-way-of-becoming-a-sudoku-master-db8e6881bb87?source=collection_archive---------8-----------------------#2022-04-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="5505" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">使用OpenCV、OCR、线性编程和Streamlit</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/9e8c6adda496ca5bfb315457d6327251.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*1qvm2jJdJXaZYmiv"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Photo by <a class="ae jn" href="https://unsplash.com/@maplerockdesign?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Richard Bell</a> on <a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="c7af" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">玩数独是为数不多的不受年龄、语言、文化、体能或地点限制的活动之一。它的规则很简单。然而，在某些情况下，根据难度的高低，需要全神贯注地完成一场游戏，即使没有错误，也很少出错。我发现人们在做高难度的数独游戏时倾向于做更多的猜测。这让我想到是否可以编写一个程序来立即解决数独难题。经过一些研究，我看到了下面这个由“<a class="ae jn" href="https://lakshmi1212.medium.com/" rel="noopener"> Lakhsmi Ajay </a>”写的帖子。我强烈推荐你看看她的帖子，这对以后的发展是一个很大的启发。</p><div class="kk kl ez fb km kn"><a href="https://towardsdatascience.com/solve-sudoku-using-linear-programming-python-pulp-b41b29f479f3" rel="noopener follow" target="_blank"><div class="ko ab dw"><div class="kp ab kq cl cj kr"><h2 class="bd hj fi z dy ks ea eb kt ed ef hh bi translated">使用线性编程解决数独(Python-PuLP)</h2><div class="ku l"><h3 class="bd b fi z dy ks ea eb kt ed ef dx translated">数独是一种典型的涉及到笔、纸和思维共同作用的游戏。当你想休息时…</h3></div><div class="kv l"><p class="bd b fp z dy ks ea eb kt ed ef dx translated">towardsdatascience.com</p></div></div><div class="kw l"><div class="kx l ky kz la kw lb jh kn"/></div></div></a></div><h1 id="ca3e" class="lc ld hi bd le lf lg lh li lj lk ll lm io ln ip lo ir lp is lq iu lr iv ls lt bi translated">介绍</h1><p id="e316" class="pw-post-body-paragraph jo jp hi jq b jr lu ij jt ju lv im jw jx lw jz ka kb lx kd ke kf ly kh ki kj hb bi translated">在这篇文章中，我将把<a class="ae jn" href="https://lakshmi1212.medium.com/" rel="noopener"> L. Ajay </a>的数独求解器与一个自动过程结合起来，该过程检测现有的和缺失的数字单元格，并在一个基于web的应用程序的输入屏幕截图上显示输出计算。请<a class="ae jn" href="https://gist.github.com/mesutcanalkan/e5b6dfb94ff4c48bb4f49292d491d19e" rel="noopener ugc nofollow" target="_blank">点击这里</a>查看这篇文章中使用的代码。</p><h1 id="8196" class="lc ld hi bd le lf lg lh li lj lk ll lm io ln ip lo ir lp is lq iu lr iv ls lt bi translated">步骤:</h1><p id="dc83" class="pw-post-body-paragraph jo jp hi jq b jr lu ij jt ju lv im jw jx lw jz ka kb lx kd ke kf ly kh ki kj hb bi translated"><a class="ae jn" href="#af7c" rel="noopener ugc nofollow"> <strong class="jq hj">第一步:</strong>在手机上拍摄数独截图并读取(opencv/streamlit)</a><br/><a class="ae jn" href="#cf57" rel="noopener ugc nofollow"><strong class="jq hj">第二步:</strong>定位感兴趣区域(ROI)(opencv)</a><br/><a class="ae jn" href="#b7b4" rel="noopener ugc nofollow"><strong class="jq hj">第三步:</strong>检测ROI中的数值(pytesserac)</a><br/><a class="ae jn" href="#d23b" rel="noopener ugc nofollow"><strong class="jq hj">第四步:</strong>将数独输入发送到线性规划求解器(pulp) </a></p><h1 id="af7c" class="lc ld hi bd le lf lg lh li lj lk ll lm io ln ip lo ir lp is lq iu lr iv ls lt bi translated"><strong class="ak">第一步:阅读输入截图</strong></h1><p id="3059" class="pw-post-body-paragraph jo jp hi jq b jr lu ij jt ju lv im jw jx lw jz ka kb lx kd ke kf ly kh ki kj hb bi translated">输入图像将是从iphone上截取的截图。但是，如果这个图像在我们的本地驱动器上，我们应该是这样读取它的。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es lz"><img src="../Images/be0b8f48181dc5e7c5235393248497de.png" data-original-src="https://miro.medium.com/v2/resize:fit:760/format:webp/1*EL1Zb-gDUg82mK_isTBsfQ.png"/></div><figcaption class="jj jk et er es jl jm bd b be z dx">Image by author</figcaption></figure><p id="2eab" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">因为我们对图像上显示的所有信息都不感兴趣，所以我们需要通过不同的x，y坐标对其进行裁剪。</p><h1 id="cf57" class="lc ld hi bd le lf lg lh li lj lk ll lm io ln ip lo ir lp is lq iu lr iv ls lt bi translated">步骤2:定位感兴趣的区域</h1><p id="3acd" class="pw-post-body-paragraph jo jp hi jq b jr lu ij jt ju lv im jw jx lw jz ka kb lx kd ke kf ly kh ki kj hb bi translated">我们可以裁剪输入图像，只显示如下的谜题。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es ma"><img src="../Images/2822300794d88e496500a1068aaab7d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1048/format:webp/1*2JuIMWIbRJEF3P-e81h5Gg.png"/></div><figcaption class="jj jk et er es jl jm bd b be z dx">Image by author</figcaption></figure><p id="e23d" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">现在我们知道了数独谜题对应的X，Y坐标，我们可以重新裁剪图像81次，这样我们就可以运行OCR来检测数字。我们将这81个子输入中的每一个称为感兴趣区域(ROI)。</p><h1 id="b7b4" class="lc ld hi bd le lf lg lh li lj lk ll lm io ln ip lo ir lp is lq iu lr iv ls lt bi translated">步骤3:检测数字单元格</h1><p id="4fad" class="pw-post-body-paragraph jo jp hi jq b jr lu ij jt ju lv im jw jx lw jz ka kb lx kd ke kf ly kh ki kj hb bi translated">请看下面的例子，找到写在第一行第一列正方形内的数字。宇宙魔方来拯救我们了。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mb"><img src="../Images/87512a5bf31ea40f2deb6751261f84b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wPIFUKbknSEvWV84ub0oHg.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Image by author</figcaption></figure><p id="5ba6" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">通过对每一行和每一列循环重复这一逻辑，我们可以创建一个数独字谜形状的列表，这样就可以解决线性规划问题。</p><h1 id="d23b" class="lc ld hi bd le lf lg lh li lj lk ll lm io ln ip lo ir lp is lq iu lr iv ls lt bi translated">第四步:解决数独</h1><p id="f120" class="pw-post-body-paragraph jo jp hi jq b jr lu ij jt ju lv im jw jx lw jz ka kb lx kd ke kf ly kh ki kj hb bi translated">在<a class="ae jn" href="https://lakshmi1212.medium.com/" rel="noopener"> L. Ajay </a>的<a class="ae jn" href="https://towardsdatascience.com/solve-sudoku-using-linear-programming-python-pulp-b41b29f479f3" rel="noopener" target="_blank">数独解算器</a>的帮助下，我们可以找到对应于每一行和每一列的值。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mc"><img src="../Images/53d1a1a46b057fc841d13f328450b1cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1014/format:webp/1*3UgwcV70Go18tdmu5sw02A.png"/></div><figcaption class="jj jk et er es jl jm bd b be z dx">Image by author</figcaption></figure><h1 id="6c3a" class="lc ld hi bd le lf lg lh li lj lk ll lm io ln ip lo ir lp is lq iu lr iv ls lt bi translated">第五步:写缺失的数字</h1><p id="42a0" class="pw-post-body-paragraph jo jp hi jq b jr lu ij jt ju lv im jw jx lw jz ka kb lx kd ke kf ly kh ki kj hb bi translated">在我们找到unsolved_sudoku数组中最初丢失的每个数字的行和列索引后，我们可以在输入图像上绘制已求解的sudoku数组值的文本。</p><div class="iy iz ja jb fd ab cb"><figure class="md jc me mf mg mh mi paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><img src="../Images/6279f6e7da68e2406716878b02db74d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1474/format:webp/1*0E2pJEvFZeCTbU4Nm7YlGw.png"/></div></figure><figure class="md jc mj mf mg mh mi paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><img src="../Images/d8cdcdb6d98cc97587f7fcddb6954001.png" data-original-src="https://miro.medium.com/v2/resize:fit:528/format:webp/1*vx7A9b19Yus7zpbkcbiLdg.png"/></div><figcaption class="jj jk et er es jl jm bd b be z dx mk di ml mm">Images by author</figcaption></figure></div><h1 id="3ea1" class="lc ld hi bd le lf lg lh li lj lk ll lm io ln ip lo ir lp is lq iu lr iv ls lt bi translated">步骤6:构建应用程序</h1><p id="a931" class="pw-post-body-paragraph jo jp hi jq b jr lu ij jt ju lv im jw jx lw jz ka kb lx kd ke kf ly kh ki kj hb bi translated">网上有很多关于构建streamlit应用的例子。</p><p id="4edc" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">然而，使这种逻辑起作用的关键部分如下:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mn"><img src="../Images/076f6c6472b69ac8cbd404d62fb825bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vgWkeF96NJ3BeQJSSK954A.png"/></div></div></figure><p id="e695" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我们将从电话图库中读取图像，而不是从本地路径中读取。</p><p id="ad5c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">源代码:</strong>请参考这个git repo获取完整代码:<a class="ae jn" href="https://gist.github.com/mesutcanalkan/e5b6dfb94ff4c48bb4f49292d491d19e" rel="noopener ugc nofollow" target="_blank"> sudoku_app.py </a></p><p id="013a" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这是演示:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mo"><img src="../Images/fc7335316f24a572024f1fdd63aee29d.png" data-original-src="https://miro.medium.com/v2/resize:fit:460/1*eHIKIwHrBIsS8H3yvQIDxA.gif"/></div><figcaption class="jj jk et er es jl jm bd b be z dx">Solution gif by author</figcaption></figure><h1 id="b94d" class="lc ld hi bd le lf lg lh li lj lk ll lm io ln ip lo ir lp is lq iu lr iv ls lt bi translated">结论</h1><p id="d7aa" class="pw-post-body-paragraph jo jp hi jq b jr lu ij jt ju lv im jw jx lw jz ka kb lx kd ke kf ly kh ki kj hb bi translated">这篇文章展示了如何在python上构建一个简单的基于web的应用程序，该应用程序使用OpenCV、OCR、线性编程和Streamlit处理iphone截图，在几秒钟内完成一个没有错误的数独游戏。</p><p id="ee9e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在自动检测任何截图/图像上数独谜题的左上角和左下角方面，仍有改进的空间。</p><p id="5b55" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">希望你喜欢读它。</p></div></div>    
</body>
</html>