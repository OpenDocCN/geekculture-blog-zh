# PHP 8:特性、变化和改进

> 原文：<https://medium.com/geekculture/php-8-features-changes-and-improvements-fa484037d1b8?source=collection_archive---------9----------------------->

![](img/2b7411a532c3fc66f36aee7b229a4cfd.png)

PHP 8 最近发布了，所有的技术细节都列在这里。作为一个计划开始一个用 PHP 编写的新网站或 API 的产品负责人，PHP 8 对你来说意味着什么？将现有项目升级到 PHP 8 可以实现哪些好处？简而言之，您可以通过 JIT(即时)编译升级来实现性能提升。

此外，您的开发团队将能够利用一系列改进的语言特性，使 PHP 更适合企业级项目。联合类型允许定义类型验证，使语言更接近于强类型方法。请注意，这是一个可选特性，允许您根据具体情况利用较弱和较强的类型。

PHP 8 提供了许多类似的升级和改进，但本文将更多地关注产品所有者对 PHP 8 新特性的看法。

# PHP 的历史

让我们简要回顾一下 PHP 最近的历史，这有助于我们理解它多年来的演变以及它是如何在版本 8 中引入 JIT 编译的。

在 PHP 的早期，它的主要用途是简化 web 开发。PHP 的功能就像一个模板引擎，允许用户选择数据库中的数据，并动态地将其呈现为 HTML。PHP 试图避免用 C/C++编写过于复杂的项目，并降低 web 开发人员的技术门槛。随着时间的推移，PHP 作为一种语言成长起来，增加了更多的特性，最终不仅仅是一个模板引擎。

到了第 5 版，PHP 已经成为一种通用的 web 语言，拥有一个庞大的社区和各种健壮的框架和库。版本 5 引入了强大的 OOP 支持，允许用户创建结构化的企业级代码，这些代码是用最好的可靠原则编写的。PHP 的新版本引入了框架的概念，其中最流行的(Laravel)是作为老派 CodeIgniter 的替代品开发的。Symfony-framework 成为了 PHP 世界的 Java Spring enterprise framework，PHP 获得了像 package manager Composer 和单元测试框架 PHPUnit 这样的工具。

PHP 5 之后的下一个主要版本是 PHP 7——是的，他们跳过了 PHP 版本 6。核心团队选择不引入 JIT 编译，而是对解释器本身进行了大量优化，并设法在很大程度上保持语言的向后兼容(不像从 Python 2 升级到 Python 3)。

PHP 7 引入了显著的性能提升、优化的 RAM 使用和改进的语法，并且在大多数情况下向后兼容 PHP 5 应用程序，只有极少数例外能够在合理的时间框架内与 PHP 7 同步。

现在，PHP 8 已经引入了 JIT 编译以及许多其他 PHP 8 突破性的变化，这是对版本 7 进行改进的合理步骤。好消息是 PHP 核心团队继续他们优先考虑向后兼容性的方法，就像他们从版本 5 迁移到版本 7 一样。

# 为 PHP 8 做准备:这对你现有的应用程序意味着什么？

你应该明天用 PHP 8 升级你的生产服务器吗？大概不会。首先，你应该确认 PHP 7.4 版本一切正常。如果是这种情况，您的开发团队应该熟悉迁移指南。

请注意，有些元素已被弃用，升级到版本 8 后将无法使用。请记住，问题不仅会出现在您自己的代码中，还会出现在依赖关系中。检查 composer.json 中的依赖项是否支持 PHP 8 很重要。此外，如果您使用框架，您将需要升级您的框架。Symfony framework 5.2 应该已经兼容了。

对于 [Laravel](https://blog.laravel.com/laravel-php-8-support) 来说应该也是如此。

虽然您不应该立即升级您的生产服务器，但是您应该开始分配您的开发团队来研究最终升级到版本 8 所需的时间和精力。这将包括在您的遗留代码中用过时的和被贬低的功能和方法来重构代码。

即使在您的团队能够修复所有需要更新的东西之后，您也应该对您的系统进行全面的测试回归，因为即使在一个具有足够自动化测试覆盖率的项目中，重构也经常会导致新的错误。

全面测试完成后能否升级生产？是的，这是可能的。但建议等待下一个次要更新版本，它将修复新的主要版本中未被注意的问题。

确保使用旧设置测量您的性能，并与升级后的新性能进行比较，看哪种设置最适合您的项目。特别是，您应该检查启用 JIT 将如何影响您的应用程序。它可能有也可能没有显著的效果。

虽然性能不会在每种情况下都受到影响，但是 JIT 编译在未来为 PHP 增加了许多机会。JIT 可以支持经典服务器端 web 应用程序之外的潜在用例，并可能在未来的版本中为 PHP 添加更多的异步编程特性。

# 如何开始一个新的 PHP 项目

如果您是从零开始，您可以从版本 8 开始。这降低了与从先前版本迁移相关的任何成本。当您的团队正在工作时，新的次要版本将会发布，当准备就绪时，您可以安全地进入生产环境。

新的 PHP 8 改进将允许您的团队编写更干净的代码，从一开始就带来更好的性能。请记住，您的团队在旧版本 PHP 中编写的代码越多，当您选择升级到版本 8 时，您需要做的迁移就越多。

使用 PHP 8 的最大障碍是，如果你知道在发布时你会有一些与版本 8 不兼容的依赖项。然而，这可能是一个信号，表明你无论如何都应该考虑替换那些依赖项。

# 结论

2020 年在很多方面都是艰难的一年，但 PHP 8 的发布是一个小小的希望。不要错过通过 PHP 8 的新变化升级应用程序性能和提高代码质量的机会。

由 MobiDev 的 Web 解决方案架构师 Alex Vasilchenko 撰写。

*全文原载于*[*https://mobidev . biz*](https://mobidev.biz/blog/php-8-new-features-changes-boost-perfomance-jit)*基于 mobi dev 技术研究。*