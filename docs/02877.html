<html>
<head>
<title>Large Scale Object Detection &amp; Tracking with YOLOv5 Package</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用YOLOv5软件包进行大规模目标检测和跟踪</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/large-scale-object-detection-tracking-with-yolov5-package-c8eca66b80b6?source=collection_archive---------3-----------------------#2021-05-27">https://medium.com/geekculture/large-scale-object-detection-tracking-with-yolov5-package-c8eca66b80b6?source=collection_archive---------3-----------------------#2021-05-27</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="a407" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">只有'<a class="ae jd" href="https://pypi.org/project/yolov5/" rel="noopener ugc nofollow" target="_blank"> pip安装yolov5 </a>'远离你…</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es je"><img src="../Images/dd0f535366b97c1c72e4ec3e5743989c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*K7AB3_dXJMzA8uktBxTZ7Q.png"/></div><figcaption class="jm jn et er es jo jp bd b be z dx">Simple as that.</figcaption></figure><ul class=""><li id="263d" class="jq jr hi ih b ii ij im in iq js iu jt iy ju jc jv jw jx jy bi translated">你在Windows/Linux下安装最新的YOLO物体探测器有困难吗？</li><li id="759c" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">在使用定制的YOLOv5模型进行训练/推理时，您是否会遇到错误？</li><li id="cb0e" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">你在寻找一个只有几行代码的实时物体跟踪器吗？</li><li id="62bd" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">要不要一键进行大范围(无人机监控/卫星影像/广域监控)物体检测？</li></ul><blockquote class="ke"><p id="593d" class="kf kg hi bd kh ki kj kk kl km kn jc dx translated">继续阅读这篇文章，你将能够在几秒钟内解决所有这些问题..</p></blockquote></div><div class="ab cl ko kp gp kq" role="separator"><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt"/></div><div class="hb hc hd he hf"><h2 id="3c2d" class="kv kw hi bd kx ky kz la lb lc ld le lf iq lg lh li iu lj lk ll iy lm ln lo lp bi translated"><a class="ae jd" href="https://pypi.org/project/yolov5/" rel="noopener ugc nofollow" target="_blank"> YOLOv5 </a>物体探测器</h2><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="er es lq"><img src="../Images/537f2278c780c3a793da1cff4d7a5e9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TnpzQ4Ap1P5fDg5atOBT5w.png"/></div></div><figcaption class="jm jn et er es jo jp bd b be z dx"><a class="ae jd" href="https://ultralytics.com/yolov5" rel="noopener ugc nofollow" target="_blank">https://ultralytics.com/yolov5</a></figcaption></figure><p id="9696" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">YOLOv5 是有史以来最快最精确的YOLO，你可以用它来解决任何你需要的物体探测问题。</p><p id="c4e1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">安装很简单:在Windows/Linux终端运行<a class="ae jd" href="https://pypi.org/project/yolov5/" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj"> pip安装yolov5 </strong> </a> <strong class="ih hj"> </strong>就可以了。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="er es lv"><img src="../Images/a909e2e4096aea75211e059ce3717793.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MnMPnc7zZR0Ua-_evfFiRg.jpeg"/></div></div><figcaption class="jm jn et er es jo jp bd b be z dx"><a class="ae jd" href="https://ultralytics.com/yolov5" rel="noopener ugc nofollow" target="_blank">https://ultralytics.com/yolov5</a></figcaption></figure><h2 id="f244" class="kv kw hi bd kx ky kz la lb lc ld le lf iq lg lh li iu lj lk ll iy lm ln lo lp bi translated">基本用法</h2><pre class="jf jg jh ji fd lw lx ly lz aw ma bi"><span id="b74f" class="kv kw hi lx b fi mb mc l md me">import yolov5</span><span id="378c" class="kv kw hi lx b fi mf mc l md me"># load pretrained model<br/>model = yolov5.load('yolov5s.pt')<br/><br/># or load custom model<br/>model = yolov5.load('train/best.pt')<br/>  <br/># set model parameters<br/>model.conf = 0.25  # NMS confidence threshold<br/>model.iou = 0.45  # NMS IoU threshold<br/>model.agnostic = False  # NMS class-agnostic<br/>model.multi_label = False  # NMS multiple labels per box<br/>model.max_det = 1000  # maximum number of detections per image</span><span id="1fd1" class="kv kw hi lx b fi mf mc l md me"># image<br/>img = 'https://github.com/ultralytics/yolov5/raw/master/data/images/zidane.jpg'</span><span id="ccbb" class="kv kw hi lx b fi mf mc l md me"># inference<br/>results = model(img)</span><span id="0e71" class="kv kw hi lx b fi mf mc l md me"># inference with larger input size<br/>results = model(img, size=1280)</span><span id="f762" class="kv kw hi lx b fi mf mc l md me"># inference with test time augmentation<br/>results = model(img, augment=True)</span><span id="4073" class="kv kw hi lx b fi mf mc l md me"># parse results<br/>predictions = results.pred[0]<br/>boxes = predictions[:, :4] # x1, x2, y1, y2<br/>scores = predictions[:, 4]<br/>categories = predictions[:, 5]</span><span id="9853" class="kv kw hi lx b fi mf mc l md me"># show results<br/>results.show()</span><span id="e985" class="kv kw hi lx b fi mf mc l md me"># save results<br/>results.save(save_dir='results/')</span></pre><h2 id="8ee2" class="kv kw hi bd kx ky kz la lb lc ld le lf iq lg lh li iu lj lk ll iy lm ln lo lp bi translated">培养</h2><p id="c9f4" class="pw-post-body-paragraph if ig hi ih b ii mg ik il im mh io ip iq mi is it iu mj iw ix iy mk ja jb jc hb bi translated">使用您的自定义<code class="du ml mm mn lx b">data.yaml</code>微调一个预调的YOLOv5模型。详细信息请参见:【https://pypi.org/project/yolov5/<a class="ae jd" href="https://pypi.org/project/yolov5/" rel="noopener ugc nofollow" target="_blank"/></p><pre class="jf jg jh ji fd lw lx ly lz aw ma bi"><span id="7fe1" class="kv kw hi lx b fi mb mc l md me">$ yolov5 train --data coco.yaml --weights 'yolov5s6.pt' --batch-size 16                                                 </span></pre><p id="b137" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过海王星想象你的实验。艾:</p><pre class="jf jg jh ji fd lw lx ly lz aw ma bi"><span id="550f" class="kv kw hi lx b fi mb mc l md me">$ yolov5 train --data data.yaml --weights yolov5s.pt --neptune_project NAMESPACE/PROJECT_NAME --neptune_token YOUR_NEPTUNE_TOKEN</span></pre><h2 id="e05c" class="kv kw hi bd kx ky kz la lb lc ld le lf iq lg lh li iu lj lk ll iy lm ln lo lp bi translated"><strong class="ak">推论</strong></h2><p id="a1a0" class="pw-post-body-paragraph if ig hi ih b ii mg ik il im mh io ip iq mi is it iu mj iw ix iy mk ja jb jc hb bi translated"><code class="du ml mm mn lx b">yolov5 detect</code>命令对各种来源进行推理，从<a class="ae jd" href="https://github.com/ultralytics/yolov5/releases" rel="noopener ugc nofollow" target="_blank">最新的YOLOv5版本</a>自动下载模型，并将结果保存到<code class="du ml mm mn lx b">runs/detect</code>:</p><pre class="jf jg jh ji fd lw lx ly lz aw ma bi"><span id="249c" class="kv kw hi lx b fi mb mc l md me">$ yolov5 detect --source 0  # webcam<br/>                         file.jpg  # image<br/>                         file.mp4  # video<br/>                         path/  # directory<br/>                         path/*.jpg  # glob</span></pre><h2 id="acca" class="kv kw hi bd kx ky kz la lb lc ld le lf iq lg lh li iu lj lk ll iy lm ln lo lp bi translated">出口</h2><p id="4d03" class="pw-post-body-paragraph if ig hi ih b ii mg ik il im mh io ip iq mi is it iu mj iw ix iy mk ja jb jc hb bi translated">您可以将微调后的YOLOv5权重导出为任何格式，如<code class="du ml mm mn lx b">torchscript</code>、<code class="du ml mm mn lx b">onnx</code>、<code class="du ml mm mn lx b">coreml</code>、<code class="du ml mm mn lx b">pb</code>、<code class="du ml mm mn lx b">tflite</code>、<code class="du ml mm mn lx b">tfjs</code>:</p><pre class="jf jg jh ji fd lw lx ly lz aw ma bi"><span id="d68f" class="kv kw hi lx b fi mb mc l md me">$ yolov5 export --weights yolov5s.pt --include 'torchscript,onnx,coreml,pb,tfjs'</span></pre><h2 id="2af4" class="kv kw hi bd kx ky kz la lb lc ld le lf iq lg lh li iu lj lk ll iy lm ln lo lp bi translated">使用YOLOv5 进行最先进的<a class="ae jd" href="https://github.com/tryolabs/norfair/tree/master/demos/yolov5" rel="noopener ugc nofollow" target="_blank">目标跟踪</a></h2><p id="d962" class="pw-post-body-paragraph if ig hi ih b ii mg ik il im mh io ip iq mi is it iu mj iw ix iy mk ja jb jc hb bi translated">您可以用几行代码创建一个实时自定义多对象跟踪器，下面是一个简单的例子:</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="mo mp l"/></div><figcaption class="jm jn et er es jo jp bd b be z dx">State-of-the-art YOLOv5 Object Tracker in few lines of code.</figcaption></figure><p id="72ff" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是输出结果:</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="er es lv"><img src="../Images/cacdb202fc6bdced8d5df856545dba2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*bJnFui_aE4FaFEYZ2nWHbw.gif"/></div></div><figcaption class="jm jn et er es jo jp bd b be z dx">YOLOv5 Object Tracking Demo.</figcaption></figure><p id="1ae9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这个colab笔记本中你可以找到一个YOLOv5物体追踪器。它可以从任何YouTube视频中执行高精度的行人和汽车跟踪！<a class="ae jd" href="https://github.com/tryolabs/norfair/blob/master/demos/yolov5/yolov5demo.py" rel="noopener ugc nofollow" target="_blank">参考这里获得完整的YOLOv5跟踪码</a>。</p><p id="7b03" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" href="https://github.com/obss/sahi/blob/main/demo/inference_for_yolov5.ipynb" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">大规模物体检测用YOLOv5 </strong> </a></p><p id="5339" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您正在处理巨大的卫星图像或广域监控图像，则无法使用标准输入大小进行推断。下面是<a class="ae jd" href="https://github.com/obss/sahi/blob/main/demo/inference_for_yolov5.ipynb" rel="noopener ugc nofollow" target="_blank"> SAHI </a>包及其<a class="ae jd" href="https://github.com/obss/sahi/blob/main/resources/sliced_inference.gif" rel="noopener ugc nofollow" target="_blank"> <em class="mq">切片推理</em> </a>特性:</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="er es mr"><img src="../Images/b5b8b1a34899fb31b475c9adcff8f0f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*5VGHuTkeQlQVxELUAtwIfQ.gif"/></div></div><figcaption class="jm jn et er es jo jp bd b be z dx"><a class="ae jd" rel="noopener" href="/codable/sahi-a-vision-library-for-performing-sliced-inference-on-large-images-small-objects-c8b086af3b80">Sliced inference from SAHI.</a></figcaption></figure><p id="daad" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" href="https://github.com/obss/sahi/blob/main/demo/inference_for_yolov5.ipynb" rel="noopener ugc nofollow" target="_blank">在本演示笔记本</a>中，您可以看到如何用YOLOv5用几行代码执行大规模切片推理！</p><p id="b091" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">或者您可以从CLI执行YOLOv5分片推理:</p><pre class="jf jg jh ji fd lw lx ly lz aw ma bi"><span id="cfa7" class="kv kw hi lx b fi mb mc l md me">sahi predict --model_type yolov5 --source image/file/or/folder --model_path path/to/model</span></pre><p id="3ab2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有关CLI参数<a class="ae jd" href="https://github.com/obss/sahi/blob/main/docs/CLI.md" rel="noopener ugc nofollow" target="_blank">的详细信息，请参考此处</a>。</p><h2 id="2c34" class="kv kw hi bd kx ky kz la lb lc ld le lf iq lg lh li iu lj lk ll iy lm ln lo lp bi translated">结论</h2><p id="6504" class="pw-post-body-paragraph if ig hi ih b ii mg ik il im mh io ip iq mi is it iu mj iw ix iy mk ja jb jc hb bi translated">在这篇文章中，我们介绍了:</p><ul class=""><li id="0423" class="jq jr hi ih b ii ij im in iq js iu jt iy ju jc jv jw jx jy bi translated"><a class="ae jd" href="https://github.com/fcakyon/yolov5-pip#installation" rel="noopener ugc nofollow" target="_blank"> YOLOv5安装的最简单方法</a></li><li id="4ada" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">最简单的训练/推理方法</li><li id="4b82" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">最简单的方法<a class="ae jd" href="https://github.com/tryolabs/norfair/blob/master/demos/yolov5/yolov5_demo.ipynb" rel="noopener ugc nofollow" target="_blank"> YOLOv5物体跟踪</a></li><li id="2051" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">最简单的方法<a class="ae jd" href="https://github.com/obss/sahi/blob/main/demo/inference_for_yolov5.ipynb" rel="noopener ugc nofollow" target="_blank"> YOLOv5切片推理</a></li></ul><p id="eb94" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你在任何一步有困难，请随时提问！</p></div></div>    
</body>
</html>