<html>
<head>
<title>Delta-v calculator Kerbal Space Program</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">德尔塔-v计算器克巴尔空间计划</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/delta-v-calculator-kerbal-space-program-3e87617ee099?source=collection_archive---------4-----------------------#2021-07-31">https://medium.com/geekculture/delta-v-calculator-kerbal-space-program-3e87617ee099?source=collection_archive---------4-----------------------#2021-07-31</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/2890e0e9a4903aebe8fd9e73ba1c18fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L0s0a51fCd5ZI_SMN0GY7A.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx"><a class="ae iu" href="https://www.kerbalspaceprogram.com/game/kerbal-space-program/" rel="noopener ugc nofollow" target="_blank">https://www.kerbalspaceprogram.com/game/kerbal-space-program/</a></figcaption></figure><p id="123d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">你好。今天让我们做一个有趣的项目。我是游戏Kerbal Space Program的忠实粉丝，所以我决定制作一个python程序，给你一个特定目的地的delta-v级别，而不是重复参考地图。所以让我们开始吧！</p><h1 id="7a4e" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">德尔塔-v地图</h1><figure class="ks kt ku kv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kr"><img src="../Images/b4918ae7acc91b334a0ab16e7185811e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qKt8-Vf_Iv2KU2CFucwhsw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx"><a class="ae iu" href="https://www.deviantart.com/s13g3/art/Kerbal-Space-Program-Delta-v-map-Lights-out-626904855" rel="noopener ugc nofollow" target="_blank">https://www.deviantart.com/s13g3/art/Kerbal-Space-Program-Delta-v-map-Lights-out-626904855</a></figcaption></figure><p id="0bca" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">像这样的地图可以告诉你需要多少德尔塔-v。然而，当你在建造你的容器时，我有时发现把所有的值加起来很麻烦。所以我决定做一个python版本。现在我们将只考虑从科尔宾到其他星球所需的delta-v。</p><h1 id="88c6" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">代码</h1><p id="9839" class="pw-post-body-paragraph iv iw hi ix b iy kw ja jb jc kx je jf jg ky ji jj jk kz jm jn jo la jq jr js hb bi translated">因为我们可能想在另一个版本的代码中添加其他星球，所以我打算创建一个名为Kerbin的类。我将使用pandas来存储地图中的值。</p><pre class="ks kt ku kv fd lb lc ld le aw lf bi"><span id="c279" class="lg ju hi lc b fi lh li l lj lk">class Kerbin:<br/>    dfNormal = pd.DataFrame({<br/>        "Mun": [3400, 860, 310, 580],<br/>        "Minmus": [3400, 1270, 160, 180],<br/>        "Eeloo": [3400, 3420, 1370, 620],<br/>        "Moho": [3400, 4230, 2410, 870],<br/>        "Eve": [3400, 1470, 1410, 8000],<br/>        "Duna": [3400, 1090, 610, 1450],<br/>        "Dres": [3400, 2570, 1290, 430],<br/>        "Jool": [3400, 2200, 2970, 14000]<br/>    }, index=["Kerbin Orbit", "Intercept", "Low Orbit", "Land"])</span></pre><p id="53d3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我决定为未来做一些小功能，比如这些:</p><pre class="ks kt ku kv fd lb lc ld le aw lf bi"><span id="9034" class="lg ju hi lc b fi lh li l lj lk"><em class="ll">def</em> to_orbit(<em class="ll">self</em>):<br/>    return 3400</span><span id="c34a" class="lg ju hi lc b fi lm li l lj lk"><em class="ll">def</em> to_keostationary_orbit(<em class="ll">self</em>):<br/>    return <em class="ll">self</em>.to_orbit + 1115</span></pre><p id="ba31" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">最后一个方法将是“目的地”。我决定取目的地、舞台和模式的名字。该模式将决定delta-v电平是否会累积。为此，我们必须制作累积数据框架。</p><pre class="ks kt ku kv fd lb lc ld le aw lf bi"><span id="e221" class="lg ju hi lc b fi lh li l lj lk">def __init__(self):<br/>    self.dfCumulative = self.dfNormal.copy()<br/>    for i in range(1, len(<em class="ll">self</em>.dfCumulative.index)):<br/>        <em class="ll">self</em>.dfCumulative.iloc[i] += <em class="ll">self</em>.dfCumulative.iloc[i-1]</span></pre><p id="d556" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这将复制原始数据帧，然后将前一行的值添加到当前行。所以“低轨道”的值应该给出该物体进入低轨道所需的总δ-v。</p><p id="231a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在让我们完成目标方法的制作:</p><pre class="ks kt ku kv fd lb lc ld le aw lf bi"><span id="6aec" class="lg ju hi lc b fi lh li l lj lk"><em class="ll">def</em> destination(<em class="ll">self</em>, name, stage, mode):<br/>    if mode == "normal":<br/>        print("Delta-v levels")<br/>        print(<em class="ll">self</em>.dfNormal[name]["Kerbin Orbit": stage])</span><span id="6baf" class="lg ju hi lc b fi lm li l lj lk">    if mode == "cumulative":<br/>        print("Cumulative delta-v levels")<br/>        print(<em class="ll">self</em>.dfCumulative[name]["Kerbin Orbit": stage])</span></pre><p id="279c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这将给出该特定身体从起点到该阶段的delta-v值。随着时间的推移，更多的功能将被添加到这个更先进的程序。</p><h1 id="51e3" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">试验</h1><p id="3c9b" class="pw-post-body-paragraph iv iw hi ix b iy kw ja jb jc kx je jf jg ky ji jj jk kz jm jn jo la jq jr js hb bi translated">这是我的文件结构:</p><pre class="ks kt ku kv fd lb lc ld le aw lf bi"><span id="d67b" class="lg ju hi lc b fi lh li l lj lk">- bodies<br/>    -kerbin.py<br/>- main.py</span></pre><p id="1158" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">上面的代码将放在kerbin.py中，为了测试它，让我们在main.py中编写一些代码。让我们从导入它开始:</p><pre class="ks kt ku kv fd lb lc ld le aw lf bi"><span id="64b3" class="lg ju hi lc b fi lh li l lj lk">from bodies.kerbin import Kerbin</span><span id="9a54" class="lg ju hi lc b fi lm li l lj lk">start = Kerbin()</span></pre><p id="4913" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，我将尝试获取jool低轨道的累积delta-v值。</p><pre class="ks kt ku kv fd lb lc ld le aw lf bi"><span id="69e7" class="lg ju hi lc b fi lh li l lj lk">start.destination("Jool", "Low Orbit", "cumulative")</span></pre><p id="32f2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这给了我输出:</p><pre class="ks kt ku kv fd lb lc ld le aw lf bi"><span id="d9f0" class="lg ju hi lc b fi lh li l lj lk">Cumulative delta-v levels<br/>Kerbin Orbit    3400<br/>Intercept       5600<br/>Low Orbit       8570<br/>Name: Jool, dtype: int64</span></pre><p id="936f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这看起来不错。我们去找德尔塔-v降落在杜纳。</p><pre class="ks kt ku kv fd lb lc ld le aw lf bi"><span id="da1c" class="lg ju hi lc b fi lh li l lj lk">start.destination("Duna", "Land", "cumulative")</span></pre><p id="b5a3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">输出:</p><pre class="ks kt ku kv fd lb lc ld le aw lf bi"><span id="70f9" class="lg ju hi lc b fi lh li l lj lk">Cumulative delta-v levels<br/>Kerbin Orbit    3400<br/>Intercept       4490<br/>Low Orbit       5100<br/>Land            6550<br/>Name: Duna, dtype: int64</span></pre><p id="77be" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如你所见，事情进展顺利。</p><p id="4f96" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这就是这篇博客的内容。我已经在github上上传了代码，我会为更多的身体更新它，但是基本代码将保持不变。您可以添加自己的功能，使其更符合您的喜好。您甚至可以将它添加到您的系统路径中，这样您就不需要在每次想要运行python时都打开它。如果你喜欢这个博客，请关注我。我写的主题是编程和空间，所以如果你对此感兴趣，可以去看看我的其他博客。</p><p id="2c29" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">感谢阅读！</p></div></div>    
</body>
</html>