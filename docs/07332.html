<html>
<head>
<title>Building a Static Site Generator.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">构建静态站点生成器。</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/building-a-static-site-generator-b5ca4b457c48?source=collection_archive---------39-----------------------#2021-09-14">https://medium.com/geekculture/building-a-static-site-generator-b5ca4b457c48?source=collection_archive---------39-----------------------#2021-09-14</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/2042a25b4730ab641384de2fb5748db3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*s76IfUYFlAJ0zQFv"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Photo by <a class="ae iu" href="https://unsplash.com/@_imkiran?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Sai Kiran Anagani</a> on <a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="d78c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我的任务是构建一个静态站点生成器CLI。txt文件或一个文件夹，该程序将生成HTML并建立一个静态网站。该项目的要求包括:</p><ol class=""><li id="a6cd" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated">支持<code class="du kc kd ke kf b">-h</code>和<code class="du kc kd ke kf b">-v</code>标志显示程序版本和帮助页面。</li><li id="43c8" class="jt ju hi ix b iy kg jc kh jg ki jk kj jo kk js jy jz ka kb bi translated">强制<code class="du kc kd ke kf b">-i</code>指定输入文件/文件夹。</li><li id="f6b1" class="jt ju hi ix b iy kg jc kh jg ki jk kj jo kk js jy jz ka kb bi translated">为每个输入文件生成一个<code class="du kc kd ke kf b">.html</code>输出文件。</li><li id="9f91" class="jt ju hi ix b iy kg jc kh jg ki jk kj jo kk js jy jz ka kb bi translated">解析段落和文本标题，并将它们放入相应的HTML标签中。</li><li id="ef38" class="jt ju hi ix b iy kg jc kh jg ki jk kj jo kk js jy jz ka kb bi translated">通过<code class="du kc kd ke kf b">-o</code>标志将生成的文件默认放入<code class="du kc kd ke kf b">dist</code>文件夹或用户输入路径。</li><li id="38bc" class="jt ju hi ix b iy kg jc kh jg ki jk kj jo kk js jy jz ka kb bi translated">允许输入文件和文件夹的深度树，这意味着可以递归扫描文件夹。</li><li id="93f0" class="jt ju hi ix b iy kg jc kh jg ki jk kj jo kk js jy jz ka kb bi translated">如果<code class="du kc kd ke kf b">input</code>是一个文件夹，生成一个包含生成的HTMLs的相对路径的索引文件。</li><li id="2a10" class="jt ju hi ix b iy kg jc kh jg ki jk kj jo kk js jy jz ka kb bi translated">制作一个用户友好的前端界面，或者让用户通过<code class="du kc kd ke kf b">-s</code>标志指定他们的自定义样式表。</li></ol><p id="ec6d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我自己的附加特性是将生成的文件放在相对文件夹中，就像它们在输入文件夹中一样。</p><h1 id="edbb" class="kl km hi bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated"><strong class="ak">实施</strong></h1><p id="f977" class="pw-post-body-paragraph iv iw hi ix b iy lj ja jb jc lk je jf jg ll ji jj jk lm jm jn jo ln jq jr js hb bi translated">在进入概述之前，这里是项目<a class="ae iu" href="https://github.com/DukeManh/OSD_SSG" rel="noopener ugc nofollow" target="_blank"> OSD_SSG </a>的源代码。</p></div><div class="ab cl lo lp gp lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="hb hc hd he hf"><p id="9136" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这个项目我选TS。第一步是用npm初始化一个项目，并设置<code class="du kc kd ke kf b">Prettier</code>和<code class="du kc kd ke kf b">Eslint</code>。做完这些之后，写代码就是一件乐事了。</p><p id="5d01" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">指定执行程序的环境。</p><pre class="lv lw lx ly fd lz kf ma mb aw mc bi"><span id="2d36" class="md km hi kf b fi me mf l mg mh">#!/usr/bin/env node</span></pre><p id="c0bf" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我选择<code class="du kc kd ke kf b">yargs</code>而不是<code class="du kc kd ke kf b">minimist</code>和<code class="du kc kd ke kf b">commander</code>，因为它简单明了，文档清晰明了。</p><figure class="lv lw lx ly fd ij"><div class="bz dy l di"><div class="mi mj l"/></div></figure><p id="04b8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">首先，我们需要一个助手函数来从给定的文件路径生成HTML标记。</p><figure class="lv lw lx ly fd ij"><div class="bz dy l di"><div class="mi mj l"/></div></figure><p id="172d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">接下来，我有一个函数，它使用上面helper函数的返回输出将HTML标记写入文件。如果<code class="du kc kd ke kf b">-r</code>标志为真，该函数将递归解析子文件夹，如果<code class="du kc kd ke kf b">-e</code>标志存在，则将它们放入相关文件夹中。它返回生成的文件路径的列表，因此稍后它们会被呈现到内容表中。</p><figure class="lv lw lx ly fd ij"><div class="bz dy l di"><div class="mi mj l"/></div></figure><p id="ee80" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这两个函数完成了大部分工作。最后，我们需要生成包含所有页面链接的索引文件。</p><figure class="lv lw lx ly fd ij"><div class="bz dy l di"><div class="mi mj l"/></div></figure><p id="e7ec" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">就是这样。我没有讲太多细节，请随意检查源代码以获得更多信息。</p><h1 id="e699" class="kl km hi bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated"><strong class="ak">用途</strong></h1><pre class="lv lw lx ly fd lz kf ma mb aw mc bi"><span id="01a4" class="md km hi kf b fi me mf l mg mh">Options:<br/>  -i, --input       File or folder to be parsed [string] [required]<br/>  -o, --output      Output folder for generated files      [string] [default: "dist"]<br/>  -r, --recursive   Recursively parsed files              [boolean]<br/>  -e, --relative    Maintain relative folder of files                  [boolean]<br/>  -s, --stylesheet  Custom stylesheet                      [string]<br/>  -h, --help        Show help                             [boolean]<br/>  -v, --version     Show version number                   [boolean]</span></pre><p id="c0f6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">示例:</p><pre class="lv lw lx ly fd lz kf ma mb aw mc bi"><span id="fb2b" class="md km hi kf b fi me mf l mg mh">ts-node src/index.ts <br/>                    -i dirName  (input file or folder)<br/>                    -r          (Recursively parse files)<br/>                    -e          (Put HTML in their relative folder)<br/>                    -s style.css (Custom stylesheet)<br/>                    -o output    (Ouput folder)</span></pre><h1 id="8d1b" class="kl km hi bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated"><strong class="ak">演示</strong></h1><p id="4d67" class="pw-post-body-paragraph iv iw hi ix b iy lj ja jb jc lk je jf jg ll ji jj jk lm jm jn jo ln jq jr js hb bi translated"><a class="ae iu" href="https://dukemanh.github.io/OSD_SSG/demo/" rel="noopener ugc nofollow" target="_blank"> OSS_SSD </a></p><div class="lv lw lx ly fd ab cb"><figure class="mk ij ml mm mn mo mp paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><img src="../Images/8f4336dfd4c3632c6060b44b0f1202cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1028/format:webp/1*q6Km685emg41nevx7G86EQ.png"/></div></figure><figure class="mk ij mq mm mn mo mp paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><img src="../Images/60e8f8c5266348259e9e5cb2ca528fde.png" data-original-src="https://miro.medium.com/v2/resize:fit:974/format:webp/1*qq5vYnDqqrVL8z1DbWGqPw.png"/></div></figure></div><h1 id="9d9a" class="kl km hi bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated"><strong class="ak">资源</strong></h1><p id="a28e" class="pw-post-body-paragraph iv iw hi ix b iy lj ja jb jc lk je jf jg ll ji jj jk lm jm jn jo ln jq jr js hb bi translated">这个项目使用了<a class="ae iu" href="https://github.com/markdowncss" rel="noopener ugc nofollow" target="_blank"> MarkdownCSS </a>，一个专门为Markdown提供CSS样式的模块。该项目得到了麻省理工学院的许可。</p></div></div>    
</body>
</html>