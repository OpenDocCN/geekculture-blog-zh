<html>
<head>
<title>Troubleshoot maven test goal from your IDE</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从IDE中对maven测试目标进行故障排除</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/troubleshoot-maven-test-goal-from-your-ide-4a4421bef4d5?source=collection_archive---------17-----------------------#2021-03-18">https://medium.com/geekculture/troubleshoot-maven-test-goal-from-your-ide-4a4421bef4d5?source=collection_archive---------17-----------------------#2021-03-18</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="9434" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您的<em class="jd"> Java </em>测试有时可能会因为不同的原因而失败。最烦人也是最具挑战性的情况发生了，当你一个接一个地运行它们时，它们运行得很好，但是当它们一起运行时，它们就失败了:</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/716f404f9c38f63e0d39f72491004fb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3E8t0FsthhkSnIspPDSGDw.png"/></div></div></figure><p id="8dc5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这个受我之前的 帖子启发的虚拟场景中，第三个测试只有在与其他测试一起运行时才会失败。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es jr"><img src="../Images/745092b932881553395ee398b3b5d224.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1JgoBWtgObIXEeN04fi0Xg.png"/></div></div></figure><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es js"><img src="../Images/e5e6f2d67880b81170473c27738b2c0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uUKKDbKgFhwvy1dr2OTjDg.png"/></div></div></figure><p id="77ac" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这并不困难，因为我们可以很容易地激活一个断点，在错误发生之前停止测试执行。要调试测试套件，右击并选择<em class="jd">调试</em>而不是<em class="jd">运行</em></p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es jt"><img src="../Images/74758734f98eacf8696fdeecbb5b65e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h_TZN40_CSDIAVPnJkX-jQ.png"/></div></div></figure><p id="dc38" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当一个断点被激活时，你可以对程序的执行进行充分的控制:你可以看到堆栈，探索变量，甚至计算表达式。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es ju"><img src="../Images/d63d8c0c9d265812cddea3396e628174.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*syBOBNW9h5FLVQAYTw7Kcg.png"/></div></div></figure><p id="45f5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在你的IDE中通常有一些快捷方式(Mac: option + F8)可以打开一个编辑器，在这里你可以键入你需要进行故障诊断的java代码。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es jv"><img src="../Images/9e626727e2e488620f8b4b1ac2129646.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wAZMk3pXpdBcQfNi338A-w.png"/></div></div></figure><p id="b982" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这种情况下，我们可以看到我们的<em class="jd"> getStuffById </em>方法正在返回其他内容(不是<em class="jd"> CompletableFuture </em>实例),因为为此方法定义了一个错误的缓存。之前运行的测试使用相同的缓存来存储相同键的结果。这种情况打破了独立运行测试的规则，我们可以通过使用每个方法一个缓存来解决这个问题(你不应该使用同一个桶来存储梨和苹果)</p></div><div class="ab cl jw jx gp jy" role="separator"><span class="jz bw bk ka kb kc"/><span class="jz bw bk ka kb kc"/><span class="jz bw bk ka kb"/></div><div class="hb hc hd he hf"><p id="fe89" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">希望您能在您的管道中自动运行您的测试。默认情况下，在进行本地构建时激活断点并不容易(在我的情况下<strong class="ih hj"> <em class="jd"> mvn install </em> </strong>但也可以是其他东西)<strong class="ih hj"> : </strong></p><ul class=""><li id="51a6" class="kd ke hi ih b ii ij im in iq kf iu kg iy kh jc ki kj kk kl bi translated">如果你正在使用<a class="ae jq" href="https://maven.apache.org/surefire/maven-surefire-plugin/examples/debugging.html" rel="noopener ugc nofollow" target="_blank"><em class="jd">maven-surefire-plugin</em></a><em class="jd"/>你可以告诉maven在运行测试时等待一个代理连接:</li></ul><pre class="jf jg jh ji fd km kn ko kp aw kq bi"><span id="3c4b" class="kr ks hi kn b fi kt ku l kv kw">mvn -Dmaven.surefire.debug test</span></pre><p id="b168" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在您的IDE中，编辑您的运行配置以添加以下JVM参数:</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es kx"><img src="../Images/cdeb0c4520e05acc64391d0c602cb649.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VbNvIu8u75QbAJVDQcfXew.png"/></div></div></figure><p id="98bf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，测试正在等待您的调试器连接:</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es ky"><img src="../Images/58a08e1612644aa91e51ae827ec45c76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Bw1B4DT_z0qaJhLve4fp1w.png"/></div></div></figure><p id="b0f2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您需要创建一个新的<em class="jd">运行配置</em>来连接调试器:</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es kz"><img src="../Images/616c23d237e409b94d22f2c2d3abd088.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ARa5YOxwTcn0Uy5k0pRBxg.png"/></div></div></figure><p id="3392" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">按下lady bug会打开一个新的控制台:</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es la"><img src="../Images/0d193d59b21f45dd8e33ffd657447b06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1140/format:webp/1*pQqnFexKa4XXnuTf4UX4XA.png"/></div></figure><p id="aa9f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们前面的断点以同样的方式工作。主要的区别是我们使用<em class="jd"> mvn test </em>来执行所有的测试。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es lb"><img src="../Images/82b7a28567cad19cc72810b90d5de45b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pmjTMMrSdwXg6cEiI-nUeQ.png"/></div></div></figure><p id="1315" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在现实世界中拥有这种特性非常有帮助，因为通常有数百个测试在您的管道中运行，只有当它们一起运行时，才可能很难猜测是什么导致它们失败。经常运行您的测试也是一个好主意，这有助于您在代码库发生少量更改后识别问题。</p></div></div>    
</body>
</html>