<html>
<head>
<title>Create a Blog with Django</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">与姜戈一起创建博客</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/create-a-blog-with-django-60f529f1d8b6?source=collection_archive---------1-----------------------#2021-03-22">https://medium.com/geekculture/create-a-blog-with-django-60f529f1d8b6?source=collection_archive---------1-----------------------#2021-03-22</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="5583" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">使用Python和Django从头开始创建博客的分步指南。</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/b31773326cc9535252a87e0b43db2792.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IoqhqksPyD4jW8UezzuXdQ.jpeg"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Photo by <a class="ae jn" href="https://unsplash.com/@kaitlynbaker?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Kaitlyn Baker</a> on <a class="ae jn" href="/collections/9795850/tech?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="96b2" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">从头开始创建一个个性化的博客网站比看起来简单。尤其是在使用提供现成内置特性的特定框架时。Django是这种情况下的一个很棒的框架。</p><h1 id="e467" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">创建Django应用程序</h1><p id="12b3" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">在本教程中，将按照正确的顺序介绍和简要解释开发和维护网站的所有必要步骤。</p><h2 id="b609" class="lh kl hi bd km li lj lk kq ll lm ln ku jx lo lp kw kb lq lr ky kf ls lt la lu bi translated">1.0初始设置</h2><p id="0581" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">假设Python3已经安装，创建一个目录作为起点:</p><pre class="iy iz ja jb fd lv lw lx ly aw lz bi"><span id="5834" class="lh kl hi lw b fi ma mb l mc md"># create a dir<br/>mkdir djangoblog</span><span id="b3e1" class="lh kl hi lw b fi me mb l mc md"># navigate to dir<br/>cd djangoblog</span></pre><h2 id="617e" class="lh kl hi bd km li lj lk kq ll lm ln ku jx lo lp kw kb lq lr ky kf ls lt la lu bi translated">1.1虚拟环境</h2><p id="73d5" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">创建一个虚拟环境非常简单。尝试以下命令:</p><pre class="iy iz ja jb fd lv lw lx ly aw lz bi"><span id="923c" class="lh kl hi lw b fi ma mb l mc md"># python3 -m venv &lt;name&gt;<br/>python3 -m venv <strong class="lw hj">venv</strong></span></pre><p id="3753" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这样就创建了一个虚拟环境，命名为<strong class="jq hj"> venv </strong>。现在，让我们激活它:</p><pre class="iy iz ja jb fd lv lw lx ly aw lz bi"><span id="07db" class="lh kl hi lw b fi ma mb l mc md"># source &lt;name&gt;/bin/activate<br/>source <strong class="lw hj">venv</strong>/bin/activate</span></pre><p id="f0c4" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在虚拟环境中，有最新版本的Python(在本例中是3.9)和最新版本的pip(在本例中是21.0.1)。然后，让我们安装Django(默认是最新版本，这里是:3.1.7):</p><pre class="iy iz ja jb fd lv lw lx ly aw lz bi"><span id="9fd8" class="lh kl hi lw b fi ma mb l mc md"># pip install &lt;package-name&gt;<br/>pip install django</span></pre><h2 id="77d2" class="lh kl hi bd km li lj lk kq ll lm ln ku jx lo lp kw kb lq lr ky kf ls lt la lu bi translated">1.2项目设置(1)</h2><p id="44a7" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">创建并激活虚拟环境之后，下一步是创建一个目录，并在那里创建一个Django项目:</p><pre class="iy iz ja jb fd lv lw lx ly aw lz bi"><span id="77de" class="lh kl hi lw b fi ma mb l mc md"># create a dir<br/>mkdir <strong class="lw hj">mysite</strong></span><span id="16e4" class="lh kl hi lw b fi me mb l mc md"># navigate to dir<br/>cd <strong class="lw hj">mysite</strong></span><span id="70f5" class="lh kl hi lw b fi me mb l mc md"># create a django project<br/>django-admin startproject <strong class="lw hj">mysite</strong></span></pre><p id="d9e4" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">现在，目录的结构如下所示:</p><pre class="iy iz ja jb fd lv lw lx ly aw lz bi"><span id="8b3f" class="lh kl hi lw b fi ma mb l mc md"><em class="mf">| — mysite<br/>| | — __init__.py<br/>| | — asgi.py<br/>| | — settings.py<br/>| | — urls.py<br/>| | — wsgi.py<br/>| — manage.py</em></span></pre><p id="d44f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">但是，这些文件意味着什么呢？</p><ul class=""><li id="e955" class="mg mh hi jq b jr js ju jv jx mi kb mj kf mk kj ml mm mn mo bi translated"><strong class="jq hj"> __init__。py </strong> →一个空白的Python脚本，向Python解释器表明这个目录实际上是一个Python包。它允许从目录中导入Python包。</li><li id="d147" class="mg mh hi jq b jr mp ju mq jx mr kb ms kf mt kj ml mm mn mo bi translated"><strong class="jq hj"> asgi.py </strong> →提供支持异步的Python web服务器、框架和应用程序之间的标准接口。</li><li id="afb8" class="mg mh hi jq b jr mp ju mq jx mr kb ms kf mt kj ml mm mn mo bi translated"><strong class="jq hj"> settings.py </strong> →包含Django项目配置的文件。</li><li id="7304" class="mg mh hi jq b jr mp ju mq jx mr kb ms kf mt kj ml mm mn mo bi translated"><strong class="jq hj"> urls.py </strong> →包含Django项目URL模式的文件。</li><li id="5bf3" class="mg mh hi jq b jr mp ju mq jx mr kb ms kf mt kj ml mm mn mo bi translated"><strong class="jq hj"> wsgi.py </strong> →包含Django项目的wsgi配置属性的文件。它基本上是一个Python脚本，用于运行开发服务器并帮助部署到生产环境。</li><li id="2e01" class="mg mh hi jq b jr mp ju mq jx mr kb ms kf mt kj ml mm mn mo bi translated"><strong class="jq hj"> manage.py </strong> →一个命令行实用程序，允许以多种方式与Django项目交互。</li></ul><p id="dd61" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">首先，有两个同名的目录可能会引起混淆。但是，主目录的名称仍然可以更改为任何首选名称。</p><p id="d4d5" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">另一方面，二级目录名被硬编码在一些Django特定的文件中，因此；不建议改名。</p><h2 id="b8ce" class="lh kl hi bd km li lj lk kq ll lm ln ku jx lo lp kw kb lq lr ky kf ls lt la lu bi translated"><strong class="ak"> 1.3运行项目</strong></h2><p id="d77e" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">Django自带一个内置的web服务器用于开发。要运行该项目，只需导航到<em class="mf"> manage.py </em>文件所在的位置，并尝试以下命令:</p><pre class="iy iz ja jb fd lv lw lx ly aw lz bi"><span id="75da" class="lh kl hi lw b fi ma mb l mc md"># default run in <a class="ae jn" href="http://127.0.0.1:8000/" rel="noopener ugc nofollow" target="_blank">http://127.0.0.1:8000/</a><br/>python manage.py runserver</span><span id="8b72" class="lh kl hi lw b fi me mb l mc md"># use another port in localhost<br/>python manage.py runserver 2000</span></pre><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mu"><img src="../Images/c45d4a4066eb6c0b2079fc9f34c62279.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*obATOk4krziDlkV7VLAe6w.png"/></div></div></figure><h2 id="5da7" class="lh kl hi bd km li lj lk kq ll lm ln ku jx lo lp kw kb lq lr ky kf ls lt la lu bi translated">1.4项目设置(2)</h2><p id="2783" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">既然已经创建了Django项目，下一步就是创建Django应用程序。让我们导航到<em class="mf"> manage.py </em>文件所在的位置，并启动一个应用程序:</p><pre class="iy iz ja jb fd lv lw lx ly aw lz bi"><span id="bc1d" class="lh kl hi lw b fi ma mb l mc md"># python manage.py startapp &lt;name&gt;<br/>python manage.py startapp <strong class="lw hj">blog</strong></span></pre><p id="271f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">该应用程序已经创建并命名为<strong class="jq hj">博客</strong>。请注意，新文件是在director中生成的，当前结构如下所示:</p><pre class="iy iz ja jb fd lv lw lx ly aw lz bi"><span id="3fe7" class="lh kl hi lw b fi ma mb l mc md"><em class="mf">|— db.sqlite3<br/>|— mysite<br/>| |— __init__.py<br/>| |— asgi.py<br/>| |— settings.py<br/>| |— urls.py<br/>| |— wsgi.py<br/>|— manage.py<br/>|— blog<br/>| |— __init__.py<br/>| |— admin.py<br/>| |— apps.py<br/>| |— migrations<br/>| |— models.py<br/>| |— tests.py<br/>| |— views.py</em></span></pre><p id="8753" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在创建了一个app之后，Django需要知道项目中有一个新的app。要告诉Django这一点，请检查设置文件(<em class="mf"> mysite/settings.py </em>)。在这里，您可以找到默认安装的应用程序:</p><pre class="iy iz ja jb fd lv lw lx ly aw lz bi"><span id="430f" class="lh kl hi lw b fi ma mb l mc md">INSTALLED_APPS = [<br/>'django.contrib.admin',<br/>'django.contrib.auth',<br/>'django.contrib.contenttypes',<br/>'django.contrib.sessions',<br/>'django.contrib.messages',<br/>'django.contrib.staticfiles',<br/>]</span></pre><p id="2080" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这里也是我们添加新应用的地方:</p><pre class="iy iz ja jb fd lv lw lx ly aw lz bi"><span id="6d63" class="lh kl hi lw b fi ma mb l mc md">INSTALLED_APPS = [<br/>'django.contrib.admin',<br/>'django.contrib.auth',<br/>'django.contrib.contenttypes',<br/>'django.contrib.sessions',<br/>'django.contrib.messages',<br/>'django.contrib.staticfiles',<br/>'blog',<br/>]</span></pre></div><div class="ab cl mv mw gp mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="hb hc hd he hf"><h2 id="71ee" class="lh kl hi bd km li lj lk kq ll lm ln ku jx lo lp kw kb lq lr ky kf ls lt la lu bi translated">2.0数据库模型</h2><p id="b238" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">如上面的项目结构所示，Django项目中生成了一个SQLite数据库。</p><p id="cfe1" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在Python中，模型是从<em class="mf"> django.db.models.Model </em>继承的类。模型类中的每个属性代表一个数据库字段。首先，由于现在有了一个根据上述步骤创建的应用程序，我们还需要运行一些默认创建的数据库迁移:</p><pre class="iy iz ja jb fd lv lw lx ly aw lz bi"><span id="5e2d" class="lh kl hi lw b fi ma mb l mc md">python manage.py migrate</span></pre><p id="eeda" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">假设初始迁移成功执行，让我们检查一个名为<strong class="jq hj"> Post </strong>的表及其字段的示例:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="nc nd l"/></div><figcaption class="jj jk et er es jl jm bd b be z dx">An example of a defined Django model</figcaption></figure><p id="7ed2" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这个模型是博客文章的典型例子，也是博客文章通常需要和指定的内容。开始时，从Django导入<strong class="jq hj">模型</strong>和<strong class="jq hj">用户</strong>默认模型。还有一个<strong class="jq hj">标题</strong>T14】，一个<em class="mf"> </em>一个<strong class="jq hj">鼻涕虫</strong>，<strong class="jq hj">作者</strong>和<strong class="jq hj">内容</strong>当然。作者<strong class="jq hj">是默认Django模型<strong class="jq hj">用户</strong>的外键。<strong class="jq hj">状态</strong>是指定帖子默认只是一个<strong class="jq hj">草稿</strong>，之后就会<strong class="jq hj">发布</strong>。</strong></p><p id="e2dd" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">还有两个更具体的字段，称为在创建的<strong class="jq hj">和在</strong>更新的<strong class="jq hj">。当在数据库表中添加或更新实例时，这些将自动更新为特定的<strong class="jq hj">日期+时间</strong>。创建对象的<strong class="jq hj">排序</strong>将从最后到第一。</strong></p><p id="c251" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">注意，<strong class="jq hj"> __str__() </strong>方法是对象的人类可读表示。Django将在很多地方使用它，比如在<em class="mf"> admin </em>站点。</p><p id="d91c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">要在数据库中创建一个新表，首先我们需要生成一个迁移文件，然后执行这个迁移:</p><pre class="iy iz ja jb fd lv lw lx ly aw lz bi"><span id="33c7" class="lh kl hi lw b fi ma mb l mc md"># create the migration file in migrations dir<br/>python manage.py makemigrations</span><span id="d20c" class="lh kl hi lw b fi me mb l mc md"># migrate changes to the db<br/>python manage.py migrate</span></pre><h2 id="fb16" class="lh kl hi bd km li lj lk kq ll lm ln ku jx lo lp kw kb lq lr ky kf ls lt la lu bi translated">2.1管理内置界面</h2><p id="a6d3" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">Django带有一个内置的管理界面。此时，剩下要做的就是创建一个超级用户并登录到管理面板:</p><pre class="iy iz ja jb fd lv lw lx ly aw lz bi"><span id="8a7b" class="lh kl hi lw b fi ma mb l mc md">python manage.py createsuperuser</span><span id="44e4" class="lh kl hi lw b fi me mb l mc md"><em class="mf">Username (leave blank to use '&lt;username&gt;'): &lt;provide username&gt;<br/>Email address: &lt;provide email address&gt;<br/>Password: &lt;provide password&gt;<br/>Password (again): &lt;provide password again&gt;<br/>Superuser created successfully.</em></span></pre><p id="3903" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">执行该命令时，需要用户名、电子邮件和密码。之后，让我们重新运行开发服务器:</p><pre class="iy iz ja jb fd lv lw lx ly aw lz bi"><span id="0c6d" class="lh kl hi lw b fi ma mb l mc md"># default run in <a class="ae jn" href="http://127.0.0.1:8000/" rel="noopener ugc nofollow" target="_blank">http://127.0.0.1:8000/</a><br/>python manage.py runserver</span></pre><p id="c1d1" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">要访问内置的管理界面，请尝试<strong class="jq hj"/><a class="ae jn" href="http://127.0.0.1:8000/admin/." rel="noopener ugc nofollow" target="_blank"><strong class="jq hj"><em class="mf">http://127 . 0 . 0 . 1:8000/admin/</em></strong><em class="mf">。</em>T9】</a></p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mu"><img src="../Images/27767ece3683e7e48200513cc366f284.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HBbZhFvvejYV_tHHVii-uQ.png"/></div></div></figure><p id="a691" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">登录后，只有Django认证模型中的<strong class="jq hj">组</strong>和<strong class="jq hj">用户</strong>可见，如下图所示:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mu"><img src="../Images/6ccf5057bc3f0e6e33c17cdc11c04ad0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jiZjD4erkko5pPJ16xrzig.png"/></div></div></figure><p id="5241" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">为了也能看到从上面的例子中创建的<strong class="jq hj"> Post </strong>模型，它应该包含在博客应用程序的<em class="mf"> admin.py </em>文件中(<em class="mf"> blog/admin.py </em>):</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="nc nd l"/></div><figcaption class="jj jk et er es jl jm bd b be z dx">An example of adding a model in the built-in admin interface</figcaption></figure><p id="2427" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">基于上一段代码，在帖子列表中可以看到<strong class="jq hj">标题</strong>、<strong class="jq hj"> slug </strong>和<strong class="jq hj"> status </strong>。可以通过定义的<strong class="jq hj">状态</strong>进行过滤，也可以通过<strong class="jq hj">标题</strong>或<strong class="jq hj">内容</strong>进行搜索。<strong class="jq hj">岗位</strong>型号将出现在界面上:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mu"><img src="../Images/c5f6d50eb157a54a05cc460c1ecbe7c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fUR68cvhWc2w4rJQtIkb6w.png"/></div></div></figure><p id="9f99" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">请注意，添加了一些博客文章示例，如下所示:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mu"><img src="../Images/a1f4f08b3da9825d0a0acc35e110f9e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OlxyUle6Qn6xj-uBT1dezg.png"/></div></div></figure></div><div class="ab cl mv mw gp mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="hb hc hd he hf"><h2 id="6bda" class="lh kl hi bd km li lj lk kq ll lm ln ku jx lo lp kw kb lq lr ky kf ls lt la lu bi translated">3.0视图</h2><p id="7bd9" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">视图基本上是一个接收web请求并返回web响应的函数。目标是创建视图，为这些视图返回的数据创建HTML模板，并用特定的URL映射它们。</p><p id="97b1" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">让我们深入了解更多代码并更新文件(<em class="mf"> blog/views.py) </em>:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="nc nd l"/></div></figure><h2 id="3ea4" class="lh kl hi bd km li lj lk kq ll lm ln ku jx lo lp kw kb lq lr ky kf ls lt la lu bi translated">3.1 URL模式</h2><p id="b41a" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">当用户向页面发出请求时，Django控制器检查URL以返回正确的视图。首先，我们在<em class="mf"> mysite/blog </em>目录下创建一个名为<em class="mf"> urls.py </em>的文件，其中包含如下所示的代码:</p><pre class="iy iz ja jb fd lv lw lx ly aw lz bi"><span id="529a" class="lh kl hi lw b fi ma mb l mc md">from . import views<br/>from django.urls import path</span><span id="cdde" class="lh kl hi lw b fi me mb l mc md">urlpatterns = [<br/>    path('', views.PostList.as_view(), name='home'),<br/>    path('&lt;slug:slug&gt;/', views.PostDetail.as_view(),  name='post_detail'),<br/>]</span></pre><p id="3c78" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">然后，需要将博客中的URL导入到mysite目录的URL文件中(<em class="mf"> mysite/urls.py </em>):</p><pre class="iy iz ja jb fd lv lw lx ly aw lz bi"><span id="900c" class="lh kl hi lw b fi ma mb l mc md">from django.contrib import admin<br/>from django.urls import path, include</span><span id="d904" class="lh kl hi lw b fi me mb l mc md">urlpatterns = [<br/>    path('admin/', admin.site.urls),<br/>    path('', include('blog.urls')),<br/>]</span></pre><h2 id="4049" class="lh kl hi bd km li lj lk kq ll lm ln ku jx lo lp kw kb lq lr ky kf ls lt la lu bi translated">3.2模板</h2><p id="1390" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">使用HTML、CSS和Django模板语言创建视图模板。首先，让我们在基本目录中为模板创建一个目录。</p><p id="8469" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">要使用模板，需要先在设置中进行配置:</p><pre class="iy iz ja jb fd lv lw lx ly aw lz bi"><span id="57bf" class="lh kl hi lw b fi ma mb l mc md"># Added template directory in settings.py<br/>TEMPLATES_DIRS = os.path.join(BASE_DIR,'templates')</span><span id="f0e8" class="lh kl hi lw b fi me mb l mc md">...</span><span id="f02e" class="lh kl hi lw b fi me mb l mc md">TEMPLATES = [{<br/>    'BACKEND': 'django.template.backends.django.DjangoTemplates',<br/>    'DIRS': [TEMPLATES_DIRS], # Template directory added here<br/>    'APP_DIRS': True,<br/>    'OPTIONS': {<br/>        'context_processors': [<br/>        'django.template.context_processors.debug',<br/>        'django.template.context_processors.request',<br/>        'django.contrib.auth.context_processors.auth',<br/>        'django.contrib.messages.context_processors.messages',<br/>        ],<br/>    },<br/>},]</span></pre><p id="490a" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">然后，让我们有四个不同的(*。html)文件:</p><ul class=""><li id="0bb6" class="mg mh hi jq b jr js ju jv jx mi kb mj kf mk kj ml mm mn mo bi translated">【base.html】→主模板，模板的“骨架”。它包括页眉、导航栏、内容&amp;页脚。</li><li id="875b" class="mg mh hi jq b jr mp ju mq jx mr kb ms kf mt kj ml mm mn mo bi translated"><strong class="jq hj">index.html</strong>→使用Django模板语言扩展<em class="mf">base.html</em>模板。它包含主页中的博客条目，使用的模板是<em class="mf"> post_detail.html </em>。它还包括<strong class="jq hj"/><em class="mf">sidebar.html</em><strong class="jq hj"/>文件。</li><li id="1e25" class="mg mh hi jq b jr mp ju mq jx mr kb ms kf mt kj ml mm mn mo bi translated"><strong class="jq hj">sidebar.html</strong>→在主页面增加了一个小侧边栏。</li><li id="628c" class="mg mh hi jq b jr mp ju mq jx mr kb ms kf mt kj ml mm mn mo bi translated"><strong class="jq hj"> post_detail.html </strong> →博文的详细视图。</li></ul><p id="9352" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">让我们看看上面提到的文件是什么样子的:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="nc nd l"/></div><figcaption class="jj jk et er es jl jm bd b be z dx">Example of templates using HTML, CSS and Django template language, inspired by <a class="ae jn" href="http://www.djangocentral.com" rel="noopener ugc nofollow" target="_blank">djangocentral.com</a></figcaption></figure><p id="80ae" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在<strong class="jq hj">index.html</strong>文件中使用DTL的小例子及说明:</p><pre class="iy iz ja jb fd lv lw lx ly aw lz bi"><span id="83dc" class="lh kl hi lw b fi ma mb l mc md"># Extending an HTML template using Django template language<br/>{% extends "base.html" %}</span><span id="007c" class="lh kl hi lw b fi me mb l mc md">...</span><span id="89e5" class="lh kl hi lw b fi me mb l mc md"># Including an HTML template using DTL<br/>{% include "sidebar.html" %}</span><span id="c26a" class="lh kl hi lw b fi me mb l mc md">...</span><span id="2ec5" class="lh kl hi lw b fi me mb l mc md"># Iterating through the objects inserted in the db table "Post"<br/># List "post_list" is available because of inheriting from ListView<br/>{% for post in post_list %} # for post in "Post" db table<br/>    {% post.title %}  # get the title of post</span></pre><blockquote class="ne nf ng"><p id="4abc" class="jo jp mf jq b jr js ij jt ju jv im jw nh jy jz ka ni kc kd ke nj kg kh ki kj hb bi translated">注意:关于Django模板语言的更多细节，请访问<a class="ae jn" href="https://docs.djangoproject.com/en/3.1/ref/templates/language/" rel="noopener ugc nofollow" target="_blank">这里</a>。</p></blockquote><p id="0743" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">最后，项目的结构类似于下面的示例:</p><pre class="iy iz ja jb fd lv lw lx ly aw lz bi"><span id="f966" class="lh kl hi lw b fi ma mb l mc md"><em class="mf">|— db.sqlite3<br/>|— mysite<br/>| |— __init__.py<br/>| |— asgi.py<br/>| |— settings.py<br/>| |— urls.py<br/>| |— wsgi.py<br/>|— manage.py<br/>|— blog<br/>| |— __init__.py<br/>| |— admin.py<br/>| |— apps.py<br/>| |— migrations<br/>| |— models.py<br/>| |— tests.py<br/>| |— views.py<br/>| - templates<br/>| |- base.html<br/>| |- index.html<br/>| |- post_detail.html<br/>| |- sidebar.html</em></span></pre></div><div class="ab cl mv mw gp mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="hb hc hd he hf"><h1 id="4384" class="kk kl hi bd km kn nk kp kq kr nl kt ku io nm ip kw ir nn is ky iu no iv la lb bi translated">恭喜你！🎉</h1><p id="dae2" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">假设这篇文章中提到的所有步骤都正确遵循，个人博客现在就可以使用了，看起来像下面的图片所示:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es np"><img src="../Images/61e65105d17f41a805f10950db2a5512.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A0JSfnueB5gVI7tK1onFIg.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Blog’s main page</figcaption></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es np"><img src="../Images/b1d09044f1ae6dded0203dc06831a2f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t-dH8RcTqSyd1BW7H8M_7A.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Detailed view of a blog post</figcaption></figure><p id="906f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">此外，请随意查看我的git repo的源代码:</p><div class="nq nr ez fb ns nt"><a href="https://github.com/bthaqi/django-blog" rel="noopener  ugc nofollow" target="_blank"><div class="nu ab dw"><div class="nv ab nw cl cj nx"><h2 class="bd hj fi z dy ny ea eb nz ed ef hh bi translated">bthaqi/django-博客</h2><div class="oa l"><h3 class="bd b fi z dy ny ea eb nz ed ef dx translated">一个如何用django创建博客的例子。通过在…上创建帐户，为bthaqi/django博客的发展做出贡献</h3></div><div class="ob l"><p class="bd b fp z dy ny ea eb nz ed ef dx translated">github.com</p></div></div><div class="oc l"><div class="od l oe of og oc oh jh nt"/></div></div></a></div></div><div class="ab cl mv mw gp mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="hb hc hd he hf"><h1 id="d9fb" class="kk kl hi bd km kn nk kp kq kr nl kt ku io nm ip kw ir nn is ky iu no iv la lb bi translated">想了解更多？</h1><p id="a223" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">Django文档和教程的一些很好的来源，也是我的灵感来源，如下所述:</p><ul class=""><li id="1eba" class="mg mh hi jq b jr js ju jv jx mi kb mj kf mk kj ml mm mn mo bi translated">https://docs.djangoproject.com/en/3.1/intro/tutorial01/<a class="ae jn" href="https://docs.djangoproject.com/en/3.1/" rel="noopener ugc nofollow" target="_blank"/></li><li id="0e56" class="mg mh hi jq b jr mp ju mq jx mr kb ms kf mt kj ml mm mn mo bi translated">【https://djangocentral.com/django/ T4】</li><li id="fec2" class="mg mh hi jq b jr mp ju mq jx mr kb ms kf mt kj ml mm mn mo bi translated"><a class="ae jn" href="https://www.fullstackpython.com/django.html" rel="noopener ugc nofollow" target="_blank">https://www.fullstackpython.com/django.html</a></li></ul><blockquote class="ne nf ng"><p id="dab4" class="jo jp mf jq b jr js ij jt ju jv im jw nh jy jz ka ni kc kd ke nj kg kh ki kj hb bi translated">注:我一直最喜欢的关于姜戈的书🍨</p></blockquote><div class="nq nr ez fb ns nt"><a href="https://g.co/kgs/MxyA4c" rel="noopener  ugc nofollow" target="_blank"><div class="nu ab dw"><div class="nv ab nw cl cj nx"><h2 class="bd hj fi z dy ny ea eb nz ed ef hh bi translated">Django 1.11的两个独家新闻:Django Web框架的最佳实践——Google搜索</h2><div class="oa l"><h3 class="bd b fi z dy ny ea eb nz ed ef dx translated">如果您在几秒钟内没有被重定向，请单击此处。Django 1.11的两个独家新闻:最佳实践…</h3></div><div class="ob l"><p class="bd b fp z dy ny ea eb nz ed ef dx translated">g.co</p></div></div></div></a></div><h1 id="1d99" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">简短回顾</h1><p id="df6d" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">这篇简短的教程涵盖了使用Python3和Django3从头开始创建个人博客的所有必要步骤。</p><p id="de58" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">首先，它解释了需要安装什么，以及如何创建Django3应用程序。简短描述Django应用程序的结构，应用程序包含什么文件以及它们的目的是什么。</p><p id="bad9" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">然后，继续讨论数据库模型、迁移和管理内置接口，直到简要解释Django中的视图和呈现模板。</p><p id="63ba" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">假设所有的步骤都按照正确的方式进行，个人博客就可以使用了，并且可以按照<em class="mf">你自己喜欢的方式</em>进行定制！</p></div></div>    
</body>
</html>