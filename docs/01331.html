<html>
<head>
<title>Build Chrome Dino Quiz Game From Scratch With Speech Recognition Using JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用JavaScript通过语音识别从头开始构建Chrome Dino问答游戏</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/build-chrome-dino-quiz-game-from-scratch-with-speech-recognition-using-javascript-844829fc00c9?source=collection_archive---------14-----------------------#2021-04-06">https://medium.com/geekculture/build-chrome-dino-quiz-game-from-scratch-with-speech-recognition-using-javascript-844829fc00c9?source=collection_archive---------14-----------------------#2021-04-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="8359" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你们一定都知道Chrome恐龙游戏，也被称为T-Rex游戏和Dino Runner，这是谷歌Chrome网络浏览器中的一款内置浏览器游戏，在谷歌Chrome上离线时或通过在地址栏中键入<code class="du jd je jf jg b"><em class="jh">chrome://dino</em></code> <em class="jh"> </em>即可访问。但是如果你从来没有玩过，那么今天是你的幸运日。</p><p id="a876" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这篇文章中，您将学习如何从头开始构建Dino Runner游戏，并将其改造成一个使用语音识别和Web Speech API的问答游戏。</p><figure class="jj jk jl jm fd jn er es paragraph-image"><div class="er es ji"><img src="../Images/ee4f2b5da7ac14151a5e1bf1204e7a14.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/0*kp1M6OvbzqOeLwDm"/></div><figcaption class="jq jr et er es js jt bd b be z dx">Dino Character Speaking</figcaption></figure><p id="04df" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们开始吧。</p><p id="e11b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> HTML布局</strong>:HTML布局定义了将在页面上显示的元素结构。它包括:</p><p id="0ea0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">标题</strong>:该部分位于网页顶部，用于以下用途:</p><ul class=""><li id="14cd" class="ju jv hi ih b ii ij im in iq jw iu jx iy jy jc jz ka kb kc bi translated"><em class="jh">标题</em>:显示游戏标题，游戏第一次加载或重新加载时。</li><li id="ddaa" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated"><em class="jh">问题板</em>:显示测验的问题。</li><li id="c7d9" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated"><em class="jh">答题板</em>:显示当前玩家答错的问题的答案。</li></ul><p id="adb0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">游戏</strong>:这部分是整个游戏执行的地方。它包括:</p><ul class=""><li id="ee2b" class="ju jv hi ih b ii ij im in iq jw iu jx iy jy jc jz ka kb kc bi translated"><em class="jh">比分板</em>:该块显示玩家已经达到的比分。</li><li id="e86b" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated"><em class="jh">游戏状态</em>:该区块在游戏开始或游戏结束时显示。</li><li id="c2a7" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated"><em class="jh"> Dino </em> : <strong class="ih hj"> </strong>这个块显示玩家形象，设置玩家在游戏中的位置。</li><li id="6f17" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated"><em class="jh">仙人掌</em>:此块显示障碍物(仙人掌)并设置障碍物的位置。</li><li id="36ee" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated"><em class="jh">地面</em>:此块显示地面，并设置其在游戏中的位置。</li><li id="204e" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated"><em class="jh">语音气泡</em>:该块显示语音结果，玩家将通过麦克风说话。</li></ul><figure class="jj jk jl jm fd jn"><div class="bz dy l di"><div class="ki kj l"/></div><figcaption class="jq jr et er es js jt bd b be z dx">HTML Code</figcaption></figure><p id="63a8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">CSS样式化 : CSS用于样式化HTML中的不同部分，使其更具视觉吸引力。</p><ul class=""><li id="599e" class="ju jv hi ih b ii ij im in iq jw iu jx iy jy jc jz ka kb kc bi translated">CSS样式表被插入到名为<em class="jh"> index.css </em>的<code class="du jd je jf jg b">&lt;head&gt;</code>标签下。</li><li id="e43b" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated">游戏标题Dino Quiz，一个通过JavaScript <code class="du jd je jf jg b">createElement()</code>函数创建的段落元素<code class="du jd je jf jg b">&lt;p&gt;</code>，拥有类属性<code class="du jd je jf jg b">stripe-text</code>。伪元素<code class="du jd je jf jg b">::after</code>和<code class="du jd je jf jg b">::before</code>分别用于提供文本样式和文本阴影。</li><li id="9641" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated">语音气泡是一个具有class属性<code class="du jd je jf jg b"> oval-thought</code>的div元素，它为元素提供了气泡形状的样式。它的子元素<code class="du jd je jf jg b">&lt;p&gt;</code>text node根据玩家在麦克风中说话时的语音结果进行更新。</li><li id="a9b0" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated">谷歌字体是用来给游戏一个街机的外观，通过使用“按下开始2P”字体系列来显示玩家的分数。</li><li id="7d9b" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated">CSS和JavaScript中都使用了供应商前缀，以提供对实验性功能的支持，如目前Chrome和Edge桌面浏览器支持的Web Speech API。</li></ul><figure class="jj jk jl jm fd jn"><div class="bz dy l di"><div class="ki kj l"/></div><figcaption class="jq jr et er es js jt bd b be z dx">CSS Style-Sheet</figcaption></figure><p id="67e3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> JavaScript </strong>:幕后的繁重工作由JavaScript完成，比如操作DOM元素、集成Web语音API、动画等等。JavaScript代码在Game.js文件中定义，使用<code class="du jd je jf jg b">&lt;script&gt;&lt;/script&gt;</code>标签插入到HTML文件中的<code class="du jd je jf jg b"> &lt;/body&gt;</code>标签之前，首先加载HTML代码。</p><p id="878d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们一步一步地理解代码:</p><p id="5068" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤1 </strong>:显示开始画面</p><p id="890f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">游戏状态:</strong></p><ol class=""><li id="45d4" class="ju jv hi ih b ii ij im in iq jw iu jx iy jy jc kk ka kb kc bi translated">定义的<code class="du jd je jf jg b">gameStatus</code>对象有两个访问器属性，<code class="du jd je jf jg b">gameOver</code>和<code class="du jd je jf jg b">gameReset</code>，由setter方法操作，由getter方法获得。</li></ol><ul class=""><li id="df53" class="ju jv hi ih b ii ij im in iq jw iu jx iy jy jc jz ka kb kc bi translated">当游戏结束时<code class="du jd je jf jg b">gameOver</code>标志被设置为<code class="du jd je jf jg b">true</code>，否则设置为<code class="du jd je jf jg b">false</code>。</li><li id="ae11" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated">当玩家想要再次玩游戏时,<code class="du jd je jf jg b">gameReset</code>标志被设置为<code class="du jd je jf jg b">true</code>。</li></ul><figure class="jj jk jl jm fd jn"><div class="bz dy l di"><div class="ki kj l"/></div></figure><p id="7254" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">显示标题和启动/重新加载信息</strong>:</p><ol class=""><li id="8bfe" class="ju jv hi ih b ii ij im in iq jw iu jx iy jy jc kk ka kb kc bi translated"><code class="du jd je jf jg b">initialText()</code>方法在标题部分显示标题<em class="jh"> Dino Quiz </em>作为新的段落元素，消息<em class="jh"> Press space to start </em>将在游戏开始时出现在玩家角色的底部。</li><li id="e5cb" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc kk ka kb kc bi translated">但是，这两个文本都只在<code class="du jd je jf jg b">getResetGame()</code>方法返回<code class="du jd je jf jg b">false</code>时显示，告知游戏没有结束；如果是真的，那么只显示<em class="jh">按空格键重新加载</em>消息，要求玩家重新开始游戏。</li></ol><figure class="jj jk jl jm fd jn"><div class="bz dy l di"><div class="ki kj l"/></div></figure><figure class="jj jk jl jm fd jn er es paragraph-image"><div class="er es kl"><img src="../Images/01486d932ad83f3450c46ede0b3f2714.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/0*8cE_nFw9WlxXJlBg"/></div><figcaption class="jq jr et er es js jt bd b be z dx">Start Screen</figcaption></figure><p id="b14d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤2: </strong>构建玩家档案和功能</p><p id="b854" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">玩家形象</strong>:</p><ol class=""><li id="eee1" class="ju jv hi ih b ii ij im in iq jw iu jx iy jy jc kk ka kb kc bi translated">在<code class="du jd je jf jg b">drawDino()</code>方法中，选择类属性为dino的canvas元素；它将充当我们的玩家角色，执行跳跃和奔跑等动作。</li><li id="64bf" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc kk ka kb kc bi translated">使用<code class="du jd je jf jg b">drawImage()</code>方法在选定的画布上绘制一个恐龙图像，该方法采用如下九个参数:</li></ol><ul class=""><li id="72b7" class="ju jv hi ih b ii ij im in iq jw iu jx iy jy jc jz ka kb kc bi translated"><code class="du jd je jf jg b">image</code> —要绘制到上下文中的元素。</li><li id="7a83" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated"><code class="du jd je jf jg b">sx</code> —要绘制到目标上下文中的源图像子矩形左上角的x轴坐标。</li><li id="7b77" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated"><code class="du jd je jf jg b">sy</code> —要绘制到目标上下文中的源图像子矩形左上角的y轴坐标。</li><li id="868a" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated"><code class="du jd je jf jg b">sWidth</code> —要绘制到目标上下文中的源图像的子矩形的宽度。如果未指定，则使用从sx和sy指定的坐标到图像右下角的整个矩形。</li><li id="aaac" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated"><code class="du jd je jf jg b">sHeight</code> —要绘制到目标上下文中的源图像的子矩形的高度。</li><li id="976d" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated"><code class="du jd je jf jg b">dx</code> —目标画布中放置源图像左上角的x轴坐标。</li><li id="ed35" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated"><code class="du jd je jf jg b">dy</code> —目标画布中放置源图像左上角的y轴坐标。</li><li id="6cf5" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated"><code class="du jd je jf jg b">dWidth</code> —在目标画布中绘制图像的宽度。这允许缩放所绘制的图像。如果未指定，则图像在绘制时不缩放宽度。</li><li id="c199" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated"><code class="du jd je jf jg b">dHeight</code> —在目标画布中绘制图像的高度。这允许缩放所绘制的图像。如果未指定，则图像在绘制时不按高度缩放。</li></ul><figure class="jj jk jl jm fd jn"><div class="bz dy l di"><div class="ki kj l"/></div></figure><p id="1638" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">玩家位置</strong>:</p><ul class=""><li id="993f" class="ju jv hi ih b ii ij im in iq jw iu jx iy jy jc jz ka kb kc bi translated"><code class="du jd je jf jg b">dinoPosition</code>对象告知玩家角色是否在地上，即是否做出了跳跃动作。</li><li id="25af" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated">如果<code class="du jd je jf jg b">onground</code>属性为真，那么玩家角色将在地面上，否则一个跳跃动作已经开始。</li></ul><figure class="jj jk jl jm fd jn"><div class="bz dy l di"><div class="ki kj l"/></div></figure><p id="9bf2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">玩家动画</strong>:</p><ol class=""><li id="c7e2" class="ju jv hi ih b ii ij im in iq jw iu jx iy jy jc kk ka kb kc bi translated"><strong class="ih hj">运行</strong>——在<code class="du jd je jf jg b">dinoRun()</code>方法中，<code class="du jd je jf jg b">setInterval()</code>方法使用<code class="du jd je jf jg b">drawDino()</code>方法在定义的时间间隔(在本例中为100毫秒)后在播放器画布上重新绘制角色的图像，给人一种角色正在运行的感觉。当游戏结束或者当玩家角色离开地面时，动画停止。</li><li id="fe36" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc kk ka kb kc bi translated"><strong class="ih hj">跳转</strong> -在<code class="du jd je jf jg b">jumpDino()</code>方法中，两个<code class="du jd je jf jg b">setInterval()</code>方法用于创建跳转效果-</li></ol><ul class=""><li id="6bb8" class="ju jv hi ih b ii ij im in iq jw iu jx iy jy jc jz ka kb kc bi translated">第一种<code class="du jd je jf jg b">setInterval()</code>方法将播放器画布的Y轴坐标缩小到100像素。</li><li id="0ebd" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated">第二种<code class="du jd je jf jg b">setInterval()</code>方法将播放器画布的Y轴坐标增加到200px。</li><li id="0b78" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated">这两种方法都以定义的时间间隔依次执行任务。</li></ul><figure class="jj jk jl jm fd jn"><div class="bz dy l di"><div class="ki kj l"/></div></figure><p id="257f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第三步</strong>:游戏中的障碍</p><ol class=""><li id="b52e" class="ju jv hi ih b ii ij im in iq jw iu jx iy jy jc kk ka kb kc bi translated"><strong class="ih hj">生成障碍</strong>:<code class="du jd je jf jg b">createElement()</code>方法在游戏中动态生成障碍。障碍是基于玩家已经避开最后一个障碍的条件而创建的。</li><li id="7a4c" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc kk ka kb kc bi translated"><strong class="ih hj">移动障碍物</strong>:变量<code class="du jd je jf jg b">obctacleSpeed</code>以毫秒(千分之一秒)为单位，表示指定的<code class="du jd je jf jg b">setInterval()</code>方法执行之间的延迟，障碍物位置不断变化，直到它到达位置0，或者当游戏结束时，<code class="du jd je jf jg b">remove()</code>方法从DOM中移除障碍物元素。</li><li id="0477" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc kk ka kb kc bi translated"><strong class="ih hj">设定条件</strong>:根据障碍物与玩家位置的距离，执行单独的条件语句。</li></ol><ul class=""><li id="4894" class="ju jv hi ih b ii ij im in iq jw iu jx iy jy jc jz ka kb kc bi translated"><strong class="ih hj"> Set Game Over </strong>:当用户对问题给出错误答案时，<code class="du jd je jf jg b">getflagVal()</code> getter方法返回false，玩家与障碍物的最小距离已经达到<code class="du jd je jf jg b">toJump()</code>方法返回<code class="du jd je jf jg b">true</code>，游戏状态为<code class="du jd je jf jg b">false</code>，调用<code class="du jd je jf jg b">gameOver()</code>方法。</li><li id="6fab" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated"><strong class="ih hj">跳跃玩家</strong>:当用户给出问题的正确答案时，<code class="du jd je jf jg b"> getflagVal()</code> getter方法返回false，玩家与障碍物的最小距离已经达到<code class="du jd je jf jg b">toJump()</code>方法返回<code class="du jd je jf jg b">true</code>，从而触发<code class="du jd je jf jg b">jumpDino()</code>方法使玩家跳跃。</li><li id="baba" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated"><strong class="ih hj">其他方法</strong>:其他方法如<code class="du jd je jf jg b">setQuestion()</code>、<code class="du jd je jf jg b">setHideBubble()</code>、<code class="du jd je jf jg b">setflagVal()</code>在合适的条件被触发时被调用。</li></ul><figure class="jj jk jl jm fd jn"><div class="bz dy l di"><div class="ki kj l"/></div></figure><p id="5b4f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第四步</strong>:游戏背景</p><ol class=""><li id="f931" class="ju jv hi ih b ii ij im in iq jw iu jx iy jy jc kk ka kb kc bi translated"><code class="du jd je jf jg b">groundMove()</code>方法提供了一个移动的背景效果，它渲染画布元素，并在设定的时间间隔后在画布上重新绘制地面图像。</li><li id="3209" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc kk ka kb kc bi translated">图像在画布上以适当的距离绘制两次，每次向左移动2的倍数；这里2的倍数代表图像移动的速度。因此，较高的值意味着较高的速度。</li></ol><figure class="jj jk jl jm fd jn"><div class="bz dy l di"><div class="ki kj l"/></div></figure><p id="82f9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第5步</strong>:测验问题和答案</p><p id="726f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">问题对象</strong>:测验的问题是一个对象数组；每个对象都有三个属性。</p><ul class=""><li id="8260" class="ju jv hi ih b ii ij im in iq jw iu jx iy jy jc jz ka kb kc bi translated"><strong class="ih hj"> ID </strong>:是问题编号，从1开始。</li><li id="6ed1" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated"><strong class="ih hj">问题</strong>:它有测验的问题。</li><li id="5e5a" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated"><strong class="ih hj">答案</strong>:它有问题的答案。</li></ul><figure class="jj jk jl jm fd jn"><div class="bz dy l di"><div class="ki kj l"/></div></figure><p id="d113" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">设置问题并获得答案</strong>:</p><ul class=""><li id="4901" class="ju jv hi ih b ii ij im in iq jw iu jx iy jy jc jz ka kb kc bi translated"><code class="du jd je jf jg b">quizQuestionAnswer</code>对象使用setter方法在问题板块上设置问题，并使用getter方法回答相应的问题。它还检查代表问题数组索引的索引值；如果超过问题总数，则返回<code class="du jd je jf jg b">false</code>。</li><li id="35fb" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated"><code class="du jd je jf jg b">setQuestion()</code> setter方法调用<code class="du jd je jf jg b">Cactus()</code>方法启动障碍生成。</li><li id="4d9a" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated">静态的<code class="du jd je jf jg b">String.fromCodePoint()</code>方法用于在HTML代码中插入表情符号，该方法返回一个使用指定的代码点序列创建的字符串。</li></ul><figure class="jj jk jl jm fd jn"><div class="bz dy l di"><div class="ki kj l"/></div></figure><p id="7fa1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第六步</strong>:语音识别</p><p id="e0af" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">集成网络语音API </strong>:</p><ul class=""><li id="764f" class="ju jv hi ih b ii ij im in iq jw iu jx iy jy jc jz ka kb kc bi translated">Web语音API有两个部分:语音合成(文本到语音)和语音识别(异步语音识别。)我们将使用语音识别通过麦克风从用户那里获得输入。</li><li id="fb05" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated">在一些浏览器上，如Chrome，在网页上使用语音识别需要一个基于服务器的识别引擎。您的音频被发送到web服务进行识别处理，因此无法脱机工作。</li></ul><p id="624a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我们的例子中触发了两个事件。</p><ul class=""><li id="29fa" class="ju jv hi ih b ii ij im in iq jw iu jx iy jy jc jz ka kb kc bi translated"><strong class="ih hj"> <em class="jh">结果</em>事件</strong> -当单词或短语被肯定识别时触发。它将用户语音结果与当前问题的答案进行比较。</li></ul><ol class=""><li id="a6a7" class="ju jv hi ih b ii ij im in iq jw iu jx iy jy jc kk ka kb kc bi translated"><em class="jh">结果匹配</em> -分数增加100，使用<code class="du jd je jf jg b">speechBubble</code>对象设置器方法<code class="du jd je jf jg b">setBubbleResult()</code>显示用户语音结果，并将<code class="du jd je jf jg b">answerMatchresult</code>对象设置器方法<code class="du jd je jf jg b">setflagVal</code>设置为<code class="du jd je jf jg b">true</code>。</li><li id="d0fb" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc kk ka kb kc bi translated"><em class="jh">结果不匹配</em> -使用<code class="du jd je jf jg b">speechBubble</code>对象设置器方法<code class="du jd je jf jg b">setBubbleResult()</code>显示用户语音结果，并将<code class="du jd je jf jg b">answerMatchresult</code>对象设置器方法<code class="du jd je jf jg b">setflagVal</code>设置为<code class="du jd je jf jg b">false</code>。</li></ol><ul class=""><li id="7a3b" class="ju jv hi ih b ii ij im in iq jw iu jx iy jy jc jz ka kb kc bi translated"><strong class="ih hj"> <em class="jh">结束</em>事件</strong>——当语音识别服务断开时触发。它再次启动语音识别服务，为用户保持连续的语音流。</li></ul><figure class="jj jk jl jm fd jn"><div class="bz dy l di"><div class="ki kj l"/></div></figure><p id="2df4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">显示语音结果</strong>:</p><ul class=""><li id="2785" class="ju jv hi ih b ii ij im in iq jw iu jx iy jy jc jz ka kb kc bi translated">当<code class="du jd je jf jg b">SpeechRecognition</code>的结果事件被触发以显示用户语音结果时，调用带有<code class="du jd je jf jg b">setBubbleResult()</code> setter方法的<code class="du jd je jf jg b">speechBubble</code>对象。</li><li id="a6f4" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated"><code class="du jd je jf jg b">setHideBubble()</code> setter方法是隐藏语音气泡。</li></ul><figure class="jj jk jl jm fd jn"><div class="bz dy l di"><div class="ki kj l"/></div></figure><p id="240e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">设置结果标志</strong>:</p><ul class=""><li id="f75e" class="ju jv hi ih b ii ij im in iq jw iu jx iy jy jc jz ka kb kc bi translated">当用户语音结果与相关问题的答案匹配时，<code class="du jd je jf jg b">answerMatchresult</code>对象使用<code class="du jd je jf jg b">setflagVal()</code> setter方法将对象的flag属性设置为<code class="du jd je jf jg b">true</code>。</li><li id="dd40" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated"><code class="du jd je jf jg b">getflagVal()</code> getter方法用于返回<code class="du jd je jf jg b">flag</code>。</li></ul><figure class="jj jk jl jm fd jn"><div class="bz dy l di"><div class="ki kj l"/></div></figure><figure class="jj jk jl jm fd jn er es paragraph-image"><div class="er es ji"><img src="../Images/19dbd0fd3fbb08b754b6fbd3a616b924.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/0*wSgIExHCDH6sqwtT"/></div><figcaption class="jq jr et er es js jt bd b be z dx">Speech Bubble</figcaption></figure><p id="d6c6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第七步</strong>:计分板</p><p id="642c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">记分板对象跟踪用户的当前分数。</p><ul class=""><li id="5a1f" class="ju jv hi ih b ii ij im in iq jw iu jx iy jy jc jz ka kb kc bi translated"><code class="du jd je jf jg b">setScoreBoard()</code> setter方法，它将记分板结果初始化为0。</li><li id="8cf6" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated">当用户成功避开一个障碍时，就会调用<code class="du jd je jf jg b">setScore()</code> setter方法，每次分数都会增加100。</li></ul><p id="f878" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">钻石表情符号(HTML代码<code class="du jd je jf jg b">&amp;#128142;</code>)与<code class="du jd je jf jg b">&lt;span&gt;</code>标签一起显示，谷歌字体“按下开始2P”用于显示比分，这给游戏带来了街机的外观。</p><figure class="jj jk jl jm fd jn er es paragraph-image"><div class="er es km"><img src="../Images/da4de9891127c4f3b51cfb681305de0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:506/0*avbXhIYlqIWVBWPz"/></div><figcaption class="jq jr et er es js jt bd b be z dx">Scoreboard</figcaption></figure><figure class="jj jk jl jm fd jn"><div class="bz dy l di"><div class="ki kj l"/></div></figure><p id="1876" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第八步:把所有的东西放在一起</p><p id="128b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">初始化游戏</strong>:</p><ul class=""><li id="d481" class="ju jv hi ih b ii ij im in iq jw iu jx iy jy jc jz ka kb kc bi translated">当HTML文档完全加载时，调用<code class="du jd je jf jg b">initGame()</code>方法。它呈现用户第一次遇到的开始屏幕。它显示游戏的标题，并监听空格键事件来启动游戏。它还检查游戏重置条件，并相应地显示结果。</li><li id="4ba6" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated">玩家分数设置为0，并且<code class="du jd je jf jg b">scoreboard</code>和<code class="du jd je jf jg b">speechBubble</code>显示设置为隐藏。</li><li id="77a7" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated">当<code class="du jd je jf jg b">gameStatus.getResetGame</code>为<code class="du jd je jf jg b">true</code>时，游戏被重新加载，该动作通过重新加载游戏正在执行的当前浏览器窗口来执行。因此，所有变量和常量值都会自动重置。</li></ul><figure class="jj jk jl jm fd jn"><div class="bz dy l di"><div class="ki kj l"/></div></figure><p id="ef00" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">开始游戏</strong>:</p><ul class=""><li id="3c02" class="ju jv hi ih b ii ij im in iq jw iu jx iy jy jc jz ka kb kc bi translated"><code class="du jd je jf jg b">startGame()</code>方法执行<code class="du jd je jf jg b">Speech()</code>方法，启动Web Speech API，<code class="du jd je jf jg b">dinoRun()</code>方法被调用初始化游戏中的玩家角色，<code class="du jd je jf jg b">groundMove()</code>方法被调用渲染游戏背景。</li><li id="e53e" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated">调用<code class="du jd je jf jg b">quizQuestionAnswer</code>对象的setter方法<code class="du jd je jf jg b">setQuestion()</code>，该方法将一个问题对象作为参数来初始化测验的问题，<code class="du jd je jf jg b">scoreboard</code>显示在这里被设置为可见。</li></ul><figure class="jj jk jl jm fd jn"><div class="bz dy l di"><div class="ki kj l"/></div></figure><p id="da84" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">游戏结束</strong>:</p><ul class=""><li id="082b" class="ju jv hi ih b ii ij im in iq jw iu jx iy jy jc jz ka kb kc bi translated">当<code class="du jd je jf jg b">gameStatus</code>对象的<code class="du jd je jf jg b"><em class="jh">gameReset</em></code> <em class="jh"> </em>属性为<code class="du jd je jf jg b">false</code>时，即当玩家与障碍物发生碰撞时，执行<code class="du jd je jf jg b">gameOver()</code>方法。</li><li id="614e" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated">它显示相应问题的正确答案，并调度reload事件。</li></ul><figure class="jj jk jl jm fd jn"><div class="bz dy l di"><div class="ki kj l"/></div></figure><p id="3ceb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">重装游戏</strong>:</p><ul class=""><li id="1db5" class="ju jv hi ih b ii ij im in iq jw iu jx iy jy jc jz ka kb kc bi translated"><code class="du jd je jf jg b">gameReloadEvent</code>是由<code class="du jd je jf jg b">gameOver()</code>方法触发的自定义事件监听器；它将<code class="du jd je jf jg b">gameOver</code>和<code class="du jd je jf jg b">gameReset</code>标志分别设置为<code class="du jd je jf jg b">false</code>和<code class="du jd je jf jg b">true</code>，并调用<code class="du jd je jf jg b">initGame()</code>方法。</li></ul><figure class="jj jk jl jm fd jn"><div class="bz dy l di"><div class="ki kj l"/></div></figure><p id="61ff" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">恭喜你！你成功了。我希望你今天玩得开心并且学到了新的东西。我们已经编码出了出路，是时候开始游戏了。到目前为止，您一定已经创建了三个文件，即</p><ol class=""><li id="28fd" class="ju jv hi ih b ii ij im in iq jw iu jx iy jy jc kk ka kb kc bi translated">HTML文件</li><li id="2c2e" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc kk ka kb kc bi translated">CSS样式表</li><li id="e876" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc kk ka kb kc bi translated">JavaScript文件oceanhero.today</li></ol><p id="99db" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在执行HTML文件之前，我们必须设置一个本地服务器。对于我们的目的来说，最简单的方法之一是使用Python的<code class="du jd je jf jg b"><em class="jh">SimpleHTTPServer</em></code>或<code class="du jd je jf jg b"><em class="jh">http.server</em></code>，这取决于所安装的Python版本。如果你不知道我在说什么，请点击下面的链接-</p><p id="12bf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae kn" href="https://developer.mozilla.org/en-US/docs/Learn/Common_questions/set_up_a_local_testing_server" rel="noopener ugc nofollow" target="_blank"> MDN网络文档文章</a></p><p id="9819" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">启动恐龙测验</strong>:</p><ul class=""><li id="a935" class="ju jv hi ih b ii ij im in iq jw iu jx iy jy jc jz ka kb kc bi translated">打开命令提示符，使用<code class="du jd je jf jg b"><em class="jh">cd</em></code> <em class="jh"> </em>命令将当前目录路径更改为您存储Dino <em class="jh"> </em>智力竞赛<em class="jh"> </em>游戏文件的路径。</li><li id="2842" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated">在下面的终端上键入命令，启动本地服务器</li></ul><pre class="jj jk jl jm fd ko jg kp kq aw kr bi"><span id="99c9" class="ks kt hi jg b fi ku kv l kw kx"># If Python version returned above is 3.X</span><span id="1abc" class="ks kt hi jg b fi ky kv l kw kx">python3 -m http.server</span><span id="7224" class="ks kt hi jg b fi ky kv l kw kx"># On windows, try "python" instead of "python3", or "py -3"</span><span id="b4f9" class="ks kt hi jg b fi ky kv l kw kx"># If Python version returned above is 2.X</span><span id="2b70" class="ks kt hi jg b fi ky kv l kw kx">python -m SimpleHTTPServer</span></pre><ul class=""><li id="808a" class="ju jv hi ih b ii ij im in iq jw iu jx iy jy jc jz ka kb kc bi translated">要访问本地服务器，您需要访问<code class="du jd je jf jg b"><a class="ae kn" href="http://localhost:8000/." rel="noopener ugc nofollow" target="_blank">http://localhost:8000/</a></code>，端口<code class="du jd je jf jg b">8000</code>是默认的。</li><li id="88fd" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated">游戏将启动，或者您将在web浏览器中看到一个目录列表，打开您为游戏启动创建的HTML文件。</li></ul><p id="70cf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">演示</strong>:</p><ul class=""><li id="a960" class="ju jv hi ih b ii ij im in iq jw iu jx iy jy jc jz ka kb kc bi translated">你可能会在下面的视频中看到延迟，这是由于屏幕录制软件，在实际中没有遇到这样的延迟问题。</li></ul><figure class="jj jk jl jm fd jn"><div class="bz dy l di"><div class="kz kj l"/></div></figure><p id="0e9a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">资源</strong>:</p><ul class=""><li id="191b" class="ju jv hi ih b ii ij im in iq jw iu jx iy jy jc jz ka kb kc bi translated">项目中使用的图像可以在Chromium开源项目中获得。下面给出链接- <br/> <a class="ae kn" href="https://source.chromium.org/chromium/chromium/src/+/master:components/neterror/resources/images/default_200_percent/offline/200-offline-sprite.png" rel="noopener ugc nofollow" target="_blank">离线-图片</a></li></ul></div></div>    
</body>
</html>