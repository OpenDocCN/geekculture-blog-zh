<html>
<head>
<title>Creating An Immersive Scrolling Game Background! (Part 2)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建一个身临其境的滚动游戏背景！(第二部分)</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/creating-an-immersive-scrolling-game-background-part-2-4652d8889553?source=collection_archive---------51-----------------------#2021-07-27">https://medium.com/geekculture/creating-an-immersive-scrolling-game-background-part-2-4652d8889553?source=collection_archive---------51-----------------------#2021-07-27</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="40af" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">继<a class="ae ix" href="https://vintay.medium.com/creating-an-immersive-scrolling-game-background-part-1-4917c5b09c03" rel="noopener">第1部分</a>之后，我将升级系统，使所有那些挑剔的数字计算几乎自动化，并删除明显的重复模式！</h2></div><p id="4bd8" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">如果你还没看过《T2》第一部，那就先去看看吧。</p><p id="21e8" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated"><strong class="ja hj">今天的目标:</strong>升级滚动后台脚本，自动完成大部分数字计算，而不是手动完成。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div class="er es ju"><img src="../Images/0aa04fee23e59c7cec1780c07885a104.png" data-original-src="https://miro.medium.com/v2/resize:fit:966/1*j0xFnL84OQTAGN6xrMfOlw.gif"/></div></figure><p id="1aac" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">实际效果会保持不变，但是这次升级后让它看起来正确会容易很多。</p></div><div class="ab cl kc kd gp ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hb hc hd he hf"><h2 id="d952" class="kj kk hi bd kl km kn ko kp kq kr ks kt jh ku kv kw jl kx ky kz jp la lb lc ld bi translated">我将ForEach循环转移到单独的函数中:</h2><figure class="jv jw jx jy fd jz er es paragraph-image"><div class="er es le"><img src="../Images/352bdc7516324b272f0f8e8ea954411a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1306/format:webp/1*54ubZPnZO4uPpe6XD7ALkQ.png"/></div></figure></div><div class="ab cl kc kd gp ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hb hc hd he hf"><h1 id="4122" class="lf kk hi bd kl lg lh li kp lj lk ll kt io lm ip kw ir ln is kz iu lo iv lc lp bi translated">现在开始改进:</h1><h2 id="e832" class="kj kk hi bd kl km kn ko kp kq kr ks kt jh ku kv kw jl kx ky kz jp la lb lc ld bi translated"><strong class="ak">变量</strong>(这些将很快详细解释):</h2><figure class="jv jw jx jy fd jz er es paragraph-image"><div class="er es lq"><img src="../Images/36f6a0e1a9e3c405d13e47d72c0a3b1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:860/format:webp/1*U7ItALf0NQmhciXAmFuylg.png"/></div><figcaption class="lr ls et er es lt lu bd b be z dx">Make private and rename the Image Height variables</figcaption></figure><figure class="jv jw jx jy fd jz er es paragraph-image"><div class="er es lv"><img src="../Images/f08e71d3e5000134c63a4a782d133a12.png" data-original-src="https://miro.medium.com/v2/resize:fit:990/format:webp/1*k0livRyUciz8ApONANLB-w.png"/></div><figcaption class="lr ls et er es lt lu bd b be z dx">Add new Sprite Renderer variables for size</figcaption></figure><figure class="jv jw jx jy fd jz er es paragraph-image"><div class="er es lw"><img src="../Images/343b1e4812aefba086a04465ddfbee53.png" data-original-src="https://miro.medium.com/v2/resize:fit:958/format:webp/1*8x00zPqADjsw_rEIaBtaiA.png"/></div><figcaption class="lr ls et er es lt lu bd b be z dx">Add new Int variables for number of copies (“Range” attribute optional)</figcaption></figure><figure class="jv jw jx jy fd jz er es paragraph-image"><div class="er es lx"><img src="../Images/33335efa13cba0409d7f2247f8e4a4fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:898/format:webp/1*q2XFMgj14RFd7pvuWzXSrw.png"/></div><figcaption class="lr ls et er es lt lu bd b be z dx">Add new Transform variables for base Transform</figcaption></figure><figure class="jv jw jx jy fd jz er es paragraph-image"><div class="er es lv"><img src="../Images/dcb9002f1903dbe116ca26c211d9f7e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:990/format:webp/1*wquZb8e5Rj3TrMYADJAjFg.png"/></div><figcaption class="lr ls et er es lt lu bd b be z dx">Remove [SerializeField] attribute from the existing Lists and initialize them since they’re private now</figcaption></figure><figure class="jv jw jx jy fd jz er es paragraph-image"><div class="er es ly"><img src="../Images/5d8d629883cf98d0ba3fe84bd610f800.png" data-original-src="https://miro.medium.com/v2/resize:fit:1056/format:webp/1*Mmx2C-v3aowel1K3XjWU_w.png"/></div><figcaption class="lr ls et er es lt lu bd b be z dx">Add new Float variables for random X axis range (“Range” attribute optional)</figcaption></figure></div><div class="ab cl kc kd gp ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hb hc hd he hf"><h2 id="1db0" class="kj kk hi bd kl km kn ko kp kq kr ks kt jh ku kv kw jl kx ky kz jp la lb lc ld bi translated"><strong class="ak">功能:</strong></h2><p id="ed1a" class="pw-post-body-paragraph iy iz hi ja b jb lz ij jd je ma im jg jh mb jj jk jl mc jn jo jp md jr js jt hb bi translated">创建一个名为<strong class="ja hj"> <em class="me">的新函数InitializeForegroundLayerDuplicates</em></strong>。在此功能中，我们希望:</p><ol class=""><li id="ed42" class="mf mg hi ja b jb jc je jf jh mh jl mi jp mj jt mk ml mm mn bi translated">将“<strong class="ja hj"><em class="me">_ fgOriginalTransform</em></strong>”添加到私有<strong class="ja hj">列表&lt;转换&gt;</strong>“<strong class="ja hj"><em class="me">_ fg transforms</em></strong>”，</li><li id="4ffa" class="mf mg hi ja b jb mo je mp jh mq jl mr jp ms jt mk ml mm mn bi translated">使用<strong class="ja hj"><em class="me">_ fgXRandomRange</em></strong>和<strong class="ja hj"><em class="me">_ fgImageHeight</em></strong>变量，为我们的<strong class="ja hj"><em class="me">_ fgOriginalTransform</em></strong>副本定义一个起始位置。</li><li id="96f4" class="mf mg hi ja b jb mo je mp jh mq jl mr jp ms jt mk ml mm mn bi translated">从<strong class="ja hj">0-&gt;(<em class="me">_ fgVerticalCopies</em>-1)</strong>创建一个For循环，在上面定义的起始位置实例化<strong class="ja hj"><em class="me">_ fgOriginalTransform</em></strong>的副本。</li><li id="c0a1" class="mf mg hi ja b jb mo je mp jh mq jl mr jp ms jt mk ml mm mn bi translated">并且，更新起始位置，为下一次复制做好准备。</li></ol><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="er es mt"><img src="../Images/016071b52641406064e53f859e572922.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8Am2uINN8QMAoIE41qOoSA.png"/></div></div><figcaption class="lr ls et er es lt lu bd b be z dx">Duplicate this function and rename variables to create the same function for the background layer</figcaption></figure></div><div class="ab cl kc kd gp ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hb hc hd he hf"><h2 id="c20e" class="kj kk hi bd kl km kn ko kp kq kr ks kt jh ku kv kw jl kx ky kz jp la lb lc ld bi translated">在<strong class="ak">和<em class="my">都更新了吗？？？？</em>ground layer()</strong>功能:</h2><p id="bb1f" class="pw-post-body-paragraph iy iz hi ja b jb lz ij jd je ma im jg jh mb jj jk jl mc jn jo jp md jr js jt hb bi translated">确保切换到<strong class="ja hj"> <em class="me"> _？？LowerLimit </em> </strong>【变量到】<strong class="ja hj"> <em class="me"> -_？？ImageHeight </em> </strong>”。</p><p id="51af" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">也让<strong class="ja hj"> X </strong>值重新定位时定义为随机值，就像“<strong class="ja hj"> <em class="me"> _？？CopyPosition </em> </strong>"为其X值。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div class="er es mz"><img src="../Images/a390f9c55587865057734d6bce25f2dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1382/format:webp/1*YfIm9oRLN5jmipDzKp5ZbQ.png"/></div><figcaption class="lr ls et er es lt lu bd b be z dx">The <strong class="bd kl">Camera.main.orthographicSize</strong> calculation obviously only works if your camera is orthographic. If not, you’ll have to find another solution</figcaption></figure><h2 id="059f" class="kj kk hi bd kl km kn ko kp kq kr ks kt jh ku kv kw jl kx ky kz jp la lb lc ld bi translated">现在创建一个新的唤醒功能:</h2><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="er es na"><img src="../Images/6aaa55aac1a772ce8259e90c6949f77e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d4FRBLQ6sEYuq5UkWjmskQ.png"/></div></div></figure></div><div class="ab cl kc kd gp ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hb hc hd he hf"><h2 id="cd39" class="kj kk hi bd kl km kn ko kp kq kr ks kt jh ku kv kw jl kx ky kz jp la lb lc ld bi translated">然后在Unity编辑器中:</h2><figure class="jv jw jx jy fd jz er es paragraph-image"><div class="er es nb"><img src="../Images/9d838851f7d78b8e9e693079b7106427.png" data-original-src="https://miro.medium.com/v2/resize:fit:352/1*yaAWVkI-I90jGfWdJXfBag.gif"/></div><figcaption class="lr ls et er es lt lu bd b be z dx">Delete all “Scroll Layers” except 1 for both Foreground and Background</figcaption></figure><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="er es nc"><img src="../Images/eb6ea0613a857ae93d5d1e2417d5002e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*xeQbc_9mssNET6xS5YreDg.gif"/></div></div><figcaption class="lr ls et er es lt lu bd b be z dx">Position the Scrolling Layer for both Foreground and Background right at the bottom of the Camera view</figcaption></figure><p id="1b34" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">现在，使用在删除除了1层之外的所有层之前你拥有的滚动层的数量，决定你需要多少层来完全垂直填充相机加上至少1层。</p><p id="1244" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">对于我的前景，我使用了一个大的图像，所以它是<strong class="ja hj"> 1填充加1额外的</strong>。我的背景是<strong class="ja hj"> 3补加1额外</strong>。</p><p id="a7c4" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">在<strong class="ja hj">滚动背景</strong>组件上，设置<strong class="ja hj"> <em class="me"> _？？</em> </strong>变量到<strong class="ja hj">这个数减1 </strong>。列表中已经有了原始的，所以我们只需要生成副本(<em class="me"> total required -1 </em>)。</p><p id="46d4" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">现在设置参考。</p><p id="69ca" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">单个<strong class="ja hj">滚动层</strong>到<strong class="ja hj"> <em class="me">原始变换</em> </strong>变量，以及<strong class="ja hj">精灵渲染器</strong>到<strong class="ja hj"> <em class="me">图像尺寸引用</em> </strong>变量。如果你在<strong class="ja hj">滚动层</strong>对象下有多个精灵游戏对象，这没问题。<strong class="ja hj">只要确保它们都是相同的尺寸</strong>，因为引用的渲染器的尺寸用于所有的重新定位计算。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div class="er es nd"><img src="../Images/4dc273209a8ec0e5444c33fabc25cd61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1246/format:webp/1*9SOYnOF7Zm9O39fa2LudBA.png"/></div></figure><p id="1362" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated"><strong class="ja hj"> <em class="me"> X随机范围</em> </strong>变量是<strong class="ja hj">重新定位后的<strong class="ja hj">滚动层</strong>可以放置到零左右多远。通过添加一个随机的水平偏移，你可以避免背景中重复的图案，这些图案很容易被玩家注意到。</strong></p></div><div class="ab cl kc kd gp ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hb hc hd he hf"><h2 id="3375" class="kj kk hi bd kl km kn ko kp kq kr ks kt jh ku kv kw jl kx ky kz jp la lb lc ld bi translated">全部完成！</h2><figure class="jv jw jx jy fd jz er es paragraph-image"><div class="er es ne"><img src="../Images/4c530de87c0e354a9050c0c70f992fda.png" data-original-src="https://miro.medium.com/v2/resize:fit:458/1*FHIscdOLXUNLxla-CJp7cA.gif"/></div><figcaption class="lr ls et er es lt lu bd b be z dx">When the game starts, the single Scroll Layer is duplicated however many times you specified, and moved up each time</figcaption></figure><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="er es nf"><img src="../Images/25f6cafe876262c83c1dd0a4bafd7dd3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*gYUdWzx_8-hN2YFPeozQ2A.gif"/></div></div><figcaption class="lr ls et er es lt lu bd b be z dx">The foreground has 1 additional layer created, covering the screen, with 1 extra layer for buffer, and each layer given a random X offset to avoid patterns</figcaption></figure><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="er es ng"><img src="../Images/661c6a88b5bdfff7c84c3b9f16d6aaf4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*QPseQbpslrbqiXcCqH1KKw.gif"/></div></div><figcaption class="lr ls et er es lt lu bd b be z dx">The background has 3 additional layers created, covering the screen, with 1 extra layer for buffer, and each layer given a random X offset to avoid patterns</figcaption></figure><p id="190b" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">您可以在右侧看到，两层都没有明显的图案或重复的星形位置。玩家会欣赏这一点。</p></div><div class="ab cl kc kd gp ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hb hc hd he hf"><p id="e9c6" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">我希望这有助于你创造一个更好的滚动效果！暂时就这样吧！</p><p id="17c1" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">如果你还没有阅读<a class="ae ix" href="https://vintay.medium.com/creating-an-immersive-scrolling-game-background-part-2-4652d8889553" rel="noopener">第一部分</a>，你可能应该去做，否则这可能会令人困惑。</p></div></div>    
</body>
</html>