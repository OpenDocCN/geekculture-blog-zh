<html>
<head>
<title>Neovim configuration for beginners — Part two</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Neovim初学者配置—第二部分</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/neovim-configuration-for-beginners-part-two-fb3834da91b8?source=collection_archive---------7-----------------------#2021-07-09">https://medium.com/geekculture/neovim-configuration-for-beginners-part-two-fb3834da91b8?source=collection_archive---------7-----------------------#2021-07-09</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/d40063ad10af91319fa822e759acc1d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NuU8UM-JJhvYDTd3-WDFDQ.png"/></div></div></figure><p id="bdee" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">插件让已经很棒的编辑器变得更棒。根据您的需要，vim有许多可用的插件，这有助于提高您的生产率。</p><p id="c81a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这将是我上一篇文章的延续。如果你还没有检查过，就去那里，它会值得你花时间。</p><div class="jo jp ez fb jq jr"><a rel="noopener follow" target="_blank" href="/geekculture/neovim-configuration-for-beginners-b2116dbbde84"><div class="js ab dw"><div class="jt ab ju cl cj jv"><h2 class="bd hj fi z dy jw ea eb jx ed ef hh bi translated">面向初学者的Neovim配置</h2><div class="jy l"><h3 class="bd b fi z dy jw ea eb jx ed ef dx translated">如果您可能认为vim是一个旧的、过时的文本编辑器，具有很高的学习曲线和有限的…</h3></div><div class="jz l"><p class="bd b fp z dy jw ea eb jx ed ef dx translated">medium.com</p></div></div><div class="ka l"><div class="kb l kc kd ke ka kf io jr"/></div></div></a></div><p id="b7fb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为了方便使用，我们将配置一些在早期文章中讨论过的插件。</p><p id="f0af" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">绝对每个人都在他们的代码中写注释，NerdCommenter是一个流行的注释插件。我为NerdCommenter使用的配置是</p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="1d8b" class="kp kq hi kl b fi kr ks l kt ku">“ Create default mappings<br/>let g:NERDCreateDefaultMappings = 1</span><span id="148a" class="kp kq hi kl b fi kv ks l kt ku">“ Add spaces after comment delimiters by default<br/>let g:NERDSpaceDelims = 1</span><span id="cbc1" class="kp kq hi kl b fi kv ks l kt ku">“ Use compact syntax for prettified multi-line comments<br/>let g:NERDCompactSexyComs = 1</span><span id="28bc" class="kp kq hi kl b fi kv ks l kt ku">“ Align line-wise comment delimiters flush left instead of following code indentation<br/>let g:NERDDefaultAlign = ‘left’</span><span id="d908" class="kp kq hi kl b fi kv ks l kt ku">“ Set a language to use its alternate delimiters by default<br/>let g:NERDAltDelims_java = 1</span><span id="4d89" class="kp kq hi kl b fi kv ks l kt ku">“ Add your own custom formats or override the defaults<br/>let g:NERDCustomDelimiters = { ‘c’: { ‘left’: ‘/**’,’right’: ‘*/’ }}</span><span id="e136" class="kp kq hi kl b fi kv ks l kt ku">“ Allow commenting and inverting empty lines (useful when commenting a region)<br/>let g:NERDCommentEmptyLines = 1</span><span id="94e9" class="kp kq hi kl b fi kv ks l kt ku">“ Enable trimming of trailing whitespace when uncommenting<br/>let g:NERDTrimTrailingWhitespace = 1</span><span id="263c" class="kp kq hi kl b fi kv ks l kt ku">“ Enable NERDCommenterToggle to check all selected lines is commented or not <br/>let g:NERDToggleCheckAllLines = 1</span><span id="10d0" class="kp kq hi kl b fi kv ks l kt ku">“ for motions<br/>nnoremap &lt;silent&gt; &lt;leader&gt;c} V}:call NERDComment(‘x’, ‘toggle’)&lt;CR&gt;<br/>nnoremap &lt;silent&gt; &lt;leader&gt;c{ V{:call NERDComment(‘x’, ‘toggle’)&lt;CR&gt;</span></pre><p id="b497" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">NerdCommenter最有用的默认键绑定是<em class="kw">&lt;leader&gt;&lt;c-space&gt;</em>，它根据第一个选中的行切换注释。</p></div><div class="ab cl kx ky gp kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="hb hc hd he hf"><p id="8419" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">另一个伟大的插件是<em class="kw"> vim-startify </em>，这是一个可定制的vim开始屏幕。即使它有MRU列表(最近使用)，添加自定义书签有时是有用的。您可以轻松地将它们添加为</p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="f96f" class="kp kq hi kl b fi kr ks l kt ku">let g:startify_bookmarks = ['~/.bashrc','~/Documents/']</span></pre><p id="d70a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">而startify屏幕中的任何文件/目录都可以通过输入相应的数字轻松打开。</p></div><div class="ab cl kx ky gp kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="hb hc hd he hf"><p id="064c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在让我们定义代码片段的目录(UltSnips是代码片段引擎)，</p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="5b74" class="kp kq hi kl b fi kr ks l kt ku">let g:UltiSnipsSnippetDirectories=[$HOME.’/.config/nvim/UltiSnips’]</span></pre><p id="405e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">特定语言的代码片段可以放在这里，例如cpp(C++)</p><p id="cf37" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">将文件保存为cpp。文件的片段和内容应采用以下格式</p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="58d7" class="kp kq hi kl b fi kr ks l kt ku">snippet inc "snippet name"<br/>#include &lt;iostream&gt;<br/>$1<br/>endsnippet</span></pre></div><div class="ab cl kx ky gp kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="hb hc hd he hf"><p id="17b3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在让我们转到完成引擎Coc。Coc本身没有任何用处，我们应该对它进行扩展。</p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="7799" class="kp kq hi kl b fi kr ks l kt ku">let g:coc_global_extensions = [<br/>             \ 'coc-pairs',<br/>             \ 'coc-snippets',<br/>             \ 'coc-html',<br/>             \ 'coc-tsserver',<br/>             \ 'coc-css',<br/>             \ 'coc-clangd',<br/>             \ 'coc-json',<br/>             \ 'coc-pyright',<br/>             \ 'coc-sh',<br/>             \ 'coc-flutter',<br/>             \ ]</span></pre><p id="fc24" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后你应该运行命令<em class="kw">:co install</em>来安装这些扩展。</p><p id="e7cd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要实现类似于VSCode的制表符结束，</p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="da1d" class="kp kq hi kl b fi kr ks l kt ku">set signcolumn=yes<br/>inoremap &lt;silent&gt;&lt;expr&gt; &lt;TAB&gt;<br/>   \ pumvisible() ? coc#_select_confirm() :<br/>   \ coc#expandableOrJumpable() ?<br/>   \ "\&lt;C-r&gt;=coc#rpc#request('doKeymap', ['snippets-expand-jump',''])\&lt;CR&gt;" :<br/>   \ &lt;SID&gt;check_back_space() ? "\&lt;TAB&gt;" :<br/>   \ coc#refresh()</span><span id="3ee8" class="kp kq hi kl b fi kv ks l kt ku">function! s:check_back_space() abort<br/>   let col = col('.') - 1<br/>   return !col || getline('.')[col - 1]  =~# '\s'<br/> endfunction</span><span id="8354" class="kp kq hi kl b fi kv ks l kt ku">let g:coc_snippet_next = '&lt;tab&gt;'</span></pre></div><div class="ab cl kx ky gp kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="hb hc hd he hf"><p id="b32a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们的代码中可能会有一些不需要的尾随空格。为什么我们要费心手动删除它，而vim可以照顾它。为了删除尾随空格，创建一个函数，</p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="558a" class="kp kq hi kl b fi kr ks l kt ku">function TrimWhitespace()<br/> let l = line(“.”)<br/> let c = col(“.”)<br/> %s/\s\+$//e<br/> call cursor(l, c)<br/>endfun</span></pre><p id="49c7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您可以通过auto命令运行这个函数，或者只绑定到一个键，比如F5。只需使用其中一种方法即可。</p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="ef83" class="kp kq hi kl b fi kr ks l kt ku">autocmd BufWritePre * :call TrimWhitespace()<br/>nnoremap &lt;F5&gt; :call TrimWhitespace()&lt;CR&gt;</span></pre></div><div class="ab cl kx ky gp kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="hb hc hd he hf"><p id="6138" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在还有一件事，一些vim用户喜欢做，即重新映射退出键，特别是大写锁定。但是在vim本身中没有完全直接的方法来做到这一点。有变通办法，但都是全球性的变化。</p><p id="21ae" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在windows中，你可以使用<em class="kw">自动热键</em>，在mac中你可以在<em class="kw"> iTerm </em>中更改它，但是在Linux中，这就有点难了。如果您使用Xorg作为显示服务器，有一种方法可以使用<em class="kw"> setxkbmap。</em></p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="e61c" class="kp kq hi kl b fi kr ks l kt ku">setxkbmap -option caps:swapescape</span></pre><p id="d245" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这在Escape和CapsLock键之间切换。要清除所有已做的更改</p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="01cf" class="kp kq hi kl b fi kr ks l kt ku">setxkbmap -option </span></pre><p id="ca79" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">所以创建一个bash函数，比如</p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="f98b" class="kp kq hi kl b fi kr ks l kt ku">nv(){<br/> setxkbmap -option caps:swapescape &amp;&amp; nvim $* &amp;&amp; setxkbmap -option</span><span id="12f6" class="kp kq hi kl b fi kv ks l kt ku">}</span></pre><p id="619e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">会成功的。但是请记住，只要vim是开放的，这种改变就将是有效的。但就我个人而言，我不喜欢将其重新映射到任何其他键。这是个人喜好。</p><p id="7095" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">到目前为止，您已经有了足够好的设置，可以开始使用vim了。但这取决于他们想如何使用它。每个人都有自己的喜好。在vim中，几乎所有的事情都可以用这样或那样的方式来完成，所以按照您喜欢的方式来配置它。</p></div></div>    
</body>
</html>