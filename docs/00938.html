<html>
<head>
<title>Consuming External APIs in a Simple and Organized Way</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">以简单和有组织的方式使用外部API</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/consuming-external-apis-in-a-simple-and-organized-way-804a9063cbec?source=collection_archive---------11-----------------------#2021-03-20">https://medium.com/geekculture/consuming-external-apis-in-a-simple-and-organized-way-804a9063cbec?source=collection_archive---------11-----------------------#2021-03-20</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="1f86" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">使用存储在数据库中的JSON文件、Yaml、数组或序列化来消费外部API</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/f6510255c44892993e192932a7fe1e0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jY41Q-aFsyBeGk2UaSrj3A.png"/></div></div></figure><p id="cf73" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">我最近开发了一个抽象来组织、促进维护和主要标准化外部API的消费。</p><p id="8d62" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">我还没有完成文档，如果你想做贡献，只需在资源库中发送一个PR。我在这篇文章中的目标是向您展示如何标准化外部API的使用，从而促进代码的使用、记录和维护。</p><p id="3cdd" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">无论是对于微服务架构还是使用支付方式，两台或多台服务器之间的通信都是不可避免的。今天，一个应用程序几乎不可能不与另一个应用程序通信来交换消息，我会说这是为了彼此的贡献。</p><p id="366a" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">然而，这可能会有副作用，例如，尽管我们有几个便于使用cURL的抽象，但是您仍然可以用非标准的和难以维护的请求来扩充您的应用程序。</p><p id="63e5" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">我开发的抽象(下面的链接)，是用PHP完成的(我强烈推荐PHP 8.0+)，但是这个概念可以应用于任何语言。</p><p id="eb4d" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><a class="ae kf" href="https://github.com/diegospm/http-provider" rel="noopener ugc nofollow" target="_blank">https://github.com/diegospm/http-provider</a></p><p id="bf00" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">其概念是，您存储将在一个数据结构中使用的所有API的范围。在PHP的情况下，您可以使用包含数组的配置文件，在所有情况下，您都可以使用JSON、Yaml文件或将配置存储在数据库中，序列化内容。</p><p id="b57d" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">以支付服务为例，这里演示了API的作用域:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="kg kh l"/></div></figure><p id="9d96" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">现在我们将实例化抽象，提供我们想要使用的API配置:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="kg kh l"/></div></figure><p id="aecb" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">我们现在有了新的支付方式，所以我们只需要创建一个新文件来配置新API的范围:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="kg kh l"/></div></figure><p id="6635" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">然后，要使用Stripe，只需在抽象配置方法中更改文件名。显然你会把它抽象成对象方法。</p><p id="55e4" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">为了这篇文章不会太长，我将它分成两部分。在第二部分中，我将解释如何使用composer安装抽象，如何使用不同的HTTP客户端和不同的响应对象(例如，XML)。</p><p id="6e26" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">此外，我将简要说明我如何使用固体和两个模式来建立它。</p><p id="2413" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">我希望你喜欢它，如果你想贡献；再次，发个PR；)</p></div></div>    
</body>
</html>