<html>
<head>
<title>Improve your shopping decisions using SerpAPI — Part 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用SerpAPI改善您的购物决策—第2部分</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/python-mining-reviews-964809cb5ad3?source=collection_archive---------15-----------------------#2022-09-15">https://medium.com/geekculture/python-mining-reviews-964809cb5ad3?source=collection_archive---------15-----------------------#2022-09-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="d382" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">使用Python、SerpAPI和Google Shopping获得强大的购物洞察力</h2></div><p id="cd0f" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">免责声明:我没有试图在这里推广/销售任何产品。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es jt"><img src="../Images/a46a792de191729b56b74cdca9a01512.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pmaUzgxYHa7Jc2eg62ooEA.jpeg"/></div></div><figcaption class="kf kg et er es kh ki bd b be z dx">Image by <a class="ae kj" href="https://www.vecteezy.com/members/eman-hamden836574" rel="noopener ugc nofollow" target="_blank">Eman Hamden</a> on <a class="ae kj" href="https://www.vecteezy.com/members/eman-hamden836574" rel="noopener ugc nofollow" target="_blank">Vecteezy</a></figcaption></figure><h1 id="2c71" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">介绍</h1><p id="3611" class="pw-post-body-paragraph ix iy hi iz b ja lc ij jc jd ld im jf jg le ji jj jk lf jm jn jo lg jq jr js hb bi translated">这是前一篇文章的延续，前一篇文章讲述了使用SerpAPI从Google购物结果中收集数据，解析数据并将其存储在DataFrame中。点击了解更多<a class="ae kj" href="https://mg-subha.medium.com/how-to-find-the-perfect-gift-the-nerdy-way-938dd8390cc2" rel="noopener">。无论是送给心爱的人的礼物，还是自己在为自己选购的商品，难道你不觉得自己值得拥有最好的吗？这篇文章可以帮助你做出更有效的购物决定，同时获得有价值的见解。</a></p><p id="948e" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这种情况下，我目前正在努力购买<strong class="iz hj">最好的网球鞋</strong>。我想确定我选择的是最好的。</p><p id="6c90" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们收集了前一篇文章中分析所需的所有数据。我们现在拥有的数据是-</p><p id="3ecc" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">购物结果数据- </strong></p><p id="6e32" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">这包括使用SerpAPI从Google、Yahoo、Bing等热门搜索引擎收集的数据。</strong></p><p id="e2c1" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">以下是数据帧“Shopping_Results_Data”中解析和存储的数据的局部视图</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es lh"><img src="../Images/96ade8a253684b66a391702d18ddebc4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1228/format:webp/1*O4kvAi9uiepPPFWGtoz7zA.png"/></div></div></figure><p id="e2f4" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">相关问题- </strong></p><p id="2181" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这包括关于网球鞋的问题。</p><p id="3e57" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">以下是数据框“相关问题”的局部视图</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es li"><img src="../Images/15925960ab2be40a823cd563b81894a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WWYg_LYZcCcW6HecMxbQfw.png"/></div></div></figure><p id="7696" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">内嵌图像数据</strong></p><p id="31a1" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">最后，我有内联图像数据，这些数据链接到实际的产品和相关的产品名称。下面是数据帧“inline_image_data”的局部视图</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es lj"><img src="../Images/553960fbae911b9b27f20bbc9014ae17.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5bpJ_-fHXW0bgFLhq9gg7g.png"/></div></div></figure><h1 id="945e" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">分析</h1><p id="123c" class="pw-post-body-paragraph ix iy hi iz b ja lc ij jc jd ld im jf jg le ji jj jk lf jm jn jo lg jq jr js hb bi translated">让我们开始读“相关问题”中的课文。当文本被削减时，我们使用' max_colwidth '选项来显示完整的文本。</p><pre class="ju jv jw jx fd lk ll lm ln aw lo bi"><span id="3987" class="lp kl hi ll b fi lq lr l ls lt"><strong class="ll hj">pd.set_option(‘display.max_colwidth’, None)<br/>related_questions</strong></span></pre><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es lu"><img src="../Images/16b6cbd6be5f99c4e5fb19fc779582ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jRu0u399CZ0IBao46GRaRg.png"/></div></div></figure><p id="1290" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">看到上面的内容，找出一个人打球的具体场地是有意义的。</p><p id="e7ac" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">接下来说下一个——shopping _ results。</p><h2 id="bebc" class="lp kl hi bd km lv lw lx kq ly lz ma ku jg mb mc kw jk md me ky jo mf mg la mh bi translated">价格最高的10种产品</h2><p id="a139" class="pw-post-body-paragraph ix iy hi iz b ja lc ij jc jd ld im jf jg le ji jj jk lf jm jn jo lg jq jr js hb bi translated">“价格”列是一个对象，因为它旁边有“$”货币符号。因此，需要一个regex替换，然后转换为float。一旦这样做了，就可以从最高到最低的价格获得前10名的产品。</p><pre class="ju jv jw jx fd lk ll lm ln aw lo bi"><span id="91f3" class="lp kl hi ll b fi lq lr l ls lt"><strong class="ll hj">Shopping_Results_Data['price'] = Shopping_Results_Data['price'].replace('[\$,]', '', regex=True).astype(float)</strong></span><span id="da43" class="lp kl hi ll b fi mi lr l ls lt"><strong class="ll hj">Shopping_Results_Data.nlargest(15, 'price', keep='first')</strong></span></pre><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es mj"><img src="../Images/2b8db9fd0e26507d7f8425dae55d0ad4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xjlsl_iObF_b2wIuIpJN8w.png"/></div></div></figure><p id="420c" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">请注意，有多行具有相同的产品链接。这可能是因为SerpAPI从多个搜索引擎(如谷歌、雅虎等)收集结果。让我们去掉重复的，重新得到前15名。</p><pre class="ju jv jw jx fd lk ll lm ln aw lo bi"><span id="d859" class="lp kl hi ll b fi lq lr l ls lt">Shopping_Results_Data = Shopping_Results_Data.drop_duplicates()</span></pre><p id="49d9" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在某种条形图中绘制如此冗长的URL是没有意义的。相反，我们可以使用IPython库(IPython.display)中的HTML模块将链接呈现为可点击的URL。</p><pre class="ju jv jw jx fd lk ll lm ln aw lo bi"><span id="195f" class="lp kl hi ll b fi lq lr l ls lt">from IPython.display import HTML<br/>Top15_by_price = Shopping_Results_Data.nlargest(15, 'price', keep='first')<br/>HTML(Top15_by_price.to_html(render_links=True, escape=False, classes='table table-striped text-center', justify='left'))<br/>Shopping_Results_Data.nlargest(15, 'price', keep='first')</span></pre><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es mk"><img src="../Images/e7b30e748257da79d13ddc2d35ad15f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/format:webp/1*IIFRY5XW61MAj43u3JJpag.png"/></div></div><figcaption class="kf kg et er es kh ki bd b be z dx">Partial View of the DataFrame with clickable URLs</figcaption></figure><p id="fd68" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们快速绘制一个箱线图，看看价格的范围。</p><pre class="ju jv jw jx fd lk ll lm ln aw lo bi"><span id="dc19" class="lp kl hi ll b fi lq lr l ls lt"><strong class="ll hj">fig = plt.figure(figsize =(10, 7))<br/> <br/># Creating plot<br/>plt.boxplot(Top15_by_price['price'])<br/> <br/># show plot<br/>plt.show()</strong></span></pre><figure class="ju jv jw jx fd jy er es paragraph-image"><div class="er es ml"><img src="../Images/16184d6f7cec3d801b04b4e47080d64a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1214/format:webp/1*Y42KPSyusLrM4IBXP-M_vQ.png"/></div><figcaption class="kf kg et er es kh ki bd b be z dx">Box Plot showing the price ranges and median</figcaption></figure><p id="f9ba" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">一双网球鞋平均售价约80美元，有些高达150美元，有些低至60美元。</p><h2 id="1057" class="lp kl hi bd km lv lw lx kq ly lz ma ku jg mb mc kw jk md me ky jo mf mg la mh bi translated">高价商品的评价总是很高吗？</h2><p id="1389" class="pw-post-body-paragraph ix iy hi iz b ja lc ij jc jd ld im jf jg le ji jj jk lf jm jn jo lg jq jr js hb bi translated">这里，我们将使用一个简单的散点图来检查价格和评级之间的相关性。</p><pre class="ju jv jw jx fd lk ll lm ln aw lo bi"><span id="3b6e" class="lp kl hi ll b fi lq lr l ls lt"><strong class="ll hj">import matplotlib.pyplot as plt<br/>plt.scatter(Shopping_Results_Data['rating'].astype(float), Shopping_Results_Data['price'])<br/>plt.show()</strong></span></pre><figure class="ju jv jw jx fd jy er es paragraph-image"><div class="er es mm"><img src="../Images/9dadb72096eafc093bacce17186984c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:932/format:webp/1*3p213MYjO_L-CzGg3ISb5Q.png"/></div><figcaption class="kf kg et er es kh ki bd b be z dx">Scatter Plot</figcaption></figure><p id="c9f9" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们看到这里有一个模式——<strong class="iz hj">高评级的商品确实有更高的价格。</strong></p><h2 id="329b" class="lp kl hi bd km lv lw lx kq ly lz ma ku jg mb mc kw jk md me ky jo mf mg la mh bi translated">产品是如何评级的？</h2><p id="a431" class="pw-post-body-paragraph ix iy hi iz b ja lc ij jc jd ld im jf jg le ji jj jk lf jm jn jo lg jq jr js hb bi translated">让我们看看有多少中等价位的鞋(70-80美元)和高价鞋(100美元)的评分高于4.7分(满分5分)。</p><pre class="ju jv jw jx fd lk ll lm ln aw lo bi"><span id="8fbf" class="lp kl hi ll b fi lq lr l ls lt">query1 = Shopping_Results_Data.query('rating &gt;=4.7 &amp; price &gt; 100')<br/>query1</span></pre><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es mn"><img src="../Images/1cc0e238ba8e87d387788d0dc1fb2a88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nNjvj4THupxyS-WiUKU4YA.png"/></div></div></figure><p id="3ff5" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如上所述，100美元范围内的大多数鞋子都有4.8及以上的评分。其中一些也有很多评论。</p><pre class="ju jv jw jx fd lk ll lm ln aw lo bi"><span id="59bd" class="lp kl hi ll b fi lq lr l ls lt"><strong class="ll hj">query2 = Shopping_Results_Data.query('rating_float &gt;=4.7 &amp; ((price &gt;= 70) and (price &lt;= 80))')<br/>query2</strong></span></pre><p id="11a3" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">没有评级高于4.7的平均价格产品。</p><p id="18cd" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">唯一评分为4.6的平均价格产品似乎是-</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es mo"><img src="../Images/a92f8c5d0775a78bd94e79e231ca17fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hodSSTZgYZWA4s3Q8pDu-A.png"/></div></div></figure><p id="978a" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">我们对不同的产品有多少评论？</strong></p><pre class="ju jv jw jx fd lk ll lm ln aw lo bi"><span id="0a1b" class="lp kl hi ll b fi lq lr l ls lt"><strong class="ll hj">query3 = Shopping_Results_Data.query('reviews&gt;=1000')<br/>query3</strong></span></pre><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es mp"><img src="../Images/d87abbc181681b1d5d564cae94f73cc7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wQf8-YXO2AoqWJ5zRU_AJw.png"/></div></div></figure><p id="3e69" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">上述产品似乎有一吨的评论。</p><h2 id="7b84" class="lp kl hi bd km lv lw lx kq ly lz ma ku jg mb mc kw jk md me ky jo mf mg la mh bi translated">最终购物见解</h2><ul class=""><li id="c1e5" class="mq mr hi iz b ja lc jd ld jg ms jk mt jo mu js mv mw mx my bi translated">寻找价格超过100美元、评分超过4.7分的鞋子。</li><li id="e72f" class="mq mr hi iz b ja mz jd na jg nb jk nc jo nd js mv mw mx my bi translated">这些超过100条评论的产品的链接可以被进一步抓取，以得出更有趣的见解。</li></ul></div></div>    
</body>
</html>