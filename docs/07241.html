<html>
<head>
<title>GCD(Grand Central Dispatch) in Swift</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Swift中的GCD(大中央调度)</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/gcd-grand-central-dispatch-in-swift-923df84e8ca5?source=collection_archive---------9-----------------------#2021-09-13">https://medium.com/geekculture/gcd-grand-central-dispatch-in-swift-923df84e8ca5?source=collection_archive---------9-----------------------#2021-09-13</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/c1ec3904ed80a033293acab1e50da317.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*JnYMxeUE-UZRWBoXGL8dog.jpeg"/></div></figure><p id="f659" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">多任务处理允许我们同时运行几个任务。<strong class="io hj">GCD(Grand Central Dispatch)</strong>是iOS中实现多任务的最简单方式。我们将任务添加到调度队列中，然后在多个线程上同时执行。</p><p id="1707" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">每个iOS应用程序都有一个主线程，用来显示用户界面和监听事件。复杂的计算可能会降低主线程的速度，并冻结应用程序。这就是多线程发挥作用的地方。我们必须将所有繁重的工作转移到后台线程，然后将结果转移回主线程。这描述了与<em class="jk">大中央调度</em>的主要工作模式。</p><p id="7656" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><em class="jk">中央调度</em>提供了一个<em class="jk">基于任务的</em>范例。GCD中没有显式的线程管理，这使得编写代码时无需考虑线程。</p><p id="b112" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">队列</strong></p><p id="7c75" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">如前所述，GCD通过一个名为DispatchQueue的类对<strong class="io hj">调度队列</strong>进行操作。我们向这个队列提交工作单元，GCD将按照先进先出的顺序执行它们，保证第一个提交的任务是第一个开始的任务。</p><p id="6a24" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">调度队列是线程安全的，这意味着我们可以同时从多个线程访问它们。当我们理解分派队列如何为我们自己的代码部分提供线程安全时，GCD的好处就显而易见了。关键是选择正确的<em class="jk">类</em>调度队列和正确的<em class="jk">调度函数</em>向队列提交工作。</p><p id="52a9" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">队列可以是<strong class="io hj">串行</strong>或<strong class="io hj">并发</strong>。</p><p id="65db" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">串行队列</strong></p><p id="9f7d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">串行队列保证在任何给定时间只有一个任务运行。GCD控制执行时间。我们不知道一个任务结束和下一个任务开始之间的时间</p><figure class="jm jn jo jp fd ij er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es jl"><img src="../Images/8e7c50d48bf246954241500c96abf0a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Iwd2zpNKt735nwuA5Pr0kg.png"/></div></div></figure><p id="da6f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">并发队列</strong></p><p id="c314" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">并发队列允许多个任务同时运行。队列保证任务按照我们添加它们的顺序开始。任务可以以任何顺序完成，我们不知道下一个任务开始需要多长时间，也不知道在任何给定时间正在运行的任务的数量。</p><figure class="jm jn jo jp fd ij er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es ju"><img src="../Images/576fa861472edd41c54bed2f24cedd88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TELAd_GecvfbeS-SBihEKA.png"/></div></div></figure><p id="ffb7" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">请注意任务1、任务2和任务3是如何一个接一个地快速开始的。另一方面，任务1在任务0之后过了一段时间才开始。还要注意，虽然任务3在任务2之后开始，但它首先完成。</p><p id="8670" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">何时开始一项任务完全取决于GCD。如果一个任务的执行时间与另一个任务重叠，则由GCD决定它是否应该在不同的内核上运行(如果有内核的话),或者执行上下文切换来运行不同的任务。</p><p id="7807" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">GCD提供了三种主要的队列类型:</p><p id="6641" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">主队列</strong>:运行在主线程上，是一个串行队列。</p><p id="56f5" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">dispatch queue . main . async {</strong></p><p id="fcb2" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">self . view . background color = ui color . red</strong></p><p id="f6c3" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> } </strong></p><p id="532d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">全局队列</strong>:整个系统共享的并发队列。有四种不同优先级的队列:高、默认、低和后台。后台优先级队列具有最低的优先级，在任何I/O活动中都会受到限制，以最大限度地减少对系统的负面影响。</p><p id="c88c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">let global queue = dispatch queue . global()</strong></p><p id="da8a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> globalQueue.async { </strong></p><p id="ca1c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">对于0中的I..&lt; 5 { </strong></p><p id="8b07" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">打印(" \(i)") </strong></p><p id="2f53" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> } </strong></p><p id="82d4" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> } </strong></p><p id="209a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">自定义队列</strong>:您创建的队列，可以是串行的，也可以是并发的。这些队列中的请求实际上会在一个全局队列中结束。</p><p id="0d3a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">let concurrent queue = dispatch queue(标签:“队列名”，属性:。并发)</strong></p><p id="f452" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> concurrentQueue.sync { </strong></p><p id="47ff" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">打印("执行并发队列")</strong></p><p id="34b8" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> } </strong></p><p id="d9ca" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">let serial queue = dispatch queue(标签:“queue name”)</strong></p><p id="1a3c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> serialQueue.sync { </strong></p><p id="9272" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">打印(“执行串行队列”)</strong></p><p id="bfda" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> } </strong></p><p id="901d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">将任务发送到全局并发队列时，不需要直接指定优先级。相反，您可以指定服务质量(QoS)类属性。这表明了任务的重要性，并指导GCD确定分配给任务的优先级。</p><p id="7779" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">服务质量</strong></p><p id="735e" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">有些任务比其他任务更重要，所以我们必须确保它们先被执行。我们可以通过赋予它们优先权来做到这一点。在主/ UI线程上运行的任务总是处于高优先级，因为它们保持应用程序的响应，而在后台线程上运行的任务是最低优先级的。最终，所有的任务都完成了它们的执行，但是优先级决定了哪一个将首先完成。</p><ul class=""><li id="19d1" class="jv jw hi io b ip iq it iu ix jx jb jy jf jz jj ka kb kc kd bi translated"><strong class="io hj">用户交互</strong>:这表示为了提供良好的用户体验，必须立即完成的任务。将其用于需要低延迟的UI更新、事件处理和小型工作负载。在应用程序执行期间，该类中完成的总工作量应该很小。这应该在主线程上运行。</li><li id="cb17" class="jv jw hi io b ip ke it kf ix kg jb kh jf ki jj ka kb kc kd bi translated"><strong class="io hj">用户发起的</strong>:用户从UI发起这些异步任务。当用户等待即时结果和继续用户交互所需的任务时，使用它们。它们在高优先级全局队列中执行。</li><li id="2c7f" class="jv jw hi io b ip ke it kf ix kg jb kh jf ki jj ka kb kc kd bi translated"><strong class="io hj"> Utility </strong>:这代表长时间运行的任务，通常有一个用户可见的进度指示器。将其用于计算、I/O、联网、连续数据馈送和类似任务。本课程旨在节能。这将被映射到低优先级全局队列中。</li><li id="9674" class="jv jw hi io b ip ke it kf ix kg jb kh jf ki jj ka kb kc kd bi translated"><strong class="io hj">背景</strong>:这代表用户没有直接意识到的任务。将其用于预取、维护和其他不需要用户交互且对时间不敏感的任务。这将被映射到后台优先级全局队列中。</li></ul><p id="2c42" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">同步:</strong></p><p id="9a85" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">使用GCD，您可以同步或异步地分派任务。</p><p id="7edf" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">任务完成后，同步函数将控制权返回给调用者。您可以通过调用DispatchQueue.sync(execute:)来同步调度工作单元。</p><p id="0d4e" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> <em class="jk"> func syncWith </em>串行执行<em class="jk"> () { </em> </strong></p><p id="8d58" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">let serial queue = dispatch queue(标签:“queue 1”)</strong></p><p id="bd16" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> serialQueue.sync { </strong></p><p id="99a6" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">对于指数在0..&lt; 5 { </strong></p><p id="e794" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> print("⚪️”，索引)</strong></p><p id="bbff" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> } </strong></p><p id="9750" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> } </strong></p><p id="c404" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> serialQueue.sync { </strong></p><p id="ac52" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">为指数在0..&lt; 5 { </strong></p><p id="ff42" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">打印(“🔷"，索引)</strong></p><p id="bfdb" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> } </strong></p><p id="7a36" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> } </strong></p><p id="f03a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"><em class="jk">}</em>T39】</strong></p><p id="c558" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">输出:</strong></p><p id="d707" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> ⚪️ 0 </strong></p><p id="133f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> ⚪️ 1 </strong></p><p id="7a99" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> ⚪️ 2 </strong></p><p id="4aae" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> ⚪️ 3 </strong></p><p id="eb21" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> ⚪️ 4 </strong></p><p id="808c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">🔷0 </strong></p><p id="c912" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">🔷1 </strong></p><p id="3ca0" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">🔷2 </strong></p><p id="04e4" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">🔷3 </strong></p><p id="456a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">🔷4 </strong></p><p id="981c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> <em class="jk"> func syncWith </em>并发执行<em class="jk"> () { </em> </strong></p><p id="4d17" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">let concurrent queue = dispatch queue(标签:“queue1”，属性:。并发)</strong></p><p id="8e45" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> concurrentQueue.sync { </strong></p><p id="66b6" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">对于指数在0..&lt; 5 { </strong></p><p id="c7c3" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> print("⚪️”，索引)</strong></p><p id="1a91" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> } </strong></p><p id="065c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> } </strong></p><p id="d544" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> concurrentQueue.sync { </strong></p><p id="44ce" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">对于指数在0..&lt; 5 { </strong></p><p id="5b24" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">打印(“🔷"，索引)</strong></p><p id="2680" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> } </strong></p><p id="1c07" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> } </strong></p><p id="07f3" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">T91)}T93】</strong></p><p id="fedf" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">输出:</strong></p><p id="5b60" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> ⚪️ 0 </strong></p><p id="31e9" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> ⚪️ 1 </strong></p><p id="9df6" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> ⚪️ 2 </strong></p><p id="dccb" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> ⚪️ 3 </strong></p><p id="a9fc" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> ⚪️ 4 </strong></p><p id="cd3b" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">🔷0 </strong></p><p id="8205" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">🔷1 </strong></p><p id="fbd6" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">🔷2 </strong></p><p id="6ac0" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">🔷3 </strong></p><p id="7459" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">🔷4 </strong></p><p id="98bd" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">异步</strong></p><p id="f0c7" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">一个<em class="jk">异步</em>函数立即返回，命令任务开始，但不等待它完成。因此，异步函数不会阻止当前执行线程继续执行下一个函数。您可以通过调用DispatchQueue.async(execute:)来异步调度工作单元。</p><p id="135a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"><em class="jk">func async with</em>serial execution<em class="jk">(){</em>T13】</strong></p><p id="8902" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">let serial queue = dispatch queue(标签:“queue 1”)</strong></p><p id="e043" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> serialQueue.async { </strong></p><p id="0e77" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">对于指数在0..&lt; 5 { </strong></p><p id="957a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> print("⚪️”，索引)</strong></p><p id="01ad" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> } </strong></p><p id="9dd4" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> } </strong></p><p id="0b40" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> serialQueue.async { </strong></p><p id="36ff" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">为指数在0..&lt; 5 { </strong></p><p id="4618" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">打印(“🔷"，索引)</strong></p><p id="6649" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> } </strong></p><p id="7f89" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> } </strong></p><p id="341b" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> } </strong></p><p id="83a0" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">输出:</strong></p><p id="6d0d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> ⚪️ 1 </strong></p><p id="051e" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> ⚪️ 2 </strong></p><p id="875d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> ⚪️ 3 </strong></p><p id="f0f5" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> ⚪️ 4 </strong></p><p id="3eff" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">🔷0 </strong></p><p id="68d5" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">🔷1 </strong></p><p id="4d4d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">🔷2 </strong></p><p id="418f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">🔷3 </strong></p><p id="eef8" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">🔷4 </strong></p><p id="8ac8" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> <em class="jk"> func asyncWith </em>并发执行<em class="jk"> () { </em> </strong></p><p id="431b" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">let concurrent queue = dispatch queue(标签:“queue1”，属性:。并发)</strong></p><p id="a265" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> concurrentQueue.async { </strong></p><p id="9543" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">对于指数在0..&lt; 5 { </strong></p><p id="2cd8" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> print("⚪️”，索引)</strong></p><p id="731f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> } </strong></p><p id="4ad7" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> } </strong></p><p id="1ccb" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> concurrentQueue.async { </strong></p><p id="6804" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">对于指数在0..&lt; 5 { </strong></p><p id="fa80" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">打印(“🔷"，索引)</strong></p><p id="42a1" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> } </strong></p><p id="2226" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> } </strong></p><p id="df59" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">打印(" GameOver") </strong></p><p id="9f9f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> } </strong></p><p id="5cc6" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">输出:</strong></p><p id="094e" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> ⚪️ 0 </strong></p><p id="4b54" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">🔷0 </strong></p><p id="107a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> ⚪️ 1 </strong></p><p id="5b84" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">🔷1 </strong></p><p id="e6a9" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> ⚪️ 2 </strong></p><p id="e73f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">🔷2 </strong></p><p id="2070" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> ⚪️ 3 </strong></p><p id="9e3a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">🔷3 </strong></p><p id="1b42" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">🔷4 </strong></p><p id="1b75" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> ⚪️ 4 </strong></p><p id="f18b" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">延迟执行</strong></p><p id="41b8" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">有时延迟代码的执行是必要的。GCD允许我们通过使用一种特殊的方法<em class="jk">来做同样的事情。asyncAfter </em> <strong class="io hj"> <em class="jk">。</em> </strong>我们需要设置我们想要延迟执行的时间量。</p><p id="7480" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">func delayed execution(){</strong></p><p id="e1f0" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">let queue = dispatch queue(label:" com . gcd . simple queue ")</strong></p><p id="28bc" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">let delaydinteraval = dispatchtimeinterval . seconds(5)</strong></p><p id="3473" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">打印(日期())</strong></p><p id="06fe" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> //延时5秒后执行</strong></p><p id="cb7e" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">queue.asyncAfter(截止日期:。now()+delaydinteraval){</p><p id="7981" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">打印(日期())</strong></p><p id="e432" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> } </strong></p><p id="19bd" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> } </strong></p><p id="10e7" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">输出:</strong></p><p id="d033" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">2021–09–04 19:39:02+0000</strong></p><p id="3cb1" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">2021–09–04 19:39:07+0000</strong></p><p id="a154" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> DispatchWorkItem </strong></p><p id="04cd" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">DispatchWorkItem只不过是我们可以在任何队列中执行的代码块。我们可以创建一个工作项来执行，而不是编写一个代码块。</p><p id="15f9" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">let dispatch work item = dispatch work item {</strong></p><p id="3c8e" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">打印(“工作项已执行”)</strong></p><p id="a426" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> } </strong></p><p id="3cb3" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我们可以通过调用<em class="jk">来执行dispatchWorkItem。对其执行()</em>方法。<em class="jk">。perform() </em>将在当前线程上执行工作项。</p><p id="e011" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">dispatch work item . perform()</strong></p><p id="b050" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">或者我们可以将它添加到队列中执行。</p><p id="cc9a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> DispatchQueue.global()。异步(执行:dispatchWorkItem) </strong></p><p id="5a71" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> <em class="jk">快乐编码……</em></strong></p></div></div>    
</body>
</html>