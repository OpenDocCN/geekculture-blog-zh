<html>
<head>
<title>Building a data visualization web app using python-Streamlit</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用python-Streamlit构建数据可视化web应用程序</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/building-a-data-visualization-web-app-using-python-streamlit-c1efd1bed7a?source=collection_archive---------2-----------------------#2021-12-17">https://medium.com/geekculture/building-a-data-visualization-web-app-using-python-streamlit-c1efd1bed7a?source=collection_archive---------2-----------------------#2021-12-17</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="3155" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">使用python streamlit库构建数据可视化ML web应用程序的简单、直观方式。</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/6c8076558935bd9eef855e07bceffd8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*HWF8Oynv-N9R7_sq"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Photo by <a class="ae jn" href="https://unsplash.com/@kmuza?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Carlos Muza</a> on <a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="c56b" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">通常，当我们考虑用python在线构建和共享可视化仪表板或ML应用程序(比方说)给我们的同事/队友/利益相关者或作为我们的投资组合时，我们依赖Django或Flask这样的老牌巨头。</p><p id="1b11" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">使用这样的框架显然有很多好处。但是这里的问题是，对于低代码开发人员来说，它们是否足够用户友好、快速、直观？？我的意思是，为什么我们需要一个Django/Flask开发人员单独为一个小团队或一个ML应用程序的快速展示。当考虑上述参数时，“Streamlit”轻而易举地击败了它们。</p></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><h2 id="41ff" class="kr ks hi bd kt ku kv kw kx ky kz la lb jx lc ld le kb lf lg lh kf li lj lk ll bi translated">什么是Streamlit？</h2><blockquote class="lm ln lo"><p id="27fe" class="jo jp lp jq b jr js ij jt ju jv im jw lq jy jz ka lr kc kd ke ls kg kh ki kj hb bi translated"><a class="ae jn" href="https://www.streamlit.io/" rel="noopener ugc nofollow" target="_blank"> Streamlit </a>是一个开源的Python库，可以轻松创建和共享漂亮的、定制的机器学习和数据科学web应用。只需几分钟，您就可以构建和部署强大的数据应用程序。</p></blockquote><h2 id="6dc1" class="kr ks hi bd kt ku kv kw kx ky kz la lb jx lc ld le kb lf lg lh kf li lj lk ll bi translated">Streamlit的优势:</h2><ul class=""><li id="751e" class="lt lu hi jq b jr lv ju lw jx lx kb ly kf lz kj ma mb mc md bi translated">简单易学——几乎没有学习曲线</li><li id="6f57" class="lt lu hi jq b jr me ju mf jx mg kb mh kf mi kj ma mb mc md bi translated">用户友好(开发人员友好)</li><li id="e110" class="lt lu hi jq b jr me ju mf jx mg kb mh kf mi kj ma mb mc md bi translated">构建耗时更少</li><li id="84f6" class="lt lu hi jq b jr me ju mf jx mg kb mh kf mi kj ma mb mc md bi translated">图形的第三方集成</li><li id="e7ce" class="lt lu hi jq b jr me ju mf jx mg kb mh kf mi kj ma mb mc md bi translated">还有更多…</li></ul><p id="c599" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">既然我们已经看到了streamlit的优势，那么让我们从使用它构建一个简单的数据可视化web应用程序是多么容易开始吧。请注意，所有这些都是在短短几个小时内完成的。因为我既没有任何关于streamlit的知识，也没有丰富的编码经验。我知道在系统中设置和学习“姜戈”有多难。所以，就难度而言，我给这个评分如下:<code class="du mj mk ml mm b">Django &gt;&gt; Flask &gt;&gt; Streamlit</code>。姜戈是最难的，斯特里特是最简单的。</p><h2 id="32cb" class="kr ks hi bd kt ku kv kw kx ky kz la lb jx lc ld le kb lf lg lh kf li lj lk ll bi translated">项目概述:</h2><p id="15cf" class="pw-post-body-paragraph jo jp hi jq b jr lv ij jt ju lw im jw jx mn jz ka kb mo kd ke kf mp kh ki kj hb bi translated">我使用了一个公共API来提取构建可视化所需的数据。像往常一样，做了一些小的数据转换，以便根据需求只获得必要的数据。使用“Plotly”构建基本图形。尝试使用大部分功能，并使其简单快捷。</p><blockquote class="lm ln lo"><p id="2811" class="jo jp lp jq b jr js ij jt ju jv im jw lq jy jz ka lr kc kd ke ls kg kh ki kj hb bi translated">为了使这篇博文简短，我将全部代码保存在我的<a class="ae jn" href="https://github.com/DeepakHarish/python_scripts/tree/master/streamlit_apps" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上。请随便拿。这里看一下web app <a class="ae jn" href="https://share.streamlit.io/deepakharish/python_scripts/streamlit_apps/tfl_streamlit_app.py" rel="noopener ugc nofollow" target="_blank">。</a></p></blockquote><h2 id="d735" class="kr ks hi bd kt ku kv kw kx ky kz la lb jx lc ld le kb lf lg lh kf li lj lk ll bi translated">基础知识:</h2><ul class=""><li id="bf4a" class="lt lu hi jq b jr lv ju lw jx lx kb ly kf lz kj ma mb mc md bi translated"><code class="du mj mk ml mm b">streamlit</code>的安装(windows)是通过正常的<code class="du mj mk ml mm b">pip</code>完成的。<code class="du mj mk ml mm b">pip install streamlit</code>。对于其他平台，请查看<a class="ae jn" href="http://docs.streamlit.io/library/get-started/installation#install-streamlit-on-macoslinux" rel="noopener ugc nofollow" target="_blank">文档页面</a>。</li><li id="577e" class="lt lu hi jq b jr me ju mf jx mg kb mh kf mi kj ma mb mc md bi translated">为了测试我们的安装，在命令提示符下运行<code class="du mj mk ml mm b">streamlit hello</code>。它在默认浏览器<code class="du mj mk ml mm b">localhost:8501</code>中打开。文档页面打开，带有一些示例演示。(我建议尝试一下，因为它有很多很棒的演示)</li></ul><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mq"><img src="../Images/eecca905221f780c06a049f98895e618.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5FqzbO0xk0en6DTEhqFhig.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">image by author: using streamlit hello</figcaption></figure><h2 id="1e5a" class="kr ks hi bd kt ku kv kw kx ky kz la lb jx lc ld le kb lf lg lh kf li lj lk ll bi translated">建筑应用程序:</h2><p id="d512" class="pw-post-body-paragraph jo jp hi jq b jr lv ij jt ju lw im jw jx mn jz ka kb mo kd ke kf mp kh ki kj hb bi translated">一旦安装成功，运行该命令后，您将会看到如上图所示的内容。现在是时候构建实际的东西并见证streamlit的魔力了。我用了“sublime_text”编辑器来编码。这是一个人的选择。</p><p id="264e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这是我用的<a class="ae jn" href="https://tfl.gov.uk/info-for/open-data-users/" rel="noopener ugc nofollow" target="_blank">数据集</a>。基本上，TFL数据集是一个开源的实时API。只是给出了从API中提取数据的简单步骤。</p><p id="3514" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj"> <em class="lp">步骤1: </em> </strong>使用<code class="du mj mk ml mm b">requests</code>库进行API数据提取。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mr ms l"/></div></figure><p id="de47" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj"> <em class="lp">第二步:</em> </strong>其次，在将URL和提取的API数据转换为JSON格式，然后转换为dataframe之后，进行所需的数据转换。下面是基本数据转换的代码。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mr ms l"/></div></figure><p id="2b3e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj"> <em class="lp">第三步:</em> </strong>现在数据转换已经完成，是时候使用实际的<code class="du mj mk ml mm b">streamlit</code>函数了。如图表的“容器”、“侧栏”、“plotly”，字体工具如“副标题”、“降价”、“标题”等。</p><blockquote class="lm ln lo"><p id="7171" class="jo jp lp jq b jr js ij jt ju jv im jw lq jy jz ka lr kc kd ke ls kg kh ki kj hb bi translated">注意:这只是几个例子，这里的<a class="ae jn" href="https://docs.streamlit.io/library/api-reference" rel="noopener ugc nofollow" target="_blank"/>是各种功能的完整列表，这些功能可以用来使我们的web应用程序更美观&amp;功能性更强。</p></blockquote><p id="a89c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">让我向您展示创建一个容器有多简单。容器实际上帮助我们的内容在网页上完美的排列。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mr ms l"/></div></figure><p id="ab6a" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">从上面的代码片段可以看出，<code class="du mj mk ml mm b">streamlit</code>已经被导入。创建了一个容器，其中有“title”(页面的标题，用粗体大字号表示)、“subheader”、“header”、“markdown”、“text”、“write”内置函数来满足大多数需求。在这里，我们能够直接在网页上以<code class="du mj mk ml mm b">dataframe</code>的形式查看我们的数据集。因为有很多行，所以不建议查看整个数据集，我使用了<code class="du mj mk ml mm b">.head()</code>只显示前5行数据。</p><p id="27bb" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">因此，要在开发时在网页上看到我们的内容，我们所要做的就是在命令提示符下运行<code class="du mj mk ml mm b">stream run app_name.py</code>,同时位于应用程序所在的同一文件夹中。它将在默认浏览器的localhost: 8501中打开。每次你对web应用程序代码进行修改时，你可以选择<code class="du mj mk ml mm b">run</code>或<code class="du mj mk ml mm b">rerun always</code>，每当你进行修改时，它们会自动重新运行页面。它们出现在web应用程序的右上角。</p><p id="85f6" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">类似地，我已经创建了其他容器，其中有用“Plotly”制作的图形。它的集成也非常简单直接。只好用<code class="du mj mk ml mm b">st.plotly_chart()</code>了。以下是构建在容器中的plotly可视化示例。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mr ms l"/></div></figure><p id="8e92" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我还使用内置的map函数在地图上显示经度、纬度数据。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mr ms l"/></div></figure><p id="6dfa" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我还使用了一个侧边栏来欢迎用户进入页面。<code class="du mj mk ml mm b">st.sidebar.header('*Hey, Hello there!!!*')</code></p><p id="6f92" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">最后，我使用了一个名为<code class="du mj mk ml mm b">@st.cache</code>的特殊函数，它实际上有助于为我们的web应用程序创建一个缓存，否则它会消耗能量，消耗时间来在每次运行我们的应用程序时加载数据集。这也是最简单的方法。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mr ms l"/></div></figure><p id="fc80" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj"> <em class="lp">第四步:</em> </strong>最后，还有一个很小但相当重要的步骤。这是一个web应用程序的部署。我的意思是，使用库的全部意义和构建web应用程序的目的是为了共享。如果你对此有自己的计划，那完全没问题。如果不是，那也不用担心。Streamlit通过允许在他们的服务器上托管web应用程序来支持你，而且还是免费的！！！多神奇啊！</p><p id="9340" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">你所要做的就是用谷歌或Github账户注册他们的网站。最好是Github，因为那是你的代码应该在的地方。</p><ul class=""><li id="39f2" class="lt lu hi jq b jr js ju jv jx mt kb mu kf mv kj ma mb mc md bi translated">首先，使用<code class="du mj mk ml mm b"><a class="ae jn" href="https://pypi.org/project/pipreqs/" rel="noopener ugc nofollow" target="_blank">pipreqs</a></code>创建一个<code class="du mj mk ml mm b">requirements.txt</code>文件。</li><li id="b95d" class="lt lu hi jq b jr me ju mf jx mg kb mh kf mi kj ma mb mc md bi translated">将应用程序和<code class="du mj mk ml mm b">requirements.txt</code>一起上传到Github。</li><li id="2b51" class="lt lu hi jq b jr me ju mf jx mg kb mh kf mi kj ma mb mc md bi translated">单击streamlit部署页面右侧的“新建应用程序”按钮。</li><li id="56f7" class="lt lu hi jq b jr me ju mf jx mg kb mh kf mi kj ma mb mc md bi translated">将Github repo的链接粘贴到app代码所在的位置。</li><li id="e5e3" class="lt lu hi jq b jr me ju mf jx mg kb mh kf mi kj ma mb mc md bi translated">单击“部署”。喔呼，就这样。几分钟后，应用程序就部署好了。</li></ul><p id="65dd" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">最终，数据科学家应该专注于分析和从数据中获得洞察力，以将其呈现给利益相关者进行决策。花更少的时间考虑各种软件开发活动，如应用程序的前端/后端。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mw"><img src="../Images/186dabba5d123377e668033b14d0e0a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iMWyPcdNdjIxCh6Z_2xHVQ.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">image by author, web app deployment page in streamlit.io</figcaption></figure><p id="0d99" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><em class="lp">下面是我做的</em> <a class="ae jn" href="https://share.streamlit.io/deepakharish/python_scripts/streamlit_apps/tfl_streamlit_app.py" rel="noopener ugc nofollow" target="_blank"> <em class="lp"> web app </em> </a> <em class="lp">。提供您的建议&amp;关于我如何能更好地进一步设计它的反馈。</em></p><p id="7aed" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><em class="lp">谢谢！！！</em></p><p id="74a6" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">有关此主题的更多参考资料:</p><ul class=""><li id="c7fa" class="lt lu hi jq b jr js ju jv jx mt kb mu kf mv kj ma mb mc md bi translated">Misra Turp的博客文章</li><li id="99e5" class="lt lu hi jq b jr me ju mf jx mg kb mh kf mi kj ma mb mc md bi translated"><a class="ae jn" href="https://www.youtube.com/playlist?list=PLM8lYG2MzHmTATqBUZCQW9w816ndU0xHc" rel="noopener ugc nofollow" target="_blank"> Youtube </a>库由Misra Turp</li><li id="5260" class="lt lu hi jq b jr me ju mf jx mg kb mh kf mi kj ma mb mc md bi translated"><a class="ae jn" href="https://docs.streamlit.io/" rel="noopener ugc nofollow" target="_blank">官方Streamlit网页</a></li></ul></div></div>    
</body>
</html>