# 如何编写你的第一个 Flask 应用程序

> 原文：<https://medium.com/geekculture/how-to-write-your-first-flask-app-cd816a634a4a?source=collection_archive---------7----------------------->

## 本教程将教你如何使用 Python 和 Flask 框架构建一个 REST API

![](img/0bab5fa2d5c5750a75295e7932093c8d.png)

Photo by [James Harrison](https://unsplash.com/@jstrippa) on U[nsplash](https://unsplash.com)

在这篇博客中，我们将了解什么是 HTTP 动词，并利用获得的知识，从头开始构建一个基本的 Flask REST API。它对初学者非常友好，并且假设你不知道 Flask。

像循环和条件语句这样的编程结构并不难掌握，所以即使您是编码新手，也可以理解。不过，对编程有一些基本的了解会让你更加欣赏它。

在我们开始之前，让我们理解什么是 HTTP 动词。它们是请求方法，定义了服务器和客户端之间的通信标准。它们根据请求决定服务器的响应。这里涉及的基本有`GET`、`POST`、`PUT`和`DELETE`。

现在我们已经解决了这个问题，让我们学习一些烧瓶。

# **为什么是烧瓶？**

Flask 是一个用 Python 开发 web 应用程序的轻量级微框架。这里的 *micro* 一词并没有降低 Flask 的功能，而是提供了在几分钟内搭建一个 web 应用程序的基本构件。

Flask 抽象了用原生 Python 创建 web 应用程序的一些复杂性，使代码编写更快，维护更容易。不像 Django，它不是固执己见的，你可以挑选任何你认为适合你的项目的库。

它越来越受欢迎，因为它更容易设置，是轻量级的组件。许多大公司如 Reddit、Pinterest 和 LinkedIn 都使用它。让我们安装 Python 并开始工作。

# 安装 Python

要安装 Python，请访问[官方网站](https://www.python.org/downloads/)并下载适用于您的操作系统的最新稳定版本。如果您在一个类似 Unix 的环境中，您可能已经安装了它。通过在您的终端中输入 *python —版本*来确认您已经正确安装了 python。

```
$ python3 --version
Python 3.6.9
```

我们将创建一个非常基本的 web 应用程序，但首先，让我们设置我们的虚拟环境。

# 创造我们的虚拟环境

虚拟环境创建独立的环境来运行特定的 python 应用程序。如果你还没有安装虚拟环境，请查看我之前的博客来设置它。在本教程中，我们将使用 Ubuntu 上的 python3，但是对于 Mac 和其他类似 Unix 的操作系统，命令是相同的。在 Windows 环境中有一些细微的变化，我也将介绍它们。

让我们创建我们的项目目录并设置我们的虚拟环境。

```
$ mkdir bookstore && cd bookstore
$ python3 -m venv env
$ls
env
```

上面的代码所做的是创建一个名为书店的目录，并将 *cd* 放入该目录。然后，它设置我们的虚拟环境并列出其内容。我们现在只有 *env* 目录。

# 激活我们的虚拟环境

如果您在类似 Unix 的环境中，请输入以下命令:

```
$ source env/bin/activate
(env)$
```

Windows 用户可以输入以下内容:

```
> .\env\Scripts\activate
(env)>
```

# 构建应用程序

我们都准备好开始构建我们的应用程序了。让我们安装烧瓶:

```
$ pip install flask
```

让我们在项目的根目录下创建一个文件，并开始编写一些代码:

**注:**我在这篇博客中借用了何塞·萨尔瓦蒂耶拉·富恩特斯的 [REST API 与 Flask 和 Python](https://www.udemy.com/course/rest-api-flask-and-python/) 课程的代码。

```
$ touch app.py
```

我们现在可以打开 *app.py* 文件，开始构建我们的应用程序。文件名可以是你选择的任何一个，但是 *app.py* 和 *server.py* 是约定。在文件的最顶端，我们必须导入一些内容:

我们必须从导入的 *Flask* 类创建一个*app*；我们在导入的包下执行此操作:

dunder name(名字中间夹着两个下划线)给每个文件一个唯一的名字，所以当我们启动 flask 应用程序时，它告诉 Flask 它的唯一位置。

因为这是一个基本的应用程序，我们将用一些基本数据创建我们的商店列表。现实世界中的应用程序会使用某种形式的数据库来实现数据持久性。

让我们创建第一条路线:

这是渲染 Hello，World 的基本回家路线！在浏览器上。

让我们创建第一个 GET 方法:

上面的代码是对我们的商店端点的 GET 请求，它检索我们的所有商店商品；app.route 是一个装饰器，它路由我们所有的请求。 *jsonify* 将数据序列化为 JSON，并封装在 flask 响应中。通过这种方式，它被正确地解析为调用客户端的 JSON。

**注意:**第一行是一个注释，描述了我们将点击哪个端点来发出请求。

让我们创建下一个 GET 方法:

这是一个 GET 请求，从我们的`stores`集合中检索一个商店。请注意我们是如何构造 URL 的。这里，我们在 URL 中传递商店的名称。一旦点击了这个`stores/`端点，我们的 URL 中的`/`后缀就会被提取出来，并与我们的 stores 集合进行比较，以找到一个匹配。如果有匹配的，就返回。如果没有，它将返回一个定制的 JSON 错误响应。

现在，让我们创建我们的第一个 POST 方法。

你看到我们在 app.route decorator 中有另一个论点了吗？这是一个 HTTP POST 动词。您可能想知道为什么在我们的第一个 GET 方法中没有。这是因为 GET 是默认方法，所以当省略时，假设您正在发出 GET 请求。stores 是一个列表，所以我们使用`append`方法向其中添加一个新的商店。

让我们向商店添加一件商品:

让我们从商店中检索商品:

最后但同样重要的是，让我们添加启动服务器的 run 方法:

参见下面的完整代码:

# 结论

我们已经了解了什么是 HTTP 动词，并使用它们从头开始构建了一个基本的 Flask REST API。有了这个基础，你就可以继续前进，创造出令人惊叹的东西。

编码快乐！