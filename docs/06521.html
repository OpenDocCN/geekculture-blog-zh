<html>
<head>
<title>Writing Clean JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">编写干净的JavaScript</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/writing-clean-javascript-es6-edition-834e83abc746?source=collection_archive---------0-----------------------#2021-08-23">https://medium.com/geekculture/writing-clean-javascript-es6-edition-834e83abc746?source=collection_archive---------0-----------------------#2021-08-23</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/b9e2875ad6fce72b1b6d574fd8b66636.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YGllHv3pophTVibKQbIbzg.jpeg"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx">Photo by <a class="ae hv" href="https://dribbble.com/redaco" rel="noopener ugc nofollow" target="_blank">Redaco</a> on <a class="ae hv" href="https://dribbble.com" rel="noopener ugc nofollow" target="_blank">dribbble</a></figcaption></figure><div class=""/><p id="3bf5" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">干净的代码不仅仅是有效的代码，而是可以被其他人容易地阅读、重用和重构的代码。编写干净的代码很重要，因为在典型的工作环境中，您不是为自己或机器编写代码。实际上，你是在为一群需要理解、编辑和构建你的作品的开发人员写作。</p><p id="2fe4" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">本文关注于编写干净的<strong class="ix hz"> JavaScript </strong>代码，这些代码<em class="jt">不是特定于框架的</em>，尽管如此，大多数提到的例子可以适用于几乎任何其他编程语言。一般来说，以下概念大多是从Robert C. Martin的书<a class="ae hv" href="https://www.amazon.com/Clean-Code-Handbook-Software-Craftsmanship/dp/0132350882" rel="noopener ugc nofollow" target="_blank"> <em class="jt"> Clean Code </em> </a>，<em class="jt"> </em>中采纳的建议，并不意味着要严格遵循。</p><h1 id="9ac5" class="ju jv hy bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">1.变量</h1><h2 id="1cce" class="ks jv hy bd jw kt ku kv ka kw kx ky ke jg kz la ki jk lb lc km jo ld le kq lf bi translated">使用有意义的名称</h2><p id="909d" class="pw-post-body-paragraph iv iw hy ix b iy lg ja jb jc lh je jf jg li ji jj jk lj jm jn jo lk jq jr js hb bi translated">变量名应该是描述性的。经验法则是大多数JavaScript变量都是Camel Case ( <em class="jt"> camelCase </em>)。</p><figure class="ll lm ln lo fd hk"><div class="bz dy l di"><div class="lp lq l"/></div></figure><p id="8ac5" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">请注意，布尔名称通常回答特定的问题，例如:</p><pre class="ll lm ln lo fd lr ls lt lu aw lv bi"><span id="d0a6" class="ks jv hy ls b fi lw lx l ly lz">isActive<br/>didSubscribe<br/>hasLinkedAccount</span></pre><h2 id="ad4b" class="ks jv hy bd jw kt ku kv ka kw kx ky ke jg kz la ki jk lb lc km jo ld le kq lf bi translated">避免添加不必要的上下文</h2><p id="f1f8" class="pw-post-body-paragraph iv iw hy ix b iy lg ja jb jc lh je jf jg li ji jj jk lj jm jn jo lk jq jr js hb bi translated">当上下文已经由包含的对象或类提供时，不要向变量名添加多余的上下文。</p><figure class="ll lm ln lo fd hk"><div class="bz dy l di"><div class="lp lq l"/></div></figure><h2 id="8f8f" class="ks jv hy bd jw kt ku kv ka kw kx ky ke jg kz la ki jk lb lc km jo ld le kq lf bi translated">避免硬编码值</h2><p id="d73b" class="pw-post-body-paragraph iv iw hy ix b iy lg ja jb jc lh je jf jg li ji jj jk lj jm jn jo lk jq jr js hb bi translated">不要插入常量值，确保声明有意义和可搜索的常量。注意，全局常量可以在尖叫蛇案例(<em class="jt">尖叫_蛇_案例</em>)中风格化。</p><figure class="ll lm ln lo fd hk"><div class="bz dy l di"><div class="lp lq l"/></div></figure></div><div class="ab cl ma mb gp mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="hb hc hd he hf"><h1 id="4206" class="ju jv hy bd jw jx mh jz ka kb mi kd ke kf mj kh ki kj mk kl km kn ml kp kq kr bi translated">2.功能</h1><h2 id="6e08" class="ks jv hy bd jw kt ku kv ka kw kx ky ke jg kz la ki jk lb lc km jo ld le kq lf bi translated">使用描述性名称</h2><p id="705c" class="pw-post-body-paragraph iv iw hy ix b iy lg ja jb jc lh je jf jg li ji jj jk lj jm jn jo lk jq jr js hb bi translated">函数名可以很长，只要它们描述了函数实际做的事情。函数名通常采用动作动词的形式，返回布尔值的函数可能是个例外，它可以采用“<em class="jt">是或否</em>问题的形式。函数名也应该是驼色的。</p><figure class="ll lm ln lo fd hk"><div class="bz dy l di"><div class="lp lq l"/></div></figure><h2 id="0f68" class="ks jv hy bd jw kt ku kv ka kw kx ky ke jg kz la ki jk lb lc km jo ld le kq lf bi translated">使用默认参数</h2><p id="1333" class="pw-post-body-paragraph iv iw hy ix b iy lg ja jb jc lh je jf jg li ji jj jk lj jm jn jo lk jq jr js hb bi translated">默认参数比在函数体中使用短路或额外的条件语句更简洁。尽管如此，在这里重要的是要记住，短路对所有被认为是“<em class="jt">falsy</em>”<em class="jt"/>的值都有效，例如<code class="du mm mn mo ls b">false</code>、<code class="du mm mn mo ls b">null</code>、<code class="du mm mn mo ls b">undefined</code>、<code class="du mm mn mo ls b">''</code>、<code class="du mm mn mo ls b">""</code>、<code class="du mm mn mo ls b">0</code>和<code class="du mm mn mo ls b">NaN</code>，而默认参数只替换<code class="du mm mn mo ls b">undefined</code>。</p><figure class="ll lm ln lo fd hk"><div class="bz dy l di"><div class="lp lq l"/></div></figure><h2 id="73ea" class="ks jv hy bd jw kt ku kv ka kw kx ky ke jg kz la ki jk lb lc km jo ld le kq lf bi translated">限制参数的数量</h2><p id="9588" class="pw-post-body-paragraph iv iw hy ix b iy lg ja jb jc lh je jf jg li ji jj jk lj jm jn jo lk jq jr js hb bi translated">尽管这条规则可能有争议，但函数应该有0、1或2个参数。有三个参数已经太多了，超出这个范围意味着两种情况中的任何一种:</p><ul class=""><li id="c41e" class="mp mq hy ix b iy iz jc jd jg mr jk ms jo mt js mu mv mw mx bi translated">职能已经在做很多了，应该分。</li><li id="b011" class="mp mq hy ix b iy my jc mz jg na jk nb jo nc js mu mv mw mx bi translated">传递给函数的数据是有某种联系的，可以作为专用的数据结构传递。</li></ul><figure class="ll lm ln lo fd hk"><div class="bz dy l di"><div class="lp lq l"/></div></figure><h2 id="d0a7" class="ks jv hy bd jw kt ku kv ka kw kx ky ke jg kz la ki jk lb lc km jo ld le kq lf bi translated">避免在一个函数中执行多个操作</h2><p id="dca9" class="pw-post-body-paragraph iv iw hy ix b iy lg ja jb jc lh je jf jg li ji jj jk lj jm jn jo lk jq jr js hb bi translated">一个函数应该一次做一件事。这条规则有助于减少函数的大小和复杂性，从而使测试、调试和重构更加容易。函数中的行数是一个强有力的指标，应该对函数是否执行了许多操作给出一个标志。一般来说，尽量少于20-30行代码。</p><figure class="ll lm ln lo fd hk"><div class="bz dy l di"><div class="lp lq l"/></div></figure><h2 id="2c9d" class="ks jv hy bd jw kt ku kv ka kw kx ky ke jg kz la ki jk lb lc km jo ld le kq lf bi translated">避免使用标志作为参数</h2><p id="0ee7" class="pw-post-body-paragraph iv iw hy ix b iy lg ja jb jc lh je jf jg li ji jj jk lj jm jn jo lk jq jr js hb bi translated">一个参数中的标志实际上意味着该函数仍然可以被简化。</p><figure class="ll lm ln lo fd hk"><div class="bz dy l di"><div class="lp lq l"/></div></figure><h2 id="59b3" class="ks jv hy bd jw kt ku kv ka kw kx ky ke jg kz la ki jk lb lc km jo ld le kq lf bi translated">不要重复自己(干)</h2><p id="3ebd" class="pw-post-body-paragraph iv iw hy ix b iy lg ja jb jc lh je jf jg li ji jj jk lj jm jn jo lk jq jr js hb bi translated">重复的代码从来都不是好现象。如果你重复你自己，每当逻辑有变化时，你将不得不更新多个地方。</p><figure class="ll lm ln lo fd hk"><div class="bz dy l di"><div class="lp lq l"/></div></figure><h2 id="d93c" class="ks jv hy bd jw kt ku kv ka kw kx ky ke jg kz la ki jk lb lc km jo ld le kq lf bi translated">避免副作用</h2><p id="896b" class="pw-post-body-paragraph iv iw hy ix b iy lg ja jb jc lh je jf jg li ji jj jk lj jm jn jo lk jq jr js hb bi translated">在JavaScript中，你应该更喜欢函数模式而不是命令模式。换句话说，除非需要，否则保持函数的纯洁性。副作用会修改共享的状态和资源，导致不希望的行为。所有副作用都应该集中；如果您需要改变一个全局值或者修改一个文件，那么只需要一个服务。</p><figure class="ll lm ln lo fd hk"><div class="bz dy l di"><div class="lp lq l"/></div></figure><p id="13d8" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">此外，如果将一个可变值传递给一个函数，您应该返回该值的一个新的变异克隆，而不是直接变异该值并返回它。</p><figure class="ll lm ln lo fd hk"><div class="bz dy l di"><div class="lp lq l"/></div></figure></div><div class="ab cl ma mb gp mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="hb hc hd he hf"><h1 id="2180" class="ju jv hy bd jw jx mh jz ka kb mi kd ke kf mj kh ki kj mk kl km kn ml kp kq kr bi translated">3.条件式</h1><h2 id="9ecf" class="ks jv hy bd jw kt ku kv ka kw kx ky ke jg kz la ki jk lb lc km jo ld le kq lf bi translated">使用非否定条件句</h2><figure class="ll lm ln lo fd hk"><div class="bz dy l di"><div class="lp lq l"/></div></figure><h2 id="989b" class="ks jv hy bd jw kt ku kv ka kw kx ky ke jg kz la ki jk lb lc km jo ld le kq lf bi translated">尽可能使用短工</h2><figure class="ll lm ln lo fd hk"><div class="bz dy l di"><div class="lp lq l"/></div></figure><h2 id="d997" class="ks jv hy bd jw kt ku kv ka kw kx ky ke jg kz la ki jk lb lc km jo ld le kq lf bi translated">避免分支并尽快返回</h2><p id="1752" class="pw-post-body-paragraph iv iw hy ix b iy lg ja jb jc lh je jf jg li ji jj jk lj jm jn jo lk jq jr js hb bi translated">提前返回将使你的代码更线性，更易读，更简单。</p><figure class="ll lm ln lo fd hk"><div class="bz dy l di"><div class="lp lq l"/></div></figure><h2 id="d511" class="ks jv hy bd jw kt ku kv ka kw kx ky ke jg kz la ki jk lb lc km jo ld le kq lf bi translated">优先使用对象文字或映射，而不是switch语句</h2><p id="7283" class="pw-post-body-paragraph iv iw hy ix b iy lg ja jb jc lh je jf jg li ji jj jk lj jm jn jo lk jq jr js hb bi translated">每当这种情况发生时，使用对象或映射进行索引将减少代码并提高性能。</p><figure class="ll lm ln lo fd hk"><div class="bz dy l di"><div class="lp lq l"/></div></figure><h2 id="f82f" class="ks jv hy bd jw kt ku kv ka kw kx ky ke jg kz la ki jk lb lc km jo ld le kq lf bi translated">使用可选链接</h2><figure class="ll lm ln lo fd hk"><div class="bz dy l di"><div class="lp lq l"/></div></figure></div><div class="ab cl ma mb gp mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="hb hc hd he hf"><h1 id="d68d" class="ju jv hy bd jw jx mh jz ka kb mi kd ke kf mj kh ki kj mk kl km kn ml kp kq kr bi translated">4.并发</h1><h2 id="4143" class="ks jv hy bd jw kt ku kv ka kw kx ky ke jg kz la ki jk lb lc km jo ld le kq lf bi translated">避免回访</h2><p id="16ad" class="pw-post-body-paragraph iv iw hy ix b iy lg ja jb jc lh je jf jg li ji jj jk lj jm jn jo lk jq jr js hb bi translated"><a class="ae hv" href="https://developer.mozilla.org/en-US/docs/Glossary/Callback_function" rel="noopener ugc nofollow" target="_blank">回调</a>很混乱，导致嵌套代码。<a class="ae hv" href="https://www.w3schools.com/js/js_es6.asp" rel="noopener ugc nofollow" target="_blank"> ES6 </a>提供<a class="ae hv" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="noopener ugc nofollow" target="_blank">承诺</a>允许链接回调，从而产生更干净的代码。然而，<a class="ae hv" href="https://262.ecma-international.org/8.0/" rel="noopener ugc nofollow" target="_blank"> ECMAScript 2017 </a>还提供了“<a class="ae hv" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function" rel="noopener ugc nofollow" target="_blank"> Async/Await </a>”语法，作为一种可以说是更干净的解决方案，它为代码施加了进一步的线性。</p><figure class="ll lm ln lo fd hk"><div class="bz dy l di"><div class="lp lq l"/></div></figure></div><div class="ab cl ma mb gp mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="hb hc hd he hf"><h1 id="f998" class="ju jv hy bd jw jx mh jz ka kb mi kd ke kf mj kh ki kj mk kl km kn ml kp kq kr bi translated">5.错误处理</h1><h2 id="c4f4" class="ks jv hy bd jw kt ku kv ka kw kx ky ke jg kz la ki jk lb lc km jo ld le kq lf bi translated">处理抛出的错误和拒绝的承诺</h2><p id="6282" class="pw-post-body-paragraph iv iw hy ix b iy lg ja jb jc lh je jf jg li ji jj jk lj jm jn jo lk jq jr js hb bi translated">无需提及为什么这是一条极其重要的规则。现在花时间正确地处理错误将减少以后不得不寻找错误的可能性，特别是当您的代码进入生产阶段时。</p><figure class="ll lm ln lo fd hk"><div class="bz dy l di"><div class="lp lq l"/></div></figure></div><div class="ab cl ma mb gp mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="hb hc hd he hf"><h1 id="b5b1" class="ju jv hy bd jw jx mh jz ka kb mi kd ke kf mj kh ki kj mk kl km kn ml kp kq kr bi translated">6.评论</h1><h2 id="6d22" class="ks jv hy bd jw kt ku kv ka kw kx ky ke jg kz la ki jk lb lc km jo ld le kq lf bi translated">仅注释业务逻辑</h2><p id="2f4e" class="pw-post-body-paragraph iv iw hy ix b iy lg ja jb jc lh je jf jg li ji jj jk lj jm jn jo lk jq jr js hb bi translated">可读的代码可以让你避免过度注释你的代码。因此，你应该只评论复杂的逻辑。</p><figure class="ll lm ln lo fd hk"><div class="bz dy l di"><div class="lp lq l"/></div></figure><h2 id="dc71" class="ks jv hy bd jw kt ku kv ka kw kx ky ke jg kz la ki jk lb lc km jo ld le kq lf bi translated">利用版本控制</h2><p id="4042" class="pw-post-body-paragraph iv iw hy ix b iy lg ja jb jc lh je jf jg li ji jj jk lj jm jn jo lk jq jr js hb bi translated">绝对没有理由保留注释代码或日志注释，版本控制已经在那里处理了。</p><figure class="ll lm ln lo fd hk"><div class="bz dy l di"><div class="lp lq l"/></div></figure><h2 id="04e3" class="ks jv hy bd jw kt ku kv ka kw kx ky ke jg kz la ki jk lb lc km jo ld le kq lf bi translated">尽可能记录</h2><p id="6fab" class="pw-post-body-paragraph iv iw hy ix b iy lg ja jb jc lh je jf jg li ji jj jk lj jm jn jo lk jq jr js hb bi translated">文档有助于提高代码质量和可靠性。它可以作为你的代码库的用户手册，任何人都可以理解你代码的所有方面。</p><pre class="ll lm ln lo fd lr ls lt lu aw lv bi"><span id="d2c0" class="ks jv hy ls b fi lw lx l ly lz">/**  <br/> * Returns x raised to the n-th power.  <br/> *  <br/> * @param {number} x The number to raise.  <br/> * @param {number} n The power, should be a natural number.  <br/> * @return {number} x raised to the n-th power.  <br/> */ <br/>function pow(x, n) {   <br/>    // ...<br/>}</span></pre></div><div class="ab cl ma mb gp mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="hb hc hd he hf"><p id="56d7" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">本文简要讨论了使用最新语法增加JavaScript代码的一些重要步骤。同样，这些概念中的大部分都可以推广并应用于不同的编程语言。采用这些实践可能需要一些时间，特别是对于较大的代码库，但是从长远来看，将保证您的代码变得可读、可伸缩和易于重构。</p><figure class="ll lm ln lo fd hk er es paragraph-image"><a href="http://buymeacoffee.com/jalkhurfan"><div class="er es nd"><img src="../Images/169f8b1142e42f66cc1f8d36823ed21c.png" data-original-src="https://miro.medium.com/v2/resize:fit:520/format:webp/1*gzdOEDskvMA1wW6CUF3RkA.png"/></div></a><figcaption class="hr hs et er es ht hu bd b be z dx">Support me to write more!</figcaption></figure></div></div>    
</body>
</html>