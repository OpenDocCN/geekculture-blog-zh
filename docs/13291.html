<html>
<head>
<title>Single Prometheus job for dozens of Blackbox exporters</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">几十个黑盒出口商的单一普罗米修斯工作</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/single-prometheus-job-for-dozens-of-blackbox-exporters-2a7ba492d6c8?source=collection_archive---------1-----------------------#2022-06-30">https://medium.com/geekculture/single-prometheus-job-for-dozens-of-blackbox-exporters-2a7ba492d6c8?source=collection_archive---------1-----------------------#2022-06-30</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="d831" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">我们在视觉上很固执。我们在细节上很灵活——杰夫·贝索斯</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/8f5f71d9e87052e6437a42ea81a7fe97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*XekoqzBk6Wzp8Wxd"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Photo by <a class="ae jn" href="https://unsplash.com/@alinnnaaaa?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Alina Grubnyak</a> on <a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h2 id="e6e0" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated"><strong class="ak">什么是黑盒导出器？</strong></h2><p id="6336" class="pw-post-body-paragraph km kn hi ko b kp kq ij kr ks kt im ku jz kv kw kx kd ky kz la kh lb lc ld le hb bi lf translated"><span class="l lg lh li bm lj lk ll lm ln di"> T </span>他普罗米修斯<a class="ae jn" href="https://github.com/prometheus/blackbox_exporter#blackbox-exporter-" rel="noopener ugc nofollow" target="_blank">黑盒导出器</a>允许通过HTTP、HTTPS、DNS、TCP、ICMP和gRPC对端点进行黑盒探测。该导出器提供有关端点状态、HTTP延迟、重定向信息、DNS查找延迟的指标，以及有关SSL证书过期的统计信息。它开箱即用，因为它只关注外部可见性细节。</p><h2 id="0a94" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">这个故事是关于什么的？</h2><blockquote class="lo lp lq"><p id="61cf" class="km kn lr ko b kp ls ij kr ks lt im ku lu lv kw kx lw lx kz la ly lz lc ld le hb bi translated">这个故事不是关于黑盒输出器的安装，更多的是关于普罗米修斯方面的配置。目标是通过避免将普罗米修斯配置弄得一团糟来实现简单、最小但灵活的配置。</p></blockquote><p id="5e76" class="pw-post-body-paragraph km kn hi ko b kp ls ij kr ks lt im ku jz lv kw kx kd lx kz la kh lz lc ld le hb bi translated">假设您在世界各地有20多个黑盒导出器，它们不属于任何集群或环境，只是作为独立的应用程序运行，用于从不同的地方监控端点。例如，您应该监控来自所有位置的100多个URL，以确保您的网站可用性、延迟等。根据<a class="ae jn" href="https://github.com/prometheus/blackbox_exporter#prometheus-configuration" rel="noopener ugc nofollow" target="_blank">文档</a>，一个简单的Prometheus作业配置如下所示:</p><pre class="iy iz ja jb fd ma mb mc md aw me bi"><span id="a424" class="jo jp hi mb b fi mf mg l mh mi">scrape_configs:<br/>  - job_name: 'blackbox'<br/>    metrics_path: /probe<br/>    params:<br/>      module: [http_2xx]  # Look for a HTTP 200 response.<br/>    static_configs:<br/>      - targets:<br/>        - <a class="ae jn" href="http://prometheus.io" rel="noopener ugc nofollow" target="_blank">http://prometheus.io</a>    # Probe with http.<br/>        - <a class="ae jn" href="https://prometheus.io" rel="noopener ugc nofollow" target="_blank">https://prometheus.io</a>   # Probe with https.<br/>        - <a class="ae jn" href="http://example.com:8080" rel="noopener ugc nofollow" target="_blank">http://example.com:8080</a> # Probe with http on port 8080.<br/>    relabel_configs:<br/>      - source_labels: [__address__]<br/>        target_label: __param_target<br/>      - source_labels: [__param_target]<br/>        target_label: instance<br/>      - target_label: __address__<br/>        replacement: 127.0.0.1:9115  # Blackbox exporter's address.</span></pre><p id="aac0" class="pw-post-body-paragraph km kn hi ko b kp ls ij kr ks lt im ku jz lv kw kx kd lx kz la kh lz lc ld le hb bi translated">如果在导出器的配置中定义了许多黑盒导出器、URL和多个模块，会怎么样呢？最基本的答案是:<em class="lr">“在Prometheus中为每个黑盒导出器定义所有目标(URL)的作业”</em>对吗？总的来说，这将是近20+作业和2000多行配置。当然，你可以这样做，但是请记住，这不是一个专业的方式来实现它，因为我们谈论的是普罗米修斯。正如您在上面的作业示例中看到的那样，导出程序的模块名称、目标和地址都是静态的，所以任何时候当您想要更改某些内容时，您都需要更改整个配置。让我们看看如何使用Prometheus提供的<a class="ae jn" href="https://prometheus.io/docs/prometheus/latest/configuration/configuration/#file_sd_config" rel="noopener ugc nofollow" target="_blank"><strong class="ko hj">file _ SD _ config</strong></a>和<a class="ae jn" href="https://prometheus.io/docs/prometheus/latest/configuration/configuration/#relabel_config" rel="noopener ugc nofollow" target="_blank"><strong class="ko hj">relabel _ config</strong></a><strong class="ko hj"/>特性。</p><h2 id="f1f8" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">配置单个Prometheus作业</h2><p id="6701" class="pw-post-body-paragraph km kn hi ko b kp kq ij kr ks kt im ku jz kv kw kx kd ky kz la kh lb lc ld le hb bi translated">乍一看，您可能会认为下面描述的工作示例既困难又复杂，但是不要担心，我们会详细介绍这一点。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mj mk l"/></div><figcaption class="jj jk et er es jl jm bd b be z dx">Prometheus job: blackbox</figcaption></figure></div><div class="ab cl ml mm gp mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="hb hc hd he hf"><p id="eda9" class="pw-post-body-paragraph km kn hi ko b kp ls ij kr ks lt im ku jz lv kw kx kd lx kz la kh lz lc ld le hb bi translated">第一个重要部分是<code class="du ms mt mu mb b">file_sd_configs</code>部分，这意味着普罗米修斯将从提供的文件中读取它的目标。它很酷，因为你可以动态地改变文件的内容，而不需要重新加载Prometheus服务器。让我们看看这个文件是什么样子的。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mj mk l"/></div><figcaption class="jj jk et er es jl jm bd b be z dx">blackbox-targets.yml</figcaption></figure><p id="bc22" class="pw-post-body-paragraph km kn hi ko b kp ls ij kr ks lt im ku jz lv kw kx kd lx kz la kh lz lc ld le hb bi translated">你可以认为这个文件的内容与我们上面讨论的部分<code class="du ms mt mu mb b">static_configs.targets</code>相似，但是目标有点“奇怪”，对吗？这里，每个目标包含所有元数据，这些元数据将在抓取后在时间序列的最终标签集中提取。正如你所看到的，我们使用了下面的符号<code class="du ms mt mu mb b">:_:</code>作为所提供字段的分隔符。请确保分隔符可以是任何有效字符。如果您用提供的分隔符将这些行分开，您将得到每个目标五个字段。这些字段如下:</p><p id="c682" class="pw-post-body-paragraph km kn hi ko b kp ls ij kr ks lt im ku jz lv kw kx kd lx kz la kh lz lc ld le hb bi translated"><code class="du ms mt mu mb b">&lt;BLACKBOX_IP_PORT&gt;:_:&lt;&lt;MODULE&gt;:_:&lt;LOCATION&gt;:_:&lt;GEOHASH&gt;:_:&lt;TARGET_URL&gt;</code></p><ol class=""><li id="a19c" class="mv mw hi ko b kp ls ks lt jz mx kd my kh mz le na nb nc nd bi translated"><em class="lr">黑盒子出口商的地址(IP:PORT)，</em></li><li id="a932" class="mv mw hi ko b kp ne ks nf jz ng kd nh kh ni le na nb nc nd bi translated"><em class="lr">黑盒导出器配置中定义的模块名称，</em></li><li id="4397" class="mv mw hi ko b kp ne ks nf jz ng kd nh kh ni le na nb nc nd bi translated"><em class="lr">黑盒出口商所在城市名称，</em></li><li id="072b" class="mv mw hi ko b kp ne ks nf jz ng kd nh kh ni le na nb nc nd bi translated"><em class="lr">对应城市的</em> <a class="ae jn" href="https://en.wikipedia.org/wiki/Geohash" rel="noopener ugc nofollow" target="_blank"> <em class="lr"> geohash </em> </a>的值(在Grafana的Geomap面板中使用)</li><li id="0d9d" class="mv mw hi ko b kp ne ks nf jz ng kd nh kh ni le na nb nc nd bi translated"><em class="lr">需要监控的目标URL。</em></li></ol></div><div class="ab cl ml mm gp mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="hb hc hd he hf"><p id="3c6e" class="pw-post-body-paragraph km kn hi ko b kp ls ij kr ks lt im ku jz lv kw kx kd lx kz la kh lz lc ld le hb bi translated">第二个重要部分是<code class="du ms mt mu mb b">relable_configs</code>部分。重新标记是一个强大的工具，可以在目标的标签集被删除之前动态地重写它。在此示例中，有七个重新标记的步骤。所有步骤的逻辑几乎相同。为了清楚起见，让我们涵盖所有的步骤。</p><h2 id="3acc" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">重新标注出口商地址</h2><p id="c395" class="pw-post-body-paragraph km kn hi ko b kp kq ij kr ks kt im ku jz kv kw kx kd ky kz la kh lb lc ld le hb bi translated">在这一步，我们应该告诉Prometheus目标字符串中的哪个字段负责<code class="du ms mt mu mb b">__address__</code>标签。它是一个特殊的标签，被设置到目标的<code class="du ms mt mu mb b">&lt;host&gt;:&lt;port&gt;</code>地址。</p><pre class="iy iz ja jb fd ma mb mc md aw me bi"><span id="0701" class="jo jp hi mb b fi mf mg l mh mi">33   <em class="lr"># the Blackbox exporter's real hostname:port</em><br/>34   <strong class="mb hj">- source_labels: [__address__]</strong><br/>35     <strong class="mb hj">regex: '(.*):_:.*:_:.*:_:.*:_:.*'      </strong><br/>36     <strong class="mb hj">target_label: __address__</strong></span></pre><p id="21e7" class="pw-post-body-paragraph km kn hi ko b kp ls ij kr ks lt im ku jz lv kw kx kd lx kz la kh lz lc ld le hb bi translated">正如您注意到的，对应于地址标签的值是通过<code class="du ms mt mu mb b">regex</code>匹配器提取的。这里的<code class="du ms mt mu mb b">(.*)</code>是一个有效的<a class="ae jn" href="https://github.com/google/re2/wiki/Syntax" rel="noopener ugc nofollow" target="_blank"> RE2正则表达式</a>，它的值在<code class="du ms mt mu mb b">${1}</code>变量下提取。</p><blockquote class="lo lp lq"><p id="37c0" class="km kn lr ko b kp ls ij kr ks lt im ku lu lv kw kx lw lx kz la ly lz lc ld le hb bi translated"><em class="hi">输入文本:<br/> </em> <code class="du ms mt mu mb b"><em class="hi">1.2.3.4:9115:_:http_2xx:_:Paris:_:u09tvw0f6szye:_:</em><a class="ae jn" href="http://prometheus.io" rel="noopener ugc nofollow" target="_blank"><em class="hi">http://prometheus.io</em></a></code></p><p id="7d9e" class="km kn lr ko b kp ls ij kr ks lt im ku lu lv kw kx lw lx kz la ly lz lc ld le hb bi translated"><em class="hi"> Regex: <br/> </em> <code class="du ms mt mu mb b"><em class="hi">(.*):_:.*:_:.*:_:.*:_:.*</em></code></p><p id="886e" class="km kn lr ko b kp ls ij kr ks lt im ku lu lv kw kx lw lx kz la ly lz lc ld le hb bi translated"><em class="hi">输出:<br/> </em> <code class="du ms mt mu mb b"><em class="hi">${1}</em></code> <em class="hi"> = </em> <code class="du ms mt mu mb b"><em class="hi">1.2.3.4:9115</em></code></p></blockquote><h2 id="187b" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">重新标记模块</h2><p id="15a0" class="pw-post-body-paragraph km kn hi ko b kp kq ij kr ks kt im ku jz kv kw kx kd ky kz la kh lb lc ld le hb bi translated">像前一部分一样，这里提取的是模块名。重新标记的目的是在最终的时间序列中有一个名为<code class="du ms mt mu mb b">module</code>的标签。</p><pre class="iy iz ja jb fd ma mb mc md aw me bi"><span id="cb7d" class="jo jp hi mb b fi mf mg l mh mi">9   <em class="lr"># adds "module" label in the final labelset</em><br/>10  <strong class="mb hj">- source_labels: [__address__]</strong><br/>11    <strong class="mb hj">regex: '.*:_:(.*):_:.*:_:.*:_:.*'</strong><br/>12    <strong class="mb hj">target_label: module</strong></span></pre><blockquote class="lo lp lq"><p id="7bb2" class="km kn lr ko b kp ls ij kr ks lt im ku lu lv kw kx lw lx kz la ly lz lc ld le hb bi translated"><em class="hi">输入文字:<br/> </em> <code class="du ms mt mu mb b"><em class="hi">1.2.3.4:9115:_:http_2xx:_:Paris:_:u09tvw0f6szye:_:</em><a class="ae jn" href="http://prometheus.io" rel="noopener ugc nofollow" target="_blank"><em class="hi">http://prometheus.io</em></a></code></p><p id="bec7" class="km kn lr ko b kp ls ij kr ks lt im ku lu lv kw kx lw lx kz la ly lz lc ld le hb bi translated"><em class="hi"> Regex: <br/> </em> <code class="du ms mt mu mb b"><em class="hi">.*:_:(.*):_:.*:_:.*:_:.*</em></code></p><p id="758f" class="km kn lr ko b kp ls ij kr ks lt im ku lu lv kw kx lw lx kz la ly lz lc ld le hb bi translated"><em class="hi">输出:<br/> </em> <code class="du ms mt mu mb b"><em class="hi">${1}</em></code> <em class="hi"> = </em> <code class="du ms mt mu mb b"><em class="hi">http_2xx</em></code></p></blockquote><p id="bcd2" class="pw-post-body-paragraph km kn hi ko b kp ls ij kr ks lt im ku jz lv kw kx kd lx kz la kh lz lc ld le hb bi translated">这里我们只是将<code class="du ms mt mu mb b">module</code>标签的值作为HTTP查询参数传递给Blackbox exporter，我们已经在上一步中重新标记了这个参数。</p><pre class="iy iz ja jb fd ma mb mc md aw me bi"><span id="c24f" class="jo jp hi mb b fi mf mg l mh mi">25   <em class="lr"># passes "module" parameter to Blackbox exporter</em><br/>26   <strong class="mb hj">- source_labels: [module]</strong><br/>27     <strong class="mb hj">target_label: __param_module</strong></span></pre><h2 id="9543" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">重新标记工作标签</h2><p id="b8c9" class="pw-post-body-paragraph km kn hi ko b kp kq ij kr ks kt im ku jz kv kw kx kd ky kz la kh lb lc ld le hb bi translated"><code class="du ms mt mu mb b">job</code>标签很特别，因为真正的<code class="du ms mt mu mb b">job</code>标签<code class="du ms mt mu mb b">blackbox</code>将被重命名为相应出口商所在的地点/城市名称。</p><pre class="iy iz ja jb fd ma mb mc md aw me bi"><span id="b0e3" class="jo jp hi mb b fi mf mg l mh mi">21   <em class="lr"># rewrites "job" label with corresponding location name</em><br/>22   <strong class="mb hj">- source_labels: [__address__]</strong><br/>23     <strong class="mb hj">regex: '.*:_:.*:_:(.*):_:.*:_:.*'</strong><br/>24     <strong class="mb hj">target_label: job</strong></span></pre><blockquote class="lo lp lq"><p id="968b" class="km kn lr ko b kp ls ij kr ks lt im ku lu lv kw kx lw lx kz la ly lz lc ld le hb bi translated"><em class="hi">输入文字:<br/> </em> <code class="du ms mt mu mb b"><em class="hi">1.2.3.4:9115:_:http_2xx:_:Paris:_:u09tvw0f6szye:_:</em><a class="ae jn" href="http://prometheus.io" rel="noopener ugc nofollow" target="_blank"><em class="hi">http://prometheus.io</em></a></code></p><p id="4fc0" class="km kn lr ko b kp ls ij kr ks lt im ku lu lv kw kx lw lx kz la ly lz lc ld le hb bi translated"><em class="hi">正则表达式:<br/> </em> <code class="du ms mt mu mb b"><em class="hi">.*:_:.*:_:(.*):_:.*:_:.*</em></code></p><p id="f5b3" class="km kn lr ko b kp ls ij kr ks lt im ku lu lv kw kx lw lx kz la ly lz lc ld le hb bi translated"><em class="hi">输出:<br/> </em> <code class="du ms mt mu mb b"><em class="hi">${1}</em></code> <em class="hi"> = </em> <code class="du ms mt mu mb b"><em class="hi">Paris</em></code></p></blockquote><h2 id="25a6" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">重新标注geohash标签</h2><p id="a337" class="pw-post-body-paragraph km kn hi ko b kp kq ij kr ks kt im ku jz kv kw kx kd ky kz la kh lb lc ld le hb bi translated"><code class="du ms mt mu mb b">geohash</code>是倒数第二个字段，因此将按以下方式提取。</p><pre class="iy iz ja jb fd ma mb mc md aw me bi"><span id="ffb9" class="jo jp hi mb b fi mf mg l mh mi">13   <em class="lr"># adds "geohash" label in the final labelset   </em> <br/>14   <strong class="mb hj">- source_labels: [__address__]      </strong><br/>15     <strong class="mb hj">regex: '.*:_:.*:_:.*:_:(.*):_:.*'      </strong><br/>16     <strong class="mb hj">target_label: geohash</strong></span></pre><blockquote class="lo lp lq"><p id="ea35" class="km kn lr ko b kp ls ij kr ks lt im ku lu lv kw kx lw lx kz la ly lz lc ld le hb bi translated"><em class="hi">输入文本:<br/> </em> <code class="du ms mt mu mb b"><em class="hi">1.2.3.4:9115:_:http_2xx:_:Paris:_:u09tvw0f6szye:_:</em><a class="ae jn" href="http://prometheus.io" rel="noopener ugc nofollow" target="_blank"><em class="hi">http://prometheus.io</em></a></code></p><p id="2337" class="km kn lr ko b kp ls ij kr ks lt im ku lu lv kw kx lw lx kz la ly lz lc ld le hb bi translated"><em class="hi"> Regex: <br/> </em> <code class="du ms mt mu mb b"><em class="hi">.*:_:.*:_:.*:_:(.*):_:.*</em></code></p><p id="dcd3" class="km kn lr ko b kp ls ij kr ks lt im ku lu lv kw kx lw lx kz la ly lz lc ld le hb bi translated"><em class="hi">输出:<br/> </em> <code class="du ms mt mu mb b"><em class="hi">${1}</em></code> <em class="hi"> = </em> <code class="du ms mt mu mb b"><em class="hi">u09tvw0f6szye</em></code></p></blockquote><h2 id="e3cf" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">重新标记实例标签</h2><p id="f013" class="pw-post-body-paragraph km kn hi ko b kp kq ij kr ks kt im ku jz kv kw kx kd ky kz la kh lb lc ld le hb bi translated">在这一步中，最后一个字段(目标URL)将在<code class="du ms mt mu mb b">instance</code>标签下提取。</p><pre class="iy iz ja jb fd ma mb mc md aw me bi"><span id="9b1d" class="jo jp hi mb b fi mf mg l mh mi">13   <em class="lr"># rewrites "instance" label with corresponding URL</em><br/>14   <strong class="mb hj">- source_labels: [__address__]</strong><br/>15     <strong class="mb hj">regex: '.*:_:.*:_:.*:_:.*:_:(.*)'</strong><br/>16     <strong class="mb hj">target_label: instance</strong></span></pre><blockquote class="lo lp lq"><p id="0d49" class="km kn lr ko b kp ls ij kr ks lt im ku lu lv kw kx lw lx kz la ly lz lc ld le hb bi translated"><em class="hi">输入文字:<br/> </em> <code class="du ms mt mu mb b"><em class="hi">1.2.3.4:9115:_:http_2xx:_:Paris:_:u09tvw0f6szye:_:</em><a class="ae jn" href="http://prometheus.io" rel="noopener ugc nofollow" target="_blank"><em class="hi">http://prometheus.io</em></a></code></p><p id="78e0" class="km kn lr ko b kp ls ij kr ks lt im ku lu lv kw kx lw lx kz la ly lz lc ld le hb bi translated"><em class="hi"> Regex: <br/> </em> <code class="du ms mt mu mb b"><em class="hi">.*:_:.*:_:.*:_:.*:_:(.*)</em></code></p><p id="18e5" class="km kn lr ko b kp ls ij kr ks lt im ku lu lv kw kx lw lx kz la ly lz lc ld le hb bi translated"><em class="hi">输出:<br/></em><code class="du ms mt mu mb b"><em class="hi">${1}</em></code><em class="hi">=</em>T4】</p></blockquote><p id="fe42" class="pw-post-body-paragraph km kn hi ko b kp ls ij kr ks lt im ku jz lv kw kx kd lx kz la kh lz lc ld le hb bi translated">像这里的<code class="du ms mt mu mb b">module</code>标签一样，<code class="du ms mt mu mb b">instance</code>标签将其值(即<a class="ae jn" href="http://prometheus.io" rel="noopener ugc nofollow" target="_blank"><em class="lr">http://Prometheus . io</em></a>)作为名为<code class="du ms mt mu mb b">target</code>的HTTP查询参数传递给黑盒导出器。</p><pre class="iy iz ja jb fd ma mb mc md aw me bi"><span id="c025" class="jo jp hi mb b fi mf mg l mh mi">29   <em class="lr"># passes "target" parameter to Blackbox exporter</em><br/>30   <strong class="mb hj">- source_labels: [instance]</strong><br/>31     <strong class="mb hj">target_label: __param_target</strong></span></pre><p id="808b" class="pw-post-body-paragraph km kn hi ko b kp ls ij kr ks lt im ku jz lv kw kx kd lx kz la kh lz lc ld le hb bi translated">如下图所示，Prometheus服务器知道如何根据所提供的配置从目标进行抓取。(这张截图是从我的本地电脑上截取的，仅来自巴黎端点)。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nj"><img src="../Images/39f50d1ed3d8616ef69fc0b9646cd507.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aibq15nSV0VqOd90jZh4ZQ.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Prometheus targets</figcaption></figure><h1 id="755e" class="nk jp hi bd jq nl nm nn ju no np nq jy io nr ip kc ir ns is kg iu nt iv kk nu bi translated">结论</h1><p id="0b1d" class="pw-post-body-paragraph km kn hi ko b kp kq ij kr ks kt im ku jz kv kw kx kd ky kz la kh lb lc ld le hb bi translated">我猜看完这个故事后，你已经知道如何有效地为黑盒导出器配置Prometheus作业了。</p><p id="44e9" class="pw-post-body-paragraph km kn hi ko b kp ls ij kr ks lt im ku jz lv kw kx kd lx kz la kh lz lc ld le hb bi translated">感谢阅读。我希望这个故事是有帮助的。如果你有兴趣，可以看看<a class="ae jn" href="https://hayk96.medium.com/" rel="noopener">我的其他媒体文章</a>。</p></div></div>    
</body>
</html>