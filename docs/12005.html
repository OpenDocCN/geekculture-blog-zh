<html>
<head>
<title>How To Write Your First Flask App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何编写你的第一个Flask应用程序</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/how-to-write-your-first-flask-app-cd816a634a4a?source=collection_archive---------7-----------------------#2022-04-20">https://medium.com/geekculture/how-to-write-your-first-flask-app-cd816a634a4a?source=collection_archive---------7-----------------------#2022-04-20</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="fd47" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">本教程将教你如何使用Python和Flask框架构建一个REST API</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/0bab5fa2d5c5750a75295e7932093c8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JOoga42iuLkWxj_tKIzYYg.jpeg"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Photo by <a class="ae jn" href="https://unsplash.com/@jstrippa" rel="noopener ugc nofollow" target="_blank">James Harrison</a> on U<a class="ae jn" href="https://unsplash.com" rel="noopener ugc nofollow" target="_blank">nsplash</a></figcaption></figure><p id="3847" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在这篇博客中，我们将了解什么是HTTP动词，并利用获得的知识，从头开始构建一个基本的Flask REST API。它对初学者非常友好，并且假设你不知道Flask。</p><p id="b4e2" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">像循环和条件语句这样的编程结构并不难掌握，所以即使您是编码新手，也可以理解。不过，对编程有一些基本的了解会让你更加欣赏它。</p><p id="d3ea" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在我们开始之前，让我们理解什么是HTTP动词。它们是请求方法，定义了服务器和客户端之间的通信标准。它们根据请求决定服务器的响应。这里涉及的基本有<code class="du kk kl km kn b">GET</code>、<code class="du kk kl km kn b">POST</code>、<code class="du kk kl km kn b">PUT</code>和<code class="du kk kl km kn b">DELETE</code>。</p><p id="6320" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">现在我们已经解决了这个问题，让我们学习一些烧瓶。</p><h1 id="658e" class="ko kp hi bd kq kr ks kt ku kv kw kx ky io kz ip la ir lb is lc iu ld iv le lf bi translated"><strong class="ak">为什么是烧瓶？</strong></h1><p id="ee29" class="pw-post-body-paragraph jo jp hi jq b jr lg ij jt ju lh im jw jx li jz ka kb lj kd ke kf lk kh ki kj hb bi translated">Flask是一个用Python开发web应用程序的轻量级微框架。这里的<em class="ll"> micro </em>一词并没有降低Flask的功能，而是提供了在几分钟内搭建一个web应用程序的基本构件。</p><p id="93ff" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">Flask抽象了用原生Python创建web应用程序的一些复杂性，使代码编写更快，维护更容易。不像Django，它不是固执己见的，你可以挑选任何你认为适合你的项目的库。</p><p id="4efe" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">它越来越受欢迎，因为它更容易设置，是轻量级的组件。许多大公司如Reddit、Pinterest和LinkedIn都使用它。让我们安装Python并开始工作。</p><h1 id="2430" class="ko kp hi bd kq kr ks kt ku kv kw kx ky io kz ip la ir lb is lc iu ld iv le lf bi translated">安装Python</h1><p id="164a" class="pw-post-body-paragraph jo jp hi jq b jr lg ij jt ju lh im jw jx li jz ka kb lj kd ke kf lk kh ki kj hb bi translated">要安装Python，请访问<a class="ae jn" href="https://www.python.org/downloads/" rel="noopener ugc nofollow" target="_blank">官方网站</a>并下载适用于您的操作系统的最新稳定版本。如果您在一个类似Unix的环境中，您可能已经安装了它。通过在您的终端中输入<em class="ll"> python —版本</em>来确认您已经正确安装了python。</p><pre class="iy iz ja jb fd lm kn ln lo aw lp bi"><span id="ae7c" class="lq kp hi kn b fi lr ls l lt lu">$ python3 --version<br/>Python 3.6.9</span></pre><p id="5a76" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我们将创建一个非常基本的web应用程序，但首先，让我们设置我们的虚拟环境。</p><h1 id="5b67" class="ko kp hi bd kq kr ks kt ku kv kw kx ky io kz ip la ir lb is lc iu ld iv le lf bi translated">创造我们的虚拟环境</h1><p id="d4e9" class="pw-post-body-paragraph jo jp hi jq b jr lg ij jt ju lh im jw jx li jz ka kb lj kd ke kf lk kh ki kj hb bi translated">虚拟环境创建独立的环境来运行特定的python应用程序。如果你还没有安装虚拟环境，请查看我之前的博客来设置它。在本教程中，我们将使用Ubuntu上的python3，但是对于Mac和其他类似Unix的操作系统，命令是相同的。在Windows环境中有一些细微的变化，我也将介绍它们。</p><p id="35a8" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">让我们创建我们的项目目录并设置我们的虚拟环境。</p><pre class="iy iz ja jb fd lm kn ln lo aw lp bi"><span id="10ef" class="lq kp hi kn b fi lr ls l lt lu">$ mkdir bookstore &amp;&amp; cd bookstore<br/>$ python3 -m venv env<br/>$ls<br/>env</span></pre><p id="537c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">上面的代码所做的是创建一个名为书店的目录，并将<em class="ll"> cd </em>放入该目录。然后，它设置我们的虚拟环境并列出其内容。我们现在只有<em class="ll"> env </em>目录。</p><h1 id="e08c" class="ko kp hi bd kq kr ks kt ku kv kw kx ky io kz ip la ir lb is lc iu ld iv le lf bi translated">激活我们的虚拟环境</h1><p id="5938" class="pw-post-body-paragraph jo jp hi jq b jr lg ij jt ju lh im jw jx li jz ka kb lj kd ke kf lk kh ki kj hb bi translated">如果您在类似Unix的环境中，请输入以下命令:</p><pre class="iy iz ja jb fd lm kn ln lo aw lp bi"><span id="adeb" class="lq kp hi kn b fi lr ls l lt lu">$ source env/bin/activate<br/>(env)$</span></pre><p id="c4d1" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">Windows用户可以输入以下内容:</p><pre class="iy iz ja jb fd lm kn ln lo aw lp bi"><span id="9861" class="lq kp hi kn b fi lr ls l lt lu">&gt; .\env\Scripts\activate<br/>(env)&gt;</span></pre><h1 id="3bdc" class="ko kp hi bd kq kr ks kt ku kv kw kx ky io kz ip la ir lb is lc iu ld iv le lf bi translated">构建应用程序</h1><p id="1d32" class="pw-post-body-paragraph jo jp hi jq b jr lg ij jt ju lh im jw jx li jz ka kb lj kd ke kf lk kh ki kj hb bi translated">我们都准备好开始构建我们的应用程序了。让我们安装烧瓶:</p><pre class="iy iz ja jb fd lm kn ln lo aw lp bi"><span id="f546" class="lq kp hi kn b fi lr ls l lt lu">$ pip install flask</span></pre><p id="bb39" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">让我们在项目的根目录下创建一个文件，并开始编写一些代码:</p><p id="9329" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">注:</strong>我在这篇博客中借用了何塞·萨尔瓦蒂耶拉·富恩特斯的<a class="ae jn" href="https://www.udemy.com/course/rest-api-flask-and-python/" rel="noopener ugc nofollow" target="_blank"> REST API与Flask和Python </a>课程的代码。</p><pre class="iy iz ja jb fd lm kn ln lo aw lp bi"><span id="9b6b" class="lq kp hi kn b fi lr ls l lt lu">$ touch app.py</span></pre><p id="b376" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我们现在可以打开<em class="ll"> app.py </em>文件，开始构建我们的应用程序。文件名可以是你选择的任何一个，但是<em class="ll"> app.py </em>和<em class="ll"> server.py </em>是约定。在文件的最顶端，我们必须导入一些内容:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lv lw l"/></div></figure><p id="0026" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我们必须从导入的<em class="ll"> Flask </em>类创建一个<em class="ll">app</em>；我们在导入的包下执行此操作:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lv lw l"/></div></figure><p id="4f8e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">dunder name(名字中间夹着两个下划线)给每个文件一个唯一的名字，所以当我们启动flask应用程序时，它告诉Flask它的唯一位置。</p><p id="4426" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">因为这是一个基本的应用程序，我们将用一些基本数据创建我们的商店列表。现实世界中的应用程序会使用某种形式的数据库来实现数据持久性。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lv lw l"/></div></figure><p id="6bf3" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">让我们创建第一条路线:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lv lw l"/></div></figure><p id="7c9e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这是渲染Hello，World的基本回家路线！在浏览器上。</p><p id="09e3" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">让我们创建第一个GET方法:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lv lw l"/></div></figure><p id="efeb" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">上面的代码是对我们的商店端点的GET请求，它检索我们的所有商店商品；app.route是一个装饰器，它路由我们所有的请求。<em class="ll"> jsonify </em>将数据序列化为JSON，并封装在flask响应中。通过这种方式，它被正确地解析为调用客户端的JSON。</p><p id="bdfc" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">注意:</strong>第一行是一个注释，描述了我们将点击哪个端点来发出请求。</p><p id="af2a" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">让我们创建下一个GET方法:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lv lw l"/></div></figure><p id="ae8c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这是一个GET请求，从我们的<code class="du kk kl km kn b">stores</code>集合中检索一个商店。请注意我们是如何构造URL的。这里，我们在URL中传递商店的名称。一旦点击了这个<code class="du kk kl km kn b">stores/</code>端点，我们的URL中的<code class="du kk kl km kn b">/</code>后缀就会被提取出来，并与我们的stores集合进行比较，以找到一个匹配。如果有匹配的，就返回。如果没有，它将返回一个定制的JSON错误响应。</p><p id="da84" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">现在，让我们创建我们的第一个POST方法。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lv lw l"/></div></figure><p id="dd97" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">你看到我们在app.route decorator中有另一个论点了吗？这是一个HTTP POST动词。您可能想知道为什么在我们的第一个GET方法中没有。这是因为GET是默认方法，所以当省略时，假设您正在发出GET请求。stores是一个列表，所以我们使用<code class="du kk kl km kn b">append</code>方法向其中添加一个新的商店。</p><p id="6178" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">让我们向商店添加一件商品:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lv lw l"/></div></figure><p id="4059" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">让我们从商店中检索商品:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lv lw l"/></div></figure><p id="fcec" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">最后但同样重要的是，让我们添加启动服务器的run方法:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lv lw l"/></div></figure><p id="d3aa" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">参见下面的完整代码:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lv lw l"/></div></figure><h1 id="66b0" class="ko kp hi bd kq kr ks kt ku kv kw kx ky io kz ip la ir lb is lc iu ld iv le lf bi translated">结论</h1><p id="4237" class="pw-post-body-paragraph jo jp hi jq b jr lg ij jt ju lh im jw jx li jz ka kb lj kd ke kf lk kh ki kj hb bi translated">我们已经了解了什么是HTTP动词，并使用它们从头开始构建了一个基本的Flask REST API。有了这个基础，你就可以继续前进，创造出令人惊叹的东西。</p><p id="97a0" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">编码快乐！</p></div></div>    
</body>
</html>