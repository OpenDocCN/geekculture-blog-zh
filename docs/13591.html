<html>
<head>
<title>OAuth 2.0 Authentication Protocol</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">OAuth 2.0认证协议</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/oauth-2-0-authentication-protocol-3768a6535c40?source=collection_archive---------6-----------------------#2022-07-17">https://medium.com/geekculture/oauth-2-0-authentication-protocol-3768a6535c40?source=collection_archive---------6-----------------------#2022-07-17</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><h1 id="7265" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">OAuth 2.0</h1><p id="02ae" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">OAuth 2.0是授权的行业标准协议。OAuth 2.0关注客户端开发人员的简单性，同时为web应用程序、桌面应用程序、移动电话和客厅设备提供特定的授权流。该规范及其扩展正在IETF OAuth工作组内开发。</p></div><div class="ab cl kc kd gp ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hb hc hd he hf"><h1 id="5164" class="if ig hi bd ih ii kj ik il im kk io ip iq kl is it iu km iw ix iy kn ja jb jc bi translated">身份验证与授权</h1><p id="6fcf" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">简而言之，身份验证是验证用户身份的过程，而授权是验证用户有权访问哪些内容的过程。</p><p id="af0a" class="pw-post-body-paragraph jd je hi jf b jg ko ji jj jk kp jm jn jo kq jq jr js kr ju jv jw ks jy jz ka hb bi translated"><strong class="jf hj">认证</strong>:</p><ul class=""><li id="e658" class="kt ku hi jf b jg ko jk kp jo kv js kw jw kx ka ky kz la lb bi translated">用于识别用户身份的有效性</li><li id="b785" class="kt ku hi jf b jg lc jk ld jo le js lf jw lg ka ky kz la lb bi translated">要求用户使用有效凭据来识别其身份</li><li id="9693" class="kt ku hi jf b jg lc jk ld jo le js lf jw lg ka ky kz la lb bi translated">通常在认证之前完成</li><li id="6514" class="kt ku hi jf b jg lc jk ld jo le js lf jw lg ka ky kz la lb bi translated">通常通过ID标记进行验证</li></ul><p id="48df" class="pw-post-body-paragraph jd je hi jf b jg ko ji jj jk kp jm jn jo kq jq jr js kr ju jv jw ks jy jz ka hb bi translated"><strong class="jf hj">授权:</strong></p><ul class=""><li id="42c1" class="kt ku hi jf b jg ko jk kp jo kv js kw jw kx ka ky kz la lb bi translated">用于标识用户可以或不可以访问的内容。</li><li id="0609" class="kt ku hi jf b jg lc jk ld jo le js lf jw lg ka ky kz la lb bi translated">验证是否通过策略和规则允许访问</li><li id="fea5" class="kt ku hi jf b jg lc jk ld jo le js lf jw lg ka ky kz la lb bi translated">通常在用户通过身份验证后出现。</li><li id="c8b8" class="kt ku hi jf b jg lc jk ld jo le js lf jw lg ka ky kz la lb bi translated">使用接入令牌传输信息。</li></ul><p id="6e2b" class="pw-post-body-paragraph jd je hi jf b jg ko ji jj jk kp jm jn jo kq jq jr js kr ju jv jw ks jy jz ka hb bi translated">OAuth用于授权一个服务的特定功能，而不是认证用户。T9】</p></div><div class="ab cl kc kd gp ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hb hc hd he hf"><h1 id="c20c" class="if ig hi bd ih ii kj ik il im kk io ip iq kl is it iu km iw ix iy kn ja jb jc bi translated">用例</h1><ul class=""><li id="edef" class="kt ku hi jf b jg jh jk jl jo li js lj jw lk ka ky kz la lb bi translated">照片打印应用程序可以通过Google认证来使用Google相册上的图片。</li><li id="68eb" class="kt ku hi jf b jg lc jk ld jo le js lf jw lg ka ky kz la lb bi translated">面向游戏玩家的社交网站可以显示用户在不同游戏平台上的分数。</li><li id="dde6" class="kt ku hi jf b jg lc jk ld jo le js lf jw lg ka ky kz la lb bi translated">在线健身房平台可以访问用户的总结健康数据，以便为用户策划特定的挑战。</li></ul></div><div class="ab cl kc kd gp ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hb hc hd he hf"><h1 id="b363" class="if ig hi bd ih ii kj ik il im kk io ip iq kl is it iu km iw ix iy kn ja jb jc bi translated">真实演员</h1><p id="7f5a" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">OAuth流中的参与者如下:</p><ul class=""><li id="8580" class="kt ku hi jf b jg ko jk kp jo kv js kw jw kx ka ky kz la lb bi translated"><strong class="jf hj">资源所有者</strong>:拥有资源服务器中的数据。例如，我是我的脸书个人资料的资源所有者。</li><li id="ff8f" class="kt ku hi jf b jg lc jk ld jo le js lf jw lg ka ky kz la lb bi translated"><strong class="jf hj">资源服务器</strong>:存储应用程序想要访问的数据的API</li><li id="d5a8" class="kt ku hi jf b jg lc jk ld jo le js lf jw lg ka ky kz la lb bi translated"><strong class="jf hj">客户端</strong>:想要访问你的数据的应用</li><li id="456d" class="kt ku hi jf b jg lc jk ld jo le js lf jw lg ka ky kz la lb bi translated"><strong class="jf hj">授权服务器</strong>:OAuth的主引擎</li></ul><figure class="lm ln lo lp fd lq er es paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="er es ll"><img src="../Images/11a80e94f773b9e409d8453eebcef05b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Vwa-Vm9AeTBmMo2-11I64Q.png"/></div></div><figcaption class="lx ly et er es lz ma bd b be z dx">OAuth 2.0 Actors</figcaption></figure><p id="155c" class="pw-post-body-paragraph jd je hi jf b jg ko ji jj jk kp jm jn jo kq jq jr js kr ju jv jw ks jy jz ka hb bi translated">资源所有者是一个可以随不同凭据而变化的角色。可以是最终用户，也可以是公司。</p><p id="b66d" class="pw-post-body-paragraph jd je hi jf b jg ko ji jj jk kp jm jn jo kq jq jr js kr ju jv jw ks jy jz ka hb bi translated">客户可以是公开的也可以是保密的。在OAuth命名法中，两者有显著的区别。可以信任机密客户端来存储秘密。它们不在桌面上运行，也不通过应用商店发布。人们无法对它们进行逆向工程并获得密钥。它们运行在终端用户无法访问的受保护区域。</p><p id="610b" class="pw-post-body-paragraph jd je hi jf b jg ko ji jj jk kp jm jn jo kq jq jr js kr ju jv jw ks jy jz ka hb bi translated">公共客户端是浏览器、移动应用和物联网设备。</p></div><div class="ab cl kc kd gp ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hb hc hd he hf"><h1 id="9b98" class="if ig hi bd ih ii kj ik il im kk io ip iq kl is it iu km iw ix iy kn ja jb jc bi translated">OAuth令牌</h1><p id="b9f1" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated"><strong class="jf hj">访问令牌</strong>是客户端用来访问资源服务器(API)的令牌。它们是短暂的，TTL是以小时和分钟为单位，而不是以天和月为单位。您可以从公共客户端获得访问令牌。它们旨在针对互联网规模问题进行优化。因为这些令牌可以是短期的和横向扩展的，它们不能被撤销，您只需等待它们超时。</p><p id="aa72" class="pw-post-body-paragraph jd je hi jf b jg ko ji jj jk kp jm jn jo kq jq jr js kr ju jv jw ks jy jz ka hb bi translated"><strong class="jf hj">刷新令牌</strong>是客户端用来获取新访问令牌的令牌。它们的寿命比访问令牌长得多，即几天、几个月和几年。</p><p id="502c" class="pw-post-body-paragraph jd je hi jf b jg ko ji jj jk kp jm jn jo kq jq jr js kr ju jv jw ks jy jz ka hb bi translated">刷新令牌可以被撤销。这为服务器提供了强制客户端轮换密码的能力。客户端可以使用刷新令牌来获取新的访问令牌，这些访问令牌会访问所有API资源。每次刷新访问令牌时，客户端都会获得一个新的加密签名令牌。系统内置了密钥轮换。</p><figure class="lm ln lo lp fd lq er es paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="er es mb"><img src="../Images/fa45d182ffae20fe45e782d04cb1caa0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*igVf6lGcvRB6E3Su6C4plQ.png"/></div></div><figcaption class="lx ly et er es lz ma bd b be z dx">Lifecycle of OAuth 2.0</figcaption></figure></div><div class="ab cl kc kd gp ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hb hc hd he hf"><h1 id="320b" class="if ig hi bd ih ii kj ik il im kk io ip iq kl is it iu km iw ix iy kn ja jb jc bi translated">OAuth流</h1><ul class=""><li id="fcd6" class="kt ku hi jf b jg jh jk jl jo li js lj jw lk ka ky kz la lb bi translated"><strong class="jf hj">授权码流程:</strong>授权码流程用授权码换代币。这个流程的先决条件是客户端已经拥有应用程序的密钥。应用程序接收用户的授权码，并将其与客户端ID和客户端机密一起转发给OAuth授权服务器。授权服务器生成ID令牌、访问令牌和可选的刷新令牌，然后将它们提供给应用程序。然后，web应用程序可以使用访问令牌，通过用户凭证获得对目标API的访问。</li><li id="aff7" class="kt ku hi jf b jg lc jk ld jo le js lf jw lg ka ky kz la lb bi translated"><strong class="jf hj">客户端凭证流</strong>:客户端凭证流允许应用程序将它们的客户端秘密和客户端ID传递给授权服务器，授权服务器对用户进行身份验证，并返回一个令牌。这不需要任何用户干预，因为“用户”通常是机器或服务角色。</li><li id="6aeb" class="kt ku hi jf b jg lc jk ld jo le js lf jw lg ka ky kz la lb bi translated"><strong class="jf hj">资源所有者密码流</strong>:资源所有者密码流要求用户通过表单提交他们的凭证。在授予访问令牌之前，凭证被传送到后端，并且可以被保留以供将来使用。该应用程序必须完全可信。所以一般不推荐这种流量。</li><li id="d965" class="kt ku hi jf b jg lc jk ld jo le js lf jw lg ka ky kz la lb bi translated"><strong class="jf hj">表单Post的隐式流:</strong>web应用程序通过前端通道请求和接收令牌，不需要额外的后端调用或秘密。通过这一过程，您不必使用、维护、获取或保护应用程序中的机密。</li><li id="faeb" class="kt ku hi jf b jg lc jk ld jo le js lf jw lg ka ky kz la lb bi translated"><strong class="jf hj">混合流程</strong>:多种方法的混合</li><li id="4df0" class="kt ku hi jf b jg lc jk ld jo le js lf jw lg ka ky kz la lb bi translated"><strong class="jf hj">设备授权流程:</strong>授权设备而非用户</li><li id="2346" class="kt ku hi jf b jg lc jk ld jo le js lf jw lg ka ky kz la lb bi translated"><strong class="jf hj">PKCE授权码流程</strong></li></ul></div><div class="ab cl kc kd gp ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hb hc hd he hf"><h1 id="1ca2" class="if ig hi bd ih ii kj ik il im kk io ip iq kl is it iu km iw ix iy kn ja jb jc bi translated">结论</h1><p id="453c" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">OAuth 2.0是授权访问API的授权框架。它涉及请求资源所有者授权/同意的范围的客户端。授权许可被交换为访问令牌和刷新令牌(取决于流)。有多个流程来处理不同的客户端和授权场景。jwt可以用于授权服务器和资源服务器之间的结构化令牌。</p></div><div class="ab cl kc kd gp ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hb hc hd he hf"><p id="a026" class="pw-post-body-paragraph jd je hi jf b jg ko ji jj jk kp jm jn jo kq jq jr js kr ju jv jw ks jy jz ka hb bi translated">祝贺你坚持到了最后！在<a class="ae kb" href="https://twitter.com/bot_pragmatic" rel="noopener ugc nofollow" target="_blank"><em class="lh">Twitter</em></a><em class="lh"/><a class="ae kb" href="https://github.com/abinator-1308/abinator-1308" rel="noopener ugc nofollow" target="_blank"><em class="lh">GitHub</em></a><em class="lh"/><a class="ae kb" rel="noopener" href="/@abhinav.as1308"><em class="lh">Medium</em></a><em class="lh"/><a class="ae kb" href="https://www.linkedin.com/in/abinator-1308/" rel="noopener ugc nofollow" target="_blank"><em class="lh">LinkedIn</em></a><em class="lh">，或者</em><a class="ae kb" href="https://www.instagram.com/abinator_1308/" rel="noopener ugc nofollow" target="_blank"><em class="lh">insta gram</em></a><em class="lh">上随意谈论科技或者任何很酷的项目。</em></p><p id="080f" class="pw-post-body-paragraph jd je hi jf b jg ko ji jj jk kp jm jn jo kq jq jr js kr ju jv jw ks jy jz ka hb bi translated">感谢阅读！</p></div><div class="ab cl kc kd gp ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hb hc hd he hf"><h1 id="5ad0" class="if ig hi bd ih ii kj ik il im kk io ip iq kl is it iu km iw ix iy kn ja jb jc bi translated">参考</h1><ul class=""><li id="46ab" class="kt ku hi jf b jg jh jk jl jo li js lj jw lk ka ky kz la lb bi translated"><a class="ae kb" href="https://oauth.net/2/" rel="noopener ugc nofollow" target="_blank">https://oauth.net/2/</a></li><li id="943d" class="kt ku hi jf b jg lc jk ld jo le js lf jw lg ka ky kz la lb bi translated"><a class="ae kb" href="https://github.com/golang-jwt/jwt" rel="noopener ugc nofollow" target="_blank">https://github.com/golang-jwt/jwt</a></li><li id="0470" class="kt ku hi jf b jg lc jk ld jo le js lf jw lg ka ky kz la lb bi translated"><a class="ae kb" href="https://github.com/dgrijalva/jwt-go" rel="noopener ugc nofollow" target="_blank">https://github.com/dgrijalva/jwt-go</a></li><li id="1d09" class="kt ku hi jf b jg lc jk ld jo le js lf jw lg ka ky kz la lb bi translated"><a class="ae kb" href="https://www.youtube.com/watch?v=-Scg9INymBs" rel="noopener ugc nofollow" target="_blank">https://www.youtube.com/watch?v=-Scg9INymBs</a></li><li id="2afe" class="kt ku hi jf b jg lc jk ld jo le js lf jw lg ka ky kz la lb bi translated"><a class="ae kb" href="https://auth0.com/docs/get-started/identity-fundamentals/authentication-and-authorization" rel="noopener ugc nofollow" target="_blank">https://auth 0 . com/docs/get-started/identity-fundamentals/认证和授权</a></li><li id="b129" class="kt ku hi jf b jg lc jk ld jo le js lf jw lg ka ky kz la lb bi translated"><a class="ae kb" href="https://tools.ietf.org/id/draft-ietf-oauth-use-cases-03.html" rel="noopener ugc nofollow" target="_blank">https://tools . IETF . org/id/draft-IETF-oauth-use-cases-03 . html</a></li><li id="95d3" class="kt ku hi jf b jg lc jk ld jo le js lf jw lg ka ky kz la lb bi translated"><a class="ae kb" href="https://developer.okta.com/blog/2017/06/21/what-the-heck-is-oauth" rel="noopener ugc nofollow" target="_blank">https://developer . okta . com/blog/2017/06/21/what-the-heck-is-oauth</a></li><li id="eb7e" class="kt ku hi jf b jg lc jk ld jo le js lf jw lg ka ky kz la lb bi translated"><a class="ae kb" href="https://frontegg.com/blog/oauth-flows" rel="noopener ugc nofollow" target="_blank">https://frontegg.com/blog/oauth-flows</a></li></ul></div></div>    
</body>
</html>