<html>
<head>
<title>Part 1: VerneMQ — a great alternative</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">第1部分:VerneMQ——一个很好的选择</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/part-1-vernemq-a-great-alternative-9ebf75486e81?source=collection_archive---------5-----------------------#2021-09-01">https://medium.com/geekculture/part-1-vernemq-a-great-alternative-9ebf75486e81?source=collection_archive---------5-----------------------#2021-09-01</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/dd52a5cded5eb2b9b2100e63d0115197.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5dDEtZpyT1Hjr7GITq_BQw.png"/></div></div></figure><p id="c91f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">本系列文章由3部分组成:<br/> <a class="ae jo" rel="noopener" href="/geekculture/part-1-vernemq-a-great-alternative-9ebf75486e81?sk=5665e157d748ecc249e93a9ce9697ca2"> <strong class="is hj">第1部分:VerneMQ —一个很好的选择</strong> </a> <br/> <a class="ae jo" href="https://josipvojak.com/part-2-vernemq-acl-using-mysql-database-and-cluster-setup-288fb3d2eff8?sk=c53c5b550a48eaef1c77dcdc20a4e0e3" rel="noopener ugc nofollow" target="_blank"> <strong class="is hj">第2部分:VerneMQ —使用MySQL数据库和集群设置的ACL</strong></a><br/><strong class="is hj">第3部分:VerneMQ—用Graphite、Prometheus和Grafana </strong>(正在进行中的<em class="jp"/>)监控指标</p><p id="cb4e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这篇文章是基于对VerneMQ的介绍——它的用途，它的特别之处，你为什么会考虑它，以及与其他经纪人的比较。</p></div><div class="ab cl jq jr gp js" role="separator"><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv"/></div><div class="hb hc hd he hf"><h1 id="906c" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">介绍</h1><p id="c170" class="pw-post-body-paragraph iq ir hi is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hb bi translated">VerneMQ是一个MQTT发布/订阅消息代理，它实现了标准的MQTT协议。它是作为分布式消息代理而构建的，可确保在节点或网络故障的情况下继续运行，并具有简单的横向可伸缩性。</p><p id="4881" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">它使用无主机集群技术。</p><p id="23f3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">从一开始，就有3件重要的事情需要提及。它具有:</p><ul class=""><li id="71ac" class="la lb hi is b it iu ix iy jb lc jf ld jj le jn lf lg lh li bi translated"><strong class="is hj">无限制的商业重用</strong> —在开放源代码Apache2许可下工作。这意味着它对商业修改是完全开放和自由的</li><li id="57ae" class="la lb hi is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li bi translated"><strong class="is hj">没有前期投资</strong>——因为它是开源的，你可以想用多久就用多久</li><li id="c365" class="la lb hi is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li bi translated"><strong class="is hj">退出风险</strong>——如果需要从VerneMQ切换，您应该能够在任何其他实现MQTT规范的代理上运行您的项目</li></ul><p id="b126" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">使用已经被证实的电信技术</strong></p><p id="ee75" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">VerneMQ使用了爱立信开发的一项已经得到验证的技术。它利用OTP，这是一个开放的电信平台，事实上用于在Ericssons交换机上运行大约40%的全球移动数据流量。</p><p id="53a5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">容易缩放</strong></p><p id="e42d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">它内置于Erlang中，可以连接到VerneMQ节点的并发客户端数量完全受底层硬件(CPU和RAM)的限制。您可以轻松地向VerneMQ集群添加节点。</p><p id="8441" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">现场重新配置&amp;监控</strong></p><p id="cc05" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">已经有内置可扩展度量系统的集成监控解决方案。VerneMQ还允许集群范围内的即时实时重新配置。</p></div><div class="ab cl jq jr gp js" role="separator"><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv"/></div><div class="hb hc hd he hf"><h1 id="209d" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">MQTT概述</h1><figure class="lp lq lr ls fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lo"><img src="../Images/f59cc35b5fe9d098e04de816add39b63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0-jwLfS3P0d-9u3x9bCqZA.png"/></div></div></figure><h2 id="ebdf" class="lt jy hi bd jz lu lv lw kd lx ly lz kh jb ma mb kl jf mc md kp jj me mf kt mg bi translated"><strong class="ak">服务质量</strong></h2><p id="a7c3" class="pw-post-body-paragraph iq ir hi is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hb bi translated">有三种可能的传输保证方式可供选择— <strong class="is hj"> QoS 0、QoS 1 </strong>和<strong class="is hj"> QoS 2 </strong>。</p><ul class=""><li id="1acd" class="la lb hi is b it iu ix iy jb lc jf ld jj le jn lf lg lh li bi translated"><strong class="is hj"> QoS 0 —一劳永逸</strong> —代理不需要确认客户端收到消息。反之亦然。</li><li id="7c30" class="la lb hi is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li bi translated"><strong class="is hj"> QoS 1 —至少一次</strong> —代理将在收到后发送确认消息。如果消息没有在特定的时间范围内发送，客户端必须重试该消息。完全相同的情况应该发生在客户端——如果没有发送确认消息，代理将重新传递消息</li><li id="4824" class="la lb hi is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li bi translated"><strong class="is hj"> QoS 2 —恰好一次</strong> —第一部分与QoS 1相同。第二部分确保就信息的立场达成一致。重点是避免重复路由。</li></ul><h2 id="4bfd" class="lt jy hi bd jz lu lv lw kd lx ly lz kh jb ma mb kl jf mc md kp jj me mf kt mg bi translated"><strong class="ak">遗嘱(LWT) </strong></h2><p id="ce25" class="pw-post-body-paragraph iq ir hi is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hb bi translated">这让客户端在连接到代理时提供一个证明。其背后的想法是，如果在某个时间点，客户端意外断开连接(例如断电)，它可以让代理将消息传递给其他客户端。</p><h2 id="9918" class="lt jy hi bd jz lu lv lw kd lx ly lz kh jb ma mb kl jf mc md kp jj me mf kt mg bi translated"><strong class="ak">清理会话</strong></h2><p id="33e4" class="pw-post-body-paragraph iq ir hi is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hb bi translated">当连接非常昂贵或有限时，此功能特别有用。最初，当客户机连接到代理时，会创建一个新的MQTT会话。MQTT会话实际上由两部分组成——第一部分存储在<strong class="is hj">客户端</strong>，第二部分存储在<strong class="is hj">代理端</strong>。</p><p id="086b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">客户端会话状态:</strong></p><ul class=""><li id="4cbd" class="la lb hi is b it iu ix iy jb lc jf ld jj le jn lf lg lh li bi translated">QoS 1和QoS 2消息已发送到服务器，但尚未被完全确认。</li><li id="5d9e" class="la lb hi is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li bi translated">已从服务器收到但尚未完全确认的QoS 2消息。</li></ul><p id="4620" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">服务器端会话状态:</strong></p><ul class=""><li id="61d0" class="la lb hi is b it iu ix iy jb lc jf ld jj le jn lf lg lh li bi translated">会话的存在，即使会话状态的其余部分为空。</li><li id="2dad" class="la lb hi is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li bi translated">客户的订阅。</li><li id="c0c7" class="la lb hi is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li bi translated">QoS 1和QoS 2消息已发送到客户端，但尚未得到完全确认。</li><li id="e64d" class="la lb hi is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li bi translated">QoS 1和QoS 2消息等待传输到客户端。</li><li id="917c" class="la lb hi is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li bi translated">从客户端收到的QoS 2消息，但尚未完全确认。</li><li id="47f5" class="la lb hi is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li bi translated">可选地，QoS 0消息等待传输到客户端。</li></ul><p id="d9ed" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">离线时，代理保持会话，并累积与设备订阅匹配的所有消息。当客户端连接回代理时，所有消息都被传递。</p><h2 id="1d30" class="lt jy hi bd jz lu lv lw kd lx ly lz kh jb ma mb kl jf mc md kp jj me mf kt mg bi translated"><strong class="ak">保留的消息</strong></h2><p id="c17e" class="pw-post-body-paragraph iq ir hi is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hb bi translated">可以发布带有“保留标志”的消息。仅当客户端订阅主题时，保留的消息才会被传递。每个主题只能有一条保留消息。任何新保留的消息都会覆盖以前的消息。</p><h2 id="7cc8" class="lt jy hi bd jz lu lv lw kd lx ly lz kh jb ma mb kl jf mc md kp jj me mf kt mg bi translated"><strong class="ak">基于主题的路由</strong></h2><p id="7c38" class="pw-post-body-paragraph iq ir hi is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hb bi translated">主题大多以纯文本形式呈现，如下所示:</p><pre class="lp lq lr ls fd mh mi mj mk aw ml bi"><span id="a07b" class="lt jy hi mi b fi mm mn l mo mp">example/first<br/>example/second</span></pre><p id="56e3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">订阅主题的客户端将收到任何<strong class="is hj">未来</strong>消息和一条<strong class="is hj">保留</strong>消息(如果存在)。</p><p id="70bf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">主题通配符:</p><pre class="lp lq lr ls fd mh mi mj mk aw ml bi"><span id="a030" class="lt jy hi mi b fi mm mn l mo mp">example/+/first/#</span></pre><ul class=""><li id="a079" class="la lb hi is b it iu ix iy jb lc jf ld jj le jn lf lg lh li bi translated">+是一个单级通配符，忽略层次结构中的一个级别</li><li id="30c7" class="la lb hi is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li bi translated">#是忽略所有剩余级别的通配符</li></ul><h2 id="47ba" class="lt jy hi bd jz lu lv lw kd lx ly lz kh jb ma mb kl jf mc md kp jj me mf kt mg bi translated"><strong class="ak">消息队列</strong></h2><p id="b15f" class="pw-post-body-paragraph iq ir hi is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hb bi translated">该系统接收、存储和转发消息。它很可能基于(简单的)推送和弹出操作。推送操作在队列前面插入新元素。Pop操作读取最旧的消息，然后将其删除。</p><h2 id="bc31" class="lt jy hi bd jz lu lv lw kd lx ly lz kh jb ma mb kl jf mc md kp jj me mf kt mg bi translated"><strong class="ak">发布/订阅</strong></h2><p id="fd59" class="pw-post-body-paragraph iq ir hi is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hb bi translated">消息传递模式，客户端向服务器(代理)订阅某个主题。通过向某个主题发布消息，可以在设备和客户机/服务器之间交换消息。发布/订阅模式实际上存在于各种各样的协议上——AMQP、MQTT、JMS、XMP等等。</p><h1 id="3448" class="jx jy hi bd jz ka mq kc kd ke mr kg kh ki ms kk kl km mt ko kp kq mu ks kt ku bi translated">功能概述</h1><p id="8735" class="pw-post-body-paragraph iq ir hi is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hb bi translated">VerneMQ有很多特性。它实现了MQTT 3.1、3.1.1和5.0规范。由代理提供并由VerneMQ团队实现的一些最有趣的特性如下:</p><ul class=""><li id="cc5b" class="la lb hi is b it iu ix iy jb lc jf ld jj le jn lf lg lh li bi translated">QoS 0、QoS 1、QoS 2级别</li><li id="267b" class="la lb hi is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li bi translated">基于文件的认证和授权<a class="ae jo" href="https://vernemq.com/docs/configuration/file-auth.html" rel="noopener ugc nofollow" target="_blank">【文件】</a></li><li id="7faf" class="la lb hi is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li bi translated">PostgreSQL、MySQL、Redis &amp; MongoDB认证和授权<a class="ae jo" href="https://vernemq.com/docs/configuration/db-auth.html" rel="noopener ugc nofollow" target="_blank">【文档】</a></li><li id="6c45" class="la lb hi is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li bi translated">桥式支架<a class="ae jo" href="https://vernemq.com/docs/configuration/bridge.html" rel="noopener ugc nofollow" target="_blank">【文档】</a></li><li id="e8ba" class="la lb hi is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li bi translated">用于监控和报告的$SYS树<a class="ae jo" href="https://vernemq.com/docs/monitoring/systree.html" rel="noopener ugc nofollow" target="_blank">【文档】</a></li><li id="12ff" class="la lb hi is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li bi translated">TLS (SSL)加密<a class="ae jo" href="https://vernemq.com/docs/configuration/listeners.html" rel="noopener ugc nofollow" target="_blank">【文档】</a></li><li id="d9e2" class="la lb hi is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li bi translated">Websockets支持<a class="ae jo" href="https://vernemq.com/docs/configuration/websockets.html" rel="noopener ugc nofollow" target="_blank">【文档】</a></li><li id="ab1a" class="la lb hi is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li bi translated">集群支持<a class="ae jo" href="https://vernemq.com/docs/clustering" rel="noopener ugc nofollow" target="_blank">【文档】</a></li><li id="38ea" class="la lb hi is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li bi translated">日志记录(控制台、文件、系统日志)<a class="ae jo" href="https://vernemq.com/docs/configuration/logging.html" rel="noopener ugc nofollow" target="_blank">【文档】</a></li><li id="c613" class="la lb hi is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li bi translated">汇报给Graphite <a class="ae jo" href="https://vernemq.com/docs/monitoring/graphite.html" rel="noopener ugc nofollow" target="_blank">【文档】</a></li><li id="1608" class="la lb hi is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li bi translated">向普罗米修斯公司汇报<a class="ae jo" href="https://vernemq.com/docs/monitoring/prometheus.html" rel="noopener ugc nofollow" target="_blank">【文件】</a></li><li id="d9e9" class="la lb hi is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li bi translated">可扩展插件架构<a class="ae jo" href="https://vernemq.com/docs/plugindevelopment/" rel="noopener ugc nofollow" target="_blank">【文档】</a></li><li id="838b" class="la lb hi is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li bi translated">共享订阅<a class="ae jo" href="https://vernemq.com/docs/configuration/shared_subscriptions.html" rel="noopener ugc nofollow" target="_blank">【文档】</a></li><li id="7b70" class="la lb hi is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li bi translated">每个ClientId多个会话<a class="ae jo" href="https://vernemq.com/docs/configuration/balancing.html" rel="noopener ugc nofollow" target="_blank">【文档】</a></li><li id="8eec" class="la lb hi is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li bi translated">会话平衡<a class="ae jo" href="https://vernemq.com/docs/configuration/balancing.html" rel="noopener ugc nofollow" target="_blank">【文档】</a></li><li id="fa87" class="la lb hi is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li bi translated">消息负载调整<a class="ae jo" href="https://vernemq.com/docs/configuration/options.html" rel="noopener ugc nofollow" target="_blank">【文档】</a></li><li id="1114" class="la lb hi is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li bi translated">消息减载(用于系统保护)<a class="ae jo" href="https://vernemq.com/docs/configuration/options.html" rel="noopener ugc nofollow" target="_blank">【文档】</a></li><li id="4a93" class="la lb hi is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li bi translated">离线消息存储(基于LevelDB)</li><li id="eb7e" class="la lb hi is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li bi translated">队列可以处理FIFO或LIFO类型的消息。<a class="ae jo" href="https://vernemq.com/docs/configuration/hiddenoptions.html" rel="noopener ugc nofollow" target="_blank">【文档】</a></li><li id="bc67" class="la lb hi is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li bi translated">代理v2协议<a class="ae jo" href="https://vernemq.com/docs/configuration/listeners.html#proxy-protocol" rel="noopener ugc nofollow" target="_blank">【文档】</a></li><li id="87c1" class="la lb hi is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li bi translated">Lua插件脚本支持<a class="ae jo" href="https://vernemq.com/docs/plugindevelopment/luaplugins.html" rel="noopener ugc nofollow" target="_blank">【文档】</a></li><li id="ebb0" class="la lb hi is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li bi translated">Webhooks <a class="ae jo" href="https://vernemq.com/docs/plugindevelopment/webhookplugins.html" rel="noopener ugc nofollow" target="_blank">【文档】</a></li><li id="19fe" class="la lb hi is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li bi translated">HTTP管理API <a class="ae jo" href="https://vernemq.com/docs/http-administration/" rel="noopener ugc nofollow" target="_blank">【文档】</a></li></ul><h1 id="354d" class="jx jy hi bd jz ka mq kc kd ke mr kg kh ki ms kk kl km mt ko kp kq mu ks kt ku bi translated">经纪人比较</h1><figure class="lp lq lr ls fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mv"><img src="../Images/6f8e6e1aa73a97ef78989574c9434787.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NbafLln7v020D1OwOHYd-A.png"/></div></div><figcaption class="mw mx et er es my mz bd b be z dx">Connection estimates are based on results carried out by product owners / 3rd party.</figcaption></figure><p id="4196" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">尽管有代理提供更多的连接和更好的吞吐量，VerneMQ给出了三个你可以优先考虑的东西:</p><ul class=""><li id="2476" class="la lb hi is b it iu ix iy jb lc jf ld jj le jn lf lg lh li bi translated">非常容易设置</li><li id="3493" class="la lb hi is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li bi translated">大量功能以及与Graphite、Prometheus和Grafana等优秀工具的集成</li><li id="ba56" class="la lb hi is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li bi translated">易于扩展的集群</li></ul><p id="c7b4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">设置是多么容易，告诉下面的<code class="du na nb nc mi b">docker-compose.yml</code>文件</p><pre class="lp lq lr ls fd mh mi mj mk aw ml bi"><span id="0167" class="lt jy hi mi b fi mm mn l mo mp">version: "3"<br/>services:<br/>  vernemq:<br/>    image: erlio/docker-vernemq<br/>    container_name: vernemq<br/>    restart: always<br/>    environment:<br/>      DOCKER_VERNEMQ_ALLOW_ANONYMOUS: 'on'<br/>      DOCKER_VERNEMQ_ACCEPT_EULA: 'yes'<br/>    ports:<br/>      - 1883:1883<br/>      - 8888:8888<br/>    expose:<br/>      - 1883</span></pre><p id="d495" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">可以通过执行docker-compose up -d来运行docker容器。</p><p id="7c79" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我在上将<code class="du na nb nc mi b">ALLOW_ANONYMOUS</code>标志设置为<em class="jp">，以便每个人都能够订阅和发布到代理，而不需要进行身份验证。</em></p><p id="7f4d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您现在应该可以连接到端口1883了。尝试连接MQTT客户机，比如mosquitto。</p><pre class="lp lq lr ls fd mh mi mj mk aw ml bi"><span id="44d9" class="lt jy hi mi b fi mm mn l mo mp"><strong class="mi hj">#mosquitto_sub -h localhost -p 1883 -t "test/topic" -d</strong><br/>Client (null) sending CONNECT<br/>Client (null) received CONNACK (0)<br/>Client (null) sending SUBSCRIBE (Mid: 1, Topic: test/topic, QoS: 0, Options: 0x00)<br/>Client (null) received SUBACK<br/>Subscribed (mid: 1): 0</span></pre><p id="7d40" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在端口8888上也有一个状态页面(<a class="ae jo" href="http://localhost:8888/status" rel="noopener ugc nofollow" target="_blank">http://localhost:8888/status</a>)。在这里，您应该能够看到集群大小和集群中的单个节点。</p><figure class="lp lq lr ls fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nd"><img src="../Images/2c751f5560183a0ea883c45e58237f7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2oD3cq5pA89d2QL3PPEkgw.png"/></div></div><figcaption class="mw mx et er es my mz bd b be z dx">VerneMQ status page on <a class="ae jo" href="http://localhost:8888/status" rel="noopener ugc nofollow" target="_blank">http://localhost:8888/status</a></figcaption></figure><h1 id="4480" class="jx jy hi bd jz ka mq kc kd ke mr kg kh ki ms kk kl km mt ko kp kq mu ks kt ku bi translated">结论</h1><p id="2137" class="pw-post-body-paragraph iq ir hi is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hb bi translated">一方面，可能有更好的商业代理，但要么更贵(云)，设置更复杂，要么没有免费许可证。</p><p id="29fd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">另一方面，如果你想快速测试，这是一个很好的代理。它真的能让你跟上速度。它有很多插件(用于访问控制列表和认证，以及开发你自己的插件的选项)，开箱即用的集成了一些伟大的工具，如Graphite，Prometheus和Grafana。它提供了一个选项，可以使用带有Kubernetes的集群来处理副本，从而轻松地对其进行扩展。总的来说，如果你正在寻找AWS，RabbitMQ，HiveMQ和Mosquitto的替代产品，VerneMQ应该是你的选择。</p><p id="7337" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我计划继续这个系列，创建一个快速教程，介绍如何使用MySQL用户名和密码设置带有访问控制列表(ACL)的VerneMQ。本文的第二部分将重点介绍如何使用docker swarm来设置集群。</p><p id="b1af" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">接下来:</p><p id="a3d7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae jo" href="https://josipvojak.com/part-2-vernemq-acl-using-mysql-database-and-cluster-setup-288fb3d2eff8?sk=c53c5b550a48eaef1c77dcdc20a4e0e3" rel="noopener ugc nofollow" target="_blank"> <strong class="is hj">第二部分:VerneMQ —使用MySQL数据库的ACL和集群设置</strong> </a></p></div></div>    
</body>
</html>