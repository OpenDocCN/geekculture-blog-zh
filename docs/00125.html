<html>
<head>
<title>Scrapy Item with general fields</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">带有常规字段的零碎项目</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/scrapy-item-with-general-fields-7552bd6e4622?source=collection_archive---------0-----------------------#2020-07-01">https://medium.com/geekculture/scrapy-item-with-general-fields-7552bd6e4622?source=collection_archive---------0-----------------------#2020-07-01</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="4725" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">常规/未知/动态字段</h2></div><p id="e221" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">源代码你可以在这里找到<a class="ae jt" href="https://github.com/alex-ber/scrapy-item/blob/master/alexber/scrapyitem/__init__.py" rel="noopener ugc nofollow" target="_blank"/>。它作为<a class="ae jt" href="https://github.com/alex-ber/scrapy-item" rel="noopener ugc nofollow" target="_blank">报废项目</a>的一部分提供。</p><p id="b469" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您可以从PyPi安装scrapy-item:</p><pre class="ju jv jw jx fd jy jz ka kb aw kc bi"><span id="c7c0" class="kd ke hi jz b fi kf kg l kh ki">python3 -m pip install -U scrapy-item</span></pre><p id="49bd" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">你也应该安装Scrapy。</p><p id="4ca6" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">有时，您正在抓取一个网页或调用接收来自一些具有动态结构的Web服务的响应——可能它只是一个表结构，您想要形成项目和字段属性，或者您可能接收到不同的结果结构，这取决于REST API调用的一些状态。或者你有很多属性，它们可能会根据你传递给请求的参数而改变。</p><p id="c5ab" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您可以直接使用我的GeneralItem，或者(更好地)定义从它继承的项目，如下所示:</p><figure class="ju jv jw jx fd kj"><div class="bz dy l di"><div class="kk kl l"/></div></figure><p id="8a93" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">使用示例:</p><figure class="ju jv jw jx fd kj"><div class="bz dy l di"><div class="kk kl l"/></div></figure><p id="005d" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">另一个例子:</p><figure class="ju jv jw jx fd kj"><div class="bz dy l di"><div class="kk kl l"/></div></figure></div><div class="ab cl km kn gp ko" role="separator"><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr"/></div><div class="hb hc hd he hf"><p id="b40a" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您可能还想查看一下<a class="ae jt" href="https://github.com/scrapy/itemadapter" rel="noopener ugc nofollow" target="_blank"> itemadapter </a>项目:</p><blockquote class="kt"><p id="994b" class="ku kv hi bd kw kx ky kz la lb lc js dx translated"><code class="du ld le lf jz b">ItemAdapter</code>类是数据容器对象的包装器，提供一个通用接口以统一的方式处理不同类型的对象，而不管它们的底层实现。</p><p id="675d" class="ku kv hi bd kw kx ky kz la lb lc js dx translated">当前支持的类型有:</p><p id="8042" class="ku kv hi bd kw kx ky kz la lb lc js dx translated"><code class="du ld le lf jz b"><a class="ae jt" href="https://docs.python.org/3/library/stdtypes.html#dict" rel="noopener ugc nofollow" target="_blank">dict</a></code></p><p id="8e80" class="ku kv hi bd kw kx ky kz la lb lc js dx translated"><code class="du ld le lf jz b"><a class="ae jt" href="https://docs.scrapy.org/en/latest/topics/items.html#scrapy.item.Item" rel="noopener ugc nofollow" target="_blank">scrapy.item.Item</a></code></p><p id="7140" class="ku kv hi bd kw kx ky kz la lb lc js dx translated"><code class="du ld le lf jz b"><a class="ae jt" href="https://docs.python.org/3/library/dataclasses.html" rel="noopener ugc nofollow" target="_blank">dataclass</a></code>基础类</p><p id="6748" class="ku kv hi bd kw kx ky kz la lb lc js dx translated"><code class="du ld le lf jz b"><a class="ae jt" href="https://www.attrs.org" rel="noopener ugc nofollow" target="_blank">attrs</a></code>基础类<br/> …</p></blockquote><pre class="lg lh li lj lk jy jz ka kb aw kc bi"><span id="6fd7" class="kd ke hi jz b fi kf kg l kh ki">&gt;&gt;&gt; from scrapy.item import Item, Field<br/>&gt;&gt;&gt; from itemadapter import ItemAdapter<br/>&gt;&gt;&gt; class InventoryItem(Item):<br/>...     name = Field()<br/>...     price = Field()<br/>...<br/>&gt;&gt;&gt; item = InventoryItem(name="foo", price=10)<br/>&gt;&gt;&gt; adapter = ItemAdapter(item)<br/>&gt;&gt;&gt; adapter.item is item<br/>True<br/>&gt;&gt;&gt; adapter["name"]<br/>'foo'<br/>&gt;&gt;&gt; adapter["name"] = "bar"<br/>&gt;&gt;&gt; adapter["price"] = 5<br/>&gt;&gt;&gt; item<br/>{'name': 'bar', 'price': 5}</span></pre><p id="123d" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae jt" href="https://github.com/scrapy/itemadapter" rel="noopener ugc nofollow" target="_blank">https://github.com/scrapy/itemadapter</a></p><p id="7cd7" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这个项目的首次发布是在2020年4月25日。这是Scrapy的子项目。</p></div><div class="ab cl km kn gp ko" role="separator"><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr"/></div><div class="hb hc hd he hf"><p id="3ff2" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">参见:</strong></p><p id="ead3" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae jt" rel="noopener" href="/@alex_ber/scrapy-live-streaming-data-cdf97434dc15"> Scrapy直播流数据</a></p><p id="e987" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae jt" rel="noopener" href="/@alex_ber/scrapy-state-between-job-runs-b880c7b34a9d">作业运行之间的杂乱状态</a></p><p id="8633" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae jt" rel="noopener" href="/@alex_ber/scrapy-item-with-general-fields-7552bd6e4622">带有通用字段的刺儿头项目</a></p></div></div>    
</body>
</html>