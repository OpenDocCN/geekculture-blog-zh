<html>
<head>
<title>Publish Your Android Library on JitPack for Better Reachability</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在JitPack上发布您的Android库以获得更好的可达性</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/publish-your-android-library-on-jitpack-for-better-reachability-1c978dde726e?source=collection_archive---------21-----------------------#2021-06-22">https://medium.com/geekculture/publish-your-android-library-on-jitpack-for-better-reachability-1c978dde726e?source=collection_archive---------21-----------------------#2021-06-22</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/70b39a7c946f86213ac4a947181f30a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Gg2v9MqYZU9sYJ1_.jpg"/></div></div></figure><h1 id="090c" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">介绍</h1><p id="4704" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">可重用代码从计算开始就存在了，Android也不例外。任何库开发人员的主要目标都是简化抽象代码的复杂性，并将代码捆绑起来，供其他人在他们的项目中重用。</p><p id="c58b" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">android库是任何Android应用程序开发的重要部分之一。我们根据应用需求使用这些，如网络API(翻新、okhttp等。)、图像下载和缓存(Picasso、glide)等等。</p><p id="6267" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">当一段代码被重复或者可以被重用的时候-</p><ul class=""><li id="af12" class="kr ks hi jq b jr km jv kn jz kt kd ku kh kv kl kw kx ky kz bi translated">在一个类中:我们把它移到一个方法中</li><li id="1b7b" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">在应用程序中:我们把它移到一个实用程序类中</li><li id="239c" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">在多重应用中:我们用它创建一个库</li></ul><h1 id="abdb" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">什么是Android库</h1><p id="1fbf" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">Android库的布局与Android应用程序模块的布局相同。创建应用程序所需的任何东西，包括源代码、资源文件和Android清单，都可以包含在内。然而，Android库被编译成Android Archive (AAR)文件，可以用作Android应用程序模块的依赖项，而不是被编译成在设备上运行的APK。</p><h1 id="d68f" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">何时创建Android库</h1><p id="322a" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">有特定的时候，你应该选择Android库。他们是-</p><ul class=""><li id="78b2" class="kr ks hi jq b jr km jv kn jz kt kd ku kh kv kl kw kx ky kz bi translated">当您创建共享通用组件(如事件、实用工具或UI模板)的不同应用程序时。</li><li id="172a" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">如果你正在制作一个有几个APK迭代的应用程序，比如免费版和高级版，并且两者的主要元素是相同的。</li><li id="b3e2" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">当你想公开分享你的解决方案时，比如一个时髦的加载器，或者有创意的视图(按钮，下拉菜单等等)。)</li><li id="814b" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">或者当您想要创建和重用或分发一些可以在不同应用程序中使用的通用解决方案时，如缓存、图像下载、网络API等。</li></ul><h1 id="ba2d" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">入门指南</h1><p id="0929" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">要了解如何发布一个Android库，我们需要简单讲一下Android库的创建。我们还将在一个基本的应用程序流中检查它的使用，并了解如何发布我们的库。</p><h1 id="561e" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">创建Android库</h1><ul class=""><li id="f957" class="kr ks hi jq b jr js jv jw jz lf kd lg kh lh kl kw kx ky kz bi translated">创建新的库模块。</li></ul><figure class="lj lk ll lm fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es li"><img src="../Images/5779eaa82924c69b3a686a82c334b53b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*hwX6mrJCz29CPleK.png"/></div></div></figure><ul class=""><li id="03ef" class="kr ks hi jq b jr km jv kn jz kt kd ku kh kv kl kw kx ky kz bi translated">选择Android库，然后单击下一步。</li></ul><figure class="lj lk ll lm fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ln"><img src="../Images/aac40c0d462595ae41cdeae279cd837e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*LLZr9PwlJ1k72vmV.png"/></div></div></figure><ul class=""><li id="500b" class="kr ks hi jq b jr km jv kn jz kt kd ku kh kv kl kw kx ky kz bi translated">输入模块名称。</li></ul><figure class="lj lk ll lm fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lo"><img src="../Images/819aaefc06ac88110e42ccdc12e21f18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*viX5N_CrxEuBo-tF.png"/></div></div></figure><ul class=""><li id="a008" class="kr ks hi jq b jr km jv kn jz kt kd ku kh kv kl kw kx ky kz bi translated">项目结构看起来如下</li></ul><figure class="lj lk ll lm fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lp"><img src="../Images/f12ae6acb63d5fdbfb53dff07e5e2d52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*VtrQNAXp2KE8lT5n.png"/></div></div></figure><ul class=""><li id="02cd" class="kr ks hi jq b jr km jv kn jz kt kd ku kh kv kl kw kx ky kz bi translated">让我们在库中创建一个电子邮件验证类。</li></ul><figure class="lj lk ll lm fd ij"><div class="bz dy l di"><div class="lq lr l"/></div></figure><p id="4b0b" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">我们的电子邮件验证库已经准备好了。让我们通过将这个库集成到我们的示例应用程序中来测试它。</p><h1 id="e15d" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">在我们的应用中添加库</h1><p id="23cc" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">在应用程序模块和同步项目的build.gradle的依赖项中添加以下内容</p><p id="1134" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated"><em class="ls">实施项目(':email-validator') </em></p><p id="9f36" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">现在可以在我们的应用程序中访问该库的EmailValidate类，我们可以使用该库的验证API来检查电子邮件验证。</p><figure class="lj lk ll lm fd ij"><div class="bz dy l di"><div class="lq lr l"/></div></figure><p id="9c67" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">我们在示例应用程序中成功地使用了这个库，现在下一步是发布它，让其他人也能使用它。</p><h1 id="e880" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">什么是Jitpack？</h1><p id="247e" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">JitPack是一个用于Java虚拟机和Android项目的独特的包存储库。它按需构建Git项目，并提供现成的工件(jar、aar)。</p><p id="37e5" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">如果您希望您的库对全世界开放，就不需要经过项目构建和上传步骤。您所需要做的就是将您的项目推送到GitHub，JitPack会处理剩下的事情。就是这样！</p><h1 id="53f2" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">为什么是Jitpack？</h1><p id="9d68" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">Jitpack优于其他产品的原因是多方面的。他们是-</p><ul class=""><li id="2ace" class="kr ks hi jq b jr km jv kn jz kt kd ku kh kv kl kw kx ky kz bi translated">它构建特定的提交或最新的提交，并处理任何分支或拉取请求</li><li id="d07a" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">库javadocs是自动发布和托管的</li><li id="2cfb" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">您可以跟踪您的下载。维护人员也可以获得每周和每月的统计数据。</li><li id="5e4d" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">工件通过全球CDN提供，这允许您和您的用户快速下载</li><li id="b71d" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">私有版本仍然是私有的。需要的时候可以分享。</li><li id="76d6" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">自定义域:将工件名称与您的域相匹配</li><li id="1fa3" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">Jitpack可与Github、GitLab、BitBucket配合使用</li></ul><h1 id="a4ca" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">出版图书馆</h1><p id="15a7" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">我们需要首先将我们的Android项目放入我们的GitHub帐户的公共回购中，以继续发布本教程的库。建立一个公共回购，将所有文件推送到我们GitHub账户中的回购。</p><p id="5293" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">我们现在只能使用这个库，因为库模块只能用于我们的项目。我们必须在JitPack上发布这个库，让每个人都可以访问电子邮件验证器库。</p><h1 id="56cb" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">为JitPack构建</h1><ul class=""><li id="71d9" class="kr ks hi jq b jr js jv jw jz lf kd lg kh lh kl kw kx ky kz bi translated">将JitPack maven存储库添加到根级build.gradle的存储库列表中</li></ul><figure class="lj lk ll lm fd ij er es paragraph-image"><div class="er es lt"><img src="../Images/11c5ca3ecf82a6a8f86fcacf05372fb7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1372/format:webp/0*a2z56_RP14N09zEX.png"/></div></figure><ul class=""><li id="07b4" class="kr ks hi jq b jr km jv kn jz kt kd ku kh kv kl kw kx ky kz bi translated">通过在库模块的build.gradle中添加以下内容，使maven能够发布插件</li></ul><figure class="lj lk ll lm fd ij er es paragraph-image"><div class="er es lu"><img src="../Images/396e11235535d1b5b2ad9223dc861eda.png" data-original-src="https://miro.medium.com/v2/resize:fit:844/format:webp/0*oK-0sMjp8H5fyOr3.png"/></div></figure><ul class=""><li id="f174" class="kr ks hi jq b jr km jv kn jz kt kd ku kh kv kl kw kx ky kz bi translated">下面的代码示例为AAR库的发行版生成了一个出版物。将其添加到库模块的build.gradle的根级别。</li></ul><figure class="lj lk ll lm fd ij"><div class="bz dy l di"><div class="lq lr l"/></div></figure><figure class="lj lk ll lm fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lv"><img src="../Images/d8463c7a404581891f37121103c72643.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*yFw_F_BEIO-JCOyT.png"/></div></div></figure><h1 id="6eca" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">检查Maven发布插件</h1><p id="affa" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">让我们检查一下我们所做的所有更改是否在maven publish插件中正确配置了。检查您的库是否可以安装到maven local<em class="ls">($ HOME/. m2/repository)</em>:</p><blockquote class="lw lx ly"><p id="66a2" class="jo jp ls jq b jr km jt ju jv kn jx jy lz ko kb kc ma kp kf kg mb kq kj kk kl hb bi translated">在Android Studio终端<br/>中运行以下命令。/grad Lew publishReleasePublicationToMavenLocal</p></blockquote><figure class="lj lk ll lm fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mc"><img src="../Images/ac2a3602b4cd44140c6ca289e5a88343.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*SgutTUIj7u6aMFma.png"/></div></div></figure><ul class=""><li id="85c5" class="kr ks hi jq b jr km jv kn jz kt kd ku kh kv kl kw kx ky kz bi translated">让我们看看$HOME/.m2/repository目录</li></ul><figure class="lj lk ll lm fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es md"><img src="../Images/8f4a44ebd97c63c6d77ce55b5ebfa0d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*alPM6puW42gU6aJQ.png"/></div></div></figure><h1 id="0f3f" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">在JitPack上发布库</h1><ul class=""><li id="c396" class="kr ks hi jq b jr js jv jw jz lf kd lg kh lh kl kw kx ky kz bi translated">提交我们在库模块中所做的更改</li><li id="f234" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">如果前一步一切顺利，你的库就可以发布了！创建一个GitHub版本或者添加一个git标签就大功告成了！</li><li id="481f" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">在GitHub repo中创建一个发布标签</li></ul><figure class="lj lk ll lm fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es me"><img src="../Images/17954ad1083279b6709881bbc87ce02d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ARXrMmgnWY_8ZSsz.png"/></div></div></figure><ul class=""><li id="6158" class="kr ks hi jq b jr km jv kn jz kt kd ku kh kv kl kw kx ky kz bi translated">打开<a class="ae mf" href="https://jitpack.io/" rel="noopener ugc nofollow" target="_blank">https://jitpack.io/</a>并查找你的回购</li></ul><figure class="lj lk ll lm fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mg"><img src="../Images/ccadd30a36d1f80560de12f8d4ec30e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*qWrpGI9MwLDjpTPb.png"/></div></div></figure><ul class=""><li id="ad62" class="kr ks hi jq b jr km jv kn jz kt kd ku kh kv kl kw kx ky kz bi translated">如果有任何错误，您可以在“日志”选项卡中查看详细信息，如哪里出错了。例如，我可以检查1.3版本的错误</li></ul><figure class="lj lk ll lm fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mh"><img src="../Images/4f35bb633bd25c9d32032db74c32d72d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*UPMuYuqHHl_aZyYg.png"/></div></div></figure><p id="0c0e" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">它说构建是成功的，但是当它试图上传工件时，它无处可去，原因是，在1.3中，我忘记提交maven来发布库模块的build.gradle中的设置。</p><h1 id="c004" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">安装库</h1><blockquote class="lw lx ly"><p id="3f01" class="jo jp ls jq b jr km jt ju jv kn jx jy lz ko kb kc ma kp kf kg mb kq kj kk kl hb bi translated">为了在任何应用程序中安装该库，我们必须在项目build . gradle<br/>maven { URL '<a class="ae mf" href="https://jitpack.io'" rel="noopener ugc nofollow" target="_blank">https://JIT pack . io '</a>}中添加以下内容</p></blockquote><figure class="lj lk ll lm fd ij er es paragraph-image"><div class="er es lt"><img src="../Images/b40f705280e7946e573c0b01b07ff9ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1372/format:webp/0*TzSKg__q2_sHJPEa.png"/></div></figure><blockquote class="lw lx ly"><p id="4f27" class="jo jp ls jq b jr km jt ju jv kn jx jy lz ko kb kc ma kp kf kg mb kq kj kk kl hb bi translated">在app模块build.gradle <br/>实现中添加库依赖' com . github . dk 19121991:email validator:1.5 '</p></blockquote><figure class="lj lk ll lm fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mi"><img src="../Images/774e8d2a6cbb68967dbfbcb6b8bca28f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*M7PGz6Vahy8Ol-Um.png"/></div></div></figure><ul class=""><li id="c07c" class="kr ks hi jq b jr km jv kn jz kt kd ku kh kv kl kw kx ky kz bi translated">同步项目，瞧！我们可以使用应用程序中公开下载的库</li></ul><figure class="lj lk ll lm fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mj"><img src="../Images/ad54dedde238604173edad16c71f9a4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*1lp1PwBdjUjJKICi.png"/></div></div></figure><p id="8718" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">恭喜你！您现在可以发布您的库供公众使用。</p><p id="ed40" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">更多细节和更深入的观点，你可以在这里找到代码<a class="ae mf" href="https://github.com/dinkarkumardk/EmailValidator" rel="noopener ugc nofollow" target="_blank"/></p><p id="7147" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">参考资料:<a class="ae mf" href="https://jitpack.io/" rel="noopener ugc nofollow" target="_blank">https://jitpack.io/</a>，<a class="ae mf" href="https://github.com/jitpack/jitpack.io" rel="noopener ugc nofollow" target="_blank">https://github.com/jitpack/jitpack.io</a></p></div><div class="ab cl mk ml gp mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="hb hc hd he hf"><p id="c871" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated"><em class="ls">最初发表于</em><a class="ae mf" href="https://www.talentica.com/blogs/publish-your-android-library-on-jitpack-for-better-reachability/" rel="noopener ugc nofollow" target="_blank"><em class="ls">https://www.talentica.com</em></a><em class="ls">。</em></p></div></div>    
</body>
</html>