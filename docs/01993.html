<html>
<head>
<title>Deploy Static Website Using s3 RestAPI &amp; Cloudfront — Without Making S3 Bucket Public</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用s3 RestAPI和Cloudfront部署静态网站——无需公开s3存储桶</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/deploy-static-website-using-s3-restapi-cloudfront-without-making-s3-bucket-public-3b1e244b64cb?source=collection_archive---------7-----------------------#2021-05-01">https://medium.com/geekculture/deploy-static-website-using-s3-restapi-cloudfront-without-making-s3-bucket-public-3b1e244b64cb?source=collection_archive---------7-----------------------#2021-05-01</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/d12061faabb61dcbdbdc71f735e9eeb1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_6MUGLPQoSP_HhayzaP7PQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Restrict Diagram</figcaption></figure><p id="07ef" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在我们开始之前，请理解通过s3网站端点和s3 RestAPI部署静态网站的区别。</p><p id="abfc" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">以下是网站端点和由CloudFront发行版提供服务的REST API端点之间的主要区别</strong></p><figure class="js jt ju jv fd ij"><div class="bz dy l di"><div class="jw jx l"/></div></figure><p id="87c9" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">此外，AWS有一个cloudformation模板，用于通过s3 website Endpoint部署一个静态站点，并有一个部署它的手动分步说明。你可以在这里找到这些细节<a class="ae jy" href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/website-hosting-custom-domain-walkthrough.html" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="030b" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我没有找到任何文章可以帮助我部署一个静态网站<strong class="iw hj">而不</strong>将s3存储桶<strong class="iw hj">公开</strong>，这是这篇文章的目标。通过遵循这些步骤，您的用户只能通过CloudFront发行版访问文件，而不是直接从S3存储区访问。你可以在这里找到这个配置<a class="ae jy" href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/website-hosting-custom-domain-walkthrough.html#root-domain-walkthrough-before-you-begin" rel="noopener ugc nofollow" target="_blank">细节的链接。</a></p><p id="9d62" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">以下是AWS推荐的步骤，以及它们在两种配置之间的区别。</p><p id="82cf" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">✅不需要更改❌需要更改配置</p><figure class="js jt ju jv fd ij"><div class="bz dy l di"><div class="jw jx l"/></div><figcaption class="iq ir et er es is it bd b be z dx">Configurations steps that vary</figcaption></figure></div><div class="ab cl jz ka gp kb" role="separator"><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke"/></div><div class="hb hc hd he hf"><p id="1860" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我将所有这些步骤总结为4步，但在第3步中添加了一个详细的Cloudfront配置截图。</p><h1 id="9355" class="kg kh hi bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">配置流程</h1><p id="ce21" class="pw-post-body-paragraph iu iv hi iw b ix le iz ja jb lf jd je jf lg jh ji jj lh jl jm jn li jp jq jr hb bi translated"><strong class="iw hj">第一步:</strong></p><p id="2adf" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">使用所需的子域名或根域名创建一个s3存储桶作为存储桶名称。例如<em class="lj">testsite.example.com</em>或<em class="lj">example.com</em></p><p id="3fdb" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">第二步:</strong></p><p id="d993" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">上传以<strong class="iw hj">index.html</strong>为根的静态内容。即testsite.example.com/index.html</p><p id="bacd" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">第三步:</strong></p><p id="c7e1" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">使用以下配置创建一个cloudfront发行版。您的亚马逊S3 RestAPI端点遵循以下格式。</p><p id="c9b7" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><em class="lj">{ bucket-name } . S3 . Amazon AWS . com</em></p><p id="9e39" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">第一步:</strong></p><figure class="js jt ju jv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lk"><img src="../Images/6b9642a15f9b3553f0aecde382029bad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R_FSsgHpSErQ2qYWfbxWAA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Cloudfront Origin Settings</figcaption></figure><p id="03fb" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">第二步:</strong></p><figure class="js jt ju jv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ll"><img src="../Images/3d933d49babd243cfd1d75026a3d886e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yafFJHdPtgQvmNduOXLXzQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Cloudfront Default cache Behaviour Settings</figcaption></figure><p id="d044" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">第三步:</strong></p><figure class="js jt ju jv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lm"><img src="../Images/4f6fdd35631696a87e15990495fc464c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qdnIW_d5jM_clK1RheOcbQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Cloudfront Distribution Settings</figcaption></figure><p id="a4a2" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">第四步:</strong></p><figure class="js jt ju jv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ln"><img src="../Images/1a52b0ad1201f665a651dd0c943785d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Lz9RwNliBVhmdmh8za0-1A.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Logging Settings</figcaption></figure><p id="a780" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">第四步:</strong></p><p id="355b" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">配置您的DNS以将流量重定向到cloudfront分发。</p><p id="f7f8" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">参考:</p><div class="lo lp ez fb lq lr"><a href="https://elucidata.io/how-to-host-a-static-website-on-aws-s3-and-cloudfront-with-ssl/" rel="noopener  ugc nofollow" target="_blank"><div class="ls ab dw"><div class="lt ab lu cl cj lv"><h2 class="bd hj fi z dy lw ea eb lx ed ef hh bi translated">如何在AWS S3和CloudFront上用SSL托管一个静态网站</h2><div class="ly l"><h3 class="bd b fi z dy lw ea eb lx ed ef dx translated">静态网站包含具有固定内容的网页，网站上的这些单独的网页包括静态…</h3></div><div class="lz l"><p class="bd b fp z dy lw ea eb lx ed ef dx translated">说明</p></div></div><div class="ma l"><div class="mb l mc md me ma mf io lr"/></div></div></a></div><div class="lo lp ez fb lq lr"><a href="https://aws.amazon.com/premiumsupport/knowledge-center/cloudfront-serve-static-website/" rel="noopener  ugc nofollow" target="_blank"><div class="ls ab dw"><div class="lt ab lu cl cj lv"><h2 class="bd hj fi z dy lw ea eb lx ed ef hh bi translated">使用CloudFront为亚马逊S3托管的静态网站提供服务</h2><div class="ly l"><h3 class="bd b fi z dy lw ea eb lx ed ef dx translated">我想主办一个亚马逊简单存储服务(亚马逊S3)桶静态网站。然后，我想为我的…</h3></div><div class="lz l"><p class="bd b fp z dy lw ea eb lx ed ef dx translated">aws.amazon.com</p></div></div><div class="ma l"><div class="mg l mc md me ma mf io lr"/></div></div></a></div><div class="lo lp ez fb lq lr"><a href="https://aws.amazon.com/premiumsupport/knowledge-center/cloudfront-access-to-amazon-s3/" rel="noopener  ugc nofollow" target="_blank"><div class="ls ab dw"><div class="lt ab lu cl cj lv"><h2 class="bd hj fi z dy lw ea eb lx ed ef hh bi translated">使用您的CloudFront发行版来限制对亚马逊S3桶的访问</h2><div class="ly l"><h3 class="bd b fi z dy lw ea eb lx ed ef dx translated">我想限制对我的亚马逊简单存储服务(亚马逊S3)桶的访问，这样对象只能被访问…</h3></div><div class="lz l"><p class="bd b fp z dy lw ea eb lx ed ef dx translated">aws.amazon.com</p></div></div><div class="ma l"><div class="mh l mc md me ma mf io lr"/></div></div></a></div></div></div>    
</body>
</html>