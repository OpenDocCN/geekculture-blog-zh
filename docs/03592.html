<html>
<head>
<title>API Testing Strategy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">API测试策略</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/api-testing-strategy-384af1ff43f6?source=collection_archive---------5-----------------------#2021-06-11">https://medium.com/geekculture/api-testing-strategy-384af1ff43f6?source=collection_archive---------5-----------------------#2021-06-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="3dff" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" href="https://en.wikipedia.org/wiki/API_testing" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj"> API测试</strong> </a>是一种软件测试，包括直接测试应用编程接口(API)，并作为集成测试的一部分，以确定它们是否满足功能、可靠性、性能和安全性的预期。API测试在消息层执行，因为API没有GUI。API测试对于自动化测试至关重要，因为API目前是应用程序逻辑的主要接口。在推导API测试策略之前，不管Postman还是<a class="ae jd" href="https://rest-assured.io/" rel="noopener ugc nofollow" target="_blank">restassed，</a>确定测试范围是至关重要的。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/e05f93f5ab64af67ca6550f96cb2ee49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vcm5f3OE36w4FEHNJx4ckg.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx">API Testing strategy</figcaption></figure></div><div class="ab cl ju jv gp jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hb hc hd he hf"><h2 id="58e0" class="kb kc hi bd kd ke kf kg kh ki kj kk kl iq km kn ko iu kp kq kr iy ks kt ku kv bi translated">什么应该超出范围？</h2><p id="2794" class="pw-post-body-paragraph if ig hi ih b ii kw ik il im kx io ip iq ky is it iu kz iw ix iy la ja jb jc hb bi translated">任何第三方接口。大多数应用程序都有一个或多个不在API测试范围内的第三方接口。假设一个这样的接口是<a class="ae jd" href="https://developers.google.com/pay/api" rel="noopener ugc nofollow" target="_blank"> Google Pay </a>，那么场景可以继续测试余额不足或无效卡超出范围的支付。这些是由支付提供商提供的功能。</p><h2 id="fcbe" class="kb kc hi bd kd ke kf kg kh ki kj kk kl iq km kn ko iu kp kq kr iy ks kt ku kv bi translated">范围内应该包括什么？</h2><p id="826d" class="pw-post-body-paragraph if ig hi ih b ii kw ik il im kx io ip iq ky is it iu kz iw ix iy la ja jb jc hb bi translated">一个好的方法是随着测试的成功进行扩大范围。在每个级别组织API测试将有助于实现这一点。测试合同可以是第一级测试的一个例子。这种测试应该验证协议是按照规范记录的，并且可以使用这些API。一个很好的例子就是<a class="ae jd" href="https://swagger.io/tools/swaggerhub/?&amp;utm_medium=ppcg&amp;utm_source=aw&amp;utm_term=swagger&amp;utm_content=511271175059&amp;utm_campaign=%7bcampaign%7d&amp;awsearchcpc=1&amp;gclid=Cj0KCQjw8IaGBhCHARIsAGIRRYrZzUkZ5EPFefi17VDwYyr-2rOl5VdPx4-SNA__cc5LdbVqQo8NeggaAmkyEALw_wcB&amp;gclsrc=aw.ds" rel="noopener ugc nofollow" target="_blank"> Swagger </a>的用法。成功完成这一步应该是下一阶段测试的开始。</p><p id="a10a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">每个API请求和响应都必须单独验证；这些案例应该构成API测试的最小构件。例如，从<code class="du lb lc ld le b">POST</code>请求开始创建一个资源。成功创建资源后，响应将包含一个自动生成的id。就像上一级一样，这些案例的成功完成应该为下一级的API测试打开质量大门。</p><p id="0a65" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在第三级中，重点应该是测试一系列模仿用户动作的请求。例如，从<code class="du lb lc ld le b">POST a a </code>请求开始创建一个资源。成功创建资源后，响应将包含一个自动生成的id。在下面的请求中，使用这个先前生成的id并触发一个<code class="du lb lc ld le b">GET </code>请求来检索新创建的资源的详细信息。随后是更新新创建资源的细节的请求。下一步，您可以使用<code class="du lb lc ld le b">DELETE </code>请求删除该资源。最后，通过调用<code class="du lb lc ld le b">GET </code>请求来确保资源不再存在。</p><p id="7491" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">甚至可以将API测试提升到一个新的层次，将API测试与自动化UI测试集成在一起。结合这两种类型的测试可以利用API测试和UI测试的优势，并且这两种测试都可以减少缺陷。例如，API测试很快，而UI测试可能很耗时，因此如果单独执行，集成它们可以增加覆盖率并减少时间。</p><h2 id="d7db" class="kb kc hi bd kd ke kf kg kh ki kj kk kl iq km kn ko iu kp kq kr iy ks kt ku kv bi translated">作为API测试的一部分，需要验证什么？</h2><p id="bcc2" class="pw-post-body-paragraph if ig hi ih b ii kw ik il im kx io ip iq ky is it iu kz iw ix iy la ja jb jc hb bi translated">在定义了级别和最终确定了范围之后，重点是确定API测试中需要有效的内容。锁定应该验证的内容，排除不应该验证的内容，将有助于优化API测试以及未来的计划和增强。</p><p id="6f4f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从一个矩阵开始，以获取功能或业务需求的测试覆盖范围。Swagger或类似的东西可以帮助确保端点被正确命名，资源的数据类型是正确的，没有缺失或重复的功能。</p><p id="1074" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该策略应涵盖快乐之路或<em class="lf">阳性测试</em>。在此阶段，必须验证<code class="du lb lc ld le b">REQUEST </code>和<code class="du lb lc ld le b">RESPONSE </code>。也许为了减少最初的测试工作，可以开始只验证强制字段，并最终计划扩展到可选字段、标题、查询参数等。</p><p id="b7dd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="lf">消极测试</em>可以更有效地用于API测试，这也需要成为策略的一部分。在进行负API测试时，属性值应该包括有效值和无效值。有效值的一个例子是删除已经删除或不存在的资源。无效值的一个例子是试图在没有授权令牌的情况下访问。</p><h2 id="edc6" class="kb kc hi bd kd ke kf kg kh ki kj kk kl iq km kn ko iu kp kq kr iy ks kt ku kv bi translated">如何验证？</h2><p id="8592" class="pw-post-body-paragraph if ig hi ih b ii kw ik il im kx io ip iq ky is it iu kz iw ix iy la ja jb jc hb bi translated">无论是<code class="du lb lc ld le b">REQUEST </code>还是<code class="du lb lc ld le b">RESPONSE </code>验证都必须以两种形式进行。如何验证的深度将取决于项目时间表、预算和风险偏好。</p><p id="1afd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将整个<code class="du lb lc ld le b">REQUEST </code>或<code class="du lb lc ld le b">RESPONSE </code>正文内容与合同进行比较。这种比较可以是自上而下的方法，每次触发<code class="du lb lc ld le b">REQUEST </code>或<code class="du lb lc ld le b">RESPONSE </code>将其与合同进行比较。这种比较将是识别API变化的最佳位置。RestAssured为JSON模式验证提供了一些出色的特性来完成这类任务。</p><p id="9c62" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将<code class="du lb lc ld le b">REQUEST </code>或<code class="du lb lc ld le b">RESPONSE </code>中的每个属性值与契约进行比较，有时这些值可以用于UI验证或数据过滤。这种验证可以是一种自底向上的方法，以特定值为目标，甚至与正则表达式相匹配。Hamcrest 就是这样一个工具，它精确地挑选出被测试的属性，并描述它应该具有的值，达到一个受控的精度水平。当被测属性的行为偏离预期行为时，这样的测试就会失败。</p><h2 id="8a4f" class="kb kc hi bd kd ke kf kg kh ki kj kk kl iq km kn ko iu kp kq kr iy ks kt ku kv bi translated">API测试管理</h2><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es lg"><img src="../Images/634c49a71315f6abb481b44ec651a867.png" data-original-src="https://miro.medium.com/v2/resize:fit:398/format:webp/1*IX07cyyZWQ1AFbP0UZaPkw.png"/></div><figcaption class="jq jr et er es js jt bd b be z dx">Public Postman API</figcaption></figure><p id="f7af" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">传统上，在软件测试策略文档中会有一个部分专门用于捕获测试管理活动。本节并不试图捕捉这样的信息，而是着眼于管理API测试的选项。组织API端点有助于管理API测试。包含API端点将有助于创建高覆盖率的场景并提高集成。组织API端点将是开发过程中的一个额外步骤，但是好处将超过努力。在<a class="ae jd" href="https://learning.postman.com/docs/getting-started/introduction/" rel="noopener ugc nofollow" target="_blank"> Postman的案例中，</a>他们已经隔离了所有的API。这种方法支持重用或共享标准的信息片段，如资源类型、路径等。将API测试与类似的端点结构结合起来将有助于识别和扩展API测试。</p></div></div>    
</body>
</html>