<html>
<head>
<title>Tips on Google Pay and Apple Pay with Stripe</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">关于Google Pay和Apple Pay使用Stripe的提示</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/tips-on-google-pay-and-apple-pay-with-stripe-3eaaabd6ccab?source=collection_archive---------2-----------------------#2021-08-17">https://medium.com/geekculture/tips-on-google-pay-and-apple-pay-with-stripe-3eaaabd6ccab?source=collection_archive---------2-----------------------#2021-08-17</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/37bc374c59d354fbda3b249b23127100.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hq_wCKowMxopRqxG"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx">Photo by <a class="ae hv" href="https://unsplash.com/@blakewisz?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Blake Wisz</a> on <a class="ae hv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><div class=""/><div class=""><h2 id="5119" class="pw-subtitle-paragraph iv hx hy bd b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm dx translated">这是我在实现支付请求按钮时学到的全部内容，这是Stripe Elements的一个特性。</h2></div><p id="d16a" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">这篇文章收集了我到目前为止在研究中偶然发现的东西。我将提供如何使用支付请求按钮测试Google Pay和Apple Pay的技巧，官方文件中没有写。</p><h1 id="af3c" class="kj kk hy bd kl km kn ko kp kq kr ks kt je ku jf kv jh kw ji kx jk ky jl kz la bi translated">关于条纹元素</h1><figure class="lc ld le lf fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lb"><img src="../Images/5da31d96afa9b89f36345c7858a941f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zBor23r4klBeojpWNDeOQQ.png"/></div></div></figure><p id="7e70" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">Stripe元素是丰富的预构建UI组件，可帮助您跨桌面和移动设备创建自己的结账流程。</p><p id="b5d1" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">如果您有兴趣了解更多有关如何创建信用卡支付的信息，那么<a class="ae hv" href="https://stripe.com/docs/stripe-js" rel="noopener ugc nofollow" target="_blank"> Stripe Elements </a> <strong class="jp hz"> </strong>将帮助您入门。一打开页面，您就会发现Card Element提供了一组预构建的UI组件。这些组件将帮助您构建一个支付表单，而不用担心处理敏感信息。您可以依靠Stripe安全地处理所有这些问题。</p><p id="66e5" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">对于实际开发细节，<a class="ae hv" href="https://github.com/stripe/elements-examples" rel="noopener ugc nofollow" target="_blank">元素-示例</a>将是最有帮助的资源之一。</p></div><div class="ab cl lg lh gp li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="hb hc hd he hf"><p id="a937" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">仅供参考，在撰写本文时，有一个名为<a class="ae hv" href="https://stripe.com/docs/payments/payment-element" rel="noopener ugc nofollow" target="_blank">条纹支付元素</a> <strong class="jp hz"> </strong>的新功能正在测试中。</p><p id="47ba" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">根据文件，上面写着:</p><blockquote class="ln lo lp"><p id="10de" class="jn jo lq jp b jq jr iz js jt ju jc jv lr jx jy jz ls kb kc kd lt kf kg kh ki hb bi translated">Stripe正在开发一套扩展的可嵌入组件，以帮助您在网络和移动设备上构建定制的支付表单，所有这些都旨在提高您的结账转化率。付款元素是这些新组件中的第一个，它在嵌入到您的结帐页面中的定制UI中显示多种付款方式。</p></blockquote><p id="02c9" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">此外，我最近加入了他们的用户反馈视频电话，请求测试访问。他们提到今年会有更多的特性被开发并添加到组件中。如果您有兴趣了解即将推出的内容，您可以从<a class="ae hv" href="https://stripe.com/docs/payments/payment-element#join-payment-element-beta" rel="noopener ugc nofollow" target="_blank">这里</a>注册，请求测试版访问，并通过视频电话向工程师提问。</p><p id="4a90" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">我听说他们正在开发Apple Pay，所以它很快就会在组件中可用。条纹支付元素中还有更令人兴奋的东西。我确信这个组件将会减少大量的开发时间，并允许更快的开发。👏</p></div><div class="ab cl lg lh gp li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="hb hc hd he hf"><figure class="lc ld le lf fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lu"><img src="../Images/1c5b42fb90e6cf6f6e77f1b7456db65e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xx1WjffQ-coqEPV0MY45sg.png"/></div></div></figure><p id="a770" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">我们现在将进一步研究的实际上是条纹元素功能<strong class="jp hz"> </strong>中的一个，称为<a class="ae hv" href="https://stripe.com/docs/stripe-js/elements/payment-request-button" rel="noopener ugc nofollow" target="_blank">支付请求按钮</a>，允许用户使用Apple Pay和Google Pay支付。所有的细节都在那一页上详细说明了，所以我的文章只是帮助你一些没有写在文档中的提示。</p><h1 id="d68b" class="kj kk hy bd kl km kn ko kp kq kr ks kt je ku jf kv jh kw ji kx jk ky jl kz la bi translated">用卡片测试</h1><blockquote class="ln lo lp"><p id="cf90" class="jn jo lq jp b jq jr iz js jt ju jc jv lr jx jy jz ls kb kc kd lt kf kg kh ki hb bi translated">我不能100%确信我发现的这些信息是真实的，但是我分享这些信息是因为它们在我的项目中发挥了预期的作用。这都是基于我对付款请求按钮的实验。</p></blockquote><h2 id="3143" class="lv kk hy bd kl lw lx ly kp lz ma mb kt jw mc md kv ka me mf kx ke mg mh kz mi bi translated">付款流程</h2><p id="9671" class="pw-post-body-paragraph jn jo hy jp b jq mj iz js jt mk jc jv jw ml jy jz ka mm kc kd ke mn kg kh ki hb bi translated">首先，请阅读下面的数字列表，它描述了用户实际上是如何与您的结帐页面中的付款申请按钮进行交互的。</p><pre class="lc ld le lf fd mo mp mq mr aw ms bi"><span id="e78e" class="lv kk hy mp b fi mt mu l mv mw">1. Users land on your checkout page where the payment button is.</span><span id="c1de" class="lv kk hy mp b fi mx mu l mv mw">2. Stripe will automatically show an appropriate Payment Method for users: It could be Apple Pay, Google Pay or other methods, depending on browsers or devices of users.</span><span id="200c" class="lv kk hy mp b fi mx mu l mv mw">3. The button is clicked by users.</span><span id="2673" class="lv kk hy mp b fi mx mu l mv mw">4. Payment sheet is presented over to the screen where users can click the Pay button.</span><span id="fe2a" class="lv kk hy mp b fi mx mu l mv mw">5. Stripe handles the payment</span><span id="1130" class="lv kk hy mp b fi mx mu l mv mw">6. Payment succeeds or fails.</span></pre><p id="13a7" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">通过这种方式，用户与您的支付请求按钮进行交互。</p></div><div class="ab cl lg lh gp li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="hb hc hd he hf"><h2 id="1a11" class="lv kk hy bd kl lw lx ly kp lz ma mb kt jw mc md kv ka me mf kx ke mg mh kz mi bi translated">设置测试卡</h2><p id="9302" class="pw-post-body-paragraph jn jo hy jp b jq mj iz js jt mk jc jv jw ml jy jz ka mm kc kd ke mn kg kh ki hb bi translated">在你开发和测试这些支付方式之前，<em class="lq">确保你设置好你的卡用于测试目的</em>。</p><p id="b427" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">重要的是，在生产和开发环境中，付款请求按钮是不可见的，除非您适当地保存您的卡。只有当您的浏览器检测到您的卡存储在钱包中时，它才可见，这是由支付请求按钮自动完成的。</p><h2 id="74a4" class="lv kk hy bd kl lw lx ly kp lz ma mb kt jw mc md kv ka me mf kx ke mg mh kz mi bi translated">小跟班</h2><p id="1af8" class="pw-post-body-paragraph jn jo hy jp b jq mj iz js jt mk jc jv jw ml jy jz ka mm kc kd ke mn kg kh ki hb bi translated">将按钮集成到您的应用程序后，用户会看到这些按钮中的一个，这取决于他们的设备和浏览器组合支持的内容。</p><figure class="lc ld le lf fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es my"><img src="../Images/eb3b71a3ae1dd0476b6cdee6bc955fdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LIBoS91i7AKpug1HWMAl4w.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx">Image from Stripe Doc</figcaption></figure><p id="8762" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">Pay Now和Google Pay的区别只是简单的解释为Chrome钱包和Google Pay钱包的区别。我看到网上有些人把Google Pay误认为是Pay Now，因为它们是Google服务的一部分。</p><h2 id="4977" class="lv kk hy bd kl lw lx ly kp lz ma mb kt jw mc md kv ka me mf kx ke mg mh kz mi bi translated">付款类型</h2><p id="2d9c" class="pw-post-body-paragraph jn jo hy jp b jq mj iz js jt mk jc jv jw ml jy jz ka mm kc kd ke mn kg kh ki hb bi translated">此外，现在支付是钱包支付的一种，但从技术上来说<em class="lq">不</em>。这是因为Stripe会检索存储在Chrome钱包中的信用卡，并使用该信用卡进行支付。如您所见，我们下面的Stripe测试环境中的支付意向日志确认它不包含钱包信息。Stripe只是使用了Chrome钱包中保存的卡信息。</p><figure class="lc ld le lf fd hk er es paragraph-image"><div class="er es mz"><img src="../Images/86bba60f79a67d933cc0b98cc5dbc3c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1364/format:webp/1*RNFyG-cdeI97CerhIT19qQ.png"/></div></figure><p id="5a52" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">如果你用Apple Pay或Google Pay支付，钱包里要么有google_pay，要么有apple_pay。</p><div class="lc ld le lf fd ab cb"><figure class="na hk nb nc nd ne nf paragraph-image"><img src="../Images/fde3f74fbbb4ae77113e2a94c42ce1e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:860/format:webp/1*vuKH0HhNhDpErvdaXkHcEw.png"/></figure><figure class="na hk ng nc nd ne nf paragraph-image"><img src="../Images/c4c854f362da381a42bbc85d450d65b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:868/format:webp/1*j_XgCDzJDKioCLJAIb56ZQ.png"/></figure></div><p id="e703" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">下面我会解释如何测试Pay Now，Google Pay，和Apple Pay。</p><h1 id="d18e" class="kj kk hy bd kl km kn ko kp kq kr ks kt je ku jf kv jh kw ji kx jk ky jl kz la bi translated">立即支付和Google Pay</h1><p id="508e" class="pw-post-body-paragraph jn jo hy jp b jq mj iz js jt mk jc jv jw ml jy jz ka mm kc kd ke mn kg kh ki hb bi translated">真正的卡不接受创建一个虚拟的购买与谷歌支付和现在支付。请注意，如果您在测试环境中使用真实的卡，Stripe将会抛出错误，反之亦然。</p><p id="2feb" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">根据官方教程视频，她提到如果你需要为集成测试一张卡，你需要在开始开发之前在<em class="lq">钱包</em>中设置你的条纹测试卡。说了这么多，我听着不清楚。我不确定她说的<em class="lq">钱包</em>是什么意思，因为有两种钱包——chrome或Google Pay。</p><figure class="lc ld le lf fd hk"><div class="bz dy l di"><div class="nh ni l"/></div></figure><h2 id="69c5" class="lv kk hy bd kl lw lx ly kp lz ma mb kt jw mc md kv ka me mf kx ke mg mh kz mi bi translated">切换测试环境</h2><p id="0ae2" class="pw-post-body-paragraph jn jo hy jp b jq mj iz js jt mk jc jv jw ml jy jz ka mm kc kd ke mn kg kh ki hb bi translated">经过一番研究后，我意识到这两种支付方式可以进行不同的测试:</p><ol class=""><li id="4baf" class="nj nk hy jp b jq jr jt ju jw nl ka nm ke nn ki no np nq nr bi translated">为<em class="lq">立即支付</em>按钮添加来自<code class="du ns nt nu mp b">chrome://settings/payments</code>的条纹测试卡</li><li id="59fb" class="nj nk hy jp b jq nv jt nw jw nx ka ny ke nz ki no np nq nr bi translated">从<a class="ae hv" href="https://developers.google.com/pay/api/web/guides/resources/test-card-suite?hl=ja" rel="noopener ugc nofollow" target="_blank">测试卡糖果</a>加入用户组为<em class="lq"> Google Pay </em>按钮。</li></ol><p id="6249" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">通过我自己的研究和理解，我发现现在支付按钮只有在chrome设置的支付中注册了多个支付时才显示和可用，而<em class="lq">最重要的是</em> <em class="lq">当Google Pay中没有存储卡并且您不在群组</em>中时。这确实起了作用，但我应该说，至少，我观察到它起了作用。</p><h2 id="213a" class="lv kk hy bd kl lw lx ly kp lz ma mb kt jw mc md kv ka me mf kx ke mg mh kz mi bi translated">1.现在付款</h2><p id="ae5a" class="pw-post-body-paragraph jn jo hy jp b jq mj iz js jt mk jc jv jw ml jy jz ka mm kc kd ke mn kg kh ki hb bi translated">如果你以前有过使用经验，先去<code class="du ns nt nu mp b">chrome://settings/payments</code>把<code class="du ns nt nu mp b">4242 4242 4242 4242</code>添加到卡号框里，方法和卡元素<strong class="jp hz"> </strong>一样。其他字段，如到期日，姓名和昵称可以是任何随机的。</p><p id="d258" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">注册以4242开头的条纹测试卡永远不会在Google Pay的支付钱包中获得批准。只能在Chrome的钱包里用。</p><blockquote class="ln lo lp"><p id="cec8" class="jn jo lq jp b jq jr iz js jt ju jc jv lr jx jy jz ls kb kc kd lt kf kg kh ki hb bi translated">如果您也想创建一个失败或认证模式，请参考此<a class="ae hv" href="https://stripe.com/docs/testing" rel="noopener ugc nofollow" target="_blank">页面</a>来测试各种类型的场景。</p></blockquote><figure class="lc ld le lf fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es oa"><img src="../Images/abdd1c45d62580fa926b2a6d3a0241eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2lDCZ8phRW22L1NsrW0F6g.png"/></div></div></figure><p id="e9bf" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">如果你去你的结帐页面，你应该看到蓝色或紫色的按钮，如下所示。我的环境是日本的，所以文本可能与你的不同，但它的意思是现在支付。箭头应该是动态的。</p><figure class="lc ld le lf fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es ob"><img src="../Images/e3d6e18dc6db59f89d70c9777d092d39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jijbHe9DbEtCr6Ur0FxHiw.png"/></div></div></figure><p id="4f6b" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">如果你按下按钮，确认视图就会弹出来。现在，您可以测试“立即支付”按钮👍</p><p id="d3cb" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">如果你想修改卡片或地址信息，你可以在那里做或者直接在Chrome设置中修改。</p><figure class="lc ld le lf fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es oc"><img src="../Images/a307583b1efc1bf8aeb12d8bac7493b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6A7qd-suvxWksuIYPHj18w.png"/></div></div></figure><h2 id="13f8" class="lv kk hy bd kl lw lx ly kp lz ma mb kt jw mc md kv ka me mf kx ke mg mh kz mi bi translated">2.Google Pay</h2><p id="10ef" class="pw-post-body-paragraph jn jo hy jp b jq mj iz js jt mk jc jv jw ml jy jz ka mm kc kd ke mn kg kh ki hb bi translated">接下来，如果你想用Google Pay测试，首先请加入<a class="ae hv" href="https://developers.google.com/pay/api/web/guides/resources/test-card-suite?hl=ja" rel="noopener ugc nofollow" target="_blank">用户组</a>。正如医生所说:</p><blockquote class="ln lo lp"><p id="b5a3" class="jn jo lq jp b jq jr iz js jt ju jc jv lr jx jy jz ls kb kc kd lt kf kg kh ki hb bi translated">新的测试卡套件使Google Pay开发者能够运行集成和API测试，而无需在他们的Google帐户中添加真正的信用卡。</p></blockquote><p id="343f" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">你需要做的只是“入群”。在链接页面的底部，您会发现一个可点击的文本，上面写着join。</p><figure class="lc ld le lf fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es od"><img src="../Images/e1a94f31f32dcb88354eb847a6debd32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cMaRFErjZuJ7_T-YHDbLww.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx">Join User Group</figcaption></figure><p id="fc2d" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">加入后，您将被重定向到Google Pay API测试卡允许列表页面。注册成功后，无需采取进一步的措施。</p><figure class="lc ld le lf fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es oe"><img src="../Images/80f8c57bf6c5820331d754e41d4e9e7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YIZ1rN7zFWegtEnrdEC2TQ.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx">Google Pay API Test Cards Allow list</figcaption></figure><p id="106e" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">您可以访问此演示页面，在这里您可以检查是否启用了Google Pay。然而，即使它在那里看起来是启用的，它可能需要几个小时才能在您加入该组后在您的收银台可用。如果它似乎没有出现，只是耐心地等待几个小时，有时会刷新结帐页面。它应该很快就会出现。</p><figure class="lc ld le lf fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es of"><img src="../Images/af2618dccb5e52ac22e0ddc10a5fd964.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pcxDLG7XhOV-3gj-Tm8y7Q.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx">Google Pay button</figcaption></figure><p id="4cbf" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">另外，<em class="lq">如果有用户群的话，最好在加入之前先删除Chrome钱包里的卡</em>。</p><p id="ccd4" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">供您参考，当我测试时，我的设置如下:</p><ul class=""><li id="790b" class="nj nk hy jp b jq jr jt ju jw nl ka nm ke nn ki og np nq nr bi translated">与我的个人资料相关的国家设置为美国(任何国家都可以，但我还没有确认哪个不行)</li><li id="db8b" class="nj nk hy jp b jq nv jt nw jw nx ka ny ke nz ki og np nq nr bi translated">我在谷歌账户支付和Chrome支付上都没有注册信用卡。</li><li id="47db" class="nj nk hy jp b jq nv jt nw jw nx ka ny ke nz ki og np nq nr bi translated">加入了用户组。</li><li id="2eb3" class="nj nk hy jp b jq nv jt nw jw nx ka ny ke nz ki og np nq nr bi translated">大约过了一个小时，谷歌支付才出现在我的应用程序中。</li></ul><blockquote class="ln lo lp"><p id="edc6" class="jn jo lq jp b jq jr iz js jt ju jc jv lr jx jy jz ls kb kc kd lt kf kg kh ki hb bi translated">根据这个回答，自2021年4月起，Google Pay为选项时显示Google Pay。</p></blockquote><p id="e4fe" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">这意味着如果你在两个钱包中都注册了卡，Google Pay是默认按钮，因此Google Pay应该优先于Pay Now。我没有测试过这个，所以如果你想了解这个，请尝试一下。</p><div class="hh hi ez fb hj oh"><a href="https://stackoverflow.com/a/62288698/5790320" rel="noopener  ugc nofollow" target="_blank"><div class="oi ab dw"><div class="oj ab ok cl cj ol"><h2 class="bd hz fi z dy om ea eb on ed ef hx bi translated">将条纹支付请求按钮显示为Google Pay按钮</h2><div class="oo l"><h3 class="bd b fi z dy om ea eb on ed ef dx translated">感谢贡献一个堆栈溢出的答案！请务必回答问题。提供详细信息并分享…</h3></div><div class="op l"><p class="bd b fp z dy om ea eb on ed ef dx translated">stackoverflow.com</p></div></div><div class="oq l"><div class="or l os ot ou oq ov hp oh"/></div></div></a></div><p id="7137" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">点击Google Pay会触发Google Pay表单呈现给你。有一个预先注册的测试卡列表，因此您可以选择其中一个来测试您的虚拟购买。</p><figure class="lc ld le lf fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es ow"><img src="../Images/3a0cff859dfdf392e9bad6e314104248.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MZkqvhG3srRN2d_2njEKOg.png"/></div></div></figure><p id="7c45" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">现在你可以测试谷歌支付按钮了👍</p><h2 id="dcc9" class="lv kk hy bd kl lw lx ly kp lz ma mb kt jw mc md kv ka me mf kx ke mg mh kz mi bi translated">Apple Pay</h2><p id="af3a" class="pw-post-body-paragraph jn jo hy jp b jq mj iz js jt mk jc jv jw ml jy jz ka mm kc kd ke mn kg kh ki hb bi translated">另一方面，与Google Pay或Pay Now不同，使用Apple Pay进行测试购买需要钱包中的真实卡。Stripe会检测您所处的环境，因此所有使用开发中的真实卡的交易都不会被计费。StackOverFlow中一个问题的回答说:</p><blockquote class="ln lo lp"><p id="e92d" class="jn jo lq jp b jq jr iz js jt ju jc jv lr jx jy jz ls kb kc kd lt kf kg kh ki hb bi translated">苹果不会让你在Passport和iPhone上加假信用卡的。然而，如果你使用的是Apple Pay和你的测试条纹API密钥，我们会在发出Apple Pay请求时识别这种情况，并返回一个成功的测试卡令牌。要在实时模式下测试支付，你需要使用一张可用的信用卡。</p></blockquote><div class="hh hi ez fb hj oh"><a href="https://stackoverflow.com/a/27073235/5790320" rel="noopener  ugc nofollow" target="_blank"><div class="oi ab dw"><div class="oj ab ok cl cj ol"><h2 class="bd hz fi z dy om ea eb on ed ef hx bi translated">如何测试基于Stripe的Apple Pay？</h2><div class="oo l"><h3 class="bd b fi z dy om ea eb on ed ef dx translated">被问到想改善这个问题？更新问题，使其成为关于堆栈溢出的主题。4年前关闭…</h3></div><div class="op l"><p class="bd b fp z dy om ea eb on ed ef dx translated">stackoverflow.com</p></div></div><div class="oq l"><div class="ox l os ot ou oq ov hp oh"/></div></div></a></div><p id="5cc0" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">但是为了激活Apple Pay，正如这里的<a class="ae hv" href="https://stripe.com/docs/stripe-js/elements/payment-request-button?html-or-react=html#verifying-your-domain-with-apple-pay" rel="noopener ugc nofollow" target="_blank">所描述的</a>，你需要一些额外的步骤。</p><ol class=""><li id="90d2" class="nj nk hy jp b jq jr jt ju jw nl ka nm ke nn ki no np nq nr bi translated">下载一个众所周知的文件，并把它放在你的域名下。如果你的域名是<a class="ae hv" href="https://sennin.mode," rel="noopener ugc nofollow" target="_blank">https://domain.com、</a>，那么你把下载的文件放在<a class="ae hv" href="http://sennin.mode/apple-developer-merchantid-domain-association" rel="noopener ugc nofollow" target="_blank">http://</a><a class="ae hv" href="https://sennin.mode," rel="noopener ugc nofollow" target="_blank">domain.com</a><a class="ae hv" href="http://sennin.mode/apple-developer-merchantid-domain-association" rel="noopener ugc nofollow" target="_blank">/apple-developer-merchantid-domain-association</a>下(域名是虚拟的)</li><li id="c369" class="nj nk hy jp b jq nv jt nw jw nx ka ny ke nz ki no np nq nr bi translated">向Apple注册您的域名。你可以在<a class="ae hv" href="https://dashboard.stripe.com/account/payments/apple_pay" rel="noopener ugc nofollow" target="_blank">这里</a>做这个。</li></ol><p id="1011" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">一旦所有步骤完成，你就可以开始测试Apple Pay了👍</p><p id="6755" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">YouTube上还发布了一个关于Apple Pay集成的详细教程视频。您可以在此登记:</p><figure class="lc ld le lf fd hk"><div class="bz dy l di"><div class="nh ni l"/></div></figure></div><div class="ab cl lg lh gp li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="hb hc hd he hf"><p id="6c69" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">从这里开始，我将解释现在支付、谷歌支付和苹果支付之间的共性。当你测试那些支付方式时，卡信息不是唯一重要的东西；送货地址和支付按钮的设计也是你需要考虑的因素。</p><h1 id="cb08" class="kj kk hy bd kl km kn ko kp kq kr ks kt je ku jf kv jh kw ji kx jk ky jl kz la bi translated">其他提示</h1><p id="c810" class="pw-post-body-paragraph jn jo hy jp b jq mj iz js jt mk jc jv jw ml jy jz ka mm kc kd ke mn kg kh ki hb bi translated">我们已经在上面看到了测试卡。以下是我在研究实施这些支付方式时遇到的其他技巧</p><h2 id="8b4a" class="lv kk hy bd kl lw lx ly kp lz ma mb kt jw mc md kv ka me mf kx ke mg mh kz mi bi translated">送货地址。</h2><p id="350f" class="pw-post-body-paragraph jn jo hy jp b jq mj iz js jt mk jc jv jw ml jy jz ka mm kc kd ke mn kg kh ki hb bi translated">当你从Apple Pay和Google Pay提取发货时，我发现地址格式不同。这里需要注意的重要一点是，Google Pay不提供line2或建筑信息。这个地址来自一个句子，所以如果你像实现Apple Pay一样实现这个发货部分，它可能会引起一个不受欢迎的错误。</p><div class="lc ld le lf fd ab cb"><figure class="na hk oy nc nd ne nf paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><img src="../Images/32f52dac721aeb4ec17d18a2b323558b.png" data-original-src="https://miro.medium.com/v2/resize:fit:988/format:webp/1*Geppm6OeMPcHnT0eU3IGMA.png"/></div></figure><figure class="na hk oz nc nd ne nf paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><img src="../Images/a8f4e26cc70611b33045c2d8ee332cc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1014/format:webp/1*lmhvoGbkFtW8Vq1qX_epPg.jpeg"/></div><figcaption class="hr hs et er es ht hu bd b be z dx pa di pb pc">Apple Pay and Google Pay</figcaption></figure></div><p id="2b10" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">条带提供事件来侦听更改/更新。您可以使用<code class="du ns nt nu mp b">shippingaddresschange</code>事件，然后使用接收到的运输信息，您可以在您的前端或后端正确地解析它。</p><h2 id="c0fd" class="lv kk hy bd kl lw lx ly kp lz ma mb kt jw mc md kv ka me mf kx ke mg mh kz mi bi translated">支付</h2><p id="1ebb" class="pw-post-body-paragraph jn jo hy jp b jq mj iz js jt mk jc jv jw ml jy jz ka mm kc kd ke mn kg kh ki hb bi translated">创建购买时，需要在30秒内完成支付<em class="lq">，否则失败。如果您遇到了在服务器中支付成功但支付单一直抛出失败错误的错误，建议优化支付流程。顺带一提，用户体验。</em></p><h2 id="99b9" class="lv kk hy bd kl lw lx ly kp lz ma mb kt jw mc md kv ka me mf kx ke mg mh kz mi bi translated">式样</h2><p id="478f" class="pw-post-body-paragraph jn jo hy jp b jq mj iz js jt mk jc jv jw ml jy jz ka mm kc kd ke mn kg kh ki hb bi translated">这些预建支付方式的设计并不完全灵活，但你可以选择改变颜色、宽度或高度以及类型。类型是按钮的标题。它提供了几个选项供选择——捐赠、预订或购买。</p><p id="9410" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">如果你想创建一个可定制的按钮，你可以设计你自己的按钮。在这种情况下，你需要遵循Apple Pay的<a class="ae hv" href="https://medium.com/r?url=https%3A%2F%2Fdeveloper.apple.com%2Fapple-pay%2Fweb-human-interface-guidelines%2F]" rel="noopener">人机界面指南</a>和Google Pays的<a class="ae hv" href="https://developers.google.com/pay/api/web/guides/brand-guidelines" rel="noopener ugc nofollow" target="_blank">品牌指南</a>。</p><h1 id="b331" class="kj kk hy bd kl km kn ko kp kq kr ks kt je ku jf kv jh kw ji kx jk ky jl kz la bi translated">结论</h1><p id="d67e" class="pw-post-body-paragraph jn jo hy jp b jq mj iz js jt mk jc jv jw ml jy jz ka mm kc kd ke mn kg kh ki hb bi translated">我花了大量的时间来理解如何通过付款请求元素以正确的方式测试那些付款方法。看起来网上的人也在纠结如何测试，尤其是在Google Pay和Pay Now周围。我希望这篇文章有助于开发人员社区，并帮助那些正在经历同样情况的人。</p><p id="066a" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">如果你觉得我的文章有帮助，可以推荐给你的朋友，请为我鼓掌！这让我更有动力分享我的学习。🙌</p></div><div class="ab cl lg lh gp li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="hb hc hd he hf"><p id="5748" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">(如果您希望向我发送提示🙂☕️) <br/> -以太坊地址<br/>0x 45 b 8 c 8712159 be fab 29 C3 B1 e 97 b 4534272 ADF 31</p></div></div>    
</body>
</html>