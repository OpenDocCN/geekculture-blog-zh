<html>
<head>
<title>How to Set Up a Mock Backend with Angular 13 Applications</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Angular 13应用程序设置模拟后端</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/setting-up-a-mock-backend-with-angular-13-applications-26a21788f7da?source=collection_archive---------1-----------------------#2022-04-09">https://medium.com/geekculture/setting-up-a-mock-backend-with-angular-13-applications-26a21788f7da?source=collection_archive---------1-----------------------#2022-04-09</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/8c16d2209f266125dcf0f72921adc8e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W6oKANhN0qKfJII3h_DHpA.png"/></div></div></figure><p id="f218" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在一个前端和后端同时开发的世界中，开发应用程序的开发人员应该能够与一个假的后端进行交互，以便通过模仿后端数据来创建UI，这是非常重要的。</p><p id="24ac" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">多亏了npm包，比如<a class="ae jo" href="https://www.npmjs.com/package/json-server" rel="noopener ugc nofollow" target="_blank"> <strong class="is hj"> json-server </strong> </a>和<a class="ae jo" href="https://www.npmjs.com/package/nodemon" rel="noopener ugc nofollow" target="_blank"> <strong class="is hj"> nodemon </strong> </a>，这个过程变得非常简单。</p><p id="9a9e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">json-server  是一个包，提供了完整的零编码的伪REST API，可以轻松安装。</p><p id="648d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> <em class="jp"> nodemon </em> </strong>是一个帮助开发基于Node.js的应用程序的工具，当检测到目录中的文件发生变化时，它会自动重启节点应用程序。</p></div><div class="ab cl jq jr gp js" role="separator"><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv"/></div><div class="hb hc hd he hf"><p id="efe2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下面是一个模拟后端的逐步设置，您可以从头开始设置一个返回模拟JSON响应的假REST API端点:</p><h1 id="c63a" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">1.创建新项目</h1><p id="279e" class="pw-post-body-paragraph iq ir hi is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hb bi translated">使用<a class="ae jo" href="https://www.npmjs.com/package/@angular/cli" rel="noopener ugc nofollow" target="_blank"> <strong class="is hj"> Angular CLI工具</strong> </a>命令创建一个全新的Angular项目:</p><pre class="la lb lc ld fd le lf lg lh aw li bi"><span id="1b3e" class="lj jy hi lf b fi lk ll l lm ln">ng new mock-server</span></pre><p id="26ef" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这将建立一个名为<strong class="is hj"> <em class="jp">的模拟服务器</em> </strong>的Angular项目，包含如下所示的<strong class="is hj"> <em class="jp"> package.json </em> </strong>。在写这篇文章的时候，使用的有角版本是v13。它可能会在以后的某个时间点发生变化，然而，这个概念仍然保持不变，并且它适用于Angular 2+的每个版本。</p><figure class="la lb lc ld fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lo"><img src="../Images/b95aa5cacd1b577e2e151331c88a8972.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dXLyeSc2TDeRX2ENZ1zymA.png"/></div></div><figcaption class="lp lq et er es lr ls bd b be z dx">package.json</figcaption></figure><h1 id="8b68" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">2.安装npm软件包</h1><pre class="la lb lc ld fd le lf lg lh aw li bi"><span id="29d7" class="lj jy hi lf b fi lk ll l lm ln">npm install json-server --save-dev<br/>npm install nodemon --save-dev</span></pre><p id="31be" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">以上命令将最新版本的json-server和nodemon作为一个dev依赖项进行安装，并将它添加到您的<strong class="is hj"> <em class="jp"> package.json </em> </strong>文件中。</p><figure class="la lb lc ld fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lt"><img src="../Images/ed206e66a5151c8843f05d8803675446.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tgrxrAhXTlzG--r_Xk0xDQ.png"/></div></div><figcaption class="lp lq et er es lr ls bd b be z dx">package.json</figcaption></figure><h1 id="d1b5" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">3.在JSON文件中添加模拟数据</h1><p id="41f9" class="pw-post-body-paragraph iq ir hi is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hb bi translated">创建一个名为<strong class="is hj"> <em class="jp">服务器</em> </strong>的文件夹。根据您的选择，该名称可以是任何名称。在<strong class="is hj"> <em class="jp">服务器</em> </strong>文件夹、<strong class="is hj"><em class="jp">data/users/json</em></strong>内创建另一个文件夹结构，并创建一个<strong class="is hj"><em class="jp">getusers . JSON</em></strong>文件<strong class="is hj"> <em class="jp"> </em> </strong>以JSON响应<strong class="is hj"> <em class="jp">的形式包含模拟用户列表。</em> </strong>创建上述文件夹结构是为了确保一致性，以防添加多个虚假的API JSON响应，并且它们可能属于应用程序中单独的功能模块。文件夹结构是在功能模块的基础上创建的，很像我们在Angular app中对功能模块所做的。</p><figure class="la lb lc ld fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lu"><img src="../Images/a57bff0fcd20b471e1c0714477f4d986.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tLbAOnu86ytMSKFPMj2SsQ.png"/></div></div><figcaption class="lp lq et er es lr ls bd b be z dx">getUsers.json</figcaption></figure><h1 id="dc9a" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">4.添加index.js文件</h1><p id="29e0" class="pw-post-body-paragraph iq ir hi is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hb bi translated">要导出<strong class="is hj"> <em class="jp"> server.js </em> </strong>文件中的JSON数据，请在<strong class="is hj"><em class="jp">server/data/users</em></strong>文件夹中创建一个<strong class="is hj"> <em class="jp"> index.js </em> </strong>文件，该文件导出模拟JSON响应(用户列表)作为要在<strong class="is hj"> <em class="jp"> server.js </em> </strong>文件中使用的模块。<strong class="is hj"><em class="jp">module . exports</em></strong>是一个特殊的对象，默认包含在Node.js <strong class="is hj"> </strong>应用程序的每个JavaScript文件中。module是表示当前模块的变量，exports是将作为模块公开的对象。</p><figure class="la lb lc ld fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lv"><img src="../Images/098493decf10f1ce2b4d3e13102804c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QtoLThnlFmgZzrznuqfpVw.png"/></div></div><figcaption class="lp lq et er es lr ls bd b be z dx">index.js</figcaption></figure><h1 id="449f" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">5.添加一个server.js文件将所有内容连接在一起</h1><p id="2a51" class="pw-post-body-paragraph iq ir hi is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hb bi translated">创建一个<strong class="is hj"> <em class="jp"> server.js </em> </strong>文件，其中包含使用Node.js设置<strong class="is hj"> <em class="jp"> json-server </em> </strong>的配置，配置如下:</p><figure class="la lb lc ld fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lw"><img src="../Images/21db11608456785d78ec2016fd4c3c1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FrLBltu94VwJIalI5zAfLA.png"/></div></div><figcaption class="lp lq et er es lr ls bd b be z dx">server.js</figcaption></figure><p id="bdaa" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">上面的节点服务器运行在端口号3000上。它在端点<strong class="is hj"> <em class="jp"> /api/users </em> </strong>监听请求，以返回<strong class="is hj"><em class="jp">http://localhost:3000/API/users上的用户列表。</em> </strong></p><h1 id="97eb" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">6.在package.json中添加脚本</h1><p id="93e9" class="pw-post-body-paragraph iq ir hi is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hb bi translated">在<strong class="is hj"> <em class="jp"> server.js </em> </strong>文件中完成服务器的配置后，在<strong class="is hj"> <em class="jp"> package.json </em> </strong>中创建一个脚本，如下图:</p><pre class="la lb lc ld fd le lf lg lh aw li bi"><span id="96fe" class="lj jy hi lf b fi lk ll l lm ln">"mock:server": "nodemon server/server.js --ext js,ts,json,html"</span></pre><figure class="la lb lc ld fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lx"><img src="../Images/b6c661614facff65ab10387ea818f571.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vAlA7_4wybK4ITLrq70yYg.png"/></div></div><figcaption class="lp lq et er es lr ls bd b be z dx">package.json</figcaption></figure><p id="7a2a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在命令行上添加<strong class="is hj"><em class="jp">NPM run mock:Server</em></strong>查看服务器运行时的控制台消息，<strong class="is hj"><em class="jp">“JSON Server running at port 3000”。</em> </strong>上面的脚本在监视模式下运行，并监听对*类型文件的任何更改。js，*。ts，*。json和*。它会自动重启节点服务器。</p><figure class="la lb lc ld fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ly"><img src="../Images/5a7a03656efb9dc6c05db8a6a141c555.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xFnbp3CAaFdw2OXPJy4xeg.png"/></div></div><figcaption class="lp lq et er es lr ls bd b be z dx">Command line view of mock JSON server running at port 3000</figcaption></figure><h1 id="9498" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">7.转到浏览器并输入URL</h1><p id="f270" class="pw-post-body-paragraph iq ir hi is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hb bi translated">瞧啊。我们的模拟服务器已经设置好，可以进行测试了。进入浏览器，点击地址栏中的<a class="ae jo" href="http://localhost:3000/api/users" rel="noopener ugc nofollow" target="_blank">http://localhost:3000/API/users</a>。您将能够在浏览器上看到用户列表。</p><p id="4507" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">类似地，您可以为POST、PUT、PATCH和DELETE操作设置模拟端点。</p><figure class="la lb lc ld fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lz"><img src="../Images/07744f7d5adea77b45e0445941bae1ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*55YqdcDBrikYwkQ5jEnitg.png"/></div></div><figcaption class="lp lq et er es lr ls bd b be z dx">JSON Server running at http://localhost:3000</figcaption></figure><h1 id="1040" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated"><strong class="ak"> 8。在角度应用UI上测试它</strong></h1><p id="4b86" class="pw-post-body-paragraph iq ir hi is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hb bi translated">将<a class="ae jo" href="https://angular.io/api/common/http/HttpClientModule" rel="noopener ugc nofollow" target="_blank"> <strong class="is hj"> HttpClientModule </strong> </a>注入到<strong class="is hj"> <em class="jp"> app.module.ts </em> </strong>中，将<a class="ae jo" href="https://angular.io/api/common/http/HttpClient" rel="noopener ugc nofollow" target="_blank"> <strong class="is hj"> HttpClient </strong> </a>作为依赖注入到<strong class="is hj"><em class="jp">app . component . ts .</em></strong>中，然后在<a class="ae jo" href="https://angular.io/api/core/OnInit" rel="noopener ugc nofollow" target="_blank"> <strong class="is hj"> ngOnInit() </strong> </a>生命周期钩子中，从模拟API端点<a class="ae jo" href="http://localhost:3000/api/users" rel="noopener ugc nofollow" target="_blank"> http://localhost</a></p><figure class="la lb lc ld fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ma"><img src="../Images/8dc045a6ffcd636bc126631cdd80a77a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B7YUAZvl8e-fzd9YrQOLJQ.png"/></div></div><figcaption class="lp lq et er es lr ls bd b be z dx">app.module.ts</figcaption></figure><figure class="la lb lc ld fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mb"><img src="../Images/bc536d93289333528d7e0e2396181550.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TZ7adGwyLfUS_XSCxSZLpw.png"/></div></div><figcaption class="lp lq et er es lr ls bd b be z dx">app.component.ts</figcaption></figure></div><div class="ab cl jq jr gp js" role="separator"><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv"/></div><div class="hb hc hd he hf"><p id="65a8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你在编码的过程中遇到了困难，下面是GitHub repo的公开链接:</p><p id="65ce" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae jo" href="https://github.com/akashkriplani/mock-server" rel="noopener ugc nofollow" target="_blank"><strong class="is hj"><em class="jp">https://github.com/akashkriplani/mock-server</em></strong></a></p><h1 id="88d0" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">结论</h1><p id="8045" class="pw-post-body-paragraph iq ir hi is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hb bi translated">现在我们有了。我希望这篇文章对你有用。感谢您的阅读。请随时提供您的意见、建议和任何其他可能有帮助的反馈。</p><p id="c13f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="jp">更多内容请看</em><a class="ae jo" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="is hj"><em class="jp">plain English . io</em></strong></a><em class="jp">。报名参加我们的</em> <a class="ae jo" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="is hj"> <em class="jp">免费每周简讯</em> </strong> </a> <em class="jp">。关注我们</em><a class="ae jo" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="is hj"><em class="jp">Twitter</em></strong></a><em class="jp">和</em><a class="ae jo" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="is hj"><em class="jp">LinkedIn</em></strong></a><em class="jp">。加入我们的</em> <a class="ae jo" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="is hj"> <em class="jp">社区不和谐</em> </strong> </a> <em class="jp">。</em></p></div></div>    
</body>
</html>