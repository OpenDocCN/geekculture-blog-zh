<html>
<head>
<title>Change App Icons in SwiftUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在SwiftUI中更改应用程序图标</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/change-app-icons-in-swiftui-11c7b5f2b2ed?source=collection_archive---------13-----------------------#2021-05-23">https://medium.com/geekculture/change-app-icons-in-swiftui-11c7b5f2b2ed?source=collection_archive---------13-----------------------#2021-05-23</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="fccd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">SwiftUI中的备用应用图标切换器</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/ce0b809dd5d12740763dd662aae33114.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HLZf2Q2jBWrOqddi4MbEZA.jpeg"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx">Image Credits: Alexander Shatov on Unsplash</figcaption></figure><p id="9059" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">替代应用图标功能已经存在一段时间了(从iOS 10.3开始)。Slack、Github、Telegram等热门应用已经提供了这一功能。它实现起来相当简单，并为用户增加了一个很好的定制选项。</p><p id="1d29" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们的目标</p><p id="db40" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">本文将向您展示如何在SwiftUI中构建一个替代的应用程序图标切换器。</p><p id="e61f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">请务必按照苹果的人机界面指南<a class="ae jt" href="https://developer.apple.com/design/human-interface-guidelines/ios/icons-and-images/app-icon/" rel="noopener ugc nofollow" target="_blank">准备好您的应用程序图标集</a>。</p><p id="acfa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们开始吧！</p><p id="7c47" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="ju">第一步:</em> </strong></p><p id="ff72" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">头到<code class="du jv jw jx jy b">Info.plist</code>文件，<code class="du jv jw jx jy b">Add Row</code> &amp;命名为<code class="du jv jw jx jy b">Icon files(iOS 5)</code>。一旦你这样做了，它会显示一个<code class="du jv jw jx jy b">Primary Icon</code>和一个<code class="du jv jw jx jy b"> Newsstand Icon</code>。</p><p id="9230" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这样，我们将继续在图标文件(iOS 5)中创建一个名为<code class="du jv jw jx jy b"><strong class="ih hj">CFBundleAlternateIcons</strong></code>的类型为<code class="du jv jw jx jy b">Dictionary</code>的新部分。</p><p id="27d1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我们的字典(<code class="du jv jw jx jy b">CFBundleAlternateIcons</code>)中，我们将创建另一个字典，并将其命名为<code class="du jv jw jx jy b">Black</code> <strong class="ih hj">。</strong>在这个字典中，我们将添加一个名为<code class="du jv jw jx jy b"><strong class="ih hj">CFBundleIconFiles</strong></code> <strong class="ih hj">的数组。我们将在这个数组中添加图标的名称。</strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jz"><img src="../Images/9bb21e65c6dfce13bab71f77143456d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1268/format:webp/1*RwGROR6Yyoar64ljGiYhdw.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx">Info.plist</figcaption></figure><p id="ad6c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们将应用程序图标导入到我们的项目中。</p><blockquote class="ka kb kc"><p id="7a71" class="if ig ju ih b ii ij ik il im in io ip kd ir is it ke iv iw ix kf iz ja jb jc hb bi translated">注意:我们不会将这些图标添加到<code class="du jv jw jx jy b"><strong class="ih hj">Assets.xcassets</strong></code>文件夹中(就像您可能已经为默认应用程序图标所做的那样)。</p></blockquote><p id="a9e3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">创建一个名为<code class="du jv jw jx jy b"><strong class="ih hj">Icons</strong></code> <strong class="ih hj"> </strong>的群组，然后&amp;在那里添加你的替代图标。我建议给这些图标图像集起个聪明的名字，因为你以后会用到它们。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kg"><img src="../Images/7bccc306d64a24bbea8839e14b24656e.png" data-original-src="https://miro.medium.com/v2/resize:fit:414/format:webp/1*H1fTFoKPUyRR6JRxzv0ChQ.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx">The example project is called “Marvel”, you’ll create the folder “Icons” within the structure of your Xcode project.</figcaption></figure><p id="b14c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在数组中，我们将添加第一个图标的名称<code class="du jv jw jx jy b">Black</code>，我刚刚在这里添加了一个替代图标，但您可以随意复制字典<code class="du jv jw jx jy b">Black</code>来获得您想要的任意多个图标，只需用您相应的图标名称替换<code class="du jv jw jx jy b">Black</code>即可。</p><p id="d8b0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们已经完成了在项目中添加图标的初始设置。现在让我们看看如何在下一步访问这些图标。</p><p id="d83b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="ju">第二步:</em> </strong></p><p id="ff20" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">1.)创建一个符合<code class="du jv jw jx jy b"><em class="ju">ObservableObject</em></code>的类<code class="du jv jw jx jy b">IconNames</code>。</p><p id="6c84" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.)我们将<code class="du jv jw jx jy b">iconNames</code>设为可选，以防图标找不到时崩溃。</p><p id="ec7e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.)现在声明另一个变量来跟踪我们所在的索引，并定义一个函数<code class="du jv jw jx jy b"><em class="ju">getAlternateIconNames()</em></code>来访问图标名称，如下所示</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kh ki l"/></div></figure><p id="6c7d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="ju">第三步:</em> </strong></p><p id="2c6a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们开始设置<code class="du jv jw jx jy b">ContentView</code>，添加一个选择绑定到<code class="du jv jw jx jy b">iconSettings</code>的选择器，也就是说，当当前索引&amp;图标名称改变时，它也会改变我们的选择器。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kh ki l"/></div></figure><p id="0e11" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在<code class="du jv jw jx jy b">ForEach</code>中，我们将从0迭代到所有图标名称&amp;获取索引的值，因为它是可选的，所以如果没有任何内容，我们将提供默认应用程序图标的值来后退。</p><p id="3766" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于图像，我们将再次获取当前索引的<code class="du jv jw jx jy b"><em class="ju">iconName</em></code>，提供我们的默认AppIcon图像作为我们的后备选项&amp;，如果一切都是<code class="du jv jw jx jy b">nil</code>，那么它将只显示一个空白图像。</p><p id="7262" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，如果用户打开了选择器，但改变了主意，最终点击了默认的应用程序图标，会发生什么呢？我们不想在这种情况下做任何事情，因为该应用程序图标已经在使用中。这正是我们在<code class="du jv jw jx jy b"><em class="ju">onReceive</em></code>实例方法中处理的，我们将检查是否选择了任何替代的应用程序图标名称，如果没有，那么我们将退回到默认的应用程序图标。但是，如果选择了替代图标，我们将更改应用程序图标。(参考上面显示的代码)</p><p id="74a2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="ju">第四步</em> </strong>:</p><p id="6588" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">对于UIKit应用生命周期:</strong></p><p id="2222" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在<code class="du jv jw jx jy b">SceneDelegate.swift</code>中，确保编辑根视图，这样<code class="du jv jw jx jy b">ContentView</code>就有了<code class="du jv jw jx jy b">environmentObject</code> <code class="du jv jw jx jy b">IconNames()</code> &amp;它所做的是用<code class="du jv jw jx jy b">IconNames</code>初始化我们的<code class="du jv jw jx jy b">ContentView</code>，这样当<code class="du jv jw jx jy b">ContentView</code>构建时，它就已经被信息填充了。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kj"><img src="../Images/4c3451c3cb47a2f4174f9faadd5bc7aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wcKglyK0ssPOMG8_PR_8OA.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx">SceneDelegate.swift</figcaption></figure><p id="a92e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">对于SwiftUI应用生命周期:</strong></p><p id="4b43" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因为它们没有<code class="du jv jw jx jy b">SceneDelegate</code>和<code class="du jv jw jx jy b">AppDelegate</code>文件，你可以将<code class="du jv jw jx jy b">IconNames()</code>作为<code class="du jv jw jx jy b"><strong class="ih hj">“YourAppName"</strong>App.swift</code>文件中的<code class="du jv jw jx jy b">environmentObject</code>或者在<code class="du jv jw jx jy b">ContentView</code>文件中传递，如果你是从另一个视图执行这个特性的话(例如:一个单独的<code class="du jv jw jx jy b">SettingsView</code>)。</p><h2 id="cfa0" class="kk kl hi bd km kn ko kp kq kr ks kt ku iq kv kw kx iu ky kz la iy lb lc ld le bi translated"><strong class="ak">结果:</strong></h2><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lf"><img src="../Images/5ecf6d2aba7480c1429b05cb9949bfa3.png" data-original-src="https://miro.medium.com/v2/resize:fit:366/1*enIdKUcj4lSmVYEjJzyj3w.gif"/></div></figure><p id="ce8b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">参考文献</strong> : <a class="ae jt" href="https://www.youtube.com/watch?v=ZRg7JDnYAQ8" rel="noopener ugc nofollow" target="_blank">创建可互换的应用程序图标</a>作者Jared Davidson</p><p id="2641" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">感谢阅读！</p></div></div>    
</body>
</html>