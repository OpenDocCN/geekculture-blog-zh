<html>
<head>
<title>HTML Event Handling in TypeScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">TypeScript中的HTML事件处理</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/html-event-handling-in-typescript-b9ca7178d912?source=collection_archive---------1-----------------------#2021-06-15">https://medium.com/geekculture/html-event-handling-in-typescript-b9ca7178d912?source=collection_archive---------1-----------------------#2021-06-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="cb2e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">TypeScript是一种美丽的语言，与JavaScript相比，我个人更喜欢用它来编码。虽然有很多前端库和框架支持TypeScript，但我最近尝试用纯HTML代码为一个项目编写TypeScript函数。我必须完成的一项任务是为一个元素编写一个事件处理函数。让我们来看看用TypeScript处理HTML事件。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/a2e1d48b1490578da9ca9bd6f487982d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UloGsbEQgl9ZSBLC0OhoTg.jpeg"/></div><figcaption class="jl jm et er es jn jo bd b be z dx">Working with TypeScript</figcaption></figure><blockquote class="jp jq jr"><p id="549a" class="if ig js ih b ii ij ik il im in io ip jt ir is it ju iv iw ix jv iz ja jb jc hb bi translated"><a class="ae jw" href="https://developer.mozilla.org/en-US/docs/Web/API/Document_Object_Model/Events" rel="noopener ugc nofollow" target="_blank"> DOM事件</a>被触发以通知代码可能影响代码执行的“有趣的变化”。</p></blockquote><p id="91f2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">借用<a class="ae jw" href="https://developer.mozilla.org/en-US/docs/Web/Events" rel="noopener ugc nofollow" target="_blank"> MDN Docs </a>，这个DOM事件的定义可能是最准确的。事件只是让我们知道DOM中发生了一些变化的一种方式。这允许我们使我们的网页互动，让他们对这些变化作出反应。让我们看看如何使用TypeScript编程语言来应对这些变化。</p><h2 id="b110" class="jx jy hi bd jz ka kb kc kd ke kf kg kh iq ki kj kk iu kl km kn iy ko kp kq kr bi translated">先决条件</h2><p id="9162" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">这篇文章假设你知道如何使用TypeScript的基础知识。对我们的代码做了一些小的解释，但是没有详细说明。</p><p id="420b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此外，如果您已经安装了Node.js和TypeScript，这将很有帮助。你可以试试网上的<a class="ae jw" href="https://www.typescriptlang.org/play/index.html" rel="noopener ugc nofollow" target="_blank">打字稿游乐场</a>。但是最好使用Node.js执行TypeScript。</p><p id="d4ca" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你可以参考以前的故事<a class="ae jw" rel="noopener" href="/@ruddha2001/first-step-towards-typescript-cb14e1b5728f">迈向TypeScript的第一步</a>来学习如何开始使用TypeScript。</p><h2 id="844d" class="jx jy hi bd jz ka kb kc kd ke kf kg kh iq ki kj kk iu kl km kn iy ko kp kq kr bi translated">创建简单的项目</h2><p id="62cd" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">我们今天的目标是学习事件处理程序是如何工作的。现在，要添加事件处理程序，我们有两个选择:</p><ol class=""><li id="0f74" class="kx ky hi ih b ii ij im in iq kz iu la iy lb jc lc ld le lf bi translated">使用<em class="js"> addEventListener() </em></li><li id="2b05" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated">使用特定的<em class="js"> onevent </em>处理程序</li></ol><p id="491f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这篇文章将讨论第一种方法，因为我总是觉得我们不应该在第一次学习某样东西的时候讨论具体的事情。</p><p id="a999" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们写下一个简单的代码:</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ll lm l"/></div></figure><p id="2a63" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该代码将:</p><ol class=""><li id="5c48" class="kx ky hi ih b ii ij im in iq kz iu la iy lb jc lc ld le lf bi translated">通过id“sample”获取元素</li><li id="f044" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated">添加一个监听“点击”事件的事件监听器</li><li id="c394" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated">将元素的背景颜色更改为“红色”</li></ol><p id="2e75" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们更深入地研究一下代码。</p><h2 id="c995" class="jx jy hi bd jz ka kb kc kd ke kf kg kh iq ki kj kk iu kl km kn iy ko kp kq kr bi translated">理解代码如何工作</h2><p id="de66" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">如果我们查找<em class="js"> addEventListener </em>的函数定义，我们会得到</p><pre class="je jf jg jh fd ln lo lp lq aw lr bi"><span id="629f" class="jx jy hi lo b fi ls lt l lu lv">(method) HTMLElement.addEventListener&lt;K extends keyof HTMLElementEventMap&gt;(type: K, listener: (this: HTMLElement, ev: HTMLElementEventMap[K]) =&gt; any, options?: boolean | AddEventListenerOptions | undefined): void (+1 overload)</span></pre><p id="a184" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们看到第一个参数是<em class="js">类型</em>，第二个参数是<em class="js">监听器</em>。这个<em class="js">监听器</em>本身就是一个函数，它接受一个<em class="js"> HTMLElement </em>和<em class="js"> HTMLElementEventMap </em>作为参数。</p><p id="f3d3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，<em class="js"> addEventListener("click "，listenerFunction) </em>意味着我们希望侦听" click "事件(单次鼠标单击)，然后在遇到单击时执行listenerFunction。很简单，对吧？</p><p id="6a36" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">listenerFunction是一个简单的函数，它接受两个参数，<em class="js"> this </em>和<em class="js"> ev，</em>分别具有“HTMLElement”和“Event”类型。因为我们得到了一个HTMLElement，所以我们可以直接对它进行操作来改变我们想要的任何属性(在我们的例子中是改变背景颜色)。</p><p id="e146" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们在事件上使用<em class="js"> "preventDefault()" </em>来防止默认操作像通常一样发生。你可以在“未来”部分了解更多。</p><h2 id="4797" class="jx jy hi bd jz ka kb kc kd ke kf kg kh iq ki kj kk iu kl km kn iy ko kp kq kr bi translated">执行代码</h2><p id="c6ef" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">现在让我们试着执行我们的代码。</p><p id="423a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤1: </strong>我们将使用一个非常简单的HTML文件来执行。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ll lm l"/></div></figure><p id="e3af" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们有一个单独的<em class="js"> div </em>元素，高度和宽度为200px，背景颜色最初设置为蓝色。该元素的id为“sample”，我们的脚本将使用它来标识该元素。</p><p id="4566" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们还在head部分导入了我们的脚本，因为它非常小(您<a class="ae jw" href="https://stackoverflow.com/questions/3531314/should-i-write-script-in-the-body-or-the-head-of-the-html" rel="noopener ugc nofollow" target="_blank">不应该在head </a>中包含太多脚本)。我们正在执行<em class="js"> initFunction() </em>来将事件监听器附加到我们的<em class="js"> div </em>元素。</p><p id="497a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> Setp 2: </strong>但是等等？我们的文件在TypeScript中，但是我们正在导入一个JavaScript文件？嗯，我们只需要运行编译器！</p><pre class="je jf jg jh fd ln lo lp lq aw lr bi"><span id="2145" class="jx jy hi lo b fi ls lt l lu lv">npx tsc script.ts</span></pre><p id="fed9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里，<em class="js"> npx </em>确保了即使TypeScript没有被全局安装，我们也可以使用<em class="js"> tsc </em>来编译我们的文件。</p><p id="af9b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在一切都准备好了，我们只需要一台服务器。如果你在Windows上，你可以使用IIS。像我这样的Linux用户会希望使用nginx或apache。但是为了简单起见，我们将使用一个VS代码扩展，<a class="ae jw" href="https://marketplace.visualstudio.com/items?itemName=ritwickdey.LiveServer" rel="noopener ugc nofollow" target="_blank"> Live Server </a>。</p><p id="f0d1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">安装完扩展后，按下键盘上的<em class="js"> Alt + L </em>和<em class="js"> Alt + O </em>。您的浏览器应该会打开一个显示蓝框的页面。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="er es lw"><img src="../Images/e43f6aa037068eeaca9e7c8a1fab11c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tS3QjtjFo5t4Z3FisgflOQ.png"/></div></div><figcaption class="jl jm et er es jn jo bd b be z dx">Initial state</figcaption></figure><p id="04aa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">点击蓝框，瞧！盒子现在是红色的。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="er es lw"><img src="../Images/117896e2f8e961690ad828fe4399e1c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dvds90S1e-n4L2Gj3n8Q7w.png"/></div></div><figcaption class="jl jm et er es jn jo bd b be z dx">After a single mouse button click</figcaption></figure><h2 id="c82d" class="jx jy hi bd jz ka kb kc kd ke kf kg kh iq ki kj kk iu kl km kn iy ko kp kq kr bi translated">结论</h2><p id="218e" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">这就结束了我们使用TypeScript处理事件的时间。只要正确地遵循参数的类型，附加事件侦听器并使用TypeScript中的元素是非常容易的。</p><p id="0957" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">除了click之外，您还可以添加任何事件。你可以在你的处理函数中加入任何逻辑，它会像热黄油切刀一样工作。您可以点击“未来”一节中的链接，了解有关各种主题的更多信息。</p><p id="812b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">暂时，再见！</p><h2 id="e840" class="jx jy hi bd jz ka kb kc kd ke kf kg kh iq ki kj kk iu kl km kn iy ko kp kq kr bi translated">更远的前方</h2><ul class=""><li id="b9ec" class="kx ky hi ih b ii ks im kt iq mb iu mc iy md jc me ld le lf bi translated"><a class="ae jw" href="https://developer.mozilla.org/en-US/docs/Web/Events#event_listing" rel="noopener ugc nofollow" target="_blank">各种事件类型| MDN </a></li><li id="c333" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc me ld le lf bi translated"><a class="ae jw" href="https://developer.mozilla.org/en-US/docs/Web/API/Event/preventDefault" rel="noopener ugc nofollow" target="_blank">event . prevent default()| MDN</a></li><li id="c3f7" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc me ld le lf bi translated"><a class="ae jw" href="https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener" rel="noopener ugc nofollow" target="_blank">event target . addevent listener()| MDN</a></li></ul></div></div>    
</body>
</html>