<html>
<head>
<title>Intro to React-Redux</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React-Redux简介</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/intro-to-react-redux-f33d0edc8a29?source=collection_archive---------21-----------------------#2021-05-15">https://medium.com/geekculture/intro-to-react-redux-f33d0edc8a29?source=collection_archive---------21-----------------------#2021-05-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="1fcf" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">使用Redux快速了解状态管理，包括演练</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/d691d29f9dd02b61783404d73f56336a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tchNjXpxh80hZJK-JP1idg.jpeg"/></div></div></figure><p id="22ea" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在使用了React一段时间后，可以说你已经不得不经常处理状态了。你也可能听说过Redux，它可以帮助你更有效地管理你的状态。现在，我应该提到，完全有可能创建一个没有Redux实现的应用程序，这很好，我已经做到了。但是随着应用程序的增长和变得更大，在应用程序的各个组件层中管理状态变得更加困难。这就是Redux可以介入并帮助我们管理应用程序状态的地方。</p><p id="249b" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">让我们首先更深入地了解一下Redux是什么，以及它实际上为我们这些开发人员做了什么。之后，我们将使用Redux来管理示例React应用程序中的状态。</p></div><div class="ab cl kf kg gp kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="hb hc hd he hf"><h2 id="4106" class="km kn hi bd ko kp kq kr ks kt ku kv kw js kx ky kz jw la lb lc ka ld le lf lg bi translated">redux是什么？</h2><p id="17be" class="pw-post-body-paragraph jj jk hi jl b jm lh ij jo jp li im jr js lj ju jv jw lk jy jz ka ll kc kd ke hb bi translated">嗯，根据定义，Redux是几乎所有JavaScript应用程序的可预测状态容器，不管您喜欢React、vanilla还是Vue。这里的关键是Redux是可预测的，因为它是可预测的，所以我们知道它的行为是一致的。</p><h2 id="c884" class="km kn hi bd ko kp kq kr ks kt ku kv kw js kx ky kz jw la lb lc ka ld le lf lg bi translated">但是为什么要用Redux呢？</h2><p id="8cd7" class="pw-post-body-paragraph jj jk hi jl b jm lh ij jo jp li im jr js lj ju jv jw lk jy jz ka ll kc kd ke hb bi translated">Redux的卖点是它将维护应用程序的整体状态。但是React难道没有能力在整个应用程序中自己管理状态吗？是的，它确实是这样，但是我们声明state的地方意味着所有的反应。Redux允许我们将状态全球化和集中化。这是因为我们的状态来自我们的“存储”，它是我们真理的唯一来源。看看下面的例子:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lm"><img src="../Images/655d428a14240417c3451283a62e56e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VEwaiWhhBH5Uq2KvHalgfA.png"/></div></div></figure><p id="3ded" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">如果不使用redux，当前状态中的状态只能被它自己和它的子组件访问。如果我们需要访问我们在父组件或单独组件中声明的状态，该怎么办？在这种情况下，我们需要将状态容器移动到最高的组件级别。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ln"><img src="../Images/0348023183722153d939d97cfc5d9039.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5-u-nStCfn3vZKf_2tSzyg.png"/></div></div></figure><p id="7e44" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">使用Redux，我们能够在许多不同的组件层上创建状态，并在整个应用程序中访问状态。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lo"><img src="../Images/05f055e9d7653568ff689c272f42a3ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZTFqvZl8J24D1Z5c1lN5pQ.png"/></div></div></figure><p id="c98b" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">如果你想跟随我们使用Redux的演练，你可以在这里找到样板报告<a class="ae lp" href="https://github.com/TheRealKevBot/ReduxBlogBoilerplate" rel="noopener ugc nofollow" target="_blank"/>。</p></div><div class="ab cl kf kg gp kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="hb hc hd he hf"><h2 id="d2d7" class="km kn hi bd ko kp kq kr ks kt ku kv kw js kx ky kz jw la lb lc ka ld le lf lg bi translated">使用Redux</h2><p id="9f96" class="pw-post-body-paragraph jj jk hi jl b jm lh ij jo jp li im jr js lj ju jv jw lk jy jz ka ll kc kd ke hb bi translated">现在我们对redux是什么以及它能为我们做什么有了一个基本的概念，让我们开始实际使用它并存储一些状态。我们首先需要为我们的React应用程序安装Redux，但这并不像即插即用那么简单。要安装必要的Redux包，您可以通过运行以下命令来完成。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es lq"><img src="../Images/85fafad419e99a349a85f35ada7d58df.png" data-original-src="https://miro.medium.com/v2/resize:fit:536/format:webp/1*yfB6C5GNeaTWqw6hX1AiFA.png"/></div><figcaption class="lr ls et er es lt lu bd b be z dx">This will install redux and redux for react</figcaption></figure><p id="d902" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">完成后，我们可以前往index.js，在那里我们将使用Redux的提供者包装我们的应用程序。这应该始终是您的第一步，因为这将有助于使Redux的存储在整个应用程序中全局化，因为它存在于最高层。我们必须确保首先从react-redux包中导入Provider，然后可以像这样替换react strict模式，</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es lv"><img src="../Images/b502b2ef40252d235b1afd9775af4cf1.png" data-original-src="https://miro.medium.com/v2/resize:fit:558/format:webp/1*Fopoovipe5D1rJaGPAytLA.png"/></div></figure><p id="ccdf" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">您可能还注意到，我已经向我们的提供商添加了一个商店道具，但目前是空的。这是因为我们需要先创建我们的商店，然后再把它交给我们的提供商。在我们创建我们的存储之前，让我们来谈谈Redux文件结构。尽管对于我们的应用程序级别来说，这似乎不是必需的，但是这是一个好的实践，因为状态只有变大的可能性。</p><p id="0198" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">为此，我们可以在source (src)文件夹中创建一个名为redux的新文件夹。然后，我们将在redux命名的store中创建一个包含index.js的新文件夹。这个函数碰巧接受了另一个函数，我们的reducer，我们很快就会创建它。现在，我们将通过我们的减速器的未来名称，主减速器。您的redux/store/index.js应该如下所示:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es lw"><img src="../Images/d32dacd306bd6e00804857b1a8feffb0.png" data-original-src="https://miro.medium.com/v2/resize:fit:550/format:webp/1*TelQc07zF7di14LnxcpPkw.png"/></div></figure><p id="0dd4" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">我们还可以将我们创建的商店传递给我们的提供商。我们只需要导入我们的存储文件夹，因为导入文件夹时，导入将查找index.js。值得注意的是，给你的商店命名也是惯例。更新后的src/index.js应该如下所示:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es lx"><img src="../Images/853bf2058801524e240984fecc6563aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:534/format:webp/1*dVIa1_Ur0Ve02C134iUF0A.png"/></div></figure><p id="9d0a" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">我们现在已经为我们的应用程序创建了全局存储，但是我们仍然有一个问题。我们不是刚刚在我们的商店中放置了一个尚不存在的reducer功能吗？是的，我们绝对做到了，但不要担心，现在会引导我们构建主减速器。为了保持我们的文件结构看起来不错，我们将在redux中创建新的文件夹名为reducers，并创建一个名为pokemon.js的文件。这是我们将为最初的151个神奇宝贝创建reducer的地方。</p><p id="f25a" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">我们的reducer是一个函数，它总是将状态和动作作为参数。最棒的是，我们可以直接声明我们的状态数据类型，在这种情况下是一个空数组，而不是不定义它。我们不需要定义我们的动作类型，因为稍后会通过我们的dispatch函数传入。我们需要告诉我们的reducer，它的动作类型可以根据我们发送的命令而变化。之后，我们还需要向我们的reducer声明如何处理这些动作类型。默认情况下，我们希望它返回我们的状态，并且在这一点上，技术上有一个完整的减速器。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es ly"><img src="../Images/b9bf0f002cb5c8a3d7092a7ac2883c36.png" data-original-src="https://miro.medium.com/v2/resize:fit:542/format:webp/1*MqGik-8QOypa_KxnV2yfYg.png"/></div></figure><p id="c7ef" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">但是还没有完全完成。我们还需要在reducers文件夹中创建一个index.js和一个user.js。我们将创建另一个reducer来保存我们的用户的状态，这是我们默认设置的，看起来几乎与我们的pokemon.js相同。我这样做的原因是因为你很少会只处理一个状态，要有多个状态，我们需要调用redux提供的combine reducers函数。</p><p id="5f3e" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在我们的redux/reducers/index.js中，我们将导入联合减速器函数，以及我们的两个状态Pokémon和user，然后在联合减速器函数中返回。现在我们已经完成了主减速器，我们需要确保将其导入到我们的商店中，以便正常工作。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es lz"><img src="../Images/afe9be1f99d8cff3c0e8c8b7447bfcc2.png" data-original-src="https://miro.medium.com/v2/resize:fit:720/format:webp/1*icrK5SV8Z84fe0mFFa47gg.png"/></div></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es ma"><img src="../Images/667e4d6b23da96f05d1e5974edcabd35.png" data-original-src="https://miro.medium.com/v2/resize:fit:568/format:webp/1*Ig6i0Mg4R1Tc4_xrSB8JYg.png"/></div></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mb"><img src="../Images/a152d92fe9f20a2f285ee67675a5e3e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:596/format:webp/1*I7z337O0kaxdWlla6J5ajA.png"/></div></figure><p id="e533" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">现在我们已经建立了我们的基础，让我们实际上设置我们的神奇宝贝的状态，从获取请求到唯一的<a class="ae lp" href="https://pokeapi.co/" rel="noopener ugc nofollow" target="_blank"> pokiapi </a>。为了开始，我们将前往我们的app.js，是的，我知道这是应用程序的顶层，为什么我们需要Redux无论如何，但我们现在保持事情简单。我们将使用React的钩子使用效果来模拟一个组件为获取神奇宝贝而挂载。一切看起来都非常相似，直到我们需要为神奇宝贝设置Redux商店的状态。</p><p id="374b" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">为此，我们需要将我们的操作分派到商店，使用use dispatch函数可以更容易地做到这一点，它将为我们提供对dispatch函数的访问。在将我们的use dispatch函数设置为dispatch的常量变量之后，为了便于使用，我们现在可以设置我们的状态。我们的调度将接受一个动作“type ”,正如我们在reducer中声明的那样，但是我们还没有类型。不要担心，我们将创建我们的类型的名称，现在称为set Pokémon，以及设置我们的有效载荷。您当前的app.js应该是这样的，</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mc"><img src="../Images/fb3639d03fa637babfd91fc2c43045f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:858/format:webp/1*CN6Hvkb5UOCTIVv0XulcVA.png"/></div></div></figure><p id="c2dc" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在我们进一步构建前端之前，我们需要让Redux了解我们的新动作类型，特别是我们的神奇宝贝缩减器。因为它现在知道要做的就是返回我们给它的初始状态。为了补救这种情况，我们只需要在我们的reducer中添加一个case，让它知道我们将设置我们的神奇宝贝，并在我们的set Pokémon操作被调度后返回我们的Pokémon的“更新”状态。</p><p id="47ce" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">此外，我们还想在redux named types内创建另一个新文件夹，带有一个index.js。如果您现在还不明白，这是我们将存储和声明我们不同的操作案例类型的地方。同样，它现在可能会看到反直觉，因为我们目前只有一种类型，但应用程序只能变得更大，所以做好最坏的准备，并为更多的状态做好准备。确保将你设置的神奇宝贝类型导入到你的神奇宝贝还原器中，</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es md"><img src="../Images/cfd92c075e3ae919d246c8272edcb06c.png" data-original-src="https://miro.medium.com/v2/resize:fit:592/format:webp/1*EpAkqv2uG2SG-kSo2r-9xQ.png"/></div></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es me"><img src="../Images/6659b4242cce656bc77c612ea29664ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:652/format:webp/1*RGqawtQGKKG4fTr09fDEfw.png"/></div></figure><p id="f751" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">现在我们的reducers终于准备好了，我们可以回到我们的app.js，在这里我们需要使用选择器进行最后的导入。这是React Redux包提供的另一个功能，它本质上允许我们从存储中选择状态。它将简单地接收状态，然后返回我们想要的东西，在本例中是我们的神奇宝贝。我们将把它设置为一个同名的常量变量，这样在试图向页面呈现某些内容时非常容易使用，</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mf"><img src="../Images/14c8a87d5b674bcdbb4de8fa3cb8d40e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1074/format:webp/1*z48Pn0TKy1CasLOMRXFcog.png"/></div></figure><p id="3229" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在上面的例子中，我们映射了state中的每个神奇宝贝，为每个神奇宝贝呈现了一个包含它们名字的div。正如我之前所说的，我自己已经创建了许多不使用Redux的React应用程序，这并没有错。您的应用程序可能需要也可能不需要实现Redux，但这是您需要自己做出的决定。</p></div><div class="ab cl kf kg gp kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="hb hc hd he hf"><p id="81c3" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">如果你想查看这段代码的副本，或者只是作为参考，你可以在这里找到GitHub Repo <a class="ae lp" href="https://github.com/TheRealKevBot/ReduxBlog" rel="noopener ugc nofollow" target="_blank">的链接。</a></p><p id="d55b" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">我要感谢你的阅读，并希望你学到了新的东西！请关注未来更多文章！</p></div></div>    
</body>
</html>