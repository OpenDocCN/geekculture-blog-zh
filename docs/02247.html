<html>
<head>
<title>Shimmer Effect in Android</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Android中的微光效果</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/shimmer-effect-in-android-2b6840cc0097?source=collection_archive---------2-----------------------#2021-05-08">https://medium.com/geekculture/shimmer-effect-in-android-2b6840cc0097?source=collection_archive---------2-----------------------#2021-05-08</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="64bf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">大家好👋🏻！今天我将向你展示如何在你的Android项目中使用<strong class="ih hj">“微光效果”</strong>。在开始之前，对于那些不知道什么是shimmer的人来说，这是一种向用户展示加载过程的更有效和UX友好的方式。如下所示，这通常是列表项目的首选:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/8aca21701946d61045f7535cdc99ed2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:540/1*Tu5jffgXlt_aP-uVPKqKng.gif"/></div><figcaption class="jl jm et er es jn jo bd b be z dx">Shimmer Effect</figcaption></figure><p id="82e2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，让我们用一个例子来看看如何实现它，好吗？</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="jp jq l"/></div></figure><p id="b8bc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将使用一个由脸书提供的第三方库。</p><p id="d8cc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你想了解一下，请点击这里。</p><p id="8824" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，让我们将相关的依赖项添加到我们的<code class="du js jt ju jv b">app/build.gradle </code>文件中。</p><pre class="je jf jg jh fd jw jv jx jy aw jz bi"><span id="c4f2" class="ka kb hi jv b fi kc kd l ke kf">implementation 'com.facebook.shimmer:shimmer:0.5.0'</span></pre><p id="3f7f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们的应用程序将进行一个假的API调用并获得一个列表。之后，它将在RecyclerView中显示列表。在获取列表时，我们将向用户显示微光效果。</p><p id="a8be" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">实际上，实现微光效果非常简单。我们所要做的就是在实现我们的列表行布局之后，简单地克隆这个布局，只有一个小的不同(给每个子视图一个较暗的背景颜色)，就这样。</p><p id="7bbc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们为我们的RecyclerView创建一个非常简单的<code class="du js jt ju jv b">row_user_list</code>。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="jp jq l"/></div></figure><p id="a9dd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个应该够用了。现在让我们创建我们的<code class="du js jt ju jv b">row_user_list_shimmer</code>。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="jp jq l"/></div></figure><p id="f097" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里，我使用的背景颜色是</p><pre class="je jf jg jh fd jw jv jx jy aw jz bi"><span id="e4de" class="ka kb hi jv b fi kc kd l ke kf">&lt;color name="shimmerColor"&gt;#C2C2C2&lt;/color&gt;</span></pre><p id="71c3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，让我们创建我们的屏幕。我们的<code class="du js jt ju jv b">activity_main.xml</code>文件将包含一个RecyclerView和<strong class="ih hj"> ShimmerFrameLayout。</strong></p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="jp jq l"/></div></figure><p id="b8f1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们在这里所做的就是简单地添加我们想要向ShimmerFrameLayout显示多少个shimmer行。从现在开始，我们将像处理一个普通的progressView一样处理它。</p><p id="41fd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，让我们创建一个伪API调用来获取用户。这里，为了不超出本文的范围，我将使用协程来实现API调用效果。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="jp jq l"/></div></figure><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="jp jq l"/></div></figure><p id="1d2c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，让我们为我们的列表实现一个真正基本的RecyclerViewAdapter。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="jp jq l"/></div></figure><p id="3d6f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们都准备好了💪。让我们看看如何以编程方式设置shimmer。我们所要做的就是在必要的时候呼叫<code class="du js jt ju jv b">startShimmer()</code>和<code class="du js jt ju jv b">stopShimmer()</code>。</p><p id="17ed" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这个项目中，我使用了资源密封类，它非常有用，并且与MVVM设计模式非常兼容。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="jp jq l"/></div></figure><p id="dde2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们现在可以在从MainActivity观察LiveData对象的同时进行相关的操作。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="jp jq l"/></div></figure><p id="497f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">设置好之后，我们的应用程序看起来会像这个🥳🥳:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kg"><img src="../Images/c9a1c3115d10e6d56fa751805383f8e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:804/1*nZVLu6ZQ5AMAUx4TSaR5iQ.gif"/></div></figure><p id="e6ad" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是所有的乡亲。这是展示如何使用微光效果的最基本的方法。当然，你可以做得更好，只要坚持下去🙌。</p><p id="e94a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了以防万一，您可以通过下面的链接获得完整的源代码:</p><div class="kh ki ez fb kj kk"><a href="https://github.com/yunusemrearslan/ShimmerExample" rel="noopener  ugc nofollow" target="_blank"><div class="kl ab dw"><div class="km ab kn cl cj ko"><h2 class="bd hj fi z dy kp ea eb kq ed ef hh bi translated">yunusemrearslan/ShimmerExample</h2><div class="kr l"><h3 class="bd b fi z dy kp ea eb kq ed ef dx translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="ks l"><p class="bd b fp z dy kp ea eb kq ed ef dx translated">github.com</p></div></div><div class="kt l"><div class="ku l kv kw kx kt ky jj kk"/></div></div></a></div><p id="2f85" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下一集再见👋🏻</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kz jq l"/></div></figure></div></div>    
</body>
</html>