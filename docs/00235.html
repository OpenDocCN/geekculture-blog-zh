<html>
<head>
<title>Android: SearchView Implementation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Android: SearchView实现</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/android-searchview-implementation-1998f633681e?source=collection_archive---------1-----------------------#2020-11-25">https://medium.com/geekculture/android-searchview-implementation-1998f633681e?source=collection_archive---------1-----------------------#2020-11-25</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/8b6d771cf35410d19532eac8f37e585a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*4ifB96yt8nYgN-HS"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Photo by <a class="ae iu" href="https://unsplash.com/@laughayette?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Marten Newhall</a> on <a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="4652" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> Search View </strong> widget为用户提供了一个搜索界面，让用户搜索一个查询，并向搜索提供者提交请求，获得一个查询建议或结果的列表。</p><p id="ec30" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在本文中，我将介绍SearchView小部件的实现。</p><p id="2896" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们从第一个实现开始</p><p id="4993" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">按如下方式创建菜单文件:</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="6255" class="kc kd hi jy b fi ke kf l kg kh">&lt;?xml version="1.0" encoding="utf-8"?&gt;<br/>&lt;menu xmlns:android="http://schemas.android.com/apk/res/android"<br/>    xmlns:app="http://schemas.android.com/apk/res-auto"&gt;<br/><br/>    &lt;item<br/>        android:id="@+id/menu_search"<br/>        android:icon="@drawable/ic_search"<br/>        android:title="@string/search_menu"<br/>        app:actionViewClass="androidx.appcompat.widget.SearchView"<br/>        app:showAsAction="ifRoom" /&gt;<br/><br/>&lt;/menu&gt;</span></pre><p id="0d40" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这里要注意的主要事情是</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="3e47" class="kc kd hi jy b fi ke kf l kg kh">app:actionViewClass="androidx.appcompat.widget.SearchView"</span></pre><p id="961a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">actionViewClass定义了实现动作的小部件的类，在我们的例子中，它是SearchView。</p><p id="6942" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们的活动或片段应该实现</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="5bfe" class="kc kd hi jy b fi ke kf l kg kh">SearchView.OnQueryTextListener</span></pre><p id="2c12" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">确保您实施了</p><p id="2b4c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="ki">Android x . app compat . widget . search view</em>而不是<br/>T5】Android . widget . search view</p><p id="7ef2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">该接口将要求我们覆盖以下方法:</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="81c1" class="kc kd hi jy b fi ke kf l kg kh">override fun onQueryTextSubmit(query: String?): Boolean {<br/>    <em class="ki">TODO</em>("Not yet implemented")<br/>}<br/><br/>override fun onQueryTextChange(query: String?): Boolean {<br/>    <em class="ki">TODO</em>("Not yet implemented")<br/>}</span></pre><p id="4016" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="ki"> onQueryTextSubmit(查询:字符串？):</em>将在我们输入文本并在搜索视图中按回车键时被触发。</p><p id="3de1" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="ki"> onQueryTextChange(查询:字符串？):</em>将在我们开始在搜索视图中输入内容时被触发。</p><p id="6aa6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您可以根据自己的需求选择合适的方法。</p><p id="0804" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然后在我们的活动或片段中覆盖onCreateOptionsMenu方法并添加以下逻辑。</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="a586" class="kc kd hi jy b fi ke kf l kg kh">override fun onCreateOptionsMenu(menu: Menu?): Boolean {<br/>    <em class="ki">menuInflater</em>.inflate(R.menu.<em class="ki">main_activity_menu</em>, menu)<br/>    val search = menu?.findItem(R.id.<em class="ki">menu_search</em>)<br/>    val searchView = search?.<em class="ki">actionView </em>as SearchView<br/>    searchView?.<em class="ki">apply {</em><strong class="jy hj"><br/>      </strong><em class="ki">isSubmitButtonEnabled </em>= true<br/>      setOnQueryTextListener(this@AcitvityOrFragmentReference)<br/>    }<br/>}</span></pre><p id="2256" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="ki"> val搜索=菜单？。findItem(r . id . menu _ search):</em>搜索菜单项</p><p id="759f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="ki"> val searchView = search？。actionView as SearchView : </em>将搜索菜单项转换为SearchView类型的actionView</p><p id="95db" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="ki"> searchView？。apply {<br/>isSubmitButtonEnabled = true<br/>setOnQueryTextListener(this @ list fragment)<br/>}</em></p><p id="7e5e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在上面两行中，SearchView小部件用于为非空搜索查询启用提交按钮并设置侦听器。</p><p id="fd70" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您已经成功地实现了SearchView。</p></div></div>    
</body>
</html>