<html>
<head>
<title>Using Python to Derive Insights from 911 Calls Data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python从911呼叫数据中获取洞察力</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/using-python-to-derive-insights-from-911-calls-data-1c4313746f63?source=collection_archive---------11-----------------------#2021-03-12">https://medium.com/geekculture/using-python-to-derive-insights-from-911-calls-data-1c4313746f63?source=collection_archive---------11-----------------------#2021-03-12</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="622c" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">对美国蒙哥马利郡911电话记录的探索性分析。这是一次使用Python分析数据并获得有意义的见解的尝试</h2></div><p id="0f74" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">任何应急响应系统都应该为处理突发或意外情况做好准备，例如火灾、犯罪、车祸、需要警方、消防部门或救护车立即援助的医疗紧急情况。它防止伤亡，减少对建筑物和设备的损害，保护环境和社区，并加速恢复正常运作。</p><p id="bdc6" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">911是北美的热线号码，只用于紧急情况。无论何时拨打911，都会收集基本信息，例如紧急情况的位置/街道名称、电话号码、紧急情况的性质以及关于紧急情况的细节，例如对可能犯罪的人的身体描述、对可能正在燃烧的任何火灾的描述，或者对具有医疗紧急情况的人所经历的伤害或症状的描述。</p><p id="ebad" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们将从Kaggle收集911电话数据。我们试图分析蒙哥马利市的一些电话。蒙哥马利县成立于1776年9月6日，并以少将·理查德·蒙哥马利的名字命名。根据美国人口普查局的数据，它是美国人口最多的县之一，截至2019年，该县的人口估计为1，050，688人。收集的数据有9列，即纬度、经度、描述、邮政编码、标题/原因、时间戳、城镇、地址和99492个条目。从这个数据集中，我们将尝试分析原因和其他动态，如通话的频率和时间范围。</p></div><div class="ab cl ju jv gp jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hb hc hd he hf"><p id="2554" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们将首先导入必要的库，如Pandas，用于数据集的基本数据操作，以及Matplotlib和Seaborn，用于数据可视化。</p><pre class="kb kc kd ke fd kf kg kh ki aw kj bi"><span id="d3c0" class="kk kl hi kg b fi km kn l ko kp">#import necessary libraries</span><span id="01bd" class="kk kl hi kg b fi kq kn l ko kp">import pandas as pd<br/>import matplotlib.pyplot as plt<br/>import seaborn as sns<br/>sns.set(style="darkgrid")<br/>%matplotlib inline</span></pre><p id="9a02" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">下一步是上传我们的数据集。你可以从<a class="ae jt" href="https://www.kaggle.com/mchirico/montcoalert" rel="noopener ugc nofollow" target="_blank">这里</a>下载数据集，并上传到Python，如下所示。</p><pre class="kb kc kd ke fd kf kg kh ki aw kj bi"><span id="a522" class="kk kl hi kg b fi km kn l ko kp">#importing data from csv file<br/>calls=pd.read_csv("GIVE THE PATH NAME WHERE YOU HAVE SAVED YOUR FILE")</span></pre><h1 id="fc76" class="kr kl hi bd ks kt ku kv kw kx ky kz la io lb ip lc ir ld is le iu lf iv lg lh bi translated">数据集的简要介绍</h1><p id="996f" class="pw-post-body-paragraph ix iy hi iz b ja li ij jc jd lj im jf jg lk ji jj jk ll jm jn jo lm jq jr js hb bi translated">导入后，我们将尝试通过使用检查数据集中可用的数据类型来了解我们手头的数据。info()函数。</p><pre class="kb kc kd ke fd kf kg kh ki aw kj bi"><span id="f770" class="kk kl hi kg b fi km kn l ko kp">#checking data types<br/>calls.info()</span></pre><figure class="kb kc kd ke fd lo er es paragraph-image"><div class="er es ln"><img src="../Images/22e2b8de222756fa1541972027875b77.png" data-original-src="https://miro.medium.com/v2/resize:fit:594/format:webp/1*LV67UE5PN7LBjbQGMyqxgg.png"/></div></figure><p id="530e" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">从上图中我们可以看到有99492行9列，其中有3个浮点型，5个对象型和1个整型数据。经度、纬度、城镇、邮政编码和地址等栏目告诉我们事件/情况的位置，而描述和标题等栏目告诉我们情况的性质。我们可以观察到在上面的数据集中有一些丢失的值，这可以通过使用。isnull()函数。</p><pre class="kb kc kd ke fd kf kg kh ki aw kj bi"><span id="e901" class="kk kl hi kg b fi km kn l ko kp">#checking for null values<br/>calls.isnull().sum()</span></pre><figure class="kb kc kd ke fd lo er es paragraph-image"><div class="er es lr"><img src="../Images/8a88052a6a16280a51d2048d77abfb94.png" data-original-src="https://miro.medium.com/v2/resize:fit:304/format:webp/1*hSxbAZuyr5dNsGpLS2z6tA.png"/></div></figure><p id="5309" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在上面的块中，我们可以看到邮政编码的主要部分以及城镇名称和地址都是空值。空值意味着某些数据值在数据集中不存在或未定义，因此我们无法了解数据集的全貌，这可能会在将来造成问题。为了避免这种情况，我们将使用向前填充来填充空值。ffill())函数。前向填充功能用于填充数据帧中缺失的值，该值将乘以前向的最后一个有效观察值。</p><pre class="kb kc kd ke fd kf kg kh ki aw kj bi"><span id="c83f" class="kk kl hi kg b fi km kn l ko kp">#filling up the null values<br/>columns=["zip","twp","addr"]<br/>calls.loc[:, columns]=calls.loc[:, columns].ffill()</span><span id="6261" class="kk kl hi kg b fi kq kn l ko kp">calls.info()</span></pre><figure class="kb kc kd ke fd lo er es paragraph-image"><div class="er es ls"><img src="../Images/d9028799da2f402bbdcbb81995cdb17a.png" data-original-src="https://miro.medium.com/v2/resize:fit:582/format:webp/1*UmUaWFFLtpqtvI9gwYuK3g.png"/></div></figure><p id="bced" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们可以根据需要进一步修改任何列，例如title和timeStamsp列。标题列有所有拨打911电话的原因。我们将把所有来电分为三大类——紧急医疗服务、火灾和交通。</p><pre class="kb kc kd ke fd kf kg kh ki aw kj bi"><span id="fcc8" class="kk kl hi kg b fi km kn l ko kp">#grouping all tiltles under 3 main reasons EMS, Fire, Traffic<br/>calls['Reason'] = calls['title'].apply(lambda title: title.split(':')[0])<br/>calls.head()</span></pre><figure class="kb kc kd ke fd lo er es paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="er es lt"><img src="../Images/1ba4edaf5cc807fdb5f9353bf7359c6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5PFBy_kAHH6qF_6pXzE72g.png"/></div></div></figure><p id="e224" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">确保时间戳列是datetime格式，我们使用pd.to_datetime()函数转换它，然后将时间戳列分成月、小时、星期几、日期和年列。</p><pre class="kb kc kd ke fd kf kg kh ki aw kj bi"><span id="e958" class="kk kl hi kg b fi km kn l ko kp">#checking type of timeStamp column<br/>type(calls['timeStamp'])</span><span id="cf6c" class="kk kl hi kg b fi kq kn l ko kp">Out[]:pandas.core.series.Series</span><span id="cf94" class="kk kl hi kg b fi kq kn l ko kp">#converting series to datetiem format<br/>calls["timeStamp"]=pd.to_datetime(calls["timeStamp"])<br/>time=calls["timeStamp"].iloc[0]</span><span id="0a28" class="kk kl hi kg b fi kq kn l ko kp">#Dividing timeStamp column into hours, month, week, year and date<br/>calls["Hours"]=calls["timeStamp"].apply(lambda time : time.hour)<br/>calls["Month"]=calls["timeStamp"].apply(lambda time : time.month)<br/>calls["Day of Week"]=calls["timeStamp"].apply(lambda time : time.dayofweek)<br/>calls['Date']=calls['timeStamp'].apply(lambda time: time.date())<br/>calls["Year"]=calls['timeStamp'].apply(lambda time: time.year)<br/>calls.head()</span></pre><figure class="kb kc kd ke fd lo er es paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="er es ly"><img src="../Images/27c55022f64c78e57fd7350aeb520955.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tnXSeiPN7lDaCl7smLtKMA.png"/></div></div></figure><p id="d0b3" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">接下来，我们将删除纬度、经度、描述、e和<strong class="iz hj">时间戳</strong>列，因为我们的分析不需要它。</p><pre class="kb kc kd ke fd kf kg kh ki aw kj bi"><span id="aca3" class="kk kl hi kg b fi km kn l ko kp">#droping columns that are not required<br/>calls.drop(["lat","lng","e","desc","timeStamp"],axis=1,inplace=True)</span></pre><p id="c844" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">下一步，假设2015年在数据集中只有3个月的条目，我们将丢弃2015年的所有条目，只分析2016年的呼叫。</p><pre class="kb kc kd ke fd kf kg kh ki aw kj bi"><span id="100c" class="kk kl hi kg b fi km kn l ko kp">#droping all the rows from year 2015<br/>calls.drop(calls.loc[calls['Year']==2015].index, inplace=True)</span></pre><h1 id="2b62" class="kr kl hi bd ks kt ku kv kw kx ky kz la io lb ip lc ir ld is le iu lf iv lg lh bi translated">数据集分析</h1><p id="386a" class="pw-post-body-paragraph ix iy hi iz b ja li ij jc jd lj im jf jg lk ji jj jk ll jm jn jo lm jq jr js hb bi translated">在清理并删除所有不必要的数据后，现在我们将分析数据集，首先确定拨打911次数最多的10大原因。</p><h2 id="7c00" class="kk kl hi bd ks lz ma mb kw mc md me la jg mf mg lc jk mh mi le jo mj mk lg ml bi translated">拨打911的十大原因</h2><pre class="kb kc kd ke fd kf kg kh ki aw kj bi"><span id="697e" class="kk kl hi kg b fi km kn l ko kp">#top 10 causes<br/>calls["title"].value_counts()[:10]</span></pre><figure class="kb kc kd ke fd lo er es paragraph-image"><div class="er es mm"><img src="../Images/bb0aa4f29179aaf5fbbab81f5d505a9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:586/format:webp/1*mpQPOXVDn2RUUR_2Zgc-8Q.png"/></div></figure><h2 id="c894" class="kk kl hi bd ks lz ma mb kw mc md me la jg mf mg lc jk mh mi le jo mj mk lg ml bi translated">十大城镇</h2><pre class="kb kc kd ke fd kf kg kh ki aw kj bi"><span id="b5a3" class="kk kl hi kg b fi km kn l ko kp">#Top 10 townships<br/>calls["twp"].value_counts()[:10]</span></pre><figure class="kb kc kd ke fd lo er es paragraph-image"><div class="er es mn"><img src="../Images/c60dd081cbe06198fc40735f39e2d571.png" data-original-src="https://miro.medium.com/v2/resize:fit:398/format:webp/1*BXWFT44PNtyCWj8TAkhbxQ.png"/></div></figure><h2 id="7c0d" class="kk kl hi bd ks lz ma mb kw mc md me la jg mf mg lc jk mh mi le jo mj mk lg ml bi translated">前3名城镇的前5名紧急情况</h2><pre class="kb kc kd ke fd kf kg kh ki aw kj bi"><span id="bcfd" class="kk kl hi kg b fi km kn l ko kp">town1=calls[calls["twp"]=="LOWER MERION"]["title"].value_counts().head()<br/>town1</span></pre><figure class="kb kc kd ke fd lo er es paragraph-image"><div class="er es mo"><img src="../Images/e123e4e2a9f5189d79c13f087249c98f.png" data-original-src="https://miro.medium.com/v2/resize:fit:540/format:webp/1*8z9BSf8ET0R4HUR9XUnewQ.png"/></div></figure><pre class="kb kc kd ke fd kf kg kh ki aw kj bi"><span id="b94a" class="kk kl hi kg b fi km kn l ko kp">town2=calls[calls["twp"]=="ABINGTON"]["title"].value_counts().head()<br/>town2</span></pre><figure class="kb kc kd ke fd lo er es paragraph-image"><div class="er es mp"><img src="../Images/e504e592a1b049e7e838b19513d7d068.png" data-original-src="https://miro.medium.com/v2/resize:fit:566/format:webp/1*8zTZUNl_86BEMKvHTrBH2w.png"/></div></figure><pre class="kb kc kd ke fd kf kg kh ki aw kj bi"><span id="d8b9" class="kk kl hi kg b fi km kn l ko kp">town3=calls[calls["twp"]=="NORRISTOWN"]["title"].value_counts().head()<br/>town3</span></pre><figure class="kb kc kd ke fd lo er es paragraph-image"><div class="er es mq"><img src="../Images/bba5a520be5724d8bd82ccce0ec560f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:538/format:webp/1*h9CLCuXl_r5WCcLCjY_GoA.png"/></div></figure><p id="b75b" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">从以上几个街区，我们可以推断，拨打911最常见的原因是车祸，拨打次数最多的城镇是下梅里恩、阿宾顿和诺里斯敦。由此我们可以得出结论，这些城镇存在许多与交通相关的问题。</p><p id="67ca" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在我们要用图形来表示拨打911的主要原因。我们可以看到，大多数人拨打911是因为EMS原因，其次是交通和火灾引起的问题。</p><pre class="kb kc kd ke fd kf kg kh ki aw kj bi"><span id="55fa" class="kk kl hi kg b fi km kn l ko kp">#top most reason to call 911<br/>sns.countplot(x='Reason',data=calls,palette='viridis')<br/>plt.style.use('dark_background')</span></pre><figure class="kb kc kd ke fd lo er es paragraph-image"><div class="er es mr"><img src="../Images/55b6d80e1cff2bde9106ff2b168f4f98.png" data-original-src="https://miro.medium.com/v2/resize:fit:810/format:webp/1*ffBDi_PaIkLDExzjZ0MEuw.png"/></div></figure><p id="35d8" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在我们的数据集中，星期几和月份是数字格式的，我们将把它们转换成字符串星期名和月份名。首先，我们将为周和月制作两个字典，然后我们将使用。map()函数。</p><pre class="kb kc kd ke fd kf kg kh ki aw kj bi"><span id="1d71" class="kk kl hi kg b fi km kn l ko kp">#converting integer value into its actual string names to the day of the week and month using .map() function<br/>weekmap={0:"Mon", 1:"Tue", 2:"Wed", 3:"Thur", 4:"Fri", 5:"Sat", 6:"Sun"}<br/>calls["Day of Week"]=calls["Day of Week"].map(weekmap)<br/>monthmap={1:"Jan", 2:"Feb", 3:"Mar", 4:"Apr", 5:"May", 6:"Jun", 7:"Jul", 8:"Aug", 9:"Sep",10:"Oct", 11:"Nov", 12:"Dec"}<br/>calls["Month"]=calls["Month"].map(monthmap)<br/>calls.head()</span></pre><figure class="kb kc kd ke fd lo er es paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="er es ms"><img src="../Images/207ca924ce06027bc78479003856f688.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZvKDDp6mH6-BSFHX7e58QQ.png"/></div></div></figure><p id="7cd7" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">接下来，我们将看到每月、每周和每小时的呼叫频率</p><pre class="kb kc kd ke fd kf kg kh ki aw kj bi"><span id="7fe7" class="kk kl hi kg b fi km kn l ko kp">#Frequency of calls per month<br/>months = ['Jan', 'Feb', 'Mar', 'Apr','May','Jun', 'Jul', 'Aug','Sep', 'Oct', 'Nov', 'Dec']<br/>calls["Month"].value_counts().reindex(months).plot(kind="bar")<br/>plt.style.use('dark_background')<br/>plt.xlabel('Month') <br/>plt.ylabel('Frequency') <br/>plt.title('Frequency of calls per month')</span><span id="ad43" class="kk kl hi kg b fi kq kn l ko kp">#Frequency of calls per week<br/>weeks = ["Mon","Tue","Wed","Thur","Fri","Sat","Sun"]<br/>calls["Day of Week"].value_counts().reindex(weeks).plot(kind="bar")<br/>plt.xlabel('Day of the Week') <br/>plt.ylabel('Frequency') <br/>plt.title('Frequency of calls per week') <br/>plt.style.use('dark_background')</span><span id="9392" class="kk kl hi kg b fi kq kn l ko kp">#hourly distribution of calls<br/>plt.style.use('dark_background')<br/>calls['Hours'].hist(bins=30)<br/>plt.xlabel('Hours') <br/>plt.ylabel('Frequency') <br/>plt.title('Frequency of calls per hour')</span></pre><figure class="kb kc kd ke fd lo er es paragraph-image"><div class="er es mt"><img src="../Images/22d991304adf244200f98bbed7a2cb31.png" data-original-src="https://miro.medium.com/v2/resize:fit:806/format:webp/1*6ZbWGDQR-pYaFAL2JqYt9A.png"/></div></figure><figure class="kb kc kd ke fd lo er es paragraph-image"><div class="er es mr"><img src="../Images/0c19bbcae348b294ca50b143d100bc06.png" data-original-src="https://miro.medium.com/v2/resize:fit:810/format:webp/1*W-JMvWPrw2MAHOXm6_TAKg.png"/></div></figure><figure class="kb kc kd ke fd lo er es paragraph-image"><div class="er es mu"><img src="../Images/c87a492822aa11a02349e0944e9ea36d.png" data-original-src="https://miro.medium.com/v2/resize:fit:798/format:webp/1*-SCuxohRaEajirCUKeRScA.png"/></div></figure><p id="1457" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">从上面的两个图表中，我们可以观察到，在工作日而不是周末的15:00到17:00之间，拨打了最多的电话。在所有月份中，1月和7月的电话数量有所增加，而7月之后电话数量大幅下降。</p><p id="41d5" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">每周、每月和每小时每天的EMS、火灾和交通计数</p><pre class="kb kc kd ke fd kf kg kh ki aw kj bi"><span id="073b" class="kk kl hi kg b fi km kn l ko kp">#Count of EMS, Fire and Traffic week wise<br/>fig_dims = (12, 5)<br/>fig = plt.subplots(figsize=fig_dims)<br/>sns.countplot(x='Day of Week',data=calls,hue='Reason',palette='Dark2')<br/>plt.legend(bbox_to_anchor=(1, 1), loc=2, borderaxespad=0.5)<br/>plt.style.use('dark_background')<br/>plt.title('Count of each reason per week')</span><span id="55b7" class="kk kl hi kg b fi kq kn l ko kp">#count of EMS, Fire and Traffic month wise<br/>fig_dims = (12, 5)<br/>fig = plt.subplots(figsize=fig_dims)<br/>sns.countplot(x='Month',data=calls,hue='Reason',palette='Dark2')<br/>plt.legend(bbox_to_anchor=(1, 1), loc=2, borderaxespad=0.5)<br/>plt.style.use('dark_background')<br/>plt.title('Count of each reason per month')</span><span id="2908" class="kk kl hi kg b fi kq kn l ko kp">#count of EMS, Fire and Traffic hour wise<br/>fig_dims = (14, 5)<br/>fig = plt.subplots(figsize=fig_dims)<br/>sns.countplot(x='Hours',data=calls,hue='Reason',palette='Dark2')<br/>plt.legend(bbox_to_anchor=(1, 1), loc=2, borderaxespad=0.5)<br/>plt.style.use('dark_background')<br/>plt.title('Count of each reason per hour')</span></pre><figure class="kb kc kd ke fd lo er es paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="er es mv"><img src="../Images/940f4530124e44c2306c02839257e5db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NCXtrj62UBwh3gxnkTrmiw.png"/></div></div></figure><p id="1ead" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">火警电话的频率在一周内保持不变，因为周一和周三对EMS和交通的呼叫更多。</p><figure class="kb kc kd ke fd lo er es paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="er es mw"><img src="../Images/02e3b1f451703e2df78e8af927f89dba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rXXaEGUCFyhgs2GVx-VOjQ.png"/></div></div></figure><p id="e1cb" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">7月份打了最多的消防和急救电话，1月份打了最多的交通电话。</p><figure class="kb kc kd ke fd lo er es paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="er es mx"><img src="../Images/c9dc02a09e2437408bf963c9c9137a10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PdLOvFSiCxvcf_AJ9Ltr8w.png"/></div></div></figure><p id="61c7" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们看到中午12点有大量紧急呼叫，而火灾和交通事故的频率在晚上5点到6点之间最高。</p><p id="20c7" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，我们将尝试找出呼叫频率在月份、星期几和小时之间是否有任何关系。</p><blockquote class="my mz na"><p id="a7c6" class="ix iy nb iz b ja jb ij jc jd je im jf nc jh ji jj nd jl jm jn ne jp jq jr js hb bi translated"><strong class="iz hj">月v/s小时</strong></p></blockquote><pre class="kb kc kd ke fd kf kg kh ki aw kj bi"><span id="ea3e" class="kk kl hi kg b fi km kn l ko kp">#grouping number of calls month/hour<br/>monthhour=calls.groupby(["Month","Hours"]).count()["Reason"].unstack().reindex(months)<br/>plt.figure(figsize=(15,6))<br/>sns.heatmap(monthhour,cmap='viridis',linewidths=1)<br/>plt.style.use('dark_background')</span></pre><figure class="kb kc kd ke fd lo er es paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="er es nf"><img src="../Images/d6d5ac7d78e294525d9f21cff41cb9c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YK-xReC8PTPRA9CtyW-snA.png"/></div></div></figure><p id="edef" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">从上面的热图中，我们可以推断，从1月到7月，中午12点到17点之间的通话次数最多。</p><blockquote class="my mz na"><p id="6a6a" class="ix iy nb iz b ja jb ij jc jd je im jf nc jh ji jj nd jl jm jn ne jp jq jr js hb bi translated"><strong class="iz hj">星期v/s小时</strong></p></blockquote><pre class="kb kc kd ke fd kf kg kh ki aw kj bi"><span id="236c" class="kk kl hi kg b fi km kn l ko kp">weekhour=calls.groupby(["Day of Week","Hours"]).count()["Reason"].unstack().reindex(weeks)<br/>plt.figure(figsize=(15,6))<br/>sns.heatmap(weekhour,cmap='viridis',linewidths=1)<br/>plt.style.use('dark_background')</span></pre><figure class="kb kc kd ke fd lo er es paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="er es nf"><img src="../Images/75d3a957b0c8d1d51bf65e6f9aee6e0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*52mMyynTM0XAvV_2gplRTg.png"/></div></div></figure><p id="45db" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">从上面的热图中，我们可以分析出工作日在中午12点到17:00点之间接到的电话数量比周末多。</p><blockquote class="my mz na"><p id="6224" class="ix iy nb iz b ja jb ij jc jd je im jf nc jh ji jj nd jl jm jn ne jp jq jr js hb bi translated"><strong class="iz hj">周v/s月</strong></p></blockquote><pre class="kb kc kd ke fd kf kg kh ki aw kj bi"><span id="434f" class="kk kl hi kg b fi km kn l ko kp">#grouping count of calls week/month<br/>wm1=calls.groupby(["Day of Week","Month"]).count()["Reason"].unstack().reindex(weeks)<br/>wm2=wm.transpose().reindex(months)<br/>weekmonth=wm2.transpose()<br/>plt.figure(figsize=(15,6))<br/>sns.heatmap(weekmonth,cmap='viridis',linewidths=1)<br/>plt.style.use('dark_background')</span></pre><figure class="kb kc kd ke fd lo er es paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="er es ng"><img src="../Images/66cde7905bfb689e5b5c6ce1a31e58e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4olzzzttwu06UsM5Q_U8xQ.png"/></div></div></figure><p id="78d6" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">从上面的热图中，我们可以观察到星期五在一月和七月收到了最多的电话。</p><p id="4da1" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，我们将探究每月每个EMS因火灾和交通原因拨打的电话总数。</p><pre class="kb kc kd ke fd kf kg kh ki aw kj bi"><span id="cb13" class="kk kl hi kg b fi km kn l ko kp">#count of each EMS calls month wise<br/>EMS=calls[calls.Reason.isin(["EMS"])]<br/>pvt3=pd.pivot_table(EMS,index="title",columns="Month",values="Date",aggfunc=len,fill_value=0)<br/>pvt3["Total"]=round(pvt3.sum(numeric_only=True, axis=1),2)<br/>df3=pvt3.sort_values(by="Total", ascending=False).head(5)<br/>eg=df3.drop("Total",axis=1).transpose().reindex(months)<br/>eg.plot.line()<br/>plt.gcf().set_size_inches(15,7)<br/>plt.title('Frequency of Top 5 EMS Situations Monthly')</span><span id="6db6" class="kk kl hi kg b fi kq kn l ko kp">#count of each Fire calls month wise<br/>Fire=calls[calls.Reason.isin(["Fire"])]<br/>pvt4=pd.pivot_table(Fire,index="title",columns="Month",values="Date",aggfunc=len,fill_value=0)<br/>pvt4["Total"]=round(pvt4.sum(numeric_only=True, axis=1),2)<br/>df4=pvt4.sort_values(by="Total", ascending=False).head(5)<br/>fg=df4.drop("Total",axis=1).transpose().reindex(months)<br/>fg.plot.line()<br/>plt.gcf().set_size_inches(15,7)<br/>plt.title('Frequency of Top 5 Fire Situations Monthly')</span><span id="5b79" class="kk kl hi kg b fi kq kn l ko kp">#count of each Traffic calls month wise<br/>Traffic=calls[calls.Reason.isin(["Traffic"])]<br/>pvt5=pd.pivot_table(Traffic,index="title",columns="Month",values="Date",aggfunc=len,fill_value=0)<br/>pvt5["Total"]=round(pvt5.sum(numeric_only=True, axis=1),2)<br/>df5=pvt5.sort_values(by="Total", ascending=False).head(5)<br/>tg=df5.drop("Total",axis=1).transpose().reindex(months)<br/>tg.plot.line()<br/>plt.gcf().set_size_inches(15,7)<br/>plt.title('Frequency of Top 5 Traffic Situations Monthly')</span></pre><blockquote class="my mz na"><p id="eb04" class="ix iy nb iz b ja jb ij jc jd je im jf nc jh ji jj nd jl jm jn ne jp jq jr js hb bi translated">每月5大EMS情况的发生频率</p></blockquote><figure class="kb kc kd ke fd lo er es paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="er es nh"><img src="../Images/a15348bb9fee6100d9a6adbe9f64cf9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h-gNIsgsoHM5oGbb4sXHfg.png"/></div></div></figure><blockquote class="my mz na"><p id="ed81" class="ix iy nb iz b ja jb ij jc jd je im jf nc jh ji jj nd jl jm jn ne jp jq jr js hb bi translated">每月5大火灾发生频率</p></blockquote><figure class="kb kc kd ke fd lo er es paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="er es ni"><img src="../Images/308eba427f91824739c48875e981c2d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ghYoVNkr6VFEe361VHGkyQ.png"/></div></div></figure><blockquote class="my mz na"><p id="92d1" class="ix iy nb iz b ja jb ij jc jd je im jf nc jh ji jj nd jl jm jn ne jp jq jr js hb bi translated">每月5大交通状况的发生频率</p></blockquote><figure class="kb kc kd ke fd lo er es paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="er es nh"><img src="../Images/b87295c7c0cd922d2e7ff7d148494326.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EF95_R8M0IdXaoSfXu3hRg.png"/></div></div></figure><h1 id="7e86" class="kr kl hi bd ks kt ku kv kw kx ky kz la io lb ip lc ir ld is le iu lf iv lg lh bi translated">结论</h1><ul class=""><li id="5fdb" class="nj nk hi iz b ja li jd lj jg nl jk nm jo nn js no np nq nr bi translated">在我们分析的时间段内，蒙哥马利的居民因紧急原因(EMS)拨打了大多数911电话。</li><li id="d421" class="nj nk hi iz b ja ns jd nt jg nu jk nv jo nw js no np nq nr bi translated">来电次数最多的前三个城镇是下梅里恩、阿宾顿和诺里斯敦</li><li id="ee2f" class="nj nk hi iz b ja ns jd nt jg nu jk nv jo nw js no np nq nr bi translated">在工作日的15:00至17:00之间，拨打电话的总次数最多。从月份来看，通话频率在1月和7月有所上升。</li><li id="502c" class="nj nk hi iz b ja ns jd nt jg nu jk nv jo nw js no np nq nr bi translated">火警电话的频率在一周内保持不变</li><li id="1c1b" class="nj nk hi iz b ja ns jd nt jg nu jk nv jo nw js no np nq nr bi translated">7月份打了最多的消防和急救电话，1月份打了最多的交通电话</li><li id="1748" class="nj nk hi iz b ja ns jd nt jg nu jk nv jo nw js no np nq nr bi translated">周一紧急呼叫的频率最高</li><li id="3072" class="nj nk hi iz b ja ns jd nt jg nu jk nv jo nw js no np nq nr bi translated">大多数交通电话都是在周三打的</li><li id="c66b" class="nj nk hi iz b ja ns jd nt jg nu jk nv jo nw js no np nq nr bi translated">排在前五位的紧急医疗服务情况是呼吸紧急情况、心脏紧急情况、跌倒、交通事故和受试者疼痛</li><li id="07e7" class="nj nk hi iz b ja ns jd nt jg nu jk nv jo nw js no np nq nr bi translated">前5名火灾情况是报警、车辆事故、火灾调查、气体气味/泄漏和建筑火灾</li><li id="caf1" class="nj nk hi iz b ja ns jd nt jg nu jk nv jo nw js no np nq nr bi translated">前5种交通状况是车辆事故、车辆故障、道路阻塞、危险路况和车辆火灾。</li></ul><p id="8aa6" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">有关代码的更多参考，请点击<a class="ae jt" href="https://github.com/yashnab/911-calls" rel="noopener ugc nofollow" target="_blank">此处</a></p></div></div>    
</body>
</html>