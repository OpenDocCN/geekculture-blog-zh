<html>
<head>
<title>Reusing Angular Form Groups using Inheritance</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用继承重用角度形状组</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/reusing-angular-form-groups-using-inheritance-71e1d555c47e?source=collection_archive---------5-----------------------#2021-10-07">https://medium.com/geekculture/reusing-angular-form-groups-using-inheritance-71e1d555c47e?source=collection_archive---------5-----------------------#2021-10-07</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/b84034eae2f20653764d229a111f822f.png" data-original-src="https://miro.medium.com/v2/resize:fit:698/format:webp/1*xmuySxtS2WKI1a0kOCFKxg.jpeg"/></div><figcaption class="im in et er es io ip bd b be z dx">Inheritance</figcaption></figure><p id="9c33" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当许多表单控件在多个表单中重复时，重用现有的表单组非常有用。在这种情况下，您可以在多个组件中重用一个表单组。</p><p id="1ee8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我正在考虑2个组成部分:学生和管理员。这两个角色有很多相似的特征，如姓名、年龄、地址、pin码等。他们也有不同的特点，如学生将有一个等级和总量，而管理员将有一个资格和经验。</p><p id="57cf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我在项目的src/app文件夹下创建了一个<strong class="is hj"> commonFormGroup.ts </strong>文件。这是一个非常简单的例子，只有3个常见的表单控件，但是在实际的应用程序中，您会发现有多个常见的表单控件。这个文件可以包含多个类，即不同类型的表单的表单组都在一个地方。</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="1698" class="jx jy hi jt b fi jz ka l kb kc">import { FormControl, FormGroup } from “@angular/forms”;</span><span id="9fb4" class="jx jy hi jt b fi kd ka l kb kc">export class <strong class="jt hj">CommonFormGroup</strong>{</span><span id="6969" class="jx jy hi jt b fi kd ka l kb kc">public <strong class="jt hj">commonPersonForm</strong>=new <strong class="jt hj">FormGroup</strong>({<br/>firstName:new FormControl(“”),<br/>lastName:new FormControl(“”),<br/>age:new FormControl(0)<br/>})<br/>}</span></pre><p id="814e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这个表单组非常简单，没有验证，只有每个表单控件的默认值。这些表单控件及其验证将在子类中定制。</p><p id="053a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在在<strong class="is hj">的学生成分中。</strong>如您所见，StudentComponent类扩展了基类CommonFormGroup。因此，基类中的所有属性和方法对StudentComponent都是可用的。我们需要做的只是添加特定于StudentComponent的附加表单控件。</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="80c1" class="jx jy hi jt b fi jz ka l kb kc">import { Component, OnInit } from ‘@angular/core’;<br/>import { FormControl, Validators } from ‘@angular/forms’;<br/>import { CommonFormGroup } from ‘../commonFormGroup’;</span><span id="c82b" class="jx jy hi jt b fi kd ka l kb kc">@Component({<br/>selector: ‘app-student’,<br/>templateUrl: ‘./student.component.html’,<br/>styleUrls: [‘./student.component.scss’]<br/>})</span><span id="dd03" class="jx jy hi jt b fi kd ka l kb kc"><strong class="jt hj">export class StudentComponent extends CommonFormGroup</strong> {</span><span id="3d6b" class="jx jy hi jt b fi kd ka l kb kc"><strong class="jt hj">constructor() {<br/>super();<br/>}</strong></span><span id="c752" class="jx jy hi jt b fi kd ka l kb kc">public grades=[1,2,3,4,5,6,7,8,9,10,11,12];</span><span id="4ba0" class="jx jy hi jt b fi kd ka l kb kc">ngOnInit() {</span><span id="d0ed" class="jx jy hi jt b fi kd ka l kb kc">this.commonPersonForm.get(‘age’).patchValue(6);</span><span id="c09a" class="jx jy hi jt b fi kd ka l kb kc">this.commonPersonForm.get(‘firstName’).setValidators([Validators.required,Validators.pattern(/^([a-zA-Z]+\s)*[a-zA-Z]+$/)]);</span><span id="5b98" class="jx jy hi jt b fi kd ka l kb kc">this.commonPersonForm.get(‘lastName’).setValidators([Validators.required,Validators.pattern(/^([a-zA-Z]+\s)*[a-zA-Z]+$/)]);</span><span id="561a" class="jx jy hi jt b fi kd ka l kb kc">this.commonPersonForm.get(‘age’).setValidators([Validators.required,Validators.pattern(/^[0–9]+$/),<br/>Validators.max(18),Validators.min(6)]);</span><span id="168a" class="jx jy hi jt b fi kd ka l kb kc"><strong class="jt hj">this.commonPersonForm.addControl(‘grade’,new FormControl(1,[Validators.required]));</strong></span><span id="037c" class="jx jy hi jt b fi kd ka l kb kc"><strong class="jt hj">this.commonPersonForm.addControl(‘aggregate’,new FormControl(0,[Validators.required,Validators.pattern(/^[0–9]*$/),Validators.maxLength(3)]))</strong></span><span id="7c1f" class="jx jy hi jt b fi kd ka l kb kc">}</span><span id="58b8" class="jx jy hi jt b fi kd ka l kb kc">}</span></pre><p id="d07d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们添加了验证，并对几乎所有的表单控件进行了修改。</p><ol class=""><li id="72b1" class="ke kf hi is b it iu ix iy jb kg jf kh jj ki jn kj kk kl km bi translated"><strong class="is hj">年龄</strong>的初始值已被重置为6。</li><li id="7a91" class="ke kf hi is b it kn ix ko jb kp jf kq jj kr jn kj kk kl km bi translated"><strong class="is hj">名字</strong>和<strong class="is hj">姓氏</strong>表单控件具有验证功能，限制用户只能输入带空格的字母。</li><li id="185d" class="ke kf hi is b it kn ix ko jb kp jf kq jj kr jn kj kk kl km bi translated"><strong class="is hj">年龄</strong>表单控件具有只接受数字的验证，学生的最小年龄可以是6岁，最大年龄可以是18岁。</li><li id="a831" class="ke kf hi is b it kn ix ko jb kp jf kq jj kr jn kj kk kl km bi translated">2个附加表格控件:<strong class="is hj">等级和骨料</strong>已添加至表格组。</li></ol><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="87b2" class="jx jy hi jt b fi jz ka l kb kc">&lt;h4&gt;Student Form&lt;/h4&gt;</span><span id="b813" class="jx jy hi jt b fi kd ka l kb kc">&lt;form <strong class="jt hj">[formGroup]=”commonPersonForm”</strong>&gt;<br/>&lt;div class=”row”&gt;<br/>&lt;label class=”col-md-2"&gt;First Name:&lt;/label&gt;<br/>&lt;input <strong class="jt hj">formControlName=”firstName”</strong> class=”col-md-8 form-control” type=”text”&gt;<br/>&lt;/div&gt;</span><span id="a6ba" class="jx jy hi jt b fi kd ka l kb kc">&lt;div class=”row”&gt;<br/>&lt;label class=”col-md-2"&gt;Last Name:&lt;/label&gt;<br/>&lt;input <strong class="jt hj">formControlName=”lastName”</strong> class=”col-md-8 form-control” type=”text”&gt;<br/>&lt;/div&gt;</span><span id="870f" class="jx jy hi jt b fi kd ka l kb kc">&lt;div class=”row”&gt;<br/>&lt;label class=”col-md-2"&gt;Age:&lt;/label&gt;<br/>&lt;input <strong class="jt hj">formControlName=”age”</strong> class=”col-md-8 form-control” type=”text”&gt;<br/>&lt;/div&gt;</span><span id="9a77" class="jx jy hi jt b fi kd ka l kb kc">&lt;div class=”row”&gt;<br/>&lt;label class=”col-md-2"&gt;Grade:&lt;/label&gt;<br/>&lt;select <strong class="jt hj">formControlName=”grade”</strong> class=”col-md-8 form-control” type=”text”&gt;<br/>&lt;option *ngFor=”let grade of grades”&gt;{{grade}}&lt;/option&gt;<br/>&lt;/select&gt;<br/>&lt;/div&gt;</span><span id="b876" class="jx jy hi jt b fi kd ka l kb kc">&lt;div class=”row”&gt;<br/>&lt;label class=”col-md-2"&gt;Aggregate:&lt;/label&gt;<br/>&lt;input <strong class="jt hj">formControlName=”aggregate”</strong> class=”col-md-8 form-control” type=”text”&gt;<br/>&lt;/div&gt;</span><span id="e054" class="jx jy hi jt b fi kd ka l kb kc">&lt;button class=”btn btn-success” [disabled]=”commonPersonForm.invalid”&gt;Submit&lt;/button&gt;</span><span id="8c83" class="jx jy hi jt b fi kd ka l kb kc">&lt;/form&gt;</span></pre><p id="8438" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在<strong class="is hj"> AdminComponent </strong>中，我们也做了类似的修改。</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="1329" class="jx jy hi jt b fi jz ka l kb kc">import { Component, OnInit } from ‘@angular/core’;<br/>import { FormControl, Validators } from ‘@angular/forms’;<br/>import { CommonFormGroup } from ‘../commonFormGroup’;</span><span id="86d9" class="jx jy hi jt b fi kd ka l kb kc">@Component({<br/>selector: ‘app-admin’,<br/>templateUrl: ‘./admin.component.html’,<br/>styleUrls: [‘./admin.component.scss’]<br/>})</span><span id="b161" class="jx jy hi jt b fi kd ka l kb kc"><strong class="jt hj">export class AdminComponent extends CommonFormGroup </strong>{</span><span id="9a79" class="jx jy hi jt b fi kd ka l kb kc"><strong class="jt hj">constructor() {<br/>super();<br/>}</strong></span><span id="cbb0" class="jx jy hi jt b fi kd ka l kb kc">ngOnInit() {</span><span id="1052" class="jx jy hi jt b fi kd ka l kb kc">this.commonPersonForm.get(‘age’).patchValue(18);</span><span id="611c" class="jx jy hi jt b fi kd ka l kb kc">this.commonPersonForm.get(‘firstName’).setValidators([Validators.required,Validators.pattern(/^([a-zA-Z]+\s)*[a-zA-Z]+$/)]);</span><span id="9139" class="jx jy hi jt b fi kd ka l kb kc">this.commonPersonForm.get(‘lastName’).setValidators([Validators.required,Validators.pattern(/^([a-zA-Z]+\s)*[a-zA-Z]+$/)]);</span><span id="33e7" class="jx jy hi jt b fi kd ka l kb kc">this.commonPersonForm.get(‘age’).setValidators([Validators.required,Validators.pattern(/^[0–9]+$/),<br/>Validators.max(60),Validators.min(18)]);</span><span id="9ca1" class="jx jy hi jt b fi kd ka l kb kc"><strong class="jt hj">this.commonPersonForm.addControl(‘qualification’,new FormControl(“”,[Validators.required]));</strong></span><span id="c1c9" class="jx jy hi jt b fi kd ka l kb kc"><strong class="jt hj">this.commonPersonForm.addControl(‘experience’,new FormControl(2,[Validators.required,Validators.pattern(/^[0–9]*$/),Validators.maxLength(2),Validators.min(2)]))<br/></strong>}<br/>}</span></pre><figure class="jo jp jq jr fd ij er es paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="er es ks"><img src="../Images/d220007a10f53acddfad7319dd2e68d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L99H64hIBFrcwWf_4D_rtA.png"/></div></div><figcaption class="im in et er es io ip bd b be z dx">Inheritance</figcaption></figure><p id="b9f0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">每种形式都独立工作，互不依赖。它们的工作方式与没有继承时完全一样。但是继承无疑简化了代码，使得复杂的表单和大量的表单控件易于重用。</p></div></div>    
</body>
</html>