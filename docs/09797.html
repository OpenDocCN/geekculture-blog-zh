<html>
<head>
<title>Backend Developer Job Interview Questions — Redis (Pt. 11–20)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">后端开发人员工作面试问题— Redis (Pt。11–20)</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/backend-developer-job-interview-questions-redis-pt-11-20-80d7fc7ca928?source=collection_archive---------9-----------------------#2021-12-29">https://medium.com/geekculture/backend-developer-job-interview-questions-redis-pt-11-20-80d7fc7ca928?source=collection_archive---------9-----------------------#2021-12-29</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/081ad2b30a0acb48669797810a84a1a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HZr08YLS3zRBxdO3a_QSKw.jpeg"/></div></div></figure><h2 id="5492" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">11.Redis提供了两种持久性机制。它们是什么？</h2><p id="2b72" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki hb bi translated"><strong class="jq hj">1)RDB(Redis Database)<br/></strong>RDB是Redis Database文件的简称。Redis以指定的时间间隔提供其数据集的快照。</p><p id="06af" class="pw-post-body-paragraph jo jp hi jq b jr kj jt ju jv kk jx jy jb kl ka kb jf km kd ke jj kn kg kh ki hb bi translated"><strong class="jq hj">优点:</strong><br/>——RDB是Redis数据的一种紧凑的单文件时间点表示，这使得它非常适合备份。我们可以在一段时间内定期对它们进行存档。这使得我们可以轻松地存储不同版本的数据集<br/>——RDB有利于灾难恢复。<br/> -与AOF相比，RDB允许更快地重启大数据集。<br/> - RDB使用子进程进行数据持久化，这不会影响父进程正在进行的操作。</p><p id="f343" class="pw-post-body-paragraph jo jp hi jq b jr kj jt ju jv kk jx jy jb kl ka kb jf km kd ke jj kn kg kh ki hb bi translated"><strong class="jq hj">缺点:</strong> <br/> - RDB文件在时间点之间保存数据。如果Redis在持久性时间点之间关闭，将会丢失最新数据。因此，RDB更适合对数据精度要求不是很高的场景。</p><p id="c0c8" class="pw-post-body-paragraph jo jp hi jq b jr kj jt ju jv kk jx jy jb kl ka kb jf km kd ke jj kn kg kh ki hb bi translated"><strong class="jq hj"> 2) AOF(仅附加文件)<br/> </strong> AOF文件记录所有写操作，重启时重新加载到服务器。</p><p id="0fe7" class="pw-post-body-paragraph jo jp hi jq b jr kj jt ju jv kk jx jy jb kl ka kb jf km kd ke jj kn kg kh ki hb bi translated"><strong class="jq hj">优点:</strong><br/>——我们可以有不同的fsync策略:完全没有fsync，每秒fsync，或者每次查询都有fsync。它确保了数据的准确性，因为对数据集的每次写入操作都会被记录下来。<br/> -停电时不会出现寻道和腐败问题。即使日志由于某种原因以一个写了一半的命令结束，我们也可以使用redis-check-aof工具来修复它。<br/> - Redis可以在AOF变大的时候自动在后台重写。在重写的时候，Redis会把新的尽可能的精简。新生成的操作仍然追加到旧文件中，一旦第二个文件准备好了，Redis就会切换这两个文件并开始追加到新文件中。</p><p id="939e" class="pw-post-body-paragraph jo jp hi jq b jr kj jt ju jv kk jx jy jb kl ka kb jf km kd ke jj kn kg kh ki hb bi translated"><strong class="jq hj">缺点:</strong><br/>——AOF的文件大小比RDB相同数据集的文件大小要大。<br/> -数据集越大，AOF的启动时间越长。</p><p id="c53f" class="pw-post-body-paragraph jo jp hi jq b jr kj jt ju jv kk jx jy jb kl ka kb jf km kd ke jj kn kg kh ki hb bi translated">官方不建议仅使用AOF，我们应该使用RDB文件或两者的组合来确保数据安全/</p><h2 id="ead0" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">12.描述Redis适合使用的一些场景。</h2><p id="82b6" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki hb bi translated"><strong class="jq hj"> 1)发布&amp;订阅</strong> <br/>使用Redis的发布&amp;订阅，我们可以在社交网络中使用它，建立一个聊天系统。<br/> <strong class="jq hj"> 2)会话缓存</strong> <br/> Redis提供持久性，以便可以检索会话数据，例如，在丢失用户购物车信息的情况下。<br/> <strong class="jq hj"> 3)整页缓存</strong> <br/>由于磁盘的持久性，加载一整页的速度会明显降低。<br/> <strong class="jq hj"> 4)队列</strong> <br/> Redis提供了可以用于消息队列的列表和设置操作。有一些开源项目可以用来实现Redis队列。芹菜就是一个例子，它使用Redis作为经纪人。<br/> <strong class="jq hj"> 5)排行榜/计数器</strong> <br/> Redis有递增和递减操作。集合和有序集合也允许更容易的操作。</p><h2 id="7279" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">13.如何在集群中实现会话共享存储？</h2><p id="bf5b" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki hb bi translated">一个群集包含多个服务器实例。实例之间的会话信息可能不一致。例如，当用户登录时，会话信息存储在实例a上。如果浏览其他页面，而实例B开始处理，则先前的登录会话不会广播给B，用户将再次被要求提供登录信息。我们可以用3种方法来解决这个问题:<br/> <strong class="jq hj"> 1)粘性会话</strong> <br/>每次都将同一个用户的所有请求转发到同一个服务器——将用户绑定到服务器。<br/> <strong class="jq hj"> 2)服务器会话复制</strong> <br/>每当一个会话发生变化，就广播到集群中的所有服务器。<br/> <strong class="jq hj"> 3)会话持久化</strong> <br/>在数据库中持久化会话</p><h2 id="5f08" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">14.如何使用Redis作为异步队列？</h2><p id="480e" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki hb bi translated">我们通常使用列表结构作为队列，用<em class="ko"> rpush </em>产生消息，用<em class="ko"> lpop </em>消费消息。当没有消息可供使用时，我们可以使用<em class="ko"> blpop </em>命令，这样客户端连接将被阻塞，直到新消息被推送到列表中。</p><h2 id="737a" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">15.你了解Redis的同步机制吗？</h2><p id="57ad" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki hb bi translated">Redis采用主从同步和主从同步。在第一次同步期间，主节点执行<em class="ko"> bgsave </em>并记录对存储缓冲器的后续修改操作。完成后，RDB文件将同步到复制节点。复制节点接受完成后，RDB映像将加载到内存中。通知主节点将该期间的操作记录同步到复制节点进行回放，同步过程完成。</p><h2 id="f951" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">16.Redis集群是如何复制的？</h2><p id="038f" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki hb bi translated">异步复制。</p><h2 id="7eea" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">17.你对Redis交易有什么理解？</h2><p id="7789" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki hb bi translated">Redis事务是Redis命令的集合。转换是原子性的，也就是说，要么执行一个事务中的所有命令，要么不执行任何命令。</p><h2 id="54ad" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">18.Redis回收流程是如何工作的？</h2><p id="2451" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki hb bi translated">当客户端执行新命令并添加新数据时，Redis会检查新添加的数据是否超过最大内存。如果是，根据预设的回收策略，Redis将回收低于最大内存的内存，并执行新命令。这7个策略是:<br/> 1) <strong class="jq hj"> volatile-lru </strong>:从设置了“过期”字段的所有密钥中驱逐最近最少使用的密钥<br/> 2) <strong class="jq hj"> volatile-ttl </strong>:从设置了“过期”字段的所有密钥中驱逐最短生存时间的密钥。<br/> 3) <strong class="jq hj"> volatile-random </strong>:随机驱逐设置了“expire”字段的密钥<br/> 4) <strong class="jq hj"> volatile-lfu </strong>:驱逐设置了“expire”字段的所有密钥中最少使用的密钥<br/> 5) <strong class="jq hj"> allkeys-lru </strong>:驱逐所有密钥中最近最少使用的密钥<br/> 6) <strong class="jq hj"> allkeys-random </strong>:随机驱逐所有密钥中最少使用的密钥<br/> <strong class="jq hj"> allkeys-lfu </strong>:驱逐所有键中最不常用的键<br/> 8) <strong class="jq hj">不驱逐</strong>:当尝试插入更多数据时，如果达到内存限制，则返回错误</p><h2 id="cc90" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">19.MySQL有2000w数据，Redis只有20w数据。如何保证Redis中的数据都是热点数据？</h2><p id="94b8" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki hb bi translated">当数据集增加到一定规模时，我们将使用消除策略。[参考第18部分的8个策略]</p><h2 id="d94b" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">20.Redis中的流水线是什么？</h2><p id="6f92" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki hb bi translated">多个命令将同时发送到serve0，减少IO之间的时间间隔。这些命令通常是相互独立的。</p></div><div class="ab cl kp kq gp kr" role="separator"><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku"/></div><div class="hb hc hd he hf"><p id="e613" class="pw-post-body-paragraph jo jp hi jq b jr kj jt ju jv kk jx jy jb kl ka kb jf km kd ke jj kn kg kh ki hb bi translated">我希望这篇文章对你有所帮助。如果你像我一样渴望学习一些与技术相关的东西或定期反思工作和生活，请关注我的频道，了解我日常工作和生活中的最新灵感。</p></div><div class="ab cl kp kq gp kr" role="separator"><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku"/></div><div class="hb hc hd he hf"><p id="ae5f" class="pw-post-body-paragraph jo jp hi jq b jr kj jt ju jv kk jx jy jb kl ka kb jf km kd ke jj kn kg kh ki hb bi translated">演职员表:<br/><a class="ae kw" href="https://zhuanlan.zhihu.com/p/276371544" rel="noopener ugc nofollow" target="_blank">https://zhuanlan.zhihu.com/p/276371544</a><br/><a class="ae kw" href="https://www.fullstack.cafe/blog/redis-interview-questions" rel="noopener ugc nofollow" target="_blank">https://www.fullstack.cafe/blog/redis-interview-questions</a><br/><a class="ae kw" href="https://redis.io/topics/persistence" rel="noopener ugc nofollow" target="_blank">https://redis.io/topics/persistence</a><br/><a class="ae kw" href="https://docs.redis.com/latest/rs/administering/database-operations/eviction-policy/" rel="noopener ugc nofollow" target="_blank">https://docs . redis . com/latest/RS/administrating/database-operations/eviction-policy/</a></p></div></div>    
</body>
</html>