<html>
<head>
<title>Building a Basic Crypto Trading Bot in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python构建一个基本的加密交易机器人</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/building-a-basic-crypto-trading-bot-in-python-4f272693c375?source=collection_archive---------0-----------------------#2022-02-09">https://medium.com/geekculture/building-a-basic-crypto-trading-bot-in-python-4f272693c375?source=collection_archive---------0-----------------------#2022-02-09</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="6b73" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">应用技术分析，用大约125行代码通过3个简单的步骤构建一个交易机器人</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/26f5ee861d8f5fd24227d53c40fac575.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5IZD9EKauZkGjvdRh3cRwg.jpeg"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx"><strong class="bd jt">Source</strong>: <a class="ae ju" href="https://unsplash.com/photos/fsSGgTBoX9Y" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="052f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">加密货币是一种基于区块链技术的数字资产或数字货币形式。与证券交易所类似，也有加密交易所，通过这些交易所可以交易加密货币。</p><p id="5806" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本文中，我们将构建一个简单的bot框架，通过使用一些常用的技术指标，如相对强度指数(RSI)和MACD，实现加密货币交易的自动化。</p><p id="e1ea" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">虽然本文关注的是加密货币，但类似的方法也可以应用于其他交易工具(股票、外汇等)。本文中使用crypto的几个原因，加密货币市场全天候运行，因此bot可以保持运行。此外，加密货币通常非常不稳定，这使得它成为尝试交易算法的理想候选。</p><p id="6a70" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jv">免责声明:本文的目标是分享一些关于构建一个基本的机器人框架来执行算法交易的经验。这篇文章只是一个编程教程，并不打算成为任何类型的投资建议。</em></p><h1 id="7604" class="jw jx hi bd jt jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">构建交易机器人——3步流程</h1><p id="6ea5" class="pw-post-body-paragraph if ig hi ih b ii kt ik il im ku io ip iq kv is it iu kw iw ix iy kx ja jb jc hb bi translated"><strong class="ih hj">步骤1: </strong>连接到一个交换机以获取实时数据</p><p id="48b6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第二步:</strong>对数据应用交易算法</p><p id="a90d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第三步:</strong>执行交易</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ky"><img src="../Images/bb784b1f15ea06f09e54d37540ee293f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HC1NaZS4aERBTFLhbEHuKg.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx"><strong class="bd jt">Flow diagram for the trading bot </strong>(Image by Author)</figcaption></figure><p id="39f7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在两种情况下，我们需要与交易所进行互动。首先，获取数据并在其上运行交易算法。第二，下买入/卖出订单来交易资产。</p><p id="e5e0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本文中，有两个不同的包用于与交换交互。ccxt包用于从交换机获取数据。交易算法在这些数据上运行，当必须下交易订单时，我使用了我拥有交易账户(WazirX)的交易所提供的API。</p><p id="8de4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您在任何其他提供公共API来获取数据和下单的交易所拥有帐户，那么也可以使用相同的API。</p><h1 id="bc04" class="jw jx hi bd jt jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">步骤1:获取实时数据</h1><p id="1732" class="pw-post-body-paragraph if ig hi ih b ii kt ik il im ku io ip iq kv is it iu kw iw ix iy kx ja jb jc hb bi translated">CCXT(加密货币交易所交易库)是一个用于连接和交易全球加密货币交易所和支付处理服务的库。</p><p id="44f4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将使用这个库和币安交易所来获取密码的价格数据。任何其他交换或api也可以用于此目的。</p><p id="8865" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">参考<a class="ae ju" href="https://docs.ccxt.com/en/latest/manual.html" rel="noopener ugc nofollow" target="_blank">此处</a>查看ccxt的最新手册，该手册详细介绍了其提供的接口。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kz la l"/></div></figure><h1 id="9b04" class="jw jx hi bd jt jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">第二步:运用交易策略</h1><p id="9d37" class="pw-post-body-paragraph if ig hi ih b ii kt ik il im ku io ip iq kv is it iu kw iw ix iy kx ja jb jc hb bi translated">这里我们将应用一个非常基本的交易策略。请注意，本文的目标只是获得创建交易机器人的诀窍，重点不是构建强大的交易算法。</p><p id="6f93" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里应用的策略使用了两个技术指标，即RSI和MACD指标。要了解这些指标的更多信息，请参考本文:<a class="ae ju" rel="noopener" href="/geekculture/beginners-guide-to-technical-analysis-in-python-for-algorithmic-trading-19164fb6149">技术分析基础</a></p><h2 id="5dba" class="lb jx hi bd jt lc ld le kb lf lg lh kf iq li lj kj iu lk ll kn iy lm ln kr lo bi translated">交易策略</h2><blockquote class="lp lq lr"><p id="ce52" class="if ig jv ih b ii ij ik il im in io ip ls ir is it lt iv iw ix lu iz ja jb jc hb bi translated">在超卖区域，买入→ MACD与买入信号和RSI交叉</p><p id="fd13" class="if ig jv ih b ii ij ik il im in io ip ls ir is it lt iv iw ix lu iz ja jb jc hb bi translated">卖出→ MACD交叉，在超买区有卖出信号和相对强弱指标</p><p id="1c3c" class="if ig jv ih b ii ij ik il im in io ip ls ir is it lt iv iw ix lu iz ja jb jc hb bi translated">等待→否则</p></blockquote><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lv"><img src="../Images/c24bdf95e0c9829bda640e72ea747a92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hI6PqSQvfC51WcAwEUXEGw.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx"><strong class="bd jt">Illustration of the trading strategy</strong> (Image by Author)</figcaption></figure><p id="7106" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">可以基于从交易算法接收的信号来执行交易。实现了连续的购买-销售循环。因此，一旦发出买入指令，它将不会发出另一个买入指令，直到卖出指令被执行。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kz la l"/></div></figure><h1 id="4740" class="jw jx hi bd jt jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">第三步:执行交易</h1><p id="6e9c" class="pw-post-body-paragraph if ig hi ih b ii kt ik il im ku io ip iq kv is it iu kw iw ix iy kx ja jb jc hb bi translated">以下是以编程方式执行交易的一些先决条件:</p><ol class=""><li id="f4a6" class="lw lx hi ih b ii ij im in iq ly iu lz iy ma jc mb mc md me bi translated">交易交易所需要提供API来下订单。</li><li id="cc45" class="lw lx hi ih b ii mf im mg iq mh iu mi iy mj jc mb mc md me bi translated">我们需要在这样的交易交易所开一个账户。</li><li id="3290" class="lw lx hi ih b ii mf im mg iq mh iu mi iy mj jc mb mc md me bi translated">我们需要创建一个API密钥和密码来访问交易账户。</li><li id="433d" class="lw lx hi ih b ii mf im mg iq mh iu mi iy mj jc mb mc md me bi translated">交易账户中应有足够的资金来执行订单。</li></ol><p id="0ba4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">作为一个例子，我使用了WazirX，这是一个加密交易交易所。他们提供API来执行交易，因为我在WazirX有一个帐户，我用这个帐户来演示。</p><p id="104c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">可以使用任何提供API的加密交换提供者，总体流程将保持不变，只有API可能略有不同。</p><p id="1cc4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面是提供的API的文档参考:<a class="ae ju" href="https://docs.wazirx.com/#public-rest-api-for-wazirx" rel="noopener ugc nofollow" target="_blank"> WazirX API参考</a></p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kz la l"/></div></figure><h1 id="fa97" class="jw jx hi bd jt jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">包装在一起</h1><p id="f955" class="pw-post-body-paragraph if ig hi ih b ii kt ik il im ku io ip iq kv is it iu kw iw ix iy kx ja jb jc hb bi translated">把上面解释的所有步骤放在一起，我们就有了一个交易机器人。这里我们以比特币对抗USDT为例。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kz la l"/></div></figure><p id="c141" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">就这样，用不到125行代码，我们就准备好了一个交易机器人，万事俱备！！</p><p id="75a0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">完整的代码参考请参考git repo。</p><h1 id="ec69" class="jw jx hi bd jt jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">盈利还是亏损？</h1><p id="6473" class="pw-post-body-paragraph if ig hi ih b ii kt ik il im ku io ip iq kv is it iu kw iw ix iy kx ja jb jc hb bi translated">鉴于我们没有设定任何最低利润，买卖决定仅基于指标，这是一个非常基本的交易方法。盈利或亏损将取决于特定密码在当天的交易情况。</p><p id="5ad5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以下是在对USDT交易的比特币上运行该机器人24小时后的示例输出。投资金额设置为10美元，在此测试中使用1分钟蜡烛。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mk"><img src="../Images/5860e0332189ab02e8f6714b443f9411.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JJTsVsPiW0guQihlCtU-Lg.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx"><strong class="bd jt">Details of the trades executed in the 24-hour test run</strong></figcaption></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ml"><img src="../Images/928b35a4fb8217a2951b8fcc791363b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aDWpG38XvxvKOWB_VRffsg.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx"><strong class="bd jt">Sample summary of running the bot for 24 hours on Bitcoin</strong> (Image by Author)</figcaption></figure><p id="1e5a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">鉴于交易算法逻辑的简单性，结果可能不会很有利可图。在许多实际的交易机器人中，成千上万的这种低利润交易被完成，以获得大量的累积利润。</p><h1 id="2e43" class="jw jx hi bd jt jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">限制</h1><p id="6cd9" class="pw-post-body-paragraph if ig hi ih b ii kt ik il im ku io ip iq kv is it iu kw iw ix iy kx ja jb jc hb bi translated">这里显示的交易策略是一个非常简单的算法来产生买卖信号。它可以通过以下方式进一步改进:</p><ul class=""><li id="ca11" class="lw lx hi ih b ii ij im in iq ly iu lz iy ma jc mm mc md me bi translated">添加更多技术指标</li><li id="9439" class="lw lx hi ih b ii mf im mg iq mh iu mi iy mj jc mm mc md me bi translated">添加烛台图案以做出更好的决定</li><li id="295e" class="lw lx hi ih b ii mf im mg iq mh iu mi iy mj jc mm mc md me bi translated">除了指标之外，设定最低利润%来下单卖出，同时设定止损</li><li id="6dae" class="lw lx hi ih b ii mf im mg iq mh iu mi iy mj jc mm mc md me bi translated">目前，该机器人将处于两种状态之一——购买或出售。可以把它改成下多单平均盈亏。</li></ul><h1 id="20e6" class="jw jx hi bd jt jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">代码参考</h1><p id="cea5" class="pw-post-body-paragraph if ig hi ih b ii kt ik il im ku io ip iq kv is it iu kw iw ix iy kx ja jb jc hb bi translated">参考下面的github repo获取完整的源代码— <a class="ae ju" href="https://github.com/Lakshmi-1212/SimpleTradingBot" rel="noopener ugc nofollow" target="_blank">简单交易机器人</a></p><h1 id="4f13" class="jw jx hi bd jt jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">结论</h1><p id="fe20" class="pw-post-body-paragraph if ig hi ih b ii kt ik il im ku io ip iq kv is it iu kw iw ix iy kx ja jb jc hb bi translated">这个框架将帮助你开始建立自己的交易机器人。随意探索，在上面即兴发挥，让算法更强大。</p><p id="9034" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">鉴于影响股票/密码的技术分析范围之外的其他外部因素，此应用程序的结果可能不总是以正数结束。</p><p id="fcbb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">请将这篇文章仅用于学习和实验。如果机器人能让我们成为亿万富翁，那么现在应该有很多这样的亿万富翁了:-)</p></div><div class="ab cl mn mo gp mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="hb hc hd he hf"><h2 id="a3d7" class="lb jx hi bd jt lc ld le kb lf lg lh kf iq li lj kj iu lk ll kn iy lm ln kr lo bi translated">如果“PYTHON+TRADING”让你着迷，那就看看这些吧…</h2><ul class=""><li id="6619" class="lw lx hi ih b ii kt im ku iq mu iu mv iy mw jc mm mc md me bi translated"><a class="ae ju" rel="noopener" href="/geekculture/beginners-guide-to-technical-analysis-in-python-for-algorithmic-trading-19164fb6149"> <em class="jv">算法交易Python技术分析入门</em> </a></li><li id="bbaf" class="lw lx hi ih b ii mf im mg iq mh iu mi iy mj jc mm mc md me bi translated"><em class="jv">用Python构建一个基本的加密交易机器人【你在这里】</em></li><li id="88c0" class="lw lx hi ih b ii mf im mg iq mh iu mi iy mj jc mm mc md me bi translated"><a class="ae ju" rel="noopener" href="/geekculture/automated-triangular-arbitrage-of-cryptos-in-4-steps-a678f7b01ce7"><em class="jv">4步自动三角套利密码</em> </a></li><li id="d599" class="lw lx hi ih b ii mf im mg iq mh iu mi iy mj jc mm mc md me bi translated"><a class="ae ju" rel="noopener" href="/geekculture/identifying-trading-patterns-behavioural-analysis-of-traders-5184dfa0350b"> <em class="jv">识别交易模式—交易者行为分析</em> </a></li><li id="6013" class="lw lx hi ih b ii mf im mg iq mh iu mi iy mj jc mm mc md me bi translated"><a class="ae ju" rel="noopener" href="/geekculture/fundamental-analysis-of-stocks-using-python-d5ad050e6372"> <em class="jv">股票基本面分析使用Python </em> </a></li></ul></div></div>    
</body>
</html>