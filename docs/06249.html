<html>
<head>
<title>How to Generate HTML Report in Playwright End to End Automation Tool</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在剧作家端到端自动化工具中生成HTML报告</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/how-to-generate-html-report-in-playwright-f9ec9b82427a?source=collection_archive---------2-----------------------#2021-08-15">https://medium.com/geekculture/how-to-generate-html-report-in-playwright-f9ec9b82427a?source=collection_archive---------2-----------------------#2021-08-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="4776" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">作者注意:这篇文章是在没有PLAYRIGHT支持的HTML报告的地方写的。剧作家的最新版本有自己的HTML报告，你不需要遵循变通办法。更多详情查看<a class="ae jd" href="https://playwright.dev/docs/test-reporters/#html-reporter" rel="noopener ugc nofollow" target="_blank">官网</a>。</p><p id="0d91" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">剧作家支持各种报告器，默认情况下，剧作家支持点报告器，线报告器，JUnit XML报告器，JSON报告器，列表报告器。</p><p id="583b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">随着最近的变化，剧作家也支持倾城报告。</p><p id="78d0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">本教程解释了两种不同的生成HTML报告的方法</strong></p><ol class=""><li id="f570" class="je jf hi ih b ii ij im in iq jg iu jh iy ji jc jj jk jl jm bi translated"><strong class="ih hj">倾城报告</strong></li><li id="c28e" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated"><strong class="ih hj"> HTML报告</strong></li></ol><p id="bcc5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">方法1:《倾城》与剧作家的报道</strong></p><h1 id="a90c" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">用剧作家整合和生成《诱惑报告》的分步指南</h1><p id="93a1" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated"><strong class="ih hj">先决条件:</strong></p><ol class=""><li id="9122" class="je jf hi ih b ii ij im in iq jg iu jh iy ji jc jj jk jl jm bi translated">我们假设，在你的框架中已经有一些测试</li></ol><h2 id="3ac1" class="kv jt hi bd ju kw kx ky jy kz la lb kc iq lc ld kg iu le lf kk iy lg lh ko li bi translated"><strong class="ak">第一步:安装allure命令行</strong></h2><p id="e8c6" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">要打开allure报告，您需要在您的计算机上安装allure依赖项。</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="716d" class="kv jt hi lo b fi ls lt l lu lv"><strong class="lo hj">npm i -D allure-commandline</strong></span></pre><h2 id="aa38" class="kv jt hi bd ju kw kx ky jy kz la lb kc iq lc ld kg iu le lf kk iy lg lh ko li bi translated"><strong class="ak">第二步:为剧作家安装诱惑</strong></h2><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="7d91" class="kv jt hi lo b fi ls lt l lu lv"><strong class="lo hj">npm i -D experimental-allure-playwright</strong></span></pre><h2 id="f9cb" class="kv jt hi bd ju kw kx ky jy kz la lb kc iq lc ld kg iu le lf kk iy lg lh ko li bi translated"><strong class="ak">步骤3:配置剧作家全局配置文件</strong></h2><p id="f983" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">我们在剧作家配置文件中指定了记者。如果您不想在配置文件中指定报告器类型，也可以在命令行中提到它。我们将在这里展示这两个选项。</p><p id="4d7c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Allure报告的配置，将以下代码复制并粘贴到您的<strong class="ih hj">剧作家.配置. ts文件</strong>中。该文件应该位于项目根文件夹中</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="6547" class="kv jt hi lo b fi ls lt l lu lv">// playwright.config.ts<br/>import { PlaywrightTestConfig } from '<a class="ae jd" href="http://twitter.com/playwright/test" rel="noopener ugc nofollow" target="_blank">@playwright/test</a>';<br/>const config: PlaywrightTestConfig = {<br/>  use: {<br/>    screenshot: 'only-on-failure'<br/>  },<br/>  reporter: 'experimental-allure-playwright',<br/>};<br/>export default config;</span></pre><p id="d05d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">注意:</strong> <br/>如果你想在命令行中调用reporter只需跳过这一步</p><h2 id="ec38" class="kv jt hi bd ju kw kx ky jy kz la lb kc iq lc ld kg iu le lf kk iy lg lh ko li bi translated"><strong class="ak">第四步:运行剧作家测试</strong></h2><p id="bbc6" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated"><strong class="ih hj">选项1:使用全局配置文件执行剧作家测试</strong></p><p id="4015" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您已经按照上面的步骤设置了全局配置文件，只需使用下面的命令执行您的测试</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="d691" class="kv jt hi lo b fi ls lt l lu lv"><strong class="lo hj">npx playwright test</strong></span></pre><p id="7197" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">选项2:使用reporter选项执行剧作家测试</strong></p><p id="7758" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="lw">注意:</em> </strong> <em class="lw">仅当您跳过了第3步，即您没有配置剧作家全局配置文件</em>时，才遵循此选项</p><p id="1da6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用以下命令执行带有剧作家记者选项的测试</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="8d6b" class="kv jt hi lo b fi ls lt l lu lv"><strong class="lo hj">npx playwright test --reporter=line,experimental-allure-playwright</strong></span></pre><p id="54ad" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦你执行了测试，你应该会看到一个名为<strong class="ih hj"> allure-results </strong>的文件夹</p><figure class="lj lk ll lm fd ly er es paragraph-image"><div class="er es lx"><img src="../Images/99efc570664a1f2a32929d6efcb150b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:882/format:webp/1*gSiNx9lID6e4AxKF6nO-Zw.png"/></div></figure><h2 id="0c66" class="kv jt hi bd ju kw kx ky jy kz la lb kc iq lc ld kg iu le lf kk iy lg lh ko li bi translated"><strong class="ak">第五步:为剧作家生成诱惑报告</strong></h2><p id="ee1c" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">使用命令行，您可以生成allure报告。</p><p id="2d5c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用以下命令在剧作家中生成诱惑报告</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="75bd" class="kv jt hi lo b fi ls lt l lu lv"><strong class="lo hj">npx allure generate ./allure-results --clean</strong></span></pre><p id="f1bb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦执行上述命令，将会生成另一个名为<strong class="ih hj"> allure-report </strong>的文件夹</p><figure class="lj lk ll lm fd ly er es paragraph-image"><div class="er es mb"><img src="../Images/7c67e95b1ea1355e3fe5172171e72f3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:920/format:webp/1*plDo_RyRxbFn2uxKEIUYLQ.png"/></div></figure><h2 id="3d53" class="kv jt hi bd ju kw kx ky jy kz la lb kc iq lc ld kg iu le lf kk iy lg lh ko li bi translated">步骤6:使用命令提示符打开剧作家诱惑测试报告</h2><p id="45b6" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">Allure已经为您生成了一个详细的报告，如果您想查看漂亮的报告，您需要使用下面的命令打开allure报告</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="89ed" class="kv jt hi lo b fi ls lt l lu lv"><strong class="lo hj">npx allure open ./allure-report</strong></span></pre><p id="0e17" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Allure报告在浏览器中打开，如下所示</p><figure class="lj lk ll lm fd ly er es paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="er es mc"><img src="../Images/8322acdfa64a1540870da3eb12109876.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T50BbhgvBLH_6HhiBShS3A.png"/></div></div></figure><p id="7949" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上述步骤完成了Allure Report集成。</p><p id="cb30" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">方法2:用HTML报告剧作家</strong></p><h1 id="ba41" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">在剧作家中生成HTML结果的逐步指南</h1><p id="bb3c" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">allure报告的问题是，您不能直接与利益相关者共享HTML文件，要做到这一点，您需要创建一个docker容器和一些您需要做的配置。</p><p id="a717" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">有一种简单的方法可以用剧作家</strong>生成一个简单的HTML文件</p><p id="c0a4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">简单地说，我们创建一个JUnit XML文件，然后在测试执行完成后将它转换成HTML文件。</p><h2 id="208e" class="kv jt hi bd ju kw kx ky jy kz la lb kc iq lc ld kg iu le lf kk iy lg lh ko li bi translated">步骤1:安装XUnit查看器包</h2><p id="8e26" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">这个包将有助于从JUnit XML文件创建HTML文件</p><p id="66a7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用下面的命令安装XUnit查看器包</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="35c6" class="kv jt hi lo b fi ls lt l lu lv"><strong class="lo hj">npm install --save-dev xunit-viewer</strong></span></pre><h2 id="be87" class="kv jt hi bd ju kw kx ky jy kz la lb kc iq lc ld kg iu le lf kk iy lg lh ko li bi translated">步骤2:为剧作家创建全局拆卸文件</h2><p id="77c1" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">在你的项目根文件夹<strong class="ih hj">中创建一个名为<strong class="ih hj"> global-teardown.ts </strong>的新文件</strong></p><p id="1655" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将下面的代码复制并粘贴到<strong class="ih hj"> global-teardown.ts </strong></p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="3d5f" class="kv jt hi lo b fi ls lt l lu lv">//global-teardown.ts<br/>const exec = require('child_process').execSync;</span><span id="07fe" class="kv jt hi lo b fi mh lt l lu lv">async function globalSetup() {<br/>    await exec('npx xunit-viewer -r  results.xml -o results.html ')<br/>  };<br/>export default globalSetup;</span></pre><figure class="lj lk ll lm fd ly er es paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="er es mi"><img src="../Images/30bfc0dadacfc67e8569adffbd1ba5f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_3G7visnb2c5qjZApF4e_A.png"/></div></div></figure><h2 id="8779" class="kv jt hi bd ju kw kx ky jy kz la lb kc iq lc ld kg iu le lf kk iy lg lh ko li bi translated">步骤3:配置你的剧作家全局配置文件</h2><p id="db0c" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">打开应该位于您的项目根文件夹中的配置文件。如果尚未创建，请创建一个。</p><p id="951c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将下面的代码复制粘贴到<strong class="ih hj">剧作家.配置文件</strong></p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="3643" class="kv jt hi lo b fi ls lt l lu lv">// playwright.config.ts<br/>import { PlaywrightTestConfig } from '<a class="ae jd" href="http://twitter.com/playwright/test" rel="noopener ugc nofollow" target="_blank">@playwright/test</a>';<br/>const config: PlaywrightTestConfig = {<br/>  globalTeardown:require.resolve('./global-teardown'),<br/>  use: {<br/>    screenshot: 'only-on-failure'<br/>  },<br/>    reporter: [ ['junit', { outputFile: 'results.xml' }] ],<br/>};<br/>export default config;</span></pre><h2 id="59f5" class="kv jt hi bd ju kw kx ky jy kz la lb kc iq lc ld kg iu le lf kk iy lg lh ko li bi translated">步骤4:执行剧作家测试以生成HTML文件</h2><p id="3d0c" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">我们已经完成了生成HTML报告所需的所有配置，现在使用下面的命令执行您的测试</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="dae5" class="kv jt hi lo b fi ls lt l lu lv"><strong class="lo hj">npx playwright test</strong></span></pre><h2 id="395d" class="kv jt hi bd ju kw kx ky jy kz la lb kc iq lc ld kg iu le lf kk iy lg lh ko li bi translated">步骤5:查看剧作家生成的HTML报告</h2><p id="d3fa" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">一旦剧作家测试的执行完成，你就可以在你的项目文件夹中看到results.html文件</p><p id="5203" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在浏览器上打开<strong class="ih hj">results.html</strong>。</p><figure class="lj lk ll lm fd ly er es paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="er es mj"><img src="../Images/9679073490e5085dc350ee9a81022309.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*unHQmCooSniE3i7suhvSCw.png"/></div></div></figure><p id="1e00" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">剧作家生成的<strong class="ih hj">results.html</strong>文件是一个简单的HTML文件，具有内嵌的CSS，因此您可以与利益相关者共享这个HTML文件。</p><p id="14d0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="lw">注:</em> </strong> <em class="lw"> <br/> 1。HTML文件没有集成截图。<br/> 2。通过/失败用红色和绿色标记<br/> 3。失败测试显示点击失败测试后的堆栈跟踪</em></p><p id="4f47" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">参考:<a class="ae jd" href="https://playwright.dev/" rel="noopener ugc nofollow" target="_blank">https://playwright.dev/</a></p><p id="85d6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">☕ <a class="ae jd" href="https://www.buymeacoffee.com/ganeshhegde" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">给我买杯咖啡</strong> </a></p><p id="2b28" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">如果您需要任何帮助、支持、指导，请联系我</strong><a class="ae jd" href="https://www.linkedin.com/in/ganeshsirsi/" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj">LinkedIn</strong></a><strong class="ih hj">|</strong><a class="ae jd" href="https://www.linkedin.com/in/ganeshsirsi/" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj">https://www.linkedin.com/in/ganeshsirsi</strong></a></p></div></div>    
</body>
</html>