<html>
<head>
<title>Pass by Reference and Value in Swift</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Swift中通过引用和值传递</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/pass-by-reference-and-value-in-swift-ef332551b560?source=collection_archive---------19-----------------------#2022-03-17">https://medium.com/geekculture/pass-by-reference-and-value-in-swift-ef332551b560?source=collection_archive---------19-----------------------#2022-03-17</a></blockquote><div><div class="dt gx gy gz ha hb"/><div class="hc hd he hf hg"><div class=""/><p id="e15b" class="pw-post-body-paragraph ig ih hj ii b ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd hc bi translated">在每一种编程语言中(主要对于“新”开发人员来说)都不容易理解的一个概念是认识到“通过引用传递和通过值传递”之间的区别。</p><p id="cab5" class="pw-post-body-paragraph ig ih hj ii b ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd hc bi translated">按值传递意味着:“将一个值从一个内存位置复制到另一个内存位置。”相反，通过引用传递意味着我们不复制目标中的值，而是复制对源的引用(地址)。</p><p id="9a0f" class="pw-post-body-paragraph ig ih hj ii b ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd hc bi translated">我喜欢用这些图片来解释不同之处:</p><figure class="jf jg jh ji fe jj es et paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="es et je"><img src="../Images/bbf796aaf14cfa39d9fef56d92cacc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*1xbFStuHylqkd0lS.jpg"/></div></div></figure><figure class="jf jg jh ji fe jj es et paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="es et je"><img src="../Images/2d31fbad22c7a66018ea3829db7eb0bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ZsByWsS1IrHpfRyB.jpg"/></div></div></figure><p id="e708" class="pw-post-body-paragraph ig ih hj ii b ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd hc bi translated">因此，当我们通过值传递时，就像将一个单元格的值从一个单元格复制到另一个单元格，相反，当通过引用传递时，我们在目标单元格中设置源的地址(本例中为e5)。</p><p id="c4bd" class="pw-post-body-paragraph ig ih hj ii b ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd hc bi translated">让我们看看swift:</p><pre class="jf jg jh ji fe jq jr js jt aw ju bi"><span id="a368" class="jv jw hj jr b fj jx jy l jz ka">struct BoxStruct {<br/> var width = 0<br/> var height = 0<br/>}<br/><br/>var littleBox = BoxStruct(width: 2, height: 3)<br/>var bigBox = BoxStruct(width: 57, height: 84)<br/><br/>littleBox = bigBox<br/><br/>print("Little box: width \(littleBox.width) height \(littleBox.height)")<br/>print("Bix box: width \(bigBox.width) height \(bigBox.height)")<br/><br/>bigBox.width = 150<br/>bigBox.height = 333<br/><br/>print("Little box: width \(littleBox.width) height \(littleBox.height)")<br/>print("Big box: width \(bigBox.width) height \(bigBox.height)")</span></pre><p id="6874" class="pw-post-body-paragraph ig ih hj ii b ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd hc bi translated">执行这段代码有:</p><pre class="jf jg jh ji fe jq jr js jt aw ju bi"><span id="6a31" class="jv jw hj jr b fj jx jy l jz ka">Little box: width 57 height 84 <br/>Big box: width 57 height 84 <br/>Little box: width 57 height 84 <br/>Big box: width 150 height 333</span></pre><p id="5557" class="pw-post-body-paragraph ig ih hj ii b ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd hc bi translated">在这种情况下，我们有一个按值复制的副本。我们将bigBox中的内容复制到littleBox中，因此两个Box具有相同的值；在我们改变bigBox的值之后，这两个盒子将包含不同的值。</p><p id="6844" class="pw-post-body-paragraph ig ih hj ii b ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd hc bi translated">让我们看看这个类发生了什么:</p><pre class="jf jg jh ji fe jq jr js jt aw ju bi"><span id="dc84" class="jv jw hj jr b fj jx jy l jz ka">class TriangleClass {<br/> var width: Int<br/> var height: Int<br/> <br/> init(width: Int, height: Int) {<br/> self.width = width<br/> self.height = height<br/> }<br/>}<br/><br/>var littleTriangle = TriangleClass(width: 2, height: 3)<br/>var bigTriangle = TriangleClass(width: 57, height: 84)<br/><br/>littleTriangle = bigTriangle<br/><br/>print("Little Triangle: width \(littleTriangle.width) height \(littleTriangle.height)")<br/>print("Big Triangle: width \(bigTriangle.width) height \(bigTriangle.height)")<br/><br/>bigTriangle.width = 150<br/>bigTriangle.height = 333<br/><br/>print("Little Triangle: width \(littleTriangle.width) height \(littleTriangle.height)")<br/>print("Big Triangle: width \(bigTriangle.width) height \(bigTriangle.height)")</span></pre><p id="26d5" class="pw-post-body-paragraph ig ih hj ii b ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd hc bi translated">现在我们有了这样的输出:</p><pre class="jf jg jh ji fe jq jr js jt aw ju bi"><span id="bf9c" class="jv jw hj jr b fj jx jy l jz ka">Little Triangle: width 57 height 84 <br/>Big Triangle: width 57 height 84 <br/>Little Triangle: width 150 height 333 <br/>Big Triangle: width 150 height 333</span></pre><p id="5195" class="pw-post-body-paragraph ig ih hj ii b ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd hc bi translated">这次不一样！复制后，三角形具有相同的值；在我们改变大三角形的尺寸后，神奇的事情发生了，小三角形的尺寸也改变了！为什么？对于类，复制是通过引用完成的，所以写“littleTrianlge = bigTriangle”，我们不是在little中复制big的内容，我们是像在sheet示例中那样复制引用。现在，每一个大的变化都会在小的方面显现出来。</p><p id="34d7" class="pw-post-body-paragraph ig ih hj ii b ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd hc bi translated">同样的情况也发生在函数中，如果我们想要修改传递给函数的参数的原始值，这些都要通过引用来传递，这样:</p><pre class="jf jg jh ji fe jq jr js jt aw ju bi"><span id="e179" class="jv jw hj jr b fj jx jy l jz ka">func swap(a : inout Int, b: inout Int) {<br/>    let dum = a<br/>    a = b<br/>    b = dum<br/>}</span></pre><p id="30b7" class="pw-post-body-paragraph ig ih hj ii b ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd hc bi translated">作为练习，试着去掉关键字“inout ”,看看会发生什么。</p></div></div>    
</body>
</html>