<html>
<head>
<title>How to debug NodeJs applications like a pro</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何像专家一样调试NodeJs应用程序</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/how-to-debug-nodejs-applications-like-a-pro-20ee08226187?source=collection_archive---------34-----------------------#2021-05-30">https://medium.com/geekculture/how-to-debug-nodejs-applications-like-a-pro-20ee08226187?source=collection_archive---------34-----------------------#2021-05-30</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/65930e0986dbc784e666046614087906.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mBD6nBeOunlVYBaoCJe-6Q.png"/></div></div></figure><p id="278b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">对于任何软件工程师来说，调试都是一项基本技能。在我看来，良好的调试能力是优秀工程师与普通工程师的区别。它还有助于在开发功能或调查问题时节省大量时间。在这篇博文中，我将向您展示调试NodeJS应用程序的三种技术。虽然这些技术主要面向NodeJS开发人员，但是它们可以应用于任何编程语言或框架，只不过使用不同的调试工具。如果你更喜欢视频教程而不是阅读，我在这里做了一个视频<a class="ae jo" href="https://youtu.be/rMLI1oC1Ak0" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="3fd1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将与一个样本项目，我准备<a class="ae jo" href="https://github.com/dmngu9/node-ts" rel="noopener ugc nofollow" target="_blank">在这里</a>。这是一个非常简单的NodeJs服务器，它计算一个计数值，并为路由“/”上的请求发回200个状态代码，如下所示。如何检查计数值？</p><figure class="jq jr js jt fd ij er es paragraph-image"><div class="er es jp"><img src="../Images/a61465a75f39fdcb8a9b9b3af318036a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1226/format:webp/1*PVbznD0eUeieYWPiCBzYUA.png"/></div></figure><h1 id="62db" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">简陋的控制台. log</h1><p id="df3e" class="pw-post-body-paragraph iq ir hi is b it ks iv iw ix kt iz ja jb ku jd je jf kv jh ji jj kw jl jm jn hb bi translated">我知道，我知道。我们以前都见过这种古老而无趣的<strong class="is hj">声明。但是请相信我，这是一个强大的技术，仍然被大多数有经验的工程师使用。在本练习中，为了找出<strong class="is hj"> count的值，</strong>console . log简单地完成了这项工作。以下是这种方法的利弊。</strong></p><p id="fc25" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">优点:</p><ul class=""><li id="1c43" class="kx ky hi is b it iu ix iy jb kz jf la jj lb jn lc ld le lf bi translated">这样做很快，并帮助我们了解代码路径的某些部分的结果。</li></ul><p id="6b38" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">缺点:</p><ul class=""><li id="fd9e" class="kx ky hi is b it iu ix iy jb kz jf la jj lb jn lc ld le lf bi translated">如果代码库更复杂，则需要多个<strong class="is hj"> console.log </strong>语句，每个语句都需要额外的元数据来区分彼此。</li><li id="88d6" class="kx ky hi is b it lg ix lh jb li jf lj jj lk jn lc ld le lf bi translated">它不允许我们检查结果是如何计算的，也不允许我们检查某些代码路径是如何到达的，除非我们放置多个<strong class="is hj"> console.log </strong>。那会很费时间。</li></ul><p id="21fb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这种技术只有在问题很小并且开发人员已经熟悉代码库的情况下才最有效。</p><h1 id="4a28" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">在Chrome浏览器中使用NodeJS内置检查器功能</h1><p id="990c" class="pw-post-body-paragraph iq ir hi is b it ks iv iw ix kt iz ja jb ku jd je jf kv jh ji jj kw jl jm jn hb bi translated">由于console.log方法的所有缺点，因此需要更好的调试技术。其中之一就是使用NodeJS内置的inspector。在上面的示例代码中，让我们在。</p><figure class="jq jr js jt fd ij er es paragraph-image"><div class="er es ll"><img src="../Images/f59d1aab3242fbeca1d80e2dbf303e50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1236/format:webp/1*4qAs-2nlqqB_37on0GlpOQ.png"/></div></figure><p id="1ee4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后使用<strong class="is hj">node-inspect index . js再次运行服务器。</strong>如您所知，我们在这里使用<strong class="is hj">-inspect</strong>标志将NodeJS服务器置于检查模式。</p><p id="f332" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，打开你的Chrome浏览器，进入这条路线<strong class="is hj"> chrome://inspect。</strong>在<strong class="is hj">远程目标</strong>部分，你应该看到你的<strong class="is hj"> index.js </strong>作为目标。点击<strong class="is hj">检查</strong>链接。它将带你到Chrome debugger tool for NodeJS。</p><figure class="jq jr js jt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lm"><img src="../Images/d0f5f38ce5de31d1cb14f6ce9ae5a9b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aw3kEdhMP6Xvsbms28ObsA.png"/></div></div></figure><p id="244f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果我们向'/'路由发出请求，请求处理将在如下所示的<strong class="is hj">调试器</strong>行停止。</p><figure class="jq jr js jt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ln"><img src="../Images/f7dd5c102c980233b5c206b013b511ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dxZysEmmMEDZZVAYoANSmQ.png"/></div></div></figure><p id="efa0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在第8行，您可以观察到<strong class="is hj"> count </strong>变量的值。轻松右转！！</p><p id="8a4d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在Chrome调试器的右边，你会看到这些按钮。</p><figure class="jq jr js jt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lo"><img src="../Images/589668e7592e1e59a70550a20fb7ba8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fh8f4jqKcjF5pRVOii9hKg.png"/></div></div></figure><ul class=""><li id="3e1f" class="kx ky hi is b it iu ix iy jb kz jf la jj lb jn lc ld le lf bi translated"><strong class="is hj">恢复执行</strong>:继续执行脚本。它将在下一个<strong class="is hj">调试器</strong>处停止。如果没有更多的<strong class="is hj">调试器</strong>，它将执行脚本的剩余部分。</li><li id="9714" class="kx ky hi is b it lg ix lh jb li jf lj jj lk jn lc ld le lf bi translated"><strong class="is hj">跳过功能</strong>:执行不感兴趣的功能，但不检查。它将在执行该功能后停止。</li><li id="01c9" class="kx ky hi is b it lg ix lh jb li jf lj jj lk jn lc ld le lf bi translated"><strong class="is hj">进入函数</strong>:如果我们的<strong class="is hj"> count </strong>变量是由一个函数或者嵌套函数计算的，你可以进入那个函数，逐行检查其中的所有操作。</li><li id="a5a1" class="kx ky hi is b it lg ix lh jb li jf lj jj lk jn lc ld le lf bi translated"><strong class="is hj">跳出函数</strong>:如果您正在检查一个函数，并且想要返回到调用该函数的行，您可以使用该功能。</li><li id="67c3" class="kx ky hi is b it lg ix lh jb li jf lj jj lk jn lc ld le lf bi translated"><strong class="is hj">步骤</strong>:执行脚本的单行，将<strong class="is hj">调试器</strong>移动到下一行。</li></ul><p id="beba" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">有了所有这些特性，你可以很容易地观察到你的程序是如何一步一步地运行的。我相信在调查复杂的bug时，这种技术比<strong class="is hj"> console.log </strong>更优越。</p><h1 id="c78e" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">使用VSCode调试器</h1><p id="1715" class="pw-post-body-paragraph iq ir hi is b it ks iv iw ix kt iz ja jb ku jd je jf kv jh ji jj kw jl jm jn hb bi translated">如果您每天都在使用VSCode，这可能是最好的调试方法。我很喜欢VSCode在过去几年中的发展。</p><p id="a968" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">首先，让我们在<strong class="is hj"> </strong>你的VSCode中运行<strong class="is hj"> Cmd + Shift + p </strong>。这会给你一个下坠。然后，选择<strong class="is hj">任务:配置默认构建任务</strong>选项。</p><figure class="jq jr js jt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lp"><img src="../Images/c96877d963d03971a3e32f2a3f9052a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wv-lhn24EbZSxKxDSSb75Q.png"/></div></div></figure><p id="125b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">它将弹出另一个下拉菜单，您可以在其中选择package.json中的脚本作为构建任务运行。我们将选择运行index.js的脚本。vscode文件夹。</p><p id="a82d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在VSCode的左侧。点击bug and play按钮，选择<strong class="is hj">创建一个launch.json文件</strong>。类似的下拉菜单将出现在下图中。我们将选择<strong class="is hj"> Node.js(预览)</strong>选项。</p><figure class="jq jr js jt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lq"><img src="../Images/8a7ca86f3345e076e87017d324c3018a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q_7hKKaKodZlhC6xeb-s2g.png"/></div></div></figure><p id="0e87" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">launch.json文件是在。vscode文件夹。在这个文件中，让我们将<strong class="is hj">程序</strong>字段修改为index.js的路径。如果您的index.js在src文件夹中，那么您的<strong class="is hj">程序</strong>字段应该是$ { workspace folder }/src/index . js。</p><p id="0098" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，让我们单击代码行的左侧，在count变量行上放置一个断点。断点显示为红点。我们可以通过单击创建launch.json文件的同一个选项卡下的绿色play按钮来运行我们的服务器。如果我们现在请求'/' route，程序将在断点处停止，如下所示。</p><figure class="jq jr js jt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lr"><img src="../Images/0836ff265142a9c121f371151418bf98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y6Y52k-Qq-JvY4rXKpfAxg.png"/></div></div></figure><p id="6948" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这里，你会看到一个类似于上一节Chrome浏览器调试器的调试器。我发现这种方法比使用Chrome debugger要好，因为我不必离开我的VSCode。此外。可以在Git中提交vscode文件夹供其他团队成员使用。</p><p id="9a4d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">希望这三个技巧对你有用。</p><p id="0cf5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">关注我了解更多软件开发方面的内容。</p></div></div>    
</body>
</html>