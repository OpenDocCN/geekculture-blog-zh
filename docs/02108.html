<html>
<head>
<title>Apple M1 + VS Code: ARM Template and Template Language Service</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">苹果M1 + VS代码:ARM模板和模板语言服务</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/apple-m1-vs-code-arm-template-and-template-language-service-bb38bcadc99b?source=collection_archive---------8-----------------------#2021-05-04">https://medium.com/geekculture/apple-m1-vs-code-arm-template-and-template-language-service-bb38bcadc99b?source=collection_archive---------8-----------------------#2021-05-04</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/607d4b7a5fb5ca7e1160ebf864a6fcbf.png" data-original-src="https://miro.medium.com/v2/resize:fit:512/format:webp/0*_fAeKf59fOgwjjWV.png"/></div></figure><p id="c763" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">Azure Bicep目前越来越受欢迎，几个月前我们开始为Azure ARM采用这种新的DSL，现在我们已经完全转向使用Bicep来支持基于ARM的模板。</p><p id="ea42" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在M1 Mac上安装Azure ARM和Bicep扩展后，您可能会看到以下错误:</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="er es jk"><img src="../Images/c875ba4618ef5a7c88397984997f182b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0rQ31AEEOEh1xc-a_yLT9w.png"/></div></div></figure><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="er es jt"><img src="../Images/7a0060f34aa01a932106a21ad42d5c8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k1TnTL4C4tcJiW55iCX3Bg.png"/></div></div></figure><p id="b57d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">修复是双重的，你需要使用<strong class="io hj"> Rosetta终端</strong>在你的机器上<strong class="io hj">安装</strong>3.1和5.0 <strong class="io hj"> dotnet运行时</strong>，并且你需要<strong class="io hj">配置扩展</strong>来使用那个运行时安装</p><h2 id="9d7e" class="ju jv hi bd jw jx jy jz ka kb kc kd ke ix kf kg kh jb ki kj kk jf kl km kn ko bi translated">罗塞塔终端</h2><p id="137f" class="pw-post-body-paragraph im in hi io b ip kp ir is it kq iv iw ix kr iz ja jb ks jd je jf kt jh ji jj hb bi translated">如果你还没有一个Rosetta终端，你可以通过从<strong class="io hj">应用程序/实用程序</strong>目录中复制<strong class="io hj">终端.应用程序</strong>来自己制作一个。</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div class="er es ku"><img src="../Images/06629934c08e9a8ec8c5f4fcd7c76998.png" data-original-src="https://miro.medium.com/v2/resize:fit:1396/format:webp/1*MKtJHx80HCxGqxTblNKN-A.png"/></div></figure><p id="3010" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">选择终端.应用程序</p><p id="51de" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">⌘ + C</p><p id="7a36" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">⌘ + V</p><p id="bc5e" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">复制后，将新的<strong class="io hj"> Terminal.app </strong>重命名为<strong class="io hj"> Rosetta Terminal.app </strong></p><p id="3155" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">右击<strong class="io hj"> Rosetta Terminal.app </strong>并选择<strong class="io hj">获取信息。</strong></p><p id="d5f4" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">选择复选框<strong class="io hj">使用Rosetta </strong>打开</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div class="er es kv"><img src="../Images/504543fb8f8560187e569260857ea195.png" data-original-src="https://miro.medium.com/v2/resize:fit:968/format:webp/1*8vyRxT1T5EBCjwlPPE2C0Q.png"/></div></figure><p id="18be" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">关闭信息窗口。</p><h2 id="e96b" class="ju jv hi bd jw jx jy jz ka kb kc kd ke ix kf kg kh jb ki kj kk jf kl km kn ko bi translated">使用Rosetta终端安装dotnet运行时</h2><p id="1990" class="pw-post-body-paragraph im in hi io b ip kp ir is it kq iv iw ix kr iz ja jb ks jd je jf kt jh ji jj hb bi translated">启动新的<strong class="io hj"> Rosetta Terminal.app </strong></p><p id="edb1" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在VS代码中打开一个ARM模板文件，会看到如下错误:</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="er es jt"><img src="../Images/7a0060f34aa01a932106a21ad42d5c8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k1TnTL4C4tcJiW55iCX3Bg.png"/></div></div></figure><p id="95eb" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">选择。NET运行时输出流。</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="er es kw"><img src="../Images/28c77025c9087d540993647083826903.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Oim-la3oekRXHpUEGrxS-Q.png"/></div></div></figure><p id="977d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">选择此扩展试图执行的安装程序命令:</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="er es kx"><img src="../Images/3e32010c23aeaf260549d084f6fcf1df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1qdfY5WnZ4pyylbrPgy3Tw.png"/></div></div></figure><p id="33ae" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在您的<strong class="io hj"> Rosetta Terminal.app. </strong>中粘贴并运行您在上面选择的命令</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="er es ky"><img src="../Images/cdb907ee65a441cb99bc367dd33f2470.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sY-xYoCfB9Bl-gUmUbTMsQ.png"/></div></div></figure><p id="36eb" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">打开一个Bicep文件，你应该在dotnet 5.0运行时得到同样的错误…</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="er es jk"><img src="../Images/c875ba4618ef5a7c88397984997f182b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0rQ31AEEOEh1xc-a_yLT9w.png"/></div></div></figure><p id="1aa9" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">重复前面的步骤，从<strong class="io hj">输出</strong>窗口中选择命令，粘贴到<strong class="io hj"> Rosetta Terminal.app. </strong>中</p><h2 id="3595" class="ju jv hi bd jw jx jy jz ka kb kc kd ke ix kf kg kh jb ki kj kk jf kl km kn ko bi translated"><strong class="ak">配置扩展</strong></h2><p id="4be6" class="pw-post-body-paragraph im in hi io b ip kp ir is it kq iv iw ix kr iz ja jb ks jd je jf kt jh ji jj hb bi translated">现在我们需要配置这些扩展来使用正确的dotnet命令。</p><p id="883e" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">开放VS代码。</p><p id="174e" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">按下⌘ + SHIFT +P并键入'<strong class="io hj">打开设置</strong>，选择<strong class="io hj">打开设置(JSON) </strong>选项:</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="er es kz"><img src="../Images/e021c664f2d85e2537af17ff1aaa01fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H72yxoQBVVDMRm18zaX47Q.png"/></div></div></figure><p id="8f56" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">将以下内容添加到settings.json文件中:</p><pre class="jl jm jn jo fd la lb lc ld aw le bi"><span id="31ca" class="ju jv hi lb b fi lf lg l lh li">"dotnetAcquisitionExtension.existingDotnetPath": [</span><span id="6812" class="ju jv hi lb b fi lj lg l lh li">    {</span><span id="6fcf" class="ju jv hi lb b fi lj lg l lh li">         "extensionId": "msazurermtools.azurerm-vscode-tools",</span><span id="0b67" class="ju jv hi lb b fi lj lg l lh li">         "path": "/usr/local/share/dotnet/dotnet"</span><span id="f8b8" class="ju jv hi lb b fi lj lg l lh li">    },</span><span id="e917" class="ju jv hi lb b fi lj lg l lh li">    {</span><span id="fa61" class="ju jv hi lb b fi lj lg l lh li">        "extensionId": "ms-azuretools.vscode-bicep",</span><span id="716e" class="ju jv hi lb b fi lj lg l lh li">        "path": "/usr/local/share/dotnet/dotnet"</span><span id="c57b" class="ju jv hi lb b fi lj lg l lh li">    }</span><span id="6b73" class="ju jv hi lb b fi lj lg l lh li">]</span></pre><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="er es lk"><img src="../Images/b1e985bbc10cf6e5f1a068c8299a8069.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GX-kmX0AouX5LlRQQgR6mw.png"/></div></div></figure><p id="a59b" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">保存并重新加载，你现在应该可以启动<strong class="io hj"> ARM模板</strong>和<strong class="io hj"> Bicep </strong>语言服务器了！</p></div></div>    
</body>
</html>