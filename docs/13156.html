<html>
<head>
<title>Net Core 6 with MongoDb and Azure Cosmos For Mongo- MacOS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Net Core 6，带有MongoDb和Azure Cosmos，用于Mongo- MacOS</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/net-core-6-with-mongodb-and-azure-cosmos-for-mongo-macos-b7b3448bba73?source=collection_archive---------13-----------------------#2022-06-20">https://medium.com/geekculture/net-core-6-with-mongodb-and-azure-cosmos-for-mongo-macos-b7b3448bba73?source=collection_archive---------13-----------------------#2022-06-20</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/29ad83219528a0c4545451133acdae89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1wZLFCuhJXB8DYUPDmADvQ.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx"><a class="ae iu" href="https://www.pexels.com/" rel="noopener ugc nofollow" target="_blank">https://www.pexels.com/</a></figcaption></figure><p id="740f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们从MongoDB的定义开始</p><p id="919d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">MongoDB是一个NoSQL数据库，我们也可以说是非关系数据库</p><p id="72bc" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">关系数据库</p><p id="5338" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">有表、列、行，甚至表和实体之间的关系。并使用结构化查询语言或SQL</p><p id="faee" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">非关系数据库</p><p id="5175" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">它没有行和列的表格模式。基于数据结构，如文档和集合。</p><p id="ac62" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">对于本文的主题，我们就不深入Mongo DB了。但是我们将创建一个restful API，然后我们将编写一些CRUD操作。最后，我们将在应用程序中使用Azure Mongo DB。</p><p id="fded" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">因为没有足够的源代码，我们将从安装MongoDB到MacOs开始</p><p id="0d19" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">对于安装，我们将使用自制。所以要先装家酿。</p><p id="e2bf" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们需要在macos终端上运行这个命令</p><p id="48d6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">/bin/bash-c " $(curl-fsSL https://raw . githubusercontent . com/home brew/install/HEAD/install . sh)"</p><p id="780d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">安装完成后。我们可以开始安装MongoDB了。所以我们可以从官方页面开始按照这些步骤来做。安装完成后，我们需要在本地计算机上运行MongoDB。</p><p id="4e4b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">要创建MongoDB，我们需要一个额外的工具。也就是MongoDB罗盘。可以从其<a class="ae iu" href="https://www.mongodb.com/try/download/compass" rel="noopener ugc nofollow" target="_blank">页面</a>下载。</p><p id="4b28" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果我们能打开MongoDB指南针，就会有连接按钮。点击这个按钮后，它将连接我们的本地MongoDB。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jt"><img src="../Images/0e11d9a073dbbe679683cd42c23ce253.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vA6x1QYGjelDFLJIgSQIbw.png"/></div></div></figure><p id="4b27" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们应该单击CreateDatabase按钮。然后它会询问数据库名和集合名。对于这个例子，我将创建UserDb和Users集合。</p><p id="9e73" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然后我们需要选择我们创建的数据库。我们会看到我们的收藏。使用添加数据按钮。我们可以打开插入文档屏幕。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jy"><img src="../Images/3661eaf1cc270115f3ff1e01f0556ff5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zKrr7hGcYQg4zhPbEu4FtA.png"/></div></div></figure><p id="2b7d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">但是因为我们将使用rest API来提供我们的数据库，所以我们可以删除数据。</p><p id="0b34" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">要在我们的项目中使用MongoDB，我们需要安装MongoDb。NuGet的驱动程序包。</p><p id="4077" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然后，我们需要打开AppSettings文件，我们应该创建ConnectionString。您可以从指南针应用程序中了解您的端口号。您的邮政编号必须与您的端口号相同。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jz"><img src="../Images/e2365119a078993888f0a3dd06754932.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*330-y0b6WOisFtzlyOwz-A.png"/></div></div></figure><p id="d192" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们将创建一个服务来处理CRUD操作。</p><p id="34f4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">但在此之前，我们可以看看如何查询MongoDB</p><p id="2625" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">GetAllUsers</strong>:Find(u =&gt;true)。ToListAsync()；<br/><strong class="ix hj">getuser byid</strong>:Find(u =&gt;u . id = = id)。FirstOrDefaultAsync()；<br/><strong class="ix hj">AddUser</strong>:insertone async(用户)；<br/>T13】update user:ReplaceOneAsync(u =&gt;u . id = = id，user)；<br/><strong class="ix hj">DeleteUser:</strong>DeleteOneAsync(u =&gt;u . id = = id)；</p><p id="a6f9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">有了这些信息，我们可以创建用户服务</p><figure class="ju jv jw jx fd ij"><div class="bz dy l di"><div class="ka kb l"/></div></figure><figure class="ju jv jw jx fd ij"><div class="bz dy l di"><div class="ka kb l"/></div></figure><p id="ae79" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在我们可以从控制器使用这个服务。</p><figure class="ju jv jw jx fd ij"><div class="bz dy l di"><div class="ka kb l"/></div></figure><p id="338c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在我们可以试着运行这个项目。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kc"><img src="../Images/0dbae575a1f3c59809525170920bb09e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8RNMNlJRd5zo2PgyaB_Bwg.png"/></div></div></figure><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kd"><img src="../Images/6f07ccca54d78ea009eca60e8b10fbeb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_IjVR9QblDdlmlsnP0dHfg.png"/></div></div></figure><p id="f51c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">很容易不是吗？</p><p id="a33a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在让我们在Azure Cosmos中使用mongo。为什么是宇宙？因为cosmos不是SQL，它可以和MongoDB一起工作。</p><p id="c22d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">从Azure门户搜索azure cosmos，然后选择Azure Cosmos DB API for MongoDB</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ke"><img src="../Images/1bf853219b5cbcac1aa2c162fb2aa96f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rDRLXOHazlBGSvqpfC0WwA.png"/></div></div></figure><p id="a34a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然后单击创建，然后选择无服务器选项，因为它更便宜</p><p id="55e4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">创建需要一些时间。创建过程完成后，转到资源，然后选择数据资源管理器。从该页面中选择新建收藏。设置数据库名和表名，然后创建一个ok按钮。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kf"><img src="../Images/6876166e9324486d6d40e5977d64d194.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hnwt_qShQUI2cEibZ_sJDQ.png"/></div></div></figure><p id="4de3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">从侧面，菜单选择位于设置部分的连接字符串。</p><p id="df54" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">从设置中复制主连接字符串。并将我们之前编写的连接字符串更改为appSettings文件。</p><p id="0a33" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果你再次运行这个项目。您将在azure cosmos DB数据浏览器中看到数据！</p><p id="9ef3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">而这就是本文的结尾！</p><p id="74a2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">祝你有美好的一天…</p></div></div>    
</body>
</html>