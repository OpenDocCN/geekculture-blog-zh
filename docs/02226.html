<html>
<head>
<title>Create Water Drop Effect in HTML and CSS with AnimeJS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用AnimeJS在HTML和CSS中创建水滴效果</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/create-water-drop-effect-in-html-and-css-with-animejs-27517fe64219?source=collection_archive---------23-----------------------#2021-05-07">https://medium.com/geekculture/create-water-drop-effect-in-html-and-css-with-animejs-27517fe64219?source=collection_archive---------23-----------------------#2021-05-07</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/b30579994599bef4c3df9cdcce209c84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CVy4ve7rfPfgaqhVoRLPLQ.png"/></div></div></figure><p id="2963" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">本教程我们需要的是:</p><ul class=""><li id="ffd9" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated">HTML和CSS</li><li id="ef6e" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">AnimeJS</li><li id="e7bb" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">你选择的编辑</li></ul><p id="3bdb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我下载了所有资产，并将它们放在我的资产目录中，因此我的目录将如下所示:</p><ul class=""><li id="c8df" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated">动画/资产/CSS/CSS-文件-此处</li><li id="dcb2" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">动画/资产/js/js-文件-此处</li></ul><p id="ddf6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后我在我的assets文件夹中创建了index.html文件和styles.css，然后在header标签中链接了所有的css，在body下面链接了所有的js文件。</p><p id="1a53" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我的index.html是这样的:</p><pre class="kc kd ke kf fd kg kh ki kj aw kk bi"><span id="4fdb" class="kl km hi kh b fi kn ko l kp kq">&lt;!doctype html&gt;<br/>&lt;html lang="en"&gt;<br/>&lt;head&gt;<br/>    &lt;meta charset="UTF-8"&gt;<br/>    &lt;meta name="viewport"<br/>          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"&gt;<br/>    &lt;meta http-equiv="X-UA-Compatible" content="ie=edge"&gt;<br/>    &lt;title&gt;Home - Programmer101N&lt;/title&gt;<br/>    &lt;link rel="stylesheet" href="assets/css/styles.css"&gt;<br/>&lt;/head&gt;<br/>&lt;body&gt;</span><span id="5740" class="kl km hi kh b fi kr ko l kp kq">&lt;/body&gt;<br/>&lt;script src="assets/js/anime.js"&gt;&lt;/script&gt;<br/>&lt;/html&gt;</span></pre><p id="7b59" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在让我们用HTML创建画布。我将创建canvas元素，并将其id设置为canvas。</p><pre class="kc kd ke kf fd kg kh ki kj aw kk bi"><span id="3463" class="kl km hi kh b fi kn ko l kp kq">&lt;body&gt;<br/>  &lt;canvas id="canvas"&gt; &lt;/canvas&gt;<br/>&lt;/body&gt;</span></pre><p id="d719" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在让我们在style.css中创建我们的样式。你可以复制我的样式或者创建你自己的样式。</p><pre class="kc kd ke kf fd kg kh ki kj aw kk bi"><span id="5ab0" class="kl km hi kh b fi kn ko l kp kq">html, body{<br/>  height: 100vh;<br/>  width: 100vw;<br/>  display: flex;<br/>  margin: 0;<br/>  padding: 0;<br/>}</span><span id="0e7b" class="kl km hi kh b fi kr ko l kp kq">#canvas{<br/>  background-color: transparent;<br/>}</span></pre><p id="b60e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在我们的CSS部分完成了，让我们创建我们的脚本。首先，我将获得画布和它与DOM的上下文，并将其高度和宽度设置为我们的窗口高度和宽度。我将背景色设置为深蓝色。</p><pre class="kc kd ke kf fd kg kh ki kj aw kk bi"><span id="9ec9" class="kl km hi kh b fi kn ko l kp kq">const canvas = document.getElementById("canvas");<br/>const c = canvas.getContext("2d");<br/>canvas.width = window.innerWidth;<br/>canvas.height = window.innerHeight;<br/>canvas.style.backgroundColor = "#01C5FF";</span></pre><p id="424c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，我添加了一个事件监听器来调整事件大小，每次窗口高度或宽度改变时都会调整画布大小。</p><pre class="kc kd ke kf fd kg kh ki kj aw kk bi"><span id="72c8" class="kl km hi kh b fi kn ko l kp kq">window.addEventListener("resize", () =&gt; {<br/>  canvas.width = window.innerWidth;<br/>  canvas.height = window.innerHeight;<br/>});</span></pre><p id="0729" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">首先我要创建一个函数createDrop，它将创建水滴并返回它。</p><pre class="kc kd ke kf fd kg kh ki kj aw kk bi"><span id="abd4" class="kl km hi kh b fi kn ko l kp kq">function createDrop(x, y) {<br/>  const drop = {<br/>    x: x,<br/>    y: y - 150,<br/>    endPos: {<br/>      x,<br/>      y,<br/>      dropForm: 30,<br/>    },<br/>    dropForm: 3,<br/>    opacity: 0,<br/>    draw: () =&gt; {<br/>      c.beginPath();<br/>      c.fillStyle = `rgba(255, 255, 255, ${drop.opacity})`;<br/>      c.moveTo(drop.x - drop.dropForm, drop.y);<br/>      c.lineTo(drop.x, drop.y - drop.endPos.dropForm * 1.4);<br/>      c.lineTo(drop.x + drop.dropForm, drop.y);<br/>      c.arc(drop.x, drop.y, drop.dropForm, 0, Math.PI);<br/>      c.closePath();<br/>      c.fill();<br/>    },<br/>  };<br/>  return drop;<br/>}</span></pre><p id="9a89" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在创建一个函数clickEffect，当我们的水滴击中时它会产生波浪，它将调用animate函数。</p><pre class="kc kd ke kf fd kg kh ki kj aw kk bi"><span id="2e2f" class="kl km hi kh b fi kn ko l kp kq">function clickEffect(x, y) {<br/>  let strokeWidth = 5;<br/>  const animatables = [];</span><span id="755d" class="kl km hi kh b fi kr ko l kp kq">  for (let j = 0; j &lt; 3; j++) {<br/>    const circle = {<br/>      x: x,<br/>      y: y,<br/>      radius: 0,<br/>      strokeWidth: strokeWidth,<br/>      draw: () =&gt; {<br/>        c.beginPath();<br/>        c.arc(<br/>          circle.x,<br/>          circle.y,<br/>          circle.radius,<br/>          0,<br/>          Math.PI * 2,<br/>          true<br/>        );<br/>        c.lineWidth = circle.strokeWidth;<br/>        c.stroke();<br/>      },<br/>    };<br/>    strokeWidth -= 2;<br/>    animatables.push(circle);<br/>  }</span><span id="c279" class="kl km hi kh b fi kr ko l kp kq">  animate(x, y, animatables);<br/>}</span></pre><p id="2ddf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在创建一个动画函数，它将使所有东西都有动画效果。</p><pre class="kc kd ke kf fd kg kh ki kj aw kk bi"><span id="ad67" class="kl km hi kh b fi kn ko l kp kq">function animate(x, y, animatables) {<br/>  const tl = new anime.timeline({<br/>    duration: 7000,<br/>    easing: "easeOutExpo",<br/>  });</span><span id="f299" class="kl km hi kh b fi kr ko l kp kq">  tl.add({<br/>    targets: createDrop(x, y),<br/>    y: (p) =&gt; {<br/>      return p.endPos.y;<br/>    },<br/>    dropForm: (p) =&gt; {<br/>      return p.endPos.dropForm;<br/>    },<br/>    opacity: [0, 1, 0],<br/>    duration: 1500,<br/>    update: (e) =&gt; {<br/>      e.animatables.forEach((a) =&gt; {<br/>        a.target.draw();<br/>      });<br/>    },<br/>    easing: "easeInExpo",<br/>  });</span><span id="6275" class="kl km hi kh b fi kr ko l kp kq">  tl.add({<br/>    targets: animatables,<br/>    radius: window.innerWidth * 1.125,<br/>    update: (e) =&gt; {<br/>      e.animatables.forEach((a) =&gt; {<br/>        a.target.draw();<br/>      });<br/>    },<br/>    delay: anime.stagger(150),<br/>  });<br/>}</span></pre><p id="eca9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">创建一个渲染变量，它将在每次更新时清除所有内容。</p><pre class="kc kd ke kf fd kg kh ki kj aw kk bi"><span id="2e42" class="kl km hi kh b fi kn ko l kp kq">const render = anime({<br/>  duration: Infinity,<br/>  update: () =&gt; {<br/>    c.clearRect(0, 0, canvas.width, canvas.height);<br/>  },<br/>});</span></pre><p id="4b9b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在添加事件监听器到触摸事件或点击事件，当点击注册并设置渲染状态为播放时，在坐标上调用clickEffect函数。</p><pre class="kc kd ke kf fd kg kh ki kj aw kk bi"><span id="c8f1" class="kl km hi kh b fi kn ko l kp kq">document.addEventListener(<br/>  "ontouchstart" in window || navigator.msMaxTouchPoints<br/>    ? "touchstart"<br/>    : "mousedown",<br/>  (e) =&gt; {<br/>    clickEffect(e.clientX, e.clientY);<br/>    render.play();<br/>  }<br/>);</span></pre><p id="8d29" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们的效果现在完成了！</p><figure class="kc kd ke kf fd ij er es paragraph-image"><div class="er es ks"><img src="../Images/4187bd7587cd3331f1cbdd40a9bfadf8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/0*Co6m1f8euEqUQy7Y.gif"/></div></figure><p id="8eaa" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您可以从我的Github下载这个源代码。</p><p id="d273" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae kt" href="https://github.com/Programmer101N/create-water-drop-effect" rel="noopener ugc nofollow" target="_blank">在Github上访问该项目</a></p><p id="a3e5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">访问我的博客，在这里我张贴所有这些东西。<a class="ae kt" href="https://programmer101n.com" rel="noopener ugc nofollow" target="_blank">链接到博客</a>。</p></div></div>    
</body>
</html>