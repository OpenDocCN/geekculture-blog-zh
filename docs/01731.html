<html>
<head>
<title>The Ruby Unbundled Series: Why You Should Check Out Hotwire Now</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Ruby Unbundled系列:为什么你现在应该看看Hotwire</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/the-ruby-unbundled-series-why-you-should-check-out-hotwire-now-da34088db2c7?source=collection_archive---------18-----------------------#2021-04-21">https://medium.com/geekculture/the-ruby-unbundled-series-why-you-should-check-out-hotwire-now-da34088db2c7?source=collection_archive---------18-----------------------#2021-04-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="85c5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Hotwire是Ruby on Rails web应用程序开发的真正变革者。原因如下。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/86119020094dd7e8367e3e6afeff5c8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*vYjAZasY9D5KdfY-"/></div></div></figure><p id="c084" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">埃里克·麦克林在<a class="ae jp" href="https://unsplash.com/s/photos/steal-car?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p><p id="6fb6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从前，我可以用Ruby和Rails写代码。生活很美好。然后，单页应用程序(SPA)或渐进式网络应用程序(PWA)的暴政开始了，我被迫加入JavaScript框架。现在，我面对的是两个不同的世界。问题是我不想离开我的Ruby世界。我在那里很开心。</p><p id="0538" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">团队需要更多的技能。曾经我们用一种技术来统治他们，现在有两种了。实际上，不止两个。这个月的JavaScript框架随着时间而变化。我记得我第一次使用AngularJS。这是势不可挡的，我想，这就是web开发的现状？一定有更好的方法。</p><p id="fccc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">React和Vue.js是边际改进，但没有动针。JavaScript本身没有任何问题，但是正如<a class="ae jp" href="https://youtu.be/0pWILPpTcOs" rel="noopener ugc nofollow" target="_blank">拉胡尔·苏布拉马年</a>如此雄辩地指出的那样，我为什么要离开我的“Ruby和Rails幸福泡泡”呢？</p><p id="7149" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为什么首先要使用JavaScript？因为我们需要一个页面事件来动态更新我们的内容，而不需要刷新整个浏览器。嗯，<a class="ae jp" href="https://hotwire.dev/" rel="noopener ugc nofollow" target="_blank"> Hotwire </a>的基本前提是在Ruby中通过网络调用这些HTML的服务器来完成这个任务(Hotwire这个名字的基础)。JavaScript库提供了管道，我们继续在我们的Rails幸福泡泡中编码。</p><p id="7457" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">听起来很棒，对吧？100%同意。因此，在过去一周RailsConf 2021的一些会谈的激励下，我决定乘坐Hotwire兜一圈。</p><h1 id="b603" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">一个热线安装惊喜</h1><p id="6397" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">Hotwire网站列出了组成框架的三个组件，但是Turbo Frames和Turbo Streams是您将主要使用的组件。对于那些仍然需要JavaScript的场合，Stimulus将帮助您做到这一点。将这一行添加到您的gem文件中可以获得这些组件。</p><pre class="je jf jg jh fd kt ku kv kw aw kx bi"><span id="7a8c" class="ky jr hi ku b fi kz la l lb lc">gem 'hotwire-rails'</span></pre><p id="2acd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Strada是第三个组件，但目前还没有太多关于它的信息。它将支持移动应用程序开发。</p><p id="6e49" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有两个安装命令需要运行。首先是标准捆绑安装，然后是特定的热线安装。</p><pre class="je jf jg jh fd kt ku kv kw aw kx bi"><span id="5c1b" class="ky jr hi ku b fi kz la l lb lc">bin/bundle install<br/>bin/rails hotwire:install</span></pre><p id="4a99" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您正在迁移一个现有的应用程序，至少在我的情况下，我在这一点上遇到了意想不到的惊喜。Hotwise安装后，表单提交立即停止工作。我对此感到惊讶，但发现对默认应用程序布局的更改修改了它，因此默认情况下请求会得到Turbo Streams响应。</p><p id="70f5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我的应用程序仍然像以前一样返回相同的有效HTML，但是还没有Turbo Frames或Streams标签。因此，客户端基本上忽略了返回给它的完全有效的内容。</p><p id="17b1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在最初的恐慌消退后，我适应了，并能够毫不费力地迁移我的应用程序。</p><h1 id="1a4a" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">30秒后启动热线</h1><p id="619f" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">使用Hotwire需要理解的关键概念是:</p><ol class=""><li id="9ad9" class="ld le hi ih b ii ij im in iq lf iu lg iy lh jc li lj lk ll bi translated">控制器响应针对由Turbo帧或流元素标识的页面的命名片段。</li><li id="908f" class="ld le hi ih b ii lm im ln iq lo iu lp iy lq jc li lj lk ll bi translated">Turbo Frame是页面的一个部分(想想Rails管理的iframe ),它维护自己的导航上下文。相比之下，Turbo Streams响应可以包含许多片段，用于更新页面的多个任意部分。</li></ol><p id="185c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，最简单的应用程序迁移是将每个现有的html.erb封装在Turbo Frame标签中。这有点类似于涡轮驱动，我之前没有列出这一组件，因为我怀疑它会被用得太多。它将您的整个页面视为一个逻辑框架，因此当您消除页面重新加载闪烁时，您仍然总是重新生成整个HTML内容以通过网络发送。</p><p id="ccbc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Turbo帧和流更符合AJAX模型，在AJAX模型中，您可以请求一些数据并更新相关的页面元素。不同之处在于，在Hotwire中，Rails服务器会返回HTML片段，库会为您动态更新这些片段，而不是在JavaScript中自己管理这些片段。</p><h1 id="ff07" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">回到我的幸福泡泡里</h1><p id="ec53" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">“游戏规则改变者”这个词在这个行业被过度使用了。现在我觉得有趣的是，它经常不必要地出现，因此我发现自己在寻找它的出现。但我确实觉得热线范例是一个游戏改变者。我为什么这么说？</p><p id="b5c3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">主要使用Ruby/Rails编写响应性SPA/PWA的能力是惊人的。从整个页面的控制器响应到片段的控制器响应是一个轻微的心理转变，但是一旦你相应地对你的动作建模，再次创建web应用程序真的是非常容易和有趣的。不需要处理JavaScript框架是我最喜欢的部分。但我更喜欢从另一个角度来看。能够在构建现代web应用程序的同时留在Ruby中是值得的。</p><p id="84a5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这感觉像是一个新的框架/库/组件，它将真正提高生产力，而不是增加许多项目最终成为的技术膨胀。这是一个革命性的变化。有时候少即是多，这就是一个很好的例子。</p><h1 id="5c6f" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">让我们看一些实际的代码</h1><p id="eae6" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">这是我的<a class="ae jp" href="https://github.com/engineyard/eyk-app-templates/tree/webapp-features" rel="noopener ugc nofollow" target="_blank">即时投票应用程序</a>的一个截屏，上面标注了将由Turbo Streams更新的命名div。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lr"><img src="../Images/7eebe1e812344c384431d6adea3f11cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:786/0*wiWkgcbU028oMb0B"/></div></figure><p id="2004" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此页面最初是使用轮询部分呈现的。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ls"><img src="../Images/467d87614a6d94a6a0cbc51005748a05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*zZjgxOVBDVO6A9m7"/></div></div></figure><p id="fe48" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">表单提交通常由PollController处理，但是使用了新的poll/submit，turbo-streams.erb，而不是呈现页面的poll/submit.html.erb，请注意，它为我们命名的div提供了更新的html。它不仅更新了表单起源的div，还更新了另外两个div。因此，Turbo Streams为您提供了最大的灵活性。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lt"><img src="../Images/77ce527bf44c9cefcfceb4e19030b9cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*P8eijS4T7iNPDKnm"/></div></div></figure><p id="9418" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是控制器请求的响应。</p><pre class="je jf jg jh fd kt ku kv kw aw kx bi"><span id="8b79" class="ky jr hi ku b fi kz la l lb lc">&lt;turbo-stream action="replace" target="poll_title"&gt;&lt;template&gt;<br/> &amp;nbsp;You chose &lt;span style="font-weight: bold"&gt;Gaming&lt;/span&gt;.<br/> Overall results:&lt;br/&gt;<br/>&lt;/template&gt;&lt;/turbo-stream&gt;<br/>&lt;turbo-stream action="replace" target="poll_message"&gt;<br/> &lt;template&gt;&lt;/template&gt;<br/>&lt;/turbo-stream&gt;<br/>&lt;turbo-stream action="replace" target="poll_body"&gt;&lt;template&gt;<br/> &lt;div class="panel-body"&gt;<br/> &lt;ul class="list-group"&gt;<br/> &lt;li class="list-group-item"&gt;<br/> &lt;div&gt;&lt;label&gt;Netflix: 494&lt;/label&gt;&lt;/div&gt;<br/> &lt;/li&gt;<br/> &lt;li class="list-group-item"&gt;<br/> &lt;div&gt;&lt;label&gt;Gaming: 363&lt;/label&gt;&lt;/div&gt;<br/> &lt;/li&gt;<br/> &lt;li class="list-group-item"&gt;<br/> &lt;div&gt;&lt;label&gt;Dining: 517&lt;/label&gt;&lt;/div&gt;<br/> &lt;/li&gt;<br/> &lt;li class="list-group-item"&gt;<br/> &lt;div&gt;&lt;label&gt;NightClub: 800&lt;/label&gt;&lt;/div&gt;<br/> &lt;/li&gt;<br/> &lt;/ul&gt;<br/> &lt;/div&gt;<br/>&lt;/template&gt;&lt;/turbo-stream&gt;<br/>&lt;turbo-stream action="replace" target="poll_footer"&gt;&lt;template&gt;<br/> &lt;div class="panel-footer text-center"&gt;Thank you for participating!&lt;/div&gt;<br/>&lt;/template&gt;&lt;/turbo-stream&gt;</span></pre><p id="97dc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">由于Hotwire库，动态页面更新完成后，结果是这样的。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lu"><img src="../Images/8c46485ec5d21a2d5fdc6edc6df23129.png" data-original-src="https://miro.medium.com/v2/resize:fit:632/0*c0_6xM0q8z3u55Gq"/></div></figure><p id="44d5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我还在关于这个示例应用程序的文章下面添加了一个评论部分，使用Turbo Frame来展示这两种方法之间的区别。我的投票页面更改是本地化的，因此可以很容易地使用任何一种机制来实现。您可以想象带有购物车总额或其他信息的横幅与使用Turbo Streams更新的表单元素完全分离。</p><p id="4ef0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我再说一遍，我不会轻易使用这个术语。Hotwire确实是一个游戏改变者，我鼓励你现在就去看看，</p><p id="0f8b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将在以后的文章中探讨刺激措施。在Twitter @ Darren broemmer上关注我，这样你就不会错过Ruby Unbundled的任何一集。享受这些热线应用程序的乐趣！</p></div><div class="ab cl lv lw gp lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="hb hc hd he hf"><p id="c171" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="mc">最初发表于</em><a class="ae jp" href="https://blog.engineyard.com/the-ruby-unbundled-series-why-you-should-check-out-hotwire-now" rel="noopener ugc nofollow" target="_blank">T5【https://blog.engineyard.com】</a><em class="mc">。</em></p></div></div>    
</body>
</html>