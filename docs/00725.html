<html>
<head>
<title>React Hooks and Why You Should Use Them</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React挂钩以及为什么应该使用它们</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/react-hooks-and-why-you-should-use-them-ab92ee033e43?source=collection_archive---------16-----------------------#2021-03-11">https://medium.com/geekculture/react-hooks-and-why-you-should-use-them-ab92ee033e43?source=collection_archive---------16-----------------------#2021-03-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="a69d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">什么是钩子，我为什么要用它？React文档将钩子定义为<em class="jd">一个特殊的函数，可以让你“挂钩”React特性。</em>钩子是完全可选的，不会取代任何React概念，相反，它们为React概念提供了一个更直接的API，如props、state、context、refs和lifecycle。钩子不仅更容易使用和测试，而且对于开发人员编写和阅读来说，它们也使代码更干净、更清晰。</p><p id="1a98" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要学习的两个大钩子是状态钩子和效果钩子。状态挂钩允许您向功能组件添加本地状态。效果挂钩增加了向功能组件添加“副作用”的能力；副作用与类生命周期组件的目的相同，但是在单个API中。类组件可能会因代码过多而变得不堪重负，而且对于它们的用途来说似乎太长了。</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="fe58" class="jn jo hi jj b fi jp jq l jr js">import React, { Component } from 'react';</span><span id="fcc3" class="jn jo hi jj b fi jt jq l jr js">class Counter <em class="jd">extends</em> Component {</span><span id="d29c" class="jn jo hi jj b fi jt jq l jr js">constructor(props) {</span><span id="7e26" class="jn jo hi jj b fi jt jq l jr js">super(props);</span><span id="c893" class="jn jo hi jj b fi jt jq l jr js">this.state = {</span><span id="b428" class="jn jo hi jj b fi jt jq l jr js">count: 0</span><span id="7e49" class="jn jo hi jj b fi jt jq l jr js">}</span><span id="f1c0" class="jn jo hi jj b fi jt jq l jr js">this.handleClick = this.handleClick.bind(this)</span><span id="7e3c" class="jn jo hi jj b fi jt jq l jr js">}</span><span id="2be7" class="jn jo hi jj b fi jt jq l jr js">handleClick(e){</span><span id="aef8" class="jn jo hi jj b fi jt jq l jr js">e.preventDefault();</span><span id="6e05" class="jn jo hi jj b fi jt jq l jr js">this.setState({count: this.state.count + 1})</span><span id="1ac4" class="jn jo hi jj b fi jt jq l jr js">}</span><span id="cca5" class="jn jo hi jj b fi jt jq l jr js">render() {</span><span id="f6ac" class="jn jo hi jj b fi jt jq l jr js">return (</span><span id="f01a" class="jn jo hi jj b fi jt jq l jr js">&lt;div&gt;</span><span id="6d5b" class="jn jo hi jj b fi jt jq l jr js">&lt;p&gt;The count is: {this.state.count}&lt;/p&gt;</span><span id="39e4" class="jn jo hi jj b fi jt jq l jr js">&lt;button <em class="jd">onClick</em>={this.handleClick}&gt;Click me&lt;/button&gt;</span><span id="d5e9" class="jn jo hi jj b fi jt jq l jr js">&lt;/div&gt;</span><span id="532e" class="jn jo hi jj b fi jt jq l jr js">)</span><span id="6668" class="jn jo hi jj b fi jt jq l jr js">}</span><span id="3981" class="jn jo hi jj b fi jt jq l jr js">}</span><span id="d01d" class="jn jo hi jj b fi jt jq l jr js"><em class="jd">export</em> default Counter;</span></pre><p id="f3b2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过使用钩子，这个类组件现在可以用更少的代码行来编写，这样更容易理解，也更简洁。上面的代码可以用更少的代码行编写，用下面的钩子写得更紧凑。</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="26e0" class="jn jo hi jj b fi jp jq l jr js">import React, { useState } from 'react';</span><span id="7c3d" class="jn jo hi jj b fi jt jq l jr js">function Counter() {</span><span id="365a" class="jn jo hi jj b fi jt jq l jr js">const [count, setCount] = useState(0)</span><span id="a693" class="jn jo hi jj b fi jt jq l jr js">return (</span><span id="1502" class="jn jo hi jj b fi jt jq l jr js">&lt;div&gt;</span><span id="c4a0" class="jn jo hi jj b fi jt jq l jr js">&lt;p&gt;The count is: {count} &lt;/p&gt;</span><span id="4e20" class="jn jo hi jj b fi jt jq l jr js">&lt;button <em class="jd">onClick</em>={() =&gt; setCount(count + 1)}&gt;Click me&lt;/button&gt;</span><span id="543e" class="jn jo hi jj b fi jt jq l jr js">&lt;/div&gt;</span><span id="677d" class="jn jo hi jj b fi jt jq l jr js">)</span><span id="716f" class="jn jo hi jj b fi jt jq l jr js">}</span><span id="38bf" class="jn jo hi jj b fi jt jq l jr js"><em class="jd">export</em> default Counter;</span></pre><p id="83d2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用钩子使得代码和有状态逻辑可重用，一个巨大的好处是它们不会像高阶组件一样在DOM中创建另一个元素，从而摆脱了hoc可能带来的“包装器地狱”。开发人员的目标是通过在编译时消除死代码来提高性能，让钩子在未来的React优化中更好地工作。JavaScript需要编译的代码越少，意味着运行时需要执行的代码就越少。这就是为什么效果钩子可能是你应该学习的一个钩子。</p><p id="981a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Effect hook不仅结合了重复的代码并提高了性能，它还帮助开发人员避免了生命周期方法的常见错误。钩子帮助开发者避免不恰当地使用<em class="jd">组件更新</em>生命周期方法。默认情况下，UseEffect在第一次渲染后和每次更新后都运行。它总是在应用下一个效果之前清除之前的效果。</p><p id="ab2f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">尽管“清理”或在每次渲染后应用效果可能会导致性能问题。useEffect挂钩允许您传递第二个参数来比较从上一个渲染传递到下一个渲染的内容。如果在下一次渲染和上一次渲染之间传递到参数中的项目是相同的，React将跳过效果，从而节省一些时间并优化代码。</p><p id="05fe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">自定义钩子是减少重复代码和通过创建“第三方”函数在两个JavaScript函数之间共享逻辑的好方法。React文档将自定义钩子定义为<em class="jd">，这是一个JavaScript函数，其名称以</em> <code class="du ju jv jw jj b"><em class="jd">use</em></code> <em class="jd">开头，并且可以调用其他钩子。</em>以前在组件之间共享有状态逻辑的两种流行方式是渲染道具和hoc。钩子解决了hoc和渲染道具的许多问题，但钩子不会强迫你向“树”添加组件，也不会强迫你进入包装器或回调地狱。</p><p id="e252" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在应用程序中使用钩子时，只有几条牢不可破的规则。</p><ul class=""><li id="f10e" class="jx jy hi ih b ii ij im in iq jz iu ka iy kb jc kc kd ke kf bi translated"><strong class="ih hj">只调用顶层的钩子</strong></li></ul><p id="5ad8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">不要从条件、嵌套函数或循环内部调用钩子。遵循这一规则将有助于确保每次渲染都以相同的顺序调用钩子，这使得React能够在多个<em class="jd"> useState </em>和<em class="jd"> useEffect </em>调用之间保持钩子的状态。React依赖于钩子被调用的顺序来知道哪个状态对应于哪个调用。</p><ul class=""><li id="0eb5" class="jx jy hi ih b ii ij im in iq jz iu ka iy kb jc kc kd ke kf bi translated"><strong class="ih hj">仅从REACT函数调用钩子</strong></li></ul><p id="a0e7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">不要从JavaScript函数中调用钩子，只从React函数组件和自定义钩子中调用。通过将有状态逻辑放在清晰可见的源代码中，您只会使代码更易读、更易理解。</p><p id="b581" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你发现自己难以遵循这些规则，React发布了一个名为eslint-plugin-react-hooks的ESLint插件来强制执行这些规则。该插件默认包含在Create-React-App中。如果您选择了不同的React创建路线，您可以通过运行NPM install eslint-plugin-React-hooks—save-dev轻松添加插件。</p><p id="7dde" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">钩子在这里不是用来代替React中的类的，它们仅仅是一种可选的方式来编写它们，并显示React的真实本质，它是功能性的。React中的类很容易在代码中犯错误和产生bug，而钩子的目的是让开发人员更容易解决这些bug，并使代码更容易重用。当在单个组件上使用多个定制钩子时，钩子没有缺点。</p><h1 id="7920" class="kg jo hi bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">参考</h1><ul class=""><li id="2dbb" class="jx jy hi ih b ii ld im le iq lf iu lg iy lh jc kc kd ke kf bi translated">react . js Docs—<a class="ae li" href="https://reactjs.org/docs/hooks-intro.html" rel="noopener ugc nofollow" target="_blank">https://reactjs.org/docs/hooks-intro.html</a></li><li id="2a1f" class="jx jy hi ih b ii lj im lk iq ll iu lm iy ln jc kc kd ke kf bi translated">React Hooks与旧的可重用逻辑方法的优点和比较，作者mate usz Roth-<a class="ae li" rel="noopener" href="/@mateuszroth/react-hooks-advantages-and-comparison-to-older-reusable-logic-approaches-in-short-f424c9899cb5">https://medium . com/@ mate usz Roth/react-Hooks-advantage-and-comparison-to-older-reusable-logic-approach-in-short-f424c 9899 cb5</a></li><li id="094b" class="jx jy hi ih b ii lj im lk iq ll iu lm iy ln jc kc kd ke kf bi translated">React Hooks的最佳实践作者David Aden eye—<a class="ae li" href="https://www.smashingmagazine.com/2020/04/react-hooks-best-practices/" rel="noopener ugc nofollow" target="_blank">https://www . smashingmagazine . com/2020/04/React-Hooks-best-Practices/</a></li></ul></div></div>    
</body>
</html>