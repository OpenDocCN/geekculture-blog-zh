<html>
<head>
<title>5 Quick Tips for Web Scraping in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中Web抓取的5个快速技巧</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/5-quick-tips-for-web-scraping-in-python-5aa26f22af3b?source=collection_archive---------30-----------------------#2021-05-06">https://medium.com/geekculture/5-quick-tips-for-web-scraping-in-python-5aa26f22af3b?source=collection_archive---------30-----------------------#2021-05-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="0fc8" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">避免网络抓取的痛苦陷阱的方法</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/f2bc025c2fa7cdaea5aeef6c6c769e13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-uOd4uP3LIABwGdTtolFkA.jpeg"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Photo by <a class="ae jn" href="https://unsplash.com/@nate_dumlao?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Nathan Dumlao</a> on <a class="ae jn" href="https://unsplash.com/s/photos/spider-web?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="9a3d" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated"><strong class="ak">简介</strong></h1><p id="6833" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">无论是为了工作还是为了娱乐，网页抓取是每个数据科学家都应该拥有的一项关键技能。它打开了通向无限量数据的大门，超出了你在Kaggle或其他开放数据网站上所能找到的限制。但是最好的部分是，当你在小范围内获得有效和自主的抓取能力时，你将能够很容易地将其转化为更大的抓取项目。</p><p id="910b" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">利用这些技巧，我从搜集约1000篇<a class="ae jn" href="https://kokkeanshern.medium.com/analyzing-rock-climbing-shoe-amazon-reviews-cb3e12c91a67" rel="noopener">亚马逊评论进行情绪分析</a>，到搜集约3万篇新冠肺炎新闻文章进行疫情期间<a class="ae jn" href="https://www.linkedin.com/posts/keanshernkok_paper-abstract-activity-6787007234435088384-Ai0h" rel="noopener ugc nofollow" target="_blank">政府与公民互动的研究。请注意，我是使用Python中的Selenium库进行抓取的。</a></p><h1 id="0291" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">提示1-定义你的需求</h1><p id="d4f3" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">停下来。不要打开你的IDE。关闭所有打开的网页抓取教程标签。首先，问自己:“<em class="lh">我想搜集什么信息？”</em>。例如，当我收集亚马逊评论时，我很早就决定要收集三个变量:(1)产品名称，(2)产品价格和(3)评论。你不会总是需要很多变量来做分析。通过一些基本的功能转换，你可以将“评论”转化为“评论数量”(每件产品)、“肯定率”(VADER情绪分析)等。</p><h1 id="a076" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">技巧2-分析网站结构</h1><p id="8dbe" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">现在你已经定义了你需要的信息，是时候打开网站了。从进入主页开始。检查网站的按钮和功能。记下导航在网站上是如何工作的(<em class="lh">即</em>)这个按钮会把我带到哪个页面？).接下来，试着确定你需要的信息在网站的什么地方。通常，你会发现你需要的信息分散在不同的网页上。对于我来说，产品名称和价格是在它们各自的产品页面上找到的，而评论是在一个链接到相关产品页面的独立评论页面上找到的。</p><p id="9be4" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">下面我举一个实际的例子:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es li"><img src="../Images/90a55f8b1d9b633ba0b5f75339e31dd1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x99ZttwHRW54zwTdpzbvyg.jpeg"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Illustration by me</figcaption></figure><p id="f53a" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">现在你需要弄清楚如何到达每个网页。一旦你知道如何链接网页，你就有了自己的计划。你会在每个相关页面之间遇到许多中间页面。我的刮痧计划是这样的:</p><p id="2730" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">第一步:进入亚马逊主页。</p><p id="aaeb" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">第二步:搜索产品品牌(导向结果页面)。</p><p id="d15d" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">第三步:结果页面包含多个产品页面的链接。抓取所有这些链接并存储在一个文件中。</p><p id="c982" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">步骤4:迭代打开文件中的每个链接。刮产品名称和价格。单击“查看所有评论”按钮(打开评论页面)。</p><p id="e17e" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">第五步:刮掉所有评论。</p><h1 id="49bc" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">技巧3-理解URL</h1><p id="f0f2" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">URL包含了丰富的信息。例如，我设法过滤掉数据中的重复条目，因为我知道亚马逊产品URL的一个组成部分是产品的唯一标识符，称为ASIN(亚马逊标准标识号)。</p><p id="f4e9" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">除此之外，URL为链接网页提供了一种替代点击按钮的策略。如果您在尝试定位或点按链接网页的特定按钮时遇到困难，请尝试比较网页之间的URL。不同网站之间的一个共同点是，从第一个结果页面到下一个页面可以通过在URL的末尾添加类似于“<em class="lh"> &amp; page=n </em>”的内容来完成，其中<em class="lh"> n </em>代表第2、3…页。</p><h1 id="6d8c" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">技巧4——不要混淆你的“等待”</h1><p id="0383" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">一般来说，有隐式等待和显式等待。当您编写显式等待代码时，您可以定义程序在满足某个条件之前应该等待多长时间。另一方面，隐式等待告诉web驱动程序在抛出异常之前等待用户定义的时间长度。</p><p id="3b75" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">要解决的最棘手的问题之一是，即使超过了指定的等待时间，程序仍未超时。这通常是由于不知不觉地混合了隐式和显式等待。</p><p id="9014" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">如果您打算使用Selenium，以下资源是不错的选择:</p><ol class=""><li id="190b" class="lj lk hi ki b kj lc km ld kp ll kt lm kx ln lb lo lp lq lr bi translated"><a class="ae jn" href="https://selenium-python.readthedocs.io/waits.html#:~:text=Selenium%20Webdriver%20provides%20two%20types,trying%20to%20locate%20an%20element." rel="noopener ugc nofollow" target="_blank">Python中的Selenium等待文档</a></li><li id="e98f" class="lj lk hi ki b kj ls km lt kp lu kt lv kx lw lb lo lp lq lr bi translated"><a class="ae jn" href="https://www.selenium.dev/documentation/en/webdriver/waits/#implicit-wait" rel="noopener ugc nofollow" target="_blank">隐式-显式等待交互问题</a></li></ol><h1 id="2684" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">提示5-选择战略定位器</h1><p id="2214" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">虽然对于应该选择哪种元素定位符类型没有硬性的规定(<em class="lh">例如</em> Xpath、CSS、ID等)。)，你应该记住几个要点:</p><ol class=""><li id="4521" class="lj lk hi ki b kj lc km ld kp ll kt lm kx ln lb lo lp lq lr bi translated">在大多数浏览器中，CSS往往比Xpath更快。</li><li id="3340" class="lj lk hi ki b kj ls km lt kp lu kt lv kx lw lb lo lp lq lr bi translated"><a class="ae jn" href="https://blog.thedigitalgroup.com/locator-strategies-in-selenium-webdriver" rel="noopener ugc nofollow" target="_blank">如果ID是选项之一，使用它</a>。</li><li id="6bda" class="lj lk hi ki b kj ls km lt kp lu kt lv kx lw lb lo lp lq lr bi translated">如果没有写完整，一些定位器可以指向多个元素。确保您的定位器指向<a class="ae jn" href="https://www.toolsqa.com/selenium-webdriver/selenium-locators/" rel="noopener ugc nofollow" target="_blank">精确元素</a>。</li><li id="4c26" class="lj lk hi ki b kj ls km lt kp lu kt lv kx lw lb lo lp lq lr bi translated">使用浏览器扩展，如<a class="ae jn" href="https://chrome.google.com/webstore/detail/ranorex-selocity/ocgghcnnjekfpbmafindjmijdpopafoe" rel="noopener ugc nofollow" target="_blank"> Ranorex Selocity </a>来帮助定位元素。</li></ol><h1 id="08cc" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">*额外提示——跟随我的教程</h1><p id="7464" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">如果其他都失败了，请阅读我的教程。</p><h1 id="ffc0" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">结论</h1><p id="c46f" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">现在继续，重新打开所有那些关闭的标签，开始编码。一旦你掌握了窍门，你就可以随心所欲地提取定制数据了。如果你觉得这篇文章有用，如果你能留下一些掌声，会有很大的帮助。我很乐意听到你对我自己学习的想法，所以请随意回应一些意见和建议！感谢您的阅读！</p></div></div>    
</body>
</html>