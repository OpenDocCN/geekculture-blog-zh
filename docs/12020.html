<html>
<head>
<title>Defining Custom Page Transitions in Flutter</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Flutter中定义自定义页面过渡</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/defining-custom-page-transitions-in-flutter-e2972a464be?source=collection_archive---------2-----------------------#2022-04-21">https://medium.com/geekculture/defining-custom-page-transitions-in-flutter-e2972a464be?source=collection_archive---------2-----------------------#2022-04-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="fd02" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">与Navigator 2.0和1.0兼容</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/18d198e8b8498736d053a74fdf4bb775.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-Fdx9kuwEY1phjLVj-QlwQ.jpeg"/></div></div></figure><p id="66a1" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">如果你看一下如何在<a class="ae kf" href="https://docs.flutter.dev/cookbook/animation/page-route-animation" rel="noopener ugc nofollow" target="_blank"> Flutter Cookbook </a>中制作页面路径转换的动画，你会发现一个在<code class="du kg kh ki kj b">PageRouteBuilder</code>中包装小部件并将其传递给<code class="du kg kh ki kj b">Navigator.of(context).push</code>的方法，类似于</p><pre class="iy iz ja jb fd kk kj kl km aw kn bi"><span id="31e2" class="ko kp hi kj b fi kq kr l ks kt">Navigator.of(context).push(_createRoute(Page2());</span><span id="0b52" class="ko kp hi kj b fi ku kr l ks kt">Route _createRoute(Widget child) {<br/>  return PageRouteBuilder(<br/>    pageBuilder: (context, animation, secondaryAnimation) =&gt; child,<br/>    transitionsBuilder: (context, animation, secondaryAnimation, child) {<br/>      // define your animation here<br/>      // TODO: return animated child<br/>    },<br/>  );<br/>}</span></pre><p id="1df5" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">这种方法适应性不强，更糟糕的是，它甚至不能与Navigator 2.0一起使用。幸运的是，有一个简单的解决方案，可以很容易地适应每个平台，并与Navigator 2.0和1.0兼容！</p><p id="a14f" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在本指南中，我们将定义一个简单的过渡，即<em class="kv">缩放</em>和<em class="kv">淡入&amp;淡出</em>。为此，我们创建了一个单独的类<code class="du kg kh ki kj b">CustomTransitionBuilder</code>，它扩展了<code class="du kg kh ki kj b">PageTransitionsBuilder</code>并覆盖了<code class="du kg kh ki kj b">buildTransitions</code>方法。</p><pre class="iy iz ja jb fd kk kj kl km aw kn bi"><span id="160e" class="ko kp hi kj b fi kq kr l ks kt">class CustomTransitionBuilder extends PageTransitionsBuilder {<br/>  const CustomTransitionBuilder();</span><span id="7e83" class="ko kp hi kj b fi ku kr l ks kt">  @override<br/>  Widget buildTransitions&lt;T&gt;(<br/>      PageRoute&lt;T&gt; route,<br/>      BuildContext context,<br/>      Animation&lt;double&gt; animation,<br/>      Animation&lt;double&gt; secondaryAnimation,<br/>      Widget child) {</span><span id="54dd" class="ko kp hi kj b fi ku kr l ks kt">    final tween = Tween(begin: 0.0, end: 1.0).chain(CurveTween(curve: Curves.ease));</span><span id="6d72" class="ko kp hi kj b fi ku kr l ks kt">    return ScaleTransition(<br/>      scale: animation.drive(tween),<br/>      child: FadeTransition(opacity: animation, child: child));<br/>    }<br/>}</span></pre><p id="7238" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">如你所见，我们使用了<code class="du kg kh ki kj b">ScaleTransition</code>和<code class="du kg kh ki kj b">FadeTransition</code> <code class="du kg kh ki kj b">AnimatedWidget</code> s。我们使用<code class="du kg kh ki kj b">Curves.ease</code>定义了一个从<code class="du kg kh ki kj b">0.0</code>开始到<code class="du kg kh ki kj b">1.0</code>结束的<code class="du kg kh ki kj b">Tween</code>，以获得更自然的动画。这是一个非常简单的动画。你也可以创建你自己的复杂动画部件并在这里使用它们，或者使用Flutter包中的动画。</p><p id="ccd4" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">现在，为了使用我们的转换，我们简单地定义我们的应用程序的<code class="du kg kh ki kj b">PageTransitionsTheme</code>。</p><pre class="iy iz ja jb fd kk kj kl km aw kn bi"><span id="205d" class="ko kp hi kj b fi kq kr l ks kt">MaterialApp.router(<br/>  ...<br/>  theme: ThemeData(<br/>    ...<br/>    pageTransitionsTheme: const PageTransitionsTheme(<br/>      builders: {<br/>        TargetPlatform.android: CustomTransitionBuilder(),<br/>        TargetPlatform.iOS: CustomTransitionBuilder(),<br/>        TargetPlatform.macOS: CustomTransitionBuilder(),<br/>        TargetPlatform.windows: CustomTransitionBuilder(),<br/>        TargetPlatform.linux: CustomTransitionBuilder(),<br/>      },<br/>    ),<br/>  ),<br/>  ...<br/>),</span></pre><p id="3c82" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">您只需要为您的定制转换目标平台定义一个构建器，但是您可以看到这种方法的适应性有多强。只需为您希望制作不同动画的每个平台创建不同的生成器。这种方法甚至可以根据访问应用程序的平台在web浏览器中应用过渡！</p><p id="779a" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">这就是全部了！如前所述，这种技术适用于两种导航方式，所以我鼓励您尝试自己喜欢的方式。</p><p id="253f" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">一如既往，感谢阅读。如果你想了解更多关于Flutter的知识，请跟我来。</p><p id="0db6" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">如果你不熟悉Navigator 2.0，请点击这里查看我的三部分系列<a class="ae kf" rel="noopener" href="/geekculture/a-simpler-guide-to-flutter-navigator-2-0-part-i-70623cedc93b"/>。</p></div></div>    
</body>
</html>