<html>
<head>
<title>Blindspot Monitoring System using Arduino UNO.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Arduino UNO的盲点监测系统。</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/blindspot-monitoring-system-using-arduino-uno-a5a8dd074280?source=collection_archive---------1-----------------------#2022-06-15">https://medium.com/geekculture/blindspot-monitoring-system-using-arduino-uno-a5a8dd074280?source=collection_archive---------1-----------------------#2022-06-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/></div><div class="ab cl if ig gp ih" role="separator"><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik"/></div><div class="hb hc hd he hf"><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es im"><img src="../Images/b65234c56f0e60b1d2182470c01d236f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_yYNA8kScFcAdxOXWo9Qbw.png"/></div></div></figure><p id="9b71" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">我目前正在度暑假，我最喜欢的打发时间的方式之一是看YouTube上的汽车视频，这些视频是我永远也买不起的。当我在YouTube上浏览汽车评论时，我看到了对2021款奔驰S级的评论，并对一个漂亮的小功能非常着迷，其中车门侧的环境灯一旦检测到盲点中的汽车就会闪烁红色(我想是主动环境照明)。简单而有效——这就是德国工程。</p><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es im"><img src="../Images/cd74361e3ce402f662b863703e7bf03b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zTjCL62-8K1sOvXr7bDeqg.png"/></div></div><figcaption class="jw jx et er es jy jz bd b be z dx">Active Ambient Lighting on the Mercedes Benz S-Class.(Credits: Faisal Khan)</figcaption></figure><p id="1299" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">这是我正在看的<a class="ae ka" href="https://youtu.be/safekQZPeaU?t=1273" rel="noopener ugc nofollow" target="_blank">评论</a>的链接。</p><p id="4fd7" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">最近，我还尝试了Arduino Uno，这是一种小型开发板，内置AtMega328P微控制器。由于我对2021款奔驰S级上的盲点警告系统非常着迷，我决定用Arduino UNO为自己建造一个。</p><h2 id="9ca4" class="kb kc hi bd kd ke kf kg kh ki kj kk kl jj km kn ko jn kp kq kr jr ks kt ku kv bi translated">组件和供应品</h2><ol class=""><li id="5257" class="kw kx hi ja b jb ky jf kz jj la jn lb jr lc jv ld le lf lg bi translated">Arduino Uno</li><li id="f2cb" class="kw kx hi ja b jb lh jf li jj lj jn lk jr ll jv ld le lf lg bi translated">试验板(可选)</li><li id="81a6" class="kw kx hi ja b jb lh jf li jj lj jn lk jr ll jv ld le lf lg bi translated">RGB LED灯条(≤1米)</li><li id="f24e" class="kw kx hi ja b jb lh jf li jj lj jn lk jr ll jv ld le lf lg bi translated">HC-SR04超声波传感器</li><li id="4be3" class="kw kx hi ja b jb lh jf li jj lj jn lk jr ll jv ld le lf lg bi translated">安装了Arduino IDE的笔记本电脑/台式机</li></ol><h2 id="0009" class="kb kc hi bd kd ke kf kg kh ki kj kk kl jj km kn ko jn kp kq kr jr ks kt ku kv bi translated">电路设计</h2><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es lm"><img src="../Images/26f5926cd814ccc3e3b4fd2c7a8ca36c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ivcicLtDEDE7Yjwhi8mhbQ.png"/></div></div><figcaption class="jw jx et er es jy jz bd b be z dx">Note: I have used a single LED only for demonstration purposes as Tinkercad didn’t have a strip.</figcaption></figure><h2 id="1b18" class="kb kc hi bd kd ke kf kg kh ki kj kk kl jj km kn ko jn kp kq kr jr ks kt ku kv bi translated">密码</h2><p id="453b" class="pw-post-body-paragraph iy iz hi ja b jb ky jd je jf kz jh ji jj ln jl jm jn lo jp jq jr lp jt ju jv hb bi translated">这里是<a class="ae ka" href="https://gist.github.com/Om-Kamath/a73fd38ea3b72feea18412af733d605a" rel="noopener ugc nofollow" target="_blank">代码</a>的链接。</p><h2 id="2d63" class="kb kc hi bd kd ke kf kg kh ki kj kk kl jj km kn ko jn kp kq kr jr ks kt ku kv bi translated">逻辑</h2><ol class=""><li id="1a1d" class="kw kx hi ja b jb ky jf kz jj la jn lb jr lc jv ld le lf lg bi translated">初始化引脚和触发距离。</li><li id="e64d" class="kw kx hi ja b jb lh jf li jj lj jn lk jr ll jv ld le lf lg bi translated">计算主体和对象之间的距离。</li><li id="7612" class="kw kx hi ja b jb lh jf li jj lj jn lk jr ll jv ld le lf lg bi translated">将计算的距离与触发距离进行比较，并相应地闪烁颜色。</li><li id="9b85" class="kw kx hi ja b jb lh jf li jj lj jn lk jr ll jv ld le lf lg bi translated">在我的代码中，我将LED灯条设置为当物体在30厘米以内时闪烁橙色，当物体在10厘米以内时闪烁红色。当没有检测到物体时，LED灯带会变成蓝色。你可以根据自己的喜好改变颜色。</li></ol><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es lq"><img src="../Images/a78eddb8f22fbc7c0da8d2be9cce328b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UGIxXWtlS2rUbHKXZAc2YA.png"/></div></div><figcaption class="jw jx et er es jy jz bd b be z dx">Sonar Principle. Source: Dr. <a class="ae ka" href="https://commons.wikimedia.org/wiki/File:Sonar_Principle_EN.svg" rel="noopener ugc nofollow" target="_blank">Schorsch</a></figcaption></figure><h2 id="7ee2" class="kb kc hi bd kd ke kf kg kh ki kj kk kl jj km kn ko jn kp kq kr jr ks kt ku kv bi translated">代码解释</h2><p id="67f8" class="pw-post-body-paragraph iy iz hi ja b jb ky jd je jf kz jh ji jj ln jl jm jn lo jp jq jr lp jt ju jv hb bi translated"><strong class="ja hj">初始化变量和常量。</strong></p><p id="be2c" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">首先，我们将需要初始化所有的变量和常数，我们将在以后的编码中使用。常量<code class="du lr ls lt lu b">g, b, r</code>用于定义RGB LED灯条的引脚。<code class="du lr ls lt lu b">echoPin</code>和<code class="du lr ls lt lu b">trigPin</code>是用于超声波传感器的常数。</p><p id="93b7" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><em class="lv">注意:我们在Arduino上使用PWM引脚来控制LED灯条的亮度。</em></p><pre class="in io ip iq fd lw lu lx ly aw lz bi"><span id="6cd6" class="kb kc hi lu b fi ma mb l mc md">//initializing the rgb strip pins<br/>#define b 6 <br/>#define g 5 <br/>#define r 3 </span><span id="1ee9" class="kb kc hi lu b fi me mb l mc md">//initializing the ultrasonic sensor pins <br/>#define echoPin 8<br/>#define trigPin 12</span></pre><p id="5f68" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">由于盲点警告有两个阶段，我们必须初始化两个常量<code class="du lr ls lt lu b">trigDist1</code>(第一次触发)和<code class="du lr ls lt lu b">trigDist2</code>(第二次触发)。变量<code class="du lr ls lt lu b">duration</code>和<code class="du lr ls lt lu b">distance</code>将用于计算传感器和物体之间的距离。变量<code class="du lr ls lt lu b">fade</code>为布尔类型，将用于空闲时led的淡入效果。</p><pre class="in io ip iq fd lw lu lx ly aw lz bi"><span id="ab9a" class="kb kc hi lu b fi ma mb l mc md">#define trigDist1 30<br/>#define trigDist2 10</span><span id="3c39" class="kb kc hi lu b fi me mb l mc md">long duration;<br/>int distance;<br/> <br/>bool fade=true;</span></pre><p id="79bc" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><strong class="ja hj">设置</strong></p><p id="2af7" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">一旦我们初始化了所有的变量和常量，我们将继续设置引脚模式，并以波特率9600开始串行。函数<code class="du lr ls lt lu b">setup()</code>将在编译完代码后首先执行(只执行一次)。</p><pre class="in io ip iq fd lw lu lx ly aw lz bi"><span id="cb37" class="kb kc hi lu b fi ma mb l mc md">void setup() {<br/> Serial.begin(9600);  <br/> pinMode(g,OUTPUT);  <br/> pinMode(b,OUTPUT);  <br/> pinMode(r,OUTPUT);  <br/> pinMode(trigPin, OUTPUT);  <br/> pinMode(echoPin, INPUT);<br/>}</span></pre><p id="d188" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><strong class="ja hj">声明功能</strong></p><ol class=""><li id="6c66" class="kw kx hi ja b jb jc jf jg jj mf jn mg jr mh jv ld le lf lg bi translated"><code class="du lr ls lt lu b"><strong class="ja hj">calDistance()</strong></code></li></ol><p id="ba70" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">计算主体和对象之间的距离。</p><pre class="in io ip iq fd lw lu lx ly aw lz bi"><span id="ed20" class="kb kc hi lu b fi ma mb l mc md">void calDistance(){  <br/> digitalWrite(trigPin, LOW); <br/> delayMicroseconds(2); <br/> digitalWrite(trigPin, HIGH); <br/> delayMicroseconds(10); <br/> digitalWrite(trigPin, LOW); <br/> duration = pulseIn(echoPin, HIGH); <br/> distance = duration * 0.034 / 2; <br/> Serial.println(distance);<br/>}</span></pre><p id="f51d" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><code class="du lr ls lt lu b">pulseIn()</code>等待引脚从<code class="du lr ls lt lu b">LOW</code>到<code class="du lr ls lt lu b">HIGH</code>，开始计时，然后等待引脚到<code class="du lr ls lt lu b">LOW</code>，停止计时。以微秒为单位返回脉冲的长度，如果在超时时间内没有收到完整的脉冲，则放弃并返回0。</p><p id="ad09" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">2.<code class="du lr ls lt lu b"><strong class="ja hj">fadedRed()</strong></code></p><p id="85ac" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">该功能在脉宽调制和for-loops的帮助下，使LED灯条逐渐闪烁(脉冲动画)。第一个for-loop将逐渐增加LED的亮度，第二个for-loop将逐渐降低LED的亮度。<code class="du lr ls lt lu b">val</code>作为可以控制眨眼频率的参数。</p><pre class="in io ip iq fd lw lu lx ly aw lz bi"><span id="9093" class="kb kc hi lu b fi ma mb l mc md">void fadedRed(int val){ <br/> for(int i=255; i&gt;0; i-=val){    <br/>  analogWrite(r, i);        <br/>  analogWrite(g, 255);    <br/>  analogWrite(b, 255);    <br/>  delay(5); <br/> }   <br/> for(int i=0; i&lt;255; i+=val){   <br/>  analogWrite(r, i);         <br/>  analogWrite(g, 255);     <br/>  analogWrite(b, 255);     <br/>  delay(5);  <br/> }<br/>}</span></pre><blockquote class="mi mj mk"><p id="0a92" class="iy iz lv ja b jb jc jd je jf jg jh ji ml jk jl jm mm jo jp jq mn js jt ju jv hb bi translated"><strong class="ja hj">注</strong>:在我的LED灯带里，有一个阳极而不是阴极。因此，当阳极和LED引脚之间的电位差较大时，相应的LED就会亮起。所以，如果你想在RGB条上输出红色，你需要把所有其他颜色<code class="du lr ls lt lu b">HIGH</code>也就是255和<code class="du lr ls lt lu b">R -&gt; LOW</code>也就是0。</p></blockquote><p id="f0df" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">3.<code class="du lr ls lt lu b"><strong class="ja hj">fadedOrange()</strong></code></p><p id="6602" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">这个函数和上一个相似，尽管我花了很大的力气通过混合红色和绿色来生成橙色。它仍然不完美，但我通过使用三元运算符来限制绿色的百分比，尽了我的最大努力。如果你对此有更好的解决方案，请在评论区告诉我。</p><pre class="in io ip iq fd lw lu lx ly aw lz bi"><span id="1455" class="kb kc hi lu b fi ma mb l mc md">void fadedOrange(int val){ <br/> for(int i=255; i&gt;0; i-=val){     <br/>  analogWrite(r, i);          <br/>  analogWrite(b, 255);    <br/>  analogWrite(g, i&gt;230?i:230);    <br/>  delay(5);  <br/> }   <br/> for(int i=0; i&lt;255; i+=val){    <br/>  analogWrite(r, i);         <br/>  analogWrite(b, 255);    <br/>  analogWrite(g,i&lt;230?240:i);   <br/>  delay(5);  <br/>  }<br/>}</span></pre><p id="2079" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">4.<code class="du lr ls lt lu b"><strong class="ja hj">fadeInBlue()</strong></code></p><p id="bc51" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">该功能不会使led闪烁，但为了从闪烁led过渡到静态led，我使用布尔变量<code class="du lr ls lt lu b">fade</code>添加了一个渐变效果。这个变量将检查发光二极管是否已经变成蓝色，如果不是，那么它将变成蓝色。</p><pre class="in io ip iq fd lw lu lx ly aw lz bi"><span id="745f" class="kb kc hi lu b fi ma mb l mc md">void fadeInBlue(){  <br/> if(fade==true){   <br/>  for(int i=255; i&gt;0; i-=1){     <br/>   analogWrite(g, 255);     <br/>   analogWrite(r, 255);     <br/>   analogWrite(b, i);      <br/>   delay(5);    <br/>  }  <br/> }  <br/> fade=false;  <br/> analogWrite(g, 255);  <br/> analogWrite(r, 255); <br/> analogWrite(b, 0);<br/>}</span></pre><p id="ec8f" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><strong class="ja hj">在</strong>中把一切都捆绑在一起<code class="du lr ls lt lu b"><strong class="ja hj">loop()</strong></code></p><p id="c70f" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">一旦代码开始执行，就会重复执行。所有预先声明的函数都将在<code class="du lr ls lt lu b">loop()</code>中被调用。它将从计算距离开始。然后，它会将距离与触发距离进行比较，并输出适当的颜色。</p><pre class="in io ip iq fd lw lu lx ly aw lz bi"><span id="c184" class="kb kc hi lu b fi ma mb l mc md">void loop() {  <br/> calDistance(); <br/> if(distance&lt;=trigDist1 &amp;&amp; distance&gt;trigDist2){  <br/>  fadedOrange(3);  <br/>  fade=true; <br/> }<br/> else if(distance&lt;=trigDist2){  <br/>  fadedRed(3);  <br/>  fade=true; <br/> } <br/> else{  <br/>  fadeInBlue(); <br/> }<br/>}</span></pre><p id="b703" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">总的来说，这个项目的逻辑非常简单，代码很容易调整。</p><p id="fa44" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">下面是该项目的<strong class="ja hj">视频演示</strong>:</p><figure class="in io ip iq fd ir"><div class="bz dy l di"><div class="mo mp l"/></div></figure><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es mq"><img src="../Images/1d410d4518012b79a4b2553bed1ee4ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xIIPsx8UF1B_-OwMbNo5Tw.jpeg"/></div></div><figcaption class="jw jx et er es jy jz bd b be z dx">Arduino with ultrasonic sensor and LED strip.</figcaption></figure><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es mr"><img src="../Images/9c9858e1d01f903672ed61ba217a2330.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y9ko6InXgKo2mNAXHMlgqA.jpeg"/></div></div><figcaption class="jw jx et er es jy jz bd b be z dx">Arduino UNO</figcaption></figure><h2 id="ec3a" class="kb kc hi bd kd ke kf kg kh ki kj kk kl jj km kn ko jn kp kq kr jr ks kt ku kv bi translated">未来的改进</h2><ul class=""><li id="d332" class="kw kx hi ja b jb ky jf kz jj la jn lb jr lc jv ms le lf lg bi translated">用WS2812B可寻址LED灯取代普通RGB LED灯。与FastLED库配对的WS2812B LEDs将实现一系列广泛的功能，如动态滑动模式，并且生成不同的颜色也将更加容易。</li></ul><h2 id="84b1" class="kb kc hi bd kd ke kf kg kh ki kj kk kl jj km kn ko jn kp kq kr jr ks kt ku kv bi translated">我为什么创建这个项目？</h2><p id="714a" class="pw-post-body-paragraph iy iz hi ja b jb ky jd je jf kz jh ji jj ln jl jm jn lo jp jq jr lp jt ju jv hb bi translated">只是为了好玩。这是我有史以来第一个基于Arduino的项目，我想构建一些有趣的东西，我会彻底享受。汽车和技术是我最感兴趣的两个话题。此外，我已经很久没有写中型文章了，我觉得这是一个很好的项目，可以和大家分享。我希望这篇文章给你的生活增加了一些价值，并且你和我一样喜欢这个小而有趣的项目。如果你有任何与项目相关的疑问，请在评论区发表，我会尽力解决。再见。</p><p id="efec" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">如果你喜欢我的博客，你可以<a class="ae ka" href="https://www.buymeacoffee.com/omkamath?source=about_page-------------------------------------" rel="noopener ugc nofollow" target="_blank">给我买杯咖啡</a>。</p></div></div>    
</body>
</html>