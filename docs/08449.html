<html>
<head>
<title>CRUD with RecoilJS and remote API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">带有反冲JS和远程API的CRUD</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/crud-with-recoiljs-and-remote-api-e36581b77168?source=collection_archive---------5-----------------------#2021-10-31">https://medium.com/geekculture/crud-with-recoiljs-and-remote-api-e36581b77168?source=collection_archive---------5-----------------------#2021-10-31</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="6248" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" href="https://recoiljs.org/" rel="noopener ugc nofollow" target="_blank">反冲JS </a>是由脸书团队开发的React的现代状态管理库。你可能会问“另一个状态管理库？我用Redux搭配Redux工具包。为什么我需要别的东西？”。答案很简单。对于一个简单的带有Redux Toolkit的CRUD应用程序，你必须写大量带有reducer、actions、extra reducers等的代码。有了反冲JS，一切都简单了。在本文中，我将向您展示如何使用React+reschi rjs创建一个CRUD应用程序，并将其与后端集成。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/41506890487a1a9e428c489220a7e65f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I5Bx220dgR-TakKXudSKYg.png"/></div></div></figure><h1 id="c2c4" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">反冲核心概念</h1><h2 id="002d" class="ko jr hi bd js kp kq kr jw ks kt ku ka iq kv kw ke iu kx ky ki iy kz la km lb bi translated"><a class="ae jd" href="https://recoiljs.org/docs/basic-tutorial/atoms" rel="noopener ugc nofollow" target="_blank">原子</a></h2><p id="6364" class="pw-post-body-paragraph if ig hi ih b ii lc ik il im ld io ip iq le is it iu lf iw ix iy lg ja jb jc hb bi translated">原子是国家的一部分。您可以获取它的值并为其设置值。</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="lh li l"/></div></figure><h2 id="dcc9" class="ko jr hi bd js kp kq kr jw ks kt ku ka iq kv kw ke iu kx ky ki iy kz la km lb bi translated"><a class="ae jd" href="https://recoiljs.org/docs/basic-tutorial/selectors" rel="noopener ugc nofollow" target="_blank">选择器</a></h2><p id="01c7" class="pw-post-body-paragraph if ig hi ih b ii lc ik il im ld io ip iq le is it iu lf iw ix iy lg ja jb jc hb bi translated">选择器是派生状态的一部分。像原子一样，你得到并设定它。</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="lh li l"/></div></figure><h2 id="af01" class="ko jr hi bd js kp kq kr jw ks kt ku ka iq kv kw ke iu kx ky ki iy kz la km lb bi translated"><a class="ae jd" href="https://recoiljs.org/docs/guides/asynchronous-data-queries" rel="noopener ugc nofollow" target="_blank">异步选择器</a></h2><p id="d233" class="pw-post-body-paragraph if ig hi ih b ii lc ik il im ld io ip iq le is it iu lf iw ix iy lg ja jb jc hb bi translated">选择器也可以表示承诺的结果。例如，获取数据的API调用可以包装在选择器中。</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="lh li l"/></div></figure><p id="d850" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于从异步选择器呈现数据，您需要用<code class="du lj lk ll lm b">React.Suspense</code>包装您的组件，因为在呈现开始时可能不会加载数据:</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="lh li l"/></div></figure><p id="fe6b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我建议你阅读官方网站<a class="ae jd" href="https://recoiljs.org/docs/basic-tutorial/intro" rel="noopener ugc nofollow" target="_blank">https://recoiljs.org/docs/basic-tutorial/intro</a>的所有文件。这将花费您大约15分钟的时间，这些文档非常容易阅读。</p><h1 id="8bc9" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">获取数据</h1><p id="8368" class="pw-post-body-paragraph if ig hi ih b ii lc ik il im ld io ip iq le is it iu lf iw ix iy lg ja jb jc hb bi translated">使用异步选择器，您可以轻松地从后端获取数据。但是你不能修改这个数据，你需要把它存储在某个地方。对于这种情况，反冲提供了一种有趣的技术:传递一个异步选择器作为原子的默认值。</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="lh li l"/></div></figure><p id="4990" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">选择器从API加载数据，atom存储数据。就这样，没有动作或突变，只有9行代码。</p><h1 id="7e1b" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">创造</h1><p id="ff4c" class="pw-post-body-paragraph if ig hi ih b ii lc ik il im ld io ip iq le is it iu lf iw ix iy lg ja jb jc hb bi translated">对于一个新的行业创建，我们需要将数据发送到后端，并将响应添加到行业状态数组中。我更喜欢把可重用的代码包装成钩子。因此，让我们创建一个钩子来对<code class="du lj lk ll lm b">industriesState</code>执行修改操作:</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="lh li l"/></div></figure><h1 id="2aea" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">更新</h1><p id="9cb2" class="pw-post-body-paragraph if ig hi ih b ii lc ik il im ld io ip iq le is it iu lf iw ix iy lg ja jb jc hb bi translated">同样的更新方法，但我们不是添加，而是用新的行业替换阵列中更新的行业:</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="lh li l"/></div></figure><h1 id="f32c" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">删除</h1><p id="7c04" class="pw-post-body-paragraph if ig hi ih b ii lc ik il im ld io ip iq le is it iu lf iw ix iy lg ja jb jc hb bi translated">为了删除，我们只过滤行业:</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="lh li l"/></div></figure><h1 id="3bac" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">把所有的放在一起</h1><p id="45ea" class="pw-post-body-paragraph if ig hi ih b ii lc ik il im ld io ip iq le is it iu lf iw ix iy lg ja jb jc hb bi translated">现在我们得到了所有4个CRUD操作:</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="lh li l"/></div></figure><h1 id="98ac" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">结论</h1><p id="1483" class="pw-post-body-paragraph if ig hi ih b ii lc ik il im ld io ip iq le is it iu lf iw ix iy lg ja jb jc hb bi translated">库必须简化开发者的工作，而反冲JS做到了这一点。目前，它还处于实验阶段，但我很确定这个图书馆有一个美好的未来。</p><p id="6c22" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">今天就到这里吧！如果你有任何问题，不要犹豫，写在评论里。</p><p id="2405" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="ln">下次见！Servus！</em></p></div></div>    
</body>
</html>