<html>
<head>
<title>Visualization Only! Not Enough. How to Carry Out Bivariate Statistical Test in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">仅可视化！不够。如何在Python中进行二元统计检验</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/visualization-only-not-enough-how-to-carry-out-bivariate-statistical-test-in-python-fc8238b896c?source=collection_archive---------9-----------------------#2021-03-18">https://medium.com/geekculture/visualization-only-not-enough-how-to-carry-out-bivariate-statistical-test-in-python-fc8238b896c?source=collection_archive---------9-----------------------#2021-03-18</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="a8a0" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">在将预测值包含在模型中之前，以统计方式测试双变量的预测值特征</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/3975ca5aa677e56a9d265f1963c8a451.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*V5xbi9dwzDGWsDZa"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Photo by <a class="ae jn" href="https://unsplash.com/@battlecreekcoffeeroasters?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Battlecreek Coffee Roasters</a> on <a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="d63f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">你知道吗？使用箱线图、散点图和其他可视化工具很棒，但不足以确认两个变量(目标要素(Y)和每个预测要素(X))之间的关系。</p><p id="4b67" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我知道你可能会问，为什么？</p><p id="5314" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">嗯，因为统计学家可能会说，你在样本中看到的视觉模式并不是你的样本所代表的人群中真正获得的。具体来说，她/他可能会说——“你所看到的实际上是偶然发生的，所以很有可能，当从同一人群中分别抽取相似特征的样本时，你可能不会再看到这种可视化所表明的关系”</p><p id="60fe" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">那么，在这种情况下，克服统计或统计人员造成的混乱的最佳做法是什么？</strong></p><blockquote class="kk kl km"><p id="4100" class="jo jp kn jq b jr js ij jt ju jv im jw ko jy jz ka kp kc kd ke kq kg kh ki kj hb bi translated"><strong class="jq hj"> <em class="hi">黄金标准</em></strong><em class="hi">——</em>使用数据可视化工具(图表/双向表)将两个特征之间可能存在的关系或关联可视化，然后进行统计测试，从统计上确认视觉模式所暗示的是真是假</p></blockquote><p id="d0ae" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在本文中，我们将陈述在确认目标特征(Y)和每个预测变量(X)之间存在关系/关联时，使用不同双变量统计检验的适当标准；并演示如何用python实现它。</p><p id="bb4b" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">本文将涵盖以下几个部分:</p><blockquote class="kk kl km"><p id="b6bb" class="jo jp kn jq b jr js ij jt ju jv im jw ko jy jz ka kp kc kd ke kq kg kh ki kj hb bi translated"><strong class="jq hj"> <em class="hi"> 1。二元推理分析概念和框架的快速概述</em> </strong></p><p id="6e11" class="jo jp kn jq b jr js ij jt ju jv im jw ko jy jz ka kp kc kd ke kq kg kh ki kj hb bi translated"><strong class="jq hj"> <em class="hi"> 2。</em>数据源概述</strong></p><p id="0190" class="jo jp kn jq b jr js ij jt ju jv im jw ko jy jz ka kp kc kd ke kq kg kh ki kj hb bi translated"><strong class="jq hj"> <em class="hi"> 3。应用不同推断二元统计检验的规则</em> </strong></p><p id="956e" class="jo jp kn jq b jr js ij jt ju jv im jw ko jy jz ka kp kc kd ke kq kg kh ki kj hb bi translated"><strong class="jq hj"> <em class="hi"> 4。如何在Python </em> </strong>中进行二元推理分析</p></blockquote><h1 id="d1d2" class="kr ks hi bd kt ku kv kw kx ky kz la lb io lc ip ld ir le is lf iu lg iv lh li bi translated"><strong class="ak"> 1。二元推理分析概念和框架的快速概述</strong></h1><p id="6309" class="pw-post-body-paragraph jo jp hi jq b jr lj ij jt ju lk im jw jx ll jz ka kb lm kd ke kf ln kh ki kj hb bi translated">双变量分析是对两个变量的经验分析，以确定它们之间是否存在关系或关联。它有两个部分，描述部分和推理部分。描述性部分涉及使用散点图、箱线图和数字列表(交叉列表等)等图形的关系可视化。推理部分涉及统计方法在测试和确定关系中的应用。下图突出显示了组件的分层系统。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lo"><img src="../Images/a8857d72090e34ae33bdc6041a638c83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mWQZ7fH5a52LL9Arf5jNtw.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx"><strong class="bd kt">Conceptual framework of Bivariate Analysis. Image by Akiode Ayobami</strong></figcaption></figure><p id="6540" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在这项研究中，我们将只关注双变量框架的推理部分。描述性成分的广泛描述可以在我的相关早期文章— <a class="ae jn" rel="noopener" href="/analytics-vidhya/visualization-not-enough-to-assess-relationship-between-2-variables-combine-with-statistical-test-2a32a2c99153"> <strong class="jq hj">可视化中找到，不足以暗示关系；用统计测试</strong>确认一下</a></p><h2 id="b9de" class="lp ks hi bd kt lq lr ls kx lt lu lv lb jx lw lx ld kb ly lz lf kf ma mb lh mc bi translated"><strong class="ak"> 1.1。二元推理分析</strong></h2><p id="212f" class="pw-post-body-paragraph jo jp hi jq b jr lj ij jt ju lk im jw jx ll jz ka kb lm kd ke kf ln kh ki kj hb bi translated">这是统计方法在确定两个变量/特征之间是否存在关系、关联或差异方面的应用。有两种类型，即参数型和非参数型。</p><p id="384f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj"> 1.1.1参数双变量分析:</strong>当两个变量所在总体的分布为正态分布或钟形时使用。尽管根据中心极限定理，当样本的样本量至少为30或更多时，仍然可以使用参数方法。但是，有一些统计方法可以用来检验正态性，例如——夏皮罗-维尔克检验、达戈斯蒂诺的k平方检验、安德森-达令检验、利列福斯检验、雅尔克-贝塔检验、科尔莫戈罗夫-斯米尔诺夫检验和卡方检验。</p><p id="c46f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj"> 1.1.2非参数双变量分析:</strong>当两个变量所来自的总体的分布未知或不呈正态分布时使用。尽管它也主要被考虑用于非参数的小样本数据集。有一些统计测试属于非参数规则。这个统计测试可以在上面的双变量分析框架图中看到。就像参数统计检验一样，在任何情况下使用的非参数统计检验取决于变量/特征的类型。</p><h1 id="bca7" class="kr ks hi bd kt ku kv kw kx ky kz la lb io lc ip ld ir le is lf iu lg iv lh li bi translated"><strong class="ak"> 2。数据源概述</strong></h1><p id="791b" class="pw-post-body-paragraph jo jp hi jq b jr lj ij jt ju lk im jw jx ll jz ka kb lm kd ke kf ln kh ki kj hb bi translated">本文中使用的数据是2013年尼日利亚人口和健康调查(DHS)收集的免费二手数据，称为NDHS 2013。DHS是在发展中国家进行的一项具有全国代表性的调查。在尼日利亚，这项调查通常每5年进行一次；覆盖尼日利亚所有州，包括首都。本次分析的受访者数据是奥贡州的数据。</p><p id="ee3d" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如需从DHS计划获取任何国家级的免费数据，请访问<a class="ae jn" href="https://dhsprogram.com/data/dataset_admin/login_main.cfm?CFID=6656492&amp;CFTOKEN=ce6ca5b288d60002-2AFF6515-C723-702A-D46EDCBB32A8BDBD" rel="noopener ugc nofollow" target="_blank"> <strong class="jq hj"> DHS计划</strong> </a>，注册并申请。</p><h1 id="837f" class="kr ks hi bd kt ku kv kw kx ky kz la lb io lc ip ld ir le is lf iu lg iv lh li bi translated"><strong class="ak"> 3。应用不同推断二元统计检验的规则</strong></h1><p id="be3b" class="pw-post-body-paragraph jo jp hi jq b jr lj ij jt ju lk im jw jx ll jz ka kb lm kd ke kf ln kh ki kj hb bi translated">选择与双变量可视化相匹配的适当的统计检验取决于两个因素:样本的参数状态和涉及的变量类型。</p><p id="5c37" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">下表简要说明了每个二元推断统计量必须满足的两个参数状态和变量类型标准</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es md"><img src="../Images/d6f124e104df5d8557def07a82be57c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zSy99Rvs7XlQLd9z8sGeYQ.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx"><strong class="bd kt">Table 3.1: Statistical test Parametric and type of variable compatibility Table. Image by Akiode Ayobami</strong></figcaption></figure><h1 id="81ce" class="kr ks hi bd kt ku kv kw kx ky kz la lb io lc ip ld ir le is lf iu lg iv lh li bi translated"><strong class="ak"> 4。如何在Python中进行二元推理分析</strong></h1><p id="cbbf" class="pw-post-body-paragraph jo jp hi jq b jr lj ij jt ju lk im jw jx ll jz ka kb lm kd ke kf ln kh ki kj hb bi translated">在本节中，我们将展示如何在python中执行双变量分析，首先是参数方法，然后是非参数方法。</p><p id="2da3" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">首先，我们将通过Jupyter笔记本将数据导入并加载到python中</p><pre class="iy iz ja jb fd me mf mg mh aw mi bi"><span id="37f6" class="lp ks hi mf b fi mj mk l ml mm">import pandas as pd<br/>path=r'B:\..\..\Ogun_NDHS_2013.dta'<br/>Ogun_ndhs2013=pd.read_stata(path)</span></pre><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mn"><img src="../Images/8937905bf060e71c559d2ee58d4dcff3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qviZajn7t4Qk4h4PGOYrgQ.png"/></div></div></figure><p id="5e2e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">尽管该数据框中有4617个特征(变量)和630行(观测值)，但我们在分析中只需要9行。因此，我们将只在数据帧中保留9。</p><pre class="iy iz ja jb fd me mf mg mh aw mi bi"><span id="74f2" class="lp ks hi mf b fi mj mk l ml mm">Variables_needed=['v313','v025', 'v012', 'v013', 'v203', 'v205', 'v218', 'v106', 'v190'] # These are the only variables needed</span><span id="9880" class="lp ks hi mf b fi mo mk l ml mm">Ogun_ndhs2013=Ogun_ndhs2013[Variables_needed]<br/>Ogun_ndhs2013.shape<br/>Ogun_ndhs2013.head(9)</span></pre><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mp"><img src="../Images/970791ab7b6b1669af3acd8db90abb1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8du1lgW__b2DzwO6asANTw.png"/></div></div></figure><h2 id="3116" class="lp ks hi bd kt lq lr ls kx lt lu lv lb jx lw lx ld kb ly lz lf kf ma mb lh mc bi translated">4.1.python中的参数推断双变量分析</h2><p id="73aa" class="pw-post-body-paragraph jo jp hi jq b jr lj ij jt ju lk im jw jx ll jz ka kb lm kd ke kf ln kh ki kj hb bi translated"><strong class="jq hj"> 4.1.1独立性卡方检验:</strong>这是一种双变量参数方法，用于检验标称目标特征(自变量)和预测特征(因变量)之间的关联。偶发事件的单元格不能少于5。如果存在这种情况(单元格值≤5)，则应使用费希尔精确检验。<br/> <br/>在我们分析的这个实例中，我们的名义目标特征将是——当前避孕方法(v313 ),而我们的名义预测特征将是——居住地类型(v025)</p><p id="88c3" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我们将导入所有需要的库和模块</p><pre class="iy iz ja jb fd me mf mg mh aw mi bi"><span id="b36f" class="lp ks hi mf b fi mj mk l ml mm">import numpy as np<br/>from scipy.stats import chi2_contingency<br/>from scipy.stats import chi2</span></pre><p id="4166" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我们将运行预测器和目标特征的频率分布，并将v313从4响应类别重新编码为3响应类别特征。</p><pre class="iy iz ja jb fd me mf mg mh aw mi bi"><span id="572d" class="lp ks hi mf b fi mj mk l ml mm">Ogun_ndhs2013 ['v025'].value_counts()<br/>Ogun_ndhs2013 ['v313'].value_counts()</span><span id="2e61" class="lp ks hi mf b fi mo mk l ml mm">#We will v313 recode into: No method, Modern Method, and Others<br/>v313_recode =  { "v313": <br/>                             {"No method": 'No method',  <br/>                              "Modern method": 'Modern method',  <br/>                              "Traditional method": 'Others',  <br/>                              "Folkloric method": 'Others'}<br/>             }</span><span id="39dc" class="lp ks hi mf b fi mo mk l ml mm">Ogun_ndhs2013.replace(v313_recode, inplace=True)</span></pre><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mq"><img src="../Images/5234792992220d8e85c21f886e5a8535.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hiEH4zKXkHVrrdeEKDZ3_w.png"/></div></div></figure><p id="cb60" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">制作预测要素(v025)和目标要素(v313)的交叉表(双向表),并计算卡方统计及其相关的p值</p><pre class="iy iz ja jb fd me mf mg mh aw mi bi"><span id="2327" class="lp ks hi mf b fi mj mk l ml mm">#Develop crosstabulation needed for chi-square statistic and p_value computation<br/>tab0=pd.crosstab(index=Ogun_ndhs2013.v313, columns=Ogun_ndhs2013.v025)<br/>print(tab0)</span><span id="5175" class="lp ks hi mf b fi mo mk l ml mm">#compute the chis-quare statistic and p_value<br/>chi2, p, dof, expected=chi2_contingency(tab0.values)<br/>print('Chi-square statistic is %0.3f,  p_value is %0.3f' %(chi2,p))</span></pre><p id="a0cc" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">卡方统计值为0.001，p值=0.9。由于p _ value &gt; 0.05这两个特征之间没有联系。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mr"><img src="../Images/cf9617fd8514ff22e40eca5c60594be2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GwclaVhgQhUUEg8l7dJVQw.png"/></div></div></figure><p id="e1f6" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj"> 4.1.2均值差异的T-检验:</strong>这是一种双变量参数方法，用于检验在二元预测特征(自变量)的两个响应类别之间，数值目标特征(因变量)的均值是否存在显著差异。</p><p id="2b08" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">T检验主要有三种类型，即:<br/> a .单样本T检验<br/> b .两个独立样本T检验<br/> c .配对样本T检验</p><p id="7af2" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在这种情况下，数字目标要素将是-年龄(v012)，而二元预测要素将是-居住地类型(v025)</p><p id="9246" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">均值差异的4.1.2.1单样本T检验</strong>:这是一种双变量参数方法，用于检验数字目标特征的均值和假设值之间是否存在显著差异。假设值通常代表总体值或已知值。例如，如果尼日利亚全国人口普查显示，尼日利亚人的平均年龄是30岁，这可能被认为是假设值。您可以从尼日利亚的一个州收集数据样本，并使用单样本t检验来查看该州人口的平均年龄是否与全国值(30)有显著差异。</p><p id="c5f5" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">对于我们的分析，使用我们的奥贡2013年NDHS数据，我们将奥贡州育龄妇女的总体平均年龄作为假设值。通过单样本t检验，我们将检验奥贡农村地区育龄妇女的平均年龄是否与该州妇女的假设总体平均年龄有显著差异。</p><p id="9102" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在大多数情况下，假设值是预先已知的。事实上，它可能已经在文献或实践社区中被记录下来。</p><p id="2d70" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">导入所需的库和数据集</p><pre class="iy iz ja jb fd me mf mg mh aw mi bi"><span id="f785" class="lp ks hi mf b fi mj mk l ml mm">#import Ogun NDHS 2013 dataset into pandas<br/>import pandas as pd<br/>path=r'B:\..\..\Ogun_NDHS_2013.dta'<br/>Ogun_ndhs2013=pd.read_stata(path)</span><span id="ac15" class="lp ks hi mf b fi mo mk l ml mm">Variables_needed=['v313','v025', 'v012', 'v013', 'v203', 'v205', 'v218', 'v106', 'v190'] # These are the only variables needed</span><span id="0284" class="lp ks hi mf b fi mo mk l ml mm">Ogun_ndhs2013=Ogun_ndhs2013[Variables_needed]</span><span id="1d6a" class="lp ks hi mf b fi mo mk l ml mm">import numpy as np<br/>from scipy import stats<br/>from scipy.stats import ttest_1samp</span></pre><p id="db5e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">仅计算奥贡州和奥贡州农村地区育龄妇女的平均年龄。</p><pre class="iy iz ja jb fd me mf mg mh aw mi bi"><span id="d5b3" class="lp ks hi mf b fi mj mk l ml mm">#Overall Mean age of women in Ogun state </span><span id="4260" class="lp ks hi mf b fi mo mk l ml mm">Ogun_state_mean_age=Ogun_ndhs2013['v012']<br/>Ogun_state_mean_age.mean(), Ogun_state_mean_age.std()</span><span id="ddd1" class="lp ks hi mf b fi mo mk l ml mm"><br/>#Mean age of women in rural areas of Ogun state</span><span id="0b59" class="lp ks hi mf b fi mo mk l ml mm">age_rural=Ogun_ndhs2013[(Ogun_ndhs2013['v012']&gt;=15) &amp; (Ogun_ndhs2013['v025']== "Rural")]<br/>age_rural=age_rural['v012']<br/>age_rural.mean(), age_rural.std()</span></pre><p id="f596" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">计算单样本t检验统计量及其相关的p值</p><pre class="iy iz ja jb fd me mf mg mh aw mi bi"><span id="cbfc" class="lp ks hi mf b fi mj mk l ml mm">stats.ttest_1samp(rural_age,31)</span></pre><p id="a009" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">单样本t检验统计值为2.06，p_value=0.03。自p _ value【4.1.2.2 T2】两个独立样本均值差异的t检验:这是一种双变量参数方法，用于测试独立的二元预测特征的两个响应类别之间的数值目标特征(因变量)的均值是否存在显著差异。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ms"><img src="../Images/d40282ffc6ed463ccde190a326094b6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nPk9oOaZl7OlRuqtGOQzzw.png"/></div></div></figure><p id="84e2" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">注意，之所以称之为独立样本，是因为这两种反应类型的观察结果应该是互斥的。例如，居住地变量类型的响应类别是相互排斥的，因为回答者可以是农村或城市，但不能同时是农村和城市。</p><p id="e1c1" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在这种情况下，数字目标要素将是-年龄(v012)，而二元预测要素将是-居住地类型(v025)</p><p id="4989" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我们将采用奥贡州农村和城市地区育龄妇女的平均年龄。使用两个独立样本的t检验，我们将检验奥贡农村地区和城市地区育龄妇女的平均年龄是否有显著差异。</p><p id="229f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">导入所需的库和数据集</p><p id="a703" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">计算奥贡州城乡地区育龄妇女的平均年龄。</p><pre class="iy iz ja jb fd me mf mg mh aw mi bi"><span id="3536" class="lp ks hi mf b fi mj mk l ml mm">#import Ogun NDHS 2013 dataset into pandas<br/>import pandas as pd<br/>path=r'B:\..\..\Ogun_NDHS_2013.dta'<br/>Ogun_ndhs2013=pd.read_stata(path)</span><span id="c639" class="lp ks hi mf b fi mo mk l ml mm">Variables_needed=['v313','v025', 'v012', 'v013', 'v203', 'v205', 'v218', 'v106', 'v190'] # These are the only variables needed</span><span id="cb41" class="lp ks hi mf b fi mo mk l ml mm">Ogun_ndhs2013=Ogun_ndhs2013[Variables_needed]</span><span id="6dde" class="lp ks hi mf b fi mo mk l ml mm">import numpy as np<br/>from scipy import stats<br/>from scipy.stats import ttest_ind</span></pre><p id="c600" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">计算独立样本t检验统计量和p值</p><pre class="iy iz ja jb fd me mf mg mh aw mi bi"><span id="a842" class="lp ks hi mf b fi mj mk l ml mm">#Overall Mean age of women in urban areas  Ogun state</span><span id="07fd" class="lp ks hi mf b fi mo mk l ml mm">age_urban=Ogun_ndhs2013[(Ogun_ndhs2013['v012']&gt;=15) &amp; (Ogun_ndhs2013['v025']== "Urban")]<br/>age_urban=age_urban['v012']<br/>age_urban.mean(), age_urban.std()</span><span id="4329" class="lp ks hi mf b fi mo mk l ml mm">#Mean age of women in rural areas of Ogun state</span><span id="f3f1" class="lp ks hi mf b fi mo mk l ml mm">age_rural=Ogun_ndhs2013[(Ogun_ndhs2013['v012']&gt;=15) &amp; (Ogun_ndhs2013['v025']== "Rural")]<br/>age_rural=age_rural['v012']<br/>age_rural.mean(), age_rural.std()</span></pre><p id="fe37" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">农村和城市被调查者平均年龄的两个独立样本t检验统计值为2.82，p_value=0.004。自p _ value&lt;0.05; there is a significant mean difference between the mean age of rural and urban respondents.</p><pre class="iy iz ja jb fd me mf mg mh aw mi bi"><span id="3ae1" class="lp ks hi mf b fi mj mk l ml mm">stats.ttest_ind(age_rural,age_urban)</span></pre><p id="1a7f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">4.1.2.3配对样本t检验均值差异检验</strong>:这是一种双变量参数方法，用于检验在两个不同时间从同一组受访者或观察值中收集的同一变量是否存在显著的均值差异。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mt"><img src="../Images/e010450805ff3bc241783cfd0a8c6701.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*18wpocx5zTJ0nc6m3oqO5w.png"/></div></div></figure><p id="7b38" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">让我们举两个场景例子——</p><p id="41fb" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">第一种情况:您可能想要测试一组学生在大学第一年的生物化学平均分与他们在第二年的生物化学平均分是否不同。</p><p id="9f2d" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">第二种情况:你可能想测试一组孩子的写作平均分和同一组孩子的阅读平均分是否不同。</p><p id="0629" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我们将在分析中使用两个相似的特征，来反映如何使用配对样本t检验。不与受访者生活在一起的受访者女儿的数量(v 203)；以及与受访者生活在一起的受访者女儿的数量(v205)。我们将测试与她一起生活的被调查者的女儿的平均数是否不同于那些不与她一起生活的被调查者的平均数。</p><p id="ff48" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">导入所需的库和数据集</p><p id="c7c2" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">从奥贡NDHS 2013年数据中提取v205和v203作为系列</p><pre class="iy iz ja jb fd me mf mg mh aw mi bi"><span id="5556" class="lp ks hi mf b fi mj mk l ml mm">#import Ogun NDHS 2013 dataset into pandas<br/>import pandas as pd<br/>path=r'B:\..\..\Ogun_NDHS_2013.dta'<br/>Ogun_ndhs2013=pd.read_stata(path)</span><span id="41b2" class="lp ks hi mf b fi mo mk l ml mm">Variables_needed=['v313','v025', 'v012', 'v013', 'v203', 'v205', 'v218', 'v106', 'v190'] # These are the only variables needed</span><span id="3ac3" class="lp ks hi mf b fi mo mk l ml mm">Ogun_ndhs2013=Ogun_ndhs2013[Variables_needed]</span><span id="99f7" class="lp ks hi mf b fi mo mk l ml mm">import numpy as np<br/>from scipy import stats<br/>from scipy.stats import ttest_rel</span></pre><p id="22b6" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">计算配对样本t检验统计量和p值</p><pre class="iy iz ja jb fd me mf mg mh aw mi bi"><span id="b453" class="lp ks hi mf b fi mj mk l ml mm">daughter_home=Ogun_ndhs2013['v205']<br/>daughter_away=Ogun_ndhs2013['v203']</span></pre><p id="de07" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">配对样本t检验统计值为9.84，p_value=0.00。自p_value &lt;0.05; there is a significant mean difference between the mean number of respondents’ daughters that live at home and those that are living away.</p><pre class="iy iz ja jb fd me mf mg mh aw mi bi"><span id="1c2e" class="lp ks hi mf b fi mj mk l ml mm">ttest_rel(daughter_home,daughter_away, nan_policy='omit')</span><span id="d7d2" class="lp ks hi mf b fi mo mk l ml mm"># The omit means that ignore pairs with missing values in the #analysis. <br/>#Other options are: propagate (the default argument). With this, if #there are missing pairs or one part of a pair, the program will #return "nan")</span></pre><p id="524d" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj"> 4.1.3 Pearson相关关系检验:</strong>这是一种双变量参数方法，用于检验两个数值变量、预测值和目标特征之间是否存在线性关系。相关值的范围从-1到0(零)到+1。如果相关统计的值在1和0之间，那么两个变量之间的关系是正的，在上下文中，这意味着当一个变量增加时，另一个也在增加，如果一个变量减少，另一个也在减少。如果相关统计的值是负的，也就是说，如果它的值在0和-1之间，那么这两个变量具有负的关系。从上下文来看，这意味着当一个变量增加时，另一个变量减少，反之亦然。如果相关统计值为零，即如果其值为0，则两个变量没有关系(线性)。从上下文来看，这意味着一个方面的增加或减少与另一方面的增加或减少无关。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mu"><img src="../Images/0cca766f38c96e0707de0a16623c2895.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e7V4pe_kFW6IQ0ZMhh2QCg.png"/></div></div></figure><p id="c82b" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">请注意，相关统计量通常被称为相关系数，用r表示。让我们给出两个适合使用相关统计量的场景示例。</p><p id="c994" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在这种情况下，数值预测要素将是-年龄(v012)，而数值目标要素将是-活孩子数(v218)</p><p id="565e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">导入所需的库和数据集</p><p id="3851" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">从奥贡NDHS 2013数据中取出v012和v218作为系列</p><pre class="iy iz ja jb fd me mf mg mh aw mi bi"><span id="bbd2" class="lp ks hi mf b fi mj mk l ml mm">#import Ogun NDHS 2013 dataset into pandas<br/>import pandas as pd<br/>path=r'B:\..\..\Ogun_NDHS_2013.dta'<br/>Ogun_ndhs2013=pd.read_stata(path)</span><span id="f161" class="lp ks hi mf b fi mo mk l ml mm">Variables_needed=['v313','v025', 'v012', 'v013', 'v203', 'v205', 'v218', 'v106', 'v190'] # These are the only variables needed</span><span id="4e3e" class="lp ks hi mf b fi mo mk l ml mm">Ogun_ndhs2013=Ogun_ndhs2013[Variables_needed]</span><span id="2493" class="lp ks hi mf b fi mo mk l ml mm">import numpy as np<br/>from scipy import stats<br/>from scipy.stats import pearsonr</span></pre><p id="0e30" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">计算皮尔逊相关统计量及其相关的p值</p><pre class="iy iz ja jb fd me mf mg mh aw mi bi"><span id="0e21" class="lp ks hi mf b fi mj mk l ml mm">Age_X=Ogun_ndhs2013['v012']<br/>No_Living_Chid_Y=Ogun_ndhs2013['v218']</span></pre><p id="3ea3" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">皮尔逊相关统计值为0.7，p_value=0.00。自p_value &lt;0.05; there is a significant strong positive relationship between the age of respondents and the number of their living children.</p><pre class="iy iz ja jb fd me mf mg mh aw mi bi"><span id="4517" class="lp ks hi mf b fi mj mk l ml mm">stats.pearsonr(Age_X, No_Living_Chid_Y)</span></pre><p id="ed6e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj"> 4.1.4线性关系的回归检验:</strong>这是一种双变量参数方法，用于计算和估计存在于两个数值特征(目标特征(Y))之间的线性回归线；预测特征(X))，其被发现是相关的。<br/>回归线用— Y= <strong class="jq hj"> M </strong> X+ <strong class="jq hj"> C </strong>表示。它用于计算两个基本参数，即:<br/> 1。<strong class="jq hj"> M </strong>，称为回归线的<strong class="jq hj">梯度或斜率</strong>。它被定义为X每增加一个单位Y值的增加(Y的变化/X的变化)<br/> 2。<strong class="jq hj"> C </strong>，称为回归线的<strong class="jq hj">截距</strong>。它被定义为X=0时Y的值。</p><p id="9b1f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在这种情况下，数值预测要素将是-年龄(v012)，而数值目标要素将是-活孩子数(v218)</p><p id="603a" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">导入所需的库和数据集</p><p id="29bc" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">从奥贡NDHS 2013数据中取出v012和v218作为系列</p><pre class="iy iz ja jb fd me mf mg mh aw mi bi"><span id="89c7" class="lp ks hi mf b fi mj mk l ml mm">#import Ogun NDHS 2013 dataset into pandas<br/>import pandas as pd<br/>path=r'B:\..\..\Ogun_NDHS_2013.dta'<br/>Ogun_ndhs2013=pd.read_stata(path)</span><span id="4fbb" class="lp ks hi mf b fi mo mk l ml mm">Variables_needed=['v313','v025', 'v012', 'v013', 'v203', 'v205', 'v218', 'v106', 'v190'] # These are the only variables needed</span><span id="5980" class="lp ks hi mf b fi mo mk l ml mm">Ogun_ndhs2013=Ogun_ndhs2013[Variables_needed]</span><span id="dcd0" class="lp ks hi mf b fi mo mk l ml mm">import numpy as np<br/>from scipy import stats<br/>from scipy.stats import linregress</span></pre><p id="07f5" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">计算回归统计量和p值</p><pre class="iy iz ja jb fd me mf mg mh aw mi bi"><span id="1619" class="lp ks hi mf b fi mj mk l ml mm">Age_X=Ogun_ndhs2013['v012']<br/>No_Living_Chid_Y=Ogun_ndhs2013['v218']</span></pre><p id="8003" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">回归系数为0.155，p_value=0.00。由于p_value &lt;0.05; the change in the number of children living with respondents for every unit increase in the age of respondents is significant. Also, R-squared=0.49 means, 49% of the variance observed in the Target feature(number of children living with respondents) is explained by the variance of the Predictor feature(age of respondents)</p><pre class="iy iz ja jb fd me mf mg mh aw mi bi"><span id="998d" class="lp ks hi mf b fi mj mk l ml mm">slope, intercept, r_value, p_value, std_err = stats.linregress(Age_X, No_Living_Chid_Y)</span><span id="b949" class="lp ks hi mf b fi mo mk l ml mm"># r squared is the coefficient of determination, and tells stands between 0 and 1<br/>print ("r-squared:", r_value**2)</span></pre><p id="2369" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj"> 4.1.4单向方差分析(ANOVA): </strong>这是一种双变量参数方法，用于测试在标称预测特征/变量(具有两个以上的响应类别)的响应类别中，数值目标特征(独立变量)的平均值是否存在显著差异。T检验和ANOVA之间的区别在于，T检验中的预测特征是两个响应类别的分类特征，而ANOVA中的预测特征有两个以上的响应类别。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mv"><img src="../Images/c3585f75fe816a7e96f51ad973e77391.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RBZO2Kqsfyaphl4uQBeZFw.png"/></div></div></figure><p id="c48c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在这种情况下，数值预测特征将是年龄(v012)，而数值目标特征将是回答者的教育状况(v106)</p><p id="942e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">导入所需的库和数据集</p><p id="0dad" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">根据受教育程度计算受访者的年龄分布</p><pre class="iy iz ja jb fd me mf mg mh aw mi bi"><span id="43ae" class="lp ks hi mf b fi mj mk l ml mm">#import Ogun NDHS 2013 dataset into pandas<br/>import pandas as pd<br/>path=r'B:\..\..\Ogun_NDHS_2013.dta'<br/>Ogun_ndhs2013=pd.read_stata(path)</span><span id="545a" class="lp ks hi mf b fi mo mk l ml mm">Variables_needed=['v313','v025', 'v012', 'v013', 'v203', 'v205', 'v218', 'v106', 'v190'] # These are the only variables needed</span><span id="4726" class="lp ks hi mf b fi mo mk l ml mm">Ogun_ndhs2013=Ogun_ndhs2013[Variables_needed]</span><span id="470e" class="lp ks hi mf b fi mo mk l ml mm">import numpy as np<br/>from scipy import stats<br/>from scipy.stats import f_oneway</span></pre><p id="dda4" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">计算单因素方差分析统计量和p值</p><pre class="iy iz ja jb fd me mf mg mh aw mi bi"><span id="6bde" class="lp ks hi mf b fi mj mk l ml mm">#Age distribution of respondents that have no education</span><span id="7ccb" class="lp ks hi mf b fi mo mk l ml mm">Only_NoEducation=Ogun_ndhs2013[(Ogun_ndhs2013['v106']=='No education') &amp; (Ogun_ndhs2013['v012']&gt;=15)]<br/>NoEducation_educ_age=Only_NoEducation['v012']</span><span id="778f" class="lp ks hi mf b fi mo mk l ml mm">#Age distribution of respondents that have primary education</span><span id="24d9" class="lp ks hi mf b fi mo mk l ml mm">Only_primary_education=Ogun_ndhs2013[(Ogun_ndhs2013['v106']=='Primary') &amp; (Ogun_ndhs2013['v012']&gt;=15)]<br/>primary_educ_age=Only_primary_education['v012']</span><span id="0f0b" class="lp ks hi mf b fi mo mk l ml mm">#Age distribution of respondents that have secondary education</span><span id="69e9" class="lp ks hi mf b fi mo mk l ml mm">Only_secondary_education=Ogun_ndhs2013[(Ogun_ndhs2013['v106']=='Secondary') &amp; (Ogun_ndhs2013['v012']&gt;=15)]<br/>secondary_educ_age=Only_secondary_education['v012']</span><span id="173d" class="lp ks hi mf b fi mo mk l ml mm">#Age distribution of respondents that have higher education</span><span id="4395" class="lp ks hi mf b fi mo mk l ml mm">Only_Higher=Ogun_ndhs2013[(Ogun_ndhs2013['v106']=='Higher') &amp; (Ogun_ndhs2013['v012']&gt;=15)]<br/>Higher_educ_age=Only_Higher['v012']</span></pre><p id="9686" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">ANOVA统计值为16.4，p_value=0.00。由于p_value &lt;0.05, there is a mean age difference, at least between two respondents by educational status.</p><pre class="iy iz ja jb fd me mf mg mh aw mi bi"><span id="b776" class="lp ks hi mf b fi mj mk l ml mm">f_oneway(secondary_educ_age,primary_educ_age, NoEducation_educ_age, Higher_educ_age)</span></pre><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mw"><img src="../Images/95c5b54769e51e0199714064e4a4eb95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_pPwLUHmo5VoTK65vP90Xw.png"/></div></div></figure><p id="8bcb" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">4.2. Non-parametric Inferential Bivariate Analysis</p><h2 id="0442" class="lp ks hi bd kt lq lr ls kx lt lu lv lb jx lw lx ld kb ly lz lf kf ma mb lh mc bi translated"><strong class="jq hj"> 4.2.1 Man-Whitney U检验:</strong>这是一种非参数方法，类似于双样本独立样本t检验，只是在数据是有序的或排序的情况下使用。当没有假设(区间或序数)预测值特征为正态分布或分布未知时，它可用作独立样本t检验的替代。当观察值仅为8时，仍可使用Mann-Whitney U检验。虽然曼恩-惠特尼U检验的统计功效比t检验小；它在更多扭曲数据的情况下更强，包括那些具有高异常值的数据。Whitney-Manny假设正在比较的两个样本的方差相等，否则即使数据是有序的，也可能不适合使用。</h2><p id="1d7e" class="pw-post-body-paragraph jo jp hi jq b jr lj ij jt ju lk im jw jx ll jz ka kb lm kd ke kf ln kh ki kj hb bi translated">Mann-Whitney的零假设是:从一个样本中随机抽取的观察值大于从另一个样本中随机抽取的观察值的概率是0.5。简单来说，零假设提出两个样本的中位数相等或相同。</p><p id="df87" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在我们分析的这个实例中，目标要素将是-年龄(v012)，而二元预测要素将是-居住地类型(v025)。</p><p id="3faf" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">导入所需的库和数据集</p><p id="e69e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">从Ogun NDHS 2013年数据中获取按居住地类型划分的受访者年龄分布，作为系列</p><pre class="iy iz ja jb fd me mf mg mh aw mi bi"><span id="6657" class="lp ks hi mf b fi mj mk l ml mm">#import Ogun NDHS 2013 dataset into pandas<br/>import pandas as pd<br/>path=r'B:\..\..\Ogun_NDHS_2013.dta'<br/>Ogun_ndhs2013=pd.read_stata(path)</span><span id="b460" class="lp ks hi mf b fi mo mk l ml mm">Variables_needed=['v313','v025', 'v012', 'v013', 'v203', 'v205', 'v218', 'v106', 'v190'] # These are the only variables needed</span><span id="a9f1" class="lp ks hi mf b fi mo mk l ml mm">Ogun_ndhs2013=Ogun_ndhs2013[Variables_needed]</span><span id="fdcb" class="lp ks hi mf b fi mo mk l ml mm">import numpy as np<br/>from scipy import stats<br/>from scipy.stats import mannwhitneyu</span></pre><p id="729a" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">计算Mann_whitney U检验统计量及其相关的p值</p><pre class="iy iz ja jb fd me mf mg mh aw mi bi"><span id="aef6" class="lp ks hi mf b fi mj mk l ml mm">#Rural respondents' age data as series</span><span id="35f6" class="lp ks hi mf b fi mo mk l ml mm">age_urban=Ogun_ndhs2013[(Ogun_ndhs2013['v012']&gt;=15) &amp; (Ogun_ndhs2013['v025']== "Urban")]<br/>age_urban=age_urban['v012']<br/> age_urban.std()</span><span id="4604" class="lp ks hi mf b fi mo mk l ml mm">#Urban respondents' age data as series</span><span id="6989" class="lp ks hi mf b fi mo mk l ml mm">age_rural=Ogun_ndhs2013[(Ogun_ndhs2013['v012']&gt;=15) &amp; (Ogun_ndhs2013['v025']== "Rural")]<br/>age_rural=age_rural['v012']<br/> age_rural.std()</span></pre><p id="5c9f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">曼-惠特尼统计值为42368，p_value=0.002。因为p_value &lt;0.05; so there is a significant age difference between women in urban and rural areas.</p><pre class="iy iz ja jb fd me mf mg mh aw mi bi"><span id="aecc" class="lp ks hi mf b fi mj mk l ml mm">stats.mannwhitneyu(age_rural,age_urban)</span></pre><p id="21d2" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj"> 4.2.2 Spearman等级相关</strong>:这是一种非参数方法，类似于皮尔逊相关统计。该统计数据称为Spearman等级系数，用于测量两个变量(预测要素(X)和目标要素(Y))之间关系的强度和方向。为了实现，它要求两个变量中的任何一个都具有顺序属性，因此它们可以是顺序的，也可以是连续的(间隔、比率)。相似等级的特征将具有高的Spearman等级相关系数，反之亦然。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mx"><img src="../Images/ef0102405f272cebc89c98edecafbf29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F_2eNeaWdV6uhaZcfe2JKA.png"/></div></div></figure><p id="be30" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">Pearson相关的统计能力比spearman秩相关强，但是，它适用于两个变量的分布不正态或偏斜的情况。</p><p id="9ee8" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">此外，spearman等级相关测量两个变量之间的单调关系，而Pearson统计测量两个变量之间的线性关系。单调关系的度量使用-1到+1的范围，如spearman相关系数。spearman的p值在样本量为500或更多时更可靠。当样本量为8时，检验零假设的Spearman秩相关的统计可靠性至少是可以接受的。虽然您仍然可以对少于8个样本大小的数据进行spearman等级相关，但是它的统计功效接近于零。</p><p id="394c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">Spearman秩相关的零假设是:两个特征之间没有单调关联。单调关系是指两个变量以恒定的速率向同一方向或相反方向移动。</p><p id="94da" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我们将使用—年龄(v012)作为预测特征，使用—存活儿童数量(v218)作为目标特征，假设他们的分布是偏斜的或未知的，但不是正态的。</p><p id="36eb" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">导入所需的库和数据集</p><p id="c8fc" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">从奥贡NDHS 2013年数据中提取v012和v218作为系列</p><pre class="iy iz ja jb fd me mf mg mh aw mi bi"><span id="cbeb" class="lp ks hi mf b fi mj mk l ml mm">#import Ogun NDHS 2013 dataset into pandas<br/>import pandas as pd<br/>path=r'B:\..\..\Ogun_NDHS_2013.dta'<br/>Ogun_ndhs2013=pd.read_stata(path)</span><span id="9d80" class="lp ks hi mf b fi mo mk l ml mm">Variables_needed=['v313','v025', 'v012', 'v013', 'v203', 'v205', 'v218', 'v106', 'v190'] # These are the only variables needed</span><span id="6ede" class="lp ks hi mf b fi mo mk l ml mm">Ogun_ndhs2013=Ogun_ndhs2013[Variables_needed]</span><span id="90ca" class="lp ks hi mf b fi mo mk l ml mm">import numpy as np<br/>from scipy import stats<br/>from scipy.stats import spearmanr</span></pre><p id="9281" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">计算Spearman等级相关统计量及其相关的p值</p><pre class="iy iz ja jb fd me mf mg mh aw mi bi"><span id="d233" class="lp ks hi mf b fi mj mk l ml mm">Age_X=Ogun_ndhs2013['v012']<br/>No_Living_Chid_Y=Ogun_ndhs2013['v218']</span></pre><p id="fa15" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">spearman等级相关统计值为0.72，p值=0.00。因为p _ value&lt;0.05; there is a significant positive monotonic relationship between the age of women and their number of living children.</p><pre class="iy iz ja jb fd me mf mg mh aw mi bi"><span id="ddc7" class="lp ks hi mf b fi mj mk l ml mm">stats.spearmanr(Age_X, No_Living_Chid_Y)</span></pre><p id="55d3" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">4 . 2 . 3 Kruskal Wallis</strong>:这是一种非参数方法，类似于方差分析(ANOVA)，当预测特征(X)有两个以上的响应类别时，它是Mann-Whitney检验的替代方法。当每个响应类别至少有5个观察值时，Kruskal遵循卡方分布。它计算预测特征的每个响应类别的目标特征(Y)的中值，然后比较它们是否相同。值得注意的是，Kruskal Wallis也用于比例参数比较。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es my"><img src="../Images/b329e5680f2669bb756cb4580247a623.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rY9rNdNfy_NeCWLzsTPEuQ.png"/></div></div></figure><p id="dab9" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">注意，Kruskal Wallis假设响应类别的方差是相同的。在方差假设不成立的情况下，应该使用情绪统计。</p><p id="e666" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">Kruskal-Wallis的零假设是:目标特征的响应类别的预测特征的中值相同或相等。</p><p id="fdb0" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我们将使用在计算单向方差分析(单向ANOVA)中使用的两个变量，假设它们的分布是偏斜的、未知的，但不是正态的。</p><p id="7687" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在这种情况下，数值预测特征将是年龄(v012)，而数值目标特征将是回答者的教育状况(v106)</p><p id="14ac" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">导入所需的库和数据集</p><p id="e995" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">从Ogun NDHS 2013年数据中获取按受教育程度分类的受访者年龄分布，作为系列</p><pre class="iy iz ja jb fd me mf mg mh aw mi bi"><span id="0d39" class="lp ks hi mf b fi mj mk l ml mm">#import Ogun NDHS 2013 dataset into pandas<br/>import pandas as pd<br/>path=r'B:\..\..\Ogun_NDHS_2013.dta'<br/>Ogun_ndhs2013=pd.read_stata(path)</span><span id="04bf" class="lp ks hi mf b fi mo mk l ml mm">Variables_needed=['v313','v025', 'v012', 'v013', 'v203', 'v205', 'v218', 'v106', 'v190'] # These are the only variables needed</span><span id="8cef" class="lp ks hi mf b fi mo mk l ml mm">Ogun_ndhs2013=Ogun_ndhs2013[Variables_needed]</span><span id="8e3e" class="lp ks hi mf b fi mo mk l ml mm">import numpy as np<br/>from scipy import stats<br/>from scipy.stats import kruskal</span></pre><p id="3c55" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">计算Kruskal Wallis统计量和p值</p><pre class="iy iz ja jb fd me mf mg mh aw mi bi"><span id="fabb" class="lp ks hi mf b fi mj mk l ml mm">#Age distribution of respondents that have no education<br/>Only_NoEducation=Ogun_ndhs2013[(Ogun_ndhs2013['v106']=='No education') &amp; (Ogun_ndhs2013['v012']&gt;=15)]<br/>NoEducation_educ_age=Only_NoEducation['v012']</span><span id="766e" class="lp ks hi mf b fi mo mk l ml mm">#Age distribution of respondents that have primary education<br/>Only_primary_education=Ogun_ndhs2013[(Ogun_ndhs2013['v106']=='Primary') &amp; (Ogun_ndhs2013['v012']&gt;=15)]<br/>primary_educ_age=Only_primary_education['v012']</span><span id="86d4" class="lp ks hi mf b fi mo mk l ml mm">#Age distribution of respondents that have secondary education<br/>Only_secondary_education=Ogun_ndhs2013[(Ogun_ndhs2013['v106']=='Secondary') &amp; (Ogun_ndhs2013['v012']&gt;=15)]<br/>secondary_educ_age=Only_secondary_education['v012']</span><span id="8077" class="lp ks hi mf b fi mo mk l ml mm">#Age distribution of respondents that have higher education<br/>Only_Higher=Ogun_ndhs2013[(Ogun_ndhs2013['v106']=='Higher') &amp; (Ogun_ndhs2013['v012']&gt;=15)]<br/>Higher_educ_age=Only_Higher['v012']</span></pre><p id="af20" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">克鲁斯卡尔瓦利斯统计值为46.33，p_value=0.00。自p_value &lt;0.05; there is a significant difference in median age among, at least, two women educational groups.</p><pre class="iy iz ja jb fd me mf mg mh aw mi bi"><span id="15e9" class="lp ks hi mf b fi mj mk l ml mm">stats.kruskal(secondary_educ_age,primary_educ_age, NoEducation_educ_age, Higher_educ_age)</span></pre><p id="b6af" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj"> 4.2.4起。情绪中值测试</strong>:这是一种非参数方法，用于测试有序目标特征(Y)在两个或多个标称/二元预测特征(X)的响应类别中是否具有相同的中值。也就是说，它测试目标特征(Y)的响应类别的中值在标称/二元预测特征(X)的不同响应类别中是否相同。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es my"><img src="../Images/b329e5680f2669bb756cb4580247a623.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rY9rNdNfy_NeCWLzsTPEuQ.png"/></div></div></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mz"><img src="../Images/e49f0dc1ea45e7ed5ce758b90cf75dcd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xS50qrKkPQ18vKB_NWN_fw.png"/></div></div></figure><p id="56fd" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">计算情绪中值测试要求计算目标特征的总体中值。然后，目标特征的中值也通过预测特征的响应类别来计算。然后将每个响应类别的中值与总体中值进行比较。基于每个响应类别的大中值和中值之间的比较结果形成列联表。<br/>列联表的值用于计算情绪中位数检验统计量及其p值。这种计算方法使得mood中位数检验不同于Mann-Whitney和Kruskal-Wallis中位数检验。</p><p id="cf7c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">情绪中位数强于惠特尼-曼尼和克鲁斯卡尔-沃利斯的数据，有离群值。Kruskal-Wallis和Mann-Whitney都比mood中位数检验具有更强的统计能力，适用于中等规模到更大规模的样本数据，反之亦然。情绪中位数也适用于同质性不成立的情况，如Kruskal-Wallis假设的同质性</p><p id="eee6" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">情绪中值的零假设是:目标特征的响应类别的预测特征的中值相对于总体平均值是相同或相等的</p><p id="5d33" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在这种情况下，我们会假设年龄是一个序数特征，因为在一些现实生活中，它被认为是序数。</p><p id="5f35" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在这种情况下，预测特征将是年龄(v012)，而目标特征将是回答者的教育状况(v106)</p><p id="7296" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">导入所需的库和数据集</p><p id="1e37" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">从Ogun NDHS 2013年数据中获取按受教育程度分类的受访者年龄分布，作为系列</p><pre class="iy iz ja jb fd me mf mg mh aw mi bi"><span id="d70e" class="lp ks hi mf b fi mj mk l ml mm">#import Ogun NDHS 2013 dataset into pandas<br/>import pandas as pd<br/>path=r'B:\..\..\Ogun_NDHS_2013.dta'<br/>Ogun_ndhs2013=pd.read_stata(path)</span><span id="abae" class="lp ks hi mf b fi mo mk l ml mm">Variables_needed=['v313','v025', 'v012', 'v013', 'v203', 'v205', 'v218', 'v106', 'v190'] # These are the only variables needed</span><span id="dbe4" class="lp ks hi mf b fi mo mk l ml mm">Ogun_ndhs2013=Ogun_ndhs2013[Variables_needed]</span><span id="3aa2" class="lp ks hi mf b fi mo mk l ml mm">import numpy as np<br/>from scipy import stats<br/>from scipy.stats import median_test</span></pre><p id="af89" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">计算情绪中值统计和p值</p><pre class="iy iz ja jb fd me mf mg mh aw mi bi"><span id="b9a0" class="lp ks hi mf b fi mj mk l ml mm">#Age distribution of respondents that have no education<br/>Only_NoEducation=Ogun_ndhs2013[(Ogun_ndhs2013['v106']=='No education') &amp; (Ogun_ndhs2013['v012']&gt;=15)]<br/>NoEducation_educ_age=Only_NoEducation['v012']</span><span id="2fd4" class="lp ks hi mf b fi mo mk l ml mm">#Age distribution of respondents that have primary education<br/>Only_primary_education=Ogun_ndhs2013[(Ogun_ndhs2013['v106']=='Primary') &amp; (Ogun_ndhs2013['v012']&gt;=15)]<br/>primary_educ_age=Only_primary_education['v012']</span><span id="7edc" class="lp ks hi mf b fi mo mk l ml mm">#Age distribution of respondents that have secondary education<br/>Only_secondary_education=Ogun_ndhs2013[(Ogun_ndhs2013['v106']=='Secondary') &amp; (Ogun_ndhs2013['v012']&gt;=15)]<br/>secondary_educ_age=Only_secondary_education['v012']</span><span id="f87d" class="lp ks hi mf b fi mo mk l ml mm">#Age distribution of respondents that have higher education<br/>Only_Higher=Ogun_ndhs2013[(Ogun_ndhs2013['v106']=='Higher') &amp; (Ogun_ndhs2013['v012']&gt;=15)]<br/>Higher_educ_age=Only_Higher['v012']</span></pre><p id="07d8" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">情绪中位数统计值为29.72，p_value=0.00。自p_value &lt;0.05; there is a significant difference in the median age, at least, among two women educational groups or samples.</p><pre class="iy iz ja jb fd me mf mg mh aw mi bi"><span id="f4ad" class="lp ks hi mf b fi mj mk l ml mm">stat, p, med, tbl = median_test(secondary_educ_age,primary_educ_age, NoEducation_educ_age, Higher_educ_age)</span></pre><p id="2504" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj"> 4.2.5。古德曼和克鲁斯卡的伽马:</strong>这是一种非参数方法，衡量两个排名变量之间的关联，它只是评估两个排名变量之间的排名相关性。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es my"><img src="../Images/facd4a7fbe3db9c3bddc8890837daa29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DgQ6vzL9x3crJf-T8WzrKg.png"/></div></div></figure><p id="2f33" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">对于要使用的Goodman和Kruskal伽马统计，必须满足两个假设，即:两个变量必须是有序的，并且两个变量之间的关系必须是单调的。单调关系是指两个变量以恒定的速率向同一方向或相反方向移动。通常不可能用统计方法来估计单调关系，但图表可以粗略地直观地显示出来。相比之下，对于线性关系；这两个变量以相同或相反的方向运动，但速度不同。</p><p id="7ad7" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">Goodman和Kruska的gamma可用于替代Spearman秩相关、Wilcoxon双样本检验以及两个变量的观察值具有并列秩值时的符号检验。并列秩是指两个不同样本的观测值具有相同的秩值。</p><p id="eee7" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">古德曼和克鲁斯卡的伽马统计值为-1表示负相关；而Goodman和Kruska的γ统计的+1值表示正相关。零值意味着没有关系。</p><p id="ba4f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">值得注意的是，目前python中没有用于计算Goodman和Kruska伽马统计量的包或库。我们将使用P.Stikker开发的函数来解决这个问题。Stikker的方法与STATA Goodman和Kruskal的方法输出进行了比较，发现是相同的。请注意，P.Stikker的原文在这里已被修改，以适应我们的需要。</p><p id="ecca" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在这种情况下，序数预测要素将是-分类年龄(v013)，而序数目标要素将是-受访者的财富指数(v190)</p><p id="55ed" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">从python中导入所需的库，并添加P.Stikker开发的函数</p><p id="14e1" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">添加P.Stikker的Gamma和Kruskals开发的python函数</p><pre class="iy iz ja jb fd me mf mg mh aw mi bi"><span id="5ad7" class="lp ks hi mf b fi mj mk l ml mm">#import Ogun NDHS 2013 dataset into pandas<br/>import pandas as pd<br/>path=r'B:\..\..\Ogun_NDHS_2013.dta'<br/>Ogun_ndhs2013=pd.read_stata(path)</span><span id="1dcf" class="lp ks hi mf b fi mo mk l ml mm">Variables_needed=['v313','v025', 'v012', 'v013', 'v203', 'v205', 'v218', 'v106', 'v190'] # These are the only variables needed</span><span id="e166" class="lp ks hi mf b fi mo mk l ml mm">Ogun_ndhs2013=Ogun_ndhs2013[Variables_needed]</span><span id="e702" class="lp ks hi mf b fi mo mk l ml mm">import numpy as np<br/>from scipy import stats<br/>from scipy.stats import norm</span></pre><p id="5d30" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">评估这两个特征，看是否需要预处理</p><pre class="iy iz ja jb fd me mf mg mh aw mi bi"><span id="a3ea" class="lp ks hi mf b fi mj mk l ml mm">def goodmanKruskalgamma(data, row_feature, column_feature):<br/>    myCrosstable = pd.crosstab(data[row_feature], data[column_feature])<br/>    <br/>    nRows = myCrosstable.shape[0]<br/>    nCols = myCrosstable.shape[1]<br/>    <br/>    <br/>    C = [[0 for x in range(nCols)] for y in range(nRows)]</span><span id="ed01" class="lp ks hi mf b fi mo mk l ml mm"># top left part<br/>    for i in range(nRows):<br/>        for j in range(nCols):<br/>            h = i-1<br/>            k = j-1        <br/>            if h&gt;=0 and k&gt;=0:            <br/>                for p in range(h+1):<br/>                    for q in range(k+1):<br/>                        C[i][j] = C[i][j] + list(myCrosstable.iloc[p])[q]</span><span id="63c7" class="lp ks hi mf b fi mo mk l ml mm"># bottom right part                    <br/>    for i in range(nRows):<br/>        for j in range(nCols):<br/>            h = i+1<br/>            k = j+1        <br/>            if h&lt;nRows and k&lt;nCols:            <br/>                for p in range(h, nRows):<br/>                    for q in range(k, nCols):<br/>                        C[i][j] = C[i][j] + list(myCrosstable.iloc[p])[q]<br/>                        <br/>    D = [[0 for x in range(nCols)] for y in range(nRows)]</span><span id="bd0d" class="lp ks hi mf b fi mo mk l ml mm"># bottom left part<br/>    for i in range(nRows):<br/>        for j in range(nCols):<br/>            h = i+1<br/>            k = j-1        <br/>            if h&lt;nRows and k&gt;=0:            <br/>                for p in range(h, nRows):<br/>                    for q in range(k+1):<br/>                        D[i][j] = D[i][j] + list(myCrosstable.iloc[p])[q]</span><span id="944e" class="lp ks hi mf b fi mo mk l ml mm"># top right part                    <br/>    for i in range(nRows):<br/>        for j in range(nCols):<br/>            h = i-1<br/>            k = j+1        <br/>            if h&gt;=0 and k&lt;nCols:            <br/>                for p in range(h+1):<br/>                    for q in range(k, nCols):<br/>                        D[i][j] = D[i][j] + list(myCrosstable.iloc[p])[q]</span><span id="3435" class="lp ks hi mf b fi mo mk l ml mm">P = 0<br/>    Q = 0<br/>    for i in range(nRows):<br/>        for j in range(nCols):<br/>            P = P + C[i][j] * list(myCrosstable.iloc[i])[j]<br/>            Q = Q + D[i][j] * list(myCrosstable.iloc[i])[j]<br/>               <br/>    GKgamma = (P - Q) / (P + Q)<br/>    <br/>    n = myCrosstable.sum().sum()<br/>    <br/>    Z1 = GKgamma * ((P + Q) / (n * (1 - GKgamma**2)))**0.5<br/>    <br/>    forASE_R = 0<br/>    forASE_SPSS = 0<br/>    for i in range(nRows):<br/>        for j in range(nCols):<br/>            forASE_R = forASE_R + list(myCrosstable.iloc[i])[j] * (Q * C[i][j] - P * D[i][j])**2<br/>            forASE_SPSS = forASE_SPSS + list(myCrosstable.iloc[i])[j] * (C[i][j] - D[i][j])**2</span><span id="3df3" class="lp ks hi mf b fi mo mk l ml mm">ASE_R = 4 * (forASE_R)**0.5 / (P + Q)**2<br/>    ASE_SPSS = 2 * (forASE_SPSS - (P - Q)**2 / n)**0.5 / (P + Q)        <br/>    Z_R = GKgamma / ASE_R<br/>    Z_SPSS = GKgamma / ASE_SPSS<br/>    <br/>    from scipy.stats import norm<br/>    <br/>    p1 = norm.sf(Z1)<br/>    p2_R = norm.sf(Z_R)<br/>    p3_SPSS = norm.sf(Z_SPSS)<br/>            <br/>    return print('gamma statistic is %0.3f, p_value for R is %0.3f, ASE for R is %0.3f, p_value for spss is %0.3f, ASE for spss is %0.3f' %(GKgamma,p2_R,Z_R,p3_SPSS,Z_SPSS))</span></pre><p id="6419" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">预处理财富指数(v190)通过重新编码为三个响应类别(富裕、中等、贫穷)，目前有五个响应类别(最富裕、较富裕、中等、较贫穷和最贫穷)</p><pre class="iy iz ja jb fd me mf mg mh aw mi bi"><span id="b223" class="lp ks hi mf b fi mj mk l ml mm">Ogun_ndhs2013['v013'].value_counts()</span><span id="62a4" class="lp ks hi mf b fi mo mk l ml mm">Out[4]:</span><span id="fda8" class="lp ks hi mf b fi mo mk l ml mm">25-29    122<br/>30-34    108<br/>35-39     88<br/>15-19     88<br/>20-24     82<br/>40-44     80<br/>45-49     62<br/>Name: v013, dtype: int64</span><span id="450b" class="lp ks hi mf b fi mo mk l ml mm">Ogun_ndhs2013['v190'].value_counts()</span><span id="937e" class="lp ks hi mf b fi mo mk l ml mm">Richest    237<br/>Richer     237<br/>Middle     114<br/>Poorer      40<br/>Poorest      2<br/>Name: v190, dtype: int64</span></pre><p id="bf01" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">计算伽玛和克鲁斯卡尔统计所需的交叉表</p><pre class="iy iz ja jb fd me mf mg mh aw mi bi"><span id="2ab2" class="lp ks hi mf b fi mj mk l ml mm">#We will recode into: Rich, Middle, and Poor<br/>recode_v190 =  { "v190": <br/>                             {"Richest": 'Rich',  <br/>                              "Richer": 'Rich',  <br/>                              "Middle": 'Middle',  <br/>                              "Poorer": 'Poor' ,<br/>                              "Poorest": 'Poor'}<br/>             }</span><span id="c101" class="lp ks hi mf b fi mo mk l ml mm">Ogun_ndhs2013.replace(recode_v190, inplace=True)</span><span id="52df" class="lp ks hi mf b fi mo mk l ml mm">#v190 was recoded into same feature, that's into v190<br/>#New v190 after pre-processing</span><span id="7355" class="lp ks hi mf b fi mo mk l ml mm">Ogun_ndhs2013['v190'].value_counts()<br/>Rich      474<br/>Middle    114<br/>Poor       42<br/>Name: v190, dtype: int64</span></pre><p id="2372" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">计算伽玛和克鲁斯卡尔统计量和p值</p><pre class="iy iz ja jb fd me mf mg mh aw mi bi"><span id="ba3a" class="lp ks hi mf b fi mj mk l ml mm">myCrosstable = pd.crosstab(Ogun_ndhs2013['v013'], Ogun_ndhs2013['v190'])<br/>myCrosstable</span></pre><p id="b94d" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">伽玛和克鲁斯卡尔统计值为-0.122，p_value=0.98。由于p _ value &gt; 0.05这两个特征之间没有联系。</p><pre class="iy iz ja jb fd me mf mg mh aw mi bi"><span id="1d4f" class="lp ks hi mf b fi mj mk l ml mm">goodmanKruskalgamma(Ogun_ndhs2013, 'v013', 'v190')</span></pre><p id="713f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj"> 4.2.6卡方拟合优度检验:</strong>这是一种非参数方法，用于检验分类变量的响应类别的观察比例或频率是否完全不同于其预期值。也就是说，它测试观察值的分布是否符合任何理论分布(二项式、多项式)。这类似于我们如何测试一个特征的均值是否与单样本T检验中的假设均值相同。注意，每个响应类别的频率值至少应为5。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es na"><img src="../Images/362039d94bc8e22a19576c5daabebd47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bPVR1H9r0Gy9WFI2GPd7hA.png"/></div></div></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es nb"><img src="../Images/329658d4b3828a4b48cbea25b55f4e02.png" data-original-src="https://miro.medium.com/v2/resize:fit:1378/format:webp/1*PRNZru5ygv2DUM0-I7yjFQ.png"/></div></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nc"><img src="../Images/18875074a27c9f3f9a2f88995bf564b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cCpOJwoJ4IV1GIR5oviVyQ.png"/></div></div></figure><p id="bf03" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">通常，python中的卡方拟合优度测试命令的设置是—卡方(f_obs，f_exp=None，ddof=0，axis=0)，其中f_obs是每个响应类别中的观察值，f_exp是每个响应类别中的预期观察值。默认情况下，假设它们是一致的，并且是期望值的平均值。axis:f _ OBS和f_exp的广播结果的轴，沿着该轴应用测试。如果轴为None，f_obs中的所有值都被视为一个数据集。默认值为0。</p><p id="b486" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在这种情况下，我们将使用v313(当前正在使用一种方法)作为目标分类特征，而预测值特征将是v025(一种居住地类型)</p><p id="4573" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">导入所需的库和数据集</p><p id="b819" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">指出两个特征的频率(v313，v025)</p><pre class="iy iz ja jb fd me mf mg mh aw mi bi"><span id="2375" class="lp ks hi mf b fi mj mk l ml mm">#import Ogun NDHS 2013 dataset into pandas<br/>import pandas as pd<br/>path=r'B:\..\..\Ogun_NDHS_2013.dta'<br/>Ogun_ndhs2013=pd.read_stata(path)</span><span id="ab78" class="lp ks hi mf b fi mo mk l ml mm">Variables_needed=['v313','v025', 'v012', 'v013', 'v203', 'v205', 'v218', 'v106', 'v190'] # These are the only variables needed</span><span id="77d2" class="lp ks hi mf b fi mo mk l ml mm">Ogun_ndhs2013=Ogun_ndhs2013[Variables_needed]</span><span id="a41e" class="lp ks hi mf b fi mo mk l ml mm">X_y=Ogun_ndhs2013[['v313','v025']]</span><span id="6545" class="lp ks hi mf b fi mo mk l ml mm">import sklearn as svm<br/>from sklearn.feature_selection import chi2</span></pre><p id="e8af" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">对这两个特征进行特征工程——将它们的响应类别转换成数值，并合并一些响应类别</p><pre class="iy iz ja jb fd me mf mg mh aw mi bi"><span id="5707" class="lp ks hi mf b fi mj mk l ml mm"># None of the value is less than 5<br/>Ogun_ndhs2013 ['v313'].value_counts()<br/>No method             489<br/>Modern method         118<br/>Traditional method     16<br/>Folkloric method        7<br/>Name: v313, dtype: int64</span><span id="1071" class="lp ks hi mf b fi mo mk l ml mm">X_y['v025'].value_counts()<br/>Urban    358<br/>Rural    272<br/>Name: v025, dtype: int64</span></pre><p id="be6a" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">计算拟合检验统计量和p值的卡方优度</p><pre class="iy iz ja jb fd me mf mg mh aw mi bi"><span id="c55f" class="lp ks hi mf b fi mj mk l ml mm">#We will recode v313 into 2-response-category designated as 1 and 0</span><span id="f0bb" class="lp ks hi mf b fi mo mk l ml mm">v313_recode =  { "v313": <br/>                             {"No method": 0,  <br/>                              "Modern method": 1,  <br/>                              "Traditional method": 0,  <br/>                              "Folkloric method": 0}<br/>             }</span><span id="a1dc" class="lp ks hi mf b fi mo mk l ml mm">X_y.replace(v313_recode, inplace=True)</span><span id="985b" class="lp ks hi mf b fi mo mk l ml mm">#frequency distribution of v313 after feature engineering</span><span id="58c7" class="lp ks hi mf b fi mo mk l ml mm">X_y['v313'].value_counts()<br/>0    512<br/>1    118<br/>Name: v313, dtype: int64</span><span id="a992" class="lp ks hi mf b fi mo mk l ml mm">#We will recode v025 into 2-response-category designated as 1 and 2<br/>v025_recode =  { "v025": <br/>                             {"Urban": 1,  <br/>                              "Rural": 2}<br/>             }</span><span id="6ff5" class="lp ks hi mf b fi mo mk l ml mm">X_y.replace(v025_recode, inplace=True)</span><span id="739b" class="lp ks hi mf b fi mo mk l ml mm">#frequency distribution of v025 after feature engineering<br/>X_y['v025'].value_counts()<br/>1    358<br/>2    272<br/>Name: v025, dtype: int64</span></pre><p id="6591" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">拟合优度检验统计值为0.00002121，p_value=0.99632516。由于p _ value &gt; 0.05观察值与预期值不符。</p><pre class="iy iz ja jb fd me mf mg mh aw mi bi"><span id="54c5" class="lp ks hi mf b fi mj mk l ml mm"># state X and y</span><span id="58ef" class="lp ks hi mf b fi mo mk l ml mm">X = X_y.drop('v313',axis=1)<br/>y = X_y['v313']</span><span id="596e" class="lp ks hi mf b fi mo mk l ml mm">#compute the statistic and p_value<br/>chi_scores = chi2(X,y)<br/>print('statistic=%.3f, p-value=%.3f' % (chi_scores[0], chi_scores[1]))</span></pre><p id="2fcb" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj"> 4.2.7麦克内马检验</strong>:这是一种非参数方法，用于检验来自总体的同一个二元变量的两个比例是否相同。它也被称为同质性或一致性检验，因为它有助于检查同一二元变量在干预后是否发生了变化。基本上，它回答了这样一个问题——在做了与某件事有关的事情之后，某个现象有变化吗？本质上，它用于评估干预对人群的效果或影响。它用于前后测试研究设计、病例对照研究和配对研究。<br/>它类似于配对样本t检验，但针对的是目标二元特征度量，而不是目标连续特征。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nd"><img src="../Images/4c179cda1313390d2098d3bc18c8f2a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OZCiDejW0ioE274fKpg4sg.png"/></div></div></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ne"><img src="../Images/516fbab5f3ac94c506bf3b810fe173d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7XsHb3ZvHc9TvTTNn7xmPA.png"/></div></div></figure><p id="983e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">例如，你可以测试在辅导制度化后，通过考试的比例是否有所增加。此外，你可能想测试在计划生育广播jingo播出后，使用避孕方法的妇女比例是否增加。</p><p id="0516" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">对于Mcnemar检验，必须有一个目标二元特征和一个预测二元特征。另外，样本数据应该从总体中随机选取。Mcnemar检验需要一个2X2列联表来检查二元变量的边际同质性。麦克纳玛检验所需的最小样本量为10。</p><p id="862b" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">科克伦的Q检验是麦克内马检验的一个更广泛的变体。它用于确定三个或更多相关组之间的二分因变量是否存在差异。</p><p id="82a9" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">注:如果列联表不是2x2。那么exact将为false。如果列联表是2*2或平方列联表，则使用二项式分布进行估计。如果列联表不是2*2，则使用卡方分布。卡方是大样本量的检验统计分布的近似值。因此，如果exact为false，则检验统计量为卡方统计量，否则为二项式统计量。</p><p id="aeaf" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">因为对于Mcnemar检验，我们主要感兴趣的是评估在不同时间评估的相同二元(二分法)特征/变量的变化；2013年的NDHS是横向的。我们将使用单个变量并修改它来实现我们的分析和说明目标。</p><p id="44ad" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">导入所需的库和数据集</p><p id="32cf" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">对于这个分析，我们将预处理v313变量并从中创建两个变量。一个作为前测，另一个作为后测</p><pre class="iy iz ja jb fd me mf mg mh aw mi bi"><span id="ef7f" class="lp ks hi mf b fi mj mk l ml mm">#import Ogun NDHS 2013 dataset into pandas<br/>import pandas as pd<br/>path=r'B:\..\..\Ogun_NDHS_2013.dta'<br/>Ogun_ndhs2013=pd.read_stata(path)</span><span id="26d9" class="lp ks hi mf b fi mo mk l ml mm">Variables_needed=['v313','v025', 'v012', 'v013', 'v203', 'v205', 'v218', 'v106', 'v190'] # These are the only variables needed</span><span id="0ea8" class="lp ks hi mf b fi mo mk l ml mm">Ogun_ndhs2013=Ogun_ndhs2013[Variables_needed]</span><span id="2724" class="lp ks hi mf b fi mo mk l ml mm">import numpy as np<br/>import statsmodels as sm<br/>import statsmodels.stats as sms<br/>from statsmodels.stats.contingency_tables import mcnemar</span></pre><p id="dd19" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">从v313创建预测试功能</p><pre class="iy iz ja jb fd me mf mg mh aw mi bi"><span id="997d" class="lp ks hi mf b fi mj mk l ml mm">import numpy as np<br/>from scipy import stats<br/>from scipy.stats import norm</span></pre><p id="4949" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">从v313创建后测试功能</p><pre class="iy iz ja jb fd me mf mg mh aw mi bi"><span id="be63" class="lp ks hi mf b fi mj mk l ml mm">#We would use variable - v313</span><span id="f2d6" class="lp ks hi mf b fi mo mk l ml mm">Ogun_ndhs2013 ['v313'].value_counts(normalize=True) * 100</span><span id="223b" class="lp ks hi mf b fi mo mk l ml mm">No method             77.619048<br/>Modern method         18.730159<br/>Traditional method     2.539683<br/>Folkloric method       1.111111<br/>Name: v313, dtype: float64</span><span id="10c5" class="lp ks hi mf b fi mo mk l ml mm">#create a pretest feature Ogun_ndhs2013['pre_test_using_modern_method']=Ogun_ndhs2013['v313']</span><span id="fd76" class="lp ks hi mf b fi mo mk l ml mm">#We will recode into: Yes, No. Only Modern method is yes<br/>pre_recode =  { "pre_test_using_modern_method": <br/>                             {"No method": 'No',  <br/>                              "Modern method": 'Yes',  <br/>                              "Traditional method": 'No',  <br/>                              "Folkloric method": 'No'}<br/>             }</span><span id="2d73" class="lp ks hi mf b fi mo mk l ml mm">Ogun_ndhs2013.replace(pre_recode, inplace=True)</span><span id="07bd" class="lp ks hi mf b fi mo mk l ml mm"># check the created the pretest feature again<br/>Ogun_ndhs2013['pre_test_using_modern_method'].value_counts(normalize=True) * 100</span><span id="b15c" class="lp ks hi mf b fi mo mk l ml mm">No     81.269841<br/>Yes    18.730159<br/>Name: pre_test_using_modern_method, dtype: float64</span></pre><p id="4b81" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">创建测试前和测试后特征的列联表</p><pre class="iy iz ja jb fd me mf mg mh aw mi bi"><span id="ddeb" class="lp ks hi mf b fi mj mk l ml mm">Ogun_ndhs2013['post_test_using_modern_method']=Ogun_ndhs2013['v313']</span><span id="1bf9" class="lp ks hi mf b fi mo mk l ml mm">Ogun_ndhs2013['post_test_using_modern_method'].value_counts(normalize=True) * 100<br/>No method             77.619048<br/>Modern method         18.730159<br/>Traditional method     2.539683<br/>Folkloric method       1.111111<br/>Name: post_test_using_modern_method, dtype: float64</span><span id="0e1f" class="lp ks hi mf b fi mo mk l ml mm">#We will recode into: Yes, No. Modern and Tradtional methods are yes</span><span id="4c3f" class="lp ks hi mf b fi mo mk l ml mm">post_recode =  { "post_test_using_modern_method": <br/>                             {"No method": 'No',  <br/>                              "Modern method": 'Yes',  <br/>                              "Traditional method": 'Yes',  <br/>                              "Folkloric method": 'Yes'}<br/>             }</span><span id="3139" class="lp ks hi mf b fi mo mk l ml mm">Ogun_ndhs2013.replace(post_recode, inplace=True)</span><span id="207c" class="lp ks hi mf b fi mo mk l ml mm"># check the created post-test feature again</span><span id="61a5" class="lp ks hi mf b fi mo mk l ml mm">Ogun_ndhs2013['post_test_using_modern_method'].value_counts(normalize=True) * 100</span><span id="d46b" class="lp ks hi mf b fi mo mk l ml mm">No     77.619048<br/>Yes    22.380952<br/>Name: post_test_using_modern_method, dtype: float64</span></pre><p id="5609" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">计算麦克纳玛统计量和p值</p><pre class="iy iz ja jb fd me mf mg mh aw mi bi"><span id="8787" class="lp ks hi mf b fi mj mk l ml mm">post_test_using_modern_method   No  Yes<br/>pre_test_using_modern_method           <br/>No                             489   23<br/>Yes                              0  118</span></pre><p id="8295" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">麦克纳玛统计值为0.0000，p_value=0.00000。自p_value &lt;0.05; There is a significant increase in the proportion of women using modern contraceptives.</p><pre class="iy iz ja jb fd me mf mg mh aw mi bi"><span id="7ded" class="lp ks hi mf b fi mj mk l ml mm">result=mcnemar(tab0, exact=True)</span><span id="b7bf" class="lp ks hi mf b fi mo mk l ml mm"># summarize the finding<br/>print('statistic=%.3f, p-value=%.3f' % (result.statistic, result.pvalue))</span></pre><p id="43a9" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj"> 4.2.8 Kendall Tau相关性</strong>:这是一种非参数方法，衡量两个序数变量如何对应。当样本很小且并列等级很多时，它是spearman等级相关的替代方法。所涉及的特征必须是有序的或连续的。虽然不是严格的要求，但是两个特征之间的单调关系使得肯德尔τ相关适合使用。就像Pearson和spearman等级相关一样，相关值的范围从-1到0(零)到+1。如果相关统计的值在1和0之间，那么两个变量之间的关系是正的，在上下文中，这意味着当一个变量增加时，另一个也在增加，如果一个变量减少，另一个也在减少。如果相关统计的值是负的，也就是说，如果它的值在0和-1之间，那么这两个变量具有负的关系。从上下文来看，这意味着当一个变量增加时，另一个变量减少，反之亦然。如果相关统计值为零，即如果其值为0，则两个变量没有关系。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nf"><img src="../Images/579064d95d270c2b8af9fc26877693a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BfM3dYKouFdM6PVbfV5X-w.png"/></div></div></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ng"><img src="../Images/ac5de125a5650214d333a3e3d0068acd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2LYqFUKmsocjoNVnTLaTaQ.png"/></div></div></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ms"><img src="../Images/77dcfbdd45c52c51e029364a1a44b9e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oyTkP1uxsawyqlY4pMgw6A.png"/></div></div></figure><p id="36d5" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">有三种类型的Kendall Tau相关性:Kendall Tau-a、Kendall Tau-b和Kendall Tau-c，也称为Stuart的Tau-c。虽然它们的值很接近，但它们的值在-1到+1范围内的标准化使它们有点不同。当肯德尔τ-a和肯德尔τ-b、肯德尔τ-c的秩不并列(并列秩)时，它们是近似的。当预测值特征为二元时，Mann-Whitney U检验与Kendall的tau检验相同。</p><p id="1576" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我们将使用在计算spearman等级相关系数中使用的两个变量，假设它们的分布是偏斜的或未知的，具有比spearman等级更小的尺寸，并且是单调的。</p><p id="7108" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在这种情况下，数值预测要素将是-年龄(v012)，而数值目标要素将是-活孩子数(v218)</p><p id="fca5" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">导入所需的库和数据集</p><p id="7d91" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">从奥贡NDHS 2013数据中取出v012和v218作为系列</p><pre class="iy iz ja jb fd me mf mg mh aw mi bi"><span id="804a" class="lp ks hi mf b fi mj mk l ml mm">#import Ogun NDHS 2013 dataset into pandas<br/>import pandas as pd<br/>path=r'B:\..\..\Ogun_NDHS_2013.dta'<br/>Ogun_ndhs2013=pd.read_stata(path)</span><span id="0ac9" class="lp ks hi mf b fi mo mk l ml mm">Variables_needed=['v313','v025', 'v012', 'v013', 'v203', 'v205', 'v218', 'v106', 'v190'] # These are the only variables needed</span><span id="bbca" class="lp ks hi mf b fi mo mk l ml mm">Ogun_ndhs2013=Ogun_ndhs2013[Variables_needed]</span><span id="e9bf" class="lp ks hi mf b fi mo mk l ml mm">import numpy as np<br/>from scipy import stats<br/>from scipy.stats import kendalltau</span></pre><p id="cbf1" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">计算肯德尔τ相关统计量及其相关的p值</p><pre class="iy iz ja jb fd me mf mg mh aw mi bi"><span id="10a2" class="lp ks hi mf b fi mj mk l ml mm">Age_X=Ogun_ndhs2013['v012']<br/>No_Living_Chid_Y=Ogun_ndhs2013['v218']</span></pre><p id="2019" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">肯德尔τ相关统计值是0.57，p_value=0.00000。自p_value &lt;0.05; There exists a significant relationship between the age of respondents and the number of living children.</p><pre class="iy iz ja jb fd me mf mg mh aw mi bi"><span id="2a9a" class="lp ks hi mf b fi mj mk l ml mm">stats.kendalltau(Age_X, No_Living_Chid_Y)</span><span id="0a00" class="lp ks hi mf b fi mo mk l ml mm">tau, p_value = kendalltau(Age_X, No_Living_Chid_Y)<br/>tau, p_value</span></pre><p id="813b" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">The Jupyter notebook used for this analysis is available<strong class="jq hj"> </strong> <a class="ae jn" href="https://github.com/ayobamiakiode/My-projects/blob/master/Bivariate%20Statistical%20Methods%20Analysis%20%20in%20Python%20.ipynb" rel="noopener ugc nofollow" target="_blank"> <strong class="jq hj">此处</strong> </a></p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nh"><img src="../Images/c50491f9f6b0077bbe0cbdda05c5a7c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FZfaa7tqe6WpQtPxLS-qXw.png"/></div></div></figure><p id="f565" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">关键要点:</p><h2 id="ec84" class="lp ks hi bd kt lq lr ls kx lt lu lv lb jx lw lx ld kb ly lz lf kf ma mb lh mc bi translated">将实施双变量可视化作为确认两个特征之间存在关系的唯一方式，在统计学上是不够的。</h2><ol class=""><li id="57e4" class="ni nj hi jq b jr lj ju lk jx nk kb nl kf nm kj nn no np nq bi translated">使用双变量统计测试解决了可视化显示的关系偶然发生的可能性。</li><li id="301f" class="ni nj hi jq b jr nr ju ns jx nt kb nu kf nv kj nn no np nq bi translated">双变量统计检验的类型取决于目标和预测要素的类型(分类、数值)、样本大小以及要素的参数性质(参数、非参数)。</li><li id="283a" class="ni nj hi jq b jr nr ju ns jx nt kb nu kf nv kj nn no np nq bi translated">对于预测值和目标要素之间的统计测试，如果p值小于或等于0.05 (p值≤0.05)，则预测值要素可包含在建模中，否则(p值&gt; 0.05)，预测值要素不应包含在目标要素的建模中。</li><li id="ae30" class="ni nj hi jq b jr nr ju ns jx nt kb nu kf nv kj nn no np nq bi translated">中心极限定理支持对样本大小≥30的要素使用参数化方法。</li><li id="c9eb" class="ni nj hi jq b jr nr ju ns jx nt kb nu kf nv kj nn no np nq bi translated">这就对了。希望你觉得这有用？请放下您的评论，在LinkedIn上关注我，地址为<a class="ae jn" href="https://www.linkedin.com/in/ayobami-akiode-38528839/" rel="noopener ugc nofollow" target="_blank"> Ayobami Akiode LinkedIn </a></li></ol><p id="3bce" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">参考文献</strong></p><p id="9947" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><a class="ae jn" href="https://www.real-statistics.com" rel="noopener ugc nofollow" target="_blank">https://www.real-statistics.com</a></p><p id="ec64" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">特色-我们的统计指南列表|最新统计</p><div class="nw nx ez fb ny nz"><a href="https://statistics.laerd.com/features-tests.php" rel="noopener  ugc nofollow" target="_blank"><div class="oa ab dw"><div class="ob ab oc cl cj od"><h2 class="bd hj fi z dy oe ea eb of ed ef hh bi translated">我们有各种各样的SPSS统计指南来帮助您分析数据，从更直接的到更…</h2><div class="og l"><h3 class="bd b fi z dy oe ea eb of ed ef dx translated">statistics.laerd.com</h3></div><div class="oh l"><p class="bd b fp z dy oe ea eb of ed ef dx translated">统计学如何:我们其余人的基本统计学！</p></div></div></div></a></div><div class="nw nx ez fb ny nz"><a href="https://www.statisticshowto.com/" rel="noopener  ugc nofollow" target="_blank"><div class="oa ab dw"><div class="ob ab oc cl cj od"><h2 class="bd hj fi z dy oe ea eb of ed ef hh bi translated">寻找初级统计帮助？你来对地方了。统计怎么有1000多条…</h2><div class="og l"><h3 class="bd b fi z dy oe ea eb of ed ef dx translated">www.statisticshowto.com</h3></div><div class="oh l"><p class="bd b fp z dy oe ea eb of ed ef dx translated">Numpy和Scipy文档- Numpy和Scipy文档</p></div></div><div class="oi l"><div class="oj l ok ol om oi on jh nz"/></div></div></a></div><div class="nw nx ez fb ny nz"><a href="https://docs.scipy.org/" rel="noopener  ugc nofollow" target="_blank"><div class="oa ab dw"><div class="ob ab oc cl cj od"><h2 class="bd hj fi z dy oe ea eb of ed ef hh bi translated">欢迎光临！这是Numpy和Scipy的文档。</h2><div class="og l"><h3 class="bd b fi z dy oe ea eb of ed ef dx translated">docs.scipy.org</h3></div><div class="oh l"><p class="bd b fp z dy oe ea eb of ed ef dx translated">sci kit-学习</p></div></div><div class="oi l"><div class="oo l ok ol om oi on jh nz"/></div></div></a></div><div class="nw nx ez fb ny nz"><a href="https://scikit-learn.org/" rel="noopener  ugc nofollow" target="_blank"><div class="oa ab dw"><div class="ob ab oc cl cj od"><h2 class="bd hj fi z dy oe ea eb of ed ef hh bi translated">“我们使用scikit-learn来支持前沿基础研究[...]" "我认为这是我设计过的最棒的ML套装…</h2><div class="og l"><h3 class="bd b fi z dy oe ea eb of ed ef dx translated">scikit-learn.org</h3></div><div class="oh l"><p class="bd b fp z dy oe ea eb of ed ef dx translated">斯蒂佩特</p></div></div><div class="oi l"><div class="op l ok ol om oi on jh nz"/></div></div></a></div><div class="nw nx ez fb ny nz"><a href="https://www.youtube.com/stikpet" rel="noopener  ugc nofollow" target="_blank"><div class="oa ab dw"><div class="ob ab oc cl cj od"><h2 class="bd hj fi z dy oe ea eb of ed ef hh bi translated">这个频道用来播放一些关于统计学和SPSS的教学视频。我的旧视频不包含任何…</h2><div class="og l"><h3 class="bd b fi z dy oe ea eb of ed ef dx translated">www.youtube.com</h3></div><div class="oh l"><p class="bd b fp z dy oe ea eb of ed ef dx translated">维基百科(一个基于wiki技术的多语言的百科全书协作计划ˌ也是一部用不同语言写成的网络百科全书ˌ 其目标及宗旨是为全人类提供自由的百科全书)ˌ开放性的百科全书</p></div></div><div class="oi l"><div class="oq l ok ol om oi on jh nz"/></div></div></a></div><div class="nw nx ez fb ny nz"><a href="https://www.wikipedia.org/" rel="noopener  ugc nofollow" target="_blank"><div class="oa ab dw"><div class="ob ab oc cl cj od"><h2 class="bd hj fi z dy oe ea eb of ed ef hh bi translated">维基百科是一个免费的在线百科全书，由世界各地的志愿者创建和编辑，由维基媒体托管…</h2><div class="og l"><h3 class="bd b fi z dy oe ea eb of ed ef dx translated">www.wikipedia.org</h3></div><div class="oh l"><p class="bd b fp z dy oe ea eb of ed ef dx">www.wikipedia.org</p></div></div><div class="oi l"><div class="or l ok ol om oi on jh nz"/></div></div></a></div></div></div>    
</body>
</html>