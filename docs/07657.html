<html>
<head>
<title>Vite — witnessing the next-gen frontend tooling (Part-1)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">见证下一代前端工具(第一部分)</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/vite-witnessing-the-next-gen-frontend-tooling-part-1-a157f4033c33?source=collection_archive---------3-----------------------#2021-09-26">https://medium.com/geekculture/vite-witnessing-the-next-gen-frontend-tooling-part-1-a157f4033c33?source=collection_archive---------3-----------------------#2021-09-26</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="bdf3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">围绕web应用程序的性能和用户体验有一种巨大的幸福感。但是，我们真的关心开发者的体验和生产力吗？它对可交付成果没有重大影响吗？当然，它有，但我们错过了见证变得舒适&amp;习惯于遗留的工具。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/3aaf67c7f8364f441ce9636c15850273.png" data-original-src="https://miro.medium.com/v2/resize:fit:580/format:webp/1*uaxRIvHMoINIB4caPRKTwQ.png"/></div></figure><p id="992b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我已经从react end上的探索开始了我的前端之旅。我不了解像webpack这样的构建工具，如果我没有错的话，我也不需要开始使用react。和每个人一样，从一个流行的youtube系列开始，用<a class="ae jl" href="https://create-react-app.dev/docs/getting-started/" rel="noopener ugc nofollow" target="_blank"> create-react-app </a>包做模板。</p><p id="9969" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我不太喜欢最初的步骤，原因有两个，</p><ul class=""><li id="4ec6" class="jm jn hi ih b ii ij im in iq jo iu jp iy jq jc jr js jt ju bi translated">它太长了(在那个阶段没有一个高性能的单圈，而且那个时候套件本身也很慢)</li><li id="07c4" class="jm jn hi ih b ii jv im jw iq jx iu jy iy jz jc jr js jt ju bi translated">安装了太多的依赖项，而且大多数没有任何意义，为什么我需要在一个简单的样板应用程序中安装它们</li></ul><p id="9c2f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是，在没有从头开始使用create-react-app包的情况下，我没有太多关于如何搭建的知识。而且，我碰巧创建了多个用于学习的样板文件，每次都要花几分钟来整理。对于一个试图自己探索新事物的初学者来说，这听起来是不是有点让人泄气。我厌倦了，开始重复使用相同的样板文件，来回删除和添加文件。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ka"><img src="../Images/ac44604e02020662c0ab979bb9ca3129.png" data-original-src="https://miro.medium.com/v2/resize:fit:1206/format:webp/1*8k21RZtfknNR-FdcYqdFpg.jpeg"/></div></figure><p id="0cdd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">后来，我开始了新的冒险，在几个项目中，我碰巧探索了vue.js和nuxt.js。所以我密切关注Vue社区，觉得它很有前途。当时是4月底——<strong class="ih hj"/><a class="ae jl" href="https://twitter.com/youyuxi" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj"/></a>尤雨溪发了这条推文，提高了整个社区的期望。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kb kc l"/></div></figure><p id="56da" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有趣的事实是，埃文并没有那么认真，这只是他的另一条推文中反映的一个实验。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kb kc l"/></div></figure><p id="b376" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是，现在如果你尝试vite，你永远不会后悔使用它，它不再是一个实验。我怎么会错过分享这条一夜之间在🥳疯传的微博呢</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kb kc l"/></div></figure><p id="8413" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">好吧，我表现如何？不会太无聊吧🙄。现在让我们进入正题，🧐</p><h1 id="2ddb" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated"><strong class="ak"> Vite —下一代前端工具</strong></h1><p id="3504" class="pw-post-body-paragraph if ig hi ih b ii lb ik il im lc io ip iq ld is it iu le iw ix iy lf ja jb jc hb bi translated">实际上<code class="du lg lh li lj b">/vit/ </code>读起来像“veet”——这是一个法语单词，意思是“快”。它只是现代应用程序的一个构建工具。像任何其他工具一样，它附带了一个开发服务器，并将您的代码打包用于生产。如果你来自Vue背景，你也可以把它看作是Vue-CLI的松散等价物(更宽松更快)。</p><blockquote class="lk ll lm"><p id="9708" class="if ig ln ih b ii ij ik il im in io ip lo ir is it lp iv iw ix lq iz ja jb jc hb bi translated">Vite 2 最近发布了许多有趣的进展。如需了解更多详情，请点击查看<a class="ae jl" href="https://vitejs.dev/blog/announcing-vite2.html" rel="noopener ugc nofollow" target="_blank">。</a></p></blockquote><h2 id="28c5" class="lr ke hi bd kf ls lt lu kj lv lw lx kn iq ly lz kr iu ma mb kv iy mc md kz me bi translated">为什么要vite？</h2><p id="af65" class="pw-post-body-paragraph if ig hi ih b ii lb ik il im lc io ip iq ld is it iu le iw ix iy lf ja jb jc hb bi translated">为什么我们的项目需要像<a class="ae jl" href="https://parceljs.org/" rel="noopener ugc nofollow" target="_blank">package</a>/<a class="ae jl" href="https://webpack.js.org/" rel="noopener ugc nofollow" target="_blank">web pack</a>这样的捆扎机？模块化代码使开发人员的生活变得更加容易，抽象以其自己的方式变得美丽。</p><p id="1adc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">JS模块—<a class="ae jl" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules" rel="noopener ugc nofollow" target="_blank">https://developer . Mozilla . org/en-US/docs/Web/JavaScript/Guide/Modules</a></p><p id="b2df" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在过去，没有办法在浏览器中本地支持ES模块。因此我们采用了前端工具，如<a class="ae jl" href="https://webpack.js.org/" rel="noopener ugc nofollow" target="_blank"> webpack </a>、<a class="ae jl" href="https://parceljs.org/" rel="noopener ugc nofollow" target="_blank">package</a>或<a class="ae jl" href="https://rollupjs.org/guide/en/" rel="noopener ugc nofollow" target="_blank"> Rollup </a>。但是，现在大多数现代浏览器都提供了开箱即用的支持。随着我们开始构建越来越多的雄心勃勃的应用程序，很明显所涉及的JS数量超出了预期(因此严重地成为了性能瓶颈)。</p><h2 id="b8d1" class="lr ke hi bd kf ls lt lu kj lv lw lx kn iq ly lz kr iu ma mb kv iy mc md kz me bi translated">服务器启动缓慢</h2><p id="2fae" class="pw-post-body-paragraph if ig hi ih b ii lb ik il im lc io ip iq ld is it iu le iw ix iy lf ja jb jc hb bi translated">当冷启动dev-server时，传统的基于bundler的设置必须在提供服务之前根据需求急切地抓取和构建整个应用程序。另一方面，vite对此有不同的处理方式。它通过将应用程序分为两类来大大缩短启动时间:<strong class="ih hj">依赖项</strong>和<strong class="ih hj">源代码。</strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="er es mf"><img src="../Images/45d0375ba6f808316fa99f4d8de6386a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X0iZ9bUtqvOX2xllxyo3mg.png"/></div></div></figure><h2 id="9552" class="lr ke hi bd kf ls lt lu kj lv lw lx kn iq ly lz kr iu ma mb kv iy mc md kz me bi translated">缓慢更新</h2><p id="a70b" class="pw-post-body-paragraph if ig hi ih b ii lb ik il im lc io ip iq ld is it iu le iw ix iy lf ja jb jc hb bi translated">在正常的基于捆绑器的设置中，即使是很小的编辑，它也会重建整个捆绑，从而降低更新速度。这就是为什么引入了<a class="ae jl" href="https://webpack.js.org/concepts/hot-module-replacement/" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj"/></a>(它允许一个模块“热替换”自己，而不影响页面的其余部分)。然而，经过实践，我们发现随着应用程序的不断增长，即使是HMR也存在性能瓶颈。</p><p id="cedd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这就是为什么vite的处理方式不同，HMR是在本地ESM上执行的。听起来很困惑？别急，我们来进一步解码。</p><p id="47ee" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当一个文件被编辑时，所有的vite需求是精确地使被编辑的模块和它最近的HMR边界之间的链无效，使得HMR更新更快，而不管应用程序的大小。因为它只关心特定的边界状态，所以再次捆绑整个应用程序没有太大的压力。呜哇！</p><p id="9eb3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果浏览器本身就能处理大部分问题，我们真的需要这么麻烦吗？</p><p id="40a5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这就是vite适合的地方。</p><h2 id="8ac6" class="lr ke hi bd kf ls lt lu kj lv lw lx kn iq ly lz kr iu ma mb kv iy mc md kz me bi translated">那有什么条件呢？</h2><ul class=""><li id="5434" class="jm jn hi ih b ii lb im lc iq mk iu ml iy mm jc jr js jt ju bi translated">Vite承诺我们将把大部分代码作为本地es模块来编写</li><li id="d907" class="jm jn hi ih b ii jv im jw iq jx iu jy iy jz jc jr js jt ju bi translated">如果你有大量的依赖项，vite会用<a class="ae jl" href="https://esbuild.github.io/" rel="noopener ugc nofollow" target="_blank"> ESbuild </a> ( <em class="ln">一个极快的JavaScript捆绑器)</em>预捆绑它们</li></ul><h2 id="5351" class="lr ke hi bd kf ls lt lu kj lv lw lx kn iq ly lz kr iu ma mb kv iy mc md kz me bi translated">让我们来谈谈ESbuild！</h2><ul class=""><li id="6612" class="jm jn hi ih b ii lb im lc iq mk iu ml iy mm jc jr js jt ju bi translated"><a class="ae jl" href="https://esbuild.github.io/" rel="noopener ugc nofollow" target="_blank"> Esbuild </a>是一个速度极快的JS捆绑器。与任何其他使用JS构建的传统捆绑器不同(<a class="ae jl" href="https://en.wikipedia.org/wiki/Just-in-time_compilation" rel="noopener ugc nofollow" target="_blank"> JIT </a>在命令行接口方面并不友好)，esbuild是用<a class="ae jl" href="https://golang.org/" rel="noopener ugc nofollow" target="_blank"> Go </a>编写的，它可以编译成本机代码，因此速度极快。</li><li id="08d8" class="jm jn hi ih b ii jv im jw iq jx iu jy iy jz jc jr js jt ju bi translated">它是由Figma的CTO &amp;联合创始人<a class="ae jl" href="https://github.com/evanw" rel="noopener ugc nofollow" target="_blank">Evan WallaceT13】创建的。</a></li></ul><p id="9a4b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里有一个来自官方网站的有趣的图表，可以让你了解它与其他构建工具的比较。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="er es mn"><img src="../Images/7af35e23ce681e97f21299ef2d4fafbc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VYewrq8FZCieL3NO4IyVRw.png"/></div></div></figure><h2 id="b8d9" class="lr ke hi bd kf ls lt lu kj lv lw lx kn iq ly lz kr iu ma mb kv iy mc md kz me bi translated">如何使用vite？</h2><p id="6368" class="pw-post-body-paragraph if ig hi ih b ii lb ik il im lc io ip iq ld is it iu le iw ix iy lf ja jb jc hb bi translated">现在就来写点代码，体验一下vite的神奇吧。值得一提的是，vite是框架不可知的，不是vue特有的。你甚至可以将它与vanilla JS无缝地结合使用&amp;制作你想要的任何东西。</p><p id="43c6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，让我们试着使用vite，熟悉vite提供的一些开箱即用的功能。</p><p id="53f0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">不仅仅是用vite搭建一个项目，让我们在一个简单的样板项目上分析一下它与create-react-app和Vue-CLI的比较。有道理，对吧？</p><p id="6f82" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，让我们使用Vue-CLI创建一个简单的vue.js样板文件</p><pre class="je jf jg jh fd mo lj mp mq aw mr bi"><span id="43ed" class="lr ke hi lj b fi ms mt l mu mv">vue create vue-cli-demo</span></pre><p id="b4b8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">注意:</strong>假设您已经安装了Vue-CLI。</p><p id="8b95" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们看一下<strong class="ih hj"> package.json </strong>(我们主要关心依赖部分)</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="er es mw"><img src="../Images/e9acca4e340e9ef1854df7e7b682e355.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Se3X2NI_sQrEuS3I-KzMBQ.png"/></div></div></figure><p id="7c05" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面是在高性能mac上搭建Vue-CLI样板所用时间的截图。总共大概是<strong class="ih hj">~ 82.22s</strong>+<strong class="ih hj">~ 16.28s</strong>(还不错😕)</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="er es mx"><img src="../Images/e74bb7a948307cb7bd3e656357a55797.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zs88Cht-oGmlM0to4YLS2w.png"/></div></div></figure><p id="2cfe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">并且，启动开发服务器花费了大约<strong class="ih hj">~ 2670毫秒</strong>。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="er es mx"><img src="../Images/b2a82fea4d09cc067bce5ac7c689b258.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vnPGtdCke7-PKHqq4Wlylw.png"/></div></div></figure><p id="1c7f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在小编辑上，它花费了大约<strong class="ih hj">~ 196毫秒</strong>，而生产构建花费了大约<strong class="ih hj">~ 3943毫秒</strong></p><p id="6364" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们看看vite项目脚手架统计数据，</p><p id="e2a2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，我们来看一下包文件。你会惊讶极少量的维生素是如何烘烤它的。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="er es mw"><img src="../Images/c1791caacfe8d80618d16d8e0dfba08d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7jDdURAWnt8ApdXLFgxixA.png"/></div></div></figure><p id="e8c9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">它只是添加了vue作为唯一的依赖项和两个支持dev的依赖项。你还需要一个名为<strong class="ih hj"> vite.config.js </strong>的基本最小配置，作为模板本身的一部分(如果在设置中选择了vue)</p><p id="b163" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">注意:</strong>我将在本文的下一部分详细介绍项目设置和工作。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="er es mw"><img src="../Images/5883f18d200ab37922718de83140a34d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p0QtyjGf_b48sHiO6ouX-A.png"/></div></div></figure><blockquote class="lk ll lm"><p id="3b48" class="if ig ln ih b ii ij ik il im in io ip lo ir is it lp iv iw ix lq iz ja jb jc hb bi translated"><strong class="ih hj">注:</strong> Vite要求<a class="ae jl" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank"> Node.js </a>版本&gt; =12.0.0。</p></blockquote><pre class="je jf jg jh fd mo lj mp mq aw mr bi"><span id="291c" class="lr ke hi lj b fi ms mt l mu mv">$ npm init vite@latest (or) $ yarn create vite</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="er es my"><img src="../Images/0e1882cbfa204917131529e956de63d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m217YsAgU1b26EwzIDFjyw.png"/></div></div></figure><p id="d7cc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">嗯，它的速度非常快——脚手架在<strong class="ih hj">~ 1.016秒</strong>🚀</p><pre class="je jf jg jh fd mo lj mp mq aw mr bi"><span id="62dd" class="lr ke hi lj b fi ms mt l mu mv">$ npm install (or) yarn install</span></pre><p id="f9bb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Vite要求你单独安装这个步骤后的依赖项，它的美不像<strong class="ih hj"> Vue-CLI </strong>和<strong class="ih hj"> CRA </strong>那么沉重。对于我来说，第一次运行，仅仅用了<strong class="ih hj"> ~14.948ms </strong>。</p><p id="7d19" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用命令<strong class="ih hj"> npm run dev，</strong>启动开发服务器，它在<strong class="ih hj">到</strong>505毫秒内为我准备好。</p><p id="6a57" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">等等，但是除了这些数据之外，还有很多关于vite的信息需要了解。让我在本文的下一部分中介绍这些方面。这里不要错过阅读<a class="ae jl" rel="noopener" href="/@mariappan/vite-witnessing-the-next-gen-frontend-tooling-part-2-558b233d6b1c">。</a></p><p id="31aa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您有任何建议、需要帮助/疑问，或者希望就此话题进行更多讨论，请给我写信，地址:<a class="ae jl" href="mailto:mariappangameo@gmail.com" rel="noopener ugc nofollow" target="_blank">、mariappangameo@gmail.com、T21</a>。我也很乐意在Linkedin上和大家联系。</p></div></div>    
</body>
</html>