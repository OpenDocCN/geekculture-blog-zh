<html>
<head>
<title>How to Automate Tasks in Linux</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Linux中自动化任务</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/how-to-automate-tasks-in-linux-7bc9d99bd5a4?source=collection_archive---------0-----------------------#2020-10-28">https://medium.com/geekculture/how-to-automate-tasks-in-linux-7bc9d99bd5a4?source=collection_archive---------0-----------------------#2020-10-28</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/b9416c5d8cf9662ed9287ad7745dd643.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6IOv24zYgd_Zt5iqYGridg.jpeg"/></div></div></figure><h1 id="dccb" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">介绍</h1><p id="1e2f" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">我们很多人都喜欢Linux内核💙。它使用基于Unix的终端。它是超级可定制的。因此，我们可能会选择在没有GNOME这样的桌面环境下运行Linux。<br/> Linux在旧的硬件上运行神奇的✨，而且它是轻量级的。我们不在Linux上销售或做广告，也不需要与大量的桌面膨胀软件作斗争，它是后端工程师的一个很好的平台。</p><p id="226c" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">我学到的另一个生产率技巧是设置Cron作业来调度基于时间的操作，在我的计算机上自动执行。这些作业可以用于各种任务，比如数据备份，或者在我的特殊情况下，通过在我的shell配置中添加一行来更改像<code class="du kr ks kt ku b">dotnet-ef</code>这样的全局工具的位置:</p><pre class="kv kw kx ky fd kz ku la lb aw lc bi"><span id="79db" class="ld ir hi ku b fi le lf l lg lh">export PATH=$PATH:/snap/bin</span></pre><h1 id="1c1a" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">先决条件</h1><ul class=""><li id="9268" class="li lj hi jq b jr js jv jw jz lk kd ll kh lm kl ln lo lp lq bi translated">安装Cron守护程序</li><li id="e657" class="li lj hi jq b jr lr jv ls jz lt kd lu kh lv kl ln lo lp lq bi translated">要做的工作</li></ul><p id="65da" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">Cron是一个基于时间的作业调度守护程序，可以在类似Unix的操作系统中找到，包括Linux发行版。几乎每个Linux发行版都默认安装了某种形式的Cron。然而，如果你有一个没有预装Cron的Debian Linux发行版，你可以使用APT包管理器来安装它。</p><p id="6c3a" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">在Debian机器上安装任何软件包之前，更新计算机的本地软件包数据库:</p><pre class="kv kw kx ky fd kz ku la lb aw lc bi"><span id="dd3a" class="ld ir hi ku b fi le lf l lg lh">$ sudo apt update</span></pre><p id="e183" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">然后使用以下命令安装Cron:</p><pre class="kv kw kx ky fd kz ku la lb aw lc bi"><span id="9dd1" class="ld ir hi ku b fi le lf l lg lh">$ sudo systemctl enable cron</span><span id="419a" class="ld ir hi ku b fi lw lf l lg lh">Output Synchronizing state of cron.service with SysV service script with /lib/systemd/systemd-sysv-install. Executing: /lib/systemd/systemd-sysv-install enable cron</span></pre><p id="1cdf" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">接下来，我们在bash文件中编写希望自动化的作业的脚本。下面是我用来在shell配置中更改<code class="du kr ks kt ku b">dotnet-ef</code>全局工具位置的脚本文本。</p><p id="b96f" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">这个文件可以在你选择的文本编辑器中创建，并作为<code class="du kr ks kt ku b">filename.sh</code>保存在你的主文件夹的根目录下。(在我这里是/home/nextwebb/Desktop)。这个脚本可以用<code class="du kr ks kt ku b">sh filename.sh</code>直接在终端上运行，并且运行正常😃。</p><h1 id="94f8" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">使用Crontabs调度任务</h1><p id="69b3" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">这个练习是在终端上使用带有两个标志<code class="du kr ks kt ku b">-l (list)</code>和<code class="du kr ks kt ku b">-e (edit)</code>的<code class="du kr ks kt ku b">crontab</code>命令完成的。键入命令<code class="du kr ks kt ku b">crontab -e</code>并从一个数字[1-4]中进行选择，以选择您所选择的文本编辑器，以及您的个人Cron文件并编写您的Cron作业。我将选择1，因为我的默认编辑器是Nano。</p><pre class="kv kw kx ky fd kz ku la lb aw lc bi"><span id="eae9" class="ld ir hi ku b fi le lf l lg lh">$ crontab -e</span></pre><figure class="kv kw kx ky fd ij er es paragraph-image"><div class="er es lx"><img src="../Images/4295a2eb78b2cf35c6c34271b632771e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1060/0*v-oKSMMH8ZchAynK"/></div></figure><p id="065f" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">终端进入编辑器模式，打开您的个人Crontab文件。如您所见，所有命令都显示在终端窗口的底部。</p><pre class="kv kw kx ky fd kz ku la lb aw lc bi"><span id="4dd0" class="ld ir hi ku b fi le lf l lg lh"># For example, you can run a backup of all your user accounts<br/># at 5 a.m every week with:<br/># 0 5 * * 1 tar -zcf /var/backups/home.tgz /home/<br/> m h  dom mon dow   command</span></pre><p id="f948" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated"><strong class="jq hj">一些特殊的语法</strong></p><p id="05b7" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">这些基本上是指定的等效数字计划的快捷方式:</p><pre class="kv kw kx ky fd kz ku la lb aw lc bi"><span id="d6c5" class="ld ir hi ku b fi le lf l lg lh">@hourly  -&gt; 0 * * * *</span><span id="0592" class="ld ir hi ku b fi lw lf l lg lh">@daily  -&gt;    0 0 * * *</span><span id="fe59" class="ld ir hi ku b fi lw lf l lg lh">@weekly  -&gt;    0 0 * * 0</span><span id="cde6" class="ld ir hi ku b fi lw lf l lg lh">@monthly  -&gt;    0 0 1 * *</span><span id="555b" class="ld ir hi ku b fi lw lf l lg lh">@yearly  -&gt;    0 0 1 1 *</span></pre><p id="0268" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated"><code class="du kr ks kt ku b">@reboot</code> - &gt;每当服务器启动时，这个简写将运行它后面的任何命令</p><p id="796a" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">回到正在讨论的主题，在我的例子中，我希望bash文件<code class="du kr ks kt ku b">filename.sh</code>在启动后在我输入的crontab编辑器中执行:</p><pre class="kv kw kx ky fd kz ku la lb aw lc bi"><span id="2d79" class="ld ir hi ku b fi le lf l lg lh">@reboot  /home/nextwebb/Desktop/filename.script</span></pre><p id="5014" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">一旦对您的输入感到满意，您需要保存它(Ctrl+s ),现在按下(Ctrl+x ),从编辑器返回到终端。键入将显示您的新Cron作业，您可以确认是否一切正常。</p><pre class="kv kw kx ky fd kz ku la lb aw lc bi"><span id="aeaf" class="ld ir hi ku b fi le lf l lg lh">$ crontab -l</span></pre><figure class="kv kw kx ky fd ij er es paragraph-image"><div class="er es ly"><img src="../Images/903e1ae7815dd28e2ca3500ef9624f2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1134/0*_uOwfLxjZsW2g2YY"/></div></figure><p id="b162" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">这是一种使用Cron作业在引导时运行脚本的超级简单的方法。</p><p id="8251" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">感谢观众，希望这篇文章对你有所帮助🤗。随时联系Github、T2、推特和T4的LinkedIn。一定要点赞、评论和分享😌。</p><p id="abe1" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">关于Cron作业语法和自动化设置的详细描述，请看一下<a class="ae lz" href="https://community.linuxmint.com/tutorial/view/1072" rel="noopener ugc nofollow" target="_blank"> Crontab语法教程</a></p><p id="542a" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated"><strong class="jq hj">快乐调度😉</strong>。</p></div><div class="ab cl ma mb gp mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="hb hc hd he hf"><p id="fb69" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated"><em class="mh">最初发布于</em><a class="ae lz" href="https://blog.nextwebb.tech/how-to-automate-tasks-in-linux/" rel="noopener ugc nofollow" target="_blank"><em class="mh">https://blog . next Webb . tech</em></a><em class="mh">。</em></p></div></div>    
</body>
</html>