<html>
<head>
<title>How To Combine Multiple Plots In One Page With R Programming</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用R编程将一页中的多个情节组合起来</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/how-to-combine-multiple-plots-in-one-page-f17c21bf930b?source=collection_archive---------3-----------------------#2022-10-23">https://medium.com/geekculture/how-to-combine-multiple-plots-in-one-page-f17c21bf930b?source=collection_archive---------3-----------------------#2022-10-23</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/516cbd5160bc52271f733c28090a6227.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3D6A6bRPLCUiKXTX"/></div></div></figure><p id="7ab6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我的一个客户最近告诉我，他提交文章的出版物只接受6个情节，他希望我将一些情节合并成一个单一的情节。</p><p id="969a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">经过广泛的研究，我想出了一些关于如何将多个图合并成一个图的想法，我将在这篇文章中与你分享。</p><p id="3dba" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们在这篇文章中需要的两个包是:<code class="du jo jp jq jr b">tidyverse</code>和<code class="du jo jp jq jr b">ggpubr</code>。</p><pre class="js jt ju jv fd jw jr jx jy aw jz bi"><span id="3680" class="ka kb hi jr b fi kc kd l ke kf">library(tidyverse) <br/>library(ggpubr)</span></pre><p id="913b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我将对用于演示的diamonds数据集执行一些探索性分析。</p><p id="f244" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下面我们来创造一些情节；</p><h2 id="534a" class="ka kb hi bd kg kh ki kj kk kl km kn ko jb kp kq kr jf ks kt ku jj kv kw kx ky bi translated">钻石切割频率</h2><pre class="js jt ju jv fd jw jr jx jy aw jz bi"><span id="f6f8" class="ka kb hi jr b fi kc kd l ke kf">#diamonds frequency by cut <br/>diamonds_freq_cut &lt;- diamonds |&gt; <br/>     ggplot(aes(cut,fill = cut)) + <br/>     geom_bar() + ylab("Number of Diamonds") + <br/>     xlab("Diamond Cut") + <br/>     ggtitle("Frequency of Diamonds by Cut") + <br/>     coord_flip() </span><span id="1a57" class="ka kb hi jr b fi kz kd l ke kf">diamonds_freq_cut</span></pre><figure class="js jt ju jv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/65447285e841b4a0b75a023b086fa60c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*1fur2RJzjbyrgH5o"/></div></div></figure><h2 id="4a7f" class="ka kb hi bd kg kh ki kj kk kl km kn ko jb kp kq kr jf ks kt ku jj kv kw kx ky bi translated">钻石价格分布</h2><pre class="js jt ju jv fd jw jr jx jy aw jz bi"><span id="1ae0" class="ka kb hi jr b fi kc kd l ke kf"># diamond price distribution price_distr &lt;- diamonds |&gt;            ggplot(aes(price)) + <br/>     geom_density() + <br/>     ggtitle("Distribution of Diamond Price") </span><span id="27dc" class="ka kb hi jr b fi kz kd l ke kf">price_distr</span></pre><figure class="js jt ju jv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es la"><img src="../Images/e4b1a18e04d173f1bf7d55a2f4e9f301.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Pg_DorN0gcCqKD-i"/></div></div></figure><h2 id="8126" class="ka kb hi bd kg kh ki kj kk kl km kn ko jb kp kq kr jf ks kt ku jj kv kw kx ky bi translated">钻石切割价格</h2><pre class="js jt ju jv fd jw jr jx jy aw jz bi"><span id="b349" class="ka kb hi jr b fi kc kd l ke kf"># diamond price by color diamond_cut_price &lt;- diamonds |&gt; ggplot(aes(color,price,color = color)) + <br/>geom_boxplot() + <br/>ggtitle("Diamond Price by Color") </span><span id="55b3" class="ka kb hi jr b fi kz kd l ke kf">diamond_cut_price</span></pre><figure class="js jt ju jv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/1a12ee1e098b06f079918116a66098c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*T4GQc5N8aHj3rQ_d"/></div></div></figure><h1 id="f7ba" class="lb kb hi bd kg lc ld le kk lf lg lh ko li lj lk kr ll lm ln ku lo lp lq kx lr bi translated">在一页上组合多个图</h1><p id="6f73" class="pw-post-body-paragraph iq ir hi is b it ls iv iw ix lt iz ja jb lu jd je jf lv jh ji jj lw jl jm jn hb bi translated">我们将使用<code class="du jo jp jq jr b">ggarrange()</code>功能将上面的这些图合并成一个页面。</p><pre class="js jt ju jv fd jw jr jx jy aw jz bi"><span id="25fd" class="ka kb hi jr b fi kc kd l ke kf">ggarrange(diamonds_freq,price_distr,diamond_cut_price, ncol = 2, nrow = 2)</span></pre><figure class="js jt ju jv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/b058fed216f42778244ab7099203164a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*HqqxQQ5Takibw_bI"/></div></div></figure><p id="2c68" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><code class="du jo jp jq jr b">ggarrange()</code>函数接受您的图形名称，<code class="du jo jp jq jr b">nrow</code>和<code class="du jo jp jq jr b">ncol</code>参数允许您分别指定您想要在图形中显示的行数和列数。</p><p id="1c0f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">还有其他可选的参数，如标签，你可以用它来给你的各种图加标签，但我会建议你像我一样在绘图时单独给你的图加标签，有时<code class="du jo jp jq jr b">ggarange()</code>加标签的方法会使标签和图重叠。</p><p id="50a1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在图有相同图例的情况下，您可以设置<code class="du jo jp jq jr b">common.legend = TRUE</code>，在页面上只有一个图例，如下所示。</p><pre class="js jt ju jv fd jw jr jx jy aw jz bi"><span id="7a34" class="ka kb hi jr b fi kc kd l ke kf">#diamonds frequency by color diamonds_freq_color &lt;- diamonds |&gt;    ggplot(aes(color,fill = color)) + <br/>geom_bar() + <br/>ylab("Number of Diamonds") + <br/>xlab("Diamond Color") + <br/>ggtitle("Frequency of Diamonds by Color") + <br/>coord_flip() </span><span id="7a75" class="ka kb hi jr b fi kz kd l ke kf">diamonds_freq_color</span></pre><figure class="js jt ju jv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/714cbd83f4e1a610142d027c44ca4358.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*r4vM1lriZnL9XzIP"/></div></div></figure><pre class="js jt ju jv fd jw jr jx jy aw jz bi"><span id="9cdb" class="ka kb hi jr b fi kc kd l ke kf">ggarrange(diamonds_freq_cut, diamonds_freq_color, common.legend = TRUE, legend = "bottom", ncol = 2)</span></pre><figure class="js jt ju jv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es la"><img src="../Images/ee6d2405e0c21c7a8af86cf99ea044ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*J9SRVrg5Wo-6uGpl"/></div></div></figure><h1 id="e1a1" class="lb kb hi bd kg lc ld le kk lf lg lh ko li lj lk kr ll lm ln ku lo lp lq kx lr bi translated">结合情节、表格和文本</h1><h2 id="bd9d" class="ka kb hi bd kg kh ki kj kk kl km kn ko jb kp kq kr jf ks kt ku jj kv kw kx ky bi translated">钻石平均切割价格</h2><p id="96a9" class="pw-post-body-paragraph iq ir hi is b it ls iv iw ix lt iz ja jb lu jd je jf lv jh ji jj lw jl jm jn hb bi translated">让我们用一个表格来显示每颗钻石的平均价格。</p><pre class="js jt ju jv fd jw jr jx jy aw jz bi"><span id="06de" class="ka kb hi jr b fi kc kd l ke kf">#Average diamond price by cut diamond_price &lt;- diamonds |&gt; group_by(cut) |&gt; <br/>summarize(price = mean(price))</span></pre><figure class="js jt ju jv fd ij er es paragraph-image"><div class="er es lx"><img src="../Images/96bc804e53db5ab2da4488fc6fee0c12.png" data-original-src="https://miro.medium.com/v2/resize:fit:848/0*36LDTF_JH_vtGRLI"/></div></figure><p id="5f52" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">接下来的事情是用<code class="du jo jp jq jr b">ggtexttable()</code>将<code class="du jo jp jq jr b">tibble</code>转换成绘图表</p><pre class="js jt ju jv fd jw jr jx jy aw jz bi"><span id="1bb3" class="ka kb hi jr b fi kc kd l ke kf">#convert table to plot table table &lt;- ggtexttable(diamond_price, rows = NULL, theme = ttheme("mGreen")) table</span></pre><figure class="js jt ju jv fd ij er es paragraph-image"><div class="er es ly"><img src="../Images/dbf561906302a75bf5c3776c37389b22.png" data-original-src="https://miro.medium.com/v2/resize:fit:756/0*TaP4nu4wReDs8Aax"/></div></figure><h2 id="a595" class="ka kb hi bd kg kh ki kj kk kl km kn ko jb kp kq kr jf ks kt ku jj kv kw kx ky bi translated">文本</h2><pre class="js jt ju jv fd jw jr jx jy aw jz bi"><span id="5582" class="ka kb hi jr b fi kc kd l ke kf">text = paste("The diamonds dataset is a sample dataset that", "comes pre-installed with the ggplot2 pacakge", "it is a great dataset for demonstrating examples", "and also practice") </span><span id="5ac2" class="ka kb hi jr b fi kz kd l ke kf">text</span></pre><figure class="js jt ju jv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lz"><img src="../Images/ef507549bcb0403fd305d6490847425f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*MljHCxwzQ4CXoPjX"/></div></div></figure><p id="4b18" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们还必须用<code class="du jo jp jq jr b">ggparagrah()</code>将文本转换成情节文本</p><pre class="js jt ju jv fd jw jr jx jy aw jz bi"><span id="7efd" class="ka kb hi jr b fi kc kd l ke kf">text_plot &lt;- ggparagraph(text = text, face = "italic", size = 15, color = "black") text_plot</span></pre><figure class="js jt ju jv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ma"><img src="../Images/ffbe18f8566f12da9196f38b1852db25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*gfPG_6UMEolaQXpy"/></div></div></figure><p id="55ac" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在让我们用<code class="du jo jp jq jr b">ggarrange()</code>将所有这些元素合并到一个页面中</p><pre class="js jt ju jv fd jw jr jx jy aw jz bi"><span id="0aab" class="ka kb hi jr b fi kc kd l ke kf">ggarrange(diamonds_freq_cut, text_plot, table, nrow = 3, ncol = 2, heights = c(1, 0.5, 0.3))</span></pre><figure class="js jt ju jv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/df824dbebe0a6c928323c8d4f903165a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-6SkbyGkWnSHAdOA"/></div></div></figure><p id="a3d8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">替代</strong>与<code class="du jo jp jq jr b"><strong class="is hj">patchwork</strong></code></p><p id="6567" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您也可以使用patchwork包，它允许您使用数学运算符组合绘图。</p><pre class="js jt ju jv fd jw jr jx jy aw jz bi"><span id="96ea" class="ka kb hi jr b fi kc kd l ke kf">library(patchwork)</span><span id="0840" class="ka kb hi jr b fi kz kd l ke kf">(text_plot + table)/diamond_cut_price</span></pre><figure class="js jt ju jv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mb"><img src="../Images/926b0840362cce317d8bdfff8167ca16.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*TsTTCauQBgaUJgWZ"/></div></div></figure><p id="d798" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><code class="du jo jp jq jr b"> + </code>操作符在同一行上排列图形，而<code class="du jo jp jq jr b">/ </code>在同一列上排列图形。</p><h1 id="9c1c" class="lb kb hi bd kg lc ld le kk lf lg lh ko li lj lk kr ll lm ln ku lo lp lq kx lr bi translated">结论</h1><p id="b392" class="pw-post-body-paragraph iq ir hi is b it ls iv iw ix lt iz ja jb lu jd je jf lv jh ji jj lw jl jm jn hb bi translated">在这篇文章中，你学习了如何用<code class="du jo jp jq jr b">ggpubr::ggarrange()</code>函数和<code class="du jo jp jq jr b">patchwork</code>包将各种图形、文本和表格组合成一个页面。</p><p id="7113" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这样，您可以减少您拥有的地块数量，使共享地块变得更加容易。</p></div><div class="ab cl mc md gp me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="hb hc hd he hf"><p id="bc24" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="mj">原载于2022年10月23日</em><a class="ae mk" href="https://rblogopedia.wordpress.com/2022/10/23/how-to-combine-multiple-plots-in-one-page/" rel="noopener ugc nofollow" target="_blank"><em class="mj">【http://rblogopedia.wordpress.com】</em></a><em class="mj">。</em></p></div></div>    
</body>
</html>