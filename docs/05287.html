<html>
<head>
<title>Introduction To Public Key Infrastructure (PKI)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">公钥基础设施(PKI)简介</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/introduction-to-public-key-infrastructure-pki-32286018cc59?source=collection_archive---------10-----------------------#2021-07-17">https://medium.com/geekculture/introduction-to-public-key-infrastructure-pki-32286018cc59?source=collection_archive---------10-----------------------#2021-07-17</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/f3aa46bb177dfd7b06e8a4cad882c655.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k7E3-GOHLsM2WKEl-cotCw.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Encryption</figcaption></figure><h1 id="ddb5" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">简介:</h1><p id="ea85" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">在本文中，我们将了解公钥基础设施(PKI)是如何工作的。</p><h1 id="c5e0" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">观众</h1><p id="a964" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">软件工程师、安全工程师、开发人员、系统管理员、开发人员。</p><h1 id="ea73" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">什么是PKI？？</h1><p id="a939" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">公钥基础设施(PKI)是在不安全的公共网络中提供安全通信的互联网技术的集合。是PKI将<strong class="ju hj">的</strong>放在了<strong class="ju hj">的</strong>——如果你正在网络浏览器上阅读这个文档，你可能正在使用PKI来确保它来自一个经过验证的来源。</p><p id="275b" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">PKI有助于确定人员、设备和服务的身份，实现对系统和资源的受控访问、数据保护和交易责任。</p><h1 id="f1ab" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">公钥基础设施的组成部分</h1><h2 id="d46c" class="kv iv hi bd iw kw kx ky ja kz la lb je kd lc ld ji kh le lf jm kl lg lh jq li bi translated"><strong class="ak"> x.509数字证书:</strong></h2><ul class=""><li id="017b" class="lj lk hi ju b jv jw jz ka kd ll kh lm kl ln kp lo lp lq lr bi translated">PKI因为数字证书而发挥作用。数字证书就像驾照一样，是网站和组织的一种电子身份证明形式。两台通信机器之间的安全连接是通过PKI实现的，因为双方的身份可以通过证书来验证。</li></ul><figure class="lt lu lv lw fd ij er es paragraph-image"><div class="er es ls"><img src="../Images/7ff35466e800cbfdce39055dd24a276f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*8JA9tjfXhtxpO-wWhXvkRA.png"/></div><figcaption class="iq ir et er es is it bd b be z dx">SSL Certificate (Format x.509)</figcaption></figure><blockquote class="lx ly lz"><p id="f9e4" class="js jt ma ju b jv kq jx jy jz kr kb kc mb ks kf kg mc kt kj kk md ku kn ko kp hb bi translated">这里，我使用SSL证书，它使用x.509证书格式。x.509是通用证书格式。</p></blockquote><p id="805c" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">证书生命周期:</p><ol class=""><li id="1c1a" class="lj lk hi ju b jv kq jz kr kd me kh mf kl mg kp mh lp lq lr bi translated"><strong class="ju hj"> <em class="ma">证书注册</em> </strong>:实体向认证机构(CA)提交证书请求。一个实体可以是一个人，一个设备，甚至是几行代码。</li><li id="ac3e" class="lj lk hi ju b jv mi jz mj kd mk kh ml kl mm kp mh lp lq lr bi translated"><strong class="ju hj"> <em class="ma">证书颁发</em></strong><em class="ma">:</em>CA需要验证申请人的身份，这通常是通过凭证或者通过信任另一个已经验证了申请人的CA来完成的。</li><li id="e4be" class="lj lk hi ju b jv mi jz mj kd mk kh ml kl mm kp mh lp lq lr bi translated"><strong class="ju hj"> <em class="ma">证书验证</em> </strong> <em class="ma"> : </em>每次使用证书进行身份验证时，服务器都会向CA进行检查，确认证书仍然有效，没有过期或被吊销。</li><li id="7bd7" class="lj lk hi ju b jv mi jz mj kd mk kh ml kl mm kp mh lp lq lr bi translated"><strong class="ju hj"> <em class="ma">证书撤销</em> </strong> <em class="ma"> : </em>证书包含一个在首次颁发时指定的到期日期。当到达该日期时，CA自动将该证书添加到证书撤销列表(CRL)中，这是一种黑名单，指示服务器不要验证这些证书。</li><li id="d12d" class="lj lk hi ju b jv mi jz mj kd mk kh ml kl mm kp mh lp lq lr bi translated"><strong class="ju hj"> <em class="ma">证书更新</em> </strong> : CA具有在到期日更新证书的设置，尽管通常它们会重新验证身份。</li></ol><h2 id="af89" class="kv iv hi bd iw kw kx ky ja kz la lb je kd lc ld ji kh le lf jm kl lg lh jq li bi translated"><strong class="ak">公钥和私钥:</strong></h2><ul class=""><li id="85b2" class="lj lk hi ju b jv jw jz ka kd ll kh lm kl ln kp lo lp lq lr bi translated"><strong class="ju hj"> <em class="ma">公钥</em> </strong>是一种可以向公众分发的加密密钥，不需要安全存储。用公钥加密的消息只能用相应的私钥解密。</li><li id="18b3" class="lj lk hi ju b jv mi jz mj kd mk kh ml kl mm kp lo lp lq lr bi translated"><strong class="ju hj"> <em class="ma">私钥</em> </strong>被接收者用来解密用公钥加密的消息。因为消息是用给定的公钥加密的，所以只能用匹配的私钥解密。</li></ul><h2 id="002e" class="kv iv hi bd iw kw kx ky ja kz la lb je kd lc ld ji kh le lf jm kl lg lh jq li bi translated"><strong class="ak">证书颁发机构和信任链:</strong></h2><ul class=""><li id="19e8" class="lj lk hi ju b jv jw jz ka kd ll kh lm kl ln kp lo lp lq lr bi translated">数字身份具有符合X.509标准并由证书颁发机构(CA)颁发的加密验证数字证书的形式。</li><li id="33fc" class="lj lk hi ju b jv mi jz mj kd mk kh ml kl mm kp lo lp lq lr bi translated">信任链指的是证书及其如何链接回可信的<strong class="ju hj">证书颁发机构</strong>。要使SSL证书可信，它必须能够追溯到签署它的可信根，这意味着证书链中的所有证书——服务器、中间证书和根证书——都需要得到正确的信任。</li></ul><figure class="lt lu lv lw fd ij er es paragraph-image"><div class="er es mn"><img src="../Images/27d11a7fc87bc2365de7e65a30ddb7e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1224/format:webp/1*3NyrT8ZSdT1XTC1cqxLLow.png"/></div></figure><ul class=""><li id="fa6f" class="lj lk hi ju b jv kq jz kr kd me kh mf kl mg kp lo lp lq lr bi translated">在上图中，我们可以看到<strong class="ju hj">google.com</strong>是我们连接的服务器。<strong class="ju hj"> GTS-CA 1C3 </strong>是一个中间CA。<strong class="ju hj"> GTS根R1 </strong>为中间型CA。<strong class="ju hj">全球标志根CA- R1 </strong>顶级根CA。这样就可以建立起信任链。</li></ul><p id="11ed" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">信任链有3个部分:</p><ul class=""><li id="da14" class="lj lk hi ju b jv kq jz kr kd me kh mf kl mg kp lo lp lq lr bi translated"><strong class="ju hj">根证书</strong> —根证书是属于发行证书机构的数字证书。它在大多数浏览器中都是预先下载的，存储在所谓的“信任存储”中根证书由证书颁发机构严密保护。例如，上图显示<strong class="ju hj"> GlobalSign根CA- R1 </strong>是根CA。</li><li id="7dcf" class="lj lk hi ju b jv mi jz mj kd mk kh ml kl mm kp lo lp lq lr bi translated"><strong class="ju hj">中级证书</strong>——中级证书像树枝一样从根证书中分叉出来。它们充当受保护的根证书和向公众发布的服务器证书之间的中间人。一个证书链中至少会有一个中间证书，但也可以有多个。例如，上图显示<strong class="ju hj"> GTS-CA 1C3 </strong>和<strong class="ju hj">GTS-鲁特R1 </strong>为中间CA。</li><li id="988b" class="lj lk hi ju b jv mi jz mj kd mk kh ml kl mm kp lo lp lq lr bi translated"><strong class="ju hj">服务器证书</strong> —服务器证书是颁发给特定域的证书。例如，上图显示服务器证书是发给<strong class="ju hj">google.com</strong>的。</li><li id="ffbc" class="lj lk hi ju b jv mi jz mj kd mk kh ml kl mm kp lo lp lq lr bi translated">ca是互联网安全协议的常见组成部分，您可能听说过一些更流行的ca:Symantec(最初是Verisign)和Digicert。</li></ul><h1 id="cd95" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">PKI使用什么类型的加密？</h1><ul class=""><li id="c6d0" class="lj lk hi ju b jv jw jz ka kd ll kh lm kl ln kp lo lp lq lr bi translated">PKI合并了不对称和对称加密的使用。对称和非对称加密都有自己的优势和最佳使用场景，这就是为什么两者的结合在公钥基础设施中如此强大。</li><li id="608c" class="lj lk hi ju b jv mi jz mj kd mk kh ml kl mm kp lo lp lq lr bi translated"><strong class="ju hj"> <em class="ma">对称加密:</em> </strong>对称加密保护在双方初始交换数字握手时生成的单个私钥。这个密钥必须从一方传递到所有相关方，以便对交换的信息进行加密和解密。这个密钥可以是密码的形式，也可以是一系列随机数字或字母。</li><li id="3999" class="lj lk hi ju b jv mi jz mj kd mk kh ml kl mm kp lo lp lq lr bi translated"><strong class="ju hj"> <em class="ma">非对称加密:</em> </strong>非对称加密使用两个密钥，一个公钥，一个私钥。公钥加密，私钥解密。也称为“公钥加密”</li></ul><h1 id="9a25" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">PKI如何与SSL一起工作？</h1><ol class=""><li id="f27d" class="lj lk hi ju b jv jw jz ka kd ll kh lm kl ln kp mh lp lq lr bi translated">首先，当客户端(浏览器)应用户请求访问web服务器时，客户端向服务器发送其支持和兼容的SSL/TLS版本，以启动连接。</li></ol><p id="0946" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">2.作为回报，web服务器检查密码套件以及SSL/TLS版本，并将其公共证书发送给客户端。</p><p id="1f01" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">3.收到证书文件后，客户端(浏览器)会对其进行身份验证。如果发现证书有效，浏览器通过用SSL/TLS证书的公钥加密“预主密钥/密钥”来启动私钥验证过程。</p><p id="c87c" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">4.作为回报，web服务器用它的私钥解密预主密钥。</p><p id="5d2d" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">5.现在，客户端和服务器都从客户端随机密钥、服务器随机密钥和预主密钥生成会话密钥。两者生成的会话密钥必须相同。</p><p id="c2f9" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">6.客户端发送用会话密钥加密的“完成”消息。</p><p id="f77b" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">7.服务器发送用会话密钥加密的“完成”消息。</p><p id="c703" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">一旦完成了上述所有步骤，SSL/TLS握手过程也就完成了，客户端和浏览器之间的安全连接就建立了。</p><blockquote class="lx ly lz"><p id="b94b" class="js jt ma ju b jv kq jx jy jz kr kb kc mb ks kf kg mc kt kj kk md ku kn ko kp hb bi translated">这是TLS 1.2握手的图示。在TLS 1.3中，验证身份所需的步骤较少。</p></blockquote><h1 id="9a16" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">PKI如何与SSH一起工作？</h1><p id="dd48" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">设置公钥认证(用于SSH)需要以下简单步骤:</p><ol class=""><li id="c7f0" class="lj lk hi ju b jv kq jz kr kd me kh mf kl mg kp mh lp lq lr bi translated">创建密钥对(通常由用户创建)。这通常是用ssh-keygen完成的。</li><li id="b0d6" class="lj lk hi ju b jv mi jz mj kd mk kh ml kl mm kp mh lp lq lr bi translated">私钥留在用户那里(并且只在那里)，而公钥被发送到服务器。</li><li id="ae61" class="lj lk hi ju b jv mi jz mj kd mk kh ml kl mm kp mh lp lq lr bi translated">服务器存储公钥(并将其“标记”为<strong class="ju hj">授权</strong>)。</li><li id="c0ec" class="lj lk hi ju b jv mi jz mj kd mk kh ml kl mm kp mh lp lq lr bi translated">服务器现在将允许任何能够证明他们拥有相应私钥的人访问。</li><li id="a091" class="lj lk hi ju b jv mi jz mj kd mk kh ml kl mm kp mh lp lq lr bi translated">举例。对于无密码认证，我们使用ssh-keygen创建公钥和私钥，并将公钥复制到GitHub或GitLab。下一次，每当用户试图推送或拉取代码时，Github会基于公钥和私钥对用户进行身份验证。</li></ol><h1 id="7e28" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">公匙基建在区块链如何运作？？</h1><ul class=""><li id="75f9" class="lj lk hi ju b jv jw jz ka kd ll kh lm kl ln kp lo lp lq lr bi translated">密码学使得区块链更加健壮，从其他技术中脱颖而出。使用高级数学原理方法传输和存储数据的加密技术，其存储方式只有数据的目标用户才能读取和处理。</li><li id="b72d" class="lj lk hi ju b jv mi jz mj kd mk kh ml kl mm kp lo lp lq lr bi translated">公钥加密是比特币协议的重要组成部分，在多个地方被用于确保协议中创建的消息的完整性。钱包创建和交易签名是任何货币的核心组成部分，在很大程度上依赖于公钥加密。</li><li id="cda9" class="lj lk hi ju b jv mi jz mj kd mk kh ml kl mm kp lo lp lq lr bi translated">比特币的协议使用所谓的椭圆曲线数字签名算法(ECDSA)来创建一组新的私钥和相应的公钥。公钥然后与哈希函数一起使用，创建比特币用户用来发送和接收资金的公共地址。私钥是保密的，用于签署数字交易，以确保交易的来源是合法的。</li></ul><h1 id="9bb6" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">PKI如何在Hyperledger Fabric区块链中工作？？</h1><ul class=""><li id="50f1" class="lj lk hi ju b jv jw jz ka kd ll kh lm kl ln kp lo lp lq lr bi translated">公钥基础设施由向各方(例如，服务的用户、服务提供商)颁发数字证书的认证机构组成，然后各方使用数字证书在其环境中交换的消息中认证自己。</li></ul><figure class="lt lu lv lw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mo"><img src="../Images/497b3710552531eecb845370ba952239.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lWmFA_exRsbaEsnuZ-mDxQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Source: Hyperledger Fabric Web</figcaption></figure><h2 id="007a" class="kv iv hi bd iw kw kx ky ja kz la lb je kd lc ld ji kh le lf jm kl lg lh jq li bi translated">证书颁发机构</h2><p id="c2f0" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">一个节点可以通过系统信任的权威机构为其颁发的<strong class="ju hj">数字身份</strong>加入区块链网络。</p><figure class="lt lu lv lw fd ij er es paragraph-image"><div class="er es mp"><img src="../Images/62f52a0a1e80e923eb0b28bd4cc281eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*gmL6s8aTvnt1HSrNDsu6bw.png"/></div><figcaption class="iq ir et er es is it bd b be z dx">CA</figcaption></figure><p id="e057" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">在区块链的场景中，每个希望与网络互动的演员都需要一个身份。正是CA提供了可验证的数字身份。</p><h2 id="18e5" class="kv iv hi bd iw kw kx ky ja kz la lb je kd lc ld ji kh le lf jm kl lg lh jq li bi translated">根ca、中间ca和信任链</h2><ul class=""><li id="22b1" class="lj lk hi ju b jv jw jz ka kd ll kh lm kl ln kp lo lp lq lr bi translated">CAs分为两种:<strong class="ju hj">根CAs </strong>和<strong class="ju hj">中间CAs </strong>。因为根ca(赛门铁克、Geotrust等)必须<strong class="ju hj">安全地向互联网用户分发</strong>数亿份证书。</li><li id="eec6" class="lj lk hi ju b jv mi jz mj kd mk kh ml kl mm kp lo lp lq lr bi translated">这些中间CA拥有由根CA或另一个中间机构颁发的证书，允许为链中任何CA颁发的任何证书建立一个<strong class="ju hj">“信任链】</strong>。</li><li id="2ef1" class="lj lk hi ju b jv mi jz mj kd mk kh ml kl mm kp lo lp lq lr bi translated">这种追溯到根CA的能力不仅允许CA的功能扩展，同时仍然提供安全性—允许使用证书的组织放心地使用中间CA—它还限制了根CA的暴露，如果暴露，将危及整个信任链。另一方面，如果一个中间CA受到损害，那么暴露程度会小得多。</li></ul><figure class="lt lu lv lw fd ij er es paragraph-image"><div class="er es mq"><img src="../Images/4272110e3c4a71644275cdb811d71c59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1356/format:webp/1*c8vJ8baytv5uA-d-keESgQ.png"/></div><figcaption class="iq ir et er es is it bd b be z dx">Chain of trust</figcaption></figure><blockquote class="lx ly lz"><p id="b40a" class="js jt ma ju b jv kq jx jy jz kr kb kc mb ks kf kg mc kt kj kk md ku kn ko kp hb bi translated">图片来源:Hyperledger fabric官方文档。</p></blockquote><ul class=""><li id="4e2e" class="lj lk hi ju b jv kq jz kr kd me kh mf kl mg kp lo lp lq lr bi translated">当涉及到跨多个组织颁发证书时，中间ca提供了巨大的灵活性，这在许可的区块链系统中非常有用。</li></ul><blockquote class="lx ly lz"><p id="3995" class="js jt ma ju b jv kq jx jy jz kr kb kc mb ks kf kg mc kt kj kk md ku kn ko kp hb bi translated">在根CA和一组中间CA之间建立信任链，只要这些中间CA的证书的发行CA是根CA本身或者具有到根CA的信任链。</p></blockquote><h1 id="6f41" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">摘要</h1><p id="d09d" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">我们已经看到了PKI基础设施是如何工作的。PKI在区块链技术中的应用。</p></div></div>    
</body>
</html>