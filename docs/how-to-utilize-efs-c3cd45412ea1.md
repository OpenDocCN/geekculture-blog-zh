# 如何利用 EFS？

> 原文：<https://medium.com/geekculture/how-to-utilize-efs-c3cd45412ea1?source=collection_archive---------0----------------------->

## 什么是 EFS？

![](img/6e760ebd54042efce8f60caf2efdf6d1.png)

[www.msp360.com](http://www.msp360.com)

亚马逊弹性文件服务(EFS)是 AWS 提供的三个主要存储选项中的最新一个。EFS 是一个共享的、弹性的、基于云的文件系统，可以挂载在多个 Amazon EC2 实例上。它提供了一个传统的文件存储模型，将内容组织到目录和子目录中。

让我们来看看 EFS 的主要特色。

# 主要特征

**共享存储**

EFS 可以安装在多个 EC2 实例中，可以用作共享网络存储。除非 EBS，否则它可以被来自同一区域的多个可用性区域的多个实例同时访问。它提供多台服务器的同步读写。

**弹性**

EFS 是可扩展的，但与 S3 和 EBS 不同，它不需要手动扩展 EFS。EFS 的容量会根据添加或删除的工作负载自动增加或减少。

**按需付费**

因为容量会自动扩展，所以不需要预配置存储。用户只需为正在使用的存储付费。

由于这些特殊的特点，EFS 现在正被各行各业广泛使用。

# 用例

**机器学习和大数据分析**

亚马逊 EFS 最适合用于大量数据，例如用于分析的大量工作负载。虽然像 EBS 这样的不可扩展存储无法处理这种大规模数据，因为用户需要将其拆分并分散在不同的 EBS 实例中，但亚马逊 EFS 通过高吞吐量和低延迟操作提供了大数据应用程序所需的规模和效率。EFS 支持同时访问不同可用性区域中的数千个 EC2 实例，提供了无缝处理和分析大量数据的机会。

**媒体和娱乐工作流程**

需要从许多服务器访问的大型媒体文件强烈依赖于具有共享存储的需求。EFS 通过高吞吐量和可扩展的性能提供高数据一致性。对大型媒体文件的共享访问通过在多个服务器之间分配工作负载，为媒体处理提供了巨大的支持。

**主目录**

亚马逊 EFS 为用户提供了一个文件管理器界面，它使用标准的文件系统语义，比如锁定、重命名和修改文件。它使用一种类似于基于标准前提的系统的分层结构。在数据集有多个用户的情况下，数据集的管理员或所有者可以从亚马逊 EFS 获得访问控制设施。所有者可以在文件或目录级别为用户和组设置访问和更新权限。

**内容管理和网络服务**

EFS 是专为大数据工作负载和分析应用程序产生的海量数据而设计的，特别是 EBS 无法访问以进行处理和分析的大数据。亚马逊 EFS 为内容管理系统提供了一个持久、高吞吐量和可扩展的文件系统，可以为各种应用程序(如网站、在线日志和档案)快速提供静态文件。

**大型内容存储库**

具有高吞吐量的共享文件系统减少了在各种存储库上执行作业的时间，并将多个本地文件存储库集成到一个位置。

但是，EFS 不适合需要频繁修改的工作负载。非常重要的是要记住，当许多小文件经常被修改时，亚马逊 EFS 的性能可能会下降。

**数据库备份、数据库转储和日志文件**

亚马逊 EFS 的可伸缩性为存储大型数据库备份、转储和日志文件提供了便利。许多企业受益于在云中存储数据库备份的灵活性，无论是为了更新期间的临时保护，还是为了开发和测试。

**开发和测试环境数据**

使用 EFS 时，不需要在开发开始时预测开发最后阶段所需的测试数据和开发数据所需的存储。这样，EFS 有助于降低高估存储的资本投资成本。

迷茫？如果您比较三个主要的 AWS 存储选项，您会看到一些常见的用例。那么，我们到底应该何时以及如何使用 EFS 呢？

# EFS 最好的！

EFS 是为低延迟应用程序而设计的，具有 IOPS，吞吐量随着 EC2 实例的使用和数量而扩展。当存储大小增加时，性能也会提高。在峰值性能时，EFS 提供每秒 10GB 的吞吐量和 500k 的 IOPS。

亚马逊 EFS 不是为小型、通用和频繁访问的工作负载设计的，比如版本控制系统和频繁访问的存储库。对于需要快照的工作负载，EBS 将是比 EFS 更好的解决方案。此外，不能从 Microsoft Windows 操作系统访问 EFS，因为它不支持 Windows 使用的服务器消息块(SMB)协议。需要高 IOPS(每秒输入输出)的应用程序(如 OLTP 数据库)在 AWS EFS 中无法高效运行，尤其是在以通用性能模式运行的 EFS 中。

> 性能模式

亚马逊 AWS 提供了两种性能模式。

*   通用性能模式
*   最大 I/O 性能模式

通用性能模式是 EFS 的默认模式，当应用程序需要更高的吞吐量时，建议切换到最大 I/O 性能模式，但是，这种更高的吞吐量是以更高的延迟为代价的。最大 I/O 性能模式对于由大量 EC2 实例访问的应用程序来说是最佳的。

# 什么时候应该使用 EFS？

![](img/ea16c59c4cc967a23e7fe62c5b060787.png)

*   当您需要基于云的文件系统时。

您可以像处理本地文件系统一样处理 EFS 的文件和目录。

*   当您需要具有并发访问能力的大型共享存储时。

EFS 最适合无法用单个 EC2 实例连接的大量数据。

*   当您需要一个可伸缩的、有弹性的文件系统时。

随着数据移入或移出，EFS 会自动扩展或缩小，这消除了您在工作过程中耗尽存储空间的担忧，并为扩展付出了额外的努力。

*   当您不需要为您不使用的东西额外付费时。

使用 EFS 时，您只需为当前使用的存储空间付费。

# 结论

EFS 是最昂贵的主要 AWS 存储选项，因此最大限度地利用您所能负担的非常重要。

从亚马逊 EFS 获得的优势取决于如何使用它。首先，仔细确定你的储物需求，决定它是否值得与 EFS 同行。说到共享的、可扩展的大型文件系统，EFS 是不二之选！