<html>
<head>
<title>Go Full Circle with Segment as an Action</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将分段作为一个动作转一整圈</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/go-full-circle-with-segment-as-an-action-7334a81cc982?source=collection_archive---------46-----------------------#2021-06-03">https://medium.com/geekculture/go-full-circle-with-segment-as-an-action-7334a81cc982?source=collection_archive---------46-----------------------#2021-06-03</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/af9add396c8c5a0dab98a8457dea9e7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v-yC_uXNaPYCTJ73bZ2HcQ.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx">Unsplash</figcaption></figure><div class=""/></div><div class="ab cl iu iv gp iw" role="separator"><span class="ix bw bk iy iz ja"/><span class="ix bw bk iy iz ja"/><span class="ix bw bk iy iz"/></div><div class="hb hc hd he hf"><p id="4f66" class="pw-post-body-paragraph jb jc hx jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">几个月前，我们宣布整合细分市场。作为一种集成，Datagran允许您将存储在Segment中的web、移动、服务器和云应用程序数据整合到Datagran中，以便在您的所有数据项目中使用。</p><p id="9a7d" class="pw-post-body-paragraph jb jc hx jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">今天，我们很高兴地宣布细分为行动。对于使用Segment作为CDP(客户数据平台)的公司来说，这是一个非常有用的功能，因为从现在开始，用户可以将Datagran中创建的机器学习模型的输出发送到Segment，然后将这些数据传输到Segment支持的不同业务应用程序。</p><h1 id="1c88" class="jz ka hx bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">为什么重要？</h1><p id="2168" class="pw-post-body-paragraph jb jc hx jd b je kx jg jh ji ky jk jl jm kz jo jp jq la js jt ju lb jw jx jy hb bi translated">目前，使用Segment的公司只能跟踪其网站、应用程序或服务器中的事件，并在业务应用程序中传播这些数据，以便进行分析或采取特定行动。为了能够运行预测分析，必须将多个应用程序和云服务器连接在一起，这可能既耗时又困难。通过Datagran，公司可以简单地连接细分市场集成，提取存储在其中的所有数据，运行机器学习模型，然后轻松地将输出发送到细分市场，如果用户不存在，将自动更新或创建用户。</p><p id="0139" class="pw-post-body-paragraph jb jc hx jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">我们客户的一个用例如下:</p><ol class=""><li id="24f7" class="lc ld hx jd b je jf ji jj jm le jq lf ju lg jy lh li lj lk bi translated">客户将其交易数据发送到充当CDP的段。</li><li id="8868" class="lc ld hx jd b je ll ji lm jm ln jq lo ju lp jy lh li lj lk bi translated">Segment不仅将数据发送到业务应用程序，还将其存储在雪花中。</li><li id="b60a" class="lc ld hx jd b je ll ji lm jm ln jq lo ju lp jy lh li lj lk bi translated">Datagran连接到Snowflake来带来Segment中包含的所有数据。</li><li id="ed61" class="lc ld hx jd b je ll ji lm jm ln jq lo ju lp jy lh li lj lk bi translated">客户执行ML模型，如销售预测、聚类等，并将输出发送回细分市场。</li><li id="8c6f" class="lc ld hx jd b je ll ji lm jm ln jq lo ju lp jy lh li lj lk bi translated">客户端使用数据段将数据发送到不同的业务应用程序以采取行动。</li></ol><p id="40ef" class="pw-post-body-paragraph jb jc hx jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">以下是Datagran中分段操作所需的输入:</p><ol class=""><li id="4086" class="lc ld hx jd b je jf ji jj jm le jq lf ju lg jy lh li lj lk bi translated"><strong class="jd hy"> Write键:</strong>这是一个API键，允许Datagran通过段的REST API发送数据。有关如何获得写入密钥的说明，请点击此<a class="ae lq" href="https://segment.com/docs/connections/find-writekey/" rel="noopener ugc nofollow" target="_blank">链接</a>。</li><li id="2f13" class="lc ld hx jd b je ll ji lm jm ln jq lo ju lp jy lh li lj lk bi translated"><strong class="jd hy">表格:</strong>是指您要从中提取数据的表格。一旦您将Segment操作连接到特定的操作符(通常是SQL操作符)，Datagran将自动检测您的表。</li><li id="f9c6" class="lc ld hx jd b je ll ji lm jm ln jq lo ju lp jy lh li lj lk bi translated"><strong class="jd hy">事件名称:</strong>指的是将持有您的属性的事件。例如，一个事件可以是“销售预测”。</li><li id="9616" class="lc ld hx jd b je ll ji lm jm ln jq lo ju lp jy lh li lj lk bi translated"><strong class="jd hy">属性:</strong>指事件中包含的属性。您可以拥有任意多的属性。</li><li id="8423" class="lc ld hx jd b je ll ji lm jm ln jq lo ju lp jy lh li lj lk bi translated"><strong class="jd hy">客户id: </strong>指您数据库中的客户id。如果用户存在于段中，我们将更新事件和属性。如果没有，我们将创建一个新的客户。</li></ol><p id="e997" class="pw-post-body-paragraph jb jc hx jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">带有分段操作的简化管道示例如下所示:</p><p id="ba88" class="pw-post-body-paragraph jb jc hx jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi">‍</p><figure class="ls lt lu lv fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lr"><img src="../Images/ae8c32ac43bc230be6991d27ad63c9cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*oeQwi-EX6a1hXb0K.png"/></div></div></figure><p id="9bf5" class="pw-post-body-paragraph jb jc hx jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">要使用分段作为操作，您必须在分段仪表板中创建HTTP源。这是它应该是什么样子的一个例子:</p><figure class="ls lt lu lv fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lr"><img src="../Images/2a7a332b2d173e7fe8fa393903b4eba4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*SsQJUmSTw1iLBUzF.png"/></div></div></figure><p id="897c" class="pw-post-body-paragraph jb jc hx jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">该段将收到的输出如下所示:</p><p id="8bed" class="pw-post-body-paragraph jb jc hx jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">analytics.track('162514333 '，'销售预测'，{ 'iphone': '0.734 '，' apple_watch': '0.812'})</p><p id="31a3" class="pw-post-body-paragraph jb jc hx jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">如前所述，这个方法有一个user_id字符串、一个事件字符串和一个属性字符串。</p><p id="11bd" class="pw-post-body-paragraph jb jc hx jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">Datagran将数据批量发送到Segment，并由Segment的库进行处理。以下内容摘自分部文件:</p><p id="6893" class="pw-post-body-paragraph jb jc hx jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">每个名为'<strong class="jd hy">的方法都不会'</strong>产生HTTP请求，而是在内存中排队。消息在后台批量刷新，这样可以加快操作速度。</p><p id="2426" class="pw-post-body-paragraph jb jc hx jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">默认情况下，段将刷新:</p><ul class=""><li id="0a9d" class="lc ld hx jd b je jf ji jj jm le jq lf ju lg jy lw li lj lk bi translated">每100条消息(用upload_size控制)</li><li id="8ca1" class="lc ld hx jd b je ll ji lm jm ln jq lo ju lp jy lw li lj lk bi translated">如果从最后一次冲洗起已经过了0.5秒(用upload_interval控制)</li></ul><p id="2e4d" class="pw-post-body-paragraph jb jc hx jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">每个批处理请求最多有500KB，每个调用最多有32KB。</p><h1 id="b1db" class="jz ka hx bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">如果消息太多会怎么样？</h1><p id="81ae" class="pw-post-body-paragraph jb jc hx jd b je kx jg jh ji ky jk jl jm kz jo jp jq la js jt ju lb jw jx jy hb bi translated">如果模块检测到刷新速度不能快于接收消息的速度，它将简单地停止接收消息。这意味着操作永远不会因为队列备份而崩溃。默认的最大队列大小是10000。</p><p id="5529" class="pw-post-body-paragraph jb jc hx jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">准备好进一步挖掘细分市场数据了吗？点击此处注册<a class="ae lq" href="https://www.datagran.io/" rel="noopener ugc nofollow" target="_blank">，使用您的细分市场账户遵循本指南。通过我们易于使用的管道工具，您可以利用您的数据并立即构建机器学习模型，在该工具中，您可以使用RFM、推荐产品、聚类等构建和部署模型。</a></p></div></div>    
</body>
</html>