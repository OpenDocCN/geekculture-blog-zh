<html>
<head>
<title>Question and Answering System Using GPT3</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用GPT3的问答系统</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/question-and-answering-system-using-gpt3-b4f8b6eae91c?source=collection_archive---------30-----------------------#2021-03-28">https://medium.com/geekculture/question-and-answering-system-using-gpt3-b4f8b6eae91c?source=collection_archive---------30-----------------------#2021-03-28</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/ed95893260e212752b564f4ecf4b3fda.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*31KHqGAH1AVQAvQm.jpg"/></div></div></figure><p id="ded0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">自从OpenAI发射GPT3号以来，我们已经看到了许多使用GPT 3开发的具有各种功能的应用程序。</p><p id="360b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">最近GPT 3号增加了<a class="ae jo" href="https://beta.openai.com/docs/guides/answers" rel="noopener ugc nofollow" target="_blank">问答</a>系统的新功能，我们带着它兜了一圈，检查它是如何工作的。</p><p id="f3f0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在我们的小数据实验中，这个系统看起来很有希望。它能从少量数据中非常准确地获取答案。未来，我们将尝试使用大量数据来检验它是如何工作的。</p><p id="898c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">对于那些已经获得GPT-3访问权限并想尝试GPT-3的新问题回答系统的人，我们制作了这个小教程。</p><h1 id="7e78" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">如何使用GPT-3问题回答</h1><p id="ade9" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">操场上没有QnA，所以我们必须通过API使用它。为此，我们将使用Python。</p><p id="91f8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">假设您的系统中已经安装了Python、pip和virtualenv。如果没有，请首先这样做，然后按照以下步骤。</p><p id="73b9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">通过以下步骤创建并激活virtualenv</p><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="85d5" class="lb jq hi kx b fi lc ld l le lf">virtualenv env_gpt --python=python3<br/>source env_gpt/bin/activate</span></pre><p id="e677" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">安装OpenAI Python绑定</p><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="2dc4" class="lb jq hi kx b fi lc ld l le lf">pip install openai</span></pre><p id="18d4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要使用GPT3 endpoint执行问答，我们需要向Open AI API提供问题、一组文档(段落)和一些示例，它将生成答案。</p><p id="0cc1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们可以以文档列表或文件的形式提供文档。</p><h2 id="bb01" class="lb jq hi bd jr lg lh li jv lj lk ll jz jb lm ln kd jf lo lp kh jj lq lr kl ls bi translated">1.让我们探索一下如何使用文档列表来回答问题:</h2><p id="e131" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">创建一个python文件，复制下面的代码，你需要把你的OpenAI API键值提供给openai.api_key，然后运行文件。</p><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="e231" class="lb jq hi kx b fi lc ld l le lf">import openai<br/>openai.api_key = "YOUR-API-KEY"<br/> <br/>document_list = ["Google was founded in 1998 by Larry Page and Sergey Brin while they were Ph.D. students at Stanford University in California. Together they own about 14 percent of its shares and control 56 percent of the stockholder voting power through supervoting stock. They incorporated Google as a privately held company on September 4, 1998. An initial public offering (IPO) took place on August 19, 2004, and Google moved to its headquarters in Mountain View, California, nicknamed the Googleplex. In August 2015, Google announced plans to reorganize its various interests as a conglomerate called Alphabet Inc. Google is Alphabet's leading subsidiary and will continue to be the umbrella company for Alphabet's Internet interests. Sundar Pichai was appointed CEO of Google, replacing Larry Page who became the CEO of Alphabet.",<br/>"Amazon is an American multinational technology company based in Seattle, Washington, which focuses on e-commerce, cloud computing, digital streaming, and artificial intelligence. It is one of the Big Five companies in the U.S. information technology industry, along with Google, Apple, Microsoft, and Facebook. The company has been referred to as 'one of the most influential economic and cultural forces in the world', as well as the world's most valuable brand. Jeff Bezos founded Amazon from his garage in Bellevue, Washington on July 5, 1994. It started as an online marketplace for books but expanded to sell electronics, software, video games, apparel, furniture, food, toys, and jewelry. In 2015, Amazon surpassed Walmart as the most valuable retailer in the United States by market capitalization."]<br/> <br/>response = openai.Answer.create(<br/> search_model="ada",<br/> model="curie",<br/> question="when was google founded?",<br/> documents=document_list,<br/> examples_context="In 2017, U.S. life expectancy was 78.6 years.",<br/> examples=[["What is human life expectancy in the United States?","78 years."]],<br/> max_tokens=10,<br/> stop=["\n", "&lt;|endoftext|&gt;"],<br/>)<br/> <br/>print(response)</span></pre><p id="6225" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在document_list中，您需要提供您的段落。</p><p id="b82c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> openai。Answer.create()函数参数:</strong> <br/> <strong class="is hj">问题:</strong>在此提供您输入的问题<br/> <strong class="is hj">文档:</strong>文档列表<br/> <strong class="is hj">示例_上下文:</strong>包含段落或上下文的文本示例，用于为您提供的示例生成答案。<br/> <strong class="is hj">示例:</strong>提供示例对问题&amp;答案<br/> <strong class="is hj">停止:</strong> API将停止进一步生成令牌<br/> <strong class="is hj"> max_tokens: </strong>最终响应中允许的最大令牌数</p><p id="3598" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">执行该文件后，您将看到如下响应:</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lt"><img src="../Images/0c72397049d3a33605335ff27c91dd8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*YTIVflSeXOW6AEpd.png"/></div></div></figure><h2 id="a548" class="lb jq hi bd jr lg lh li jv lj lk ll jz jb lm ln kd jf lo lp kh jj lq lr kl ls bi translated">2.让我们看看如何使用存储在文件中的数据来回答问题:</h2><p id="10f5" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">您可以创建一个. jsonl(JSON行)文件，其中每个JSON行包含“文本”字段和“元数据”字段(可选)。以下是简单的。jsonl文件格式</p><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="3ad2" class="lb jq hi kx b fi lc ld l le lf">{"text": "Hello OpenAI", "metadata": "sample data"}</span></pre><p id="46eb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们首先为QNA创建一个. jsonl文件，创建一个sample_qna.jsonl并在其中复制以下代码:</p><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="6f7e" class="lb jq hi kx b fi lc ld l le lf">{"text": Google was founded in 1998 by Larry Page and Sergey Brin while they were Ph.D. students at Stanford University in California. Together they own about 14 percent of its shares and control 56 percent of the stockholder voting power through supervoting stock. They incorporated Google as a privately held company on September 4, 1998. An initial public offering (IPO) took place on August 19, 2004, and Google moved to its headquarters in Mountain View, California, nicknamed the Googleplex. In August 2015, Google announced plans to reorganize its various interests as a conglomerate called Alphabet Inc. Google is Alphabet's leading subsidiary and will continue to be the umbrella company for Alphabet's Internet interests. Sundar Pichai was appointed CEO of Google, replacing Larry Page who became the CEO of Alphabet.", "metadata": "Google"} {"text": "Amazon is an American multinational technology company based in Seattle, Washington, which focuses on e-commerce, cloud computing, digital streaming, and artificial intelligence. It is one of the Big Five companies in the U.S. information technology industry, along with Google, Apple, Microsoft, and Facebook. The company has been referred to as 'one of the most influential economic and cultural forces in the world', as well as the world's most valuable brand.Jeff Bezos founded Amazon from his garage in Bellevue, Washington on July 5, 1994. It started as an online marketplace for books but expanded to sell electronics, software, video games, apparel, furniture, food, toys, and jewelry. In 2015, Amazon surpassed Walmart as the most valuable retailer in the United States by market capitalization.", "metadata": "Amazon"}</span></pre><p id="fbb2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一旦您创建了jsonl文件，现在您需要上传该文件。要上传文件，请创建一个python文件名“upload_file.py”，复制以下代码并添加您的API密钥:</p><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="bcdf" class="lb jq hi kx b fi lc ld l le lf">import openai<br/>openai.api_key = "YOUR-API-KEY"<br/> <br/>response = openai.File.create(<br/> file=open("sample_qna.jsonl"),<br/> purpose='answers'<br/>)<br/> <br/>print(response)</span></pre><p id="23ad" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在运行upload_file.py文件，您将得到如下类似的响应:</p><p id="11bf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">{ <br/> "bytes": 1691，<br/> "created_at": 1616762542，<br/>" filename ":" sample _ doc . jsonl "，<br/>" id ":" file-H5 zznvgduigntpqwevmjqajf "，<br/> "object": "file "，<br/> "purpose": "answers" <br/> }</p><p id="3652" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">根据上面的响应，我们需要文件ID</p><p id="2b4d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下面是使用文件执行问题回答的代码</p><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="f4ed" class="lb jq hi kx b fi lc ld l le lf">import openai<br/>openai.api_key = "YOUR-API-KEY"<br/> <br/>response = openai.Answer.create(<br/>   search_model="ada",<br/>   model="curie",<br/>   question="when was google founded?",<br/>   file="file-h5zzNVGdUigntPQWeVmJqAJf",<br/>   examples_context="In 2017, U.S. life expectancy was 78.6 years.",<br/>   examples=[["What is human life expectancy in the United States?","78 years."]],<br/>   max_rerank=10,<br/>   max_tokens=10,<br/>   stop=["\n", "&lt;|endoftext|&gt;"]<br/> <br/>)<br/> <br/>print(response)</span></pre><p id="5737" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">打开的参数。Answer.create()与我们上面看到的几乎相同，我们需要提供file参数而不是document</p><p id="cc07" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">file:指定上传文件后我们得到的文件ID</p><p id="2cdf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">注意</strong>:您可以指定文件或文档，但不能同时指定两者</p><p id="d21b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您将得到以下响应:</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lt"><img src="../Images/0f6b51a3b58fd6f922f6bb44872bbad7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*744Vh67O7fd-rg54.png"/></div></div></figure><p id="4443" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">正如我们所见，使用GPT-3建立QnA系统并不困难。我们对小文本数据的测试结果看起来也不错。</p><p id="da42" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">不过，我们发现生成结果需要一些时间，如果文本长度增加，可能需要更长时间。</p><p id="33f6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将在接下来的日子里公布我们进一步的实验和学习。</p><p id="a300" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们使用GPT-3创建了<a class="ae jo" href="https://www.pragnakalp.com/intent-classification-paraphrasing-examples-using-gpt-3/" rel="noopener ugc nofollow" target="_blank">文本解释</a>、<a class="ae jo" href="https://www.pragnakalp.com/intent-classification-paraphrasing-examples-using-gpt-3/" rel="noopener ugc nofollow" target="_blank">意图分类</a>、<a class="ae jo" href="https://www.youtube.com/watch?v=MAsjLIu3gPU" rel="noopener ugc nofollow" target="_blank">广告生成</a>和许多其他应用。</p></div><div class="ab cl lu lv gp lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="hb hc hd he hf"><p id="8ab7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="mb">最初发布于</em> <a class="ae jo" href="https://www.pragnakalp.com/question-answering-using-gpt3-examples/" rel="noopener ugc nofollow" target="_blank"> <em class="mb">问答系统使用的是</em></a><em class="mb">【gp T3】。</em></p></div></div>    
</body>
</html>