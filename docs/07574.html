<html>
<head>
<title>New York City Citywide Annualized Property sales Exploratory Data Analysis(EDA)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">纽约市全市年度房地产销售探索性数据分析(EDA)</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/new-york-city-citywide-annualized-property-sales-exploratory-data-analysis-eda-697e079b3fd0?source=collection_archive---------24-----------------------#2021-09-22">https://medium.com/geekculture/new-york-city-citywide-annualized-property-sales-exploratory-data-analysis-eda-697e079b3fd0?source=collection_archive---------24-----------------------#2021-09-22</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/7baef047d12d9774442a1799c718e41d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*krbgf2pwtAv6b0UDxKhXiQ.jpeg"/></div></div></figure><p id="fdb5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">大家好，欢迎来到新的真实世界数据分析，向人们展示数据的强大。</p><p id="a707" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">今天，我发现了一个很好的数据集，可以用来预测纽约市的房地产价格，它基于一些特征，如区、社区等，所以这可能是一个非常有用的应用程序。</p><p id="ddec" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们谈谈这些数据集的来源，这些数据来自纽约市的官方网站</p><p id="7f1d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">年度销售文件显示在纽约市销售的房产的年度销售信息。这些文件还包含诸如邻居、建筑类型、面积和其他数据等信息。</p><p id="44fc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我将本文分为三个部分:</p><ul class=""><li id="cb6d" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated">预处理数据</li><li id="0ba6" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">使用EDA探索数据</li><li id="a113" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">利用机器学习预测房地产价格</li></ul><h1 id="3217" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">预处理:</h1><p id="af3a" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">这一步称为数据清理或数据争论，我们清理和转换数据，使其适合可视化和建模阶段，这一步包括:</p><ul class=""><li id="1f30" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated">删除重复或不相关的观察</li><li id="66b2" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">修复结构错误</li><li id="55f9" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">处理丢失的数据</li><li id="336b" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">验证和质量保证</li></ul><h2 id="ca15" class="lf kd hi bd ke lg lh li ki lj lk ll km jb lm ln kq jf lo lp ku jj lq lr ky ls bi translated">删除重复或不相关的观察</h2><p id="314e" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">在数据收集过程中，重复观察最常见。当您组合来自多个地方的数据集、收集数据或者从客户或多个部门接收数据时，就有可能创建重复的数据。在此过程中，重复数据消除是需要考虑的最大方面之一</p><h2 id="c93c" class="lf kd hi bd ke lg lh li ki lj lk ll km jb lm ln kq jf lo lp ku jj lq lr ky ls bi translated">修复结构错误</h2><p id="7de4" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">我将销售月和销售年添加到数据集，以帮助我进行逐年分析。</p><h2 id="75f8" class="lf kd hi bd ke lg lh li ki lj lk ll km jb lm ln kq jf lo lp ku jj lq lr ky ls bi translated">处理丢失的数据</h2><p id="dc27" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">处理缺失数据有很多策略，我使用的第一个策略是丢弃所有具有缺失值的观察值，但这样做会丢弃或丢失信息，因此您可以自己尝试另一种策略，如随机样本插补，它使方差分布与原始方差非常接近。</p><h2 id="3be2" class="lf kd hi bd ke lg lh li ki lj lk ll km jb lm ln kq jf lo lp ku jj lq lr ky ls bi translated">验证和质量保证</h2><p id="fb76" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">以下是引导分析的一些问题:</p><ul class=""><li id="f7b0" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated">代表地理位置的行政区和社区是否会影响纽约房地产的销售？又各自是如何受到影响的呢？</li><li id="cec0" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">每个区的平均销售价格是多少？</li><li id="0224" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">每平方英尺的大小/面积会影响销售吗？</li><li id="428a" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">物业用途或分类是否影响销售？</li><li id="6b75" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">我们应该关注哪些领域来增加我们的销售额？</li><li id="e84b" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">如何描述每个区的房产交易？</li></ul><h1 id="da7a" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">探索性数据分析(EDA):</h1><p id="f6b9" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">我一直使用python、matplotlib和seaborn作为可视化工具来生成图表和进行统计分析</p><div class="lt lu lv lw fd ab cb"><figure class="lx ij ly lz ma mb mc paragraph-image"><img src="../Images/c08b87eaba8f6f17fc4e923e1a2986e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:744/format:webp/1*Lu7WVvuemcg_PgxdgHvZgg.png"/></figure><figure class="lx ij md lz ma mb mc paragraph-image"><img src="../Images/6e8c12c833a00f4e95a803bade85926b.png" data-original-src="https://miro.medium.com/v2/resize:fit:786/format:webp/1*p3MFNA-igp07lA_so6Iiuw.png"/><figcaption class="me mf et er es mg mh bd b be z dx mi di mj mk">Sales Amount Vs Sales Average</figcaption></figure></div><p id="17f9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你可以看到皇后区有最多的销售记录，但是曼哈顿有最高的平均销售价格，如果你不是纽约人，你可能会问为什么？</p><blockquote class="ml mm mn"><p id="8895" class="iq ir mo is b it iu iv iw ix iy iz ja mp jc jd je mq jg jh ji mr jk jl jm jn hb bi translated"><em class="hi">答案是曼哈顿的地理位置更好，它是纽约市五个区中人口最稠密、地理面积最小的，而且曼哈顿的GDP是五个区中最大的，所以这里的房价应该比其他地方更贵，这也证明了皇后区面积最大但不是房价最高的区的数据是正确的</em></p></blockquote><figure class="lt lu lv lw fd ij er es paragraph-image"><div class="er es ms"><img src="../Images/d4ce3a3cdf6084772e82c002214da042.png" data-original-src="https://miro.medium.com/v2/resize:fit:774/format:webp/1*8N2jbORJzE6jNx9bEL_Zbw.png"/></div><figcaption class="me mf et er es mg mh bd b be z dx">Properties Transactions</figcaption></figure><blockquote class="ml mm mn"><p id="ebcc" class="iq ir mo is b it iu iv iw ix iy iz ja mp jc jd je mq jg jh ji mr jk jl jm jn hb bi translated">交易是没有现金对价的所有权转移</p></blockquote><p id="c1a7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="mo">这张图表显示了每个区的房产交易数量，【2016年至2020年，布鲁克林的房产交易最多，皇后区次之</em></p><figure class="lt lu lv lw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mt"><img src="../Images/6bea3be31ff7bdd100de4cd3653bae23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iu_ju6Bs7tfr0lGJy3OBrQ.png"/></div></div><figcaption class="me mf et er es mg mh bd b be z dx">Average sales per property usage ( building type)</figcaption></figure><p id="cf79" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="mo">豪华酒店和剧院似乎是销售额最大的建筑类别，税收等级1，公寓停车场是销售额最低的建筑类别</em></p><figure class="lt lu lv lw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mu"><img src="../Images/6c20daafaacabc38e23952112ec8ab08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f2mscx1vo37lCq35Uc1tkQ.png"/></div></div><figcaption class="me mf et er es mg mh bd b be z dx">Sales Trend per borough by years</figcaption></figure><p id="68fe" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这里我们可以比较每个区每年的工资，</p><p id="f74e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">布朗克斯在其他年份的2020年总销量最高</p><p id="82fa" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当然，曼哈顿的总销售额最高，但在这里我们可以看到它在2019年的总销售额最高</p><figure class="lt lu lv lw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mv"><img src="../Images/cc5d19be481e63c802c669c1df035c14.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oJGRvya8uyfbBk4kqkIlCg.png"/></div></div><figcaption class="me mf et er es mg mh bd b be z dx">Residential Units Vs Commercial units</figcaption></figure><p id="021c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这里我们按住宅和商业单元来分配每个区的销售额，看起来布鲁克林的住宅单元销售额最高，曼哈顿的商业单元销售额最高</p><figure class="lt lu lv lw fd ij er es paragraph-image"><div class="er es mw"><img src="../Images/b7a720f12e770dd596dfc9a6a44987b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1380/format:webp/1*TvC_NFJl_AciO7NbVCX6fA.png"/></div><figcaption class="me mf et er es mg mh bd b be z dx">Correlation matrix</figcaption></figure><p id="700d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为了总结大量数据，我使用相关矩阵来查看模式并研究每个变量与其他变量之间的线性关系，高度相关的特征在建模和创建图表时非常有用。</p><h1 id="8819" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated"><strong class="ak">预测房地产价格(回归问题):</strong></h1><p id="c2f2" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">我选择XGboost回归器作为预测价格的最佳和最常见的回归器之一，它是梯度提升树算法的一种实现，梯度提升是一种监督学习算法，它试图通过组合一组更简单、更弱的模型的估计值来准确预测目标变量。</p><p id="e15d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我使用了k-fold交叉验证来避免过度拟合，并使模型更好地泛化。</p><p id="2353" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这种类型的回归问题中，我们倾向于使用均方误差作为损失函数，正如你可以看到的交叉验证的结果和测试数据的评估一点也不好。</p><div class="lt lu lv lw fd ab cb"><figure class="lx ij mx lz ma mb mc paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><img src="../Images/6e1b8da4f1dd02275221834b18d9cfb9.png" data-original-src="https://miro.medium.com/v2/resize:fit:828/format:webp/1*3eRftYhChy6DWMjCHnD1oQ.png"/></div></figure><figure class="lx ij my lz ma mb mc paragraph-image"><img src="../Images/94f66ac17f1f9f98cfc66498b3f7ef09.png" data-original-src="https://miro.medium.com/v2/resize:fit:366/format:webp/1*X6vkMT0fFT58bTXuJtUfuA.png"/><figcaption class="me mf et er es mg mh bd b be z dx mz di na mk">Training Attempt</figcaption></figure></div><p id="fa88" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">因此，为了克服这种非常高的误差并使这种误差函数最小化，我们可以进行一些功能工程，以从我们的功能中获得最大收益，或者进行超参数调整，以获得最小化MSE的最佳参数，我选择通过运行网格搜索交叉验证来进行最新的操作，以获得针对该问题的最佳参数集，即使您有GPU来训练模型，这一过程也需要时间，所以请保持关注，我将很快更新本文，以获得更好的结果。</p><div class="lt lu lv lw fd ab cb"><figure class="lx ij nb lz ma mb mc paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><img src="../Images/5bb240c5e37a092d1029586d9b7ad56b.png" data-original-src="https://miro.medium.com/v2/resize:fit:844/format:webp/1*lIYKGS68mLF8YQ3gyBGqsw.png"/></div></figure><figure class="lx ij nc lz ma mb mc paragraph-image"><img src="../Images/4867a16f82007379e192273d76feccd6.png" data-original-src="https://miro.medium.com/v2/resize:fit:310/format:webp/1*OqX1D81YDMJ7IJbPqAEAhA.png"/><figcaption class="me mf et er es mg mh bd b be z dx nd di ne mk">The Result after a Grid Search</figcaption></figure></div><p id="43b6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你想看到所有的代码资产和详细分析的图像，你可以从<a class="ae nf" href="https://eu-gb.dataplatform.cloud.ibm.com/analytics/notebooks/v2/ffdf8445-ca99-4049-b99f-735e8932f581/view?access_token=ee0bada4ca3541adfdc4367ab7c6c569029a115ceac79ba2c3b303b61ab1ad53" rel="noopener ugc nofollow" target="_blank">这里</a>看到笔记本</p><p id="e526" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">希望你有快乐的一天，^^.</p></div></div>    
</body>
</html>