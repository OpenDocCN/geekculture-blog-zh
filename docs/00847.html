<html>
<head>
<title>Node Forever JS on Any Virtual Machine</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">任何虚拟机上的节点永久JS</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/node-forever-js-on-any-virtual-machine-e5d573583b67?source=collection_archive---------17-----------------------#2021-03-15">https://medium.com/geekculture/node-forever-js-on-any-virtual-machine-e5d573583b67?source=collection_archive---------17-----------------------#2021-03-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="a4e2" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">从任何虚拟机永久托管您的web应用</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/0dc917580dbb95b0173af5892a9a8d51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0Y6PEWUF5veyfi0g6vZPHQ.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">credit goes to some random dude in this world</figcaption></figure><p id="28b4" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">如果您曾经想要永久托管Node.js应用程序，那么就在这个正确的地方。在这里，您将学习如何永远运行Node js应用程序，即使控制台关闭。</p><h2 id="677e" class="kj kk hi bd kl km kn ko kp kq kr ks kt jw ku kv kw ka kx ky kz ke la lb lc ld bi translated"><strong class="ak">永久</strong> →一个简单的CLI工具，用于确保给定脚本持续运行(即永久运行)</h2><p id="efdc" class="pw-post-body-paragraph jn jo hi jp b jq le ij js jt lf im jv jw lg jy jz ka lh kc kd ke li kg kh ki hb bi translated">如果你曾经在使用虚拟机时遇到过如下所示的问题，那么，这个博客将帮助你克服这个问题。</p><pre class="iy iz ja jb fd lj lk ll lm aw ln bi"><span id="a001" class="kj kk hi lk b fi lo lp l lq lr">“ <strong class="lk hj">client_loop: send disconnect: Broken pipe</strong> “</span></pre><p id="32e6" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">是的，这种情况总是在使用云时发生，这就是package Forever Js派上用场的地方。</p><p id="e6c4" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">在这里，我将揭示所有有用的命令是永远的Js所需要的。现在我们开始吧，不过在开始之前，先安装forever js。</p><p id="79bb" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">代码如下:</p><pre class="iy iz ja jb fd lj lk ll lm aw ln bi"><span id="bbed" class="kj kk hi lk b fi lo lp l lq lr"><strong class="lk hj">sudo apt-get update</strong></span><span id="3a04" class="kj kk hi lk b fi ls lp l lq lr"><strong class="lk hj">sudo su</strong></span><span id="7fd7" class="kj kk hi lk b fi ls lp l lq lr"><strong class="lk hj">npm i forever -g</strong></span></pre><p id="e062" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">下一步是创建一个测试节点js应用程序，我们将把它用于这个永久的应用程序。</p><blockquote class="lt lu lv"><p id="2e23" class="jn jo lw jp b jq jr ij js jt ju im jv lx jx jy jz ly kb kc kd lz kf kg kh ki hb bi translated"><strong class="jp hj">注:</strong></p><p id="230e" class="jn jo lw jp b jq jr ij js jt ju im jv lx jx jy jz ly kb kc kd lz kf kg kh ki hb bi translated"><strong class="jp hj">伙计们，我正在使用EC2服务器实例，像往常一样，我只是抓取了自由层限制下的任何东西，即Ubuntu或任何基于Linux的操作系统。</strong></p></blockquote><p id="b3f6" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">下面是代码，首先创建一个<strong class="jp hj"> server.js </strong>文件</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ma"><img src="../Images/c51ddb5d1a88f2c382a839f50c49a396.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*siOxWY6ygFMY78i5RQX0YA.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Server js code</figcaption></figure><p id="1a16" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">一旦你这样做了，只要验证它是否工作正常</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mb"><img src="../Images/b732167bad8dd5029ccf86ce666d614d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WMIYJZ6kGKcmSle6HfJpkQ.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">verify whether it works without error</figcaption></figure><p id="c5ee" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">现在，使用分配给EC2实例的IP访问浏览器，这样就可以验证这一点，如下所示</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mc"><img src="../Images/cd8dbd803e822b0894a0a4e1fe5a4f43.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4xjyTEd3eaSGsHNho3UNJA.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">verify from your browser</figcaption></figure><p id="2da7" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">好吧，我想我们现在有我们心爱的服务器成功运行。</p><p id="2d9e" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">现在剩下的就是利用永久的js库了。</p><h2 id="ccac" class="kj kk hi bd kl km kn ko kp kq kr ks kt jw ku kv kw ka kx ky kz ke la lb lc ld bi translated"><strong class="ak">永远的命令</strong></h2><h2 id="1059" class="kj kk hi bd kl km kn ko kp kq kr ks kt jw ku kv kw ka kx ky kz ke la lb lc ld bi translated"><strong class="ak">永远开始</strong></h2><p id="6378" class="pw-post-body-paragraph jn jo hi jp b jq le ij js jt lf im jv jw lg jy jz ka lh kc kd ke li kg kh ki hb bi translated">通常，我们通过运行node server.js代码来启动我们的服务器，但是在这里，在运行时使用代码会有一个小的变化，代码如下:</p><pre class="iy iz ja jb fd lj lk ll lm aw ln bi"><span id="eb99" class="kj kk hi lk b fi lo lp l lq lr"><strong class="lk hj">forever start server.js</strong></span></pre><h2 id="c3d3" class="kj kk hi bd kl km kn ko kp kq kr ks kt jw ku kv kw ka kx ky kz ke la lb lc ld bi translated"><strong class="ak">永远的名单</strong></h2><p id="bd75" class="pw-post-body-paragraph jn jo hi jp b jq le ij js jt lf im jv jw lg jy jz ka lh kc kd ke li kg kh ki hb bi translated">好了，现在我们可以使用永久列表命令进行验证</p><pre class="iy iz ja jb fd lj lk ll lm aw ln bi"><span id="9455" class="kj kk hi lk b fi lo lp l lq lr"><strong class="lk hj">forever list</strong></span></pre><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es md"><img src="../Images/0c26da3169f514fca7cbfb4c23b3cb2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*shRtqFX5xkY3WE_CJuYPAQ.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">forever list</figcaption></figure><p id="ad45" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">这个命令实际上是用来列出所有永远运行的脚本，它不会在这里停止。它还向我们显示位置、进程id、运行时间以及正在运行的每个脚本的日志文件名的详细信息。</p><h2 id="e32d" class="kj kk hi bd kl km kn ko kp kq kr ks kt jw ku kv kw ka kx ky kz ke la lb lc ld bi translated"><strong class="ak">永远停止</strong></h2><p id="1461" class="pw-post-body-paragraph jn jo hi jp b jq le ij js jt lf im jv jw lg jy jz ka lh kc kd ke li kg kh ki hb bi translated">下一个命令是停止，是的，如果有一个开始，那么肯定会有一个停止。</p><p id="660e" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">我们可以停止使用您想要停止的脚本的文件名。</p><p id="77c2" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">代码如下所示，</p><pre class="iy iz ja jb fd lj lk ll lm aw ln bi"><span id="8531" class="kj kk hi lk b fi lo lp l lq lr"><strong class="lk hj">forever stop server.js</strong></span></pre><p id="dd9f" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">使用这个命令，您必须到达节点应用程序正在运行的文件的特定位置，然后才停止运行，否则它将无法正常工作。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es me"><img src="../Images/f61a4811f4dc4eb51f21eab63e6081c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nZMyTdDBkv8b0x170sEUDA.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">forever stop cmd</figcaption></figure><p id="fa2d" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">好吧，如果你想停止一个基于uid的文件。</p><h2 id="b108" class="kj kk hi bd kl km kn ko kp kq kr ks kt jw ku kv kw ka kx ky kz ke la lb lc ld bi translated"><strong class="ak">永远停止uid </strong></h2><p id="4614" class="pw-post-body-paragraph jn jo hi jp b jq le ij js jt lf im jv jw lg jy jz ka lh kc kd ke li kg kh ki hb bi translated">嗯，无论何时使用forever命令启动else list，都会显示带有uid的脚本的输出。因此，我们也可以停止使用这些命令，而不是键入脚本文件的名称。您可以使用start或list命令进行验证。现在键入以下命令，</p><pre class="iy iz ja jb fd lj lk ll lm aw ln bi"><span id="6c91" class="kj kk hi lk b fi lo lp l lq lr"><strong class="lk hj">forever stop o</strong></span></pre><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mf"><img src="../Images/c12f02c0232389bbbc2687b4949fa476.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DlfqjXFSOdfqTTAXcJu9fA.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">forever stop 0</figcaption></figure><p id="d899" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">即使在这里，您也可以看到我提到的uid。</p><h2 id="a34b" class="kj kk hi bd kl km kn ko kp kq kr ks kt jw ku kv kw ka kx ky kz ke la lb lc ld bi translated"><strong class="ak">永远停止</strong></h2><p id="23fc" class="pw-post-body-paragraph jn jo hi jp b jq le ij js jt lf im jv jw lg jy jz ka lh kc kd ke li kg kh ki hb bi translated">好吧，如果你想停止所有正在运行的程序，简单的stopall，但是有两个命令，一个是永久命令，另一个是普通的节点命令。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mg"><img src="../Images/a31bde181ca71834657efbf4ba537df3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dvh1gumQYN2YOp2oLNF5Jw.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">forever stopall</figcaption></figure><h2 id="4eb4" class="kj kk hi bd kl km kn ko kp kq kr ks kt jw ku kv kw ka kx ky kz ke la lb lc ld bi translated"><strong class="ak">永远的日志</strong></h2><p id="3010" class="pw-post-body-paragraph jn jo hi jp b jq le ij js jt lf im jv jw lg jy jz ka lh kc kd ke li kg kh ki hb bi translated">如果您希望找到日志，那么您可以使用下面的代码</p><pre class="iy iz ja jb fd lj lk ll lm aw ln bi"><span id="60c0" class="kj kk hi lk b fi lo lp l lq lr"><strong class="lk hj">forever logs</strong></span></pre><p id="1349" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">它将列出该列表，以及与uid一起运行的每个脚本的路径。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mh"><img src="../Images/d3fabe182606b64b2b6575c92eec2ddd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wrjssJ3sITd5nJqwuxpBCg.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">forever logs</figcaption></figure><p id="5068" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">既然我们停止了forever脚本并验证了我们的浏览器，它应该会弹出以下屏幕，</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mi"><img src="../Images/fb6697ef80747bf03c9b68ea88bfcf9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wlAxmI0HHpMkuuTo-s9fyA.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">killall node</figcaption></figure><p id="f89d" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">为此，您可以使用任何命令，即正常节点命令或永久命令，</p><pre class="iy iz ja jb fd lj lk ll lm aw ln bi"><span id="360a" class="kj kk hi lk b fi lo lp l lq lr"><strong class="lk hj">killall node</strong></span><span id="8975" class="kj kk hi lk b fi ls lp l lq lr"><strong class="lk hj">forever stopall</strong></span></pre><p id="23e0" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">现在您可以使用forever start命令并关闭EC2实例终端，然后自己进行验证。</p><p id="2985" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">我想我已经给出了大部分Forever js命令的细节，剩下的几个命令我会给你们，并尝试一下。</p><h2 id="64d0" class="kj kk hi bd kl km kn ko kp kq kr ks kt jw ku kv kw ka kx ky kz ke la lb lc ld bi translated">命令:</h2><pre class="iy iz ja jb fd lj lk ll lm aw ln bi"><span id="17b1" class="kj kk hi lk b fi lo lp l lq lr"><strong class="lk hj">forever restart server.js</strong></span><span id="d257" class="kj kk hi lk b fi ls lp l lq lr"><strong class="lk hj">forever restart 0 --&gt; </strong>restarts uid o script alone</span><span id="9d77" class="kj kk hi lk b fi ls lp l lq lr"><strong class="lk hj">forever restartall --&gt; </strong>restarts all running forever scripts</span><span id="bf60" class="kj kk hi lk b fi ls lp l lq lr"><strong class="lk hj">forever -h --&gt; </strong>-h, –help: Command line help information</span><span id="f3cb" class="kj kk hi lk b fi ls lp l lq lr"><strong class="lk hj">forever config --&gt; </strong>lists all forever user configurations</span><span id="98df" class="kj kk hi lk b fi ls lp l lq lr"><strong class="lk hj">forever clear --&gt; </strong>clears the specified forever config by its key</span><span id="e26e" class="kj kk hi lk b fi ls lp l lq lr"><strong class="lk hj">forever cleanlogs --&gt; </strong>deletes all historical forever log files</span><span id="3019" class="kj kk hi lk b fi ls lp l lq lr"><strong class="lk hj">forever set --&gt; </strong>defines a forever config value for an unique key</span></pre><p id="4127" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">你可以在我的GitHub中找到server.js文件。</p><blockquote class="lt lu lv"><p id="c2a5" class="jn jo lw jp b jq jr ij js jt ju im jv lx jx jy jz ly kb kc kd lz kf kg kh ki hb bi translated"><strong class="jp hj">GitHub</strong><a class="ae mj" href="https://github.com/narenltk/forever_node_js" rel="noopener ugc nofollow" target="_blank">T5】链接T7】</a></p></blockquote><p id="2f90" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">如果您想了解如何使用openssl为web应用程序进行证书绑定，</p><div class="mk ml ez fb mm mn"><a href="https://javascript.plainenglish.io/generate-ssl-certificate-using-node-js-for-web-apps-73d452ad5898" rel="noopener  ugc nofollow" target="_blank"><div class="mo ab dw"><div class="mp ab mq cl cj mr"><h2 class="bd hj fi z dy ms ea eb mt ed ef hh bi translated">使用Node.js为web应用程序生成SSL证书</h2><div class="mu l"><h3 class="bd b fi z dy ms ea eb mt ed ef dx translated">嘿，这里的每一个人，我将给你们一个带SSL证书的节点js应用程序的基本设置的提示。我们会…</h3></div><div class="mv l"><p class="bd b fp z dy ms ea eb mt ed ef dx translated">javascript.plainenglish.io</p></div></div><div class="mw l"><div class="mx l my mz na mw nb jh mn"/></div></div></a></div><blockquote class="lt lu lv"><p id="647d" class="jn jo lw jp b jq jr ij js jt ju im jv lx jx jy jz ly kb kc kd lz kf kg kh ki hb bi translated"><strong class="jp hj">如果您希望保持联系，</strong></p></blockquote><div class="mk ml ez fb mm mn"><a href="https://www.linkedin.com/in/narenltk/" rel="noopener  ugc nofollow" target="_blank"><div class="mo ab dw"><div class="mp ab mq cl cj mr"><h2 class="bd hj fi z dy ms ea eb mt ed ef hh bi translated">Narendiran Krishnan —印度泰米尔纳德邦哥印拜陀|职业简介| LinkedIn</h2><div class="mu l"><h3 class="bd b fi z dy ms ea eb mt ed ef dx translated">查看世界上最大的职业社区LinkedIn上Narendiran Krishnan的个人资料。纳伦德兰有6份工作…</h3></div><div class="mv l"><p class="bd b fp z dy ms ea eb mt ed ef dx translated">www.linkedin.com</p></div></div><div class="mw l"><div class="nc l my mz na mw nb jh mn"/></div></div></a></div><div class="mk ml ez fb mm mn"><a href="https://github.com/narenltk" rel="noopener  ugc nofollow" target="_blank"><div class="mo ab dw"><div class="mp ab mq cl cj mr"><h2 class="bd hj fi z dy ms ea eb mt ed ef hh bi translated">narenltk —概述</h2><div class="mu l"><h3 class="bd b fi z dy ms ea eb mt ed ef dx translated">骗人的把戏。需要咖啡来聚焦…！！！narenltk有10个可用的存储库。在GitHub上关注他们的代码。</h3></div><div class="mv l"><p class="bd b fp z dy ms ea eb mt ed ef dx translated">github.com</p></div></div><div class="mw l"><div class="nd l my mz na mw nb jh mn"/></div></div></a></div><blockquote class="lt lu lv"><p id="706f" class="jn jo lw jp b jq jr ij js jt ju im jv lx jx jy jz ly kb kc kd lz kf kg kh ki hb bi translated">你可以用谷歌搜索“narenltk / narendiran krishnan”或者发邮件到→narenltk@gmail.com→乐意帮忙..！！！</p></blockquote></div></div>    
</body>
</html>