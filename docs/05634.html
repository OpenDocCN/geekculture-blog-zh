<html>
<head>
<title>How to use Go to send Telegram messages to your phone</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Go向您的手机发送电报信息</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/how-to-use-go-to-send-telegram-messages-to-your-phone-a819bdf7f35c?source=collection_archive---------7-----------------------#2021-07-27">https://medium.com/geekculture/how-to-use-go-to-send-telegram-messages-to-your-phone-a819bdf7f35c?source=collection_archive---------7-----------------------#2021-07-27</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="bdba" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">关于如何使用Go从服务器通过电报发送消息的简短指南</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/4299ef56e4d424d8537bd6e4e9d0012c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5eFPUySaFF5DgnbH"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Photo by <a class="ae jn" href="https://unsplash.com/@eugenechystiakov?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Eugene Chystiakov</a> on <a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="1195" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">本指南将介绍创建电报机器人的步骤，以及如何使用它向您的手机或平板电脑发送消息。你需要的只是电报app和围棋基础知识。</p><h1 id="59dd" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">观众</h1><p id="8017" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">软件工程师、开发工程师、系统管理员、其他知道或打算学习围棋的人</p><h1 id="27e7" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">先决条件</h1><ul class=""><li id="988c" class="lh li hi jq b jr lc ju ld jx lj kb lk kf ll kj lm ln lo lp bi translated">装有Linux或macOS的计算机</li><li id="ebe9" class="lh li hi jq b jr lq ju lr jx ls kb lt kf lu kj lm ln lo lp bi translated">安装在该计算机上— <a class="ae jn" href="https://golang.org/doc/install" rel="noopener ugc nofollow" target="_blank">指令</a></li><li id="6a3c" class="lh li hi jq b jr lq ju lr jx ls kb lt kf lu kj lm ln lo lp bi translated">安装在那台计算机上的git—<a class="ae jn" href="https://git-scm.com/downloads" rel="noopener ugc nofollow" target="_blank">指令</a></li><li id="b3ec" class="lh li hi jq b jr lq ju lr jx ls kb lt kf lu kj lm ln lo lp bi translated">智能手机或带有SIM卡的平板电脑(Telegram应用程序需要电话号码)</li></ul><h1 id="f2a8" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">步伐</h1><h2 id="6117" class="lv kl hi bd km lw lx ly kq lz ma mb ku jx mc md kw kb me mf ky kf mg mh la mi bi translated">[ 1 ].创建一个电报机器人</h2><p id="9d3a" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">在手机或平板电脑上安装Telegram应用程序:</p><ul class=""><li id="f77b" class="lh li hi jq b jr js ju jv jx mj kb mk kf ml kj lm ln lo lp bi translated">对于苹果设备:<a class="ae jn" href="https://apps.apple.com/app/telegram-messenger/id686449807" rel="noopener ugc nofollow" target="_blank">应用商店</a></li><li id="2685" class="lh li hi jq b jr lq ju lr jx ls kb lt kf lu kj lm ln lo lp bi translated">对于Android设备:<a class="ae jn" href="https://play.google.com/store/apps/details?id=org.telegram.messenger" rel="noopener ugc nofollow" target="_blank"> Google Play </a></li></ul><p id="3901" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果您还没有帐户，请按照说明在此应用程序上创建帐户。</p><p id="4fde" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">打开应用程序，在右上角你应该可以找到搜索图标。在那里，搜索“<em class="mm">僵尸爸爸</em>”。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mn"><img src="../Images/bb9465610d463858c465f75b0d932d6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QfYOxL4i5T14ab4lEcLo0g.jpeg"/></div></div></figure><p id="8606" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">现在，使用<em class="mm"> /newbot </em>命令，并按照屏幕截图中显示的电报应用程序的指示进行操作:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mo"><img src="../Images/7bd5683d9f586b5811e43da1d2dab348.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s8KeVZ9exVqyP3s8afjsSw.jpeg"/></div></div></figure><p id="f5c8" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在您的计算机中打开一个终端窗口，将令牌放入一个变量中，然后像下面这样导出:</p><pre class="iy iz ja jb fd mp mq mr ms aw mt bi"><span id="d8cf" class="lv kl hi mq b fi mu mv l mw mx"># This is just an example, use your own unique token</span><span id="07ab" class="lv kl hi mq b fi my mv l mw mx">export TOKEN="0123456789:FAEEbVYdi_MyqlL7NTzyvR1PT9JidSLotJ0"</span></pre><p id="0c05" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">让终端窗口保持打开状态，以便执行后续步骤。</p><h2 id="e6c3" class="lv kl hi bd km lw lx ly kq lz ma mb ku jx mc md kw kb me mf ky kf mg mh la mi bi translated">[ 2 ].找出聊天ID</h2><p id="9b04" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">现在你需要找到你的电报用户名的聊天ID。这是必需的，因为机器人必须知道将要发送的消息的目的地。</p><p id="48b2" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">要找到它，您必须向您的bot发送消息，如下所示，然后运行GET请求。所以，让我们开始吧。</p><p id="0fb0" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在你的手机或平板电脑中，打开电报应用程序，搜索你的机器人名称，按下下面的开始按钮。这将发送第一条消息，该消息将是“<em class="mm"> /start </em>”。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mo"><img src="../Images/4d8aa9d78840dd8db768799ee86c5f7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AvoAm6lnRAeoBo0kuBuEaw.jpeg"/></div></div></figure><p id="eb0f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">现在，我们可以在同一个终端窗口中运行以下命令:</p><pre class="iy iz ja jb fd mp mq mr ms aw mt bi"><span id="e592" class="lv kl hi mq b fi mu mv l mw mx">curl -s <a class="ae jn" href="https://api.telegram.org/bot${TELEGRAM_TOKEN}/getUpdates" rel="noopener ugc nofollow" target="_blank">https://api.telegram.org/bot${TOKEN}/getUpdates</a></span></pre><p id="c993" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">输出应该类似于:</p><pre class="iy iz ja jb fd mp mq mr ms aw mt bi"><span id="fab7" class="lv kl hi mq b fi mu mv l mw mx">{"ok":true,"result":[{"update_id":116133001,"message":{"message_id":1,<strong class="mq hj">"from":{"id":12345678</strong>,"is_bot":false,"first_name": "Marius","username": "&lt;USERNAME_REMOVED&gt;","language_code":"en"},"chat":{"id":90851090,"first_name":"Marius","username":"&lt;USERNAME_REMOVED&gt;","type":"private"},"date":1627153519,"text":"/start","entities":[{"offset":0,"length":6,"type":"bot_command"}]}}]}</span></pre><p id="d572" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我知道，那是又长又丑，但光秃秃的跟我在一起。进一步需要的信息以粗体格式显示—<strong class="jq hj">" from ":{ " id ":12345678</strong></p><p id="65de" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在同一终端窗口中，键入以下内容:</p><pre class="iy iz ja jb fd mp mq mr ms aw mt bi"><span id="eed0" class="lv kl hi mq b fi mu mv l mw mx">export CHAT_ID="12345678"</span><span id="55fd" class="lv kl hi mq b fi my mv l mw mx"># This is just an example, use your own chat ID</span></pre><h2 id="1b2e" class="lv kl hi bd km lw lx ly kq lz ma mb ku jx mc md kw kb me mf ky kf mg mh la mi bi translated">[ 3 ].使用Go发送消息</h2><p id="963a" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">在终端窗口上，运行以下命令:</p><pre class="iy iz ja jb fd mp mq mr ms aw mt bi"><span id="6c16" class="lv kl hi mq b fi mu mv l mw mx">git clone <a class="ae jn" href="https://github.com/marius-lupu/medium.com.git" rel="noopener ugc nofollow" target="_blank">https://github.com/marius-lupu/medium.com.git</a><br/>cd medium.com/Go/send-telegram-message/<br/>go run main.go -message "Hello There"</span></pre><p id="a891" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">输出应该类似于:</p><pre class="iy iz ja jb fd mp mq mr ms aw mt bi"><span id="1713" class="lv kl hi mq b fi mu mv l mw mx">INFO[0000] Message 'Hello There' was sent               <br/>INFO[0000] Response JSON: {"ok":true,"result":{"message_id":8,"from":{"id":1005622813,"is_bot":true,"first_name":"TutorialFromMediumBot","username":"TutorialFromMediumBot"},"chat":{<strong class="mq hj">"id":12345678</strong>,"first_name":"Marius","username":"&lt;USERNAME_REMOVED&gt;","type":"private"},"date":1627155181,<strong class="mq hj">"text":"Hello There"</strong>}}</span></pre><p id="e60f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">现在，您应该会在智能手机或平板电脑上收到一条信息:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mo"><img src="../Images/e8b67e141beaac151c1118e618126853.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-N8CmsnPGNn1wyCsFkJ9Lg.jpeg"/></div></div></figure><p id="6cce" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">就是这样！</p><p id="73bc" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在本文接下来的部分，我将解释一下围棋程序的神奇之处。</p><p id="b1f8" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我不能在这篇文章中粘贴完整的源代码，所以，我会添加一个GitHub的链接，我只粘贴最重要的部分——github.com</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mz"><img src="../Images/eccb04363797e0cbb3888fa608f52b52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U3_bTtmrtAXyI2mZ0f4Kzg.png"/></div></div></figure><ul class=""><li id="6a5b" class="lh li hi jq b jr js ju jv jx mj kb mk kf ml kj lm ln lo lp bi translated">在<em class="mm"> SendMessage </em>函数中，第44行的<em class="mm"> url </em>变量如下所示:<br/><em class="mm">https://api.telegram.org/bot&lt;令牌&gt; /sendMessage </em></li><li id="d04f" class="lh li hi jq b jr lq ju lr jx ls kb lt kf lu kj lm ln lo lp bi translated">从第45–48行开始，我们必须添加将在POST请求中使用的JSON有效负载。在那里，我们必须添加聊天ID和需要发送的文本消息。</li><li id="d28a" class="lh li hi jq b jr lq ju lr jx ls kb lt kf lu kj lm ln lo lp bi translated">从第49–53行，您可以看到发送消息的实际POST请求。</li><li id="cdc8" class="lh li hi jq b jr lq ju lr jx ls kb lt kf lu kj lm ln lo lp bi translated">我们必须关闭第59行的请求，就这样。</li></ul><h1 id="3c8c" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">前进部分</h1><ul class=""><li id="65f3" class="lh li hi jq b jr lc ju ld jx lj kb lk kf ll kj lm ln lo lp bi translated">Telegram WebHooks的文档，当聊天中发送某个消息时，机器人执行某个动作的一种方式—<a class="ae jn" href="https://core.telegram.org/bots/webhooks" rel="noopener ugc nofollow" target="_blank">telegram.org</a></li></ul><h1 id="7e33" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">更多信息</h1><ul class=""><li id="0cbb" class="lh li hi jq b jr lc ju ld jx lj kb lk kf ll kj lm ln lo lp bi translated">一些关于电报机器人的有用信息:<a class="ae jn" href="https://core.telegram.org/bots#" rel="noopener ugc nofollow" target="_blank">core.telegram.org</a></li><li id="54b9" class="lh li hi jq b jr lq ju lr jx ls kb lt kf lu kj lm ln lo lp bi translated">bot API的文档:<a class="ae jn" href="https://core.telegram.org/bots/api" rel="noopener ugc nofollow" target="_blank">core.telegram.org</a></li><li id="9e92" class="lh li hi jq b jr lq ju lr jx ls kb lt kf lu kj lm ln lo lp bi translated">http Go包的文档:<a class="ae jn" href="https://pkg.go.dev/net/http" rel="noopener ugc nofollow" target="_blank"> pkg.go.dev </a></li></ul></div></div>    
</body>
</html>