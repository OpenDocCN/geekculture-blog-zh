<html>
<head>
<title>How to Upgrade Jira on Windows &amp; Linux Server | Part II</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Windows和Linux服务器上升级吉拉|第二部分</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/how-to-upgrade-jira-on-windows-linux-server-part-ii-a3c9e4b73b96?source=collection_archive---------12-----------------------#2022-08-06">https://medium.com/geekculture/how-to-upgrade-jira-on-windows-linux-server-part-ii-a3c9e4b73b96?source=collection_archive---------12-----------------------#2022-08-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="de85" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Atlassian应用程序入门|吉拉| Windows Server</p><p id="3bad" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以在上一篇文章中，我们经历了在Linux服务器上升级吉拉的过程。接下来，我们将探讨如何升级运行在windows服务器上的吉拉实例。</p><h1 id="b757" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">假设和建议</h1><p id="6d4b" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">在大多数组织中，这些工具由IT运营团队维护，无论是基础设施、开发运维还是站点可靠性工程团队。</p><ul class=""><li id="7025" class="kg kh hi ih b ii ij im in iq ki iu kj iy kk jc kl km kn ko bi translated">请务必将吉拉升级至其最新的LTS版本，以获取最新的安全补丁和更新的功能。基于Atlassian的新版本发布频率和适当的生命周期管理，这些Atlassian应用程序。我建议每季度升级一次吉拉，或者一年升级4次</li><li id="31a7" class="kg kh hi ih b ii kp im kq iq kr iu ks iy kt jc kl km kn ko bi translated">出于本文的目的，我假设您熟悉这些应用程序的安装、设置和配置。</li></ul><h1 id="716d" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">Windows Server上的吉拉升级</h1><figure class="kv kw kx ky fd kz er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es ku"><img src="../Images/1445a6a0ca7a314267c8bbf57e38c70e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tQn-rJuT8IyIWc-FmLghDw.png"/></div></div><figcaption class="lg lh et er es li lj bd b be z dx">Image source: Jira</figcaption></figure><h2 id="530f" class="lk je hi bd jf ll lm ln jj lo lp lq jn iq lr ls jr iu lt lu jv iy lv lw jz lx bi translated">准备升级的步骤</h2><ol class=""><li id="9f17" class="kg kh hi ih b ii kb im kc iq ly iu lz iy ma jc mb km kn ko bi translated">在你的吉拉服务器上，下载你要升级到的LTS版Jira软件:<a class="ae mc" href="https://www.atlassian.com/software/jira/download" rel="noopener ugc nofollow" target="_blank">https://www.atlassian.com/software/jira/download</a></li></ol><p id="c9fa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.验证所有插件都是最新的</p><ul class=""><li id="205d" class="kg kh hi ih b ii ij im in iq ki iu kj iy kk jc kl km kn ko bi translated">登录吉拉管理菜单→进入管理应用程序→查看它们是否是需要更新的插件</li></ul><p id="3399" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.Vefiry插件与您正在升级的版本兼容。</p><ul class=""><li id="6190" class="kg kh hi ih b ii ij im in iq ki iu kj iy kk jc kl km kn ko bi translated">管理应用程序→插件列表下→转到吉拉更新检查</li><li id="b5ed" class="kg kh hi ih b ii kp im kq iq kr iu ks iy kt jc kl km kn ko bi translated">按照Atlassian的建议运行“规划您的升级”,以验证我们当前使用的吉拉版本不会出现任何错误。</li></ul><p id="bc9c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">4.完成运行状况检查，以确保当前许可证或数据库没有问题。</p><ul class=""><li id="7043" class="kg kh hi ih b ii ij im in iq ki iu kj iy kk jc kl km kn ko bi translated">管理菜单→系统→故障排除和支持工具</li></ul><p id="f7f9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">更多关于这次准备的信息可以在这里找到:<a class="ae mc" href="https://confluence.atlassian.com/adminjiraserver/preparing-for-the-upgrade-966063325.html#:~:text=Go%20to%20Administration%20(%20)%20%3E%20Manage,upgrade%20to%2C%20and%20click%20Check" rel="noopener ugc nofollow" target="_blank">准备升级</a>。一旦你完成了所有这些，你的应用程序就可以升级了。</p><h2 id="5c3a" class="lk je hi bd jf ll lm ln jj lo lp lq jn iq lr ls jr iu lt lu jv iy lv lw jz lx bi translated">升级实施步骤</h2><ol class=""><li id="28ab" class="kg kh hi ih b ii kb im kc iq ly iu lz iy ma jc mb km kn ko bi translated">拍摄Linux虚拟机服务器的快照。</li><li id="9dff" class="kg kh hi ih b ii kp im kq iq kr iu ks iy kt jc mb km kn ko bi translated">对吉拉数据库做个完整备份。</li><li id="2e72" class="kg kh hi ih b ii kp im kq iq kr iu ks iy kt jc mb km kn ko bi translated">进入插件管理并更新所有需要更新的插件→大多数情况下，更新插件需要重新索引，根据需要执行重新索引</li></ol><ul class=""><li id="66e1" class="kg kh hi ih b ii ij im in iq ki iu kj iy kk jc kl km kn ko bi translated">根据您在准备阶段所做的更新检查建议，更新可以更新的插件，并禁用其他插件。</li><li id="ebe1" class="kg kh hi ih b ii kp im kq iq kr iu ks iy kt jc kl km kn ko bi translated">吉拉管理菜单→系统→索引→并执行完全重新索引</li></ul><blockquote class="md me mf"><p id="f82d" class="if ig mg ih b ii ij ik il im in io ip mh ir is it mi iv iw ix mj iz ja jb jc hb bi translated"><strong class="ih hj">以上步骤非常重要，如果你需要恢复东西，应该正确执行。</strong></p><p id="f713" class="if ig mg ih b ii ij ik il im in io ip mh ir is it mi iv iw ix mj iz ja jb jc hb bi translated"><strong class="ih hj">注意:吉拉主目录和吉拉安装目录是两个不同的文件夹。确保您已经查看了这两个文件夹的内容</strong></p></blockquote><p id="e2f0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">4.查看您的JVM配置和设置并拍摄截图:</p><pre class="kv kw kx ky fd mk ml mm mn aw mo bi"><span id="f6ab" class="lk je hi ml b fi mp mq l mr ms"># Go to your Jira installation directory. In my case, <br/># Jira is running on my D dire -- D:\Program Files\JIRA             # Open cmd, go to the bin folfer and run the following command:</span><span id="fce9" class="lk je hi ml b fi mt mq l mr ms">Cd D:\Program Files\JIRA\bin<br/>tomcat8w //ES//JIRA_service_name</span></pre><figure class="kv kw kx ky fd kz er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es mu"><img src="../Images/a38c6839f08bf8271c24d7185d0e0a3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*5vBGGbIHWY3ZiNwHUJfddw.gif"/></div></div><figcaption class="lg lh et er es li lj bd b be z dx">Review JVM configs</figcaption></figure><p id="aaa4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">5.停止JIRA的服务</p><p id="9300" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">6.从安装目录中复制以下文件:</p><pre class="kv kw kx ky fd mk ml mm mn aw mo bi"><span id="722f" class="lk je hi ml b fi mp mq l mr ms"># this is for your application settings and configs</span><span id="1bea" class="lk je hi ml b fi mt mq l mr ms">server.xml → located here: D:\Program Files\JIRA\conf       <br/>cacerts → located here: D:\Program Files\JIRA\jre\lib\security         <br/>web.xml → located here: D:\Program Files\JIRA\atlassian-jia\WEB-INF</span></pre><ul class=""><li id="82fb" class="kg kh hi ih b ii ij im in iq ki iu kj iy kk jc kl km kn ko bi translated">通常，在安装过程中，只会修改吉拉安装目录的内容，而不会修改吉拉主目录的内容。但是安全总比后悔好，所以也只需要复制这两个文件:</li></ul><pre class="kv kw kx ky fd mk ml mm mn aw mo bi"><span id="a929" class="lk je hi ml b fi mp mq l mr ms"># this is for your application DB and SSL configs, for me both those<br/># files and located in my Jira Home directory <br/># -- D:\Program Files\Application Data</span><span id="2f90" class="lk je hi ml b fi mt mq l mr ms">dbconfig.xml → located here: D:\Program Files\Application Data<br/>JIRASSL.keystore → located here: D:\Program Files\Application Data</span></pre><p id="e050" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">7.以管理员身份运行新的安装程序，并按照提示进行操作。</p><ul class=""><li id="ac5c" class="kg kh hi ih b ii ij im in iq ki iu kj iy kk jc kl km kn ko bi translated"><strong class="ih hj"> <em class="mg">安装成功后，暂时不要启动吉拉</em> </strong></li></ul><p id="dd5c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">8.查看步骤4中的配置JVM内存设置</p><p id="642c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">9.在吉拉配置工具上查看您的Web服务器设置</p><ul class=""><li id="4184" class="kg kh hi ih b ii ij im in iq ki iu kj iy kk jc kl km kn ko bi translated">转到D:\程序文件\ JIRA \斌和运行配置.蝙蝠打开和审查吉拉配置工具。看起来像这样:</li></ul><figure class="kv kw kx ky fd kz er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es mv"><img src="../Images/5fd2a02c7908661bbaba616f386b97ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H7X-be_g94iSnWE0_DxBqA.png"/></div></div></figure><p id="dc63" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">10.比较并验证。您在步骤6中备份的XML文件(<strong class="ih hj"> <em class="mg"> server.xml特指</em> </strong>)没有改变，或者只是用以下文件替换它们:</p><ul class=""><li id="effc" class="kg kh hi ih b ii ij im in iq ki iu kj iy kk jc kl km kn ko bi translated">server . XML-web . XML-cacerts</li></ul><p id="0dc2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">然后启动吉拉，等待仪表盘可用</strong></p><h1 id="6f90" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">解决纷争</h1><p id="6e9b" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">如果遇到一些错误，请在退出前尝试排除故障。要在遇到任何问题时检查日志，请以管理员身份打开<strong class="ih hj"><em class="mg">PowerShell ISE</em></strong>:</p><ul class=""><li id="a9bc" class="kg kh hi ih b ii ij im in iq ki iu kj iy kk jc kl km kn ko bi translated">转到您的吉拉主目录并检查日志</li><li id="30f5" class="kg kh hi ih b ii kp im kq iq kr iu ks iy kt jc kl km kn ko bi translated">在我的情况下→ cd。\程序文件\应用程序数据\日志'</li><li id="b158" class="kg kh hi ih b ii kp im kq iq kr iu ks iy kt jc kl km kn ko bi translated">运行:<strong class="ih hj"> <em class="mg">获取-内容。\ atlassian-jira . log-Wait-Tail 30</em>T17】</strong></li></ul><p id="923c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">升级后，验证项目是否出现问题:</p><ul class=""><li id="3097" class="kg kh hi ih b ii ij im in iq ki iu kj iy kk jc kl km kn ko bi translated">如果您确实运行了新的重新索引→验证项目有活动的问题，并且项目板正在显示</li><li id="0ecb" class="kg kh hi ih b ii kp im kq iq kr iu ks iy kt jc kl km kn ko bi translated">返回“管理应用”—验证没有其他插件需要更新。</li></ul><h1 id="0f1e" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">清除插件缓存</h1><p id="4206" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">请执行以下操作:</p><ul class=""><li id="138c" class="kg kh hi ih b ii ij im in iq ki iu kj iy kk jc kl km kn ko bi translated">关闭JIRA</li><li id="c9f5" class="kg kh hi ih b ii kp im kq iq kr iu ks iy kt jc kl km kn ko bi translated">删除以下隐藏的插件缓存目录:</li></ul><pre class="kv kw kx ky fd mk ml mm mn aw mo bi"><span id="0053" class="lk je hi ml b fi mp mq l mr ms">* Stop Jira<br/>* Delete the following hidden plugin cache directories:<br/>  - JIRA_HOME/plugins/.bundled-plugins <br/>  - JIRA_HOME/plugins/.osgi-plugins<br/>* Start Jira<br/>(These directories will be recreated on JIRA reboot with a new plugin cache)</span></pre><h1 id="d7b5" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">退出升级</h1><p id="a3ee" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">如果吉拉升级失败，所有故障排除工作都将失败，并且您无法让新版本正常运行:</p><ul class=""><li id="d4c3" class="kg kh hi ih b ii ij im in iq ki iu kj iy kk jc kl km kn ko bi translated">只需从您在步骤1中拍摄的快照，将Windows server虚拟机从升级前的状态恢复即可</li><li id="cdd9" class="kg kh hi ih b ii kp im kq iq kr iu ks iy kt jc kl km kn ko bi translated">回顾事情，当你准备好再试一次的时候再试一次。</li></ul><p id="90a9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果一切顺利，您将得到如下所示的页面:</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es mw"><img src="../Images/8bf53604d652fe2d259dd4ba5e958b4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VoAYg8y8bDPRsh9B8jE2dw.png"/></div></div></figure><blockquote class="md me mf"><p id="68e3" class="if ig mg ih b ii ij ik il im in io ip mh ir is it mi iv iw ix mj iz ja jb jc hb bi translated">如果你在Linux服务器上运行你的吉拉实例，看看第一部分<a class="ae mc" rel="noopener" href="/geekculture/how-to-upgrade-jira-on-windows-linux-server-2ab10fbb3196"> <strong class="ih hj">如何在Windows服务器上升级吉拉</strong> </a>。</p></blockquote><blockquote class="mx"><p id="d113" class="my mz hi bd na nb nc nd ne nf ng jc dx translated">干杯！！</p></blockquote></div></div>    
</body>
</html>