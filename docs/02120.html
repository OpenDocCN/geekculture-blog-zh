<html>
<head>
<title>Integrate IBM WebSphere Service Registry and Repository with IBM Process Server</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将IBM WebSphere服务注册和存储库与IBM Process Server集成</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/integrate-ibm-websphere-service-registry-and-repository-with-ibm-process-server-f97eeb0e2ea?source=collection_archive---------20-----------------------#2021-05-04">https://medium.com/geekculture/integrate-ibm-websphere-service-registry-and-repository-with-ibm-process-server-f97eeb0e2ea?source=collection_archive---------20-----------------------#2021-05-04</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><h2 id="e2c4" class="hg hh hi bd b fp hj hk hl hm hn ho dx hp translated" aria-label="kicker paragraph">将IBM WebSphere服务注册和存储库(<strong class="ak"> WSRR </strong>)与IBM Process Server连接起来</h2><div class=""/><div class=""><h2 id="7e49" class="pw-subtitle-paragraph io hr hi bd b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf dx translated">面向服务的架构— SOA</h2></div><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es jg"><img src="../Images/e09e865f9e2c0f811e7b57b24623f970.png" data-original-src="https://miro.medium.com/v2/resize:fit:1350/format:webp/1*pXg23FlWfpyuG0yvvbqIrA.png"/></div><figcaption class="jo jp et er es jq jr bd b be z dx">IBM WSRR and IBM Process server</figcaption></figure><h2 id="34e8" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ho bi translated">读者注意</h2><p id="2df5" class="pw-post-body-paragraph kp kq hi kr b ks kt is ku kv kw iv kx kd ky kz la kh lb lc ld kl le lf lg lh hb bi translated">本文最初发表于2013年6月<strong class="kr hs"><em class="li"/></strong>的<strong class="kr hs"><em class="li">IBM developer works</em></strong>出版物中，如下所示。由于这篇文章的链接已经被移走，我想在MEDIUM中重新发布它，以帮助可能对这个主题感兴趣的初学者和中级读者。</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="er es lj"><img src="../Images/3db4c6b6dc393efafc2689909a048c44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qVIEzmf-UpzLyXZ_iN4ryg.png"/></div></div><figcaption class="jo jp et er es jq jr bd b be z dx">Article initially published in IBM developerWorks</figcaption></figure></div><div class="ab cl lo lp gp lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="hb hc hd he hf"><h1 id="0b6a" class="lv jt hi bd ju lw lx ly jy lz ma mb kc ix mc iy kg ja md jb kk jd me je ko mf bi translated">介绍</h1><p id="b9b2" class="pw-post-body-paragraph kp kq hi kr b ks kt is ku kv kw iv kx kd ky kz la kh lb lc ld kl le lf lg lh hb bi translated">本文展示了如何将IBM WebSphere Service Registry and Repository(WSRR)与Process Server集成。它解释了如何配置SSL、WSRR定义和执行动态端点查找。这种方法的优点是，当web服务URL发生变化时，可以直接在WSRR进行更新，不需要修改或重新部署中介模块。</p><h1 id="6c4d" class="lv jt hi bd ju lw mg ly jy lz mh mb kc ix mi iy kg ja mj jb kk jd mk je ko mf bi translated">先决条件</h1><p id="6f48" class="pw-post-body-paragraph kp kq hi kr b ks kt is ku kv kw iv kx kd ky kz la kh lb lc ld kl le lf lg lh hb bi translated">a.IBM集成设计器<br/>b . WebSphere Service Registry and Repository<br/>c . IBM Process Server</p><h1 id="3b25" class="lv jt hi bd ju lw mg ly jy lz mh mb kc ix mi iy kg ja mj jb kk jd mk je ko mf bi translated">关于Process Server的更多信息</h1><p id="e2d3" class="pw-post-body-paragraph kp kq hi kr b ks kt is ku kv kw iv kx kd ky kz la kh lb lc ld kl le lf lg lh hb bi translated">2011年4月，IBM发布了IBM Business Process Manager，这是一个单一的统一BPM平台，支持整个业务流程改进项目。IBM Business Process Manager合并了WebSphere Process Server、WebSphere Lombardi Edition和其他IBM产品的功能，并取代了它们。IBM Business Process Manager向后兼容WebSphere Process Server V6和V7。在本文中，流程服务器指的是IBM Business Process Manager Advanced V8的流程服务器组件。</p><h1 id="f836" class="lv jt hi bd ju lw mg ly jy lz mh mb kc ix mi iy kg ja mj jb kk jd mk je ko mf bi translated">WSRR</h1><p id="0226" class="pw-post-body-paragraph kp kq hi kr b ks kt is ku kv kw iv kx kd ky kz la kh lb lc ld kl le lf lg lh hb bi translated">WSRR提供了一个存储、访问和管理信息(通常称为服务元数据)的系统，这些信息用于SOA中服务的选择、调用、管理、治理和重用。换句话说，它是您存储关于您的系统或其他组织的系统中使用的服务的信息的地方，您已经使用、计划使用或希望将来了解这些信息。例如，应用程序可以在调用服务之前检查WSRR，以找到最能满足其功能和性能需求的服务实例。WSRR使您能够发布web服务构件，包括XML模式定义(XSD)、Web服务描述语言(WSDL)和服务组件架构(SCA)模块。WSRR可以更好地管理和治理您的服务。通过其注册中心和存储库功能以及与IBM SOA Foundation的集成，WSRR是SOA实现的重要基础组件。WSRR使您能够在SOA中存储、访问和管理关于服务和服务交互端点描述(服务元数据)的信息。您可以使用这些信息来选择、调用、治理和重用SOA中的服务。这些服务信息可以包括使用SOAP/HTTP绑定实现WSDL接口的传统web服务，以及可以使用WSDL、XSD和策略声明来描述的各种SOA服务，但是这些服务可能会使用各种协议，并根据各种编程模型来实现。</p><h1 id="8000" class="lv jt hi bd ju lw mg ly jy lz mh mb kc ix mi iy kg ja mj jb kk jd mk je ko mf bi translated">WebSphere ESB</h1><p id="567e" class="pw-post-body-paragraph kp kq hi kr b ks kt is ku kv kw iv kx kd ky kz la kh lb lc ld kl le lf lg lh hb bi translated">WebSphere ESB将服务提供者从服务消费者中分离出来，因此它们都连接到WebSphere ESB，而不是直接的点对点连接。它负责路由请求、丰富消息、映射服务提供者和服务消费者之间的接口，并将它们转换为服务消费者的接口格式。<br/> WebSphere ESB可以使用端点查找原语执行动态端点查找，以在WSRR查找已发布的服务URL，然后动态应用目标地址以调用服务实现。WebSphere ESB管理服务提供者和服务消费者之间的消息流。WebSphere ESB中的中介模块处理服务提供者和服务消费者之间的不匹配，包括协议、交互风格接口和服务质量(QoS)的不匹配。<br/>在SCA解决方案中，中介模块是一种执行特殊角色的SCA模块，具有与其他业务级别组件不同的特征。<br/>中介组件对服务端点之间交换的消息进行操作。与常规的业务应用程序组件相比，它们关心的是通过基础设施的消息流，而不仅仅是消息的业务内容。它们不是执行业务功能，而是对消息执行路由、转换和日志记录操作。</p><h1 id="ea5d" class="lv jt hi bd ju lw mg ly jy lz mh mb kc ix mi iy kg ja mj jb kk jd mk je ko mf bi translated">传票送达员</h1><p id="0897" class="pw-post-body-paragraph kp kq hi kr b ks kt is ku kv kw iv kx kd ky kz la kh lb lc ld kl le lf lg lh hb bi translated">Process Server是许多业务流程管理解决方案的核心。它确保您在IBM Integration Designer中设计的流程得到一致、可靠、安全的执行，并且具有事务完整性。它建立在开放标准的基础上，在您的SOA或非SOA基础设施中部署和执行编排服务(人员、信息、系统和贸易伙伴)的流程。<br/> Process Server构建于其上，并包含ESB功能。Process Server使用WebSphere Application Server的强大功能，提供了一个基于标准的业务流程引擎。它还包括与WebSphere ESB相同的技术，提供相同的ESB功能。<br/> Process Server是一个高性能的业务引擎，通过为业务流程应用程序提供一个托管的运行时环境，使流程能够满足业务目标。它使您能够在SOA中部署基于标准的业务集成应用程序，SOA将日常业务应用程序分解为单独的业务功能和流程，并将其作为服务呈现。<br/> Process Server支持跨人员、系统、应用程序、任务、规则以及它们之间的交互的流程部署。它支持长期运行和短期运行的业务流程，为松散耦合的业务流程提供类似事务回滚的功能。</p><h1 id="5abb" class="lv jt hi bd ju lw mg ly jy lz mh mb kc ix mi iy kg ja mj jb kk jd mk je ko mf bi translated">商业价值</h1><p id="3a0b" class="pw-post-body-paragraph kp kq hi kr b ks kt is ku kv kw iv kx kd ky kz la kh lb lc ld kl le lf lg lh hb bi translated">本文中描述的方法提供了在WSRR中更改web服务URL的灵活性，而无需修改或重新部署中介模块。成功实现SOA需要支持SOA原则的应用程序和基础设施。可以通过创建到由应用托管的新的或现有功能的服务接口来启用应用。应该使用能够将服务请求路由和传输到正确的服务提供者的基础设施来访问服务接口。<br/>随着组织将更多的功能作为服务公开，他们必须确保该基础设施支持SOA的企业级管理。<br/> ESB是一个中间件基础设施组件，它通过以下方式支持SOA实现:<br/>将消费者对服务的看法与服务的实际实现分离<br/>将服务交互的技术方面分离<br/>在企业中集成和管理服务<br/>ESB不仅仅是一个传输层。它必须提供中介支持来促进服务交互(例如，查找提供消费者所要求的功能的服务，或者处理消费者和提供者之间在功能方面兼容的接口不匹配)。<br/>它必须支持各种进出ESB的方式，比如对现有应用程序或业务连接的适配器支持，使外部合作伙伴能够进行B2B交互。为了支持这些不同的进出ESB的方式，它必须支持与各种服务端点的服务交互。<br/>每个端点可能有自己的集成技术、协议、安全模型等等。这种复杂程度应该对服务消费者隐藏，以便向他们提供一个更简单的模型。为了对消费者隐藏复杂性，ESB必须在服务提供者理解的多种交互模型和提供给消费者的简化视图之间进行协调。<br/>在运行时，可以动态访问WSRR来选择服务提供商，或者动态执行调用策略。它管理支持将服务消费者动态绑定到服务提供者的信息，并支持基础设施实施注册的策略。</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="er es ml"><img src="../Images/356ffce35fe28a0d9b619afc3984a8a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qOJsrWo_eG4UCyfpeUay4Q.png"/></div></div><figcaption class="jo jp et er es jq jr bd b be z dx">Dynamic endpoint lookup in WSRR</figcaption></figure><h1 id="7418" class="lv jt hi bd ju lw mg ly jy lz mh mb kc ix mi iy kg ja mj jb kk jd mk je ko mf bi translated">关键集成特性</h1><p id="44bc" class="pw-post-body-paragraph kp kq hi kr b ks kt is ku kv kw iv kx kd ky kz la kh lb lc ld kl le lf lg lh hb bi translated">部署到Process Server的中介模块可以通过动态查找机制与WSRR进行通信，以提供有关服务端点和中介策略的信息。</p><h1 id="1a67" class="lv jt hi bd ju lw mg ly jy lz mh mb kc ix mi iy kg ja mj jb kk jd mk je ko mf bi translated">服务端点</h1><p id="94b8" class="pw-post-body-paragraph kp kq hi kr b ks kt is ku kv kw iv kx kd ky kz la kh lb lc ld kl le lf lg lh hb bi translated">当您开发需要从WSRR访问服务端点的SCA模块时，中介流可以包括端点查找中介原语，以便在运行时，它可以从WSRR获得服务端点。</p><h1 id="fdab" class="lv jt hi bd ju lw mg ly jy lz mh mb kc ix mi iy kg ja mj jb kk jd mk je ko mf bi translated">调解政策</h1><p id="43b7" class="pw-post-body-paragraph kp kq hi kr b ks kt is ku kv kw iv kx kd ky kz la kh lb lc ld kl le lf lg lh hb bi translated">您还可以使用WSRR来存储中介策略信息，这有助于您通过动态覆盖模块属性来控制服务请求。如果WSRR包含SCA模块和附加的中介策略，那么中介策略可以覆盖模块属性。<br/>如果您希望在不同的上下文中应用不同的中介策略，您可以创建中介策略条件。当您开发需要使用中介策略的SCA模块时，您可以在中介流中包含一个策略解析中介原语。在运行时，它可以从WSRR获得中介策略信息。</p><h1 id="aafe" class="lv jt hi bd ju lw mg ly jy lz mh mb kc ix mi iy kg ja mj jb kk jd mk je ko mf bi translated">WSRR如何加强WebSphere ESB对服务和接口的控制</h1><p id="c141" class="pw-post-body-paragraph kp kq hi kr b ks kt is ku kv kw iv kx kd ky kz la kh lb lc ld kl le lf lg lh hb bi translated">许多SOA缺乏监管。企业不知道网络中实际运行的是什么样的服务，不管是批准的还是其他的。没有一种机制来规范服务提供者和消费应用程序之间的合同(如服务级别协议)，也不可能跟踪谁在访问服务和业务信息。<br/>企业希望实时了解服务性能和可用性，并希望通过跟踪服务使用情况来衡量和展示投资回报。他们希望建立一个现有服务的目录，提供对功能的可见性，并帮助减少冗余。该目录可以帮助企业了解现有服务变更的影响，并使他们能够通过策略控制服务消费者和提供者。WSRR提供了服务发现特性，以帮助清点运行时环境中部署的服务。<br/>在预定的基础上，WSRR还可以被配置为发现运行时环境中的服务，以检查流氓服务。WSRR的GEP(Governance Enablement Profile)给出了服务消费者和服务提供者治理的规范方法。它管理用户和提供商之间的订阅、谅解文档和服务级别协议，从而能够跟踪谁在使用给定的服务。</p><h1 id="172c" class="lv jt hi bd ju lw mg ly jy lz mh mb kc ix mi iy kg ja mj jb kk jd mk je ko mf bi translated">更大的ESB灵活性</h1><p id="fa91" class="pw-post-body-paragraph kp kq hi kr b ks kt is ku kv kw iv kx kd ky kz la kh lb lc ld kl le lf lg lh hb bi translated">ESB提供了一个连接层，支持灵活简单的服务集成，将集成逻辑从应用程序中分离出来。然而，由于需要额外的开发和测试，很难快速更改中介代码来响应不断变化的业务需求。将中介与它们调用的服务的运行时状态同步也很复杂。ESB开发本质上涉及调用许多端点，当端点没有从中介代码中分离出来时，升级到其他开发环境需要对ESB配置进行重大更改。支持对服务、策略和元数据的动态和高效访问，使中介能够动态选择服务提供者和端点，并快速适应关键服务的状态，从而大大提高ESB的灵活性。<br/>在ESB外部存储和定义一些应用程序和翻译逻辑意味着您可以更新逻辑，而不需要更改和重新部署中介。类似地，在ESB之外存储和管理策略意味着您可以独立于中介来定义和管理策略。然后，ESB可以在运行时查询WSRR，以确定服务所需的策略，然后实施这些策略。<br/> WSRR通过端点查找、SLA检查和策略解析中介原语增加了WebSphere ESB的敏捷性，这些原语是加速健壮和灵活的中介的关键，您可以快速更改这些中介，而无需重新部署中介。</p><h1 id="4e0a" class="lv jt hi bd ju lw mg ly jy lz mh mb kc ix mi iy kg ja mj jb kk jd mk je ko mf bi translated">提供业务所需的服务</h1><p id="795b" class="pw-post-body-paragraph kp kq hi kr b ks kt is ku kv kw iv kx kd ky kz la kh lb lc ld kl le lf lg lh hb bi translated">许多企业发现，尽管采用了SOA原则，但他们无法快速响应新的业务请求，快速交付新的和更新的服务，或者处理新的业务机会。服务开发周期过长，没有标准化，缺乏服务信息和现有能力的动态发现。<br/>这些问题通常会导致服务重复以及业务分析师和IT之间的脱节。对于一个成功的SOA，您需要创建开放的标准化服务和可重用资产，它们可以被多个业务线使用，并且您需要通过多个服务实现重用服务资产来提高生产率。<br/>为了实现这种标准化和重用，您需要存储、编目和灵活地组织资产和服务，然后实施指导方针以防止不协调或未经批准的变更。WSRR为服务生命周期提供了一种规范的方法，支持自顶向下的开发，为业务用户提供建议和批准服务的视角。<br/>该解决方案附带了实施标准化服务和可重用资产的示例生命周期和治理策略，以及帮助完善治理流程和优化服务开发生命周期的策略分析。</p><h1 id="dcad" class="lv jt hi bd ju lw mg ly jy lz mh mb kc ix mi iy kg ja mj jb kk jd mk je ko mf bi translated">将流程服务器与WSRR集成</h1><h2 id="eaf1" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ho bi translated">管理控制台和SSL配置</h2><p id="864f" class="pw-post-body-paragraph kp kq hi kr b ks kt is ku kv kw iv kx kd ky kz la kh lb lc ld kl le lf lg lh hb bi translated">本节说明如何在两台服务器上都启用了安全性的情况下执行集成，以及如何将WSRR签名者证书导入到Process Server信任存储中。<br/> 1。在流程服务器管理控制台中，选择服务集成= &gt; WSRR定义:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="er es mm"><img src="../Images/43a0ff32963a60984a060d2fa40c33db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZftgkSVYGb6_drpuy_RSCg.png"/></div></div><figcaption class="jo jp et er es jq jr bd b be z dx">WSRR definition</figcaption></figure><p id="00a2" class="pw-post-body-paragraph kp kq hi kr b ks mn is ku kv mo iv kx kd mp kz la kh mq lc ld kl mr lf lg lh hb bi translated">2.单击连接属性。<br/> 3。为WSRR定义指定以下属性，如图3所示:<br/>·WSRR服务器的注册URL，包括用于安全连接的https://和正确的TCP/IP端口。<br/>用于向WSRR认证的认证别名。这个例子使用了wsrr80-auth。<br/>包含签名者证书的SSL配置。此示例将配置设置为NodeDefaultSSLSettings。</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="er es ms"><img src="../Images/43ba6c511d3362c4ebb41701a60abebc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oSi8Oy_o68GkLtjDoQ4lIQ.png"/></div></div><figcaption class="jo jp et er es jq jr bd b be z dx">Connection properties</figcaption></figure><p id="67ae" class="pw-post-body-paragraph kp kq hi kr b ks mn is ku kv mo iv kx kd mp kz la kh mq lc ld kl mr lf lg lh hb bi translated">4.单击签名者证书和从端口检索，然后输入WSSR的主机名和HTTP端口号:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="er es mt"><img src="../Images/f75ef39ded07fd46775ab921cb303ca8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*spmimNmMxSdochXqKZRIFA.png"/></div></div><figcaption class="jo jp et er es jq jr bd b be z dx">Signer certificates</figcaption></figure><p id="2691" class="pw-post-body-paragraph kp kq hi kr b ks mn is ku kv mo iv kx kd mp kz la kh mq lc ld kl mr lf lg lh hb bi translated">5.单击“测试连接”以确认Process Server与WSRR成功集成。<br/> 6。在WSRR管理控制台中，单击Signer certificates和Retrieve from port，然后输入Process Server的主机名和HTTP端口号。</p><h1 id="6031" class="lv jt hi bd ju lw mg ly jy lz mh mb kc ix mi iy kg ja mj jb kk jd mk je ko mf bi translated">动态端点选择的优势</h1><p id="bad2" class="pw-post-body-paragraph kp kq hi kr b ks kt is ku kv kw iv kx kd ky kz la kh lb lc ld kl le lf lg lh hb bi translated">WebSphere ESB中的SCA导入组件包含指向服务提供者的硬编码端点URL，这当然有缺点。如果服务提供者的端点URL发生变化，您必须用新的URL更新SCA导入。<br/>使用WSRR和端点查找中介原语支持动态端点选择，通过查询WSRR在运行时检索服务提供者的端点URL，您可以在WSRR对端点URL进行任何更改。<br/>每个服务提供商的WSDL文件被加载到WSRR，您可以向这些WSDL文件添加自定义属性或分类。WebSphere ESB中的端点查找中介原语查询WSRR，指定要检索的服务端口类型，WSRR返回在其注册表中找到的匹配服务的端点URL。端点查找中介原语可以检索与各种协议绑定相关的端点信息，包括SOAP/HTTP。<br/>端点查找原语查询不仅可以查找特定的端口类型，因为它支持其他属性，如名称空间和版本，以及自定义属性和分类。<br/>端点查找原语还指定了一个匹配策略，它告诉WSRR返回多少匹配的端点URL，并告诉WebSphere ESB这些端点URL应该存储在SMO消息中的什么位置。</p><p id="4f2b" class="pw-post-body-paragraph kp kq hi kr b ks mn is ku kv mo iv kx kd mp kz la kh mq lc ld kl mr lf lg lh hb bi translated">端点查找原语支持以下匹配策略:<br/>返回第一个匹配的端点并设置路由目标<br/>返回所有匹配的端点<br/>返回所有匹配的端点并设置备用路由目标<br/>返回匹配最新兼容服务版本的端点以下是动态端点选择具有优势的示例:<br/>如果端点不是在中介中硬编码的，则在环境之间移动代码会更容易，例如在开发、测试和生产端点之间移动时。如果端点被移到中介代码之外，您不需要更改中介来将其提升到不同的环境。<br/>如果被调用的服务的端点发生变化，例如，它被移动到不同的服务器，那么您可以更新WSRR，而不需要更新中介代码。</p><p id="52fc" class="pw-post-body-paragraph kp kq hi kr b ks mn is ku kv mo iv kx kd mp kz la kh mq lc ld kl mr lf lg lh hb bi translated">可以根据服务可用性在WSRR更新端点。例如，如果一个端点不可用，那么WSRR可以改为指向一个可用的端点。您可以根据输入数据选择适当的服务。</p><h1 id="b8a4" class="lv jt hi bd ju lw mg ly jy lz mh mb kc ix mi iy kg ja mj jb kk jd mk je ko mf bi translated">构建中介流:</h1><h2 id="9013" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ho bi translated">返回所有匹配的端点</h2><p id="d01a" class="pw-post-body-paragraph kp kq hi kr b ks kt is ku kv kw iv kx kd ky kz la kh lb lc ld kl le lf lg lh hb bi translated">中介模块包含指向服务提供者的端点URL的SCA导入。这个端点URL被硬编码到SCA导入组件中。服务提供者偶尔会更改其位置，目前，必须手动修改中介模块以反映这个新的URL，并且必须重新部署中介模块。<br/>使用动态端点查找，在运行时从WSRR检索端点URL。对端点URL的任何更改只需要更改WSRR中的服务定义，不需要修改或重新部署中介模块。</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="er es mu"><img src="../Images/08def0aae2742ac2d63c4be63e12cffa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1cPm3x1Y7a0hn0H5fz8QVQ.png"/></div></div><figcaption class="jo jp et er es jq jr bd b be z dx">Mediation architecture</figcaption></figure><p id="54a0" class="pw-post-body-paragraph kp kq hi kr b ks mn is ku kv mo iv kx kd mp kz la kh mq lc ld kl mr lf lg lh hb bi translated"><strong class="kr hs">本解决方案中使用了以下中介原语:</strong> <br/> 1。端点查找中介原语向WSRR查询服务端口类型的端点URL。端点查找匹配策略设置为返回与服务端口类型匹配的所有匹配端点URL。<br/> 2。自定义中介原语检查WSRR返回的所有端点URL，并基于WSRR的自定义属性选择服务。<br/> 3。XSLT中介原语用于转换服务接口。<br/> 4。如果服务提供者以错误响应，则使用失败原语。</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="er es mv"><img src="../Images/1392df8396cdc92a548c66c578349be4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3m3DJQoKByWy3TtdWz7J1w.png"/></div></div><figcaption class="jo jp et er es jq jr bd b be z dx">Assembly editor — Mediation sequence</figcaption></figure><p id="5bb1" class="pw-post-body-paragraph kp kq hi kr b ks mn is ku kv mo iv kx kd mp kz la kh mq lc ld kl mr lf lg lh hb bi translated">5.设置匹配策略以返回所有匹配的端点，并设置路由目标。此设置确保WSRR返回匹配此查询的所有端点。<br/>匹配的端点被填充在SMO消息的<strong class="kr hs"> <em class="li">上下文/primitive context/EndpointLookupContext</em></strong>元素中。<br/>下面的清单1显示了定制中介原语逻辑，它执行以下步骤:</p><p id="f8c7" class="pw-post-body-paragraph kp kq hi kr b ks mn is ku kv mo iv kx kd mp kz la kh mq lc ld kl mr lf lg lh hb bi translated">1.将从WSRR返回的所有服务的<strong class="kr hs"> <em class="li"> CustomerSubType </em> </strong>自定义属性与SMO消息正文中指定的名字进行比较。<br/> 2。如果<strong class="kr hs"> <em class="li"> CustomerSubType </em> </strong>和first name匹配，则SMO消息的<strong class="kr hs"><em class="li">headers/smo header/Target</em></strong>元素将使用匹配的服务端点URL进行更新。此端点URL用于动态端点查找。自定义原语的常规输出终端被触发。3.如果没有名字与WSRR的<strong class="kr hs"><em class="li">customer subtype</em></strong>自定义属性相匹配，则写入一条失败消息，并触发自定义原语的第二个输出终端。</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="er es mw"><img src="../Images/8ebc5c3844c16a79afa790fef1a16a78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dR4WY5OksCi-y3x5DjVlPQ.png"/></div></div><figcaption class="jo jp et er es jq jr bd b be z dx">Custom mediation primitive</figcaption></figure><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="er es mx"><img src="../Images/c9a67582812be02ec1e6e02f49047d43.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AblVzZHH8RM8ju7IsCad2A.png"/></div></div><figcaption class="jo jp et er es jq jr bd b be z dx">Custom mediation primitive (cont.)</figcaption></figure><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="er es my"><img src="../Images/4fbbaa6475c238b8192751aa2c80ba31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VS-GIVSDeN_XbyKyjAsRJA.png"/></div></div><figcaption class="jo jp et er es jq jr bd b be z dx">XSLT Transformation map</figcaption></figure><h1 id="1c81" class="lv jt hi bd ju lw mg ly jy lz mh mb kc ix mi iy kg ja mj jb kk jd mk je ko mf bi translated">将元数据填充到WSRR并配置属性</h1><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="er es mz"><img src="../Images/af66defb708c5165779f268b66e97c80.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bqCphAS_h4O_clWvYN8APA.png"/></div></div><figcaption class="jo jp et er es jq jr bd b be z dx">Populate metadata into WSRR</figcaption></figure><ol class=""><li id="5c81" class="na nb hi kr b ks mn kv mo kd nc kh nd kl ne lh nf ng nh ni bi translated">点击浏览导入服务的WSDL和XSD文件<br/><strong class="kr hs"><em class="li">\ EligibilityCIVService \ WEB content \ we b-INF \ wsdl \ eligibilityserviceschema . xsd</em></strong><strong class="kr hs"><em class="li">\ EligibilityCIVService \ WEB content \ we b-INF \ wsdl \ eligibilityservice . wsdl</em></strong><strong class="kr hs"><em class="li">\ EligibilityCIVService \ WEB content \ we b-INF \ wsdl \ EligibilityCIVService</em></strong></li></ol><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es nj"><img src="../Images/42bd85763728e19b36cdd1622cf86f81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/format:webp/1*ZwPhvy4TBUTWni-6zKirHQ.png"/></div><figcaption class="jo jp et er es jq jr bd b be z dx">WSDL documents</figcaption></figure><p id="42af" class="pw-post-body-paragraph kp kq hi kr b ks mn is ku kv mo iv kx kd mp kz la kh mq lc ld kl mr lf lg lh hb bi translated">以<strong class="kr hs"><em class="li">eligibilitydoservice _ EligibilityServiceHttpPort</em></strong>为例，属性名<strong class="kr hs"><em class="li">customer subtype</em></strong>和值<strong class="kr hs"> <em class="li"> Reuters-DoD。</em>T46】</strong></p><p id="0faa" class="pw-post-body-paragraph kp kq hi kr b ks mn is ku kv mo iv kx kd mp kz la kh mq lc ld kl mr lf lg lh hb bi translated"><strong class="kr hs"> <em class="li">图10显示了WSRR的房产配置:</em> </strong></p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="er es nk"><img src="../Images/df20c3f3667ad864c29b8a4e22935f0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oE5CR2NaP5BzItjz5WcKPA.png"/></div></div><figcaption class="jo jp et er es jq jr bd b be z dx">Property configuration</figcaption></figure><h1 id="d53a" class="lv jt hi bd ju lw mg ly jy lz mh mb kc ix mi iy kg ja mj jb kk jd mk je ko mf bi translated">测试中介模块</h1><p id="1263" class="pw-post-body-paragraph kp kq hi kr b ks kt is ku kv kw iv kx kd ky kz la kh lb lc ld kl le lf lg lh hb bi translated">在WSRR完成上述步骤后，您可以通过将<strong class="kr hs"><em class="li"/></strong>作为<strong class="kr hs"> <em class="li"> Reuters-DoD </em> </strong>来动态查找服务，从而测试中介模块执行对WSRR的动态查找。<br/> <strong class="kr hs"> <em class="li">图11下面的</em> </strong>显示了对中介模块的输入。<br/><strong class="kr hs"><em class="li">AccountCreationCustomEndpointLookupMediation</em></strong>中介流正在集成测试客户端中进行测试。以<strong class="kr hs"> <em class="li">开始的<strong class="kr hs"> <em class="li">名字</em> </strong>值导致<strong class="kr hs"> <em class="li">资格DoD </em> </strong>服务返回成功的帐户激活:</em></strong></p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="er es nl"><img src="../Images/2677f7f4e7d4e75dd98a4cc6bad49547.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GMN-JSHCjWftnErHj0jIfg.png"/></div></div><figcaption class="jo jp et er es jq jr bd b be z dx">Integration Test Client</figcaption></figure><p id="b75d" class="pw-post-body-paragraph kp kq hi kr b ks mn is ku kv mo iv kx kd mp kz la kh mq lc ld kl mr lf lg lh hb bi translated">在中介模块中传递了<strong class="kr hs"> <em class="li">名字</em> </strong>作为<strong class="kr hs"> <em class="li"> Reuters-DoD </em> </strong>之后，<br/> <strong class="kr hs"> <em class="li">图12 </em> </strong>显示了服务器日志中的最后五行，显示了来自WSRR的正确服务URL并调用了适当的服务。调用的服务返回值为真，如右上方所示:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="er es nm"><img src="../Images/3af74e5f44b2493bb2d2aef07e623070.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uxqssMFDt3EfSpeMy07akw.png"/></div></div><figcaption class="jo jp et er es jq jr bd b be z dx">Test Output</figcaption></figure><h1 id="e2e9" class="lv jt hi bd ju lw mg ly jy lz mh mb kc ix mi iy kg ja mj jb kk jd mk je ko mf bi translated">另一种方法</h1><p id="9e8f" class="pw-post-body-paragraph kp kq hi kr b ks kt is ku kv kw iv kx kd ky kz la kh lb lc ld kl le lf lg lh hb bi translated">另一种方法是使用ESB网关模式和虚拟服务，通过网关端点查找原语来执行动态查找，如图13所示。本文不讨论这种方法的细节。</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="er es nn"><img src="../Images/2cd8fdc067f64981922e003146b686cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5NVTLaiugm3iVzE9ou6kiw.png"/></div></div><figcaption class="jo jp et er es jq jr bd b be z dx">Another approach</figcaption></figure><h1 id="86e6" class="lv jt hi bd ju lw mg ly jy lz mh mb kc ix mi iy kg ja mj jb kk jd mk je ko mf bi translated">结论</h1><p id="47ac" class="pw-post-body-paragraph kp kq hi kr b ks kt is ku kv kw iv kx kd ky kz la kh lb lc ld kl le lf lg lh hb bi translated">本文展示了如何将Process Server与WSRR集成。它解释了如何构建中介模块来使用端点查找和定制中介原语执行对WSRR的动态查找。</p><h2 id="7d28" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ho bi translated">发布于2021年5月4日</h2></div></div>    
</body>
</html>