<html>
<head>
<title>Hyperledger Caliper Integration In Hyperledger Fabric Blockchain</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Hyperledger Fabric区块链中的Hyperledger卡尺集成</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/caliper-integration-in-hyperledger-fabric-blockchain-5762c1e8b241?source=collection_archive---------0-----------------------#2022-04-08">https://medium.com/geekculture/caliper-integration-in-hyperledger-fabric-blockchain-5762c1e8b241?source=collection_archive---------0-----------------------#2022-04-08</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/></div><div class="ab cl if ig gp ih" role="separator"><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik"/></div><div class="hb hc hd he hf"><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es im"><img src="../Images/2436a5709f3e61e993876fc9e99768b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zSoU2yWFexsMoU_TkxhNzQ.png"/></div></div><figcaption class="iy iz et er es ja jb bd b be z dx">Hyperledger Caliper</figcaption></figure><h1 id="90b1" class="jc jd hi bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated">介绍</h1><p id="9d41" class="pw-post-body-paragraph ka kb hi kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx hb bi translated">在本文中，我们将集成<strong class="kc hj"> Hyperledger Caliper的</strong>最新版本v 0 . 4 . 2 .<strong class="kc hj">T3】Hyperledger Caliper是区块链的基准测试平台。</strong></p><h1 id="91e7" class="jc jd hi bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated">观众</h1><p id="4bbc" class="pw-post-body-paragraph ka kb hi kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx hb bi translated">Hyperledger结构操作员，管理员。这是一篇将<strong class="kc hj">卡尺</strong>集成到HLF网络运行中的实用动手文章。对于初学者，我想建议请通过一些基本概念的超帐织物。</p><blockquote class="ky kz la"><p id="12be" class="ka kb lb kc b kd lc kf kg kh ld kj kk le lf kn ko lg lh kr ks li lj kv kw kx hb bi translated"><em class="hi">注意:本文仅关注卡尺集成，而非完整的基准测试。</em></p></blockquote><h1 id="f33f" class="jc jd hi bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated">先决条件</h1><ol class=""><li id="b82a" class="lk ll hi kc b kd ke kh ki kl lm kp ln kt lo kx lp lq lr ls bi translated">基本了解<strong class="kc hj"> Hyperledger Fabric区块链</strong>。</li><li id="4810" class="lk ll hi kc b kd lt kh lu kl lv kp lw kt lx kx lp lq lr ls bi translated">对链码和调用、查询功能有基本的了解。</li><li id="6295" class="lk ll hi kc b kd lt kh lu kl lv kp lw kt lx kx lp lq lr ls bi translated">基本的外壳命令、外壳脚本等。</li></ol><h1 id="dd5c" class="jc jd hi bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated">系统需求</h1><ol class=""><li id="1d8a" class="lk ll hi kc b kd ke kh ki kl lm kp ln kt lo kx lp lq lr ls bi translated">Docker —版本17.06.2或更高版本</li><li id="81e1" class="lk ll hi kc b kd lt kh lu kl lv kp lw kt lx kx lp lq lr ls bi translated">Docker Compose —版本1.28.5或更高版本</li><li id="c092" class="lk ll hi kc b kd lt kh lu kl lv kp lw kt lx kx lp lq lr ls bi translated">去</li><li id="65ed" class="lk ll hi kc b kd lt kh lu kl lv kp lw kt lx kx lp lq lr ls bi translated">节点版本12.22.10</li><li id="e195" class="lk ll hi kc b kd lt kh lu kl lv kp lw kt lx kx lp lq lr ls bi translated">NPM版本<strong class="kc hj">6 . 14 . 16</strong></li></ol><h1 id="5a35" class="jc jd hi bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated">设置步骤</h1><ul class=""><li id="483f" class="lk ll hi kc b kd ke kh ki kl lm kp ln kt lo kx ly lq lr ls bi translated">结构区块链网络设置(如果您有正在运行的网络，请跳过)</li><li id="8e5a" class="lk ll hi kc b kd lt kh lu kl lv kp lw kt lx kx ly lq lr ls bi translated">链码部署。</li><li id="215e" class="lk ll hi kc b kd lt kh lu kl lv kp lw kt lx kx ly lq lr ls bi translated">卡钳的安装。</li><li id="b7bd" class="lk ll hi kc b kd lt kh lu kl lv kp lw kt lx kx ly lq lr ls bi translated">Caliper与现有区块链网络的集成。</li><li id="afa3" class="lk ll hi kc b kd lt kh lu kl lv kp lw kt lx kx ly lq lr ls bi translated">测试Fabcar APIs。</li><li id="0a31" class="lk ll hi kc b kd lt kh lu kl lv kp lw kt lx kx ly lq lr ls bi translated">总结。</li></ul><h1 id="7418" class="jc jd hi bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated">文件夹结构</h1><ul class=""><li id="6a65" class="lk ll hi kc b kd ke kh ki kl lm kp ln kt lo kx ly lq lr ls bi translated">让我们克隆源代码。</li></ul><pre class="in io ip iq fd lz ma mb mc aw md bi"><span id="9e30" class="me jd hi ma b fi mf mg l mh mi">git clone <a class="ae mj" href="https://github.com/cmjagtap/Hyperledger-Fabric" rel="noopener ugc nofollow" target="_blank">https://github.com/cmjagtap/Hyperledger-Fabric</a></span></pre><h1 id="0aeb" class="jc jd hi bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated">结构区块链设置</h1><p id="2e7c" class="pw-post-body-paragraph ka kb hi kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx hb bi translated">如果您的结构网络已经在运行，那么您可以跳过这一步。</p><p id="55a8" class="pw-post-body-paragraph ka kb hi kc b kd lc kf kg kh ld kj kk kl lf kn ko kp lh kr ks kt lj kv kw kx hb bi translated">让我们创建一个结构网络，并执行以下命令。</p><pre class="in io ip iq fd lz ma mb mc aw md bi"><span id="9578" class="me jd hi ma b fi mf mg l mh mi"><strong class="ma hj">export PATH=${PWD}/bin:$PATH<br/>sudo service docker start<br/> cd org1<br/>./1_enrollOrg1AdminAndUsers.sh<br/>./2_generateMSPOrg1.sh<em class="lb"> <br/> <br/> </em>cd ../org2<br/></strong>./<strong class="ma hj">1_enrollOrg2AdminAndUsers.sh<br/></strong>./<strong class="ma hj">2_generateMSPOrg2.sh <br/> <br/> cd ../orderer<br/></strong>./<strong class="ma hj">1_enrollAdminAndMSP.sh<br/>./2_artifact.sh<br/> <br/> cd ../org1</strong><br/>.<strong class="ma hj">/3_createChannel.sh<br/> <br/> cd ../org2</strong><br/>.<strong class="ma hj">/3_joinChannel.sh</strong></span></pre><p id="1454" class="pw-post-body-paragraph ka kb hi kc b kd lc kf kg kh ld kj kk kl lf kn ko kp lh kr ks kt lj kv kw kx hb bi translated">Hyperledger fabric 2.3区块链已准备就绪，您应该会看到所有处于运行模式的容器，如下所示。</p><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es mk"><img src="../Images/50f21415405c0e6b54c856a344ebcc0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3bs-rk27SfMLn3RB41YDbQ.png"/></div></div><figcaption class="iy iz et er es ja jb bd b be z dx">Docker containers</figcaption></figure><h1 id="f25d" class="jc jd hi bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated">链码部署</h1><p id="63b3" class="pw-post-body-paragraph ka kb hi kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx hb bi translated">在目录结构中，导航到<strong class="kc hj"><em class="lb">deploy chain code</em></strong>目录，执行下面的脚本，它们将部署fabcar chaincode。</p><pre class="in io ip iq fd lz ma mb mc aw md bi"><span id="8fbe" class="me jd hi ma b fi mf mg l mh mi"><strong class="ma hj">./deployOrg1_GO.sh<br/>./deployOrg2_GO.sh</strong></span></pre><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es ml"><img src="../Images/82164131cea9897f43d095247c86e975.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4y7Uqgr01p4m-0A4lPgxaA.png"/></div></div><figcaption class="iy iz et er es ja jb bd b be z dx">Chaincode Deployment</figcaption></figure><ul class=""><li id="563f" class="lk ll hi kc b kd lc kh ld kl mm kp mn kt mo kx ly lq lr ls bi translated">成功部署chaincode后，将会看到与上图相同的输出。</li></ul><h1 id="1ac3" class="jc jd hi bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated">卡钳的安装</h1><p id="6da3" class="pw-post-body-paragraph ka kb hi kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx hb bi translated">在这里，我们正在安装一个本地版本的卡尺使用NPM。</p><p id="76a8" class="pw-post-body-paragraph ka kb hi kc b kd lc kf kg kh ld kj kk kl lf kn ko kp lh kr ks kt lj kv kw kx hb bi translated"><strong class="kc hj">卡钳安装</strong></p><pre class="in io ip iq fd lz ma mb mc aw md bi"><span id="122b" class="me jd hi ma b fi mf mg l mh mi">npm install -g --only=prod @hyperledger/caliper-cli@0.4.2 </span></pre><p id="ce14" class="pw-post-body-paragraph ka kb hi kc b kd lc kf kg kh ld kj kk kl lf kn ko kp lh kr ks kt lj kv kw kx hb bi translated"><strong class="kc hj">卡钳芯。</strong></p><pre class="in io ip iq fd lz ma mb mc aw md bi"><span id="be77" class="me jd hi ma b fi mf mg l mh mi">npm install @hyperledger/caliper-core </span></pre><p id="22c3" class="pw-post-body-paragraph ka kb hi kc b kd lc kf kg kh ld kj kk kl lf kn ko kp lh kr ks kt lj kv kw kx hb bi translated"><strong class="kc hj">卡尺绑定HLF SDK。</strong></p><pre class="in io ip iq fd lz ma mb mc aw md bi"><span id="1388" class="me jd hi ma b fi mf mg l mh mi">caliper bind --caliper-bind-sut fabric:2.2 --caliper-bind-cwd ./ — caliper-bind-args=”-g”</span></pre><blockquote class="ky kz la"><p id="281a" class="ka kb lb kc b kd lc kf kg kh ld kj kk le lf kn ko lg lh kr ks li lj kv kw kx hb bi translated">如果你在安装中面临权限问题，那么添加标志- <strong class="kc hj"> unsafe-perm </strong></p></blockquote><h1 id="1c1d" class="jc jd hi bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated">综合</h1><ul class=""><li id="f899" class="lk ll hi kc b kd ke kh ki kl lm kp ln kt lo kx ly lq lr ls bi translated">在<strong class="kc hj"> <em class="lb"> benchmark </em> </strong>目录中，有一些编写工作负载模块和配置基准测试模块的样例。</li><li id="7756" class="lk ll hi kc b kd lt kh lu kl lv kp lw kt lx kx ly lq lr ls bi translated">在<strong class="kc hj"> <em class="lb">网络目录下</em> </strong>将不得不写一个连接配置文件。这将在区块链和卡尺之间建立一个连接。</li><li id="4969" class="lk ll hi kc b kd lt kh lu kl lv kp lw kt lx kx ly lq lr ls bi translated">使用您的结构网络证书更改此文件中的证书路径。</li><li id="18e3" class="lk ll hi kc b kd lt kh lu kl lv kp lw kt lx kx ly lq lr ls bi translated">连接配置文件与我们编写的集成REST SDK或Explorer相同。</li><li id="3f70" class="lk ll hi kc b kd lt kh lu kl lv kp lw kt lx kx ly lq lr ls bi translated">有两个环境变量用于卡尺。</li><li id="16c3" class="lk ll hi kc b kd lt kh lu kl lv kp lw kt lx kx ly lq lr ls bi translated">1)卡尺基准配置文件。</li><li id="eb52" class="lk ll hi kc b kd lt kh lu kl lv kp lw kt lx kx ly lq lr ls bi translated">2)网络连接配置文件</li><li id="f584" class="lk ll hi kc b kd lt kh lu kl lv kp lw kt lx kx ly lq lr ls bi translated">然后执行<strong class="kc hj"> run.sh </strong>脚本来启动Caliper。</li></ul><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es mp"><img src="../Images/b18ef8f3bc8c49d22664080c4869f97e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m_0v6zci9DVlg44nnXrmlA.png"/></div></div><figcaption class="iy iz et er es ja jb bd b be z dx">Benchmarking init</figcaption></figure><ul class=""><li id="d8c0" class="lk ll hi kc b kd lc kh ld kl mm kp mn kt mo kx ly lq lr ls bi translated">成功进行基准测试后，将在控制台上看到如下详细输出。</li></ul><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es mq"><img src="../Images/5eafded75f56f58c7c15ff4648a737b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q0BMWSOiAvvbr4kK3mQOcw.png"/></div></div><figcaption class="iy iz et er es ja jb bd b be z dx">Benchmarking Result</figcaption></figure><ul class=""><li id="6e5d" class="lk ll hi kc b kd lc kh ld kl mm kp mn kt mo kx ly lq lr ls bi translated">卡尺在<strong class="kc hj">report.html</strong>文件中生成一个报告。</li><li id="2bea" class="lk ll hi kc b kd lt kh lu kl lv kp lw kt lx kx ly lq lr ls bi translated">在浏览器中打开此报告文件，查看详细的基准测试报告。</li></ul><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es mr"><img src="../Images/2aba6bb8ba3301b8f92cd45c3e9e070a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tboboGptOxPdg5APM8IMKw.png"/></div></div></figure><ul class=""><li id="e7a6" class="lk ll hi kc b kd lc kh ld kl mm kp mn kt mo kx ly lq lr ls bi translated">此外，我们可以看到每个区块链组件的完整资源利用率，如下所示。</li></ul><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es ms"><img src="../Images/0641f8a4548555115724c311a459b816.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r3va-oj8fe6bmeY67V3ldA.png"/></div></div><figcaption class="iy iz et er es ja jb bd b be z dx">Benchmarking Resource utilization</figcaption></figure><ul class=""><li id="a383" class="lk ll hi kc b kd lc kh ld kl mm kp mn kt mo kx ly lq lr ls bi translated">我们已经完成了caliper与Hyperledger Fabric Blockchain的集成。</li></ul><h1 id="a61e" class="jc jd hi bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated">打扫</h1><p id="9476" class="pw-post-body-paragraph ka kb hi kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx hb bi translated">执行以下脚本来清理所有docker容器和加密证书。</p><pre class="in io ip iq fd lz ma mb mc aw md bi"><span id="251a" class="me jd hi ma b fi mf mg l mh mi">.<strong class="ma hj">/clean.sh</strong></span></pre><h1 id="94dc" class="jc jd hi bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated">摘要</h1><p id="2285" class="pw-post-body-paragraph ka kb hi kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx hb bi translated">我们已经了解了如何将hyperledger caliper集成到运行结构网络中。我们学习了如何对区块链织物进行基准测试。在中，下一篇文章将会看到如何编写配置模型。</p></div></div>    
</body>
</html>