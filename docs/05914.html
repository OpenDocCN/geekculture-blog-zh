<html>
<head>
<title>Generating a custom map from Pandas’ DataFrame</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从熊猫的数据框架生成自定义地图</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/generating-a-custom-map-from-pandas-dataframe-48638926464c?source=collection_archive---------41-----------------------#2021-08-02">https://medium.com/geekculture/generating-a-custom-map-from-pandas-dataframe-48638926464c?source=collection_archive---------41-----------------------#2021-08-02</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="cfe8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你准备好为你的项目创建一些自定义的开源地图了吗？嗯，我也没有，但是我们将从一小步开始。让我们开始吧。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/25f66b45ebda4a96b359be394227c0ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*nMm4okA9xpni5hUN"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx">Photo by <a class="ae jt" href="https://unsplash.com/@martinsanchez?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Martin Sanchez</a> on <a class="ae jt" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="7c49" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们导入我们将在这个项目中使用的重要python库。这些图书馆是“<a class="ae jt" href="http://python-visualization.github.io/folium/" rel="noopener ugc nofollow" target="_blank">叶子</a>”、“<a class="ae jt" href="https://pandas.pydata.org/" rel="noopener ugc nofollow" target="_blank">熊猫</a>”和“<a class="ae jt" href="https://geopy.readthedocs.io/en/stable/" rel="noopener ugc nofollow" target="_blank">地质公园</a>”。</p><p id="7a47" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是我们的第一段代码。我们将使用ArcGIS的API，并将它初始化为一个函数，并将其分配给nom作为命名者。</p><pre class="je jf jg jh fd ju jv jw jx aw jy bi"><span id="c6c4" class="jz ka hi jv b fi kb kc l kd ke">import folium<br/>import pandas<br/>from geopy import ArcGIS<br/>nom = ArcGIS()</span></pre><p id="42fe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们在这个项目中的主要目标是获得用户输入，因为我们将从用户那里收集适当的地址，然后使用pandas库，我们将生成一个数据帧，并将收集的数据连接为完整的地址。在这一阶段，geopy将获得我们的帮助，它将使用地理编码功能从地址中提取坐标。</p><p id="416a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了收集正确的地址，我们使用以下代码片段:</p><pre class="je jf jg jh fd ju jv jw jx aw jy bi"><span id="2ab9" class="jz ka hi jv b fi kb kc l kd ke">print(“Please enter your address accordingly!”)<br/>address = input(“Address: “)<br/>city = input(“City: “)<br/>state = input(“State: “)<br/>zip = input(“Zip: “)</span></pre><p id="9a91" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将收集，“地址”为“密歇根大道北25号”，“城市”为芝加哥，“州”为IL，最后，“邮政编码”为60602。</p><pre class="je jf jg jh fd ju jv jw jx aw jy bi"><span id="bb58" class="jz ka hi jv b fi kb kc l kd ke">df = pandas.DataFrame([[address,city,state,zip]],columns=[“address”,”city”,”state”,”zip”])</span><span id="164d" class="jz ka hi jv b fi kf kc l kd ke">df[“Full Address”] = df[“address”]+”,”+df[“city”]+”,”+df[“state”]+ “,”+ str(df[“zip”])</span></pre><p id="f852" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">收集完所需的地址后，我们将使用pandas库并创建一个数据框，在该数据框中，数据将保存为列表。为了使用<strong class="ih hj"> <em class="kg">地理编码</em> </strong>我们需要将收集到的数据形成一个整体。因此，我们连接这些列，并将在数据帧中创建另一列。</p><pre class="je jf jg jh fd ju jv jw jx aw jy bi"><span id="1f03" class="jz ka hi jv b fi kb kc l kd ke">df[“Coordinates”] = df[“Full Address”].apply(nom.geocode)</span></pre><p id="a859" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，在<strong class="ih hj"> <em class="kg"> nom.geocode </em> </strong>函数的帮助下，我们将提取经纬度并保存在DataFrame的另一列中。现在，数据帧中的“坐标”列包含纬度和经度信息。</p><pre class="je jf jg jh fd ju jv jw jx aw jy bi"><span id="8025" class="jz ka hi jv b fi kb kc l kd ke">latitude = df[“Latitude”] = df[“Coordinates”].apply(lambda la : la.latitude if la != None else None)</span><span id="2f64" class="jz ka hi jv b fi kf kc l kd ke">longitude = df[“Longitude”] = df[“Coordinates”].apply(lambda lo : lo.longitude if lo != None else None)</span></pre><p id="c82a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在上面的代码片段中，我们获得了精确的坐标，并将它们用作leav中的输入。Map()函数，创建一个地图。让我们看看下面的片段。在这段代码中，我们创建了一个名为map的变量，并将其赋给一个名为follow的函数。Map()，它有一个参数“location ”,该参数接受一个列表，由纬度和经度组成。</p><pre class="je jf jg jh fd ju jv jw jx aw jy bi"><span id="0929" class="jz ka hi jv b fi kb kc l kd ke">map = folium.Map(location=[latitude,longitude])<br/>map.save(“map1.html”)</span></pre><p id="c314" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">总之，我们将使用save()函数用follow python库创建一个名为“map1.html”的新地图。</p><p id="0808" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这里你可以访问整个代码:<a class="ae jt" href="https://github.com/bunyaminsari/map" rel="noopener ugc nofollow" target="_blank">https://github.com/bunyaminsari/map</a></p><p id="9521" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">不要忘记检查这个链接；<a class="ae jt" href="https://benedtech.medium.com/membership" rel="noopener">https://benedtech.medium.com/membership</a></p></div></div>    
</body>
</html>