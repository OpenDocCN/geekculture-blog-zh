<html>
<head>
<title>Scrolling Sprite Background</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">滚动精灵背景</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/scrolling-sprite-background-cfa82fbccc0d?source=collection_archive---------23-----------------------#2021-08-04">https://medium.com/geekculture/scrolling-sprite-background-cfa82fbccc0d?source=collection_archive---------23-----------------------#2021-08-04</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="6250" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">目标:</strong></p><p id="a99d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">向Space Shooter项目添加一个简单的无限滚动2D背景，作为不同级别使用的背景模板。</p><p id="0309" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">解决方案:</strong></p><p id="8a50" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这种情况下，滚动背景的逻辑将由一个脚本驱动，<br/>我们为精灵变换添加简单的向下运动行为，并在它们达到某个垂直高度时将它们包起来。</p><p id="fcb2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有多种方法可以达到预期的效果，另一种常见且可能更有效的方法是使用自定义着色器。</p><p id="9194" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">必需品:</strong></p><ul class=""><li id="ddd6" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">清空Unity C#脚本“ScrollingBackground”。</li><li id="4636" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">可平铺的背景纹理。</li></ul><p id="7ed1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">逻辑:</strong></p><p id="c6ea" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，我们存储了两个将要使用的sprite变换的引用，并添加了一个浮动变量，这样我们就可以在检查器中手动调整移动速度。如果您的图像是完全可平铺的，您可以在Z轴上翻转它来扩展您的无缝图案。</p><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es jr"><img src="../Images/273bde2acdf1a4badc7b9627b8ce658a.png" data-original-src="https://miro.medium.com/v2/resize:fit:872/format:webp/1*Er8XnRptGjATUSp0Isz15w.png"/></div></figure><p id="2554" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">创建一个<strong class="ih hj">void<em class="jz">Movement()</em></strong>方法，负责转换移动行为。不要忘记在<strong class="ih hj"> <em class="jz"> Update() </em> </strong>方法中初始化它。这里，我们将一个<strong class="ih hj"> <em class="jz">新矢量3 </em> </strong>变量分配给变换位置，并更新其Y位置，每帧的时间为“<em class="jz">_滚动速度</em>”秒。</p><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es ka"><img src="../Images/d0fba93943a580f2b853ba566fe67d27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dni4Iq5k_dYdt1kIkY4NOQ.png"/></div></div></figure><p id="b121" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">创建两个新的float类型变量，我们可以在其中存储一个垂直差和一个最小高度。输入取决于你的精灵大小。</p><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es kf"><img src="../Images/4db7c781c364dfecd3b9f36b9c5e44ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CVFrpkqh9V6VK6b8f3AlEg.png"/></div></div></figure><p id="72b7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以通过将第一个图像定位在0，0，0并在其上捕捉第二个图像来测量您的精灵。对我来说是20.48美元</p><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es kg"><img src="../Images/dea6dbe7dc49625cc7a058e72e58671d.png" data-original-src="https://miro.medium.com/v2/resize:fit:952/format:webp/1*gvds_KKhEiezPTT_ekTqdA.png"/></div></figure><p id="ff82" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后创建一个<strong class="ih hj"> void <em class="jz"> Wrap() </em> </strong>方法，一旦变换达到一定高度，该方法将负责重新定位变换。如果Y轴上的变换当前位置低于'<em class="jz"> _minimumHeight </em>'，我们将第一个变换的位置Y分配给第二个<em class="jz">的当前位置Y加上</em>垂直差<em class="jz">乘以</em>乘以<em class="jz"> </em>二，反之亦然，当第二个变换达到最小高度时。</p><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es kh"><img src="../Images/849c0f0a17d29e524b7d0ab21b7e0dcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yhlkDYnMy9ll1H4w06ahXg.png"/></div></div></figure><p id="2aad" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">自我提醒:</strong></p><p id="59f7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对我们存储的变换位置的引用是从它们的变换的中心点开始计算的，所以为了在第二个变换之上将其打包，我们获取第二个当前位置. y，并将变换的总长度乘以2。</p></div><div class="ab cl ki kj gp kk" role="separator"><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn"/></div><div class="hb hc hd he hf"><p id="6c7f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">编辑设置:</strong></p><p id="0999" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在Unity编辑器中，我们将脚本附加到一个新的游戏对象上。你正在使用的精灵应该是这个的子元素。在脚本组件中分配第一个和第二个背景。</p><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es kp"><img src="../Images/0baf11b8e2c1a0af3bfaaebc134e7afc.png" data-original-src="https://miro.medium.com/v2/resize:fit:540/format:webp/1*HH7RKIHm_KQdwobYGeFkTw.png"/></div></figure><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es kq"><img src="../Images/f99681df6ef0b6d820dec7669994d57d.png" data-original-src="https://miro.medium.com/v2/resize:fit:924/format:webp/1*YjJbQOxfOIlKoEYa-s9Bjw.png"/></div></figure><p id="4187" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过使用精灵渲染器，可以指定附加设置来对层进行排序。创建一个新的排序层“<em class="jz">背景</em>”，并分配两个变换到这一层。这样，我们可以在以后添加更多元素时保持视觉空间的有序。</p><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es kr"><img src="../Images/91445939ba8520a76e0aba6181788325.png" data-original-src="https://miro.medium.com/v2/resize:fit:940/format:webp/1*yuGTTyVk_--8qhsGVzoeNA.png"/></div></figure></div><div class="ab cl ki kj gp kk" role="separator"><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn"/></div><div class="hb hc hd he hf"><p id="b56e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">添加第二层</strong></p><p id="4d7c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了应用更多的变化，我制作了一个不同的可平铺背景，它可以显示在第一个滚动背景之上，同时具有不同的scrollspeed值。</p><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es ks"><img src="../Images/6a93b30e50dceb9c4fc37c9c1f7e70e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:674/format:webp/1*k1Ok45Biem9gerNP9IPO7Q.png"/></div></figure><p id="de21" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在脚本中，我们必须调整一些东西，因为我们不希望背景被(重新)定位在同一个position.z。相反，我们创建了一个新的变量，该变量将返回position.z(默认情况下),以防分配了偏移量；position.z +偏移量。</p><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es kt"><img src="../Images/a01695d59806fd611299f4c2918ee33a.png" data-original-src="https://miro.medium.com/v2/resize:fit:932/format:webp/1*EcP9hNy6-yeXdTziZgbPlQ.png"/></div><figcaption class="ku kv et er es kw kx bd b be z dx">Leave the value at 0 if you don’t want an offset.</figcaption></figure></div><div class="ab cl ki kj gp kk" role="separator"><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn"/></div><div class="hb hc hd he hf"><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es ky"><img src="../Images/269e6c54948554045180d5f7be6acbcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*ujYEKh1id0u18wPv5d61OA.gif"/></div></div></figure><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es kz"><img src="../Images/9a92c1982c88a05165c6568f2010e3b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z1Je9m1DYi_0BsbFHgCD-g.png"/></div></div></figure></div><div class="ab cl ki kj gp kk" role="separator"><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn"/></div><div class="hb hc hd he hf"><p id="ba5e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">← <a class="ae la" rel="noopener" href="/nerd-for-tech/spawn-manager-a7c0e6446b2a">上一张</a> | <a class="ae la" href="https://gert-coppens.medium.com/from-prototype-to-work-of-art-ff35e6c8100f" rel="noopener">下一张</a> →</p></div></div>    
</body>
</html>