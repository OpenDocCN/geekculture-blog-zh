<html>
<head>
<title>Building Logging System in Microservice Architecture with ELK Stack and Serilog .NET Core [Part 2]</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用ELK Stack和Serilog构建微服务架构下的测井系统。网络核心[第二部分]</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/building-logging-system-in-microservice-architecture-with-elk-stack-and-serilog-net-core-part-2-2643dbbf3c2c?source=collection_archive---------0-----------------------#2020-03-04">https://medium.com/geekculture/building-logging-system-in-microservice-architecture-with-elk-stack-and-serilog-net-core-part-2-2643dbbf3c2c?source=collection_archive---------0-----------------------#2020-03-04</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/></div><div class="ab cl if ig gp ih" role="separator"><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik"/></div><div class="hb hc hd he hf"><p id="6285" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在第1部分中，我们介绍了日志记录的重要性，尤其是在MSA中，以及如何实现一个有意义的日志记录系统。</p><div class="jk jl ez fb jm jn"><a rel="noopener follow" target="_blank" href="/@letienthanh0212/building-logging-system-in-microservice-architecture-with-elk-stack-and-serilog-net-core-part-1-8fe2dfcf9e6f"><div class="jo ab dw"><div class="jp ab jq cl cj jr"><h2 class="bd hj fi z dy js ea eb jt ed ef hh bi translated">用ELK stack和Serilog构建微服务架构下的测井系统。网络核心[第一部分]</h2><div class="ju l"><h3 class="bd b fi z dy js ea eb jt ed ef dx translated">日志系统不仅仅是为开发者准备的。它也被其他人使用(系统管理员、测试人员……)</h3></div><div class="jv l"><p class="bd b fp z dy js ea eb jt ed ef dx translated">medium.com</p></div></div><div class="jw l"><div class="jx l jy jz ka jw kb kc jn"/></div></div></a></div><p id="380d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在这一部分中，我将向您展示如何使用Serilog在微服务架构中构建日志记录系统。NET Core和ELK Stack。</p><p id="2a66" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我们开始吧！</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div class="er es kd"><img src="../Images/417a76bb6ebbbb662177a9b05739667a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/0*s8C2MI1oPnSG5ySM.jpg"/></div><figcaption class="kk kl et er es km kn bd b be z dx">image source: internet</figcaption></figure><p id="6efd" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">但是等等！Serilog和ELK Stack，它们是什么？</p><p id="1f11" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">—如果您已经知道它们是什么，可以忽略下面的部分。</p><h1 id="a8d3" class="ko kp hi bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">Serilog</h1><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es lm"><img src="../Images/fdd1102ca5344cb6a02f348c6b547ec2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*nKySH3KEMqhX-X3Z.png"/></div></div></figure><p id="c118" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">Serilog是一个日志框架。NET于2013年推出。Serilog是最新的日志框架之一，因此它采用了. NET. Structured logging的一些更新更高级的特性。除此之外，丰富的概念也使得Serilog与许多其他日志框架(例如:log4net)相比是独一无二的。</p><p id="f421" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">使用Serilog，通过简单的配置就可以很容易地将我们的日志发送到不同的地方。Serilog使用所谓的接收器将我们的日志发送到文本文件、数据库、<a class="ae lr" href="https://azure.microsoft.com/en-us/services/storage/tables/" rel="noopener ugc nofollow" target="_blank"> Azure table、</a> <a class="ae lr" href="https://aws.amazon.com/s3/" rel="noopener ugc nofollow" target="_blank">亚马逊S3 </a>或许多其他地方。你可以在这里看到提供的水槽列表:</p><div class="jk jl ez fb jm jn"><a href="https://github.com/serilog/serilog/wiki/Provided-Sinks" rel="noopener  ugc nofollow" target="_blank"><div class="jo ab dw"><div class="jp ab jq cl cj jr"><h2 class="bd hj fi z dy js ea eb jt ed ef hh bi translated">serilog/serilog</h2><div class="ju l"><h3 class="bd b fi z dy js ea eb jt ed ef dx translated">Serilog提供了用于以各种格式将日志事件写入存储的接收器。下面列出的许多水槽是…</h3></div><div class="jv l"><p class="bd b fp z dy js ea eb jt ed ef dx translated">github.com</p></div></div><div class="jw l"><div class="ls l jy jz ka jw kb kc jn"/></div></div></a></div><h1 id="1376" class="ko kp hi bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">麋鹿栈</h1><p id="1fc1" class="pw-post-body-paragraph im in hi io b ip lt ir is it lu iv iw ix lv iz ja jb lw jd je jf lx jh ji jj hb bi translated">“ELK”是三个开源项目的首字母缩写:Elasticsearch、Logstash和Kibana。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div class="er es ly"><img src="../Images/493404d51d5ee477b15a8c30c2384d14.png" data-original-src="https://miro.medium.com/v2/resize:fit:1022/format:webp/1*cXoDf5gnE8d8ldCsjNRF9A.png"/></div></figure><div class="jk jl ez fb jm jn"><a href="https://www.elastic.co/what-is/elk-stack" rel="noopener  ugc nofollow" target="_blank"><div class="jo ab dw"><div class="jp ab jq cl cj jr"><h2 class="bd hj fi z dy js ea eb jt ed ef hh bi translated">ELK Stack: Elasticsearch，Logstash，Kibana | Elastic</h2><div class="ju l"><h3 class="bd b fi z dy js ea eb jt ed ef dx translated">麋鹿栈是什么？ELK Stack是三个广泛使用的开源项目组合的首字母缩写…</h3></div><div class="jv l"><p class="bd b fp z dy js ea eb jt ed ef dx translated">www.elastic.co</p></div></div></div></a></div><p id="1bc9" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">弹性搜索</strong></p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es lz"><img src="../Images/274a6c35f191a382d23ac9f8b508aead.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Ia0k53Pdl3jFicWY.png"/></div></div></figure><p id="c60c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">Elasticsearch是一个开源、分布式、RESTful搜索和分析引擎。不要认为Elasticsearch只适合大数据，因为它允许您从小处着手，但会与您的业务一起增长。Elasticsearch旨在横向扩展。</p><p id="cac0" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">Elasticsearch是一个高度可用的分布式搜索引擎。每个索引被分解成碎片，每个碎片可以有一个或多个副本。默认情况下，创建的索引有5个分片，每个分片有1个副本(5/1)。有许多拓扑可供使用:</p><ul class=""><li id="3f20" class="ma mb hi io b ip iq it iu ix mc jb md jf me jj mf mg mh mi bi translated">1/10: 1个碎片和10个副本—这有助于提高搜索性能。</li><li id="23fd" class="ma mb hi io b ip mj it mk ix ml jb mm jf mn jj mf mg mh mi bi translated">20/1: 20个碎片，每个碎片1个副本——这有助于提高索引性能。</li></ul><p id="da41" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">Elasticsearch是API驱动的。大多数操作都可以通过一个简单的RESTful API使用JSON over HTTP来执行。</p><p id="0bf5" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">你可以访问Elasticsearch Github查看完整的功能和源代码</p><div class="jk jl ez fb jm jn"><a href="https://github.com/elastic/elasticsearch" rel="noopener  ugc nofollow" target="_blank"><div class="jo ab dw"><div class="jp ab jq cl cj jr"><h2 class="bd hj fi z dy js ea eb jt ed ef hh bi translated">弹性/弹性搜索</h2><div class="ju l"><h3 class="bd b fi z dy js ea eb jt ed ef dx translated">Elasticsearch是一个为云构建的分布式RESTful搜索引擎。特点包括:分布式和高度…</h3></div><div class="jv l"><p class="bd b fp z dy js ea eb jt ed ef dx translated">github.com</p></div></div><div class="jw l"><div class="mo l jy jz ka jw kb kc jn"/></div></div></a></div><h1 id="a64f" class="ko kp hi bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated"><strong class="ak">日志存储</strong></h1><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es mp"><img src="../Images/bcf4ef7f945a83ef3865a82dace066f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*cQDFbJnPekwPdQmP.jpg"/></div></div></figure><p id="99ca" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">Logstash负责聚合来自不同来源的数据，对其进行处理，并将其发送到管道中，通常直接在Elasticsearch中进行索引。</p><p id="159a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">Logstash可以使用输入插件从几乎任何数据源提取数据，使用过滤器插件应用各种各样的数据转换和增强，并使用输出插件将数据发送到大量目的地。</p><p id="4430" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">您可以在这里找到Logstash的所有插件:</p><div class="jk jl ez fb jm jn"><a href="https://github.com/logstash-plugins" rel="noopener  ugc nofollow" target="_blank"><div class="jo ab dw"><div class="jp ab jq cl cj jr"><h2 class="bd hj fi z dy js ea eb jt ed ef hh bi translated">日志隐藏插件</h2><div class="ju l"><h3 class="bd b fi z dy js ea eb jt ed ef dx translated">可以扩展Logstash功能的插件。Logstash Plugins有262个可用的库。遵循他们的准则…</h3></div><div class="jv l"><p class="bd b fp z dy js ea eb jt ed ef dx translated">github.com</p></div></div><div class="jw l"><div class="mq l jy jz ka jw kb kc jn"/></div></div></a></div><h1 id="bb5b" class="ko kp hi bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated"><strong class="ak">基巴纳</strong></h1><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es mp"><img src="../Images/5cb6ef5b06b9ad653d32e233487a4894.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*HoLTDLShBsijhEMf.jpg"/></div></div></figure><p id="fcfe" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">Kibana是一个强大的可视化工具，它与Elasticsearch集成在一起，使用存储在Elasticsearch集群中的数据来创建有意义的图形和图表。Kibana的核心特性是数据查询和分析。</p><p id="bc56" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">此外，Elasticsearch是API驱动的——您可以使用Kibana的内置工具“控制台”来使用elastic search</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es mr"><img src="../Images/0120eb35f46cdaefd72861f41246b54f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*-CCTHaE9CDNq3ghf.png"/></div></div></figure><div class="jk jl ez fb jm jn"><a href="https://github.com/elastic/kibana" rel="noopener  ugc nofollow" target="_blank"><div class="jo ab dw"><div class="jp ab jq cl cj jr"><h2 class="bd hj fi z dy js ea eb jt ed ef hh bi translated">弹力/基巴纳</h2><div class="ju l"><h3 class="bd b fi z dy js ea eb jt ed ef dx translated">基巴纳是你进入弹性堆栈的窗口。具体来说，它是一个基于浏览器的分析和搜索仪表板，适用于…</h3></div><div class="jv l"><p class="bd b fp z dy js ea eb jt ed ef dx translated">github.com</p></div></div><div class="jw l"><div class="ms l jy jz ka jw kb kc jn"/></div></div></a></div><h1 id="a613" class="ko kp hi bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated"><strong class="ak">在MSA中应用Serilog和ELK</strong></h1><p id="e926" class="pw-post-body-paragraph im in hi io b ip lt ir is it lu iv iw ix lv iz ja jb lw jd je jf lx jh ji jj hb bi translated">在这个演示中，我们将使用Serilog库在系统中写日志。所有API请求都将以预定义的日志级别记录在配置文件中。ELK用于管理集中的测井数据。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es mt"><img src="../Images/6a3e1921276d10b21a1de6995b7e1ef5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x9KsUDmM4VEF0NuHWkgcjw.jpeg"/></div></div></figure></div><div class="ab cl if ig gp ih" role="separator"><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik"/></div><div class="hb hc hd he hf"><p id="2701" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">第一步:创建购买服务、库存服务和运输服务</strong></p><p id="d55b" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">让我们回到第1部分的案例，我已经创建了一个包含3个服务(购买、库存和运输)的解决方案。</p><p id="6deb" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">最终用户将调用“购买”服务，然后“购买”服务将调用“库存”和“运输”服务，然后将结果返回给最终用户。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div class="er es mu"><img src="../Images/c8666e1b295764daaedf01a56383c446.png" data-original-src="https://miro.medium.com/v2/resize:fit:850/format:webp/1*2SVPBFy6h8hV_hznn3gOjQ.png"/></div></figure><p id="30bd" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">购买控制器</strong></p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es mv"><img src="../Images/39404575db62f3288e16bb726b9f64b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GsUqRLPtcostWqjmpvVuwA.png"/></div></div></figure><p id="91eb" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">出货控制器</strong></p><figure class="ke kf kg kh fd ki er es paragraph-image"><div class="er es mw"><img src="../Images/08f97f349868e42d945f11818c2cb846.png" data-original-src="https://miro.medium.com/v2/resize:fit:792/format:webp/1*AlBmcap_ELTaRAA5ee7D3Q.png"/></div></figure><p id="10b9" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">库存控制器</strong></p><figure class="ke kf kg kh fd ki er es paragraph-image"><div class="er es mx"><img src="../Images/8afb73a7762597b19e7e735064139ed2.png" data-original-src="https://miro.medium.com/v2/resize:fit:996/format:webp/1*1grTl3DN4UnVyhPI8fBhCQ.png"/></div></figure><p id="ac4b" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><em class="my">注意:我将跳过创建服务这一步。您可以在这里访问并获得源代码:</em></p><div class="jk jl ez fb jm jn"><a href="https://github.com/thanhle0212/LoggingWithELKAndSerilog" rel="noopener  ugc nofollow" target="_blank"><div class="jo ab dw"><div class="jp ab jq cl cj jr"><h2 class="bd hj fi z dy js ea eb jt ed ef hh bi translated">thanh le 0212/LoggingWithELKAndSerilog</h2><div class="ju l"><h3 class="bd b fi z dy js ea eb jt ed ef dx translated">在GitHub上创建一个帐户，为thanhle 0212/LoggingWithELKAndSerilog的开发做出贡献。</h3></div><div class="jv l"><p class="bd b fp z dy js ea eb jt ed ef dx translated">github.com</p></div></div><div class="jw l"><div class="mz l jy jz ka jw kb kc jn"/></div></div></a></div><p id="c975" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">第二步:实现所有服务的seri log</strong></p><p id="9cd2" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">使用NuGet </strong>为所有服务安装Serilog包</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es na"><img src="../Images/1a7375a73216bbe4bc3b624e5f67a0d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eBHemAKdZcLggaaF4aVtkw.png"/></div></div><figcaption class="kk kl et er es km kn bd b be z dx"><strong class="bd kq">Serilog.AspNetCore</strong></figcaption></figure><p id="cfa1" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">Serilog。AspNetCore —主要驱动因素</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es nb"><img src="../Images/923e854f7a7367aa91d4e7bba1bd5d58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kJTPFy9bzwEqoqCewHDb-w.png"/></div></div><figcaption class="kk kl et er es km kn bd b be z dx"><strong class="bd kq">Serilog.Settings.Configuration</strong></figcaption></figure><p id="4f11" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">Serilog。Settings . Configuration读取应用程序设置配置的提供程序。(我们稍后会用到)</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es nc"><img src="../Images/9c2b1269006a6d7ede76195862543df8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UuPxzkAS9D6o3L6cK3ljYQ.png"/></div></div><figcaption class="kk kl et er es km kn bd b be z dx"><strong class="bd kq">Serilog.Sinks.Async</strong></figcaption></figure><p id="7265" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">Serilog。Sinks.Async <strong class="io hj"> </strong> —其他接收器的异步包装器，尤其是文件接收器，它通过将工作委托给后台线程来减少日志调用的开销。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es na"><img src="../Images/90e560770effa8632a2f1b2a5864205f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KEs1_FDVwStFSviGybQAhA.png"/></div></div><figcaption class="kk kl et er es km kn bd b be z dx"><strong class="bd kq">Serilog.Sinks.Http</strong></figcaption></figure><p id="6e2c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">Serilog。Http —提供者帮助您通过Http发送日志。然而，我们将在稍后实现ELK时使用这个接收器。这个想法是，我们将通过HTTP发送日志到Elasticsearch。</p><p id="0d67" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">为了测试Serilog，我们将尝试实现将日志写入文件。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es na"><img src="../Images/240b833d4350205c2258917e6ebd1415.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rVnK4qnvTlIg7RtCZpa6zg.png"/></div></div><figcaption class="kk kl et er es km kn bd b be z dx"><strong class="bd kq">Serilog.Sinks.File</strong></figcaption></figure><p id="ec53" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">Serilog。Sinks.File —提供程序帮助您将日志写入文件。</p><p id="20b7" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">在你的项目中注册seri log</strong></p><p id="abc6" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">如下更新Program.cs以在项目中注册Serilog。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es nd"><img src="../Images/553f7b0775144c0c9face998a6f4353c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v90HPO8T6MWnjSTz8OF_4Q.png"/></div></div></figure><p id="385b" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">因为我们将使用文件接收器提供程序，所以我们需要定义路径(文件位置)来存储日志数据。比如“F:\\Thanh_let.txt”。</p><p id="8ba6" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">实现Serilog写日志</strong></p><p id="80af" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><em class="my">注:您可以对其他服务进行同样的操作</em></p><p id="c078" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">使用依赖注入(DI)注册和使用记录器库</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es ne"><img src="../Images/72594e8133a5bb950802c9ec48b7f28f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yIP4j-OGi9d-pxNWzoMDIw.png"/></div></div></figure><p id="d29a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">代码逻辑中的调用日志方法</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es nf"><img src="../Images/8c5c9d00a9aab33b51c9febc0f2dcac0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M9l1MBOac-Kh58jPq0E4vw.png"/></div></div></figure><p id="4099" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">让我们给邮递员打个电话，检查一下结果:</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es ng"><img src="../Images/a4c5b5da9e2671588456f40b067e67db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XRQlW5JG3EQ5sKmN4X256g.png"/></div></div></figure><p id="1686" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">第三步:安装ELK堆栈</strong></p><p id="e629" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><em class="my">注:在本文中，我将向您展示如何在Windows操作系统上从头开始安装和配置ELK stack。您也可以选择另一种方式来安装和配置ELK，比如使用Docker。</em></p><p id="2ed1" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">安装打开的JDK </strong></p><p id="4715" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">你可以在这里看到开放JDK的所有版本:</p><div class="jk jl ez fb jm jn"><a href="https://jdk.java.net/archive/" rel="noopener  ugc nofollow" target="_blank"><div class="jo ab dw"><div class="jp ab jq cl cj jr"><h2 class="bd hj fi z dy js ea eb jt ed ef hh bi translated">存档的OpenJDK GA版本</h2><div class="ju l"><h3 class="bd b fi z dy js ea eb jt ed ef dx translated">这个页面是以前发布的JDK版本的档案，根据GNU通用公共许可证，版本…</h3></div><div class="jv l"><p class="bd b fp z dy js ea eb jt ed ef dx translated">jdk.java.net</p></div></div></div></a></div><p id="bd0d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">选择并下载版本<strong class="io hj"> 11.0.2(内部版本11.0.2+9) Windows 64bit </strong></p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es nh"><img src="../Images/927d06ec12676b40d88cfc455db857ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aOiydH98bWvh-GVGoVr9Vg.png"/></div></div></figure><p id="e081" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">将zip文件(open JDK-11 . 0 . 2 _ windows-x64 _ bin . zip)解压缩到您的位置。例如:“C:\ Program Files \ Java \ JDK-11 . 0 . 2”</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div class="er es ni"><img src="../Images/7886209d08aec2986449afc1267319f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1344/format:webp/1*yEhJYqPQ-_mxWVadoXtzjQ.png"/></div></figure><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es nj"><img src="../Images/89fc2e26e2bce99a2b78e6e7bdcf9099.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iI2Picla7yujl9uXi4mKBA.png"/></div></div></figure><p id="6a53" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">创建新的系统变量名称"<strong class="io hj"> JAVA_HOME </strong>"并设置值为这个路径" C:\ Program Files \ JAVA \ JDK-11 . 0 . 2 "</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es nk"><img src="../Images/7fcbdb652ce5ba3697327be6db54a7b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rvetc0hOsaneSTbh3hvTpw.png"/></div></div></figure><p id="6e85" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">单击“高级”选项卡中的“环境变量…”</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div class="er es nl"><img src="../Images/7fd8f4e7be8c21720e363dfe5e75bed5.png" data-original-src="https://miro.medium.com/v2/resize:fit:822/format:webp/1*_dRgW35c7J9rVBiELShspA.png"/></div></figure><p id="7618" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">点击“新建”</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div class="er es nm"><img src="../Images/683be9ce30b47b0833772fe9e3e29803.png" data-original-src="https://miro.medium.com/v2/resize:fit:1246/format:webp/1*1ZFzbqT5GKAO02lxHNRm6w.png"/></div></figure><p id="f1ab" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">设置“变量名”为“JAVA_HOME”，“变量值”为您的<strong class="io hj"> jdk-11.0.2 </strong>文件夹的路径</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div class="er es nn"><img src="../Images/078f1973d7e9ffac315ac2733699be94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1272/format:webp/1*-kOon9GJVVbfwFsH-U1aFA.png"/></div></figure><p id="186e" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">编辑“<strong class="io hj">管理员用户变量”</strong>中的“<strong class="io hj">路径</strong>值</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div class="er es no"><img src="../Images/25194f50870c174a187964cb5cbc1e57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1222/format:webp/1*Xi8jLo4mX0ts6r72ZIh6vA.png"/></div></figure><p id="d752" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">单击“新建”创建新路径</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div class="er es np"><img src="../Images/d60e7c23d21f95246dff0b268d5f91b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1064/format:webp/1*Z1zz78DF9NEkVBemFPtjIg.png"/></div></figure><p id="a3ef" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">重新启动计算机以应用新的更改。</p><p id="cd1a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">重启成功后，打开CMD并输入“java -version”来验证安装开放JDK。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es nq"><img src="../Images/1c80502400bb2ee04ad32bd12ce86a7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IZjCvjMsAVQYNd3HaeIH0A.png"/></div></div></figure><p id="796e" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">下载并安装ELK stack </strong></p><ol class=""><li id="5c80" class="ma mb hi io b ip iq it iu ix mc jb md jf me jj nr mg mh mi bi translated"><a class="ae lr" href="https://www.elastic.co/downloads/elasticsearch" rel="noopener ugc nofollow" target="_blank"> <strong class="io hj">弹力搜索</strong> </a></li></ol><p id="9a9d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">你可以在这里下载Elasticsearch</p><div class="jk jl ez fb jm jn"><a href="https://www.elastic.co/downloads/elasticsearch" rel="noopener  ugc nofollow" target="_blank"><div class="jo ab dw"><div class="jp ab jq cl cj jr"><h2 class="bd hj fi z dy js ea eb jt ed ef hh bi translated">免费下载橡皮筋搜索|立即开始|橡皮筋|橡皮筋</h2><div class="ju l"><h3 class="bd b fi z dy js ea eb jt ed ef dx translated">免费下载Elasticsearch或完整的Elastic Stack(以前的ELK stack ),并开始搜索和分析…</h3></div><div class="jv l"><p class="bd b fp z dy js ea eb jt ed ef dx translated">www.elastic.co</p></div></div><div class="jw l"><div class="ns l jy jz ka jw kb kc jn"/></div></div></a></div><p id="6f04" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">有很多选项供你选择(Linux，Docker…)</p><p id="e785" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">ELK的最新版本是<strong class="io hj"> 7.6.0，</strong>如果你想下载更老的版本，可以访问这里:</p><div class="jk jl ez fb jm jn"><a href="https://www.elastic.co/downloads/past-releases#elasticsearch" rel="noopener  ugc nofollow" target="_blank"><div class="jo ab dw"><div class="jp ab jq cl cj jr"><h2 class="bd hj fi z dy js ea eb jt ed ef hh bi translated">Elastic Stack软件的旧版本| Elastic</h2><div class="ju l"><h3 class="bd b fi z dy js ea eb jt ed ef dx translated">寻找过去发布的Elasticsearch、Logstash、Kibana、es-hadoop、Shield、漫威或我们的语言客户…</h3></div><div class="jv l"><p class="bd b fp z dy js ea eb jt ed ef dx translated">www.elastic.co</p></div></div><div class="jw l"><div class="nt l jy jz ka jw kb kc jn"/></div></div></a></div><p id="eb02" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><em class="my">注:在本文中，我将使用版本</em><strong class="io hj"><em class="my">7 . 2 . 0</em></strong><em class="my">，这也是我在当前项目中使用的版本。</em></p><div class="jk jl ez fb jm jn"><a href="https://www.elastic.co/downloads/past-releases/elasticsearch-7-2-0" rel="noopener  ugc nofollow" target="_blank"><div class="jo ab dw"><div class="jp ab jq cl cj jr"><h2 class="bd hj fi z dy js ea eb jt ed ef hh bi translated">弹性搜索7.2.0 |弹性</h2><div class="ju l"><h3 class="bd b fi z dy js ea eb jt ed ef dx translated">点击此处查看详细的发行说明。不是你要找的版本？查看过去的版本。纯粹的Apache 2.0…</h3></div><div class="jv l"><p class="bd b fp z dy js ea eb jt ed ef dx translated">www.elastic.co</p></div></div><div class="jw l"><div class="nu l jy jz ka jw kb kc jn"/></div></div></a></div><p id="d15f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">2.基巴纳</p><p id="9cb7" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">链接下载基巴纳— <strong class="io hj"> 7.2.0。</strong></p><p id="14c2" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">确保您选择的是Windows版本</p><div class="jk jl ez fb jm jn"><a href="https://www.elastic.co/downloads/past-releases/kibana-7-2-0" rel="noopener  ugc nofollow" target="_blank"><div class="jo ab dw"><div class="jp ab jq cl cj jr"><h2 class="bd hj fi z dy js ea eb jt ed ef hh bi translated">基巴纳7.2.0 |弹性</h2><div class="ju l"><h3 class="bd b fi z dy js ea eb jt ed ef dx translated">弹性云上的应用程序搜索现已可用，介绍Kibana Lens Elastic Stack 7.6.0发布的弹性企业…</h3></div><div class="jv l"><p class="bd b fp z dy js ea eb jt ed ef dx translated">www.elastic.co</p></div></div><div class="jw l"><div class="nv l jy jz ka jw kb kc jn"/></div></div></a></div><p id="2bd7" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">3.<strong class="io hj"> LogStash </strong></p><p id="674a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">链接下载日志存储— <strong class="io hj"> 7.2.0 </strong></p><p id="3fc4" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">确保您选择Zip版本</p><div class="jk jl ez fb jm jn"><a href="https://www.elastic.co/downloads/past-releases/logstash-7-2-0" rel="noopener  ugc nofollow" target="_blank"><div class="jo ab dw"><div class="jp ab jq cl cj jr"><h2 class="bd hj fi z dy js ea eb jt ed ef hh bi translated">Logstash 7.2.0 |弹性</h2><div class="ju l"><h3 class="bd b fi z dy js ea eb jt ed ef dx translated">Logstash</h3></div><div class="jv l"><p class="bd b fp z dy js ea eb jt ed ef dx translated">www.elastic.co</p></div></div><div class="jw l"><div class="nw l jy jz ka jw kb kc jn"/></div></div></a></div><p id="8b2a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">一旦你完成下载，你将有如下3个文件夹:</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div class="er es nx"><img src="../Images/89e7b8fade829ec390563d21df8a04e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1310/format:webp/1*mqphusGGcPGrBvKLr-4Pxw.png"/></div></figure><p id="9f07" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">创建一个文件夹来存储ELK堆栈。即“C:\ELK”</p><p id="3cfc" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">将上面下载的文件解压到“C:\ELK”</p><p id="15a7" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">重命名文件夹名称，以缩短名称:“kibana”，“logstash”和“elasticsearch”。因为我们稍后在安装/配置ELK时需要使用这些名称。</p><p id="acbb" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">提取下载的文件大约需要15分钟。</p><p id="21f4" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">一旦提取完成，让我们安装/配置ELK。</p><p id="72f7" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">配置并运行Elasticsearch </strong></p><p id="d4ca" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">打开“C:\ ELK \ elastic search \ config \ elastic search . yml”</p><p id="70b4" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">此文件包含您的elasticsearch服务器的设置。</p><p id="a3d4" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><em class="my">注意:Elasticsearch为大多数设置提供了合理的默认值。在您着手调整和优化配置之前，请确保您了解您要完成的任务及其后果。在本文中，我不打算在配置文件中逐一解释参数，而是使用我在项目中使用的设置。</em></p><figure class="ke kf kg kh fd ki er es paragraph-image"><div class="er es ny"><img src="../Images/1ec9454914805d927591967e30792584.png" data-original-src="https://miro.medium.com/v2/resize:fit:1396/format:webp/1*vimch0P2c8Pe-6TiYc5ASQ.png"/></div></figure><ul class=""><li id="2fa3" class="ma mb hi io b ip iq it iu ix mc jb md jf me jj mf mg mh mi bi translated"><strong class="io hj"> network.host </strong>:将绑定地址设置为一个特定的IP地址(确保将该值更改为您的IP地址)</li><li id="8af7" class="ma mb hi io b ip mj it mk ix ml jb mm jf mn jj mf mg mh mi bi translated"><strong class="io hj"> http.port </strong>:设置http的自定义端口</li><li id="eb30" class="ma mb hi io b ip mj it mk ix ml jb mm jf mn jj mf mg mh mi bi translated"><strong class="io hj"> node.data: </strong>如果没有设置值，在elasticsearch中插入数据后，会自动创建节点数据。但是，如果没有任何节点数据，您就无法配置用户名/密码，这就是为什么我们需要将其值设置为true。</li></ul><div class="jk jl ez fb jm jn"><a href="https://github.com/elastic/elasticsearch/issues/38261" rel="noopener  ugc nofollow" target="_blank"><div class="jo ab dw"><div class="jp ab jq cl cj jr"><h2 class="bd hj fi z dy js ea eb jt ed ef hh bi translated">elastic search-设置-密码问题问题#38261 elastic/elasticsearch</h2><div class="ju l"><h3 class="bd b fi z dy js ea eb jt ed ef dx translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="jv l"><p class="bd b fp z dy js ea eb jt ed ef dx translated">github.com</p></div></div><div class="jw l"><div class="nz l jy jz ka jw kb kc jn"/></div></div></a></div><ul class=""><li id="dfc5" class="ma mb hi io b ip iq it iu ix mc jb md jf me jj mf mg mh mi bi translated"><strong class="io hj"> discovery.seed_hosts </strong>:当该节点启动时，传递一个初始的主机列表来执行发现</li></ul><p id="76a6" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">默认情况下，在Elasticsearch的配置文件中找不到这些属性(<strong class="io hj"> xpack.security.enabled和xpack . security . transport . SSL . enabled</strong>)。默认情况下，访问Elasticsearch不需要用户名/密码。但是如果您希望您的日志系统更加安全，您应该将这些值设置为“true”。</p><p id="0cab" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">用管理员模式打开PowerShell，打开Elasticsearch文件夹</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es oa"><img src="../Images/eff03d10f5b70358d3f5b4f9bdba0e19.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yAI6PXZ0osKO_EyuUab8cQ.png"/></div></div></figure><p id="e077" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">并运行以下命令:“<strong class="io hj">”。\bin\elasticsearch.bat </strong>"在您的机器上运行elasticsearch(如果您想让Elasticsearch一直运行，请不要关闭终端)</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es ob"><img src="../Images/96cdabb2e43fc48a0e4c6ad8b8c7b51f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Tq69NILbu2Fn6JrS49tP1Q.png"/></div></div></figure><p id="d486" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">让我们给我们的Elasticsearch服务器打一个示例电话。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es oc"><img src="../Images/c64f95791ea940734e1a0fff0e2edd2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WK5G9gRVxWxIeAPciIHY0Q.png"/></div></div></figure><p id="fa09" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">好了，起作用了！现在我们需要设置用户名/密码来使用Elasticserver。</p><p id="dfa2" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">用Administrator打开另一个Windows Powershell，打开Elasticsearch文件夹。然后运行以下命令来设置您的密码:</p><p id="b7a3" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">”。/bin/elastic search-setup-passwords . bat interactive "</strong></p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es od"><img src="../Images/a321ae3e3f221f928649a75acfa52690.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*37HKKN4Q6WusZafLqdlpPg.png"/></div></div></figure><p id="9ee8" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">您需要为ELK stack的所有服务设置密码，默认用户名为“<strong class="io hj">弹性</strong></p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es oe"><img src="../Images/a48d6aa5d0572dd7454ff60bdd4fd9a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w93vXzFAzA0d4w1EayfxtA.png"/></div></div></figure><p id="499e" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">让我们使用您刚刚设置的凭证再次调用Elasticsearch</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es of"><img src="../Images/965a9c1c67d6207627f046b4cb8195f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6QXTAzo9gcyCYBdVZxPvuw.png"/></div></div></figure><p id="2a6c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">接下来，让我们配置并运行<strong class="io hj">基巴纳</strong></p><p id="d3c8" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">用文本编辑器打开“<strong class="io hj">C:\ ELK \ ki Bana \ config \ ki Bana . yml</strong>”。您可以看到所有设置的描述。基于您可以自己创建/修改属性的要求。同样，你应该确保你知道你在做什么！</p><p id="c17b" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">以下是我的设置:</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es og"><img src="../Images/fe7f0f6d75b239ed6cc543ab6979f36b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6awjTLTaGe8hcgtUvgn5Lg.png"/></div></div></figure><p id="925f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">使用您在上一步中刚刚设置的值输入弹性用户名和密码。</p><p id="c4e7" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> *。加密密钥长度必须至少为32个字符</strong></p><p id="a191" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">打开另一个PowerShell窗口，选择“C:\ELK\kibana”文件夹，然后运行以下命令“<strong class="io hj">。\bin\kibana.bat </strong>"来运行kibana。启动Kibana需要1-2分钟</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es oh"><img src="../Images/dc7789491def633a5d1ea9eb1d46051a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zz0yWrtzQLpilDG5y-bqQA.png"/></div></div></figure><p id="099c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我们打开浏览器，输入“<a class="ae lr" href="http://192.168.2.15:25601/" rel="noopener ugc nofollow" target="_blank">http://192 . 168 . 2 . 15:25601/</a>”，然后输入用户名/密码(elastic/Abcd@123$)</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es oi"><img src="../Images/61b8ea5e45909ec7d38af48890c595cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KQDZMyeeEzMBtl_0cOGzNA.png"/></div></div></figure><p id="0ca8" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><em class="my">注意:一旦我们有了一些日志数据，我们稍后将返回到基巴纳:】</em></p><p id="35a9" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">接下来，我们将设置Logstash—ELK堆栈中的最后一个</p><p id="c5c9" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">打开“C:\ ELK \ logstash \ config \ log stash . yml”来配置log stash</p><p id="5a63" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">与Elasticsearch和Kibana一样，您也可以找到每个设置的完整描述。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div class="er es oj"><img src="../Images/671e5fe488923884a94862b1287aa7c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:766/format:webp/1*i8JH_SXpmUUflh1uv5oVRg.png"/></div></figure><p id="4e63" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">对于metrics REST端点，该选项也接受一个范围(29600–29700 ),并且logstash将选择第一个可用端口。这些端口用于Logstash运行和处理数据。</p><p id="b786" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">为日志存储创建过滤器</strong></p><p id="47ee" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在“C:\ELK\logstash”中创建名为“<strong class="io hj"> testlog.conf </strong>”的新配置文件，内容如下</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div class="er es ok"><img src="../Images/5d5870eed730fa50639b3076d8dd2e5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1148/format:webp/1*4-JITXm7VzCLIsrTSvkx9Q.png"/></div></figure><p id="d6f9" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><em class="my">注意:你可以有更多的过滤规则。有了上面的设置，我想复制字段“事件”到“e ”,然后删除字段:事件，标题。</em></p><p id="dd72" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">您可以在此找到有关设置日志存储过滤器的更多详细信息:</p><div class="jk jl ez fb jm jn"><a href="https://www.elastic.co/blog/logstash_lesson_elasticsearch_mapping" rel="noopener  ugc nofollow" target="_blank"><div class="jo ab dw"><div class="jp ab jq cl cj jr"><h2 class="bd hj fi z dy js ea eb jt ed ef hh bi translated">小Logstash课程:使用Logstash帮助创建弹性搜索映射模板</h2><div class="ju l"><h3 class="bd b fi z dy js ea eb jt ed ef dx translated">什么是映射？简单地说，映射定义了Elasticsearch如何解释字段。Elasticsearch功能强大…</h3></div><div class="jv l"><p class="bd b fp z dy js ea eb jt ed ef dx translated">www.elastic.co</p></div></div><div class="jw l"><div class="ol l jy jz ka jw kb kc jn"/></div></div></a></div><p id="88e5" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">使用我们刚刚创建的配置运行log stash(<strong class="io hj">testlog . conf</strong>)</p><p id="1952" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">打开PowerShell窗口并打开以下文件夹("<strong class="io hj"> C:\ELK\logstash </strong>")</p><p id="84ed" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">然后运行以下命令:"<strong class="io hj">。\ bin \ log stash . bat-f testlog . conf</strong>"</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es om"><img src="../Images/1546aa137ac16b19d18373c30ad1b599.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xkD_VxlpOYqpXPMYlQ25Xg.png"/></div></div></figure><figure class="ke kf kg kh fd ki er es paragraph-image"><div class="er es on"><img src="../Images/f1a219b5a8172afc047e3b83003cea91.png" data-original-src="https://miro.medium.com/v2/resize:fit:810/format:webp/1*m47Yco4Aqj7ZwWvXM6m_vw.png"/></div></figure><p id="4740" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在这一步，我们完成了ELK stack的安装和配置。现在，我们将带着我们在前面的步骤中创建的代码库返回，将日志数据发送到ELK stack。</p><p id="777c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">所有服务</strong>应更新为使用HTTP接收器将日志数据发送到Logstash，如下所示:</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div class="er es oo"><img src="../Images/beb86fb6faa72847380e6f41452ca848.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/1*OulwS6H1-cW3OqaZ5jq0dQ.png"/></div></figure><p id="48b3" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">让我们制作一个调用“购买”服务的示例，并在Logstash和Elasticsearch上查看结果</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es op"><img src="../Images/dff52f593331bd554f83b1703f6308af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*31gx8oRvD7IIyVxFD28X8A.png"/></div></div></figure><p id="a559" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">查看弹性搜索的结果</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es oq"><img src="../Images/94344599da77022836154b713e8e5861.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c7DAjAy5UYyYbDAiGVNdhQ.png"/></div></div></figure><p id="27ca" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在Logstash中检查结果</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es or"><img src="../Images/7920c30a30d1c3e0c1549db8e89c41f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vnvLRnrjF2oIylvMh9vJ2Q.png"/></div></div></figure><p id="a445" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">你也可以在Kibana上搜索Elasticsearch数据</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es os"><img src="../Images/d67cf4d67070238879de098bc89c1c65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-CByHmxp6aqVt8XDuLcovQ.png"/></div></div></figure><p id="09dc" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在Kibana上设置索引模式</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es ot"><img src="../Images/35cfee809d92a87b92e4a10df321afee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6dT2tXXa4nRwBCBl5zGhGg.png"/></div></div></figure><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es ou"><img src="../Images/b52b3688b0166058aba431425c50003e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uFDFhsRslGzTTBqyXgy4Gg.png"/></div></div></figure><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es ov"><img src="../Images/dc82f43439c58107270cf2b72c4c87aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qp3hPW6wsXqzLID2QlzdBg.png"/></div></div></figure><p id="ee3a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">结束</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es ow"><img src="../Images/861c506e96daa2caef635caa57035349.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J7RYs3sGHYinzJ1Jb2eG-w.png"/></div></div></figure><p id="2a74" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">转到“Discover”选项卡，您应该会看到基于您的索引的日志数据</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es na"><img src="../Images/30b1cf8fbc5c0369ecd0ed92eff45e07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GzxtwOl1IhEqhRfmLp9tJg.png"/></div></div></figure><p id="02d8" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">根据存储在Elasticsearch中的日志数据创建新的Discover并添加所需的列</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es ox"><img src="../Images/22ffe8157547de3613e447d52e0359c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ihGVCEJ_bVaBQezgti1cXQ.png"/></div></div></figure><figure class="ke kf kg kh fd ki er es paragraph-image"><div class="er es oy"><img src="../Images/521219ca1a668c5169a2a7808c795eaa.png" data-original-src="https://miro.medium.com/v2/resize:fit:956/format:webp/1*BuMLQ6PTiHUWHYm3ZiTTZg.png"/></div></figure><p id="abaa" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><em class="my">注意:当我们为Kibana配置dashboard时，我们将使用这个发现。</em></p><p id="a076" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">您还可以查看日志详细信息</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es oz"><img src="../Images/b0886b7d93091efecf1af9d716134c53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CnPTyAfrTWOq5Wfxg3fIiA.png"/></div></div></figure><p id="861c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">等等…日志详细信息不包括“CorrelationID”。如果您不记得什么是CorrelationID以及我们为什么需要它，您应该回到第1部分</p><div class="jk jl ez fb jm jn"><a rel="noopener follow" target="_blank" href="/@letienthanh0212/building-logging-system-in-microservice-architecture-with-elk-stack-and-serilog-net-core-part-1-8fe2dfcf9e6f"><div class="jo ab dw"><div class="jp ab jq cl cj jr"><h2 class="bd hj fi z dy js ea eb jt ed ef hh bi translated">用ELK stack和Serilog构建微服务架构下的测井系统。网络核心[第一部分]</h2><div class="ju l"><h3 class="bd b fi z dy js ea eb jt ed ef dx translated">日志系统不仅仅是为开发者准备的。它也被其他人使用(系统管理员、测试人员……)</h3></div><div class="jv l"><p class="bd b fp z dy js ea eb jt ed ef dx translated">medium.com</p></div></div><div class="jw l"><div class="jx l jy jz ka jw kb kc jn"/></div></div></a></div><p id="235f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">让我们为所有服务实现CorrelationID。我们需要丰富日志数据。(您可以添加其他属性，如ClientIP……)</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div class="er es pa"><img src="../Images/59d85227ea5c66107b3234993bb9d39d.png" data-original-src="https://miro.medium.com/v2/resize:fit:498/format:webp/1*f03_n6IAonT3dX3kZSmDdA.png"/></div></figure><figure class="ke kf kg kh fd ki er es paragraph-image"><div class="er es pb"><img src="../Images/4ae2903450d2bae5b78b834fcd1c1eef.png" data-original-src="https://miro.medium.com/v2/resize:fit:626/format:webp/1*1LRqD3wQ8y0X9v_kR3h7Wg.png"/></div></figure><p id="c65d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这个想法是，我们将使用HTTP头为每个HTTP请求添加CorrelationID。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es pc"><img src="../Images/42c9a1059f80db7dc4325d7abbd59b2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KBaFRuwpKUfYdlomIOAvZg.png"/></div></div></figure><p id="8f4f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">更新Startup.cs文件以添加新服务</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div class="er es pd"><img src="../Images/35debc61ce872ee7fa0b07362c936d8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1362/format:webp/1*rfsCaoWGf1ULpXwA5aSLMQ.png"/></div></figure><p id="d49c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">和更新配置功能</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div class="er es pe"><img src="../Images/53ca13eb200b4ce1ceeeaf956d74d8fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1384/format:webp/1*J407lDPyShUcHTlcd4uHjA.png"/></div></figure><p id="8486" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">创建日志记录扩展</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div class="er es pf"><img src="../Images/82b154940097124b085c5d7255a09b80.png" data-original-src="https://miro.medium.com/v2/resize:fit:1030/format:webp/1*c0F6vI1mzjav6SVc25nP4Q.png"/></div></figure><p id="5595" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在，更新购买服务以获得“CorrelationID”头，然后添加到发货和导出请求中</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es pg"><img src="../Images/163323ff8fbadc8150daa933a388347e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zAzhGWEu7Pe_a2C9GBZ4mA.png"/></div></div></figure><p id="9b6e" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">更新Program.cs以使用CustomLogEnricher</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div class="er es ph"><img src="../Images/5b24daa944966453ed269785fd0d27d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:964/format:webp/1*Ugwu0AL5bMrcGLX67mYNNA.png"/></div></figure><p id="0d47" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">一旦更新了日志数据结构，就应该更新Kibana中的索引模式</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es pi"><img src="../Images/a26619f551479b116706d0ec7642dc2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yHLUxh8f1iCI6dbX6i4WVw.png"/></div></div></figure><p id="25b2" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">让我们再次打电话购买服务，确保在请求头中添加CorrelationID。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es pj"><img src="../Images/c02855ed1a055d7f8655369b3b2ff8ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_5bivaPXmBL_7Q-lroAF0Q.png"/></div></div></figure><p id="411d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">检查基巴纳的日志数据</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es pk"><img src="../Images/a88e3178536f480cccb966181ada7721.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7Vn38rfTGAMNnKqjmsDT_w.png"/></div></div></figure><p id="bacf" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">好的，目前为止一切顺利！</p><p id="7029" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">让我们使用之前创建的Discover来配置Kibana仪表板</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es pl"><img src="../Images/39336c5e9f863d60e259dc2cb60b5906.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H3_6ejHyIvX_kOzRCqdafw.png"/></div></div></figure><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es pm"><img src="../Images/f94d5ee83ccde34bce770be45f9aee17.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WHuU9Wij3F6wZJElyx83PA.png"/></div></div></figure><p id="c24f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这是结果</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es pn"><img src="../Images/df5f226bac940f4987a66f0a7a790273.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vrHDzodq4Jh33AQ_4kqT3g.png"/></div></div></figure><p id="e7d2" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">保存您的仪表板</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div class="er es po"><img src="../Images/bd53a607c5b03aa85e81e8ff0b647854.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/1*924d0t26yGPT2s-i6aL8jw.png"/></div></figure><p id="34d7" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">您可以尝试按照elastic.co的这篇文章来创建新的图表可视化</p><div class="jk jl ez fb jm jn"><a href="https://www.elastic.co/guide/en/kibana/current/dashboard-create-new-dashboard.html" rel="noopener  ugc nofollow" target="_blank"><div class="jo ab dw"><div class="jp ab jq cl cj jr"><h2 class="bd hj fi z dy js ea eb jt ed ef hh bi translated">创建仪表板|基巴纳指南[7.6] |弹性</h2><div class="ju l"><h3 class="bd b fi z dy js ea eb jt ed ef dx translated">要创建仪表板，您必须将数据编入Elasticsearch，这是一种检索数据的索引模式…</h3></div><div class="jv l"><p class="bd b fp z dy js ea eb jt ed ef dx translated">www.elastic.co</p></div></div><div class="jw l"><div class="pp l jy jz ka jw kb kc jn"/></div></div></a></div><p id="f8c7" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">终于，结束了！</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div class="er es pq"><img src="../Images/1055afd4be924dd38e1ab8082cd6b25c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/0*PYhWkhfg2lcjsPhv.png"/></div></figure><h1 id="b3f8" class="ko kp hi bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">结论</h1><p id="4c93" class="pw-post-body-paragraph im in hi io b ip lt ir is it lu iv iw ix lv iz ja jb lw jd je jf lx jh ji jj hb bi translated">虽然这是一篇很长的文章，但是它是值得的，不是吗？通过这篇文章，我想给你一些想法，在微服务架构中使用ELK stack和Serilog创建一个有意义且健壮的日志记录系统。网芯。</p><p id="eed9" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">如果您有任何反馈/问题，请随时给我留言，我会尽力回复。</p><p id="76d9" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">感谢您的光临！</p><h1 id="d421" class="ko kp hi bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">源代码</h1><div class="jk jl ez fb jm jn"><a href="https://github.com/thanhle0212/LoggingWithELKAndSerilog" rel="noopener  ugc nofollow" target="_blank"><div class="jo ab dw"><div class="jp ab jq cl cj jr"><h2 class="bd hj fi z dy js ea eb jt ed ef hh bi translated">thanh le 0212/LoggingWithELKAndSerilog</h2><div class="ju l"><h3 class="bd b fi z dy js ea eb jt ed ef dx translated">在GitHub上创建一个帐户，为thanh le 0212/LoggingWithELKAndSerilog开发做出贡献。</h3></div><div class="jv l"><p class="bd b fp z dy js ea eb jt ed ef dx translated">github.com</p></div></div><div class="jw l"><div class="mz l jy jz ka jw kb kc jn"/></div></div></a></div></div></div>    
</body>
</html>