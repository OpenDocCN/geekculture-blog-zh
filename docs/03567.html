<html>
<head>
<title>GPU should be as effortless as electricity</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">GPU应该像电一样不费力</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/gpu-should-be-as-effortless-as-electricity-a7613df102d7?source=collection_archive---------26-----------------------#2021-06-10">https://medium.com/geekculture/gpu-should-be-as-effortless-as-electricity-a7613df102d7?source=collection_archive---------26-----------------------#2021-06-10</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="3e0c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将加速计算想象成一种简单、经济的远程服务</p><p id="2ee6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">本文是三篇系列文章中的第三篇。这里有 <a class="ae je" rel="noopener" href="/swlh/the-crisis-in-computing-how-a-looming-processing-pinch-could-make-or-break-the-global-economy-856956756df4"> <em class="jd"> 1 </em> </a> <em class="jd">和</em> <a class="ae je" href="https://towardsdatascience.com/the-hidden-world-of-gpu-inefficiency-776ae1c9cf5" rel="noopener" target="_blank"> <em class="jd"> 2 </em> </a> <em class="jd">。</em></p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es jf"><img src="../Images/c5b6d39108685e61e6237768ff834e81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8ZDVW7JRFxi0Wt8h"/></div></div><figcaption class="jr js et er es jt ju bd b be z dx">The world’s GPU capacity is mostly on standby — Photo by<a class="ae je" href="https://unsplash.com/@jentheodore?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Jen Theodore</a> on<a class="ae je" href="https://unsplash.com/s/photos/dial?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash</a></figcaption></figure><p id="f881" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi jv translated"><span class="l jw jx jy bm jz ka kb kc kd di"> G </span> PU加速计算是新兴技术的关键资源，但<a class="ae je" rel="noopener" href="/swlh/the-crisis-in-computing-how-a-looming-processing-pinch-could-make-or-break-the-global-economy-856956756df4">宏观趋势指向容量短缺</a>。高价自然随之而来。</p><p id="e69b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一般来说，现代计算环境是围绕灵活性构建的，包括虚拟机、容器、网络连接存储、软件定义的网络。但GPU和其他加速器仍然顽固僵化，将它们整合到动态基础设施中既麻烦又受限制。</p><p id="2438" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，尽管GPU是一个越来越昂贵的组件，但今天的限制使我们今天的GPU容量的整体利用率保持在大约10-15%<em class="jd">。</em></p><p id="42b7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个<a class="ae je" href="https://towardsdatascience.com/the-hidden-world-of-gpu-inefficiency-776ae1c9cf5" rel="noopener" target="_blank">“GPU低效率的隐藏世界”</a>并不是一个被广泛讨论的话题。</p></div><div class="ab cl ke kf gp kg" role="separator"><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj"/></div><div class="hb hc hd he hf"><h2 id="4597" class="kl km hi bd kn ko kp kq kr ks kt ku kv iq kw kx ky iu kz la lb iy lc ld le lf bi translated"><strong class="ak">对GPU未充分利用的讨论不足</strong></h2><p id="eb82" class="pw-post-body-paragraph if ig hi ih b ii lg ik il im lh io ip iq li is it iu lj iw ix iy lk ja jb jc hb bi translated">为什么这几乎是秘密？</p><p id="376d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">理由1: </strong>商业组织内部的实际社会动力，这是<a class="ae je" href="https://www.nextplatform.com/2020/11/17/counting-the-cost-of-under-utilized-gpus-and-doing-something-about-it/" rel="noopener ugc nofollow" target="_blank">蒂莫西·普里克特·摩根在这里提到的</a>:</p><blockquote class="ll lm ln"><p id="fed8" class="if ig jd ih b ii ij ik il im in io ip lo ir is it lp iv iw ix lq iz ja jb jc hb bi translated">“……[GPU]效率低下即使谈得不多也一直被容忍。没有人会告诉首席执行官或首席财务官，一台理论性能达到令人印象深刻的峰值的超级计算机实际上没有得到充分利用。</p></blockquote><p id="ef48" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">想象一下对话会如何进行:</p><p id="5be5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">IT主管:你知道我们在GPU上花了很多钱吗？我们需要更多。事实上，在接下来的几年里，我们需要继续增加在GPU上的支出，以支持商业计划。</p><p id="7dd4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首席财务官:哎哟。我无法证明这一切。你可以得到你想要的一半。</p><p id="7315" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">IT主管:[开始走开]顺便说一下，我们的GPU只有10-15%的利用率。但我对此无能为力，事情就是这样。</p><p id="90da" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">财务总监:你被解雇了。</p><p id="fa68" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">原因2: </strong>技术限制的现状，即“对此我无能为力，事情就是这样”。</p><p id="b110" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们很少在一个没有可想象的解决方案的问题上花费精力。这就像在我们学会如何生火之前，早期人类抱怨“晚上好黑”。夜晚的黑暗<em class="jd">只是</em>，GPU利用不足<em class="jd">只是</em>——因为一个有望打破现状的解决方案刚刚出现。</p></div><div class="ab cl ke kf gp kg" role="separator"><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj"/></div><div class="hb hc hd he hf"><h2 id="d2d2" class="kl km hi bd kn ko kp kq kr ks kt ku kv iq kw kx ky iu kz la lb iy lc ld le lf bi translated"><strong class="ak">质疑紧耦合的现状</strong></h2><p id="a50f" class="pw-post-body-paragraph if ig hi ih b ii lg ik il im lh io ip iq li is it iu lj iw ix iy lk ja jb jc hb bi translated">回顾一下上次<a class="ae je" href="https://towardsdatascience.com/the-hidden-world-of-gpu-inefficiency-776ae1c9cf5" rel="noopener" target="_blank">的内容</a>，GPU利用率的主要限制是PCIe的短皮带。应用程序空间和加速该应用程序的GPU之间的这种物理限制使得潜在的资源平衡池基本为零。</p><p id="8338" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们都知道汽车的发动机是其最有价值的部件之一——我们也知道此刻在我们周围一英里内可能有成千上万的汽车发动机闲置着。这无疑是一种巨大的浪费，但一辆汽车的引擎与汽车的其他部分是一对一锁定的，这是一个不容置疑的现实。</p><p id="ad92" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果我说“你应该买一辆没有引擎的车——有足够的汽车加速能力闲置不用！”你顶多会高度怀疑。</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es lr"><img src="../Images/0e26c1dc5e9a3513557eb0b1a1e47769.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*CubpEKpR5NIZW3Ej"/></div></div><figcaption class="jr js et er es jt ju bd b be z dx">So much underutilized acceleration capacity! — Photo by<a class="ae je" href="https://unsplash.com/@carlesrgm?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Carles Rabada</a> on<a class="ae je" href="https://unsplash.com/s/photos/parking-lot?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash</a></figcaption></figure><p id="64df" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要打破GPU一对一的锁定模式，需要类似的想象力飞跃。</p><p id="4c76" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但我要说的是，这个世界——包括你和你的公司——确实将使用更少的引擎(GPU)运行更多的汽车(驱动商业价值的GPU密集型应用)，从而使我们的团队能够创造更多的商业价值。</p><p id="7012" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">怎么会？我们将使GPU可池化、可共享、易于访问。</p></div><div class="ab cl ke kf gp kg" role="separator"><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj"/></div><div class="hb hc hd he hf"><p id="2c1d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了使这种变革可行，我们的解决方案<strong class="ih hj">必须做</strong>四件事:</p><ol class=""><li id="ddf8" class="ls lt hi ih b ii ij im in iq lu iu lv iy lw jc lx ly lz ma bi translated">挣脱PCIe的短皮带</li><li id="9b6b" class="ls lt hi ih b ii mb im mc iq md iu me iy mf jc lx ly lz ma bi translated">提供与正常GPU使用无法区分的功能</li><li id="2b5e" class="ls lt hi ih b ii mb im mc iq md iu me iy mf jc lx ly lz ma bi translated">允许多个工作负载使用同一个GPU</li><li id="5730" class="ls lt hi ih b ii mb im mc iq md iu me iy mf jc lx ly lz ma bi translated">仅使用软件</li></ol><p id="4ec0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以下是为什么这些是必须做的事情:</p><ol class=""><li id="1eae" class="ls lt hi ih b ii ij im in iq lu iu lv iy lw jc lx ly lz ma bi translated"><strong class="ih hj">挣脱PCIe </strong></li></ol><p id="5150" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果不消除应用程序主机和GPU之间的紧密耦合，我们就无法支持网络上的远程访问，也无法创建可行的(大型)容量提供商和容量消费者池来实现最大程度的资源平衡，从而实现高利用率。</p><p id="7f7c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 2。<em class="jd">从应用的角度来看</em>是一个GPU</strong></p><p id="f73c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">想象一下，我们的技术不像普通的GPU那样工作，而是带有缺陷:它只适用于一些API，只适用于一些操作系统，只作为特定的大型部署环境的一部分，它需要复杂的设置和维护，使用它的应用程序必须实现一个SDK…你明白了吧。这些问题中的任何一个都会使它成为一个受限的“点解决方案”,并使它陷入一种狭隘的生存状态——没有使它无处不在并具有高价值的普遍适用性。</p><p id="9160" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 3。超额订阅具有多个工作负载的GPU</strong></p><p id="6eb2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果我们只是扩展GPU的范围，我们仍然可以通过允许“瘦”客户端访问远程GPU来解决一个有趣的问题。但是，如果我们不允许许多消耗GPU的客户端使用同一个提供GPU的服务器，我们就无法通过叠加峰值工作负载来提高利用率——在利用率图中留下低效的空白。</p><p id="2727" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 4。仅软件</strong></p><p id="6722" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果我们的解决方案涉及硬件，那么测试、交付或部署就不容易。它更有可能局限于某个设备、操作系统、环境或芯片供应商。作为一个产品，开发和迭代会比较慢。最后，建造和交付每一个额外单元的成本将会很高，这将很难找到对我们自己和我们的客户都有利的价格点。</p></div><div class="ab cl ke kf gp kg" role="separator"><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj"/></div><div class="hb hc hd he hf"><p id="bc94" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，我们已经确定了趋势、问题，以及理想的解决方案必须提供什么——我们实际上<em class="jd">要建造什么</em>？当然，我有偏见，但我们觉得果汁实验室的道路是正确的。我们的解决方案:</p><p id="a81c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="jd">挣脱PCIe: </em> </strong></p><p id="a41d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">将PCIe连接器</strong>替换为使用标准网络的软件定义的弹性管道，从而将客户端(需要GPU的操作系统+应用空间)与服务器(提供GPU能力的服务器)分离</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es mg"><img src="../Images/f5704211fcd0f50060672be42af61536.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*cSnaeWcF32YnmMZq"/></div></div></figure><p id="97c9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了使我们的管道具有高性能，我们使用压缩和(在可能的情况下)缓存来显著减轻通过管道的数据负载。</p><p id="652e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"><em class="jd">【Be】一个GPU: </em> </strong></p><p id="d8ac" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">用我们自己的“看起来相同”的可安装驱动程序替换客户端上常见的GPU驱动程序</strong>——让操作系统+应用程序空间与GPU通信的软件——而是将工作负载路由到我们的管道。</p><p id="1df5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我们的驱动程序和管道中支持所有常见的图形和计算API，应用程序可能会使用它们与GPU进行通信。</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es mh"><img src="../Images/2841ab68fe977a62a5e3439460191e48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*X8qdjBqAxZiy7hTy"/></div></div></figure><p id="ea09" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="jd">每台服务器多个客户端:</em> </strong></p><p id="cdbb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我们的服务器安装中构建逻辑，允许服务器GPU服务多个客户端。</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es mi"><img src="../Images/23bea17f5bf0fa26c33efd1130b7c64b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*cLzUtAplsY4A_ki7"/></div></div></figure><p id="7483" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="jd">仅软件:</em> </strong></p><p id="ae26" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">请注意，我们没有引入任何新硬件！我们这里什么都没有。</p></div><div class="ab cl ke kf gp kg" role="separator"><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj"/></div><div class="hb hc hd he hf"><h2 id="5d15" class="kl km hi bd kn ko kp kq kr ks kt ku kv iq kw kx ky iu kz la lb iy lc ld le lf bi translated">实现这一愿景</h2><p id="c3cb" class="pw-post-body-paragraph if ig hi ih b ii lg ik il im lh io ip iq li is it iu lj iw ix iy lk ja jb jc hb bi translated">将所有这些部分放在一起，我们提供了一个嵌入式、无代码、无附加硬件的解决方案，允许本地应用程序从任何地方访问他们需要的GPU在任何操作系统上，在任何部署环境中；适用于任何设备、计算机或数据中心；在云中、内部或边缘—同时汇集和共享容量，以提高接近100%的利用率。</p><p id="168c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们相信这种模式将变得普遍，不仅仅是让公司能够在更大规模的部署中推动更多的商业价值:</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es mj"><img src="../Images/014b24de6b95b9d3d5879ac3251ec57f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*K8oabR1I872Mk3il.png"/></div></div><figcaption class="jr js et er es jt ju bd b be z dx">A wide pool of virtual or physical clients (blue) served dynamically by virtual or physical GPU servers (green)</figcaption></figure><p id="7cc9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">…但是实际上加速计算在任何地方都是有用的，比如在移动和物联网的边缘:</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es mk"><img src="../Images/5b8cff3c034220448eae35dc355f4b01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Cd9fscX1GGIoqWgR"/></div></div></figure><p id="530f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这个前所未有的访问和效率的新世界中，僵化和费用消失了，GPU容量成为一种高效、易于访问、负担得起的实用工具。</p><p id="2c6f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">史蒂夫·戈利克是</em> <a class="ae je" href="https://www.juicelabs.co/" rel="noopener ugc nofollow" target="_blank"> <em class="jd">果汁实验室</em> </a> <em class="jd">的联合创始人，这是一家初创公司，其愿景是让计算能力像电力一样容易流动。</em></p></div></div>    
</body>
</html>