<html>
<head>
<title>Speed up development and save time with Live Reload and Testing in Quarkus 2.0</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过Quarkus 2.0中的实时重新加载和测试，加速开发并节省时间</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/speed-up-development-and-save-time-with-live-reload-and-testing-in-quarkus-2-0-53af6ff65edb?source=collection_archive---------16-----------------------#2021-06-29">https://medium.com/geekculture/speed-up-development-and-save-time-with-live-reload-and-testing-in-quarkus-2-0-53af6ff65edb?source=collection_archive---------16-----------------------#2021-06-29</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/e24bc43d54c8254d53e91776779abb09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-mUgJUp5Vigv-Bs9HLiVBw.jpeg"/></div></div></figure><div class=""/><p id="7a5a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Quarkus附带了一个<strong class="is hu">工具链</strong>，使开发人员能够通过它对所有主要ide的扩展快速开始他们的开发。它的一个突出且易于使用的特性是它能够在<strong class="is hu">开发模式</strong>下执行<strong class="is hu">实时重新加载</strong>，让开发人员无需重启即可动态更改实现。有了新的<strong class="is hu">版本2.0 </strong>，开发者可以做更多。现在在开发模式中有一个<strong class="is hu">交互式shell </strong>，它提供了一组不同的选项来更精细地控制在实时模式中运行什么。<strong class="is hu"> Quarkus </strong>还附带了一个<strong class="is hu"> CLI </strong>二进制文件，支持进一步快速开发和项目设置。</p><figure class="jp jq jr js fd hk er es paragraph-image"><div class="er es jo"><img src="../Images/ce7ac1b0824d01cdc66b46c24cdc4c14.png" data-original-src="https://miro.medium.com/v2/resize:fit:450/format:webp/1*d9VDqITcsyUkTcncECeJBA.png"/></div></figure><p id="0db0" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Quarkus 2.0刚刚看到了曙光，并在不同的领域提出了很多改进。</p><div class="hh hi ez fb hj jt"><a href="https://github.com/quarkusio/quarkus/releases/tag/2.0.0.Final" rel="noopener  ugc nofollow" target="_blank"><div class="ju ab dw"><div class="jv ab jw cl cj jx"><h2 class="bd hu fi z dy jy ea eb jz ed ef hs bi translated">最终版quarkusio/quarkus</h2><div class="ka l"><h3 class="bd b fi z dy jy ea eb jz ed ef dx translated">Quarkus:超音速亚原子Java。。在GitHub上创建一个帐户，为quarkusio/quarkus的发展做出贡献。</h3></div><div class="kb l"><p class="bd b fp z dy jy ea eb jz ed ef dx translated">github.com</p></div></div><div class="kc l"><div class="kd l ke kf kg kc kh hp jt"/></div></div></a></div><h1 id="cb0a" class="ki kj ht bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">实时重新加载(开发模式)</h1><p id="7939" class="pw-post-body-paragraph iq ir ht is b it lg iv iw ix lh iz ja jb li jd je jf lj jh ji jj lk jl jm jn hb bi translated">Quarkus之前提供了一种'<a class="ae ll" href="https://access.redhat.com/documentation/en-us/red_hat_build_of_quarkus/1.3/html/developing_and_compiling_your_quarkus_applications_with_apache_maven/proc-quarkus-dev-mode_quarkus-maven" rel="noopener ugc nofollow" target="_blank">开发模式</a>'，这是一种热重新部署机制，通过这种机制，当在浏览器中刷新时，应用程序中的代码更改将被重新编译和重新加载。除了在本地广泛使用之外，还可以在远程容器上使用，提供远程开发模式。</p><pre class="jp jq jr js fd lm ln lo lp aw lq bi"><span id="337a" class="lr kj ht ln b fi ls lt l lu lv">$ ./mvnw quarkus:dev</span></pre><figure class="jp jq jr js fd hk"><div class="bz dy l di"><div class="lw lx l"/></div></figure><p id="fd5d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">随着<strong class="is hu">版本2.0 </strong>如上所述，我们提供了几个新的选项。当按下<code class="du ly lz ma ln b">[r]</code>时，测试在当前开发加载的类的套件中运行。</p><pre class="jp jq jr js fd lm ln lo lp aw lq bi"><span id="aece" class="lr kj ht ln b fi ls lt l lu lv">All 1 tests are passing (0 skipped), 1 tests were run in 1547ms. Tests completed at 22:05:53.<br/>Press [r] to re-run, [v] to view full results, [p] to pause, [h] for more options&gt;</span></pre><p id="7ca1" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">按下<code class="du ly lz ma ln b">[h]</code>,开发人员可以选择重新运行测试失败的套件，或者从之前的失败中继续调试(如果有的话)。</p><pre class="jp jq jr js fd lm ln lo lp aw lq bi"><span id="4519" class="lr kj ht ln b fi ls lt l lu lv">The following commands are available:<br/>[r] — Re-run all tests<br/>[f] — Re-run failed tests<br/>[b] — Toggle ‘broken only’ mode, where only failing tests are run (disabled)<br/>[v] — Print failures from the last test run<br/>[o] — Toggle test output (disabled)<br/>[p] — Pause tests<br/>[i] — Toggle instrumentation based reload (disabled)<br/>[l] — Toggle live reload (enabled)<br/>[s] — Force live reload scan<br/>[h] — Display this help<br/>[q] — Quit</span></pre><p id="29a7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果我们正在构建一个依赖于数据库的应用程序，人们可能会考虑以编程方式为测试建立一个数据库。然而，有一种无缝的方法可以让Quarkus通过应用所谓的零配置设置为您提供一个数据库层。</p><h1 id="c2b8" class="ki kj ht bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">零配置设置(开发服务)</h1><p id="e64c" class="pw-post-body-paragraph iq ir ht is b it lg iv iw ix lh iz ja jb li jd je jf lj jh ji jj lk jl jm jn hb bi translated">当在开发模式下测试或运行时，Quarkus可以为您提供一个开箱即用的零配置数据库，这个特性被称为DevServices。根据数据库类型，您可能需要安装docker才能使用该功能。以下开源数据库支持DevServices:</p><ul class=""><li id="fca3" class="mb mc ht is b it iu ix iy jb md jf me jj mf jn mg mh mi mj bi translated">Postgresql(容器)</li><li id="a857" class="mb mc ht is b it mk ix ml jb mm jf mn jj mo jn mg mh mi mj bi translated">MySQL(容器)</li><li id="2214" class="mb mc ht is b it mk ix ml jb mm jf mn jj mo jn mg mh mi mj bi translated">MariaDB(容器)</li><li id="1f2a" class="mb mc ht is b it mk ix ml jb mm jf mn jj mo jn mg mh mi mj bi translated">H2(进行中)</li><li id="3fd3" class="mb mc ht is b it mk ix ml jb mm jf mn jj mo jn mg mh mi mj bi translated">Apache Derby(进行中)</li><li id="9b77" class="mb mc ht is b it mk ix ml jb mm jf mn jj mo jn mg mh mi mj bi translated">DB2(容器)(需要许可接受)</li><li id="42c1" class="mb mc ht is b it mk ix ml jb mm jf mn jj mo jn mg mh mi mj bi translated">MSSQL(容器)(需要许可接受)</li></ul><p id="a6ea" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你想使用DevServices，那么你需要做的就是包含你想要的数据库类型的相关扩展(反应式或JDBC，或两者都有)，不要配置数据库URL、用户名和密码，Quarkus将提供数据库，你可以开始编码而不用担心配置。通过这种方式，您可以运行一个本地数据库，并且不需要弄乱它，反之亦然，这为开发人员提供了测试隔离。这实际上使用TestContainer作为一个框架，允许开发人员快速测试他们的应用程序，而不必过多关注数据库层的设置和业务逻辑。</p><h1 id="37d4" class="ki kj ht bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">夸尔库斯CLI</h1><p id="c899" class="pw-post-body-paragraph iq ir ht is b it lg iv iw ix lh iz ja jb li jd je jf lj jh ji jj lk jl jm jn hb bi translated">在2.0版Quarkus CLI中，您可以使用底层项目的构建工具创建项目、管理扩展以及执行基本的构建和开发命令。</p><pre class="jp jq jr js fd lm ln lo lp aw lq bi"><span id="2cfe" class="lr kj ht ln b fi ls lt l lu lv">curl -Ls https://sh.jbang.dev | bash -s - app install --fresh --force quarkus@quarkusio</span></pre><div class="hh hi ez fb hj jt"><a href="https://quarkus.io/version/main/guides/cli-tooling" rel="noopener  ugc nofollow" target="_blank"><div class="ju ab dw"><div class="jv ab jw cl cj jx"><h2 class="bd hu fi z dy jy ea eb jz ed ef hs bi translated">使用Quarkus命令行界面(CLI)构建Quarkus应用</h2><div class="ka l"><h3 class="bd b fi z dy jy ea eb jz ed ef dx translated">要创建一个新项目，我们使用create-project命令:这将创建一个名为“hello-world”的文件夹在您的…</h3></div><div class="kb l"><p class="bd b fp z dy jy ea eb jz ed ef dx translated">quarkus.io</p></div></div><div class="kc l"><div class="mp l ke kf kg kc kh hp jt"/></div></div></a></div><p id="4acf" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">使用CLI，我们可以执行以下命令。</p><pre class="jp jq jr js fd lm ln lo lp aw lq bi"><span id="8e61" class="lr kj ht ln b fi ls lt l lu lv">$ quarkus --version<br/>Client Version {quarkus-version}</span></pre><h1 id="e25c" class="ki kj ht bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">创建Quarkus项目</h1><pre class="jp jq jr js fd lm ln lo lp aw lq bi"><span id="6b25" class="lr kj ht ln b fi ls lt l lu lv">$ quarkus create<br/>-----------<br/><br/>applying codestarts...<br/>📚  java<br/>🔨  maven<br/>📦  quarkus<br/>📝  config-properties<br/>🔧  dockerfiles<br/>🔧  maven-wrapper<br/>🚀  resteasy-codestart<br/><br/>-----------<br/>[SUCCESS] ✅ quarkus project has been successfully generated in:<br/>--&gt; /&lt;output-dir&gt;/code-with-quarkus</span></pre><p id="3b7c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们也可以应用相关的工件和项目配置。</p><pre class="jp jq jr js fd lm ln lo lp aw lq bi"><span id="5f6b" class="lr kj ht ln b fi ls lt l lu lv">$ quarkus create app --group-id com.foo --artifact-id bar --version 1.0<br/>version 1.0<br/>-----------<br/><br/>applying codestarts...<br/>📚  java<br/>🔨  maven<br/>📦  quarkus<br/>📝  config-properties<br/>🔧  dockerfiles<br/>🔧  maven-wrapper<br/>🚀  resteasy-codestart<br/><br/>-----------<br/>[SUCCESS] ✅ quarkus project has been successfully generated in:<br/>--&gt; /&lt;output-dir&gt;/bar<br/>-----------</span></pre><p id="6222" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">从这里开始，我们可以根据应用程序的性质来添加和删除扩展。首先列出我们已经有的。</p><h1 id="926d" class="ki kj ht bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">列出扩展名</h1><p id="98b4" class="pw-post-body-paragraph iq ir ht is b it lg iv iw ix lh iz ja jb li jd je jf lj jh ji jj lk jl jm jn hb bi translated">列出项目中已安装的扩展。</p><pre class="jp jq jr js fd lm ln lo lp aw lq bi"><span id="dbbb" class="lr kj ht ln b fi ls lt l lu lv">$ quarkus ext ls</span></pre><h1 id="befd" class="ki kj ht bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">搜索扩展</h1><p id="fea7" class="pw-post-body-paragraph iq ir ht is b it lg iv iw ix lh iz ja jb li jd je jf lj jh ji jj lk jl jm jn hb bi translated">使用<code class="du ly lz ma ln b">--installable</code>或<code class="du ly lz ma ln b">-i</code>选项列出可以从项目使用的Quarkus平台安装的扩展。</p><p id="5c86" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">使用搜索(<code class="du ly lz ma ln b">--search</code>或<code class="du ly lz ma ln b">-s</code>)可以缩小或过滤搜索范围。</p><pre class="jp jq jr js fd lm ln lo lp aw lq bi"><span id="91e0" class="lr kj ht ln b fi ls lt l lu lv">$ quarkus ext list --concise -i -s jdbc</span><span id="ee0f" class="lr kj ht ln b fi mq lt l lu lv">JDBC Driver - DB2                                  quarkus-jdbc-db2<br/>JDBC Driver - PostgreSQL                           quarkus-jdbc-postgresql<br/>JDBC Driver - H2                                   quarkus-jdbc-h2<br/>JDBC Driver - MariaDB                              quarkus-jdbc-mariadb<br/>JDBC Driver - Microsoft SQL Server                 quarkus-jdbc-mssql<br/>JDBC Driver - MySQL                                quarkus-jdbc-mysql<br/>JDBC Driver - Oracle                               quarkus-jdbc-oracle<br/>JDBC Driver - Derby                                quarkus-jdbc-derby<br/>Elytron Security JDBC                              quarkus-elytron-security-jdbc<br/>Agroal - Database connection pool                  quarkus-agroal</span></pre><h1 id="6412" class="ki kj ht bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">添加扩展</h1><p id="11fc" class="pw-post-body-paragraph iq ir ht is b it lg iv iw ix lh iz ja jb li jd je jf lj jh ji jj lk jl jm jn hb bi translated">Quarkus CLI可以使用'<em class="mr"> add </em>'命令为您的项目添加一个或多个Quarkus扩展:</p><pre class="jp jq jr js fd lm ln lo lp aw lq bi"><span id="8ef6" class="lr kj ht ln b fi ls lt l lu lv">$ quarkus ext add kubernetes health<br/>[SUCCESS] ✅ Extension io.quarkus:quarkus-kubernetes has been installed<br/>[SUCCESS] ✅ Extension io.quarkus:quarkus-smallrye-health has been installed</span></pre><h1 id="7f50" class="ki kj ht bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">删除扩展</h1><p id="6de9" class="pw-post-body-paragraph iq ir ht is b it lg iv iw ix lh iz ja jb li jd je jf lj jh ji jj lk jl jm jn hb bi translated">Quarkus CLI可以使用'<em class="mr"> remove </em>'命令从您的项目中删除一个或多个扩展:</p><pre class="jp jq jr js fd lm ln lo lp aw lq bi"><span id="c129" class="lr kj ht ln b fi ls lt l lu lv">$ quarkus ext rm kubernetes<br/>[SUCCESS] ✅ Extension io.quarkus:quarkus-kubernetes has been uninstalled</span></pre><h1 id="3645" class="ki kj ht bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">构建您的项目</h1><p id="5b65" class="pw-post-body-paragraph iq ir ht is b it lg iv iw ix lh iz ja jb li jd je jf lj jh ji jj lk jl jm jn hb bi translated">要使用Quarkus CLI构建您的项目(在本例中使用默认配置):</p><pre class="jp jq jr js fd lm ln lo lp aw lq bi"><span id="7772" class="lr kj ht ln b fi ls lt l lu lv">$ quarkus build</span></pre><h1 id="6066" class="ki kj ht bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">使用CLI进入开发模式</h1><pre class="jp jq jr js fd lm ln lo lp aw lq bi"><span id="c930" class="lr kj ht ln b fi ls lt l lu lv">$ quarkus dev --help</span></pre><p id="91be" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要从Quarkus CLI启动开发模式，请执行以下操作:</p><pre class="jp jq jr js fd lm ln lo lp aw lq bi"><span id="86ae" class="lr kj ht ln b fi ls lt l lu lv">$ quarkus dev         <br/>                                                        <br/>[INFO] Scanning for projects...<br/>[INFO]<br/>[INFO] ---------------------&lt; org.acme:code-with-quarkus &gt;---------------------<br/>[INFO] Building code-with-quarkus 1.0.0-SNAPSHOT<br/>[INFO] --------------------------------[ jar ]---------------------------------<br/>[INFO]<br/>...<br/>Listening for transport dt_socket at address: 5005<br/>__  ____  __  _____   ___  __ ____  ______<br/>--/ __ \/ / / / _ | / _ \/ //_/ / / / __/<br/>-/ /_/ / /_/ / __ |/ , _/ ,&lt; / /_/ /\ \<br/>--\___\_\____/_/ |_/_/|_/_/|_|\____/___/<br/>2021-05-27 10:15:56,032 INFO  [io.quarkus] (Quarkus Main Thread) code-with-quarkus 1.0.0-SNAPSHOT on JVM (powered by Quarkus 999-SNAPSHOT) started in 1.387s. Listening on: http://localhost:8080<br/>2021-05-27 10:15:56,035 INFO  [io.quarkus] (Quarkus Main Thread) Profile dev activated. Live Coding activated.<br/>2021-05-27 10:15:56,035 INFO  [io.quarkus] (Quarkus Main Thread) Installed features: [cdi, resteasy, smallrye-context-propagation]</span><span id="46b1" class="lr kj ht ln b fi mq lt l lu lv">--<br/>Tests paused, press [r] to resume</span></pre><p id="51d5" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">有了这些构建工具和特性，开发人员可以更专注于应用程序方面的事情，而无需设置项目框架或数据库的繁琐过程。如果你更喜欢在线向导的方式，他们可以参考这个链接，在这里项目可以被引导到你的GitHub账户。</p><div class="hh hi ez fb hj jt"><a href="https://code.quarkus.io/" rel="noopener  ugc nofollow" target="_blank"><div class="ju ab dw"><div class="jv ab jw cl cj jx"><h2 class="bd hu fi z dy jy ea eb jz ed ef hs bi translated">Quarkus -从code.quarkus.io开始编码</h2><div class="ka l"><h3 class="bd b fi z dy jy ea eb jz ed ef dx translated">编辑描述</h3></div><div class="kb l"><p class="bd b fp z dy jy ea eb jz ed ef dx translated">code.quarkus.io</p></div></div></div></a></div><p id="7d22" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">祝你好运！</p></div></div>    
</body>
</html>