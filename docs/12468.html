<html>
<head>
<title>Should you use singleton objects in Scala?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Scala中应该使用单例对象吗？</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/should-you-use-singleton-objects-in-scala-974f40e64b1?source=collection_archive---------7-----------------------#2022-05-14">https://medium.com/geekculture/should-you-use-singleton-objects-in-scala-974f40e64b1?source=collection_archive---------7-----------------------#2022-05-14</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="94e9" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">理解Scala中的单例对象</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/88a4c1ea812da25a302cd94d1f8a83bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gupu8RARlP86tYq1pWP7oQ.jpeg"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Photo by <a class="ae jn" href="https://unsplash.com/@lunarts?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Volodymyr Hryshchenko</a> on <a class="ae jn" href="https://unsplash.com/s/photos/object?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="12a5" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">嘿，伙计们，周末快乐！</p><p id="05ab" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果你熟悉面向对象编程，你一定熟悉类的概念，它被广泛定义为</p><blockquote class="kk kl km"><p id="e50e" class="jo jp kn jq b jr js ij jt ju jv im jw ko jy jz ka kp kc kd ke kq kg kh ki kj hb bi translated">一个<strong class="jq hj">类</strong>是一个蓝图，它定义了某种类型的所有对象共有的变量和方法。</p></blockquote><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es kr"><img src="../Images/5c5ad06b6de21b34d962671cad583fc5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1156/format:webp/1*JXBENEhC7cfOyrf2AX56cA.jpeg"/></div><figcaption class="jj jk et er es jl jm bd b be z dx">Image by author</figcaption></figure><p id="b0db" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在本文中，我们将讨论scala中一个有趣的类类型——单例对象。此外，如果您不熟悉面向对象编程的详细概念，也不要担心，您会一路了解！</p><h2 id="67e9" class="ks kt hi bd ku kv kw kx ky kz la lb lc jx ld le lf kb lg lh li kf lj lk ll lm bi translated">什么是单例对象？</h2><p id="be3d" class="pw-post-body-paragraph jo jp hi jq b jr ln ij jt ju lo im jw jx lp jz ka kb lq kd ke kf lr kh ki kj hb bi translated">所以，让我们从理解单例对象开始:</p><blockquote class="kk kl km"><p id="ff8d" class="jo jp kn jq b jr js ij jt ju jv im jw ko jy jz ka kp kc kd ke kq kg kh ki kj hb bi translated">singleton <strong class="jq hj">对象</strong>是一个只有一个实例的类。</p></blockquote><p id="27ab" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">现在你一定在想(至少我第一次读的时候是这样的):</p><blockquote class="kk kl km"><p id="6b0e" class="jo jp kn jq b jr js ij jt ju jv im jw ko jy jz ka kp kc kd ke kq kg kh ki kj hb bi translated">等等什么？所以，object是一个类，但是类不应该有object吗？这到底是什么，为什么需要这样的东西？</p></blockquote><p id="4154" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">嗯，是的！这些<strong class="jq hj"> <em class="kn">对象</em> </strong>是一种特殊类型的类，它只有一个实例，可以跨包使用——这意味着这个类中的所有方法和变量都可以跨包访问。(如果您知道静态关键字，您可以在这里关联相同的概念)</p><p id="da40" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">让我们看看单例对象是什么样子的:</p><pre class="iy iz ja jb fd ls lt lu lv aw lw bi"><span id="8ffe" class="ks kt hi lt b fi lx ly l lz ma">// ArticleUtility is a singleton object here</span><span id="13b2" class="ks kt hi lt b fi mb ly l lz ma">object ArticleUtility {<br/>  var <em class="kn">platform </em>= "Medium"<br/>  <br/>  def publish(article: String): Unit = {<br/>    <em class="kn">println</em>(article)<br/>  }<br/>}</span></pre><p id="de57" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这个定义看起来就像你将如何定义一个类(当然，除了关键字difference)，非常简单，对吗？</p><p id="48ed" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这里的单例对象有一个变量和一个方法，现在我可以在任何地方访问这个属性或方法</p><pre class="iy iz ja jb fd ls lt lu lv aw lw bi"><span id="007f" class="ks kt hi lt b fi lx ly l lz ma"><strong class="lt hj">import</strong> ArticleUtility.platform<br/><strong class="lt hj">import</strong> ArticleUtility.publish</span><span id="5011" class="ks kt hi lt b fi mb ly l lz ma">publish("Should you use singleton objects in scala?")</span><span id="64b3" class="ks kt hi lt b fi mb ly l lz ma">println(s"This article will be published on $platform")</span></pre><p id="ac45" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">看，我们能够在不创建任何实例的情况下访问方法和属性。这里要问的问题是，</p><blockquote class="kk kl km"><p id="85a8" class="jo jp kn jq b jr js ij jt ju jv im jw ko jy jz ka kp kc kd ke kq kg kh ki kj hb bi translated">如果它实际上是一个类，它是如何工作的？它什么时候被实例化？</p></blockquote><p id="1ab0" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">答案是——它是在被引用时被延迟创建的。我不会详细说明如何实现，但是知道一个对象如何工作是很好的。</p><p id="52dc" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">那么，定义了单例对象之后，可以使用单例对象的用例有哪些呢？</p><ul class=""><li id="f2e9" class="mf mg hi jq b jr js ju jv jx mh kb mi kf mj kj mk ml mm mn bi translated">scala中的main方法总是写在一个singleton对象中</li><li id="0f30" class="mf mg hi jq b jr mo ju mp jx mq kb mr kf ms kj mk ml mm mn bi translated">适用于常见的实用程序</li><li id="bd7d" class="mf mg hi jq b jr mo ju mp jx mq kb mr kf ms kj mk ml mm mn bi translated">常数</li></ul><p id="21b8" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">上面定义的是对象的一些用例，编写伟大的模块化代码看起来很酷，但是记住——强大的能力意味着巨大的责任！</p><h2 id="9b8c" class="ks kt hi bd ku kv kw kx ky kz la lb lc jx ld le lf kb lg lh li kf lj lk ll lm bi translated">使用单例对象时要注意的事项</h2><p id="04ce" class="pw-post-body-paragraph jo jp hi jq b jr ln ij jt ju lo im jw jx lp jz ka kb lq kd ke kf lr kh ki kj hb bi translated">记住它只有一个实例，所以无论在哪里访问<code class="du mc md me lt b">platform</code>，都将访问同一个变量——这意味着如果您在一个文件中导入并修改<code class="du mc md me lt b">platform</code>,它将在整个模块中被修改。</p><p id="64b6" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">它既有好处也有坏处。好处是，更干净的代码和坏处是，当你开始在泛型方法中使用它们作为全局变量时，我们都知道全局变量有这样一个坏名声！</p></div><div class="ab cl mt mu gp mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="hb hc hd he hf"><p id="ad5b" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">总而言之，单例对象真正支持Scala的面向对象特性。这确实有助于保持代码模块化，但记录它们的工作和行为方式也非常重要。</p><p id="7a54" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">嗯，就是这样。如果你有兴趣阅读更多关于单例对象的内容——下一步是<code class="du mc md me lt b">Companion objects</code></p><p id="85bb" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果你想让我写伴侣对象或者你如何在Scala中使用单例对象，请在评论中告诉我。最后，如果你喜欢这篇文章，请鼓掌表示你的支持</p><p id="2823" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">快乐编码，<br/> JD</p></div></div>    
</body>
</html>