<html>
<head>
<title>React Hooks: useState</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">反应钩子:使用状态</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/react-hooks-usestate-6e548490cbb8?source=collection_archive---------15-----------------------#2021-03-22">https://medium.com/geekculture/react-hooks-usestate-6e548490cbb8?source=collection_archive---------15-----------------------#2021-03-22</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/34f56db36379fe529b11af27e69e6dac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EntHChgUyirgbZ9A3zTxkA.png"/></div></div></figure><p id="960b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我喜欢React钩子，但我知道对于初学者来说，它们可能有点令人困惑。我记得当我第一次开始学习它们的时候，我很难理解它们。钩子让你不用写类就可以使用状态和其他React特性。之所以引入它们，是因为类可能会令人困惑，较大的组件可能会有点难以理解。我要研究的第一个钩子是useState。这允许您在功能组件中使用状态。我们开始吧！</p></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><p id="38cc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为了解释钩子，我将使用一个递增和递减计数器的示例代码。我的启动代码是这样的。</p><figure class="jw jx jy jz fd ij er es paragraph-image"><div class="er es jv"><img src="../Images/bd7d332d2fbad8722b94fb9efff9765e.png" data-original-src="https://miro.medium.com/v2/resize:fit:704/format:webp/1*NOJQoxVnVBQ6rU0CcIJ6DA.png"/></div></figure><p id="22b5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在点击加号或减号按钮不会做任何事情。我们需要实现钩子来允许在我们的功能组件中使用状态。有一点要知道，我们不能在类组件中使用React钩子。另一个需要知道的重要事情是钩子应该总是以相同的顺序运行。这意味着它们不能写在条件语句中。如果你这样做，你会得到一个错误，告诉你一个React钩子会让你知道一个钩子正在被有条件地调用。要使用useState挂钩，我们需要调用useState函数，并传入状态的初始值。useState函数总是返回一个有两个值的数组，所以arr将被去结构化是很常见的。第一个值是状态，你可以选择任何名称。第二个值是setState函数，它允许你更新你的状态。让我们在代码中实现它。</p><figure class="jw jx jy jz fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ka"><img src="../Images/fbec97a737d6e7bbf05499b01a521634.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Lhp0wJgFsa6fKwn8RA6-fQ.png"/></div></div></figure><p id="b735" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为了开始递增和递减计数器，我们必须编写几个函数来更新计数器的状态。然后，我们可以设置这些函数，以便它们在每次单击相应的按钮时运行。这是它的样子。</p><figure class="jw jx jy jz fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kb"><img src="../Images/a9ab63a5b4da864b46ae319938fef131.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ECQU1v4CWOqKstbAevVjbw.png"/></div></div></figure><p id="23dd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">唯一的问题是，这实际上是错误的状态更新方式。我们需要传入一个接受prevState的函数，而不是更新count。就像在类组件中一样，我们可以在函数中传递以前的状态，这样我们就可以正确地更新状态。这是因为我们试图更新以前的状态，以便为当前状态创建一个新值。检查一下，你会发现点击按钮仍然可以正确地改变计数器。这是代码的样子。</p><figure class="jw jx jy jz fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kc"><img src="../Images/c29537e3c49774799077fb65eb73488b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*314ETsTTk4bnuYS2n7XrwA.png"/></div></div></figure><p id="c1ea" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这就是我们的计数器功能。关于钩子要知道的其他一些事情是，设置初始函数可以接受一个函数，这样它将只在组件被渲染时运行一次。这将使您的应用程序运行得更快，这取决于您正在使用哪种状态。钩子最好的一点是，我们可以使用多个useState钩子来管理多个状态。这使得每个状态都更容易管理和更改。</p></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><p id="0a18" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这就是全部使用状态。我花了一段时间去理解它，但是通过练习，它变得更有意义，使用起来也更有趣。下一次我将谈论如何使用其他钩子以及它们的好处，所以请留意我的下一篇文章。现在出去和钩子玩得开心点。大家编码快乐！😎</p></div></div>    
</body>
</html>