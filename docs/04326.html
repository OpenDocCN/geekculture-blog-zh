<html>
<head>
<title>Working with a recent technology, Dialogflow CX — FlowBuilder</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用最新技术dialog flow CX-flow builder</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/working-with-an-almost-new-technology-dialogflow-cx-a368ab64f14d?source=collection_archive---------30-----------------------#2021-06-24">https://medium.com/geekculture/working-with-an-almost-new-technology-dialogflow-cx-a368ab64f14d?source=collection_archive---------30-----------------------#2021-06-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/58ffdcb9378a74feb94a5f0a9a64ac34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/1*STUHV-PX-h2OJk_Ic1Ne9Q.png"/></div></figure><p id="39b2" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我们在FlowBuilder项目中与AtomChat合作，这是一个图形界面，用于以简单易行的方式为希望与客户进行自动化通信的企业和个人创建聊天机器人，我们创建了一个名为Ternary Devs的团队，其成员是亚历杭德罗·弗朗哥、埃斯特万·卡斯塔诺和胡安·巴布罗·蒙托亚(我本人)。</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div class="er es jk"><img src="../Images/1bd454a462bc976d2e81632541925c93.png" data-original-src="https://miro.medium.com/v2/resize:fit:300/format:webp/1*BnY72fPIkrORCZsoYtgIXA.png"/></div></figure><p id="f066" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我们选择这个项目是因为它是相当具有挑战性的东西，新技术，当我们来自Python时与Typescript一起工作，完全与Dialogflow API一起工作，并将其与一个简单直观的应用程序集成在一起，我们没有失望，这是一次疯狂的尝试。</p><p id="2bfc" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在开发之初，我们被分配了一些技术，包括前端<strong class="io hj">角度</strong>和<strong class="io hj">打字稿</strong>。对于后端的<strong class="io hj"> Node.js </strong>、<strong class="io hj"> Express.js </strong>、<strong class="io hj"> Google Cloud Functions </strong>、<strong class="io hj"> Firestore </strong>和<strong class="io hj"> Dialogflow ES </strong>，最后一个是Google的技术，允许用NLP技术创建代理并允许与真人对话，它已经上市5年或更长时间了，但我们决定使用<a class="ae jp" href="https://cloud.google.com/dialogflow/cx/docs/basics" rel="noopener ugc nofollow" target="_blank"> <strong class="io hj"> Dialogflow CX </strong> </a>，这是一个</p><p id="e6ec" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我负责后端，简而言之就是一个API，以及与<strong class="io hj"> Dialogflow CX </strong>和<strong class="io hj"> Firestore </strong>的连接。最开始的开发是研究工具，<strong class="io hj"> TypeScript </strong>，<strong class="io hj"> Node.js </strong>和<strong class="io hj"> Express.js </strong>是第一批，然后我继续用<strong class="io hj"> Dialogflow CX </strong>找到了<a class="ae jp" href="https://googleapis.dev/nodejs/dialogflow-cx/latest/index.html" rel="noopener ugc nofollow" target="_blank"> <strong class="io hj">客户端库</strong> </a>，以及它与Node.js的轻松集成，从那里我开始意识到SDK文档(客户端库)不是很完整，最好去</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es jq"><img src="../Images/ba832c34868d994a88ab4e5e384b40e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tgfJUqil7qVCCAa-1Zi2fA.png"/></div></div></figure><p id="3b67" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我开始创建端点来创建页面(<em class="jv">页面本质上是与机器人对话的状态，页面可以有路径，如果用户说了它理解的东西或它不理解的东西</em>)和意图(<em class="jv">意图是机器人试图理解的关于用户输入的东西， 它可以有即时响应，也可以生成动态响应</em>，但是后来我意识到以这种方式创建它不会很有用，所以我决定改变创建流的策略。</p><p id="959a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我们最终为将要发送的数据创建了一个新的结构，这是一个发送到API的示例，它包含了我们在前端管理的所有元素:<strong class="io hj">开始</strong>，<strong class="io hj">问题</strong>，<strong class="io hj">消息</strong>和<strong class="io hj">结束</strong>:</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div class="er es jw"><img src="../Images/3c54c9e4789961f6eb3e0fbe343b51ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1362/format:webp/1*yE4CplhNAiOG98iFRdRJ1g.png"/></div></figure></div><div class="ab cl jx jy gp jz" role="separator"><span class="ka bw bk kb kc kd"/><span class="ka bw bk kb kc kd"/><span class="ka bw bk kb kc"/></div><div class="hb hc hd he hf"><p id="0935" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">基于设计的数据结构，我创建了一个接收流内容的端点，并在他们的SDK的帮助下在<strong class="io hj"> Dialogflow CX </strong>中创建它。</p><p id="828c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">由于我们需要元素的id来连接它们，我首先创建了数据结构中传递的所有元素，然后通过已经有了它们各自的id来连接所有的元素(<em class="jv">类似于单个</em> <a class="ae jp" href="https://en.wikipedia.org/wiki/Linked_list#:~:text=In%20computer%20science%2C%20a%20linked,which%20together%20represent%20a%20sequence." rel="noopener ugc nofollow" target="_blank"> <strong class="io hj"> <em class="jv">链表</em> </strong> </a> <em class="jv">，但是所有节点都是在链接它们之前创建的</em>)，流程是如何创建的示例:</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div class="er es ke"><img src="../Images/8590fecbf2f081078713606449bfd5e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*9Obsn9M_ajdevKANHO6yAQ.gif"/></div></figure><p id="bcb3" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">到目前为止，所有的开发都进行得很顺利，我不需要在任何不是官方文档的地方搜索，直到我找到了有问题的'<strong class="io hj">起始页</strong>'，"<em class="jv">什么是'</em> <strong class="io hj"> <em class="jv">起始页</em> </strong> <em class="jv">'？</em>“你可能会问，嗯，这是创建代理时默认创建的内置页面，问题是每当你想编辑此页面的连接(<em class="jv">链接</em>)时<strong class="io hj">对话流CX </strong>会抛出一个错误，说该页面不存在，当试图更有力地编辑它时，它会说我不允许编辑它。</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es kf"><img src="../Images/302a1b7d6e06b222582607b7d550bb6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_2ip8R6z-EMpB-iPb5nYDw.png"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx">My perspective of the Start Page</figcaption></figure><p id="eb33" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这真的是一个大问题，我在后面连接了这个大流量，但是如果我不能将它与起始页链接起来，就好像什么都没发生一样。</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es kf"><img src="../Images/057ceeca5bda904440df6c78904f1005.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pp1F0l3TcmyKPKHDlnWwkQ.png"/></div></div></figure><p id="6936" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">当这种事情发生时，你首先想到的是查看官方文件，对吗？官方文档中对起始页的唯一引用是告诉我们它的ID是什么，也就是“START_PAGE ”,并不是很有用。<br/>那还有什么？堆栈溢出就是答案！但是…</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es kk"><img src="../Images/0abfa4dc67f4feefa8f2f10690097a56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8-5idMqhSNiL4NH9IuW8HA.png"/></div></div></figure><p id="c2c1" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">就是这么多问题贴上了【dialogflow-cx】，<strong class="io hj"> 99 </strong>！(<em class="jv">和计数</em>)，为了比较，让我们看看Dialogflow ES有多少个问题，它的前身</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es kl"><img src="../Images/2ff835c147adcf31f1c035450435fef1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JZclKTkR5iROgGnbSxjQzw.png"/></div></div></figure><p id="0c82" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">5282</strong>！挺大的吧？这就是问题所在，我在<strong class="io hj"> CX </strong>找不到任何关于我具体问题的问题，所以我做了什么？当然，<strong class="io hj">问</strong>！这是我的<a class="ae jp" href="https://stackoverflow.com/questions/67958275/how-to-get-the-default-start-page-with-dialogflow-cx-api-and-edit-its-default-ro" rel="noopener ugc nofollow" target="_blank">问题</a>，已经被看了95+次，和<strong class="io hj"> Stackoverflow </strong>这一节几乎每个问题一样没有答案。你可以说，“<em class="jv">你为什么不去别的地方问问？</em>“嗯，我在<strong class="io hj"> Slack </strong>做了一个关于CX的<strong class="io hj"> Google group </strong>，甚至还有一个关于CX 问题的<strong class="io hj"> Google Form。</strong></p><p id="ea5d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在这一切之后，我决定继续，我唯一的解决方案，手动操作<strong class="io hj"/>，进入Dialogflow CX并连接它，这就是我一直工作的方式，直到我解决我的问题</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es kf"><img src="../Images/9dcb44877159d8da7ea664c97e02e9d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7tatdyAGFhvJXJz86l9cSw.png"/></div></div></figure><p id="4e7d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">手动就是这么做的。</p><h1 id="983d" class="km kn hi bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated"><strong class="ak">结论:</strong></h1><p id="0fa5" class="pw-post-body-paragraph im in hi io b ip lk ir is it ll iv iw ix lm iz ja jb ln jd je jf lo jh ji jj hb bi translated">我真的，真的，真的学到了很多东西，一些我起初甚至没有想到的东西在某些时候变得很重要，比如项目结构，代码可读性，最佳实践，那些可能没有像我这样的初学者首先会看的东西。这些技术令人惊叹。</p><p id="6841" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">-与Firestore合作令人惊叹，它使存储一切变得如此简单和易于管理。起初Typescript是我的敌人，但后来我开始意识到它更像是父母，它通过预先给我错误来防止我在运行时出错。云功能没什么好担心的，因为谷歌会为你处理所有的服务器管理，我只需要部署代码就行了。<br/> -显然Dialogflow CX非常喜欢这项技术，并且不得不问自己一些以前从未被质疑过的问题，因为这真的很新，理解这些库并使用给定的工具设计自己的解决方案感觉真好。</p><p id="f517" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">毕竟，我要感谢<strong class="io hj">三元开发者</strong>，我的团队<strong class="io hj"> AtomChat </strong>，以及一位伟大的导师<a class="ae jp" href="https://www.linkedin.com/in/jackzeel-zadir-garcia-vallecillo-0763bb145/" rel="noopener ugc nofollow" target="_blank"> <strong class="io hj"> Jackzeel </strong> </a>，他们在整个过程中帮助了我们很多，并让我们理解了所有这些技术。</p><p id="463d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">简单介绍一下我:<br/> </strong>我是一个喜欢用技术和游戏把人们聚集在一起的人，我的<a class="ae jp" href="https://github.com/jumoc" rel="noopener ugc nofollow" target="_blank"> <strong class="io hj"> Github </strong> </a>，<a class="ae jp" href="https://twitter.com/Jumoc0" rel="noopener ugc nofollow" target="_blank"> <strong class="io hj"> Twitter </strong> </a>，以及<a class="ae jp" href="https://www.linkedin.com/in/jumoc/" rel="noopener ugc nofollow" target="_blank"><strong class="io hj">Linkedin</strong></a><br/>项目的<a class="ae jp" href="https://atomchat-flowbuilder.netlify.app/" rel="noopener ugc nofollow" target="_blank"> <strong class="io hj">页面</strong> </a></p></div></div>    
</body>
</html>