<html>
<head>
<title>Serverless Calendar Notifications via SMS with Postman and Twilio</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Postman和Twilio通过短信发送无服务器日历通知</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/serverless-calendar-notifications-via-sms-with-postman-and-twilio-f3bd3b4821a1?source=collection_archive---------71-----------------------#2021-06-21">https://medium.com/geekculture/serverless-calendar-notifications-via-sms-with-postman-and-twilio-f3bd3b4821a1?source=collection_archive---------71-----------------------#2021-06-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="dba0" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">调度cron作业而不部署代码的最简单方法</h2></div><p id="5c33" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我喜欢吃新鲜水果，但是我从来不知道什么是时令水果，直到我去了当地的杂货店。想象一下当我发现<a class="ae jt" href="https://nationaltoday.com/fruit-holidays/" rel="noopener ugc nofollow" target="_blank">全国水果节</a>时我有多高兴！是的，在我的国家，这可能是一个营销噱头，但它也可以提醒我什么是当季的。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es ju"><img src="../Images/ffd87f9e4b36f1160fad8b7fb5dc3a7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CWy7bIlyQDRhHq4q4q8Ekw.jpeg"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx">Photo by <a class="ae jt" href="https://unsplash.com/@thekatiemchase?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Katherine Chase</a> on <a class="ae jt" href="https://unsplash.com/s/photos/fruit?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="95d1" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">本教程向您展示了如何设置自定义日历通知。即使你不关心水果，学习如何使用邮递员监视器在某个日期触发通知，这样你就不会错过任何特殊事件。在本教程中，我们将执行以下操作:</p><ul class=""><li id="54b7" class="kk kl hi iz b ja jb jd je jg km jk kn jo ko js kp kq kr ks bi translated">建立一个邮递员集合</li><li id="04a1" class="kk kl hi iz b ja kt jd ku jg kv jk kw jo kx js kp kq kr ks bi translated">添加数据存储的示例响应</li><li id="a1d8" class="kk kl hi iz b ja kt jd ku jg kv jk kw jo kx js kp kq kr ks bi translated">模仿邮递员服务器上的API</li><li id="033c" class="kk kl hi iz b ja kt jd ku jg kv jk kw jo kx js kp kq kr ks bi translated">使用Twilio设置短信通知</li><li id="1557" class="kk kl hi iz b ja kt jd ku jg kv jk kw jo kx js kp kq kr ks bi translated">在Postman中本地运行收集</li><li id="d2cb" class="kk kl hi iz b ja kt jd ku jg kv jk kw jo kx js kp kq kr ks bi translated">安排一个监视器在邮递员服务器上运行</li></ul><h1 id="b57e" class="ky kz hi bd la lb lc ld le lf lg lh li io lj ip lk ir ll is lm iu ln iv lo lp bi translated">教程要求</h1><ul class=""><li id="817b" class="kk kl hi iz b ja lq jd lr jg ls jk lt jo lu js kp kq kr ks bi translated">接收短信通知的个人电话号码</li><li id="304e" class="kk kl hi iz b ja kt jd ku jg kv jk kw jo kx js kp kq kr ks bi translated">一个免费的<a class="ae jt" href="http://www.twilio.com/referral/geBKT7" rel="noopener ugc nofollow" target="_blank"> Twilio账户</a>和一个<a class="ae jt" href="https://www.twilio.com/user/account/phone-numbers/incoming" rel="noopener ugc nofollow" target="_blank"> Twilio电话号码</a>来发送短信通知</li><li id="e167" class="kk kl hi iz b ja kt jd ku jg kv jk kw jo kx js kp kq kr ks bi translated">一个免费的<a class="ae jt" href="https://www.postman.com/downloads/" rel="noopener ugc nofollow" target="_blank">邮差账户</a>存储你的数据并触发通知</li></ul><p id="b89f" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">要在web浏览器中使用Postman，就像我们在开发过程中在本例中所做的那样，系统会提示您在本地计算机上下载并运行Postman代理，以克服跨源资源共享(CORS)的限制。代理和app不一样。在Mac上，您会在电脑屏幕右上角的状态菜单中看到正在运行的邮递员代理的图标。在Windows计算机上，Postman agent图标显示在计算机屏幕右下角的系统托盘中。</p><p id="4392" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果您不想在web浏览器中使用Postman和代理，您可以下载并安装用于Mac、Windows或Linux的<a class="ae jt" href="https://www.postman.com/downloads/" rel="noopener ugc nofollow" target="_blank"> Postman应用程序</a>。</p><h1 id="d269" class="ky kz hi bd la lb lc ld le lf lg lh li io lj ip lk ir ll is lm iu ln iv lo lp bi translated">建立一个邮递员集合</h1><p id="3213" class="pw-post-body-paragraph ix iy hi iz b ja lq ij jc jd lr im jf jg lv ji jj jk lw jm jn jo lx jq jr js hb bi translated">登录邮递员。在左上角，创建一个新的个人工作区来存放您的工作。然后选择左侧的<strong class="iz hj">收藏库</strong>选项卡，创建一个新收藏库。</p><p id="1757" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">向集合中添加两个名为<code class="du ly lz ma mb b">Check calendar</code>和<code class="du ly lz ma mb b">Send SMS notification</code>的请求。我们将在稍后完成这些请求的细节。第一个请求将检查重要事件。第二个请求将从您的Twilio电话号码向您的个人电话号码发送短信。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es mc"><img src="../Images/425ce19c875f93efa79b26e73657fb3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ChLg4jvobExGDXWA.png"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx">Create a Postman collection with placeholders for two API calls</figcaption></figure><h1 id="90e0" class="ky kz hi bd la lb lc ld le lf lg lh li io lj ip lk ir ll is lm iu ln iv lo lp bi translated">添加数据存储的示例响应</h1><p id="7bcd" class="pw-post-body-paragraph ix iy hi iz b ja lq ij jc jd lr im jf jg lv ji jj jk lw jm jn jo lx jq jr js hb bi translated">为了存储像日期列表这样简单的东西，我们可以使用模拟API服务器来返回静态数据，而不是使用成熟的API与数据库对话。让我们通过描述一个示例来模拟Postman服务器上的数据，该示例概述了我们希望从模拟服务器返回的数据。换句话说，对于类似这样的API请求，我们会期待类似这样的响应。</p><p id="faed" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">虽然我们不需要将模拟数据直接添加到我们的集合中，但将它放在附近可以方便地查看和更新。所以在第一个请求<code class="du ly lz ma mb b">Check calendar</code>下，进入溢出菜单(...)，并选择“添加示例”。</p><p id="6908" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">对于示例请求，保留HTTP方法为<code class="du ly lz ma mb b">GET</code>，输入<code class="du ly lz ma mb b">{{url}}/fruits</code>作为地址。对于示例响应，输入<code class="du ly lz ma mb b">200 OK</code>作为HTTP状态代码，主体可以是<code class="du ly lz ma mb b">JSON</code>，结构类似于对象数组，如下所示:</p><pre class="jv jw jx jy fd md mb me mf aw mg bi"><span id="4b07" class="mh kz hi mb b fi mi mj l mk ml">[<br/>   {<br/>       "event": "National Chocolate Covered Cherry Day",<br/>       "date": "January 3",<br/>       "message": "cherry"<br/>   },<br/>   {<br/>       "event": "National Strawberry Day",<br/>       "date": "February 27",<br/>       "message": "strawberry"<br/>   },<br/>   {<br/>       "event": "National Peach Cobbler Day",<br/>       "date": "April 13",<br/>       "message": "peach"<br/>   }<br/>]</span></pre><p id="44bc" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">切换到示例中的响应<strong class="iz hj">标题</strong>，并添加一个值为<code class="du ly lz ma mb b">application/json</code>的键<code class="du ly lz ma mb b">Content-Type</code>。确保将这个标题添加到底部的响应，而不是顶部的请求。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es mc"><img src="../Images/3c00444568b7ac45dfac1563535c9ef2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*y-LCfKmwc0OTmegV.png"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx">Mock endpoint returns example data</figcaption></figure><p id="a4fb" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">当您对模拟的数据感到满意时，保存示例。您将会看到在第一个请求下面列为“例如”的示例。这个例子是我们将在下一步创建的模拟API的基础。</p><h1 id="61bc" class="ky kz hi bd la lb lc ld le lf lg lh li io lj ip lk ir ll is lm iu ln iv lo lp bi translated">模仿邮递员服务器上的API</h1><p id="40f4" class="pw-post-body-paragraph ix iy hi iz b ja lq ij jc jd lr im jf jg lv ji jj jk lw jm jn jo lx jq jr js hb bi translated">由于在上一步中我们将示例添加到了集合中，所以我们也必须将模拟服务器添加到这个集合中。进入收藏的溢出菜单(…)，选择“模拟收藏”。给你的模拟一个名字。您可以取消选中“将模拟服务器URL保存为环境变量”,因为我们没有使用环境。点击<strong class="iz hj">创建模拟服务器</strong>按钮，确认您的配置选项。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es mc"><img src="../Images/02d983e89bde5959444f0a68b93c63ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ryk85tT6t0Z0f6k7.png"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx">Create a mock server using an example saved to the collection</figcaption></figure><p id="ce1f" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">一旦创建了一个模拟，复制Postman提供的模拟URL并返回到您的集合中第一个名为<code class="du ly lz ma mb b">Check calendar</code>的请求。输入模拟URL作为请求地址。根据您在上一步中保存的示例请求路径，记得将<code class="du ly lz ma mb b">/fruits</code>附加到您的模拟URL的末尾。然后点击<strong class="iz hj">发送</strong>按钮，在回复正文中查看您的嘲笑数据。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es mc"><img src="../Images/1b7b52320db8d2dbbed07b3166840619.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*I6U4ju1I2ImiHVZq.png"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx">Use Postman mock server to return example data</figcaption></figure><h1 id="3331" class="ky kz hi bd la lb lc ld le lf lg lh li io lj ip lk ir ll is lm iu ln iv lo lp bi translated">在Postman中编写一个条件触发器</h1><p id="cd8d" class="pw-post-body-paragraph ix iy hi iz b ja lq ij jc jd lr im jf jg lv ji jj jk lw jm jn jo lx jq jr js hb bi translated">在Postman中，您可以分别在<strong class="iz hj">预请求脚本</strong>和<strong class="iz hj">测试</strong>选项卡下编写在API调用之前或之后运行的JavaScript。运行整个集合时，这些选项卡是控制工作流程的好地方。例如，我们只想在有事件发生时收到短信通知。如果没有事件，那么我们就不会被打扰。</p><p id="74b9" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为此，Postman提供了一个<code class="du ly lz ma mb b"><a class="ae jt" href="https://learning.postman.com/docs/writing-scripts/script-references/postman-sandbox-api-reference/" rel="noopener ugc nofollow" target="_blank">pm.*</a></code> API，可以在<strong class="iz hj"> Tests </strong>选项卡下的脚本中使用，以访问响应中返回的数据，如<code class="du ly lz ma mb b">pm.response.json()</code>。您还可以使用内置函数<code class="du ly lz ma mb b"><a class="ae jt" href="https://learning.postman.com/docs/running-collections/building-workflows/" rel="noopener ugc nofollow" target="_blank">postman.setNextRequest()</a></code>来覆盖集合的瀑布执行顺序。</p><p id="fb4b" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在<code class="du ly lz ma mb b">Check calendar</code>请求的<strong class="iz hj">测试</strong>选项卡下，添加下面的代码，以便在我们检索日历数据后运行。</p><pre class="jv jw jx jy fd md mb me mf aw mg bi"><span id="102c" class="mh kz hi mb b fi mi mj l mk ml">// use moment.js to format today's date<br/>const moment = require('moment')<br/>let today = moment().format('MMMM DD')<br/><br/>// parse the mock data response to see if today is a special event<br/>let calendar = pm.response.json()<br/>let eventToday = calendar.filter(event =&gt; { return event.date === today })<br/>if (eventToday.length &gt; 0) {<br/>  console.log('Special Event detected - send the next request')<br/>  pm.collectionVariables.set("event", eventToday[0].event)<br/>  pm.collectionVariables.set("message", eventToday[0].message)<br/>  postman.setNextRequest("Send SMS notification")<br/>} else {<br/>  console.log('No Special Events - terminate the collection run')<br/>  postman.setNextRequest(null)<br/>}</span></pre><p id="40b1" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果当前日期是一个重要的日期，那么我们将存储一些数据传递给集合中的下一个调用。如果没有，我们将立即停止收集运行。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es mc"><img src="../Images/70f1562297651d562df78d9dbf530696.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*FmvU9AuZ_r1l22B0.png"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx">Add conditional statement under the Tests tab</figcaption></figure><h1 id="ee35" class="ky kz hi bd la lb lc ld le lf lg lh li io lj ip lk ir ll is lm iu ln iv lo lp bi translated">为Twilio设置短信通知</h1><p id="cab8" class="pw-post-body-paragraph ix iy hi iz b ja lq ij jc jd lr im jf jg lv ji jj jk lw jm jn jo lx jq jr js hb bi translated">要设置API调用来发送我们的SMS通知，我们首先需要Twilio凭证来授权请求。通过登录到<a class="ae jt" href="https://twilio.com/console" rel="noopener ugc nofollow" target="_blank"> Twilio控制台</a>找到您的Twilio帐户SID和身份验证令牌。然后点击侧边栏中的<a class="ae jt" href="https://www.twilio.com/console/project/settings" rel="noopener ugc nofollow" target="_blank">设置</a>，向下滚动到“API凭证”。您还需要您的<a class="ae jt" href="https://www.twilio.com/console/phone-numbers/incoming" rel="noopener ugc nofollow" target="_blank"> Twilio电话号码</a>来发送短信。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es mc"><img src="../Images/cecc6dde95af4011ccdad2a9e53898d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Cdo91DrZG_33wIp3.png"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx">Find Twilio Account SID and Auth Token under “Settings”</figcaption></figure><p id="ba1c" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">因为我们在Postman中只处理单个集合，所以让我们将变量存储在集合范围内。如果您想将这些凭证用于一堆其他的Postman集合，您可以使用一个<a class="ae jt" href="https://learning.postman.com/docs/sending-requests/managing-environments/" rel="noopener ugc nofollow" target="_blank"> Postman环境</a>来代替。在Postman中，单击集合名称以查看集合详细信息。选择<strong class="iz hj">变量</strong>选项卡输入以下变量，并保存您的更改。</p><pre class="jv jw jx jy fd md mb me mf aw mg bi"><span id="74d0" class="mh kz hi mb b fi mi mj l mk ml">TWILIO_ACCOUNT_SID=&lt;your-account-sid&gt;<br/>TWILIO_AUTH_TOKEN=&lt;your-auth-token&gt;<br/>TWILIO_PHONE_NUMBER=&lt;your-twilio-phone-number&gt;<br/>MY_PHONE_NUMBER=&lt;your-personal-phone-number&gt;</span></pre><blockquote class="mm mn mo"><p id="544c" class="ix iy mp iz b ja jb ij jc jd je im jf mq jh ji jj mr jl jm jn ms jp jq jr js hb bi translated"><strong class="iz hj"> <em class="hi">安全提示</em> </strong> <em class="hi">:如果您在Postman的团队或公共工作区中工作，并且您不想共享您的凭据，请确保您在“当前值”列下输入的值不是“初始值”，如下图所示。</em></p></blockquote><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es mc"><img src="../Images/4b4d323d7e146d0c061e52602b5c268e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*OgUP4mJtXGXIvyD0.png"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx">Enter Postman collection variables as CURRENT VALUE</figcaption></figure><p id="672c" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">找到第二个叫<code class="du ly lz ma mb b">Send SMS notification</code>的请求。将HTTP方法更新为<code class="du ly lz ma mb b">POST</code>，输入下面的请求地址。</p><pre class="jv jw jx jy fd md mb me mf aw mg bi"><span id="7561" class="mh kz hi mb b fi mi mj l mk ml">https://api.twilio.com/2010-04-01/Accounts/{{TWILIO_ACCOUNT_SID}}/Messages.json</span></pre><p id="bea6" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们使用双花括号在Postman的文本字段中获取变量。将鼠标悬停在请求地址中的<code class="du ly lz ma mb b">{{TWILIO_ACCOUNT_SID}}</code>上，查看Postman如何解析该变量。</p><p id="3ec0" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在<strong class="iz hj">授权</strong>选项卡下，选择“基本授权”类型。输入<code class="du ly lz ma mb b">{{TWILIO_ACCOUNT_SID}}</code>作为“用户名”，输入<code class="du ly lz ma mb b">{{TWILIO_AUTH_TOKEN}}</code>作为“密码”。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es mc"><img src="../Images/4557639c2355da9f4220680394149709.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*8HCkOka6gTD9UTSM.png"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx">Authorization using Basic Auth type helper</figcaption></figure><p id="5afd" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果您在<strong class="iz hj"> Headers </strong>选项卡下查看，您可以看到Postman如何基于您输入的信息生成适当的<code class="du ly lz ma mb b">Authorization</code>标头。</p><p id="7df0" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在<strong class="iz hj">正文</strong>选项卡下，配置短信详情。选择“x-www-form-urlencoded”，添加<code class="du ly lz ma mb b">From</code>、<code class="du ly lz ma mb b">To</code>和<code class="du ly lz ma mb b">Body</code>参数。短信息会从您的Twilio电话号码发送到您的个人电话号码，并包含要包含在短信息中的信息。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es mc"><img src="../Images/99009ea09b1a4c3ae6b254d5991904f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*-jyt4xYVzdSNEHcD.png"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx">Configure the SMS details in the request body</figcaption></figure><p id="4dec" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们的大多数变量，像<code class="du ly lz ma mb b">TWILIO__PHONE_NUMBER</code>和<code class="du ly lz ma mb b">MY_PHONE_NUMBER</code>，都是手动输入到Postman中的。但是，如果有特殊事件，事件和消息将在前面的<code class="du ly lz ma mb b">Check calendar</code>请求中动态设置。让我们在下一步中验证我们的代码是否正常工作。</p><h1 id="111a" class="ky kz hi bd la lb lc ld le lf lg lh li io lj ip lk ir ll is lm iu ln iv lo lp bi translated">在Postman中本地运行收集</h1><p id="30e8" class="pw-post-body-paragraph ix iy hi iz b ja lq ij jc jd lr im jf jg lv ji jj jk lw jm jn jo lx jq jr js hb bi translated">如果今天没有事件发生，通过编辑Postman示例(在“例如”下)来更新模拟数据。添加带有今天日期的虚拟事件，并保存您的更改。</p><p id="0bde" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们一步一步地完成每个呼叫，一次一个。发送第一个请求<code class="du ly lz ma mb b">Check calendar</code>，并验证集合变量event和message是否已设置。您可以通过检查集合变量编辑器或将鼠标悬停在第二个请求中的那些变量上来实现这一点。</p><p id="6f55" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">发送第二个请求<code class="du ly lz ma mb b">Send SMS notification</code>，并验证SMS中是否发送了正确的事件和消息。你可以通过检查你的手机或者检查左下角的邮递员控制台来做到这一点。</p><p id="dc40" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">一旦您对预期的变量设置和获取感到满意，单击右下角的<strong class="iz hj"> Runner </strong>图标。将收藏拖到新标签中，然后点击<strong class="iz hj">运行</strong>按钮运行全部收藏。这两个请求都应该运行。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es mc"><img src="../Images/48df4c62828e06ccd24d2c4ccce5a33d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*i8zC6ZKayfm2PsfY.png"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx">Run the collection to execute all API requests</figcaption></figure><p id="061c" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们最后的检查是，如果没有特殊事件发生，我们不会发送短信。再次编辑您的示例(在“例如”下)以移除虚拟事件并保存您的更改。使用<strong class="iz hj"> Runner </strong>再次运行您的收集，以确保只运行第一个请求。</p><p id="722e" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">既然我们确信我们的代码正在工作，那么让我们在下一步中安排每天从Postman服务器运行收集。</p><h1 id="c684" class="ky kz hi bd la lb lc ld le lf lg lh li io lj ip lk ir ll is lm iu ln iv lo lp bi translated">安排一个监视器在邮递员服务器上运行</h1><p id="8aa0" class="pw-post-body-paragraph ix iy hi iz b ja lq ij jc jd lr im jf jg lv ji jj jk lw jm jn jo lx jq jr js hb bi translated">Postman monitor是在Postman服务器上调度的收集运行。进入收藏的溢出菜单(…)，然后选择“监控收藏”。给你的显示器起个名字。在“运行此监视器”下，将频率更新为“每周”，这样您就可以“每天”运行收集。确认<strong class="iz hj">创建</strong>。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es mc"><img src="../Images/4799326681eb605a81ec0ded1fbb0563.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Npg_cciuVTTYoxNz.png"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx">Schedule a Postman monitor to run every day</figcaption></figure><p id="59ad" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在左侧的<strong class="iz hj">监视器</strong>选项卡下，您将看到监视器运行的历史记录。邮递员每天都会自动运行这个检查，我会收到特别水果庆典的短信通知。</p><h1 id="6db9" class="ky kz hi bd la lb lc ld le lf lg lh li io lj ip lk ir ll is lm iu ln iv lo lp bi translated">最后</h1><p id="d8cb" class="pw-post-body-paragraph ix iy hi iz b ja lq ij jc jd lr im jf jg lv ji jj jk lw jm jn jo lx jq jr js hb bi translated">创建短信通知很简单，但是有很多方法可以触发它。我之前分享过<a class="ae jt" href="https://www.twilio.com/blog/starlink-satellite-sms-notifications-python-kubernetes-twilio" rel="noopener ugc nofollow" target="_blank">如何在Kubernetes </a>上安排CronJob。安排一个邮递员监视器甚至更容易，并且不需要部署任何代码。<a class="ae jt" href="https://www.postman.com/joyce-jetson/workspace/joycejetson/documentation/1215211-ac8241f4-d2a1-4820-88ea-9e965b91160e" rel="noopener ugc nofollow" target="_blank">分叉本例</a>按照“快速入门”下的步骤快速上手运行。</p><p id="2fba" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">一旦你建立了这个收藏，还有更多可以探索的。</p><ul class=""><li id="2635" class="kk kl hi iz b ja jb jd je jg km jk kn jo ko js kp kq kr ks bi translated"><strong class="iz hj">更新条件触发器:</strong>当你发现你不想错过的新事件时，将其添加到包含你的模仿数据的例子中。或者在第一个请求中创建一个新的条件触发器，比如当你的股票跌破某个价格时发送一个警报。</li><li id="c3c0" class="kk kl hi iz b ja kt jd ku jg kv jk kw jo kx js kp kq kr ks bi translated"><strong class="iz hj">改变通知方式:</strong>如果不喜欢接收短信通知，换出集合中的第二个请求<a class="ae jt" href="https://sendgrid.com/docs/api-reference/" rel="noopener ugc nofollow" target="_blank">发送邮件</a>。或者你可以设计级联通知。Twilio的团队已经发布了<a class="ae jt" href="https://www.postman.com/twilio/workspace/twilio-api/overview" rel="noopener ugc nofollow" target="_blank">邮差合集</a>来帮助你自动化更多的工作流程。</li></ul></div><div class="ab cl mt mu gp mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="hb hc hd he hf"><p id="885d" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="mp">原载于</em><a class="ae jt" href="https://www.twilio.com/blog/serverless-calendar-notifications-sms-postman-twilio" rel="noopener ugc nofollow" target="_blank"><em class="mp"/></a><em class="mp">。</em></p></div></div>    
</body>
</html>