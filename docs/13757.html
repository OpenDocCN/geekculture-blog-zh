<html>
<head>
<title>This Is How To Connect Your Pico W To The Internet And Control It From The Web</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">这就是如何将你的Pico W连接到互联网并从网络上控制它</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/this-is-how-to-connect-your-pico-w-to-the-internet-and-control-it-from-the-web-e24086843c9f?source=collection_archive---------6-----------------------#2022-07-27">https://medium.com/geekculture/this-is-how-to-connect-your-pico-w-to-the-internet-and-control-it-from-the-web-e24086843c9f?source=collection_archive---------6-----------------------#2022-07-27</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="88d8" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">除了Python什么都没有</h2></div><p id="27ed" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我最近制作了一个新视频，展示如何拿着你的<a class="ae jt" href="https://www.raspberrypi.com/news/raspberry-pi-pico-w-your-6-iot-platform/" rel="noopener ugc nofollow" target="_blank">全新Pico W </a>，将它安全地连接到互联网，并从网络界面控制它——所有这些都是用Python和<a class="ae jt" href="https://anvil.works/" rel="noopener ugc nofollow" target="_blank"> Anvil </a>实现的。</p><p id="5e3f" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">看看下面的视频或视频的文字版本。</strong></p><figure class="ju jv jw jx fd jy"><div class="bz dy l di"><div class="jz ka l"/></div><figcaption class="kb kc et er es kd ke bd b be z dx">Video Tutorial Showing How To Connect An Anvil App To A Pico W</figcaption></figure><pre class="ju jv jw jx fd kf kg kh ki aw kj bi"><span id="44c7" class="kk kl hi kg b fi km kn l ko kp"><strong class="kg hj">Want to connect?</strong></span><span id="5efd" class="kk kl hi kg b fi kq kn l ko kp"><a class="ae jt" href="https://codingwithryan.medium.com/" rel="noopener">Follow me for more</a> software development content!</span></pre></div><div class="ab cl kr ks gp kt" role="separator"><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw"/></div><div class="hb hc hd he hf"><h1 id="af53" class="ky kl hi bd kz la lb lc ld le lf lg lh io li ip lj ir lk is ll iu lm iv ln lo bi translated">文本版本</h1><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="er es lp"><img src="../Images/3fb013b73bc7a83f2ae412a11cf0cf8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QTrlaygkDsv8_ZRUUpnWcw.png"/></div></div></figure><p id="c7cd" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">广受欢迎的Raspberry Pi Pico微控制器的下一次发展就在这里。Raspberry Pi Pico W增加了板载wifi，非常适合创建物联网设备。</p><p id="1b58" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在3个步骤中，我将教你如何创建和部署一个简单的web应用程序，这样你就可以学习如何远程控制你的Pico W。</p><p id="41cb" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">该应用程序将是一个简单的在线应用程序，只有一个按钮，使微微闪光的LED。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="er es lw"><img src="../Images/524a1262643514ec5fe44c137add422b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*pQvUBPldQSFdOIQxg6Pv1g.gif"/></div></div></figure></div><div class="ab cl kr ks gp kt" role="separator"><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw"/></div><div class="hb hc hd he hf"><h2 id="9a89" class="kk kl hi bd kz lx ly lz ld ma mb mc lh jg md me lj jk mf mg ll jo mh mi ln mj bi translated">步骤1——创建一个Anvil应用程序来控制我们的Pico</h2><p id="e3c4" class="pw-post-body-paragraph ix iy hi iz b ja mk ij jc jd ml im jf jg mm ji jj jk mn jm jn jo mo jq jr js hb bi translated">我们将使用Anvil构建web应用程序，Anvil是一个只使用Python构建web应用程序的平台。</p><p id="3877" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">第一步，我们将首先创建Anvil应用程序，它将无线控制我们的Pico。我们将去<a class="ae jt" href="https://anvil.works/build" rel="noopener ugc nofollow" target="_blank">anvil.works/build</a>创建一个新的空白应用程序。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="er es lw"><img src="../Images/c983c86b823e7bd901dbb3e0dab974d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*CqQeMnG3rZSh-N2lav84zA.gif"/></div></div><figcaption class="kb kc et er es kd ke bd b be z dx">Creating a new blank app</figcaption></figure><p id="00e8" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">点击编辑器顶部的应用名称，将其更改为“Pico App”。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="er es lw"><img src="../Images/b1454fe8f7dd10cdf69a808701141d25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*fSj5tIuhtjFJ1pqgmSZjsQ.gif"/></div></div><figcaption class="kb kc et er es kd ke bd b be z dx">Renaming the app</figcaption></figure><p id="53c7" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">接下来，让我们启用<a class="ae jt" href="https://anvil.works/docs/uplink" rel="noopener ugc nofollow" target="_blank">上行链路</a>。我们将使用上行链路连接到我们的Pico。</p><p id="671a" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">单击编辑器边栏中的添加功能按钮，并选择上行链路。</p><p id="92cf" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">接下来，我们将单击“启用服务器上行链路”按钮。</p><p id="f112" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">复制上行链路密钥，稍后我们将在Pico上的Python脚本中使用它来建立我们的应用程序和Pico之间的连接。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="er es lw"><img src="../Images/b34e07824d892a4baa8ecfe47154e0ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*poZWU0mo2bQfmutRMpKFZg.gif"/></div></div><figcaption class="kb kc et er es kd ke bd b be z dx">Enabling the Uplink and copying the Uplink key</figcaption></figure><p id="c55d" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，我们的Anvil应用程序中的上行链路已启用，让我们进入第2步，设置我们的Pico。</p></div><div class="ab cl kr ks gp kt" role="separator"><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw"/></div><div class="hb hc hd he hf"><h2 id="bb9b" class="kk kl hi bd kz lx ly lz ld ma mb mc lh jg md me lj jk mf mg ll jo mh mi ln mj bi translated">步骤2 —设置我们的Pico</h2><p id="5717" class="pw-post-body-paragraph ix iy hi iz b ja mk ij jc jd ml im jf jg mm ji jj jk mn jm jn jo mo jq jr js hb bi translated">要设置我们的Pico，我们需要安装砧固件。</p><p id="7c44" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">首先，我们将按住Pico上的BOOTSEL按钮，并将其插入我们的计算机。</p><p id="c62f" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">一旦Pico的驱动器出现在您的计算机上，释放BOOTSEL。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="er es lw"><img src="../Images/9d3cd896ecdd6e05b2acbb16101d50e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*P_2TF9i6j5RbLYlaRzM0pg.gif"/></div></div><figcaption class="kb kc et er es kd ke bd b be z dx">Connecting the Pico to our computer</figcaption></figure><p id="cfe0" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然后，我们将从以下链接下载Anvil的Pico固件文件(pico-w-anvil-v <em class="mp"> &lt;版本号&gt; </em> -complete.uf2):</p><blockquote class="mq mr ms"><p id="ddd4" class="ix iy mp iz b ja jb ij jc jd je im jf mt jh ji jj mu jl jm jn mv jp jq jr js hb bi translated"><a class="ae jt" href="https://github.com/anvil-works/anvil-pico/releases" rel="noopener ugc nofollow" target="_blank">https://github.com/anvil-works/anvil-pico/releases</a></p></blockquote><p id="9249" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">下载完成后，把文件复制到Pico的硬盘上。一旦文件拷贝完毕，我们的Pico就会重启。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="er es lw"><img src="../Images/e9b51442300d2059b6d47c59556d9c51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*p_6qsfijpj_4DCMenwFCwQ.gif"/></div></div><figcaption class="kb kc et er es kd ke bd b be z dx">Adding the `pico-w-anvil-v0.1.2-complete.uf2` firmware file to our pico</figcaption></figure><p id="9aba" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">打开Pico的驱动器，编辑boot.py和main.py文件。</p><p id="6b22" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在boot.py文件中，编辑Wifi连接凭据以匹配您的Wifi网络。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="er es lw"><img src="../Images/80dc91d2539666ef4ab75f4f2012a04b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*ZrNYEMGjo1-pCZHmElS96g.gif"/></div></div><figcaption class="kb kc et er es kd ke bd b be z dx">Editing boot.py and adding our wifi credentials</figcaption></figure><p id="6a09" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然后，在main.py文件中，在导入语句下面，添加我们之前复制的上行链路密钥。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="er es lw"><img src="../Images/6834952197e95d6d7240421705fd3f77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*rFgfMcONfsmyC0TtH_7Mnw.gif"/></div></div><figcaption class="kb kc et er es kd ke bd b be z dx">Adding the Uplink kay to main.py</figcaption></figure><p id="82b9" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">main.py是存储您想在Pico设备上运行的任何函数的地方。</p><p id="cce5" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">默认情况下，Anvil的main.py文件包含一个<code class="du mw mx my kg b">pico_fn</code>函数。这是一个简单的函数，它使Pico上的灯闪烁，并演示了可以将Python对象从Anvil应用程序传递到Pico。</p><p id="9dbc" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><code class="du mw mx my kg b">@anvil.pico.callable</code>装饰器让Anvil应用程序知道这个函数可以从web上调用。<code class="du mw mx my kg b">pico_fn</code>功能是我们将从web应用程序中调用的功能。</p><figure class="ju jv jw jx fd jy"><div class="bz dy l di"><div class="mz ka l"/></div><figcaption class="kb kc et er es kd ke bd b be z dx">The default `pico_fn` function in main.py</figcaption></figure><p id="f716" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">保存boot.py和main.py。</p><p id="3b22" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">通过弹出磁盘并重新连接Pico，重新启动Pico以保存更新。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="er es lw"><img src="../Images/d66afec1a3d84ab8f1ebcc9d7b71ea1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*I_yv9UoVTqN1qeXaJ1P4bA.gif"/></div></div><figcaption class="kb kc et er es kd ke bd b be z dx">Rebooting the Pico W</figcaption></figure><p id="1b06" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">Pico将闪烁几次，表示它已连接到互联网。</p><p id="e641" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们回到我们之前创建的Anvil应用程序</p><h2 id="257b" class="kk kl hi bd kz lx ly lz ld ma mb mc lh jg md me lj jk mf mg ll jo mh mi ln mj bi translated">步骤3—创建用户界面并发布到web</h2><p id="6746" class="pw-post-body-paragraph ix iy hi iz b ja mk ij jc jd ml im jf jg mm ji jj jk mn jm jn jo mo jq jr js hb bi translated">在设计器中，我们将一个按钮拖放到应用程序的表单中。我们将文本更改为“闪灯”，并通过将其角色更改为<code class="du mw mx my kg b">primary-color</code>来设置样式。</p><p id="e1f5" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">接下来，我们将添加一个文本框，并将其类型设置为number。这将让我们的应用程序的用户输入一个数字，并将数据传递给我们的Pico。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="er es lw"><img src="../Images/2828787ab517f917f2e5a4bdee95ac5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*PCpKUZ0kffBNePCPXODThQ.gif"/></div></div><figcaption class="kb kc et er es kd ke bd b be z dx">Adding a Button component and a TextBox component</figcaption></figure><p id="13f0" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">双击设计器中的按钮。这将为我们的客户端代码添加一个函数，每次单击按钮时都会调用这个函数。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="er es lw"><img src="../Images/3c334d5e97b634f67040d2bf2aede771.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*qohTmcYL2BpySkc7AqP7Bg.gif"/></div></div><figcaption class="kb kc et er es kd ke bd b be z dx">Adding a click event function to the button</figcaption></figure><p id="8166" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在函数内部，让我们调用pico的main.py文件中的<code class="du mw mx my kg b">pico_fn</code>函数。</p><p id="7857" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们将把web应用程序的用户输入的数字传递给Pico函数。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="er es lw"><img src="../Images/0e57299c286f828bbf2ed3ae40ea25e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*9pX4rqsA2xKezNHkMJy7cA.gif"/></div></div><figcaption class="kb kc et er es kd ke bd b be z dx">Calling the `pico_fn` function in our click event function</figcaption></figure><figure class="ju jv jw jx fd jy"><div class="bz dy l di"><div class="mz ka l"/></div><figcaption class="kb kc et er es kd ke bd b be z dx">The finished Button click event function</figcaption></figure><p id="c926" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在我们已经对功能进行了分类，我们可以通过单击编辑器右上角的发布按钮来在线部署该应用程序。让我们选择“添加公共URL”并将URL更改为有意义的。</p><p id="9ed0" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果我们导航到我们选择的URL并按下我们的应用程序按钮，Pico上的led将会闪烁。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="er es lw"><img src="../Images/e20050871e3312e678a74b3c46f0cb1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*s2xoja10tw-nELBmTCYAZw.gif"/></div></div></figure><p id="76a5" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">就是这样！现在，我们已经将Pico微控制器连接到互联网，并部署了一个web应用程序来控制它。点击下面的链接，查看完成的Anvil应用程序:</p><blockquote class="mq mr ms"><p id="ca1f" class="ix iy mp iz b ja jb ij jc jd je im jf mt jh ji jj mu jl jm jn mv jp jq jr js hb bi translated"><a class="ae jt" href="https://anvil.works/build#clone:UU2QIYDJCCUMPHIY=DLI6CTZ5CBL3US575ZVTOPWB" rel="noopener ugc nofollow" target="_blank">https://anvil . works/build # clone:uu 2 qiydjcumphiy = DLI 6 ctz 5 CBL 3 us 575 zvtopwb</a></p></blockquote></div><div class="ab cl kr ks gp kt" role="separator"><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw"/></div><div class="hb hc hd he hf"><h1 id="aa98" class="ky kl hi bd kz la lb lc ld le lf lg lh io li ip lj ir lk is ll iu lm iv ln lo bi translated">结论</h1><p id="7b46" class="pw-post-body-paragraph ix iy hi iz b ja mk ij jc jd ml im jf jg mm ji jj jk mn jm jn jo mo jq jr js hb bi translated">我刚刚向您展示了如何只使用Python和Anvil从web上控制Pico W。</p><p id="4448" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">Anvil可以免费使用——今天就去anvil.works/pico<a class="ae jt" href="https://anvil.works/pico" rel="noopener ugc nofollow" target="_blank">看看更多的例子和完整的文档。</a></p><pre class="ju jv jw jx fd kf kg kh ki aw kj bi"><span id="17c1" class="kk kl hi kg b fi km kn l ko kp"><strong class="kg hj">Want to connect?</strong></span><span id="5865" class="kk kl hi kg b fi kq kn l ko kp"><a class="ae jt" href="https://codingwithryan.medium.com/" rel="noopener">Follow me for more</a> software development content!</span></pre></div></div>    
</body>
</html>