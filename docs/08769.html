<html>
<head>
<title>How to: Add Protection Against Bad Actors While Protecting Everyone’s Privacy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何:在保护每个人的隐私的同时添加针对不良行为者的保护</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/how-to-add-protection-against-bad-actors-while-protecting-everyones-privacy-4317130ea2b3?source=collection_archive---------20-----------------------#2021-11-13">https://medium.com/geekculture/how-to-add-protection-against-bad-actors-while-protecting-everyones-privacy-4317130ea2b3?source=collection_archive---------20-----------------------#2021-11-13</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/459b3a56d84b152b1fc1b4db548b4e97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*foLJHZ5sZm3RZVenXj2x7w.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Undraw hacker mind</figcaption></figure><h1 id="62f8" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">背景</h1><p id="1d99" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">如果你一直在关注，那么你会知道我一直在构建一个以隐私为中心的脸书替代方案(呃… Meta？).这不仅仅是一个简单的克隆，事实上它完全背离了公司的一切。</p><p id="154e" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">它被称为<a class="ae kv" href="https://metamorphic.app" rel="noopener ugc nofollow" target="_blank">变形</a>，我目前正准备发出最初的几个早期访问邀请代码(如此接近！).这是一种自举式的努力，一种真正的爱的劳动——我建立它是为了让我的家人和所爱的人能够联系和分享，而不会削弱我们的生活(大致总结一下)——并且由于服务的自举性质，我必须随着收入的增加来扩大硬件规模(我的跑道比我打字的桌子还短)，这意味着我目前在<em class="kw">非常低效的</em>硬件上运行生产服务器。</p><p id="8ce7" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">它能工作的事实让我总是想赞美Elixir、Phoenix和OTP，但它让我在服务开始之前就开始思考它有多脆弱。</p><p id="1ae8" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">我一直试图把它赶出我的脑海，因为我已经走出了我的方式，不让服务器拉人们的IP地址(即使是暂时的)，见<a class="ae kv" rel="noopener" href="/geekculture/how-to-rate-limit-log-in-attempts-while-respecting-privacy-a1ae220640e8">这篇文章</a>关于使用会话来限制登录尝试，但它不断回来。我需要做点什么。</p><p id="2f07" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">多亏了一篇<a class="ae kv" href="https://elixirforum.com/t/dealing-with-bots/43736/2?u=f0rest8" rel="noopener ugc nofollow" target="_blank"> Elixir论坛帖子</a>，我了解了一个名为<a class="ae kv" href="https://github.com/michalmuskala/plug_attack" rel="noopener ugc nofollow" target="_blank"> plug_attack </a>的库，并意识到我可以使用这个库和一些简单但强大的散列来增加对“不良行为者IP地址”的保护，而无需存储IP地址(即使是临时的)。</p><p id="063c" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">注意:你很可能也想使用<a class="ae kv" href="https://github.com/ajvondrak/remote_ip" rel="noopener ugc nofollow" target="_blank"> remote_ip </a>，在奖励步骤6中提到过。</p><p id="1e3b" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">所以，废话不多说，让我和你们分享一下我是如何做到这一点的。</p><h1 id="eca7" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">先决条件</h1><p id="4f37" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">在这篇文章中，我们将做如下假设:</p><ul class=""><li id="1766" class="kx ky hi ju b jv kq jz kr kd kz kh la kl lb kp lc ld le lf bi translated">你有一个<a class="ae kv" href="https://phoenixframework.org" rel="noopener ugc nofollow" target="_blank"> Phoenix </a>的应用程序启动并运行(1.6以上)</li><li id="5117" class="kx ky hi ju b jv lg jz lh kd li kh lj kl lk kp lc ld le lf bi translated">你有仙丹1.12+和OTP 24+</li></ul><p id="bf29" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">对于这个简短的教程来说，这就是你所需要的全部，但我假设你有一个更成熟的应用程序，它具有身份验证和其他业务逻辑，尽管它不会在这里出现。</p><p id="cd2f" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">我认为您也可以使用低至Elixir 1.4的版本(尽管您也很可能使用较低的OTP版本)，但是如果您使用更低的版本，那么您需要遵循一个额外的步骤来确保<code class="du ll lm ln lo b">plug_attack</code>在您的应用程序之前启动(并且很可能更改您的散列函数)。</p><pre class="lp lq lr ls fd lt lo lu lv aw lw bi"><span id="7d98" class="lx iv hi lo b fi ly lz l ma mb"># Only necessary if using Elixir 1.3<br/>def application do<br/>  [applications: [:plug_attack]]<br/>end</span></pre><p id="d834" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">让我们开始吧。</p><h1 id="0d0c" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">第一步</h1><p id="5d1e" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">首先，在<code class="du ll lm ln lo b">mix.exs</code>中将<code class="du ll lm ln lo b">plug_attack</code>添加到您的依赖项中，如果使用的是伞式应用程序，那么相应地添加(在我的例子中，我在我的web部分中添加了依赖项列表，因为它直接处理web请求)。</p><pre class="lp lq lr ls fd lt lo lu lv aw lw bi"><span id="66b5" class="lx iv hi lo b fi ly lz l ma mb"># mix.exs<br/>...<br/>defp deps do<br/>  [<br/>    ...<br/>    {:plug_attack, "~&gt; 0.4.3"},<br/>    ...<br/>  ]<br/>end</span></pre><p id="5e68" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">然后，从您的终端运行<code class="du ll lm ln lo b">mix deps.get</code>(您可能想要检查<a class="ae kv" href="https://hex.pm/packages/plug_attack" rel="noopener ugc nofollow" target="_blank">十六进制包</a>以查看最新版本)。</p><p id="9c34" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">下一个。</p><h1 id="fa03" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">第二步</h1><p id="7c95" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">接下来，我们将在应用程序中添加一个新的环境变量。如果你还没有一个<code class="du ll lm ln lo b">.env</code>文件，你需要在你的应用程序的根目录下创建一个。然后，确保你也将<code class="du ll lm ln lo b">*.env</code>添加到你的<code class="du ll lm ln lo b">.gitignore</code>文件或者类似的文件中(<strong class="ju hj">要格外小心，不要</strong>将你的环境变量推到你的源代码控制中)。</p><p id="0ced" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">在你的<code class="du ll lm ln lo b">.env</code>文件中添加<code class="du ll lm ln lo b">export PLUG_ATTACK_IP_SECRET=randombytes</code>。你需要为这个秘密生成一些随机字节。可以这样做:<code class="du ll lm ln lo b">:crypto.strong_rand_bytes(12) |&gt; Base.encode64()</code>。</p><p id="f425" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">有了这样的安排，我们就可以继续了。</p><h1 id="c67b" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">第三步</h1><p id="1855" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">接下来，让我们创建我们的<code class="du ll lm ln lo b">plug_attack.ex</code>模块。这将是一个简单的例子，您可以在您的开发环境中立即测试，您可以根据您的应用程序来组织它。对我来说，我在我的web文件夹中创建了一个<code class="du ll lm ln lo b">plugs</code>文件夹，但这取决于你！</p><p id="bce1" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">解决了代码组织后，您可以通过简单地复制/粘贴“速率限制头”部分的演示开始，并做一些小的调整:</p><figure class="lp lq lr ls fd ij"><div class="bz dy l di"><div class="mc md l"/></div><figcaption class="iq ir et er es is it bd b be z dx">Protect against “bad actor IP’s” while protecting everyone’s privacy</figcaption></figure><p id="4f28" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">好吧，这是怎么回事？实际上相当多，但是为了我们的缘故，重要的部分如下:</p><ul class=""><li id="9d17" class="kx ky hi ju b jv kq jz kr kd kz kh la kl lb kp lc ld le lf bi translated"><code class="du ll lm ln lo b">@alg :sha512</code> —这将在我们的散列函数中使用。</li><li id="dd9d" class="kx ky hi ju b jv lg jz lh kd li kh lj kl lk kp lc ld le lf bi translated"><code class="du ll lm ln lo b">@ip_secret System.fetch_env!("PLUG_ATTACK_IP_SECRET")</code> —这将在我们的哈希函数中使用。</li><li id="8afa" class="kx ky hi ju b jv lg jz lh kd li kh lj kl lk kp lc ld le lf bi translated"><code class="du ll lm ln lo b">hash_ip/2</code> —这是我们的散列函数，它采用一种算法<code class="du ll lm ln lo b">alg</code>和转换后的IP地址<code class="du ll lm ln lo b">ip</code>(您可以用不同的名称来表示，以便更加明确)。然后，我们使用Erlang的<code class="du ll lm ln lo b">:crypto.mac/4</code>函数，使用我们提供的算法<code class="du ll lm ln lo b">:sha512</code>和<code class="du ll lm ln lo b">@ip_secret</code>对转换后的IP地址进行散列。</li><li id="43ed" class="kx ky hi ju b jv lg jz lh kd li kh lj kl lk kp lc ld le lf bi translated"><code class="du ll lm ln lo b">convert_ip/1</code> —该函数从<code class="du ll lm ln lo b">conn.remote_ip</code>中获取IP地址，并将其从IO数据转换成可以在我们的哈希函数中正确使用的字符串。</li><li id="bb81" class="kx ky hi ju b jv lg jz lh kd li kh lj kl lk kp lc ld le lf bi translated"><code class="du ll lm ln lo b">rule "throttle by ip"</code>——这个“规则”使我们能够通过IP地址限制所有请求，以便我们能够快速测试它在我们的开发环境中是否工作。您可以稍后添加一个类似于<code class="du ll lm ln lo b">rule "allow local", conn do</code>的规则来总是允许来自<code class="du ll lm ln lo b">localhost</code>的请求。</li></ul><p id="dc8c" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">因此，我们使用<code class="du ll lm ln lo b">:sha512</code>算法和来自<code class="du ll lm ln lo b">@ip_secret</code>的salt来确定性地散列传入的IP地址，然后将该散列临时存储在我们的Erlang Term Storage (ETS)表中。</p><p id="4322" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">然后，我们将散列存储<code class="du ll lm ln lo b">period: 60_000</code>毫秒(1分钟)，并在同一分钟内阻止来自该散列IP地址的任何超过10的请求<code class="du ll lm ln lo b">limit: 10</code>。</p><p id="4aa7" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">好的，我们就快到了。在我们的<code class="du ll lm ln lo b">application.ex</code>文件中，我们需要将我们的ETS存储添加到我们在上面的PlugAttack规则中列出的监管树中，<code class="du ll lm ln lo b">storage: {PlugAttack.Storage.Ets, YourAppWeb.PlugAttack.Storage}</code>:</p><pre class="lp lq lr ls fd lt lo lu lv aw lw bi"><span id="f982" class="lx iv hi lo b fi ly lz l ma mb"># your_app_web/application.ex</span><span id="1398" class="lx iv hi lo b fi me lz l ma mb">defmodule YourAppWeb.Application do<br/>  @moduledoc false<br/>  use Application<br/>  <br/>  def start(_type, _args) do<br/>    ...<br/>    children = [<br/>      ...<br/>      # Start PlugAttack storage<br/>      {PlugAttack.Storage.Ets, name: YourAppWeb.PlugAttack.Storage, clean_period: 60_000},<br/>      ...<br/>    ]<br/>    ...<br/>  end<br/>  ...<br/>end</span></pre><p id="bdf9" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">仅此而已。同样，你可以在PlugAttack <a class="ae kv" href="https://github.com/michalmuskala/plug_attack" rel="noopener ugc nofollow" target="_blank">文档</a>中了解更多关于你的储物选择和启动策略。</p><h1 id="8f6c" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">第四步</h1><p id="3e3a" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">转到应用程序web部分的<code class="du ll lm ln lo b">router.ex</code>文件，将您的插件添加到适当的管道中:</p><pre class="lp lq lr ls fd lt lo lu lv aw lw bi"><span id="1137" class="lx iv hi lo b fi ly lz l ma mb"># router.ex<br/>defmodule YourAppWeb.Router do<br/>  use YourAppWeb, :router</span><span id="3714" class="lx iv hi lo b fi me lz l ma mb">  ...<br/>  alias YourAppWeb.Plugs.PlugAttack<br/>  ...<br/>  pipeline :browser do<br/>    plug PlugAttack<br/>    ...<br/>  end<br/>  ...<br/>end</span></pre><p id="e859" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">就是这样！我们给我们的<code class="du ll lm ln lo b">PlugAttack</code>模块起别名，然后把塞子放进我们的<code class="du ll lm ln lo b">:browser</code>管道，在我们做任何其他事情来确保请求被允许通过之前，管道通过它。</p><p id="2aa5" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">你可以通过点击刷新按钮进行测试，直到你点击<code class="du ll lm ln lo b">Forbidden</code>屏幕。</p><p id="bb42" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">现在，正如您可能已经猜到的那样，可以对它进行很大的修改和扩展，以满足您的需要。重要的是，我们现在知道如何获取一个传入的IP地址，散列它以保护个人隐私，临时存储它(这都是短暂的！)，然后相互比较散列来决定是否允许请求。</p><p id="32e7" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">很酷，但是我们实际上还没有完成。让我们看看我们可以采取的另一个步骤，即利用由类似命名的算法启发的<code class="du ll lm ln lo b">fail2ban/2</code>函数。</p><h1 id="bc93" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">奖励步骤5</h1><p id="620f" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">对于这最后一步，我们将用实现<code class="du ll lm ln lo b">PlugAttack.Rule.fail2ban/2</code>算法的规则来替换我们的<code class="du ll lm ln lo b">rule "throttle by ip"</code>。</p><p id="d5ce" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">来自<a class="ae kv" href="https://github.com/michalmuskala/plug_attack" rel="noopener ugc nofollow" target="_blank">文档</a>:</p><blockquote class="mf mg mh"><p id="46e3" class="js jt kw ju b jv kq jx jy jz kr kb kc mi ks kf kg mj kt kj kk mk ku kn ko kp hb bi translated">这是为了尽早发现行为不端的客户，并持续更长时间。“密钥”用于区分不同的客户端，例如，您可以使用“conn.remote_ip”进行每个ip的跟踪。如果“键”为假，则跳过该动作，并评估下一个规则。</p></blockquote><figure class="lp lq lr ls fd ij"><div class="bz dy l di"><div class="mc md l"/></div><figcaption class="iq ir et er es is it bd b be z dx">Protect against “bad actor IP’s” while preserving everyone’s privacy with fail2ban</figcaption></figure><p id="7dc5" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">因此，我们交换了我们的规则，将禁令设置为90秒，<code class="du ll lm ln lo b">ban_for: 90_000</code>。这是为了让我们可以在开发中轻松地测试它。对于生产，您可能想要增加<code class="du ll lm ln lo b">:ban_for</code>周期。</p><p id="4567" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">说到生产…</p><h1 id="6923" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">奖金第6步</h1><p id="7671" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">如果您的生产服务器位于Heroku的路由器或其他转发请求的主机之后，那么您可能还需要将<a class="ae kv" href="https://github.com/ajvondrak/remote_ip" rel="noopener ugc nofollow" target="_blank"> remote_ip </a>添加到您的依赖列表中，并在您调用<code class="du ll lm ln lo b">plug YourAppWeb.Router</code>之前将其放入您的<code class="du ll lm ln lo b">endpoint.ex</code>文件中。</p><pre class="lp lq lr ls fd lt lo lu lv aw lw bi"><span id="56e9" class="lx iv hi lo b fi ly lz l ma mb"># mix.exs<br/>...<br/>  defp deps do<br/>    [<br/>      ...<br/>      {:remote_ip, "~&gt; 1.0"}<br/>    ]<br/>  end<br/>...</span><span id="37b4" class="lx iv hi lo b fi me lz l ma mb"># your_app_web/endpoint.ex</span><span id="354f" class="lx iv hi lo b fi me lz l ma mb">defmodule YourAppWeb.Endpoint.ex do<br/>  ...<br/>  plug RemoteIp<br/>  plug YourAppWeb.Router<br/>end</span></pre><p id="4974" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">还有其他配置和使用<code class="du ll lm ln lo b">remote_ip</code>的方法，所以如果你需要使用它，我鼓励你仔细阅读<a class="ae kv" href="https://hexdocs.pm/remote_ip/RemoteIp.html" rel="noopener ugc nofollow" target="_blank">文档</a>。</p><p id="fd1d" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">此外，根据<a class="ml mm ge" href="https://medium.com/u/b2a1e629dcd8?source=post_page-----4317130ea2b3--------------------------------" rel="noopener" target="_blank"> Kip Cole </a>在<a class="ae kv" href="https://elixirforum.com/t/phoenix-channel-get-user-ip-address/36601/4?u=f0rest8" rel="noopener ugc nofollow" target="_blank"> Elixir Forum </a>上的帖子，您可能希望使用<code class="du ll lm ln lo b">remote_ip</code>来解决有关ip欺骗的问题。</p><h1 id="b23c" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">2022年10月30日更新</h1><p id="6b2a" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">为了处理无效的Unicode码位错误，一种选择是将<code class="du ll lm ln lo b">convert_ip/1</code>函数更新为:</p><pre class="lp lq lr ls fd lt lo lu lv aw lw bi"><span id="ff1d" class="lx iv hi lo b fi ly lz l ma mb">defp convert_ip(ip) do<br/>  ip<br/>  |&gt; Tuple.to_list()<br/>  |&gt; Enum.map(fn(i) -&gt; Integer.to_string(i) end)<br/>  |&gt; List.to_string()<br/>end</span></pre><h1 id="893d" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">结论</h1><p id="acb8" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">就是这样！</p><p id="dba6" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">感谢您的关注，我希望这能让您了解如何在保护每个人隐私的同时保护您的应用程序。</p><blockquote class="mf mg mh"><p id="b506" class="js jt kw ju b jv kq jx jy jz kr kb kc mi ks kf kg mj kt kj kk mk ku kn ko kp hb bi translated">如果你有兴趣了解更多关于<em class="hi">变形</em>的信息，那么跟随我们的公司<a class="ae kv" href="https://coretheory.transistor.fm/" rel="noopener ugc nofollow" target="_blank">播客</a>和<a class="ae kv" href="https://metamorphic.app" rel="noopener ugc nofollow" target="_blank">报名参加我们的早期接入发布会的邀请码</a>——我们的网络生活即将发生转变！</p></blockquote><p id="cd19" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">永远欢迎改进和想法，谢谢！</p><p id="7d3a" class="pw-post-body-paragraph js jt hi ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp hb bi translated">💚标记</p></div></div>    
</body>
</html>