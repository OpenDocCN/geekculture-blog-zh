<html>
<head>
<title>How to Upload a Video in Laravel</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Laravel上传视频</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/how-to-upload-a-video-in-laravel-1dc07bde3839?source=collection_archive---------0-----------------------#2021-08-14">https://medium.com/geekculture/how-to-upload-a-video-in-laravel-1dc07bde3839?source=collection_archive---------0-----------------------#2021-08-14</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/27f02c7fff24a23ee93d1f5c6f45298c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-hhXLNbVb9ivfWEH"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Photo by <a class="ae iu" href="https://unsplash.com/@bencollins?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Ben Collins</a> on <a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="4919" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">许多网站和在线系统要求用户将视频上传到互联网。这种特征常见于社交媒体网站、新闻网站、电子学习网站、在线杂志等。</p><p id="456e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">许多web开发人员发现很难在网站上实现这个特性。然而，像laravel这样的web框架可以更容易地在网站上实现视频上传。在这篇文章中，我将一步一步地向你展示如何使用laravel上传一个mp4视频。</p></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><p id="a144" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">步骤1: </strong>使用composer创建一个新的Laravel项目。你可以给它取任何名字，但在这种情况下，我们将把它命名为视频<em class="ka">应用</em>。</p><pre class="kb kc kd ke fd kf kg kh ki aw kj bi"><span id="9f07" class="kk kl hi kg b fi km kn l ko kp">composer create-project --prefer-dist laravel/laravel videoApp</span></pre><p id="c607" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">步骤2: </strong>在<em class="ka"> videoApp </em>项目中创建一个迁移来创建一个<em class="ka"> videos </em>表。</p><pre class="kb kc kd ke fd kf kg kh ki aw kj bi"><span id="d4f7" class="kk kl hi kg b fi km kn l ko kp">cd videoApp<br/>php artisan make:migration create_videos_table --create=videos</span></pre><p id="9792" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">步骤3: </strong>在迁移中添加字段<em class="ka">视频</em>和<em class="ka">标题。</em></p><pre class="kb kc kd ke fd kf kg kh ki aw kj bi"><span id="08c6" class="kk kl hi kg b fi km kn l ko kp">&lt;?php</span><span id="aa93" class="kk kl hi kg b fi kq kn l ko kp">use Illuminate\Support\Facades\Schema;<br/>use Illuminate\Database\Schema\Blueprint;<br/>use Illuminate\Database\Migrations\Migration;</span><span id="c2c6" class="kk kl hi kg b fi kq kn l ko kp"><em class="ka">class</em> CreateVideosTable <em class="ka">extends</em> <em class="ka">Migration<br/></em>{<br/>  <em class="ka">public</em> <em class="ka">function</em> up()<br/>  {<br/>    Schema::create('videos', <em class="ka">function</em> (Blueprint $table) {<br/>      $table-&gt;bigIncrements('id');<br/>      $table-&gt;string('title');<br/>      $table-&gt;string('video');<br/>      $table-&gt;timestamps();<br/>  });<br/>  }</span><span id="a58c" class="kk kl hi kg b fi kq kn l ko kp"><em class="ka">  public</em> <em class="ka">function</em> down()<br/>  {<br/>    Schema::dropIfExists('videos');<br/>  }<br/>}</span></pre><p id="74cf" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">第四步:</strong>接下来，创建一个名为<em class="ka"> Video的模型。</em></p><pre class="kb kc kd ke fd kf kg kh ki aw kj bi"><span id="7cac" class="kk kl hi kg b fi km kn l ko kp">php artisan make:model Video</span></pre><p id="3e57" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">第五步:</strong>在模型中添加可填充数组中的<em class="ka">视频</em>字段和<em class="ka">标题</em>字段。</p><pre class="kb kc kd ke fd kf kg kh ki aw kj bi"><span id="367a" class="kk kl hi kg b fi km kn l ko kp">&lt;?php</span><span id="b9ea" class="kk kl hi kg b fi kq kn l ko kp">namespace App;</span><span id="2c9d" class="kk kl hi kg b fi kq kn l ko kp">use Illuminate\Database\Eloquent\Model;</span><span id="df11" class="kk kl hi kg b fi kq kn l ko kp"><em class="ka">class</em> Video <em class="ka">extends</em> <em class="ka">Model<br/></em>{<br/>  <em class="ka">protected</em> $table = 'videos';</span><span id="3c08" class="kk kl hi kg b fi kq kn l ko kp">  <em class="ka">protected</em> $fillable = [<br/>      'title', 'video'<br/>  ];</span><span id="bd6a" class="kk kl hi kg b fi kq kn l ko kp">}</span></pre><p id="1684" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">第六步:</strong>在<strong class="ix hj"> <em class="ka"> config/ </em> </strong>文件夹中，在一个名为<em class="ka">filesystems.php的文件中添加一个名为<em class="ka"> my_files </em>的新盘。</em></p><pre class="kb kc kd ke fd kf kg kh ki aw kj bi"><span id="a625" class="kk kl hi kg b fi km kn l ko kp">'disks' =&gt; [<br/>   'local' =&gt; [<br/>      'driver' =&gt; 'local',<br/>      'root' =&gt; storage_path('app'),<br/>   ],</span><span id="4307" class="kk kl hi kg b fi kq kn l ko kp">   'public' =&gt; [<br/>      'driver' =&gt; 'local',<br/>      'root' =&gt; storage_path('app/public'),<br/>      'url' =&gt; env('APP_URL').'/storage',<br/>      'visibility' =&gt; 'public',<br/>   ],</span><span id="b77e" class="kk kl hi kg b fi kq kn l ko kp">   's3' =&gt; [<br/>      'driver' =&gt; 's3',<br/>      'key' =&gt; env('AWS_ACCESS_KEY_ID'),<br/>      'secret' =&gt; env('AWS_SECRET_ACCESS_KEY'),<br/>      'region' =&gt; env('AWS_DEFAULT_REGION'),<br/>      'bucket' =&gt; env('AWS_BUCKET'),<br/>      'url' =&gt; env('AWS_URL'),<br/>   ],</span><span id="ccf2" class="kk kl hi kg b fi kq kn l ko kp">   'my_files' =&gt; [<br/>      'driver' =&gt; 'local',<br/>      'root'   =&gt; public_path() . '/'<br/>   ]<br/>],</span></pre><p id="f007" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">第五步:</strong>接下来，创建一个控制器，命名为VideoController。</p><pre class="kb kc kd ke fd kf kg kh ki aw kj bi"><span id="0fde" class="kk kl hi kg b fi km kn l ko kp">php artisan make:controller VideoController</span></pre><p id="8ce5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">第六步:</strong>给<em class="ka">视频控制器</em>添加一个名为<em class="ka">上传视频的功能。</em></p><pre class="kb kc kd ke fd kf kg kh ki aw kj bi"><span id="1039" class="kk kl hi kg b fi km kn l ko kp">&lt;?php</span><span id="c8f0" class="kk kl hi kg b fi kq kn l ko kp">namespace App\Http\Controllers\Admin;</span><span id="7621" class="kk kl hi kg b fi kq kn l ko kp">use Illuminate\Http\Request;</span><span id="6754" class="kk kl hi kg b fi kq kn l ko kp">use App\Http\Controllers\Controller;<br/>use Illuminate\Support\Facades\DB;<br/>use App\Video;<br/>use Storage;</span><span id="b192" class="kk kl hi kg b fi kq kn l ko kp"><em class="ka">class</em> VideoController <em class="ka">extends</em> <em class="ka">Controller<br/></em>{<br/>   <em class="ka">public</em> <em class="ka">function</em> uploadVideo(Request $request)<br/>   {<br/>      <em class="ka">$this</em>-&gt;validate($request, [<br/>         'title' =&gt; 'required|string|max:255',<br/>         'video' =&gt; 'required|file|mimetypes:video/mp4',<br/>   ]);</span><span id="6ce4" class="kk kl hi kg b fi kq kn l ko kp">   $video = new Video;<br/>   $video-&gt;title = $request-&gt;title;</span><span id="80ff" class="kk kl hi kg b fi kq kn l ko kp">   if ($request-&gt;hasFile('video'))<br/>   {<br/>     $path = $request-&gt;file('video')-&gt;store('videos', ['disk' =&gt;      'my_files']);</span><span id="5634" class="kk kl hi kg b fi kq kn l ko kp">    $video-&gt;video = $path;<br/>   }<br/>   $video-&gt;save();<br/>   <br/>  }</span><span id="a369" class="kk kl hi kg b fi kq kn l ko kp">}</span></pre><p id="c0f5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">第七步:</strong>最后在<em class="ka">web.php</em>文件中的routes文件夹中</p><pre class="kb kc kd ke fd kf kg kh ki aw kj bi"><span id="cad4" class="kk kl hi kg b fi km kn l ko kp">&lt;?phpuse Illuminate\Http\Request;</span><span id="9ca0" class="kk kl hi kg b fi kq kn l ko kp">Route::post('uploadVideo', 'VideoController@uploadVideo')-&gt;name('videos.uploadedVideo');</span></pre><p id="669d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">步骤8: 创建一个名为<em class="ka">uploadVideo.blade.php的文件。</em></p><pre class="kb kc kd ke fd kf kg kh ki aw kj bi"><span id="6eb4" class="kk kl hi kg b fi km kn l ko kp">&lt;!DOCTYPE <em class="ka">html</em>&gt;<br/>&lt;html&gt;<br/>&lt;head&gt;<br/> &lt;meta <em class="ka">charset</em>="utf-8"&gt;<br/> &lt;meta <em class="ka">name</em>="viewport" <em class="ka">content</em>="width=device-width, initial-scale=1,   shrink-to-fit=no"&gt;<br/>&lt;title&gt;Video upload&lt;/title&gt;<br/>&lt;/head&gt;</span><span id="799e" class="kk kl hi kg b fi kq kn l ko kp">&lt;body&gt;</span><span id="a502" class="kk kl hi kg b fi kq kn l ko kp">&lt;div&gt;<br/>&lt;h3&gt;Upload a video&lt;/h3&gt;<br/>&lt;hr&gt;</span><span id="a458" class="kk kl hi kg b fi kq kn l ko kp">&lt;form <em class="ka">method</em>="POST" <em class="ka">action</em>="{{ route('videos.uploadVideo') }}" <em class="ka">enctype</em>="multipart/form-data" &gt;<br/>{{ csrf_field() }}<br/>&lt;div &gt;<br/>&lt;label&gt;Title&lt;/label&gt;<br/>&lt;input <em class="ka">type</em>="text" <em class="ka">name</em>="title" <em class="ka">placeholder</em>="Enter Title"&gt;<br/>&lt;/div&gt;</span><span id="a996" class="kk kl hi kg b fi kq kn l ko kp">&lt;div &gt;<br/>&lt;label&gt;Choose Video&lt;/label&gt;<br/>&lt;input <em class="ka">type</em>="file"  <em class="ka">name</em>="video"&gt;<br/>&lt;/div&gt;</span><span id="d5ac" class="kk kl hi kg b fi kq kn l ko kp">&lt;hr&gt;</span><span id="2fb2" class="kk kl hi kg b fi kq kn l ko kp">&lt;button <em class="ka">type</em>="submit" &gt;Submit&lt;/button&gt;</span><span id="3bda" class="kk kl hi kg b fi kq kn l ko kp">&lt;/form&gt;</span><span id="6959" class="kk kl hi kg b fi kq kn l ko kp">&lt;/div&gt;</span><span id="10fd" class="kk kl hi kg b fi kq kn l ko kp">&lt;/body&gt;</span><span id="4b6a" class="kk kl hi kg b fi kq kn l ko kp">&lt;/html&gt;</span></pre></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><p id="a783" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在我们有了。我希望你已经发现这是有用的。我会带着更多有趣的文章回来。感谢您的阅读。</p></div></div>    
</body>
</html>