<html>
<head>
<title>Stop using Array.map() everywhere 🥵</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">停止在🥵到处使用Array.map()</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/stop-using-array-map-everywhere-7f7d354593a3?source=collection_archive---------19-----------------------#2021-12-29">https://medium.com/geekculture/stop-using-array-map-everywhere-7f7d354593a3?source=collection_archive---------19-----------------------#2021-12-29</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/cd44f8538ede95f78d6d440fa7f97d10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tKQuf6iem1kyMMjTATurXg.png"/></div></div></figure><div class=""/><p id="fb36" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">大多数时候我会看到这样的片段👇</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="bff1" class="jx jy ht jt b fi jz ka l kb kc">const fruits = ["apple", "orange", "cherry"];<br/>let text = "";<br/>document.getElementById("main").innerHTML = text;<br/>fruits.map(i =&gt; text += i );</span></pre><p id="5f87" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在上面的代码片段中，我们将<code class="du kd ke kf jt b">fruits</code>文本添加到DOM的<code class="du kd ke kf jt b">main</code> ID中。<br/>上面的片段似乎没有问题，但有一个主要问题，我们今天将会看到。</p><p id="009a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们通过<code class="du kd ke kf jt b">map</code>的定义来理解这个问题，<code class="du kd ke kf jt b">map()</code>方法创建了一个新的数组，其中填充了调用数组中每个元素的函数的结果。</p><p id="7a7e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hu">示例:</strong></p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="454b" class="jx jy ht jt b fi jz ka l kb kc">let n = [1, 2, 3, 4];<br/>let add = n.map(i =&gt; i + 2);<br/>console.log(add); // [3, 4, 5, 6]</span></pre><p id="6b17" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hu">注意:</strong>使用<code class="du kd ke kf jt b">map()</code>方法意味着返回一个数组的新集合。</p><p id="7758" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如前所述，<code class="du kd ke kf jt b">map()</code>方法总是返回一个新数组，所以如果你不需要使用新数组，就不要使用<code class="du kd ke kf jt b">map()</code>方法。<br/>当你只需要迭代一个数组的时候，我会一直推荐使用其他的数组方法比如<code class="du kd ke kf jt b">forEach</code>或者<code class="du kd ke kf jt b">for..of</code>。</p><p id="0eb7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hu">例如:</strong></p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="0a2a" class="jx jy ht jt b fi jz ka l kb kc">const fruits = ["apple", "orange", "cherry"];<br/>let text = "";<br/>fruits.forEach(myFunction);</span><span id="bf34" class="jx jy ht jt b fi kg ka l kb kc">document.getElementById("main").innerHTML = text;</span><span id="97b5" class="jx jy ht jt b fi kg ka l kb kc">function myFunction(item, index) {<br/>  text += index + ": " + item + "&lt;br&gt;"; <br/>}</span></pre><h1 id="3973" class="kh jy ht bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">我们为什么关心它？🙄</h1><p id="9e9b" class="pw-post-body-paragraph iq ir ht is b it le iv iw ix lf iz ja jb lg jd je jf lh jh ji jj li jl jm jn hb bi translated">我们知道，<code class="du kd ke kf jt b">map()</code>方法总是返回一个数组。如果您只需要更新DOM，那么将这些元素存储到内存形式没有任何意义。</p><p id="0234" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当然，对于一小部分数字来说，什么都不会发生，但是，如果我们在这里取一个较大的数字，那么它会影响性能方面，因为它会将值存储在冗余的内存中。</p><h1 id="304f" class="kh jy ht bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">总结⅀</h1><p id="acdb" class="pw-post-body-paragraph iq ir ht is b it le iv iw ix lf iz ja jb lg jd je jf lh jh ji jj li jl jm jn hb bi translated">如果你只需要遍历一个数组，停止使用<code class="du kd ke kf jt b">map()</code>方法。<br/>如果你想遍历一个数组，开始使用<code class="du kd ke kf jt b">forEach</code>或<code class="du kd ke kf jt b">for...of</code>方法。</p><p id="ef97" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">感谢您阅读❤️这篇文章</p><p id="8f13" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">🌟<a class="ae lj" href="https://twitter.com/suprabhasupi" rel="noopener ugc nofollow" target="_blank">推特</a> |📚<a class="ae lj" href="https://gum.co/css-pseudo-class-elements" rel="noopener ugc nofollow" target="_blank">电子书</a>🌟<a class="ae lj" href="https://www.instagram.com/suprabhasupi/" rel="noopener ugc nofollow" target="_blank"> Instagram </a></p></div></div>    
</body>
</html>