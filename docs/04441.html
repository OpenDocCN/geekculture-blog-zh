<html>
<head>
<title>AWS ECS Anywhere Quick Start</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">AWS ECS Anywhere快速入门</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/aws-ecs-anywhere-quick-start-b03c1449af62?source=collection_archive---------22-----------------------#2021-06-27">https://medium.com/geekculture/aws-ecs-anywhere-quick-start-b03c1449af62?source=collection_archive---------22-----------------------#2021-06-27</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="5033" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当我们谈论数字化时，首先总是指云迁移，但我们不可否认的是，混合云用例在许多领域仍然需要，例如边缘计算资源、物联网机群管理、需要部署在用户附近的低延迟应用程序。AWS ECS Anywhere是一款产品，AWS允许我们管理AWS外部的实例，并使用相同的ECS控制平面管理容器的生命周期和运行状况。今天，我们将在任何地方试用ECS，并讨论在任何地方采用ECS时您要考虑的领域。</p></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><h1 id="42db" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">AWS ECS Anywhere高级流程</h1><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es ki"><img src="../Images/03798af04bfc01505dd632f579c5f76b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kgxQTA5OMeIg9TmeVJDjqA.png"/></div></div></figure><p id="40c4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">演示虚拟机或者裸机Linux环境，这个演示我们会用vagger搭建一个Ubuntu Linux盒子。</p></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><h1 id="0a91" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">演示环境设置</h1><p id="0dc0" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq kw is it iu kx iw ix iy ky ja jb jc hb bi translated">按照以下设置准备演示环境。</p><h2 id="5427" class="kz jl hi bd jm la lb lc jq ld le lf ju iq lg lh jy iu li lj kc iy lk ll kg lm bi translated">安装虚拟箱</h2><p id="a07d" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq kw is it iu kx iw ix iy ky ja jb jc hb bi translated">我们将为我们的演示环境安装<a class="ae ln" href="https://www.virtualbox.org/" rel="noopener ugc nofollow" target="_blank"> VirtualBox </a>，按照官方指南下载VirtualBox，或者如果你使用Mac机，可以用<code class="du lo lp lq lr b">brew</code>安装:-</p><pre class="kj kk kl km fd ls lr lt lu aw lv bi"><span id="6b1c" class="kz jl hi lr b fi lw lx l ly lz">brew install virtualbox</span></pre><h2 id="78c7" class="kz jl hi bd jm la lb lc jq ld le lf ju iq lg lh jy iu li lj kc iy lk ll kg lm bi translated">安装流浪者</h2><p id="dbf4" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq kw is it iu kx iw ix iy ky ja jb jc hb bi translated">我们将使用流浪者来管理我们的虚拟环境，从<a class="ae ln" href="https://www.vagrantup.com/" rel="noopener ugc nofollow" target="_blank">流浪者</a>官方网站安装，或者使用<code class="du lo lp lq lr b">brew</code>安装，如果你使用Mac机:-</p><pre class="kj kk kl km fd ls lr lt lu aw lv bi"><span id="075b" class="kz jl hi lr b fi lw lx l ly lz">brew install vagrant</span></pre><h2 id="f92b" class="kz jl hi bd jm la lb lc jq ld le lf ju iq lg lh jy iu li lj kc iy lk ll kg lm bi translated">启动虚拟机</h2><p id="c458" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq kw is it iu kx iw ix iy ky ja jb jc hb bi translated">在您的开发环境中创建一个名为<code class="du lo lp lq lr b">ecs-lab</code>的文件夹，并运行以下命令</p><pre class="kj kk kl km fd ls lr lt lu aw lv bi"><span id="c2a9" class="kz jl hi lr b fi lw lx l ly lz">vagrant init ubuntu/bionic64<br/>vagrant up</span></pre><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es ma"><img src="../Images/2dd9126081247b210fc6511b80503a6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mMhbSQXCS_aQdmrRaqs_xA.png"/></div></div></figure><p id="e252" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您应该从日志中看到图像正在下载并调出环境。</p><h2 id="29f7" class="kz jl hi bd jm la lb lc jq ld le lf ju iq lg lh jy iu li lj kc iy lk ll kg lm bi translated">暴露端口</h2><p id="d0b4" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq kw is it iu kx iw ix iy ky ja jb jc hb bi translated">编辑流浪者文件，并将以下行添加到文件中:-</p><pre class="kj kk kl km fd ls lr lt lu aw lv bi"><span id="0fe4" class="kz jl hi lr b fi lw lx l ly lz">config.vm.network "forwarded_port", guest: 8080, host: 8080</span></pre><p id="8d06" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您应该在配置部分添加如下内容:-</p><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es mb"><img src="../Images/4e8375a58729d42a107c75c8773f4196.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8AHqz_Y0redvrfZqdKKH-w.png"/></div></div></figure><p id="4885" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">运行命令<code class="du lo lp lq lr b">vagrant reload</code>来更新虚拟环境，您应该看到它暴露了如下所示的端口<code class="du lo lp lq lr b">8080</code></p><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es mc"><img src="../Images/5b0db368ba7ffe4df62dd2151e8c498a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f4OVQPxFnVblEzUF_bryGw.png"/></div></div></figure><h2 id="3264" class="kz jl hi bd jm la lb lc jq ld le lf ju iq lg lh jy iu li lj kc iy lk ll kg lm bi translated">登录Ubuntu</h2><p id="25a3" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq kw is it iu kx iw ix iy ky ja jb jc hb bi translated">运行命令<code class="du lo lp lq lr b">vagrant ssh</code>登录虚拟机。要注册ECS实例，您需要运行<code class="du lo lp lq lr b">root</code>模式，运行<code class="du lo lp lq lr b">sudo su</code>进入超级用户模式。</p><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es md"><img src="../Images/35e1a99a09cac066c48efba7b36cbb3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dIm1ondE8-_9qR2LN87pAA.png"/></div></div></figure></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><h1 id="272c" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">设置ECS集群并注册外部实例</h1><p id="b658" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq kw is it iu kx iw ix iy ky ja jb jc hb bi translated">我们已经设置了虚拟环境，现在我们需要创建一个新的ECS群集并获取注册设置脚本。</p><h2 id="cd1d" class="kz jl hi bd jm la lb lc jq ld le lf ju iq lg lh jy iu li lj kc iy lk ll kg lm bi translated">创建ECS集群</h2><p id="da4a" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq kw is it iu kx iw ix iy ky ja jb jc hb bi translated">转到ECS控制台，使用仅联网选项创建一个群集，该选项用于<code class="du lo lp lq lr b">AWS Fargate or External instance capacity</code>。</p><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es me"><img src="../Images/97355bc09d69c3ff468c339fe2c9679b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fYQegYPkJkmN8sCxrCeLoA.png"/></div></div></figure><p id="59c4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这个步骤中，给它一个名字<code class="du lo lp lq lr b">default</code>，不要点击这个选项。完成创建集群的步骤。</p><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es mf"><img src="../Images/4c6fec59d6fe4e5dd23453820f5a1037.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VNNjhTLDO8NfWOdjP8vLMw.png"/></div></div></figure><h2 id="bca3" class="kz jl hi bd jm la lb lc jq ld le lf ju iq lg lh jy iu li lj kc iy lk ll kg lm bi translated">注册外部实例</h2><p id="0375" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq kw is it iu kx iw ix iy ky ja jb jc hb bi translated">进入你的集群页面，转到<code class="du lo lp lq lr b">ECS Instances</code>选项卡，你会看到一个选项<code class="du lo lp lq lr b">Register External Instances</code>。</p><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es mg"><img src="../Images/02da9b91e3bd34eac4d0e1c2a5e43f69.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Fyk1AOdkTmwzBZjQkUaYLA.png"/></div></div></figure><p id="bdec" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">点击<code class="du lo lp lq lr b">Register External Instances</code>进入注册页面。</p><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es mh"><img src="../Images/cbd1c9112e1369faa8ade43fa3139814.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N2VLrYDAKovx3DeYZCqBDQ.png"/></div></div></figure><p id="071e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在<code class="du lo lp lq lr b">Register external instances</code>页面中，按照以下选项点击<code class="du lo lp lq lr b">Next step</code>。</p><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es mi"><img src="../Images/6e4e55abb3c5515d956a8f9ee7d44a76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RpyRXW4DlN4ePMmBfqOIKQ.png"/></div></div></figure><p id="2a98" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在步骤2中，页面将提供shell命令来注册外部实例。复制脚本并在<code class="du lo lp lq lr b">Vagrant terminal.</code>中运行</p><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es mj"><img src="../Images/ae43d9b050d3cf7915863be0e9c68e56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rx8YmnsLRAitWg2yJAlRyg.png"/></div></div></figure><p id="5b46" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该脚本将下载注册实例所需的组件和依赖项。等到它结束。</p><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es mk"><img src="../Images/473db8af443977cc46edc955f69b8645.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KfcBlpAGITcTOS2OryYdvA.png"/></div></div></figure><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es ml"><img src="../Images/3a2abadc41f96834fe8c9b5078c8148a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SlQicCHshGcDje1dznB-ig.png"/></div></div></figure><p id="52a1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">完成后，您可以运行<code class="du lo lp lq lr b">docker ps</code>来检查ECS代理是否正在运行。</p><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es mm"><img src="../Images/39e6636ca2e94b3d9601edfe61c63f50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P3czUIvVSmFPlWGmO7xWLw.png"/></div></div></figure><p id="f675" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">返回ECS控制台页面，您应该看到一个ECS实例已注册，单击该实例可了解更多详细信息。</p><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es mn"><img src="../Images/695a0e86fd9c9df1696e025df015410c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IWyOB_uD6kJoUE4wBODKSg.png"/></div></div></figure></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><h1 id="8962" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">(附加)启动从AWS到实例的远程会话</h1><p id="779b" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq kw is it iu kx iw ix iy ky ja jb jc hb bi translated">AWS利用<a class="ae ln" href="https://docs.aws.amazon.com/systems-manager/latest/userguide/fleet.html" rel="noopener ugc nofollow" target="_blank"> AWS Fleet Manager </a>来管理实例，您可以从AWS控制台启动一个远程会话来对实例进行故障排除，而无需SSH到您的实际机器。</p><p id="1828" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">单击以<code class="du lo lp lq lr b">mi-.....</code>开始的实例id，它会将您带到车队管理器页面。</p><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es mo"><img src="../Images/b13ca92350f74cc1138efc3410d764b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GOjxJTFR111fy0RqkBqvYg.png"/></div></div></figure><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es mp"><img src="../Images/687e4442af4ca25f71812820b6533a2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nVA0CgB6_49D52TVxx_4YA.png"/></div></div></figure><p id="b422" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当你点击<code class="du lo lp lq lr b">Instance actinons</code>中的<code class="du lo lp lq lr b">Start session</code>时，它将激活会话管理器</p><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es mq"><img src="../Images/f1f0263e95cba550d2176f1bf208a13c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9YqMjCZ_3AMUF11Al2kXIg.png"/></div></div></figure><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es mr"><img src="../Images/10a8c0a9c5563a4c2dee0653596e0ef0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WHJ8JLNgsX4ClR3Fe1b30A.png"/></div></div></figure></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><h1 id="e281" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">创建ECS服务</h1><p id="62ed" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq kw is it iu kx iw ix iy ky ja jb jc hb bi translated">我们将创建一个ECS服务，在新注册的实例中运行。</p><h2 id="b73e" class="kz jl hi bd jm la lb lc jq ld le lf ju iq lg lh jy iu li lj kc iy lk ll kg lm bi translated">创建新的任务定义</h2><p id="6b34" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq kw is it iu kx iw ix iy ky ja jb jc hb bi translated">使用以下设置创建新的Nginx任务定义。创建外部启动类型的新任务定义。</p><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es ms"><img src="../Images/5986f7e1b32ab48e9fa95385d5882d52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aplR2QWsCqWuNDh3hSTkzg.png"/></div></div></figure><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es mt"><img src="../Images/ce86fe6e22472423f6d2f57ae63fc274.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p3537ypBhzQEQGmnkkh_og.png"/></div></div></figure><p id="f270" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为任务和任务执行使用正确的角色，这里的<a class="ae ln" href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/task_execution_IAM_role.html" rel="noopener ugc nofollow" target="_blank">可以参考</a>。</p><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es mu"><img src="../Images/23a84ff29c94a33fc8925c863e4a6455.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yw2CJkxM70-A8t9pfixn1w.png"/></div></div></figure><p id="3d96" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">添加具有以下设置的容器。</p><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es mv"><img src="../Images/0e5924dfbaf88bb5e064277200bce18c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x6OWqRExde7vmO96yrWS6g.png"/></div></div></figure><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es mw"><img src="../Images/65b63c037ec525241819e8b92ff94616.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p56g6JYPtSwe1XRoWsw7pA.png"/></div></div></figure><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es mx"><img src="../Images/7130735c617fcc45bb51166aee515c84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HTqB_a0QoSFb4K1C_gOlJw.png"/></div></div></figure><h2 id="44d7" class="kz jl hi bd jm la lb lc jq ld le lf ju iq lg lh jy iu li lj kc iy lk ll kg lm bi translated">创建Nginx服务</h2><p id="797d" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq kw is it iu kx iw ix iy ky ja jb jc hb bi translated">在任务定义之后，我们应该使用下面的任务创建一个新的服务。</p><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es my"><img src="../Images/8b2f19b676d5eac517eee4c3e353c239.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FML_N0JXNLBLAdKAHXKASw.png"/></div></div></figure><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es mz"><img src="../Images/7ce3c02837cf7b3ca5f93c3030f0ee71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9eKOkd3yZphkG_310CjR_Q.png"/></div></div></figure><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es na"><img src="../Images/ea06ec4bbb43d41c1f9236ce2f956d7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QAblbew_As6ud4eQtHrTpg.png"/></div></div></figure><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es nb"><img src="../Images/9c899f269fadbfc9ce61fa76d5160795.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jq1hanGrsfxpbfXVRsup-Q.png"/></div></div></figure><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es nc"><img src="../Images/25ddc1f2a2bc9a1973bce71b766dfd27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lOLEHahl9WnR7u7SBvRQcA.png"/></div></div></figure><p id="db90" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">几秒钟后，您应该会看到服务已经启动，并且能够在控制台中查看日志。</p><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es nd"><img src="../Images/4b857f398ad81ede54eb15f33daae6e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*63GtCRLW-M-oYQwdoqnsuw.png"/></div></div></figure><h2 id="4051" class="kz jl hi bd jm la lb lc jq ld le lf ju iq lg lh jy iu li lj kc iy lk ll kg lm bi translated">测试Nginx</h2><p id="1840" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq kw is it iu kx iw ix iy ky ja jb jc hb bi translated">现在我们可以用<code class="du lo lp lq lr b">http://localhost:8080</code>浏览Nginx-Service local</p><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es ne"><img src="../Images/6194b504186be901a1a0d14fdb272cd1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7yAwWMDFz66oFNFzoxqFNw.png"/></div></div></figure></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><h1 id="cf46" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">打扫</h1><p id="c5c7" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq kw is it iu kx iw ix iy ky ja jb jc hb bi translated">在您对研究感到满意之后，您可以从ECS实例页面中取消注册实例，并运行命令<code class="du lo lp lq lr b">vagrant destroy</code>来清理虚拟机。</p></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><h1 id="8263" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">讨论</h1><h2 id="1bbb" class="kz jl hi bd jm la lb lc jq ld le lf ju iq lg lh jy iu li lj kc iy lk ll kg lm bi translated">用例</h2><p id="bab9" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq kw is it iu kx iw ix iy ky ja jb jc hb bi translated">ECS Anywhere使用相同的ECS控制平面简化了容器管理，降低了在本地环境中管理容器的要求。如果您现有的团队已经在容器管理中使用ECS，您可以使用相同的工具和CICD工作流来管理数据中心的内容。</p><h2 id="f234" class="kz jl hi bd jm la lb lc jq ld le lf ju iq lg lh jy iu li lj kc iy lk ll kg lm bi translated">出站连接要求</h2><p id="9dec" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq kw is it iu kx iw ix iy ky ja jb jc hb bi translated">ECS Anywhere需要与AWS平台的稳定连接，以下出站连接是<code class="du lo lp lq lr b">ap-northeast-1</code>区域所需的，由ECS API和代理连接、CloudWatch API、S3端点、SSM、EC2消息API和AWS Fleet API组成，如果您的环境有严格的规定，您需要提交以下列表以供审查和加入白名单:-</p><ul class=""><li id="5c2e" class="nf ng hi ih b ii ij im in iq nh iu ni iy nj jc nk nl nm nn bi translated">ecs.ap-northeast-1.amazonaws.com。</li><li id="b7ce" class="nf ng hi ih b ii no im np iq nq iu nr iy ns jc nk nl nm nn bi translated">ecs-t-*。ap-northeast-1.amazonaws.com。</li><li id="d4bf" class="nf ng hi ih b ii no im np iq nq iu nr iy ns jc nk nl nm nn bi translated">ecs-a-*。ap-northeast-1.amazonaws.com。</li><li id="510b" class="nf ng hi ih b ii no im np iq nq iu nr iy ns jc nk nl nm nn bi translated">ec2messages.ap-northeast-1.amazonaws.com。</li><li id="c87c" class="nf ng hi ih b ii no im np iq nq iu nr iy ns jc nk nl nm nn bi translated">ssm.ap-northeast-1.amazonaws.com。</li><li id="4327" class="nf ng hi ih b ii no im np iq nq iu nr iy ns jc nk nl nm nn bi translated">s3.ap-northeast-1.amazonaws.com。</li><li id="2c80" class="nf ng hi ih b ii no im np iq nq iu nr iy ns jc nk nl nm nn bi translated">ssmmessages.ap-northeast-1.amazonaws.com。</li><li id="518b" class="nf ng hi ih b ii no im np iq nq iu nr iy ns jc nk nl nm nn bi translated">amazon-ecs-agent.s3.amazonaws.com。</li><li id="01fe" class="nf ng hi ih b ii no im np iq nq iu nr iy ns jc nk nl nm nn bi translated">AWS-fleet-manager-artifacts-AP-northeast-1 . S3 . AP-northeast-1 . Amazon AWS . com</li><li id="5429" class="nf ng hi ih b ii no im np iq nq iu nr iy ns jc nk nl nm nn bi translated">s3-r-w.ap-northeast-1.amazonaws.com。</li><li id="a12d" class="nf ng hi ih b ii no im np iq nq iu nr iy ns jc nk nl nm nn bi translated">s3-w.us-east-1.amazonaws.com。</li></ul><h2 id="4483" class="kz jl hi bd jm la lb lc jq ld le lf ju iq lg lh jy iu li lj kc iy lk ll kg lm bi translated">Ubuntu和Docker出站要求</h2><p id="5b4f" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq kw is it iu kx iw ix iy ky ja jb jc hb bi translated">尽管具体情况具体分析，但是如果您的机器是Ubuntu，并且您的docker映像存储在Docker中，那么您还需要以下出站连接</p><ul class=""><li id="1eeb" class="nf ng hi ih b ii ij im in iq nh iu ni iy nj jc nk nl nm nn bi translated">archive.ubuntu.com。</li><li id="e3b0" class="nf ng hi ih b ii no im np iq nq iu nr iy ns jc nk nl nm nn bi translated">security.ubuntu.com。</li><li id="9765" class="nf ng hi ih b ii no im np iq nq iu nr iy ns jc nk nl nm nn bi translated">download.docker.com。</li></ul><h2 id="3bd7" class="kz jl hi bd jm la lb lc jq ld le lf ju iq lg lh jy iu li lj kc iy lk ll kg lm bi translated">支撑平台</h2><p id="5c3f" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq kw is it iu kx iw ix iy ky ja jb jc hb bi translated">在撰写本文时，ECS Anywhere仅支持Linux环境。尽管ECS代理支持Window平台，但外部实例注册目前不支持Window。希望今年我们能看到这一点。在撰写本文时，只有以下Linux发行版支持</p><ul class=""><li id="55e6" class="nf ng hi ih b ii ij im in iq nh iu ni iy nj jc nk nl nm nn bi translated">CentOS</li><li id="3b07" class="nf ng hi ih b ii no im np iq nq iu nr iy ns jc nk nl nm nn bi translated">RHEL</li><li id="40d7" class="nf ng hi ih b ii no im np iq nq iu nr iy ns jc nk nl nm nn bi translated">一种男式软呢帽</li><li id="57ec" class="nf ng hi ih b ii no im np iq nq iu nr iy ns jc nk nl nm nn bi translated">OpenSUSE</li><li id="fbaa" class="nf ng hi ih b ii no im np iq nq iu nr iy ns jc nk nl nm nn bi translated">人的本质</li><li id="c5a2" class="nf ng hi ih b ii no im np iq nq iu nr iy ns jc nk nl nm nn bi translated">一种自由操作系统</li></ul><h2 id="2e58" class="kz jl hi bd jm la lb lc jq ld le lf ju iq lg lh jy iu li lj kc iy lk ll kg lm bi translated">限制</h2><p id="b973" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq kw is it iu kx iw ix iy ky ja jb jc hb bi translated">如果将ECS Anywhere与Docker Swarm或Kubernetes相比较，有许多空白需要填补，例如ask服务网格、负载平衡、服务发现和秘密。</p><h2 id="209d" class="kz jl hi bd jm la lb lc jq ld le lf ju iq lg lh jy iu li lj kc iy lk ll kg lm bi translated">费用</h2><p id="2857" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq kw is it iu kx iw ix iy ky ja jb jc hb bi translated">ECS Anywhere对每个托管注册实例每小时收费0.01025美元。</p></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><h1 id="ce11" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">拿走</h1><p id="a8ec" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq kw is it iu kx iw ix iy ky ja jb jc hb bi translated">容器应用程序很简单，但是管理容器应用程序很有挑战性。当考虑在本地环境中管理容器的使用情形时，除了Kubernetes或Docker Swarm的高要求设置之外，AWS ECS Anywhere将是管理容器和将ECS控制平面扩展到您的数据中心的一个简单和轻量级的选项。</p></div></div>    
</body>
</html>