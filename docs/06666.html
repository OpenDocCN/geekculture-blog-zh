<html>
<head>
<title>How to compare two class objects?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何比较两个类对象？</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/how-to-compare-two-class-objects-843d63448bde?source=collection_archive---------35-----------------------#2021-08-25">https://medium.com/geekculture/how-to-compare-two-class-objects-843d63448bde?source=collection_archive---------35-----------------------#2021-08-25</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="b60c" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">不仅仅是比较平等，还有不同的部分</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/f05ad263b74109d2a399d9e34428466a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WAKvoGtKJRXBWBXpINkObQ.png"/></div></div></figure><p id="6344" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">我们所经历的用于比较两个对象是否相等的方法被用于覆盖“对象”。等于”。这样我们就可以简单的定义自己的逻辑来比较两个对象是否相等？</p><pre class="iy iz ja jb fd kf kg kh ki aw kj bi"><span id="d034" class="kk kl hi kg b fi km kn l ko kp">// SomeClass.cs<br/>public class SomeClass{    <br/>    public string PropertyName1 {get; set;}<br/>    // ...</span><span id="91e3" class="kk kl hi kg b fi kq kn l ko kp"><br/>    public override bool Equals(object obj){<br/>        var other = obj as SomeClass;<br/>        if (other == null){<br/>            return false;<br/>        }<br/>        </span><span id="83a8" class="kk kl hi kg b fi kq kn l ko kp">        if(PropertyName1 != other.PropertyName1){<br/>            return false;<br/>        }<br/>        return true;<br/>    } </span><span id="2330" class="kk kl hi kg b fi kq kn l ko kp">}</span><span id="5407" class="kk kl hi kg b fi kq kn l ko kp">// in some function or block<br/>var class1 = new SomeClass {PropertyName1 = "Name1"};<br/>var class2 = new SomeClass {PropertyName1 = "Name2"};</span><span id="037d" class="kk kl hi kg b fi kq kn l ko kp">// should return false<br/>var requal = class1.Equals(class2);</span></pre><p id="4cfa" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">这个故事我们会讲得更深入。我们想讨论如何比较两种不同类型的物体，并找出它们之间的区别。假设我们有下面的类:</p><pre class="iy iz ja jb fd kf kg kh ki aw kj bi"><span id="b7dc" class="kk kl hi kg b fi km kn l ko kp">public class <em class="kr">ClassBase</em> {<br/>   public string <strong class="kg hj">MESSAGE_ID</strong> { get; set; }</span><span id="f8df" class="kk kl hi kg b fi kq kn l ko kp">   public string <strong class="kg hj">MSG_TYPE</strong> { get; set; }</span><span id="8228" class="kk kl hi kg b fi kq kn l ko kp">   public string <strong class="kg hj">PO_NO</strong> { get; set; }</span><span id="f613" class="kk kl hi kg b fi kq kn l ko kp">   public DateTime <strong class="kg hj">CREATE_TIME</strong> { get; set; }<br/>}</span><span id="0114" class="kk kl hi kg b fi kq kn l ko kp">// we have class1 inherit ClassBase<br/>public class <em class="kr">Class1</em> : ClassBase {<br/>   public string <strong class="kg hj">PO_LINE</strong> { get; set; }</span><span id="b75f" class="kk kl hi kg b fi kq kn l ko kp">   public string <strong class="kg hj">GPN</strong> { get; set; }</span><span id="a550" class="kk kl hi kg b fi kq kn l ko kp">   public string <strong class="kg hj">QTY</strong> { get; set; }</span><span id="690a" class="kk kl hi kg b fi kq kn l ko kp">   public string <strong class="kg hj">PO_CHANGE_TYPE</strong> { get; set; }</span><span id="0011" class="kk kl hi kg b fi kq kn l ko kp">   public string Price { get; set; }<br/>}</span><span id="46ce" class="kk kl hi kg b fi kq kn l ko kp">// we have class2 inherit ClassBase<br/>public class <em class="kr">Class2</em> : ClassBase {<br/>    public string ICN { get; set; }</span><span id="bf6e" class="kk kl hi kg b fi kq kn l ko kp">   public string ICN_855_865 { get; set; }</span><span id="4e41" class="kk kl hi kg b fi kq kn l ko kp">   public string <strong class="kg hj">PO_TYPE</strong> { get; set; }</span><span id="d1ce" class="kk kl hi kg b fi kq kn l ko kp">  public string PRODUCT_TYPE { get; set; }</span><span id="a3d2" class="kk kl hi kg b fi kq kn l ko kp">  public string BLANKET_PO_BEGIN_DATE { get; set; }</span><span id="4f04" class="kk kl hi kg b fi kq kn l ko kp">  public string BLANKET_PO_END_DATE { get; set; }</span><span id="9771" class="kk kl hi kg b fi kq kn l ko kp">  public string BILL_TO_COUNTRY_CODE { get; set; }</span><span id="e9d4" class="kk kl hi kg b fi kq kn l ko kp">  public string <strong class="kg hj">PO_CHANGE_TYPE</strong> { get; set; }</span><span id="b545" class="kk kl hi kg b fi kq kn l ko kp">  public string <strong class="kg hj">PO_LINE</strong> { get; set; }</span><span id="b931" class="kk kl hi kg b fi kq kn l ko kp">  public string <strong class="kg hj">GPN </strong>{ get; set; }</span><span id="1db9" class="kk kl hi kg b fi kq kn l ko kp">  public string FOCTORY_PART_NO { get; set; }</span><span id="2861" class="kk kl hi kg b fi kq kn l ko kp">  public string VENDOR_PART_NO { get; set; }</span><span id="7327" class="kk kl hi kg b fi kq kn l ko kp">  public string <strong class="kg hj">QTY</strong> { get; set; }</span><span id="1698" class="kk kl hi kg b fi kq kn l ko kp">  public string UOM { get; set; }</span><span id="56ad" class="kk kl hi kg b fi kq kn l ko kp">  public string DELIVERY_REQ { get; set; }</span><span id="a644" class="kk kl hi kg b fi kq kn l ko kp">  public bool Valid { get; set; }<br/>}</span></pre><blockquote class="ks kt ku"><p id="56a7" class="jj jk kr jl b jm jn ij jo jp jq im jr kv jt ju jv kw jx jy jz kx kb kc kd ke hb bi translated">我们将交集属性标记为<strong class="jl hj">粗体</strong>字体<strong class="jl hj">。</strong></p></blockquote><p id="ded6" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">到目前为止，我们最关心的是那些交叉路口是相同的还是不同的？我们可以通过第三方库的以下示例代码简单地比较这两个实例:<a class="ae ky" href="https://github.com/ValeraT1982/ObjectsComparer" rel="noopener ugc nofollow" target="_blank">对象比较器</a>。</p><pre class="iy iz ja jb fd kf kg kh ki aw kj bi"><span id="bb23" class="kk kl hi kg b fi km kn l ko kp">// declare and initial class1<br/>var class1 = new Class1 () {<br/>    PO_LINE = "1",<br/>    MESSAGE_ID = "TEST1",<br/>    PO_NO = "12345678",<br/>    GPN = "ABC-123456",<br/>    QTY = "10",<br/>    PO_CHANGE_TYPE = "C",<br/>    MSG_TYPE = "850"<br/>};</span><span id="33fb" class="kk kl hi kg b fi kq kn l ko kp">// declare and initial class2<br/>var class2 = new Class2 () {<br/>    PO_LINE = "2",<br/>    MESSAGE_ID = "TEST2",<br/>    PO_NO = "12345678",<br/>    GPN = "ABC-123456",<br/>    QTY = "20",<br/>    PO_CHANGE_TYPE = "D",<br/>    MSG_TYPE = "860",<br/>    ICN = "000000001"<br/>};</span><span id="e814" class="kk kl hi kg b fi kq kn l ko kp">// convert to expando object<br/>var expandObj1 = JsonConvert.DeserializeObject&lt;ExpandoObject&gt; (JsonConvert.SerializeObject (class1));<br/>var expandObj2 = JsonConvert.DeserializeObject&lt;ExpandoObject&gt; (JsonConvert.SerializeObject (class2));</span><span id="7c96" class="kk kl hi kg b fi kq kn l ko kp">var comparer = new ObjectsComparer.Comparer (new ComparisonSettings {<br/>    // null and empty error lists are equal<br/>    EmptyAndNullEnumerablesEqual = true<br/>});</span><span id="364a" class="kk kl hi kg b fi kq kn l ko kp">IEnumerable&lt;Difference&gt; differences;</span><span id="865e" class="kk kl hi kg b fi kq kn l ko kp">// compare and find the differences<br/>var equal = comparer.Compare (expandObj1, expandObj2, out differences);</span></pre><p id="72e4" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">结果如下所示:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es kz"><img src="../Images/0141e41b020708e5265044fc2d4a3bae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1252/format:webp/1*pj5WfpbPWNUa5ajz0qNHcA.png"/></div><figcaption class="la lb et er es lc ld bd b be z dx">Result of Difference</figcaption></figure><pre class="iy iz ja jb fd kf kg kh ki aw kj bi"><span id="b258" class="kk kl hi kg b fi km kn l ko kp">Difference Result<br/>------------------------------------------<br/>🗝️ Intersection but value not consistency -&gt; (A) [Yellow Block]<br/>🗝️ Member(s) only in class1 -&gt; (B) [Purple Block]<br/>🗝️ Member(s) only in class2 -&gt; (C) [Orange Block]</span></pre><blockquote class="ks kt ku"><p id="3e4f" class="jj jk kr jl b jm jn ij jo jp jq im jr kv jt ju jv kw jx jy jz kx kb kc kd ke hb bi translated">这里的关键点是，我们将这两个对象转换成“ExpandoObject ”,这样库将为我们处理剩下的比较过程。</p></blockquote><h1 id="fa4f" class="le kl hi bd lf lg lh li lj lk ll lm ln io lo ip lp ir lq is lr iu ls iv lt lu bi translated">参考</h1><ul class=""><li id="d133" class="lv lw hi jl b jm lx jp ly js lz jw ma ka mb ke mc md me mf bi translated"><a class="ae ky" href="https://github.com/ValeraT1982/ObjectsComparer" rel="noopener ugc nofollow" target="_blank">https://github.com/ValeraT1982/ObjectsComparer</a></li><li id="3f64" class="lv lw hi jl b jm mg jp mh js mi jw mj ka mk ke mc md me mf bi translated"><a class="ae ky" href="https://docs.microsoft.com/en-us/dotnet/api/system.dynamic.expandoobject?view=net-5.0" rel="noopener ugc nofollow" target="_blank">https://docs . Microsoft . com/en-us/dot net/API/system . dynamic . expand object？view=net-5.0 </a></li><li id="5a25" class="lv lw hi jl b jm mg jp mh js mi jw mj ka mk ke mc md me mf bi translated"><a class="ae ky" href="https://grantwinney.com/how-to-compare-two-objects-testing-for-equality-in-c/" rel="noopener ugc nofollow" target="_blank">https://grant winney . com/how-to-compare-two-objects-testing-for-equality-in-c/</a></li></ul></div></div>    
</body>
</html>