<html>
<head>
<title>How to install OpenVPN using Docker</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Docker安装OpenVPN</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/how-to-install-openvpn-using-docker-c54996cd8086?source=collection_archive---------0-----------------------#2021-10-01">https://medium.com/geekculture/how-to-install-openvpn-using-docker-c54996cd8086?source=collection_archive---------0-----------------------#2021-10-01</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/eb86bb289c2bfe120a0b2f4e7dbe9536.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ezrvwTKkjB0HMCXq.png"/></div></div></figure><p id="e373" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在今天这个时代，随着限制的施加，有一个使用VPN服务器的巨大需求。有许多免费和付费的VPN提供商，但这些提供商也需要一定程度的信任，有时看起来也不可靠。</p><p id="fd0d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">那么，有一个更可靠、更可控的选择:为什么不托管自己的VPN服务器呢！你可能认为这很难做到。但是随着容器化技术的发展，比如今天的Docker和一个可爱的社区，它可能会弥补这个差距，并使它更容易在几分钟内完成。</p><p id="25e0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在本文中，我们将看到使用Kyle Manna准备的docker文件来开始使用自己的OpenVPN服务器是多么容易。哦！我差点忘了你需要一个安装docker的服务器来开始。我会推荐你选择的任何一家供应商使用云。</p><p id="7423" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">首先，让我们使用git来克隆存储库</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="2b9c" class="jx jy hi jt b fi jz ka l kb kc">git clone <a class="ae kd" href="https://github.com/kylemanna/docker-openvpn.git" rel="noopener ugc nofollow" target="_blank">https://github.com/kylemanna/docker-openvpn.git</a></span></pre><p id="6723" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们可以更改目录并构建映像</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="405d" class="jx jy hi jt b fi jz ka l kb kc">cd docker-openvpn &amp;&amp; docker built -t open-vpn-server .</span></pre><p id="4613" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后，我们将创建一个卷映射目录来存储配置文件。</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="37d0" class="jx jy hi jt b fi jz ka l kb kc">mkdir vpn-data &amp;&amp; touch vpn-data/vars</span></pre><p id="e4fc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们现在将使用OpenVPN服务器来生成配置文件</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="a3c7" class="jx jy hi jt b fi jz ka l kb kc">docker run -v $PWD/vpn-data:/etc/openvpn --rm open-vpn-server ovpn_genconfig -u udp://IP_ADDRESS:3000</span></pre><p id="1cdd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在上面的命令中，添加服务器IP地址来代替IP_ADDRESS。</p><p id="d007" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，我们将设置我们的密钥。我们将生成CA证书和私钥。我们将被要求输入保护私钥的密码。</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="9f17" class="jx jy hi jt b fi jz ka l kb kc">docker run -v $PWD/vpn-data:/etc/openvpn --rm -it open-vpn-server ovpn_initpki</span></pre><p id="b78d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，我们将利用配置文件运行VPN服务器</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="3965" class="jx jy hi jt b fi jz ka l kb kc">docker run -v $PWD/vpn-data:/etc/openvpn -d -p 3000:1194/udp --cap-add=NET_ADMIN open-vpn-server</span></pre><p id="3d5b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们还没有创建任何用户，我们可以创建多个用户来使用我们新设置的OpenVPN服务器。我们现在将创建第一个使用服务器的用户</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="ea2d" class="jx jy hi jt b fi jz ka l kb kc">docker run -v $PWD/vpn-data:/etc/openvpn --rm -it open-vpn-server easyrsa build-client-full firstuser nopass</span></pre><p id="a432" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将用户称为“firstuser ”,并使用nopass选项禁用了密码验证。如果需要设置密码，可以删除nopass标志。</p><p id="17ef" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们还将生成一个配置文件，我们将把它发送给用户以建立到VPN服务器的连接</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="494f" class="jx jy hi jt b fi jz ka l kb kc">docker run -v $PWD/vpn-data:/etc/openvpn --rm open-vpn-server ovpn_getclient firstuser &gt; firstuser.ovpn</span></pre><p id="a079" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后，您可以使用这个文件，通过OpenVPN Connect应用程序建立到VPN服务器的连接，OpenVPN Connect应用程序在大多数平台上都可用。</p><p id="934f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">是的，就这么简单。😉</p></div></div>    
</body>
</html>