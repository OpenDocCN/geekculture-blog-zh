<html>
<head>
<title>RStudio Server, Linux(Ubuntu), WSL(Windows Subsystem for Linux), and Docker</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">RStudio服务器、Linux(Ubuntu)、WSL(Linux的Windows子系统)和Docker</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/rstudio-server-linux-ubuntu-wsl-windows-subsystem-for-linux-and-docker-ac0a855ed20a?source=collection_archive---------29-----------------------#2021-08-16">https://medium.com/geekculture/rstudio-server-linux-ubuntu-wsl-windows-subsystem-for-linux-and-docker-ac0a855ed20a?source=collection_archive---------29-----------------------#2021-08-16</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="0b71" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果我想使用RStudio服务器，我需要Linux作为操作系统。像我这样的Windows用户需要为RStudio Server设置<strong class="ih hj"> WSL </strong> (Windows子系统for Linux)。首先，确定你的Windows是否是最新版本。</p><ol class=""><li id="d032" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">设置<strong class="ih hj"> WSL </strong></li></ol><p id="4ecb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在Windows搜索中查找<strong class="ih hj">打开或关闭Windows功能</strong>。</p><p id="3242" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">检查<code class="du jm jn jo jp b">Virtual Machine Platform</code>和<code class="du jm jn jo jp b">Windows Subsystem for Linux</code>。然后重启你的设备。</p><p id="7ec0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.将WSL版本更改为<strong class="ih hj"> 2 </strong></p><pre class="jq jr js jt fd ju jp jv jw aw jx bi"><span id="7b75" class="jy jz hi jp b fi ka kb l kc kd"># In the Windows PowerShell as Administrator</span><span id="37d6" class="jy jz hi jp b fi ke kb l kc kd">wsl --set-default-version 2 </span><span id="b113" class="jy jz hi jp b fi ke kb l kc kd"># See https://aka.ms/wsl2kernel if you have an issue</span></pre><p id="5102" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.安装<strong class="ih hj"> Ubuntu </strong></p><p id="9ec7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在微软商店找到在Windows上运行Linux的<strong class="ih hj"/>。点击下载<strong class="ih hj"> Ubuntu </strong></p><p id="302a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">4.设置<strong class="ih hj"> Ubuntu账户</strong></p><p id="a558" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">运行你已经安装的Ubuntu，输入你想要的用户名和密码。这些用户名和密码将在RStudio服务器中使用。</p><p id="bf69" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">5.更新Ubuntu</p><pre class="jq jr js jt fd ju jp jv jw aw jx bi"><span id="cfad" class="jy jz hi jp b fi ka kb l kc kd"># In the Ubuntu</span><span id="57f2" class="jy jz hi jp b fi ke kb l kc kd">sudo apt update<br/>sudo apt upgrade -y</span><span id="0d93" class="jy jz hi jp b fi ke kb l kc kd"># You cannot use ctrl+V in the Ubuntu. Instead Use the right click</span></pre><p id="8777" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">6.安装最新的R和RStudio服务器</p><pre class="jq jr js jt fd ju jp jv jw aw jx bi"><span id="5447" class="jy jz hi jp b fi ka kb l kc kd"># See https://cran.r-project.org/bin/linux/ubuntu/   </span><span id="fe3b" class="jy jz hi jp b fi ke kb l kc kd">sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys E298A3A825C0D65DFD57CBB651716619E084DAB9</span><span id="8ce6" class="jy jz hi jp b fi ke kb l kc kd">sudo add-apt-repository 'deb https://cloud.r-project.org/bin/linux/ubuntu focal-cran40/' </span><span id="c3c6" class="jy jz hi jp b fi ke kb l kc kd">sudo apt update</span><span id="8f1a" class="jy jz hi jp b fi ke kb l kc kd">sudo apt install -y r-base r-base-core r-recommended r-base-dev gdebi-core build-essential libcurl4-gnutls-dev libxml2-dev libssl-dev <br/></span><span id="8178" class="jy jz hi jp b fi ke kb l kc kd">## Install RStudio Server ##</span><span id="256a" class="jy jz hi jp b fi ke kb l kc kd">wget https://rstudio.org/download/latest/stable/server/bionic/rstudio-server-latest-amd64.deb</span><span id="2cee" class="jy jz hi jp b fi ke kb l kc kd">sudo gdebi rstudio-server-latest-amd64.deb</span></pre><p id="42be" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">7.运行RStudio服务器</p><pre class="jq jr js jt fd ju jp jv jw aw jx bi"><span id="c6f0" class="jy jz hi jp b fi ka kb l kc kd">sudo rstudio-server start</span></pre><p id="9fe0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在网络浏览器中，<code class="du jm jn jo jp b">http://localhost:8787</code>，输入你已经为Ubuntu创建的用户名和密码。</p><p id="d77a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">8.提示并关闭RStudio服务器</p><pre class="jq jr js jt fd ju jp jv jw aw jx bi"><span id="c09c" class="jy jz hi jp b fi ka kb l kc kd"># Some packages may cause an install issue. You may need an dependency. <br/># https://jeroen.cran.dev/V8/</span><span id="db40" class="jy jz hi jp b fi ke kb l kc kd">sudo apt-get install -y libv8-dev</span><span id="5eef" class="jy jz hi jp b fi ke kb l kc kd"># Then install R package V8</span><span id="759a" class="jy jz hi jp b fi ke kb l kc kd">## To Close RStudio Server ##</span><span id="4678" class="jy jz hi jp b fi ke kb l kc kd">sudo rstudio-server stop</span></pre><p id="ed8c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">9.码头工人</p><p id="1dc6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在您可以使用RStudio服务器了。但是每次都需要打开Ubuntu，输入代码。当你关闭它的时候，你也需要在Ubuntu中输入代码。此外，当您需要使用R运行多台机器时，您可能想要高效的东西。<strong class="ih hj"> Docker </strong>可以是一个答案。下载<a class="ae kf" href="https://www.docker.com/" rel="noopener ugc nofollow" target="_blank"> Docker </a>。</p><p id="5b22" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">运行Docker。您可以在左侧面板中找到<strong class="ih hj">图像</strong>选项卡。Docker需要一个图像来运行，而不是文件。我们需要Rstudio图像。</p><p id="dccc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">转到<a class="ae kf" href="https://hub.docker.com/" rel="noopener ugc nofollow" target="_blank">按钮</a>。然后在搜索中输入<code class="du jm jn jo jp b">rocker</code>。你可以找到<code class="du jm jn jo jp b">rocker/rstudio</code>。复制<code class="du jm jn jo jp b">docker pull rocker/rstudio</code>，然后粘贴到Powershell中。</p><p id="d732" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你可以在docker的<strong class="ih hj">图片</strong>标签中找到<code class="du jm jn jo jp b">rocker/rstudio</code>。</p><p id="496a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">点击<strong class="ih hj">运行</strong>即可。在选项中，选择<strong class="ih hj">容器名称</strong>。比如“rstudio-1”。然后像1001一样配置4位数的<strong class="ih hj">本地主机</strong>。</p><p id="5be0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在你可以在<strong class="ih hj">容器/应用</strong>标签中看到<code class="du jm jn jo jp b">rstudio-1</code>。在网络浏览器中，键入<code class="du jm jn jo jp b">http://localhost:1001/</code>。ID和密码都是由图像创建者创建的rstudio。</p><p id="0e50" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">10.更新项目的图像</p><p id="c369" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用摇杆的图像创建R环境后，您需要创建自己的图像。</p><pre class="jq jr js jt fd ju jp jv jw aw jx bi"><span id="c38e" class="jy jz hi jp b fi ka kb l kc kd"># In the Powershell, check docker containers <br/>docker ps -a</span><span id="e2d1" class="jy jz hi jp b fi ke kb l kc kd">docker commit {Container ID} {New image name}<br/>#ex# docker commit 40b8d16b7dba rstudio-2</span></pre><p id="247b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在你可以在<strong class="ih hj">图像</strong>标签中找到<code class="du jm jn jo jp b">rstudio-2</code>。这个<code class="du jm jn jo jp b">rstudio-2</code>与您已经创建的环境相同。不需要在Ubuntu中输入代码就可以运行这个。如果你制作多个容器，你可以同时运行多个rs。</p><p id="185b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最初发布在<a class="ae kf" href="https://youngjoon5.github.io/" rel="noopener ugc nofollow" target="_blank">我的网站</a></p></div></div>    
</body>
</html>