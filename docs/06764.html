<html>
<head>
<title>Manipulating Arrays in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在JavaScript中操作数组</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/manipulating-arrays-in-javascript-dc07045d3dce?source=collection_archive---------4-----------------------#2021-08-29">https://medium.com/geekculture/manipulating-arrays-in-javascript-dc07045d3dce?source=collection_archive---------4-----------------------#2021-08-29</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/abe9b254859d6b44b56d0242d17759c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XCPNNcF9l8nliSJdVxNIGw.jpeg"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx">Image by Fojan Babaali</figcaption></figure><div class=""/><p id="eb98" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hy">数据处理</strong>本质上是指调整数据，使其更容易阅读、理解和使用。无论你是渲染用户界面，从应用程序接口获取数据，还是从文件中读取数据，你都必须在各种JavaScript应用程序中操作数据。</p><p id="e7a2" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">如果您在JavaScript项目上工作得足够多，您会注意到以<a class="ae js" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array" rel="noopener ugc nofollow" target="_blank">数组</a>的形式看到数据是非常常见的。毫无疑问，有大量关于JavaScript数组的资源，任何阅读本文<em class="jt">的人都可能知道如何对数组执行基本操作。</em>然而，本文的主要目的是向您介绍不同的JavaScript数组方法和实践，它们可以用来实现<a class="ae js" rel="noopener" href="/geekculture/writing-clean-javascript-es6-edition-834e83abc746">更简单、更整洁的代码</a>。</p></div><div class="ab cl ju jv gp jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hb hc hd he hf"><h1 id="aeb1" class="kb kc hx bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">从基础开始</h1><p id="e9dd" class="pw-post-body-paragraph iu iv hx iw b ix kz iz ja jb la jd je jf lb jh ji jj lc jl jm jn ld jp jq jr hb bi translated">在这一节中，我将简要介绍一些用于创建、访问或变更数组的常见静态和实例数组方法。对于大多数读者来说，这一部分的内容可能听起来非常基础或高级，但是，在更深入地探讨更高级的主题之前，了解它是很重要的。</p><blockquote class="le lf lg"><p id="43cb" class="iu iv jt iw b ix iy iz ja jb jc jd je lh jg jh ji li jk jl jm lj jo jp jq jr hb bi translated">如果您对以下概念感到满意，请跳到下一节！</p></blockquote><h2 id="017e" class="lk kc hx bd kd ll lm ln kh lo lp lq kl jf lr ls kp jj lt lu kt jn lv lw kx lx bi translated">静态方法</h2><p id="0dd0" class="pw-post-body-paragraph iu iv hx iw b ix kz iz ja jb la jd je jf lb jh ji jj lc jl jm jn ld jp jq jr hb bi translated">这些方法用于创建新数组或将现有的可迭代和类似数组的对象转换为数组。</p><figure class="ly lz ma mb fd hk"><div class="bz dy l di"><div class="mc md l"/></div></figure><h2 id="5030" class="lk kc hx bd kd ll lm ln kh lo lp lq kl jf lr ls kp jj lt lu kt jn lv lw kx lx bi translated">突变方法</h2><p id="2d5e" class="pw-post-body-paragraph iu iv hx iw b ix kz iz ja jb la jd je jf lb jh ji jj lc jl jm jn ld jp jq jr hb bi translated">以下方法是实例方法或原型方法。在特定的数组实例上调用它们来应用突变。</p><figure class="ly lz ma mb fd hk"><div class="bz dy l di"><div class="mc md l"/></div></figure><p id="e748" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hy">其他实例方法</strong></p><p id="8c52" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这些是其他不会改变数组的纯实例方法。</p><figure class="ly lz ma mb fd hk"><div class="bz dy l di"><div class="mc md l"/></div></figure></div><div class="ab cl ju jv gp jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hb hc hd he hf"><h1 id="e015" class="kb kc hx bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">质疑传统循环</h1><p id="457a" class="pw-post-body-paragraph iu iv hx iw b ix kz iz ja jb la jd je jf lb jh ji jj lc jl jm jn ld jp jq jr hb bi translated">当考虑数组时，迭代通常是脑海中出现的第一个词。我们迭代数组，对每个值应用相同的逻辑<em class="jt">。在这一点上，似乎我们想要应用于数组成员的任何东西都可以通过使用传统循环及其所有变体(即<code class="du me mf mg mh b">for,</code> <code class="du me mf mg mh b">for-of</code>和<code class="du me mf mg mh b">.forEach()</code>循环)来实现。</em></p><p id="c134" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">下面是一些使用传统循环非常好的例子:</p><figure class="ly lz ma mb fd hk"><div class="bz dy l di"><div class="mc md l"/></div></figure><p id="4f92" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">但是如果我们需要做更多的事情，比如修改或过滤数组元素，那该怎么办呢？我们当然可以使用传统的循环，但是我们不能做得更好吗？</p><p id="a7ed" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在下一节中，我将介绍传统循环的更好的替代方案，为了简单起见，每个替代方案都将与<code class="du me mf mg mh b">.forEach()</code>方法进行比较。</p><p id="1b20" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">对于以下示例，我们将使用该数据集作为参考:</p><figure class="ly lz ma mb fd hk"><div class="bz dy l di"><div class="mc md l"/></div></figure><blockquote class="le lf lg"><p id="479e" class="iu iv jt iw b ix iy iz ja jb jc jd je lh jg jh ji li jk jl jm lj jo jp jq jr hb bi translated">注意，为了可读性，我将大量使用带有隐式返回 的<a class="ae js" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions" rel="noopener ugc nofollow" target="_blank"> <em class="hx">箭头函数，以防你不熟悉。</em></a></p></blockquote></div><div class="ab cl ju jv gp jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hb hc hd he hf"><h1 id="f370" class="kb kc hx bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">取代传统的循环</h1><h2 id="0d2d" class="lk kc hx bd kd ll lm ln kh lo lp lq kl jf lr ls kp jj lt lu kt jn lv lw kx lx bi translated">。地图()</h2><p id="39b2" class="pw-post-body-paragraph iu iv hx iw b ix kz iz ja jb la jd je jf lb jh ji jj lc jl jm jn ld jp jq jr hb bi translated">顾名思义，<code class="du me mf mg mh b"><a class="ae js" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map" rel="noopener ugc nofollow" target="_blank">Array.protoype.map()</a></code>在对每个元素应用一些逻辑后，将当前数组的元素映射到一个新数组。假设您收到了以前的购物车数据，其中包括UTC时间戳和价格(以数字形式)，并且您需要根据用户的浏览器设置本地化您的数据:</p><figure class="ly lz ma mb fd hk"><div class="bz dy l di"><div class="mc md l"/></div></figure><p id="8d96" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">如您所见，<code class="du me mf mg mh b">.map()</code>的使用提供了一个非常优雅的解决方案，使我们不必创建一个空数组，也不必将每个修改过的元素放入数组中。</p><figure class="ly lz ma mb fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mi"><img src="../Images/08586766ee880d2fdf244ed2af21fce2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J_DUykiIKioQa0TqT0hNlA.png"/></div></div></figure><h2 id="4a62" class="lk kc hx bd kd ll lm ln kh lo lp lq kl jf lr ls kp jj lt lu kt jn lv lw kx lx bi translated">。过滤器()</h2><p id="5b01" class="pw-post-body-paragraph iu iv hx iw b ix kz iz ja jb la jd je jf lb jh ji jj lc jl jm jn ld jp jq jr hb bi translated"><code class="du me mf mg mh b"><a class="ae js" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter" rel="noopener ugc nofollow" target="_blank">Array.prototype.filter()</a></code>是另一种方法，它返回一个新的元素数组，每个元素都满足所提供的测试条件。使用相同的购物车数据，假设我们想要过滤价格大于或等于$15.00的所有元素:</p><figure class="ly lz ma mb fd hk"><div class="bz dy l di"><div class="mc md l"/></div></figure><p id="65a0" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">预期结果将是:</p><figure class="ly lz ma mb fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mj"><img src="../Images/f2f690cca8489ac18ff408ef8a7f8315.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jiIbXyhcxu0E0QcsHiVueQ.png"/></div></div></figure><h2 id="765a" class="lk kc hx bd kd ll lm ln kh lo lp lq kl jf lr ls kp jj lt lu kt jn lv lw kx lx bi translated">。find() &amp;。findIndex()</h2><p id="7f3f" class="pw-post-body-paragraph iu iv hx iw b ix kz iz ja jb la jd je jf lb jh ji jj lc jl jm jn ld jp jq jr hb bi translated"><code class="du me mf mg mh b"><a class="ae js" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find" rel="noopener ugc nofollow" target="_blank">Array.prototype.find()</a></code>和<code class="du me mf mg mh b"><a class="ae js" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/findIndex" rel="noopener ugc nofollow" target="_blank">Array.prototype.findIndex()</a></code>都是不言自明的。第一个方法返回满足给定测试条件的第一个元素的值，而第二个方法返回该元素的索引。在下面的示例中，我们感兴趣的是找到数量小于2的第一个元素的索引和值:</p><figure class="ly lz ma mb fd hk"><div class="bz dy l di"><div class="mc md l"/></div></figure><p id="67b0" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">结果是:</p><figure class="ly lz ma mb fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mk"><img src="../Images/592faacd9e9b83276a831ac2468f5417.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HIgNHELTWMfN7oUrhw5Nlw.png"/></div></div></figure><h2 id="437c" class="lk kc hx bd kd ll lm ln kh lo lp lq kl jf lr ls kp jj lt lu kt jn lv lw kx lx bi translated">。减少()</h2><p id="d1b3" class="pw-post-body-paragraph iu iv hx iw b ix kz iz ja jb la jd je jf lb jh ji jj lc jl jm jn ld jp jq jr hb bi translated"><code class="du me mf mg mh b"><a class="ae js" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce" rel="noopener ugc nofollow" target="_blank">Array.prototype.reduce()</a></code>是一个非常有用的方法，它将一些逻辑应用于每次迭代，同时累积所有先前迭代的结果。在这个上下文中，“累加器”可以是一个新的对象、数组或简单的变量。在本例中，我们感兴趣的是计算所有购物车商品的总价:</p><figure class="ly lz ma mb fd hk"><div class="bz dy l di"><div class="mc md l"/></div></figure><p id="af01" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我们减速器的结果是:</p><figure class="ly lz ma mb fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es ml"><img src="../Images/b2bfc8f0b6cf8fc51f23b9c6d60a3d67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7x9udTU15TQGUtUePWYVpA.png"/></div></div></figure><blockquote class="le lf lg"><p id="1704" class="iu iv jt iw b ix iy iz ja jb jc jd je lh jg jh ji li jk jl jm lj jo jp jq jr hb bi translated">显然，<code class="du me mf mg mh b">.reduce()</code>有比计算总和更强大的用例，然而，我选择在本文中保持例子简单，以涵盖尽可能多的概念。</p></blockquote><h2 id="c815" class="lk kc hx bd kd ll lm ln kh lo lp lq kl jf lr ls kp jj lt lu kt jn lv lw kx lx bi translated">。every() &amp;。一些()</h2><p id="d653" class="pw-post-body-paragraph iu iv hx iw b ix kz iz ja jb la jd je jf lb jh ji jj lc jl jm jn ld jp jq jr hb bi translated"><code class="du me mf mg mh b"><a class="ae js" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/every" rel="noopener ugc nofollow" target="_blank">Array.prototype.every()</a></code>和<code class="du me mf mg mh b"><a class="ae js" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/some" rel="noopener ugc nofollow" target="_blank">Array.prototype.some()</a></code>分别检查<strong class="iw hy">每个</strong>或<strong class="iw hy">部分</strong>元件是否满足一个测试条件<em class="jt"/>。当你只对一个“<em class="jt">是或否</em>”的答案而不是实际值感兴趣时，应该使用这些方法来代替<code class="du me mf mg mh b">.filter()</code>和<code class="du me mf mg mh b">.find()</code>——显然还有传统的循环。</p><figure class="ly lz ma mb fd hk"><div class="bz dy l di"><div class="mc md l"/></div></figure><h2 id="314e" class="lk kc hx bd kd ll lm ln kh lo lp lq kl jf lr ls kp jj lt lu kt jn lv lw kx lx bi translated">。排序()</h2><p id="e197" class="pw-post-body-paragraph iu iv hx iw b ix kz iz ja jb la jd je jf lb jh ji jj lc jl jm jn ld jp jq jr hb bi translated">本节要介绍的最后一个方法是<code class="du me mf mg mh b"><a class="ae js" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort" rel="noopener ugc nofollow" target="_blank">Array.prototype.sort()</a></code>，它将一个比较器函数作为参数，并返回一个排序后的数组。当没有提供自定义比较器时，默认的排序顺序是升序。</p><h2 id="149f" class="lk kc hx bd kd ll lm ln kh lo lp lq kl jf lr ls kp jj lt lu kt jn lv lw kx lx bi translated">链接方法</h2><p id="ef38" class="pw-post-body-paragraph iu iv hx iw b ix kz iz ja jb la jd je jf lb jh ji jj lc jl jm jn ld jp jq jr hb bi translated">现在我们已经看到了数组方法的不同做法，让我们一起使用它们。假设您必须修改购物车数组以满足以下约束:</p><ul class=""><li id="438e" class="mm mn hx iw b ix iy jb jc jf mo jj mp jn mq jr mr ms mt mu bi translated">所有项目都应标记为可用</li><li id="2ff8" class="mm mn hx iw b ix mv jb mw jf mx jj my jn mz jr mr ms mt mu bi translated">我们只想呈现<code class="du me mf mg mh b">itemId</code>和<code class="du me mf mg mh b">netPrice</code></li><li id="a923" class="mm mn hx iw b ix mv jb mw jf mx jj my jn mz jr mr ms mt mu bi translated">物品应该按照数量的升序排列</li></ul><p id="94cd" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我们可以通过链接数组方法轻松实现所有约束:</p><figure class="ly lz ma mb fd hk"><div class="bz dy l di"><div class="mc md l"/></div></figure><blockquote class="le lf lg"><p id="4f53" class="iu iv jt iw b ix iy iz ja jb jc jd je lh jg jh ji li jk jl jm lj jo jp jq jr hb bi translated">请记住，过度链接可能会增加时间复杂度并影响性能，因此请确保优化这些调用。</p></blockquote></div><div class="ab cl ju jv gp jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hb hc hd he hf"><h1 id="c536" class="kb kc hx bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">好处:使用ES6功能</h1><h2 id="03e5" class="lk kc hx bd kd ll lm ln kh lo lp lq kl jf lr ls kp jj lt lu kt jn lv lw kx lx bi translated">解构</h2><pre class="ly lz ma mb fd na mh nb nc aw nd bi"><span id="8e6f" class="lk kc hx mh b fi ne nf l ng nh">const [apple, banana, cherries] = ["🍏", "🍌", "🍒"];</span><span id="1959" class="lk kc hx mh b fi ni nf l ng nh">console.log(apple); <em class="jt">// 🍏<br/></em>console.log(banana); <em class="jt">// 🍌<br/></em>console.log(cherries); <em class="jt">// 🍒</em></span></pre><h2 id="5a5f" class="lk kc hx bd kd ll lm ln kh lo lp lq kl jf lr ls kp jj lt lu kt jn lv lw kx lx bi translated">默认值</h2><pre class="ly lz ma mb fd na mh nb nc aw nd bi"><span id="036b" class="lk kc hx mh b fi ne nf l ng nh">const [apple, banana, cherries, mango = "🥭"] = ["🍏", "🍌", "🍒"];</span><span id="7652" class="lk kc hx mh b fi ni nf l ng nh">console.log(mango); <em class="jt">// 🥭</em></span></pre><h2 id="9f5b" class="lk kc hx bd kd ll lm ln kh lo lp lq kl jf lr ls kp jj lt lu kt jn lv lw kx lx bi translated">跳过值</h2><pre class="ly lz ma mb fd na mh nb nc aw nd bi"><span id="0648" class="lk kc hx mh b fi ne nf l ng nh">const [apple, , cherries] = ["🍏", "🍌", "🍒"];</span><span id="9ff6" class="lk kc hx mh b fi ni nf l ng nh">console.log(apple); <em class="jt">// 🍏<br/></em>console.log(cherries); <em class="jt">// 🍒</em></span></pre><h2 id="7a4f" class="lk kc hx bd kd ll lm ln kh lo lp lq kl jf lr ls kp jj lt lu kt jn lv lw kx lx bi translated">传播算子</h2><pre class="ly lz ma mb fd na mh nb nc aw nd bi"><span id="9513" class="lk kc hx mh b fi ne nf l ng nh">const [apple, ...others] = ["🍏", "🍌", "🍒"];</span><span id="c83a" class="lk kc hx mh b fi ni nf l ng nh">console.log(apple); <em class="jt">// 🍏<br/></em>console.log(others); <em class="jt">// ["🍌", "🍒"]</em></span></pre></div><div class="ab cl ju jv gp jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hb hc hd he hf"><p id="9057" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这是一个关于使用合适的数组方法进行数据操作的综合指南。我肯定没有涵盖所有内容，但我确保我提到了最常用的方法。如果你觉得这篇文章有用，不妨喜欢一下<a class="ae js" rel="noopener" href="/geekculture/writing-clean-javascript-es6-edition-834e83abc746">我之前的文章</a>。</p><figure class="ly lz ma mb fd hk er es paragraph-image"><a href="http://buymeacoffee.com/jalkhurfan"><div class="er es nj"><img src="../Images/169f8b1142e42f66cc1f8d36823ed21c.png" data-original-src="https://miro.medium.com/v2/resize:fit:520/format:webp/1*gzdOEDskvMA1wW6CUF3RkA.png"/></div></a><figcaption class="hr hs et er es ht hu bd b be z dx">Support me to write more!</figcaption></figure></div></div>    
</body>
</html>