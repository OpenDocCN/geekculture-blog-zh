<html>
<head>
<title>mergeMap vs switchMap — The Simplest Difference</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">mergeMap与switchMap —最简单的区别</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/mergemap-vs-switchmap-the-simplest-difference-63e970171353?source=collection_archive---------2-----------------------#2021-02-01">https://medium.com/geekculture/mergemap-vs-switchmap-the-simplest-difference-63e970171353?source=collection_archive---------2-----------------------#2021-02-01</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="2ff5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">RxJS是一个非常棒的反应式编程库。但是，该库提供的操作符有时可能会令人困惑。我是这个图书馆的新成员，我们在一个angular项目中使用了它。在那里，我碰到了这两个运算符:<strong class="ih hj"> mergeMap和switchMap。</strong></p><p id="73d7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在使用这些操作符时，我不确定这两者之间的区别，因为它们似乎以相似的方式工作。于是我开始通过看各种博客来寻找两者的区别。但由于我是RxJS新手，所以我无法理解其中的大部分内容。我并不完全理解其中的区别，但对此有所了解。所以我开始自己做实验来消除我的疑虑，以下是我的理解。</p><p id="0ebd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我想通过一个例子来说明两者的区别。</p><h2 id="b4ca" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated"><strong class="ak">合并地图</strong></h2><figure class="jz ka kb kc fd kd er es paragraph-image"><div role="button" tabindex="0" class="ke kf di kg bf kh"><div class="er es jy"><img src="../Images/99064eeb6b5de3c5540a9ad335d290f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*52egSQ1yIdhpxvOqm7glTQ.png"/></div></div></figure><p id="1891" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本例中，我们在可观察到的'<strong class="ih hj">字母</strong>上使用管道运算符，该运算符连续发出3个值，即' a '，' b '，' c' <strong class="ih hj">，没有任何延迟</strong>。</p><p id="7751" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个例子的类比可以这样想:</p><figure class="jz ka kb kc fd kd er es paragraph-image"><div role="button" tabindex="0" class="ke kf di kg bf kh"><div class="er es kk"><img src="../Images/3705308aff1291cfbb4b1830056f91ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xBMMcq0JxAK-O8RapnbisQ.png"/></div></div></figure><p id="0ee3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">流程是这样的→</p><p id="0c9b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于这种情况，假设xMap为“mergeMap”。</p><p id="3d4c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">1.“letters”首先发出值“a ”, merge map<strong class="ih hj">知道它必须在每秒后打孔值“a”</strong>。</p><p id="2483" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.然后“letters”发出值“b ”, merge map<strong class="ih hj">知道它必须在每一秒后打孔值“b”</strong><strong class="ih hj"><em class="kl">以及</em> </strong>。</p><p id="7641" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.最后，它发出值“c ”,并且mergeMap <strong class="ih hj">知道它必须在每秒后打孔值“c”<em class="kl">以及</em> </strong>。</p><p id="03ce" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，在每一秒钟之后，mergeMap对所有的值‘a’、‘b’、‘c’进行打孔，导致所有这些值的发射。</p><p id="aed5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，在我们的例子中，我们得到的前六个值是‘a，b，c，a，b，c’。</p><figure class="jz ka kb kc fd kd er es paragraph-image"><div role="button" tabindex="0" class="ke kf di kg bf kh"><div class="er es km"><img src="../Images/6e7b5d13815a17f6bde8492b74b54022.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zJ29MNZ1lnja6XufAdTJtA.png"/></div></div></figure><blockquote class="kn ko kp"><p id="11ae" class="if ig kl ih b ii ij ik il im in io ip kq ir is it kr iv iw ix ks iz ja jb jc hb bi translated"><strong class="ih hj">这意味着即使我们用最新数据重新订阅相同的可观测值，mergeMap也会记住以前的订阅。</strong></p></blockquote><p id="f5c3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">开关图- </strong></p><figure class="jz ka kb kc fd kd er es paragraph-image"><div role="button" tabindex="0" class="ke kf di kg bf kh"><div class="er es kt"><img src="../Images/459f8f20305bcb152f36d43d1e940ea1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X3jkUBQQb7o9Wkdt_gpzpw.png"/></div></div></figure><p id="ddf0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个例子的类比与前面的例子相同。同样可以参考上图。</p><p id="9ed1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">流程是这样的→</p><p id="9a42" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，让xMap成为“switchMap”。</p><p id="c9fe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">1.“letters”首先发出值“a ”, switch map<strong class="ih hj">知道它必须在每秒后打孔值“a”</strong>。</p><p id="b68c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.“letters”然后发出值“b”，switchMap <strong class="ih hj">知道它必须在每秒<strong class="ih hj"> <em class="kl">后打孔值“b”</em></strong>，但忘记它也必须打孔“a”</strong>。</p><p id="9b59" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.最后，它发出值‘c’，开关映射<strong class="ih hj">知道它必须在每秒<strong class="ih hj"> <em class="kl">后打孔值‘c’</em></strong>，但忘记它也必须打孔‘b’</strong>。</p><p id="29b3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，每秒钟后，开关映射仅打孔值“c ”,导致仅发射值“c”。</p><p id="4813" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，在我们的例子中，我们得到的前六个值是‘c，c，c，c，c，c’。</p><figure class="jz ka kb kc fd kd er es paragraph-image"><div role="button" tabindex="0" class="ke kf di kg bf kh"><div class="er es ku"><img src="../Images/9374d699d27e9ff756349b0d8074c6fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lP-fqLgOGNlMFCAR8PSZoQ.png"/></div></div></figure><blockquote class="kn ko kp"><p id="74a0" class="if ig kl ih b ii ij ik il im in io ip kq ir is it kr iv iw ix ks iz ja jb jc hb bi translated"><strong class="ih hj">这意味着switchMap取消所有先前的订阅，只记住当前的最新数据。</strong></p></blockquote></div></div>    
</body>
</html>