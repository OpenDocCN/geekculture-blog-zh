<html>
<head>
<title>Simplifying Using Spinners in Android</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">简化Android中微调器的使用</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/simplifying-using-spinners-in-android-ad14f8f1213d?source=collection_archive---------5-----------------------#2021-11-01">https://medium.com/geekculture/simplifying-using-spinners-in-android-ad14f8f1213d?source=collection_archive---------5-----------------------#2021-11-01</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="fab0" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">一个漂亮的小类，它将在你的Android应用程序中使用spinners来简化一堆东西(当然是在Kotlin中！).</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/ccefb0d596602fd67b40b56fa840d7b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*r9EeCmcRUWkfLDEt"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Photo by <a class="ae jn" href="https://unsplash.com/@sadswim?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">ian dooley</a> on <a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="fc3e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi kk translated">在Android中创建用户体验时，pinners是非常有用的小部件。当用户必须在不同的选项中进行选择时，它们向用户清楚地指示了哪些选项是可用的，并且一旦用户做出选择，它们就通过折叠来节省小屏幕的空间。然而，不幸的是，将使用spinner的代码组合在一起涉及到处理一些样板代码:这些代码并不描述您试图实现的功能，而只是为了处理在Android中使用spinner的一些复杂性，以及必须在许多地方重复的代码。</p><p id="f0b8" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">不过，幸运的是，编程的一个好处是，你总能找到摆脱重复性家务的方法。在本文中，我展示了一小段代码，当您只需要一个简单的微调器向用户显示一些选项的文本并返回与用户选择的选项相对应的字符串值时，您可以在许多地方重用这段代码。这一切都被封装在一个名为<code class="du kt ku kv kw b">BindableSpinnerAdapter</code>的类中(我将第一个承认想出吸引人的名字不是我的强项)，你可以在下面看到:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="kx ky l"/></div></figure><p id="d2cd" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">请注意，这个类被认为是MVVM(模型-视图-视图模型)架构:如果你的应用程序还没有出现，也许这会给你一个动力去实现它！因此，这个类假设将会有一个<code class="du kt ku kv kw b">ViewModel</code>对象，并且这个<code class="du kt ku kv kw b">ViewModel</code>对象可以通过数据绑定在你的屏幕布局中使用。考虑到这些假设，<code class="du kt ku kv kw b">BindableSpinnerAdapter</code>类使开发人员的工作变得非常简单:您不需要创建一个适配器，事实上您甚至不需要对<code class="du kt ku kv kw b">Activity</code>类中的旋转器做任何事情。只需将上面的代码文件放入您的项目中(或者，如果您愿意，您可以将上面的代码包含在一个漂亮的Android实用程序小库中)，只需在您的<code class="du kt ku kv kw b">Activity</code>布局中添加这一点小小的更改，一切都会自动为您完成:</p><pre class="iy iz ja jb fd kz kw la lb aw lc bi"><span id="5885" class="ld le hi kw b fi lf lg l lh li">&lt;Spinner<br/> […]<br/> spinnerItems=”@{viewModel.items}”<br/> selectedSpinnerItem=”@={viewModel.selectedItem}” /&gt;</span></pre><p id="7deb" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">注意:</strong><code class="du kt ku kv kw b">selectedSpinnerItem</code><code class="du kt ku kv kw b">InverseBindingAdapter</code>中的<code class="du kt ku kv kw b">“@={…}”</code>很重要。这向XML处理器表明这是一个<strong class="jq hj">逆</strong> <code class="du kt ku kv kw b">BindingAdapter</code>。没有这一点，这个代码不能工作。</p><p id="230d" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在你的<code class="du kt ku kv kw b">ViewModel</code>中，将<code class="du kt ku kv kw b">items</code>和<code class="du kt ku kv kw b">selectedItem</code>属性暴露为<code class="du kt ku kv kw b">LiveData</code>，就有了。然后，要填充微调器，只需向<code class="du kt ku kv kw b">items</code>发送一个对应于<code class="du kt ku kv kw b">BindableSpinnerAdapter.SpinnerItem</code>对象列表的值就可以了。<code class="du kt ku kv kw b">SpinnerItem</code>对象包含两个属性:一个要在微调器中显示的文本，一个值，对应于与微调器选项对应的任何字符串值(例如，需要通过网络发送到API的特定字符串代码)。</p><p id="e9dd" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">为了在用户选择微调器中的一个选项时得到，你可以只依赖于<code class="du kt ku kv kw b">ViewModel</code>的<code class="du kt ku kv kw b">selectedItem</code>属性。请注意，每次用户选择一个选项时，都会调用<code class="du kt ku kv kw b">LiveData</code>属性和您的代码。但是，请记住您不能在<code class="du kt ku kv kw b">ViewModel</code>中使用<code class="du kt ku kv kw b">lifecycleOwner</code>对象:要做的是使用<code class="du kt ku kv kw b">LiveData.map()</code>调用来转换<code class="du kt ku kv kw b">selectedItem</code> <code class="du kt ku kv kw b">LiveData</code>属性。例如，将<code class="du kt ku kv kw b">selectedItem</code>转换为<code class="du kt ku kv kw b">spinnerOptionChanged</code> <code class="du kt ku kv kw b">LiveData</code>属性，并且不要忘记在您的<code class="du kt ku kv kw b">Activity</code>中观察<code class="du kt ku kv kw b">spinnerOptionChanged</code>(<code class="du kt ku kv kw b">LiveData</code>对象如果在某个地方没有<code class="du kt ku kv kw b">lifecycleOwner</code>就不起作用)。</p><p id="80ee" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这样，向应用程序的用户界面添加微调器就变得非常容易，并且您可以去掉许多样板代码。当然，上面的类并不完美:如果我有更多的时间，我想我可以对它做更多的改进(也许使用一些泛型？…)但我认为它确实能帮你不少忙。尽管如此，请随意提出修改和/或改进的建议，或者将此代码更改为最适合您的代码。这就是开发人员共享代码的美妙之处:一起工作可以让我们所有人的工作变得简单一些。编码快乐！</p></div></div>    
</body>
</html>