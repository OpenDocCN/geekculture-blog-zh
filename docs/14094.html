<html>
<head>
<title>Top 12 System Design Interview Questions with Answers (2023)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">12大系统设计面试问题及答案(2023)</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/top-12-system-design-interview-questions-with-answers-2022-dc2b6599f39a?source=collection_archive---------1-----------------------#2022-08-15">https://medium.com/geekculture/top-12-system-design-interview-questions-with-answers-2022-dc2b6599f39a?source=collection_archive---------1-----------------------#2022-08-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="fe99" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过练习这些问题，你可以增加许多成功的机会！</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/a0b77379a02ff76d6ac7cf2866447a56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1094/format:webp/1*y_WTUAvURjcL30uvVhpukw.png"/></div><figcaption class="jl jm et er es jn jo bd b be z dx">FAANG System Design Interview Questions</figcaption></figure><p id="9179" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在过去的几年里，系统设计面试获得了很多关注。现在，这是每个软件工程面试的标准部分，这些面试评估候选人处理复杂系统的能力。这些面试中的表现决定了面试公司<strong class="ih hj">提供的<strong class="ih hj">职位</strong>和<strong class="ih hj">薪资</strong>。</strong></p><p id="3e13" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">今天我们将讨论顶级科技公司的<strong class="ih hj">12大系统设计面试问题</strong>，包括<strong class="ih hj"> FAANG </strong>(脸书、苹果、亚马逊、网飞和谷歌)。</p><h1 id="f00d" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated"><strong class="ak"> 1。设计Facebook Messenger </strong></h1><p id="3650" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">设计一个像Facebook Messenger一样的即时消息服务，用户可以通过网络和移动界面互相发送文本消息。</p><p id="9fea" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">功能需求:</strong></p><ol class=""><li id="39c4" class="kt ku hi ih b ii ij im in iq kv iu kw iy kx jc ky kz la lb bi translated">Messenger应该支持用户之间的一对一对话。</li><li id="5d39" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">Messenger应该跟踪其用户的在线/离线状态。</li><li id="6d72" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">Messenger应该支持聊天记录的持久存储。</li></ol><p id="557e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">非功能需求:</strong></p><ol class=""><li id="328a" class="kt ku hi ih b ii ij im in iq kv iu kw iy kx jc ky kz la lb bi translated">用户应该有一个实时聊天体验，最小的延迟。</li><li id="dfb6" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">我们的系统应该是高度一致的；用户应该可以在他们所有的设备上看到相同的聊天记录。</li><li id="ccac" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">Messenger的高可用性是可取的；为了一致性，我们可以容忍较低的可用性。</li></ol><h2 id="0aa7" class="lh jr hi bd js li lj lk jw ll lm ln ka iq lo lp ke iu lq lr ki iy ls lt km lu bi translated">高级解决方案</h2><p id="19a0" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">在高层次上，我们将需要一个聊天服务器，它将是协调用户之间所有通信的核心部分。例如，当一个用户想要给另一个用户发送消息时，他们将连接到聊天服务器，并将消息发送到服务器；然后，服务器将该消息传递给其他用户，并将其存储在数据库中。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lv"><img src="../Images/7e263468aa63c261367d952315f8d815.png" data-original-src="https://miro.medium.com/v2/resize:fit:1100/format:webp/1*VDRVZ-FwWh4GeXXRp2fHcw.png"/></div></figure><p id="9358" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">详细的工作流程如下所示:</p><ol class=""><li id="c2ac" class="kt ku hi ih b ii ij im in iq kv iu kw iy kx jc ky kz la lb bi translated">用户A通过聊天服务器向用户B发送消息。</li><li id="d588" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">服务器接收消息并向用户a发送确认。</li><li id="5e95" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">服务器将消息存储在其数据库中，并将消息发送给用户b。</li><li id="2bda" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">用户B收到消息，并向服务器发送确认。</li><li id="3c11" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">服务器通知用户A，消息已经成功传递给用户b。</li></ol><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="er es lw"><img src="../Images/659353890ddf9af7350520985a8fa17e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SH_QQZAJEwZQ3w2VngDtrA.png"/></div></div><figcaption class="jl jm et er es jn jo bd b be z dx">Request flow for sending a message</figcaption></figure><p id="f299" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">了解更多关于<a class="ae jp" href="https://designgurus.org/path-player?courseid=grokking-the-system-design-interview&amp;unit=grokking-the-system-design-interview_1626970153011_2Unit" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">设计Facebook Messenger</strong></a><strong class="ih hj">的信息。</strong></p><h1 id="9ed7" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated"><strong class="ak"> 2。设计Youtube </strong></h1><p id="47e7" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">设计一个类似Youtube的视频共享服务，用户可以上传/观看/搜索视频。</p><p id="937f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">功能需求:</strong></p><ol class=""><li id="1aa4" class="kt ku hi ih b ii ij im in iq kv iu kw iy kx jc ky kz la lb bi translated">用户应该能够上传视频。</li><li id="5c54" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">用户应该能够分享和观看视频。</li><li id="48f9" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">用户应该能够根据视频标题进行搜索。</li><li id="dba0" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">我们的服务应该能够记录视频的统计数据，例如，喜欢/不喜欢，总浏览量等。</li><li id="5d46" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">用户应该能够添加和查看视频评论。</li></ol><p id="630d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">非功能需求:</strong></p><ol class=""><li id="91ab" class="kt ku hi ih b ii ij im in iq kv iu kw iy kx jc ky kz la lb bi translated">该系统应该是高度可靠的，任何视频上传不应丢失。</li><li id="5a9e" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">系统应该是高度可用的。一致性可能会受到影响(为了可用性)；如果用户有一段时间没有看到视频，应该没问题。</li><li id="9714" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">用户在观看视频时应该有实时体验，不应感到任何滞后。</li></ol><h2 id="c625" class="lh jr hi bd js li lj lk jw ll lm ln ka iq lo lp ke iu lq lr ki iy ls lt km lu bi translated">高级解决方案</h2><p id="beb2" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">总体而言，我们需要以下组件:</p><ol class=""><li id="3b28" class="kt ku hi ih b ii ij im in iq kv iu kw iy kx jc ky kz la lb bi translated"><strong class="ih hj">处理队列:</strong>每一个上传的视频都将被推送到一个处理队列中，以进行编码、缩略图生成和存储。</li><li id="9f64" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated"><strong class="ih hj">编码器:</strong>将每个上传的视频编码成多种格式。</li><li id="65fb" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated"><strong class="ih hj">缩略图生成器:</strong>为每个视频生成几个缩略图。</li><li id="2a03" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated"><strong class="ih hj">视频和缩略图存储:</strong>在一些分布式文件存储中存储视频和缩略图文件。</li><li id="f562" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated"><strong class="ih hj">用户数据库:</strong>存储用户信息，如姓名、电子邮件、地址等。</li><li id="3685" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated"><strong class="ih hj">视频元数据存储:</strong>一个元数据数据库，用于存储关于视频的所有信息，如标题、系统中的文件路径、上传用户、总浏览量、喜欢、不喜欢等。它还将用于存储所有的视频评论。</li></ol><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="er es mb"><img src="../Images/5d34cf5f6ea27dd0b406ef676180398a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w02hKSlGmizLMxO8zMNMjA.png"/></div></div><figcaption class="jl jm et er es jn jo bd b be z dx">High-level design of Youtube</figcaption></figure><p id="6eb0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">了解更多关于<a class="ae jp" href="https://designgurus.org/path-player?courseid=grokking-the-system-design-interview&amp;unit=grokking-the-system-design-interview_1626970192981_4Unit" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">设计Youtube </strong> </a> <strong class="ih hj">。</strong></p><h1 id="24bf" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">3.设计脸书的新闻源</h1><p id="a64d" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">设计脸书的新闻源，其中包含用户关注的所有人和页面的帖子、照片、视频和状态更新。</p><p id="2553" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">功能需求:</strong></p><ol class=""><li id="d72e" class="kt ku hi ih b ii ij im in iq kv iu kw iy kx jc ky kz la lb bi translated">新闻订阅源将基于用户关注的人、页面和组的帖子生成。</li><li id="a0a0" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">用户可能有许多朋友并关注大量页面/群组。</li><li id="b7ef" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">提要可能包含图像、视频或文本。</li><li id="5dee" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">我们的服务应该支持为所有活跃用户在新帖子到达新闻提要时添加新帖子。</li></ol><p id="384b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">非功能需求:</strong></p><ol class=""><li id="6194" class="kt ku hi ih b ii ij im in iq kv iu kw iy kx jc ky kz la lb bi translated">我们的系统应该能够实时生成任何用户的新闻订阅——最终用户看到的最大延迟是2s。</li><li id="3529" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">假设有新的新闻订阅请求，一篇文章不应该花超过5秒的时间到达用户的订阅源。</li></ol><h2 id="c168" class="lh jr hi bd js li lj lk jw ll lm ln ka iq lo lp ke iu lq lr ki iy ls lt km lu bi translated">高级解决方案</h2><p id="c831" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">概括地说，我们的新闻订阅服务需要以下组件:</p><ol class=""><li id="ab97" class="kt ku hi ih b ii ij im in iq kv iu kw iy kx jc ky kz la lb bi translated"><strong class="ih hj">网络服务器:</strong>维持与用户的连接。此连接将用于在用户和服务器之间传输数据。</li><li id="2c26" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated"><strong class="ih hj">应用服务器:</strong>执行在数据库服务器中存储新帖子的工作流程。我们还需要一些应用服务器来检索新闻提要并将其推送给最终用户。</li><li id="d3e6" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated"><strong class="ih hj">元数据数据库和缓存:</strong>存储用户、页面和群组的元数据。</li><li id="eee0" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated"><strong class="ih hj">文章数据库和缓存:</strong>存储关于文章及其内容的元数据。</li><li id="daf5" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated"><strong class="ih hj">视频和照片存储，以及缓存:</strong> Blob存储，用于存储帖子中包含的所有媒体。</li><li id="1eb2" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated"><strong class="ih hj">新闻提要生成服务:</strong>为用户收集所有相关的帖子并对其进行排序，以生成新闻提要并存储在缓存中。该服务还将接收实时更新，并将这些较新的提要条目添加到任何用户的时间表中。</li><li id="3b14" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated"><strong class="ih hj">提要通知服务:</strong>通知用户他们的新闻提要有更新的条目。</li></ol><p id="e536" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面是我们系统的高层架构图。用户B和C跟随用户a。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="er es mc"><img src="../Images/81d2a05e274687806f285616995bef18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*msdwoi15oden1GBP.png"/></div></div><figcaption class="jl jm et er es jn jo bd b be z dx">Facebook Newsfeed Architecture</figcaption></figure><p id="6a91" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">了解更多关于<a class="ae jp" href="https://designgurus.org/path-player?courseid=grokking-the-system-design-interview&amp;unit=grokking-the-system-design-interview_1626970300115_9Unit" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">设计脸书的新闻订阅</strong> </a> <strong class="ih hj">。</strong></p><h1 id="8c72" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated"><strong class="ak"> 4。设计一个API速率限制器</strong></h1><p id="8cb4" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">设计一个API速率限制器，它将根据用户发送的请求数量来限制用户。</p><p id="c3bc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">功能需求:</strong></p><ol class=""><li id="b5fe" class="kt ku hi ih b ii ij im in iq kv iu kw iy kx jc ky kz la lb bi translated">限制一个实体在一个时间窗口内可以发送给API的请求数量，例如每秒15个请求。</li><li id="6abf" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">API可以通过集群访问，因此应该考虑不同服务器之间的速率限制。无论是在单个服务器中还是在多个服务器的组合中，只要超过了定义的阈值，用户就会收到一条错误消息。</li></ol><p id="45f2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">非功能需求:</strong></p><ol class=""><li id="098c" class="kt ku hi ih b ii ij im in iq kv iu kw iy kx jc ky kz la lb bi translated">系统应该是高度可用的。速率限制器应该总是工作，因为它保护我们的服务免受外部攻击。</li><li id="db59" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">我们的速率限制器不应该引入影响用户体验的大量延迟。</li></ol><p id="30e5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">速率限制器将负责决定哪些请求将由API服务器服务，哪些请求将被拒绝。一旦一个新的请求到达，Web服务器首先要求速率限制器决定它是被服务还是被限制。如果请求没有被限制，那么它将被传递到API服务器。</p><h2 id="a8ee" class="lh jr hi bd js li lj lk jw ll lm ln ka iq lo lp ke iu lq lr ki iy ls lt km lu bi translated">高级解决方案</h2><p id="999f" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">速率限制器将负责决定哪些请求将由API服务器服务，哪些请求将被拒绝。一旦一个新的请求到达，Web服务器首先要求速率限制器决定它是被服务还是被限制。如果请求没有被限制，那么它将被传递到API服务器。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="er es md"><img src="../Images/a2d59fda7e39935f1f552786759ce436.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3anAAyGB7cG_lzraUWcIoA.png"/></div></div><figcaption class="jl jm et er es jn jo bd b be z dx">High-level design for Rate Limiter</figcaption></figure><p id="95a0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">了解更多关于<a class="ae jp" href="https://designgurus.org/path-player?courseid=grokking-the-system-design-interview&amp;unit=grokking-the-system-design-interview_1626970236163_6Unit" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">设计API速率限制器</strong> </a> <strong class="ih hj">的信息。</strong></p><h1 id="354f" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated"><strong class="ak"> 5。设计推特</strong></h1><p id="2e7f" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">设计一个类似Twitter的社交网络服务。该服务的用户将能够发布推文，关注其他人和喜欢的推文。</p><p id="6614" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">功能要求</strong></p><ol class=""><li id="df18" class="kt ku hi ih b ii ij im in iq kv iu kw iy kx jc ky kz la lb bi translated">用户应该能够发布新的推文。</li><li id="724f" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">用户应该能够关注其他用户。</li><li id="50d2" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">用户应该能够将推文标记为收藏夹。</li><li id="f158" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">该服务应该能够创建和显示用户的时间表，其中包括用户关注的所有人的热门推文。</li><li id="2f78" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">推文可以包含照片和视频。</li></ol><p id="19b0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">非功能需求</strong></p><ol class=""><li id="ee66" class="kt ku hi ih b ii ij im in iq kv iu kw iy kx jc ky kz la lb bi translated">我们的服务需要高度可用。</li><li id="fbf4" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">系统可接受的时间线生成延迟为200毫秒。</li><li id="a5d2" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">一致性可能会受到影响(为了可用性)；如果用户有一段时间没有看到推文，应该没问题。</li></ol><h2 id="ef6b" class="lh jr hi bd js li lj lk jw ll lm ln ka iq lo lp ke iu lq lr ki iy ls lt km lu bi translated">高级解决方案</h2><p id="683a" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">我们需要一个能够高效存储所有新推文的系统，每秒100M/86400s =&gt; 1150条推文，每秒读取28B/86400s =&gt; 325K条推文。从需求中可以清楚地看出，这将是一个重阅读的系统。</p><p id="4eb1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在高层次上，我们需要多个应用服务器来服务所有这些请求，在它们前面有负载平衡器来分配流量。在后端，我们需要一个高效的数据库，可以存储所有的新推文，并支持大量的阅读。我们还需要一些文件存储空间来存储照片和视频。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es me"><img src="../Images/b79da4545741757f0d8bb98146d7ed32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1348/format:webp/0*cfyIKcizLOFxK73q.png"/></div></figure><p id="448c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">虽然我们的预期日写负载是1亿条，读负载是280亿条。这意味着我们的系统平均每秒将接收大约1160条新推文和325，000条阅读请求。这种流量在一天中的分布是不均匀的，但是，在高峰时间，我们预计每秒至少会有几千个写请求和大约一百万个读请求。在设计系统架构时，我们应该记住这一点。</p><p id="8f0f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">了解更多关于<a class="ae jp" href="https://designgurus.org/path-player?courseid=grokking-the-system-design-interview&amp;unit=grokking-the-system-design-interview_1626970171139_3Unit" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">设计Twitter </strong> </a> <strong class="ih hj">。</strong></p><h1 id="b14b" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">6.设计<strong class="ak"> Dropbox或Google Drive </strong></h1><p id="dfe3" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">设计一个像Dropbox或Google Drive这样的文件托管服务。云文件存储使用户能够将数据存储在远程服务器上。通常，这些服务器由云存储提供商维护，并通过网络(通常通过互联网)提供给用户。用户每月为他们的云数据存储付费。</p><p id="38c0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">要求</strong></p><ol class=""><li id="deba" class="kt ku hi ih b ii ij im in iq kv iu kw iy kx jc ky kz la lb bi translated">用户应该能够从任何设备上传和下载他们的文件/照片。</li><li id="dbcd" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">用户应该能够与其他用户共享文件或文件夹。</li><li id="b33c" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">我们的服务应该支持设备之间的自动同步，也就是说，在一个设备上更新一个文件后，它应该在所有设备上同步。</li><li id="2761" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">系统应该支持存储高达1gb的大文件。</li><li id="a758" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">酸性是必需的。应该保证所有文件操作的原子性、一致性、隔离性和持久性。</li><li id="3b2b" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">我们的系统应该支持离线编辑。用户应该能够在离线时添加/删除/修改文件，一旦他们上线，他们的所有更改都应该同步到远程服务器和其他在线设备。</li></ol><p id="51b9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">扩展需求</strong></p><ul class=""><li id="6b6d" class="kt ku hi ih b ii ij im in iq kv iu kw iy kx jc mf kz la lb bi translated">系统应该支持数据的快照，以便用户可以返回到文件的任何版本。</li></ul><h2 id="308b" class="lh jr hi bd js li lj lk jw ll lm ln ka iq lo lp ke iu lq lr ki iy ls lt km lu bi translated">高级解决方案</h2><p id="6798" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">用户将指定一个文件夹作为他们设备上的工作空间。任何放在这个文件夹里的文件/照片/文件夹都会被上传到云端，每当文件被修改或删除，都会以同样的方式反映在云存储里。用户可以在他们的所有设备上指定相似的工作空间，并且在一个设备上进行的任何修改都将传播到所有其他设备，以便在任何地方都具有相同的工作空间视图。</p><p id="e78a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在高层次上，我们需要存储文件及其元数据信息，如文件名、文件大小、目录等。以及该文件的共享者。因此，我们需要一些可以帮助客户端上传/下载文件到云存储的服务器，以及一些可以方便更新关于文件和用户的元数据的服务器。我们还需要一些机制来通知所有的客户端更新的发生，这样他们就可以同步他们的文件。</p><p id="02a5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如下图所示，数据块服务器将与客户端一起从云存储中上传/下载文件，元数据服务器将在SQL或NoSQL数据库中更新文件的元数据。同步服务器将处理向所有客户端通知同步的不同更改的工作流。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="er es mg"><img src="../Images/40b462646f15b329a41b51ea58072b06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LyxsT_4yxCuGUrViiTyHIQ.png"/></div></div><figcaption class="jl jm et er es jn jo bd b be z dx">High-level design for Dropbox</figcaption></figure><p id="ec98" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">了解更多关于<a class="ae jp" href="https://designgurus.org/path-player?courseid=grokking-the-system-design-interview&amp;unit=grokking-the-system-design-interview_1626970134090_1Unit" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">设计Dropbox </strong> </a> <strong class="ih hj">的信息。</strong></p><h1 id="5b29" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated"><strong class="ak"> 7。设计一个网络爬虫</strong></h1><p id="4a68" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">设计一个网络爬虫，系统地浏览和下载万维网。网络爬虫也被称为网络蜘蛛、机器人、蠕虫、步行者和机器人。</p><p id="0596" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">要求</strong></p><p id="564a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们假设我们需要抓取所有的网页。</p><p id="c0b6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">可伸缩性:</strong>我们的服务需要是可伸缩的，这样它就可以抓取整个网络，并且可以用来获取数以亿计的网络文档。</p><p id="0fb3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">可扩展性:</strong>我们的服务应该以模块化的方式设计，并期望有新的功能加入其中。将来可能会有更新的文档类型需要下载和处理。</p><h2 id="3b2d" class="lh jr hi bd js li lj lk jw ll lm ln ka iq lo lp ke iu lq lr ki iy ls lt km lu bi translated">高级解决方案</h2><p id="42a1" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">一个最小的爬虫至少需要这些组件:</p><p id="a538" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 1。URL frontier: </strong>存储要下载的URL列表，并区分哪些URL应该首先被抓取。<br/> <strong class="ih hj"> 2。HTML Fetcher: </strong>从服务器获取网页。<br/> <strong class="ih hj"> 3。提取器:</strong>从HTML文档中提取链接。<br/> <strong class="ih hj"> 4。重复消除器:</strong>确保相同的内容不会被无意中提取两次。<br/> <strong class="ih hj"> 5。数据存储:</strong>存储检索到的页面、URL和其他元数据。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="er es mh"><img src="../Images/a30cf297729461a77a5d7ca6b0789dbb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*grt4s7ODyDTh9mw0t2N5jA.png"/></div></div></figure><p id="331f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">了解更多关于<a class="ae jp" href="https://designgurus.org/path-player?courseid=grokking-the-system-design-interview&amp;unit=grokking-the-system-design-interview_1626970282267_8Unit" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">设计网络爬虫</strong> </a> <strong class="ih hj">。</strong></p><h1 id="4884" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">8.<strong class="ak">设计推特搜索</strong></h1><p id="7b8b" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">Twitter是最大的社交网络服务之一，用户可以在这里分享照片、新闻和基于文本的消息。让我们设计一个可以存储和搜索用户推文的服务。</p><p id="2b6f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">要求</strong></p><ul class=""><li id="e639" class="kt ku hi ih b ii ij im in iq kv iu kw iy kx jc mf kz la lb bi translated">让我们假设Twitter有15亿用户，每天有8亿活跃用户。</li><li id="f1a1" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc mf kz la lb bi translated">Twitter平均每天有4亿条推文。</li><li id="e3ea" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc mf kz la lb bi translated">一条推文的平均大小是300字节。</li><li id="6d2b" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc mf kz la lb bi translated">让我们假设每天会有5亿次搜索。</li><li id="e290" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc mf kz la lb bi translated">搜索查询将由用AND/OR组合的多个单词组成。</li></ul><p id="b10d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在高层次上，我们需要将所有的tweet存储在一个数据库中，还需要建立一个索引来跟踪哪个单词出现在哪个tweet中。这个索引将帮助我们快速找到用户试图搜索的推文。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="er es mi"><img src="../Images/4b9718eb12bd32773ae274396dfc7296.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gHqO_0ZL3eTbcW3npHCGoQ.png"/></div></div><figcaption class="jl jm et er es jn jo bd b be z dx">High-level design for Twitter search</figcaption></figure><p id="3ef7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">了解更多关于<a class="ae jp" href="https://designgurus.org/path-player?courseid=grokking-the-system-design-interview&amp;unit=grokking-the-system-design-interview_1626970258715_7Unit" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">设计Twitter搜索</strong> </a> <strong class="ih hj">。</strong></p><h1 id="de49" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated"><strong class="ak"> 9。设计一个类似TinyURL的URL缩短服务</strong></h1><p id="6892" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">设计一个类似TinyURL的URL缩短服务。该服务将提供重定向到长URL的短别名。</p><p id="a79a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">功能需求:</strong></p><ol class=""><li id="82e5" class="kt ku hi ih b ii ij im in iq kv iu kw iy kx jc ky kz la lb bi translated">给定一个URL，我们的服务应该为它生成一个更短且唯一的别名。这叫做短链接。这个链接应该足够短，以便于复制和粘贴到应用程序中。</li><li id="8d20" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">当用户访问一个短链接时，我们的服务应该将他们重定向到原来的链接。</li><li id="7fa2" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">用户应该可以选择为他们的URL选择一个自定义的短链接。</li><li id="ae79" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">链接将在标准的默认时间跨度后过期。用户应该能够指定到期时间。</li></ol><p id="f45f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">非功能需求:</strong></p><ol class=""><li id="fb9d" class="kt ku hi ih b ii ij im in iq kv iu kw iy kx jc ky kz la lb bi translated">系统应该是高度可用的。这是必需的，因为如果我们的服务关闭，所有的URL重定向将开始失败。</li><li id="e4a0" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">URL重定向应该以最小的延迟实时发生。</li><li id="0dc6" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">缩短的链接不应该是可猜测的(不可预测)。</li></ol><p id="07e8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">扩展需求:</strong></p><ol class=""><li id="40f1" class="kt ku hi ih b ii ij im in iq kv iu kw iy kx jc ky kz la lb bi translated">分析；例如，重定向发生了多少次？</li><li id="3b9b" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">其他服务也应该可以通过REST APIs访问我们的服务。</li></ol><h2 id="0e9b" class="lh jr hi bd js li lj lk jw ll lm ln ka iq lo lp ke iu lq lr ki iy ls lt km lu bi translated">高级解决方案</h2><p id="9659" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">我们在这里解决的问题是如何为一个给定的URL生成一个简短且唯一的密钥。</p><p id="fb00" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以计算一个唯一的散列(例如，MD5或SHA256等。)的链接。然后可以对散列进行编码以供显示。这种编码可以是base36 ([a-z，0–9])或base62 ([a-z，A-Z，0–9])，如果我们添加“+”和“/”，我们可以使用Base64编码。一个合理的问题是，短键的长度应该是多少？6、8或10个字符？</p><p id="b39a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用base64编码，一个6个字母长的密钥将产生64⁶= ~ 687亿个可能的字符串。使用base64编码，一个8个字母长的密钥将产生64⁸ = ~281万亿个可能的字符串。</p><p id="4e87" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有了68.7B个唯一的字符串，让我们假设六个字母键对于我们的系统就足够了。</p><p id="c44b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果我们使用MD5算法作为散列函数，它将产生一个128位的散列值。经过base64编码后，我们将得到一个超过21个字符的字符串(因为每个base64字符编码6位哈希值)。现在我们每个快捷键只能容纳6(或8)个字符；那么我们将如何选择我们的密钥呢？我们可以用前6(或8)个字母作为密钥。这可能导致密钥重复；为了解决这个问题，我们可以从编码字符串中选择一些其他字符或者交换一些字符。</p><p id="8c57" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">我们的解决方案有哪些不同的问题？</strong>我们的编码方案存在以下几个问题:</p><ol class=""><li id="63dd" class="kt ku hi ih b ii ij im in iq kv iu kw iy kx jc ky kz la lb bi translated">如果多个用户输入相同的URL，他们可以获得相同的缩短URL，这是不可接受的。</li><li id="5300" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">如果URL的一部分是URL编码的呢？例如，<a class="ae jp" href="http://www.designgurus.org/distributed.php?id=design," rel="noopener ugc nofollow" target="_blank">http://www.designgurus.org/distributed.php?id=design,</a>和<a class="ae jp" href="http://www.designgurus.org/distributed.php%3Fid%3Ddesign" rel="noopener ugc nofollow" target="_blank">http://www.designgurus.org/distributed.php%3Fid%3Ddesign</a>除了URL编码之外完全相同。</li></ol><p id="833c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">问题的解决方法:</strong>我们可以为每个输入URL添加一个递增的序列号，使其唯一，然后生成它的散列。但是，我们不需要将这个序列号存储在数据库中。这种方法可能存在的问题是不断增加的序列号。能溢出来吗？附加递增的序列号也会影响服务的性能。</p><p id="dfd5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">另一个解决方案是将用户id(应该是惟一的)附加到输入URL上。然而，如果用户没有登录，我们将不得不要求用户选择一个唯一性密钥。即使在这之后，如果我们有冲突，我们必须继续生成一个密钥，直到我们得到一个唯一的。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="er es mj"><img src="../Images/5388ee29013cd0909c4339487ef177c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w5xs_gM3w37IPnVODEbbBA.png"/></div></div><figcaption class="jl jm et er es jn jo bd b be z dx">Request flow for shortening of a URL</figcaption></figure><p id="ee81" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">了解更多关于<a class="ae jp" href="https://designgurus.org/path-player?courseid=grokking-the-system-design-interview&amp;unit=grokking-the-system-design-interview_1626455248243_1Unit" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">设计一个网址缩短服务</strong> </a> <strong class="ih hj">。</strong></p><h1 id="8295" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated"><strong class="ak"> 10。设计Instagram </strong></h1><p id="6a7e" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">设计一个类似Instagram的照片分享服务，用户可以上传照片与其他用户分享。</p><p id="bef2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">功能需求</strong></p><ol class=""><li id="8e02" class="kt ku hi ih b ii ij im in iq kv iu kw iy kx jc ky kz la lb bi translated">用户应该能够上传/下载/查看照片。</li><li id="7b09" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">用户可以根据照片/视频标题进行搜索。</li><li id="1435" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">用户可以关注其他用户。</li><li id="0de0" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">系统应该生成并显示用户的新闻提要，包括用户关注的所有人的顶级照片。</li></ol><p id="a89b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">非功能性需求</strong></p><ol class=""><li id="c7c9" class="kt ku hi ih b ii ij im in iq kv iu kw iy kx jc ky kz la lb bi translated">我们的服务需要高度可用。</li><li id="d619" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">对于新闻提要生成，系统的可接受延迟为200毫秒。</li><li id="2ae3" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">如果用户有一段时间没有看到照片，一致性会受到影响(为了可用性)；应该没问题。</li><li id="cd72" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">该系统应该高度可靠；任何上传的照片或视频都不应丢失。</li></ol><h2 id="0253" class="lh jr hi bd js li lj lk jw ll lm ln ka iq lo lp ke iu lq lr ki iy ls lt km lu bi translated">高级解决方案</h2><p id="aa3d" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">在高层次上，我们需要支持两种场景，一种是上传照片，另一种是查看/搜索照片。我们的服务需要一些对象存储服务器来存储照片，需要一些数据库服务器来存储关于照片的元数据信息。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mk"><img src="../Images/d179997f87b34d4979f9d65e60c05376.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*HWLxbzgsJhIA8V1DfX6pkA.png"/></div></figure><p id="a3a2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">了解更多关于<a class="ae jp" href="https://designgurus.org/path-player?courseid=grokking-the-system-design-interview&amp;unit=grokking-the-system-design-interview_1626970106319_0Unit" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">设计Instagram </strong> </a> <strong class="ih hj">。</strong></p><h1 id="2f88" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">设计Yelp或附近的朋友</h1><p id="7d8e" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">设计一个类似Yelp的服务，用户可以搜索附近的地方，如餐馆、剧院或购物中心等。，还可以添加/查看地方评论。</p><p id="d52e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">功能需求:</strong></p><ol class=""><li id="22be" class="kt ku hi ih b ii ij im in iq kv iu kw iy kx jc ky kz la lb bi translated">用户应该能够添加/删除/更新的地方。</li><li id="8d88" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">给定他们的位置(经度/纬度)，用户应该能够找到给定半径内所有附近的地方。</li><li id="1050" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">用户应该能够添加关于一个地方的反馈/评论。反馈可以包含图片、文本和评分。</li></ol><p id="ed33" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">非功能需求:</strong></p><ol class=""><li id="1763" class="kt ku hi ih b ii ij im in iq kv iu kw iy kx jc ky kz la lb bi translated">用户应该有一个实时的搜索体验，最小的延迟。</li><li id="69ef" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">我们的服务应该支持繁重的搜索负载。相比增加一个新的地方，会有很多搜索请求。</li></ol><h2 id="c460" class="lh jr hi bd js li lj lk jw ll lm ln ka iq lo lp ke iu lq lr ki iy ls lt km lu bi translated">高级解决方案</h2><p id="75bd" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">在高层次上，我们需要存储和索引上述每个数据集(位置、评论等)。).为了让用户查询这个庞大的数据库，索引应该是高效的，因为在搜索附近的地方时，用户希望实时看到结果。</p><p id="da2c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">鉴于一个地方的位置不会经常改变，我们不需要担心数据的频繁更新。相比之下，如果我们打算构建一个服务，其中的对象经常改变它们的位置，例如人或出租车，那么我们可能会提出一个非常不同的设计。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="er es ml"><img src="../Images/ac81b55f8ffa783b2700af980c182ae2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hZZUUZCGmxDWI-XpxQ8xAQ.png"/></div></div></figure><p id="3858" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">了解更多关于<a class="ae jp" href="https://designgurus.org/path-player?courseid=grokking-the-system-design-interview&amp;unit=grokking-the-system-design-interview_1626970328123_10Unit" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">设计Yelp或附近的朋友</strong> </a> <strong class="ih hj">。</strong></p><h1 id="8ba1" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">12.设计票主</h1><p id="baa5" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">设计一个在线售票系统，像Ticketmaster或BookMyShow一样出售电影票</p><p id="0429" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">功能需求:</strong></p><ol class=""><li id="957f" class="kt ku hi ih b ii ij im in iq kv iu kw iy kx jc ky kz la lb bi translated">我们的订票服务应该能够列出其附属影院所在的不同城市。</li><li id="d4b3" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">一旦用户选择了城市，该服务应该显示在该特定城市发行的电影。</li><li id="f13b" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">一旦用户选择了一部电影，该服务将显示播放该电影的电影院及其可用的放映时间。</li><li id="8b33" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">用户应该能够选择一个特定的电影院放映，并预订他们的门票。</li><li id="709e" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">该服务应该能够向用户显示电影院大厅的座位安排。用户应该能够根据自己的喜好选择多个座位。</li><li id="19f9" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">用户应该能够区分已预订的座位和可预订的座位。</li><li id="997a" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">用户应该能够在付款完成预订之前保留座位五分钟。</li><li id="0c6f" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">如果座位有机会变得可用，例如当其他用户的保留到期时，用户应该能够等待。</li><li id="a49b" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">应该以公平、先到先得的方式为等候的顾客服务。</li></ol><p id="56d4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">非功能性需求:</strong></p><ol class=""><li id="fd88" class="kt ku hi ih b ii ij im in iq kv iu kw iy kx jc ky kz la lb bi translated">该系统需要高度并发。在任何特定的时间点，对于同一个座位都会有多个预订请求。服务应该优雅而公平地处理这个问题。</li><li id="dc24" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">服务的核心是订票，也就是金融交易。这意味着系统应该是安全的，数据库应该是ACID兼容的。</li></ol><h2 id="f3ef" class="lh jr hi bd js li lj lk jw ll lm ln ka iq lo lp ke iu lq lr ki iy ls lt km lu bi translated">高级解决方案</h2><p id="7fb3" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">在高层次上，我们的web服务器将管理用户的会话，应用服务器将处理所有的门票管理，将数据存储在数据库中，并与缓存服务器一起处理预订。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="er es mm"><img src="../Images/8fac0498df15812209488429390d6164.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9_CWPpCjE0xaCgm7IiOrHA.png"/></div></div></figure><p id="3a63" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">了解更多关于<a class="ae jp" href="https://designgurus.org/path-player?courseid=grokking-the-system-design-interview&amp;unit=grokking-the-system-design-interview_1626970362841_12Unit" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">设计Ticketmaster </strong> </a> <strong class="ih hj">的信息。</strong></p><h1 id="d572" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">从这里去哪里？</h1><p id="ca9a" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">➡练习这些问题是为了让自己与众不同！</p><p id="f525" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">➡在“<a class="ae jp" href="https://designgurus.org/course/grokking-the-system-design-interview" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">钻研系统设计面试</strong></a><strong class="ih hj">”</strong><strong class="ih hj"/><a class="ae jp" href="https://designgurus.org/course/grokking-the-advanced-system-design-interview" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj">钻研高级系统设计面试</strong> </a>中了解到更多关于这些问题的信息</p><p id="c311" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">➡在Linkedin上关注我，了解系统设计和编码面试的技巧。</p><div class="mn mo ez fb mp mq"><a href="https://levelup.gitconnected.com/system-design-interview-survival-guide-2023-preparation-strategies-and-practical-tips-ba9314e6b9e3" rel="noopener  ugc nofollow" target="_blank"><div class="mr ab dw"><div class="ms ab mt cl cj mu"><h2 class="bd hj fi z dy mv ea eb mw ed ef hh bi translated">系统设计面试生存指南(2023):准备策略和实用技巧</h2><div class="mx l"><h3 class="bd b fi z dy mv ea eb mw ed ef dx translated">2023年系统设计面试剧本。</h3></div><div class="my l"><p class="bd b fp z dy mv ea eb mw ed ef dx translated">levelup.gitconnected.com</p></div></div><div class="mz l"><div class="na l nb nc nd mz ne jj mq"/></div></div></a></div></div><div class="ab cl nf ng gp nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="hb hc hd he hf"><h1 id="a036" class="jq jr hi bd js jt nm jv jw jx nn jz ka kb no kd ke kf np kh ki kj nq kl km kn bi translated">感谢阅读</h1><ul class=""><li id="4854" class="kt ku hi ih b ii ko im kp iq nr iu ns iy nt jc mf kz la lb bi translated">👏请为这个故事鼓掌，然后跟我来👉</li><li id="8a3e" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc mf kz la lb bi translated">📰查看更多关于<a class="ae jp" href="https://arslan-ahmad.medium.com/" rel="noopener">编码和系统设计访谈</a>的内容</li><li id="a728" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc mf kz la lb bi translated">🔔关注我:<a class="ae jp" href="https://www.linkedin.com/in/arslanahmad/" rel="noopener ugc nofollow" target="_blank">LinkedIn</a>|<a class="ae jp" href="https://twitter.com/arslan_ah" rel="noopener ugc nofollow" target="_blank">Twitter</a>|<a class="ae jp" href="https://designgurus.org/interview-noodle-page" rel="noopener ugc nofollow" target="_blank">时事通讯</a></li></ul></div></div>    
</body>
</html>