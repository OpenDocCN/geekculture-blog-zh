<html>
<head>
<title>Send Files With HTML5's Form and Catching with Express.js Handlebars Templating</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用HTML5的表单发送文件，用Express.js手柄模板捕捉</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/send-files-with-html5s-form-and-catching-with-express-js-handlebars-templating-bacc2fa7cd09?source=collection_archive---------11-----------------------#2022-01-23">https://medium.com/geekculture/send-files-with-html5s-form-and-catching-with-express-js-handlebars-templating-bacc2fa7cd09?source=collection_archive---------11-----------------------#2022-01-23</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/463e782a8b89b974a27b4bd20480f367.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*OIbs0BdUhVdqCkEM.jpg"/></div></div></figure><div class=""/><p id="f102" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">嗨，这是一个关于Express.js和Handlebars的新帖子，我想介绍一下用默认的表单方式发送文件和获取，从而达到用js发送数据和文件的目的。</p><h1 id="57d2" class="jo jp ht bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">目录的结构</h1><p id="d2f3" class="pw-post-body-paragraph iq ir ht is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">首先，您需要创建一个目录，无论您想选择什么名称，我选择filesjs只是为了方便。</p><h1 id="1572" class="jo jp ht bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">启动包JSON</h1><p id="8945" class="pw-post-body-paragraph iq ir ht is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">其次，运行这个命令来创建我们的包JSON，并以这种方式开始安装包。</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="ba70" class="la jp ht kw b fi lb lc l ld le">$ npm init -y</span></pre><h1 id="f4b3" class="jo jp ht bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">安装Expres.js和Express把手</h1><p id="5285" class="pw-post-body-paragraph iq ir ht is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">要安装依赖项，您需要运行这个命令，I表示安装，依赖项是下一个</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="de28" class="la jp ht kw b fi lb lc l ld le">$ npm i express express-handlebars</span></pre><h1 id="12b0" class="jo jp ht bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">车把结构</h1><p id="21ff" class="pw-post-body-paragraph iq ir ht is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">之后，我们需要创建视图目录，布局目录，并创建我们的server.js文件，如果你和我做的一样，你可以有这样的东西:</p><figure class="kr ks kt ku fd hk er es paragraph-image"><div class="er es lf"><img src="../Images/852876951abd6a0be78775b45599e203.png" data-original-src="https://miro.medium.com/v2/resize:fit:392/format:webp/1*w3z0IaYCcknX_RbMcNJKIw.png"/></div><figcaption class="lg lh et er es li lj bd b be z dx">Example Structure for Handlebars</figcaption></figure><p id="4030" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">第三，我们需要将home、404、500、sendFiles视图添加到我们的项目和主布局或默认布局中。</p><figure class="kr ks kt ku fd hk er es paragraph-image"><div class="er es lk"><img src="../Images/eefa3a8ec4c2f4555e76be45b2d0e976.png" data-original-src="https://miro.medium.com/v2/resize:fit:460/format:webp/1*veehIgFm9vj3-EgmXO-qAA.png"/></div><figcaption class="lg lh et er es li lj bd b be z dx">Example views and layouts</figcaption></figure><figure class="kr ks kt ku fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es ll"><img src="../Images/7c1441a663ad31155f54f9d72a2a8938.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f1j_nQ31wJ2eIw76FohJxw.png"/></div></div><figcaption class="lg lh et er es li lj bd b be z dx">Example default layout in this case main</figcaption></figure><figure class="kr ks kt ku fd hk er es paragraph-image"><div class="er es lm"><img src="../Images/7fdd45a7c41584b1fa07afda61d8e2a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:826/format:webp/1*whkni-xszO37KyhCP1v7DQ.png"/></div><figcaption class="lg lh et er es li lj bd b be z dx">Example Home view</figcaption></figure><figure class="kr ks kt ku fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es ln"><img src="../Images/a3332991c939f9dad2fbbd5961e32ed6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q6MLhGb6eon5yOJPPQvrBg.png"/></div></div><figcaption class="lg lh et er es li lj bd b be z dx">Example 500 and 404 views</figcaption></figure><figure class="kr ks kt ku fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lo"><img src="../Images/fa78468d46cc976fd238d3dddfc1be0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aulGr8ja7ShoHpksmEcNHg.png"/></div></div><figcaption class="lg lh et er es li lj bd b be z dx">Example sendFiles view</figcaption></figure><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="3dac" class="la jp ht kw b fi lb lc l ld le">&lt;div <em class="lp">class=</em>"container"&gt;&lt;div <em class="lp">class=</em>"row"&gt;&lt;div <em class="lp">class=</em>"col-5"&gt;&lt;h2&gt;Sending files &lt;/h2&gt;&lt;form <em class="lp">action=</em>"/api/sendfiles/{{ <em class="lp">year</em> }}/{{ <em class="lp">month</em> }}" <em class="lp">method=</em>"POST" <em class="lp">enctype=</em>"multipart/form-data"&gt;&lt;div <em class="lp">class=</em>"form-group"&gt;&lt;label <em class="lp">for=</em>"userName"&gt;User Name&lt;/label&gt;&lt;input <em class="lp">type=</em>"text" <em class="lp">id</em>="userName" <em class="lp">name=</em>"userName" <em class="lp">class=</em>"form-control" <em class="lp">value=</em>"Flame Princess"&gt;&lt;/div&gt;&lt;div <em class="lp">class=</em>"form-group"&gt;&lt;label <em class="lp">for=</em>"userEmail"&gt;User Email&lt;/label&gt;&lt;input <em class="lp">type=</em>"email" <em class="lp">id</em>="userEmail" <em class="lp">name=</em>"userEmail" <em class="lp">class=</em>"form-control" <em class="lp">value=</em>"flame_princess@adventuretime.org"&gt;&lt;/div&gt;&lt;div <em class="lp">class=</em>"form-group"&gt;&lt;label <em class="lp">for=</em>"userFile"&gt;Insert Just Images&lt;/label&gt;&lt;input <em class="lp">type=</em>"file" <em class="lp">id</em>="userFile" <em class="lp">name=</em>"userFile" <em class="lp">accept=</em>"image/*" &gt;&lt;/div&gt;&lt;button <em class="lp">type=</em>"submit" <em class="lp">class=</em>"btn btn-primary"&gt;Send Data&lt;/button&gt;&lt;/form&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</span></pre><p id="14ee" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果您在主布局中看到了上面的示例，我添加了Bootstrap CDN来为表单视图添加一些样式，在sendFiles视图中，我添加了通用表单行为的所有输入和标签，请注意，我向URL添加了{{year}}和{{month}}，因为我们将添加一些动态变量，我还添加了方法，在这种情况下enctype是“multipart/form-data”来发送文件</p><h1 id="532f" class="jo jp ht bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">我们的服务器</h1><p id="66d0" class="pw-post-body-paragraph iq ir ht is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">这是我努力做到简洁和整洁的最重要的部分，首先我有express框架，然后是app和express handlebars库，导入home、sendFiles、API和thankyou这些是接收两个参数请求和响应的函数，但我在我们的lib目录中划分了一个名为handles.js的JS文件以保持整洁，然后我将引擎和设置添加到视图引擎模板中， 第二，我添加了视图，第三，post视图在这种情况下，我添加了库multiparty一个管理多部分/表单数据(文件)的好库，您还需要安装它:</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="f9f1" class="la jp ht kw b fi lb lc l ld le">$ npm i multiparty</span></pre><figure class="kr ks kt ku fd hk er es paragraph-image"><div class="er es lr"><img src="../Images/ffe8dff54e9800bb5d37ee7c5e37cf1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1110/format:webp/1*6AyngC4-7odzWzo62mOY4Q.png"/></div><figcaption class="lg lh et er es li lj bd b be z dx">Example Complete Server code</figcaption></figure><p id="9b18" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">多方的有趣之处在于，它解析来自请求的所有信息，并将其分为字段和文件两部分传递(这是管理数据的完美方式)，但我们需要实例化一个新的表单，并使用解析方法添加req、error、fields和files，最后，我添加了error的类，如果发生了什么，并将req、res、fields和files传递给sendFilesCommon函数</p><p id="a76d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">第四，我用404，500和listen方法启动了我们的服务器。</p><p id="2365" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Handles.js文件部分，在这部分只是对home，sendfiles的请求和响应，谢谢。API有两个函数来管理来自请求的文件和字段，但是如果您仔细观察，您会发现该函数需要我们之前在post方法中共享的req、res、字段和文件</p><figure class="kr ks kt ku fd hk er es paragraph-image"><div class="er es ls"><img src="../Images/6441031a5dd5a23ea51464674c7770be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1190/format:webp/1*q24A8AS9LGabSFvfZIzU4Q.png"/></div><figcaption class="lg lh et er es li lj bd b be z dx">Example handles Js file</figcaption></figure><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="0984" class="la jp ht kw b fi lb lc l ld le"><em class="lp">exports</em>.home = ( <em class="lp">req</em>, <em class="lp">res</em> ) =&gt; <em class="lp">res</em>.render( 'home' )<br/><em class="lp">exports</em>.sendFiles = ( <em class="lp">req</em>, <em class="lp">res</em> ) =&gt; <em class="lp">res</em>.render( 'sendfiles', {<br/>year: '2022',<br/>month: 'july'} )<br/><em class="lp">exports</em>.thankyou = ( <em class="lp">req</em>, <em class="lp">res</em> ) =&gt; <em class="lp">res</em>.render( 'thank-you' )<br/><em class="lp">exports</em>.api = {<br/>sendFilesCommon: ( <em class="lp">req</em>, <em class="lp">res</em>, <em class="lp">fields</em>, <em class="lp">files</em> ) =&gt; {<br/>console.log( 'Fields: ', <em class="lp">fields</em> )<br/>console.log( 'Files ', <em class="lp">files</em> )<br/><em class="lp">res</em>.redirect( 303, '/thank-you')<br/>},<br/>sendFilesFetch: ( <em class="lp">req</em>, <em class="lp">res</em>, <em class="lp">fields</em>, <em class="lp">files</em> ) =&gt; {<br/>console.log( 'fiels: ', <em class="lp">fields</em> )<br/>console.log( 'files', <em class="lp">files</em> )<br/><em class="lp">res</em>.json({<br/>success: true<br/>})}}</span></pre><p id="ddb8" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">运行服务器</p><figure class="kr ks kt ku fd hk er es paragraph-image"><div class="er es lt"><img src="../Images/8177f2564fd2a2435aac961674cf1782.png" data-original-src="https://miro.medium.com/v2/resize:fit:496/format:webp/1*6YierzQQ7IaRzP9OpF0PpQ.png"/></div><figcaption class="lg lh et er es li lj bd b be z dx">Example Home page</figcaption></figure><figure class="kr ks kt ku fd hk er es paragraph-image"><div class="er es lu"><img src="../Images/ba8452066f15b157ae0bf64a58d679e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:706/format:webp/1*yt3tQB90eKMlfUXS1yCC9Q.png"/></div><figcaption class="lg lh et er es li lj bd b be z dx">Example sending data with default form’s behave</figcaption></figure><p id="f521" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果我们单击“发送数据”按钮，我们可以看到它会将我们发送到感谢页面</p><figure class="kr ks kt ku fd hk er es paragraph-image"><div class="er es lv"><img src="../Images/a8a39fd935e443d2effdbf506a2eb94e.png" data-original-src="https://miro.medium.com/v2/resize:fit:712/format:webp/1*RnNUmhCvZsGqESZSNbxe3g.png"/></div><figcaption class="lg lh et er es li lj bd b be z dx">Example thank-you page</figcaption></figure><p id="2ea0" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果我们检查控制台输出，我们可以看到来自用户的所有数据</p><figure class="kr ks kt ku fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lw"><img src="../Images/656d81bdb5f36cf8b9bc31c08a93a6db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I8gjUxmXCk78HxhjFWx-zQ.png"/></div></div><figcaption class="lg lh et er es li lj bd b be z dx">Example output server</figcaption></figure><h1 id="c488" class="jo jp ht bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">获取零件</h1><p id="0665" class="pw-post-body-paragraph iq ir ht is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">我们需要改变一点我们的服务器和视图，添加脚本部分，我们只需要指定方法和主体在这种情况下，浏览器为我们做所有的工作，检查我没有指定标题(多部分/表单数据),我还使用了新的FormData()对象，这一切都完成了！</p><figure class="kr ks kt ku fd hk er es paragraph-image"><div class="er es lx"><img src="../Images/d750cd74a8a0e1916510a243d6012dde.png" data-original-src="https://miro.medium.com/v2/resize:fit:1242/format:webp/1*owvwFS2QkmiWEWjSoarxZA.png"/></div><figcaption class="lg lh et er es li lj bd b be z dx">Example adding script to the sendfiles view</figcaption></figure><p id="f3f4" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">此外，一个fetch API和添加h2来告诉客户端该过程是否成功或者我们是否有错误:(</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="86ed" class="la jp ht kw b fi lb lc l ld le">&lt;div <em class="lp">class</em>="container"&gt;<br/>&lt;div <em class="lp">class</em>="row"&gt;<br/>&lt;div <em class="lp">class</em>="col-5"&gt;<br/>&lt;h2&gt;Sending files &lt;/h2&gt;<br/>&lt;form <em class="lp">id</em>="formFiles"&gt;<br/>&lt;div <em class="lp">class</em>="form-group"&gt;<br/>&lt;label <em class="lp">for</em>="userName"&gt;User Name&lt;/label&gt;<br/>&lt;input <em class="lp">type</em>="text" <em class="lp">id</em>="userName" <em class="lp">name</em>="userName" <em class="lp">class</em>="form-control" <em class="lp">value</em>="Flame Princess"&gt;<br/>&lt;/div&gt;<br/>&lt;div <em class="lp">class</em>="form-group"&gt;<br/>&lt;label <em class="lp">for</em>="userEmail"&gt;User Email&lt;/label&gt;<br/>&lt;input <em class="lp">type</em>="email" <em class="lp">id</em>="userEmail" <em class="lp">name</em>="userEmail" <em class="lp">class</em>="form-control" <em class="lp">value</em>="flame_princess@adventuretime.org"&gt;<br/>&lt;/div&gt;<br/>&lt;div <em class="lp">class</em>="form-group"&gt;<br/>&lt;label <em class="lp">for</em>="userFile"&gt;Insert Just Images&lt;/label&gt;<br/>&lt;input <em class="lp">type</em>="file" <em class="lp">id</em>="userFile" <em class="lp">name</em>="userFile" <em class="lp">accept</em>="image/*" &gt;<br/>&lt;/div&gt;<br/>&lt;button <em class="lp">type</em>="submit" <em class="lp">class</em>="btn btn-primary"&gt;Send Data&lt;/button&gt;&lt;/form&gt;<br/>&lt;h2 <em class="lp">id</em>="fetch_data"&gt;&lt;/h2&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;script&gt;<br/>let form  = document.querySelector( '#formFiles' ),<br/>h2    = document.querySelector( '#fetch_data' )<br/>form.addEventListener( 'submit', <em class="lp">e</em> =&gt; {<br/><em class="lp">e</em>.preventDefault()<br/>fetch( '/api/sendfilesfetch/{{year}}/{{month}}', {<br/>method: 'POST',<br/>body: <strong class="kw hu">new</strong> <em class="lp">FormData</em>( form )<br/>})<br/>.then( <em class="lp">raw</em> =&gt; {<br/>if( <em class="lp">raw</em>.status &lt; 200 || <em class="lp">raw</em>.status &gt;= 300 ){<br/>console.log( `Error managing your data ${ <strong class="kw hu">new</strong> <em class="lp">Error</em>( <em class="lp">raw</em>.status ) }`<br/>)}<br/>return <em class="lp">raw</em>.json()<br/>})<br/>.then( <em class="lp">data</em> =&gt; {<br/>console.log( <em class="lp">data</em> )<br/>h2.textContent = 'Your data was uploaded'<br/>})<br/>.catch( <em class="lp">err</em> =&gt; {<br/>console.log( <strong class="kw hu">new</strong> <em class="lp">Error</em>( <em class="lp">err</em>.message ) )<br/>h2.textContent = 'there was a problem uploading your data :('<br/>})<br/>})<br/>&lt;/script&gt;</span></pre><p id="30f4" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">再次运行服务器</p><figure class="kr ks kt ku fd hk er es paragraph-image"><div class="er es ly"><img src="../Images/1936eb2e253b6b08dcf07883bf09e6e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:704/format:webp/1*EXcw4WKbI1mIAH1DcR50mQ.png"/></div><figcaption class="lg lh et er es li lj bd b be z dx">Example send files with fetch</figcaption></figure><p id="6c4b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">发送文件！</p><figure class="kr ks kt ku fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lz"><img src="../Images/92e5ebab83f323d6fecd1375b91ca394.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CCXhPMa2RbyxS36IOO3lIQ.png"/></div></div><figcaption class="lg lh et er es li lj bd b be z dx">Example successful delivery of the files</figcaption></figure><p id="8b16" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">酷！我们发送文件，我们收到一个成功真的一切都很酷，但我们需要再次检查控制台</p><figure class="kr ks kt ku fd hk er es paragraph-image"><div class="er es ma"><img src="../Images/da448432edfc898cd0b49b06b8b411ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1230/format:webp/1*CvXQaoh0yknMxD2rvVHq3A.png"/></div><figcaption class="lg lh et er es li lj bd b be z dx">Example output files sent by fetch</figcaption></figure><p id="363d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">酷！！！我们做到了</p><p id="0a6b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们服务器的完整代码</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="989d" class="la jp ht kw b fi lb lc l ld le">const express     = require( 'express' ),<br/>app         = express(),port        = process.env.PORT || 1024,{ engine }  = require( 'express-handlebars' ),<br/>{home, sendFiles, api, thankyou}           = require( './lib/handles' ),<br/>multiparty  = require( 'multiparty' )<br/>app.use( express.urlencoded({ extended: false }))<br/>app.engine( 'handlebars', engine({defaultLayout: 'main'}))<br/>app.set( 'view engine', 'handlebars' )<br/>app.get( '', home )app.get( '/sendfiles', sendFiles )<br/>app.get( '/thank-you', thankyou )<br/>app.post( '/api/sendfiles/:year/:month', ( <em class="lp">req</em>, <em class="lp">res</em> ) =&gt; {const form = <strong class="kw hu">new</strong> multiparty.Form()form.parse( <em class="lp">req</em>, ( <em class="lp">err</em>, <em class="lp">field</em>, <em class="lp">files</em> ) =&gt; {if( <em class="lp">err</em> ) <strong class="kw hu">new</strong> <em class="lp">Error</em>( `Error Handling The POST ${ <em class="lp">err</em>.message }` )api.sendFilesCommon( <em class="lp">req</em>, <em class="lp">res</em>, <em class="lp">field</em>, <em class="lp">files</em> )})})<br/>app.post( '/api/sendfilesfetch/:year/:month', ( <em class="lp">req</em>, <em class="lp">res</em> ) =&gt; {const form = <strong class="kw hu">new</strong> multiparty.Form()form.parse( <em class="lp">req</em>, ( <em class="lp">err</em>, <em class="lp">field</em>, <em class="lp">files</em> ) =&gt; {if( <em class="lp">err</em> ) <strong class="kw hu">new</strong> <em class="lp">Error</em>( `Error Handling The POST ${ <em class="lp">err</em>.message }` )api.sendFilesFetch( <em class="lp">req</em>, <em class="lp">res</em>, <em class="lp">field</em>, <em class="lp">files</em> )})})<br/>app.use( ( <em class="lp">req</em>, <em class="lp">res</em> ) =&gt; <em class="lp">res</em>.status( 404 ).render( '404' ))<br/>app.use( ( <em class="lp">err</em>, <em class="lp">req</em>, <em class="lp">res</em>, <em class="lp">next</em> ) =&gt; <em class="lp">res</em>.status( 500 ).render( '500' ))<br/>app.listen( port, console.log( `http:127.0.0.1:${ port }` ))</span></pre><h1 id="2cfb" class="jo jp ht bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">结论</h1><p id="8704" class="pw-post-body-paragraph iq ir ht is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">总之，如今发送数据非常普遍，发送文件也非常方便。我们都在交换数据，例如上传到我们的驱动器或在社交媒体上发送图像。我们总是在上传文件，这就是为什么这个小例子可以帮助你完成下一个Express.js和Handlebars项目。</p><h1 id="5932" class="jo jp ht bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">来源</h1><div class="hh hi ez fb hj mb"><a href="https://www.amazon.com/Web-Development-Node-Express-Leveraging-dp-1492053511/dp/1492053511/ref=dp_ob_title_bk" rel="noopener  ugc nofollow" target="_blank"><div class="mc ab dw"><div class="md ab me cl cj mf"><h2 class="bd hu fi z dy mg ea eb mh ed ef hs bi translated">使用Node和Express进行Web开发:利用JavaScript堆栈</h2><div class="mi l"><h3 class="bd b fi z dy mg ea eb mh ed ef dx translated">使用Node和Express进行Web开发:利用Amazon.com的JavaScript堆栈。*免费*送货到…</h3></div><div class="mj l"><p class="bd b fp z dy mg ea eb mh ed ef dx translated">www.amazon.com</p></div></div><div class="mk l"><div class="ml l mm mn mo mk mp hp mb"/></div></div></a></div><div class="hh hi ez fb hj mb"><a href="https://www.bootstrapcdn.com/" rel="noopener  ugc nofollow" target="_blank"><div class="mc ab dw"><div class="md ab me cl cj mf"><h2 class="bd hu fi z dy mg ea eb mh ed ef hs bi translated">Bootstrap和Font Awesome的官方CDN</h2><div class="mi l"><h3 class="bd b fi z dy mg ea eb mh ed ef dx translated">推荐的Bootstrap，Font Awesome，Bootswatch和Bootstrap图标的免费CDN。</h3></div><div class="mj l"><p class="bd b fp z dy mg ea eb mh ed ef dx translated">www.bootstrapcdn.com</p></div></div><div class="mk l"><div class="mq l mm mn mo mk mp hp mb"/></div></div></a></div></div></div>    
</body>
</html>