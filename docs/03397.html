<html>
<head>
<title>Learn Mongo DB in less than 5 minutes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在不到5分钟的时间内学习Mongo DB</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/learn-mongo-db-in-less-than-5-minutes-b3ada7e74949?source=collection_archive---------49-----------------------#2021-06-07">https://medium.com/geekculture/learn-mongo-db-in-less-than-5-minutes-b3ada7e74949?source=collection_archive---------49-----------------------#2021-06-07</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/84610a130f213316531a128dfcb02e9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*dB8S6DXTsRtjvZ_0"/></div></div></figure><div class=""/><p id="e869" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当你在学习Node.js的时候，学习数据库是必须的。在这种情况下，MongoDB和Mongoose将成为您最好的朋友。我们可以说Mongo DB是一个NoSQL数据库，这意味着它是一个面向文档的数据库，所有数据都可以存储在一个文档文件中——在本例中，将是一个JSON文档。结构非常简单:在MongoDB中，您可以在每个数据库上创建一个集合。每个集合都有一个键和值。由于这些输入，NoSQL数据库很容易进行更改。</p><p id="c1d9" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果您熟悉JSON，您会知道可以向对象添加更多的键和值:</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="f173" class="jx jy ht jt b fi jz ka l kb kc">{<br/>    field1: value1,<br/>    field2: value2,<br/>    field3: value3,   <br/>    field4:{<br/>        fiel4-1: value4-1,<br/>        field4-2: value4-2<br/>    }<br/>}</span></pre><p id="bd1b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你可能会想，如果我不给对象任何id呢？不要担心，MongoDB会为您添加id，以防您没有添加。</p><h2 id="6995" class="jx jy ht bd kd ke kf kg kh ki kj kk kl jb km kn ko jf kp kq kr jj ks kt ku kv bi translated">明白了！但是我们为什么需要猫鼬呢？</h2><p id="5e06" class="pw-post-body-paragraph iq ir ht is b it kw iv iw ix kx iz ja jb ky jd je jf kz jh ji jj la jl jm jn hb bi translated">Mongoose是一个JavaScript库，它基于一个模式定义了一个特定的模型——这是一个JSON结构，包含文件中的属性信息，比如验证。</p><p id="8549" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">但是首先，我们需要用connect()方法连接我们的数据库。connect()有一个强制参数，它是到MongoDB数据库或uri的链接。之后，我们需要使用listen()方法来运行服务器。</p><p id="4957" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">定义模式后，我们可以创建一个模型，并将其分配给MongoDB上的一个文档文件。多亏了Mongoose，您可以保存、删除或验证您的数据——我们也可以使用express-validate来验证我们的数据——使用MongoDB的异步功能。这是一个如何定义模式的示例:</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="3256" class="jx jy ht jt b fi jz ka l kb kc"><strong class="jt hu">const</strong> testSchema = mongoose.Schema({<br/>    name: String,<br/>})</span></pre><p id="c62a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">模式中可以定义各种数据:</p><ul class=""><li id="f631" class="lb lc ht is b it iu ix iy jb ld jf le jj lf jn lg lh li lj bi translated">线</li><li id="8eac" class="lb lc ht is b it lk ix ll jb lm jf ln jj lo jn lg lh li lj bi translated">数字</li><li id="d01f" class="lb lc ht is b it lk ix ll jb lm jf ln jj lo jn lg lh li lj bi translated">布尔代数学体系的</li><li id="a988" class="lb lc ht is b it lk ix ll jb lm jf ln jj lo jn lg lh li lj bi translated">缓冲区(二进制类型)</li><li id="e55d" class="lb lc ht is b it lk ix ll jb lm jf ln jj lo jn lg lh li lj bi translated">日期</li><li id="f507" class="lb lc ht is b it lk ix ll jb lm jf ln jj lo jn lg lh li lj bi translated">排列</li><li id="091b" class="lb lc ht is b it lk ix ll jb lm jf ln jj lo jn lg lh li lj bi translated">模式。类型. ObjectIdString(十六进制)</li><li id="cd40" class="lb lc ht is b it lk ix ll jb lm jf ln jj lo jn lg lh li lj bi translated">模式。类型。混合(任何数据)</li></ul><p id="9c70" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们可以使用done()在异步操作完成后继续。它可以被称为成功完成(null，data)，也可以被称为错误完成(err)。</p><h1 id="cd27" class="lp jy ht bd kd lq lr ls kh lt lu lv kl lw lx ly ko lz ma mb kr mc md me ku mf bi translated"><strong class="ak">管理我们的数据库</strong></h1><p id="ab20" class="pw-post-body-paragraph iq ir ht is b it kw iv iw ix kx iz ja jb ky jd je jf kz jh ji jj la jl jm jn hb bi translated">让我们看看在管理数据时可以使用的一些查询:</p><ul class=""><li id="063c" class="lb lc ht is b it iu ix iy jb ld jf le jj lf jn lg lh li lj bi translated"><strong class="is hu">在我们的数据库中查询</strong>:我们可以使用find()来查询集合内部。</li></ul><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="9a1e" class="jx jy ht jt b fi jz ka l kb kc">db.collection.find()</span></pre><p id="a48b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当我们想要<strong class="is hu">查阅</strong>我们使用的集合中具有特定值的特定文档时</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="397c" class="jx jy ht jt b fi jz ka l kb kc">db.collection.find({field:"value"})</span></pre><ul class=""><li id="16fb" class="lb lc ht is b it iu ix iy jb ld jf le jj lf jn lg lh li lj bi translated">创建模型的一些实例:Create()将一个对象数组作为第一个参数，并将所有对象保存在数据库中。</li><li id="a7d2" class="lb lc ht is b it lk ix ll jb lm jf ln jj lo jn lg lh li lj bi translated"><strong class="is hu">在我们的数据库中找到</strong>:</li></ul><p id="0f83" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们可以使用find()，它接受一个对象作为第一个参数和一个回调。这将返回一个匹配数组。</p><p id="2362" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们也可以使用findOne()，它将返回一个匹配的文档。</p><p id="3554" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">也可以使用findById()来查找字母数字键。</p><ul class=""><li id="d517" class="lb lc ht is b it iu ix iy jb ld jf le jj lf jn lg lh li lj bi translated"><strong class="is hu">在我们的数据库中插入</strong>:我们可以使用一些方法。首先，我们可以使用insert()</li></ul><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="0462" class="jx jy ht jt b fi jz ka l kb kc">db.collection.insert( { _id: 10, type: "misc", item: "book", qty: 5 <br/>} )</span></pre><ul class=""><li id="4450" class="lb lc ht is b it iu ix iy jb ld jf le jj lf jn lg lh li lj bi translated"><strong class="is hu">在我们的数据库中更新</strong>:我们可以使用Update()方法，并且我们需要在其中添加upsert标志。我们需要指出我们想要更新的对象的id，否则这将是数据库中的一个新元素。</li></ul><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="262e" class="jx jy ht jt b fi jz ka l kb kc">db.collection.update( <br/>{ _id: 10, type: "misc", item: "book", qty: 5 },<br/>{upsert:true}<br/> )</span></pre><p id="5a93" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您还可以使用标志{ multi: true }来更新多个对象。</p><ul class=""><li id="2945" class="lb lc ht is b it iu ix iy jb ld jf le jj lf jn lg lh li lj bi translated">您可以使用save()方法<strong class="is hu">插入</strong>一个文档。</li></ul><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="580e" class="jx jy ht jt b fi jz ka l kb kc">db.collection.save(function(err, data) { _id: 10, type: "misc", item: "book", qty: 5 <br/>} )</span></pre><ul class=""><li id="e569" class="lb lc ht is b it iu ix iy jb ld jf le jj lf jn lg lh li lj bi translated">您还可以使用insert one()方法<strong class="is hu">插入一个</strong>文档</li></ul><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="4815" class="jx jy ht jt b fi jz ka l kb kc">db.collection.insertOne( { _id: 10, type: "misc", item: "book", qty: 5 <br/>} )</span></pre><ul class=""><li id="5a65" class="lb lc ht is b it iu ix iy jb ld jf le jj lf jn lg lh li lj bi translated">要<strong class="is hu">移除</strong>一个文档，你可以使用remove()或drop()方法:</li></ul><p id="3144" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">remove()删除符合特定条件的文档，或者传递一个空文档来删除当前文档。</p><p id="0935" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">drop()删除所有的文档、id并删除集合。这种方法效率更高。</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="3584" class="jx jy ht jt b fi jz ka l kb kc">db.collection.remove( { type: "misc"} )</span><span id="3614" class="jx jy ht jt b fi mg ka l kb kc">db.collection.drop( { type: "misc" } )</span></pre></div></div>    
</body>
</html>