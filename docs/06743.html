<html>
<head>
<title>Healenium: Self-Healing Library for Selenium Test Automation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">healenium:Selenium测试自动化的自我修复库</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/healenium-self-healing-library-for-selenium-test-automation-26c2358629c5?source=collection_archive---------2-----------------------#2021-08-28">https://medium.com/geekculture/healenium-self-healing-library-for-selenium-test-automation-26c2358629c5?source=collection_archive---------2-----------------------#2021-08-28</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="9443" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">由于布局的改变和选择器的损坏，所有的自动化UI测试迟早都会捕获到NoSuchElementException。结果，测试崩溃，CI构建变成红色。在这篇文章中，我将介绍一个名为<a class="ae jd" href="https://healenium.io/" rel="noopener ugc nofollow" target="_blank"> Healenium </a>的自我修复库，它的功能和用途。</p><p id="c2cc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Healenium是一个人工智能驱动的<a class="ae jd" href="https://github.com/healenium" rel="noopener ugc nofollow" target="_blank">开源</a>库，它提高了基于Selenium的测试的稳定性，自动处理更新的web元素的变化，并使用自我修复机制帮助克服UI自动测试不稳定的问题。</p><p id="9616" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> Healenium为企业带来巨大价值:</strong></p><ul class=""><li id="3733" class="je jf hi ih b ii ij im in iq jg iu jh iy ji jc jj jk jl jm bi translated">它最大限度地减少了测试自动化代码维护时间，因此团队可以专注于增加覆盖率。</li><li id="7251" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">由于修复是在运行时执行的——自动化的端到端测试将是稳定的，UI更改将不再影响它们。</li><li id="59a3" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">测试提供准确的质量反馈，CI渠道只有在出现与产品相关的问题时才会失败。</li></ul><figure class="jt ju jv jw fd jx er es paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="er es js"><img src="../Images/520a325f099002adcf0b8f13f4de7ac8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*vOGG87KKiRiPDOZ9"/></div></div></figure><h1 id="806f" class="ke kf hi bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">里面有什么？</h1><p id="0adb" class="pw-post-body-paragraph if ig hi ih b ii lc ik il im ld io ip iq le is it iu lf iw ix iy lg ja jb jc hb bi translated">在引擎盖下，Healenium使用一种机器学习算法来分析当前网页的变化:用权重修改最长公共子序列算法。它解决了为标签、Id、类、值和其他属性寻找一组序列中所有序列共有的最长子序列的问题。所以如果一个元素改变了它在DOM中的位置或者有了新的id，Healenium会找到它并生成新的locator。</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="er es js"><img src="../Images/32b255c97b96c565b9e9cc2022846a0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Gg7-lHH7A7eMRk6g"/></div></div></figure><h1 id="7cf8" class="ke kf hi bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">【Healenium是如何工作的？</h1><p id="28c8" class="pw-post-body-paragraph if ig hi ih b ii lc ik il im ld io ip iq le is it iu lf iw ix iy lg ja jb jc hb bi translated">让我们看看这个例子。</p><p id="4dbc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">假设我们试图通过id<strong class="ih hj">#按钮在UI上找到我们的元素。</strong></p><p id="93e4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正如我们所看到的，元素被成功地找到了。Healenium在存储器中保存一个成功的定位器，作为下一次测试执行的基线</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="er es js"><img src="../Images/5112d4fbe6926d337a9e9be49d5fae81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Q6UDAQTOTBYLB9yM"/></div></div></figure><p id="5fda" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在假设UI发生了变化，目标元素的新id是一个<strong class="ih hj"> #green_button。</strong>但是测试团队没有意识到这些变化，也没有更新测试自动化代码库。</p><p id="7b4d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，我们试图通过旧id <strong class="ih hj"> #button </strong>找到目标元素，结果没有找到元素。</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="er es js"><img src="../Images/ad612950c79173ce7afdeb44ec321384.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*rxxeNvHIOW36v6y1"/></div></div></figure><p id="8934" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">标准的Selenium实现测试在这种情况下会失败，但Healenium不会。Healenium捕获NoSuchElement异常，触发机器学习算法，传递当前页面状态，获取之前成功的定位器路径，比较它们，并生成修复的定位器列表。</p><p id="0d2c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">它采用得分最高的定位器，并使用该定位器执行操作。</p><p id="8ddb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正如我们所看到的，该元素被成功地找到并通过了测试</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="er es js"><img src="../Images/d932e5a4327b5ea261191ea3ff14e9b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*MgXygF3CahE1lFd1"/></div></div></figure><p id="441a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">测试运行后，Healenium会生成一份报告，其中包含关于修复定位器、屏幕截图和修复成功反馈按钮的所有详细信息</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="er es lh"><img src="../Images/769a3f7ec3c8110bc454668e976780a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*bD2EVKjNVUh_ZLhK"/></div></div></figure><p id="ef41" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果修复成功，我们可以使用Healenium Idea插件更新我们的自动化测试。插件寻找修复并使用修复的定位器更新测试代码</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="er es js"><img src="../Images/453bc22514e72417e854ea133bf45888.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*P-4umJtWu_yyjLPt"/></div></div></figure><h1 id="02ac" class="ke kf hi bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated"><strong class="ak"> Healenium基础架构包含几个组件:</strong></h1><p id="00a4" class="pw-post-body-paragraph if ig hi ih b ii lc ik il im ld io ip iq le is it iu lf iw ix iy lg ja jb jc hb bi translated"><a class="ae jd" href="https://github.com/healenium/healenium-web" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj">healenium-web</strong></a><strong class="ih hj"/>—集成了测试自动化框架的Java库</p><ul class=""><li id="8511" class="je jf hi ih b ii ij im in iq jg iu jh iy ji jc jj jk jl jm bi translated">实现Selenium WebDriver</li><li id="ec4b" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">覆盖findElement()方法</li><li id="b06d" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">捕捉NoSuchElementException</li><li id="5051" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">激活树比较库中的LCS算法</li></ul><p id="eebe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" href="https://github.com/healenium/healenium-backend" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj">healenium-back end</strong></a><strong class="ih hj"/>—管理修复的docker容器，包括存储元素信息的PostgreSql数据库</p><ul class=""><li id="f2b3" class="je jf hi ih b ii ij im in iq jg iu jh iy ji jc jj jk jl jm bi translated">将参考元素路径保存到存储器</li><li id="0cd7" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">从存储中获取引用元素路径</li><li id="b3be" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">收集数据以生成报告</li></ul><p id="26eb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" href="https://github.com/healenium/healenium-report-gradle" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj">healenium-report-Gradle</strong></a><strong class="ih hj">，</strong><a class="ae jd" href="https://github.com/healenium/healenium-report-mvn" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj">healenium-report-maven</strong></a><strong class="ih hj"/>—Gradle和Maven报告，在每个测试套件运行后监听触发的测试会话并生成报告链接</p><p id="3c65" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">树比较— </strong> LCS算法实现</p><ul class=""><li id="2a49" class="je jf hi ih b ii ij im in iq jg iu jh iy ji jc jj jk jl jm bi translated">获取当前DOM状态</li><li id="df26" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">在当前状态下搜索最佳子序列</li><li id="f9b7" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">生成新的定位器(CSS、XPath、id等。)</li></ul><p id="9b0c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" href="https://github.com/healenium/healenium-idea" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj">healenium-Idea</strong></a>—Intellij Idea插件，在数据库中搜索治疗结果并更新代码库中的定位器</p><h1 id="ad4f" class="ke kf hi bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated"><strong class="ak">高级</strong> Healenium <strong class="ak">特性:</strong></h1><ul class=""><li id="127a" class="je jf hi ih b ii lc im ld iq li iu lj iy lk jc jj jk jl jm bi translated">多项目工作——您可以将不同项目的几个测试自动化框架连接到一个Healenium-backend实例。</li><li id="a306" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">并行测试执行——不要用一个线程来限制自己</li><li id="ac3c" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">在远程基础设施上执行测试——您可以在Selenium Grid或Selenoid上运行测试</li><li id="b156" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">Iframes，JS动作支持—用于高级测试</li><li id="8463" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">与selenium等基于硒的框架集成，用于您的测试实现</li><li id="e482" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">适用于带<a class="ae jd" href="https://github.com/healenium/healenium-appium" rel="noopener ugc nofollow" target="_blank">装置</a>的移动测试。</li><li id="abe4" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">借助于<a class="ae jd" href="https://github.com/healenium/healenium-plugin-reportportal" rel="noopener ugc nofollow" target="_blank"> healenium-RP </a>扩展，测试执行结果可以存储在报告门户中</li></ul><h1 id="eed4" class="ke kf hi bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">结论</h1><p id="d387" class="pw-post-body-paragraph if ig hi ih b ii lc ik il im ld io ip iq le is it iu lf iw ix iy lg ja jb jc hb bi translated">我想强调的是，Healenium可以成为解决项目UI自动测试不稳定问题的完美解决方案:</p><ul class=""><li id="4767" class="je jf hi ih b ii ij im in iq jg iu jh iy ji jc jj jk jl jm bi translated">频繁的用户界面变化</li><li id="d203" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">由内容管理系统生成的用户界面</li><li id="285f" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">基于Selenium WebDriver的测试自动化</li><li id="4805" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">需要本地化测试或在Internet Explorer下测试的项目</li></ul><p id="bab1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">在官方<a class="ae jd" href="https://github.com/healenium/healenium-example" rel="noopener ugc nofollow" target="_blank"> GitHub repo </a>中可以找到Healenium在不同测试自动化框架中使用的例子</strong></p></div></div>    
</body>
</html>