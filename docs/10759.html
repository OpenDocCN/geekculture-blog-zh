<html>
<head>
<title>Perform Sliced (Tiled) Inference and Detailed Error Analysis using YOLOv5 Models</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用YOLOv5模型执行切片(平铺)推理和详细的错误分析</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/perform-sliced-tiled-inference-and-detailed-error-analysis-using-yolov5-models-c5e5ad6c49c2?source=collection_archive---------14-----------------------#2022-02-14">https://medium.com/geekculture/perform-sliced-tiled-inference-and-detailed-error-analysis-using-yolov5-models-c5e5ad6c49c2?source=collection_archive---------14-----------------------#2022-02-14</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/65f4bd5018a9183392ff97cee5eac99e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*8QH1HKw5-lW_t77WRlO6FA.gif"/></div></div></figure><ul class=""><li id="2e49" class="iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh bi translated">卫星图像或高分辨率图像上的小目标检测需要切片(平铺)推理吗？</li><li id="2294" class="iq ir hi is b it ji iv jj ix jk iz jl jb jm jd je jf jg jh bi translated">您的检测模型需要可解释的度量标准吗(关于可能改进的见解)？</li><li id="d039" class="iq ir hi is b it ji iv jj ix jk iz jl jb jm jd je jf jg jh bi translated">你需要一个交互式用户界面来可视化错误的预测吗？</li><li id="bba0" class="iq ir hi is b it ji iv jj ix jk iz jl jb jm jd je jf jg jh bi translated">你依赖YOLOv5车型吗？</li></ul><p id="7739" class="pw-post-body-paragraph jn jo hi is b it iu jp jq iv iw jr js ix jt ju jv iz jw jx jy jb jz ka kb jd hb bi translated">所有这些都有可能与SAHI的YOLOv5集成🚀</p><div class="kc kd ez fb ke kf"><a href="https://github.com/obss/sahi" rel="noopener  ugc nofollow" target="_blank"><div class="kg ab dw"><div class="kh ab ki cl cj kj"><h2 class="bd hj fi z dy kk ea eb kl ed ef hh bi translated">GitHub — obss/sahi:一个用于执行大规模目标检测的轻量级视觉库/…</h2><div class="km l"><h3 class="bd b fi z dy kk ea eb kl ed ef dx translated">目标检测和实例分割是计算机视觉中最重要的应用领域</h3></div><div class="kn l"><p class="bd b fp z dy kk ea eb kl ed ef dx translated">github.com</p></div></div><div class="ko l"><div class="kp l kq kr ks ko kt io kf"/></div></div></a></div><p id="b8e6" class="pw-post-body-paragraph jn jo hi is b it iu jp jq iv iw jr js ix jt ju jv iz jw jx jy jb jz ka kb jd hb bi translated">这篇文章将带你完成YOLOv5型号的<strong class="is hj">安装</strong>、<strong class="is hj">切片推理</strong>、<strong class="is hj">错误分析、</strong>和<strong class="is hj">交互可视化</strong>步骤。</p><h2 id="04fd" class="ku kv hi bd kw kx ky kz la lb lc ld le ix lf lg lh iz li lj lk jb ll lm ln lo bi translated">装置</h2><p id="db9c" class="pw-post-body-paragraph jn jo hi is b it lp jp jq iv lq jr js ix lr ju jv iz ls jx jy jb lt ka kb jd hb bi translated">✔️安装Pytorch:</p><pre class="lu lv lw lx fd ly lz ma mb aw mc bi"><span id="21e8" class="ku kv hi lz b fi md me l mf mg">conda install pytorch=1.10.0 torchvision=0.11.1 cudatoolkit=11.3 -c pytorch</span></pre><p id="f331" class="pw-post-body-paragraph jn jo hi is b it iu jp jq iv iw jr js ix jt ju jv iz jw jx jy jb jz ka kb jd hb bi translated">✔️安装SAHI:</p><pre class="lu lv lw lx fd ly lz ma mb aw mc bi"><span id="7703" class="ku kv hi lz b fi md me l mf mg">conda install sahi -c conda-forge<br/>or<br/>pip install -U sahi</span></pre><p id="adda" class="pw-post-body-paragraph jn jo hi is b it iu jp jq iv iw jr js ix jt ju jv iz jw jx jy jb jz ka kb jd hb bi translated">✔️安装YOLOv5:</p><pre class="lu lv lw lx fd ly lz ma mb aw mc bi"><span id="e1a2" class="ku kv hi lz b fi md me l mf mg">pip install -U yolov5</span></pre><h2 id="20e2" class="ku kv hi bd kw kx ky kz la lb lc ld le ix lf lg lh iz li lj lk jb ll lm ln lo bi translated">切片预测</h2><figure class="lu lv lw lx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/167f34e57f4c0dcbca8542ec2249cf4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*58m5JWdMhYS9YY4hqkD8rA.gif"/></div></div><figcaption class="mh mi et er es mj mk bd b be z dx">Gif showing sliced prediction capabilities of SAHI.</figcaption></figure><p id="f764" class="pw-post-body-paragraph jn jo hi is b it iu jp jq iv iw jr js ix jt ju jv iz jw jx jy jb jz ka kb jd hb bi translated">✔️用你的重量路径来执行推论:</p><pre class="lu lv lw lx fd ly lz ma mb aw mc bi"><span id="99b0" class="ku kv hi lz b fi md me l mf mg">sahi predict --source image_dir/ --model_type yolov5 --model_path yolov5s.pt --slice_height 512 --slice_width 512</span></pre><h2 id="6893" class="ku kv hi bd kw kx ky kz la lb lc ld le ix lf lg lh iz li lj lk jb ll lm ln lo bi translated">误差分析图/指标</h2><p id="ce30" class="pw-post-body-paragraph jn jo hi is b it lp jp jq iv lq jr js ix lr ju jv iz ls jx jy jb lt ka kb jd hb bi translated">✔️使用COCO格式的数据集创建COCO格式的预测结果:</p><figure class="lu lv lw lx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/83b9bb7fd0520e645a37e3bbe6b7515a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*ysf92j9OHKIGh4-qLdQ3uA.gif"/></div></div><figcaption class="mh mi et er es mj mk bd b be z dx">Gif showing COCO formatted dataset prediction capabilities of SAHI.</figcaption></figure><pre class="lu lv lw lx fd ly lz ma mb aw mc bi"><span id="dc79" class="ku kv hi lz b fi md me l mf mg">sahi predict --source image_dir/ --dataset_json_path dataset.json --model_type yolov5 --model_path yolov5s.pt --no_sliced_prediction</span></pre><p id="310d" class="pw-post-body-paragraph jn jo hi is b it iu jp jq iv iw jr js ix jt ju jv iz jw jx jy jb jz ka kb jd hb bi translated">✔️使用创建的result.json创建误差分析图:</p><figure class="lu lv lw lx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/b25f2210d392db0edba3cfad289d4449.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*2x_JQYsktlmo2v8ruluxEQ.gif"/></div></div><figcaption class="mh mi et er es mj mk bd b be z dx">Gif showing error analysis capabilities of SAHI.</figcaption></figure><pre class="lu lv lw lx fd ly lz ma mb aw mc bi"><span id="9834" class="ku kv hi lz b fi md me l mf mg">sahi coco analyse --dataset_json_path dataset.json --result_json_path result.json</span></pre><p id="5c08" class="pw-post-body-paragraph jn jo hi is b it iu jp jq iv iw jr js ix jt ju jv iz jw jx jy jb jz ka kb jd hb bi translated">🎯指标的含义:</p><p id="e7a5" class="pw-post-body-paragraph jn jo hi is b it iu jp jq iv iw jr js ix jt ju jv iz jw jx jy jb jz ka kb jd hb bi translated"><strong class="is hj">C75:</strong>IOU阈值为0.75时的结果<br/><strong class="is hj">C50:</strong>IOU阈值为0.50时的结果<br/> <strong class="is hj"> Loc: </strong>忽略定位错误后的结果<br/> <strong class="is hj"> Sim: </strong>忽略超类别假阳性后的结果<br/> <strong class="is hj"> Oth: </strong>忽略所有类别混淆后的结果<br/> <strong class="is hj"> BG: </strong>忽略所有假阳性后的结果<br/></p><p id="459a" class="pw-post-body-paragraph jn jo hi is b it iu jp jq iv iw jr js ix jt ju jv iz jw jx jy jb jz ka kb jd hb bi translated">📈可能的模型改进:</p><p id="5125" class="pw-post-body-paragraph jn jo hi is b it iu jp jq iv iw jr js ix jt ju jv iz jw jx jy jb jz ka kb jd hb bi translated"><strong class="is hj"> C75-C50和C50-Loc= </strong>具有更精确边界框预测的潜在增益<br/> <strong class="is hj"> Loc-Sim= </strong>修复超级类别混淆后的潜在增益<br/> <strong class="is hj"> Loc-Oth= </strong>修复类别混淆后的潜在增益<br/> <strong class="is hj"> Oth-BG= </strong>修复所有假阳性后的潜在增益<br/> <strong class="is hj"> BG-FN= </strong>修复所有假阴性后的潜在增益</p><h2 id="52a1" class="ku kv hi bd kw kx ky kz la lb lc ld le ix lf lg lh iz li lj lk jb ll lm ln lo bi translated">交互式可视化</h2><p id="9759" class="pw-post-body-paragraph jn jo hi is b it lp jp jq iv lq jr js ix lr ju jv iz ls jx jy jb lt ka kb jd hb bi translated">✔️安装五十一:</p><pre class="lu lv lw lx fd ly lz ma mb aw mc bi"><span id="3ecb" class="ku kv hi lz b fi md me l mf mg">pip install -U fiftyone</span></pre><p id="eacf" class="pw-post-body-paragraph jn jo hi is b it iu jp jq iv iw jr js ix jt ju jv iz jw jx jy jb jz ka kb jd hb bi translated">✔️用你的预测结果启动一个web应用程序:</p><figure class="lu lv lw lx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/0e72daa81b3a2b54505b801a4cfa903e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Mq9jy8x0IBRcUbK6PI-C6A.gif"/></div></div><figcaption class="mh mi et er es mj mk bd b be z dx">Gif showing interactive visualization capabilities of SAHI.</figcaption></figure><pre class="lu lv lw lx fd ly lz ma mb aw mc bi"><span id="05bc" class="ku kv hi lz b fi md me l mf mg">sahi coco fiftyone --dataset_json_path dataset.json --image_dir image_dir/ result.json</span></pre></div></div>    
</body>
</html>