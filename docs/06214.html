<html>
<head>
<title>How to Use Delta Sharing with Google Colab</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用谷歌Colab的增量共享</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/delta-sharing-bc9f1939d08b?source=collection_archive---------3-----------------------#2021-08-12">https://medium.com/geekculture/delta-sharing-bc9f1939d08b?source=collection_archive---------3-----------------------#2021-08-12</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="4b64" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">Delta Sharing是业内首个安全数据共享的开放协议，无论其他组织使用何种计算平台或云存储，都可以轻松安全地与他们共享大量数据。</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/f4fc714d9976a2761c4421e5e7476877.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uLNXwiidv9D-_hABOjYlUA.png"/></div></div></figure><h1 id="3fd5" class="jj jk hi bd jl jm jn jo jp jq jr js jt io ju ip jv ir jw is jx iu jy iv jz ka bi translated">增量共享</h1><p id="dabb" class="pw-post-body-paragraph kb kc hi kd b ke kf ij kg kh ki im kj kk kl km kn ko kp kq kr ks kt ku kv kw hb bi translated"><a class="ae kx" href="https://delta.io/sharing/" rel="noopener ugc nofollow" target="_blank"> Delta Sharing </a>是一个Linux Foundation开源框架。想象一下，这是一种从您的数据湖中共享大量实时数据的现代方式。内部、云中或混合。基本上任何一种支持pandas或Spark的接收器都可以使用，所以不存在供应商锁定。</p><h2 id="db20" class="ky jk hi bd jl kz la lb jp lc ld le jt kk lf lg jv ko lh li jx ks lj lk jz ll bi translated">增量共享0.2.0</h2><p id="55a3" class="pw-post-body-paragraph kb kc hi kd b ke kf ij kg kh ki im kj kk kl km kn ko kp kq kr ks kt ku kv kw hb bi translated">在撰写本文时，Delta Sharing的<a class="ae kx" href="https://github.com/delta-io/delta-sharing/releases" rel="noopener ugc nofollow" target="_blank">版本0.2.0 </a>已经发布。</p><h2 id="4de0" class="ky jk hi bd jl kz la lb jp lc ld le jt kk lf lg jv ko lh li jx ks lj lk jz ll bi translated">入门指南</h2><p id="2691" class="pw-post-body-paragraph kb kc hi kd b ke kf ij kg kh ki im kj kk kl km kn ko kp kq kr ks kt ku kv kw hb bi translated">作为一个快速的冒烟测试，让我向您展示如何创建一个从现有的Delta共享服务器读取数据的客户机(有时也称为“接收器”)。</p><p id="47d5" class="pw-post-body-paragraph kb kc hi kd b ke lm ij kg kh ln im kj kk lo km kn ko lp kq kr ks lq ku kv kw hb bi translated">我喜欢有偏见:-)，所以我建议为此使用<a class="ae kx" href="https://databricks.com/try-databricks" rel="noopener ugc nofollow" target="_blank"> Databricks workspace </a>。或者，你也可以使用<a class="ae kx" href="https://aws.amazon.com/emr" rel="noopener ugc nofollow" target="_blank">亚马逊EMR </a>、谷歌<a class="ae kx" href="https://cloud.google.com/dataproc" rel="noopener ugc nofollow" target="_blank"> Dataproc </a>、谷歌的Data Colab、笔记本电脑上的<a class="ae kx" href="https://jupyter.org/" rel="noopener ugc nofollow" target="_blank"> Jupyter笔记本</a>，或者普通的老式<a class="ae kx" href="https://github.com/delta-io/delta-sharing/blob/main/examples/python/quickstart_pandas.py" rel="noopener ugc nofollow" target="_blank">独立Python </a>程序。</p><h2 id="f7e8" class="ky jk hi bd jl kz la lb jp lc ld le jt kk lf lg jv ko lh li jx ks lj lk jz ll bi translated">开放协议/无供应商限制</h2><p id="fb53" class="pw-post-body-paragraph kb kc hi kd b ke kf ij kg kh ki im kj kk kl km kn ko kp kq kr ks kt ku kv kw hb bi translated">你还记得凯尔西(在谷歌工作)在CNCF做AWS Lamda演示的那些日子吗？回报的时候到了。因此，为了证明我的观点，即Delta共享与数据块无关，我会选择Google Colab。我的客户端实现将与包含公共数据集的数据块托管的演示服务器进行对话。</p><h2 id="b473" class="ky jk hi bd jl kz la lb jp lc ld le jt kk lf lg jv ko lh li jx ks lj lk jz ll bi translated">访问或创建增量共享服务器</h2><p id="e201" class="pw-post-body-paragraph kb kc hi kd b ke kf ij kg kh ki im kj kk kl km kn ko kp kq kr ks kt ku kv kw hb bi translated">如果您复制下面的例子，只需将您的代码指向由Databricks托管的同一个演示服务器，就可以轻松开始了。</p><p id="e8eb" class="pw-post-body-paragraph kb kc hi kd b ke lm ij kg kh ln im kj kk lo km kn ko lp kq kr ks lq ku kv kw hb bi translated">当然，您也可以启动自己的Delta共享服务器。这很容易，因为Databricks提供了服务器的参考实现。随着0.2.0版本的Delta Sharing，共享服务器也可以作为Docker hub上的<a class="ae kx" href="https://hub.docker.com/r/deltaio/delta-sharing-server" rel="noopener ugc nofollow" target="_blank"> Docker镜像</a>使用。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lr"><img src="../Images/17b7b666784ffb1ef4f8e87e42be7f2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AqOXktYfisb1Cp1UNb3R5w.png"/></div></div></figure><p id="52c0" class="pw-post-body-paragraph kb kc hi kd b ke lm ij kg kh ln im kj kk lo km kn ko lp kq kr ks lq ku kv kw hb bi translated">第三个当然也是最舒适的选择是简单地从你的数据块<a class="ae kx" href="https://databricks.com/blog/2021/05/26/introducing-delta-sharing-an-open-protocol-for-secure-data-sharing.html" rel="noopener ugc nofollow" target="_blank">工作空间</a>共享数据。</p><h2 id="e604" class="ky jk hi bd jl kz la lb jp lc ld le jt kk lf lg jv ko lh li jx ks lj lk jz ll bi translated">逐步说明</h2><p id="97db" class="pw-post-body-paragraph kb kc hi kd b ke kf ij kg kh ki im kj kk kl km kn ko kp kq kr ks kt ku kv kw hb bi translated">要开始，进入<a class="ae kx" href="https://colab.research.google.com/" rel="noopener ugc nofollow" target="_blank"> Google Colab </a>，打开一个新的笔记本。</p><p id="3e5a" class="pw-post-body-paragraph kb kc hi kd b ke lm ij kg kh ln im kj kk lo km kn ko lp kq kr ks lq ku kv kw hb bi translated">在笔记本的第一个单元中，使用<strong class="kd hj"> pip </strong>安装增量共享Python包，以便该包可以在笔记本中使用:</p><pre class="iy iz ja jb fd ls lt lu lv aw lw bi"><span id="d506" class="ky jk hi lt b fi lx ly l lz ma">!pip install delta-sharing</span></pre><p id="f25d" class="pw-post-body-paragraph kb kc hi kd b ke lm ij kg kh ln im kj kk lo km kn ko lp kq kr ks lq ku kv kw hb bi translated">然后，在第二个单元格中，通过几行代码，您可以创建一个指向profile_file中定义的服务器端点的<strong class="kd hj">增量共享客户端</strong>，<strong class="kd hj">列出所有共享表</strong>，<strong class="kd hj">将数据加载到pandas数据框</strong>，并显示一个经过<strong class="kd hj">过滤的数据子集</strong>。</p></div><div class="ab cl mb mc gp md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="hb hc hd he hf"><pre class="iy iz ja jb fd ls lt lu lv aw lw bi"><span id="c797" class="ky jk hi lt b fi lx ly l lz ma"><br/>import delta_sharing</span><span id="99e7" class="ky jk hi lt b fi mi ly l lz ma"># Point to the profile file, location also works with http(s)<br/>profile_file = “https://raw.githubusercontent.com/delta-io/delta-sharing/main/examples/open-datasets.share"</span><span id="29e6" class="ky jk hi lt b fi mi ly l lz ma"># Create a SharingClient.<br/>client = delta_sharing.SharingClient(profile_file)</span><span id="cbe4" class="ky jk hi lt b fi mi ly l lz ma"># List all shared tables.<br/>print(client.list_all_tables())</span><span id="0746" class="ky jk hi lt b fi mi ly l lz ma"># load data as pandas dataframe (or Spark)<br/>table_url = profile_file + “#delta_sharing.default.owid-covid-data”<br/>data = delta_sharing.load_as_pandas(table_url)</span><span id="26f5" class="ky jk hi lt b fi mi ly l lz ma"># display filtered data<br/>print(data[data[“iso_code”] == “USA”].head(10))</span></pre><p id="da96" class="pw-post-body-paragraph kb kc hi kd b ke lm ij kg kh ln im kj kk lo km kn ko lp kq kr ks lq ku kv kw hb bi translated">运行代码后，您的输出应该如下所示:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mj"><img src="../Images/ec554c498db82a24368a349d001f1ef9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sdmvcVUM150qkgIkNPV_Pw.png"/></div></div><figcaption class="mk ml et er es mm mn bd b be z dx">Delta Sharing</figcaption></figure><h1 id="f52f" class="jj jk hi bd jl jm jn jo jp jq jr js jt io ju ip jv ir jw is jx iu jy iv jz ka bi translated">数据网格</h1><p id="d8f1" class="pw-post-body-paragraph kb kc hi kd b ke kf ij kg kh ki im kj kk kl km kn ko kp kq kr ks kt ku kv kw hb bi translated">最近有很多关于数据网格的讨论。在本文中，我将把它简化为数据网格的两个核心构建块。</p><p id="413e" class="pw-post-body-paragraph kb kc hi kd b ke lm ij kg kh ln im kj kk lo km kn ko lp kq kr ks lq ku kv kw hb bi translated">注意，使用<strong class="kd hj"> Delta sharing </strong>客户端，用一行代码创建对各种外部数据湖的访问是多么简单:</p><pre class="iy iz ja jb fd ls lt lu lv aw lw bi"><span id="af3e" class="ky jk hi lt b fi lx ly l lz ma">client1 = delta_sharing.SharingClient(<strong class="lt hj">profile_file1</strong>)</span></pre><h2 id="4127" class="ky jk hi bd jl kz la lb jp lc ld le jt kk lf lg jv ko lh li jx ks lj lk jz ll bi translated">数据治理</h2><p id="4246" class="pw-post-body-paragraph kb kc hi kd b ke kf ij kg kh ki im kj kk kl km kn ko kp kq kr ks kt ku kv kw hb bi translated">然而，数据网格不仅仅是能够在技术上对外共享数据。数据网格更多的是关于企业内部正在发生的事情。它是关于你如何管理你公司的各种数据湖。</p><p id="eda4" class="pw-post-body-paragraph kb kc hi kd b ke lm ij kg kh ln im kj kk lo km kn ko lp kq kr ks lq ku kv kw hb bi translated">这是另一个产品，<a class="ae kx" href="https://databricks.com/product/unity-catalog" rel="noopener ugc nofollow" target="_blank"> <strong class="kd hj"> Unity目录</strong> </a>进入游戏的地方。它是缺失的一部分，让您可以审核、保护和管理所有工作区和跨云的数据访问。它使用标准SQL处理数据库、表、视图、行和列，而不是对文件使用低级、复杂和特定于云的IAM角色。</p><p id="65cf" class="pw-post-body-paragraph kb kc hi kd b ke lm ij kg kh ln im kj kk lo km kn ko lp kq kr ks lq ku kv kw hb bi translated">因此，您可以从Delta Sharing中轻松分享来自您的<a class="ae kx" href="https://databricks.com/glossary/data-lakehouse" rel="noopener ugc nofollow" target="_blank"> Lakehouse </a>的数据。还有<strong class="kd hj"> Delta Sharing </strong>和<strong class="kd hj"> Unity Catalog </strong>在一起玩的不错。很高兴在另一篇文章中更详细地介绍这一点，如果你感兴趣，请告诉我！</p><h1 id="73a3" class="jj jk hi bd jl jm jn jo jp jq jr js jt io ju ip jv ir jw is jx iu jy iv jz ka bi translated">更多？</h1><ul class=""><li id="5dbb" class="mo mp hi kd b ke kf kh ki kk mq ko mr ks ms kw mt mu mv mw bi translated"><a class="ae kx" href="https://www.youtube.com/watch?v=ViVcODZUXcA&amp;t=9s" rel="noopener ugc nofollow" target="_blank"> Delta Sharing OSDC网络研讨会Frank Munz </a></li><li id="899e" class="mo mp hi kd b ke mx kh my kk mz ko na ks nb kw mt mu mv mw bi translated"><a class="ae kx" href="https://databricks.com/product/delta-sharing" rel="noopener ugc nofollow" target="_blank">数据块增量共享</a></li><li id="0973" class="mo mp hi kd b ke mx kh my kk mz ko na ks nb kw mt mu mv mw bi translated"><a class="ae kx" href="https://github.com/delta-io/delta-sharing/" rel="noopener ugc nofollow" target="_blank">GitHub上的增量共享</a></li><li id="a170" class="mo mp hi kd b ke mx kh my kk mz ko na ks nb kw mt mu mv mw bi translated"><a class="ae kx" href="https://fmunz.medium.com/why-three-out-of-four-data-sharing-technologies-dont-cut-it-anymore-a9caea6fc06f" rel="noopener">为什么四分之三的数据共享选项都行不通</a></li><li id="e890" class="mo mp hi kd b ke mx kh my kk mz ko na ks nb kw mt mu mv mw bi translated"><a class="ae kx" href="https://hackernoon.com/share-large-amounts-of-live-data-with-delta-sharing-and-docker" rel="noopener ugc nofollow" target="_blank">与码头集装箱的增量共享</a></li></ul></div><div class="ab cl mb mc gp md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="hb hc hd he hf"><p id="7fd6" class="pw-post-body-paragraph kb kc hi kd b ke lm ij kg kh ln im kj kk lo km kn ko lp kq kr ks lq ku kv kw hb bi translated">如果你喜欢这篇文章，请为它鼓掌或在社交媒体上分享。更多数据科学，数据工程，或者AI/ML相关的消息可以关注我Twitter:<a class="ae kx" href="https://twitter.com/search?q=frankmunz" rel="noopener ugc nofollow" target="_blank"><strong class="kd hj">@ frankmunz</strong></a><strong class="kd hj">。</strong></p></div></div>    
</body>
</html>