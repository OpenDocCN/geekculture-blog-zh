<html>
<head>
<title>tmux, oh-my-zsh and aliases: 3 tips to suck less at Unix terminal</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">tmux、oh-my-zsh和别名:在Unix终端上少吸的3个技巧</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/3-tips-to-suck-less-at-unix-terminal-e6133fab2a4?source=collection_archive---------16-----------------------#2021-06-21">https://medium.com/geekculture/3-tips-to-suck-less-at-unix-terminal-e6133fab2a4?source=collection_archive---------16-----------------------#2021-06-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="dc68" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你有不到30秒的时间，这里是这篇文章的核心！</p><h1 id="1828" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">TL；速度三角形定位法(dead reckoning)</h1><ol class=""><li id="99a6" class="kb kc hi ih b ii kd im ke iq kf iu kg iy kh jc ki kj kk kl bi translated">看在上帝的份上，<strong class="ih hj">永远</strong>用<code class="du km kn ko kp b">tmux</code>(<a class="ae kq" href="https://github.com/tmux/tmux" rel="noopener ugc nofollow" target="_blank">https://github.com/tmux/tmux</a>)</li><li id="b5b1" class="kb kc hi ih b ii kr im ks iq kt iu ku iy kv jc ki kj kk kl bi translated"><code class="du km kn ko kp b">bash</code>是丑AF:用<code class="du km kn ko kp b">zsh</code>代替，尤其是<code class="du km kn ko kp b">oh-my-zsh</code>(及其主题)(<a class="ae kq" href="https://ohmyz.sh/" rel="noopener ugc nofollow" target="_blank">https://ohmyz.sh/</a>)</li><li id="57b8" class="kb kc hi ih b ii kr im ks iq kt iu ku iy kv jc ki kj kk kl bi translated">使用<code class="du km kn ko kp b">aliases</code>可以节省很多时间。</li></ol><h1 id="306b" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">语境</h1><p id="232f" class="pw-post-body-paragraph if ig hi ih b ii kd ik il im ke io ip iq kw is it iu kx iw ix iy ky ja jb jc hb bi translated">如果我不是在和别人通话，告诉他们在不说话的时候要么用耳机，要么把自己静音，我会花很多时间在工作中使用终端。无论我是在训练一个模型，写代码，还是做其他事情，我的屏幕通常都是一个黑色的矩形，上面有文字。</p><p id="ae47" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正因为如此，在我生命中的某个时刻，我决定花些时间尝试用颜色、插件和各种生活质量改进来创造一个美好的环境。</p><p id="5dca" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">天哪，变化真大。</p><p id="a41b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是那些直到你拥有了才注意到的事情之一，然后你会问自己，你到底是怎么熬过来的，直到现在还没有。</p><p id="5d06" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我想澄清一点:这些变化并不是让你的终端<em class="kz">看起来更漂亮</em>(尽管这绝对是一件好事)，而是<em class="kz">重大改进</em>，让你可以更快更好地做你正在做的事情。我们去看看。</p><figure class="lb lc ld le fd lf er es paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="er es la"><img src="../Images/b9b348296f921b064c8b42292771cfbd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*aZC4SFyZHtlnLhpG"/></div></div><figcaption class="lm ln et er es lo lp bd b be z dx">Photo by <a class="ae kq" href="https://unsplash.com/@martinkatler?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Martin Katler</a> on <a class="ae kq" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="f310" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">tmux</h1><p id="a969" class="pw-post-body-paragraph if ig hi ih b ii kd ik il im ke io ip iq kw is it iu kx iw ix iy ky ja jb jc hb bi translated">如果你的大部分工作需要使用终端，你可能需要不止一个可用的提示:你将有一个运行一些<strong class="ih hj">脚本</strong>，一个打开存储<strong class="ih hj">数据</strong>的目录，可能有两个<strong class="ih hj">监视</strong>机器的资源，可能还有更多。通常情况下，这需要您打开与当前正在执行的任务数量一样多的终端实例。这不太好，因为这将迫使您花费大量的时间按ALT-TAB在所有这些窗口之间移动，顺便说一下，这些窗口可能彼此无法区分，所以祝您好运。另外，它会让你的桌面变得杂乱，因为你可能不需要同时看一两个以上的内容。这就是<code class="du km kn ko kp b">tmux</code>派上用场的地方。</p><p id="82f2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du km kn ko kp b">tmux</code>是一个<strong class="ih hj"> t </strong>终端<strong class="ih hj">mu</strong>ple<strong class="ih hj">x</strong>er，它是一种运行在现有shell会话之上的<em class="kz">附加层</em>。一旦您在您的<strong class="ih hj">一个</strong>终端实例上运行<code class="du km kn ko kp b">tmux</code>，一个新的<strong class="ih hj"> tmux会话</strong>将被创建。</p><figure class="lb lc ld le fd lf er es paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="er es lq"><img src="../Images/0b8b1d0b3cd435926bef350954c4f4e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oMBgjUT_iu_piKM4Z5wBVA.png"/></div></div><figcaption class="lm ln et er es lo lp bd b be z dx">A new tmux session. Image by author.</figcaption></figure><p id="9473" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">与常规终端会话的唯一视觉差异是底部的绿色条，但是从这里您可以访问许多选项，这些选项允许您从单个终端实例完成所有工作。</p><p id="a097" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在一个单独的<code class="du km kn ko kp b">tmux</code>会话中，可以有多个<strong class="ih hj">窗口</strong>，如果你愿意，也可以是独立的屏幕，依次可以包含一个或多个<strong class="ih hj">窗格</strong>，它们是实际的交互外壳。这意味着不再需要为不同的任务打开多个终端，现在可以在同一个会话内将它们组织在不同的<code class="du km kn ko kp b">tmux</code>窗口中，<strong class="ih hj">命名</strong>它们，并从一个终端跳到下一个终端，而不必在所有终端之间来回切换，希望能碰巧找到正确的终端。</p><p id="1655" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此外，在同一个窗口中，可以将屏幕分成几个独立的窗格，如果需要的话，这允许你同时关注多个事物。</p><figure class="lb lc ld le fd lf er es paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="er es lr"><img src="../Images/58f4ac424ba597aac4f9959e88b2a3b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*V9OCzDNbd0u-VHLGMMiDRg.png"/></div></div><figcaption class="lm ln et er es lo lp bd b be z dx">The beauty of multiple panes. Image by author.</figcaption></figure><p id="cacc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是最好的还在后面:<code class="du km kn ko kp b">tmux</code>实际上使用了一个服务器/客户端范例，你实际上可以<em class="kz">从一个现有的会话中分离</em>而不用终止它，这样你就可以<em class="kz">在将来重新连接</em>到它。在实践中，这意味着一旦您的工作日结束，您只需离开您已经启动的会话，其所有窗口和窗格仍在运行，第二天您只需重新连接到它并从您停止的地方继续，而不必重新创建所有窗口。</p><p id="6d1f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您必须在一台远程机器上工作，并且需要同时打开几个shells，这一点特别有用:使用<code class="du km kn ko kp b">tmux</code>您可以<strong class="ih hj">首先</strong>通过ssh访问那台机器，一旦到达那里，就创建一个会话。这样做有几个很好的理由:</p><ul class=""><li id="0784" class="kb kc hi ih b ii ij im in iq ls iu lt iy lu jc lv kj kk kl bi translated">每个新的<em class="kz">会话</em>、<em class="kz">窗口、</em>和<em class="kz">窗格</em>都将在您正在访问的远程机器上创建<em class="kz">，这样您就不必每次创建它们时都重新执行ssh。</em></li><li id="e725" class="kb kc hi ih b ii kr im ks iq kt iu ku iy kv jc lv kj kk kl bi translated">如果您的连接断开，会话中的所有进程将继续运行，就像什么都没发生一样(在“常规”ssh会话中，这些进程会被中断)，一旦连接恢复，您可以简单地重新加入会话。如果您正在运行任何需要大量时间才能完成的任务，例如训练神经网络，这一点尤其重要。</li></ul><p id="d0eb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我希望我已经说服你试一试，它已经改变了我的游戏规则，现在我无法想象没有它的工作。</p><p id="5700" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">不管怎样，这只是主菜，让我们看看菜单上还有什么。</p><h1 id="5f48" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">[哦-我的-]zsh</h1><p id="8591" class="pw-post-body-paragraph if ig hi ih b ii kd ik il im ke io ip iq kw is it iu kx iw ix iy ky ja jb jc hb bi translated">在一个标准的Linux系统中(以Ubuntu为例)，默认的终端如下所示:</p><figure class="lb lc ld le fd lf er es paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="er es lq"><img src="../Images/a5023aab66169980d382f60da529ae69.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0rrWoKRlZf1Rd4ffKG01yg.png"/></div></div><figcaption class="lm ln et er es lo lp bd b be z dx">A very sad terminal. Image by Author.</figcaption></figure><p id="93af" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">默认的shell是<code class="du km kn ko kp b">bash</code>:简单，快速，完成工作，不特别花哨。</p><p id="619e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">好吧，这实际上是相当轻描淡写:这是相当丑陋的，并没有真正给你除了“你目前在哪个文件夹”的任何信息。不要误解我的意思，如果你不花太多时间在上面，并且基本上只有在被迫的情况下才打开终端，那没关系，但是如果你一直读到这里，你可能需要每周花相当多的时间来使用它。</p><p id="e234" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果是这样的话，你可能要考虑投资一点时间让它成为一个更舒适的环境，就像你在任何其他类型的工作中调整你的工作站或办公桌一样。</p><p id="46b1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我对此的建议很简单:抛弃<code class="du km kn ko kp b">bash</code>，切换到<code class="du km kn ko kp b">zsh</code>并安装<a class="ae kq" href="https://ohmyz.sh/" rel="noopener ugc nofollow" target="_blank"> oh-my-zsh </a>，这是一个带有大量插件的框架，会让你的shell体验好得多。下面是一个使用oh-my-zsh最流行的插件(<a class="ae kq" href="https://github.com/romkatv/powerlevel10k" rel="noopener ugc nofollow" target="_blank"> powerlevel10k </a>)的主题的示例:</p><figure class="lb lc ld le fd lf er es paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="er es lw"><img src="../Images/9f30d11b3b8af19f8a93f8279f47f535.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RDa59AqOVKg1_fQvRIqcjg.png"/></div></div><figcaption class="lm ln et er es lo lp bd b be z dx">This is how your terminal could look like. Image from <a class="ae kq" href="https://github.com/Powerlevel9k/powerlevel9k/wiki/Show-Off-Your-Config" rel="noopener ugc nofollow" target="_blank">https://github.com/Powerlevel9k/powerlevel9k/wiki/Show-Off-Your-Config</a></figcaption></figure><p id="3595" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">好多了，对吧？除了漂亮的小图标(你将需要安装一套特殊的字体来工作，但这很容易做到，说明在插件的页面上)和右边的日期和时间，你可以在几行(黄色的东西)上看到运行中的<strong class="ih hj"> git </strong>插件，显示你所在的库的状态。这可能看起来不多，但是能够一眼看到您在哪个分支，如果您的repo中有新的或修改的文件，或者如果您有未推送的提交仍然需要推送，这可能会使您在将来避免一些令人讨厌的麻烦。</p><p id="a331" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">而<strong class="ih hj"> git </strong>只是其中一个有专用插件的服务:一个用于显示当前活动的<strong class="ih hj"> conda </strong>环境，一个用于<strong class="ih hj"> kubernetes </strong>，一个用于<strong class="ih hj"> nodejs，</strong>等等！</p><p id="8298" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">无论你的工作是什么，oh-my-zsh都可以让你在候机楼的生活变得更好，并且一定会让你看起来不那么无聊。虽然这可能看起来是次要的方面，但想想看，如果你每天花几个小时看着终端，无论它是一个丑陋的黑匣子还是一个更有色彩、更令人愉快的黑匣子，都有所不同。我是说，看看这个房子图标有多可爱！！！</p><h1 id="ab00" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">别名</h1><figure class="lb lc ld le fd lf er es paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="er es lx"><img src="../Images/7223df20a091a86d680d5fad1c638fb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FDqCIYETb56vKEuh"/></div></div><figcaption class="lm ln et er es lo lp bd b be z dx">Photo by <a class="ae kq" href="https://unsplash.com/@vladhilitanu?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Vlad Hilitanu</a> on <a class="ae kq" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="4f61" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后，同样重要的是，我们来谈谈<strong class="ih hj">别名</strong>。</p><p id="c556" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du km kn ko kp b">alias</code>是任意长命令的自定义快捷方式。语法非常简单:<code class="du km kn ko kp b">alias la='ls -lah'</code>。现在每次你在终端中使用<code class="du km kn ko kp b">la</code>(在提示的开头)的时候，别名的内容都会被代替执行。您的默认shell可能已经设置了一些默认别名(<code class="du km kn ko kp b">la</code>可能是其中之一，尽管不一定是上面的确切形式)，但是您可以定义自己的别名。在实践中，最好的方法是把它们放在你的home文件夹中的一个文件<code class="du km kn ko kp b">.aliases</code>(每行一个别名)中，并确保每当你打开一个新的终端窗口时它都是源代码(我认为这是许多shells默认发生的，无论如何检查你的<code class="du km kn ko kp b">{bash,zsh}rc</code>)。</p><p id="1208" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然而，关于别名最好的事情是它们也可以(并且应该)用于<em class="kz">部分</em>命令，就像在<strong class="ih hj">更长的</strong>命令的开始，然后你将使用附加参数来完成。主要的例子是分别将<code class="du km kn ko kp b">conda activate</code>和<code class="du km kn ko kp b">conda deactivate</code>混叠到<code class="du km kn ko kp b">.a</code>和<code class="du km kn ko kp b">.d</code>。激活环境就变得像<code class="du km kn ko kp b">.a pytorch</code>一样简单。</p><p id="f774" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">巧妙使用别名的例子有:</p><ul class=""><li id="b89e" class="kb kc hi ih b ii ij im in iq ls iu lt iy lu jc lv kj kk kl bi translated">前述激活/停用<code class="du km kn ko kp b">conda</code>环境的快捷方式</li><li id="3cc8" class="kb kc hi ih b ii kr im ks iq kt iu ku iy kv jc lv kj kk kl bi translated">一个字母访问你经常使用的程序(我用<code class="du km kn ko kp b">v</code>代替<code class="du km kn ko kp b">vim</code></li><li id="b3d0" class="kb kc hi ih b ii kr im ks iq kt iu ku iy kv jc lv kj kk kl bi translated">添加或改进默认启用自定义选项的变体常用命令(由于时间原因，我将<code class="du km kn ko kp b">tmux</code>替换为<code class="du km kn ko kp b">tmux -2</code>)。不知道为什么)</li><li id="dc66" class="kb kc hi ih b ii kr im ks iq kt iu ku iy kv jc lv kj kk kl bi translated">对特定远程服务器的快速ssh访问(确保您已经设置了密钥认证以获得最大舒适度):<br/> <code class="du km kn ko kp b">alias s.gipsy-danger='ssh matteo@gipsy-danger'</code></li></ul><p id="d8fd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">虽然这看起来不多，但实际上会节省你很多时间。不仅仅是因为你要在键盘上键入更少的<em class="kz">字符，更主要的是因为更短的命令意味着更少的打字错误。</em></p><p id="0903" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">额外功能:人们会认为你是一个巫师！🧙🏼</p><p id="4b9c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然而，在某些情况下，别名并不是正确的解决方案:如果您需要编写多行代码。为此，您需要编写某种shell脚本。嘿，没有什么是免费的！</p></div><div class="ab cl ly lz gp ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="hb hc hd he hf"><p id="f2ce" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">目前就这些。如果你喜欢这些内容，请保持联系，我还有一些锦囊妙计，人类可能会从中受益。和皮条客您的终端，生命太短了单色屏幕！</p></div></div>    
</body>
</html>