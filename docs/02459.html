<html>
<head>
<title>SERIES: Preparing Your React Native App for Production(Android) — Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">系列:为生产准备React原生应用(Android)——第1部分</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/series-preparing-your-react-native-app-for-production-android-part-1-e7eae578235b?source=collection_archive---------2-----------------------#2021-05-16">https://medium.com/geekculture/series-preparing-your-react-native-app-for-production-android-part-1-e7eae578235b?source=collection_archive---------2-----------------------#2021-05-16</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/ca3787cc8fcbc37cea85a2218fe83e00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*WozTlZHHKf6Fx1hB"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Photo by <a class="ae iu" href="https://unsplash.com/@billjelen?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Bill Jelen</a> on <a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="490c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果您曾经想知道如何构建React原生应用的生产或发布版本，那么您来对地方了。在继续之前，本教程仅针对我们的React原生应用的<strong class="ix hj"> android版本</strong>。</p><h1 id="94c7" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">目录📖</h1><ol class=""><li id="2e51" class="kr ks hi ix b iy kt jc ku jg kv jk kw jo kx js ky kz la lb bi translated">从头开始创建React本机应用程序</li><li id="45cc" class="kr ks hi ix b iy lc jc ld jg le jk lf jo lg js ky kz la lb bi translated">开发我们的应用程序的0.0.1版本</li><li id="5695" class="kr ks hi ix b iy lc jc ld jg le jk lf jo lg js ky kz la lb bi translated">为android构建我们的应用程序的生产就绪版本</li></ol><h2 id="584b" class="lh ju hi bd jv li lj lk jz ll lm ln kd jg lo lp kh jk lq lr kl jo ls lt kp lu bi translated">TLDR；</h2><p id="7be6" class="pw-post-body-paragraph iv iw hi ix b iy kt ja jb jc ku je jf jg lv ji jj jk lw jm jn jo lx jq jr js hb bi translated">如果你没有一个应用程序，你就不会在这里。您可以随意跳到表格内容的第三(3)个主题。出于教育目的，我将从头开始。此外，这是一个很长的系列，因此我创造了细节。</p></div><div class="ab cl ly lz gp ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="hb hc hd he hf"><h1 id="39a4" class="jt ju hi bd jv jw mf jy jz ka mg kc kd ke mh kg kh ki mi kk kl km mj ko kp kq bi translated">步骤1:创建React本机应用程序</h1><p id="71c7" class="pw-post-body-paragraph iv iw hi ix b iy kt ja jb jc ku je jf jg lv ji jj jk lw jm jn jo lx jq jr js hb bi translated">在这一节中，我将跳过React本地环境的设置。查看关于如何为React Native设置开发环境的<a class="ae iu" href="https://reactnative.dev/docs/environment-setup" rel="noopener ugc nofollow" target="_blank">详细指南</a>。</p><p id="a65a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">先决条件:</strong></p><ul class=""><li id="34d3" class="kr ks hi ix b iy iz jc jd jg mk jk ml jo mm js mn kz la lb bi translated">节点、npm和npx</li><li id="3277" class="kr ks hi ix b iy lc jc ld jg le jk lf jo lg js mn kz la lb bi translated">Android Studio、Android模拟器或物理Android设备</li><li id="9a9d" class="kr ks hi ix b iy lc jc ld jg le jk lf jo lg js mn kz la lb bi translated">文本编辑器(推荐:vscode)</li></ul><p id="af06" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">步骤:</strong></p><ol class=""><li id="8797" class="kr ks hi ix b iy iz jc jd jg mk jk ml jo mm js ky kz la lb bi translated">在您的终端中，运行命令:</li></ol><figure class="mp mq mr ms fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mo"><img src="../Images/0cada5f2b3656a01b862be54270e313a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Bc4VXnX4O2tuwJAUc574bw.png"/></div></div></figure><p id="9580" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="mt">成功完成后，应该会看到类似下面的内容:</em></p><figure class="mp mq mr ms fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mu"><img src="../Images/539d6327ef687f60c1f3661e8373128f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EPvIdSpZBhF-VVDzgvFnSQ.png"/></div></div></figure><p id="53b4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">2.在您首选的文本编辑器或ide(集成开发环境)中打开项目</p><p id="adaa" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">3.通过运行以下命令启动开发环境:</p><figure class="mp mq mr ms fd ij er es paragraph-image"><div class="er es mv"><img src="../Images/6fea0cae71f197a12cf82a4f34424f17.png" data-original-src="https://miro.medium.com/v2/resize:fit:672/format:webp/1*wmapWotkIJLrf0UkzLHbwQ.png"/></div><figcaption class="iq ir et er es is it bd b be z dx">starting a local server</figcaption></figure><p id="7058" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">4.通过运行以下命令，在android模拟器或物理android设备上运行应用程序:</p><figure class="mp mq mr ms fd ij er es paragraph-image"><div class="er es mw"><img src="../Images/08007b7be52d101cf3ee1688e8682df9.png" data-original-src="https://miro.medium.com/v2/resize:fit:772/format:webp/1*2FS_lh2jjrV0bf_SAXmkcg.png"/></div><figcaption class="iq ir et er es is it bd b be z dx">run app on an emulator or physical device</figcaption></figure><p id="7415" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="mt">下面是第一次运行应用程序后的结果。</em></p><figure class="mp mq mr ms fd ij er es paragraph-image"><div class="er es mx"><img src="../Images/36c7fb6cfd5bf8d434819b2e083c32de.png" data-original-src="https://miro.medium.com/v2/resize:fit:626/format:webp/1*W9x0d6FfWRFjBGNTljyTJg.png"/></div><figcaption class="iq ir et er es is it bd b be z dx">Welcome screen on the first run</figcaption></figure><h2 id="f958" class="lh ju hi bd jv li lj lk jz ll lm ln kd jg lo lp kh jk lq lr kl jo ls lt kp lu bi translated">概述:</h2><p id="823a" class="pw-post-body-paragraph iv iw hi ix b iy kt ja jb jc ku je jf jg lv ji jj jk lw jm jn jo lx jq jr js hb bi translated">在第一步中，我们从头开始创建一个react-native应用程序，并在本地运行我们的应用程序。</p></div><div class="ab cl ly lz gp ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="hb hc hd he hf"><h1 id="d942" class="jt ju hi bd jv jw mf jy jz ka mg kc kd ke mh kg kh ki mi kk kl km mj ko kp kq bi translated">第二步:开发我们的应用程序🛠的0.0.1版本</h1><p id="bbb3" class="pw-post-body-paragraph iv iw hi ix b iy kt ja jb jc ku je jf jg lv ji jj jk lw jm jn jo lx jq jr js hb bi translated">在这一部分，我们将假装构建我们应用程序的第一个MVP(最小可行产品)版本。我将通过在<strong class="ix hj"> App.js </strong>文件中呈现应用程序的版本来实现这一点。</p><p id="2751" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">没有什么太多，只是一些简单的东西。😊</p><p id="aada" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">步骤:</strong></p><ol class=""><li id="7343" class="kr ks hi ix b iy iz jc jd jg mk jk ml jo mm js ky kz la lb bi translated">通过导入<code class="du my mz na nb b">package.json</code>文件来渲染app的版本号。</li></ol><figure class="mp mq mr ms fd ij er es paragraph-image"><div class="er es nc"><img src="../Images/8c59184a91218808a828b24040ecce0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:974/format:webp/1*gv8qMtPg8z6DJCY1Hymw1g.png"/></div><figcaption class="iq ir et er es is it bd b be z dx">import package.json file</figcaption></figure><p id="3f18" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">2.应用程序风格。</p><figure class="mp mq mr ms fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nd"><img src="../Images/21318f52155b2101020b06ebbe01353a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OA5mLD7q-pGDnTA6RyipSQ.png"/></div></div></figure><p id="833f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">3.完成了。</p><figure class="mp mq mr ms fd ij er es paragraph-image"><div class="er es mx"><img src="../Images/f5eebc5aea6ed45cc418e7d9c8b12f0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:626/format:webp/1*tlrfJ1fuSdc_CcmpOy1ckg.png"/></div><figcaption class="iq ir et er es is it bd b be z dx">Our MVP app</figcaption></figure></div><div class="ab cl ly lz gp ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="hb hc hd he hf"><h1 id="da4b" class="jt ju hi bd jv jw mf jy jz ka mg kc kd ke mh kg kh ki mi kk kl km mj ko kp kq bi translated"><strong class="ak">第三步:为android 🛠构建我们的应用程序的生产就绪版本🚀</strong></h1><p id="916a" class="pw-post-body-paragraph iv iw hi ix b iy kt ja jb jc ku je jf jg lv ji jj jk lw jm jn jo lx jq jr js hb bi translated">这是我们期待已久的关键一步，对吗？😊构建生产就绪版本需要一些步骤。在本节中，我们将了解:</p><ol class=""><li id="16bd" class="kr ks hi ix b iy iz jc jd jg mk jk ml jo mm js ky kz la lb bi translated">你会遇到的一些关键术语及其含义</li><li id="4294" class="kr ks hi ix b iy lc jc ld jg le jk lf jo lg js ky kz la lb bi translated">生成释放密钥</li><li id="c3d0" class="kr ks hi ix b iy lc jc ld jg le jk lf jo lg js ky kz la lb bi translated">设置梯度变量</li><li id="c111" class="kr ks hi ix b iy lc jc ld jg le jk lf jo lg js ky kz la lb bi translated">将签名配置添加到你的应用的Gradle配置</li><li id="63a6" class="kr ks hi ix b iy lc jc ld jg le jk lf jo lg js ky kz la lb bi translated">生成发布APK</li><li id="112f" class="kr ks hi ix b iy lc jc ld jg le jk lf jo lg js ky kz la lb bi translated">测试应用程序的发布版本</li></ol><h2 id="0ff7" class="lh ju hi bd jv li lj lk jz ll lm ln kd jg lo lp kh jk lq lr kl jo ls lt kp lu bi translated">1.您将遇到的一些关键术语及其含义:</h2><p id="decf" class="pw-post-body-paragraph iv iw hi ix b iy kt ja jb jc ku je jf jg lv ji jj jk lw jm jn jo lx jq jr js hb bi translated"><strong class="ix hj">安卓密钥库系统:</strong></p><p id="6552" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">Android密钥库系统允许你将密钥存储在一个名为<strong class="ix hj">密钥库</strong>的容器中，以使它们更难从设备中提取出来。</p><p id="d187" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">安卓密钥库:</strong></p><p id="a2fd" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">android <strong class="ix hj">密钥库</strong>是授权证书或公钥证书的容器，通常被基于Java的应用程序用于通过HTTPS提供的<strong class="ix hj">加密</strong>、<strong class="ix hj">认证</strong>和<strong class="ix hj">。</strong></p><p id="aac7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">调试密钥库:</strong></p><p id="5751" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">调试密钥库是一个随机生成的证书(密钥库),用于<strong class="ix hj">签署</strong>一个APK(Android包)。调试密钥库是由我们的构建工具<strong class="ix hj"> (Android SDK) </strong>在开发或调试模式下首次在仿真器或物理设备上运行我们的应用程序时生成的。</p><p id="d685" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">调试键可以用来做什么？ </p><ul class=""><li id="b7ba" class="kr ks hi ix b iy iz jc jd jg mk jk ml jo mm js mn kz la lb bi translated">调试密钥库用于签署APK，因此我们可以在通过USB连接到我们开发机器的仿真器或物理android设备上运行我们的应用程序。</li></ul><p id="4f62" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> <em class="mt">不能用调试键做什么？</em> </strong></p><ul class=""><li id="1897" class="kr ks hi ix b iy iz jc jd jg mk jk ml jo mm js mn kz la lb bi translated">您不能使用调试密钥将您的应用分发到play store或其他平台。</li></ul><blockquote class="ne nf ng"><p id="f2f0" class="iv iw mt ix b iy iz ja jb jc jd je jf nh jh ji jj ni jl jm jn nj jp jq jr js hb bi translated"><strong class="ix hj"> NB </strong>:默认情况下，调试配置使用密码已知的<strong class="ix hj">调试密钥库</strong>和密码已知的<strong class="ix hj">默认密钥</strong>。此外，调试密钥库可以位于$HOME/中。android/debug.keystore，如果不存在，则由<strong class="ix hj">创建</strong>。<br/> <code class="du my mz na nb b">$ keytool -genkey -v -keystore debug.keystore -storepass android -alias androiddebugkey -keypass android -keyalg RSA -keysize 2048 -validity 10000</code></p></blockquote><p id="4a47" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">发布密钥库:</strong></p><p id="14c0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">发布密钥库是一个定制生成的证书，当您想要在<strong class="ix hj">发布或生产模式下运行</strong>或<strong class="ix hj">构建应用程序的发布版本</strong>时使用，这样您就可以<strong class="ix hj">直接向用户发布</strong>或<strong class="ix hj">在应用程序市场(如Google Play、Firebase App Distribution等)上发布</strong>。</p><blockquote class="ne nf ng"><p id="1e4b" class="iv iw mt ix b iy iz ja jb jc jd je jf nh jh ji jj ni jl jm jn nj jp jq jr js hb bi translated"><strong class="ix hj">发布密钥库和调试密钥库的区别</strong></p><p id="61da" class="iv iw mt ix b iy iz ja jb jc jd je jf nh jh ji jj ni jl jm jn nj jp jq jr js hb bi translated">有两种模式，<strong class="ix hj">调试模式</strong>和<strong class="ix hj">释放模式</strong>。<strong class="ix hj">调试密钥库</strong>在我们<strong class="ix hj">开发和测试</strong>我们的应用程序时使用，而<strong class="ix hj">发布密钥库</strong>在我们想要<strong class="ix hj">将我们的应用程序发布或发布</strong>到像Google Play这样的应用程序市场时使用。</p></blockquote><p id="a668" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> APK(安卓包):</strong></p><p id="b2be" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">Android包是Android操作系统和其他几个基于Android的操作系统使用的包文件格式，用于分发和安装移动应用程序、移动游戏和中间件。<strong class="ix hj"> <em class="mt">(维基百科)</em> </strong></p><p id="691b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">已签名的Apk: </strong></p><p id="5442" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">一个<strong class="ix hj">签名的apk </strong>是一个<strong class="ix hj"> android </strong>包文件，它已经用一个证书进行了数字签名，开发者持有该证书的私钥。您可以使用<strong class="ix hj">调试键</strong>或<strong class="ix hj">释放键</strong>对应用程序进行签名。设备不会安装未签名的APK或捆绑文件。</p><p id="ff1f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">格雷尔:</strong></p><p id="6594" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">Gradle是一个build系统，负责代码编译、测试、部署等。</p></div><div class="ab cl ly lz gp ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="hb hc hd he hf"><h2 id="fc52" class="lh ju hi bd jv li lj lk jz ll lm ln kd jg lo lp kh jk lq lr kl jo ls lt kp lu bi translated">2.生成释放密钥</h2><p id="3c73" class="pw-post-body-paragraph iv iw hi ix b iy kt ja jb jc ku je jf jg lv ji jj jk lw jm jn jo lx jq jr js hb bi translated">我们将使用一个称为密钥工具的工具来生成我们的release-key.keystore文件。请注意，如果您的系统上没有关键工具，请在继续操作之前让它工作。</p><p id="ff18" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在生成release Keystore之前，让我们看看项目中的android文件夹是什么样子的:</p><figure class="mp mq mr ms fd ij er es paragraph-image"><div class="er es nk"><img src="../Images/a1ed1f7285d22e4415004d618f897c10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1184/format:webp/1*0sZzGBgT7Cb43Xo_06Xvyw.png"/></div><figcaption class="iq ir et er es is it bd b be z dx">Before the release-key.keystore file is generated</figcaption></figure><p id="3adf" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您可以看到我们只有debug.keystore文件。正如我前面所说，这有助于我们签署我们的apk，以便我们可以在调试模式下开发和测试我们的应用程序。</p><p id="dac1" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">a) <strong class="ix hj">运行命令:</strong></p><blockquote class="ne nf ng"><p id="7f73" class="iv iw mt ix b iy iz ja jb jc jd je jf nh jh ji jj ni jl jm jn nj jp jq jr js hb bi translated">keytool-genkey pair-v-storetype PKCS12-keystore release-key . keystore-alias rn production-key-key LG RSA-keysize 2048-validity 10000</p></blockquote><figure class="mp mq mr ms fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nl"><img src="../Images/c9b149b736a665b242306631eb21ac55.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GigYk-CMYtQ7fqkvCebSUA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">generate release key</figcaption></figure><blockquote class="ne nf ng"><p id="1008" class="iv iw mt ix b iy iz ja jb jc jd je jf nh jh ji jj ni jl jm jn nj jp jq jr js hb bi translated"><strong class="ix hj">分解命令:<br/> - </strong>密钥库名称:“<strong class="ix hj">release-Key . Keystore</strong>”<br/>-密钥别名:“<strong class="ix hj"> rnProduction-key </strong>”</p></blockquote><p id="a900" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">b) <strong class="ix hj">出现提示时，输入密钥和密钥库密码:</strong></p><figure class="mp mq mr ms fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nm"><img src="../Images/fab67b328d2a120c09a141b6f6b0a2cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HzKVVvrGS8lYa6IBanbx6Q.png"/></div></div></figure><p id="92f5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">💡<em class="mt">专业提示:</em> </strong> <em class="mt">永远不要忘记您的</em> <strong class="ix hj"> <em class="mt">密钥库文件</em> </strong> <em class="mt"> </em> <strong class="ix hj"> <em class="mt">名称、密钥别名、密钥库和密钥密码</em> </strong> <em class="mt">，因为设置您的Gradle变量将需要它们。</em></p><p id="67cd" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">c) <strong class="ix hj">出现提示时，填写其余的详细信息，如名字、姓氏等</strong></p><figure class="mp mq mr ms fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nn"><img src="../Images/df71d29dcd38783806dedd2a79ea3431.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LbwWDkcgOjHIesAY-AhTNA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Fill in the details when prompted</figcaption></figure><p id="f95e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">生成后，release-key.keystore文件将放在项目文件夹的根目录下。将文件拖放到<code class="du my mz na nb b"><strong class="ix hj">android/app</strong></code>文件夹中。下面是生成release-key.keystore文件后android文件夹的外观结果:</p><figure class="mp mq mr ms fd ij er es paragraph-image"><div class="er es no"><img src="../Images/06e1816e40245fe4a7fcc774e45d4011.png" data-original-src="https://miro.medium.com/v2/resize:fit:1144/format:webp/1*A1y6mgLXy8370hb0mhr5-g.png"/></div><figcaption class="iq ir et er es is it bd b be z dx">Here, you can see the release-key.keystore file inside the android/app folder.</figcaption></figure><h2 id="a227" class="lh ju hi bd jv li lj lk jz ll lm ln kd jg lo lp kh jk lq lr kl jo ls lt kp lu bi translated">3.设置梯度变量:</h2><p id="952a" class="pw-post-body-paragraph iv iw hi ix b iy kt ja jb jc ku je jf jg lv ji jj jk lw jm jn jo lx jq jr js hb bi translated">如前所述，Gradle是一个<strong class="ix hj">构建系统</strong>，负责代码编译、测试、部署等。在构建生产应用程序的过程中，Gradle需要一些信息来完成构建。这些是<em class="mt">任务</em>、<em class="mt">类型</em>、<em class="mt">属性</em>等。</p><p id="b2ba" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">对于<strong class="ix hj">属性密钥</strong>，我们必须向Gradle提供以下密钥对值:</p><figure class="mp mq mr ms fd ij er es paragraph-image"><div class="er es np"><img src="../Images/0a29d2aa7ca139b24983350db852c913.png" data-original-src="https://miro.medium.com/v2/resize:fit:1042/format:webp/1*YFTrdQtbIGZRynKEOluDIA.png"/></div><figcaption class="iq ir et er es is it bd b be z dx">Gradle properties</figcaption></figure><p id="ba94" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">a) ✏️编辑文件<code class="du my mz na nb b">~/.gradle/gradle.properties</code>或<code class="du my mz na nb b">android/gradle.properties</code>，并添加上图中的值。</p><p id="733e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在我们的例子中，我将打开<code class="du my mz na nb b">~/.gradle/gradle.properties</code>文件并在那里传递值。这种方法更安全，因为当您将项目提交到版本控制站点(如Github)时，您的密钥和密钥库密码不会暴露。</p><p id="d0dd" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">❗️ <strong class="ix hj">注意:</strong>如果没有看到<strong class="ix hj">里面的<code class="du my mz na nb b">gradle.properties</code>文件的话~/。gradle文件夹</strong>，创建一个即可。</p><figure class="mp mq mr ms fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nq"><img src="../Images/dc89dd508015764bc11188b0359bd2f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ifEPnGUBedFyVZYFj9gwjg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">~/.gradle/Gradle.properties file</figcaption></figure><h2 id="7281" class="lh ju hi bd jv li lj lk jz ll lm ln kd jg lo lp kh jk lq lr kl jo ls lt kp lu bi translated">4.将签名配置添加到你的应用的Gradle配置</h2><p id="c431" class="pw-post-body-paragraph iv iw hi ix b iy kt ja jb jc ku je jf jg lv ji jj jk lw jm jn jo lx jq jr js hb bi translated">到目前为止，我们仅有的<strong class="ix hj">签名配置</strong>是在调试模式下由我们的构建工具自动生成的<strong class="ix hj">调试</strong>。下面是我们的<strong class="ix hj">Android/app/build . gradle</strong>的样子:</p><figure class="mp mq mr ms fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nr"><img src="../Images/c227d78a677622f825f39f34574f8bad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hOlf3_qyr3dG6rUeYwLdaw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">android/app/build.gradle file</figcaption></figure><p id="ea41" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，我们将对<strong class="ix hj">签名配置</strong>和<strong class="ix hj">构建类型</strong>进行更改，添加一个发布构建，并将我们的构建类型指向发布构建。</p><figure class="mp mq mr ms fd ij er es paragraph-image"><div class="er es ns"><img src="../Images/b0b3dc82f222e3be45d24ac3dd7ba5f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1396/format:webp/1*xeeyia1qeRDCqj3hlX7jlg.png"/></div><figcaption class="iq ir et er es is it bd b be z dx">add the release build to signingConfigs</figcaption></figure><figure class="mp mq mr ms fd ij er es paragraph-image"><div class="er es nt"><img src="../Images/af4c0d5ea4431f33968e05b3cdbf864c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1110/format:webp/1*JzdV6MqZ6TSRcy7aNKOVAg.png"/></div><figcaption class="iq ir et er es is it bd b be z dx">Point the buildTypes to sginingConfgis.release</figcaption></figure><p id="97d8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">👇下面是上述步骤的最终结果:</p><figure class="mp mq mr ms fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nu"><img src="../Images/7c3bbac4c83198a83a1088971e8e957a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-Dt47tpPQOZfLAnAd8HxCQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">After adding a signingConfig to build.gradle</figcaption></figure><h2 id="1905" class="lh ju hi bd jv li lj lk jz ll lm ln kd jg lo lp kh jk lq lr kl jo ls lt kp lu bi translated">5.生成发布APK</h2><p id="b9f5" class="pw-post-body-paragraph iv iw hi ix b iy kt ja jb jc ku je jf jg lv ji jj jk lw jm jn jo lx jq jr js hb bi translated">a)将目录切换到android文件夹:<code class="du my mz na nb b"><strong class="ix hj">cd android</strong></code></p><p id="2b6b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">b)运行命令<code class="du my mz na nb b">./gradlew assembleRelease</code>将您的应用程序捆绑到一个apk文件中</p><h2 id="72ad" class="lh ju hi bd jv li lj lk jz ll lm ln kd jg lo lp kh jk lq lr kl jo ls lt kp lu bi translated">6.测试应用程序的发布版本</h2><p id="7a90" class="pw-post-body-paragraph iv iw hi ix b iy kt ja jb jc ku je jf jg lv ji jj jk lw jm jn jo lx jq jr js hb bi translated">您可以通过运行命令<code class="du my mz na nb b">npx react-native run-android --variant=release</code>来彻底测试您的应用程序的生产版本。但在此之前，你必须从你运行的模拟器或物理设备上卸载应用程序的调试版本。</p><p id="f7b8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">❗️ <strong class="ix hj">注意</strong>:只有当你已经如上所述设置了签名时<code class="du my mz na nb b">--variant=release</code>才可用。</p><h1 id="4837" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">概述:</h1><p id="e259" class="pw-post-body-paragraph iv iw hi ix b iy kt ja jb jc ku je jf jg lv ji jj jk lw jm jn jo lx jq jr js hb bi translated">在这篇博客教程中，我们看了如何:</p><p id="8c96" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">👉从头开始创建react-native应用程序</p><p id="4ba5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">👉构建了一个“假”MVP版本的应用程序</p><p id="058d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">👉通过生成发布密钥并签署我们的应用程序，为应用程序的生产做准备</p><p id="e4fb" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在下一篇文章中，我们将看到如何将生产就绪型应用程序发布到Firebase应用程序发行版，以便用户测试我们的应用程序。</p><p id="1811" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">谢谢大家！🙏</p><p id="4bf0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">第二部分</strong>:<a class="ae iu" href="https://victorbruce82.medium.com/series-publish-your-production-ready-react-native-application-to-firebase-app-14651017d443" rel="noopener">https://victor Bruce 82 . medium . com/series-publish-your-production-ready-react-native-application-to-firebase-app-14651017 d443</a></p><p id="ee1c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">参考文献:</strong></p><p id="d917" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae iu" href="https://www.geeksforgeeks.org/android-build-gradle/#:~:text=Gradle%20is%20a%20build%20system,the%20actual%20build%20process%20happens" rel="noopener ugc nofollow" target="_blank">https://www . geeks forgeeks . org/Android-build-Gradle/#:~:text = Gradle % 20 is % 20a % 20 build % 20 system，the % 20 actual % 20 build % 20 process % 20 occurs</a>。</p><div class="nv nw ez fb nx ny"><a href="https://reactnative.dev/docs/signed-apk-android" rel="noopener  ugc nofollow" target="_blank"><div class="nz ab dw"><div class="oa ab ob cl cj oc"><h2 class="bd hj fi z dy od ea eb oe ed ef hh bi translated">出版到谷歌Play商店反应本土</h2><div class="of l"><h3 class="bd b fi z dy od ea eb oe ed ef dx translated">Android要求所有应用程序在安装前都要用证书进行数字签名。为了…</h3></div><div class="og l"><p class="bd b fp z dy od ea eb oe ed ef dx translated">反应性发展</p></div></div><div class="oh l"><div class="oi l oj ok ol oh om io ny"/></div></div></a></div><p id="fcec" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">https://developer.android.com/studio/publish/app-signing<a class="ae iu" href="https://developer.android.com/studio/publish/app-signing" rel="noopener ugc nofollow" target="_blank"/></p><div class="nv nw ez fb nx ny"><a href="https://stackoverflow.com/questions/27838636/what-is-the-use-of-debug-keystore-in-android" rel="noopener  ugc nofollow" target="_blank"><div class="nz ab dw"><div class="oa ab ob cl cj oc"><h2 class="bd hj fi z dy od ea eb oe ed ef hh bi translated">android中debug.keystore有什么用？</h2><div class="of l"><h3 class="bd b fi z dy od ea eb oe ed ef dx translated">感谢贡献一个堆栈溢出的答案！请务必回答问题。提供详细信息并分享…</h3></div><div class="og l"><p class="bd b fp z dy od ea eb oe ed ef dx translated">stackoverflow.com</p></div></div><div class="oh l"><div class="on l oj ok ol oh om io ny"/></div></div></a></div><div class="nv nw ez fb nx ny"><a href="https://coderwall.com/p/r09hoq/android-generate-release-debug-keystores" rel="noopener  ugc nofollow" target="_blank"><div class="nz ab dw"><div class="oa ab ob cl cj oc"><h2 class="bd hj fi z dy od ea eb oe ed ef hh bi translated">Android:生成发布/调试密钥库(示例)</h2><div class="of l"><h3 class="bd b fi z dy od ea eb oe ed ef dx translated">要在命令行生成用于签署Android应用程序的密钥库，请使用:$ keytool-genkey-v-keystore my-key . keystore…</h3></div><div class="og l"><p class="bd b fp z dy od ea eb oe ed ef dx translated">coderwall.com</p></div></div><div class="oh l"><div class="oo l oj ok ol oh om io ny"/></div></div></a></div></div></div>    
</body>
</html>