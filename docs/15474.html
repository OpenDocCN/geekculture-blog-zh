<html>
<head>
<title>How to Upgrade Jenkins on Windows/Linux Server</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Windows/Linux服务器上升级Jenkins</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/how-to-upgrade-jenkins-on-windows-linux-server-b7d4526abc31?source=collection_archive---------0-----------------------#2022-11-03">https://medium.com/geekculture/how-to-upgrade-jenkins-on-windows-linux-server-b7d4526abc31?source=collection_archive---------0-----------------------#2022-11-03</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="66e1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Jenkins CI工具简介</p><blockquote class="jd je jf"><p id="53ad" class="if ig jg ih b ii ij ik il im in io ip jh ir is it ji iv iw ix jj iz ja jb jc hb bi translated">快速介绍</p></blockquote><p id="c7e9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Jenkins是一个开源自动化服务器，也称为持续集成工具。它有助于自动化与构建、测试和部署相关的软件开发部分，促进持续集成和持续交付。</p><p id="6eca" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您不熟悉持续集成、交付或部署背后的概念；我推荐你阅读我写的关于如何建立持续集成交付(CI/CD)的文章。</p><h2 id="e51c" class="jl jm hi bd jn jo jp jq jr js jt ju jv iq jw jx jy iu jz ka kb iy kc kd ke kf bi translated">提示和建议</h2><blockquote class="jd je jf"><p id="2065" class="if ig jg ih b ii ij ik il im in io ip jh ir is it ji iv iw ix jj iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="hi"> *为了生命周期管理的最佳实践，我建议每年或每季度将您的Jenkins实例升级到最新的LTS版本4次。</em> </strong>长期支持(LTS)发布基线每12周从定期发布流中选择一次。每隔4周，我们发布稳定的版本，其中包括错误和安全修复。</p><p id="158d" class="if ig jg ih b ii ij ik il im in io ip jh ir is it ji iv iw ix jj iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="hi"> *从Jenkins 2.357(2022年6月28日发布)和即将到来的9月LTS发布开始，Jenkins需要Java 11。</em>T9】</strong></p><p id="af1b" class="if ig jg ih b ii ij ik il im in io ip jh ir is it ji iv iw ix jj iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="hi"> *此外，从詹金斯2.355(2022年6月14日发布)和詹金斯2 . 346 . 1 LTS(2022年6月22日发布)开始，詹金斯支持Java 17。</em>T13】</strong></p><p id="6dd3" class="if ig jg ih b ii ij ik il im in io ip jh ir is it ji iv iw ix jj iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="hi"> *插件已经在JENKINS-68446中准备好了。使用插件管理器升级到Jenkins 2.357前后的所有插件。</em> </strong></p></blockquote></div><div class="ab cl kg kh gp ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="hb hc hd he hf"><h1 id="0b85" class="kn jm hi bd jn ko kp kq jr kr ks kt jv ku kv kw jy kx ky kz kb la lb lc ke ld bi translated">下载詹金斯</h1><p id="dc80" class="pw-post-body-paragraph if ig hi ih b ii le ik il im lf io ip iq lg is it iu lh iw ix iy li ja jb jc hb bi translated">Jenkins作为WAR文件、本地包、安装程序和Docker映像分发。在本文中，我将分享我关于如何使用WAR文件升级Jenkins实例的意见。这个<a class="ae jk" href="https://www.jenkins.io/download/" rel="noopener ugc nofollow" target="_blank">詹金斯战争档案可以在这里找到</a>。</p><ol class=""><li id="4dd6" class="lj lk hi ih b ii ij im in iq ll iu lm iy ln jc lo lp lq lr bi translated">下载前，请花点时间回顾一下<a class="ae jk" href="https://www.jenkins.io/doc/book/installing/#prerequisites" rel="noopener ugc nofollow" target="_blank">硬件和软件要求</a>。</li><li id="409d" class="lj lk hi ih b ii ls im lt iq lu iu lv iy lw jc lo lp lq lr bi translated">选择一个最新的LTS版本的WAR包，并按照下载说明进行操作。</li><li id="14f8" class="lj lk hi ih b ii ls im lt iq lu iu lv iy lw jc lo lp lq lr bi translated">下载完Jenkins包后，继续安装Jenkins</li></ol><h1 id="ebd6" class="kn jm hi bd jn ko lx kq jr kr ly kt jv ku lz kw jy kx ma kz kb la mb lc ke ld bi translated">升级Jenkins</h1><p id="b014" class="pw-post-body-paragraph if ig hi ih b ii le ik il im lf io ip iq lg is it iu lh iw ix iy li ja jb jc hb bi translated">本文中的过程用于使用WAR包升级现有的Jenkins实例。</p><figure class="md me mf mg fd mh er es paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="er es mc"><img src="../Images/ea681abe3dfda42fab66c7faede9ab04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uunLxshR4zBokTL-iNUGJQ.png"/></div></div><figcaption class="mo mp et er es mq mr bd b be z dx"><strong class="bd jn">image source: </strong><a class="ae jk" href="https://digitalvarys.com/upgrading-jenkins-post-upgrade-activities/" rel="noopener ugc nofollow" target="_blank"><strong class="bd jn">digitalvarys.com</strong></a></figcaption></figure><ul class=""><li id="a9ce" class="lj lk hi ih b ii ij im in iq ll iu lm iy ln jc ms lp lq lr bi translated">Jenkins通常作为一个独立的应用程序在它自己的进程中运行，带有内置的<a class="ae jk" href="https://stackoverflow.com/questions/7213541/what-is-java-servlet" rel="noopener ugc nofollow" target="_blank"> Java servlet </a>容器/应用服务器(<a class="ae jk" href="https://www.eclipse.org/jetty/" rel="noopener ugc nofollow" target="_blank"> Jetty </a>)。</li><li id="dde9" class="lj lk hi ih b ii ls im lt iq lu iu lv iy lw jc ms lp lq lr bi translated">Jenkins也可以在不同的Java servlet容器中作为servlet运行，如<a class="ae jk" href="https://tomcat.apache.org/" rel="noopener ugc nofollow" target="_blank"> Apache Tomcat </a>或<a class="ae jk" href="https://javaee.github.io/glassfish/" rel="noopener ugc nofollow" target="_blank"> GlassFish </a>。</li></ul><p id="80d1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是，本文不包含设置这些类型的安装的说明。</p><h1 id="cf29" class="kn jm hi bd jn ko lx kq jr kr ly kt jv ku lz kw jy kx ma kz kb la mb lc ke ld bi translated">Windows上的升级实施步骤</h1><p id="25b4" class="pw-post-body-paragraph if ig hi ih b ii le ik il im lf io ip iq lg is it iu lh iw ix iy li ja jb jc hb bi translated">升级运行在Windows服务器上的Jenkins实例的过程非常简单:</p><ol class=""><li id="6a20" class="lj lk hi ih b ii ij im in iq ll iu lm iy ln jc lo lp lq lr bi translated">转到服务并停止Jenkins服务</li><li id="5cdf" class="lj lk hi ih b ii ls im lt iq lu iu lv iy lw jc lo lp lq lr bi translated">转到安装Jenkins实例的位置</li><li id="9cbe" class="lj lk hi ih b ii ls im lt iq lu iu lv iy lw jc lo lp lq lr bi translated">→将<strong class="ih hj"> <em class="jg"> war </em> </strong>文件夹重命名为<strong class="ih hj"> <em class="jg"> war.old </em> </strong></li><li id="022b" class="lj lk hi ih b ii ls im lt iq lu iu lv iy lw jc lo lp lq lr bi translated">→将<strong class="ih hj"> <em class="jg"> jenkins.war </em> </strong>文件重命名为<strong class="ih hj"><em class="jg">Jenkins . war . old</em></strong></li><li id="7ceb" class="lj lk hi ih b ii ls im lt iq lu iu lv iy lw jc lo lp lq lr bi translated">将你下载的<strong class="ih hj"><em class="jg">new jenkins . war</em></strong>复制到你的Jenkins安装目录下</li><li id="0327" class="lj lk hi ih b ii ls im lt iq lu iu lv iy lw jc lo lp lq lr bi translated">启动Jenkins服务</li><li id="0dab" class="lj lk hi ih b ii ls im lt iq lu iu lv iy lw jc lo lp lq lr bi translated">→观察新的war目录的创建，该目录现在将包含新的jenkins.war档案的内容</li></ol><p id="d7d1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">导航到Jenkins的主页，此时您将被告知Jenkins正在准备您的安装。完成后，测试现有作业以验证兼容性</p><h1 id="ad38" class="kn jm hi bd jn ko lx kq jr kr ly kt jv ku lz kw jy kx ma kz kb la mb lc ke ld bi translated">Linux上的升级实施步骤</h1><p id="cb9d" class="pw-post-body-paragraph if ig hi ih b ii le ik il im lf io ip iq lg is it iu lh iw ix iy li ja jb jc hb bi translated"><strong class="ih hj"> 1。停止詹金斯服务</strong></p><pre class="md me mf mg fd mt mu mv mw aw mx bi"><span id="fb5b" class="jl jm hi mu b fi my mz l na nb">#Stop running Jenkins service using the following command:</span><span id="c737" class="jl jm hi mu b fi nc mz l na nb">sudo<!-- --> su -<br/>service jenkins stop</span></pre><p id="bbc6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 2。将Jenkins实例备份作为恢复选项</strong></p><pre class="md me mf mg fd mt mu mv mw aw mx bi"><span id="044a" class="jl jm hi mu b fi my mz l na nb">#Take backup of Jenkins home directory. In my case my Jenkins home directory is /var/lib/jenkins.</span><span id="47b5" class="jl jm hi mu b fi nc mz l na nb">cd<!-- --> <!-- -->/var/lib<br/>tar<!-- --> <!-- -->-cvzf jenkins_date.tar.gz jenkins/<br/>mv<!-- --> <!-- -->jenkins_date.tar.gz $HOME</span></pre><p id="d871" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 3。备份当前Jenkins版本的二进制文件</strong></p><pre class="md me mf mg fd mt mu mv mw aw mx bi"><span id="ca80" class="jl jm hi mu b fi my mz l na nb">#Take the backup of Jenkins current version binary using following commands:</span><span id="1fcf" class="jl jm hi mu b fi nc mz l na nb">cd<!-- --> <!-- -->/usr/share/jenkins<br/>mv<!-- --> <!-- -->jenkins.war jenkins.war.old</span></pre><p id="c93f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 4。下载新的LTS詹金斯版本</strong></p><pre class="md me mf mg fd mt mu mv mw aw mx bi"><span id="5d52" class="jl jm hi mu b fi my mz l na nb">#Download the new version of Jenkins WAR file using the following commands:</span><span id="97a3" class="jl jm hi mu b fi nc mz l na nb">wget <a class="ae jk" href="https://updates.jenkins-ci.org/latest/jenkins.war" rel="noopener ugc nofollow" target="_blank">https://updates.jenkins-ci.org/latest/jenkins.war</a></span></pre><p id="64b7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 5。启动詹金斯服务</strong></p><pre class="md me mf mg fd mt mu mv mw aw mx bi"><span id="c7ff" class="jl jm hi mu b fi my mz l na nb">#Start the Jenkins service using the following command:<br/> <br/>service jenkins start</span></pre><h1 id="2599" class="kn jm hi bd jn ko lx kq jr kr ly kt jv ku lz kw jy kx ma kz kb la mb lc ke ld bi translated">插件问题疑难解答</h1><p id="22cd" class="pw-post-body-paragraph if ig hi ih b ii le ik il im lf io ip iq lg is it iu lh iw ix iy li ja jb jc hb bi translated">Jenkins可能会启动，但在Jenkins网页上出现多个异常错误。</p><ul class=""><li id="cefd" class="lj lk hi ih b ii ij im in iq ll iu lm iy ln jc ms lp lq lr bi translated">从查看<strong class="ih hj">詹金斯日志文件</strong>开始</li></ul><p id="1af0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在大多数情况下，要解决这个问题:</p><ol class=""><li id="7b86" class="lj lk hi ih b ii ij im in iq ll iu lm iy ln jc lo lp lq lr bi translated">停止詹金斯服务</li><li id="caa8" class="lj lk hi ih b ii ls im lt iq lu iu lv iy lw jc lo lp lq lr bi translated">→将<strong class="ih hj"> <em class="jg"> config.xml </em> </strong>文件重命名为<strong class="ih hj"><em class="jg">config . XML . old</em></strong>——这将禁用认证和其他配置。</li><li id="dea5" class="lj lk hi ih b ii ls im lt iq lu iu lv iy lw jc lo lp lq lr bi translated">启动Jenkins服务→将创建一个新的配置文件</li><li id="7938" class="lj lk hi ih b ii ls im lt iq lu iu lv iy lw jc lo lp lq lr bi translated">Jenkins将在没有登录页面的情况下启动→转到管理插件并更新所有插件</li><li id="696b" class="lj lk hi ih b ii ls im lt iq lu iu lv iy lw jc lo lp lq lr bi translated">回到服务器→停止Jenkins服务</li><li id="e40d" class="lj lk hi ih b ii ls im lt iq lu iu lv iy lw jc lo lp lq lr bi translated">→将当前创建的<strong class="ih hj"> <em class="jg"> config.xml </em> </strong>文件重命名为<strong class="ih hj"><em class="jg">config . XML . new</em></strong></li><li id="0829" class="lj lk hi ih b ii ls im lt iq lu iu lv iy lw jc lo lp lq lr bi translated">→将您最初定制的<strong class="ih hj"><em class="jg">config . XML . old</em></strong>文件重命名为<strong class="ih hj"> <em class="jg"> config.xml </em> </strong></li><li id="3d55" class="lj lk hi ih b ii ls im lt iq lu iu lv iy lw jc lo lp lq lr bi translated">启动Jenkins服务——这应该会打开Jenkins页面，一切都按预期运行</li></ol><h1 id="944a" class="kn jm hi bd jn ko lx kq jr kr ly kt jv ku lz kw jy kx ma kz kb la mb lc ke ld bi translated">升级后任务</h1><ul class=""><li id="fecf" class="lj lk hi ih b ii le im lf iq nd iu ne iy nf jc ms lp lq lr bi translated">升级后，登录到Jenkins UI，确认在右下角看到新的版本号。</li><li id="5c45" class="lj lk hi ih b ii ls im lt iq lu iu lv iy lw jc ms lp lq lr bi translated">通过菜单导航至“管理Jenkins ”,并对显示的任何通知采取行动——插件、数据格式转换等。</li><li id="934c" class="lj lk hi ih b ii ls im lt iq lu iu lv iy lw jc ms lp lq lr bi translated">几天后一切都按预期运行→删除<strong class="ih hj"> <em class="jg"> jenkins.war.bak </em> </strong>文件和<strong class="ih hj"> <em class="jg"> war.bak </em> </strong>文件夹</li></ul><blockquote class="jd je jf"><p id="d453" class="if ig jg ih b ii ij ik il im in io ip jh ir is it ji iv iw ix jj iz ja jb jc hb bi translated"><em class="hi">如果您喜欢这篇文章，您可能也会喜欢；</em>T10】如何在Jenkins上安装/更新open JDK</p></blockquote><blockquote class="ng"><p id="6830" class="nh ni hi bd nj nk nl nm nn no np jc dx translated">干杯！！</p></blockquote></div></div>    
</body>
</html>