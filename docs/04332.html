<html>
<head>
<title>JavaScript: Differences Between Using var, let, and const Keywords for Variable Declaration</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript:变量声明中使用var、let和const关键字的区别</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/javascript-differences-between-using-var-let-and-const-keywords-for-variable-declaration-878649adb392?source=collection_archive---------36-----------------------#2021-06-24">https://medium.com/geekculture/javascript-differences-between-using-var-let-and-const-keywords-for-variable-declaration-878649adb392?source=collection_archive---------36-----------------------#2021-06-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="2b27" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du jd je jf jg b">var</code>关键字是JavaScript中用于声明变量的原始关键字。</p><p id="1135" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在ES2016中引入，<code class="du jd je jf jg b">let</code>和<code class="du jd je jf jg b">const</code>是用于声明变量的两个新关键字。本文将解释<code class="du jd je jf jg b">var</code>、<code class="du jd je jf jg b">let</code>和<code class="du jd je jf jg b">const</code>关键字工作方式的不同。</p><p id="e139" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我们进入<code class="du jd je jf jg b">let</code>、<code class="du jd je jf jg b">var</code>和<code class="du jd je jf jg b">const</code>之间的区别之前，理解范围和提升是如何工作的很重要。</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="ab fe cl jm"><img src="../Images/ea5691c3f7c41ce817075111d78065a0.png" data-original-src="https://miro.medium.com/v2/0*6g07UTLUY21UIe5L"/></div><figcaption class="jp jq et er es jr js bd b be z dx">Photo by <a class="ae jt" href="https://unsplash.com/@gamell?utm_source=ghost&amp;utm_medium=referral&amp;utm_campaign=api-credit" rel="noopener ugc nofollow" target="_blank">Joan Gamell</a> / <a class="ae jt" href="https://unsplash.com/?utm_source=ghost&amp;utm_medium=referral&amp;utm_campaign=api-credit" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="2c29" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">范围</h1><p id="f384" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">作用域是变量的值被定义和访问的空间。</p><p id="a380" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">JavaScript中有3种类型的作用域:</p><ul class=""><li id="a0fc" class="kx ky hi ih b ii ij im in iq kz iu la iy lb jc lc ld le lf bi translated">全球范围</li><li id="a737" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated">功能范围</li><li id="cc0f" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated">块范围</li></ul><p id="5980" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">用<code class="du jd je jf jg b">var</code>关键字定义的变量要么有全局作用域，要么有函数作用域。</p><p id="a9d4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">用<code class="du jd je jf jg b">let</code>或<code class="du jd je jf jg b">const</code>关键字定义的变量具有块范围。</p><p id="7db8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">关于作用域的更深入的解释，请看我的另一篇文章，标题是JavaScript中的作用域。</p><h1 id="8804" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">提升</h1><p id="2f04" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">当JavaScript程序运行时，它将首先解析脚本并寻找任何变量声明或函数声明。如果发现任何变量或函数声明，它将把它们“提升”到各自作用域的顶部，并在继续评估JavaScript代码的其余部分之前首先处理它们。这个过程叫做“吊装”</p><p id="f570" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">提升影响变量声明，但不影响值初始化/赋值。</p><p id="48e1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">JS中的吊装示例:</p><figure class="jh ji jj jk fd jl"><div class="bz dy l di"><div class="ll lm l"/></div></figure><p id="26a9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">记住，提升只适用于变量声明，不适用于变量初始化。下面的例子将返回“undefined ”,因为x在第二行被初始化和定义，因此它没有被提升到<code class="du jd je jf jg b">console.log()</code>调用之上。</p><figure class="jh ji jj jk fd jl"><div class="bz dy l di"><div class="ll lm l"/></div></figure><p id="0ab1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面的代码将打印2。由于变量y在第3行声明，但没有初始化，它将被提升到程序的顶部，在<code class="du jd je jf jg b">y = 2</code>初始化之上。因此，到实际调用<code class="du jd je jf jg b">console.log(y)</code>时，将为<code class="du jd je jf jg b">y</code>定义值2。</p><pre class="jh ji jj jk fd ln jg lo lp aw lq bi"><span id="0517" class="lr jv hi jg b fi ls lt l lu lv">y = 2;<br/>console.log(y); // Returns 2<br/>var y;<br/><br/>// Same As<br/>var y;<br/>y = 2;<br/>console.log(y);</span></pre><p id="79f8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">注意:</strong>虽然提升适用于用<code class="du jd je jf jg b">var</code>、<code class="du jd je jf jg b">let</code>或<code class="du jd je jf jg b">const</code>声明的变量，但提升实际上只帮助用<code class="du jd je jf jg b">var</code>声明的变量。用<code class="du jd je jf jg b">let</code>关键字声明的变量如果未初始化就返回<code class="du jd je jf jg b">ReferenceError</code>(更多细节见下面的<code class="du jd je jf jg b">TDZ</code>部分)。你也不能用关键字<code class="du jd je jf jg b">const</code>声明一个变量而不立即初始化它的值。如果您尝试这样做，您将获得一个“syntax error:const声明中缺少初始化器”。</p><h1 id="58bf" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">var、let和const之间的区别</h1><h2 id="208e" class="lr jv hi bd jw lw lx ly ka lz ma mb ke iq mc md ki iu me mf km iy mg mh kq mi bi translated">定义变量</h2><p id="678d" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">使用<code class="du jd je jf jg b">var</code>关键字声明(但未初始化)的变量，如果在初始化之前被访问，将返回一个值<code class="du jd je jf jg b">undefined</code>(参见提升部分)。</p><pre class="jh ji jj jk fd ln jg lo lp aw lq bi"><span id="f04a" class="lr jv hi jg b fi ls lt l lu lv">console.log(x); // Returns undefined<br/>var x = 1; // variable declaration and initialization<br/>console.log(x); // Returns 1</span></pre><p id="f9a3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">用<code class="du jd je jf jg b">var</code>声明的变量可以是函数范围的，也可以是全局范围的。</p><figure class="jh ji jj jk fd jl"><div class="bz dy l di"><div class="ll lm l"/></div></figure><p id="a7b2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">用<code class="du jd je jf jg b">var</code>声明的变量可以重新声明。</p><pre class="jh ji jj jk fd ln jg lo lp aw lq bi"><span id="bef5" class="lr jv hi jg b fi ls lt l lu lv">var x = 1;<br/>console.log(x); // 1<br/><br/>var x = 2;<br/>console.log(x); // 2</span></pre><h2 id="8f5a" class="lr jv hi bd jw lw lx ly ka lz ma mb ke iq mc md ki iu me mf km iy mg mh kq mi bi translated">让</h2><p id="8ad4" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">用<code class="du jd je jf jg b">let</code>声明的变量是块范围的。我们只能使用<code class="du jd je jf jg b">let</code>声明相同名称的变量，只要它们在不同的块范围内。</p><figure class="jh ji jj jk fd jl"><div class="bz dy l di"><div class="ll lm l"/></div></figure><p id="f63a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">与<code class="du jd je jf jg b">var</code>不同，用<code class="du jd je jf jg b">let</code>关键字声明的变量不能在同一个范围内重新声明</p><pre class="jh ji jj jk fd ln jg lo lp aw lq bi"><span id="6cde" class="lr jv hi jg b fi ls lt l lu lv">let x = 1;<br/>let x = 2; // Uncaught SyntaxError: Identifier 'x' has already been declared</span></pre><p id="056d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然而，您仍然可以重新定义(重新分配)用<code class="du jd je jf jg b">let</code>声明的变量。</p><pre class="jh ji jj jk fd ln jg lo lp aw lq bi"><span id="7f1d" class="lr jv hi jg b fi ls lt l lu lv">let x = 1;<br/>console.log(x); // 1<br/><br/>x = 2; // This is ok because you are not trying to redeclare x, just redefine its value<br/>console.log(x); // 2</span></pre><h2 id="46c4" class="lr jv hi bd jw lw lx ly ka lz ma mb ke iq mc md ki iu me mf km iy mg mh kq mi bi translated">时间死区</h2><p id="1457" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">时间死区(TDZ)是当前作用域中从作用域开始到变量最终初始化之间的区域。TDZ适用于用<code class="du jd je jf jg b">let</code>关键字声明的变量。用<code class="du jd je jf jg b">let</code>声明的变量不能在TDZ内访问(将返回“ReferenceError”)。</p><figure class="jh ji jj jk fd jl"><div class="bz dy l di"><div class="ll lm l"/></div></figure><h2 id="e009" class="lr jv hi bd jw lw lx ly ka lz ma mb ke iq mc md ki iu me mf km iy mg mh kq mi bi translated">常数</h2><p id="3de5" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">类似于用<code class="du jd je jf jg b">let</code>声明的变量，用<code class="du jd je jf jg b">const</code>关键字声明的变量是块范围的。</p><p id="916c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">同样类似于<code class="du jd je jf jg b">let</code>，用<code class="du jd je jf jg b">const</code>声明的变量不能重新声明。</p><p id="3456" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然而，与用<code class="du jd je jf jg b">let</code>声明的变量不同，用<code class="du jd je jf jg b">const</code> <strong class="ih hj">声明的变量必须立即用</strong>初始化。否则，您将会以“syntax error:const声明中缺少初始化器”错误结束。</p><p id="c25f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最重要的是，用关键字<code class="du jd je jf jg b">const</code>声明和初始化的变量不能通过重分配改变它们的值<strong class="ih hj">(见下面的注释)。这是因为<code class="du jd je jf jg b">const</code>关键字导致变量的名称是只读的，从而阻止通过分配的变量对存储在内存中的值进行写访问。仔细想想，这是为什么就说得通了。如果你想创建一个不能轻易改变的变量，你需要知道它的值，否则，你会得到一个带有“未定义”值的常量变量。</strong></p><p id="0879" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">注意</strong>:注意用<code class="du jd je jf jg b">const</code>关键字初始化的变量不能通过重新赋值改变其值<strong class="ih hj">。这并不意味着常量的值不能改变，只是意味着你不能直接使用变量名来改变它。例如，除了重新分配之外，没有其他方法可以更改字符串或数字变量，但是您可以更改对象的属性。</strong></p><figure class="jh ji jj jk fd jl"><div class="bz dy l di"><div class="ll lm l"/></div></figure><h1 id="9e33" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">哪个变量声明是最好的，我应该使用哪个？</h1><p id="57c5" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">我读过韦斯·博斯的一篇文章，我喜欢他的建议:</p><ol class=""><li id="ec19" class="kx ky hi ih b ii ij im in iq kz iu la iy lb jc mj ld le lf bi translated">默认情况下使用<code class="du jd je jf jg b">const</code>关键字声明变量，除非你知道你的变量需要改变它的值(在这种情况下使用<code class="du jd je jf jg b">let</code>)。</li><li id="9b89" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc mj ld le lf bi translated">如果你知道一个变量的值会改变，使用<code class="du jd je jf jg b">let</code>关键字来声明这个变量(比如迭代器)。</li><li id="b860" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc mj ld le lf bi translated">除非特殊情况需要，否则避免使用<code class="du jd je jf jg b">var</code>关键字进行变量声明。</li></ol><h1 id="7ff3" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">摘要:用“var”、“let”和“const”关键字声明的变量之间的差异:</h1><p id="e7c2" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated"><code class="du jd je jf jg b"><strong class="ih hj">var</strong></code></p><ul class=""><li id="731c" class="kx ky hi ih b ii ij im in iq kz iu la iy lb jc lc ld le lf bi translated">范围:全局或函数</li><li id="2bc2" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated">能够重新申报？是</li><li id="b223" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated">能够重新初始化？是</li></ul><p id="28f9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du jd je jf jg b"><strong class="ih hj">let</strong></code></p><ul class=""><li id="ba6f" class="kx ky hi ih b ii ij im in iq kz iu la iy lb jc lc ld le lf bi translated">范围:全局或块</li><li id="9ab1" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated">能够重新申报？不</li><li id="8bf3" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated">能够重新初始化？是</li></ul><p id="3b25" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du jd je jf jg b"><strong class="ih hj">const</strong></code></p><ul class=""><li id="753e" class="kx ky hi ih b ii ij im in iq kz iu la iy lb jc lc ld le lf bi translated">范围:全局或块</li><li id="3e03" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated">能够重新申报？不</li><li id="b642" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated">能够重新初始化？不</li></ul><h1 id="bf3c" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">资源</h1><ul class=""><li id="2de3" class="kx ky hi ih b ii ks im kt iq mk iu ml iy mm jc lc ld le lf bi translated"><a class="ae jt" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/var" rel="noopener ugc nofollow" target="_blank"> MDN — var </a></li><li id="7ba7" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated"><a class="ae jt" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/let" rel="noopener ugc nofollow" target="_blank"> MDN — let </a></li><li id="9a4f" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated"><a class="ae jt" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const" rel="noopener ugc nofollow" target="_blank"> MDN —常量</a></li><li id="c131" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated"><a class="ae jt" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/block" rel="noopener ugc nofollow" target="_blank"> MDN —模块</a></li><li id="d099" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated"><a class="ae jt" href="https://developer.mozilla.org/en-US/docs/Web/API/Window" rel="noopener ugc nofollow" target="_blank"> MDN —窗口</a></li><li id="bc1f" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated"><a class="ae jt" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Grammar_and_types#variable_scope" rel="noopener ugc nofollow" target="_blank"> MDN —可变范围</a></li><li id="427f" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated"><a class="ae jt" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Control_flow_and_error_handling#block_statement" rel="noopener ugc nofollow" target="_blank"> MDN —块语句</a></li><li id="dd43" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated"><a class="ae jt" href="https://developer.mozilla.org/en-US/docs/Glossary/Hoisting" rel="noopener ugc nofollow" target="_blank"> MDN —吊装</a></li><li id="9aac" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated"><a class="ae jt" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Grammar_and_types#variable_hoisting" rel="noopener ugc nofollow" target="_blank"> MDN —可变提升</a></li><li id="93cc" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated"><a class="ae jt" href="https://www.freecodecamp.org/news/var-let-and-const-whats-the-difference/" rel="noopener ugc nofollow" target="_blank"> Var、Let和Const——有什么区别？</a></li><li id="34bf" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated"><a class="ae jt" href="https://www.w3schools.com/js/js_scope.asp" rel="noopener ugc nofollow" target="_blank"> W3学校— JavaScript范围</a></li><li id="ef1c" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated"><a class="ae jt" href="https://eloquentjavascript.net/" rel="noopener ugc nofollow" target="_blank">雄辩的JavaScript，编程的现代介绍</a></li><li id="2867" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated"><a class="ae jt" href="https://owlcation.com/stem/JavaScript-Variable-Declaration-and-Initialization" rel="noopener ugc nofollow" target="_blank"> JavaScript变量声明和初始化</a></li><li id="a7be" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated">什么是临时死区？</li><li id="8b2e" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated"><a class="ae jt" href="https://wesbos.com/javascript/01-the-basics/variables-and-statements/#differences-between-var-let--const" rel="noopener ugc nofollow" target="_blank"> Wes Bos —变量和陈述</a></li></ul></div></div>    
</body>
</html>