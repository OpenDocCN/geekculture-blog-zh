<html>
<head>
<title>Integrating D3.js to a Typescript React Application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将D3.js集成到Typescript React应用程序中</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/integrating-d3-js-to-a-typescript-react-application-d77580756b20?source=collection_archive---------2-----------------------#2021-05-02">https://medium.com/geekculture/integrating-d3-js-to-a-typescript-react-application-d77580756b20?source=collection_archive---------2-----------------------#2021-05-02</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/36eceb99c621472f552dec6c6c780fe6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TSeWgZynzkbsF783uNeO3Q.jpeg"/></div></div></figure><p id="20b2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在今天的前端应用程序开发中，ReactJS库已经成为最流行的Javascript/Typescript框架。</p><p id="023d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">另一方面，D3.js是在Web上创建动态图表最常用的Javascript库。</p><p id="216f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">使用Typescript语言集成这两个框架甚至更多可能有点棘手。但是绝对有可能。这就是本文的目的。</p><h2 id="6d28" class="jo jp hi bd jq jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki bi translated">创建并安装库</h2><p id="a453" class="pw-post-body-paragraph iq ir hi is b it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj kn jl jm jn hb bi translated">首先，我们必须创建一个新的react项目。如果我们选择Typescript语言，那么建议定义一个Typescript模板。这是通过以下NPM命令完成的:</p><pre class="ko kp kq kr fd ks kt ku kv aw kw bi"><span id="5ed7" class="jo jp hi kt b fi kx ky l kz la">npx create-react-app react-ts-chart — template typescript</span></pre><p id="cff8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下一步不是强制性的，但是如果您想为您的项目使用Sass预编译器，建议您这样做:</p><pre class="ko kp kq kr fd ks kt ku kv aw kw bi"><span id="8cee" class="jo jp hi kt b fi kx ky l kz la">npm install node-sass — save</span></pre><p id="3cfe" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，让我们导入D3.js库。第一行是D3.js文件，第二行是Typescript定义:</p><pre class="ko kp kq kr fd ks kt ku kv aw kw bi"><span id="1ec3" class="jo jp hi kt b fi kx ky l kz la">npm i d3</span><span id="9bec" class="jo jp hi kt b fi lb ky l kz la">npm i <a class="ae lc" href="http://twitter.com/types/d3" rel="noopener ugc nofollow" target="_blank">@types/d3</a></span></pre><p id="fa80" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这将足以创建我们的第一个图表。</p><h2 id="e763" class="jo jp hi bd jq jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki bi translated">创建我们的第一页</h2><p id="abcb" class="pw-post-body-paragraph iq ir hi is b it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj kn jl jm jn hb bi translated">让我们创建包含第一个图表的第一个页面。基本的Typescript模板如下所示:</p><figure class="ko kp kq kr fd ij"><div class="bz dy l di"><div class="ld le l"/></div></figure><h2 id="1709" class="jo jp hi bd jq jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki bi translated">D3原则</h2><p id="39be" class="pw-post-body-paragraph iq ir hi is b it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj kn jl jm jn hb bi translated">D3是一个javascript框架，它在一个<code class="du lf lg lh kt b">SVG </code>元素上展示了它的图形。所以我们必须定义这样一个元素。首先，让我们定义一个<code class="du lf lg lh kt b">SVGSVGElement </code>对象:</p><pre class="ko kp kq kr fd ks kt ku kv aw kw bi"><span id="714d" class="jo jp hi kt b fi kx ky l kz la">ref!: SVGSVGElement;</span></pre><p id="03e0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">并将它链接到一个<code class="du lf lg lh kt b">SVG </code>元素:</p><pre class="ko kp kq kr fd ks kt ku kv aw kw bi"><span id="f3d9" class="jo jp hi kt b fi kx ky l kz la">&lt;svg className=”container” ref={(ref: SVGSVGElement) =&gt; this.ref = ref} width=’100' height=’100'&gt;&lt;/svg&gt;</span></pre><p id="e0ca" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在让我们将D3.js库导入到组件中:</p><pre class="ko kp kq kr fd ks kt ku kv aw kw bi"><span id="4404" class="jo jp hi kt b fi kx ky l kz la">import * as d3 from ‘d3’;</span></pre><p id="06ec" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">对于本教程，我们将实现一个非常简单的条形图，数据将是一个简单的硬编码的<code class="du lf lg lh kt b">Number </code>数组。让我们构建一个私有函数来说明该图:</p><figure class="ko kp kq kr fd ij"><div class="bz dy l di"><div class="ld le l"/></div></figure><p id="5608" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在React组件中，有几个生命周期阶段。其中一个是<code class="du lf lg lh kt b">componentDidMount()</code>功能。这个阶段在构造器和渲染(在这个阶段中，你实际上绘制HTML)阶段之后执行。所以让我们在舞台上执行<code class="du lf lg lh kt b">buildGraph </code>功能。</p><p id="e1d9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">最终的组件应该如下所示:</p><figure class="ko kp kq kr fd ij"><div class="bz dy l di"><div class="ld le l"/></div></figure><p id="58c1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在让我们通过一个<code class="du lf lg lh kt b">SCSS </code>模板来设计我们的新图表:</p><figure class="ko kp kq kr fd ij"><div class="bz dy l di"><div class="ld le l"/></div></figure><p id="21cf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们的新图应该如下所示:</p><figure class="ko kp kq kr fd ij er es paragraph-image"><div class="er es li"><img src="../Images/68eee8b0c179d00db66c08de03e8db4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:302/format:webp/1*zd12Q3RCEzKTn_gNKEOweg.png"/></div></figure><h2 id="a331" class="jo jp hi bd jq jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki bi translated">结论:</h2><p id="75f7" class="pw-post-body-paragraph iq ir hi is b it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj kn jl jm jn hb bi translated">恭喜你！我们已经向react应用程序实现图形和图表迈出了第一步。</p><p id="27ca" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">完整的源代码可以在<a class="ae lc" href="https://github.com/krasnoff/react-ts-chart" rel="noopener ugc nofollow" target="_blank">https://github.com/krasnoff/react-ts-chart</a>找到</p></div></div>    
</body>
</html>