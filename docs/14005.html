<html>
<head>
<title>A simple guide on connecting RStudio to a MySQL database</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将RStudio连接到MySQL数据库的简单指南</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/a-simple-guide-on-connecting-rstudio-to-a-mysql-database-d8a8ca6573fd?source=collection_archive---------4-----------------------#2022-08-10">https://medium.com/geekculture/a-simple-guide-on-connecting-rstudio-to-a-mysql-database-d8a8ca6573fd?source=collection_archive---------4-----------------------#2022-08-10</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/00b8f153b2feead04af9c14942796032.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0lT51AQVWkpAiHHzkoZPtg.jpeg"/></div></div></figure><p id="0a41" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你读过我写的关于将RStudio连接到PostgreSQL数据库的文章吗？那篇文章是我们在这里讨论的先决条件。我非常详细地解释了我们将在本文中使用的一些功能和我们将采取的步骤。</p><p id="e183" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你还没有阅读那篇<a class="ae jo" href="https://arimoroolayinka.medium.com/a-simple-guide-on-connecting-rstudio-to-a-postgresql-database-9e35ccdc08be" rel="noopener">文章</a>，请花12分钟阅读这里的文章。如果你已经读了那篇文章，那么我们可以一起开始这趟美丽的旅程。</p><p id="1f4e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在本文中，我将向您展示如何本地连接到MySQL数据库。在我的上一篇文章中，我已经解释了当我们连接到PostgreSQL数据库时，将这篇文章放在一起的基本原理。将RStudio连接到SQL数据库有助于我们将强大的R包和函数用于不同的数据任务。</p><p id="54b3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">正如我在上一篇文章中提到的，这篇文章是一个简单的指南，这意味着它并没有包罗万象地解释所有涉及的技术细节。请放心，通过遵循本指南中概述的步骤，您将能够将RStudio连接到您的本地MySQL数据库。此外，我相信您有一个MySQL数据库，数据库中有表。</p><blockquote class="jp jq jr"><p id="ba34" class="iq ir js is b it iu iv iw ix iy iz ja jt jc jd je ju jg jh ji jv jk jl jm jn hb bi translated"><strong class="is hj">注意:</strong>这篇文章不会教你如何创建一个MySQL数据库。假设您已经建立了至少一个包含至少一个表的MySQL数据库。</p></blockquote><p id="4802" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">此外，各种函数和包有助于实现本文的相同目的——将RStudio连接到MySQL数据库。然而，我将使用odbc R包来展示这个例子。ODBC的意思是<a class="ae jo" href="https://www.techtarget.com/searchoracle/definition/Open-Database-Connectivity" rel="noopener ugc nofollow" target="_blank">开放数据库连接</a>，一个开放的标准应用编程接口(API)，允许应用程序员访问任何数据库[1]。</p><p id="0ad9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">最后，在我们开始之前，我想提一下，确保你通读到底；我在这篇文章中添加了一个奖励部分和一份礼物。</p><p id="0643" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，让我们开始吧！</p><h1 id="c9dd" class="jw jx hi bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated"><strong class="ak">入门</strong></h1><p id="3ac9" class="pw-post-body-paragraph iq ir hi is b it ku iv iw ix kv iz ja jb kw jd je jf kx jh ji jj ky jl jm jn hb bi translated">第一步是安装并导入所需的R包。如果你以前用过R，你应该知道R有几乎任何用途的包。目前，R综合档案网络(CRAN)存储库中有超过13，000个包。要安装和导入我们将在本文中使用的包，请使用下面的代码。</p><blockquote class="jp jq jr"><p id="bf56" class="iq ir js is b it iu iv iw ix iy iz ja jt jc jd je ju jg jh ji jv jk jl jm jn hb bi translated"><strong class="is hj">注意:</strong>要在R中运行一行代码，对于Windows用户使用CTRL ENTER或者使用RStudio界面上的run按钮。</p></blockquote><figure class="la lb lc ld fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kz"><img src="../Images/02fe1b79b1b1eb27b7e5336008a64622.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-C57pkOdhNyceqRGWeXbhQ.png"/></div></div></figure><p id="6ce2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我建议使用谷歌搜索来检查每个导入的包是做什么的。为了使本文尽可能简短紧凑，我跳过了解释每个导入包的功能。</p><p id="d19b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">至此，我们现在可以看看如何将RStudio连接到MySQL数据库。你刚才看的和上一篇文章挺熟悉的吧？现在，我们将深入研究这篇文章有趣的部分。</p><h1 id="0fb8" class="jw jx hi bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated"><strong class="ak">将RStudio连接到MySQL数据库</strong></h1><p id="74ec" class="pw-post-body-paragraph iq ir hi is b it ku iv iw ix kv iz ja jb kw jd je jf kx jh ji jj ky jl jm jn hb bi translated">正如我们在PostgreSQL数据库中看到的那样，让我们首先展示我们想要在本文中连接到的MySQL数据库的一个片段。我在MySQL中有<strong class="is hj"> employeesdb </strong>数据库。</p><figure class="la lb lc ld fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es le"><img src="../Images/7cf7e10553dc96f6e5f46e6e161b5f43.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EoJ4ef1JQXI-z-chzaZu_Q.png"/></div></div></figure><p id="c7e2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">从上图来看，<strong class="is hj"> employeesdb </strong>有五个表，并且没有视图。显然，这个数据库不同于我们在PostgreSQL文章中连接的数据库。由于我们将从<strong class="is hj"> employeesdb </strong>数据库中查询employees表，我相信查看它包含的数据会有所帮助。</p><p id="454b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">上图显示了employees表中的数据片段。值得注意的是，employees表上有1000行和9列。了解这些信息有助于我们在查询数据库时确认是否已经成功连接到数据库。</p><p id="0835" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">连接到您的MySQL数据库类似于PostgreSQL数据库，但不像PostgreSQL那么直接；您需要做一些事情来实现无缝连接。</p><p id="ff9e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">首先，我们希望确保在安装MySQL时，MySQL ODBC驱动程序已经安装。记住，我们使用odbc包来创建连接。因此，我们希望确保安装了MySQL的数据库驱动程序。对于PostgreSQL，我们不需要这样做——我猜PostgreSQL不需要安装驱动程序(虽然不确定！)</p><p id="8e17" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们可以使用下面的代码来检查安装的唯一数据库驱动程序的列表。</p><figure class="la lb lc ld fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lf"><img src="../Images/f8e5b4ff45b43e97c162b2dc626eae3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oUH1mGTlTr9tdr_15Wt-kQ.png"/></div></div></figure><p id="4a5b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">结果显示了安装的数据库驱动程序，我们可以看到安装了两个MySQL驱动程序。我们可以看到安装了其他一些数据库驱动程序，包括SQL Server。</p><p id="fd8a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">我想PostgreSQL为我们省去添加数据库驱动程序作为ODBC数据源的压力。老实说，我不明白PostgreSQL数据库驱动程序是如何工作的。你可以在评论中分享你对此的想法。</strong></p><p id="ea76" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在我们已经确定MySQL数据库驱动程序已经安装，我们需要确认这个驱动程序是作为ODBC数据源添加的。如果没有，我们将需要添加MySQL数据库驱动程序作为ODBC数据源。然后，我们可以将RStudio连接到MySQL数据库。</p><p id="8982" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为了帮助我们实现这一点，我已经列出了你需要采取的步骤。</p><h2 id="22bf" class="lg jx hi bd jy lh li lj kc lk ll lm kg jb ln lo kk jf lp lq ko jj lr ls ks lt bi translated"><strong class="ak">第一步:添加MySQL驱动程序作为ODBC数据源</strong></h2><p id="bd87" class="pw-post-body-paragraph iq ir hi is b it ku iv iw ix kv iz ja jb kw jd je jf kx jh ji jj ky jl jm jn hb bi translated">首先，我们必须确认MySQL数据库是一个ODBC数据源。为此，请遵循以下步骤，如下图所示:</p><ul class=""><li id="8c18" class="lu lv hi is b it iu ix iy jb lw jf lx jj ly jn lz ma mb mc bi translated">进入你的搜索栏，输入<strong class="is hj"> odbc数据源</strong>，如果你安装了64位版本，点击64位版本。</li></ul><figure class="la lb lc ld fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es md"><img src="../Images/9320df8f60c9b476e6923cb424676bd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HMuB5A4IRw6o0RexCiSKPw.png"/></div></div></figure><p id="51ef" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当你点击它时，类似下图的对话框应该会打开。</p><figure class="la lb lc ld fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es me"><img src="../Images/b0006fdd938694af319a3c7256855a2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Fpyoq_Z0fQPXunrmPH1yow.png"/></div></div></figure><p id="8880" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">从表面上看，MySQL数据库驱动程序没有被列为ODBC数据源。因此，将RStudio连接到MySQL是不可能的，除非我们将MySQL odbc驱动程序添加到用户数据源列表中。</p><ul class=""><li id="223c" class="lu lv hi is b it iu ix iy jb lw jf lx jj ly jn lz ma mb mc bi translated">现在，点击<strong class="is hj">添加</strong>，进入下一步。</li></ul><p id="275a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">点击“添加”,将弹出下面的对话框。</p><ul class=""><li id="c093" class="lu lv hi is b it iu ix iy jb lw jf lx jj ly jn lz ma mb mc bi translated">现在，单击MySQL ODBC 8.0 ANSI驱动程序并完成(选择MySQL ODBC 8.0 ANSI驱动程序应该有助于完成工作)。</li></ul><figure class="la lb lc ld fd ij er es paragraph-image"><div class="er es mf"><img src="../Images/d0b6a13c5b458f5c23944bda3727dcc7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1366/format:webp/1*nnR0AeugYWhFVP5wV20rJA.png"/></div></figure><p id="286e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">完成这一步后，让我们继续！我希望你一直在跟进。如果没有，请后退一步，并确保在继续之前你跟随了我的思路。</p><p id="9737" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">漂亮！当您单击“完成”时，出现下图，但没有您在下图中看到的信息。只有MySQL的默认端口号3306会为您填充。</p><figure class="la lb lc ld fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mg"><img src="../Images/0832cb155838474f51b19a92c2a3cda7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aTJR7ZK1-bxvMdjMqDngMQ.png"/></div></div></figure><p id="4641" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这一步中，我们将配置MySQL ODBC数据源连接器。上面的对话框打开后，您需要填写以下内容:</p><ul class=""><li id="19c0" class="lu lv hi is b it iu ix iy jb lw jf lx jj ly jn lz ma mb mc bi translated">数据源名称:您可以给它取任何喜欢的名称。我把它命名为<strong class="is hj"> MySQL-connection </strong></li><li id="75d4" class="lu lv hi is b it mh ix mi jb mj jf mk jj ml jn lz ma mb mc bi translated">描述:你可以给它一个简短的描述</li><li id="56aa" class="lu lv hi is b it mh ix mi jb mj jf mk jj ml jn lz ma mb mc bi translated">用户:通常用户应该是<strong class="is hj"> root </strong>。但是，您可以决定连接到另一个用户。在本例中，我选择连接到根用户的<strong class="is hj">，因为<strong class="is hj"> employeesdb </strong>数据库在我的根用户连接中。</strong></li></ul><blockquote class="mm"><p id="03fe" class="mn mo hi bd mp mq mr ms mt mu mv jn dx translated"><strong class="ak">提示:</strong>当你打开你的MySQL工作台，你应该会看到你的不同用户，如下图所示。</p></blockquote><figure class="mx my mz na nb ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mw"><img src="../Images/21dea2596f97040131c73b3cc11cbb87.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KV6RMByOaA1BmBv5xVe6UQ.png"/></div></div></figure><ul class=""><li id="eb80" class="lu lv hi is b it iu ix iy jb lw jf lx jj ly jn lz ma mb mc bi translated">密码:输入您安装MySQL时使用的密码，该密码与您打开MySQL工作台时输入的密码相同</li><li id="a74a" class="lu lv hi is b it mh ix mi jb mj jf mk jj ml jn lz ma mb mc bi translated">数据库:输入你想连接的数据库；在本例中，我想连接到<strong class="is hj"> employeesdb </strong>数据库</li></ul><blockquote class="jp jq jr"><p id="70e8" class="iq ir js is b it iu iv iw ix iy iz ja jt jc jd je ju jg jh ji jv jk jl jm jn hb bi translated"><strong class="is hj">注意:</strong>你可以做的一件实际的事情是点击<strong class="is hj">测试</strong>按钮。如果您输入的详细信息，尤其是用户名、密码和数据库是正确的，您应该会看到如下所示的提示<strong class="is hj">连接成功</strong>。</p></blockquote><figure class="la lb lc ld fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kz"><img src="../Images/550d6b71365a9c0522f162135c376bab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ySrnpc0Sw8HJPqvMbP5VZA.png"/></div></div></figure><p id="e64a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您会注意到我正在连接到另一个名为<strong class="is hj"> employeesdb </strong>的数据库，它不同于我用来说明PostgreSQL连接的那个数据库。这样做表明，无论您想连接到什么RDBMS，想法都是相似的。</p><p id="f70f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">最后，您可以点击<strong class="is hj"> OK </strong>或<strong class="is hj"> X </strong>返回MySQL ODBC数据源对话框并点击OK，到<strong class="is hj"> employeesdb </strong>数据库的新MySQL连接就创建好了。</p><figure class="la lb lc ld fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nc"><img src="../Images/20110e82044a9fa1ff1817d4d0ae0b5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7dZQ6kCQEaeXL2KrxBp5qg.png"/></div></div></figure><p id="8189" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您将看到新的连接被创建。点击OK，你就可以开始了。我们添加了MySQL作为ODBC数据源。现在，将RStudio连接到MySQL数据库<strong class="is hj"> employeesdb </strong>将变得很容易。</p><figure class="la lb lc ld fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nd"><img src="../Images/b06317f3e81247631074db8cb22a157c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hjzFTIi3caLg0A35oxU2CA.png"/></div></div></figure><blockquote class="jp jq jr"><p id="8877" class="iq ir js is b it iu iv iw ix iy iz ja jt jc jd je ju jg jh ji jv jk jl jm jn hb bi translated"><strong class="is hj">注意:</strong>点击用户数据源，您将看到添加、删除或配置连接的选项。如果您单击“配置”，您可以修改您在上述步骤中填写的详细信息。例如，您可以将数据库名称更改为MySQL中的另一个数据库。</p></blockquote><p id="cc74" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">连接完成后，剩下的就是编写R代码，类似于我们将RStudio连接到PostgreSQL时编写的代码。</p><h2 id="eda5" class="lg jx hi bd jy lh li lj kc lk ll lm kg jb ln lo kk jf lp lq ko jj lr ls ks lt bi translated"><strong class="ak">第二步:定义一个数据库连接</strong></h2><p id="7c57" class="pw-post-body-paragraph iq ir hi is b it ku iv iw ix kv iz ja jb kw jd je jf kx jh ji jj ky jl jm jn hb bi translated">现在，我们回到你所熟悉的话题。使用下面的代码从RStudio连接到<strong class="is hj"> employeesdb </strong>数据库，这与我们连接到PostgreSQL数据库的方式非常相似。唯一的区别是参数中提供的信息。例如，您的密码将是您安装MySQL时使用的密码，也是您将MySQL驱动程序添加为ODBC数据源时使用的密码。</p><figure class="la lb lc ld fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ne"><img src="../Images/e1bb97012bdfbd156f7d2044518101be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E9NDsuBpP8NF3i1SkW0yDQ.png"/></div></div></figure><p id="8569" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">根据上面的代码，我们创建了一个名为<strong class="is hj"> conn </strong> ( <em class="js">你可以给它取任何喜欢的名字</em>)的R对象。我相信上面代码的其他部分是不言自明的。</p><blockquote class="jp jq jr"><p id="b162" class="iq ir js is b it iu iv iw ix iy iz ja jt jc jd je ju jg jh ji jv jk jl jm jn hb bi translated"><strong class="is hj">注意:</strong>如果您想要连接到在线或基于云的数据库，您需要将服务器从<strong class="is hj">“localhost”</strong>更改为基于云的服务器，可能需要通过链接。您可以探索这个选项。我们使用localhost作为服务器，因为我们连接到一个本地数据库。</p></blockquote><p id="ec18" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">接下来，让我们使用下面的代码打印出<strong class="is hj"> employeesdb </strong>数据库中的表名:</p><figure class="la lb lc ld fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nf"><img src="../Images/e4c8f00012fc3eedcca3712aaaba7ba3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MgttkmfUOcCXxC07EJuVyg.png"/></div></div></figure><p id="472f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">结果如下所示:</p><figure class="la lb lc ld fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ng"><img src="../Images/b5e3f1204cb69792f4155ef63e0926b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FN70-7ZTqEUwPXFBhGQmkA.png"/></div></div></figure><p id="6eef" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在将MySQL连接到RStudio这一节的开头，查看图像的左侧，您会看到我们有相同的表名。这个结果进一步证明连接是成功的。</p><blockquote class="jp jq jr"><p id="dbd4" class="iq ir js is b it iu iv iw ix iy iz ja jt jc jd je ju jg jh ji jv jk jl jm jn hb bi translated"><strong class="is hj">注意:</strong>如果您连接到一个不同的数据库(很可能是这种情况)，您将得到一个不同的表名列表，因为我们没有连接到同一个数据库。</p></blockquote><h2 id="056f" class="lg jx hi bd jy lh li lj kc lk ll lm kg jb ln lo kk jf lp lq ko jj lr ls ks lt bi translated"><strong class="ak">第三步:查询数据库</strong></h2><p id="22b8" class="pw-post-body-paragraph iq ir hi is b it ku iv iw ix kv iz ja jb kw jd je jf kx jh ji jj ky jl jm jn hb bi translated">既然我们确定已经成功创建了一个连接，现在就可以从RStudio中查询数据库了。我们在连接到PostgreSQL数据库时使用的相同代码也可以工作。</p><p id="a428" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">假设我们需要连接到RStudio的数据库<strong class="is hj"> employeesdb </strong>中employees表的前500行。</p><figure class="la lb lc ld fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nh"><img src="../Images/fa793ed192168d14b025b7a894045053.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*swHNdVccDg9ozuUfhz7laQ.png"/></div></div></figure><p id="0081" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在上面的代码中，我们使用了DBI包中的dbGetQuery()函数。它需要两个必需的参数:连接和语句。回想一下，当我们创建与MySQL的连接时，我们将R连接对象称为conn。第二条语句只是检索所有的列，因为我们在SELECT关键字后使用了星号(<strong class="is hj"> * </strong> ) <strong class="is hj"> </strong>，并且由于LIMIT 500语句，检索了500行。</p><p id="af82" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们看一下数据。我们将使用<strong class="is hj"> glimpse() </strong>函数。</p><figure class="la lb lc ld fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ni"><img src="../Images/7b0e8e2c1d08819fd8aa75f717f2c7a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dMOVuWtUOccnwZNp4mKkpg.png"/></div></div></figure><p id="5012" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">太神奇了！我们有500排。毕竟，我们在数据库中查询了employees表中的500条记录。此外，我们有九列，因为我们查询了数据库中的所有列。</p><p id="13d6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">因为我们已经将数据保存为R对象<strong class="is hj"> emp_data </strong>，所以我们可以关闭连接来释放资源。</p><figure class="la lb lc ld fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nj"><img src="../Images/99a3b72c6fcb086692917f39f9a50f7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3u47uSfnYOGX8LG2B0Sbmg.png"/></div></div></figure><p id="89b7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如前所述，如果我们试图运行下面的代码，我们将会得到一个错误，因为我们已经断开了RStudio与MySQL数据库的连接。</p><figure class="la lb lc ld fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nh"><img src="../Images/fa793ed192168d14b025b7a894045053.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*swHNdVccDg9ozuUfhz7laQ.png"/></div></div></figure><p id="5e27" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这个错误向我们展示了为什么将查询的数据保存为R对象是非常重要的。即使我们断开了对employees表的访问，我们仍然可以访问500行的employees数据，因为我们将它保存在R对象<strong class="is hj"> emp_data </strong>中。否则，我们需要运行代码来再次创建连接。</p><p id="f1ba" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">最后，我们可以开始使用R函数来处理我们已经查询并保存为<strong class="is hj"> emp_data </strong>的数据。例如，我们可以使用head() <strong class="is hj"> </strong>函数打印出数据的前六行。</p><figure class="la lb lc ld fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lf"><img src="../Images/93f7745a7aafcc1a7b3accc7cacfdd67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bBwjUYxDFXfuoRFcBFUZYQ.png"/></div></div></figure><p id="ef30" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">漂亮！经过仔细观察，您会注意到这里返回的数据与本节开头的图像产生的数据相似。</p><p id="0f15" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">拍拍自己的背！通读这篇文章，你做得很好。我相信这是一次美好的经历。如果我们在这里结束，我认为你已经学到了一些伟大的想法。</p><p id="cd9a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然而，我决定添加一个额外的部分，在创建到数据库的连接之后，使用<strong class="is hj"> dbplyr </strong>包中的函数来查询数据库，而不是使用DBI包中的dbGetQuery()函数。使用这两个包各有利弊，我们不会在本文中探讨。</p><p id="97f4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们看看它是如何工作的。</p><h1 id="466b" class="jw jx hi bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated"><strong class="ak">奖金部分:使用dbplyr </strong></h1><p id="502c" class="pw-post-body-paragraph iq ir hi is b it ku iv iw ix kv iz ja jb kw jd je jf kx jh ji jj ky jl jm jn hb bi translated">就我个人而言，我可以使用任何一个软件包，DBI，或dbplyr。然而，我认为dbplyr提供了一些灵活性，特别是在查询数据库时使用dplyr函数。<a class="ae jo" href="https://dbplyr.tidyverse.org/" rel="noopener ugc nofollow" target="_blank"> dbplyr包</a>是一个数据库的“dplyr”后端，它允许你处理远程数据库表，就像它们是内存中的数据帧一样。基本特性适用于任何具有“DBI”后端的数据库。</p><p id="4ca8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">作为演示这个例子的第一步，我们需要重新连接到MySQL数据库。请记住，我们已经断开了与数据库的连接。下面的代码可以帮助我们做到这一点:</p><figure class="la lb lc ld fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nk"><img src="../Images/6fb9219e9846239aee9fdc9a69fa283e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vesWGoB3QDKYKrluAq9IyA.png"/></div></div></figure><p id="739d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，假设我们想要查询employees表中的前500条记录或行。我们将使用通用的tbl()函数从数据源创建一个表。我们需要为该函数提供数据源(在本例中是我们的数据库连接)和SQL语句。</p><p id="8212" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">请注意这与dbGetQuery()函数之间的区别。这里，我们将在SQL语句之前指定SQL，因为tbl()函数是一个通用函数，可以处理各种数据源。</p><p id="b7a2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我认为这是有道理的。</p><figure class="la lb lc ld fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nl"><img src="../Images/27c23a430dd8b1c4d655161b9a23c60e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6fYfAAWzBiV6Wqf90pHzUw.png"/></div></div></figure><p id="05cf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你能告诉我为什么不建议按照我上面写的方式写代码吗？</p><p id="1ffc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">答案很简单，如果我们关闭连接，我们将无法访问数据库和employees表。事实上，代码将在您的RStudio控制台上打印结果(这可能相当混乱)，如下面的结果所示。</p><figure class="la lb lc ld fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lf"><img src="../Images/9f213dfdb50feb978c561fe357bc0668.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0cEMuAQOf55QEdePR0SCMA.png"/></div></div></figure><p id="1f24" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">另外，您会注意到结果向我们显示了数据源和连接的数据库— <strong class="is hj"> employeesdb </strong>。该结果的另一个结果是，该数据还不是R数据帧。因此，对我们查询的数据使用一些R函数可能是不可能的。这是使用dbGetQuery()函数的一个优点。它将查询的数据作为数据框返回。</p><p id="7d36" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们可以很快解决我提出的这些问题。</p><p id="99af" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们通过将结果存储在R数据帧中来整理这个结果。下面的代码也返回前500行。我使用了管道函数来链接几个步骤。首先，我使用tbl()函数连接到数据库，但是我没有编写SQL语句来检索前500行，而是查询了整个employees表，即行tbl(conn，“employees”)。然后，我使用as.data.frame()函数将查询的数据转换为数据框，以便在我们继续操作时易于处理。因为我们需要前500行，所以我使用slice()函数通过索引检索前500行。</p><figure class="la lb lc ld fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nm"><img src="../Images/ae1a8b9792eb130775ab781352710366.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YCrhuqqG1egsDWaMwBtVqQ.png"/></div></div></figure><p id="931f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">最后，我们可以检查新数据框的维度，以确保我们做了正确的事情。</p><figure class="la lb lc ld fd ij er es paragraph-image"><div class="er es nn"><img src="../Images/1c62b979f5724a2168eb79981cb4dadd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1376/format:webp/1*p4i3J2kctRan-P2j9N_mBA.png"/></div></figure><p id="164a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">正如预期的那样，该维度显示了500行和9列。因此，我们可以在查询数据库时使用dplyr函数——通过dbplyr。然后，我们可以关闭或断开连接。</p><figure class="la lb lc ld fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nj"><img src="../Images/99a3b72c6fcb086692917f39f9a50f7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3u47uSfnYOGX8LG2B0Sbmg.png"/></div></div></figure><p id="ed4d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">保存数据后，我们可以使用head()函数返回数据的前六行，并从九列中选择一些我们想要的列，包括first_name、last_name、department和salary。dplyr函数中的select()函数帮助我们实现了这一点。</p><figure class="la lb lc ld fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es no"><img src="../Images/90e6a905d0eab8c0576058af92c30c1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WqLv1NPElh9irdqXTlnc_g.png"/></div></div></figure><blockquote class="jp jq jr"><p id="4396" class="iq ir js is b it iu iv iw ix iy iz ja jt jc jd je ju jg jh ji jv jk jl jm jn hb bi translated"><strong class="is hj">注:</strong>通常在R中，我们可能会在各种包中找到类似select()函数的函数。有时候，当你调用这样的函数时，通常会发生冲突。在代码中，你会注意到我写了dplyr::select()。dplyr::select()表示我想使用dplyr R包中的select()函数，因为在MASS包中也可以找到select()函数。在MASS包中，select()的功能不同于使用名称或类型选择列。</p></blockquote><p id="7f74" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">因此，可能会有这样的情况，您需要使用package name::function name显式声明可以找到函数的包。事实上，你在R学习中很有可能会看到这样的代码。</p><p id="1362" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">上面代码的结果如下所示:</p><figure class="la lb lc ld fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es np"><img src="../Images/9ad8b449e77d40dccb7983e32cd66870.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DU53_n2bbn0WWUc3sWj8KQ.png"/></div></div></figure><p id="544f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">上面的输出类似于我们之前看到的结果。唯一的区别是我们有四列而不是九列，因为我们选择了四列。这里最后要注意的是，select()函数将按照您在select()函数中指定列的顺序返回结果。</p><h1 id="81d6" class="jw jx hi bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated"><strong class="ak">结论</strong></h1><p id="d795" class="pw-post-body-paragraph iq ir hi is b it ku iv iw ix kv iz ja jb kw jd je jf kx jh ji jj ky jl jm jn hb bi translated">太神奇了！你已经走了很长的路，我很高兴你走了这么远。我向你的顽强和坚持到底的决心致敬。我相信你花时间学习这些概念是值得的，你会发现它们很有价值。</p><p id="35e6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我有一份礼物给你——我已经上传了完整的R脚本到GitHub库<a class="ae jo" href="https://github.com/Predicare1/Connecting-RStudio-to-SQL-databases/blob/main/connect-RStudio-to-MySQL.R" rel="noopener ugc nofollow" target="_blank">这里</a>。这个脚本减轻了您编写代码的压力，您可以快速运行代码。当然，要使用这个脚本，您需要调整脚本，比如更改数据库名、表名等等。</p><p id="9889" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">此外，在创建到数据库的连接之后，您可以做许多其他事情。您可以从RStudio更新数据库中的表或向表中添加新记录。本文为您提供了最大化RStudio和SQL功能的第一步，也是关键的一步。在这里，您可以阅读软件包和函数的文档，以便对从RStudio连接到的数据库执行不同的操作。</p><p id="e89f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你喜欢这篇文章，请在评论区留下你的评论，与他人分享这篇文章。如果你能点击“鼓掌”图标(最多允许50次鼓掌)，这将对我意义重大。</p><p id="0a37" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">作为Coursera Guided Project Network的一名基于项目的课程讲师，我教授过一些关于使用R的课程，尤其是R tidyverse系列包，包括dplyr包。你可以点击<a class="ae jo" href="https://www.coursera.org/instructor/arimoro-olayinka" rel="noopener ugc nofollow" target="_blank">这里</a>查看这些课程。谢谢大家！下次见！</p></div></div>    
</body>
</html>