<html>
<head>
<title>How to find the correlation between continuous variables and visualise it using python?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何找到连续变量之间的相关性，并用python可视化？</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/how-to-find-the-correlation-between-continuous-variables-and-visualise-it-using-python-7faf5b028ae0?source=collection_archive---------10-----------------------#2021-06-08">https://medium.com/geekculture/how-to-find-the-correlation-between-continuous-variables-and-visualise-it-using-python-7faf5b028ae0?source=collection_archive---------10-----------------------#2021-06-08</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="5e61" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">特征选择是建立一个好的机器学习模型的重要步骤，帮助我们选择这些特征的技术之一是检查数据集不同特征之间的相关性。在本文中，我们将讨论以下内容:</p><ol class=""><li id="be5e" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">什么是皮尔逊相关系数？</li><li id="ca12" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">如何找到一个数据集中连续变量之间的相关性？</li><li id="bc48" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">如何观想这种关联？</li></ol><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="er es jr"><img src="../Images/acc54a7d8ecd6d8701a100ee579e4817.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*acND2Kvqlq860Xa8z5zBEw.png"/></div></div></figure><h2 id="7ce1" class="kd ke hi bd kf kg kh ki kj kk kl km kn iq ko kp kq iu kr ks kt iy ku kv kw kx bi translated"><strong class="ak">什么是皮尔逊相关系数？</strong></h2><p id="93ce" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi translated"><strong class="ih hj">皮尔逊相关系数</strong>基本上是用来找出两个连续变量之间线性关系的强度，用<strong class="ih hj"> r </strong>来表示。计算相关系数的数学公式如下:</p><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="er es ld"><img src="../Images/a5488de9ab0bd2c7a06757a7e81d93a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_3Y6j6tZWekQjAn6dMNrWg.png"/></div></div><figcaption class="le lf et er es lg lh bd b be z dx">Pearson Correlation Formula (Fig 1)</figcaption></figure><p id="5426" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该相关系数的值范围从<strong class="ih hj"> -1到1 </strong>，其中1表示正相关图(2)，0表示不相关图(3)，而-1表示两个变量之间的负相关图(4)。</p><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="er es li"><img src="../Images/c986f0be6ebe96c3d737f1596c6127db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dLeIBhU_bTrUKbQZynxkgg.png"/></div></div><figcaption class="le lf et er es lg lh bd b be z dx">Different Types of Correlations</figcaption></figure><p id="0854" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">需要注意的是<strong class="ih hj">皮尔逊相关只对连续数据</strong>有效，对分类数据无效，对于分类数据，我们必须使用一种叫做<a class="ae lj" href="https://en.wikipedia.org/wiki/Chi-squared_test" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">卡方检验</strong> </a>的检验，我们将在后面的博客中讨论。</p><h2 id="a34b" class="kd ke hi bd kf kg kh ki kj kk kl km kn iq ko kp kq iu kr ks kt iy ku kv kw kx bi translated"><strong class="ak">如何找到数据集中连续变量之间的相关性？</strong></h2><p id="89ae" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi translated">现在，您已经了解了什么是皮尔逊相关系数，我们现在可以继续在python中实际找出这个系数值。要找到这个相关系数有两种方法，要么使用<strong class="ih hj"> Pandas </strong>要么使用<strong class="ih hj"> SciPy </strong>库，我们将看看这两种方法。</p><p id="3599" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">例如，我考虑了4个随机初始化的数据列，并将找出所有四列之间的相关性。下面是找出相关系数的代码实现:</p><h2 id="f21c" class="kd ke hi bd kf kg kh ki kj kk kl km kn iq ko kp kq iu kr ks kt iy ku kv kw kx bi translated"><strong class="ak">使用SciPy: </strong></h2><p id="f96b" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi translated">当您想要计算较少列的相关性时，最好使用<a class="ae lj" href="https://docs.scipy.org/doc/scipy-0.14.0/reference/generated/scipy.stats.pearsonr.html" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj">stats . Pearson r()</strong></a>。</p><pre class="js jt ju jv fd lk ll lm ln aw lo bi"><span id="c82b" class="kd ke hi ll b fi lp lq l lr ls">import scipy.stats as stats<br/>import numpy as np</span><span id="4e87" class="kd ke hi ll b fi lt lq l lr ls"># initialise random data points<br/>data_1 = np.random.randn(1, 20)<br/>data_2 = np.random.randn(1, 20)</span><span id="7a9e" class="kd ke hi ll b fi lt lq l lr ls"># The stats.pearsonr() returns 2 values the correlation coefficient and the p-value<br/>r, p_value = stats.pearsonr(data_1[0], data_2[0])<br/>print(f"Correlation coefficient of data_1 and data_2 = {r}")</span></pre><h2 id="82f3" class="kd ke hi bd kf kg kh ki kj kk kl km kn iq ko kp kq iu kr ks kt iy ku kv kw kx bi translated"><strong class="ak">使用熊猫数据帧:</strong></h2><p id="e1e9" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi translated">熊猫有一个内置功能叫做<a class="ae lj" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.corr.html" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">。corr() </strong></a></p><pre class="js jt ju jv fd lk ll lm ln aw lo bi"><span id="f6e9" class="kd ke hi ll b fi lp lq l lr ls">import numpy as np<br/>import pandas as pd</span><span id="60fa" class="kd ke hi ll b fi lt lq l lr ls"># initialise random data points<br/>data_1 = np.random.randn(1, 20)<br/>data_2 = np.random.randn(1, 20)<br/>data_3 = np.random.randn(1, 20)<br/>data_4 = np.random.randn(1, 20)</span><span id="6bf2" class="kd ke hi ll b fi lt lq l lr ls">data = {"Column 1":data_1[0], <br/>        "Column 2":data_2[0], <br/>        "Column 3":data_3[0], <br/>        "Column 4":data_4[0]}</span><span id="320f" class="kd ke hi ll b fi lt lq l lr ls"># Initialise a dataframe with all the columns<br/>df = pd.DataFrame(data)</span><span id="3107" class="kd ke hi ll b fi lt lq l lr ls"># .corr() can calculate 'pearson', 'kendall', 'spearman' correlations.<br/>print(df.corr(method='pearson'))</span></pre><p id="cd51" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了更好地理解，我建议您自己尝试实现这些代码。</p><h2 id="c72f" class="kd ke hi bd kf kg kh ki kj kk kl km kn iq ko kp kq iu kr ks kt iy ku kv kw kx bi translated">如何使用热图来可视化这种关联？</h2><p id="055b" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi translated">既然我们已经发现了这些相关值，如果我们能够将其可视化，以便我们可以轻松地解释结果，那就太好了。为此，我们将使用<strong class="ih hj"> Seaborn </strong>库并绘制<strong class="ih hj">热图</strong>。该热图的每个方框都代表网格中相应列之间的相关系数。</p><pre class="js jt ju jv fd lk ll lm ln aw lo bi"><span id="6301" class="kd ke hi ll b fi lp lq l lr ls">import seaborn as sns<br/>import matplotlib.pyplot as plt</span><span id="16ec" class="kd ke hi ll b fi lt lq l lr ls">fig = plt.figure(figsize=(15,10))<br/>sns.heatmap(df.corr(method='pearson'), annot = True, cmap="Blues")<br/>plt.title("Correlation Heatmap")</span></pre><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="er es lu"><img src="../Images/79bdcd7214d3864a4de546d3eb8cbaef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W6faQZ7cMBXwheShL2dMtw.png"/></div></div><figcaption class="le lf et er es lg lh bd b be z dx">Fig 5.</figcaption></figure><p id="cd07" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">热图的对角线将始终显示<strong class="ih hj">值= 1 </strong>，因为它给出了列与其自身的相关性，考虑到列是相同的，该相关性应为1。因此，现在基于这些值，我们可以找出高度相关的列，并决定要选择的特性。</p><p id="6918" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是热图不仅仅告诉我们独立变量和目标变量之间的相关性，它还显示了独立变量本身之间是否存在任何显著的相关性，这被称为<strong class="ih hj">多重共线性</strong>，这也是多元线性回归期间特征选择的重要部分，我们将在接下来的博客中讨论。到那时你可以在这里 阅读这个话题<a class="ae lj" href="https://en.wikipedia.org/wiki/Multicollinearity" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">。</strong></a></p><h2 id="a76d" class="kd ke hi bd kf kg kh ki kj kk kl km kn iq ko kp kq iu kr ks kt iy ku kv kw kx bi translated"><strong class="ak">结论</strong></h2><p id="b918" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi translated">我们现在已经理解了什么是相关性。如何在python中找出相关性？以及如何将它可视化以便更好地理解结果。这一个就这么多了！敬请关注即将到来的博客，如果你有任何建议或疑问，请在下面评论或给我发邮件。也请在<a class="ae lj" href="https://www.linkedin.com/in/yashowardhan-shinde-1636971b1/" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj">LinkedIn</strong></a><strong class="ih hj">上与我联系。</strong>祝大家学习愉快！</p><p id="8ccb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">邮件ID:yashowardhanshinde@gmail.com</strong></p></div></div>    
</body>
</html>