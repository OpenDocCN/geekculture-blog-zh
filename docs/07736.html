<html>
<head>
<title>Software Design Pattern #4: Lazy Initialization</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">软件设计模式#4:惰性初始化</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/software-design-pattern-4-lazy-initialization-35f606f1ddf3?source=collection_archive---------23-----------------------#2021-09-28">https://medium.com/geekculture/software-design-pattern-4-lazy-initialization-35f606f1ddf3?source=collection_archive---------23-----------------------#2021-09-28</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="e841" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">设计模式是可重用的模板，帮助我们使用最佳实践解决软件设计问题。通过这种方式，它们帮助我们使用更易于维护、理解、重用和测试的代码来构建应用程序。</p><h1 id="1449" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">逃离速度实验室</h1><p id="bfab" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">你可以在我们的网站上找到我们所有的文章、课程和教程:<br/><a class="ae kg" href="https://www.evlabs.io/" rel="noopener ugc nofollow" target="_blank">https://www . ev labs . io</a></p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es kh"><img src="../Images/3528ae510f540e7781d1eff2ef2b7bfa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vAcP49KomXZMfQOJdr6axw.png"/></div></div></figure><h1 id="5c63" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">这个图案是干什么用的？</h1><blockquote class="kt ku kv"><p id="f5e2" class="if ig kw ih b ii ij ik il im in io ip kx ir is it ky iv iw ix kz iz ja jb jc hb bi translated">这是一种策略，将对象的创建、值的计算或任何其他计算量大的过程延迟到第一次使用它的时候。</p></blockquote><p id="0372" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们回到我们在本系列的前几篇文章中看到的社交网络的例子。我们想添加一个功能，显示我们的联系人和这些联系人的联系(喜欢，评论，视频，照片等)的活动。收集这些信息是一个相当昂贵的过程，在这个过程中，我们必须遍历我们的联系人列表，并保存他们每个人的活动，以及他们所有联系人的活动。因此，该功能消耗大量资源，包括内存和计算时间。</p><p id="db0d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一种选择是在启动应用程序时建立这个活动列表，但这将增加用户在加载屏幕上花费的时间。这是一个非常糟糕的想法，因为需要几秒钟以上加载的应用程序通常会很快被卸载。此外，用户在会话期间可能不会使用此功能。</p><p id="1f09" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">解决方案</strong>:在用户需要的时候创建活动列表。</p><h1 id="2fe7" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">它是如何工作的？</h1><p id="54a3" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">我们第一次需要昂贵资源的时候就是我们创造它的时候。在我们的例子中，该资源是联系人活动列表，我们将把它保存为用户配置文件中的一个属性。因此，当创建概要文件时，属性“contact_list”将被初始化为<em class="kw"> None </em>(在其他语言中为<em class="kw"> null </em>)。</p><p id="8669" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Profile类中提供对该活动列表的访问的方法将包含一个<em class="kw"> if </em>语句，在该语句中我们将检查该列表是否已经被创建。如果它已经被创建了，因为它以前被使用过，我们将简单地返回那个列表。万一这个列表不存在，因为它是第一次被使用，我们将创建它并返回它。</p><p id="f2e7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以将列表创建逻辑封装在一个辅助的私有方法中，如下例所示:</p><pre class="ki kj kk kl fd la lb lc ld aw le bi"><span id="68a3" class="lf je hi lb b fi lg lh l li lj"><strong class="lb hj">class</strong> <strong class="lb hj">Profile</strong>:    </span><span id="4281" class="lf je hi lb b fi lk lh l li lj"><strong class="lb hj">    def</strong> <strong class="lb hj">__init__</strong>(self):<br/>        self.contact_activity = None<br/>        ...<strong class="lb hj">    </strong></span><span id="3555" class="lf je hi lb b fi lk lh l li lj"><strong class="lb hj">    def</strong> <strong class="lb hj">get_contact_activity</strong>(self):<br/>        <strong class="lb hj">if</strong> <strong class="lb hj">not</strong> self.contact_activity:<br/>            self.contact_activity = self._build_contact_activity()<br/>        <strong class="lb hj">return</strong> self.contact_activity    <br/>    <br/>    <strong class="lb hj">def</strong> <strong class="lb hj">_build_contact_activity</strong>(self):<br/>        ...</span></pre><p id="167f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在应用程序中，当我们创建个人资料时，不会生成列表。如果用户不需要，则不会随时创建。另一方面，如果在某个时候需要它，将创建列表:</p><pre class="ki kj kk kl fd la lb lc ld aw le bi"><span id="30b3" class="lf je hi lb b fi lg lh l li lj"><strong class="lb hj">if</strong> __name__ == "__main__":<br/>    profile = Profile()<br/>    ...    </span><span id="111f" class="lf je hi lb b fi lk lh l li lj">    # When we need the activity list for the first time.<br/>    contact_activity = profile.get_contact_activity()</span></pre><h1 id="a4ac" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">利益</h1><ul class=""><li id="4499" class="ll lm hi ih b ii kb im kc iq ln iu lo iy lp jc lq lr ls lt bi translated">通过将复杂的计算分散到不同的时间来加快启动时间。</li><li id="2f2b" class="ll lm hi ih b ii lu im lv iq lw iu lx iy ly jc lq lr ls lt bi translated">除非必要，否则避免执行不经常执行的操作。</li></ul></div></div>    
</body>
</html>