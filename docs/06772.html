<html>
<head>
<title>Email and Password Based Authentication with Expo and Firebase Part 1: Project Setup</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">基于电子邮件和密码的Expo和Firebase认证第1部分:项目设置</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/email-and-password-based-authentication-with-expo-and-firebase-part-1-project-setup-fef4c6766cd5?source=collection_archive---------12-----------------------#2021-08-29">https://medium.com/geekculture/email-and-password-based-authentication-with-expo-and-firebase-part-1-project-setup-fef4c6766cd5?source=collection_archive---------12-----------------------#2021-08-29</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/25c88384ff1c390d6088a52e1c11ddd0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oIpvLqzJRAMVE8ZIaYlbdQ.png"/></div></div></figure><blockquote class="iq ir is"><p id="5da7" class="it iu iv iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这是使用Expo和Firebase展示基于电子邮件和密码的认证的系列博客文章的1/3。</p><p id="146b" class="it iu iv iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">第1部分:项目设置(您在这里)</p><p id="0669" class="it iu iv iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><a class="ae js" rel="noopener" href="/@diegocasmo/email-and-password-based-authentication-with-expo-and-firebase-part-2-sign-up-email-verification-60cc7d1f3ba6">第二部分:注册、电子邮件验证和退出</a></p><p id="ded0" class="it iu iv iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><a class="ae js" rel="noopener" href="/@diegocasmo/email-and-password-based-authentication-with-expo-and-firebase-part-3-sign-in-forgot-password-93e9958792f3">第3部分:登录，忘记密码，更新密码</a></p></blockquote><p id="55e5" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">一段时间以来，我一直使用Firebase作为我的首选工具，在与Expo合作时快速设置基于电子邮件和密码的认证流程。虽然有很多其他的解决方案，但我还没有找到一个能像Firebase那样让我快速上手的。</p><p id="ca06" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">这一系列博客文章的目标是提供一个简单的例子，说明如何使用基于电子邮件和密码的认证来设置Expo和Firebase。完成后，这个应用程序将支持注册，登录，退出，电子邮件验证，忘记密码，更新密码。这一系列博客文章的所有代码都可以在Github库上找到。让我们直接开始吧。</p><h1 id="1236" class="jw jx hi bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">创建新的世博会应用程序</h1><p id="4d2a" class="pw-post-body-paragraph it iu hi iw b ix ku iz ja jb kv jd je jt kw jh ji ju kx jl jm jv ky jp jq jr hb bi translated">如果还没有完成，运行<code class="du kz la lb lc b">npm install --global expo-cli</code>安装Expo CLI，这样就可以创建应用程序了。接下来，通过运行<code class="du kz la lb lc b">expo init --npm</code>创建一个新的应用程序，并选择空白模板。现在可以使用<code class="du kz la lb lc b">npm start</code>来提供应用程序，并在本地或您喜欢的设备/模拟器中打开。为了简单起见，我将通过<a class="ae js" href="https://docs.expo.dev/workflow/web/" rel="noopener ugc nofollow" target="_blank"> React Native for web </a>来运行它，它与Expo SDK一起开箱即用。为此，只需在运行Expo CLI的终端中按下<code class="du kz la lb lc b">w</code>。</p><figure class="le lf lg lh fd ij er es paragraph-image"><div class="er es ld"><img src="../Images/8a12da04b63470070089f1bb75df5ede.png" data-original-src="https://miro.medium.com/v2/resize:fit:1372/format:webp/0*Vq7IVa-pcL_1b7rY.png"/></div><figcaption class="li lj et er es lk ll bd b be z dx"><em class="lm">Expo CLI options to open an app.</em></figcaption></figure><p id="1809" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">假设一切顺利，新创建的世博会应用程序现在应该可以通过<code class="du kz la lb lc b">http://localhost:19006/</code>的网络浏览器访问，在那里它应该显示一条熟悉的欢迎消息。</p><h1 id="81fb" class="jw jx hi bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">创建一个Firebase项目</h1><p id="4143" class="pw-post-body-paragraph it iu hi iw b ix ku iz ja jb kv jd je jt kw jh ji ju kx jl jm jv ky jp jq jr hb bi translated">导航到您的Firebase帐户并创建一个新项目。一旦项目被创建，点击侧边栏“认证”菜单项，并启用“电子邮件/密码”提供者。</p><figure class="le lf lg lh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ln"><img src="../Images/2aeaf7f0dec6035ed451dac80d8750d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*44FoNXgU7uYZYt6Z.png"/></div></div><figcaption class="li lj et er es lk ll bd b be z dx"><em class="lm">“Email/Password” Firebase authentication provider enabled.</em></figcaption></figure><p id="bac3" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">接下来，转到项目设置并为项目注册一个web应用程序。</p><figure class="le lf lg lh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ln"><img src="../Images/102bcded3d867a2ecb3245af6855ea81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*G_n3GdXYeD5xStXz.png"/></div></div><figcaption class="li lj et er es lk ll bd b be z dx"><em class="lm">Select the web app platform to register the web app.</em></figcaption></figure><p id="56e9" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">最后，将Firebase SDK添加到web应用程序中(这个配置稍后将用于初始化Expo项目中的Firebase应用程序)。</p><figure class="le lf lg lh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ln"><img src="../Images/96568088a2d8ca7d34ebdf9b6a17a034.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*KNLo_V1gU04Np5fg.png"/></div></div><figcaption class="li lj et er es lk ll bd b be z dx"><em class="lm">Firebase SDK configuration example.</em></figcaption></figure><h1 id="66fa" class="jw jx hi bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">配置Expo和Firebase</h1><p id="bb53" class="pw-post-body-paragraph it iu hi iw b ix ku iz ja jb kv jd je jt kw jh ji ju kx jl jm jv ky jp jq jr hb bi translated">是时候使用Expo app中的Firebase项目配置了。为此，首先通过运行<code class="du kz la lb lc b">expo install firebase</code>安装Firebase SDK。另外，通过运行<code class="du kz la lb lc b">npm install react-native-dotenv</code>安装<a class="ae js" href="https://github.com/goatandsheep/react-native-dotenv" rel="noopener ugc nofollow" target="_blank"> react-native-dotenv </a>，这样环境变量就可以通过<code class="du kz la lb lc b">.env</code>文件导入到app中。接下来，将<code class="du kz la lb lc b">module:react-native-dotenv</code>插件添加到默认的Expo <code class="du kz la lb lc b">babel.config.js</code>文件中。</p><pre class="le lf lg lh fd lo lc lp lq aw lr bi"><span id="68ee" class="ls jx hi lc b fi lt lu l lv lw">module.exports = function(api) {<br/>  api.cache(true);<br/>  return {<br/>    presets: ['babel-preset-expo'],<br/>    plugins: [<br/>      ['module:react-native-dotenv'], // Add this<br/>    ],<br/>  };<br/>};</span></pre><p id="d270" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated"><code class="du kz la lb lc b"><em class="iv">babel.config.js</em></code> <em class="iv">配置文件。</em></p><p id="7fbd" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">通过运行<code class="du kz la lb lc b">touch .env</code>在项目的根目录下创建一个<code class="du kz la lb lc b">.env</code>文件，并用正确的Firebase SDK配置细节填充它。我给它们加上了前缀<code class="du kz la lb lc b">FIREBASE_</code>，这样它们的用途就很清楚了。</p><pre class="le lf lg lh fd lo lc lp lq aw lr bi"><span id="8bac" class="ls jx hi lc b fi lt lu l lv lw">FIREBASE_API_KEY=<br/>FIREBASE_AUTH_DOMAIN=<br/>FIREBASE_PROJECT_ID=<br/>FIREBASE_STORAGE_BUCKET=<br/>FIREBASE_MESSAGING_SENDER_ID=<br/>FIREBASE_APP_ID=</span></pre><p id="61c1" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated"><em class="iv">一个</em> <code class="du kz la lb lc b"><em class="iv">.env</em></code> <em class="iv">文件的例子。用Firebase SDK web app项目配置填充它。</em></p><p id="3bb5" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">通过运行<code class="du kz la lb lc b">mkdir -p src/api</code>创建应用程序的API目录，并用<code class="du kz la lb lc b">touch src/api/index.js</code>在其中创建一个索引文件。这是Firebase应用程序初始化的地方。为此，请使用环境变量。</p><pre class="le lf lg lh fd lo lc lp lq aw lr bi"><span id="5f9e" class="ls jx hi lc b fi lt lu l lv lw">import firebase from 'firebase';<br/>import {<br/>  FIREBASE_API_KEY,<br/>  FIREBASE_AUTH_DOMAIN,<br/>  FIREBASE_PROJECT_ID,<br/>  FIREBASE_STORAGE_BUCKET,<br/>  FIREBASE_MESSAGING_SENDER_ID,<br/>  FIREBASE_APP_ID,<br/>} from '@env'<br/><br/>const firebaseConfig = {<br/>  apiKey: FIREBASE_API_KEY,<br/>  authDomain: FIREBASE_AUTH_DOMAIN,<br/>  projectId: FIREBASE_PROJECT_ID,<br/>  storageBucket: FIREBASE_STORAGE_BUCKET,<br/>  messagingSenderId: FIREBASE_MESSAGING_SENDER_ID,<br/>  appId: FIREBASE_APP_ID,<br/>};<br/><br/>firebase.initializeApp(firebaseConfig);</span></pre><p id="aa82" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">最后，将该文件导入到<code class="du kz la lb lc b">App.js</code>(位于根目录下):</p><pre class="le lf lg lh fd lo lc lp lq aw lr bi"><span id="d201" class="ls jx hi lc b fi lt lu l lv lw">import './src/api'; // Import the Firebase <!-- -->API<!-- --> configuration file<br/>import { StatusBar } from 'expo-status-bar';<br/>import React from 'react';<br/>import { StyleSheet, Text, View } from 'react-native';<br/><br/>// Rest of the file omitted...</span></pre><h1 id="abbd" class="jw jx hi bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">应用程序结构和依赖关系</h1><p id="db68" class="pw-post-body-paragraph it iu hi iw b ix ku iz ja jb kv jd je jt kw jh ji ju kx jl jm jv ky jp jq jr hb bi translated">为了简化应用程序，我将使用下面的库(每个库下面都有安装说明)。请注意，这些库在技术上都不是必需的，但是它们将简化启动和运行。</p><ul class=""><li id="2cfb" class="lx ly hi iw b ix iy jb jc jt lz ju ma jv mb jr mc md me mf bi translated"><a class="ae js" href="https://docs.nativebase.io/install-expo" rel="noopener ugc nofollow" target="_blank">Native base</a>:React Native&amp;Web的移动优先、可访问组件。</li></ul><pre class="le lf lg lh fd lo lc lp lq aw lr bi"><span id="b186" class="ls jx hi lc b fi lt lu l lv lw">npm install native-base styled-components styled-system<br/>expo install react-native-svg<br/>expo install react-native-safe-area-context</span></pre><ul class=""><li id="de2d" class="lx ly hi iw b ix iy jb jc jt lz ju ma jv mb jr mc md me mf bi translated">Formik :创建表单，管理并验证它们的状态。</li></ul><pre class="le lf lg lh fd lo lc lp lq aw lr bi"><span id="514e" class="ls jx hi lc b fi lt lu l lv lw">npm install formik</span></pre><ul class=""><li id="dbdb" class="lx ly hi iw b ix iy jb jc jt lz ju ma jv mb jr mc md me mf bi translated"><a class="ae js" href="https://github.com/jquense/yup#install" rel="noopener ugc nofollow" target="_blank">是</a>:用于值解析和验证的模式构建器(<a class="ae js" href="https://formik.org/docs/overview#complementary-packages" rel="noopener ugc nofollow" target="_blank">与Formik </a>完美集成)。</li></ul><pre class="le lf lg lh fd lo lc lp lq aw lr bi"><span id="54e9" class="ls jx hi lc b fi lt lu l lv lw">npm install yup</span></pre><ul class=""><li id="d81d" class="lx ly hi iw b ix iy jb jc jt lz ju ma jv mb jr mc md me mf bi translated"><a class="ae js" href="https://reactnavigation.org/docs/getting-started/#installation" rel="noopener ugc nofollow" target="_blank"> React导航</a>:Expo和React原生应用的路由导航。</li></ul><pre class="le lf lg lh fd lo lc lp lq aw lr bi"><span id="d44b" class="ls jx hi lc b fi lt lu l lv lw">npm install @react-navigation/native<br/>expo install react-native-screens react-native-safe-area-context</span></pre><p id="d8f6" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">现在让我们创建“应用程序结构”。应用程序结构将使用“基于功能”的方法，其中每个功能(即注册、电子邮件验证等)将包含在一个目录中。</p><pre class="le lf lg lh fd lo lc lp lq aw lr bi"><span id="a0ae" class="ls jx hi lc b fi lt lu l lv lw">src/<br/>  Root.js<br/>  api/ # API-only methods (Firebase)<br/>  components/ # Re-usable components (among many features)<br/>  features/<br/>    sign-up/<br/>      components/ # Components used by the sign-up feature only<br/>      screens/ # Container type component(s) which setup layout/structure and higher level logic</span></pre><p id="442a" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">第一步是创建<code class="du kz la lb lc b">Root.js</code>文件。为此，通过运行<code class="du kz la lb lc b">cp App.js src/Root.js</code>复制<code class="du kz la lb lc b">App.js</code>，然后移除<code class="du kz la lb lc b">App.js</code> ( <code class="du kz la lb lc b">rm App.js</code>，并更新<code class="du kz la lb lc b">package.json</code>文件，使<code class="du kz la lb lc b">main</code>指向<code class="du kz la lb lc b">src/Root.js</code>:</p><pre class="le lf lg lh fd lo lc lp lq aw lr bi"><span id="dc68" class="ls jx hi lc b fi lt lu l lv lw">"main": "src/Root.js"</span></pre><p id="f720" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">接下来，替换<code class="du kz la lb lc b">Root.js</code>的内容，以便它导入Firebase API，设置<code class="du kz la lb lc b">native-base</code>提供者，并注册根Expo组件。</p><pre class="le lf lg lh fd lo lc lp lq aw lr bi"><span id="f8a5" class="ls jx hi lc b fi lt lu l lv lw">import './api';<br/>import { registerRootComponent } from 'expo';<br/>import React from 'react';<br/>import { StatusBar } from 'expo-status-bar';<br/>import { NativeBaseProvider, Box } from 'native-base';<br/><br/>const Root = () =&gt; (<br/>  &lt;NativeBaseProvider&gt;<br/>    &lt;Box&gt;Hello world&lt;/Box&gt;<br/>    &lt;StatusBar style="auto" /&gt;<br/>  &lt;/NativeBaseProvider&gt;<br/>);<br/><br/>registerRootComponent(Root);</span></pre><p id="3489" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">通过运行<code class="du kz la lb lc b">npm start</code>再次启动世博服务器，确保“Hello world”消息正确显示。</p><h1 id="9876" class="jw jx hi bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">重新封顶</h1><p id="4562" class="pw-post-body-paragraph it iu hi iw b ix ku iz ja jb kv jd je jt kw jh ji ju kx jl jm jv ky jp jq jr hb bi translated">在这篇博文中，我们回顾了Expo和Firebase的设置，目标是实现一个基于电子邮件和密码的认证系统。此外，安装和设置了一组公共库，以便更容易地实现应用程序需要的即将到来的功能。在下一篇博文中，我们将实现注册、电子邮件验证和注销功能。</p></div></div>    
</body>
</html>