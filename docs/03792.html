<html>
<head>
<title>Connecting the dots: Application general layers</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">连接点:应用程序通用层</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/connecting-the-dots-application-general-layers-e1db42aa388b?source=collection_archive---------41-----------------------#2021-06-15">https://medium.com/geekculture/connecting-the-dots-application-general-layers-e1db42aa388b?source=collection_archive---------41-----------------------#2021-06-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="c11e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你听过多少次“应用程序逻辑将存在于服务层”或者“这应该由前端还是后端来处理？”这两个句子在开发人员的日常工作中很常见，但是这意味着什么呢？在这篇文章中，我将尝试与你分享我经验中最常见的层的含义/用法/案例。</p><h2 id="9ae1" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated">层，什么意思？</h2><p id="f3aa" class="pw-post-body-paragraph if ig hi ih b ii jy ik il im jz io ip iq ka is it iu kb iw ix iy kc ja jb jc hb bi translated">我们用这个词来描述应用程序内部的边界，边界是什么？我们的鲍勃叔叔说:</p><blockquote class="kd ke kf"><p id="7992" class="if ig kg ih b ii ij ik il im in io ip kh ir is it ki iv iw ix kj iz ja jb jc hb bi translated">软件架构是一种画线的艺术，我称之为边界，这些边界将软件元素彼此分开，并限制一边的元素了解另一边的元素。</p><p id="5f9a" class="if ig kg ih b ii ij ik il im in io ip kh ir is it ki iv iw ix kj iz ja jb jc hb bi translated">罗伯特·c·马丁，清洁建筑。</p></blockquote><p id="c01e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，层是开发人员分组和设置边界的方式，在一个应用程序中有许多层可以一起工作，但不能混合，我们将从最常见的层开始。</p><h2 id="fd97" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated">公共层</h2><p id="a405" class="pw-post-body-paragraph if ig hi ih b ii jy ik il im jz io ip iq ka is it iu kb iw ix iy kc ja jb jc hb bi translated">有一些层总是出现在任何项目中，因为它们是公共/通用层，<strong class="ih hj">前端、后端和数据库层。</strong></p><ul class=""><li id="4542" class="kk kl hi ih b ii ij im in iq km iu kn iy ko jc kp kq kr ks bi translated"><strong class="ih hj"> <em class="kg">前端</em> </strong> <em class="kg"> : </em>简而言之，前端就是我们可以在客户端(浏览器、甚至物联网设备中的应用等)查看和与之交互的所有东西。).</li><li id="0c45" class="kk kl hi ih b ii kt im ku iq kv iu kw iy kx jc kp kq kr ks bi translated"><strong class="ih hj"> <em class="kg">后端</em> </strong> <em class="kg"> : P </em>提供(给前端)所有我们看不见但我们知道正在发生的事情(与数据库、另一个系统、文件等的连接。)，常见的就是所谓的服务器端。</li><li id="170e" class="kk kl hi ih b ii kt im ku iq kv iu kw iy kx jc kp kq kr ks bi translated"><strong class="ih hj"> <em class="kg">数据库</em> </strong> <em class="kg"> : </em>这一层是系统需要保存的所有东西都会存储的地方，始终只与后端相连。</li></ul><p id="7b82" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">那三个是最一般的布局，但是为什么呢？因为每个里面都有更多的层！这些层次应该被划分，以保持坚实的T21原则。</p></div><div class="ab cl kz la gp lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="hb hc hd he hf"><h2 id="0b34" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated">前端层</h2><p id="454a" class="pw-post-body-paragraph if ig hi ih b ii jy ik il im jz io ip iq ka is it iu kb iw ix iy kc ja jb jc hb bi translated">在API Rest成为服务器和客户端通信的标准之前，前端元素和后端调用混合在一起，当我们需要在屏幕上呈现一些新的东西时，整个页面必须自己充电并在服务器上做一些神奇的事情，然后再次加载，是的，这是黑暗的日子，但回到前端的主题，我们有三个一般的界限:</p><ul class=""><li id="e654" class="kk kl hi ih b ii ij im in iq km iu kn iy ko jc kp kq kr ks bi translated"><strong class="ih hj"> <em class="kg">业务或逻辑层</em> </strong> <em class="kg"> : </em>在这一层中，我们发现了所有不直接在客户端设备中呈现但却是必需的规则，如计算、验证和格式字符串，angular中这一层的示例如下:</li></ul><figure class="lg lh li lj fd lk"><div class="bz dy l di"><div class="ll lm l"/></div></figure><ul class=""><li id="689a" class="kk kl hi ih b ii ij im in iq km iu kn iy ko jc kp kq kr ks bi translated"><strong class="ih hj"> <em class="kg">服务或集成层:</em> </strong>这是我们放置调用另一个系统(例如通过API Rest)或与第三方库集成的代码的地方，这一层有许多将在整个系统中重用的代码，这是react中的一个例子:</li></ul><figure class="lg lh li lj fd lk"><div class="bz dy l di"><div class="ll lm l"/></div></figure><ul class=""><li id="ac46" class="kk kl hi ih b ii ij im in iq km iu kn iy ko jc kp kq kr ks bi translated"><strong class="ih hj"> <em class="kg"> UI或表示层:</em> </strong>我们在客户端(浏览器、移动设备等)看到的所有东西。)是在这种布局中构建的，一个常见的ui代码外观示例是一个html文件:</li></ul><figure class="lg lh li lj fd lk"><div class="bz dy l di"><div class="ll lm l"/></div></figure><p id="41ad" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这三层一起用于构建一个伟大的和可伸缩的前端项目。</p></div><div class="ab cl kz la gp lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="hb hc hd he hf"><h2 id="109b" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated">后端层</h2><p id="aada" class="pw-post-body-paragraph if ig hi ih b ii jy ik il im jz io ip iq ka is it iu kb iw ix iy kc ja jb jc hb bi translated">在我们的时代之前，monolith(在这种情况下是前端/后端)应用程序很常见，这类应用程序高度依赖，并且很难部署，因为您需要部署所有组件。但事情发生了变化，如今我们已经将应用与API和微服务架构分离(这是我们在此不涉及的主题)，而且在每个服务或后端项目中，我们都有不同的层来帮助我们分离内部逻辑，有些是:</p><ul class=""><li id="9e1c" class="kk kl hi ih b ii ij im in iq km iu kn iy ko jc kp kq kr ks bi translated"><strong class="ih hj"> <em class="kg">表示层:</em> </strong>负责对客户端的响应，这一层一般通过JAVA o .Net等语言中的控制器用代码表示，在Django中用serializer+View表示。这一层对于客户来说只是一扇大门，在这里是永远做不到的商业逻辑。</li></ul><figure class="lg lh li lj fd lk"><div class="bz dy l di"><div class="ll lm l"/></div></figure><ul class=""><li id="0e88" class="kk kl hi ih b ii ij im in iq km iu kn iy ko jc kp kq kr ks bi translated"><strong class="ih hj"> <em class="kg">业务层:</em> </strong>顾名思义，这一层负责完成大部分的业务逻辑，在这一层中我们进行计算、验证和转换数据，还连接持久性和服务层来检索数据并在上述操作中使用它。这方面的例子可以是Python中的中介器— Django:</li></ul><figure class="lg lh li lj fd lk"><div class="bz dy l di"><div class="ll lm l"/></div></figure><ul class=""><li id="c7a3" class="kk kl hi ih b ii ij im in iq km iu kn iy ko jc kp kq kr ks bi translated"><strong class="ih hj"> <em class="kg">服务层:</em> </strong>这可能是最模糊的一层，因为它可以处理一点逻辑，与持久层连接，并通过算法调用外部服务。这一层最重要的特点是应该完全解耦，这一层可以被注入(依赖倒置)到任何另一个文件/层中并且应该仍然工作，JAVA/Spring中这一层的一个例子:</li></ul><figure class="lg lh li lj fd lk"><div class="bz dy l di"><div class="ll lm l"/></div></figure><ul class=""><li id="17b2" class="kk kl hi ih b ii ij im in iq km iu kn iy ko jc kp kq kr ks bi translated"><strong class="ih hj"> <em class="kg">持久层:</em> </strong>这一层负责通信，从数据库中检索、保存、更新、删除对象，并且应该与数据库处理程序无关(不管是Postgresql还是MySql，其行为应该是相同的)，这一层的例子可以是Java/Hibernate中的repository + entities或Django中的model:</li></ul><figure class="lg lh li lj fd lk"><div class="bz dy l di"><div class="ll lm l"/></div></figure><h2 id="c912" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated">但是，安全性如何呢？</h2><p id="ee0f" class="pw-post-body-paragraph if ig hi ih b ii jy ik il im jz io ip iq ka is it iu kb iw ix iy kc ja jb jc hb bi translated">这是更复杂的层，因为它处于应用程序的所有阶段，可能在网络<strong class="ih hj">(代理、vpn、防火墙等)中。)</strong>在前端<strong class="ih hj">(验证码，避免DDoS的应用作为云前端)</strong>在层间<strong class="ih hj">(头，TLS和HTTPS) </strong>后端<strong class="ih hj">(净化输入，正确的服务器权限，JWT安全，会话，CLRF，sql注入预防</strong>)和数据库<strong class="ih hj">(加密，哈希和用户权限)，</strong>这是因为这一层需要另一个帖子或一系列帖子来保护你的应用。</p></div></div>    
</body>
</html>