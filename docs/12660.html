<html>
<head>
<title>Const vs Object.freeze in Javascript Object and Array</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Javascript对象和数组中的Const vs Object.freeze</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/const-vs-object-freeze-in-javascript-905c45b95805?source=collection_archive---------12-----------------------#2022-05-25">https://medium.com/geekculture/const-vs-object-freeze-in-javascript-905c45b95805?source=collection_archive---------12-----------------------#2022-05-25</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/275649f6637606647a3850fc91d4d854.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x9heLSIbfzV_x0-oF7ISZg.jpeg"/></div></div></figure><p id="aabe" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Const创建一个值的只读引用，即分配给const变量的值不能被<strong class="is hj">重新分配</strong>。</p><h2 id="cbae" class="jo jp hi bd jq jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki bi translated">但是等等…这里有一个陷阱！</h2><p id="f039" class="pw-post-body-paragraph iq ir hi is b it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj kn jl jm jn hb bi translated">现在，我们在上面读到的适用于原始数据类型，即字符串、数字、布尔、空、未定义，但这不适用于非原始数据类型，如对象和数组。</p><p id="6094" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们通过一个简单的例子来理解这一点，我们将为每种数据类型创建一个const类型的变量，看看我们是否能够改变它的值。</p><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ko"><img src="../Images/5713846824258fbfb135a6847c243b20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kCZEIOif4hFIJaibQP3WSg.png"/></div></div></figure><p id="9783" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在让我们看看当我们试图改变每个原始数据类型变量的值时会发生什么</p><figure class="kp kq kr ks fd ij er es paragraph-image"><div class="er es kt"><img src="../Images/79aa9cc701f6aee1f1bbc8fafd0901d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:780/format:webp/1*j9hUIQOXJggEqeby9rd3xw.png"/></div></figure><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ku"><img src="../Images/e1dc54122925f67ae102a7d6a7d46c3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iESmvfG2mLw9HayoDienzg.png"/></div></div></figure><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kv"><img src="../Images/67a79b92dae9856ec907d53706188278.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GXkT4wmzfHy4kVmTmGef7g.png"/></div></div></figure><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kw"><img src="../Images/ff72359f0e4e15a37bad3f35435a3113.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-CIgO4n2Oti0G7AjYsIPxQ.png"/></div></div></figure><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kx"><img src="../Images/25d16d81976a7a40f8ca2e76001efc9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_k-Z1ZA7zdZJtvlNi67kRQ.png"/></div></div></figure><p id="22a3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">我们得到一个错误，指出不能给常量变量赋值，我们完全同意</strong></p><p id="97a4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">让我们尝试同样的对象:</strong></p><p id="9c5a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果我们直接将const对象重新赋值给其他对象，那么显然它不允许我们这样做，我们会得到相同的赋值给const not allowed错误。</p><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ky"><img src="../Images/a979e62fd8e707bdaac29e4848edcd57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ea1OOsq7xUtw-mPgpDgOaA.png"/></div></div></figure><p id="9abe" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">控制台输出:</strong></p><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kz"><img src="../Images/bbbaa627ba730fdf8c751081d41d7726.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aRR7uQGlRvQYv7yfUbTmJA.png"/></div></div></figure><p id="1bfe" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">但是当我们对一个对象的属性和一个数组的元素做一些改变时会发生什么呢？让我们尝试一下，我们更改了personDetails对象的名称和年龄值，并控制该对象，即使该对象是const类型，我们也能够更改该对象的值。</p><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ky"><img src="../Images/217851fb4ccd41cca55295c151d2d3cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B2o1mSiSof3GvggD-FJOUQ.png"/></div></div></figure><p id="3ca5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">控制台输出:</strong></p><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kx"><img src="../Images/a17d34a011a2c29f39aa2792fe3693f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hj74rjwq3n8z9x6RUbstNg.png"/></div></div></figure><h2 id="8aec" class="jo jp hi bd jq jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki bi translated"><strong class="ak">这里发生了什么？</strong></h2><p id="e55b" class="pw-post-body-paragraph iq ir hi is b it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj kn jl jm jn hb bi translated">根据const的定义，我们不能给const变量重新赋值，但是在object &amp; array类型的情况下，当你添加/改变一个对象或数组时，你不用重新赋值或重新声明常量，它已经被声明和赋值了，你只是改变了键值，并在这里添加了一个新元素。</p><h2 id="ed34" class="jo jp hi bd jq jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki bi translated">使用Object.freeze禁止对象和数组中的更改</h2><p id="fefe" class="pw-post-body-paragraph iq ir hi is b it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj kn jl jm jn hb bi translated">如果我们希望我们的对象和数组值不变，那么我们应该使用<strong class="is hj"><em class="la">Object . freeze(your-Object)来冻结对象。</em>T15】</strong></p><p id="a339" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">因此，在我们的代码中，如果我们使用Object.freeze(personDetails)并试图更改对象的值，我们将无法这样做</p><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lb"><img src="../Images/81b4de3012310098d3d41c6a2b92fedf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xxLWj9_dhegNKwtPpGZFQA.png"/></div></div></figure><p id="f022" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，当我们看到控制台语句的输出时，我们看到object值没有改变，即使在我们尝试改变object的值之后，name仍然是Muhammad，age仍然是17。</p><p id="069c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">控制台输出:</strong></p><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lb"><img src="../Images/5cfeb92e3a8db61ea2a550998e9742ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QB7vqU8Um63egtJaWhhIYQ.png"/></div></div></figure><p id="b68b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">冻结数组避免变化:</strong></p><p id="559f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">同样的概念也适用于数组，冻结数组也不允许在数组中修改，当我们试图在冻结它之后将一个元素推入friends数组时，我们得到一个错误，指出对象(数组)是不可扩展的。</p><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lc"><img src="../Images/bd231fe313fd4c6161097a3342e5e880.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TL7cUW_eGOL-TVOD2HAQqg.png"/></div></div></figure><p id="43d3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">控制台输出:</strong></p><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lc"><img src="../Images/93d39dcb7fb6a1d581de9a95eef9cdab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*axtSNqrp-zhQXnJTRmipvg.png"/></div></div></figure><p id="30c7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你觉得这篇文章有帮助，请鼓掌👏并分享给你的朋友。T25】</p><p id="f387" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> <em class="la">每天学点新东西</em> </strong></p></div></div>    
</body>
</html>