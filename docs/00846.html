<html>
<head>
<title>Web Starter with CI and AWS Deployment: React/NestJS/MySQL (+docker and GitHub Actions)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">具有CI和AWS部署的web Starter:React/NestJS/MySQL(+docker和GitHub操作)</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/web-starter-with-react-js-nestjs-et-mysql-943bf465bb30?source=collection_archive---------16-----------------------#2021-03-15">https://medium.com/geekculture/web-starter-with-react-js-nestjs-et-mysql-943bf465bb30?source=collection_archive---------16-----------------------#2021-03-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/ed3c78c24b2509143dce81e2a8ee92f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wZpPGInTRSwBhtY2MM2_5g.png"/></div></div></figure><p id="135c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为了提高生产率，避免从头开始每个新项目通常是一个好的做法。这就是maven在Java领域或web领域中对其原型所做的事情。这允许您预配置一个react项目，以尽快开始开发，避免配置Babel、Webpack …</p><p id="f254" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">本文的目的是介绍React。我在几个项目中使用的Js / NestJS / MySQl web starter。它由<a class="ae jo" href="https://fast-modular-project.com/" rel="noopener ugc nofollow" target="_blank">快速模块化项目</a>开发，这是一个共享启动器和模块以加速网络和移动开发的新平台。启动器是可以在不同项目之间重用的极简样板，模块是可以根据项目的规范按需添加到启动器上的特性。</p><h1 id="1208" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">它的目标</h1><p id="5664" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">这个web starter的目标是:</p><ul class=""><li id="a9bf" class="ks kt hi is b it iu ix iy jb ku jf kv jj kw jn kx ky kz la bi translated">提供具有本地前端/后端/数据库的完整环境，可在一个命令中启动</li><li id="0409" class="ks kt hi is b it lb ix lc jb ld jf le jj lf jn kx ky kz la bi translated">为开发人员提供一个通用的web项目结构，该结构具有身份验证功能，可重复用于具有相同技术堆栈的每个新任务</li><li id="e839" class="ks kt hi is b it lb ix lc jb ld jf le jj lf jn kx ky kz la bi translated">独立于操作系统和本地配置</li><li id="4003" class="ks kt hi is b it lb ix lc jb ld jf le jj lf jn kx ky kz la bi translated">定义可以添加功能的基础。我们可以举一个支付系统的例子，该系统将根据项目的需要添加到启动器中(此处有<a class="ae jo" href="https://fast-modular-project.com/modules/reactjs-nestjs-stripe-subscription" rel="noopener ugc nofollow" target="_blank"/>)。</li></ul></div><div class="ab cl lg lh gp li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="hb hc hd he hf"><h1 id="fba6" class="jp jq hi bd jr js ln ju jv jw lo jy jz ka lp kc kd ke lq kg kh ki lr kk kl km bi translated">它是如何工作的？</h1><h2 id="51e7" class="ls jq hi bd jr lt lu lv jv lw lx ly jz jb lz ma kd jf mb mc kh jj md me kl mf bi translated">可通过一个命令启动</h2><p id="d467" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">在上面提到的目标中，我们解释了启动器不应该受开发者的操作系统的影响，也不应该受本地配置的影响。如何解决这个问题？码头工人！如果你想在10分钟内拥有Docker基础知识，可以看看<a class="ae jo" href="https://blog.fast-modular-project.com/docker-in-10-minutes" rel="noopener ugc nofollow" target="_blank">这篇文章</a>。</p><p id="4291" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">starter包含3个对应于堆栈的文件夹:</p><ul class=""><li id="9fbb" class="ks kt hi is b it iu ix iy jb ku jf kv jj kw jn kx ky kz la bi translated">React.js部件的“前端”文件夹</li><li id="3089" class="ks kt hi is b it lb ix lc jb ld jf le jj lf jn kx ky kz la bi translated">NestJS中API的“后端”文件夹</li><li id="3266" class="ks kt hi is b it lb ix lc jb ld jf le jj lf jn kx ky kz la bi translated">本地数据库的“数据库”文件夹</li></ul><figure class="mh mi mj mk fd ij er es paragraph-image"><div class="er es mg"><img src="../Images/e87adbcc4b22bf69f6138917fee71ae6.png" data-original-src="https://miro.medium.com/v2/resize:fit:932/format:webp/1*TPFjCFBTn_8kaM0KJbAn-A.png"/></div><figcaption class="ml mm et er es mn mo bd b be z dx"><em class="mp">Web starter React.js / NestJS / MySQL architecture</em></figcaption></figure><p id="ed5a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这些文件夹中的每一个都包含一个特定的docker文件，该文件定义了要执行的所有指令，以便创建我们3个服务的docker映像。它们将在启动项目时使用。例如，我们定义要使用的node和mysql的版本。</p><p id="0a3b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="mq"> docker-compose.yml </em>文件用于通过定义以下内容来管理这3个服务的创建和交互:</p><ul class=""><li id="f162" class="ks kt hi is b it iu ix iy jb ku jf kv jj kw jn kx ky kz la bi translated">他们创造的顺序</li><li id="9a54" class="ks kt hi is b it lb ix lc jb ld jf le jj lf jn kx ky kz la bi translated">暴露本地机器上的端口</li><li id="7680" class="ks kt hi is b it lb ix lc jb ld jf le jj lf jn kx ky kz la bi translated">用于保存开发数据库中的数据的docker卷</li><li id="8c4a" class="ks kt hi is b it lb ix lc jb ld jf le jj lf jn kx ky kz la bi">…</li></ul><p id="59d7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">你现在可以用</strong> <code class="du mr ms mt mu b">docker-compose up</code>启动你的前端、后端和数据库</p><h2 id="225f" class="ls jq hi bd jr lt lu lv jv lw lx ly jz jb lz ma kd jf mb mc kh jj md me kl mf bi translated">React中的前端。射流研究…</h2><p id="ef9c" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">starter的前端和后端部分定义了命名约定和架构，以便于使用和共享其周围的功能。注意，starter没有在React.js或NestJS上添加任何技术覆盖。</p><p id="6053" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">文件的命名约定取决于它们的类型。例如，一个登录页面将被命名为“<em class="mq"> signin.screen.tsx </em></p><ul class=""><li id="127e" class="ks kt hi is b it iu ix iy jb ku jf kv jj kw jn kx ky kz la bi translated">组件(例如:<em class="mq"> button.component.tsx </em>)</li><li id="4cd1" class="ks kt hi is b it lb ix lc jb ld jf le jj lf jn kx ky kz la bi translated">服务(例如:<em class="mq"> auth.service.tsx </em>)</li><li id="dc4f" class="ks kt hi is b it lb ix lc jb ld jf le jj lf jn kx ky kz la bi translated">导航器(ex:<em class="mq">pages . navigation . tsx)</em></li><li id="a306" class="ks kt hi is b it lb ix lc jb ld jf le jj lf jn kx ky kz la bi translated">store(例如:<em class="mq"> configure.store.ts </em>)</li><li id="8557" class="ks kt hi is b it lb ix lc jb ld jf le jj lf jn kx ky kz la bi">…</li></ul><p id="9232" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">使用的架构:</p><figure class="mh mi mj mk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mv"><img src="../Images/8bbd6758c4ad00abe81ef3a4f95f881c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2SkChHN93U6UcxIt7fXvAQ.png"/></div></div><figcaption class="ml mm et er es mn mo bd b be z dx">File structure — frontend ReactJs</figcaption></figure><h2 id="d9c6" class="ls jq hi bd jr lt lu lv jv lw lx ly jz jb lz ma kd jf mb mc kh jj md me kl mf bi translated">NestJS和TypeORM中的后端</h2><p id="612a" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">像前端部分一样，提出了一种架构来促进它的使用和使用它的模块的共享。为了尽可能降低开发者端的复杂度，它还使用TypeORM进行数据库交互。</p><p id="dbe3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">TypeORM允许我们在编写实体javascript时自动在本地数据库中创建表、更新列。TypeORM还提供了直观地创建复杂查询的工具。如果你想十分钟了解NestJS和TypeORM，可以看看这些文章:<a class="ae jo" href="https://blog.fast-modular-project.com/nestjs-in-10-minutes" rel="noopener ugc nofollow" target="_blank">了解NestJS </a>，<a class="ae jo" href="https://blog.fast-modular-project.com/typeorm-with-nestjs-in-10-minutes" rel="noopener ugc nofollow" target="_blank">了解TypeORM </a>。</p><p id="e7c5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">使用的架构:</p><figure class="mh mi mj mk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mw"><img src="../Images/4dd235ec03cdd3f53cad764fdf13c372.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R5V5NzWjTNRo82ueu2P6IA.png"/></div></div><figcaption class="ml mm et er es mn mo bd b be z dx">File structure — backend NestJS</figcaption></figure></div><div class="ab cl lg lh gp li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="hb hc hd he hf"><h1 id="dad2" class="jp jq hi bd jr js ln ju jv jw lo jy jz ka lp kc kd ke lq kg kh ki lr kk kl km bi translated">在启动器上添加功能</h1><p id="3d47" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">根据定义，初学者不包含任何对项目来说多余的功能。由于前端和后端中定义的特定架构，功能(模块)在其上的集成变得容易，并且根据开发者的选择在之后完成。如果项目需要添加一个特性，用户可以添加相应的模块。以下是此入门版中可用模块的非详尽列表:</p><ul class=""><li id="2dcf" class="ks kt hi is b it iu ix iy jb ku jf kv jj kw jn kx ky kz la bi translated">文件上传到AWS S3存储桶</li><li id="6c65" class="ks kt hi is b it lb ix lc jb ld jf le jj lf jn kx ky kz la bi translated">带条纹的支付系统</li><li id="4ade" class="ks kt hi is b it lb ix lc jb ld jf le jj lf jn kx ky kz la bi translated">使用外部服务“短语”的多语言</li><li id="a8d4" class="ks kt hi is b it lb ix lc jb ld jf le jj lf jn kx ky kz la bi translated">带有AWS Lambda和API网关的Websockets</li><li id="d7c8" class="ks kt hi is b it lb ix lc jb ld jf le jj lf jn kx ky kz la bi translated">使用ip-api定位</li><li id="b396" class="ks kt hi is b it lb ix lc jb ld jf le jj lf jn kx ky kz la bi">…</li></ul><p id="f010" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">此启动器上可用的模块列表在此处可用<a class="ae jo" href="https://fast-modular-project.com/modules" rel="noopener ugc nofollow" target="_blank">。</a></p></div><div class="ab cl lg lh gp li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="hb hc hd he hf"><h1 id="e597" class="jp jq hi bd jr js ln ju jv jw lo jy jz ka lp kc kd ke lq kg kh ki lr kk kl km bi translated">使用AWS进行部署</h1><p id="b425" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">生产中的部署是项目中的一个重要步骤，但是对于那些没有开始的人来说，它会很快变得非常耗时。虽然本文并不打算详细介绍starter的部署，但是这里有所有的参考资料和有用的文档:</p><ul class=""><li id="a4a8" class="ks kt hi is b it iu ix iy jb ku jf kv jj kw jn kx ky kz la bi translated">RDS数据库的创建:<a class="ae jo" href="https://blog.fast-modular-project.com/deployment-aws-rds" rel="noopener ugc nofollow" target="_blank">参见本文</a>。</li><li id="603e" class="ks kt hi is b it lb ix lc jb ld jf le jj lf jn kx ky kz la bi translated">为我们的后端创建一个弹性的Beanstalk基础设施:<a class="ae jo" href="https://blog.fast-modular-project.com/deployment-aws-elastic-beanstalk" rel="noopener ugc nofollow" target="_blank">参见本文</a>。</li><li id="cf43" class="ks kt hi is b it lb ix lc jb ld jf le jj lf jn kx ky kz la bi translated">用AWS S3 bucket和亚马逊CloudFront创建一个基础设施来托管和服务我们的前端:<a class="ae jo" href="https://blog.fast-modular-project.com/deployment-aws-s3-cloudfront" rel="noopener ugc nofollow" target="_blank">见本文</a>。</li></ul></div><div class="ab cl lg lh gp li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="hb hc hd he hf"><h1 id="436a" class="jp jq hi bd jr js ln ju jv jw lo jy jz ka lp kc kd ke lq kg kh ki lr kk kl km bi translated">连续累计</h1><p id="8a8f" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">持续集成已经在这个web starter中就位。一旦在AWS上创建了基础设施，您就可以将代码投入生产了。</p><p id="8fe8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为此，您需要编辑"<em class="mq">。starter的github/workflow/main.yml </em>"文件，该文件定义了两个github动作，用于在S3桶和上一步创建的弹性Beanstalk中部署前端和后端。</p><p id="6ab6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你必须:</p><ul class=""><li id="e46e" class="ks kt hi is b it iu ix iy jb ku jf kv jj kw jn kx ky kz la bi translated">输入要在其上触发持续集成的分支的名称(通常为master或main)</li><li id="2e8c" class="ks kt hi is b it lb ix lc jb ld jf le jj lf jn kx ky kz la bi translated">输入您的S3存储桶的名称</li><li id="793f" class="ks kt hi is b it lb ix lc jb ld jf le jj lf jn kx ky kz la bi translated">输入您的弹性豆茎的名称</li><li id="0dae" class="ks kt hi is b it lb ix lc jb ld jf le jj lf jn kx ky kz la bi translated">将AWS_ACCESS_KEY_ID和AWS_SECRET_ACCESS_KEY秘密添加到GitHub存储库中。</li></ul><figure class="mh mi mj mk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mx"><img src="../Images/df2948926e15cca0a5b70e7fc6f34414.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s4VTUPfu4pbBhm0ElYnpvw.png"/></div></div><figcaption class="ml mm et er es mn mo bd b be z dx">Continuous integration — “.github/workflows/mail.yml”</figcaption></figure></div><div class="ab cl lg lh gp li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="hb hc hd he hf"><h1 id="64a1" class="jp jq hi bd jr js ln ju jv jw lo jy jz ka lp kc kd ke lq kg kh ki lr kk kl km bi translated">结论</h1><p id="75c2" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">这个starter(样板文件)通过为您提供一个只需一个简单的命令即可启动的环境、一个预定义的架构、一个用户身份验证、一个AWS部署指南和大量可插入的模块(特性),让您加快web开发。</p><p id="5a58" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae jo" href="https://fast-modular-project.com/starters" rel="noopener ugc nofollow" target="_blank">快速模块化项目</a>现在引用启动器及其模块，请随意将其用于您所有的非商业和商业项目:)</p><p id="738e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你想贡献，你可以在平台上提供自己的启动器或模块来支持开源社区，或者如果你选择将它们设置为优质内容，就可以获得报酬。为此，您可以使用<a class="ae jo" href="https://studio.fast-modular-project.com/" rel="noopener ugc nofollow" target="_blank"> FMP工作室</a>。那里见:)</p><ul class=""><li id="026b" class="ks kt hi is b it iu ix iy jb ku jf kv jj kw jn kx ky kz la bi translated">https://fast-modular-project.com</li><li id="033c" class="ks kt hi is b it lb ix lc jb ld jf le jj lf jn kx ky kz la bi translated">https://studio.fast-modular-project.com FMP工作室:<a class="ae jo" href="https://studio.fast-modular-project.com/" rel="noopener ugc nofollow" target="_blank"/></li></ul></div></div>    
</body>
</html>