<html>
<head>
<title>Make Your Python Code Faster</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">让您的Python代码更快</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/make-your-python-code-faster-93eea4e3bc8c?source=collection_archive---------1-----------------------#2020-12-30">https://medium.com/geekculture/make-your-python-code-faster-93eea4e3bc8c?source=collection_archive---------1-----------------------#2020-12-30</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/ed780eed0fe586ad66ae0e4f3bc73396.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/0*n9hLLDnJopDWumYj.jpg"/></div><figcaption class="im in et er es io ip bd b be z dx">Python is a slow language</figcaption></figure><p id="5f18" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你肯定听过很多人抱怨Python太慢了。我看到人们仅在性能方面将Python与C进行比较，但他们不会在快速开发的背景下进行比较。</p><p id="5f98" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">它是一种动态类型语言，这意味着它的变量类型不是预定义的，尽管这是一把双刃剑，因为动态类型正是Python成为如此优雅的语言的原因。<strong class="is hj"> <em class="jo">所以Python是一种运行速度较慢，但打字速度较快的语言。</em> </strong></p><p id="f210" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们来看看一些小技巧，从长远来看，它们可能会对您的整体代码性能产生重大影响。</p><h1 id="d23b" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">1.A，B = B，A</h1><p id="6fb9" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">我敢肯定，您以前使用过“temp”作为占位符变量来交换两个元素。我能告诉你的是，方法属于课堂，而不应该在你编码的时候使用。</p><p id="e527" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">相反，选择一个简单的变量交换，按照<em class="jo"> </em> <strong class="is hj"> <em class="jo"> a，b = b，a </em> </strong>的顺序编写变量。这将在一行中切换所有变量，并防止解释器超过三行(temp，a，b交换方法)。</p><blockquote class="ks kt ku"><p id="130c" class="iq ir jo is b it iu iv iw ix iy iz ja kv jc jd je kw jg jh ji kx jk jl jm jn hb bi translated">这是一个微小的修正，可以节省几分之一秒的时间——但从长远来看，几分之一秒的时间会越积越多。</p></blockquote><h1 id="19d6" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">2.选择集合而不是列表</h1><p id="a023" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">这是Python优化书籍中最古老的技巧之一。如果元素存在，不要在列表中搜索。相反，让列表成为一个集合(set(list))，然后检查“集合(list)中的元素”。这个微小的变化将提高您的运行时效率，因为集合中的<strong class="is hj"> <em class="jo">查找是O(1)对列表中的O(n)。</em> </strong></p><blockquote class="ks kt ku"><p id="8353" class="iq ir jo is b it iu iv iw ix iy iz ja kv jc jd je kw jg jh ji kx jk jl jm jn hb bi translated">然而，遍历集合并不比遍历列表快。</p></blockquote><h1 id="e85e" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated"><strong class="ak"> 3。</strong>列出理解</h1><p id="44b3" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">在Python中，一个很好的语法是list comprehensions，它在创建列表时比一个循环在计算上更有效。因此，如果你需要，比方说，有一个前10个正整数的平方列表，而不是:</p><pre class="ky kz la lb fd lc ld le lf aw lg bi"><span id="097b" class="lh jq hi ld b fi li lj l lk ll">squares = []<br/>for i in range (10):<br/>    squares.append(i ** 2)</span></pre><p id="8bb7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您可以:</p><pre class="ky kz la lb fd lc ld le lf aw lg bi"><span id="fe82" class="lh jq hi ld b fi li lj l lk ll">squares = [i ** 2 for i in range(10)]</span></pre><blockquote class="ks kt ku"><p id="d2c5" class="iq ir jo is b it iu iv iw ix iy iz ja kv jc jd je kw jg jh ji kx jk jl jm jn hb bi translated">您可以尝试使用<code class="du lm ln lo ld b"><a class="ae lp" href="https://docs.python.org/3/library/timeit.html" rel="noopener ugc nofollow" target="_blank">timeit</a></code>模块来比较哪种实现运行得更快。</p></blockquote><p id="a814" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你也可以像嵌套循环一样使用嵌套列表理解，但是通常不鼓励这样做，因为这样会使代码更难阅读、维护和测试。</p><h1 id="5184" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">4.在函数中导入</h1><p id="f0b8" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">作为初学者，我们都喜欢在代码顶部大量导入我们认为需要的所有东西。我记得一次性导入NumPy、Pandas、Math、Os等，当我完成代码时，我只使用了三个库。这会耗尽计算机的内存。</p><p id="462f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">相反，在相应的函数中导入所需的库(如果多个函数需要同一个库，则多次导入)。这意味着解释器只会在你调用函数的时候完成导入，而不是在代码开始的时候。</p><p id="3c4b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Python库是缓存的，所以当你调用不同的函数时，每次导入都不会花费额外的时间。然而，当您最终在顶部导入所有内容，甚至不使用代码的某些功能时，它确实会花费更多的时间。</p><h1 id="1a7c" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">5.<strong class="ak">了解内置函数</strong></h1><p id="91ad" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">当我开始使用Python时，我从不使用内置函数，所以为了完成我的绝对值代码，我会运行一个for循环，而不是使用<em class="jo"> abs() </em>。为了将一个字符转换成大写，我甚至会将它转换成大写字母的ASCII等价物，因为我拒绝学习字符串函数。</p><p id="7494" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你对Python很认真，实际上研究所有内置的Python函数是值得的，因为它不仅使你的代码更整洁和更可重用，你还可以通过简单地使用Python给你的东西来避免代码中微小的人为低效。</p><h1 id="303f" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated"><strong class="ak"> 6。避免不必要的功能</strong></h1><p id="f6b9" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">一个很好的例子是函数调用，这种方法可以帮助节省大量的运行时复杂性，但需要仔细考虑。虽然您确实希望函数提供良好的抽象性、可扩展性和可重用性，但是您可能不希望为每一件事情都提供一个函数，因为Python中的函数调用非常昂贵(如果您感兴趣，在本文<a class="ae lp" href="https://ilovesymposia.com/2015/12/10/the-cost-of-a-python-function-call/" rel="noopener ugc nofollow" target="_blank">的</a>中有一些有趣的观察)。</p><p id="8447" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">所以有时候，你可能想要牺牲，例如，写一个getter和/或setter。另一方面，函数越少，代码的可测试性越差。因此，最终的决定实际上取决于您的具体应用。</p><h1 id="81b0" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">7.避开圆点</h1><p id="2e59" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">如果您有一个对象，并且正在使用它的一些属性，请先将它们赋给局部变量:</p><pre class="ky kz la lb fd lc ld le lf aw lg bi"><span id="a4a3" class="lh jq hi ld b fi li lj l lk ll">rectangle_height = rectangle.height<br/>rectangle_width = rectangle.width</span></pre><p id="24fa" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">所以如果你在代码的后面计算，比如说，它的表面，你会做:</p><pre class="ky kz la lb fd lc ld le lf aw lg bi"><span id="0a27" class="lh jq hi ld b fi li lj l lk ll">surface = rectangle_height * rectangle_width</span></pre><p id="a4db" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果以后你也计算它的周长，你将重复使用相同的变量:</p><pre class="ky kz la lb fd lc ld le lf aw lg bi"><span id="a395" class="lh jq hi ld b fi li lj l lk ll">perimeter = 2 * rectangle_height + 2 * rectangle_width</span></pre><p id="9d77" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">出于同样的原因，通常不鼓励使用全局变量——你不希望浪费时间首先查找全局变量本身，然后查找你可能引用的它的每个属性。</p><blockquote class="lq"><p id="42d1" class="lr ls hi bd lt lu lv lw lx ly lz jn dx translated">这个博客到此为止。希望上面提到的所有小技巧能帮助你更好的优化代码。编码快乐！</p></blockquote></div></div>    
</body>
</html>