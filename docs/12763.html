<html>
<head>
<title>Designing a Revolutionary Web App 👊 — Part II</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">设计革命性的网络应用👊第二部分</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/designing-a-revolutionary-web-app-part-ii-a9b9356143a6?source=collection_archive---------5-----------------------#2022-05-30">https://medium.com/geekculture/designing-a-revolutionary-web-app-part-ii-a9b9356143a6?source=collection_archive---------5-----------------------#2022-05-30</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/16c20782f18ed4e8165ae6c2ad2ebe08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*aiiRy3cQov8UiVu2ieRAIg.gif"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">User journey in uploading an image</figcaption></figure><h1 id="553c" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">第二部分— JavaScript/React</h1><p id="afd7" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">这是我的故事的第二部分，关于设计一个网络应用来支持苏丹人民抵抗政变。你可以在这里看到网站<a class="ae kq" href="https://sudan-art.com/" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="10dd" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated">你可以在这里看到第一部分<a class="ae kq" rel="noopener" href="/geekculture/designing-a-revolutionary-web-app-d602494c221"/>。</p><p id="baee" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated">这一部分有三节:</p><ol class=""><li id="83d0" class="kw kx hi ju b jv kr jz ks kd ky kh kz kl la kp lb lc ld le bi translated">如何避免布局偏移，并在页面完全加载后只显示一整页的图片；</li><li id="9992" class="kw kx hi ju b jv lf jz lg kd lh kh li kl lj kp lb lc ld le bi translated">或者，如何显示图像的占位符，使它们在加载前看起来不错；</li><li id="2ec5" class="kw kx hi ju b jv lf jz lg kd lh kh li kl lj kp lb lc ld le bi translated">如何设计一个简洁的图像标签组件；</li></ol><h2 id="9cb0" class="lk iv hi bd iw ll lm ln ja lo lp lq je kd lr ls ji kh lt lu jm kl lv lw jq lx bi translated">如何避免布局偏移，并在页面完全加载后只显示一整页的图片</h2><p id="1b35" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">布局变化是一种痛苦。它们看起来很糟糕，会搞乱你网站的搜索引擎优化。这对于我的网站来说是一个特别的问题，因为它在一个漂亮的砖石布局的登陆页面中使用了大量的图片…</p><p id="4d20" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated">…这意味着每次图像下载完成时，布局都会重新配置和移动😱</p><p id="b2ab" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated">所以我是这样解决的:</p><figure class="ly lz ma mb fd ij"><div class="bz dy l di"><div class="mc md l"/></div></figure><p id="e88d" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated">完成大部分工作的函数在第25–30行。这利用了一个<code class="du me mf mg mh b">useRef</code>钩子来跟踪自从我将这个<code class="du me mf mg mh b">handleOnLoad</code>函数传递给第73行上的每个图像以来，是否所有的图像都已经加载了。</p><p id="c9c9" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated">在这个函数中有一个非常简单的if语句，它允许我通过使用第28行中的<code class="du me mf mg mh b">useState</code>钩子，只加载二十张图片。</p><p id="8f52" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated">我只有20张图片，所以这意味着一旦所有的图片都被下载了，这个页面只能加载我在CSS中得到的砖石布局。没有布局变化🌟</p><p id="c896" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated">这是最后的结果:</p><figure class="ly lz ma mb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/23e2cd35e302d8a3665d16e5dae42b41.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Lla1qoliHyrWXbvatt6hVQ.gif"/></div></div></figure><h2 id="3d4a" class="lk iv hi bd iw ll lm ln ja lo lp lq je kd lr ls ji kh lt lu jm kl lv lw jq lx bi translated">如何显示图像的占位符，使它们在加载前看起来更好</h2><p id="84ab" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">我认为这是一个非常常见的前端问题…你如何在图像加载前显示它的占位符？这通常被称为回退渲染。这样你可以获得更好的用户体验，因为这样你就可以看到图像正在加载，而且你也避免了布局的改变。我真的很讨厌布局转换😢</p><p id="e4d1" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated">我在应用程序中解决这个问题的方法是创建一个组件，将每张图片包装在其中:</p><figure class="ly lz ma mb fd ij"><div class="bz dy l di"><div class="mc md l"/></div></figure><p id="bc7f" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated">最后，这并不复杂——它只是利用一个简单的<code class="du me mf mg mh b">useState</code>钩子给你一个占位符，加载到本地svg或者给你实际的图像。但是我认为结果非常好——看到渲染之前你得到的黑眼睛标志了吗？那是占位符。</p><p id="c86e" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated">如果你在手机上使用慢速互联网，那么这样看起来会更好😉</p><figure class="ly lz ma mb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/097b3a170bca254d38bd2426194694a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*fz463hvgFnXqy6PH7vcVBw.gif"/></div></div></figure><h2 id="a705" class="lk iv hi bd iw ll lm ln ja lo lp lq je kd lr ls ji kh lt lu jm kl lv lw jq lx bi translated">如何设计一个简洁的图像标签组件</h2><figure class="ly lz ma mb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/464796a4a70eea5b3b2defbb98d38d4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*j-HFkNLSn_DVuS4o7Jsorg.gif"/></div></div></figure><p id="2f17" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated">这是我的图像标签组件🎊我觉得这很棒。</p><p id="6be7" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated">作为一般的免责声明，我从<a class="ae kq" href="https://dev.to/prvnbist/create-a-tags-input-component-in-reactjs-ki" rel="noopener ugc nofollow" target="_blank">这里</a>偷了很多这部分的代码。但这是我的版本:</p><figure class="ly lz ma mb fd ij"><div class="bz dy l di"><div class="mc md l"/></div></figure><p id="f0e3" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated">这里的关键是<code class="du me mf mg mh b">addTags</code>和<code class="du me mf mg mh b">removeTags</code>函数。在第28行，<code class="du me mf mg mh b">addTags</code>在析构当前值后将用户输入添加到标签数组中；这意味着您可以一个接一个地构建标签。</p><p id="986f" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated">然后，remove tags将通过将用户取消选择的标签与该标签在数组中的索引进行匹配来删除该标签——它获得此信息是因为map函数循环遍历第60行中的标签。</p><p id="d956" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated">我发现将<code class="du me mf mg mh b">selectedTags</code>数组保留在父组件中并提升状态更容易，因为这意味着我可以使用该数据进行表单验证，也就是说，如果用户没有输入3到6个标签，就向用户发送烦人的消息。</p><p id="744f" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated">这就对了。这很简单，但我认为结果很好，尤其是渐变。</p></div></div>    
</body>
</html>