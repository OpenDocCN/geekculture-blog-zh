<html>
<head>
<title>SQL Interview Question6: Finding Cumulative Sum — Use Case of SUM() OVER () Aggregate Window Function</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SQL面试问题6:寻找累计总和—Sum()OVER()聚合窗口函数的用例</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/sql-interview-question6-finding-cumulative-sum-use-case-of-sum-over-aggregate-window-dfe379d39f63?source=collection_archive---------7-----------------------#2022-11-30">https://medium.com/geekculture/sql-interview-question6-finding-cumulative-sum-use-case-of-sum-over-aggregate-window-dfe379d39f63?source=collection_archive---------7-----------------------#2022-11-30</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><h2 id="f795" class="hg hh hi bd b fp hj hk hl hm hn ho dx hp translated" aria-label="kicker paragraph">SQL面试问题系列中的第6名</h2><div class=""/><div class=""><h2 id="12de" class="pw-subtitle-paragraph io hr hi bd b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf dx translated">最常见的SQL面试查询和概念#SQL #RDBMS</h2></div><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/44a11b0f334c6a4f666bad1cd8f09828.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eGHkpxzlnzwfR6yBG1JgWw.jpeg"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx">Photo by <a class="ae jw" href="https://unsplash.com/es/@ikukevk?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Kevin Ku</a> on <a class="ae jw" href="https://unsplash.com/s/photos/database?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="b294" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">你好。！</p><p id="7967" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">在本系列的前两篇文章中，我们介绍了用更简单的方式解决复杂查询的窗口函数的用例。接下来，今天我们将使用<strong class="jz hs"> <em class="kt"> SUM() OVER()聚合窗口函数</em> </strong>解决另一个查询。今天的问题陈述很简单，如果我们清楚窗口函数的概念，它将在一个查询中完成。</p><blockquote class="ku kv kw"><p id="0e6a" class="jx jy kt jz b ka kb is kc kd ke iv kf kx kh ki kj ky kl km kn kz kp kq kr ks hb bi translated"><strong class="jz hs">问题陈述:我们有员工连续三年的工资数据。按年计算每个雇员的工资总额。</strong></p></blockquote><p id="6f63" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated"><strong class="jz hs">数据:</strong>我正在使用一个表<em class="kt"> basic_pays </em>总共有120条记录，列<strong class="jz hs"> <em class="kt"> employee_id，fiscal_year，salary </em> </strong>并在PostgreSQL上运行我的查询。下面是表中的<em class="kt"> Select * </em>查询的片段。</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es la"><img src="../Images/effb90f4eae68f7cab5e98e34e6e8e90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MenkMMUiyfoYwWgCLr6Hcg.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx">Credits: By Author</figcaption></figure><p id="dff8" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">直观地说，如果我们想要每个员工的工资总额，我们可以使用简单的<strong class="jz hs"> <em class="kt"> sum() </em> </strong>作为聚合函数，并使用<strong class="jz hs"> <em class="kt"> group by </em> </strong>函数对每个员工进行分组。</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es lb"><img src="../Images/efd50ed8225d005473bfb593ab8e4cd6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HT4t4QW-R4AFw92PYKivZQ.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx">Credits: By Author</figcaption></figure><p id="ce74" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">sum函数在这里做什么，它对3年的3行集合进行操作，并在按每个雇员分组的单个行中聚合输出。</p><p id="d161" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">但是问题陈述是要找到工资的累计总和而不是总工资。因此，我们不希望在一行中汇总所有的工资，而是希望进行累计。这里使用带有over()子句的<strong class="jz hs"> <em class="kt"> sum()函数作为窗口函数</em> </strong>将完成我们的工作，即它不会将输出聚集在一行中。让我们这样做，不要在over()子句中提及任何内容，</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es lc"><img src="../Images/0ee909be93ab93b42d770c1df776a11d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UO5DXBsaUk17kq884_JRaA.png"/></div></div></figure><p id="912a" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated"><strong class="jz hs"> <em class="kt">由于我们没有在over()子句</em> </strong>中提及任何内容，所以它将合计120条记录的总工资，并将其与个人工资一起显示。但是我们需要累积的总和，所以我们必须按员工对其进行划分，并按年份的升序按子句 进行排列。请参见以下查询:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es ld"><img src="../Images/b89ec8302d30f980fd19fbf99ae9d084.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IRVNZhgjpjERS-q4VkEOxw.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx">Credits: By Author</figcaption></figure><p id="711b" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">从突出显示的部分，我们可以看到，对于每个员工，我们在每一行中都有按年的<em class="kt">累积_薪资</em>，即当前薪资和以前总薪资的总和等等。</p><p id="8ed8" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">所以这一切都是为了找到运行总数。在我最近的一次采访中，有人问我这个问题。所以希望它也能对你有所帮助。</p><p id="8512" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">如有任何疑问，请通过LinkedIn、Twitter或电子邮件联系我。</p><p id="5b61" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated"><strong class="jz hs"> <em class="kt">邮箱:sdeevi07@gmail.com</em></strong></p><p id="d927" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated"><strong class="jz hs"> <em class="kt">碎碎念:</em></strong><a class="ae jw" href="https://twitter.com/sdeeksha07" rel="noopener ugc nofollow" target="_blank"><strong class="jz hs"><em class="kt">https://twitter.com/sdeeksha07</em></strong></a></p><p id="e2b4" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated"><strong class="jz hs"> <em class="kt">领英:</em></strong><a class="ae jw" href="https://www.linkedin.com/in/sdeeksha07/" rel="noopener ugc nofollow" target="_blank"><strong class="jz hs"><em class="kt">https://www.linkedin.com/in/sdeeksha07/</em></strong></a></p><p id="de9f" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated"><strong class="jz hs">坚持学习，坚持练习！！</strong></p></div></div>    
</body>
</html>