<html>
<head>
<title>Crucial dos and don’ts you must know when developing mobility services</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">开发移动服务时必须知道的重要注意事项</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/crucial-dos-and-donts-you-must-know-when-developing-mobility-services-844fee34cefb?source=collection_archive---------20-----------------------#2022-02-10">https://medium.com/geekculture/crucial-dos-and-donts-you-must-know-when-developing-mobility-services-844fee34cefb?source=collection_archive---------20-----------------------#2022-02-10</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/f30e2b1809f0062dc7ec5a85d6226ba2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7M7SiPQQ5kikNVkrSo9wgg.png"/></div></div></figure><div class=""/><p id="cf32" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">今天，我们将深入探讨构建蓬勃发展的移动服务的技术技巧。</p><p id="9b5b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hu">为性能不佳的设备优化数据源和地图</strong> <br/>不是每个人的口袋里都装着最新款的iPhone。您的服务吸引的用户越多，您必须支持的设备规模就越大。大规模采用是每个移动服务的目标，因此针对较旧和较弱设备的优化是必要的。此外，如果应用程序在用户归还自行车、滑板车或飞毯之前就耗尽了整个电池，那么你的日子就不好过了。</p><p id="ebce" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">好吧，那么当您有大量的兴趣点、交通概况、实时公共交通数据、停车区等要显示时，您能做些什么来降低对计算能力的渴望呢？仅在用户的周围环境中渲染所有这些。当用户只需要在地图上看到几条最近的街道时，不需要加载整个城市。对于应处理区域的定义，最好使用缩放级别仅处理附近的环境。像这样，你将避免崩溃和延迟，而且你将提醒你自己好的旧游戏，其中环境被渲染依赖于角色的移动。</p><p id="56a2" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">好吧，但是当用户缩小并查看整个城市时，情况会怎样呢？你应该用几百个poi淹没他吗？不完全是。尽你所能聚合一切。对单个车辆进行分组，对相同类别和邻近区域的兴趣点进行分组，并降低显示内容的粒度。这将有利于用户，因为他将留在顶端，给薄弱的硅休息。</p><p id="ca2d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hu">不要沉溺于第三方API</strong><br/>如果没有外部数据源和附加服务，如实时交通数据或公共交通车辆位置，你就无法创建成功的移动服务。因此，建立合适的API连接是必须的。如果双方都是技术先进的，并且API服务得到了充分的定义和记录，这应该不难。然而，在移动领域的实现可能具有挑战性，因为在集成服务和数据对象方面几乎没有标准化。</p><p id="2472" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">那么如何让外部连接持续高效呢？使用现有的集成模式，比如Adapter或Facade(或者任何其他适合这种情况的模式),是一种有价值的方法。第三方集成点也必须具有确定性，即使在出现错误的情况下，也要确保传输数据的完整性。它给系统带来了清晰性和有序性，并使其具有可伸缩性和可维护性。</p><p id="1792" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">建立新的连接是一回事，但处理更改和更新是另一回事。如何确保向后兼容性？您将如何对API进行版本控制？主要补丁和次要补丁有什么区别？务必回答所有这些问题。文档必须反映每一个修改，并且不要忘记在发布它们之前与消费者沟通。</p><p id="311b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">寻找专业建议？有时候，我们喜欢使用API代理。代理连接到正确的API版本，所以您不必担心这一点。它还帮助您控制集成点并管理许多方面。</p><p id="464c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">还有一件事。如果不与第三方共享您的部分数据，您将无法连接到第三方。永远坚持黄金法则——你分享的数据量越少越好。即使需要更改集成API，也要遵循这个原则。</p><p id="50aa" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hu">在街上准备测试，而不是在办公桌后</strong> <br/>测试是任何软件开发的重要部分，尤其是在构建移动服务时。为什么？因为你的产品与现实世界相互作用，一个有缺陷的实现可能会让街上的用户无法归还他们租用的踏板车、自行车或任何东西。这很令人沮丧。</p><p id="7875" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">此外，在您办公室舒适的椅子上进行测试在移动领域是行不通的，因为您需要起身尝试实际的服务。滑板车解锁了吗？这辆自行车显示在地图上的正确位置吗？</p><p id="4af7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">从一开始就考虑测试策略，并采取相应的行动。写下场景，你想测试什么，以及如何测试。如果你开发一个路由算法，你需要验证结果。如果你需要测试自行车共享服务，你需要实际的自行车来看看它的表现如何。听起来很容易，但并不是每个人都记得拥有专用硬件来满足开发和测试需求。</p><p id="2f72" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">几个实用技巧:如何在不跑遍整个城市的情况下测试一个路由算法？如果你的物联网服务器允许你在地图上创建虚拟物体，这是有益的。伪造GPS位置使您能够模拟不同的条件，甚至测试最复杂的情况。为不同的场景和上下文创建许多测试帐户也是有意义的。移动场景的复杂性是巨大的，因此，即使是最微小的差异也会影响测试结果。</p><p id="67a0" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">自动化测试是正确的方法吗？是的，在很多情况下，而且从长远来看，它会帮助你。成功的自动化测试的一个重要因素是应用程序的源代码。开发人员应该遵循特定的指导方针和相同的设计模式，以使自动化测试成为可能。</p><p id="7231" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hu">注意错误信息</strong> <br/>错误@1242qwe#。这是你希望你的用户在外面冻得要命，拼命想租你的车的时候看到的吗？我们不这么认为。使用移动服务时，一大堆事情可能会变糟。技术问题；本该开汽车的物联网服务器不响应；支付网关返回超时等。这些都是你的错误，但用户也可能有一个被封锁或过期的卡，验证失败，或忘记勾选同意。出了什么问题并不重要，但是你需要让用户知道。一般的错误信息没有帮助。只会让所有人困惑。记住用户可以自己解决很多事情。如果你告诉他他的卡过期了，他会加一张新卡。另一方面，如果你向他展示类似“显示错误的错误”的东西，他就会退出。</p><p id="0806" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如何避免模糊的错误信息？广泛地映射所有可能的错误状态，然后将它们聚合成有意义的消息并实现它们。</p><p id="6235" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">错误的背景也很重要。当错误发生在您的系统中时，总是很糟糕，但是至少您知道发生了什么以及如何修复它。相反，有些情况下，您毫无头绪，因为来自第三方API的一些随机的、未记录的错误击中了您。通常，除了尝试在测试阶段映射和调查错误，并让第三方开发人员正确地解决和记录错误之外，您没有太多可以做的。</p><p id="83f8" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hu">分开支付</strong>和服务消费<br/>你买单。你消费服务。站在用户的角度，这是我们都习惯了的——收东西换我们的钱。从提供者的角度来看，这种契约也是有意义的——当一项服务被消费时，他总是能得到报酬。那么有什么蹊跷吗？是的，一个大的！</p><p id="e947" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当我们看到两个动作紧密相连时，并不意味着我们应该以那种方式实现它们。从技术上来说，支付和服务使用是两个独立的操作，不应该结合在一起，因为它们会把你的手绑在一起好几年。还是不明白这里出了什么问题？我们会解释的。</p><p id="b70d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们经常会遇到下面的实现。您想租一辆自行车，解锁自行车的请求处理的一部分是检查用户帐户中已注册的支付卡。它只不过是对解锁滚轮的请求的另一个级别的验证和授权。API接受请求，开始处理它，然后拒绝它。API应该已经为传入的请求实现了授权规则。这些规则应该适用于每个请求，并决定用户是否可以解锁自行车。</p><p id="5ad1" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果我没有注册的信用卡，API无论如何都不会接受我的请求。这可能会给实现和测试带来一些复杂性，但这是值得的。为什么？</p><p id="16a4" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让服务消费依赖直接支付是一条捷径，长期来看是行不通的。另一方面，将它构建为两个独立的域可以向新客户和新业务模式开放您的移动服务。击球手出局了吗</p><p id="0f40" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">想象一下，你经营着一家成功的自行车共享服务公司，一家大公司想把你的服务作为福利提供给他们的员工。您将在数据库中标记这些用户，并授权他们使用该服务。然后你就可以愉快地用一张大额发票向公司收费了。</p><p id="d095" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">或者想象自己是自行车共享服务的运营商。有一天，一些大的霸主会带着庞大的客户群和技术先进的解决方案进入你的城市，愿意整合你的服务。如果用用户的信用卡作为授权衡量，会面临很多麻烦，无法进行。使用大玩家账户的用户没有意愿在你的应用程序中注册并给你一个信用卡号码，你就被困住了。</p><p id="9691" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">但如果你在服务消费和支付之间划一条粗粗的红线，你就可以愉快地融入更突出的平台。你的自行车共享服务将作为基础设施，成为你所在城市整个移动生态系统的基础部分。万岁！</p><p id="6dd1" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">寻求更多信息。<br/> <a class="ae jo" href="https://www.linkedin.com/in/jirifromjimmy/" rel="noopener ugc nofollow" target="_blank">吉尔卡</a>，联合创始人</p></div></div>    
</body>
</html>