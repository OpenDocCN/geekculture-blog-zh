<html>
<head>
<title>Pure vs Impure Functions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">纯函数与不纯函数</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/pure-vs-impure-functions-3f8693edf69b?source=collection_archive---------6-----------------------#2022-05-17">https://medium.com/geekculture/pure-vs-impure-functions-3f8693edf69b?source=collection_archive---------6-----------------------#2022-05-17</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/5326647cb59138a53eeeffeb0a5d281d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fgISuw7tNhiznpByJIDhIQ.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx">pure vs impure functions</figcaption></figure><div class=""/><p id="904e" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这是你在编程语言中经常听到的两个术语，叫做<strong class="iw hy">纯</strong>和<strong class="iw hy">不纯函数</strong>。</p><p id="5e99" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">你知道<code class="du js jt ju jv b">Pure Function</code>总是依赖于参数，不应该有任何副作用。</p><h1 id="dc2f" class="jw jx hx bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">什么叫副作用？☠️</h1><p id="f7bd" class="pw-post-body-paragraph iu iv hx iw b ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn ky jp jq jr hb bi translated">当你试图在函数中使用外部代码，或者你正在改变一个变量，那么它会产生一个副作用。</p><p id="7130" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">示例:</p><pre class="kz la lb lc fd ld jv le lf aw lg bi"><span id="b3a0" class="lh jx hx jv b fi li lj l lk ll">let num = 10<br/>function mul(val) {<br/>    return num += val  <br/>}</span></pre><p id="9a51" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">正如您在上面的代码片段中看到的，<code class="du js jt ju jv b">mul</code>函数依赖于一个名为<code class="du js jt ju jv b">num</code>的外部变量。还有，变异<code class="du js jt ju jv b">num</code>值，这使得它的功能不纯。</p><p id="83d2" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">让我们再看一个简单的例子:</p><pre class="kz la lb lc fd ld jv le lf aw lg bi"><span id="09dc" class="lh jx hx jv b fi li lj l lk ll">function hello() {<br/>  console.log("Hello Folks!");<br/>}</span></pre><p id="69cb" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">那么，你对上面的片段怎么看？🤔</p><p id="abd0" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi">.</p><p id="599f" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi">.</p><p id="1b48" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi">.</p><p id="35e9" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">耶！这也是一个不纯的函数😵‍💫</p><p id="497d" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">众所周知，JavaScript是同步的，使用“控制台”或任何“回调”或“承诺/获取”将使函数异步。</p><p id="d92a" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这里使用控制台，这是一个Web API，使它成为一个不纯的函数。</p><p id="6973" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">让我们用<strong class="iw hy">例子</strong>来看看其他副作用:</p><ol class=""><li id="545b" class="lm ln hx iw b ix iy jb jc jf lo jj lp jn lq jr lr ls lt lu bi translated">DOM操作，任何回调或读/写文件</li></ol><pre class="kz la lb lc fd ld jv le lf aw lg bi"><span id="746d" class="lh jx hx jv b fi li lj l lk ll">function mul(a,b) {<br/>  document.write("Started Multiplication")<br/>  return a * b<br/>}<br/>console.log(mul(2,5))</span></pre><p id="e5f1" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">2.更新或修改纯函数中的全局变量</p><pre class="kz la lb lc fd ld jv le lf aw lg bi"><span id="9441" class="lh jx hx jv b fi li lj l lk ll">let x = 10</span><span id="2089" class="lh jx hx jv b fi lv lj l lk ll">function mul(a,b) {<br/>    document.write("Started Multiplication")<br/>    return a * b * x<br/>}<br/>console.log(mul(2,5))</span></pre><p id="d1b5" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">3.同样，变异的外部变量依赖于一个外部变量。</p><pre class="kz la lb lc fd ld jv le lf aw lg bi"><span id="233b" class="lh jx hx jv b fi li lj l lk ll">let x</span><span id="50c4" class="lh jx hx jv b fi lv lj l lk ll">function mul(a,b) {<br/>    x = 10<br/>    return a * b * x<br/>}<br/>console.log(mul(2,5))</span></pre><p id="40a6" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">让我们来理解纯函数和不纯函数，因为现在你对副作用有了一个概念</p><h1 id="642d" class="jw jx hx bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">纯函数</h1><ul class=""><li id="7c3c" class="lm ln hx iw b ix ku jb kv jf lw jj lx jn ly jr lz ls lt lu bi translated">如果传递了相同的参数，它总是返回相同的结果</li><li id="c4ba" class="lm ln hx iw b ix ma jb mb jf mc jj md jn me jr lz ls lt lu bi translated">在程序执行期间，它从不依赖于任何状态/数据/变化</li><li id="13c8" class="lm ln hx iw b ix ma jb mb jf mc jj md jn me jr lz ls lt lu bi translated">它总是会返回一些东西</li><li id="4f2b" class="lm ln hx iw b ix ma jb mb jf mc jj md jn me jr lz ls lt lu bi translated">在这里，编写测试用例将会很简单</li></ul><h1 id="ee4c" class="jw jx hx bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">不纯函数</h1><ul class=""><li id="9c86" class="lm ln hx iw b ix ku jb kv jf lw jj lx jn ly jr lz ls lt lu bi translated">改变已传递的任何参数的内部状态</li><li id="3cf4" class="lm ln hx iw b ix ma jb mb jf mc jj md jn me jr lz ls lt lu bi translated">它可能在不返回任何内容的情况下生效</li><li id="fc0a" class="lm ln hx iw b ix ma jb mb jf mc jj md jn me jr lz ls lt lu bi translated">编写测试用例会有点复杂，因为可能会有副作用</li></ul><h1 id="3608" class="jw jx hx bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">纯方法和不纯方法</h1><p id="28e4" class="pw-post-body-paragraph iu iv hx iw b ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn ky jp jq jr hb bi translated">这些是纯粹的方法:</p><ul class=""><li id="9a0a" class="lm ln hx iw b ix iy jb jc jf lo jj lp jn lq jr lz ls lt lu bi translated">Array.map()</li><li id="092f" class="lm ln hx iw b ix ma jb mb jf mc jj md jn me jr lz ls lt lu bi translated">Array.reduce()</li><li id="f583" class="lm ln hx iw b ix ma jb mb jf mc jj md jn me jr lz ls lt lu bi translated">Array.filter()</li><li id="07b7" class="lm ln hx iw b ix ma jb mb jf mc jj md jn me jr lz ls lt lu bi translated">Array.concat()</li><li id="e213" class="lm ln hx iw b ix ma jb mb jf mc jj md jn me jr lz ls lt lu bi translated">…(扩展语法，主要用于创建副本)</li></ul><p id="8770" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这些是不纯的方法:</p><ul class=""><li id="072f" class="lm ln hx iw b ix iy jb jc jf lo jj lp jn lq jr lz ls lt lu bi translated">Array.splice()</li><li id="84d3" class="lm ln hx iw b ix ma jb mb jf mc jj md jn me jr lz ls lt lu bi translated">数组.排序()</li><li id="81c8" class="lm ln hx iw b ix ma jb mb jf mc jj md jn me jr lz ls lt lu bi translated">Date.now()</li><li id="790b" class="lm ln hx iw b ix ma jb mb jf mc jj md jn me jr lz ls lt lu bi translated">Math.random()</li></ul><h1 id="22d5" class="jw jx hx bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">加分🔖</h1><p id="7ec8" class="pw-post-body-paragraph iu iv hx iw b ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn ky jp jq jr hb bi translated">您可以将一个外部状态克隆到一个纯函数中</p><p id="64eb" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">将外部状态克隆到纯函数中并不会使函数不纯。</p><p id="182c" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">示例:</p><pre class="kz la lb lc fd ld jv le lf aw lg bi"><span id="7af3" class="lh jx hx jv b fi li lj l lk ll">let name = ["suprabha", "supi"]</span><span id="321d" class="lh jx hx jv b fi lv lj l lk ll">function fullName(newName, name) {<br/>  let clonedName = [...name]<br/>  clonedName[clonedName.length] = newName<br/>  return clonedName<br/>}</span><span id="9c6c" class="lh jx hx jv b fi lv lj l lk ll">console.log(fullName("sumi", name)) // ['suprabha', 'supi', 'sumi']</span></pre><p id="7746" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在上面的代码片段中，您在<code class="du js jt ju jv b">fullName</code>函数中使用了<code class="du js jt ju jv b">...</code>扩展运算符。它将创建它的一个克隆，然后更新它。所以，它不依赖于<code class="du js jt ju jv b">name</code>变量。</p><p id="8bc3" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">感谢您阅读帖子！</p><p id="abe6" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">希望这篇文章对你有用。如果你有任何问题，欢迎在评论区提出，或者在这里联系我👇</p><p id="1641" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">🌟<a class="ae mf" href="https://twitter.com/suprabhasupi" rel="noopener ugc nofollow" target="_blank">推特</a> |📚<a class="ae mf" href="https://gum.co/css-pseudo-class-elements" rel="noopener ugc nofollow" target="_blank">电子书</a> |🌟<a class="ae mf" href="https://www.instagram.com/suprabhasupi/" rel="noopener ugc nofollow" target="_blank"> Instagram </a></p></div></div>    
</body>
</html>