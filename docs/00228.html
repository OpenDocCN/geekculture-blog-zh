<html>
<head>
<title>Running an R Code on AWS Batch</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在AWS批处理上运行R代码</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/running-an-r-container-on-aws-batch-on-production-9be336c34f95?source=collection_archive---------0-----------------------#2020-11-22">https://medium.com/geekculture/running-an-r-container-on-aws-batch-on-production-9be336c34f95?source=collection_archive---------0-----------------------#2020-11-22</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/0769c7c8c461216fe76e34511de000fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1272/format:webp/1*NgSv2aiWYZgkm9-8Q3_Dwg.png"/></div></figure><h2 id="16a4" class="im in hi bd io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj bi translated">在生产环境中对AWS批处理运行R代码</h2><p id="3de3" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju ix jv jw jx jb jy jz ka jf kb kc kd ke hb bi translated">在这篇博客中，我们将了解如何在容器、S3、ec2和环境变量的帮助下在AWS批处理上运行作业，以参数化作业。</p><p id="ec06" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">我使用R(语言)作为基本容器，但是可能性是无限的。</p><p id="16e6" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">首先，让我们了解一下AWS批处理的好处和局限性。</p><p id="7575" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated"><strong class="jm hj"> AWS Batch </strong> —这是AWS提供的一项服务，其基本任务是在EC2机器上运行代码，该机器具有内存和存储的弹性，无需担心机器的配置。</p><p id="bd4c" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated"><strong class="jm hj">限制</strong> -运行一个任务很容易，但是当代码发生变化(甚至是一点点)并且开发-运营管道没有到位时，我们需要重复下面的过程，从步骤2到步骤9。虽然当我们有一个开发运营管道(Jenkins)时，这将是几秒钟的工作任务。</p><p id="fbb4" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated"><strong class="jm hj">流程</strong></p><ol class=""><li id="f002" class="kk kl hi jm b jn kf jr kg ix km jb kn jf ko ke kp kq kr ks bi translated">用所需的配置创建一个docker文件。</li><li id="d7c6" class="kk kl hi jm b jn kt jr ku ix kv jb kw jf kx ke kp kq kr ks bi translated">用这个docker文件创建一个docker映像。</li><li id="c09d" class="kk kl hi jm b jn kt jr ku ix kv jb kw jf kx ke kp kq kr ks bi translated">将此docker图像推送到AWS ECR。</li><li id="2458" class="kk kl hi jm b jn kt jr ku ix kv jb kw jf kx ke kp kq kr ks bi translated">在EC2中创建一个启动模板。</li><li id="e504" class="kk kl hi jm b jn kt jr ku ix kv jb kw jf kx ke kp kq kr ks bi translated">使用这个启动模板创建一个EC2机器。</li><li id="4189" class="kk kl hi jm b jn kt jr ku ix kv jb kw jf kx ke kp kq kr ks bi translated">创建作业队列。</li><li id="43dc" class="kk kl hi jm b jn kt jr ku ix kv jb kw jf kx ke kp kq kr ks bi translated">在ECR的帮助下创建批处理作业。</li><li id="395b" class="kk kl hi jm b jn kt jr ku ix kv jb kw jf kx ke kp kq kr ks bi translated">运行批处理作业。</li><li id="7c48" class="kk kl hi jm b jn kt jr ku ix kv jb kw jf kx ke kp kq kr ks bi translated">坐下来，监控，放松，希望工作会成功。</li></ol><p id="7ee4" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">现在，让我们深入流程，开始我们的任务。</p><ol class=""><li id="f1e1" class="kk kl hi jm b jn kf jr kg ix km jb kn jf ko ke kp kq kr ks bi translated"><strong class="jm hj">为docker图像创建一个docker文件。</strong></li></ol><p id="8f7a" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">docker文件将包含程序运行所需的所有库和软件。例如，你需要糖、茶叶、水和其他粉末来泡茶。</p><p id="0b67" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">Docker文件</p><figure class="ky kz la lb fd ij"><div class="bz dy l di"><div class="lc ld l"/></div></figure><p id="619e" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">我使用r-base作为docker文件的基础。和packrat作为依赖项管理工具。让我概述一下packrat。</p><p id="f548" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">pack rat——这是一个用于R中的依赖管理的库(就像maven、sbt和poem一样)。</p><p id="48de" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">要创建一个样例packrat文件，您需要在R中安装所有的库，使用install.packages("packrat ")安装packrat。</p><p id="33ab" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">然后运行下面的命令。</p><pre class="ky kz la lb fd le lf lg lh aw li bi"><span id="6e88" class="im in hi lf b fi lj lk l ll lm">packrat::init("[path where you want to keep your libraries]")<br/>packrat::restore()<br/>packrat::snapshot()</span></pre><p id="13ae" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">您可以在您在init中指定的路径下的packrat文件夹中找到packrat.lock文件。我的git中有一个示例packrat文件(<a class="ae ln" href="https://gist.github.com/shubhamji/2abdda2421968607dd7f398a85152f29" rel="noopener ugc nofollow" target="_blank"> packrat.lock </a>)。</p><p id="b4b5" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">现在我们将使用这个docker文件创建一个容器。</p><p id="41da" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated"><strong class="jm hj"> 2。用这个docker文件创建一个docker映像。</strong></p><p id="4244" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">转到您创建docker文件的文件夹。目录结构将如下所示。我们在同一个目录中创建了一个packrat文件。</p><figure class="ky kz la lb fd ij er es paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="er es lo"><img src="../Images/eb30480481bc6fa822c76acd6e6fa380.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v-fnXoKv2TjfcjvxbGoQ6Q.png"/></div></div></figure><pre class="ky kz la lb fd le lf lg lh aw li bi"><span id="29e1" class="im in hi lf b fi lj lk l ll lm">sudo docker build -t R-code:1.0  .</span></pre><p id="7b7c" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">3.<strong class="jm hj">将此docker图像推送到AWS ECR。</strong></p><p id="c1ac" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">在推送这个容器之前，我们需要在AWS ECR(弹性容器存储库)中创建一个repo。</p><p id="631c" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">为此，请转到AWS EMR控制台，然后单击创建存储库。为您的回购命名(例如R-code-batch)。打开推送功能上的图像扫描(它将扫描图像是否有漏洞)。打开KMS。这两个特性是可选的。</p><p id="4725" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">现在，我们将使用以下命令将这个docker映像推送到ECR(应该由AWS CLI触发)。</p><p id="56a9" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">先决条件-您已经在服务器/系统上设置了AWS CLI。(关于设置，您可以<a class="ae ln" href="https://shubham-kanungo95.medium.com/listing-files-from-aws-in-python-using-boto3-8d4738e5598a" rel="noopener">点击此处</a>，我已经就此创建了一个博客)。</p><pre class="ky kz la lb fd le lf lg lh aw li bi"><span id="9d95" class="im in hi lf b fi lj lk l ll lm">aws ecr get-login --region {your-region-name}<br/># execute the output of above commond (it will look like below command)</span><span id="ad3d" class="im in hi lf b fi lt lk l ll lm">docker login -u AWS -p {a very long string} -e none https://{your_aws_account_number}.dkr.ecr.{your-region-name}.amazonaws.com</span><span id="fb0e" class="im in hi lf b fi lt lk l ll lm">docker tag R-model:1.0 {your_aws_account_number}.dkr.ecr.{your-region-name}.amazonaws.com/R-model:latest</span><span id="3f53" class="im in hi lf b fi lt lk l ll lm">docker push {your_aws_account_number}.dkr.ecr.{your-region-name}.amazonaws.com/R-model:latest</span></pre><p id="e7b7" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">如果所有命令都成功，那么您将能够在AWS ECR repo中看到图像。</p><p id="1679" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated"><strong class="jm hj"> 4。在EC2中创建一个启动模板。</strong></p><p id="160a" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">可以使用Json文件或AWS GUI创建它。在我们的例子中，我们将使用GUI创建。</p><p id="563e" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">a.给出启动模板名称。现在下面的步骤是可选的。</p><p id="c6c5" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">b.给个AMI。(机器操作系统。)</p><p id="de46" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">c.实例类型。(t2、m4、r4等)</p><p id="7a4c" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">d.密钥对，如果您想使用shell/终端登录到机器。</p><p id="e14e" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">e.VPC(如果在您的组织中启用)。</p><p id="3ee5" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">f.存储容量。(EBS)。当您希望将块存储附加到ec2实例时，将使用此属性。</p><p id="1728" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">g.IAM实例概要文件(您将在哪个角色上启动EC2机器)。</p><p id="38bc" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">h.用户数据。如果你想在工作中使用EFS，这是很重要的。</p><figure class="ky kz la lb fd ij"><div class="bz dy l di"><div class="lc ld l"/></div></figure><p id="0009" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">确保您已经替换了efs id inline 11。否则，您的代码将无法执行efs。如果你打算在EBS工作，那么不要担心efs。</p><p id="00d3" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated"><strong class="jm hj"> 5。在批处理中使用这个启动模板创建EC2机器。</strong></p><p id="9581" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">现在转到AWS批处理控制台，转到计算环境，并创建计算环境。</p><p id="c139" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">a.设置计算环境名称。</p><p id="125b" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">b.设置最小CPU(为了获得最佳成本，将其设置为0)。</p><p id="c2cc" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">c.设置最大CPU数量。</p><p id="2336" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">d.所需的vCPUs。(为了获得最佳成本，将其设置为0)。</p><p id="c096" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">e.根据需要设置实例类型(t2、m4、r4等)。</p><p id="1d8d" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">f.【<strong class="jm hj">重要</strong>在附加设置中，设置我们上面创建的启动模板。</p><p id="ca29" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated"><strong class="jm hj"> 6。创建作业队列。</strong></p><p id="ac1b" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">作业被提交到作业队列。我们将使用下面的过程创建一个作业队列。(我设置了强制属性)</p><p id="332e" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">答。为您的作业队列命名。</p><p id="c5ba" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">b.设置我们在上面创建的计算环境。</p><p id="c1bb" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">c.为作业队列设置优先级(对于计算环境，优先级为1-1000的作业队列具有较高的整数值)。</p><p id="25f4" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated"><strong class="jm hj"> 7。借助ECR创建批处理作业定义。</strong></p><p id="927b" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">AWS批处理作业定义指定了作业的运行方式。虽然每个作业都必须引用一个作业定义，但是作业定义中指定的许多参数可以在运行时被覆盖。</p><p id="d0fe" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">a.给你的工作定义起一个名字。</p><p id="9be3" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">b.使用下面的参考URL给出我们推送到AWS ECR的图像名称</p><pre class="ky kz la lb fd le lf lg lh aw li bi"><span id="d81a" class="im in hi lf b fi lj lk l ll lm">{your_aws_account_number}.dkr.ecr.{your-region-name}.amazonaws.com/R-code:latest</span></pre><p id="ce70" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">c.您可以编辑CPU、内存、作业角色、卷、挂载点以及添加环境变量。</p><p id="36d1" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">d.其他属性是可选的。所以我没有涉及它们</p><p id="5bda" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated"><strong class="jm hj"> 8。运行批处理作业。</strong></p><p id="4b45" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">现在，我们已经准备好运行批处理作业了。我们将配置拼图的最后一部分。</p><p id="746e" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">a.给你的工作起个名字。</p><p id="2f8c" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">b.选择我们在上面创建的作业定义。</p><p id="9fc2" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">c.选择我们在上面创建的作业队列。</p><p id="3d32" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">d.执行超时(如果您的代码陷入了无限循环或一些权限问题，您的作业应该会自动终止)。</p><p id="585b" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">e.您可以再次设置vCPUs，内存在这里为您的工作。</p><p id="754a" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">f.现在点击提交工作。万岁！！！作业已提交。</p><h1 id="7112" class="lu in hi bd io lv lw lx is ly lz ma iw mb mc md ja me mf mg je mh mi mj ji mk bi translated">坐下来，监控，放松，希望工作会成功。</h1><p id="deb0" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju ix jv jw jx jb jy jz ka jf kb kc kd ke hb bi translated">作业已提交给AWS批处理。现在我们需要监控和查看日志。</p><p id="e8a8" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">可以在两个地方看到作业的日志。</p><ol class=""><li id="5419" class="kk kl hi jm b jn kf jr kg ix km jb kn jf ko ke kp kq kr ks bi translated">云观察(链接将在工作状态中提供)。</li><li id="5449" class="kk kl hi jm b jn kt jr ku ix kv jb kw jf kx ke kp kq kr ks bi translated">ECS。</li></ol><p id="476c" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated"><strong class="jm hj">工作状态</strong></p><p id="78f0" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">以下是工作状态，具有特定的含义。</p><p id="7565" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">I .已提交-作业已提交给AWS infra。AWS将检查作业是否可以运行。</p><p id="0576" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">二。待定-尚未收到AWS infra的响应。</p><p id="e454" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">三。Runnable- Now批处理将尝试创建一个我们在上面配置的EC2机器。这需要一些时间。如果花费大量时间，可能有三个原因(<a class="ae ln" href="https://aws.amazon.com/premiumsupport/knowledge-center/batch-job-stuck-runnable-status/" rel="noopener ugc nofollow" target="_blank">点击此处</a></p><p id="31e0" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated"><strong class="jm hj"> 1。资源不足</strong>:您的工作指定了超过计算环境所能分配的CPU或内存资源。</p><p id="1fdb" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">2 <strong class="jm hj">。没有分配容器实例</strong>:无法创建实例，网络或安全问题会阻止容器实例加入底层Amazon弹性容器服务(Amazon ECS)集群。</p><p id="e6d5" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated"><strong class="jm hj"> 3。主机级问题</strong>:在主机或Docker守护进程的级别上，容器实例内部可能存在问题。例如，实例的卷可能已满，或者Docker守护程序或Amazon ECS容器代理可能存在停止或启动问题。</p><p id="2670" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">四。开始——现在创建了EC2机器，将容器部署到EC2中，现在运行容器。</p><p id="c2b5" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">动词 （verb的缩写）运行——您的代码运行在EC2机器上。</p><p id="dd01" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">不及物动词succeeded——顾名思义，您的代码以成功状态完成。</p><p id="28dc" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">七。失败——顾名思义，您的代码以失败状态完成。</p><h1 id="13e6" class="lu in hi bd io lv lw lx is ly lz ma iw mb mc md ja me mf mg je mh mi mj ji mk bi translated"><strong class="ak">结论</strong></h1><p id="e455" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju ix jv jw jx jb jy jz ka jf kb kc kd ke hb bi translated">我们已经看到了如何在AWS批处理中创建作业定义和提交作业。为什么我们想要一个批处理-在大数据/数据工程领域，一旦代码被开发，那么只有数据被改变，一旦代码是最终的，很少会有代码改变，只是创造一个工作，享受生活。所有环境都将由AWS处理。</p><p id="40ab" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">我试图保持这篇博客的简短(尽管大部分信息都在这里)。如果你需要任何帮助或有任何困惑，请在下面评论。我很乐意帮忙。</p></div></div>    
</body>
</html>