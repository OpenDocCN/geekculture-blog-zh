<html>
<head>
<title>#DS 02 . Pandas, DataFrames and plot</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">#DS 02。熊猫，数据框和情节</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/ds-02-pandas-dataframes-and-plot-cb7751760e6d?source=collection_archive---------61-----------------------#2021-06-16">https://medium.com/geekculture/ds-02-pandas-dataframes-and-plot-cb7751760e6d?source=collection_archive---------61-----------------------#2021-06-16</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="6977" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我的上一个medium故事中，我讲述了我是如何发现数据科学世界的，在接下来的帖子中，我将描述我对它的了解。</p><p id="efe0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">=&gt;Gihub资源库&lt;=<br/><a class="ae jd" href="https://github.com/saulotp/ds02" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj"><em class="je"/></strong></a></p><p id="34fb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我正在集中精力学习python成为一门简单但强大的语言，事实上，我相信python是编程世界的“入门”。在寻找数据科学中关于python的学习资料时，我发现了Spyder和Jupyter，它们是用于数据分析的非常棒的工具。此外，这些工具将帮助我展示我的项目的进展。</p><p id="8c34" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先我将讲述这个项目。我从网上的某个地方得到了一个excel文件(该文件将放在GitHub存储库中)，这个文件包含了分散在巴西的一些商场的销售数据。有了这些数据，我想回答一些问题，比如:<br/> -哪个商场的销售额更多<br/> -所有商场的总销售额是多少<br/> -所有商场的销售额的平均值是多少<br/> -验证某个日期间隔内的一些数据<br/> -绘制一些数据</p><p id="7321" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，我必须导入pandas库并让python读取。xlsl文件:</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es jf"><img src="../Images/d62713f897010b2fc5a94e305bef8a7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BBSsPriVt93auT-C4_bJbA.png"/></div></div></figure><p id="ddac" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">读取excel文件并创建数据框架“dfmain”后，我们可以打印以查看结果:</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es jr"><img src="../Images/5013cdd32102eca4691c15a181e9d800.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_4cajjbIMIy5IEvI0npzQQ.png"/></div></div></figure><p id="4a2a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们还可以使用命令“display”来设置输出的样式(看起来更酷，我将使用display而不是print):</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es js"><img src="../Images/6a0f6c5dda47d7982dbade573b894009.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sFX1CAr7tGyzSYGwlHkeMQ.png"/></div></div></figure><p id="b3ac" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在下面的代码中，我将日期列从string转换为pandas认为是“date”的格式。之后，创建了一个新的数据框架，只显示ID mall和每个mall的所有销售额的总值，按降序排列。</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es jt"><img src="../Images/c8c16e75fdece21509e55b59784567e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LLMdo2SCdM_4YjcfH9fk9A.png"/></div></div></figure><p id="c3af" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">结果如下:</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div class="er es ju"><img src="../Images/04fdfad5e1d7d687ec42666d5ddf787f.png" data-original-src="https://miro.medium.com/v2/resize:fit:642/format:webp/1*95fwInqOsVi-Cr3Pdg5gnQ.png"/></div><figcaption class="jv jw et er es jx jy bd b be z dx">The table shows us that the mall with more sales value was ‘Shopping Vila Velha’ and the worst was ‘Shopping Morumbi’</figcaption></figure><p id="cd43" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，我想知道所有商场的所有销售额的总和，然后我得到一个方法，可以对一个或多个列求和，并对“Valor Final”列求和。之后，我在DataFrame上创建了另一列，以百分比格式显示值。</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es jz"><img src="../Images/d37181612197a1e28423410f78e91adc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZszGZ8XTwmlLzlOnV66Abw.png"/></div></div></figure><figure class="jg jh ji jj fd jk er es paragraph-image"><div class="er es ka"><img src="../Images/ac4fc408690b2086e1dfe70dd91e57f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:764/format:webp/1*Mn-_kgHPAUw5P1g71EH9mg.png"/></div></figure><p id="e938" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了回答关于销售平均值的问题，我使用了相同的代码，但使用了“mean()”方法:</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es kb"><img src="../Images/94ce106c5ae13f0340ba6e8c6e6da367.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pt1JzFX7GvW8tdu7ttJTsA.png"/></div></div></figure><figure class="jg jh ji jj fd jk er es paragraph-image"><div class="er es kc"><img src="../Images/235a78d4502bc799209fda559bc29cf7.png" data-original-src="https://miro.medium.com/v2/resize:fit:844/format:webp/1*rpy09ufwawbicVevY3JL0A.png"/></div></figure><p id="9b5f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在下一节中，我决定编写一个脚本，只需更改['ID Loja'] == 'Selected Mall '，就可以提取每个商城的数据</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es kd"><img src="../Images/3bc28ee0d7fe59d551f725afe31a0d73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fHJDZeYfzxztVNj-zfYdSA.png"/></div></div></figure><p id="bb5a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了知道每件产品卖出了多少，我从(dfmall)创建了另一个数据框架。</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div class="er es ke"><img src="../Images/3f1d438742bded00e60555af1ee1400c.png" data-original-src="https://miro.medium.com/v2/resize:fit:710/format:webp/1*4rPDI7RnsbOYlAkrYe_Tpw.png"/></div><figcaption class="jv jw et er es jx jy bd b be z dx">This table shows that the product with more value sales was ‘Terno Linho’ with a total value of ‘R$ 60.000,00’ representing 4,08% of all product sales from this mall.</figcaption></figure><p id="6b4e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果我们想要分析一个特定的日期周期，我们可以创建一个过滤器来确定日期周期，然后更精确地提取数据。通过下面的代码，我发现哪种产品在一月份销售得更多，但是日期可以在任何时间段更改，例如:从“2019-02-18”到“2019-07-23”</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es kf"><img src="../Images/c27cb1c0b3a0b681eec1fab1f4adba1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0XrTurbnPbjBUxORwVj-qA.png"/></div></div></figure><p id="482b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，我们有:</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div class="er es kg"><img src="../Images/51737562a58b19bd6cdbdbe731b0467a.png" data-original-src="https://miro.medium.com/v2/resize:fit:774/format:webp/1*nMiROWD51vFAk3R_TGh1xQ.png"/></div><figcaption class="jv jw et er es jx jy bd b be z dx">The table above shows us that in January, the item that was more sold was “Terno” with 6,4% of all sales. And the item with fewer sales was “Chinelo Liso” with 0,04%</figcaption></figure><p id="adda" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要查看每月的总销售额，我们可以使用命令“重采样(参数)”，并选择M(月)作为“数据”(日期)列中的参数。因此，我们将使用选定的数据创建另一个数据框架:</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es kh"><img src="../Images/b25102910e8d0c71886ac841a44924b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YLFlaRRJy9Q5Ak3fQE4xvw.png"/></div></div><figcaption class="jv jw et er es jx jy bd b be z dx">In this case, I removed the index “Valor Total” because I have encountered some errors when I’m trying to plot =/</figcaption></figure><figure class="jg jh ji jj fd jk er es paragraph-image"><div class="er es ki"><img src="../Images/24518fa081208dd4248859b766e560c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:738/format:webp/1*QcDtpjj-5UVfGZu7niebIA.png"/></div><figcaption class="jv jw et er es jx jy bd b be z dx">This table shows the total value of all sales for each month</figcaption></figure><p id="4a42" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后是剧情时间。为了绘图，我们必须导入另一个python库:</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es kj"><img src="../Images/fddeed9f0397b8cc5f5a77d9427c5296.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FePQkcNwTE7fA760ArkV4g.png"/></div></div><figcaption class="jv jw et er es jx jy bd b be z dx">Full line code: “pt = dfmalldatessumlsales.plot(style=’.-’, ms=15, color=’red’, figsize=(20,10), lw=5, legend=False, xlabel=’’, title = ‘Total Sales’)”</figcaption></figure><p id="e6fa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，我们有一个图像来表示每个月所有销售额的数据:</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es kk"><img src="../Images/306747edb154e032534191fe0a0a83e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GeK1bkCAwZYt4KqK137PxQ.png"/></div></div><figcaption class="jv jw et er es jx jy bd b be z dx">With this image, we can observe that the month with more value sales was May and the month with fewer sales was August.</figcaption></figure><p id="5ba9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以用同样的方法来绘制销售的平均值:</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es kl"><img src="../Images/bcc5e442a3f04aa3704e4f1126c1b461.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NEtJgDOfcZ9cIBqEC5clOA.png"/></div></div></figure><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es km"><img src="../Images/c6cf1fa8a5699c6912e1e0803ebfd7e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mC760EC_LWyz_RekMZR4ZQ.png"/></div></div><figcaption class="jv jw et er es jx jy bd b be z dx">Mean of sales per month</figcaption></figure><p id="312d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">嗯，“就是这个”。</p><p id="3718" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一个人学习有时会很难，但这是可能的。<br/>现在，回答前面的问题:<br/>问:哪个商场的销售额更高？<br/>答:购物维拉韦拉1.615.271元人民币</p><p id="a9c0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">问:所有商场的总销售额是多少？答:38 . 959 . 752 . 00雷亚尔</p><p id="a3eb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">问:所有来自商场的销售意味着什么？<br/>答:1 558 390.08雷亚尔</p><p id="2b73" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">问:核实整个日期区间的一些数据<br/>答:2019-01-01至2019-01-31年1月，shopping Morumbi出售给“Terno”的总价值为9.100，00雷亚尔。</p><p id="ac88" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">问:绘制一些数据<br/>答:</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es kk"><img src="../Images/306747edb154e032534191fe0a0a83e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GeK1bkCAwZYt4KqK137PxQ.png"/></div></div></figure><p id="3a9c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">=&gt;Gihub资源库&lt;=<br/><a class="ae jd" href="https://github.com/saulotp/ds02" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj"><em class="je">https://github.com/saulotp/ds02</em></strong></a></p><p id="8590" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">联系我:<br/>-saulodetp@gmail.com<br/>-Ig:saulodetp<br/>-Linkedin:saulodetp</p></div></div>    
</body>
</html>