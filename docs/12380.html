<html>
<head>
<title>Django Social Authentication: Sign In With GitHub</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Django社交认证:使用GitHub登录</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/django-social-authentication-sign-in-with-github-33390db1a388?source=collection_archive---------5-----------------------#2022-05-10">https://medium.com/geekculture/django-social-authentication-sign-in-with-github-33390db1a388?source=collection_archive---------5-----------------------#2022-05-10</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="fe16" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">如何在Django framework web apps中使用GitHub登录和注册</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/7d408655703a9de99317fde42b5afe59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p-2pLK44Hn29jZ_QaTVpQA.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Login with GitHub using the Django framework</figcaption></figure><p id="be2c" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">你好，Django开发者..！！</p><p id="e5a9" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">我叫Rohit Kumar Thakur。我一般写React Native、Django、数据科学、机器学习和Python。</p><p id="9156" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">在本文中，我将向您展示如何在Django应用程序中使用社交认证。当您构建web应用程序时，添加GithHub身份验证是您可以添加的最常见的功能。它将帮助用户轻松登录您的网站。所以，不浪费任何时间，让我们开始这个项目。</p><p id="c64c" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">下面是本文的分步视频教程:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="kj kk l"/></div></figure><h1 id="2488" class="kl km hi bd kn ko kp kq kr ks kt ku kv io kw ip kx ir ky is kz iu la iv lb lc bi translated">项目设置</h1><ul class=""><li id="375c" class="ld le hi jp b jq lf jt lg jw lh ka li ke lj ki lk ll lm ln bi translated">我总是建议在虚拟环境中开始一个Django项目，因为这是一个练习的好习惯。</li><li id="8d4e" class="ld le hi jp b jq lo jt lp jw lq ka lr ke ls ki lk ll lm ln bi translated">选择一个目录。在该目录中打开终端或命令提示符窗口，并启动一个虚拟环境。激活虚拟环境。我写了一篇关于如何在Windows和Linux中启动虚拟环境的文章。需要帮助可以查一下。</li><li id="96df" class="ld le hi jp b jq lo jt lp jw lq ka lr ke ls ki lk ll lm ln bi translated">激活虚拟环境后，安装以下python库:</li></ul><pre class="iy iz ja jb fd lu lv lw lx aw ly bi"><span id="fc58" class="lz km hi lv b fi ma mb l mc md">pip install django<br/>pip install social-auth-app-django</span></pre><ul class=""><li id="d30f" class="ld le hi jp b jq jr jt ju jw me ka mf ke mg ki lk ll lm ln bi translated">启动Django项目:</li></ul><pre class="iy iz ja jb fd lu lv lw lx aw ly bi"><span id="039c" class="lz km hi lv b fi ma mb l mc md">django-admin startproject github<br/>cd github<br/>python manage.py startapp mainApp</span></pre><ul class=""><li id="4383" class="ld le hi jp b jq jr jt ju jw me ka mf ke mg ki lk ll lm ln bi translated">在您喜欢的文本编辑器中打开此项目。我是说VS代码。xd:)</li></ul><h1 id="794f" class="kl km hi bd kn ko kp kq kr ks kt ku kv io kw ip kx ir ky is kz iu la iv lb lc bi translated">密码</h1><p id="82ff" class="pw-post-body-paragraph jn jo hi jp b jq lf ij js jt lg im jv jw mh jy jz ka mi kc kd ke mj kg kh ki hb bi translated"><strong class="jp hj"> <em class="mk"> settings.py </em> </strong></p><pre class="iy iz ja jb fd lu lv lw lx aw ly bi"><span id="1702" class="lz km hi lv b fi ma mb l mc md">INSTALLED_APPS = [<br/>    'django.contrib.admin',<br/>    'django.contrib.auth',<br/>    'django.contrib.contenttypes',<br/>    'django.contrib.sessions',<br/>    'django.contrib.messages',<br/>    'django.contrib.staticfiles',    <br/>    'social_django',        <strong class="lv hj">#add this</strong><br/>    'mainApp',              <strong class="lv hj">#add this</strong><br/>]MIDDLEWARE = [<br/>    'django.middleware.security.SecurityMiddleware',<br/>    'django.contrib.sessions.middleware.SessionMiddleware',<br/>    'django.middleware.common.CommonMiddleware',<br/>    'django.middleware.csrf.CsrfViewMiddleware',<br/>    'django.contrib.auth.middleware.AuthenticationMiddleware',<br/>    'django.contrib.messages.middleware.MessageMiddleware',<br/>    'django.middleware.clickjacking.XFrameOptionsMiddleware',<br/>    'social_django.middleware.SocialAuthExceptionMiddleware', <strong class="lv hj">#add this</strong><br/>]TEMPLATES = [<br/>    {<br/>        'BACKEND': 'django.template.backends.django.DjangoTemplates',<br/>        'DIRS': [],<br/>        'APP_DIRS': True,<br/>        'OPTIONS': {<br/>            'context_processors': [<br/>                'django.template.context_processors.debug',<br/>                'django.template.context_processors.request',<br/>                'django.contrib.auth.context_processors.auth',<br/>                'django.contrib.messages.context_processors.messages',<br/>                'social_django.context_processors.backends',    <strong class="lv hj">#add this</strong><br/>            ],<br/>        },<br/>    },<br/>]<br/><strong class="lv hj">#Add this at the bottom in settings.py<br/>#social app custom settings</strong> <br/>AUTHENTICATION_BACKENDS = [<br/>    'social_core.backends.github.GithubOAuth2',<br/>    'django.contrib.auth.backends.ModelBackend'<br/>]</span><span id="3436" class="lz km hi lv b fi ml mb l mc md">LOGIN_URL = 'login'<br/>LOGIN_REDIRECT_URL = 'home'<br/>LOGOUT_URL = 'logout'<br/>LOGOUT_REDIRECT_URL = 'login'</span><span id="358b" class="lz km hi lv b fi ml mb l mc md">SOCIAL_AUTH_GITHUB_KEY = '############'<br/>SOCIAL_AUTH_GITHUB_SECRET = '########################'</span></pre><p id="0515" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">在<strong class="jp hj"> settings.py. </strong>中，我们需要在INSTALLED_APPS、中间件和模板部分添加几行代码。之后，我们必须在底部添加几行代码，如上所示。</p><p id="93d0" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><strong class="jp hj"> <em class="mk"> views.py </em> </strong></p><pre class="iy iz ja jb fd lu lv lw lx aw ly bi"><span id="2198" class="lz km hi lv b fi ma mb l mc md">from django.shortcuts import render<br/>from django.contrib.auth.decorators import login_required</span><span id="d6cf" class="lz km hi lv b fi ml mb l mc md"># Create your views here.</span><span id="0150" class="lz km hi lv b fi ml mb l mc md">def login(request):<br/>    return render(request, 'login.html')</span><span id="64cb" class="lz km hi lv b fi ml mb l mc md"><a class="ae lt" href="http://twitter.com/login_required" rel="noopener ugc nofollow" target="_blank">@login_required</a><br/>def home(request):<br/>    return render(request, 'home.html')</span></pre><p id="50fd" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">在views.py中，首先，我们将导入所有需要的库。之后，编写两个函数来渲染登录和主屏幕。</p><p id="2006" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">现在在mainApp目录中。制作一个新的目录<strong class="jp hj">模板</strong>。在模板目录下，新建三个文件:<strong class="jp hj">base.html</strong>、<strong class="jp hj">login.html</strong>、<strong class="jp hj">home.html</strong></p><p id="f04c" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">也做一个静态文件夹。在mainApp目录中。并且在静态目录里面，制作一个文件“<strong class="jp hj"> index.css </strong></p><p id="a32b" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">如果愿意，您可以自定义CSS部件。但是对于最小的UI引用，您可以将以下代码添加到index.css文件中。</p><pre class="iy iz ja jb fd lu lv lw lx aw ly bi"><span id="adf9" class="lz km hi lv b fi ma mb l mc md">.container-fluid {<br/>    height: 100vh;<br/>    background-color: #fff;<br/>    display: flex;<br/>    justify-content: center;<br/>    align-items: center;<br/>}.container-fluid &gt; div {<br/>    width: 85%;<br/>    min-width: 300px;<br/>    max-width: 500px;<br/>}.card{<br/>    width: 100%;<br/>    background-color: #282c34;<br/>}.social-container {<br/>    display: flex;<br/>    flex-direction: column;<br/>    justify-content: center;<br/>}.btn a, .btn a:hover {<br/>    color: white;<br/>    text-decoration: none;<br/>}</span></pre><p id="d469" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><strong class="jp hj"><em class="mk">base.html</em></strong></p><pre class="iy iz ja jb fd lu lv lw lx aw ly bi"><span id="8897" class="lz km hi lv b fi ma mb l mc md">{% load static %}</span><span id="86cf" class="lz km hi lv b fi ml mb l mc md">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>    &lt;head&gt;<br/>        &lt;meta charset="UTF-8"&gt;<br/>        &lt;meta name="viewport" content="width=device-width, initial-scale=1.0" /&gt;<br/>        &lt;meta http-equiv="X-UA-Compatible" content="ie=edge" /&gt;<br/>        &lt;link href="<a class="ae lt" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="noopener ugc nofollow" target="_blank">https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css</a>" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous"&gt;<br/>        &lt;link rel="stylesheet" href="{% static 'index.css' %}" /&gt;<br/>        &lt;title&gt;DJANGO SOCIAL AUTH&lt;/title&gt;<br/>    &lt;/head&gt;<br/>    &lt;body&gt;<br/>        &lt;div class="container-fluid"&gt; <br/>            &lt;div&gt;<br/>                &lt;h1 class="text-white text-center"&gt;<br/>                    {% block title %}<br/>                    {% endblock %} <br/>                &lt;/h1&gt;<br/>                &lt;div class="card p-5"&gt;<br/>                    {% block content %}<br/>                    {% endblock %} <br/>                &lt;/div&gt;<br/>            &lt;/div&gt;<br/>        &lt;/div&gt;<br/>    &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="2b7b" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">这是base.html档案的代码。我们将在login.html和base.html获取参考和相对标签元素。</p><p id="05ee" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><strong class="jp hj"><em class="mk">login.html</em></strong></p><pre class="iy iz ja jb fd lu lv lw lx aw ly bi"><span id="e7fa" class="lz km hi lv b fi ma mb l mc md">{% extends 'base.html' %} <br/>{% block title %}Sign in{% endblock %} <br/>{% block content %} <br/>    &lt;div class="row"&gt;<br/>        &lt;div class="col-md-8 mx-auto social-container my-2 order-md-1"&gt;<br/>            &lt;button class="btn btn-primary mb-2"&gt;<br/>                &lt;a href="{% url 'social:begin' 'github' %}"&gt;<br/>                    LOGIN WITH GITHUB <br/>                &lt;/a&gt;<br/>            &lt;/button&gt;<br/>        &lt;/div&gt;<br/>    &lt;/div&gt;<br/>{% endblock %}</span></pre><p id="9646" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><strong class="jp hj"><em class="mk">home.html</em></strong></p><pre class="iy iz ja jb fd lu lv lw lx aw ly bi"><span id="facd" class="lz km hi lv b fi ma mb l mc md">{% extends 'base.html' %} <br/>{% block title %}HOME{% endblock %} <br/>{% block content %} <br/>    &lt;div class="row"&gt;<br/>        &lt;div class="col-sm-12 mb-3"&gt;<br/>            &lt;h4 class="text-center"&gt;Welcome {{ user.username }}&lt;/h4&gt;<br/>        &lt;/div&gt;<br/>    &lt;/div&gt;<br/>{% endblock %}</span></pre><p id="5189" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">这是登录和主屏幕的基本代码。成功登录后，我们将在主屏幕上显示用户名。</p><p id="df0f" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><strong class="jp hj"><em class="mk">github/URLs . py</em></strong></p><pre class="iy iz ja jb fd lu lv lw lx aw ly bi"><span id="9d70" class="lz km hi lv b fi ma mb l mc md">from django.contrib import admin<br/>from django.urls import path, include<br/>from django.contrib.auth import views as auth_views <br/>from mainApp import views</span><span id="f317" class="lz km hi lv b fi ml mb l mc md">urlpatterns = [<br/>    path('admin/', admin.site.urls),<br/>    path('login/', views.login, name='login'),<br/>    path('logout', auth_views.LogoutView.as_view(), name='logout'),<br/>    path('social-auth/', include('social_django.urls', namespace='social')),<br/>    path("", views.home, name='home'),<br/>]</span></pre><p id="c079" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">在主目录中添加URL。</p><h1 id="c726" class="kl km hi bd kn ko kp kq kr ks kt ku kv io kw ip kx ir ky is kz iu la iv lb lc bi translated">配置Github开发人员控制台</h1><p id="ab95" class="pw-post-body-paragraph jn jo hi jp b jq lf ij js jt lg im jv jw mh jy jz ka mi kc kd ke mj kg kh ki hb bi translated">现在我们只需要做一件事。让我们建立Github开发者档案。推荐你看<strong class="jp hj"> 18:32 </strong>之后的视频。这里的视频是<a class="ae lt" href="https://www.youtube.com/watch?v=RjjEZs4U2Yc" rel="noopener ugc nofollow" target="_blank"/>。</p><ul class=""><li id="b320" class="ld le hi jp b jq jr jt ju jw me ka mf ke mg ki lk ll lm ln bi translated">你需要一个GitHub账户。</li><li id="68ba" class="ld le hi jp b jq lo jt lp jw lq ka lr ke ls ki lk ll lm ln bi translated">点击您的个人资料。然后点击设置</li><li id="af36" class="ld le hi jp b jq lo jt lp jw lq ka lr ke ls ki lk ll lm ln bi translated">向下滚动并点击开发者设置(左侧)</li><li id="c2b2" class="ld le hi jp b jq lo jt lp jw lq ka lr ke ls ki lk ll lm ln bi translated">点击OAuth应用程序</li><li id="36a4" class="ld le hi jp b jq lo jt lp jw lq ka lr ke ls ki lk ll lm ln bi translated">点击注册新的应用程序</li><li id="8ff5" class="ld le hi jp b jq lo jt lp jw lq ka lr ke ls ki lk ll lm ln bi translated">添加应用程序名称:测试</li><li id="35fd" class="ld le hi jp b jq lo jt lp jw lq ka lr ke ls ki lk ll lm ln bi translated">主页网址:<a class="ae lt" href="http://loacalhost:8000" rel="noopener ugc nofollow" target="_blank"> http://localhost:8000 </a></li><li id="1250" class="ld le hi jp b jq lo jt lp jw lq ka lr ke ls ki lk ll lm ln bi translated">授权回调URL:<a class="ae lt" href="http://localhost:8000/social-auth/complete/github/" rel="noopener ugc nofollow" target="_blank">http://localhost:8000/social-auth/complete/github/</a></li><li id="2c4f" class="ld le hi jp b jq lo jt lp jw lq ka lr ke ls ki lk ll lm ln bi translated">点击注册申请</li><li id="9e88" class="ld le hi jp b jq lo jt lp jw lq ka lr ke ls ki lk ll lm ln bi translated">生成客户端密码。</li><li id="ad3a" class="ld le hi jp b jq lo jt lp jw lq ka lr ke ls ki lk ll lm ln bi translated">复制客户端id和客户端密码并粘贴到此处:</li></ul><pre class="iy iz ja jb fd lu lv lw lx aw ly bi"><span id="f20c" class="lz km hi lv b fi ma mb l mc md">SOCIAL_AUTH_GITHUB_KEY = '############'<br/>SOCIAL_AUTH_GITHUB_SECRET = '########################'</span></pre><ul class=""><li id="8898" class="ld le hi jp b jq jr jt ju jw me ka mf ke mg ki lk ll lm ln bi translated">如果您检查了视频，请确保点击订阅按钮。我制作了很酷的Django和react本地应用程序。你的支持会令人钦佩。</li></ul><p id="faa9" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">现在，打开您的终端或命令提示符，迁移Django应用程序。</p><pre class="iy iz ja jb fd lu lv lw lx aw ly bi"><span id="97ee" class="lz km hi lv b fi ma mb l mc md">python manage.py makemigrations<br/>python manage.py migrate<br/>python manage.py runserver</span></pre><p id="445a" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">现在点击“用GitHub登录”按钮。你现在可以走了。</p><p id="bf02" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><a class="ae lt" href="https://github.com/imrohit007/Github-auth-Django" rel="noopener ugc nofollow" target="_blank"> <strong class="jp hj"> GitHub代码链接</strong> </a></p><p id="4f8b" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">现在，鼓掌，鼓掌，鼓掌！并关注更多关于Django框架的基于项目的文章。</p><p id="a5f7" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">感谢阅读。</p></div></div>    
</body>
</html>