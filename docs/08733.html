<html>
<head>
<title>A React Material UI Library to Build Any Form With Only JSON Config</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">一个React Material UI库，只需JSON配置即可构建任何表单</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/a-react-material-ui-library-to-build-any-form-with-only-json-config-ec2b3e961a27?source=collection_archive---------9-----------------------#2021-11-12">https://medium.com/geekculture/a-react-material-ui-library-to-build-any-form-with-only-json-config-ec2b3e961a27?source=collection_archive---------9-----------------------#2021-11-12</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/3791d74c1d10386d01bddc71f0e0146d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rS5EORUvdvfmYAmmQGJomw.png"/></div></div></figure><p id="3765" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">假设我们想创建一个收集送货地址的表单。下面是我们如何只用JSON config和我构建的开源库<code class="du jo jp jq jr b"><a class="ae js" href="https://github.com/jzcling/react-material-ui-form-builder" rel="noopener ugc nofollow" target="_blank">@jeremyling/react-material-ui-form-builder</a></code>复制下面的表单。</p><figure class="jt ju jv jw fd ij"><div class="bz dy l di"><div class="jx jy l"/></div></figure><h1 id="9d9b" class="jz ka hi bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated"><strong class="ak">JSON配置</strong></h1><pre class="jt ju jv jw fd kx jr ky kz aw la bi"><span id="1d7d" class="lb ka hi jr b fi lc ld l le lf">const fields = [<br/>  {<br/>    title: “Shipping Address”,<br/>    component: “display-text”,<br/>    titleProps: {<br/>      style: {<br/>        fontSize: 20,<br/>        marginTop: 16,<br/>        fontWeight: “bold”,<br/>        userSelect: “none”,<br/>        fontVariant: “small-caps”,<br/>        marginBottom: 8,<br/>      },<br/>    },<br/>  },<br/>  {<br/>    col: {<br/>      xs: 6,<br/>    },<br/>    label: “First Name”,<br/>    props: {<br/>      required: true,<br/>    },<br/>    attribute: “firstName”, <br/>    component: “text-field”,<br/>    validations: {<br/>      label: “First Name”,<br/>      required: “Required”,<br/>    },<br/>    validationType: “string”,<br/>  },<br/>  {<br/>    col: {<br/>      xs: 6,<br/>    },<br/>    label: “Last Name”,<br/>    props: {<br/>      required: true,<br/>    },<br/>    attribute: “lastName”,<br/>    component: “text-field”,<br/>    validations: {<br/>      label: “Last Name”,<br/>      required: “Required”,<br/>    },<br/>    validationType: “string”,<br/>  },<br/>  {<br/>    label: “Address Line 1”,<br/>    props: {<br/>      required: true, <br/>    },<br/>    attribute: “address1”,<br/>    component: “text-field”,<br/>    validations: {<br/>      label: “Address 1”,<br/>      required: “Required”,<br/>    },<br/>    validationType: “string”,<br/>  },<br/>  {<br/>    label: “Address Line 2”,<br/>    attribute: “address2”,<br/>    component: “text-field”,<br/>    validations: {<br/>      label: “Address 2”,<br/>    },<br/>    validationType: “string”,<br/>  },<br/>  {<br/>    col: {<br/>      xs: 6,<br/>    },<br/>    label: “City”,<br/>    attribute: “city”,<br/>    component: “text-field”,<br/>    validations: {<br/>      label: “City”,<br/>    },<br/>    validationType: “string”,<br/>  },<br/>  {<br/>    col: {<br/>      xs: 6,<br/>    },<br/>    label: “State”,<br/>    attribute: “state”,<br/>    component: “text-field”,<br/>    validations: {<br/>      label: “State”,<br/>    },<br/>    validationType: “string”,<br/>  },<br/>  {<br/>    col: {<br/>      xs: 6,<br/>    },<br/>    label: “Postcode”,<br/>    props: {<br/>      required: true,<br/>    },<br/>    attribute: “postcode”,<br/>    component: “text-field”,<br/>    validations: {<br/>      label: “Postcode”,<br/>      required: “Required”,<br/>    },<br/>    validationType: “string”,<br/>  },<br/>  {<br/>    col: {<br/>      xs: 6,<br/>    },<br/>    label: “Country”,<br/>    props: {<br/>      required: true,<br/>    },<br/>    attribute: “country”,<br/>    component: “text-field”,<br/>    validations: {<br/>      label: “Country”,<br/>      required: “Required”,<br/>    },<br/>    validationType: “string”,<br/>  },<br/>  {<br/>    options: [{<br/>      label: “Same as Billing”,<br/>      value: true,<br/>    }],<br/>    optionConfig: {<br/>      key: “label”, <br/>      label: “label”,<br/>      value: “value”,<br/>    },<br/>    attribute: “sameAsBilling”,<br/>    component: “checkbox-group”,<br/>  },<br/>];</span></pre><h1 id="6660" class="jz ka hi bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated"><strong class="ak">所有表格的标准代码</strong></h1><pre class="jt ju jv jw fd kx jr ky kz aw la bi"><span id="79a6" class="lb ka hi jr b fi lc ld l le lf">import React, { useRef, useState } from “react”;<br/>import { FormBuilder } from “@jeremyling/react-material-ui-form-builder”;<br/>import { Button } from “@mui/material”;<br/>import { get, isEmpty } from “lodash”;</span><span id="b046" class="lb ka hi jr b fi lg ld l le lf">async function validate(refs, form) {<br/>  var errors = {};<br/>  for (const [attribute, ref] of Object.entries(refs.current)) {<br/>    if (ref.validate) {<br/>      const error = await ref.validate(get(form, attribute));<br/>      if (error.length) {<br/>        errors[attribute] = error;<br/>      }<br/>    }<br/>  }<br/>  if (!isEmpty(errors)) {<br/>    console.log(errors);<br/>    return false;<br/>  } <br/>  return true;<br/>}</span><span id="71f3" class="lb ka hi jr b fi lg ld l le lf">export default function ShippingAddress() {<br/>  const [form, setForm] = useState({});<br/>  const refs = useRef({});<br/>  <br/>  const updateForm = (updates) =&gt; {<br/>    const copy = { …form };<br/>    for (const [key, value] of Object.entries(updates)) {<br/>      copy[key] = value;<br/>    }<br/>    setForm(copy);<br/>  };</span><span id="a91d" class="lb ka hi jr b fi lg ld l le lf">  const handleNext = async (event) =&gt; {<br/>    event.preventDefault();<br/>    const ok = await validate(refs, form);<br/>    if (!ok) {<br/>      return;<br/>    }<br/>    console.log(form);<br/>  };<br/>  <br/>  return (<br/>    &lt;&gt;<br/>      &lt;FormBuilder<br/>        fields={fields}<br/>        form={form}<br/>        updateForm={updateForm}<br/>        refs={refs}<br/>      /&gt;<br/>      &lt;Button<br/>        type=”submit”<br/>        variant=”contained”<br/>        color=”primary”<br/>        sx={{ mt: 1 }}<br/>        onClick={handleNext}<br/>      &gt;<br/>        Next<br/>      &lt;/Button&gt;<br/>    &lt;/&gt;<br/>  );<br/>}</span></pre><h1 id="74ed" class="jz ka hi bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated"><strong class="ak">解释</strong></h1><p id="a8e0" class="pw-post-body-paragraph iq ir hi is b it lh iv iw ix li iz ja jb lj jd je jf lk jh ji jj ll jl jm jn hb bi translated">这里，我们只使用库中的几个组件，<code class="du jo jp jq jr b">display-text</code>、<code class="du jo jp jq jr b">text-field</code>和<code class="du jo jp jq jr b">checkbox-group</code>。还有很多你可以用的。你可以在这里查看<a class="ae js" href="https://github.com/jzcling/react-material-ui-form-builder#field-props" rel="noopener ugc nofollow" target="_blank">文档</a>。请注意，一般来说，所有输入组件都有这些核心字段属性。</p><pre class="jt ju jv jw fd kx jr ky kz aw la bi"><span id="dceb" class="lb ka hi jr b fi lc ld l le lf">{</span><span id="31fd" class="lb ka hi jr b fi lg ld l le lf">  …</span><span id="fd23" class="lb ka hi jr b fi lg ld l le lf">  title: “State”, // Display text above the input</span><span id="4eb5" class="lb ka hi jr b fi lg ld l le lf">  label: “State”, // Input label</span><span id="7c7f" class="lb ka hi jr b fi lg ld l le lf">  attribute: “state”, // Attribute of the form to set/control</span><span id="2fb2" class="lb ka hi jr b fi lg ld l le lf">  component: “text-field”, // Type of component</span><span id="0185" class="lb ka hi jr b fi lg ld l le lf">  col: {</span><span id="9094" class="lb ka hi jr b fi lg ld l le lf">    // Breakpoints and corresponding width (1–12)</span><span id="7910" class="lb ka hi jr b fi lg ld l le lf">    xs: 6,</span><span id="6ec1" class="lb ka hi jr b fi lg ld l le lf">    sm: 6,</span><span id="e9a5" class="lb ka hi jr b fi lg ld l le lf">    …</span><span id="eed3" class="lb ka hi jr b fi lg ld l le lf">  },</span><span id="e64e" class="lb ka hi jr b fi lg ld l le lf">  validations: {</span><span id="c240" class="lb ka hi jr b fi lg ld l le lf">    // Any validations accepted by yup</span><span id="3a24" class="lb ka hi jr b fi lg ld l le lf">    required: true,</span><span id="29eb" class="lb ka hi jr b fi lg ld l le lf">    length: 10,</span><span id="9426" class="lb ka hi jr b fi lg ld l le lf">    min: 5,</span><span id="b5f9" class="lb ka hi jr b fi lg ld l le lf">    max: 20,</span><span id="ade7" class="lb ka hi jr b fi lg ld l le lf">    matches: [‘/[a-z]/i’, ‘Can only contain letters’],</span><span id="36fb" class="lb ka hi jr b fi lg ld l le lf">    email: true,</span><span id="1b4e" class="lb ka hi jr b fi lg ld l le lf">    url: true,</span><span id="6e85" class="lb ka hi jr b fi lg ld l le lf">    uuid: true,</span><span id="5335" class="lb ka hi jr b fi lg ld l le lf">  },</span><span id="2124" class="lb ka hi jr b fi lg ld l le lf">}</span></pre><h1 id="2510" class="jz ka hi bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated"><strong class="ak">结束语</strong></h1><p id="b692" class="pw-post-body-paragraph iq ir hi is b it lh iv iw ix li iz ja jb lj jd je jf lk jh ji jj ll jl jm jn hb bi translated">实际上，我在<a class="ae js" href="https://build.formblob.com/builder" rel="noopener ugc nofollow" target="_blank"> FormBlob </a>上点击了3次并做了一些重命名，就创建了上面的表单。尝试一下，让建筑形式变得轻而易举。如果你是一名开发人员，<a class="ae js" href="https://build.formblob.com/p/05f25c5d-0f7b-446b-931c-afd2d876499b" rel="noopener ugc nofollow" target="_blank">联系我们</a>，我会为你打开一个功能，将你构建的表单导出到你自己的项目中。或者，您甚至可以完全在FormBlob上构建和部署托管表单，并将表单嵌入到您自己的域中。如果你使用这种方法，你不必在你的应用程序中使用React，它仍然开箱即用！</p><p id="5f29" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果担心数据隐私，可以定义webhooks在每次提交时调用，将表单数据传递到自己的后端。如果您选择，FormBlob不会在我们的服务器上存储表单结构之外的任何数据。</p></div></div>    
</body>
</html>