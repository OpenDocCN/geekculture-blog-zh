<html>
<head>
<title>Install Grafana in Any Cloud VM for Monitoring</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在任何云虚拟机中安装Grafana进行监控</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/install-grafana-in-any-cloud-vm-for-monitoring-868f6436162d?source=collection_archive---------6-----------------------#2021-05-05">https://medium.com/geekculture/install-grafana-in-any-cloud-vm-for-monitoring-868f6436162d?source=collection_archive---------6-----------------------#2021-05-05</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="8718" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">在EC2上安装Grafana，并以自动启动方式启动</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/1916af34e97b9c1d59ffcded132844c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8S0jbn12Gyvo0UM1o14piw.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx"><strong class="bd jn">Credit: Some Random dude on Google Images</strong></figcaption></figure><h2 id="a5c5" class="jo jp hi bd jn jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">Grafana是什么？</h2><p id="a14a" class="pw-post-body-paragraph kl km hi kn b ko kp ij kq kr ks im kt jy ku kv kw kc kx ky kz kg la lb lc ld hb bi translated">Grafana是一个很棒的工具，可以帮助你查询、可视化和创建可视化警报。终端用户可以使用交互式查询构建器创建复杂的监控仪表板。在这篇博客中，我们将把它安装在AWS EC2实例中。但是在不同的云虚拟机中安装它的方法是相似的，只有名称不同，如下所示</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es le"><img src="../Images/ab10cb6f3a3255e3831402cb395942ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jauus3N8Q-3HIFDaDD4YAQ.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx"><strong class="bd jn">cloud_comparison</strong></figcaption></figure><h2 id="7a04" class="jo jp hi bd jn jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated"><strong class="ak"> Grafana功能:</strong></h2><p id="c31e" class="pw-post-body-paragraph kl km hi kn b ko kp ij kq kr ks im kt jy ku kv kw kc kx ky kz kg la lb lc ld hb bi translated">这是一个开源工具，所以它有一个很棒的社区，因为我们可以张贴任何类型的问题，互联网上的随机家伙肯定会尽快回答这些问题。</p><p id="0ec2" class="pw-post-body-paragraph kl km hi kn b ko lf ij kq kr lg im kt jy lh kv kw kc li ky kz kg lj lb lc ld hb bi translated">此外，它支持同一个仪表板中的所有主要数据库。</p><p id="cf70" class="pw-post-body-paragraph kl km hi kn b ko lf ij kq kr lg im kt jy lh kv kw kc li ky kz kg lj lb lc ld hb bi translated">根据我的个人经验，这对于时间序列数据库来说工作得很好。我发现它非常有帮助。</p><h2 id="d1f6" class="jo jp hi bd jn jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated"><strong class="ak">在EC2实例中安装Grafana的步骤:</strong></h2><ul class=""><li id="aee1" class="lk ll hi kn b ko kp kr ks jy lm kc ln kg lo ld lp lq lr ls bi translated">使用基于Ubuntu / Linux的操作系统创建EC2实例</li><li id="8ca3" class="lk ll hi kn b ko lt kr lu jy lv kc lw kg lx ld lp lq lr ls bi translated">配置安全组</li><li id="884c" class="lk ll hi kn b ko lt kr lu jy lv kc lw kg lx ld lp lq lr ls bi translated">安装Grafana</li><li id="e9a4" class="lk ll hi kn b ko lt kr lu jy lv kc lw kg lx ld lp lq lr ls bi translated">将Grafana添加到APT存储库</li><li id="794a" class="lk ll hi kn b ko lt kr lu jy lv kc lw kg lx ld lp lq lr ls bi translated">启动并向Grafana添加自动启动</li><li id="380f" class="lk ll hi kn b ko lt kr lu jy lv kc lw kg lx ld lp lq lr ls bi translated">登录Grafana仪表板</li></ul><h2 id="4c41" class="jo jp hi bd jn jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated"><strong class="ak">步骤1:创建一个EC2实例</strong></h2><p id="cc20" class="pw-post-body-paragraph kl km hi kn b ko kp ij kq kr ks im kt jy ku kv kw kc kx ky kz kg la lb lc ld hb bi translated">你可以用Ubuntu创建一个EC2实例，并获取任何免费的东西，就像我刚才做的那样。</p><h2 id="8166" class="jo jp hi bd jn jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated"><strong class="ak">步骤2:配置安全组</strong></h2><p id="2d5d" class="pw-post-body-paragraph kl km hi kn b ko kp ij kq kr ks im kt jy ku kv kw kc kx ky kz kg la lb lc ld hb bi translated">使用开放22和3000端口创建一个安全组。</p><p id="0602" class="pw-post-body-paragraph kl km hi kn b ko lf ij kq kr lg im kt jy lh kv kw kc li ky kz kg lj lb lc ld hb bi translated"><strong class="kn hj"> 22端口→ </strong> ssh访问</p><p id="7e17" class="pw-post-body-paragraph kl km hi kn b ko lf ij kq kr lg im kt jy lh kv kw kc li ky kz kg lj lb lc ld hb bi translated"><strong class="kn hj"> 3000端口→ </strong>通过网络浏览器访问Grafana仪表盘</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ly"><img src="../Images/65b64a6e54652f50ac8cf2e0cc1d75f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0f7-TfTHf8ULBKQVgrWIcQ.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx"><strong class="bd jn">Security_rules</strong></figcaption></figure><h2 id="43f7" class="jo jp hi bd jn jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated"><strong class="ak">第三步:安装Grafana </strong></h2><p id="71bc" class="pw-post-body-paragraph kl km hi kn b ko kp ij kq kr ks im kt jy ku kv kw kc kx ky kz kg la lb lc ld hb bi translated">始终确保获得最新版本。您可以通过下面给出的链接进行验证，</p><div class="lz ma ez fb mb mc"><a href="https://grafana.com/grafana/download?platform=linux" rel="noopener  ugc nofollow" target="_blank"><div class="md ab dw"><div class="me ab mf cl cj mg"><h2 class="bd hj fi z dy mh ea eb mi ed ef hh bi translated">下载Grafana</h2><div class="mj l"><h3 class="bd b fi z dy mh ea eb mi ed ef dx translated">阅读Ubuntu / Debian，我们还提供了安装指南以获取更多信息。APT包存储库。OpenSUSE…</h3></div><div class="mk l"><p class="bd b fp z dy mh ea eb mi ed ef dx translated">grafana.com</p></div></div><div class="ml l"><div class="mm l mn mo mp ml mq jh mc"/></div></div></a></div><p id="9160" class="pw-post-body-paragraph kl km hi kn b ko lf ij kq kr lg im kt jy lh kv kw kc li ky kz kg lj lb lc ld hb bi translated"><strong class="kn hj">代码:</strong></p><pre class="iy iz ja jb fd mr ms mt mu aw mv bi"><span id="4f0c" class="jo jp hi ms b fi mw mx l my mz"><strong class="ms hj">sudo apt-get install -y adduser libfontconfig1</strong></span><span id="e72b" class="jo jp hi ms b fi na mx l my mz"><strong class="ms hj">sudo wget </strong><a class="ae nb" href="https://dl.grafana.com/oss/release/grafana_7.5.5_amd64.deb" rel="noopener ugc nofollow" target="_blank"><strong class="ms hj">https://dl.grafana.com/oss/release/grafana_7.5.5_amd64.deb</strong></a></span></pre><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nc"><img src="../Images/cda08d0df46cc3b814108daa9dceb08f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*isHMb-bBguHuYCIA6vhP8A.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx"><strong class="bd jn">wget_command</strong></figcaption></figure><p id="0c4b" class="pw-post-body-paragraph kl km hi kn b ko lf ij kq kr lg im kt jy lh kv kw kc li ky kz kg lj lb lc ld hb bi translated"><strong class="kn hj">代码:</strong></p><pre class="iy iz ja jb fd mr ms mt mu aw mv bi"><span id="13ea" class="jo jp hi ms b fi mw mx l my mz"><strong class="ms hj">sudo dpkg -i grafana_7.5.5_amd64.deb</strong></span></pre><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nd"><img src="../Images/723b09e9c980376fed202ee52f9379c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9NiPKbffWyivBtGig4GIBw.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx"><strong class="bd jn">dpkg_code</strong></figcaption></figure><h2 id="bacb" class="jo jp hi bd jn jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated"><strong class="ak">步骤4:将Grafana源代码添加到我们的APT资源库中</strong></h2><blockquote class="ne nf ng"><p id="edfc" class="kl km nh kn b ko lf ij kq kr lg im kt ni lh kv kw nj li ky kz nk lj lb lc ld hb bi translated">注意:APT Repository →它是一个deb包的集合，带有apt-*系列工具(即apt-get)可读的元数据。有了APT库，你就可以执行包的安装、删除、升级等等(思考能力的终结)…！</p></blockquote><p id="6100" class="pw-post-body-paragraph kl km hi kn b ko lf ij kq kr lg im kt jy lh kv kw kc li ky kz kg lj lb lc ld hb bi translated">我们需要修改我们的<strong class="kn hj"> /etc/apt/sources.list </strong>文件，在它的底部添加一行。</p><pre class="iy iz ja jb fd mr ms mt mu aw mv bi"><span id="226e" class="jo jp hi ms b fi mw mx l my mz"><strong class="ms hj">sudo nano /etc/apt/sources.list</strong></span></pre><p id="d82e" class="pw-post-body-paragraph kl km hi kn b ko lf ij kq kr lg im kt jy lh kv kw kc li ky kz kg lj lb lc ld hb bi translated">使用向下箭头键一直向下滚动到底部，直到无法向下滚动，然后在底部添加以下行:</p><pre class="iy iz ja jb fd mr ms mt mu aw mv bi"><span id="9d0d" class="jo jp hi ms b fi mw mx l my mz"><strong class="ms hj">deb </strong><a class="ae nb" href="https://packagecloud.io/grafana/stable/debian/" rel="noopener ugc nofollow" target="_blank"><strong class="ms hj">https://packagecloud.io/grafana/stable/debian/</strong></a><strong class="ms hj"> stretch main</strong></span></pre><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nl"><img src="../Images/8178da85fe80adfd4b989e9ea13189d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GfITbzW9AjcZIV1PLNnGjQ.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx"><strong class="bd jn">adding_grafana_source_repo</strong></figcaption></figure><p id="727d" class="pw-post-body-paragraph kl km hi kn b ko lf ij kq kr lg im kt jy lh kv kw kc li ky kz kg lj lb lc ld hb bi translated">现在我们需要添加包云密钥。这允许我们安装签名包。</p><pre class="iy iz ja jb fd mr ms mt mu aw mv bi"><span id="4ff9" class="jo jp hi ms b fi mw mx l my mz"><strong class="ms hj">curl </strong><a class="ae nb" href="https://packagecloud.io/gpg.key" rel="noopener ugc nofollow" target="_blank"><strong class="ms hj">https://packagecloud.io/gpg.key</strong></a><strong class="ms hj"> | sudo apt-key add -</strong></span></pre><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nm"><img src="../Images/71e232efce0ff485ec028679186c1c83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XWa9OJAM4BO3P5oQTmJ0fA.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx"><strong class="bd jn">adding_grafana_source_repo</strong></figcaption></figure><p id="c7dc" class="pw-post-body-paragraph kl km hi kn b ko lf ij kq kr lg im kt jy lh kv kw kc li ky kz kg lj lb lc ld hb bi translated">一旦你完成了这个，我们必须再次更新和验证它，以确保我们所做的一切进展顺利。</p><pre class="iy iz ja jb fd mr ms mt mu aw mv bi"><span id="d38b" class="jo jp hi ms b fi mw mx l my mz"><strong class="ms hj">sudo apt-get update</strong></span></pre><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nn"><img src="../Images/0c257e03dea4515606a0b29ec4759a14.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E6UzGgdg1G8876Q6RbTL2A.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx"><strong class="bd jn">install_grafana</strong></figcaption></figure><h2 id="dcb6" class="jo jp hi bd jn jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated"><strong class="ak">步骤5:启动Grafana服务器并将其添加到自动启动</strong></h2><p id="d412" class="pw-post-body-paragraph kl km hi kn b ko kp ij kq kr ks im kt jy ku kv kw kc kx ky kz kg la lb lc ld hb bi translated">启动Grafana很简单，只需启动如下所示的服务</p><pre class="iy iz ja jb fd mr ms mt mu aw mv bi"><span id="2590" class="jo jp hi ms b fi mw mx l my mz"><strong class="ms hj">sudo service grafana-server start</strong></span></pre><p id="9b66" class="pw-post-body-paragraph kl km hi kn b ko lf ij kq kr lg im kt jy lh kv kw kc li ky kz kg lj lb lc ld hb bi translated">现在我们将它添加到自动启动，运行:</p><pre class="iy iz ja jb fd mr ms mt mu aw mv bi"><span id="1808" class="jo jp hi ms b fi mw mx l my mz"><strong class="ms hj">sudo update-rc.d grafana-server defaults</strong></span><span id="f772" class="jo jp hi ms b fi na mx l my mz"><strong class="ms hj">sudo systemctl enable grafana-server.service</strong></span></pre><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es no"><img src="../Images/27f6df8beb40052fc701e2d769405973.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9NhgcU-kW60RCNM3UnwV7A.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx"><strong class="bd jn">adding_autostart</strong></figcaption></figure><p id="57ec" class="pw-post-body-paragraph kl km hi kn b ko lf ij kq kr lg im kt jy lh kv kw kc li ky kz kg lj lb lc ld hb bi translated">好了，现在是可视化输出的时候了…！！！</p><p id="bcbf" class="pw-post-body-paragraph kl km hi kn b ko lf ij kq kr lg im kt jy lh kv kw kc li ky kz kg lj lb lc ld hb bi translated"><strong class="kn hj">登录Grafana </strong></p><p id="d925" class="pw-post-body-paragraph kl km hi kn b ko lf ij kq kr lg im kt jy lh kv kw kc li ky kz kg lj lb lc ld hb bi translated">打开Web浏览器，输入服务器的IP地址，然后输入端口3000，如下所示</p><blockquote class="np"><p id="3cb6" class="nq nr hi bd ns nt nu nv nw nx ny ld dx translated">http:// <you ip="" address=""> :3000</you></p></blockquote><p id="394b" class="pw-post-body-paragraph kl km hi kn b ko nz ij kq kr oa im kt jy ob kv kw kc oc ky kz kg od lb lc ld hb bi translated">然后，Grafana登录窗口会向您问候。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es oe"><img src="../Images/fefe1b89278b3813e0feabdba8d83363.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*efVk7FZMqpvKKNGhwXMEow.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx"><strong class="bd jn">finally_grafana_board</strong></figcaption></figure><blockquote class="ne nf ng"><p id="0f02" class="kl km nh kn b ko lf ij kq kr lg im kt ni lh kv kw nj li ky kz nk lj lb lc ld hb bi translated"><strong class="kn hj">注:</strong></p><p id="7360" class="kl km nh kn b ko lf ij kq kr lg im kt ni lh kv kw nj li ky kz nk lj lb lc ld hb bi translated"><strong class="kn hj">用户名:管理员</strong></p><p id="3fba" class="kl km nh kn b ko lf ij kq kr lg im kt ni lh kv kw nj li ky kz nk lj lb lc ld hb bi translated"><strong class="kn hj">密码:admin </strong></p></blockquote><p id="1042" class="pw-post-body-paragraph kl km hi kn b ko lf ij kq kr lg im kt jy lh kv kw kc li ky kz kg lj lb lc ld hb bi translated">输入详细信息后，系统会提示您更改用户名和密码，请根据您的意愿进行更改</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es of"><img src="../Images/e262d3a5a3b18d7b314f3d32227235cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1052/format:webp/1*PO4FF_mdJu6Cn-yOdkAeSg.png"/></div><figcaption class="jj jk et er es jl jm bd b be z dx"><strong class="bd jn">new_password_prompt</strong></figcaption></figure><p id="b5b0" class="pw-post-body-paragraph kl km hi kn b ko lf ij kq kr lg im kt jy lh kv kw kc li ky kz kg lj lb lc ld hb bi translated">在此之后，您将最终看到Grafana仪表板。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es og"><img src="../Images/f79a2030023a83d7c54ae4224b05cfd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Fmcwm0-PMXxWVuu0IsdaNw.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx"><strong class="bd jn">atlast_grafana</strong></figcaption></figure><p id="481d" class="pw-post-body-paragraph kl km hi kn b ko lf ij kq kr lg im kt jy lh kv kw kc li ky kz kg lj lb lc ld hb bi translated">我在这个博客中使用的Grafana版本是7.5.5</p><p id="0e10" class="pw-post-body-paragraph kl km hi kn b ko lf ij kq kr lg im kt jy lh kv kw kc li ky kz kg lj lb lc ld hb bi translated">如果您想实现Grafana来获得EC2实例中的云观察指标，那么请查看下面的博客，</p><div class="lz ma ez fb mb mc"><a href="https://narenltk.medium.com/grafana-to-visualize-the-aws-cloud-watch-metrics-6b55533fde36" rel="noopener follow" target="_blank"><div class="md ab dw"><div class="me ab mf cl cj mg"><h2 class="bd hj fi z dy mh ea eb mi ed ef hh bi translated">Grafana可视化AWS云观察指标</h2><div class="mj l"><h3 class="bd b fi z dy mh ea eb mi ed ef dx translated">使用凭证文件方法可视化云观察指标</h3></div><div class="mk l"><p class="bd b fp z dy mh ea eb mi ed ef dx translated">narenltk.medium.com</p></div></div><div class="ml l"><div class="oh l mn mo mp ml mq jh mc"/></div></div></a></div><blockquote class="ne nf ng"><p id="647d" class="kl km nh kn b ko lf ij kq kr lg im kt ni lh kv kw nj li ky kz nk lj lb lc ld hb bi translated"><strong class="kn hj">如果您希望保持连接，</strong></p></blockquote><div class="lz ma ez fb mb mc"><a href="https://www.linkedin.com/in/narenltk/" rel="noopener  ugc nofollow" target="_blank"><div class="md ab dw"><div class="me ab mf cl cj mg"><h2 class="bd hj fi z dy mh ea eb mi ed ef hh bi translated">Narendiran Krishnan —印度泰米尔纳德邦哥印拜陀|职业简介| LinkedIn</h2><div class="mj l"><h3 class="bd b fi z dy mh ea eb mi ed ef dx translated">查看世界上最大的职业社区LinkedIn上Narendiran Krishnan的个人资料。纳伦德兰有6份工作…</h3></div><div class="mk l"><p class="bd b fp z dy mh ea eb mi ed ef dx translated">www.linkedin.com</p></div></div><div class="ml l"><div class="oi l mn mo mp ml mq jh mc"/></div></div></a></div><div class="lz ma ez fb mb mc"><a href="https://github.com/narenltk" rel="noopener  ugc nofollow" target="_blank"><div class="md ab dw"><div class="me ab mf cl cj mg"><h2 class="bd hj fi z dy mh ea eb mi ed ef hh bi translated">narenltk —概述</h2><div class="mj l"><h3 class="bd b fi z dy mh ea eb mi ed ef dx translated">骗人的把戏。需要咖啡来聚焦…！！！narenltk有10个可用的存储库。在GitHub上关注他们的代码。</h3></div><div class="mk l"><p class="bd b fp z dy mh ea eb mi ed ef dx translated">github.com</p></div></div><div class="ml l"><div class="oj l mn mo mp ml mq jh mc"/></div></div></a></div><blockquote class="ne nf ng"><p id="706f" class="kl km nh kn b ko lf ij kq kr lg im kt ni lh kv kw nj li ky kz nk lj lb lc ld hb bi translated">你可以谷歌一下“narenltk / narendiran krishnan ”,或者发邮件到→narenltk@gmail.com→乐意帮忙..！！！</p></blockquote></div></div>    
</body>
</html>