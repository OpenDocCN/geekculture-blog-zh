<html>
<head>
<title>GitHub CLI in combination with fzf</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">GitHub CLI与fzf结合使用</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/so-lets-talk-about-github-cli-5155f299d88c?source=collection_archive---------0-----------------------#2020-09-21">https://medium.com/geekculture/so-lets-talk-about-github-cli-5155f299d88c?source=collection_archive---------0-----------------------#2020-09-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="6743" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">那么，让我们来谈谈GitHub CLI。上周，2020年9月17日，GitHub发布了其CLI工具的首个稳定版本。该工具可以帮助我们创建和列出拉动式请求，我们还可以创建新问题、列出问题等。让我们在实践中检验一下，这个工具能做什么。</p><p id="92cd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，我们需要安装它。在macOS上，事情很简单:</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="5a2a" class="jm jn hi ji b fi jo jp l jq jr">brew install gh</span></pre><p id="0cc7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，您需要做的是身份验证。您可以使用两种不同的方法进行身份验证。</p><ul class=""><li id="abd1" class="js jt hi ih b ii ij im in iq ju iu jv iy jw jc jx jy jz ka bi translated">凭证认证</li><li id="7d7a" class="js jt hi ih b ii kb im kc iq kd iu ke iy kf jc jx jy jz ka bi translated">GitHub令牌认证(必须设置env变量)</li></ul><p id="1140" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，让我们选择类型，并运行以下命令</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="d5e3" class="jm jn hi ji b fi jo jp l jq jr">gh auth login</span></pre><p id="5614" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">系统会提示您选择要登录哪个帐户，以及如何进行身份验证。我将把这一部分留给您来决定如何进行身份验证。</p></div><div class="ab cl kg kh gp ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="hb hc hd he hf"><p id="a652" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们已经通过了认证，让我们来看看更有趣的东西:)</p><p id="528a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们创建我们的第一期。要创建问题，我们必须运行以下命令</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="ec85" class="jm jn hi ji b fi jo jp l jq jr">gh issue create</span></pre><p id="b13b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我认为这个命令是不言自明的:)你会被提示输入标题，正文，然后你会选择如果你想添加一些元数据，如受让人等。最后，提交。</p><figure class="jd je jf jg fd ko er es paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="er es kn"><img src="../Images/65a39d0243c6024ebbcfac327aa80d18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MsT_UGp9C7Zs2L32OCxzWA.png"/></div></div><figcaption class="kv kw et er es kx ky bd b be z dx">Created issue with gh</figcaption></figure><p id="9f60" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">继续，创造一些其他问题。完成后，您可以使用以下命令列出您的问题:</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="a1d2" class="jm jn hi ji b fi jo jp l jq jr">gh issue list</span></pre><p id="a0d6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您想查看具体问题，只需运行以下命令</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="78be" class="jm jn hi ji b fi jo jp l jq jr">gh issue view #numberOfIssue</span></pre><p id="0718" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以通过拉取请求来完成所有这些事情。只需输入pr关键字，而不是issue关键字，一切都会变得很有魅力。</p></div><div class="ab cl kg kh gp ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="hb hc hd he hf"><p id="5c5a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是让我们面对它，我们不想看到问题列表，特别是如果有数百个问题。我们想搜索这个问题或拉请求。fzf工具来了。我爱上了这个工具。如果您不知道这个工具，请查看一下。但这是fzf工具的快速介绍:</p><blockquote class="kz la lb"><p id="7336" class="if ig lc ih b ii ij ik il im in io ip ld ir is it le iv iw ix lf iz ja jb jc hb bi translated">fzf是一个通用的命令行模糊查找器。这是一个交互式的Unix命令行过滤器，可用于任何列表；文件、命令历史、进程、主机名、书签、git提交等。</p></blockquote><p id="c382" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们试着把gh和fzf结合起来。我们可以搜索这样的问题</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="9147" class="jm jn hi ji b fi jo jp l jq jr">gh issue list | fzf</span></pre><p id="8591" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这会给你这样的东西</p><figure class="jd je jf jg fd ko er es paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="er es lg"><img src="../Images/4ab3713023bc40abe50b313b35b288b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6J4ymAwIPW60meJS3DXuLw.png"/></div></div><figcaption class="kv kw et er es kx ky bd b be z dx">gh issue list in combination with fzf</figcaption></figure><p id="5499" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以现在，你只要去开始打字。所有这些的美妙之处在于，你可以通过状态(开放)、标题或日期进行搜索。去试试吧。</p><figure class="jd je jf jg fd ko er es paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="er es lh"><img src="../Images/12b052b97908ce661f40961f9169410c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pU5CHo1YpZ_ZYmO6eY2eJg.png"/></div></div><figcaption class="kv kw et er es kx ky bd b be z dx">Search by title</figcaption></figure><figure class="jd je jf jg fd ko er es paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="er es li"><img src="../Images/84b69ac681631769cd80d1bcdd460ed5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Vz6uSzjibqp4t2YHdtQb3A.png"/></div></div><figcaption class="kv kw et er es kx ky bd b be z dx">Search by date</figcaption></figure><p id="b8f3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这不是很棒吗？确实是，但是对我们没有大的好处。我们需要在终端中看到问题，我们想打开这个问题等。我们可以像这样使用fzf的预览选项</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="a900" class="jm jn hi ji b fi jo jp l jq jr">gh issue list | fzf --preview "gh issue view {-1}"</span></pre><p id="578e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用此命令，我们能够预览问题。我们仍然可以搜索问题，但是我们也将能够看到关于这个问题的更多信息</p><figure class="jd je jf jg fd ko er es paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="er es lj"><img src="../Images/4d18089145844ed5d1f397808f3712df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DF4RjaFnZ5LoR5K8xMppqw.png"/></div></div><figcaption class="kv kw et er es kx ky bd b be z dx">gh issue with fzf preview</figcaption></figure><p id="2b4b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是如果您愿意，也可以在浏览器中打开该问题，如下所示:</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="bbd7" class="jm jn hi ji b fi jo jp l jq jr">gh issue list | fzf --preview "gh issue view {+1}" | awk '{print $1}' | xargs gh issue view --web</span></pre><p id="dfe3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">由于fzf正在返回问题(您在fzf中看到的行)，我们需要提取问题编号(第一列)并将其传递给gh问题视图命令。要在浏览器中打开问题，我们必须将web开关附加到命令中。</p><p id="a5eb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正如我之前已经说过的，您也可以通过拉请求来实现这一点。要检查拉请求中的所有差异，可以使用以下命令:</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="e6ee" class="jm jn hi ji b fi jo jp l jq jr">gh pr list | fzf --preview "gh pr diff --color=always {+1}"</span></pre><p id="d930" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，您应该清楚这一行是做什么的了。没什么特别的。它只是预览拉取请求中的更改。我还没有在大型拉取请求上测试过这一点。</p></div><div class="ab cl kg kh gp ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="hb hc hd he hf"><p id="33ec" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我相信这个工具将帮助我节省一些时间来创建PR、创建发布等。但还是有些东西是我想拥有的。我想用(n)vim代替nano来写issue body。我还想有一些选项，看看什么文件/提交在两个版本之间发生了变化，等等。但是这只是一些小事情，并不能抵消第一个稳定版本中所有好的东西。</p></div></div>    
</body>
</html>