<html>
<head>
<title>Customizing Swagger in ASP.NET Core 5</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在ASP.NET核心5中定制Swagger</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/customizing-swagger-in-asp-net-core-5-2c98d03cbe52?source=collection_archive---------4-----------------------#2021-08-16">https://medium.com/geekculture/customizing-swagger-in-asp-net-core-5-2c98d03cbe52?source=collection_archive---------4-----------------------#2021-08-16</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/2e118b762dc16443d871e70dd8863985.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1MQjoHHa3oso_3Q7oaCFXQ.png"/></div></div></figure><p id="773e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们中的许多人使用<strong class="is hj"> Swagger </strong>和<strong class="is hj"> Swashbuckle </strong>来记录C #中的API。它们非常容易使用，以至于它们已经包含在<em class="jo"> webapi </em>基础模板项目中。得益于此，我们可以减少记录服务所花费的时间。但是有时候默认配置是不够的。在这篇文章中，我将给出一些提示和例子，说明如何根据我们的喜好定制swagger。</p><h1 id="1527" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">包括注释</h1><p id="01e0" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">在Swagger中丰富文档的最好方法是在源代码中使用注释。首先，在您的项目解决方案中将<strong class="is hj">generated documentation file</strong>选项设置为<em class="jo"> true </em>。</p><figure class="ks kt ku kv fd ij"><div class="bz dy l di"><div class="kw kx l"/></div><figcaption class="ky kz et er es la lb bd b be z dx">Enable generate documentation file</figcaption></figure><p id="0412" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后配置Swager以包含XML注释。</p><figure class="ks kt ku kv fd ij"><div class="bz dy l di"><div class="kw kx l"/></div><figcaption class="ky kz et er es la lb bd b be z dx">Include XML comments</figcaption></figure><p id="6c12" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">剩下的就看你的了。您应该为您的所有端点编写一份完整的文档。我会给你看一个你应该在评论中包含什么的例子。</p><figure class="ks kt ku kv fd ij"><div class="bz dy l di"><div class="kw kx l"/></div><figcaption class="ky kz et er es la lb bd b be z dx">Comments example</figcaption></figure><p id="45b9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">结果将是这样的:</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lc"><img src="../Images/57eb9314a67d0a4d851918cc67c48d39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ecGvgcNMkE0wljt9VQfcqA.png"/></div></div></figure><h1 id="ce68" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">填写开放API信息</h1><p id="5859" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">为您的开放API填写元数据</p><ul class=""><li id="23be" class="ld le hi is b it iu ix iy jb lf jf lg jj lh jn li lj lk ll bi translated"><strong class="is hj">标题</strong></li><li id="dff1" class="ld le hi is b it lm ix ln jb lo jf lp jj lq jn li lj lk ll bi translated"><strong class="is hj">描述</strong>:服务的简短描述。</li><li id="462f" class="ld le hi is b it lm ix ln jb lo jf lp jj lq jn li lj lk ll bi translated"><strong class="is hj">版本</strong>:开放API文档的版本。是必需的。</li><li id="08de" class="ld le hi is b it lm ix ln jb lo jf lp jj lq jn li lj lk ll bi translated"><strong class="is hj">服务条款</strong>:API服务条款的URL。必须采用URL的格式。</li><li id="dfb6" class="ld le hi is b it lm ix ln jb lo jf lp jj lq jn li lj lk ll bi translated"><strong class="is hj">联系人</strong>:暴露API的联系方式。</li><li id="91eb" class="ld le hi is b it lm ix ln jb lo jf lp jj lq jn li lj lk ll bi translated"><strong class="is hj"> License </strong>:公开的API的许可信息。</li></ul><figure class="ks kt ku kv fd ij"><div class="bz dy l di"><div class="kw kx l"/></div></figure><h1 id="ff05" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">将URL转换为小写</h1><p id="4599" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">默认情况下，路线以大写字母开头，对我来说可读性较差。比如<strong class="is hj"> api/Teams </strong>而不是<strong class="is hj"> api/teams </strong>。为了解决这个问题，我们可以编写一个简单的过滤器。</p><figure class="ks kt ku kv fd ij"><div class="bz dy l di"><div class="kw kx l"/></div><figcaption class="ky kz et er es la lb bd b be z dx">PathLowercaseDocumentFilter.cs</figcaption></figure><p id="1f41" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后注册过滤器:</p><figure class="ks kt ku kv fd ij"><div class="bz dy l di"><div class="kw kx l"/></div><figcaption class="ky kz et er es la lb bd b be z dx">Registering the filter</figcaption></figure><h1 id="ab9a" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">更改文档路径</h1><p id="7240" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">默认情况下，Swagger文档位于路径<em class="jo"> /swagger </em>中。为此，我们只需更改<strong class="is hj"> RoutePrefix </strong>和<strong class="is hj"> RouteTemplate </strong>属性。</p><figure class="ks kt ku kv fd ij"><div class="bz dy l di"><div class="kw kx l"/></div><figcaption class="ky kz et er es la lb bd b be z dx">Changing route to /<strong class="ak">docs/api</strong></figcaption></figure><h1 id="6d31" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">风格招摇💅</h1><p id="2086" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">我们可以覆盖默认的样式，注入我们自己的CSS文件。考虑到我们必须有<strong class="is hj">应用程序。UseStaticFiles() </strong>已启用。然后在<strong class="is hj"> wwwroot </strong>文件夹中创建一个CSS文件。</p><figure class="ks kt ku kv fd ij"><div class="bz dy l di"><div class="kw kx l"/></div><figcaption class="ky kz et er es la lb bd b be z dx">Add custom CSS</figcaption></figure><p id="e453" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你可以在网上找到各种各样的招摇主题，从这里开始:</p><div class="lr ls ez fb lt lu"><a href="https://github.com/ostranme/swagger-ui-themes/" rel="noopener  ugc nofollow" target="_blank"><div class="lv ab dw"><div class="lw ab lx cl cj ly"><h2 class="bd hj fi z dy lz ea eb ma ed ef hh bi translated">GitHub-ost ranme/swagger-ui-themes:一个CSS主题集合，为你的Swagger文档增添趣味</h2><div class="mb l"><h3 class="bd b fi z dy lz ea eb ma ed ef dx translated">招摇过市的医生很棒。为什么不让他们看起来更好！下载swagger-ui-themes项目并放置所需的…</h3></div><div class="mc l"><p class="bd b fp z dy lz ea eb ma ed ef dx translated">github.com</p></div></div><div class="md l"><div class="me l mf mg mh md mi io lu"/></div></div></a></div><h1 id="419a" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">添加静态侧栏</h1><p id="94f2" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">通过包含一个静态的导航条，让你的API更加个性化。在<strong class="is hj"> wwwroot </strong>中添加一个HTML文件，其中包含您的自定义栏的源代码。</p><figure class="ks kt ku kv fd ij"><div class="bz dy l di"><div class="kw kx l"/></div><figcaption class="ky kz et er es la lb bd b be z dx">wwwroot/custom-sidebar.html</figcaption></figure><figure class="ks kt ku kv fd ij"><div class="bz dy l di"><div class="kw kx l"/></div><figcaption class="ky kz et er es la lb bd b be z dx">Add styles to wwwroot/swagger-custom.css</figcaption></figure><p id="6e0f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">通过设置<strong class="is hj"> HeadContent将您的导航栏包含在UI配置中。</strong></p><figure class="ks kt ku kv fd ij"><div class="bz dy l di"><div class="kw kx l"/></div></figure><figure class="ks kt ku kv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mj"><img src="../Images/9ac1dc0c1fc511d30d09f9ee8663ac40.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5aPunLTTPvbj2ILh4fwvCA.png"/></div></div><figcaption class="ky kz et er es la lb bd b be z dx">Static custom sidebar</figcaption></figure><h1 id="c094" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">添加自定义JS</h1><p id="82e1" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">添加JavaScript非常容易。您所要做的就是在<strong class="is hj"> wwwroot </strong>文件夹中创建一个JS文件，然后将其作为SwaggerUI配置的一部分。</p><figure class="ks kt ku kv fd ij"><div class="bz dy l di"><div class="kw kx l"/></div></figure><p id="2f35" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您还可以包含外部库，如jQuery。</p><figure class="ks kt ku kv fd ij"><div class="bz dy l di"><div class="kw kx l"/></div></figure></div><div class="ab cl mk ml gp mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="hb hc hd he hf"><h1 id="ffb3" class="jp jq hi bd jr js mr ju jv jw ms jy jz ka mt kc kd ke mu kg kh ki mv kk kl km bi translated">就这样</h1><p id="7963" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">通过这些简单的步骤，您可以根据自己的喜好定制Swagger，并赋予它更好的外观。我希望这篇关于如何定制ASP.NET Core 5的文章对您有所帮助。非常感谢您的阅读。</p></div></div>    
</body>
</html>