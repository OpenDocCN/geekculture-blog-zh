<html>
<head>
<title>How to Upload Multiple Images in Laravel</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Laravel中上传多张图片</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/how-to-upload-multiple-images-in-laravel-b98c95324594?source=collection_archive---------0-----------------------#2021-08-30">https://medium.com/geekculture/how-to-upload-multiple-images-in-laravel-b98c95324594?source=collection_archive---------0-----------------------#2021-08-30</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/e9bcaa85fea77681ee526ef4a834704a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AVdW_cbM62u-qZL-qcxbbg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Image by <a class="ae iu" href="https://www.positronx.io/laravel-multiple-images-upload-with-validation-example/" rel="noopener ugc nofollow" target="_blank">positronx.io</a></figcaption></figure><p id="4919" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">很多网站要求用户上传一个产品的多张图片。这尤其适用于电子商务网站。多张图片被用来提供销售产品的大量细节。</p><p id="a1b7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">对于许多开发人员来说，实现多个图像上传已经被证明是困难的。在本文中，我将一步一步地向您展示如何使用laravel上传多个图像。</p></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><p id="a144" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">步骤1: </strong>使用composer创建一个新的Laravel项目。你可以给它起任何名字，但在这种情况下，我们将它命名为多重图像<em class="ka">应用</em>。</p><pre class="kb kc kd ke fd kf kg kh ki aw kj bi"><span id="9f07" class="kk kl hi kg b fi km kn l ko kp">composer create-project --prefer-dist laravel/laravel muiltipleImagesApp</span></pre><p id="c607" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">步骤2: </strong>在multipleImage <em class="ka"> App </em>项目中创建一个迁移来创建一个产品表。</p><pre class="kb kc kd ke fd kf kg kh ki aw kj bi"><span id="d4f7" class="kk kl hi kg b fi km kn l ko kp">cd multipleImagesApp<br/>php artisan make:migration create_products_table --create=products</span></pre><p id="408e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">第三步:</strong>在迁移中添加<em class="ka">名称</em>和<em class="ka">字段</em>和<em class="ka">描述</em>字段<em class="ka">。</em></p><pre class="kb kc kd ke fd kf kg kh ki aw kj bi"><span id="08c6" class="kk kl hi kg b fi km kn l ko kp">&lt;?php</span><span id="aa93" class="kk kl hi kg b fi kq kn l ko kp">use Illuminate\Support\Facades\Schema;<br/>use Illuminate\Database\Schema\Blueprint;<br/>use Illuminate\Database\Migrations\Migration;</span><span id="c2c6" class="kk kl hi kg b fi kq kn l ko kp"><em class="ka">class</em> CreateProductsTable <em class="ka">extends</em> <em class="ka">Migration<br/></em>{<br/>  <em class="ka">public</em> <em class="ka">function</em> up()<br/>  {<br/>    Schema::create('products', <em class="ka">function</em> (Blueprint $table) {<br/>      $table-&gt;bigIncrements('id');<br/>      $table-&gt;string('name');<br/>      $table-&gt;string('description');  <br/>      $table-&gt;timestamps();<br/>  });<br/>  }</span><span id="a58c" class="kk kl hi kg b fi kq kn l ko kp"><em class="ka">public</em> <em class="ka">function</em> down()<br/>  {<br/>    Schema::dropIfExists('products');<br/>  }<br/>}</span></pre><p id="74cf" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">步骤4: </strong>创建另一个迁移，该迁移将创建映像。</p><pre class="kb kc kd ke fd kf kg kh ki aw kj bi"><span id="08e3" class="kk kl hi kg b fi km kn l ko kp">php artisan make:migration create_images_table --create=images</span></pre><p id="ce83" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">步骤5: </strong>在迁移中添加字段url和product_id <em class="ka">。</em></p><pre class="kb kc kd ke fd kf kg kh ki aw kj bi"><span id="8867" class="kk kl hi kg b fi km kn l ko kp">&lt;?php</span><span id="afbf" class="kk kl hi kg b fi kq kn l ko kp">use Illuminate\Support\Facades\Schema;</span><span id="93aa" class="kk kl hi kg b fi kq kn l ko kp">use Illuminate\Database\Schema\Blueprint;</span><span id="3922" class="kk kl hi kg b fi kq kn l ko kp">use Illuminate\Database\Migrations\Migration;</span><span id="2b2a" class="kk kl hi kg b fi kq kn l ko kp"><em class="ka">class</em> CreateImagesTable <em class="ka">extends</em> <em class="ka">Migration<br/>{</em></span><span id="b8f8" class="kk kl hi kg b fi kq kn l ko kp"><em class="ka">public</em> <em class="ka">function</em> up(){<br/>  Schema::create('images', <em class="ka">function</em> (Blueprint $table) {<br/>    $table-&gt;bigIncrements('id');<br/>    $table-&gt;string('url');<br/>    $table-&gt;unsignedBigInteger('product_id');<br/>    $table-&gt;timestamps();<br/>});<br/>}</span><span id="e98f" class="kk kl hi kg b fi kq kn l ko kp"><em class="ka">public</em> <em class="ka">function</em> down(){<br/>   Schema::dropIfExists('images');<br/>}}</span></pre><p id="9e54" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">第六步:</strong>接下来，创建两个模型。一个将被称为<em class="ka">产品</em>，另一个将被称为<em class="ka">图像。</em></p><pre class="kb kc kd ke fd kf kg kh ki aw kj bi"><span id="7cac" class="kk kl hi kg b fi km kn l ko kp">php artisan make:model Product<br/>php artisan make:model Image</span></pre><p id="3e57" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">第7步:</strong>在产品模型中添加可填充数组中的<em class="ka">标题</em>和<em class="ka">内容</em>字段。接下来，创建一个与<em class="ka">图像</em>模型的一对多关系。</p><pre class="kb kc kd ke fd kf kg kh ki aw kj bi"><span id="367a" class="kk kl hi kg b fi km kn l ko kp">&lt;?php</span><span id="b9ea" class="kk kl hi kg b fi kq kn l ko kp">namespace App;</span><span id="2c9d" class="kk kl hi kg b fi kq kn l ko kp">use Illuminate\Database\Eloquent\Model;</span><span id="df11" class="kk kl hi kg b fi kq kn l ko kp"><em class="ka">class</em> Product <em class="ka">extends</em> <em class="ka">Model<br/></em>{<br/>  <em class="ka">protected</em> $table = 'products';</span><span id="3c08" class="kk kl hi kg b fi kq kn l ko kp"><em class="ka">  protected</em> $fillable = [<br/>      'name', 'discription'<br/>  ];<br/>  <em class="ka">public</em> <em class="ka">function</em> images()<br/>  {<br/>   return <em class="ka">$this</em>-&gt;hasMany('App\Image', 'product_id');<br/>  }<br/>}</span></pre><p id="1684" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">第8步:</strong>在图像模型中添加可填充数组中的<em class="ka"> url </em>和<em class="ka"> product_id </em>字段。接下来，创建与产品模型的一对多关系。</p><pre class="kb kc kd ke fd kf kg kh ki aw kj bi"><span id="ef3e" class="kk kl hi kg b fi km kn l ko kp">&lt;?php</span><span id="14c0" class="kk kl hi kg b fi kq kn l ko kp">namespace App;</span><span id="e1da" class="kk kl hi kg b fi kq kn l ko kp">use Illuminate\Database\Eloquent\Model;</span><span id="a912" class="kk kl hi kg b fi kq kn l ko kp"><em class="ka">class</em> Image <em class="ka">extends</em> <em class="ka">Model<br/></em>{<br/>  <em class="ka">protected</em> $table = 'images';</span><span id="e752" class="kk kl hi kg b fi kq kn l ko kp">  <em class="ka">protected</em> $fillable = [<br/>   'url', 'product_id'<br/>  ];</span><span id="20e5" class="kk kl hi kg b fi kq kn l ko kp"><em class="ka">public</em> <em class="ka">function</em> product()<br/>{<br/>  return <em class="ka">$this</em>-&gt;belongsTo('App\Product', 'product_id');<br/>}</span><span id="8c86" class="kk kl hi kg b fi kq kn l ko kp">}</span></pre><p id="fece" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">第九步:</strong>在<strong class="ix hj"> <em class="ka"> config/ </em> </strong>文件夹中，在一个名为<em class="ka">filesystems.php的文件中添加一个名为<em class="ka"> my_files </em>的新盘。</em></p><pre class="kb kc kd ke fd kf kg kh ki aw kj bi"><span id="a625" class="kk kl hi kg b fi km kn l ko kp">'disks' =&gt; [<br/>   'local' =&gt; [<br/>      'driver' =&gt; 'local',<br/>      'root' =&gt; storage_path('app'),<br/>   ],</span><span id="4307" class="kk kl hi kg b fi kq kn l ko kp">'public' =&gt; [<br/>      'driver' =&gt; 'local',<br/>      'root' =&gt; storage_path('app/public'),<br/>      'url' =&gt; env('APP_URL').'/storage',<br/>      'visibility' =&gt; 'public',<br/>   ],</span><span id="b77e" class="kk kl hi kg b fi kq kn l ko kp">'s3' =&gt; [<br/>      'driver' =&gt; 's3',<br/>      'key' =&gt; env('AWS_ACCESS_KEY_ID'),<br/>      'secret' =&gt; env('AWS_SECRET_ACCESS_KEY'),<br/>      'region' =&gt; env('AWS_DEFAULT_REGION'),<br/>      'bucket' =&gt; env('AWS_BUCKET'),<br/>      'url' =&gt; env('AWS_URL'),<br/>   ],</span><span id="ccf2" class="kk kl hi kg b fi kq kn l ko kp">'my_files' =&gt; [<br/>      'driver' =&gt; 'local',<br/>      'root'   =&gt; public_path() . '/'<br/>   ]<br/>],</span></pre><p id="f007" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">第十步:</strong>接下来，创建一个控制器，命名为<em class="ka"> ProductController </em>。</p><pre class="kb kc kd ke fd kf kg kh ki aw kj bi"><span id="0fde" class="kk kl hi kg b fi km kn l ko kp">php artisan make:controller ProductController</span></pre><p id="8ce5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">步骤11: </strong>给<em class="ka"> ProductController </em>添加一个名为<em class="ka"> uploadImages的函数。</em></p><pre class="kb kc kd ke fd kf kg kh ki aw kj bi"><span id="1039" class="kk kl hi kg b fi km kn l ko kp">&lt;?php</span><span id="c8f0" class="kk kl hi kg b fi kq kn l ko kp">namespace App\Http\Controllers\Admin;</span><span id="7621" class="kk kl hi kg b fi kq kn l ko kp">use Illuminate\Http\Request;</span><span id="6754" class="kk kl hi kg b fi kq kn l ko kp">use App\Http\Controllers\Controller;<br/>use Illuminate\Support\Facades\DB;<br/>use App\Product;<br/>use Image;<br/>use Storage;</span><span id="b192" class="kk kl hi kg b fi kq kn l ko kp"><em class="ka">class</em> ProductController <em class="ka">extends</em> <em class="ka">Controller<br/></em>{<br/>   <em class="ka">public</em> <em class="ka">function</em> addProduct(Request $request)<br/>   {<br/>      <em class="ka">$this</em>-&gt;validate($request, [<br/>         'name' =&gt; 'required|string|max:255',<br/>         'description' =&gt; 'required|string|max:855',<br/>   ]);</span><span id="6ce4" class="kk kl hi kg b fi kq kn l ko kp">   $product = new Product;<br/>   $product-&gt;name = $request-&gt;name;<br/>   $product-&gt;description = $request-&gt;description;<br/>   $product-&gt;save();</span><span id="6dc3" class="kk kl hi kg b fi kq kn l ko kp">   foreach ($request-&gt;file('images') as $imagefile) {</span><span id="e125" class="kk kl hi kg b fi kq kn l ko kp">     $image = new Image;<br/>     $path = $imagefile-&gt;store('/images/resource', ['disk' =&gt;   'my_files']);<br/>     $image-&gt;url = $path;<br/>     $image-&gt;product_id = $product-&gt;id;<br/>     $image-&gt;save();<br/>   }}}</span></pre><p id="c0f5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">第12步:</strong>最后在<em class="ka">web.php</em>文件的路径文件夹中</p><pre class="kb kc kd ke fd kf kg kh ki aw kj bi"><span id="cad4" class="kk kl hi kg b fi km kn l ko kp">&lt;?phpuse Illuminate\Http\Request;</span><span id="9ca0" class="kk kl hi kg b fi kq kn l ko kp">Route::post('addProduct', 'ProductController@addProduct')-&gt;name('products.uploadproduct');</span></pre><p id="669d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">第十三步:创建一个名为<em class="ka">uploadImages.blade.php的文件。</em></p><pre class="kb kc kd ke fd kf kg kh ki aw kj bi"><span id="6eb4" class="kk kl hi kg b fi km kn l ko kp">&lt;!DOCTYPE <em class="ka">html</em>&gt;<br/>&lt;html&gt;<br/>&lt;head&gt;<br/> &lt;meta <em class="ka">charset</em>="utf-8"&gt;<br/> &lt;meta <em class="ka">name</em>="viewport" <em class="ka">content</em>="width=device-width, initial-scale=1,   shrink-to-fit=no"&gt;<br/>&lt;title&gt;Multiple Image upload&lt;/title&gt;<br/>&lt;/head&gt;</span><span id="799e" class="kk kl hi kg b fi kq kn l ko kp">&lt;body&gt;</span><span id="a502" class="kk kl hi kg b fi kq kn l ko kp">&lt;div&gt;<br/>&lt;h3&gt;Upload a Images&lt;/h3&gt;<br/>&lt;hr&gt;</span><span id="a458" class="kk kl hi kg b fi kq kn l ko kp">&lt;form <em class="ka">method</em>="POST" <em class="ka">action</em>="{{ route('products.uploadproducts') }}" <em class="ka">enctype</em>="multipart/form-data" &gt;<br/>{{ csrf_field() }}<br/>&lt;div &gt;<br/>&lt;label&gt;Name&lt;/label&gt;<br/>&lt;input <em class="ka">type</em>="text" <em class="ka">name</em>="name" <em class="ka">placeholder</em>="Enter Product Name"&gt;</span><span id="8cc5" class="kk kl hi kg b fi kq kn l ko kp">&lt;label&gt;Discription&lt;/label&gt;<br/>&lt;textarea name="description" rows="4" &gt;<br/>&lt;/textarea&gt;&lt;/div&gt;</span><span id="a996" class="kk kl hi kg b fi kq kn l ko kp">&lt;div &gt;<br/>&lt;label&gt;Choose Images&lt;/label&gt;<br/>&lt;input <em class="ka">type</em>="file"  <em class="ka">name</em>="images" multiple&gt;<br/>&lt;/div&gt;</span><span id="d5ac" class="kk kl hi kg b fi kq kn l ko kp">&lt;hr&gt;</span><span id="2fb2" class="kk kl hi kg b fi kq kn l ko kp">&lt;button <em class="ka">type</em>="submit" &gt;Submit&lt;/button&gt;</span><span id="3bda" class="kk kl hi kg b fi kq kn l ko kp">&lt;/form&gt;</span><span id="6959" class="kk kl hi kg b fi kq kn l ko kp">&lt;/div&gt;</span><span id="10fd" class="kk kl hi kg b fi kq kn l ko kp">&lt;/body&gt;</span><span id="4b6a" class="kk kl hi kg b fi kq kn l ko kp">&lt;/html&gt;</span></pre></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><p id="a783" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在我们有了。我希望你已经发现这是有用的。我会带着更多有趣的文章回来。感谢您的阅读。</p></div></div>    
</body>
</html>