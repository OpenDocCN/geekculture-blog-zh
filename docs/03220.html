<html>
<head>
<title>Area of Effect Attack Behavior</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">攻击行为的影响范围</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/area-of-effect-attack-behavior-ec1cad5b9162?source=collection_archive---------30-----------------------#2021-06-03">https://medium.com/geekculture/area-of-effect-attack-behavior-ec1cad5b9162?source=collection_archive---------30-----------------------#2021-06-03</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/cc21cd2adde6f2515ef9eb9d5c7a57be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*rRWn4mQZUVPK6SWUmfwgYg.gif"/></div></div></figure><p id="2a2d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在<a class="ae jo" rel="noopener" href="/geekculture/how-to-detect-colliders-surrounding-the-player-ebdcadf3ba61">之前的文章</a>中，我讲述了如何检测玩家周围的碰撞体，以及如何使用这种逻辑摧毁给定区域内的敌人。作为后续，这篇文章将涵盖AoE的视觉方面，以及如何在我的2D空间射击游戏中将它设置为临时辅助武器。</p><p id="9391" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">目标</strong>:创建一个冲击波动画，通过代码激活，以及我们在上一篇文章中创建的效果攻击方法。我们也将使得这个AoE攻击只有在玩家收集了全向射击能量后才可以执行，这种情况很少发生。</p></div><div class="ab cl jp jq gp jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="hb hc hd he hf"><h1 id="af5c" class="jw jx hi bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">创建冲击波动画:</h1><p id="8f67" class="pw-post-body-paragraph iq ir hi is b it ku iv iw ix kv iz ja jb kw jd je jf kx jh ji jj ky jl jm jn hb bi translated">冲击波动画是使用Unity Asset Store中的简单盾牌泡泡精灵图像创建的。</p><ol class=""><li id="6204" class="kz la hi is b it iu ix iy jb lb jf lc jj ld jn le lf lg lh bi translated">创建一个新的动画，并相应地命名。</li></ol><figure class="lj lk ll lm fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es li"><img src="../Images/dff7742d31e950478d921e5525ba2b2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*3DVyehAePtBxLIALvAMdIQ.gif"/></div></div></figure><p id="8b60" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">2.缩放精灵并将其记录到关键帧上，使其像冲击波一样扩展。</p><figure class="lj lk ll lm fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ln"><img src="../Images/005ce400ce297a8193ea17bcbd7db1e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*3HhAJtZC1uFHyQtlaLh7ZQ.gif"/></div></div></figure><p id="8b96" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">3.如果您需要调整动画的速度，请在项目文件夹中选择动画并打开它。在那里，一旦你点击动画节点，你将有选择。当您设置动画以匹配AoE攻击方法时，您可能需要稍后重新访问此步骤。</p><figure class="lj lk ll lm fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lo"><img src="../Images/1b02ea34017f38b7ad458514d8397928.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*klV0TylWmWRwf7BOf7Fbaw.gif"/></div></div></figure><p id="0930" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">4.使Shockwave sprite成为Player对象的子对象，然后在检查器中停用它。</p><figure class="lj lk ll lm fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lp"><img src="../Images/17dcc03a4eced9af55adeb3822b6be94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*etrkz8pmJBS5tUv_3Ll1aQ.gif"/></div></div></figure></div><div class="ab cl jp jq gp jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="hb hc hd he hf"><h1 id="08ee" class="jw jx hi bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">为AoE攻击行为制作协程</h1><p id="3a43" class="pw-post-body-paragraph iq ir hi is b it ku iv iw ix kv iz ja jb kw jd je jf kx jh ji jj ky jl jm jn hb bi translated">因为shockwave是Player对象的子对象，所以下面的代码被添加到我的Player脚本中。</p><ol class=""><li id="8795" class="kz la hi is b it iu ix iy jb lb jf lc jj ld jn le lf lg lh bi translated">添加一个bool变量来跟踪何时启用shockwave。</li></ol><figure class="lj lk ll lm fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lq"><img src="../Images/fbd77cac5b7aa27601d970b5c4d59fc4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yU0JdWiJgpqxo5zZ7Wm_tg.png"/></div></div></figure><p id="fc89" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">2.为shockwave可视化工具添加另一个带有SerializeField的全局变量。这将有助于我们通过代码激活和停用动画。创建变量后，将父级shockwave对象分配到检查器中新创建的槽中。</p><figure class="lj lk ll lm fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lr"><img src="../Images/992d4ed4581914f856928123e77c66b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E9O_jK5UnjDt1iIO5ESvNg.png"/></div></div></figure><figure class="lj lk ll lm fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ls"><img src="../Images/3c16a4f278b0802bdccded6ea98c7d30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*KUsxzb-2rjLlHv8A-BR_JQ.gif"/></div></div></figure><p id="a59b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">3.创建一个方法来处理在调用时更改bool变量的值。最佳实践是通过方法而不是动态地更改变量值。这个方法稍后将从一个<a class="ae jo" href="https://levelup.gitconnected.com/creating-modular-power-up-systems-bcf349e0020" rel="noopener ugc nofollow" target="_blank">加电脚本</a>中调用，该脚本处理玩家碰撞器的检测，并在收集时相应地激活。</p><figure class="lj lk ll lm fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lt"><img src="../Images/d456b4b078d38884648d94560c18d857.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VjDQKvRI6wi3rgOBsmiKhQ.png"/></div></div></figure><p id="04d4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">4.创建一个<a class="ae jo" rel="noopener" href="/codex/coroutines-with-unity-b5a2b3fc3426">协程</a>，这将是AoE攻击行为的结构之一，因为它将处理何时激活和停用组成我们AoE代码的所有内容。因为在这个协程中有很多需要添加的东西，所以我将详细介绍每一行代码的作用。</p><figure class="lj lk ll lm fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lu"><img src="../Images/472df127ad85a6e2113ed55a6b4df0c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WzEKnuGSAksG_zoc14-59Q.png"/></div></div></figure><ul class=""><li id="4364" class="kz la hi is b it iu ix iy jb lb jf lc jj ld jn lv lf lg lh bi translated"><strong class="is hj"> SetActive(true) </strong>将激活冲击波的动画。</li><li id="7abe" class="kz la hi is b it lw ix lx jb ly jf lz jj ma jn lv lf lg lh bi translated">协程中的<em class="mb">产出</em>允许它在你设置的多长时间内进行<strong class="is hj">暂停，然后激活<a class="ae jo" rel="noopener" href="/geekculture/how-to-detect-colliders-surrounding-the-player-ebdcadf3ba61">上一篇文章</a>中创建的<strong class="is hj">效果伤害法</strong>。</strong></li><li id="3d45" class="kz la hi is b it lw ix lx jb ly jf lz jj ma jn lv lf lg lh bi translated">在动画再次失效之前，将有<strong class="is hj">另一个正好1秒的暂停</strong>，并且我们之前创建的bool变量将被设置为false 。</li><li id="77de" class="kz la hi is b it lw ix lx jb ly jf lz jj ma jn lv lf lg lh bi translated">由于冲击波在一秒内变得不活跃，这意味着全向射击只允许玩家射击一次，因为它只在玩家按下按钮的那一秒活跃。然而，这个<strong class="is hj">并不意味着</strong>一旦收集到能量，玩家就有一秒钟的窗口来使用AoE攻击。协程只有在玩家开火影响收集异能时才会启动。</li></ul></div><div class="ab cl jp jq gp jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="hb hc hd he hf"><h1 id="3c17" class="jw jx hi bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">激活全向射击/冲击波作为辅助武器</h1><p id="bead" class="pw-post-body-paragraph iq ir hi is b it ku iv iw ix kv iz ja jb kw jd je jf kx jh ji jj ky jl jm jn hb bi translated">2D太空射手使用空格键发射武器，一旦收集到能量，而不是发射普通的激光，玩家将发射冲击波。所有将通过使用相同的空格键，编程的交替是必要的。</p><ol class=""><li id="bdef" class="kz la hi is b it iu ix iy jb lb jf lc jj ld jn le lf lg lh bi translated">每当_isShockWaveEnabled变量设置为true时，协程将被设置为启动。这是我们之前创建的同一个bool变量。这将放在if-else语句(或<a class="ae jo" href="https://levelup.gitconnected.com/switch-statements-to-the-rescue-277cb924c312" rel="noopener ugc nofollow" target="_blank"> switch语句</a>)中，以确保与其他触发方法没有冲突。</li></ol><blockquote class="mc md me"><p id="6c29" class="iq ir mb is b it iu iv iw ix iy iz ja mf jc jd je mg jg jh ji mh jk jl jm jn hb bi translated"><strong class="is hj">注意</strong>:下面的代码是我的2D空间射击游戏中的射击方法，但是，我在本教程中已经突出显示了需要的部分。</p></blockquote><figure class="lj lk ll lm fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mi"><img src="../Images/0b12f076cea8aea09468bb73b4cc5735.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s-Y96HcBlGyf3RvfqGvbgA.png"/></div></div></figure><p id="49c0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">3.终于到了使用ShockWaveEnabled方法的时候了，该方法是之前创建的，用于在调用时将bool变量的值更改为true。这个方法将从<a class="ae jo" href="https://levelup.gitconnected.com/creating-modular-power-up-systems-bcf349e0020" rel="noopener ugc nofollow" target="_blank">加电脚本</a>中调用，一旦玩家与加电对象碰撞，这将使bool _isShockwaveEnabled = true，这将使协程在玩家第一次使用武器时启动。</p><figure class="lj lk ll lm fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mj"><img src="../Images/c0534a61aa3365715201b071476b67c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LBIIAHClot7LVSMUulWXEQ.png"/></div></div></figure><p id="4995" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">4.加电应该很少产卵，因为它是一个非常强大的武器，为了实现这一点，一个新的if语句被添加到产卵管理器脚本的产卵例程中。这是我们的第五个异能，以及它随机产生的频率，其他的包含了所有其他异能产生的频率。</p><figure class="lj lk ll lm fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mk"><img src="../Images/4b058830c104025f56bcf3f68cb4e913.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WBuIOHeZnHNUcLUVNDYSCg.png"/></div></div></figure><h2 id="7fcb" class="ml jx hi bd jy mm mn mo kc mp mq mr kg jb ms mt kk jf mu mv ko jj mw mx ks my bi translated">结果是:</h2><figure class="lj lk ll lm fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mz"><img src="../Images/3221b93ad19f92f9bb1f5ba351a93cac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Pltt6Ow4RNJ4ZuDNOTBRbw.gif"/></div></div></figure></div></div>    
</body>
</html>