<html>
<head>
<title>Mutation Testing of Maven Project using Pitest (PIT)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Pitest (PIT)对Maven项目进行突变测试</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/mutation-testing-for-maven-project-using-pitest-f9b8fef03a05?source=collection_archive---------13-----------------------#2021-06-28">https://medium.com/geekculture/mutation-testing-for-maven-project-using-pitest-f9b8fef03a05?source=collection_archive---------13-----------------------#2021-06-28</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="7631" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">使用pitest测试工具为基本Java项目的突变测试设置您的系统。</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/89fb38f33580df9cd3627dad7f4914cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*9tIIsuLUXz5wb-nX.jpg"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Image Credits: <a class="ae jn" href="https://pixabay.com/users/testbytes-1013799/" rel="noopener ugc nofollow" target="_blank">testbytes</a> from <a class="ae jn" href="https://pixabay.com/" rel="noopener ugc nofollow" target="_blank">Pixbay</a></figcaption></figure><h1 id="1a5b" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">范围</h1><p id="0a03" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">在这篇博客中，我们将首先介绍如何设置您的系统来运行突变测试。一个众所周知的叫做Pitest或PIT的工具将贯穿本文。从那以后，我们还将看到如何增加突变覆盖率得分。</p><h1 id="a190" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">先决条件</h1><ul class=""><li id="a97e" class="lc ld hi ki b kj kk km kn kp le kt lf kx lg lb lh li lj lk bi translated">你应该知道突变测试的理论概念。如果你想了解突变测试，请查阅[1]。</li><li id="556a" class="lc ld hi ki b kj ll km lm kp ln kt lo kx lp lb lh li lj lk bi translated">Java应该安装在您的系统上。如果你需要任何帮助，请查看[2]关于设置。在本文中，Visual Studio代码被用于编辑和运行代码。不过，您可以选择自己喜欢的编辑器。</li><li id="71c5" class="lc ld hi ki b kj ll km lm kp ln kt lo kx lp lb lh li lj lk bi translated">确保<a class="ae jn" href="https://maven.apache.org/download.cgi" rel="noopener ugc nofollow" target="_blank"> maven </a>设置在你的系统路径中。如果你面临任何错误，我强烈建议你查看<a class="ae jn" href="https://stackoverflow.com/questions/17432809/mvn-is-not-recognized-as-an-internal-or-external-command-operable-program-or" rel="noopener ugc nofollow" target="_blank">这个</a> StackOverflow答案。</li></ul><h1 id="3e3c" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">创建一个Maven项目</h1><ol class=""><li id="2c75" class="lc ld hi ki b kj kk km kn kp le kt lf kx lg lb lq li lj lk bi translated">打开VS代码</li><li id="a62a" class="lc ld hi ki b kj ll km lm kp ln kt lo kx lp lb lq li lj lk bi translated">按Ctrl+Shift+p</li><li id="da19" class="lc ld hi ki b kj ll km lm kp ln kt lo kx lp lb lq li lj lk bi translated">然后选择“java:创建java项目”→“Maven，由Maven为Java提供”→“Maven-原型-快速启动”→选择一个版本</li><li id="47ef" class="lc ld hi ki b kj ll km lm kp ln kt lo kx lp lb lq li lj lk bi translated">继续操作并提供您选择的包名，然后等待项目被创建。</li><li id="6f00" class="lc ld hi ki b kj ll km lm kp ln kt lo kx lp lb lq li lj lk bi translated">供参考，下面找GIF 1了解上述步骤。</li></ol><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lr"><img src="../Images/3d2e77fb37e9b0c9dc58eeb53feb4011.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*vpqgJTFZyhm5fNP_hvHftg.gif"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">GIF 1: Creating a Maven Project in Visual Studio Code</figcaption></figure><h1 id="ab35" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">运行您的项目</h1><ol class=""><li id="df43" class="lc ld hi ki b kj kk km kn kp le kt lf kx lg lb lq li lj lk bi translated">此时，您应该确保代码正确运行。</li><li id="1859" class="lc ld hi ki b kj ll km lm kp ln kt lo kx lp lb lq li lj lk bi translated">确保你的默认java程序(App.java和AppTest.java)已经启动并运行。</li></ol><h1 id="96ca" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">向项目添加Pitest</h1><ol class=""><li id="deb0" class="lc ld hi ki b kj kk km kn kp le kt lf kx lg lb lq li lj lk bi translated">暂时导航到<a class="ae jn" href="https://pitest.org/" rel="noopener ugc nofollow" target="_blank"> Pitest </a>网站。它将向您简要介绍这个工具的作用。</li><li id="0fcf" class="lc ld hi ki b kj ll km lm kp ln kt lo kx lp lb lq li lj lk bi translated">由于这个博客将会涉及maven的突变测试，我们将使用<a class="ae jn" href="https://pitest.org/quickstart/maven/" rel="noopener ugc nofollow" target="_blank"> this </a>链接来复制代码，如下面的代码片段所示。还要注意，在撰写本文时，1.5.0是最新版本。</li><li id="3dbe" class="lc ld hi ki b kj ll km lm kp ln kt lo kx lp lb lq li lj lk bi translated">将这段代码粘贴到项目目录下的<strong class="ki hj"> <em class="ls"> pom.xml </em> </strong>文件中。</li></ol><pre class="iy iz ja jb fd lt lu lv lw aw lx bi"><span id="0ac4" class="ly jp hi lu b fi lz ma l mb mc"><strong class="lu hj">&lt;plugin&gt;</strong><br/>    <strong class="lu hj">&lt;groupId&gt;</strong>org.pitest<strong class="lu hj">&lt;/groupId&gt;</strong><br/>    <strong class="lu hj">&lt;artifactId&gt;</strong>pitest-maven<strong class="lu hj">&lt;/artifactId&gt;</strong><br/>    <strong class="lu hj">&lt;version&gt;</strong>1.5.0<strong class="lu hj">&lt;/version&gt;</strong><br/> <strong class="lu hj">&lt;/plugin&gt;</strong></span></pre><h1 id="559e" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">运行Pitest插件</h1><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es md"><img src="../Images/bb62cd4d812d67005e5d911b8126d59d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1140/format:webp/1*PQZJsHF5oJ7ZMC7XOtGJ-A.png"/></div><figcaption class="jj jk et er es jl jm bd b be z dx">Figure 1: Automatic pop-up after pom.xml is updated</figcaption></figure><ol class=""><li id="35b8" class="lc ld hi ki b kj me km mf kp mg kt mh kx mi lb lq li lj lk bi translated">对pom.xml进行必要的修改后，可能会自动要求您构建xml文件。选择“现在”,剩下的将由您的智能插件处理(图1)。</li><li id="eba7" class="lc ld hi ki b kj ll km lm kp ln kt lo kx lp lb lq li lj lk bi translated">理想情况下，pitest插件应该在项目的插件目录下可见。但对我来说，这并没有发生。</li><li id="6712" class="lc ld hi ki b kj ll km lm kp ln kt lo kx lp lb lq li lj lk bi translated">转到VS代码中的命令行，键入<code class="du mj mk ml lu b">mvn install</code>来编译您的项目。</li><li id="3d74" class="lc ld hi ki b kj ll km lm kp ln kt lo kx lp lb lq li lj lk bi translated">运行PIT后，使用以下命令:</li></ol><pre class="iy iz ja jb fd lt lu lv lw aw lx bi"><span id="5217" class="ly jp hi lu b fi lz ma l mb mc">mvn eu.stamp-project:pitmp-maven-plugin:run</span></pre><p id="f561" class="pw-post-body-paragraph kg kh hi ki b kj me ij kl km mf im ko kp mm kr ks kt mn kv kw kx mo kz la lb hb bi translated">5.输出将如下面的图2所示。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mp"><img src="../Images/2c62f5076ac0db99d9d474eff95a2f99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DaLZPwz2Tn5S3bwRA4q0Yg.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Figure 2: After running Pitest command for mutation testing</figcaption></figure><h1 id="c50d" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">了解输出</h1><p id="ecda" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">如果看到目前为止的输出，肯定不太好理解。幸运的是，当我们运行上面的代码时，在项目目录中创建了一个名为“target”的文件夹。在那里你可以找到“pit-reports”文件夹，你所有的跑步记录都会保存在里面。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mp"><img src="../Images/71f429e888061463c57f133036832efc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WwyBSzM-iGaV8z1BeQVTmw.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Figure 3: Every time you run the Pitest, more folders will be created under “pit-reports” as shown on the left-hand side of the picture.</figcaption></figure><p id="8f39" class="pw-post-body-paragraph kg kh hi ki b kj me ij kl km mf im ko kp mm kr ks kt mn kv kw kx mo kz la lb hb bi translated">转到“维修站报告”文件夹，找到最新的运行文件夹。在该文件夹下，在你的网络浏览器(Chrome、Firefox、Edge等)中打开“index.html”文件。).你会看到类似GIF 2的东西。注意<em class="ls">浅粉色</em>表示缺少线条覆盖，<em class="ls">深粉色</em>表示缺少突变覆盖。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lr"><img src="../Images/91e51676b57fbfc9131237c49116026f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*BrMtQTaWcXBXDjFZYRJraA.gif"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">GIF 2: Mutation test report generated by Pitest for your default (hello world) maven project</figcaption></figure><h1 id="0a1f" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">增加突变覆盖率得分</h1><p id="348c" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">根据上面生成的报告，我们观察到线覆盖率和突变覆盖率是0%。这是预料中的行为，因为App.java和AppTest.java的文件是最基本的，不包括任何会杀死突变体的东西(再次，确保你知道突变测试的理论概念)。</p><p id="22e1" class="pw-post-body-paragraph kg kh hi ki b kj me ij kl km mf im ko kp mm kr ks kt mn kv kw kx mo kz la lb hb bi translated">在您的App.java文件中写下以下内容:</p><pre class="iy iz ja jb fd lt lu lv lw aw lx bi"><span id="eba1" class="ly jp hi lu b fi lz ma l mb mc">public class App{</span><span id="b525" class="ly jp hi lu b fi mq ma l mb mc">public static String hello(){ //simply returns "Hello World"<br/>return "Hello World";<br/>}</span><span id="3dca" class="ly jp hi lu b fi mq ma l mb mc">public static void main( String[] args) {<br/>App.hello();    //calling hello() method<br/>}</span><span id="6fc2" class="ly jp hi lu b fi mq ma l mb mc">}</span></pre><p id="95da" class="pw-post-body-paragraph kg kh hi ki b kj me ij kl km mf im ko kp mm kr ks kt mn kv kw kx mo kz la lb hb bi translated">修改您的AppTest.java文件以测试断言的值，如下所示:</p><pre class="iy iz ja jb fd lt lu lv lw aw lx bi"><span id="f7d8" class="ly jp hi lu b fi lz ma l mb mc">package com.example;<br/>import static org.junit.Assert.assertEquals;<br/>import static org.junit.Assert.assertTrue;<br/>import org.junit.Test;</span><span id="2567" class="ly jp hi lu b fi mq ma l mb mc">public class AppTest {</span><span id="6c37" class="ly jp hi lu b fi mq ma l mb mc">@Test<br/>public void shouldAnswerWithTrue()<br/>{<br/>assertTrue( true );<br/>}</span><span id="f1e9" class="ly jp hi lu b fi mq ma l mb mc"><strong class="lu hj">@Test      //new test case added<br/>public void shouldReturnHelloWorld(){<br/>String value = App.hello();<br/>assertEquals(value, "Hello World");<br/>}</strong><br/>}</span></pre><p id="986a" class="pw-post-body-paragraph kg kh hi ki b kj me ij kl km mf im ko kp mm kr ks kt mn kv kw kx mo kz la lb hb bi translated">现在像以前一样运行pitest并观察HTML测试报告。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lr"><img src="../Images/f458a061d322addda10c9a4a8419ddfd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*InNm7ML2GdNU_1yMYj42qw.gif"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">GIF 3: Mutation coverage score increased to 100% after adding new test cases</figcaption></figure><p id="9641" class="pw-post-body-paragraph kg kh hi ki b kj me ij kl km mf im ko kp mm kr ks kt mn kv kw kx mo kz la lb hb bi translated"><em class="ls">浅绿色</em>表示线条覆盖，<em class="ls">深绿色</em>表示突变覆盖。注意突变分数是如何从0增加到100%的。线路覆盖率也提高到了50%。在接下来的教程中，我们将看到一个相对复杂的问题，并致力于增加线和突变的覆盖范围。</p><h1 id="78b5" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">结论</h1><p id="f6f5" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">在本教程中，我们学习了如何在maven项目中集成pitest (PIT)。我们还看到了如何生成非常方便的突变测试报告。PIT对于提供自动化突变体是有用的，因此我们可以专注于提高单元测试用例的质量，这将为突变覆盖率提供更高的分数。这将识别代码中更易受攻击的部分。</p><p id="b125" class="pw-post-body-paragraph kg kh hi ki b kj me ij kl km mf im ko kp mm kr ks kt mn kv kw kx mo kz la lb hb bi translated">还有，你可以在<a class="ae jn" href="https://twitter.com/SwatiRajwal" rel="noopener ugc nofollow" target="_blank"> Twitter </a>和<a class="ae jn" href="https://www.linkedin.com/in/swati-r-84682b12b/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上问我一个问题！</p><h1 id="e8fc" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">参考</h1><p id="efe0" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">[1]龙格塔，K. (2021年5月10日)。<em class="ls">软件测试中的变异测试:变异得分&amp;分析实例</em>。古鲁99。<a class="ae jn" href="https://www.guru99.com/mutation-testing.html" rel="noopener ugc nofollow" target="_blank">https://www.guru99.com/mutation-testing.html</a></p><p id="41b8" class="pw-post-body-paragraph kg kh hi ki b kj me ij kl km mf im ko kp mm kr ks kt mn kv kw kx mo kz la lb hb bi translated">[2]拉杰瓦尔，S. (2021年6月10日)。<em class="ls">软件测试:简单Java程序的单元测试用例</em>。中等。<a class="ae jn" rel="noopener" href="/geekculture/unit-testing-of-simple-java-programs-b785a164b440">https://medium . com/geek culture/unit-testing-of-simple-Java-programs-b785a 164 b 440</a></p><p id="c82f" class="pw-post-body-paragraph kg kh hi ki b kj me ij kl km mf im ko kp mm kr ks kt mn kv kw kx mo kz la lb hb bi translated">[3]未注明日期。邮票-项目/pitmp-maven-插件。GitHub。于2021年6月28日从<a class="ae jn" href="https://github.com/STAMP-project/pitmp-maven-plugin" rel="noopener ugc nofollow" target="_blank">https://github.com/STAMP-project/pitmp-maven-plugin</a>检索</p></div></div>    
</body>
</html>