<html>
<head>
<title>Linux command: lsof (List Open Files)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Linux命令:lsof(列出打开的文件)</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/linux-command-lsof-list-open-files-b36b756dc8f?source=collection_archive---------2-----------------------#2022-12-10">https://medium.com/geekculture/linux-command-lsof-list-open-files-b36b756dc8f?source=collection_archive---------2-----------------------#2022-12-10</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="f4fc" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">Linux“lsof”命令概述</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/4963ecaed37779317bab14e9849b4899.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*mCmAm8O_yWhAvFxb.png"/></div></div></figure><p id="7448" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><code class="du kf kg kh ki b"><strong class="jl hj">lsof</strong></code>命令代表<strong class="jl hj">列出打开的文件</strong>并显示打开的文件以及哪个<a class="ae kj" rel="noopener" href="/geekculture/linux-command-ps-process-status-8a1a76e7bafc">进程</a>使用它们。</p><p id="fbeb" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在Linux中，一切都是以文件的形式存在的。有时，特别是出于故障排除的目的，我们需要知道哪些文件当前被哪些进程使用，并且我们还可以检查由系统中的一些网络连接打开的文件等等。</p><pre class="iy iz ja jb fd kk ki kl bn km kn bi"><span id="005c" class="ko kp hi ki b be kq kr l ks kt">&gt;&gt; lsof | more<br/><br/>COMMAND     PID   TID TASKCMD  USER   FD      TYPE             DEVICE  SIZE/OFF       NODE NAME<br/>systemd       1                root  cwd       DIR              252,1      4096          2 /<br/>systemd       1                root  rtd       DIR              252,1      4096          2 /<br/>systemd       1                root  txt       REG              252,1   1620224       3318 /usr/lib/systemd/systemd<br/>systemd       1                root  mem       REG              252,1   1369384       4764 /usr/lib/x86_64-linux-gnu/libm-2.31.so<br/>systemd       1                root  mem       REG              252,1    178528       4736 /usr/lib/x86_64-linux-gnu/libudev.so.1.6.<br/>...<br/>...</span></pre><p id="2dff" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">让我们看看可以和<code class="du kf kg kh ki b"><strong class="jl hj">lsof</strong></code>命令一起使用的一些重要选项。</p><blockquote class="ku kv kw"><p id="d46e" class="jj jk kx jl b jm jn ij jo jp jq im jr ky jt ju jv kz jx jy jz la kb kc kd ke hb bi translated"><em class="hi"> ●按</em> <strong class="jl hj"> <em class="hi">用户名</em> </strong>过滤打开的文件夹</p></blockquote><pre class="iy iz ja jb fd kk ki kl bn km kn bi"><span id="ea10" class="ko kp hi ki b be kq kr l ks kt">#  Filter open files by username<br/>&gt;&gt; lsof -u　root<br/><br/>COMMAND     PID USER   FD      TYPE             DEVICE SIZE/OFF       NODE NAME<br/>systemd       1 root  cwd       DIR              252,1     4096          2 /<br/>systemd       1 root  rtd       DIR              252,1     4096          2 /<br/>systemd       1 root  txt       REG              252,1  1620224       3318 /usr/lib/systemd/systemd<br/>...<br/><br/>#  Filter open files  by except a particular username<br/>&gt;&gt; lsof -u ^root<br/><br/>COMMAND     PID   TID TASKCMD               USER   FD      TYPE             DEVICE SIZE/OFF       NODE NAME<br/>systemd-n   401                  systemd-network  cwd       DIR              252,1     4096          2 /<br/>systemd-n   401                  systemd-network  rtd       DIR              252,1     4096          2 /<br/>...</span></pre><blockquote class="ku kv kw"><p id="25d9" class="jj jk kx jl b jm jn ij jo jp jq im jr ky jt ju jv kz jx jy jz la kb kc kd ke hb bi translated"><em class="hi"> ●按</em> <strong class="jl hj"> <em class="hi">特定流程</em> </strong>过滤打开的文件</p></blockquote><pre class="iy iz ja jb fd kk ki kl bn km kn bi"><span id="238e" class="ko kp hi ki b be kq kr l ks kt">#  Filter open files by a particular process<br/>&gt;&gt; lsof -c nginx<br/><br/>COMMAND   PID     USER   FD      TYPE             DEVICE SIZE/OFF   NODE NAME<br/>nginx   23267     root  cwd       DIR              252,1     4096      2 /<br/>nginx   23267     root  rtd       DIR              252,1     4096      2 /<br/>nginx   23267     root  txt       REG              252,1  1195152  77095 /usr/sbin/nginx</span></pre><blockquote class="ku kv kw"><p id="8b26" class="jj jk kx jl b jm jn ij jo jp jq im jr ky jt ju jv kz jx jy jz la kb kc kd ke hb bi translated"><em class="hi"> ●通过</em> <strong class="jl hj"> <em class="hi">过滤打开的文件，进程ID </em> </strong></p></blockquote><pre class="iy iz ja jb fd kk ki kl bn km kn bi"><span id="c10f" class="ko kp hi ki b be kq kr l ks kt">#  Filter open files by a process ID<br/>&gt;&gt; lsof -p 23267<br/><br/>COMMAND   PID USER   FD   TYPE             DEVICE SIZE/OFF   NODE NAME<br/>nginx   23267 root  cwd    DIR              252,1     4096      2 /<br/>nginx   23267 root  rtd    DIR              252,1     4096      2 /<br/>nginx   23267 root  txt    REG              252,1  1195152  77095 /usr/sbin/nginx<br/>nginx   23267 root  mem    REG              252,1   180792 786469 /usr/lib/nginx/modules/ngx_stream_module.so</span></pre><blockquote class="ku kv kw"><p id="7a19" class="jj jk kx jl b jm jn ij jo jp jq im jr ky jt ju jv kz jx jy jz la kb kc kd ke hb bi translated"><em class="hi"> ●按</em> <strong class="jl hj"> <em class="hi">目录</em> </strong> <em class="hi">过滤打开的文件。它列出了由特定目录打开的文件。</em></p></blockquote><pre class="iy iz ja jb fd kk ki kl bn km kn bi"><span id="3800" class="ko kp hi ki b be kq kr l ks kt"># Filter open files by a Directory<br/><br/>&gt;&gt; lsof +D /usr/bin<br/><br/>COMMAND     PID       USER  FD   TYPE DEVICE  SIZE/OFF  NODE NAME<br/>dbus-daem   548 messagebus txt    REG  252,1    249032  1660 /usr/bin/dbus-daemon<br/>networkd-   559       root txt    REG  252,1   5502744  1614 /usr/bin/python3.8<br/>bash      21135       root txt    REG  252,1   1183448  1572 /usr/bin/bash</span></pre><blockquote class="ku kv kw"><p id="739a" class="jj jk kx jl b jm jn ij jo jp jq im jr ky jt ju jv kz jx jy jz la kb kc kd ke hb bi translated"><em class="hi"> ●通过</em> <strong class="jl hj"> <em class="hi">网络连接过滤打开的文件。</em> </strong></p></blockquote><pre class="iy iz ja jb fd kk ki kl bn km kn bi"><span id="6364" class="ko kp hi ki b be kq kr l ks kt"># Filter open files by network connection<br/><br/>&gt;&gt; lsof -i <br/><br/>COMMAND     PID            USER   FD   TYPE DEVICE SIZE/OFF NODE NAME<br/>systemd-n   401 systemd-network   19u  IPv4  25326      0t0  UDP 172.30.1.2:bootpc <br/>sshd        632            root    3u  IPv4  20842      0t0  TCP *:ssh (LISTEN)<br/>sshd        632            root    4u  IPv6  20853      0t0  TCP *:ssh (LISTEN)<br/>container 13459            root   12u  IPv4  43290      0t0  TCP localhost:46111 (LISTEN)<br/>node      21195            root   18u  IPv4  52391      0t0  TCP *:40205 (LISTEN)</span></pre><blockquote class="ku kv kw"><p id="6d3c" class="jj jk kx jl b jm jn ij jo jp jq im jr ky jt ju jv kz jx jy jz la kb kc kd ke hb bi translated"><em class="hi"> ●通过</em> <strong class="jl hj"> <em class="hi">端口过滤打开的文件。</em> </strong></p></blockquote><pre class="iy iz ja jb fd kk ki kl bn km kn bi"><span id="5d40" class="ko kp hi ki b be kq kr l ks kt"># Filter open files port<br/><br/>&gt;&gt; lsof -i :80<br/><br/>COMMAND   PID     USER   FD   TYPE DEVICE SIZE/OFF NODE NAME<br/>nginx   23267     root    6u  IPv4  66992      0t0  TCP *:http (LISTEN)<br/>nginx   23267     root    7u  IPv6  66993      0t0  TCP *:http (LISTEN)<br/>nginx   23268 www-data    6u  IPv4  66992      0t0  TCP *:http (LISTEN)<br/>nginx   23268 www-data    7u  IPv6  66993      0t0  TCP *:http (LISTEN)<br/></span></pre><blockquote class="ku kv kw"><p id="6077" class="jj jk kx jl b jm jn ij jo jp jq im jr ky jt ju jv kz jx jy jz la kb kc kd ke hb bi translated"><em class="hi"> ●通过</em> <strong class="jl hj"> <em class="hi">协议过滤打开的文件。</em>T49】</strong></p></blockquote><pre class="iy iz ja jb fd kk ki kl bn km kn bi"><span id="0109" class="ko kp hi ki b be kq kr l ks kt"># Filter open files by protocol<br/><br/>&gt;&gt; lsof -i TCP<br/><br/>COMMAND     PID            USER   FD   TYPE DEVICE SIZE/OFF NODE NAME<br/>sshd        632            root    3u  IPv4  20842      0t0  TCP *:ssh (LISTEN)<br/>sshd        632            root    4u  IPv6  20853      0t0  TCP *:ssh (LISTEN)<br/>container 13459            root   12u  IPv4  43290      0t0  TCP localhost:46111 (LISTEN)<br/>node      21195            root   18u  IPv4  52391      0t0  TCP *:40205 (LISTEN)<br/>node      21195            root   19u  IPv4  59053      0t0  TCP 172.30.1.2:40205-&gt;10.244.5.61:35534 (ESTABLISHED)<br/>kc-termin 21208            root   11u  IPv4  52388      0t0  TCP *:40200 (LISTEN)<br/>kc-termin 21208            root   12u  IPv4  59028      0t0  TCP 172.30.1.2:40200-&gt;10.244.3.164:51234 (ESTABLISHED)<br/>sshd      21229            root    4u  IPv4  52517      0t0  TCP 172.30.1.2:ssh-&gt;10.48.0.6:44226 (ESTABLISHED)<br/>systemd-r 21460 systemd-resolve   13u  IPv4  55313      0t0  TCP 127.0.0.53:domain (LISTEN)<br/>runtime-s 21532            root    3u  IPv6  55949      0t0  TCP *:40300 (LISTEN)<br/>runtime-i 21567            root    3u  IPv6  56441      0t0  TCP *:40305 (LISTEN)<br/>app1      21971            root    3u  IPv4  59009      0t0  TCP *:1234 (LISTEN)</span></pre></div><div class="ab cl lb lc gp ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="hb hc hd he hf"><blockquote class="ku kv kw"><p id="4342" class="jj jk kx jl b jm jn ij jo jp jq im jr ky jt ju jv kz jx jy jz la kb kc kd ke hb bi translated"><em class="hi">如果你觉得这篇文章很有帮助，请点击</em> <strong class="jl hj"> <em class="hi">跟随</em> </strong> <em class="hi">和</em> <strong class="jl hj"> <em class="hi">拍拍</em> </strong> <em class="hi">按钮，帮我写更多这样的文章。<br/>谢谢🖤 </em></p></blockquote></div><div class="ab cl lb lc gp ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="hb hc hd he hf"><h2 id="3dda" class="li kp hi bd lj lk ll lm ln lo lp lq lr js ls lt lu jw lv lw lx ka ly lz ma mb bi translated">🖥所有关于Linux的文章👇</h2><div class="mc md ez fb me"><div role="button" tabindex="0" class="ab bv ff cb dy mf mg bn mh jh mi"><div class="mj l"><div class="ab q"><div class="l di"><img alt="Md Shamim" class="l de bw mk ml du" src="../Images/b46bdc53005abde6c6cb3e8ff0c200c3.png" width="20" height="20" loading="lazy" data-original-src="https://miro.medium.com/v2/resize:fill:40:40/1*Hqd8Xz1WHsoL1s2To3awnA.png"/><div class="dr bw l mk ml ds n aw dt"/></div><div class="gg l dw"><p class="bd b fp z dy dz ea eb ec ed ee ef dx translated"><a class="ae af ag ah ai aj ak al am an ao ap aq ar as" rel="noopener follow" target="_top" href="/@shamimice03?source=post_page-----b36b756dc8f--------------------------------"> Md沙米姆</a></p></div></div><div class="mo mp fg l"><h2 class="bd hj sd se dy sf ea eb sg ed ef hh bi translated">所有关于Linux的文章</h2></div><div class="ab q"><div class="l dw"><a class="bd b be z bi sh au si sj sk pf sl an fx fy sm sn so gb gc gd de bk ge" rel="noopener follow" target="_top" href="/@shamimice03/list/all-articles-on-linux-1339e15e3304?source=post_page-----b36b756dc8f--------------------------------">View list</a></div><div class="sp l dw"><span class="bd b fp z dx">12 stories</span></div></div></div><div class="nb dh nc dy ab nd dw di"><div class="di mt bv mu mv"><div class="dh l"><img alt="" class="dh" src="../Images/259cf1a3ab76526a3f714f7cbaffac3d.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/1*G7yx3xB6zA_6GXrSu3ZWVA.png"/></div></div><div class="di mt bv mw mx my"><div class="dh l"><img alt="" class="dh" src="../Images/985a8b8ce1f1090a033d94ee7ac5f4fd.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/0*SoRvlTzozcRF9cua"/></div></div><div class="di bv mz na my"><div class="dh l"><img alt="" class="dh" src="../Images/d917609dcb8b45812e60ccd8bf2ed277.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/0*AcbQlR9WFnBxlLpV"/></div></div></div></div></div></div></div>    
</body>
</html>