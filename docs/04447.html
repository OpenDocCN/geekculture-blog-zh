<html>
<head>
<title>Microservices and Beyond Microservices</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">微服务和超越微服务</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/microservices-and-beyond-microservices-ed65300363b?source=collection_archive---------28-----------------------#2021-06-27">https://medium.com/geekculture/microservices-and-beyond-microservices-ed65300363b?source=collection_archive---------28-----------------------#2021-06-27</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="5df7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">假设您有一个大型单片系统，并计划迁移到微服务架构。因此，让我们来看看为什么以及如何实现这一点。</p><p id="f602" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">为什么要做微服务？</strong></p><p id="dcb3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以下是选择微服务的三大理由，来自微服务的先驱之一Sam Newman。</p><ol class=""><li id="af36" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">零停机独立部署能力。</li><li id="6c42" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">数据处理的隔离</li><li id="de9c" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">实现更高程度的组织自治。用微服务体现组织结构。</li></ol><p id="42e7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">什么是微服务</strong>这里是你在维基百科上寻找定义时会找到的内容。</p><p id="4ffd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">微服务</strong>架构——面向服务架构(SOA)结构风格的一种变体——将应用程序安排为松散耦合的服务集合。</p><p id="7c61" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">如果您仔细看看微服务的定义和选择微服务的原因，就会发现它们几乎是一样的。</strong></p><p id="da51" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当您将整体架构转换为微服务架构时，您应该始终关注以下几点。</p><ul class=""><li id="c4a6" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc jr jj jk jl bi translated">高度可维护和可测试</li><li id="d888" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc jr jj jk jl bi translated">松散耦合</li><li id="6f94" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc jr jj jk jl bi translated">可独立部署</li><li id="d07c" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc jr jj jk jl bi translated">围绕业务能力组织</li><li id="a1f6" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc jr jj jk jl bi translated">由一个小团队拥有</li></ul><p id="df7b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">超越微服务</strong></p><p id="eb77" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">利用我们从上述指针中学到的知识，我们决定迁移微服务。</p><p id="e39a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">简单介绍并指出我们的微服务架构中存在的问题。我将使用流行的电子商务服务模式。</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="er es js"><img src="../Images/01607eecd51103bdb5e475d56a7f245e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D0YOijGSNq1x1JtwgOvEOg.png"/></div></div></figure><p id="9aaa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是在现实世界中，没有一个微服务可以独立完成所有事情。他们需要互相交流。让我们用一个电子商务服务的例子来看看这一点。</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="er es ke"><img src="../Images/63419b160363b3a73b35b7125dbe2c0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TKR28SYzjQsdwDdcKn1Vsw.png"/></div></div></figure><p id="9cb3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们决定这不是大问题，我们可以用rest与他们交流。</p><p id="cad3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，我们使用我们选择的云部署服务，并开始为客户提供服务</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="er es kf"><img src="../Images/dc9a9c55d8076f1174cedb4d3d89e380.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Qa_njqiPVFSbKixoFlR4kg.png"/></div></div></figure><p id="a02e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个系统为我们工作，然后我们开始看到问题。</p><p id="dfea" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">有哪些问题？</strong></p><ol class=""><li id="873c" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">顾客知道得太多。</li><li id="eeb5" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">我们的服务点对点地紧密相连。</li></ol><p id="ea99" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">我们如何解决这个问题？</strong></p><ol class=""><li id="1728" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">让我们介绍一下API网关</li></ol><figure class="jt ju jv jw fd jx er es paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="er es kg"><img src="../Images/da6fa59f404436c2782797a5c1e1ab31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lQT0t8zi_a-ve4DHbZql9w.png"/></div></div></figure><p id="f2b2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">什么是API网关？</p><p id="5ae0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">API网关接收来自客户端的所有API调用，然后通过请求路由、组合和协议翻译将它们路由到适当的微服务。通常，它通过调用多个微服务并汇总结果来处理请求，以确定最佳路径。它可以在web协议和内部使用的对web不友好的协议之间进行转换。</p><figure class="jt ju jv jw fd jx"><div class="bz dy l di"><div class="kh ki l"/></div></figure><p id="d426" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">总结使用API网关的优势</strong></p><ul class=""><li id="f34b" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc jr jj jk jl bi translated">证明</li><li id="2ce4" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc jr jj jk jl bi translated">限速</li><li id="c02b" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc jr jj jk jl bi translated">按指定路线发送</li><li id="d7f4" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc jr jj jk jl bi translated">日志记录和分析</li></ul><p id="0eeb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">我的微服务之间是否应该使用API网关进行通信？不，你应该用Servish Mesh。</strong></p><p id="d845" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">什么是服务网格？</strong></p><p id="1f2f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">服务网格是微服务应用程序的可配置基础设施层。它使得服务实例之间的通信灵活、可靠且快速。网格提供服务发现、负载平衡、加密、认证和授权、对断路器模式的支持以及其他功能。</p><figure class="jt ju jv jw fd jx"><div class="bz dy l di"><div class="kh ki l"/></div></figure><figure class="jt ju jv jw fd jx er es paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="er es kj"><img src="../Images/0c7e3a21ba8fc8cde22685146ca7cfb9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nQSjxl1Ew1ykm1FUhJmWBA.png"/></div></div></figure><p id="7710" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是您的Kubernetes集群，有无服务网格</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="er es kk"><img src="../Images/68c3579b443dbf020c527884254469e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t7BdOLbCANvnDHQ8iU4-0g.png"/></div></div></figure><p id="26c2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.让我们尝试不同的服务间通信方法，以减少紧密的点对点耦合。如果我们仔细观察我们的架构，我们正在设计完全由请求驱动的服务。有一些现代工具可以帮助我们从请求驱动转向<strong class="ih hj">事件驱动。</strong></p><p id="07ba" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">什么是事件驱动架构？</strong></p><p id="a45d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">事件驱动架构是一种软件架构范例，它促进事件的产生、检测、消费和反应。事件可以定义为“状态的重大变化”。例如，当消费者购买汽车时，汽车的状态从“待售”变为“已售”。</p><p id="aceb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">注意-你不能在任何地方都使用一种型号。根据您的用途，两者可以互换使用。但是尽可能选择事件驱动，因为它们比请求驱动更快更可靠。</strong></p><figure class="jt ju jv jw fd jx er es paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="er es kl"><img src="../Images/a2288f687c6edee330a335d9f24e7b88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GyAr-tRcHld5jckP7q9xEg.png"/></div></div></figure><p id="c1f5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面三幅图片将展示事件驱动设计如何将你从不可用中解救出来。</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="er es km"><img src="../Images/957087886a07e599005810eedf9e0f9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*74WZ67clq3R5tS5fmY7WKw.png"/></div></div><figcaption class="kn ko et er es kp kq bd b be z dx">Request Driven shopping service</figcaption></figure><figure class="jt ju jv jw fd jx er es paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="er es kr"><img src="../Images/21c780ea628dcceac8c2acdf71789787.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yZe11gTyP5kNhANXT_5pGQ.png"/></div></div><figcaption class="kn ko et er es kp kq bd b be z dx">Request Driven shopping service when shipping service is down</figcaption></figure><figure class="jt ju jv jw fd jx er es paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="er es ks"><img src="../Images/090dec07d8baf587949ec5cc46ea45ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*452Rpi3iT1cGT3s43jg11g.png"/></div></div><figcaption class="kn ko et er es kp kq bd b be z dx">Event Driven Service</figcaption></figure><ul class=""><li id="a54a" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc jr jj jk jl bi translated">如果在请求驱动的方法中发现运输服务停止，那么我们必须计算出我们需要尝试运输服务的次数。以及shiping service回来后如何了解新订单。</li><li id="cf65" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc jr jj jk jl bi translated">现在，如果我们为运输服务引入事件驱动服务。它必须监听事件并完成所需的工作。停机时的事件没有问题。当它回来的时候，它会完成它的使命。</li></ul><p id="a4cf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">考虑在您的微服务中引入事件驱动设计。了解更多关于最流行的事件流系统<a class="ae kt" href="https://kafka.apache.org/intro#intro_platform" rel="noopener ugc nofollow" target="_blank">卡夫卡</a>。</p><p id="6dd0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.1 <strong class="ih hj">无服务器？</strong>顾名思义就是在没有服务器的情况下运行服务。</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="er es ku"><img src="../Images/13484090694018dfe57f214998710c5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*13WiYXstyHWxRDDUiq3h4A.png"/></div></div></figure></div></div>    
</body>
</html>