<html>
<head>
<title>First Django application Step y Step</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">第一个Django应用步骤y步骤</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/writing-first-django-app-for-beginners-bf2f7cd2cbfa?source=collection_archive---------3-----------------------#2019-01-16">https://medium.com/geekculture/writing-first-django-app-for-beginners-bf2f7cd2cbfa?source=collection_archive---------3-----------------------#2019-01-16</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/642e5c0e6a365c739bba4caa3d2e1b7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tPKD7N4zfYRdijLzS7KUXA.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Your first Python and Django Application</figcaption></figure><p id="77d4" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在本文中，我们将一步一步地创建Django应用程序。这篇文章是写给Django begginers的。</p><h1 id="24eb" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">姜戈</h1><ul class=""><li id="dc8b" class="kq kr hi iw b ix ks jb kt jf ku jj kv jn kw jr kx ky kz la bi translated">Django是一个高级Python Web框架，它鼓励快速开发和干净、实用的设计。由经验丰富的开发人员构建，它解决了Web开发的许多麻烦，因此您可以专注于编写应用程序，而无需重新发明轮子。它是免费和开源的。</li><li id="30c9" class="kq kr hi iw b ix lb jb lc jf ld jj le jn lf jr kx ky kz la bi translated">Django使得用更少的代码更快地构建更好的Web应用变得更加容易。</li></ul><h1 id="5bf2" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">为什么是姜戈</h1><p id="08b6" class="pw-post-body-paragraph iu iv hi iw b ix ks iz ja jb kt jd je jf lg jh ji jj lh jl jm jn li jp jq jr hb bi translated">使用Django，您可以在几个小时内将Web应用程序从概念设计到发布。Django处理了Web开发的许多麻烦，因此您可以专注于编写应用程序，而无需重新发明轮子。它是免费和开源的。</p><ul class=""><li id="1d6d" class="kq kr hi iw b ix iy jb jc jf lj jj lk jn ll jr kx ky kz la bi translated"><strong class="iw hj">快得不可思议:</strong> Django旨在帮助开发人员尽可能快地将应用程序从概念设计到完成。</li><li id="8d72" class="kq kr hi iw b ix lb jb lc jf ld jj le jn lf jr kx ky kz la bi translated"><strong class="iw hj">完全加载:</strong> Django包括几十个额外的组件，您可以使用它们来处理常见的Web开发任务。Django负责用户认证、内容管理、站点地图、RSS提要和许多其他任务——开箱即用。</li><li id="85bd" class="kq kr hi iw b ix lb jb lc jf ld jj le jn lf jr kx ky kz la bi translated"><strong class="iw hj">令人放心的安全:</strong> Django认真对待安全问题，帮助开发人员避免许多常见的安全错误，如SQL注入、跨站脚本、跨站请求伪造和点击劫持。其用户认证系统提供了一种安全的方式来管理用户帐户和密码。</li><li id="91bf" class="kq kr hi iw b ix lb jb lc jf ld jj le jn lf jr kx ky kz la bi translated"><strong class="iw hj">极度可扩展:</strong>地球上一些最繁忙的站点使用Django的能力快速灵活地扩展，以满足最大的流量需求。</li><li id="153e" class="kq kr hi iw b ix lb jb lc jf ld jj le jn lf jr kx ky kz la bi translated"><strong class="iw hj">难以置信的多功能:</strong>公司、组织和政府已经使用Django构建了各种各样的东西——从内容管理系统到社交网络，再到科学计算平台。</li></ul><h1 id="f09e" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">Django入门</h1><p id="07b1" class="pw-post-body-paragraph iu iv hi iw b ix ks iz ja jb kt jd je jf lg jh ji jj lh jl jm jn li jp jq jr hb bi translated">使用Django可以快速轻松地启动和运行。让我们开始制作我们的应用程序</p><p id="3e9f" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">首先，创建一个项目文件夹，我们所有的文件都放在这个文件夹中</p><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="f962" class="lv jt hi lr b fi lw lx l ly lz">$ mkdir MyContactApp</span></pre><p id="da05" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">创建项目文件夹后，我们将创建虚拟环境</p><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="6a71" class="lv jt hi lr b fi lw lx l ly lz">~/MyContactApp$ pip install virtualenv<br/>~/MyContactApp$ virtualenv -p /usr/bin/python3 venv</span></pre><p id="b953" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在我们将激活虚拟环境</p><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="76a7" class="lv jt hi lr b fi lw lx l ly lz">~/MyContactApp$ source venv/bin/activate</span></pre><p id="f15e" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在我们的虚拟环境已经创建好了，我们将为我们的项目安装Django。</p><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="e8ce" class="lv jt hi lr b fi lw lx l ly lz">(venv) ~/MyContactApp$ pip install django<br/>Collecting django<br/>.<br/>.<br/>.<br/>Installing collected packages: pytz, django<br/>Successfully installed django pytz</span></pre><p id="2006" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在我们已经完成了Django的设置，并准备开始工作…</p><p id="09b0" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我更喜欢使用Visual Studio代码集成开发环境，你可以使用任何其他文本编辑器。</p><p id="71c7" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在我们将开始我们的项目</p><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="a7ea" class="lv jt hi lr b fi lw lx l ly lz">(venv) ~/MyContactApp$ django-admin startproject mysite . #Remember there is space between mysite and .<br/>#If we don't use . then manage.py file will be in mysite folder but we want it to be in our project folder that's why we used above command.</span></pre><p id="933e" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我们的项目文件夹将如下所示:</p><p id="d71a" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">mysite文件夹中有一个settings.py文件，我们必须对该文件进行更改。在settings.py文件中进行以下更改。</p><ul class=""><li id="3ad6" class="kq kr hi iw b ix iy jb jc jf lj jj lk jn ll jr kx ky kz la bi translated">set ALLOWED_HOSTS = ['127.0.0.1 '，' localhost']</li><li id="05fd" class="kq kr hi iw b ix lb jb lc jf ld jj le jn lf jr kx ky kz la bi translated">这里是时区的<a class="ae ma" href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones" rel="noopener ugc nofollow" target="_blank">列表</a>，相应地设置TIME_ZONE。</li><li id="bff0" class="kq kr hi iw b ix lb jb lc jf ld jj le jn lf jr kx ky kz la bi translated">我们还需要为静态文件添加一个路径。下到文件的<em class="mb">结尾</em>，在<code class="du mc md me lr b">STATIC_URL</code>条目下面，添加一个名为<code class="du mc md me lr b">STATIC_ROOT</code>的新条目:</li></ul><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="6c67" class="lv jt hi lr b fi lw lx l ly lz">ALLOWED_HOSTS = ['127.0.0.1', 'localhost']<br/>TIME_ZONE = 'Asia/Kolkata'<br/>STATIC_ROOT = os.path.join(BASE_DIR, 'static')</span></pre><p id="5120" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我们需要为我们的应用程序创建一个数据库，因此转到控制台并键入以下命令:</p><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="beb0" class="lv jt hi lr b fi lw lx l ly lz">(venv) ~/MyContactApp$ python manage.py migrate</span></pre><p id="f05a" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">如果一切顺利，我们会看到这个-</p><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="c7b5" class="lv jt hi lr b fi lw lx l ly lz">(venv) ~/MyContactApp$ python manage.py migrate<br/>Operations to perform:<br/> Apply all migrations: admin, auth, contenttypes, sessions<br/>Running migrations:<br/> Applying contenttypes.0001_initial... OK<br/> Applying auth.0001_initial... OK<br/> Applying admin.0001_initial... OK<br/> Applying admin.0002_logentry_remove_auto_add... OK<br/> Applying contenttypes.0002_remove_content_type_name... OK<br/> Applying auth.0002_alter_permission_name_max_length... OK<br/> Applying auth.0003_alter_user_email_max_length... OK<br/> Applying auth.0004_alter_user_username_opts... OK<br/> Applying auth.0005_alter_user_last_login_null... OK<br/> Applying auth.0006_require_contenttypes_0002... OK<br/> Applying auth.0007_alter_validators_add_error_messages... OK<br/> Applying auth.0008_alter_user_username_max_length... OK<br/> Applying auth.0009_alter_user_last_name_max_length... OK<br/> Applying sessions.0001_initial... OK</span></pre><p id="d503" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">一切都在按计划进行，现在我们需要启动web服务器。为此，请转到控制台并键入以下命令:</p><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="8110" class="lv jt hi lr b fi lw lx l ly lz">(venv) ~/MyContactApp$ python manage.py runserver</span></pre><p id="b8e2" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">启动web服务器后，我们会看到Django默认的祝贺页面。</p><p id="5f77" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在，我们将为联系人应用程序创建一个应用程序，我们的项目中可以有多个应用程序，但这里我们将创建一个应用程序。</p><p id="9536" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">要创建应用程序，请在控制台中运行以下命令:</p><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="4e63" class="lv jt hi lr b fi lw lx l ly lz">(venv) ~/MyContactApp$ python manage.py startapp app-name ##you can choose any name for you app, just type the name of your ##app on the place of app-name.<br/>##I will write 'contact', you can write yours or go with my name.</span></pre><p id="495d" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这个命令将添加一个名为“联系人”的文件夹到我们的项目文件夹中，这个文件夹将包含一些文件。</p><p id="b332" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">转到settings.py文件，将联系人添加到已安装的应用程序-</p><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="5b49" class="lv jt hi lr b fi lw lx l ly lz">INSTALLED_APPS = [<br/> 'django.contrib.admin',<br/> 'django.contrib.auth',<br/> 'django.contrib.contenttypes',<br/> 'django.contrib.sessions',<br/> 'django.contrib.messages',<br/> 'django.contrib.staticfiles',<br/> 'contact',<br/>]</span></pre><p id="b1cc" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">model.py文件是一个存储联系人信息的地方，如姓名、电子邮件电话等。Django将模型保存在数据库中。默认的Django数据库适配器是SQLite。</p><p id="d7bf" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">让我们建立我们的models.py文件</p><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="a907" class="lv jt hi lr b fi lw lx l ly lz">from django.db import modelsclass Person(models.Model): def publish(self): def full_name(self): def __str__(self):<br/>from phonenumber_field.modelfields import PhoneNumberField<br/> first_name = models.CharField(max_length=20)<br/> self.published_date = timezone.now()<br/> return '{} {}'.format(self.first_name, self.last_name) <br/> return self.full_name() <br/> self.save() <br/> last_name = models.CharField(max_length=20)<br/> email = models.EmailField(max_length=250)<br/> phone = PhoneNumberField() </span><span id="2310" class="lv jt hi lr b fi mf lx l ly lz">from django.utils import timezone</span></pre><ul class=""><li id="6f1c" class="kq kr hi iw b ix iy jb jc jf lj jj lk jn ll jr kx ky kz la bi translated">首先，我们导入Django模型，然后导入时区和PhoneNumberField，这将帮助我们存储电话号码。</li><li id="83fd" class="kq kr hi iw b ix lb jb lc jf ld jj le jn lf jr kx ky kz la bi translated">之后，我们制作了类人和添加模型。Model通知Django这是一个Django模型。</li><li id="4c41" class="kq kr hi iw b ix lb jb lc jf ld jj le jn lf jr kx ky kz la bi translated">接下来，我们想要收集一个人的信息，这就是Django字段类型进入游戏的地方。将使用什么字段类型取决于您要填写什么信息。您可以在<a class="ae ma" href="https://docs.djangoproject.com/en/2.0/ref/models/fields/#field-types" rel="noopener ugc nofollow" target="_blank">文档</a>中了解更多关于Django字段类型的信息。</li><li id="242f" class="kq kr hi iw b ix lb jb lc jf ld jj le jn lf jr kx ky kz la bi translated">在本例中，我们需要名字、姓氏、电子邮件和电话。first_name和last_name是字符串，因此对于字符串数据，我们使用charfield，并且我们可以根据字符串大小设置max_length参数，对于名称20就足够了。</li><li id="8783" class="kq kr hi iw b ix lb jb lc jf ld jj le jn lf jr kx ky kz la bi translated">对于电子邮件，我们使用Emailfield，因为Django中没有PhoneNumberField，所以我们使用第三方包来存储电话号码，并将其导入上面。<a class="ae ma" href="https://github.com/stefanfoulis/django-phonenumber-field" rel="noopener ugc nofollow" target="_blank">添加phonenumber_field </a>指南。</li><li id="df9d" class="kq kr hi iw b ix lb jb lc jf ld jj le jn lf jr kx ky kz la bi translated">接下来，我们定义了三个函数:publish、full_name和__str__。Publish函数将根据时区保存人的信息，full_name将给出名和姓的连接字符串，__str__将给出对象的字符串表示。</li></ul><p id="149a" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在回到控制台，我们必须告诉Django一些变化。在控制台中编写以下命令</p><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="a52f" class="lv jt hi lr b fi lw lx l ly lz">(venv) ~/MyContactApp$ python manage.py makemigrations contact</span></pre><p id="3a9f" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">Django为我们准备了迁移文件，我们必须将其应用到我们的数据库中。为此，请键入以下命令:</p><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="d56a" class="lv jt hi lr b fi lw lx l ly lz">(venv) ~/MyContactApp$ python manage.py migrate contact</span></pre><p id="8ec8" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我们已经做了我们的模型人。要添加、编辑和删除它，我们将使用Django admin。</p><p id="abaf" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">转到admin.py文件并添加以下内容:</p><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="f0fb" class="lv jt hi lr b fi lw lx l ly lz">from .models import Person<br/>admin.site.register(Person)</span></pre><h1 id="9fbc" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">注意:不要忘记在编辑文件后保存它们，否则它会显示以前的输出或错误。</h1><p id="2fa0" class="pw-post-body-paragraph iu iv hi iw b ix ks iz ja jb kt jd je jf lg jh ji jj lh jl jm jn li jp jq jr hb bi translated">要查看我们的人员模型，请在控制台键入<em class="mb"> python manage.py runserver </em>，然后在浏览器中键入地址<a class="ae ma" href="http://127.0.0.1:8000/admin/" rel="noopener ugc nofollow" target="_blank">http://127 . 0 . 0 . 1:8000/admin/</a>。您将看到一个登录页面。</p><p id="5f5e" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">要登录，您需要用户名和密码。为此，我们必须创建一个超级用户。转到控制台，键入以下命令:</p><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="dcb8" class="lv jt hi lr b fi lw lx l ly lz">#Use ctrl+c to stop the web server<br/>(venv) ~/MyContactApp$ python manage.py createsuperuser</span></pre><p id="6f56" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">创建您的用户名和密码，并使用它登录到管理页面。现在，您可以编辑、删除和向数据库添加新的联系人。现在，请向您的应用程序添加一些联系人。</p><p id="c754" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">首先，我们将为联系人应用程序编写URL。当用户在浏览器中键入特定的URL时，会发生以下情况:</p><ul class=""><li id="33bc" class="kq kr hi iw b ix iy jb jc jf lj jj lk jn ll jr kx ky kz la bi translated">Django使用URLconf并寻找变量<strong class="iw hj"> urlpatterns </strong>，它是urlpath实例的列表。</li><li id="c3f1" class="kq kr hi iw b ix lb jb lc jf ld jj le jn lf jr kx ky kz la bi translated">Django遍历每个URL模式，直到找到被请求的正确URL。</li><li id="a682" class="kq kr hi iw b ix lb jb lc jf ld jj le jn lf jr kx ky kz la bi translated">一旦URL匹配，Django调用<strong class="iw hj">视图</strong>是简单的python函数。如果没有匹配的URL，Django会显示一个错误视图。</li></ul><p id="636a" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">让我们为我们的主页写第一个URL。在主页上，用户将看到联系人列表。</p><p id="9156" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我们将在我们的联系人应用程序中创建一个单独的URL文件，以保持我们的工作整洁。转到contact文件夹，添加一个新文件名urls.py。在contact/url.py文件中添加以下行:</p><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="62ee" class="lv jt hi lr b fi lw lx l ly lz">#contact/urls.py from django.urls import pathurlpatterns = [<br/>from . import views app_name = 'contact' <br/> path('', views.contact_list, name='contact_list'),<br/>]</span></pre><p id="1ec0" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我将解释这段代码，但在此之前，我们需要将这些URL包含到我们的mysite/urls.py文件中，以使它真正工作。为此，我们必须在mysite/urls.py文件中添加一些行。我们的mysite/urls.py文件如下所示:</p><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="c3cc" class="lv jt hi lr b fi lw lx l ly lz">#mysite/urls.py from django.contrib import adminurlpatterns = [<br/>from django.urls import path<br/>from django.conf.urls import include <br/> path('admin/', admin.site.urls),<br/> path('', include('contact.urls', namespace='contact'))<br/>]</span></pre><p id="e145" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">让我们理解这里发生了什么，首先，我们从django.urls导入路径视图，和视图。在路径中，我们给了一个空字符串作为参数，所以如果它得到一个空字符串，Django将调用视图函数名contact_list。</p><p id="9ae9" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">让我们编写视图函数:</p><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="a473" class="lv jt hi lr b fi lw lx l ly lz">from django.shortcuts import render, get_object_or_404, redirectdef contact_list(request):<br/>from .models import Person <br/> persons = Person.objects.all().order_by('first_name')<br/> return render(request, 'contact/contact_list.html', {'persons': persons})</span></pre><p id="7ae2" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">首先，我们导入render、get_object_or_404和redirect函数，然后从模型文件中导入我们的类。</p><p id="f20a" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在这里，contact_list是一个函数，它将request作为一个参数，然后我们定义person的变量，这个变量是对象的列表，它们按first_name排序。因此，如果用户向主页发送请求，那么名为“contact_list”的视图函数将被调用，它将返回呈现模板contact_list.html的呈现函数</p><p id="42eb" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">模板是HTML文件，将保存在contact/templates/contact目录中。因此，首先在联系人目录中创建模板文件夹，然后在模板文件夹中创建联系人文件夹。这只是一个有用的命名约定，当您在一个项目中处理多个应用程序时，它会让您的生活变得简单。保持你的东西有条理是很好的。</p><p id="cfea" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在创建contact_list.html文件并添加以下行:</p><p id="23e2" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这将在主页上显示我们联系人列表中的所有人的列表。现在，如果你想在用户点击这个人时显示这个人的详细信息，你必须遵循同样的过程。转到urls.py文件，编写URL，编写视图函数，然后是模板。</p><p id="2613" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">如果你想接受用户的输入，你必须使用表单。对于添加新的联系人或编辑他们，将有来自用户方的输入，所以我们将在这里使用表单。</p><p id="2dc8" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">使用表单时，有两种类型的请求。一个是<strong class="iw hj"> GET </strong>请求，另一个是<strong class="iw hj"> POST </strong>请求。这两个请求用于不同的目的，例如，如果你想改变系统的状态，比如你想在数据库中做一些改变，那么它将是一个POST请求，但是如果它不改变系统的状态，那么它将是一个GET请求。</p><p id="a36a" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">当您在数据库中添加或编辑联系人时，这将是一个post请求，如果您想要某个人的信息，那么这将是一个GET请求。</p><p id="1db8" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我建议你阅读文档中的表格，这里是<a class="ae ma" href="https://docs.djangoproject.com/en/2.0/topics/forms/" rel="noopener ugc nofollow" target="_blank">链接</a>。</p><p id="dcbd" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我们的Html表单结构将如下所示:</p><p id="c205" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在此之前，我们必须在联系人文件夹中创建一个名为forms.py的新文件，并添加以下行:</p><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="03f2" class="lv jt hi lr b fi lw lx l ly lz">from django import formsclass Meta:<br/>from .models import Person class PersonForm(forms.ModelForm): <br/> model = Person<br/> fields = ('first_name', 'last_name', 'email', 'phone')</span></pre><p id="c461" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在我们想为我们的添加和编辑联系人编写视图函数，但是我们将为这两个函数使用相同的模板，因为它将使用相同的表单。添加和编辑联系人的视图功能如下所示:</p><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="fc2b" class="lv jt hi lr b fi lw lx l ly lz">def contact_new(request):def contact_edit(request, pk):<br/> if request.method == 'POST':<br/> person = get_object_or_404(Person, pk=pk)<br/> if request.method == 'POST':<br/> form = PersonForm(request.POST, instance=person)<br/> if form.is_valid():<br/> form.save()<br/> return redirect('/person/' + str(person.pk))<br/> else:<br/> form = PersonForm(instance=person)<br/> return render(request, 'contact/contact_edit.html', {'form': form}) <br/> form = PersonForm(request.POST)<br/> if form.is_valid():<br/> form.save()<br/> return redirect('/')<br/> else:<br/> form = PersonForm()<br/> return render(request, 'contact/contact_edit.html', {'form': form})</span></pre><p id="b0e2" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">接下来，我们将编写删除联系人的视图函数。这里，视图功能是获取要删除的对象，然后从数据库中删除联系人，最后将用户重定向到主页。</p><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="b893" class="lv jt hi lr b fi lw lx l ly lz">def contact_delete(request, pk):<br/> person = get_object_or_404(Person, pk=pk)<br/> person.delete()<br/> return redirect('/')</span></pre><p id="eb32" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我在下面分享了我的<a class="ae ma" href="https://github.com/hiteshmishra708/django-contact-app" rel="noopener ugc nofollow" target="_blank"> Github库</a>的链接。它有这个项目的全部代码。我已经使用bootstrap使应用程序看起来很好。如果在这个项目中你不得不面对任何问题，你可以看到代码并继续前进。这里是<a class="ae ma" href="https://github.com/hiteshmishra708/django-contact-app" rel="noopener ugc nofollow" target="_blank">环节</a>。</p><p id="5bd9" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">感谢阅读。如果你发现这篇文章有用，别忘了<strong class="iw hj">鼓掌</strong>和<strong class="iw hj">T3】与你的朋友和同事分享。:)如果你有任何问题，请随时联系我。<br/> <strong class="iw hj">与我接通👉</strong><a class="ae ma" href="https://linkedin.com/in/hiteshmishra708" rel="noopener ugc nofollow" target="_blank"><strong class="iw hj">LinkedIn</strong></a><strong class="iw hj">，</strong><a class="ae ma" href="https://github.com/hiteshmishra708" rel="noopener ugc nofollow" target="_blank"><strong class="iw hj">Github</strong></a><strong class="iw hj">:)</strong></strong></p></div></div>    
</body>
</html>