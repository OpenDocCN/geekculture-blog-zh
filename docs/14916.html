<html>
<head>
<title>SQL Interview Question2: Counting Number of Handshakes between group of peoples / Number of matches between two teams — Use Case of Self Join &amp; Cross Join</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SQL面试问题2:计算一组人之间握手的次数/两个队之间比赛的次数——自加入和交叉加入的用例</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/sql-interview-question2-counting-number-of-handshakes-between-group-of-peoples-number-of-matches-537fd51a3d15?source=collection_archive---------7-----------------------#2022-10-02">https://medium.com/geekculture/sql-interview-question2-counting-number-of-handshakes-between-group-of-peoples-number-of-matches-537fd51a3d15?source=collection_archive---------7-----------------------#2022-10-02</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><h2 id="107a" class="hg hh hi bd b fp hj hk hl hm hn ho dx hp translated" aria-label="kicker paragraph">SQL面试问题系列中的第二名</h2><div class=""/><div class=""><h2 id="eef0" class="pw-subtitle-paragraph io hr hi bd b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf dx translated">最常见的SQL面试查询和概念#SQL #RDBMS</h2></div><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/bf48c9bc557477057a30bf2d02fde831.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YpFLpJaxkfSiCi57JAB8FQ.jpeg"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx">Photo by <a class="ae jw" href="https://unsplash.com/@sunder_2k25?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Sunder Muthukumaran</a> on <a class="ae jw" href="https://unsplash.com/s/photos/sql-query?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="75fd" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">嘿！！</p><p id="dfb9" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">在本文中，我们将探讨SQL面试中面试官最喜欢问的一个问题。我在面试中也被问到同样的问题。让我们开始吧，但是首先看看问题陈述。</p><blockquote class="kt ku kv"><p id="5cb0" class="jx jy kw jz b ka kb is kc kd ke iv kf kx kh ki kj ky kl km kn kz kp kq kr ks hb bi translated"><strong class="jz hs">问题陈述:计算表中给出的一群人握手的次数:</strong></p><p id="89f9" class="jx jy kw jz b ka kb is kc kd ke iv kf kx kh ki kj ky kl km kn kz kp kq kr ks hb bi translated"><strong class="jz hs"> <em class="hi">案例1:编写一个查询来计算握手的次数，这样一个人只和另一个人握手一次。</em> </strong></p><p id="fab7" class="jx jy kw jz b ka kb is kc kd ke iv kf kx kh ki kj ky kl km kn kz kp kq kr ks hb bi translated"><strong class="jz hs"> <em class="hi">情况2:编写查询，使每个人与他人握手两次(除了与自己)。</em>T9】</strong></p></blockquote><p id="0f7c" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated"><strong class="jz hs"> <em class="kw">数据:</em> </strong>我已经创建了一个表，其中包含朋友表中我的几个朋友的名字和姓氏。除此之外，没有提供其他信息。<a class="ae jw" href="https://github.com/sdeeksha07/SQL-Self-Join-Use-Cases/tree/main" rel="noopener ugc nofollow" target="_blank">您也可以使用GitHub链接中的查询在本地机器上创建相同的表。</a></p></div><div class="ab cl la lb gp lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="hb hc hd he hf"><p id="91b4" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">让我们开始查询这个表。Select *语句将给出两列，即名字和姓氏。总共有10行。</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es lh"><img src="../Images/a722797f2659c3131dc64390c4aef32a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1224/format:webp/1*O7Jcqj8VYbRSjfD2pqZkDA.png"/></div><figcaption class="js jt et er es ju jv bd b be z dx">Credits: By Author</figcaption></figure></div><div class="ab cl la lb gp lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="hb hc hd he hf"><p id="6a46" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated"><strong class="jz hs">解决案例1: </strong></p><p id="aeb2" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">如前所述，一个人只和另一个人握手一次，例如Abhinav和vibha握手或者vibha和Abhinav握手都是一回事。所以我们必须避免这种情况。</p><p id="a08c" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated"><strong class="jz hs">步骤1.1: </strong>为使该表更简单，首先给所有人分配一个唯一的序列号。我们可以通过使用<strong class="jz hs"><em class="kw">row _ number</em></strong><strong class="jz hs">窗口函数来实现。</strong></p><p id="33d9" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">还有<strong class="jz hs">、</strong>既然我们要在自连接中两次使用这个表，我们可以借助<strong class="jz hs"> <em class="kw">和</em> </strong>子句将它赋给一个<strong class="jz hs"><em class="kw">【CTE(通用表表达式)】</em> </strong>。所以从下面的查询中你可以看到，我已经创建了一个名为<strong class="jz hs"> <em class="kw"> new_data </em> </strong>的新表，给每个记录分配序列号为<strong class="jz hs"> <em class="kw"> s_no </em> </strong>，还有两个字段(名字，姓氏)连接为<strong class="jz hs"> <em class="kw"> full_name </em> </strong>。<strong class="jz hs"><em class="kw">|</em>|</strong>用于串联。</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es li"><img src="../Images/99eafc07d33eb68884c0386b7e8e04a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GvmlZ7Qbh5KjWZ_0WKuI1Q.png"/></div></div></figure><p id="19c2" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">步骤1.2: 正如你所知道的，两个表中的任何连接都是带有特定条件的简单的交叉连接。因此，最好从这里开始，即应用交叉连接条件，然后放置一些条件。因为我们使用同一个表进行自连接，所以我们需要给它们不同的别名。参见下面来自交叉连接的查询。它将创建10*10= 100行组合所有数据。</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es lj"><img src="../Images/abf612ed18844cb48a302c52f994999e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iS1dvDrSztpA-mF65DjnTA.png"/></div></div></figure><p id="ef1b" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">但是人1和1握手没有意义，对吧？我们需要做点什么。</p><p id="9d87" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated"><strong class="jz hs">步骤1.3: </strong>那么让我们把我们的条件放在这里。参见下面查询中的<strong class="jz hs">中高亮显示的部分<em class="kw">where</em>T7】子句。仅考虑表1中的<strong class="jz hs"> <em class="kw">序列号小于序列号2的那些行，将导致仅一次握手</em> </strong>。</strong></p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es lk"><img src="../Images/c785348e0e7cadbbf1657fd5041fafd0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oLNLuaRTGFNGwkGV-l1yOg.png"/></div></div></figure><p id="6942" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated"><strong class="jz hs">步骤1.4: </strong>要计算记录数，只需count(*)，而不是从表中取出所有列。它将总共返回45次握手。</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es ll"><img src="../Images/c374832338631fe2e16c99f3fb4dcc67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3WGlxUloam3CnylXtIyuIw.png"/></div></div></figure><p id="435b" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">这些都是案例1的问题陈述。</p></div><div class="ab cl la lb gp lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="hb hc hd he hf"><p id="3d31" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated"><strong class="jz hs">解决案例2: </strong>在这里我们要考虑除自己以外的所有握手案例。因此，从<strong class="jz hs">步骤1.2 </strong>开始，在交叉连接之后，我们只需对where条件做一点更改。请参见下面查询中突出显示的部分，我们正在考虑两个表中序列号不同的所有记录。&lt; &gt;用于不相等。</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es lm"><img src="../Images/a80b20926446cb9fad3f0318a5e77284.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VztjXiCNHNqzAFtpx2QS-g.png"/></div></div></figure><p id="71a5" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">要计算行数，因为它返回总共90行，请参见下面的代码片段。</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es ln"><img src="../Images/7a75692d93d514cdffcdc6d121781659.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n17oCxq6J7By6SjvBLSQIQ.png"/></div></div></figure><p id="34a6" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">所以我们已经讨论了查询的两种情况。你可以创建自己的板球或足球队表，并计算他们之间的比赛次数，而不是取我朋友的名字。编写查询逻辑基本相同。</p><p id="a37a" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated"><a class="ae jw" href="https://github.com/sdeeksha07/SQL-Self-Join-Use-Cases" rel="noopener ugc nofollow" target="_blank"> <em class="kw">我在依恋。我的Github页面上的sql文件。你可以在附加链接上找到它。</em> </a></p><p id="9a02" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">希望这篇文章澄清了你的一些概念。</p><p id="d682" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">谢谢你阅读它。</p><p id="1cc6" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">除此之外，你可以在YouTube上通过Thoufiq观看这个视频。</p><figure class="jh ji jj jk fd jl"><div class="bz dy l di"><div class="lo lp l"/></div></figure><p id="3ef8" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">如有任何疑问，请通过LinkedIn、Twitter或电子邮件联系我。</p><p id="54d9" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated"><strong class="jz hs"> <em class="kw">邮箱:sdeevi07@gmail.com</em></strong></p><p id="5cb8" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated"><strong class="jz hs"> <em class="kw">碎碎念:</em></strong><a class="ae jw" href="https://twitter.com/sdeeksha07" rel="noopener ugc nofollow" target="_blank"><strong class="jz hs"><em class="kw">https://twitter.com/sdeeksha07</em></strong></a></p><p id="d8fa" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated"><strong class="jz hs"> <em class="kw">领英:</em></strong><a class="ae jw" href="https://www.linkedin.com/in/sdeeksha07/" rel="noopener ugc nofollow" target="_blank"><strong class="jz hs">【https://www.linkedin.com/in/sdeeksha07/】T42</strong></a></p><p id="2ce7" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated"><strong class="jz hs">坚持学习，坚持练习！！</strong></p></div></div>    
</body>
</html>