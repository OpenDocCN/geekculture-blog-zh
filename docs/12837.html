<html>
<head>
<title>Deploy Docker Containers to Heroku from GitHub</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将Docker容器从GitHub部署到Heroku</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/deploy-docker-containers-to-heroku-dc1bca7e4025?source=collection_archive---------6-----------------------#2022-06-03">https://medium.com/geekculture/deploy-docker-containers-to-heroku-dc1bca7e4025?source=collection_archive---------6-----------------------#2022-06-03</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/1806c85a6f824dd1f665639296dce7b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M5JSWes38UjdpAJPm7dzuQ.jpeg"/></div></div></figure><p id="4e06" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你是Heroku的粉丝吗，我个人很喜欢在Heroku上部署我的原型，并且它使用GitHub库开箱即用。</p><p id="5dad" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我的<strong class="is hj"> docker </strong>应用呢，最近我用docker给Heroku部署了<strong class="is hj">前端</strong> + <strong class="is hj">后端</strong> Monolith应用。</p><p id="963a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="jo">观众是谁？</em></p><p id="6ea0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你应该熟悉<code class="du jp jq jr js b"><strong class="is hj">Modern JavaScript Frameworks</strong></code>、<strong class="is hj"> GitHub </strong> —我们将以<strong class="is hj"> NodeJs </strong>应用为例。</p><h1 id="88dc" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">你可以通过三个简单的步骤做到这一点</h1><ol class=""><li id="33a1" class="kr ks hi is b it kt ix ku jb kv jf kw jj kx jn ky kz la lb bi translated">创建您的节点应用程序—(快速)</li></ol><ul class=""><li id="7dda" class="kr ks hi is b it iu ix iy jb lc jf ld jj le jn lf kz la lb bi translated">创建应用程序文件夹</li><li id="a1df" class="kr ks hi is b it lg ix lh jb li jf lj jj lk jn lf kz la lb bi translated"><code class="du jp jq jr js b">npm i express</code></li><li id="4c11" class="kr ks hi is b it lg ix lh jb li jf lj jj lk jn lf kz la lb bi translated">创建文件<code class="du jp jq jr js b">main.js</code>并复制下面的代码</li></ul><pre class="ll lm ln lo fd lp js lq lr aw ls bi"><span id="32eb" class="lt ju hi js b fi lu lv l lw lx">const express = require('express')<br/>const app <strong class="js hj">=</strong> express()<br/>const port = 3000</span><span id="2e61" class="lt ju hi js b fi ly lv l lw lx">app.get('/', (req, res) =&gt; {<br/>  res.send('Hello World!')<br/>})</span><span id="0a84" class="lt ju hi js b fi ly lv l lw lx">app.listen(port, () =&gt; {<br/>  console.log(`Example app listening on port ${port}`)<br/>})</span></pre><p id="86aa" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">通过运行<code class="du jp jq jr js b">node main.js</code>进行测试。如果你得到以上信息，一切都好了。</p></div><div class="ab cl lz ma gp mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="hb hc hd he hf"><h1 id="e867" class="jt ju hi bd jv jw mg jy jz ka mh kc kd ke mi kg kh ki mj kk kl km mk ko kp kq bi translated"><strong class="ak">第二步</strong>——容器化你的应用程序</h1><ul class=""><li id="6280" class="kr ks hi is b it kt ix ku jb kv jf kw jj kx jn lf kz la lb bi translated">创建Docker文件— <code class="du jp jq jr js b">Dockerfile</code>(无文件扩展名)</li></ul><pre class="ll lm ln lo fd lp js lq lr aw ls bi"><span id="4258" class="lt ju hi js b fi lu lv l lw lx">FROM node:14-alpine3.12<br/>ADD ./app /app # we copied our app to container</span><span id="dd46" class="lt ju hi js b fi ly lv l lw lx"># change working directory<br/>WORKDIR /app<br/>RUN npm install</span><span id="47a0" class="lt ju hi js b fi ly lv l lw lx"># start application<br/>CMD [ "node", "main.js" ] </span></pre></div><div class="ab cl lz ma gp mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="hb hc hd he hf"><h1 id="160c" class="jt ju hi bd jv jw mg jy jz ka mh kc kd ke mi kg kh ki mj kk kl km mk ko kp kq bi translated">步骤3:在github上推送您的代码</h1><ul class=""><li id="37e7" class="kr ks hi is b it kt ix ku jb kv jf kw jj kx jn lf kz la lb bi translated">如果您不熟悉GitHub，请遵循GitHub文档</li><li id="9528" class="kr ks hi is b it lg ix lh jb li jf lj jj lk jn lf kz la lb bi translated">转到GitHub存储库中的Actions选项卡。</li></ul><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mm"><img src="../Images/8cba7b85501086624684db026f62dffe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sWiy69B_H9YjegeDSLPpRA.png"/></div></div><figcaption class="mn mo et er es mp mq bd b be z dx">click actions tab</figcaption></figure><ul class=""><li id="2463" class="kr ks hi is b it iu ix iy jb lc jf ld jj le jn lf kz la lb bi translated">创建新工作流</li></ul><figure class="ll lm ln lo fd ij er es paragraph-image"><div class="er es mr"><img src="../Images/7ee600194b9cfe7968304a442606a099.png" data-original-src="https://miro.medium.com/v2/resize:fit:688/format:webp/1*6n8dmD28M5ZVfft6PemR9A.png"/></div><figcaption class="mn mo et er es mp mq bd b be z dx">click new workflow button</figcaption></figure><ul class=""><li id="8515" class="kr ks hi is b it iu ix iy jb lc jf ld jj le jn lf kz la lb bi translated">将以下代码添加到action.yml文件中</li></ul><pre class="ll lm ln lo fd lp js lq lr aw ls bi"><span id="25fc" class="lt ju hi js b fi lu lv l lw lx">name: Deploy</span><span id="d92b" class="lt ju hi js b fi ly lv l lw lx">on:<br/>  push:<br/>    branches:<br/>      - main</span><span id="8bb4" class="lt ju hi js b fi ly lv l lw lx">jobs:<br/>  build:<br/>    runs-on: ubuntu-latest<br/>    steps:<br/>      - uses: actions/checkout@v2<br/>      - uses: akhileshns/heroku-deploy@v3.12.12 # This is the action<br/>        with:<br/>          heroku_api_key: ${{secrets.HEROKU_API_KEY}}<br/>          heroku_app_name: "app-name" // name of app<br/>          heroku_email: "<a class="ae ml" href="mailto:mohit.official497@gmail.com" rel="noopener ugc nofollow" target="_blank">mohit.XXXX@gmail.com</a>"<br/>          usedocker: true  // make sure to be true<br/>          docker_build_args: |<br/>            NODE_ENV<br/>        env:<br/>          NODE_ENV: production<br/>          SECRET_KEY: ${{ secrets.MY_SECRET_KEY }}<br/></span></pre><ul class=""><li id="6140" class="kr ks hi is b it iu ix iy jb lc jf ld jj le jn lf kz la lb bi translated">在<strong class="is hj"> env: </strong>部分中，您可以为受保护的信息(如Heroku令牌)提供GitHub机密的名称</li><li id="65a7" class="kr ks hi is b it lg ix lh jb li jf lj jj lk jn lf kz la lb bi translated">您需要登录Heroku并生成安全令牌。<a class="ae ml" href="https://help.heroku.com/login" rel="noopener ugc nofollow" target="_blank">此处</a></li></ul><pre class="ll lm ln lo fd lp js lq lr aw ls bi"><span id="b71c" class="lt ju hi js b fi lu lv l lw lx">heroku_api_key: ${{secrets.HEROKU_API_KEY}}</span></pre><p id="f2e8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">注意:—您需要从Heroku创建一个要在GitHub中使用的令牌，以便GitHub可以部署您的应用程序。</p><h2 id="7102" class="lt ju hi bd jv ms mt mu jz mv mw mx kd jb my mz kh jf na nb kl jj nc nd kp ne bi translated"><strong class="ak">怎么考？</strong></h2><p id="32d1" class="pw-post-body-paragraph iq ir hi is b it kt iv iw ix ku iz ja jb nf jd je jf ng jh ji jj nh jl jm jn hb bi translated">只需做一些更改并提交，它应该会直接部署到Heroku服务器。</p><blockquote class="ni nj nk"><p id="96af" class="iq ir jo is b it iu iv iw ix iy iz ja nl jc jd je nm jg jh ji nn jk jl jm jn hb bi translated">https://app-name.herokuapp.com/</p></blockquote><p id="6eba" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果您遇到困难，请留下您的评论，我们将努力改进对初学者来说可能太短的部分。</p></div></div>    
</body>
</html>