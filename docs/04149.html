<html>
<head>
<title>Bypassing CORS with a Google Chrome extension</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用谷歌Chrome扩展绕过CORS</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/bypassing-cors-with-a-google-chrome-extension-7f95fd953612?source=collection_archive---------4-----------------------#2021-06-22">https://medium.com/geekculture/bypassing-cors-with-a-google-chrome-extension-7f95fd953612?source=collection_archive---------4-----------------------#2021-06-22</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="edce" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我从未遇到过与CORS相关的问题，直到最近我在使用JavaScript。话又说回来，总的来说，我和CORS打交道不多。</p><p id="7d8b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我对这个主题的唯一回忆是在过去的Ruby项目中探索Gemfile。我想它是伴随着Ruby on Rails API的初始构建而来的，但是我现在还不能100%确定。无论哪种方式，宝石都很容易添加。</p><p id="b535" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">只需将<code class="du jd je jf jg b"><a class="ae jh" href="https://rubygems.org/gems/rack-cors/versions/0.4.0" rel="noopener ugc nofollow" target="_blank">gem ‘rack-cors'</a></code>添加到gem文件中，并在命令行上运行一个<code class="du jd je jf jg b">bundle install</code>。</p><h2 id="5873" class="ji jj hi bd jk jl jm jn jo jp jq jr js iq jt ju jv iu jw jx jy iy jz ka kb kc bi translated"><a class="ae jh" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS" rel="noopener ugc nofollow" target="_blank">跨产地资源共享(CORS) </a></h2><p id="a728" class="pw-post-body-paragraph if ig hi ih b ii kd ik il im ke io ip iq kf is it iu kg iw ix iy kh ja jb jc hb bi translated">“一种基于HTTP头的机制，允许服务器指示除其自身之外的任何其他来源(域、方案或端口)，浏览器应该允许从这些来源加载资源”-MDN</p><p id="470e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最常见的情况是当一个域/应用/网站向另一个域/应用/网站请求数据(通常是JSON)时。</p><p id="d1c5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">浏览器向托管跨来源资源的服务器发出“预检”请求，以检查服务器是否允许实际请求-MDN</p><p id="8426" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这都是出于安全目的，比如防止恶意网站读取另一个网站的数据。它还阻止对“公共资源”的合法获取。</p><p id="b8da" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">解决这个问题的方法是在请求的“头”和“体”中放置适当的信息，这些信息将决定在两个源之间交换什么数据。如果被批准，那么它就直接通过了。如果没有，那么你会得到一个错误信息。</p><h2 id="65f4" class="ji jj hi bd jk jl jm jn jo jp jq jr js iq jt ju jv iu jw jx jy iy jz ka kb kc bi translated">我的第一条CORS错误消息</h2><blockquote class="ki kj kk"><p id="9742" class="if ig kl ih b ii ij ik il im in io ip km ir is it kn iv iw ix ko iz ja jb jc hb bi translated">从原点' null '在['<a class="ae jh" href="https://some" rel="noopener ugc nofollow" target="_blank">https://some</a>-<a class="ae jh" href="http://api.com" rel="noopener ugc nofollow" target="_blank">api.com</a>获取的访问已被CORS策略阻止:对预检请求的响应未通过访问控制检查:请求的资源上不存在' Access-Control-Allow-Origin '标头。如果不透明响应满足您的需要，请将请求的模式设置为“no-cors ”,以便在禁用cors的情况下获取资源。</p></blockquote><p id="69dd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我还是不能100%确定这一切意味着什么。这是否意味着API根本不允许请求？或者，我只需要在请求的标题中添加一些其他内容？</p><p id="0e84" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">嗯，我把这个添加到我的获取请求头中…</p><pre class="kp kq kr ks fd kt jg ku kv aw kw bi"><span id="989f" class="ji jj hi jg b fi kx ky l kz la">Access-Control-Allow-Origin’:’*’</span></pre><p id="d574" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">“*”意味着开放一切，基本上允许任何事情。如果我知道要指定什么，我会把它放在那里。</p><h2 id="92b8" class="ji jj hi bd jk jl jm jn jo jp jq jr js iq jt ju jv iu jw jx jy iy jz ka kb kc bi translated">我的第二个CORS错误消息</h2><blockquote class="ki kj kk"><p id="4945" class="if ig kl ih b ii ij ik il im in io ip km ir is it kn iv iw ix ko iz ja jb jc hb bi translated">在['<a class="ae jh" href="https://some" rel="noopener ugc nofollow" target="_blank">]https://some</a>-<a class="ae jh" href="http://api.com" rel="noopener ugc nofollow" target="_blank"/>]从原点' null '获取的访问已被CORS策略阻止:对预检请求的响应未通过访问控制检查:' Access-Control-Allow-Origin '头包含无效值' null//undefined '。让服务器发送带有有效值的标头，或者，如果不透明响应满足您的需要，则将请求的模式设置为“no-cors ”,以便在禁用cors的情况下获取资源。</p></blockquote><p id="acdc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">嗯，它不喜欢我的任何头迭代。</p><h2 id="2d9f" class="ji jj hi bd jk jl jm jn jo jp jq jr js iq jt ju jv iu jw jx jy iy jz ka kb kc bi translated">谷歌浏览器扩展</h2><p id="897c" class="pw-post-body-paragraph if ig hi ih b ii kd ik il im ke io ip iq kf is it iu kg iw ix iy kh ja jb jc hb bi translated">似乎有几个CORS扩展，但我选择了<a class="ae jh" href="https://chrome.google.com/webstore/detail/allow-cors-access-control/lhobafahddgcelffkeicbaginigeejlf" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">允许CORS:访问控制允许起源</strong> </a>。</p><p id="ea69" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我尝试了选项页面上的设置，直到我得到一个不同的错误信息。因为，那是编程的一部分，对吧？</p><figure class="kp kq kr ks fd lc er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es lb"><img src="../Images/993c9c11fbf02d7e5b81c76e7b26f8e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1Lqx0JcIlXmO8aanL49UZg.png"/></div></div><figcaption class="lj lk et er es ll lm bd b be z dx">Allow CORS options page</figcaption></figure><p id="607e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将#4从“原点”切换到“*”消除了之前的错误消息。但是，不是没有新的错误消息！</p><h2 id="ce6b" class="ji jj hi bd jk jl jm jn jo jp jq jr js iq jt ju jv iu jw jx jy iy jz ka kb kc bi translated">我的第三条错误消息</h2><p id="1fed" class="pw-post-body-paragraph if ig hi ih b ii kd ik il im ke io ip iq kf is it iu kg iw ix iy kh ja jb jc hb bi translated">400错误。因此，我认为它不会处理请求，因为客户端错误，如语法或请求路由。</p><h2 id="256b" class="ji jj hi bd jk jl jm jn jo jp jq jr js iq jt ju jv iu jw jx jy iy jz ka kb kc bi translated">结论</h2><p id="462e" class="pw-post-body-paragraph if ig hi ih b ii kd ik il im ke io ip iq kf is it iu kg iw ix iy kh ja jb jc hb bi translated">我花了一整天试图理解CORS并提出请求。这个谷歌Chrome扩展看起来非常方便，即使它没有完全解决我所有的问题。</p><p id="0700" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我想我应该忘记API，像Postman一样找到另一种方法来检查我的请求。</p><p id="f11a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">唉，改天吧。</p><h2 id="2e7f" class="ji jj hi bd jk jl jm jn jo jp jq jr js iq jt ju jv iu jw jx jy iy jz ka kb kc bi translated">来源</h2><div class="ln lo ez fb lp lq"><a rel="noopener follow" target="_blank" href="/ruby-daily/understanding-cors-when-using-ruby-on-rails-as-an-api-f086dc6ffc41"><div class="lr ab dw"><div class="ls ab lt cl cj lu"><h2 class="bd hj fi z dy lv ea eb lw ed ef hh bi translated">将Ruby on Rails用作API时理解CORS</h2><div class="lx l"><h3 class="bd b fi z dy lv ea eb lw ed ef dx translated">如何处理跨产地资源共享错误，正确的方法</h3></div><div class="ly l"><p class="bd b fp z dy lv ea eb lw ed ef dx translated">medium.com</p></div></div><div class="lz l"><div class="ma l mb mc md lz me lh lq"/></div></div></a></div><div class="ln lo ez fb lp lq"><a href="https://web.dev/cross-origin-resource-sharing/" rel="noopener  ugc nofollow" target="_blank"><div class="lr ab dw"><div class="ls ab lt cl cj lu"><h2 class="bd hj fi z dy lv ea eb lw ed ef hh bi translated">跨产地资源共享(CORS)</h2><div class="lx l"><h3 class="bd b fi z dy lv ea eb lw ed ef dx translated">浏览器的同源策略阻止从不同来源读取资源。这种机制可以阻止恶意的…</h3></div><div class="ly l"><p class="bd b fp z dy lv ea eb lw ed ef dx translated">网络开发</p></div></div><div class="lz l"><div class="mf l mb mc md lz me lh lq"/></div></div></a></div></div></div>    
</body>
</html>