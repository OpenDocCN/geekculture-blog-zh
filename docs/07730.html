<html>
<head>
<title>ChartJs custom hook— ReactJs</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ChartJs自定义挂钩— ReactJs</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/chartjs-custom-hook-reactjs-bcb868f4190c?source=collection_archive---------17-----------------------#2021-09-28">https://medium.com/geekculture/chartjs-custom-hook-reactjs-bcb868f4190c?source=collection_archive---------17-----------------------#2021-09-28</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/d53c12d00603e15b1cf57ef77ca2ab96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Vj0y1aNycOlM_JuVhxDMRA.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Photo by <a class="ae iu" href="https://unsplash.com/@steve_j?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Steve Johnson</a> on <a class="ae iu" href="https://unsplash.com/s/photos/hooks?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="f5f4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">一个<strong class="ix hj">自定义钩子</strong>什么都不是，一个简单的带有<strong class="ix hj">共享</strong> <strong class="ix hj">逻辑</strong>的javascript文件。在这里，我们将编写一个自定义钩子，通过使用<a class="ae iu" href="https://www.chartjs.org/docs/latest/" rel="noopener ugc nofollow" target="_blank"> <strong class="ix hj"> ChartJs </strong> </a>库来呈现图表。</p><p id="2013" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">使用<strong class="ix hj">纱线/npm </strong>命令安装<strong class="ix hj">图表</strong></p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="daab" class="kc kd hi jy b fi ke kf l kg kh">yarn add chart.js<br/>or<br/>npm install chart.js</span></pre><h1 id="c6b6" class="ki kd hi bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated">让我们写一个钩子—使用图</h1><p id="5ef8" class="pw-post-body-paragraph iv iw hi ix b iy lf ja jb jc lg je jf jg lh ji jj jk li jm jn jo lj jq jr js hb bi translated">钩子名称应该总是以<strong class="ix hj"> use </strong>开头，这里我们将钩子命名为<strong class="ix hj"> useChart </strong>。创建一个新文件<strong class="ix hj"> useChart.js </strong>并添加以下代码片段</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="b934" class="kc kd hi jy b fi ke kf l kg kh">import React from "react";<br/>import Chart from "chart.js/auto";</span><span id="9d14" class="kc kd hi jy b fi lk kf l kg kh">const useChart = (nodeRef, options) =&gt; {</span><span id="7ce4" class="kc kd hi jy b fi lk kf l kg kh"> React.useEffect(() =&gt; {</span><span id="9111" class="kc kd hi jy b fi lk kf l kg kh">    const chart = Chart.getChart(nodeRef.current.id);</span><span id="efce" class="kc kd hi jy b fi lk kf l kg kh">    if (chart) {</span><span id="5225" class="kc kd hi jy b fi lk kf l kg kh">      chart.destroy();</span><span id="f638" class="kc kd hi jy b fi lk kf l kg kh">     }</span><span id="86d6" class="kc kd hi jy b fi lk kf l kg kh">   new Chart(nodeRef.current, options);</span><span id="4dce" class="kc kd hi jy b fi lk kf l kg kh">   console.log("chart rendered");</span><span id="88f2" class="kc kd hi jy b fi lk kf l kg kh">}, [nodeRef, options]);</span><span id="875f" class="kc kd hi jy b fi lk kf l kg kh"> return {};</span><span id="fb99" class="kc kd hi jy b fi lk kf l kg kh">};</span><span id="d7bc" class="kc kd hi jy b fi lk kf l kg kh">export default useChart;</span></pre><p id="122e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在上面的代码片段中，<strong class="ix hj"> useChart </strong>函数接受两个参数<strong class="ix hj">ref</strong>T89】chart<strong class="ix hj">options</strong>。Ref用于将<strong class="ix hj">图表</strong> <strong class="ix hj">画布</strong>传递给钩子&amp;图表<strong class="ix hj">选项</strong>包括图表的<strong class="ix hj">类型</strong>和<strong class="ix hj">数据</strong>值。</p><h1 id="3e17" class="ki kd hi bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated">现在，让我们看看如何调用useChart挂钩</h1><p id="6007" class="pw-post-body-paragraph iv iw hi ix b iy lf ja jb jc lg je jf jg lh ji jj jk li jm jn jo lj jq jr js hb bi translated">在您的组件中，要呈现图表，请导入<strong class="ix hj"> useChart </strong> <strong class="ix hj">钩子</strong>并使用React的<strong class="ix hj"> useRef </strong>创建一个<strong class="ix hj"> ref </strong>。</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="fe70" class="kc kd hi jy b fi ke kf l kg kh">import useChart from “./useChart”;<br/><em class="ll">.<br/>.<br/>.</em></span><span id="37ef" class="kc kd hi jy b fi lk kf l kg kh">function App() {</span><span id="0077" class="kc kd hi jy b fi lk kf l kg kh">const canvasRef = useRef(null);<br/><em class="ll">.<br/>.<br/>.</em><br/>}</span></pre><p id="50f6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">charts jss</strong>使用<strong class="ix hj"> DOM </strong>来渲染图表，所以我们要创建一个<strong class="ix hj"> canvas </strong>元素并传递<strong class="ix hj"> ref </strong>。</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="aeac" class="kc kd hi jy b fi ke kf l kg kh">&lt;canvas id=”weatherChart” ref={canvasRef} width=”400" height=”100" /&gt;</span></pre><p id="7841" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">最后，用<strong class="ix hj"> useChart </strong>钩子通过传递<strong class="ix hj"> ref </strong> &amp; <strong class="ix hj">图表选项来渲染<strong class="ix hj">图表</strong>。</strong></p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="5ebe" class="kc kd hi jy b fi ke kf l kg kh">useChart(canvasRef, {</span><span id="c58a" class="kc kd hi jy b fi lk kf l kg kh">type: "line", //type of chart (line, pie, bar)<br/>data: {<br/>labels: data.label,   //chart label eg: [SUN, MON, TUE]<br/>datasets: [<br/>{<br/>label: "Temperature °C",<br/>data: data.values,   //chart data eg: [10,50,11]</span><span id="83cf" class="kc kd hi jy b fi lk kf l kg kh">backgroundColor: "rgba(255, 99, 132, 0.2)",<br/>borderColor: "rgba(255, 99, 132, 1)",<br/>borderWidth: 1,<br/>  },<br/> ],<br/>},<br/>options: {<br/>legend: {<br/>display: true,<br/>labels: {<br/> fontColor: "#ff0000",<br/>},<br/>},<br/>scales: {<br/> yAxes: [<br/> {<br/>  ticks: {<br/>   beginAtZero: true,<br/>    },<br/>   },<br/>  ],<br/>  },<br/> },<br/>});</span></pre><p id="9a6f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">并且我们已经成功创建了一个<strong class="ix hj">自定义chartJs钩子</strong>并渲染了图表。您可以调用<strong class="ix hj">多个使用图表挂钩</strong>来呈现不同类型的图表。<br/>我已经用<em class="ll"/><a class="ae iu" href="https://api.weatherapi.com" rel="noopener ugc nofollow" target="_blank"><em class="ll">https://api.weatherapi.com</em></a><em class="ll"/>来填充<strong class="ix hj">数据</strong> <em class="ll">。</em></p><p id="ebee" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="ll">代码回购—</em><a class="ae iu" href="https://github.com/RasikFareed/custom-hooks/tree/main/custom-hooks" rel="noopener ugc nofollow" target="_blank"><em class="ll">https://github . com/RasikFareed/custom-hooks/tree/main/custom-hooks</em></a></p><p id="4318" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="ll">试玩链接—</em><a class="ae iu" href="https://rasikfareed.github.io/custom-hooks/" rel="noopener ugc nofollow" target="_blank"><em class="ll">https://rasikfareed.github.io/custom-hooks/</em></a></p><h1 id="e46c" class="ki kd hi bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated">摘要</h1><p id="8753" class="pw-post-body-paragraph iv iw hi ix b iy lf ja jb jc lg je jf jg lh ji jj jk li jm jn jo lj jq jr js hb bi translated">总而言之，React定制钩子更强大，并且使代码更少&amp;更容易使用。</p><p id="f843" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在本文中，我们为ChartsJs库构建了自己的定制挂钩，并呈现了图表</p><p id="20ff" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">感谢阅读，编码快乐！</p><p id="feba" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">参考文献<br/> 1。<a class="ae iu" href="https://www.chartjs.org/docs/latest/" rel="noopener ugc nofollow" target="_blank">https://www.chartjs.org/docs/latest/</a>2<br/>。【https://reactjs.org/docs/hooks-custom.html T4】</p></div></div>    
</body>
</html>