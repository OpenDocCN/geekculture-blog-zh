# 🧪鉴于，当，然后

> 原文：<https://medium.com/geekculture/given-when-then-326d86a3c165?source=collection_archive---------5----------------------->

在本帖中，我们来查一下*给定，什么时候，然后*。这一系列的话不仅帮助我改进了思考编码的方式，也帮助了我的个人生活。

![](img/c33b7962aec0943fc97f65660a52889e.png)

Photo by [Alexandra](https://unsplash.com/@alex_tsl?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)

# 背景

我开始更多地考虑*给定，当，然后*当我进入软件测试的时候。在[这篇文章](https://joaorbrandao.medium.com/hero-to-zero-ba8de7f47828)中，我告诉你我曾经花了很多时间通过观看 [Laracasts](https://laracasts.com/) 中的视频来提高我的编码技能。这里有几个测试视频系列，几乎所有的视频都是以同样的方式编写的:

如果你思考这个问题，你可以用这样一种简单的思维方式涵盖这么多领域。如果你以同样的方式构建你的测试，你最终会得到非常简单和容易理解的代码，使它们非常直截了当。

我开始越来越多地思考和使用这个概念。不仅仅是为了测试，而是为了特性生命周期的所有步骤。

让我们跳到一个技术例子。

# 技术示例

![](img/04387899b7f013b5a073f76f59f80fe3.png)

Photo by [Mike Petrucci](https://unsplash.com/@mikepetrucci?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)

让我们想象一下，你和我有一个宠物店网站，在这个月，我们有 10%的优惠订阅。所以，每当一个免费帐户用户登录时，我们要向他们显示一条消息，说:

> 嘿👋立即订阅 Premium，享受九折优惠！

在这一点上，从技术上来说，我们想要创建一个端点，从这里我们可以为一个给定的用户获得订阅折扣:`GET /v1/discounts`

## 规划

是你创造了这个终点！我们从聚在一起创建工作票开始。在那里，我们要确保我们包括了所谓的**验收标准**。当你完成你的工作时，你会把票递给我。我将负责测试它，并确保您实现的内容涵盖了我们根据验收标准编写的每个用例。我们来验票吧！

## 开发和测试

你从队列中拿起了票，然后开始工作！你最终开发了一个非常简单的逻辑。

在`DiscountsController`中，你增加了一个`getSubscriptionDiscountForUser`方法。该方法接收从请求中传递的令牌解析而来的`User`对象(`@UserToken()` decorator 将为您完成这项工作)。当`user.subscription`已经是 premium 或带有值的`Discount`的新实例时，返回`undefined`。

为了确保按预期工作，您为新代码创建了两个测试:

*   第一个验证当用户订阅是免费的时，您得到 10%的折扣。
*   第二个验证当用户订阅是高级时，您没有得到折扣。

让我们看看那些测试！

好样的。我注意到您使用了一种与票据验收标准相似的方法来创建您的测试。

## 质量保证

你完成了你的工作，把一些问答的入场券递给了我。让我们把票拿回来！

好吧！所以我们需要两个用户:一个在免费账户，另一个在高级账户。获得这些信息后，我将使用 HTTP 客户端工具并执行两个请求:

完美！现在，我在免费帐户中为用户提供了 10%的折扣，而在高级帐户中则一无所获。

正如你可能注意到的，我们在不同的步骤中使用了这个*给定，何时，然后*的概念:计划，开发，测试和 QA。这不是面向测试的，而是一种可以帮助你完成许多步骤的思维方式。

让我们来看看这个概念在非技术领域的应用。

# 应用于个人生活

![](img/5fd8427c8570c19011262119e568a5d9.png)

Pookie & Quino

当我开始在日常工作中使用这种方法时，我注意到我也在我的个人生活中使用这种方法。

如果你在一天中稍微注意一下你的想法，你会注意到，即使没有计划，你的大脑可能已经以那种方式运转了。

我举一个我的例子吧！几个月前，我和我的伴侣考虑再领养一只猫。起初，我对此很不情愿，因为我害怕 *Pookie* (第一只猫)不能很好地接受小猫。至于任何重要的决定，我开始更多地考虑它:有利的一面和不利的一面。当我在脑海中列出所有这些要点时，我开始以一种给定的、何时、然后的方式来组织它们，就像这样:

# 结论

*给定，何时，然后*只是三个简单的词，它们组合在一起创造了这种简单而有逻辑的思维方式。这是你的大脑每天都在做的事情，而你却没有注意到。你只需要更加注意。正如它自然发生的那样，如果你利用这种思维流，你可以很容易地将其应用到几乎任何事情上。

作为一名软件工程师，这帮助我完成了一个特性的大部分开发周期步骤。通过创建这种定义预期发生的事情的标准方式来改善团队成员的沟通也是有用的。这样，开发人员可以利用这些信息来指导他们完成编码过程。测试人员将这句话作为他们在测试一个特性时所期望的事实的来源。

希望你喜欢，干杯！👋

又及:猫现在是彼此最好的朋友了！🐈🐈