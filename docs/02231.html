<html>
<head>
<title>K Means Clustering on Thematic Investing</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">k表示主题投资的聚类</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/k-means-clustering-on-thematic-investing-bd75bfb5eeb6?source=collection_archive---------28-----------------------#2021-05-07">https://medium.com/geekculture/k-means-clustering-on-thematic-investing-bd75bfb5eeb6?source=collection_archive---------28-----------------------#2021-05-07</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="d455" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">通过分析主题交易所交易基金来识别大趋势群</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/ef1122cf96c06fe4c3278c83b048fc52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w_9e_vWRy_Z7hBnhZIJKxg.jpeg"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Photo by <a class="ae jn" href="https://unsplash.com/@wrongtog" rel="noopener ugc nofollow" target="_blank">WrongTog</a> on <a class="ae jn" href="https://unsplash.com/" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="b6b0" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">主题投资是一种投资形式，旨在捕捉长期增长速度超过平均水平的大趋势。例如，如果我们想抓住人口老龄化的大趋势，那么我们的主题投资可以是购买与老年住房、医疗保健等相关的股票。</p><p id="7168" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">虽然主题投资越来越受欢迎，但是股票的大趋势分类却很模糊。例如，一些ETF提供商提供能源转型等广泛的大趋势产品，而一些提供商将这一趋势进一步分为智能移动和清洁能源大趋势两个独立的产品。</p><p id="7415" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">大趋势有这么多不同的定义，理解主题投资前景可能具有挑战性。本文展示了我对K均值聚类的应用，根据一些相似性将这些大趋势分组到更小数量的分类中。这个项目的Python实现可以在<a class="ae jn" href="https://github.com/jingwun/K-Means-Clustering-on-Thematic-Investing" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上获得。</p></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><p id="56e2" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">数据收集</strong></p><p id="1e28" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">为了收集大趋势的各种定义，我使用了etf.com数据库来编制主题ETF的列表。在撰写本文时，共有143只ETF，以下是前五只:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es kr"><img src="../Images/fd85e66c2713470705794fcc386f4639.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*axFj-qQWmftdd7ztpytgeQ.jpeg"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Image by author</figcaption></figure></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><p id="0e12" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这些交易所交易基金由各种各样的发行人提供，总共有41家。这是理想的，因为我们可以捕捉各种各样的大趋势定义。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ks"><img src="../Images/e13386b2c064ebc7f13df4fce82010e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CA6fxHCEttmY1raaAzTkVA.jpeg"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Image by author</figcaption></figure><p id="f3a7" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">与ETF相关的特征可以是其价格数据以及持有数据。对于价格数据，我从雅虎下载了每日价格。融资，并计算了2年的跟踪年化回报率和波动率。两年的历史看起来很短，但对于衡量价格模式来说，这可能是一个合理的时间长度，尤其是考虑到自新冠肺炎危机爆发以来，我们已经经历了一个市场周期。对于历史短于2年的ETF，我对年化回报和波动性都标为“不适用”。</p><p id="38c1" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">就持股数据而言，我注意到，基于基金捕捉的大趋势，主题基金通常会强烈倾向于选定的行业。因此，一个好的起点可能是从雅虎收集每个ETF的部门分配。金融和Finnhub。</p><p id="b2b4" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">探索性数据分析</strong></p><p id="5027" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">完整的数据集有这19个变量。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es kt"><img src="../Images/bee09f32f63f218a3d10bd5e6e74e82a.png" data-original-src="https://miro.medium.com/v2/resize:fit:604/format:webp/1*k7Meu35IYjCwNhMP4n4Ikw.jpeg"/></div><figcaption class="jj jk et er es jl jm bd b be z dx">The datatype of variables (image by author)</figcaption></figure><p id="0865" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">以下是数据集中每个变量的定义:</p><ul class=""><li id="f525" class="ku kv hi jq b jr js ju jv jx kw kb kx kf ky kj kz la lb lc bi translated">发行人:交易所交易基金的发行人</li><li id="dc2f" class="ku kv hi jq b jr ld ju le jx lf kb lg kf lh kj kz la lb lc bi translated">AUM:以美元管理的资产</li><li id="d3cb" class="ku kv hi jq b jr ld ju le jx lf kb lg kf lh kj kz la lb lc bi translated">费用率:投资交易所交易基金的成本</li><li id="972e" class="ku kv hi jq b jr ld ju le jx lf kb lg kf lh kj kz la lb lc bi translated">3个月追踪回报:3个月追踪回报</li><li id="3550" class="ku kv hi jq b jr ld ju le jx lf kb lg kf lh kj kz la lb lc bi translated">分部:按etf.com分类</li><li id="aa9d" class="ku kv hi jq b jr ld ju le jx lf kb lg kf lh kj kz la lb lc bi translated">回报:过去2年的年化回报。对于历史不足2年的ETF，回报为N/A。</li><li id="8aae" class="ku kv hi jq b jr ld ju le jx lf kb lg kf lh kj kz la lb lc bi translated">波动率:过去两年的年化波动率。对于历史不到2年的ETF，波动率为N/A。</li><li id="f41d" class="ku kv hi jq b jr ld ju le jx lf kb lg kf lh kj kz la lb lc bi translated">房地产，非必需消费品，材料，消费品，信息技术，通信服务，金融，公用事业，工业，能源，医疗保健:分配到各自的部门</li><li id="5b5c" class="ku kv hi jq b jr ld ju le jx lf kb lg kf lh kj kz la lb lc bi translated">部门分配总额:单个部门分配总额</li></ul><p id="4299" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在这143只ETF中，54只缺少价格数据(回报率= 54)，5只缺少行业数据(总行业分配= 5)。缺少价格数据或行业数据的ETF将被删除。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es li"><img src="../Images/0bbc48697c4d013b9c6561800860cbbe.png" data-original-src="https://miro.medium.com/v2/resize:fit:526/format:webp/1*yMhmmiPx_fyePDIA-laGvA.jpeg"/></div><figcaption class="jj jk et er es jl jm bd b be z dx">Number of N/A values by variable (image by author)</figcaption></figure><p id="7baa" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">发行人、AUM、费用比率、3月TR和细分市场不相关，将被删除。请注意，etf.com通过“细分”变量对主题ETF进行了自己的分类。总共有46段。如果应用自然语言处理，这个变量可能是相关的，但是现在，我将只关注价格和持有量数据。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lj"><img src="../Images/8bd39e2ccc6fe1b0e0db59a3b3665b10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NDlND1f1f6wtClhobPYAAQ.jpeg"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">image by author</figcaption></figure><p id="6650" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">不出所料，在主题投资领域，一些行业(科技、工业和非必需消费品)比其他行业更受欢迎。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lk"><img src="../Images/0a1e598c1e88ef6b29b550193da8b38a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hqtmcZB2TXnDppHvYv7DRw.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">image by author</figcaption></figure><p id="34d6" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">数据角力</strong></p><p id="4509" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">除去不相关的变量和缺失的数据点后，我们剩下89个ETF和13个变量。下表显示了选定的变量，我们可以看到它们有不同的标度。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ll"><img src="../Images/5349cccfbfba6d0c7abcdacf88fc9d49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KhK_aFgRuHcMKKCpkKM4xw.jpeg"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">image by author</figcaption></figure><p id="bada" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">数据转换</strong></p><p id="3f4f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">k表示聚类旨在将数据点(ETF)分组为簇。每个聚类都有一个中心，每个数据点都与离它最近的中心相关联。数学上，我们希望最小化单个数据点到其最近中心的距离。使用欧几里德距离，距离可以计算为:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es lm"><img src="../Images/0527e8a464fe7d3308ec0aa3d0f8e844.png" data-original-src="https://miro.medium.com/v2/resize:fit:612/format:webp/1*s8u1qcJ35BtE-A4rki1S4Q.jpeg"/></div><figcaption class="jj jk et er es jl jm bd b be z dx">image by author</figcaption></figure><p id="95f5" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">，其中:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es ln"><img src="../Images/3ea541590c479334a8816c7e94275fca.png" data-original-src="https://miro.medium.com/v2/resize:fit:608/format:webp/1*Gm5JXHL2KCxPECkFObTjgg.jpeg"/></div><figcaption class="jj jk et er es jl jm bd b be z dx">image by author</figcaption></figure><p id="3e60" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">然后，每个数据点𝑛与最近的中心相关联:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es lo"><img src="../Images/06c75ec2dadfa80dc4c0a167270e4c5e.png" data-original-src="https://miro.medium.com/v2/resize:fit:366/format:webp/1*QdNEjQXHAY26ufV6YE0rMA.jpeg"/></div><figcaption class="jj jk et er es jl jm bd b be z dx">image by author</figcaption></figure><p id="b414" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">由于K均值聚类使用距离来确定相似的聚类点，因此当要素之间的比例相差很大或具有更高维度的数据时，K均值聚类并不适用。因此，应该探索特征缩放和降维。</p><p id="575b" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj"> (1)特征缩放:</strong></p><p id="db2e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">要素缩放的目的是确保要素的比例相似。在这里，我使用StandardScaler，其计算方法如下:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es lp"><img src="../Images/e2ad1f7e45cd1c77a10d54c10116e4b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:376/format:webp/1*EoeCmElNPruHeKBzFTrKlg.jpeg"/></div><figcaption class="jj jk et er es jl jm bd b be z dx">image by author</figcaption></figure><p id="21c3" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">，其中:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es lq"><img src="../Images/b3ea9aafe1da326579ada93db91769e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:638/format:webp/1*mw3GAbNI0t8y9w2bybjipw.jpeg"/></div><figcaption class="jj jk et er es jl jm bd b be z dx">image by author</figcaption></figure><p id="4cc8" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">它将要素重新缩放为近似标准正态分布。数据被转换为平均值为0，标准差为1。</p><p id="cf05" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">重新调整后，我们可以看到每个特征的均值和标准差分别接近0和1。(为了便于阅读下图，省略了其余部分。)</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lr"><img src="../Images/02d5f196cd6d7c8c79e4757b19f4a8b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z-T8zylSJrLd8sT2I25R7g.jpeg"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">image by author</figcaption></figure><p id="8aad" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj"> (2)降维:</strong></p><p id="9636" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">主成分分析(PCA)是一种降维方法，它将一个大的变量集转换为一个较小的变量集，该变量集仍然包含大集中的大部分信息。从数学上讲，对于具有𝑀要素的数据集𝑋，我们希望找到一个𝑃正交单位向量序列，它可以尽可能多地解释数据中的方差。</p><p id="baf8" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">作为一个例子，假设我们要进行一个有两个成分的主成分分析，即𝑃=2.我们首先关注具有最大方差的第一个线性组合。这是一个约束优化问题，我们的目标是:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es ls"><img src="../Images/21af518643d6ffbf707cd31d39e17ea1.png" data-original-src="https://miro.medium.com/v2/resize:fit:646/format:webp/1*eD84B4aTY4xfI7Xt3MKt1g.jpeg"/></div><figcaption class="jj jk et er es jl jm bd b be z dx">image by author</figcaption></figure><p id="10af" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">拉格朗日量是:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es lt"><img src="../Images/68b6686a939b7567b78661647eb9faa4.png" data-original-src="https://miro.medium.com/v2/resize:fit:630/format:webp/1*Tuvd6mhiwa5-P-6H7ZIdbQ.jpeg"/></div><figcaption class="jj jk et er es jl jm bd b be z dx">image by author</figcaption></figure><p id="3fe2" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">取一阶导数并设为零:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es lu"><img src="../Images/f54f44c538ddaf857f0c284720afbae6.png" data-original-src="https://miro.medium.com/v2/resize:fit:838/format:webp/1*RU04z0plzDeTVR5Jp0YATQ.jpeg"/></div><figcaption class="jj jk et er es jl jm bd b be z dx">image by author</figcaption></figure><p id="2e43" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">回想一下，我们的目标是最大化𝕍(𝑋𝛼1).这等于最大化𝜆1，因为:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es lv"><img src="../Images/ce15446c64810a2b7b75052d6019a42a.png" data-original-src="https://miro.medium.com/v2/resize:fit:614/format:webp/1*fjyvzAms9xKtvH4H7fPu7Q.jpeg"/></div><figcaption class="jj jk et er es jl jm bd b be z dx">image by author</figcaption></figure><p id="ea90" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">因此，𝜆1 =最大特征值，𝛼1 =对应的特征向量。</p><p id="74d5" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">为了找到第二个线性组合，我们需要考虑进一步的约束:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es lw"><img src="../Images/02e207d52c0e04b6d36f93b24ad2d514.png" data-original-src="https://miro.medium.com/v2/resize:fit:742/format:webp/1*D9PZK-J3wnB1GD4XKcYOkQ.jpeg"/></div><figcaption class="jj jk et er es jl jm bd b be z dx">image by author</figcaption></figure><p id="5e2e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">拉格朗日量是:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es lx"><img src="../Images/2d4d49202aa894355f1da334171fe8f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:762/format:webp/1*YsVEv3B0JTmekyXl9dcwbg.jpeg"/></div><figcaption class="jj jk et er es jl jm bd b be z dx">image by author</figcaption></figure><p id="6192" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">取一阶导数并设为零:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es ly"><img src="../Images/c92440f10edd1f6c97adb619aff7cf56.png" data-original-src="https://miro.medium.com/v2/resize:fit:704/format:webp/1*qR-OYhxCaLawnYUUF3dI1g.png"/></div><figcaption class="jj jk et er es jl jm bd b be z dx">image by author</figcaption></figure><p id="0f2b" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">因此，</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es lz"><img src="../Images/5813a29602e080ad67c1605e977f5bac.png" data-original-src="https://miro.medium.com/v2/resize:fit:364/format:webp/1*EXESeMrhzI_RM7Zw9GtUhg.png"/></div><figcaption class="jj jk et er es jl jm bd b be z dx">image by author</figcaption></figure><p id="665f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">𝜆2 =第二大特征值，𝛼2 =相应的特征向量。</p><p id="4ac8" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">从下面对专题ETF数据集进行的主成分分析中，我们可以看到，随着成分数量的增加，可以更好地解释方差。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lk"><img src="../Images/68c4f76c4cb5a4836cb4c1ca4177a6f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pnKqktZq7kQugG3BKn8UvQ.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">image by author</figcaption></figure><p id="cbbb" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">通常，我们会为所解释的方差设置一个最小阈值，然后选择能够满足该阈值的最小数量的成分。但是，在这个项目中，我将探索组件数量对K均值聚类的影响。</p><p id="cf28" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在K均值聚类中，将所有到最近中心的平方距离相加，得到总距离的度量，称为“误差”。如果我们将这个误差与簇的数量K相对照，我们得到一个scree图。我们可以看到，在超过4个PCA成分的scree图中没有“弯头”。“肘部”是误差急剧下降然后趋于平稳的地方。肘部的x轴是我们正在寻找的最佳聚类数。如果误差只是逐渐下降(没有拐点)，那么使用这种方法就没有明显的最佳K。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lk"><img src="../Images/b07efd12d61be6d9e581aca3f5260c37.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f_dbBYB-dIHtFhL6av1G6w.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">image by author</figcaption></figure><p id="c7df" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">PCA成分的数量越多，我从原始特征中保留的信息就越多。因此，我受到激励，最大限度地利用弯头在碎石地块中增加PCA成分的数量。在这种情况下，4个PCA组件和4个集群看起来是最佳选择。我不能绘制一个四维图，所以我使用第一和第二主成分来可视化。每种颜色代表一个集群。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lk"><img src="../Images/543ba1e24b836e79b1f080a21810a534.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zJe0I9Y9ZTvarhds5thXmw.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Image by author</figcaption></figure><p id="e83b" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">虽然这个二维图不能完全说明相似性，但我们可以看到，这些ETF似乎在某种程度上根据PCA1和PCA2聚类。下表更清楚地列出了4个集群中的ETF。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ma"><img src="../Images/f30a85f09c2a10a989ae62c2ffd272c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iFAbkTJeKjwNqPzFI2aAjg.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">image by author</figcaption></figure><p id="f7ff" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">单个ETF的浏览揭示了每个集群内的大趋势:</p><ul class=""><li id="a3d9" class="ku kv hi jq b jr js ju jv jx kw kb kx kf ky kj kz la lb lc bi translated">第一组:自然资源和农业</li><li id="10fe" class="ku kv hi jq b jr ld ju le jx lf kb lg kf lh kj kz la lb lc bi translated">群组2:数字化和自动化</li><li id="f3a6" class="ku kv hi jq b jr ld ju le jx lf kb lg kf lh kj kz la lb lc bi translated">第3组:清洁能源和基础设施</li><li id="1748" class="ku kv hi jq b jr ld ju le jx lf kb lg kf lh kj kz la lb lc bi translated">群组4:老龄化人口</li></ul><p id="1f86" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">第二组是一个大组。另一个K意味着如果我们想要进一步将该簇分解成更小的簇，可以对该簇执行聚类。</p></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><p id="bf19" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">结束语</strong></p><p id="e1a7" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">通过简单地提供主题ETF的价格和部门数据，K均值聚类似乎可以有效地识别4个不同的聚类。流行的大趋势是自然资源和农业，能源转换和自动化，清洁能源和基础设施，以及人口老龄化。“能源转换和自动化”集群明显大于其他3个集群，另一个K意味着如果需要进一步拆分，可以进行集群。通过纳入更多的主题基金和个人持股，这项研究有可能得到改进。将自然语言处理应用于ETF的名称也可能会有所启发。</p></div></div>    
</body>
</html>