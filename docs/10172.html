<html>
<head>
<title>Can I get some J’s in the chat?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我能在聊天中得到一些J吗？</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/can-i-get-some-js-in-the-chat-5d89a8a27f7a?source=collection_archive---------22-----------------------#2022-01-16">https://medium.com/geekculture/can-i-get-some-js-in-the-chat-5d89a8a27f7a?source=collection_archive---------22-----------------------#2022-01-16</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/e69215b53ff4205c995b81661ed4df70.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GpfdgTIsYyYl5dLrNe49oQ.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">I am a JavaScript streamer/content creator now</figcaption></figure><p id="4d5b" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi js translated">这是你的朋友切·戈拉诺夫带来的另一个JavaScript Twitch流。好吧，聊天爱好者，你的朋友开发了一个叫Poggers的疯狂应用！我能在聊天中得到一些J吗…和一些poggers吗…</p><p id="5598" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">感谢五个天才的subs BigFlexGamer！</p><p id="48a5" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">另一个是JScriptGod，欢迎来到我的朋友的聊天室！</p><p id="c504" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">MsApexLegend问，“车侠，给我们看看这个应用！”好的，我抓住你了！</p><p id="57d1" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">好吧，聊天，你知道我们总是有那些游戏列表在我们的脑海里，我们总是有一些笔记绑在它上面？和《哦，男人》一样，传奇工作室的导演宫崎英高也即将推出《埃尔登戒指》？现在你可以和波格斯一起了！</p><figure class="kc kd ke kf fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kb"><img src="../Images/6d73a210b8d58f38ffb1be979af136a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JSgKnUuSFXZ5awNtZgcwuA.png"/></div></div></figure><p id="ff35" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这是一个简单的单页应用程序，您可以在上面的表格中填写游戏的详细信息，提交后它会在您的列表中创建一个游戏！简单的聊天。但我知道你们都是冲着好东西来的。让我们到幕后去。我看到你JDNeal与poggers在聊天…让我们得到它…</p><p id="8b2a" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">让我们检查一下表单的构建，然后提交数据，好吗？我没有整个晚上做整个应用程序聊天抱歉！除非我们在聊天中得到一些更有天赋的subs首先，我们开始用一个实例方法构建一个GameForm类，这个方法叫做…你猜它是Fam…addForm()。哦，是的，JS是面向对象的宝贝！</p><figure class="kc kd ke kf fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kg"><img src="../Images/b1585056f13e2f93eb21be896a6e0384.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vDEiaUTCjQIjm4Iz4Faf8Q.png"/></div></div></figure><p id="5549" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这里我们设置了两个常量变量，formContainer从我的index.html页面中抓取了<div>元素，该页面将保存<form>元素。第二个常量变量gameForm是制作</form><form>元素本身。还要注意Chat，我放了一个id属性为“comment-container”的<span>元素。这将在以后发挥作用，因为我们的一个游戏有许多评论。联想聊天…联想…</span></form></div></p><p id="84cf" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">接下来，我们使用gameForm的innerHTML方法，获取gameForm变量并添加游戏<input/> html。现在我们有了表单，让我们将坏男孩添加到formsContainer变量中。但是我们还没有完成！</p><p id="0a89" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我们需要添加一些事件侦听器，否则，猜猜看，当我们单击submit按钮时，什么也不会发生。类型属性为<strong class="iw hj"> submit </strong>的<input/>元素的行为就像一个按钮！因此，我们需要向gameForm添加一个事件监听器来监听“提交”，然后我们需要构建处理该事件的回调函数。你还跟我聊天吗？好的，让我们来看看handleSubmit方法…</p><figure class="kc kd ke kf fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kh"><img src="../Images/be08b4ace2ac13e44371d55e0ca2f8c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W8yDGXzbcF1b4T_P13C9_g.png"/></div></div></figure><p id="aff9" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">方法接受的参数是事件(e)。在做任何事情之前，我们想在事件上调用preventDefault()方法，因为submit会自动尝试将我们的表单提交给服务器，而这并不是我们在这里要做的。</p><p id="875f" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">下一次聊天，我们将设置一个名为formInputs的常量变量，并用一个空对象声明它。在这里，我们将捕获表单的<input/> id属性作为键，并捕获<input/>值来创建我们的游戏！是时候抓住那些形式<input/>元素并运行它了…那么我们该如何着手去做呢？简单聊天，信任，我们调用我们事件的目标属性，它将返回我们事件被调用的对象，在这种情况下记住我们在我们的<form>元素上调用它。之后，我们将链接children属性，该属性将返回嵌套在</form><form>元素中的所有<inputs>和<span>节点的HTML集合。</span></inputs></form></p><p id="5186" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在让我们迭代HTML集合，获取我们需要的一切。停止聊天。没那么快。你知道HTML集合，虽然它看起来像一个数组，但实际上不是。所以在迭代之前，我们需要调用Array.from()静态方法，将HTML集合转换成一个数组。现在让我们打电话。去拿我们需要的东西。</p><figure class="kc kd ke kf fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ki"><img src="../Images/437ed60d743e38c1405836a0a84d242f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kdc2txi_mqIJzKc2MUQnbQ.png"/></div></div></figure><p id="09e4" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">分解这个公式，变量<strong class="iw hj"> c </strong>表示&lt;表单&gt;元素的每个子节点，但是技巧是我们需要&lt;输入&gt;元素和&lt;跨度&gt;元素内部的内容。因此，一个简单的控制流将帮助我们做到这一点。首先，如果节点名=== "INPUT ",那么我们要获取它的id属性，并将其设置为formInputs对象中的一个键，而&lt;输入&gt;值将是该键的新值。不错！但是&lt;跨度&gt;呢？</p><p id="3643" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">好问题。在我们的else if部分中，如果节点是一个<span>元素，我们将设置一个<strong class="iw hj"> i </strong>变量为1(用于第一个注释),然后获取&lt; span &gt;元素的子元素(保存注释的&lt;输入&gt;)并使用Array.from()和forEach方法遍历它们。同样，如果节点是&lt;输入&gt;，我们获取节点的类属性作为键加上<strong class="iw hj"> i </strong>变量，因为所有键必须是唯一的。设置&lt;输入&gt;值和viola！我们有我们的表单输出！</span></p><p id="a248" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">所以一旦这些都完成了，我们就进入适配器类，创建一个新的游戏添加到页面中！</p><figure class="kc kd ke kf fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kj"><img src="../Images/50281fa364bbab3421b18998c5080556.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*irF4Fztf8g-cODMzvZr1EA.png"/></div></div></figure><p id="ef4c" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我们在那边聊得怎么样？我们快完成了！看一看适配器类createGames的实例方法，它接受的参数应该看起来很熟悉…它是我们的formInputs对象！</p><p id="3cb5" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">第一步是把我们的意见和格式发送到我们的后端。我知道你们都是Rails专业人士，所以记住在后端，我们在游戏的类中有我们的comments_attributes setter！我们必须格式化它！那么，我们如何着手做这件事呢？我们将在循环中使用<strong class="iw hj">for……来遍历我们对象中的所有键，由<strong class="iw hj"> k </strong>变量表示，但只遍历包含“注释”的键。Boom，perfect现在让我们用一个空数组设置一个const commentsArray变量，并推送那些用“content:”键格式化的注释值，以适当地反映后端的内容属性。一个对象数组！</strong></p><p id="8486" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">是我们设置获取请求并将数据发送到后端的时候了。这里的关键是在我们创建一个新对象时设置“method: POST ”,并将我们的数据发送到JSON.stringify，以正确的格式发送它——JavaScript对象符号。我们使用formInputs和commentsArray设置数据，这些数据将被正确格式化，以便在后端创建一个对象并将其保存到ActiveRecord。</p><figure class="kc kd ke kf fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kk"><img src="../Images/4478942c0f589cf129c48f884a5b494c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7Zi2GRGE_7sIsCoBMbW-9A.png"/></div></div></figure><p id="aeff" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">为了结束这次聊天，我将简要介绍一下返回的数据。如果数据返回成功，我们将使用数据对象的游戏键创建一个新的游戏实例，并在新的游戏实例上调用addToDom()方法。这将创建一个新的<li>元素，在你的主页上显示你的新游戏的详细信息。</li></p><p id="9ff7" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">你有它聊天。JavaScript是一种独特的动物，老实说，我仍在努力掌握它。然而，具有讽刺意味的是，这是我真正喜欢的一种语言。如果你想看更多的代码，我邀请你去看看前端回购:<a class="ae kl" href="https://github.com/cgoranov/poggers-frontend" rel="noopener ugc nofollow" target="_blank">https://github.com/cgoranov/poggers-frontend</a>。</p><p id="d10f" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这将结束那里的流，但不要忘记粉碎以下按钮，我会看到你们所有人以后！和平！</p></div></div>    
</body>
</html>