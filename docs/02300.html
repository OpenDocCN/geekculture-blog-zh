<html>
<head>
<title>How to Make Dynamic Charts in React Native using “react-native-chart-kit”</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用“react-native-chart-kit”在React Native中制作动态图表</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/how-to-make-dynamic-charts-in-react-native-using-react-native-chart-kit-48e9e5f41485?source=collection_archive---------4-----------------------#2021-05-10">https://medium.com/geekculture/how-to-make-dynamic-charts-in-react-native-using-react-native-chart-kit-48e9e5f41485?source=collection_archive---------4-----------------------#2021-05-10</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="3af8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">图表是数据可视化的图形表示，其中“数据由符号表示，如条形图中的条、折线图中的线或饼图中的切片”。</p><p id="357c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如今，不同的移动和网络应用程序都以图表的形式呈现数据。图表可读性强，并且用漂亮的图形向用户传达信息。应用程序中的图表还有几个其他的用例。</p><p id="94d5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们进入主题，我看到许多程序员正在努力在他们的应用程序中嵌入动态图表，所以在这里我将通过使用库"<strong class="ih hj"> react-native-chart-kit </strong>"来分享动态图表的代码配方，这是react native中最受欢迎的图表库之一。我正在分享“<em class="jd">折线图”</em>的信息，您可以相应地将其用于不同的图表，但请记住每个图表有不同的输入，例如折线图与饼图相比有不同的输入。<strong class="ih hj"> <em class="jd">数据</em> </strong> <strong class="ih hj"> <em class="jd">变量</em> </strong>从库中负责取输入。</p><p id="5936" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">本库链接:<br/><a class="ae je" href="https://www.npmjs.com/package/react-native-chart-kit" rel="noopener ugc nofollow" target="_blank"><em class="jd">https://www.npmjs.com/package/react-native-chart-kit</em></a></p><p id="2b0c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">先决条件:</strong></p><ol class=""><li id="e046" class="jf jg hi ih b ii ij im in iq jh iu ji iy jj jc jk jl jm jn bi translated"><em class="jd">在您的机器上建立react-native环境</em></li></ol><p id="0318" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd"> 2。对react-native的基本了解</em></p><p id="4f92" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤1: </strong>通过npm安装library — react-native-chart-kit</p><p id="8baa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在终端或cmd上运行以下命令进行安装。</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="7011" class="jx jy hi jt b fi jz ka l kb kc">npm i react-native-chart-kit</span></pre><p id="3f54" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第二步:</strong>导入库— react-native-chart-kit</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="1831" class="jx jy hi jt b fi jz ka l kb kc">import {<br/> LineChart,<br/>  BarChart,<br/>  PieChart,<br/>  ProgressChart,<br/>  ContributionGraph,<br/>  StackedBarChart<br/>} from "react-native-chart-kit";</span></pre><p id="8e0b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第三步:</strong>制作一个状态<strong class="ih hj"> </strong> —数组来存储值</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="2f7d" class="jx jy hi jt b fi jz ka l kb kc">state = {<br/>datasource:[]<br/>  };</span></pre><p id="c15c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第四步:</strong>创建一个函数，从数据库中获取动态数据。这个函数将负责从数据库的响应变量中获取信息，并将数据放入数据源数组。</p><p id="1959" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">注</strong>:在这里你必须使用你自己的信息来访问数据，我展示这些信息只是为了便于理解。</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="55f4" class="jx jy hi jt b fi jz ka l kb kc">//fetch your own data from here</span><span id="1505" class="jx jy hi jt b fi kd ka l kb kc"> get_chart=()=&gt;{<br/>        //change the url for fetching your data <br/>              fetch('http://192.168.18.7:8000/api/linechart', {<br/>                method: 'GET',<br/>                headers: {<br/>                  Accept: 'application/json',<br/>                  'Content-Type': 'application/json',<br/>                },<br/>                <br/>              })<br/>                .then(response =&gt; response.json())<br/>          <br/>                .then(response =&gt; {<br/>                 this.setState({datasource:response})<br/>             <br/>                })<br/>                .catch(error =&gt; {<br/>                <br/>                });<br/><br/>}</span></pre><p id="b8cd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第五步:</strong>为动态折线图或任何其他你想使用的图表制作一个函数。</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="689a" class="jx jy hi jt b fi jz ka l kb kc">LineChart_Dynamic=()=&gt;{<br/><br/>if (this.state.datasource){<br/>if(this.state.datasource.length){<br/><br/>return(<br/>&lt;View&gt;<br/>  &lt;Text&gt;Bezier Line Chart&lt;/Text&gt;<br/>  &lt;LineChart<br/>    data={{<br/>//this is x-axis data</span><span id="f9dc" class="jx jy hi jt b fi kd ka l kb kc">      labels: ["January", "February", "March", "April", "May", "June"],</span><span id="a787" class="jx jy hi jt b fi kd ka l kb kc">      datasets: [<br/>        {<br/>          data:  this.state.datasource.map(item=&gt;{<br/>            return(<br/>//this is y-axis</span><span id="a355" class="jx jy hi jt b fi kd ka l kb kc">              item.students </span><span id="5a7d" class="jx jy hi jt b fi kd ka l kb kc">/*you need to add your data here from JSON, and remember the data you are requesting should be integer because it is line chart*/.<br/>            )<br/>          })<br/>          <br/>        }<br/>      ]<br/>    }}<br/>    width={Dimensions.get("window").width} // from react-native<br/>    height={220}<br/>    yAxisLabel="students"<br/>    yAxisSuffix="k"<br/>    yAxisInterval={1} // optional, defaults to 1<br/>    chartConfig={{<br/>      backgroundColor: "#e26a00",<br/>      backgroundGradientFrom: "#fb8c00",<br/>      backgroundGradientTo: "#ffa726",<br/>      decimalPlaces: 2, // optional, defaults to 2dp<br/>      color: (opacity = 1) =&gt; `rgba(255, 255, 255, ${opacity})`,<br/>      labelColor: (opacity = 1) =&gt; `rgba(255, 255, 255, ${opacity})`,<br/>      style: {<br/>        borderRadius: 16<br/>      },<br/>      propsForDots: {<br/>        r: "6",<br/>        strokeWidth: "2",<br/>        stroke: "#ffa726"<br/>      }<br/>    }}<br/>    bezier<br/>    style={{<br/>      marginVertical: 8,<br/>      borderRadius: 16<br/>    }}<br/>  /&gt;<br/>&lt;/View&gt;<br/>)<br/><br/>} }}<br/>  </span></pre><p id="f244" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当get_chart()函数获取数据时，您还可以添加额外的东西向用户显示。</p><p id="515d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">完整代码</strong></p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="c6ac" class="jx jy hi jt b fi jz ka l kb kc">import React, { Component } from "react";<br/>import {<br/>  Alert,<br/>  StyleSheet,<br/>  Text,<br/>  View,<br/>  ActivityIndicator,<br/>  Dimensions,<br/>  <br/>} from "react-native";<br/><br/><br/>import {<br/> LineChart,<br/>  BarChart,<br/>  PieChart,<br/>  ProgressChart,<br/>  ContributionGraph,<br/>  StackedBarChart<br/>} from "react-native-chart-kit";<br/><br/>class Linedchart extends Component {<br/>  state = {<br/>datasource:[]<br/>  };<br/><br/>LineChart_Dynamic=()=&gt;{<br/><br/>if (this.state.datasource){<br/>if(this.state.datasource.length){<br/><br/>return(<br/>&lt;View&gt;<br/>  &lt;Text&gt;Bezier Line Chart&lt;/Text&gt;<br/>  &lt;LineChart<br/>    data={{<br/>      labels: ["January", "February", "March", "April", "May", "June"],<br/>      datasets: [<br/>        {<br/>          data:  this.state.datasource.map(item=&gt;{<br/>            return(<br/>              item.students <br/>//you need to add your data here from JSON, and remember the data you are requesting should be integer.<br/>            )<br/>          })<br/>          <br/>        }<br/>      ]<br/>    }}<br/>    width={Dimensions.get("window").width} // from react-native<br/>    height={220}<br/>    yAxisLabel="students"<br/>    yAxisSuffix="k"<br/>    yAxisInterval={1} // optional, defaults to 1<br/>    chartConfig={{<br/>      backgroundColor: "#e26a00",<br/>      backgroundGradientFrom: "#fb8c00",<br/>      backgroundGradientTo: "#ffa726",<br/>      decimalPlaces: 2, // optional, defaults to 2dp<br/>      color: (opacity = 1) =&gt; `rgba(255, 255, 255, ${opacity})`,<br/>      labelColor: (opacity = 1) =&gt; `rgba(255, 255, 255, ${opacity})`,<br/>      style: {<br/>        borderRadius: 16<br/>      },<br/>      propsForDots: {<br/>        r: "6",<br/>        strokeWidth: "2",<br/>        stroke: "#ffa726"<br/>      }<br/>    }}<br/>    bezier<br/>    style={{<br/>      marginVertical: 8,<br/>      borderRadius: 16<br/>    }}<br/>  /&gt;<br/>&lt;/View&gt;<br/>)<br/>} else {<br/>return(<br/><br/>&lt;View style={{justifyContent:"center",alignItems:'center',flex:1}}&gt;<br/><br/>&lt;ActivityIndicator size="large"/&gt;<br/><br/>&lt;/View&gt;<br/><br/>)<br/>  }<br/><br/>}else {<br/><br/>  return(<br/>  <br/>  &lt;View style={{justifyContent:"center",alignItems:'center',flex:1}}&gt;<br/>  <br/> &lt;Text&gt;no data found&lt;/Text&gt;<br/>  <br/>  &lt;/View&gt;<br/>  )}<br/><br/>  }<br/><br/>//***************************************************************</span><span id="8efc" class="jx jy hi jt b fi kd ka l kb kc">//fetch your own data from here<br/><br/> get_chart=()=&gt;{<br/><br/>              fetch('http://192.168.18.7:8000/api/linechart', {<br/>                method: 'GET',<br/>                headers: {<br/>                  Accept: 'application/json',<br/>                  'Content-Type': 'application/json',<br/>                },<br/>                <br/>              })<br/>                .then(response =&gt; response.json())<br/>          <br/>                .then(response =&gt; {<br/>                 this.setState({datasource:response})<br/>             <br/>                })<br/>                .catch(error =&gt; {<br/>                <br/>                });<br/>}<br/><br/>/*componentDidMount will execute the function when the screen is mounted.*/</span><span id="54a6" class="jx jy hi jt b fi kd ka l kb kc">  componentDidMount=()=&gt;{<br/>    this.get_chart()<br/>  }<br/><br/>  render() {<br/><br/>return(<br/>&lt;View&gt;<br/><br/>{this.LineChart_Dynamic()}<br/><br/>&lt;/View&gt;<br/><br/>)}}<br/><br/>export default Linedchart;</span></pre></div></div>    
</body>
</html>