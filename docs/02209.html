<html>
<head>
<title>How to Create a Simple Text-to-Speech Application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何创建一个简单的文本到语音转换应用程序</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/how-to-create-a-simple-text-to-speech-web-application-2a8fdb9ccbcc?source=collection_archive---------6-----------------------#2021-05-07">https://medium.com/geekculture/how-to-create-a-simple-text-to-speech-web-application-2a8fdb9ccbcc?source=collection_archive---------6-----------------------#2021-05-07</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/704f9d49f7a224e2f7292dbe58c762cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wQNuKYhjaYspXE3IUdwZsw.jpeg"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx">Photo by <a class="ae hv" href="https://unsplash.com/@ffstop?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Fotis Fotopoulos</a> on <a class="ae hv" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><div class=""/><p id="c978" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果你曾经对阅读一篇文章感到厌烦或厌倦，或者觉得你需要有人帮你大声朗读一本杂志的内容，那么你并不孤单。我也有过这样的感觉！这是我决定写这篇文章的主要原因，以帮助Web开发人员构建一些非常简单的东西来解决这个巨大的问题。</p><p id="6a84" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在本文中，我将讨论什么是Web API，以及如何使用语音合成API将文本转换成不同声音的语音。</p><blockquote class="jt ju jv"><p id="bfec" class="iv iw jw ix b iy iz ja jb jc jd je jf jx jh ji jj jy jl jm jn jz jp jq jr js hb bi translated">根据<a class="ae hv" href="https://en.wikipedia.org/wiki/Application_programming_interface" rel="noopener ugc nofollow" target="_blank">维基百科对API </a>的定义:API(应用编程接口)是定义多个软件应用之间交互的接口。它定义了可以发出的请求的种类、如何发出请求、应该使用的数据格式、应该遵循的约定等等。它还可以提供扩展机制，以便用户能够以各种方式扩展现有的功能。</p></blockquote><p id="e006" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">不同类型的API有<strong class="ix hz">开放API</strong>、<strong class="ix hz">内部API</strong>、<strong class="ix hz">合作伙伴API</strong>、<strong class="ix hz">复合API</strong>、<strong class="ix hz"> RESTFUL </strong>、<strong class="ix hz"> JSON-RPC </strong>、<strong class="ix hz"> XML </strong> -RPC，以及<strong class="ix hz"> SOAP </strong>。</p><blockquote class="jt ju jv"><p id="a279" class="iv iw jw ix b iy iz ja jb jc jd je jf jx jh ji jj jy jl jm jn jz jp jq jr js hb bi translated">Web APIs经常使用基于机器的交互，比如REST和SOAP。</p></blockquote><p id="f343" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在本文中，我们主要关注的是<strong class="ix hz"> Web语音API </strong>，它属于<strong class="ix hz">Web/浏览器API </strong>，而其他API将在另一篇文章中详细讨论。</p><h1 id="f9ca" class="ka kb hy bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">什么是Web/浏览器API？</h1><p id="e9f5" class="pw-post-body-paragraph iv iw hy ix b iy ky ja jb jc kz je jf jg la ji jj jk lb jm jn jo lc jq jr js hb bi translated"><strong class="ix hz">浏览器API</strong>(或web<strong class="ix hz">API</strong>)是内置在<strong class="ix hz">浏览器</strong>中的<strong class="ix hz">API</strong>。他们能够从浏览器和周围的计算机环境中公开数据，这有助于开发人员执行复杂的操作。有了这些API，我们可以构建利用通知、振动等本地特性的应用程序。</p><h1 id="4b0a" class="ka kb hy bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated"><strong class="ak">网络语音API </strong></h1><p id="6254" class="pw-post-body-paragraph iv iw hy ix b iy ky ja jb jc kz je jf jg la ji jj jk lb jm jn jo lc jq jr js hb bi translated">根据<a class="ae hv" href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Speech_API" rel="noopener ugc nofollow" target="_blank"> <em class="jw"> MDN </em> </a> <em class="jw">，</em><em class="jw"/><strong class="ix hz">Web语音API是一个</strong> web api <strong class="ix hz"> </strong>，它的<strong class="ix hz"> </strong>使您能够将语音数据合并到Web应用程序中。Web语音API有两个部分:<strong class="ix hz">语音合成(文本到语音)</strong>和<strong class="ix hz">语音识别(异步语音识别)。)</strong></p><p id="9c2d" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在本文中，我们将会看到<strong class="ix hz">语音合成(文本到语音</strong>的强大功能以及如何利用它。</p><h1 id="06f7" class="ka kb hy bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">言语合成</h1><p id="0c51" class="pw-post-body-paragraph iv iw hy ix b iy ky ja jb jc kz je jf jg la ji jj jk lb jm jn jo lc jq jr js hb bi translated">根据<a class="ae hv" href="https://developer.mozilla.org/en-US/docs/Web/API/SpeechSynthesis" rel="noopener ugc nofollow" target="_blank"><em class="jw">MDN</em></a>,<a class="ae hv" href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Speech_API" rel="noopener ugc nofollow" target="_blank">Web语音API </a>的<code class="du ld le lf lg b"><strong class="ix hz">SpeechSynthesis</strong></code>接口是语音服务的控制器接口；这可用于检索有关设备上可用的合成语音、开始和暂停语音以及其他命令的信息。</p><p id="29e1" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hz">属性</strong> <em class="jw">继承自其父接口，EventTarget: </em></p><p id="5dad" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><code class="du ld le lf lg b"><a class="ae hv" href="https://developer.mozilla.org/en-US/docs/Web/API/SpeechSynthesis/paused" rel="noopener ugc nofollow" target="_blank">SpeechSynthesis.paused</a></code>这是一个<code class="du ld le lf lg b"><a class="ae hv" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean" rel="noopener ugc nofollow" target="_blank">Boolean</a></code>，如果speechSynthetisis对象处于暂停状态，它将返回<code class="du ld le lf lg b">true</code>。</p><p id="3d94" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><code class="du ld le lf lg b"><a class="ae hv" href="https://developer.mozilla.org/en-US/docs/Web/API/SpeechSynthesis/pending" rel="noopener ugc nofollow" target="_blank">SpeechSynthesis.pending</a> </code> A <code class="du ld le lf lg b"><a class="ae hv" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean" rel="noopener ugc nofollow" target="_blank">Boolean</a></code>，如果话语队列包含尚未说出的话语，则返回<code class="du ld le lf lg b">true</code>。</p><p id="7380" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><code class="du ld le lf lg b"><a class="ae hv" href="https://developer.mozilla.org/en-US/docs/Web/API/SpeechSynthesis/speaking" rel="noopener ugc nofollow" target="_blank">SpeechSynthesis.speaking</a></code>一个<code class="du ld le lf lg b"><a class="ae hv" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean" rel="noopener ugc nofollow" target="_blank">Boolean</a></code>，如果一个话语当前正在被说出，则返回<code class="du ld le lf lg b">true</code>——即使<code class="du ld le lf lg b">SpeechSynthesis</code>处于暂停状态。</p><p id="2e2c" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hz">方法</strong> <em class="jw">也从其父接口</em> <code class="du ld le lf lg b"><a class="ae hv" href="https://developer.mozilla.org/en-US/docs/Web/API/EventTarget" rel="noopener ugc nofollow" target="_blank"><em class="jw">EventTarget</em></a></code> <em class="jw">继承方法。</em></p><p id="df18" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">从话语队列中删除所有话语。</p><p id="a404" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><code class="du ld le lf lg b"><a class="ae hv" href="https://developer.mozilla.org/en-US/docs/Web/API/SpeechSynthesis/getVoices" rel="noopener ugc nofollow" target="_blank">SpeechSynthesis.getVoices()</a></code>返回代表当前设备上所有可用声音的<code class="du ld le lf lg b"><a class="ae hv" href="https://developer.mozilla.org/en-US/docs/Web/API/SpeechSynthesisVoice" rel="noopener ugc nofollow" target="_blank">SpeechSynthesisVoice</a></code>对象列表。</p><p id="e5ec" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><code class="du ld le lf lg b"><a class="ae hv" href="https://developer.mozilla.org/en-US/docs/Web/API/SpeechSynthesis/pause" rel="noopener ugc nofollow" target="_blank">SpeechSynthesis.pause()</a></code>将<code class="du ld le lf lg b">SpeechSynthesis</code>对象置于暂停状态。</p><p id="3a21" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><code class="du ld le lf lg b"><a class="ae hv" href="https://developer.mozilla.org/en-US/docs/Web/API/SpeechSynthesis/resume" rel="noopener ugc nofollow" target="_blank">SpeechSynthesis.resume()</a></code>将<code class="du ld le lf lg b">SpeechSynthesis</code>对象置于非暂停状态:如果它已经暂停，则恢复它。</p><p id="6b29" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><code class="du ld le lf lg b"><a class="ae hv" href="https://developer.mozilla.org/en-US/docs/Web/API/SpeechSynthesis/speak" rel="noopener ugc nofollow" target="_blank">SpeechSynthesis.speak()</a></code>添加一个<code class="du ld le lf lg b"><a class="ae hv" href="https://developer.mozilla.org/en-US/docs/Web/API/SpeechSynthesisUtterance" rel="noopener ugc nofollow" target="_blank">utterance</a></code>到发言队列；当任何其他话语在它被说出之前排队时，它将被说出。</p><blockquote class="jt ju jv"><p id="c390" class="iv iw jw ix b iy iz ja jb jc jd je jf jx jh ji jj jy jl jm jn jz jp jq jr js hb bi translated"><em class="hy">现在是时候构建我们简单的文本到语音转换应用程序了</em></p></blockquote><p id="1191" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">演示链接:<a class="ae hv" href="https://mytextspeech.netlify.app/" rel="noopener ugc nofollow" target="_blank">https://mytextspeech.netlify.app/</a></p><figure class="li lj lk ll fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lh"><img src="../Images/e126a75a19733206144876434f91948b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_E2ZWZRwqw4-H-aX3i4jKA.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx">Final result</figcaption></figure><p id="3bbc" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hz"> <em class="jw">第一步:</em> </strong></p><p id="75d2" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">创建一个文件夹，在文件夹中，创建一个index.html文件，并将下面的代码粘贴到其中。下面的代码片段包含构建应用程序布局时使用的HTML代码。</p><figure class="li lj lk ll fd hk"><div class="bz dy l di"><div class="lm ln l"/></div><figcaption class="hr hs et er es ht hu bd b be z dx">index.html</figcaption></figure><p id="b005" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">S <strong class="ix hz"> <em class="jw"> tep 2: </em> </strong></p><p id="350f" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">创建一个javascript文件main.js，并将下面的代码粘贴到其中。</p><figure class="li lj lk ll fd hk"><div class="bz dy l di"><div class="lm ln l"/></div><figcaption class="hr hs et er es ht hu bd b be z dx">main.js</figcaption></figure><p id="e74b" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这里，我们声明了我们的<strong class="ix hz"> main.js </strong>文件中需要的所有变量。第一个变量synth表示在<code class="du ld le lf lg b"><a class="ae hv" href="https://developer.mozilla.org/en-US/docs/Web/API/SpeechSynthesis/paused" rel="noopener ugc nofollow" target="_blank">speechSynthesis</a></code> <strong class="ix hz"> </strong>对象中可用的属性，而其他变量是将用于处理事件的DOM元素。</p><p id="a334" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hz"> <em class="jw">第三步:</em> </strong></p><p id="8eb9" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在main.js文件中，复制并粘贴下面的代码</p><figure class="li lj lk ll fd hk"><div class="bz dy l di"><div class="lm ln l"/></div></figure><p id="4c7f" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><code class="du ld le lf lg b">voices</code>数组将包含浏览器Web speech API中出现的所有语音，同时创建<code class="du ld le lf lg b"><a class="ae hv" href="https://developer.mozilla.org/en-US/docs/Web/API/SpeechSynthesis/paused" rel="noopener ugc nofollow" target="_blank">getVoices</a></code> <strong class="ix hz"> <em class="jw"> </em> </strong>函数以获取所有语音以及语音名称和使用的语言。最后，这些声音会被附加到我们网页上的选择选项中。这将使用户能够选择他们喜欢的声音。</p><p id="c069" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hz"> <em class="jw">第四步:</em> </strong></p><p id="5a27" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在main.js文件中，复制并粘贴下面的代码</p><figure class="li lj lk ll fd hk"><div class="bz dy l di"><div class="lm ln l"/></div></figure><p id="dd55" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">此时，我们将创建一个函数<code class="du ld le lf lg b">speak</code>来处理说话事件，在声音说话时添加波形背景，处理选定的声音，设置声音的速率和音调，还处理过程中的错误。</p><p id="f76d" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hz"> <em class="jw">第五步:</em> </strong></p><p id="2085" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在main.js文件中，复制并粘贴下面的代码</p><figure class="li lj lk ll fd hk"><div class="bz dy l di"><div class="lm ln l"/></div></figure><p id="6ef3" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">最后，我们有事件句柄，它负责处理应用程序中所有可点击和可选择的事件，例如提交文本内容，增加/减少速率和音调，以及改变声音。</p><h1 id="113b" class="ka kb hy bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">完全码</h1><figure class="li lj lk ll fd hk"><div class="bz dy l di"><div class="lm ln l"/></div><figcaption class="hr hs et er es ht hu bd b be z dx">Complete index.html code</figcaption></figure><figure class="li lj lk ll fd hk"><div class="bz dy l di"><div class="lm ln l"/></div><figcaption class="hr hs et er es ht hu bd b be z dx">Complete main.js code</figcaption></figure><blockquote class="jt ju jv"><p id="3e19" class="iv iw jw ix b iy iz ja jb jc jd je jf jx jh ji jj jy jl jm jn jz jp jq jr js hb bi translated">耶！😃，我们做到了。我们刚刚创建了一个简单的文本到语音的应用程序，使用户能够输入或复制单词或句子，然后转换成语音。现在你可以舒服地坐着，粘贴你想要的文本，放松地享受阅读这些内容的人的声音😂。</p></blockquote><h1 id="04b4" class="ka kb hy bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">结论</h1><p id="4818" class="pw-post-body-paragraph iv iw hy ix b iy ky ja jb jc kz je jf jg la ji jj jk lb jm jn jo lc jq jr js hb bi translated">在我的其他文章中，我解释了更多关于浏览器API的内容，并进一步讨论了不同类型的可用浏览器API。</p><h1 id="ef7f" class="ka kb hy bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">类似文章</h1><ul class=""><li id="433f" class="lo lp hy ix b iy ky jc kz jg lq jk lr jo ls js lt lu lv lw bi translated"><a class="ae hv" href="https://javascript.plainenglish.io/understanding-browser-apis-83a570a62840" rel="noopener ugc nofollow" target="_blank">“了解浏览器API”</a></li><li id="4a8c" class="lo lp hy ix b iy lx jc ly jg lz jk ma jo mb js lt lu lv lw bi translated"><a class="ae hv" href="https://javascript.plainenglish.io/how-to-create-a-voice-to-text-application-2cb12e6b50fd" rel="noopener ugc nofollow" target="_blank">“如何创建简单的语音转文本应用程序”</a></li></ul><h1 id="92da" class="ka kb hy bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">进一步的解释/参考</h1><ul class=""><li id="1e33" class="lo lp hy ix b iy ky jc kz jg lq jk lr jo ls js lt lu lv lw bi translated"><a class="ae hv" href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Speech_API" rel="noopener ugc nofollow" target="_blank">网络语音API </a>，“Mozilla开发者网络</li><li id="027e" class="lo lp hy ix b iy lx jc ly jg lz jk ma jo mb js lt lu lv lw bi translated"><a class="ae hv" href="https://dvcs.w3.org/hg/speech-api/raw-file/tip/webspeechapi.html" rel="noopener ugc nofollow" target="_blank">网络语音API规范:编辑稿</a>，“W3C</li><li id="7e7e" class="lo lp hy ix b iy lx jc ly jg lz jk ma jo mb js lt lu lv lw bi translated"><a class="ae hv" href="http://caniuse.com/#feat=speech-synthesis" rel="noopener ugc nofollow" target="_blank">语音合成API </a>，“我可以用吗？(浏览器支持图表)</li><li id="959b" class="lo lp hy ix b iy lx jc ly jg lz jk ma jo mb js lt lu lv lw bi translated">“会说话的网络应用:语音合成API简介，”谷歌开发者埃里克·比德尔曼</li><li id="e1b1" class="lo lp hy ix b iy lx jc ly jg lz jk ma jo mb js lt lu lv lw bi translated"><a class="ae hv" href="https://developer.microsoft.com/en-us/microsoft-edge/testdrive/demos/speechsynthesis/" rel="noopener ugc nofollow" target="_blank">语音合成API </a>，“微软开发者(Edge的演示)</li></ul><figure class="li lj lk ll fd hk"><div class="bz dy l di"><div class="lm ln l"/></div></figure></div></div>    
</body>
</html>