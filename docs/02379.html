<html>
<head>
<title>Spotlight Search for Your Indexed Swift App Records</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Spotlight搜索您的索引Swift应用程序记录</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/spotlight-search-for-your-indexed-swift-app-records-601864abf51b?source=collection_archive---------9-----------------------#2021-05-13">https://medium.com/geekculture/spotlight-search-for-your-indexed-swift-app-records-601864abf51b?source=collection_archive---------9-----------------------#2021-05-13</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="7dd1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Spotlight Search允许用户从iPhone / iPad原生搜索栏中找到你的应用记录</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/580e2b4a81603daaf3460fa7d17480b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1056/format:webp/1*tfzbF2VrlIX5kmcyqvYz4g.png"/></div><figcaption class="jl jm et er es jn jo bd b be z dx">Spotlight Search Finding a Book in the 8Bookss App</figcaption></figure><h1 id="5655" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">方案</h1><p id="887f" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">我们的应用程序将允许用户在原生iPhone / iPad Spotlight搜索中添加或删除特定的记录字段。在我们的图书应用程序示例中，书名将是我们的Spotlight搜索词。用户可以选择在新书或编辑图书视图中将标题添加到Spotlight，也可以选择在编辑图书视图中将标题从Spotlight中删除。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ks"><img src="../Images/b5c1355f1c251e73a51ba3fd09dc50de.png" data-original-src="https://miro.medium.com/v2/resize:fit:840/1*LQImJ22YNmpBJBw9poWMKQ.gif"/></div></figure><h1 id="01f2" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">技术</h1><p id="200b" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">Swift使用特定的Spotlight功能和方法来索引(添加)或删除(删除)可搜索的项目(如书名)。可搜索项目值被称为“<strong class="ih hj">标识符</strong>”，您的域名被称为“<strong class="ih hj">域名标识符</strong>”，您的应用程序名称通常被称为“<strong class="ih hj">内容描述</strong>”。</p><p id="3399" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">索引</strong>功能:</p><p id="05b6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">CSSearchableItem(..)，CSSearchableIndex.default()。indexSearchableItems(..)</p><p id="3db2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">删除</strong>功能:</p><p id="03dd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">CSSearchableIndex.default()。deleteSearchableItems(..)</p><h1 id="dc6a" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">观众</h1><p id="fa66" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">本文面向寻求完整、成熟、以代码为中心的解决方案来加速开发项目的Swift开发人员。下面的代码片段可以通过最小的定制来使用。</p><h1 id="b159" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">应用模型</h1><p id="d51c" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">我们的文章基于苹果应用商店发布的<a class="ae kt" href="https://appsgym.com/projects/books/" rel="noopener ugc nofollow" target="_blank">apps gam Books</a>模型应用，你可以在AppsGym.com上免费下载完整的<a class="ae kt" href="https://appsgym.com/appsgym-books-swift-xcode-project-tour/" rel="noopener ugc nofollow" target="_blank"> Xcode项目</a>。</p><h1 id="9ff3" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">用户界面</h1><p id="ebfe" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">我们利用是/否对话框，使用按钮出口和动作来索引或删除Spotlight搜索项目。当用户点击相关按钮时，按钮颜色变为绿色(是)或红色(否)。我们还使用一个图像来表示Spotlight搜索的状态；复选标记表示已编入索引，红色圆圈表示未编入索引。当然，你可以选择在你的应用程序和不同的图像中使用开关。</p><p id="6e5a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">newbooktableviewcontroller . swift</strong>显示两个灰色按钮，分别代表“是”和“否”。如果用户点击“是”,则在保存图书记录时，图书标题会被索引(添加)到Spotlight中。否则，不执行任何操作。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ku"><img src="../Images/979d3dcbf4d22650a054205717733947.png" data-original-src="https://miro.medium.com/v2/resize:fit:848/format:webp/1*JYGrY4Fm1OAwObg5YecGwQ.png"/></div><figcaption class="jl jm et er es jn jo bd b be z dx">New Book Add to Spotlight Dialogue</figcaption></figure><p id="6667" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">editbooktableviewcontroller . swift</strong>显示Spotlight搜索的当前状态(复选标记表示书名已编入索引)以及“是”和“否”两个灰色按钮。如果用户点击“否”,则从Spotlight搜索中移除(删除)书名。如果用户点击“是”,并且图书标题尚未在Spotlight中，则在保存图书记录时，图书标题会被索引(添加)到Spotlight中。在你的应用程序中，你可以选择以不同的方式反映状态、按钮颜色和可能的操作。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kv"><img src="../Images/864bdbe181036db17ceaa8fb4b387108.png" data-original-src="https://miro.medium.com/v2/resize:fit:864/format:webp/1*juys9_NeP5kn_pybjs_pLA.png"/></div><figcaption class="jl jm et er es jn jo bd b be z dx">Edit Book Shows Book Title Already Indexed</figcaption></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kw"><img src="../Images/20c5ad37ad90ccee0745de1a0791a280.png" data-original-src="https://miro.medium.com/v2/resize:fit:854/format:webp/1*QSqATRc-Cu9N_jOExW7tww.png"/></div><figcaption class="jl jm et er es jn jo bd b be z dx">Edit Book Shows Book Title Not Indexed</figcaption></figure><h1 id="19df" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">逻辑</h1><p id="ab1b" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">首先我们需要导入2个Swift库:<strong class="ih hj"> CoreSpotlight </strong>和<strong class="ih hj"> MobileCoreServices </strong>(后者必须配合CoreSpotlight使用)。</p><p id="fbf1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有两个主要的动作:索引(添加)和删除(删除)，使用相同的参数，书名<strong class="ih hj"/>。因此，我们将使用两个独立的函数<strong class="ih hj">addToSpotlightSearch</strong>(_ title:String)和<strong class="ih hj">removeFromSpotlightSearch</strong>(_ title:String)，并根据Yes和No按钮的状态分别调用每个函数。</p><p id="0170" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将“是”和“否”按钮连接到同一个<strong class="ih hj">@ I action</strong>并打开/关闭相关标志(布尔变量)以指示哪个按钮被点击。保存记录时，根据标志值执行索引(添加/是)或删除(删除/否)功能。</p><h1 id="f9d1" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated"><strong class="ak">代码</strong></h1><h1 id="39a5" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated"><strong class="ak">代号:新书</strong></h1><p id="fd83" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">下面的Swift代码片段摘自<strong class="ih hj">newbooktableviewcontroller . Swift，</strong>其中显示了是/否按钮出口、按钮动作和要添加的Spotlight功能(删除功能仅在编辑手册中使用)。在我们的示例图书应用程序中，我们使用一个核心数据属性<strong class="ih hj"> isSpotlight </strong>来存储聚光灯状态。</p><p id="d5ee" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">newbooktableviewcontroller . swift<strong class="ih hj">变量&amp;按钮</strong></p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kx ky l"/></div></figure><p id="7e46" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">newbooktableviewcontroller . swift<strong class="ih hj">viewDidLoad()</strong></p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kx ky l"/></div></figure><p id="3f4e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">newbooktableviewcontroller . swift<strong class="ih hj">saverecortocoredata()</strong></p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kx ky l"/></div></figure><p id="731c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">newbooktableviewcontroller . swift<strong class="ih hj">addToSpotlightSearch(..)</strong></p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kx ky l"/></div></figure><h1 id="769d" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">代码:编辑图书</h1><p id="61ec" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">以下Swift代码片段摘自<strong class="ih hj">editbooktableviewcontroller . Swift，</strong>，其中显示了是/否按钮出口、按钮操作和作为状态指示器的Spotlight图像。编辑图书使用这两种功能来添加和移除Spotlight搜索词。在我们的示例图书应用程序中，我们使用一个核心数据属性<strong class="ih hj"> isSpotlight </strong>来存储聚光灯状态。</p><p id="670c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">editbooktableviewcontroller . swift<strong class="ih hj">变量&amp;按钮</strong></p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kx ky l"/></div></figure><p id="a25a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">editbooktableviewcontroller . swift<strong class="ih hj">vewDidLoad()</strong></p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kx ky l"/></div></figure><p id="a8d9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">editbooktableviewcontroller . swift<strong class="ih hj">saverecortocoredata()</strong></p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kx ky l"/></div></figure><p id="95ed" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">editbooktableviewcontroller . swift<strong class="ih hj">聚光灯功能</strong></p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kx ky l"/></div></figure><p id="deb9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">本文介绍了为新书向Spotlight添加新搜索词(书名)以及在编辑图书视图中向Spotlight添加或从中删除搜索词(书名)的完整设置、逻辑和代码。在您的应用程序中，您可以引用任何实体记录字段，并添加您自己的域名和应用程序名称。希望你觉得有用。感谢阅读！</p></div></div>    
</body>
</html>