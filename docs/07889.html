<html>
<head>
<title>Low Latency (OLAP) Movie Rating Analytics Using Apache Pinot</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Apache Pinot的低延迟(OLAP)电影分级分析</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/low-latency-olap-movie-rating-analytics-using-apache-pinot-cc3198e4e012?source=collection_archive---------9-----------------------#2021-10-05">https://medium.com/geekculture/low-latency-olap-movie-rating-analytics-using-apache-pinot-cc3198e4e012?source=collection_archive---------9-----------------------#2021-10-05</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="878f" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated"><strong class="ak">使用Apache Pinot从一个Kafka主题中获取跨国家的电影分级事件，并使它们可用于从Sourceset中进行即时查询。流式事件由Spring Boot应用程序(随机数据)产生。我们将通过超集来可视化数据。</strong></h2></div><p id="bd8d" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj"> <em class="jt">我在Thoughtworks极客之夜上展示了关于OLAP实时分析的内容。请在这里找到youtube链接</em></strong><a class="ae ju" href="https://www.youtube.com/watch?v=ZjWB0JEYYkg&amp;t=3569s" rel="noopener ugc nofollow" target="_blank"><strong class="iz hj"><em class="jt"/></strong></a><strong class="iz hj"><em class="jt">。</em>T15】</strong></p><h1 id="c63d" class="jv jw hi bd jx jy jz ka kb kc kd ke kf io kg ip kh ir ki is kj iu kk iv kl km bi translated">什么是OLAP？</h1><p id="402d" class="pw-post-body-paragraph ix iy hi iz b ja kn ij jc jd ko im jf jg kp ji jj jk kq jm jn jo kr jq jr js hb bi translated">OLAP(online analytical processing)是一种计算方法，它使用户能够轻松、有选择地提取和查询数据，以便从不同的角度进行分析。OLAP商业智能查询通常有助于趋势分析、财务报告、销售预测、预算和其它计划目的。</p><p id="9fef" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj"><em class="jt">OLAP用在哪里？</em>T19】</strong></p><ul class=""><li id="5023" class="ks kt hi iz b ja jb jd je jg ku jk kv jo kw js kx ky kz la bi translated">零售商店主的一个简单用例——定制t恤制造商。</li><li id="16c2" class="ks kt hi iz b ja lb jd lc jg ld jk le jo lf js kx ky kz la bi translated">许多不同种类的分析都属于OLAP的范畴。最主要的是面向用户的分析。</li><li id="0cae" class="ks kt hi iz b ja lb jd lc jg ld jk le jo lf js kx ky kz la bi translated">考虑一个电子商务平台的用例，其中不同的卖家试图销售他们的产品。这将导致多个店主试图销售相似的类别。让我们关注这样一个类别定制t恤制造商。</li></ul><figure class="lh li lj lk fd ll er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es lg"><img src="../Images/0a04cf3db723d4345423fc90a4855a2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LAI8HZrGpaGy2B8rkQWGAw.png"/></div></div></figure><p id="83c0" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们考虑这个用例，一个受欢迎的电子商务供应商允许店主出售他们的t恤。一个用户可以访问几秒钟前发生的实时分析。其他用户拥有非实时的离线信息(前一天分析)。具有实时分析的用户可以更新他的关键字和利基，以便他的产品可以根据分析列在前列。用户不能，在某一天对他的业务是一个损失。</p><h1 id="d53c" class="jv jw hi bd jx jy jz ka kb kc kd ke kf io kg ip kh ir ki is kj iu kk iv kl km bi translated">OLAP的真实例子</h1><p id="2b4c" class="pw-post-body-paragraph ix iy hi iz b ja kn ij jc jd ko im jf jg kp ji jj jk kq jm jn jo kr jq jr js hb bi translated">最好的例子就是LinkedIn上的“<strong class="iz hj"> <em class="jt">谁查看了你的个人资料”</em> </strong>版块(按周统计)。在这种情况下，终端用户可以直接体验分析功能。</p><figure class="lh li lj lk fd ll er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es ls"><img src="../Images/82cea65a7a0f857e944fe9b24c236784.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gLun-NYzIb6R6EZgzuE_WA.png"/></div></div></figure><p id="84b6" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">另一个是LinkedIn Feed。这是与饲料排名的帮助，这确保用户不会看到相同的饲料一次又一次。它确实在幕后执行一些逻辑来提供这种独特的用户体验。</p><p id="e9e1" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">OLAP的另一个例子</strong></p><ul class=""><li id="1089" class="ks kt hi iz b ja jb jd je jg ku jk kv jo kw js kx ky kz la bi translated">以上两个例子是基于用户的分析。想象一下庞大的用户群(700百万)，每秒10000多个查询，这是99%的负载和查询性能。作为SLA，它必须是几个ms(毫秒),否则，对于最终用户来说，这是一个可怕的体验。这两个都是具有高吞吐量和低延迟的分析查询的例子。</li><li id="1ef7" class="ks kt hi iz b ja lb jd lc jg ld jk le jo lf js kx ky kz la bi translated">另一个用例是业务指标、异常检测。例如，电子商务平台需要确定需求与供应之间是否存在任何下降。对于LinkedIn用例，检测可能已经下降的页面访问量。这些指标将有助于采取正确的营销策略。不仅如此，深入到不同的数据点并进行分析是页面浏览量或需求与供应下降的确切原因。</li><li id="6e81" class="ks kt hi iz b ja lb jd lc jg ld jk le jo lf js kx ky kz la bi translated">除了聚合历史数据之外，所有这些案例都对精细分析最近的数据感兴趣。</li><li id="b408" class="ks kt hi iz b ja lb jd lc jg ld jk le jo lf js kx ky kz la bi translated">所有这些都可以通过不同的技术来完成。让我们看看Apache Pinot，它适合所有OLAP用例。</li></ul></div><div class="ab cl lt lu gp lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="hb hc hd he hf"><h1 id="ad97" class="jv jw hi bd jx jy ma ka kb kc mb ke kf io mc ip kh ir md is kj iu me iv kl km bi translated">什么是阿帕奇皮诺？</h1><figure class="lh li lj lk fd ll er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es mf"><img src="../Images/6918b93fb0b021faf543805debf5c459.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t8mc6BPGyJQzJb-GQtt1Hw.png"/></div></div></figure><p id="baf8" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">Apache Pinot是一个分布式OLAP数据存储，旨在提供低延迟的实时分析。它可以从批处理数据源(如Hadoop HDFS、亚马逊S3、Azure ADLS或谷歌云存储)以及流数据源(如Apache Kafka)中获取数据。</p><p id="eb9e" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果需要面向用户的低延迟分析，那么基于Hadoop的SQL解决方案无法提供所需的低延迟。像Apache Pinot(或Apache Druid和Click house等)这样的现代OLAP引擎可以实现更低的延迟，特别适合需要对不可变数据进行快速分析(如聚合)的环境，可能需要实时数据摄取。Apache Pinot最初由LinkedIn创建，于2018年底进入Apache孵化，此后添加了插件架构和SQL支持以及其他关键功能。</p><p id="bd84" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">就规模而言，已知最大的皮诺生产集群每秒可处理超过100万个事件。170，000+查询/秒，延迟几毫秒。</p><p id="9934" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">阿帕契比诺特色</strong></p><p id="ebe3" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">Apache Pinot于2014年在LinkedIn上开发，目前每秒钟提供超过20万次查询，以支持用户喜欢的许多功能，如“谁查看了我的个人资料？”。</p><p id="e8dd" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">Star Tree由Apache Pinot的原始开发者创建，为Apache Pinot提供了一个完全托管的平台。通过消除基础设施管理的负担，公司可以专注于向最终用户提供实时洞察。</p><p id="7887" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj"> <em class="jt">列数据库:</em></strong>Apache Pinot的核心是一个面向列的数据库，可以使用SQL的子集进行查询。它的可插拔索引允许快速开发新的索引类型，从而不断提高性能。传统上，OLAP数据库的查询执行速度慢，存储效率低，但是Apache Pinot在不到一秒的时间内执行大多数查询，同时与其他数据库相比，提供了改进的存储需求。</p><p id="5b74" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj"> <em class="jt">面向用户的实时分析:</em> </strong> Apache Pinot是为面向用户的应用而打造的。这些应用要求低延迟响应时间，以便为用户提供最佳体验。传统上，分析见解是为内部用户保留的，因为最终用户不太宽容。这就是低延迟对任务至关重要的原因。</p><p id="17e8" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj"> <em class="jt">实时数据摄取:</em> </strong> Apache Pinot每秒能够摄取数百万个事件，同时允许立即查询它们。摄取和查询可用性的独特组合开启了新的用户体验，这是以前在没有缓存的情况下无法大规模实现的。</p><p id="18e1" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj"> <em class="jt">高可伸缩容错:</em> </strong> Apache Pinot是一个分布式系统，可以跨越数千个节点。这些节点作为一个系统统一响应查询请求，数据在节点之间复制以实现容错。</p><figure class="lh li lj lk fd ll er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es mg"><img src="../Images/4ebda5191ef4f46dabb2a1b2b3480822.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PTIsTK5mQsBzpiNf8wmsew.png"/></div></div></figure></div><div class="ab cl lt lu gp lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="hb hc hd he hf"><h1 id="3200" class="jv jw hi bd jx jy ma ka kb kc mb ke kf io mc ip kh ir md is kj iu me iv kl km bi translated">阿帕奇皮诺建筑</h1><figure class="lh li lj lk fd ll er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es mf"><img src="../Images/be04708b0841debb23ccc1b7de10e582.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aIaaEan0nN-P6bbLCGlDUg.png"/></div></div></figure><p id="7493" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">Pinot收集实时和离线数据，并分布在服务器上。Pinot使用控制器，它决定什么数据去哪里，数据如何复制和分区。</p><p id="adf3" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">它使用<strong class="iz hj"> <em class="jt"> zookeeper </em> </strong>来维护状态信息。支持数据查询的是<strong class="iz hj"> <em class="jt">代理</em> </strong>，当请求查询时，代理将从zookeeper中查找状态，并进行分布式的分散-收集来处理查询。<strong class="iz hj"> <em class="jt">代理</em> </strong>包含路由表，其中有段到服务器之间映射的细节。代理从控制器获取这些数据，控制器将段之间的主映射存储到服务器。</p><p id="1a99" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">Pinot <strong class="iz hj"> <em class="jt">服务器</em> </strong>负责繁重的查询处理。基于批处理/实时摄取，这些表可以在物理上分为具有不同资源分配的离线和实时服务器，并且可以通过添加更多服务器来进行水平扩展。多个<strong class="iz hj"> <em class="jt">控制器</em> </strong>被启动，其中一个被<strong class="iz hj"><em class="jt"/></strong>选为领导者。如果领导者倒下，另一个控制者被选为领导者。</p><p id="32cd" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">即使所有<strong class="iz hj"> <em class="jt">控制器</em> </strong>关闭，查询处理也可以继续。但是新表和段的创建需要至少一个控制器处于活动状态。控制器还公开了一些管理端点，我们可以在这里对代理、服务器和分段执行一些操作。</p><h1 id="4d20" class="jv jw hi bd jx jy jz ka kb kc kd ke kf io kg ip kh ir ki is kj iu kk iv kl km bi translated">表格和段</h1><figure class="lh li lj lk fd ll er es paragraph-image"><div class="er es mh"><img src="../Images/7f5f40891bca3e8a8025838a5e8fe9b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1312/format:webp/1*7SCgLQ6SbxuH14lHTi2ZTw.png"/></div></figure><ul class=""><li id="3aa1" class="ks kt hi iz b ja jb jd je jg ku jk kv jo kw js kx ky kz la bi translated">该表是相关数据(行和列)的集合。为了保证大量数据的可扩展性，一个表被分成多个段(<strong class="iz hj"><em class="jt"/></strong><strong class="iz hj"><em class="jt"/></strong>)。每个数据段存储在不同的服务器上。</li><li id="d884" class="ks kt hi iz b ja lb jd lc jg ld jk le jo lf js kx ky kz la bi translated">为了确保高可用性，段还支持副本。如果一个网段出现故障，数据仍可用于服务。可以对表进行索引和预聚合，以减少查询延迟。</li></ul><p id="3df5" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj"> <em class="jt">表的模式</em> </strong></p><p id="1049" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">Pinot中的每个表都有一个模式，其中定义了字段和数据类型、元信息和索引。</p><p id="b174" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">模式可以有3类字段</p><ul class=""><li id="84dc" class="ks kt hi iz b ja jb jd je jg ku jk kv jo kw js kx ky kz la bi translated"><strong class="iz hj"> <em class="jt">维度:</em> </strong>用于切片和切块操作，(按字段分组)。</li><li id="0003" class="ks kt hi iz b ja lb jd lc jg ld jk le jo lf js kx ky kz la bi translated"><strong class="iz hj"> <em class="jt">指标:</em> </strong>用于聚合运算，一般为数值型。</li><li id="7f1e" class="ks kt hi iz b ja lb jd lc jg ld jk le jo lf js kx ky kz la bi translated"><strong class="iz hj"> <em class="jt">日期时间:</em> </strong>可以有多个日期时间字段，我们也可以定义格式(EPOCH_MS，SIMPLEDATEFORMAT)。其中一个日期时间字段被视为主要字段，有助于创建真实数据和批处理数据之间的边界。</li></ul><h1 id="789c" class="jv jw hi bd jx jy jz ka kb kc kd ke kf io kg ip kh ir ki is kj iu kk iv kl km bi translated">皮诺中的索引</h1><p id="1f48" class="pw-post-body-paragraph ix iy hi iz b ja kn ij jc jd ko im jf jg kp ji jj jk kq jm jn jo kr jq jr js hb bi translated">通常，索引用于以更快的方式检索数据。数据库提供者有他们自己实现索引的方式。</p><ul class=""><li id="8a9f" class="ks kt hi iz b ja jb jd je jg ku jk kv jo kw js kx ky kz la bi translated">正向索引</li><li id="5998" class="ks kt hi iz b ja lb jd lc jg ld jk le jo lf js kx ky kz la bi translated">倒排索引</li><li id="5407" class="ks kt hi iz b ja lb jd lc jg ld jk le jo lf js kx ky kz la bi translated">距离指标</li><li id="d53a" class="ks kt hi iz b ja lb jd lc jg ld jk le jo lf js kx ky kz la bi translated">布卢姆指数</li><li id="4215" class="ks kt hi iz b ja lb jd lc jg ld jk le jo lf js kx ky kz la bi translated">星形树索引</li><li id="7d92" class="ks kt hi iz b ja lb jd lc jg ld jk le jo lf js kx ky kz la bi translated">文本索引</li><li id="9dad" class="ks kt hi iz b ja lb jd lc jg ld jk le jo lf js kx ky kz la bi translated">地理空间索引</li></ul><blockquote class="mi mj mk"><p id="7c18" class="ix iy jt iz b ja jb ij jc jd je im jf ml jh ji jj mm jl jm jn mn jp jq jr js hb bi translated">借助星形树指数的阿帕奇皮诺预聚集指数。这有助于预先汇总和计算价值。因此，查询指标非常快。</p></blockquote></div><div class="ab cl lt lu gp lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="hb hc hd he hf"><h1 id="56c1" class="jv jw hi bd jx jy ma ka kb kc mb ke kf io mc ip kh ir md is kj iu me iv kl km bi translated">为什么阿帕奇皮诺适合OLAP？</h1><p id="be22" class="pw-post-body-paragraph ix iy hi iz b ja kn ij jc jd ko im jf jg kp ji jj jk kq jm jn jo kr jq jr js hb bi translated">基于我的研究和阅读，以下是我的发现。可以使用不同的技术来设计分析系统。</p><ul class=""><li id="6871" class="ks kt hi iz b ja jb jd je jg ku jk kv jo kw js kx ky kz la bi translated"><strong class="iz hj"> <em class="jt"> Spark SQL，Presto，Big Query </em> </strong> —这些提供了巨大的灵活性和丰富的查询，但只能承诺几秒钟的SLA，不能用于面向用户的分析。</li><li id="a005" class="ks kt hi iz b ja lb jd lc jg ld jk le jo lf js kx ky kz la bi translated"><strong class="iz hj"> <em class="jt">弹性搜索— </em> </strong>通常适用于自由文本搜索，这种搜索严重依赖于倒排索引，具有获取匹配文档的查询计划，并且未针对扫描全部、聚合或分组进行优化。</li><li id="995f" class="ks kt hi iz b ja lb jd lc jg ld jk le jo lf js kx ky kz la bi translated"><strong class="iz hj"> <em class="jt">键值存储(Cassandra)——</em></strong>我们必须预先计算每一个可能的组合，每次添加新的维度时这样做都会导致失去灵活性和大量的存储空间。</li></ul><blockquote class="mi mj mk"><p id="04ea" class="ix iy jt iz b ja jb ij jc jd je im jf ml jh ji jj mm jl jm jn mn jp jq jr js hb bi translated">我个人在旅游平台的个性化引擎中工作，我们使用Redis graphs，后来转移到Neo4j，但在每用户分析方面面临许多问题。</p><p id="60d7" class="ix iy jt iz b ja jb ij jc jd je im jf ml jh ji jj mm jl jm jn mn jp jq jr js hb bi translated">弹性搜索和Pinot的组合可用于全文搜索和分析。但要明智地做出正确的决定。</p></blockquote></div><div class="ab cl lt lu gp lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="hb hc hd he hf"><h1 id="c0bf" class="jv jw hi bd jx jy ma ka kb kc mb ke kf io mc ip kh ir md is kj iu me iv kl km bi translated">Apache Pinot在电影分级分析中的应用(流摄取)</h1><figure class="lh li lj lk fd ll er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es mo"><img src="../Images/8ce84f15f9e66facebd512462e9f2687.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B-vhYEDS8lq5V-sYU2BMcg.png"/></div></div></figure><p id="e1dd" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">电影分级生成器将流摄取事件的电影分级跨越不同的国家和他们相应的城市。用户基数50多万，电影7万多。<em class="jt">每秒大约有5k个事件通过Kafka被推送到Apache Pinot </em>。</p><p id="bd10" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">使用<strong class="iz hj"> <em class="jt"> Apache超集</em> </strong>创建几个仪表板来可视化数据。</p><p id="3e51" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">不同的报告是</p><ul class=""><li id="64a8" class="ks kt hi iz b ja jb jd je jg ku jk kv jo kw js kx ky kz la bi translated">戏剧和浪漫类别的平均国家评级。</li><li id="47f9" class="ks kt hi iz b ja lb jd lc jg ld jk le jo lf js kx ky kz la bi translated">饼状图法国十大分级电影按城市分类:戏剧、犯罪、惊悚。</li><li id="8b15" class="ks kt hi iz b ja lb jd lc jg ld jk le jo lf js kx ky kz la bi translated">时间系列—所有国家每周收视率最高的25部电影。</li><li id="1f75" class="ks kt hi iz b ja lb jd lc jg ld jk le jo lf js kx ky kz la bi translated">某个国家/地区(印度)按月份日期的平均评分。</li><li id="f5fa" class="ks kt hi iz b ja lb jd lc jg ld jk le jo lf js kx ky kz la bi translated">一个月来印度电影收视率趋势。</li><li id="4e5b" class="ks kt hi iz b ja lb jd lc jg ld jk le jo lf js kx ky kz la bi translated">按城市分组的法国平均评分的时间序列散点图。</li></ul><p id="d50e" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">环境</strong></p><ul class=""><li id="9e2d" class="ks kt hi iz b ja jb jd je jg ku jk kv jo kw js kx ky kz la bi translated">码头工人作曲。</li><li id="cd03" class="ks kt hi iz b ja lb jd lc jg ld jk le jo lf js kx ky kz la bi translated">Spring Boot和格拉德。</li><li id="455d" class="ks kt hi iz b ja lb jd lc jg ld jk le jo lf js kx ky kz la bi translated">阿帕奇超集。</li><li id="bbe5" class="ks kt hi iz b ja lb jd lc jg ld jk le jo lf js kx ky kz la bi translated">Java 11。</li><li id="43b1" class="ks kt hi iz b ja lb jd lc jg ld jk le jo lf js kx ky kz la bi translated">阿帕奇卡夫卡。</li></ul><p id="a16a" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">请找到代码库的<a class="ae ju" href="https://github.com/ereshzealous/apache-pinot-examples/tree/master/movie-recommendation" rel="noopener ugc nofollow" target="_blank"> github </a>链接。</p><p id="5774" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">阿帕奇皮诺模式</strong></p><figure class="lh li lj lk fd ll"><div class="bz dy l di"><div class="mp mq l"/></div></figure><p id="cc50" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">阿帕奇皮诺表</strong></p><p id="b5d0" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">创建具有星形树索引的实时表，用于预先计算这些值。</p><figure class="lh li lj lk fd ll"><div class="bz dy l di"><div class="mp mq l"/></div></figure><h1 id="8778" class="jv jw hi bd jx jy jz ka kb kc kd ke kf io kg ip kh ir ki is kj iu kk iv kl km bi translated">Apache超集数据可视化</h1><p id="05c7" class="pw-post-body-paragraph ix iy hi iz b ja kn ij jc jd ko im jf jg kp ji jj jk kq jm jn jo kr jq jr js hb bi translated">我已经在我的本地mac上安装了Superset，并将其连接到Apache Pinot数据库以可视化数据。从<a class="ae ju" href="https://superset.apache.org/docs/installation/installing-superset-from-scratch" rel="noopener ugc nofollow" target="_blank">这里</a>安装超集。</p><figure class="lh li lj lk fd ll er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es mr"><img src="../Images/23aac1bd0429f80bb66a475f1f164e2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MBX1FjpugvaYQkdapWrZgw.png"/></div></div></figure></div><div class="ab cl lt lu gp lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="hb hc hd he hf"><h1 id="d662" class="jv jw hi bd jx jy ma ka kb kc mb ke kf io mc ip kh ir md is kj iu me iv kl km bi translated">关于阿帕奇皮诺的几点</h1><p id="1eca" class="pw-post-body-paragraph ix iy hi iz b ja kn ij jc jd ko im jf jg kp ji jj jk kq jm jn jo kr jq jr js hb bi translated"><strong class="iz hj">目前没有类似JDBC的驱动程序:</strong> Apache Pinot公开了查询API。我们可以从API中查询数据。</p><pre class="lh li lj lk fd ms mt mu mv aw mw bi"><span id="112c" class="mx jw hi mt b fi my mz l na nb">curl -H "Content-Type: application/json" -X POST -s -w '\nEstablish Connection: %{time_connect}s\nTTFB: %{time_starttransfer}s\nTotal: %{time_total}s\n' -d '{"sql":"select avg(rating), country, city, movie from MovieRating group by movie, country, city limit 10"}' <a class="ae ju" href="http://localhost:8000/query/sql" rel="noopener ugc nofollow" target="_blank">http://localhost:8000/query/sql</a></span><span id="2fae" class="mx jw hi mt b fi nc mz l na nb">{"resultTable":{"dataSchema":{"columnDataTypes":["DOUBLE","STRING","STRING","STRING"],"columnNames":["avg(rating)","country","city","movie"]},"rows":[[4.749166153978075,"France","Lyon","Astronaut Farmer, The (2007)"],[5.4709471488611925,"Canada","Vancouver","Carnival of Souls (1962)"],[5.037873191946813,"France","Marseille","School for Scoundrels (2006)"],[4.477064753491312,"China","Harbin","Palindromes (2004)"],[5.690398473658868,"Germany","Essen","Freddy Got Fingered (2001)"],[6.040778780460276,"Germany","Hamburg","Judgment Night (1993)"],[6.805443873414745,"Germany","Berlin","Goonies, The (1985)"],[5.9604582965851645,"Canada","Scarborough","Summer Catch (2001)"],[6.1164004691146125,"Germany","Berlin","Butterfield 8 (1960)"],[6.20282039744616,"France","Bordeaux","Harry Potter and the Goblet of Fire (2005)"]]},"exceptions":[],"numServersQueried":1,"numServersResponded":1,"numSegmentsQueried":21,"numSegmentsProcessed":21,"numSegmentsMatched":21,"numConsumingSegmentsQueried":1,"numDocsScanned":4140677,"numEntriesScannedInFilter":0,"numEntriesScannedPostFilter":16562708,"numGroupsLimitReached":false,"totalDocs":5054756,"timeUsedMs":554,"segmentStatistics":[],"traceInfo":{},"minConsumingFreshnessTimeMs":1633406928068}<br/>Establish Connection: 0.000937s<br/>TTFB: 0.000000s<br/>Total: 0.559546s</span></pre><p id="ad26" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">如果数据流中断如果zookeeper中断:</strong>否，数据流正常。但是如果我们想建立新的部分，如果动物园管理员停机了，这是不可能的。这也给查询端带来了问题。</p><p id="efe5" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">实时和离线的分离:性能特征不同于实时和离线。对于实时，如果使用kafka获取数据，则使用java堆。最好有不同的实时和离线配置文件。</p><p id="a118" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">什么是查询语言和限制:</strong> Apache Pinot使用方解石查询语义。Presto集成在会谈中，可以做各种各样的加入和自定义项。</p><p id="bc37" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">备份和恢复策略:</strong> Pinot获取数据并将其存储在本地，它还将所有数据段保存到数据段存储中。这是皮诺以外的东西。什么都有可能。ANFS、S3、HDFS..您必须将其配置为pinot集群设置的一部分，Pinot会自动将构建的分段存档到分段存储中。万一服务器停机或硬盘崩溃，新的服务器必须进行配置并从段存储中下载数据。当我们需要从一台服务器到另一台服务器进行集群扩展时，这种备份策略非常有效，您可以直接从segment store进行备份。</p></div><div class="ab cl lt lu gp lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="hb hc hd he hf"><h1 id="b250" class="jv jw hi bd jx jy ma ka kb kc mb ke kf io mc ip kh ir md is kj iu me iv kl km bi translated">参考</h1><div class="nd ne ez fb nf ng"><a href="http://pinot.apache.org/" rel="noopener  ugc nofollow" target="_blank"><div class="nh ab dw"><div class="ni ab nj cl cj nk"><h2 class="bd hj fi z dy nl ea eb nm ed ef hh bi translated">Apache Pinot:实时分布式OLAP数据存储| Apache Pinot</h2><div class="nn l"><h3 class="bd b fi z dy nl ea eb nm ed ef dx translated">谁用阿帕奇皮诺？</h3></div><div class="no l"><p class="bd b fp z dy nl ea eb nm ed ef dx translated">pinot.apache.org</p></div></div></div></a></div><div class="nd ne ez fb nf ng"><a href="https://docs.pinot.apache.org/" rel="noopener  ugc nofollow" target="_blank"><div class="nh ab dw"><div class="ni ab nj cl cj nk"><h2 class="bd hj fi z dy nl ea eb nm ed ef hh bi translated">介绍</h2><div class="nn l"><h3 class="bd b fi z dy nl ea eb nm ed ef dx translated">Pinot是一个实时分布式OLAP数据存储，旨在提供超低延迟分析，即使在…</h3></div><div class="no l"><p class="bd b fp z dy nl ea eb nm ed ef dx translated">docs.pinot.apache.org</p></div></div><div class="np l"><div class="nq l nr ns nt np nu lq ng"/></div></div></a></div><div class="nd ne ez fb nf ng"><a href="https://superset.apache.org/" rel="noopener  ugc nofollow" target="_blank"><div class="nh ab dw"><div class="ni ab nj cl cj nk"><h2 class="bd hj fi z dy nl ea eb nm ed ef hh bi translated">欢迎</h2><div class="nn l"><h3 class="bd b fi z dy nl ea eb nm ed ef dx translated">超集是快速，轻量级，直观，并载有选项，使所有技能集的用户很容易…</h3></div><div class="no l"><p class="bd b fp z dy nl ea eb nm ed ef dx translated">superset.apache.org</p></div></div><div class="np l"><div class="nv l nr ns nt np nu lq ng"/></div></div></a></div><div class="nd ne ez fb nf ng"><a href="https://www.startree.ai/what-is-apache-pinot/" rel="noopener  ugc nofollow" target="_blank"><div class="nh ab dw"><div class="ni ab nj cl cj nk"><h2 class="bd hj fi z dy nl ea eb nm ed ef hh bi translated">什么是阿帕奇皮诺？</h2><div class="nn l"><h3 class="bd b fi z dy nl ea eb nm ed ef dx translated">Apache Pinot是一个实时分布式OLAP数据库，设计用于低延迟查询执行，即使在极高的…</h3></div><div class="no l"><p class="bd b fp z dy nl ea eb nm ed ef dx translated">www.startree.ai</p></div></div><div class="np l"><div class="nw l nr ns nt np nu lq ng"/></div></div></a></div><div class="nd ne ez fb nf ng"><a href="https://superset.apache.org/docs/installation/installing-superset-from-scratch" rel="noopener  ugc nofollow" target="_blank"><div class="nh ab dw"><div class="ni ab nj cl cj nk"><h2 class="bd hj fi z dy nl ea eb nm ed ef hh bi translated">证明文件</h2><div class="nn l"><h3 class="bd b fi z dy nl ea eb nm ed ef dx translated">超集将数据库连接信息存储在其元数据数据库中。为此，我们使用加密技术…</h3></div><div class="no l"><p class="bd b fp z dy nl ea eb nm ed ef dx translated">superset.apache.org</p></div></div></div></a></div><div class="nd ne ez fb nf ng"><a href="https://en.wikipedia.org/wiki/Comparison_of_OLAP_servers" rel="noopener  ugc nofollow" target="_blank"><div class="nh ab dw"><div class="ni ab nj cl cj nk"><h2 class="bd hj fi z dy nl ea eb nm ed ef hh bi translated">OLAP服务器比较-维基百科</h2><div class="nn l"><h3 class="bd b fi z dy nl ea eb nm ed ef dx translated">下表比较了一些在线分析处理(OLAP)的一般信息和技术信息…</h3></div><div class="no l"><p class="bd b fp z dy nl ea eb nm ed ef dx translated">en.wikipedia.org</p></div></div></div></a></div><figure class="lh li lj lk fd ll"><div class="bz dy l di"><div class="nx mq l"/></div></figure><figure class="lh li lj lk fd ll"><div class="bz dy l di"><div class="nx mq l"/></div></figure></div></div>    
</body>
</html>