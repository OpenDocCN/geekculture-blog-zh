<html>
<head>
<title>Making an RL-AI to break the Mario speed-run world record.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">制作一个RL-AI来打破马里奥速度跑世界纪录。</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/making-an-rl-ai-to-break-the-mario-speed-run-world-record-bd406646d80?source=collection_archive---------6-----------------------#2022-05-28">https://medium.com/geekculture/making-an-rl-ai-to-break-the-mario-speed-run-world-record-bd406646d80?source=collection_archive---------6-----------------------#2022-05-28</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/e5f3446710c50170a32cf4e068d75513.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bWNPnvNsZJt1yI4lkOGNGw.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx"><a class="ae iu" href="https://www.jotform.com/blog/the-evolution-of-mario/" rel="noopener ugc nofollow" target="_blank">Image credits</a></figcaption></figure><p id="3d57" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">所以，我对游戏最古老的记忆之一是我在父母给我买的游戏机上玩马里奥。当我还是个孩子的时候，我就被它迷住了。尝试通过关卡，获得完美的跳跃对我来说就像是成就，尝试和尝试研磨最终的老板这些都是马里奥给我的美好回忆。所以前几天看到有人破了纪录，用41.022秒完成了<a class="ae iu" href="https://twitter.com/gwr/status/1501935541339639815?s=21&amp;t=sa41LMoz1ozzEu_6lxeB9Q" rel="noopener ugc nofollow" target="_blank">马里奥。然后我对自己说“我想知道我是否能让一个人工智能更快地完成它”，然后我意识到我在强化学习方面是个新手🙂。</a></p><p id="2b0c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">所以，我做了一些研究，发现OpenAI有一种叫做<a class="ae iu" href="https://openai.com/blog/gym-retro/" rel="noopener ugc nofollow" target="_blank">健身房复古</a>的东西。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jt"><img src="../Images/b501e20e402502cf84bcbfb70e829981.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aChI1xxOGi_njjVzCH3zWg.png"/></div></div></figure><figure class="ju jv jw jx fd ij er es paragraph-image"><div class="er es jy"><img src="../Images/da932ae4dbf928747afe9bfabad9c23a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*slO_RY2O_X5jZj1OA9p6zg.gif"/></div><figcaption class="iq ir et er es is it bd b be z dx"><a class="ae iu" href="https://openai.com/blog/gym-retro/" rel="noopener ugc nofollow" target="_blank">https://openai.com/blog/gym-retro/</a></figcaption></figure><p id="3537" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">所以，它们基本上为开发者提供了训练强化学习人工智能的环境。它基本上类似于python中的游戏模拟器。</p><p id="a8fa" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">所以，现在我们有了环境。我开始学习如何制作RL模型，并发现了一个非常棒的YouTube频道，名为:<a class="ae iu" href="https://www.youtube.com/c/NicholasRenotte" rel="noopener ugc nofollow" target="_blank">尼古拉斯·雷诺特</a>。他有一些关于强化学习的很棒的视频，从他那里学了一些代码，做了很多研究后，我准备写这个。</p><p id="4110" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">所以，首先让我们设置马里奥:</strong></p><p id="fb1a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们下载安装:</p><figure class="ju jv jw jx fd ij"><div class="bz dy l di"><div class="jz ka l"/></div></figure><p id="5dca" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们看看进口货:</p><figure class="ju jv jw jx fd ij"><div class="bz dy l di"><div class="jz ka l"/></div></figure><p id="5ced" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在让我们安装一些依赖项:</p><figure class="ju jv jw jx fd ij"><div class="bz dy l di"><div class="jz ka l"/></div></figure><p id="cbf5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我在Google Colab上，所以我需要制作一个虚拟屏幕来显示游戏，我们开始吧:</p><figure class="ju jv jw jx fd ij"><div class="bz dy l di"><div class="jz ka l"/></div></figure><p id="f83a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在让我们实际设置游戏:</p><figure class="ju jv jw jx fd ij"><div class="bz dy l di"><div class="jz ka l"/></div></figure><p id="55b5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在让我们开始游戏，并尝试随机功能:</p><figure class="ju jv jw jx fd ij"><div class="bz dy l di"><div class="jz ka l"/></div></figure><figure class="ju jv jw jx fd ij er es paragraph-image"><div class="er es kb"><img src="../Images/35643f99ca94be9dc699663231101c51.png" data-original-src="https://miro.medium.com/v2/resize:fit:560/1*FgmTUXSglr4TzndTKPRbVQ.gif"/></div><figcaption class="iq ir et er es is it bd b be z dx">For now its doing random actions</figcaption></figure><p id="a3cb" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在马里奥的设置完成了。</p><p id="697d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">现在让我们对环境进行预处理，以在其上学习RL:</strong></p><p id="f498" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们先安装Pytorch:</p><figure class="ju jv jw jx fd ij"><div class="bz dy l di"><div class="jz ka l"/></div></figure><p id="18fe" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们安装基线RL的东西:</p><figure class="ju jv jw jx fd ij"><div class="bz dy l di"><div class="jz ka l"/></div></figure><p id="dd07" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们导入我们将需要的各种包装器:</p><figure class="ju jv jw jx fd ij"><div class="bz dy l di"><div class="jz ka l"/></div></figure><p id="441d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们将包装器添加到环境中:</p><figure class="ju jv jw jx fd ij"><div class="bz dy l di"><div class="jz ka l"/></div></figure><p id="d9be" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们看看各州的情况:</p><figure class="ju jv jw jx fd ij"><div class="bz dy l di"><div class="jz ka l"/></div></figure><p id="50eb" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们看看预处理:</p><figure class="ju jv jw jx fd ij"><div class="bz dy l di"><div class="jz ka l"/></div></figure><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kc"><img src="../Images/0890ef1814ef3d8b1db8a32f747d54e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SxwY0KrbzAFS_lwwEaMvjw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">The Output</figcaption></figure><p id="a782" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">现在让我们开始训练我们的RL模型:</strong></p><p id="177a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">导入和安装模型:</p><figure class="ju jv jw jx fd ij"><div class="bz dy l di"><div class="jz ka l"/></div></figure><p id="ecbf" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们创建一个回调函数来保存训练好的模型:</p><figure class="ju jv jw jx fd ij"><div class="bz dy l di"><div class="jz ka l"/></div></figure><figure class="ju jv jw jx fd ij"><div class="bz dy l di"><div class="jz ka l"/></div></figure><p id="42b3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们每10000步保存一次模型:</p><figure class="ju jv jw jx fd ij"><div class="bz dy l di"><div class="jz ka l"/></div></figure><p id="2ac8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在需要启动模型:</p><figure class="ju jv jw jx fd ij"><div class="bz dy l di"><div class="jz ka l"/></div></figure><p id="8811" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">学习速度是非常重要的，太快或太慢的学习速度会导致人工智能什么也学不到。</p><p id="1355" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在让我们开始训练我们的人工智能:</p><figure class="ju jv jw jx fd ij"><div class="bz dy l di"><div class="jz ka l"/></div></figure><p id="cba5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">所以我将步数设置为500，000，这不足以完全训练AI，但如果你有时间和GPU，我建议将其设置为至少1M-&gt;5M。</p><p id="7d38" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这个过程大约需要2个小时:</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kd"><img src="../Images/7c0903c6caaf41cb450183bc77cf6770.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x5SIv1uEKukKJ0dwuCAXHA.png"/></div></div></figure><p id="810c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这是我得到的最终模型。我觉得只走50万步就很不错了。</p><p id="ec38" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">现在让我们使用这个模型并运行我们的游戏:</strong></p><figure class="ju jv jw jx fd ij"><div class="bz dy l di"><div class="jz ka l"/></div></figure><p id="a3c0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">最后让我们看看输出:</strong></p><figure class="ju jv jw jx fd ij er es paragraph-image"><div class="er es ke"><img src="../Images/c3baabd66fb6e77d46258283e666816c.png" data-original-src="https://miro.medium.com/v2/resize:fit:512/1*SiX4OTJcjSrS3LLB2XTz5Q.gif"/></div><figcaption class="iq ir et er es is it bd b be z dx">model_500,000 (the video was slowed down by me willingly its at 0.5x speed)</figcaption></figure><p id="b121" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">老实说，对于一个只有500，000步的模型来说，它的表现令人惊叹，如果它得到更多的训练，我相信它可以打破记录。</p><p id="ff25" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在让我们来看看不同阶段的人工智能:</p><p id="f439" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在第100，000阶段:</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div class="er es ke"><img src="../Images/3f299b032a730c762ec58fd6ccf61ada.png" data-original-src="https://miro.medium.com/v2/resize:fit:512/1*t9NsvrYAI6C5vvXFEkUNcw.gif"/></div><figcaption class="iq ir et er es is it bd b be z dx">model_100,000</figcaption></figure><p id="68e3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在阶段250，000:</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div class="er es ke"><img src="../Images/b8c721b6ecb91ac4e089d1ac465f2b18.png" data-original-src="https://miro.medium.com/v2/resize:fit:512/1*w-WT_Wf1Q0gkPPM7ehjh2g.gif"/></div></figure><p id="f3ff" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在500，000阶段:</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div class="er es ke"><img src="../Images/c3baabd66fb6e77d46258283e666816c.png" data-original-src="https://miro.medium.com/v2/resize:fit:512/1*SiX4OTJcjSrS3LLB2XTz5Q.gif"/></div></figure><p id="e9b3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在你可以看到人工智能在不同阶段是如何改进自己的。</p><p id="0a23" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">Ahhhh AI太牛逼了，太好玩了。我想做更多RL的东西，所以请在下面评论我下一步应该做什么。</p><p id="d3c9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae iu" rel="noopener" href="/@eeman.majumder">如果你喜欢这篇文章，请在medium上关注我。老实说，这很有帮助。</a></p><p id="d5e5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">关于Colab笔记本，请点击此处:</p><div class="kf kg ez fb kh ki"><a href="https://colab.research.google.com/drive/1d0Hn3Rj9xMQycTGNrEx8wI73zK9yofLs?usp=sharing" rel="noopener  ugc nofollow" target="_blank"><div class="kj ab dw"><div class="kk ab kl cl cj km"><h2 class="bd hj fi z dy kn ea eb ko ed ef hh bi translated">马里欧艾</h2><div class="kp l"><h3 class="bd b fi z dy kn ea eb ko ed ef dx translated">Eeman_Majumder</h3></div><div class="kq l"><p class="bd b fp z dy kn ea eb ko ed ef dx translated">colab.research.google.com</p></div></div><div class="kr l"><div class="ks l kt ku kv kr kw io ki"/></div></div></a></div><figure class="ju jv jw jx fd ij"><div class="bz dy l di"><div class="jz ka l"/></div></figure><p id="b16b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">更多内容请查看我的GitHub:</p><div class="kf kg ez fb kh ki"><a href="https://github.com/Eeman1113/Mario-RL-AI" rel="noopener  ugc nofollow" target="_blank"><div class="kj ab dw"><div class="kk ab kl cl cj km"><h2 class="bd hj fi z dy kn ea eb ko ed ef hh bi translated">GitHub-eeman 1113/马里奥-RL-AI</h2><div class="kp l"><h3 class="bd b fi z dy kn ea eb ko ed ef dx translated">github.com</h3></div></div><div class="kr l"><div class="kx l kt ku kv kr kw io ki"/></div></div></a></div><p id="4793" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">请在twitter上关注我的每日AIML研究动态:</p><figure class="ju jv jw jx fd ij"><div class="bz dy l di"><div class="ky ka l"/></div></figure><p id="c6cd" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">感谢阅读😁，下周见👋🏼</p><p id="b5bf" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">别忘了在下面评论下一步我该做什么。</p></div></div>    
</body>
</html>