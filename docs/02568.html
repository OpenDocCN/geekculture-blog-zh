<html>
<head>
<title>Build an image browsing App with React Native</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用React Native构建图片浏览应用程序</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/build-an-image-browsing-app-with-react-native-df303d222a0d?source=collection_archive---------8-----------------------#2021-05-20">https://medium.com/geekculture/build-an-image-browsing-app-with-react-native-df303d222a0d?source=collection_archive---------8-----------------------#2021-05-20</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><blockquote class="if ig ih"><p id="fdc5" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">React Native为iOS和Android带来了<a class="ae jh" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank"> React的</a>声明式UI框架。使用React Native，您可以使用原生UI控件，并拥有对原生平台的完全访问权限。<a class="ae jh" href="https://github.com/facebook/react-native" rel="noopener ugc nofollow" target="_blank">(https://github.com/facebook/react-native</a>)</p></blockquote><p id="e5f7" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">如今移动设备越来越受欢迎，因此构建自己的应用程序并从移动设备访问后端服务对许多公司来说至关重要。我们知道iOS和Android设备占据了大部分市场份额，iOS和Android上的应用程序互不兼容。这意味着开发者需要在两个平台上用不同的技术栈开发两个不同的应用。开发可能不会太难，但是以相同的交付速度维护两个应用程序可能会很棘手。因此，一些开发人员希望选择一些跨平台的解决方案，如Ionic、Flutter、Xamarin来实现他们的应用程序。React Native是开发这种跨平台app的另一种选择。</p><p id="b6fc" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">在本教程中，我们将介绍React Native的一些基本概念，并使用React Native构建一个图像应用程序。我们将涵盖React本机基础，React挂钩，平面列表，搜索栏，导航。本教程将使用TypeScript编写，它非常类似于JavaScript，但是类型检查是强制的。</p><p id="98fa" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">我假设本教程的读者对JavaScript / TypeScript、Android和iOS有一些基本的了解。所以没有关于语法和开发工具的细节。</p><p id="023f" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">在本教程中，我们将建立一个两个屏幕的应用程序，第一个屏幕是一个主页，在这个主页上，我们将显示从后端API获取的图像列表，以及一个搜索栏，让用户输入图像的关键字；第二个屏幕是一个详细页面，用户可以通过单击列表中的单个图像导航到该页面。</p><h1 id="ccb0" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">先决条件</h1><p id="93fb" class="pw-post-body-paragraph ii ij hi il b im kj io ip iq kk is it ji kl iw ix jj km ja jb jk kn je jf jg hb bi translated">这个应用程序将从<a class="ae jh" href="https://www.pexels.com/" rel="noopener ugc nofollow" target="_blank"> Pexels </a>获取图像，因此在开始构建应用程序之前，如果您没有Pexels帐户，我们需要创建一个。我们不会关注如何创建Pexels帐户，因为这超出了本教程的范围。但是根据Pexels上的说明创建一个新帐户是非常容易的。</p><p id="d34b" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">我们需要将它们<code class="du ko kp kq kr b">Authorization Token</code>保存在一个安全的地方，这是访问Pexels API的关键，并将在应用程序中使用。</p><p id="5aa7" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">然后，我们可以用Postman对Pexels API进行一些测试，以确保我们的<code class="du ko kp kq kr b">Authorization Token</code>是正确的，并且我们能够为Pexels获取照片。</p><figure class="kt ku kv kw fd kx er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es ks"><img src="../Images/81b3c975b41721ea72e7cba274a6e2c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*iRCvl1TNXnGXRnO7.png"/></div></div></figure><p id="5840" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">请注意，您需要将<code class="du ko kp kq kr b">Headers</code>中的<code class="du ko kp kq kr b">Authorization Token</code>替换为创建Pexels帐户时获得的实际值。</p><p id="23e8" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">如果幸运的话，我们会得到如下JSON格式的响应:</p><pre class="kt ku kv kw fd le kr lf lg aw lh bi"><span id="0c13" class="li jm hi kr b fi lj lk l ll lm">{<br/>  page: 1,<br/>  per_page: 2,<br/>  photos: [<br/>    {<br/>      id: 1105666,<br/>      width: 6720,<br/>      height: 4480,<br/>      url: '<a class="ae jh" href="https://www.pexels.com/photo/people-at-concert-1105666/'" rel="noopener ugc nofollow" target="_blank">https://www.pexels.com/photo/people-at-concert-1105666/'</a>,<br/>      photographer: 'Vishnu R Nair',<br/>      photographer_url: '<a class="ae jh" href="https://www.pexels.com/@vishnurnair'" rel="noopener ugc nofollow" target="_blank">https://www.pexels.com/@vishnurnair'</a>,<br/>      photographer_id: 426592,<br/>      avg_color: '#543421',<br/>      src: {<br/>        original:<br/>          '<a class="ae jh" href="https://images.pexels.com/photos/1105666/pexels-photo-1105666.jpeg'" rel="noopener ugc nofollow" target="_blank">https://images.pexels.com/photos/1105666/pexels-photo-1105666.jpeg'</a>,<br/>        large2x:<br/>          '<a class="ae jh" href="https://images.pexels.com/photos/1105666/pexels-photo-1105666.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940'" rel="noopener ugc nofollow" target="_blank">https://images.pexels.com/photos/1105666/pexels-photo-1105666.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940'</a>,<br/>        large:<br/>          '<a class="ae jh" href="https://images.pexels.com/photos/1105666/pexels-photo-1105666.jpeg?auto=compress&amp;cs=tinysrgb&amp;h=650&amp;w=940'" rel="noopener ugc nofollow" target="_blank">https://images.pexels.com/photos/1105666/pexels-photo-1105666.jpeg?auto=compress&amp;cs=tinysrgb&amp;h=650&amp;w=940'</a>,<br/>        medium:<br/>          '<a class="ae jh" href="https://images.pexels.com/photos/1105666/pexels-photo-1105666.jpeg?auto=compress&amp;cs=tinysrgb&amp;h=350'" rel="noopener ugc nofollow" target="_blank">https://images.pexels.com/photos/1105666/pexels-photo-1105666.jpeg?auto=compress&amp;cs=tinysrgb&amp;h=350'</a>,<br/>        small:<br/>          '<a class="ae jh" href="https://images.pexels.com/photos/1105666/pexels-photo-1105666.jpeg?auto=compress&amp;cs=tinysrgb&amp;h=130'" rel="noopener ugc nofollow" target="_blank">https://images.pexels.com/photos/1105666/pexels-photo-1105666.jpeg?auto=compress&amp;cs=tinysrgb&amp;h=130'</a>,<br/>        portrait:<br/>          '<a class="ae jh" href="https://images.pexels.com/photos/1105666/pexels-photo-1105666.jpeg?auto=compress&amp;cs=tinysrgb&amp;fit=crop&amp;h=1200&amp;w=800'" rel="noopener ugc nofollow" target="_blank">https://images.pexels.com/photos/1105666/pexels-photo-1105666.jpeg?auto=compress&amp;cs=tinysrgb&amp;fit=crop&amp;h=1200&amp;w=800'</a>,<br/>        landscape:<br/>          '<a class="ae jh" href="https://images.pexels.com/photos/1105666/pexels-photo-1105666.jpeg?auto=compress&amp;cs=tinysrgb&amp;fit=crop&amp;h=627&amp;w=1200'" rel="noopener ugc nofollow" target="_blank">https://images.pexels.com/photos/1105666/pexels-photo-1105666.jpeg?auto=compress&amp;cs=tinysrgb&amp;fit=crop&amp;h=627&amp;w=1200'</a>,<br/>        tiny:<br/>          '<a class="ae jh" href="https://images.pexels.com/photos/1105666/pexels-photo-1105666.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=1&amp;fit=crop&amp;h=200&amp;w=280'" rel="noopener ugc nofollow" target="_blank">https://images.pexels.com/photos/1105666/pexels-photo-1105666.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=1&amp;fit=crop&amp;h=200&amp;w=280'</a>,<br/>      },<br/>      liked: false,<br/>    },<br/>    {<br/>      id: 15286,<br/>      width: 2500,<br/>      height: 1667,<br/>      url:<br/>        '<a class="ae jh" href="https://www.pexels.com/photo/person-walking-between-green-forest-trees-15286/'" rel="noopener ugc nofollow" target="_blank">https://www.pexels.com/photo/person-walking-between-green-forest-trees-15286/'</a>,<br/>      photographer: 'Luis del Río',<br/>      photographer_url: '<a class="ae jh" href="https://www.pexels.com/@luisdelrio'" rel="noopener ugc nofollow" target="_blank">https://www.pexels.com/@luisdelrio'</a>,<br/>      photographer_id: 1081,<br/>      avg_color: '#283419',<br/>      src: {<br/>        original: '<a class="ae jh" href="https://images.pexels.com/photos/15286/pexels-photo.jpg'" rel="noopener ugc nofollow" target="_blank">https://images.pexels.com/photos/15286/pexels-photo.jpg'</a>,<br/>        large2x:<br/>          '<a class="ae jh" href="https://images.pexels.com/photos/15286/pexels-photo.jpg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940'" rel="noopener ugc nofollow" target="_blank">https://images.pexels.com/photos/15286/pexels-photo.jpg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940'</a>,<br/>        large:<br/>          '<a class="ae jh" href="https://images.pexels.com/photos/15286/pexels-photo.jpg?auto=compress&amp;cs=tinysrgb&amp;h=650&amp;w=940'" rel="noopener ugc nofollow" target="_blank">https://images.pexels.com/photos/15286/pexels-photo.jpg?auto=compress&amp;cs=tinysrgb&amp;h=650&amp;w=940'</a>,<br/>        medium:<br/>          '<a class="ae jh" href="https://images.pexels.com/photos/15286/pexels-photo.jpg?auto=compress&amp;cs=tinysrgb&amp;h=350'" rel="noopener ugc nofollow" target="_blank">https://images.pexels.com/photos/15286/pexels-photo.jpg?auto=compress&amp;cs=tinysrgb&amp;h=350'</a>,<br/>        small:<br/>          '<a class="ae jh" href="https://images.pexels.com/photos/15286/pexels-photo.jpg?auto=compress&amp;cs=tinysrgb&amp;h=130'" rel="noopener ugc nofollow" target="_blank">https://images.pexels.com/photos/15286/pexels-photo.jpg?auto=compress&amp;cs=tinysrgb&amp;h=130'</a>,<br/>        portrait:<br/>          '<a class="ae jh" href="https://images.pexels.com/photos/15286/pexels-photo.jpg?auto=compress&amp;cs=tinysrgb&amp;fit=crop&amp;h=1200&amp;w=800'" rel="noopener ugc nofollow" target="_blank">https://images.pexels.com/photos/15286/pexels-photo.jpg?auto=compress&amp;cs=tinysrgb&amp;fit=crop&amp;h=1200&amp;w=800'</a>,<br/>        landscape:<br/>          '<a class="ae jh" href="https://images.pexels.com/photos/15286/pexels-photo.jpg?auto=compress&amp;cs=tinysrgb&amp;fit=crop&amp;h=627&amp;w=1200'" rel="noopener ugc nofollow" target="_blank">https://images.pexels.com/photos/15286/pexels-photo.jpg?auto=compress&amp;cs=tinysrgb&amp;fit=crop&amp;h=627&amp;w=1200'</a>,<br/>        tiny:<br/>          '<a class="ae jh" href="https://images.pexels.com/photos/15286/pexels-photo.jpg?auto=compress&amp;cs=tinysrgb&amp;dpr=1&amp;fit=crop&amp;h=200&amp;w=280'" rel="noopener ugc nofollow" target="_blank">https://images.pexels.com/photos/15286/pexels-photo.jpg?auto=compress&amp;cs=tinysrgb&amp;dpr=1&amp;fit=crop&amp;h=200&amp;w=280'</a>,<br/>      },<br/>      liked: false,<br/>    },<br/>  ],<br/>  total_results: 8000,<br/>  next_page: '<a class="ae jh" href="https://api.pexels.com/v1/search/?page=2&amp;per_page=2&amp;query=people'" rel="noopener ugc nofollow" target="_blank">https://api.pexels.com/v1/search/?page=2&amp;per_page=2&amp;query=people'</a>,<br/>}</span></pre><p id="e65b" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">如果我们分析JSON对象，我们会得到模式是</p><pre class="kt ku kv kw fd le kr lf lg aw lh bi"><span id="d2dd" class="li jm hi kr b fi lj lk l ll lm">{<br/>  page: number,<br/>  per_page: number,<br/>  photos: Array&lt;Photo&gt; ,<br/>  total_result: number,<br/>  next_page: string<br/>}</span></pre><p id="3d37" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">而<code class="du ko kp kq kr b">Photo</code>的模式是</p><pre class="kt ku kv kw fd le kr lf lg aw lh bi"><span id="397b" class="li jm hi kr b fi lj lk l ll lm">{<br/>  id: number,<br/>  width: number,<br/>  height: number,<br/>  url: string,<br/>  photographer: string,<br/>  photographer_url: string,<br/>  photographer_id: number,<br/>  avg_color: string,<br/>  src: Src,<br/>  liked: boolean,<br/>}</span></pre><p id="cb5f" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">而<code class="du ko kp kq kr b">Src</code>的模式是</p><pre class="kt ku kv kw fd le kr lf lg aw lh bi"><span id="c694" class="li jm hi kr b fi lj lk l ll lm">{<br/>  original: string,<br/>  large2x: string,<br/>  large: string,<br/>  medium: string,<br/>  small: string,<br/>  portrait: string,<br/>  landscape: string,<br/>  tiny: string<br/>}</span></pre><p id="e7de" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">当我们创建数据模型时，我们需要这些模式</p><p id="84e5" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">一旦我们验证了Pexels API是可访问的，我们就可以开始构建应用程序了。</p><h1 id="9b33" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">设置开发环境</h1><p id="5263" class="pw-post-body-paragraph ii ij hi il b im kj io ip iq kk is it ji kl iw ix jj km ja jb jk kn je jf jg hb bi translated">然后我们需要根据官方文档设置开发环境(<a class="ae jh" href="https://reactnative.dev/docs/environment-setup" rel="noopener ugc nofollow" target="_blank">设置开发环境</a>)，创建新项目有两种方式，用Expo或者用React Native CLI。我们将在教程中使用React Native CLI。</p><p id="3b76" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">因为我们需要Xcode来让应用程序在iOS设备上运行，所以我会按照MacOS上的说明操作。关于如何安装依赖项，我不会说太多细节，因为上面的官方文档已经说得很清楚了。</p><p id="1045" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">安装完所有依赖项后，让我们通过在终端中运行以下命令，使用React Native CLI (React Native命令行界面)创建一个新项目</p><pre class="kt ku kv kw fd le kr lf lg aw lh bi"><span id="aa32" class="li jm hi kr b fi lj lk l ll lm">npx react-native init Pexels --template react-native-template-typescript</span></pre><p id="1c8a" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">这可能需要几分钟的时间，因为有许多依赖项需要安装。小心我们在命令中有一个参数<code class="du ko kp kq kr b">—-template react-native-template-typescript</code>。这意味着我们正在用TypeScript模板创建一个项目。</p><p id="12ad" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">你会发现一个新的文件夹，Pexels已经被创建在当前的工作目录中，这是整个React原生项目。</p><p id="f972" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">您可以选择任何首选的编辑器来打开这个项目，但我想使用VSCode。所以让我们用VSCode打开这个文件夹。因此，我们会看到左边项目的整体结构</p><figure class="kt ku kv kw fd kx er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es ln"><img src="../Images/efed9082eae19a231cf17239204d6f57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T5i8myIm2qD94GAqsnCmlQ.png"/></div></div></figure><p id="2125" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">React Native CLI已经为我们生成了项目的框架。<code class="du ko kp kq kr b">index.js</code>是项目的入口，<code class="du ko kp kq kr b">App.tsx</code>，在其中你可以找到一些示例组件来显示一些视图，<code class="du ko kp kq kr b">package.json</code>是项目的清单文件，在其中声明了一些运行脚本和依赖项。</p><p id="7b3f" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">好的。你可能很好奇如何运行这个React原生应用？所以让我们开始吧。</p><p id="b867" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">在终端中运行以下命令:</p><pre class="kt ku kv kw fd le kr lf lg aw lh bi"><span id="57ae" class="li jm hi kr b fi lj lk l ll lm">cd Pexels<br/>npx react-native run-ios</span></pre><p id="1030" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">您将在终端中看到如下输出:</p><figure class="kt ku kv kw fd kx er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es lo"><img src="../Images/1aebd768b668c639333506acfc5144ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b9FM--1-pV2UNCDs6TIXUQ.png"/></div></div></figure><p id="2fd1" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">将启动一个iOS模拟器，并弹出一个新的终端，如下所示:</p><figure class="kt ku kv kw fd kx er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es lp"><img src="../Images/dbc55af3fc66b20ce9468c85c08562b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*14jixtbWSsXPfftvUuOkyw.png"/></div></div></figure><p id="aea7" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">如果一切正常，您将在第一个终端中看到以下消息。</p><figure class="kt ku kv kw fd kx er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es lo"><img src="../Images/29db9221e325b10775d21554a04c7a4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mVeyGnQJQiTzdv4_Vz5Ecg.png"/></div></div></figure><p id="bba0" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">您会看到该应用程序正在iOS模拟器上运行，如下所示:</p><figure class="kt ku kv kw fd kx er es paragraph-image"><div class="er es lq"><img src="../Images/7cc8d641f26fdefeed58d54c5722a3e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:642/format:webp/1*KaLyXlF1doN19op_UZfj4A.png"/></div></figure><p id="6fa2" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">那么如果你熟悉React，可以试着从<code class="du ko kp kq kr b">App.tsx</code>中找到这个App骨架的组件。</p><p id="f493" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">到目前为止一切顺利。然后让我们停止在第二个终端上运行的Metro服务器，关闭iOS模拟器上的App并基于这个App框架实现我们的App。</p><h1 id="23ae" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">清除棉绒问题</h1><p id="ba8d" class="pw-post-body-paragraph ii ij hi il b im kj io ip iq kk is it ji kl iw ix jj km ja jb jk kn je jf jg hb bi translated">如果您已经在VSCode中安装了<code class="du ko kp kq kr b">eslint</code>插件，那么如果您打开<code class="du ko kp kq kr b">App.tsx</code>文件，您可能会看到许多lint问题。因此，让我们先解决这些问题，将鼠标光标放在一个lint问题上，当弹出菜单如下所示时，选择<code class="du ko kp kq kr b">Quick Fix</code>:</p><figure class="kt ku kv kw fd kx er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es lr"><img src="../Images/580e7a6799fdb3196922fa6f494acb6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZXe5oU2mIY3VuC-BpBJrGA.png"/></div></div></figure><p id="35fe" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">选择<code class="du ko kp kq kr b">Fix all auto-fixable problems</code>如下:</p><figure class="kt ku kv kw fd kx er es paragraph-image"><div class="er es ls"><img src="../Images/6b512d1eebe6c661070fda40fcc9d39d.png" data-original-src="https://miro.medium.com/v2/resize:fit:694/format:webp/1*uzdTjmXXWQ_p9ohq25Yk3w.png"/></div></figure><p id="9050" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">使用这个命令，可以解决所有格式问题，如间距、逗号等。会被修复。然后代码看起来更漂亮。当您在修改源代码或添加新代码后发现这样的lint问题时，您可以随时运行这个命令。</p><p id="ed7d" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">接下来让我们添加数据模型</p><h1 id="29fa" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">添加数据模型</h1><p id="42e5" class="pw-post-body-paragraph ii ij hi il b im kj io ip iq kk is it ji kl iw ix jj km ja jb jk kn je jf jg hb bi translated">我建议先创建一个新的文件夹，<code class="du ko kp kq kr b">src</code>,把我们所有的代码放在里面，这样项目结构会更整洁。</p><p id="38bf" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">并在<code class="du ko kp kq kr b">src</code>文件夹中创建另一个文件夹<code class="du ko kp kq kr b">@types</code>。我们将把所有类型的定义放在这个文件夹中。</p><p id="dfc9" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">然后，让我们在<code class="du ko kp kq kr b">@types</code>文件夹中创建一个新文件<code class="du ko kp kq kr b">Data.d.ts</code>，并在该文件中定义以下接口</p><pre class="kt ku kv kw fd le kr lf lg aw lh bi"><span id="059f" class="li jm hi kr b fi lj lk l ll lm">interface Src {<br/> original: string;<br/> large2x: string;<br/> large: string;<br/> medium: string;<br/> small: string;<br/> portrait: string;<br/> landscape: string;<br/> tiny: string;<br/>}</span><span id="88ba" class="li jm hi kr b fi lt lk l ll lm">interface Photo {<br/> id: number;<br/> width: number;<br/> height: number;<br/> url: string;<br/> photographer: string;<br/> photographer_url: string;<br/> photographer_id: number;<br/> avg_color: string;<br/> src: Src;<br/> liked: boolean;<br/> keyword: string;<br/>}</span><span id="bdb4" class="li jm hi kr b fi lt lk l ll lm">interface Data {<br/> page: number;<br/> per_page: number;<br/> photos: Array &lt; Photo &gt; ;<br/> total_results: number;<br/> next_page: string;<br/>}</span></pre><p id="739b" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">我们可以看到我们定义了一个名为<code class="du ko kp kq kr b">Data</code>的接口，它从后端映射整个响应JSON；另一个接口<code class="du ko kp kq kr b">Photo</code>，它对应一张照片的JSON对象；第三个接口<code class="du ko kp kq kr b">Src</code>，它包含照片的所有URL。这些接口匹配响应中JSON对象的模式。</p><h1 id="dff4" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">构建主页组件</h1><p id="0f24" class="pw-post-body-paragraph ii ij hi il b im kj io ip iq kk is it ji kl iw ix jj km ja jb jk kn je jf jg hb bi translated">我们将构建一个新的组件，<code class="du ko kp kq kr b">Home</code>，在其中我们将显示一个照片列表。</p><p id="ccf0" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">我们需要做的第一步是通过将这个文件拖到src文件夹来将<code class="du ko kp kq kr b">App.tsx</code>移动到<code class="du ko kp kq kr b">src</code>文件夹。VSCode会重构这个文件中引用的所有地方，所以您只需要接受这些更改。这一步将使项目结构更加清晰。我们之前说过，我们会把所有的源代码放在<code class="du ko kp kq kr b">src</code>一个文件夹里。</p><p id="45c5" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">让我们在<code class="du ko kp kq kr b">src</code>文件夹下创建一个新文件夹，命名为<code class="du ko kp kq kr b">home</code>，我们将把所有与主页相关的文件，</p><p id="6c02" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">在该文件夹中新建一个文件<code class="du ko kp kq kr b">Home.tsx</code>，新建一个功能组件<code class="du ko kp kq kr b">Home</code>，如下所示:</p><pre class="kt ku kv kw fd le kr lf lg aw lh bi"><span id="aaf7" class="li jm hi kr b fi lj lk l ll lm">import React from 'react';<br/>import {StyleSheet, StatusBar, SafeAreaView, Text} from 'react-native';<br/>import List from './List';<br/>import {sampleData} from './SampleData';</span><span id="6bc0" class="li jm hi kr b fi lt lk l ll lm">const Home = () =&gt; {<br/>  const data = sampleData;<br/>  return data &amp;&amp; !!data.photos ? (<br/>    &lt;SafeAreaView style={styles.container}&gt;<br/>      &lt;List data={data.photos} /&gt;<br/>    &lt;/SafeAreaView&gt;<br/>  ) : (<br/>    &lt;Text /&gt;<br/>  );<br/>};<br/>const styles = StyleSheet.create({<br/>  container: {<br/>    flex: 1,<br/>    paddingTop: StatusBar.currentHeight || 0 + 0,<br/>    marginHorizontal: 0,<br/>  },<br/>});</span><span id="462e" class="li jm hi kr b fi lt lk l ll lm">export default Home;</span></pre><p id="f9cf" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">注意，我们还没有实现依赖项、<code class="du ko kp kq kr b">List</code>和<code class="du ko kp kq kr b">sampleData</code>，所以会有一些突出显示的警告。我们稍后将修复它们。</p><p id="aa5d" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">这是一个非常简单的函数组件Home，如果有照片要显示，我们在<code class="du ko kp kq kr b"><a class="ae jh" href="https://reactnative.dev/docs/safeareaview" rel="noopener ugc nofollow" target="_blank">SafeAreaView</a></code>中定义了<code class="du ko kp kq kr b">List</code>组件。<code class="du ko kp kq kr b">SafeAreaView</code>的目的是在设备的安全区域边界内呈现内容。目前仅适用于iOS 11版或更高版本的iOS设备。</p><p id="1bdb" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">先解决<code class="du ko kp kq kr b">sampleData</code>吧。因为我们还没有实现网络请求，所以我们将显示带有本地数据的列表。我们需要在<code class="du ko kp kq kr b">home</code>文件夹中创建一个文件<code class="du ko kp kq kr b">SampleData.ts</code>，并用如下所示的值定义一个变量<code class="du ko kp kq kr b">sampleData</code>:</p><pre class="kt ku kv kw fd le kr lf lg aw lh bi"><span id="fbf8" class="li jm hi kr b fi lj lk l ll lm">export const sampleData = {<br/>  page: 1,<br/>  per_page: 2,<br/>  photos: [<br/>    {<br/>      id: 1105666,<br/>      width: 6720,<br/>      height: 4480,<br/>      url: '<a class="ae jh" href="https://www.pexels.com/photo/people-at-concert-1105666/'" rel="noopener ugc nofollow" target="_blank">https://www.pexels.com/photo/people-at-concert-1105666/'</a>,<br/>      photographer: 'Vishnu R Nair',<br/>      photographer_url: '<a class="ae jh" href="https://www.pexels.com/@vishnurnair'" rel="noopener ugc nofollow" target="_blank">https://www.pexels.com/@vishnurnair'</a>,<br/>      photographer_id: 426592,<br/>      avg_color: '#543421',<br/>      src: {<br/>        original:<br/>          '<a class="ae jh" href="https://images.pexels.com/photos/1105666/pexels-photo-1105666.jpeg'" rel="noopener ugc nofollow" target="_blank">https://images.pexels.com/photos/1105666/pexels-photo-1105666.jpeg'</a>,<br/>        large2x:<br/>          '<a class="ae jh" href="https://images.pexels.com/photos/1105666/pexels-photo-1105666.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940'" rel="noopener ugc nofollow" target="_blank">https://images.pexels.com/photos/1105666/pexels-photo-1105666.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940'</a>,<br/>        large:<br/>          '<a class="ae jh" href="https://images.pexels.com/photos/1105666/pexels-photo-1105666.jpeg?auto=compress&amp;cs=tinysrgb&amp;h=650&amp;w=940'" rel="noopener ugc nofollow" target="_blank">https://images.pexels.com/photos/1105666/pexels-photo-1105666.jpeg?auto=compress&amp;cs=tinysrgb&amp;h=650&amp;w=940'</a>,<br/>        medium:<br/>          '<a class="ae jh" href="https://images.pexels.com/photos/1105666/pexels-photo-1105666.jpeg?auto=compress&amp;cs=tinysrgb&amp;h=350'" rel="noopener ugc nofollow" target="_blank">https://images.pexels.com/photos/1105666/pexels-photo-1105666.jpeg?auto=compress&amp;cs=tinysrgb&amp;h=350'</a>,<br/>        small:<br/>          '<a class="ae jh" href="https://images.pexels.com/photos/1105666/pexels-photo-1105666.jpeg?auto=compress&amp;cs=tinysrgb&amp;h=130'" rel="noopener ugc nofollow" target="_blank">https://images.pexels.com/photos/1105666/pexels-photo-1105666.jpeg?auto=compress&amp;cs=tinysrgb&amp;h=130'</a>,<br/>        portrait:<br/>          '<a class="ae jh" href="https://images.pexels.com/photos/1105666/pexels-photo-1105666.jpeg?auto=compress&amp;cs=tinysrgb&amp;fit=crop&amp;h=1200&amp;w=800'" rel="noopener ugc nofollow" target="_blank">https://images.pexels.com/photos/1105666/pexels-photo-1105666.jpeg?auto=compress&amp;cs=tinysrgb&amp;fit=crop&amp;h=1200&amp;w=800'</a>,<br/>        landscape:<br/>          '<a class="ae jh" href="https://images.pexels.com/photos/1105666/pexels-photo-1105666.jpeg?auto=compress&amp;cs=tinysrgb&amp;fit=crop&amp;h=627&amp;w=1200'" rel="noopener ugc nofollow" target="_blank">https://images.pexels.com/photos/1105666/pexels-photo-1105666.jpeg?auto=compress&amp;cs=tinysrgb&amp;fit=crop&amp;h=627&amp;w=1200'</a>,<br/>        tiny: '<a class="ae jh" href="https://images.pexels.com/photos/1105666/pexels-photo-1105666.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=1&amp;fit=crop&amp;h=200&amp;w=280'" rel="noopener ugc nofollow" target="_blank">https://images.pexels.com/photos/1105666/pexels-photo-1105666.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=1&amp;fit=crop&amp;h=200&amp;w=280'</a>,<br/>      },<br/>      liked: false,<br/>    },<br/>    {<br/>      id: 15286,<br/>      width: 2500,<br/>      height: 1667,<br/>      url: '<a class="ae jh" href="https://www.pexels.com/photo/person-walking-between-green-forest-trees-15286/'" rel="noopener ugc nofollow" target="_blank">https://www.pexels.com/photo/person-walking-between-green-forest-trees-15286/'</a>,<br/>      photographer: 'Luis del Río',<br/>      photographer_url: '<a class="ae jh" href="https://www.pexels.com/@luisdelrio'" rel="noopener ugc nofollow" target="_blank">https://www.pexels.com/@luisdelrio'</a>,<br/>      photographer_id: 1081,<br/>      avg_color: '#283419',<br/>      src: {<br/>        original: '<a class="ae jh" href="https://images.pexels.com/photos/15286/pexels-photo.jpg'" rel="noopener ugc nofollow" target="_blank">https://images.pexels.com/photos/15286/pexels-photo.jpg'</a>,<br/>        large2x:<br/>          '<a class="ae jh" href="https://images.pexels.com/photos/15286/pexels-photo.jpg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940'" rel="noopener ugc nofollow" target="_blank">https://images.pexels.com/photos/15286/pexels-photo.jpg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940'</a>,<br/>        large:<br/>          '<a class="ae jh" href="https://images.pexels.com/photos/15286/pexels-photo.jpg?auto=compress&amp;cs=tinysrgb&amp;h=650&amp;w=940'" rel="noopener ugc nofollow" target="_blank">https://images.pexels.com/photos/15286/pexels-photo.jpg?auto=compress&amp;cs=tinysrgb&amp;h=650&amp;w=940'</a>,<br/>        medium:<br/>          '<a class="ae jh" href="https://images.pexels.com/photos/15286/pexels-photo.jpg?auto=compress&amp;cs=tinysrgb&amp;h=350'" rel="noopener ugc nofollow" target="_blank">https://images.pexels.com/photos/15286/pexels-photo.jpg?auto=compress&amp;cs=tinysrgb&amp;h=350'</a>,<br/>        small:<br/>          '<a class="ae jh" href="https://images.pexels.com/photos/15286/pexels-photo.jpg?auto=compress&amp;cs=tinysrgb&amp;h=130'" rel="noopener ugc nofollow" target="_blank">https://images.pexels.com/photos/15286/pexels-photo.jpg?auto=compress&amp;cs=tinysrgb&amp;h=130'</a>,<br/>        portrait:<br/>          '<a class="ae jh" href="https://images.pexels.com/photos/15286/pexels-photo.jpg?auto=compress&amp;cs=tinysrgb&amp;fit=crop&amp;h=1200&amp;w=800'" rel="noopener ugc nofollow" target="_blank">https://images.pexels.com/photos/15286/pexels-photo.jpg?auto=compress&amp;cs=tinysrgb&amp;fit=crop&amp;h=1200&amp;w=800'</a>,<br/>        landscape:<br/>          '<a class="ae jh" href="https://images.pexels.com/photos/15286/pexels-photo.jpg?auto=compress&amp;cs=tinysrgb&amp;fit=crop&amp;h=627&amp;w=1200'" rel="noopener ugc nofollow" target="_blank">https://images.pexels.com/photos/15286/pexels-photo.jpg?auto=compress&amp;cs=tinysrgb&amp;fit=crop&amp;h=627&amp;w=1200'</a>,<br/>        tiny: '<a class="ae jh" href="https://images.pexels.com/photos/15286/pexels-photo.jpg?auto=compress&amp;cs=tinysrgb&amp;dpr=1&amp;fit=crop&amp;h=200&amp;w=280'" rel="noopener ugc nofollow" target="_blank">https://images.pexels.com/photos/15286/pexels-photo.jpg?auto=compress&amp;cs=tinysrgb&amp;dpr=1&amp;fit=crop&amp;h=200&amp;w=280'</a>,<br/>      },<br/>      liked: false,<br/>    },<br/>  ],<br/>  total_results: 8000,<br/>  next_page: '<a class="ae jh" href="https://api.pexels.com/v1/search/?page=2&amp;per_page=2&amp;query=people'" rel="noopener ugc nofollow" target="_blank">https://api.pexels.com/v1/search/?page=2&amp;per_page=2&amp;query=people'</a>,<br/>};</span></pre><p id="b2ac" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">实际上，这个值是来自后端API的响应JSON对象。它具有与来自真实网络请求的响应相同的模式。因此，如果我们的代码能够处理这个样本数据，它就能够处理真实的响应。</p><p id="9bbe" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">让我们通过创建一个新文件<code class="du ko kp kq kr b">List.tsx</code>和一个新的函数组件<code class="du ko kp kq kr b">List</code>来实现<code class="du ko kp kq kr b">List</code>组件，如下所示:</p><pre class="kt ku kv kw fd le kr lf lg aw lh bi"><span id="9679" class="li jm hi kr b fi lj lk l ll lm">import React from 'react';<br/>import {<br/> StyleSheet,<br/> FlatList,<br/> StatusBar<br/>} from 'react-native';<br/>import Item from './Item';</span><span id="26d7" class="li jm hi kr b fi lt lk l ll lm">const List = ({<br/> data<br/>}: {<br/> data: Array &lt; Photo &gt;<br/>}): JSX.Element =&gt; {<br/> const renderItem = ({<br/>  item<br/> }: {<br/>  item: Photo<br/> }) =&gt; &lt; Item photo = {<br/>  item<br/> }<br/> /&gt;;<br/> return ( &lt;<br/>  FlatList style = {<br/>   styles.container<br/>  }<br/>  data = {<br/>   data<br/>  }<br/>  numColumns = {<br/>   2<br/>  }<br/>  renderItem = {<br/>   renderItem<br/>  }<br/>  keyExtractor = {<br/>   (item: Photo) =&gt; item.id.toString()<br/>  }<br/>  /&gt;<br/> );<br/>};</span><span id="6d37" class="li jm hi kr b fi lt lk l ll lm">const styles = StyleSheet.create({<br/> container: {<br/>  flex: 1,<br/>  // flexDirection: 'row',<br/>  paddingTop: StatusBar.currentHeight || 0 + 0,<br/>  marginHorizontal: 0,<br/> },<br/>});</span><span id="19b1" class="li jm hi kr b fi lt lk l ll lm">export default List;</span></pre><p id="d943" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">在这个文件中，我们用标准的React本地组件<code class="du ko kp kq kr b">FlatList</code>实现了一个函数组件<code class="du ko kp kq kr b">List</code>。我们将用两列显示照片，并在稍后添加的<code class="du ko kp kq kr b">Item</code>组件中呈现它们。</p><p id="2bd4" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">因此，让我们通过在<code class="du ko kp kq kr b">home</code>文件夹中创建一个新文件<code class="du ko kp kq kr b">Item.tsx</code>来实现<code class="du ko kp kq kr b">Item</code>组件，并在该文件中添加一个新的功能组件Item，如下所示:</p><pre class="kt ku kv kw fd le kr lf lg aw lh bi"><span id="201f" class="li jm hi kr b fi lj lk l ll lm">import React from 'react';<br/>import {<br/> StyleSheet,<br/> Image,<br/> Dimensions<br/>} from 'react-native';<br/>const deviceWidth = Dimensions.get('window').width;</span><span id="a169" class="li jm hi kr b fi lt lk l ll lm">const Item = ({<br/> photo<br/>}: {<br/> photo: Photo<br/>}): JSX.Element =&gt; {<br/> return ( &lt;Image<br/>   style = {styles.item}<br/>   resizeMode = {'cover'}<br/>   source = {{uri: photo.src.medium}}<br/>  /&gt;<br/> );<br/>};</span><span id="4607" class="li jm hi kr b fi lt lk l ll lm">const styles = StyleSheet.create({<br/> container: {<br/>  flexDirection: 'row',<br/>  alignItems: 'center',<br/>  justifyContent: 'center',<br/> },<br/> item: {<br/>  backgroundColor: 'aqua',<br/>  margin: 4,<br/>  width: deviceWidth / 2 - 4 * 2,<br/>  height: 200,<br/> },<br/>});</span><span id="007e" class="li jm hi kr b fi lt lk l ll lm">export default Item;</span></pre><p id="f300" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">在这个<code class="du ko kp kq kr b">Item</code>组件中，我们用标准的<code class="du ko kp kq kr b">Image</code>组件显示照片，它支持用URI显示网络图像。</p><p id="dfbb" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">我们已经实现了<code class="du ko kp kq kr b">Home</code>组件、<code class="du ko kp kq kr b">List</code>组件和<code class="du ko kp kq kr b">Item</code>组件来显示列表中的照片，现在让我们将它们组装在一起。</p><p id="2ebd" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">让我们回到<code class="du ko kp kq kr b">App.tsx</code>,按如下方式替换它:</p><pre class="kt ku kv kw fd le kr lf lg aw lh bi"><span id="5678" class="li jm hi kr b fi lj lk l ll lm">import React from 'react';<br/>import {SafeAreaProvider} from 'react-native-safe-area-context';<br/>import Home from './home/Home';</span><span id="7dfe" class="li jm hi kr b fi lt lk l ll lm">const App = () =&gt; {<br/>  return (<br/>    &lt;SafeAreaProvider&gt;<br/>      &lt;Home /&gt;<br/>    &lt;/SafeAreaProvider&gt;<br/>  );<br/>};<br/>export default App;<br/></span></pre><p id="9779" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">这非常简单明了，只需在一个<code class="du ko kp kq kr b">SafeAreaProvider</code>中显示<code class="du ko kp kq kr b">Home</code>组件。如果您以前没有安装过<code class="du ko kp kq kr b">react-native-safe-area-context</code>包，您可能需要使用下面的命令来安装它。</p><pre class="kt ku kv kw fd le kr lf lg aw lh bi"><span id="0a6a" class="li jm hi kr b fi lj lk l ll lm">yarn add react-native-safe-area-context</span></pre><p id="3512" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated"><code class="du ko kp kq kr b">SafeAreaProvider</code>将确保所有组件都显示在一个安全的区域，即使是在iPhone X和更高版本的设备上。</p><p id="049e" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">到目前为止，我们已经用本地数据构建了基本的React本地应用程序。你可能想运行它。但在运行应用程序之前，你可能需要将应用程序安装在模拟器或设备上。尽管您可以用命令行构建并运行它</p><pre class="kt ku kv kw fd le kr lf lg aw lh bi"><span id="8938" class="li jm hi kr b fi lj lk l ll lm">npx react-native run-ios</span></pre><p id="3af0" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">我仍然认为值得用Android应用程序的<code class="du ko kp kq kr b">Android Studio</code>或iOS应用程序的<code class="du ko kp kq kr b">Xcode</code>来构建它。因此，在终端中运行以下命令:</p><pre class="kt ku kv kw fd le kr lf lg aw lh bi"><span id="ab49" class="li jm hi kr b fi lj lk l ll lm">cd ios/; pod install; cd ..</span></pre><p id="e59d" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">将<code class="du ko kp kq kr b">ios</code>文件夹拖到<code class="du ko kp kq kr b">Xcode</code>中，用Xcode打开<code class="du ko kp kq kr b">ios</code>项目，构建App。</p><p id="b526" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">并在终端中使用以下命令运行Metro服务器</p><pre class="kt ku kv kw fd le kr lf lg aw lh bi"><span id="403d" class="li jm hi kr b fi lj lk l ll lm">yarn start --reset-cache</span></pre><p id="91aa" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">并从设备运行Pexels应用程序，您会看到该应用程序是这样运行的:</p><figure class="kt ku kv kw fd kx er es paragraph-image"><div class="er es lq"><img src="../Images/a572d70c2df9dbb7fa5eb95e2412c757.png" data-original-src="https://miro.medium.com/v2/resize:fit:642/format:webp/1*A0kBk157nZEnpR4AzEwvpg.png"/></div></figure><p id="13b4" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">正如我们看到的，显示了两幅图像，它们来自本地样本数据，整个应用程序不会干扰系统区域。</p><p id="0bec" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">到目前为止一切顺利。我们将在下一章显示从后端API获取的真实数据，而不是本地数据。</p><h1 id="84cf" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">从后端API获取数据</h1><p id="20f7" class="pw-post-body-paragraph ii ij hi il b im kj io ip iq kk is it ji kl iw ix jj km ja jb jk kn je jf jg hb bi translated">实际上，用React Native从后端API获取数据非常简单。我们可以用<a class="ae jh" href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API" rel="noopener ugc nofollow" target="_blank">获取API </a>来实现这个功能。所以我们只是在<code class="du ko kp kq kr b">Home</code>组件中添加了一个本地函数<code class="du ko kp kq kr b">fetchData</code>，如下所示:</p><pre class="kt ku kv kw fd le kr lf lg aw lh bi"><span id="366f" class="li jm hi kr b fi lj lk l ll lm">const [data, setData] = useState&lt;Data&gt;();<br/>const fetchData = async (<br/>  query: string = 'panda',<br/>  pageIndex: number = 0,<br/>  perPage: number = 20,<br/>) =&gt; {<br/>  try {<br/>    const url = `https://api.pexels.com/v1/search?query=${query}&amp;page=${pageIndex}&amp;per_page=${perPage}`;<br/>    const response = await fetch(url, {<br/>      headers: {<br/>        Authorization:<br/>          '&lt;<em class="ik">authorization token&gt;</em>',<br/>      },<br/>    });<br/>    const json = await response.json();<br/>    setData(json);<br/>  } catch (error) {<br/>    console.error(error);<br/>  }<br/>};</span></pre><p id="5718" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">请将<code class="du ko kp kq kr b">authorization token</code>更改为您的，这是您注册Pexels帐户时获得的。</p><p id="046c" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">正如我们看到的，我们将函数<code class="du ko kp kq kr b">fetchData</code>定义为异步函数，这样我们可以避免回调，使代码易于阅读。这个函数非常简单，只需用Fetch API获取数据，并将响应保存在本地。</p><p id="0a7a" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">你可能会注意到我们在这里使用的是<code class="du ko kp kq kr b">React Hooks</code>。请在<a class="ae jh" href="https://reactjs.org/docs/hooks-intro.html" rel="noopener ugc nofollow" target="_blank">https://reactjs.org/docs/hooks-intro.html</a>查阅官方文件。一旦我们从后端获得数据，我们就用<code class="du ko kp kq kr b">setData</code>设置<code class="du ko kp kq kr b">data</code>。</p><p id="d18d" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">然后我们还需要在适当的时候调用这个<code class="du ko kp kq kr b">fetchData</code>函数，所以我们需要在<code class="du ko kp kq kr b">Home</code>组件中添加以下代码:</p><pre class="kt ku kv kw fd le kr lf lg aw lh bi"><span id="aa7c" class="li jm hi kr b fi lj lk l ll lm">useEffect(() =&gt; {<br/>  if (!data) {<br/>    (async () =&gt; await fetchData())();<br/>  }<br/>});</span></pre><p id="2795" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">正如我们所看到的，我们将在<code class="du ko kp kq kr b">Effect</code>钩子中调用<code class="du ko kp kq kr b">fetchData</code>函数，如果没有数据被提取。</p><p id="33de" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">您还可以添加一些新的导入</p><pre class="kt ku kv kw fd le kr lf lg aw lh bi"><span id="f48d" class="li jm hi kr b fi lj lk l ll lm">import React, {useState, useEffect} from 'react';</span></pre><p id="8c09" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">并移除未使用的<code class="du ko kp kq kr b">sampleData</code>相关代码和依赖项。</p><p id="5935" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">然后让我们再次运行应用程序，它将显示来自后端API的真实数据，如下所示:</p><figure class="kt ku kv kw fd kx er es paragraph-image"><div class="er es lq"><img src="../Images/f09c13b503f6d773b55091b3bfe5eb10.png" data-original-src="https://miro.medium.com/v2/resize:fit:642/format:webp/1*Dlw87jEOITg38yywmZ57ZQ.png"/></div></figure><p id="3f79" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">为什么是熊猫？这是因为我们使用了一个硬编码的关键字，<code class="du ko kp kq kr b">panda</code>来从后端API获取图像。我们稍后会更新。</p><h1 id="59d7" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">添加网络错误图标</h1><p id="5d42" class="pw-post-body-paragraph ii ij hi il b im kj io ip iq kk is it ji kl iw ix jj km ja jb jk kn je jf jg hb bi translated">在网络获取的补充部分，如果数据获取失败，我们还需要显示一个错误图标，让用户知道发生了什么。</p><p id="cd9e" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">我会介绍<code class="du ko kp kq kr b">react-native-vector-icon</code>包，因为这个包里有很多现代设计的图标。因此请按照<a class="ae jh" href="https://www.npmjs.com/package/react-native-vector-icons" rel="noopener ugc nofollow" target="_blank">https://www.npmjs.com/package/react-native-vector-icons</a>中的说明进行安装。</p><p id="26c1" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">安装完<code class="du ko kp kq kr b">react-native-vector-icons</code>包后，你需要运行</p><pre class="kt ku kv kw fd le kr lf lg aw lh bi"><span id="9f98" class="li jm hi kr b fi lj lk l ll lm">cd ios/; pod install; cd ..</span></pre><p id="4cc0" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">你会看到这样的信息</p><figure class="kt ku kv kw fd kx er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es lu"><img src="../Images/2deb284af74ba77294c06f305da01220.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XlNR-xy9FcN8dpi44yO-XQ.png"/></div></div></figure><p id="ba0a" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">而且你还需要用<code class="du ko kp kq kr b">Xcode</code>重新构建App，因为App里需要安装一些字体库。</p><p id="603a" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">我们还需要如下更新<code class="du ko kp kq kr b">Home</code>组件:</p><p id="23d8" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">首先，让我们添加一个关于网络错误的新状态挂钩</p><pre class="kt ku kv kw fd le kr lf lg aw lh bi"><span id="3e44" class="li jm hi kr b fi lj lk l ll lm">const [error, setError] = useState&lt;Error&gt;();</span></pre><p id="fe6a" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">如果抓取失败，调用<code class="du ko kp kq kr b">setError()</code>,如图:</p><pre class="kt ku kv kw fd le kr lf lg aw lh bi"><span id="f2a4" class="li jm hi kr b fi lj lk l ll lm">} catch (error) {<br/>  setError(error);<br/>}</span></pre><p id="5702" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">然后添加一个新的组件，<code class="du ko kp kq kr b">icon</code>像</p><pre class="kt ku kv kw fd le kr lf lg aw lh bi"><span id="6adb" class="li jm hi kr b fi lj lk l ll lm">const icon = error ? (<br/>   &lt;Icon name={'cloud-off'} style={styles.icon} size={160} color={'grey'} /&gt;<br/>) : undefined;</span></pre><p id="c992" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">并将<code class="du ko kp kq kr b">list</code>组件包装在一个变量中，如</p><pre class="kt ku kv kw fd le kr lf lg aw lh bi"><span id="5f14" class="li jm hi kr b fi lj lk l ll lm">const list =<br/>  data &amp;&amp; !!data.photos &amp;&amp; data.photos.length &gt; 0 ? (<br/>    &lt;List data={data.photos} /&gt;<br/>  ) : undefined;</span></pre><p id="8a4e" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">并按如下方式更新<code class="du ko kp kq kr b">Home</code>组件</p><pre class="kt ku kv kw fd le kr lf lg aw lh bi"><span id="9e8a" class="li jm hi kr b fi lj lk l ll lm">return (<br/>  &lt;SafeAreaView style={styles.container}&gt;<br/>    {list}<br/>    {icon}<br/>  &lt;/SafeAreaView&gt;<br/>);</span></pre><p id="42af" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">并且在<code class="du ko kp kq kr b">styles</code>对象中添加一个新的样式，如图所示:</p><pre class="kt ku kv kw fd le kr lf lg aw lh bi"><span id="2e28" class="li jm hi kr b fi lj lk l ll lm">icon: {<br/>  position: 'absolute',<br/>  alignItems: 'center',<br/>  alignSelf: 'center',<br/>  justifyContent: 'center',<br/>  top: '40%',<br/>},</span></pre><p id="b463" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">并按如下方式添加依赖项:</p><pre class="kt ku kv kw fd le kr lf lg aw lh bi"><span id="8783" class="li jm hi kr b fi lj lk l ll lm">import Icon from 'react-native-vector-icons/MaterialIcons';</span></pre><p id="2965" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">现在，我们可以打开设备的飞行模式并运行应用程序，它会显示一个<code class="du ko kp kq kr b">cloud-off</code>图标，而不是列表，如</p><figure class="kt ku kv kw fd kx er es paragraph-image"><div class="er es lq"><img src="../Images/7ca793dc21a2065fb9e16aba7cc894c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:642/format:webp/1*hxB-Ww2j_y_a8fzkE4Lqtg.png"/></div></figure><p id="75a0" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">到目前为止，我们已经实现了网络访问，但仍然有一个致命的问题，那就是总共显示20张照片，即使我们滚动到底部，也不会加载更多的照片。我们将在下一章添加分页。</p><h1 id="187b" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">添加分页</h1><p id="9ad3" class="pw-post-body-paragraph ii ij hi il b im kj io ip iq kk is it ji kl iw ix jj km ja jb jk kn je jf jg hb bi translated">让我们打开<code class="du ko kp kq kr b">List.tsx</code>并将以下代码行添加到<code class="du ko kp kq kr b">List</code>组件中</p><pre class="kt ku kv kw fd le kr lf lg aw lh bi"><span id="2780" class="li jm hi kr b fi lj lk l ll lm">const List = ({<br/>  data,<br/>  <strong class="kr hj">nextPage,</strong><br/>}: {<br/>  data: Array&lt;Photo&gt;;<br/>  <strong class="kr hj">nextPage: () =&gt; void;</strong><br/>}): JSX.Element =&gt; {<br/>  const renderItem = ({item}: {item: Photo}) =&gt; &lt;Item photo={item} /&gt;;<br/>  return (<br/>    &lt;FlatList<br/>      style={styles.container}<br/>      data={data}<br/>      numColumns={2}<br/>      renderItem={renderItem}<br/>      keyExtractor={(item: Photo) =&gt; item.id.toString()}<br/>      <strong class="kr hj">onEndReached={nextPage}</strong><br/>    /&gt;<br/>  );<br/>};</span></pre><p id="f834" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">我们给<code class="du ko kp kq kr b">List</code>组件的props添加了一个新参数<code class="du ko kp kq kr b">nextPage</code>，它是一个函数，并将这个<code class="du ko kp kq kr b">nextPage</code>函数设置为<code class="du ko kp kq kr b">FlatList</code>组件的<code class="du ko kp kq kr b">onEndReached</code>props。所以当用户滚动到列表底部时，这个函数就会被触发。</p><p id="2b58" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">然后让我们在<code class="du ko kp kq kr b">Home.tsx</code>中实现这个<code class="du ko kp kq kr b">nextPage</code>函数如下:</p><pre class="kt ku kv kw fd le kr lf lg aw lh bi"><span id="4a8b" class="li jm hi kr b fi lj lk l ll lm">const nextPage = () =&gt; {<br/>  const key = 'page';<br/>  if (data?.next_page) {<br/>    const page = decodeURIComponent(<br/>      data.next_page.replace(<br/>        new RegExp(<br/>          '^(?:.*[&amp;\\?]' +<br/>            encodeURIComponent(key).replace(/[\.\+\*]/g, '\\$&amp;') +<br/>            '(?:\\=([^&amp;]*))?)?.*$',<br/>          'i',<br/>        ),<br/>        '$1',<br/>      ),<br/>    );<br/>    fetchData('panda', parseInt(page, 10) || 0, 20);<br/>  }<br/>};</span></pre><p id="f974" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">正如我们看到的，我们从响应JSON中的<code class="du ko kp kq kr b">next_page</code>字段提取了<code class="du ko kp kq kr b">pageIndex</code>，并发送了另一个获取下一页数据的请求。</p><p id="b4cf" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">我们还需要修改<code class="du ko kp kq kr b">Home</code>组件和<code class="du ko kp kq kr b">fetchData</code>功能如下:</p><pre class="kt ku kv kw fd le kr lf lg aw lh bi"><span id="84c1" class="li jm hi kr b fi lj lk l ll lm">const Home = () =&gt; {<br/>  const [data, setData] = useState&lt;Data&gt;();<br/>  const [error, setError] = useState&lt;Error&gt;();<br/>  <strong class="kr hj">const requests = new Set();</strong><br/>  const fetchData = async (<br/>    query: string = 'panda',<br/>    pageIndex: number = 0,<br/>    perPage: number = 20,<br/>  ) =&gt; {<br/><strong class="kr hj">    const url = `https://api.pexels.com/v1/search?query=${query}&amp;page=${pageIndex}&amp;per_page=${perPage}`;<br/>    try {<br/>      if (requests.has(url)) {<br/>        return;<br/>      }<br/>      requests.add(url);<br/>      console.log(`fetch from: ${url}`);<br/></strong>      const response = await fetch(url, {<br/>        ......<br/>      });<br/>      const json = await response.json();<br/><strong class="kr hj">      const photos =<br/>        data &amp;&amp; data.photos ? data?.photos.concat(json.photos) : json.photos;<br/>      setData({...json, photos});<br/></strong>    } catch (error) {<br/>      setError(error);<br/>    <strong class="kr hj">} finally {<br/>      requests.delete(url);<br/>    }<br/></strong>  };<br/>......<br/>  const list =<br/>    data &amp;&amp; !!data.photos &amp;&amp; data.photos.length &gt; 0 ? (<br/>      &lt;List data={data.photos} <strong class="kr hj">nextPage={nextPage}</strong> /&gt;<br/>    ) : undefined;<br/>  };</span></pre><p id="041f" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">我们将<code class="du ko kp kq kr b">nextPage</code>函数作为道具传递给了<code class="du ko kp kq kr b">List</code>组件。</p><p id="8cef" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">如果当前列表中有一些照片，我们还会将新照片连接到当前照片列表中。</p><p id="d408" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">我们还添加了一个集合<code class="du ko kp kq kr b">requests</code>，用来记住哪些请求已经被发送，以避免发送重复的请求。</p><p id="206f" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">更新代码后，我们可以再次运行应用程序，向下滚动到列表的底部，然后它会加载下一页的照片，并将它们添加到列表中。</p><figure class="kt ku kv kw fd kx er es paragraph-image"><div class="er es lv"><img src="../Images/51c2d461a39ffbede10015fcc3eacdc9.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/1*6rxGN6PbMc4Mw7-dspaz7Q.gif"/></div></figure><p id="7b7d" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">我们已经建立了一个图像应用程序，它从后端API获取照片，并支持分页。但是它能够获取<code class="du ko kp kq kr b">panda</code>图片只是因为我们硬编码了查询关键字。让我们添加一个新组件，用户可以使用它输入查询关键字。</p><h1 id="7a2c" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">添加搜索栏</h1><p id="2e80" class="pw-post-body-paragraph ii ij hi il b im kj io ip iq kk is it ji kl iw ix jj km ja jb jk kn je jf jg hb bi translated">在本章中，我们将添加一个搜索栏，用户可以通过它输入关键字来查询图像。但是我们不打算在<a class="ae jh" href="https://reactnativeelements.com/docs/searchbar/" rel="noopener ugc nofollow" target="_blank"> react native elements </a>中使用<code class="du ko kp kq kr b">SearchBar</code>，因为它会在每次用户继续输入时被触发。但是在我们的场景中，我们需要它只在用户点击搜索按钮时被触发。</p><p id="68e6" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">因此，我们将通过运行如下所示的命令引入一个名为<code class="du ko kp kq kr b">react-native-search-bar</code>的包:</p><pre class="kt ku kv kw fd le kr lf lg aw lh bi"><span id="e48d" class="li jm hi kr b fi lj lk l ll lm">yarn add react-native-search-bar</span></pre><p id="57d0" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">然后跑</p><pre class="kt ku kv kw fd le kr lf lg aw lh bi"><span id="ba44" class="li jm hi kr b fi lj lk l ll lm">cd ios/; pod install; cd ..</span></pre><p id="1ee0" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">并使用<code class="du ko kp kq kr b">Xcode</code>重新构建应用程序，因为搜索栏需要一些原生依赖项。</p><p id="ecd9" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">我们需要在主文件夹中创建一个新文件<code class="du ko kp kq kr b">Search.tsx</code>，并实现<code class="du ko kp kq kr b">Search</code>组件，如下所示:</p><pre class="kt ku kv kw fd le kr lf lg aw lh bi"><span id="5d2e" class="li jm hi kr b fi lj lk l ll lm">import React from 'react';<br/>import SearchBar from 'react-native-search-bar';</span><span id="bfd5" class="li jm hi kr b fi lt lk l ll lm">const Search = ({<br/>  onSearch,<br/>}: {<br/>    onSearch: (query: string) =&gt; void;<br/>}): JSX.Element =&gt; {<br/>  return (<br/>    &lt;SearchBar placeholder={'Type Here...'} onSearchButtonPress={onSearch} /&gt;<br/>  );<br/>};<br/>export default Search;<br/></span></pre><p id="dbc2" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">而<code class="du ko kp kq kr b">Search</code>组件有props，<code class="du ko kp kq kr b">onSearch</code>，当用户键入一个关键字并开始搜索时会被触发。</p><p id="1b7d" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">然后让我们将<code class="du ko kp kq kr b">Home</code>组件更新如下:</p><pre class="kt ku kv kw fd le kr lf lg aw lh bi"><span id="3a02" class="li jm hi kr b fi lj lk l ll lm">import React, {useState, useEffect} from 'react';<br/>import {StyleSheet, StatusBar, SafeAreaView, Text} from 'react-native';<br/>import List from './List';<br/>import Search from './Search';</span><span id="ab0c" class="li jm hi kr b fi lt lk l ll lm">const Home = () =&gt; {<br/>  const [data, setData] = useState&lt;Data&gt;();<br/>  const [error, setError] = useState&lt;Error&gt;();<br/>  <strong class="kr hj">const [keyword, setKeyword] = useState&lt;string&gt;();</strong><br/>  const requests = new Set();<br/>  const fetchData = async (<br/>    <strong class="kr hj">query: string = '',</strong><br/>    pageIndex: number = 0,<br/>    perPage: number = 20,<br/>  ) =&gt; {<br/>    ......</span><span id="ec60" class="li jm hi kr b fi lt lk l ll lm">  const nextPage = () =&gt; {<br/>    ......<br/>      fetchData(<strong class="kr hj">keyword</strong>, parseInt(page, 10) || 0, 20);<br/>    }<br/>  };</span><span id="a354" class="li jm hi kr b fi lt lk l ll lm"><strong class="kr hj">  const onSearch = (query: string) =&gt; {<br/>    setKeyword(query);<br/>    setData(undefined);<br/>  };<br/><br/>  </strong>useEffect(() =&gt; {<br/><strong class="kr hj">    if (keyword) {<br/>      (async () =&gt; await fetchData(keyword, 0, 20))();<br/>    }<br/>  }, [keyword]);<br/>  ......<br/>  const search = &lt;Search onSearch={onSearch} /&gt;;</strong></span><span id="471b" class="li jm hi kr b fi lt lk l ll lm">  return (<br/><strong class="kr hj">    &lt;SafeAreaView style={styles.container}&gt;<br/>      {search}<br/>      {list}<br/>      {icon}<br/>    &lt;/SafeAreaView&gt;<br/></strong>  );<br/>};<br/>......</span></pre><p id="4f6d" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">不要忘记添加<code class="du ko kp kq kr b">Search</code>组件的导入。</p><p id="8a8b" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">正如我们看到的，我们为关键字更改添加了一个新的钩子<code class="du ko kp kq kr b">useState</code>。我们还增加了一个新的功能<code class="du ko kp kq kr b">onSearch</code>，它将设置<code class="du ko kp kq kr b">keyword</code>，并清除当前的<code class="du ko kp kq kr b">data</code>，当前的图像列表。我们也使用<code class="du ko kp kq kr b">useEffect</code>来监控<code class="du ko kp kq kr b">keyword</code>的变化。一旦<code class="du ko kp kq kr b">keyword</code>改变，我们将使用新的关键字调用<code class="du ko kp kq kr b">fetchData</code>。而且我们还在<code class="du ko kp kq kr b">fetchData</code>函数和<code class="du ko kp kq kr b">nextPage</code>函数内部做了一些修改，让它们使用关键字作为查询字符串。</p><p id="4593" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">现在让我们运行应用程序，您会看到如下内容:</p><figure class="kt ku kv kw fd kx er es paragraph-image"><div class="er es lq"><img src="../Images/e185c94226e1928aeaa28a2fd0471c15.png" data-original-src="https://miro.medium.com/v2/resize:fit:642/1*xXHKTkgP0RjVl-gaO4cgWg.gif"/></div></figure><p id="d07c" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">到目前为止一切顺利，我们已经实现了图像浏览应用程序的大部分功能。在下一章中，我们将添加一个详细页面来显示单张照片的详细信息。我们将学习如何用<code class="du ko kp kq kr b"><a class="ae jh" href="https://reactnavigation.org/" rel="noopener ugc nofollow" target="_blank">react-navigation</a></code>实现导航。</p><h1 id="0841" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">导航至详细页面</h1><blockquote class="if ig ih"><p id="54ff" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">通过react-navigation，我们可以轻松地为您的react原生应用程序实现路由和导航。(【https://reactnavigation.org/】T21)</p></blockquote><p id="c692" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">在本章中，我们将添加另一个页面来显示单个图像的细节，用户可以通过从主页上的列表中选择一个项目来导航到细节页面。</p><p id="5126" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">首先，我们需要通过运行以下命令来添加一些包:</p><pre class="kt ku kv kw fd le kr lf lg aw lh bi"><span id="9471" class="li jm hi kr b fi lj lk l ll lm">yarn add <a class="ae jh" href="http://twitter.com/react" rel="noopener ugc nofollow" target="_blank">@react</a>-navigation/native</span><span id="8315" class="li jm hi kr b fi lt lk l ll lm">yarn add react-native-reanimated react-native-gesture-handler react-native-screens react-native-safe-area-context <a class="ae jh" href="http://twitter.com/react" rel="noopener ugc nofollow" target="_blank">@react</a>-native-community/masked-view</span><span id="b7d4" class="li jm hi kr b fi lt lk l ll lm">yarn add <a class="ae jh" href="http://twitter.com/react" rel="noopener ugc nofollow" target="_blank">@react</a>-navigation/stack</span></pre><p id="b2ff" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">如我们所见，有很多依赖。</p><p id="90eb" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">我们也需要跑步</p><pre class="kt ku kv kw fd le kr lf lg aw lh bi"><span id="3a25" class="li jm hi kr b fi lj lk l ll lm">cd ios/; pod install; cd ..</span></pre><p id="6835" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">因为有些iOS pods是必须的。</p><p id="74e4" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">我们会看到如下消息</p><figure class="kt ku kv kw fd kx er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es lw"><img src="../Images/be3ec361c5ba71a4e598ebf7182a8124.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yqliJUWKv6msH2qAb-QPAw.png"/></div></div></figure><p id="1ebf" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">并用<code class="du ko kp kq kr b">Xcode</code>重新构建App。</p><p id="903a" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">然后让我们创建一个新的组件，<code class="du ko kp kq kr b">Detail</code>。</p><p id="5e87" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">放弃项目的整洁，让我们在<code class="du ko kp kq kr b">src</code>中创建一个新文件夹<code class="du ko kp kq kr b">detail</code>，并在其中创建一个新的源文件<code class="du ko kp kq kr b">Detail.tsx</code>，并将以下代码放入该文件中:</p><pre class="kt ku kv kw fd le kr lf lg aw lh bi"><span id="7e5b" class="li jm hi kr b fi lj lk l ll lm">import React, {useEffect} from 'react';<br/>import {StyleSheet, StatusBar, Text, Dimensions, Image} from 'react-native';<br/>import {SafeAreaView} from 'react-native-safe-area-context';<br/>const deviceWidth = Dimensions.get('window').width;</span><span id="26ed" class="li jm hi kr b fi lt lk l ll lm">const Detail = ({<br/>  navigation,<br/>  route,<br/>}: {<br/>  navigation: any;<br/>  route: any;<br/>}): JSX.Element =&gt; {<br/>  const {photo}: {photo: Photo} = route.params;<br/><br/>  styles.image = {<br/>    ...styles.image,<br/>    height: (styles.image.width * photo.height) / photo.width,<br/>  };</span><span id="eee7" class="li jm hi kr b fi lt lk l ll lm">  useEffect(() =&gt; navigation.setOptions({title: photo.id}));</span><span id="edd7" class="li jm hi kr b fi lt lk l ll lm">  return (<br/>    &lt;SafeAreaView style={styles.container}&gt;<br/>      &lt;Image<br/>        style={styles.image}<br/>        resizeMode={'contain'}<br/>        source={{uri: photo.src.medium}}<br/>      /&gt;<br/>      &lt;Text style={styles.text}&gt;{photo.photographer}&lt;/Text&gt;<br/>      &lt;Text style={styles.text}&gt;{photo.photographer_url}&lt;/Text&gt;<br/>      &lt;Text style={styles.text}&gt;{`${photo.width} * ${photo.height}`}<br/>      &lt;/Text&gt;<br/>    &lt;/SafeAreaView&gt;<br/>  );<br/>};</span><span id="a5d0" class="li jm hi kr b fi lt lk l ll lm">const styles = StyleSheet.create({<br/>  container: {<br/>    flex: 1,<br/>    paddingTop: StatusBar.currentHeight || 0 + 0,<br/>    marginHorizontal: 0,<br/>    alignSelf: 'center',<br/>  },<br/>  image: {<br/>    backgroundColor: 'transparent',<br/>    margin: 24,<br/>    width: deviceWidth * 0.8,<br/>    height: 200,<br/>  },<br/>  text: {<br/>    backgroundColor: 'transparent',<br/>    margin: 8,<br/>    width: deviceWidth * 0.8,<br/>  },<br/>});</span><span id="6df0" class="li jm hi kr b fi lt lk l ll lm">export default Detail;<br/></span></pre><p id="a836" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">这个组件非常简单，只有一个<code class="du ko kp kq kr b">Image</code>视图和几个<code class="du ko kp kq kr b">Text</code>视图来显示图像的细节。但是有两个问题需要解决，一个是它有一个属性，<code class="du ko kp kq kr b">navigation</code>，因为我们需要用下面的代码更新详细页面的标题</p><pre class="kt ku kv kw fd le kr lf lg aw lh bi"><span id="1a6d" class="li jm hi kr b fi lj lk l ll lm">useEffect(() =&gt; navigation.setOptions({title: photo.id}));</span></pre><p id="dead" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">正如我们所看到的，屏幕的标题将通过参数<code class="du ko kp kq kr b">title</code>用<code class="du ko kp kq kr b">navigation.setOptions</code>更新。</p><p id="4182" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">另一个问题是，我们在渲染图像之前动态地改变了<code class="du ko kp kq kr b">Image</code>视图的<code class="du ko kp kq kr b">height</code>，因为照片的高度可能不同。</p><p id="70e6" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">然后我们需要建立导航栈。让我们打开<code class="du ko kp kq kr b">App.tsx</code>，添加以下代码</p><pre class="kt ku kv kw fd le kr lf lg aw lh bi"><span id="d896" class="li jm hi kr b fi lj lk l ll lm">import 'react-native-gesture-handler';<br/>import {NavigationContainer} from '@react-navigation/native';<br/>import {createStackNavigator} from '@react-navigation/stack';<br/>import Detail from './detail/Detail';</span></pre><p id="a658" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">并创建新的堆栈导航器</p><pre class="kt ku kv kw fd le kr lf lg aw lh bi"><span id="f96d" class="li jm hi kr b fi lj lk l ll lm">const Stack = createStackNavigator();</span></pre><p id="784d" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">把这些纸叠成一叠，就像</p><pre class="kt ku kv kw fd le kr lf lg aw lh bi"><span id="7fbc" class="li jm hi kr b fi lj lk l ll lm">const App = () =&gt; {<br/>  return (<br/>    &lt;NavigationContainer&gt;<br/>      &lt;SafeAreaProvider&gt;<br/>        &lt;Stack.Navigator initialRouteName={'Home'}&gt;<br/>          &lt;Stack.Screen<br/>            name={'Home'}<br/>            component={Home}<br/>            options={{title: 'Overview'}}<br/>          /&gt;<br/>          &lt;Stack.Screen name={'Detail'} component={Detail} /&gt;<br/>        &lt;/Stack.Navigator&gt;<br/>      &lt;/SafeAreaProvider&gt;<br/>    &lt;/NavigationContainer&gt;<br/>  );<br/>};</span></pre><p id="23e7" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">正如我们看到的，在这个导航堆栈中，我们有两个屏幕/页面，<code class="du ko kp kq kr b">Home</code>和<code class="du ko kp kq kr b">Detail</code>。让我们实现这两个屏幕之间的导航。</p><p id="b67a" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">让我们打开<code class="du ko kp kq kr b">Home.tsx</code>并将参数<code class="du ko kp kq kr b">navigation</code>添加到<code class="du ko kp kq kr b">Home</code>组件中，如下所示</p><pre class="kt ku kv kw fd le kr lf lg aw lh bi"><span id="7b18" class="li jm hi kr b fi lj lk l ll lm">const Home = ({<strong class="kr hj">navigation</strong>}) =&gt; {</span></pre><p id="928e" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">并将这个<code class="du ko kp kq kr b">navigation</code>实例传递给<code class="du ko kp kq kr b">List</code>，如下所示:</p><pre class="kt ku kv kw fd le kr lf lg aw lh bi"><span id="f451" class="li jm hi kr b fi lj lk l ll lm">const list =<br/>  data &amp;&amp; !!data.photos &amp;&amp; data.photos.length &gt; 0 ? (<br/>    &lt;List data={data.photos} nextPage={nextPage} <strong class="kr hj">navigation={navigation}</strong> /&gt;<br/>  ) : undefined;</span></pre><p id="3bc1" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">然后打开<code class="du ko kp kq kr b">List.tsx</code>更新<code class="du ko kp kq kr b">List</code>组件，如图所示:</p><pre class="kt ku kv kw fd le kr lf lg aw lh bi"><span id="f266" class="li jm hi kr b fi lj lk l ll lm">const List = ({<br/>  data,<br/>  nextPage,<br/>  <strong class="kr hj">navigation</strong>,<br/>}: {<br/>  data: Array&lt;Photo&gt;;<br/>  nextPage: () =&gt; void;<br/>  <strong class="kr hj">navigation: any;</strong><br/>}): JSX.Element =&gt; {</span></pre><p id="ee34" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">正如我们所看到的，我们向<code class="du ko kp kq kr b">List</code>组件添加了一个参数<code class="du ko kp kq kr b">navigation</code>。</p><p id="b166" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">我们还需要将这个<code class="du ko kp kq kr b">navigation</code>实例传递给<code class="du ko kp kq kr b">Item</code>，方法是将<code class="du ko kp kq kr b">renderItem</code>函数更新为</p><pre class="kt ku kv kw fd le kr lf lg aw lh bi"><span id="7c22" class="li jm hi kr b fi lj lk l ll lm">const renderItem = ({item}: {item: Photo}) =&gt; (<br/>  &lt;Item photo={item}<strong class="kr hj"> navigation={navigation}</strong> /&gt;<br/>);</span></pre><p id="99d7" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">让我们也更新一下<code class="du ko kp kq kr b">Item</code>组件。打开<code class="du ko kp kq kr b">Item.tsx</code>并将参数<code class="du ko kp kq kr b">navigation</code>添加到<code class="du ko kp kq kr b">Item</code>组件，如下所示</p><pre class="kt ku kv kw fd le kr lf lg aw lh bi"><span id="be73" class="li jm hi kr b fi lj lk l ll lm">const Item = ({<br/>  photo,<br/>  <strong class="kr hj">navigation,</strong><br/>}: {<br/>  photo: Photo;<br/>  <strong class="kr hj">navigation: any;</strong><br/>}): JSX.Element =&gt; {</span></pre><p id="2928" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">并在<code class="du ko kp kq kr b">Item</code>组件中创建一个导航功能</p><pre class="kt ku kv kw fd le kr lf lg aw lh bi"><span id="e6ad" class="li jm hi kr b fi lj lk l ll lm">const navigate = () =&gt; navigation.navigate('Detail', {photo});</span></pre><p id="b53d" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">这意味着通过参数<code class="du ko kp kq kr b">photo</code>导航到<code class="du ko kp kq kr b">Detail</code>屏幕。</p><p id="6fc9" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">我们还需要用一个<code class="du ko kp kq kr b">TouchableOpacity</code>包裹<code class="du ko kp kq kr b">Image</code>组件，使其可触摸，如下所示:</p><pre class="kt ku kv kw fd le kr lf lg aw lh bi"><span id="8a53" class="li jm hi kr b fi lj lk l ll lm"><strong class="kr hj">&lt;TouchableOpacity style={styles.container} onPress={navigate}&gt;</strong><br/>  &lt;Image<br/>    style={styles.item}<br/>    resizeMode={'cover'}<br/>    source={{uri: photo.src.medium}}<br/>  /&gt;<br/><strong class="kr hj">&lt;/TouchableOpacity&gt;</strong></span></pre><p id="0753" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">然后，当用户点击此项时，会触发<code class="du ko kp kq kr b">navigate</code>功能。</p><p id="90e3" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">您可能需要添加必要的依赖项，如<code class="du ko kp kq kr b">TouchableOpacity</code>。</p><p id="8282" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">然后，让我们运行应用程序，并尝试像这样导航:</p><figure class="kt ku kv kw fd kx er es paragraph-image"><div class="er es lq"><img src="../Images/6a7d8e9cddb61b4c3bb822b5f05a95ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:642/1*dwbolESPA4gGLwYeoPWRQQ.gif"/></div></figure><p id="7411" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">到目前为止，我们已经完成了作为图片浏览应用程序的所有基本功能。但是您会注意到仍然有一些缺陷，比如它不支持本地存储，并且它不使用Redux作为中央状态存储。我们将在另一个教程中改进这个应用程序。</p><p id="1f1f" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">如果你对如何用Redux实现这个应用的全局状态存储感兴趣，请看看</p><div class="lx ly ez fb lz ma"><a href="https://kxie0124.medium.com/build-an-image-browsing-app-with-react-native-2-redux-68f2d7a6744f" rel="noopener follow" target="_blank"><div class="mb ab dw"><div class="mc ab md cl cj me"><h2 class="bd hj fi z dy mf ea eb mg ed ef hh bi translated">使用React Native(2)-Redux构建图片浏览应用程序</h2><div class="mh l"><h3 class="bd b fi z dy mf ea eb mg ed ef dx translated">React Native为iOS和Android带来了React的声明式UI框架。使用React Native，您可以使用本机UI控件…</h3></div><div class="mi l"><p class="bd b fp z dy mf ea eb mg ed ef dx translated">kxie0124.medium.com</p></div></div></div></a></div><p id="81f8" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ji iv iw ix jj iz ja jb jk jd je jf jg hb bi translated">感谢浏览本教程，并欢迎任何意见。</p></div></div>    
</body>
</html>