<html>
<head>
<title>Paypal Integration in Node.JS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Paypal在Node中的集成。射流研究…</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/paypal-integration-in-node-js-e47bd8de4afb?source=collection_archive---------1-----------------------#2022-08-23">https://medium.com/geekculture/paypal-integration-in-node-js-e47bd8de4afb?source=collection_archive---------1-----------------------#2022-08-23</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/2e536d23ce448047db7563cfd936269c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PhvFEeK_Z92a_U0gQgN4rQ.png"/></div></div></figure><p id="82a9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你好，朋友们，我祝你们身体健康，永远成功。这次我们仍然在讨论如何整合Paypal，但我们将使用Node.jS来实现它。</p><p id="e943" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Paypal是一种国际支付方式，适用于大多数支持在线转账的国家。Paypal提供了一种更快捷、更安全的转账方式。由于其受欢迎程度，大多数电子商务企业使用贝宝向客户收款。</p><p id="b72c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在本文中，我们将Paypal支付网关集成到node.JS中。这是一个电子商务网站，有助于使用Laravel框架作为后端技术。我们将从开始一步一步地经历它。</p><p id="0498" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">请遵循以下步骤:</p><ol class=""><li id="0f69" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated">创建新项目</li><li id="4606" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">使用npm为Paypal支付网关安装软件包</li><li id="4671" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">创建PayPal凭据。基金账户</li><li id="9297" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">创建JS文件</li><li id="c361" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">签出视图</li><li id="83fd" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">支付处理人员</li><li id="4d1c" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">运行应用程序</li></ol><p id="8864" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下面我们只讨论教程。也可以在这里阅读其他教程:</p><p id="4245" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae kc" href="https://temanngoding.com/en/paypal-payment-gateway-integration-with-laravel/" rel="noopener ugc nofollow" target="_blank"> Paypal支付网关与Laravel的集成</a></p><p id="d674" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae kc" href="https://temanngoding.com/en/error-handling-in-laravel/" rel="noopener ugc nofollow" target="_blank">Laravel中的错误处理</a></p><p id="1ca9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae kc" href="https://temanngoding.com/en/creating-ratings-and-reviews-with-laravel/" rel="noopener ugc nofollow" target="_blank">用Laravel创建评分和评论</a></p><h1 id="7170" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">1.创建新项目</h1><p id="e6de" class="pw-post-body-paragraph iq ir hi is b it lb iv iw ix lc iz ja jb ld jd je jf le jh ji jj lf jl jm jn hb bi translated">使用下面的命令创建一个新项目。</p><pre class="lg lh li lj fd lk ll lm ln aw lo bi"><span id="5726" class="lp ke hi ll b fi lq lr l ls lt">$ mkdir paynode<br/>$ cd paynode<br/>$ npm install<br/>$ npm init</span></pre><p id="92e5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">npm init命令将package.json文件添加到我们的paywave目录中，使其成为Node.js应用程序。</p><h1 id="285f" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">2.使用npm为Paypal支付网关安装软件包</h1><p id="e59f" class="pw-post-body-paragraph iq ir hi is b it lb iv iw ix lc iz ja jb ld jd je jf le jh ji jj lf jl jm jn hb bi translated">运行下面的命令将express和paypal-rest-sdk安装到我们的项目中。</p><pre class="lg lh li lj fd lk ll lm ln aw lo bi"><span id="6b83" class="lp ke hi ll b fi lq lr l ls lt">$ npm i express<br/>$ npm i paypal-rest-sdk</span></pre><h1 id="43f7" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">3.创建PayPal凭据</h1><p id="e875" class="pw-post-body-paragraph iq ir hi is b it lb iv iw ix lc iz ja jb ld jd je jf le jh ji jj lf jl jm jn hb bi translated">安装paypal包后，我们需要paypal集成的client_id和secret_key，因此我们需要进入paypal开发者模式，并为其创建新的沙盒帐户。登录paypal后，您需要获得如下所示的客户端id和密钥。在获得客户端id和密钥之前，我们需要创建应用程序。所以，检查下面的截图，建立一个应用程序。登录<a class="ae kc" href="https://www.paypal.com/signin?returnUri=https%3A%2F%2Fdeveloper.paypal.com%2Fdeveloper%2Fapplications" rel="noopener ugc nofollow" target="_blank">开发者仪表板</a>。</p><p id="486d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">单击创建应用程序。</p><figure class="lg lh li lj fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lu"><img src="../Images/d25eff4594a61589925d647d7569af3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*4qPd7sv5YvoCbRUf"/></div></div></figure><p id="6710" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">填写创建的应用程序的名称。</p><figure class="lg lh li lj fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lv"><img src="../Images/6612798f5194175e6e128f072e736dce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*vKwc-kPCITMu7AHY"/></div></div></figure><p id="b39a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后，您将获得将在应用程序中使用的客户端密钥和秘密密钥。</p><figure class="lg lh li lj fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lw"><img src="../Images/3c39f84b9ba15c32fe0fff13496b2cb7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Bp6PbQT5yz43rK6L"/></div></div></figure><h1 id="decf" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">4.创建JS文件</h1><ul class=""><li id="04f7" class="jo jp hi is b it lb ix lc jb lx jf ly jj lz jn ma ju jv jw bi translated">在paynode目录中，创建一个名为index.js的新文件</li><li id="7281" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn ma ju jv jw bi translated">将以下代码添加到上面创建的index.js文件中。</li></ul><pre class="lg lh li lj fd lk ll lm ln aw lo bi"><span id="241c" class="lp ke hi ll b fi lq lr l ls lt">const express = require('express');<br/>const paypal = require('paypal-rest-sdk');</span><span id="a1b4" class="lp ke hi ll b fi mb lr l ls lt">paypal.configure({<br/>  'mode': 'sandbox', //sandbox or live<br/>  'client_id': '####yourclientid######',<br/>  'client_secret': '####yourclientsecret#####'<br/>});</span><span id="b46c" class="lp ke hi ll b fi mb lr l ls lt">const app = express();</span><span id="0800" class="lp ke hi ll b fi mb lr l ls lt">app.get('/', (req, res) =&gt; res.sendFile(__dirname + "/index.html"));<br/></span><span id="fcb7" class="lp ke hi ll b fi mb lr l ls lt">app.listen(PORT, () =&gt; console.log(`Server Started on ${PORT}`));</span></pre><ul class=""><li id="bf40" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn ma ju jv jw bi translated">使用paypal调整client_id和client_screet。</li></ul><h1 id="df3d" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">5.签出视图</h1><ul class=""><li id="a26d" class="jo jp hi is b it lb ix lc jb lx jf ly jj lz jn ma ju jv jw bi translated">在paynode目录中，创建一个名为index.html的文件。</li><li id="6903" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn ma ju jv jw bi translated">将下面的代码片段添加到index.html。</li></ul><pre class="lg lh li lj fd lk ll lm ln aw lo bi"><span id="95f7" class="lp ke hi ll b fi lq lr l ls lt">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>&lt;head&gt;<br/>  &lt;meta charset="UTF-8"&gt;<br/>  &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;<br/>  &lt;meta http-equiv="X-UA-Compatible" content="ie=edge"&gt;<br/>  &lt;title&gt;PayPal Node App&lt;/title&gt;<br/>&lt;/head&gt;<br/>&lt;body&gt;<br/>  &lt;h1&gt; Shoes &lt;/h1&gt;<br/>  &lt;h2&gt;Buy For $25&lt;/h2&gt;<br/>  &lt;form action="/pay" method="post"&gt;<br/>    &lt;input type="submit" value="Buy"&gt;<br/>  &lt;/form&gt;<br/>&lt;/body&gt;<br/>&lt;/html&gt;</span></pre><ul class=""><li id="fe78" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn ma ju jv jw bi translated">在html代码中，我们只是添加了将用于结帐的路线。</li></ul><h1 id="3045" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">6.支付处理人员</h1><p id="15f2" class="pw-post-body-paragraph iq ir hi is b it lb iv iw ix lc iz ja jb ld jd je jf le jh ji jj lf jl jm jn hb bi translated">将以下代码添加到index.js文件中。</p><pre class="lg lh li lj fd lk ll lm ln aw lo bi"><span id="77eb" class="lp ke hi ll b fi lq lr l ls lt">app.post('/pay', (req, res) =&gt; {<br/>    const create_payment_json = {<br/>      "intent": "sale",<br/>      "payer": {<br/>          "payment_method": "paypal"<br/>      },<br/>      "redirect_urls": {<br/>          "return_url": "http://localhost:3000/success",<br/>          "cancel_url": "http://localhost:3000/cancel"<br/>      },<br/>      "transactions": [{<br/>          "item_list": {<br/>              "items": [{<br/>                  "name": "Red Sox Hat",<br/>                  "sku": "001",<br/>                  "price": "25.00",<br/>                  "currency": "USD",<br/>                  "quantity": 1<br/>              }]<br/>          },<br/>          "amount": {<br/>              "currency": "USD",<br/>              "total": "25.00"<br/>          },<br/>          "description": "Hat for the best team ever"<br/>      }]<br/>  };</span><span id="63c1" class="lp ke hi ll b fi mb lr l ls lt">  app.get('/success', (req, res) =&gt; {<br/>    const payerId = req.query.PayerID;<br/>    const paymentId = req.query.paymentId;<br/>  <br/>    const execute_payment_json = {<br/>      "payer_id": payerId,<br/>      "transactions": [{<br/>          "amount": {<br/>              "currency": "USD",<br/>              "total": "25.00"<br/>          }<br/>      }]<br/>    };<br/>  <br/>    paypal.payment.execute(paymentId, execute_payment_json, function (error, payment) {<br/>      if (error) {<br/>          console.log(error.response);<br/>          throw error;<br/>      } else {<br/>          console.log(JSON.stringify(payment));<br/>          res.send('Success');<br/>      }<br/>  });<br/>  });</span><span id="645d" class="lp ke hi ll b fi mb lr l ls lt">    paypal.payment.create(create_payment_json, function (error, payment) {<br/>        if (error) {<br/>            throw error;<br/>        } else {<br/>            for(let i = 0;i &lt; payment.links.length;i++){<br/>              if(payment.links[i].rel === 'approval_url'){<br/>                res.redirect(payment.links[i].href);<br/>              }<br/>            }<br/>        }<br/>      });<br/>      <br/>      });</span><span id="df4f" class="lp ke hi ll b fi mb lr l ls lt">  app.get('/cancel', (req, res) =&gt; res.send('Cancelled'));</span></pre><h1 id="e5de" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">7.运行应用程序</h1><p id="30c0" class="pw-post-body-paragraph iq ir hi is b it lb iv iw ix lc iz ja jb ld jd je jf le jh ji jj lf jl jm jn hb bi translated">在您的目录中编写代码节点index.js。</p><figure class="lg lh li lj fd ij er es paragraph-image"><div class="er es mc"><img src="../Images/54123eadd9a445f6ae6427e070bcbde0.png" data-original-src="https://miro.medium.com/v2/resize:fit:754/0*WIdU95SQHio8lyBD"/></div></figure><ul class=""><li id="1eab" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn ma ju jv jw bi translated">在浏览器中运行您的应用程序，结果如下所示。</li></ul><figure class="lg lh li lj fd ij er es paragraph-image"><div class="er es md"><img src="../Images/53840857ac58fb99da5e327ddcb7599e.png" data-original-src="https://miro.medium.com/v2/resize:fit:590/0*mRViK2v7JwOe8_jx"/></div></figure><ul class=""><li id="59f0" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn ma ju jv jw bi translated">结账流程</li></ul><figure class="lg lh li lj fd ij er es paragraph-image"><div class="er es me"><img src="../Images/2c0420ea720f8e67deee1a9eaf546e00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1162/0*kBG8nxbtZTDpeGSx"/></div></figure><p id="1396" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您已经能够创建一个简单的应用程序，在Node.JS中集成Paypal。</p><p id="b8d7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这就是我这次可以传达的教程，希望有用。</p><p id="1875" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">谢了。</p></div></div>    
</body>
</html>