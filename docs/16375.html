<html>
<head>
<title>Create your first map using GeoPandas!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用GeoPandas创建您的第一张地图！</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/create-your-first-map-using-geopandas-dace55a65da3?source=collection_archive---------7-----------------------#2022-12-24">https://medium.com/geekculture/create-your-first-map-using-geopandas-dace55a65da3?source=collection_archive---------7-----------------------#2022-12-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/fd81e8098fa1434411694b04aece313b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*9k2nrDgCKPFfaf_1"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Photo by <a class="ae iu" href="https://unsplash.com/@calvinhanson?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Calvin Hanson</a> on <a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="db5f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">本文将讨论使用python处理和可视化 <strong class="ix hj">地理空间数据的不同方法。</strong></p><h2 id="d019" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated"><strong class="ak">读取地理空间数据</strong></h2><p id="d1bc" class="pw-post-body-paragraph iv iw hi ix b iy ko ja jb jc kp je jf jg kq ji jj jk kr jm jn jo ks jq jr js hb bi translated">第一步是读取一些<strong class="ix hj">地理空间数据</strong>！为此，我们将使用<a class="ae iu" href="http://geopandas.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="ix hj"> GeoPandas </strong> </a>库。<strong class="ix hj">不同的地理空间文件格式</strong>有很多，比如<a class="ae iu" href="https://en.wikipedia.org/wiki/Shapefile" rel="noopener ugc nofollow" target="_blank"><strong class="ix hj">shape file</strong></a><strong class="ix hj">，</strong><a class="ae iu" href="https://en.wikipedia.org/wiki/GeoJSON" rel="noopener ugc nofollow" target="_blank"><strong class="ix hj">geo JSON</strong></a><strong class="ix hj">，</strong> <a class="ae iu" href="https://en.wikipedia.org/wiki/Keyhole_Markup_Language" rel="noopener ugc nofollow" target="_blank"> <strong class="ix hj"> KML </strong> </a>，以及<a class="ae iu" href="https://en.wikipedia.org/wiki/GeoPackage" rel="noopener ugc nofollow" target="_blank"> <strong class="ix hj"> GPKG </strong> </a>。这里可能没有全部实践，但是我们知道一些细节，例如:</p><ul class=""><li id="d06a" class="kt ku hi ix b iy iz jc jd jg kv jk kw jo kx js ky kz la lb bi translated"><strong class="ix hj"> shapefile </strong>是最常见的文件类型，并且</li><li id="a52f" class="kt ku hi ix b iy lc jc ld jg le jk lf jo lg js ky kz la lb bi translated">所有这些文件类型都可以通过<code class="du lh li lj lk b"><strong class="ix hj">gpd.read_file()</strong></code>功能快速加载</li></ul><p id="030d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们试着在<strong class="ix hj">的一些代码</strong>中了解幕后发生的事情。使用的<a class="ae iu" href="https://www.kaggle.com/datasets/kiva/data-science-for-good-kiva-crowdfunding" rel="noopener ugc nofollow" target="_blank"> <strong class="ix hj">数据集</strong> </a>是<a class="ae iu" href="https://www.kiva.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="ix hj"> KIVA </strong> </a> <strong class="ix hj">在线众筹</strong>平台，将金融服务延伸到全球的穷人。首先，让我们<strong class="ix hj">加载数据(world_loans)并检查</strong>整体看起来如何。</p><pre class="ll lm ln lo fd lp lk lq bn lr ls bi"><span id="4ea0" class="lt ju hi lk b be lu lv l lw lx">import geopandas as gpd<br/>loans_filepath = "kiva_loans.shp"<br/><br/># Your code here: Load the data<br/>world_loans = gpd.read_file(loans_filepath)<br/><br/># Uncomment to view the first five rows of the data<br/>world_loans.head()</span></pre><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ly"><img src="../Images/aeec76d1ce88803a6af3fa7ca078054a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K_HnQpg_iiRQoMCtpIy9bw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">The kiva_loans file in the form of GeoPandas data frame (world_loans) (Kaggle image)</figcaption></figure><p id="53bc" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在本节中，我们在<strong class="ix hj"> GeoPandas </strong>库中有各种<strong class="ix hj">地理空间类型的数据集</strong>。创建包含国家边界的地理数据框<strong class="ix hj">世界</strong>。</p><pre class="ll lm ln lo fd lp lk lq bn lr ls bi"><span id="13af" class="lt ju hi lk b be lu lv l lw lx">world_filepath = gpd.datasets.get_path('naturalearth_lowres')<br/>world = gpd.read_file(world_filepath)<br/>world.head()</span></pre><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lz"><img src="../Images/54f64cfe1f4c395613768f9e6fe0a98c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lmxBtDy9eDNtjanOTWhdww.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">First 5 rows of Geo data frame <strong class="bd jv">world </strong>(Kaggle Image)</figcaption></figure><p id="4a94" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> world </strong>和<strong class="ix hj"> world_loans </strong>地理数据框用于可视化世界各地的<strong class="ix hj"> Kiva贷款位置</strong>。</p><pre class="ll lm ln lo fd lp lk lq bn lr ls bi"><span id="dca8" class="lt ju hi lk b be lu lv l lw lx">ax = world.plot(figsize=(20,20), color='whitesmoke', linestyle=':', <br/>                edgecolor='black')<br/>world_loans.plot(ax=ax, markersize=2)</span></pre><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ma"><img src="../Images/b9d3398cb2b6a00ad0894d19b72f0f5e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0Nqv_pvupnEVMDU25x7H8A.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">The countries (parts of countries) marked in WhiteSmoke are the regions where Kiva loans are donated (Kaggle Image)</figcaption></figure><p id="1ce3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">因此，我们使用<strong class="ix hj"> GeoPandas(地理数据框)创建了第一张世界地图。</strong>看起来很有趣！</p><p id="f9e8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">接下来，我们将看到位于<strong class="ix hj">菲律宾</strong>的贷款。通过使用下一个代码，我们创建了一个<strong class="ix hj">地理数据框架</strong> <code class="du lh li lj lk b">PHL_loans</code>，其中包含来自菲律宾的<code class="du lh li lj lk b">world_loans</code>贷款的所有行。</p><pre class="ll lm ln lo fd lp lk lq bn lr ls bi"><span id="c7bf" class="lt ju hi lk b be lu lv l lw lx">PHL_loans = world_loans.loc[world_loans['country'].isin(['Philippines'])].copy()</span></pre><p id="4fb6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">接下来，地理数据框架<code class="du lh li lj lk b">PHL</code>被加载<strong class="ix hj">，其中包含菲律宾所有<strong class="ix hj">岛屿</strong>的边界</strong>。</p><pre class="ll lm ln lo fd lp lk lq bn lr ls bi"><span id="430d" class="lt ju hi lk b be lu lv l lw lx"># Load a KML file containing island boundaries<br/>gpd.io.file.fiona.drvsupport.supported_drivers['KML'] = 'rw'<br/>PHL = gpd.read_file("../input/geospatial-learn-course-data/Philippines_AL258.kml", driver='KML')<br/>PHL.head()</span></pre><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mb"><img src="../Images/37c5367acd48ee66e93b57ff7d12cb8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c4Z5DKJlZqP5-Vhiyh1AWg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Boundaries of all islands in the Philippines (Kaggle image)</figcaption></figure><p id="7b04" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">同上<strong class="ix hj"> PHL </strong>和<strong class="ix hj">PHL _贷款地理数据框</strong>用于可视化<strong class="ix hj">菲律宾</strong>的贷款。</p><pre class="ll lm ln lo fd lp lk lq bn lr ls bi"><span id="edfa" class="lt ju hi lk b be lu lv l lw lx">ax = PHL.plot(figsize=(12,12), color='whitesmoke', linestyle=':', <br/>              edgecolor='lightgray')<br/>PHL_loans.plot(ax=ax, markersize=2)</span></pre><figure class="ll lm ln lo fd ij er es paragraph-image"><div class="er es mc"><img src="../Images/a433507f21278d001f16bc88ed932a8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:936/format:webp/1*Gn3K48q3z47k0gSLUzkHJg.png"/></div><figcaption class="iq ir et er es is it bd b be z dx">The set of islands in the Philippines and the areas of loans marked in WhiteSmoke (Kaggle image)</figcaption></figure><p id="309b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果我们进一步深入上面的<strong class="ix hj">地图</strong>，我们将寻找一个没有任何贷款或贷款较少的岛屿(白烟区域)。所以，我们避开那些地区，找一个更大的地方(<strong class="ix hj">民都洛</strong>在<strong class="ix hj">菲中部</strong>)。在当前数据集中，这是一个没有任何贷款的相当大的岛。这个岛可以作为<strong class="ix hj">招募<strong class="ix hj">新野外伙伴</strong>的好地点</strong>！这张<a class="ae iu" href="https://upload.wikimedia.org/wikipedia/commons/f/f6/Labelled_map_of_the_Philippines_-_Provinces_and_Regions.png" rel="noopener ugc nofollow" target="_blank"> <strong class="ix hj">地图</strong> </a> <strong class="ix hj"> </strong>对识别岛屿很有帮助。</p><p id="8de5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">因此，在本文中，我们使用<strong class="ix hj"> GeoPandas </strong>创建了我们的<strong class="ix hj">第一张地图</strong>，这里的 指的是<a class="ae iu" href="https://www.kaggle.com/code/abhi2652254/exercise-your-first-map/edit" rel="noopener ugc nofollow" target="_blank"> <strong class="ix hj">。当然，该课程的某些部分将很快添加进来。请继续关注我的下一篇文章。跟着<a class="ae iu" rel="noopener" href="/@abhi2652254"> <strong class="ix hj"> me </strong> </a>说<a class="ae iu" href="https://www.linkedin.com/in/obhinaba17/" rel="noopener ugc nofollow" target="_blank"> <strong class="ix hj"> hi </strong> </a>。</strong></a></p></div></div>    
</body>
</html>