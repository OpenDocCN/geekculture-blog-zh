<html>
<head>
<title>How to connect to mysql database using python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用python连接mysql数据库</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/how-to-connect-to-mysql-database-using-python-df14f14c9b6?source=collection_archive---------7-----------------------#2022-09-28">https://medium.com/geekculture/how-to-connect-to-mysql-database-using-python-df14f14c9b6?source=collection_archive---------7-----------------------#2022-09-28</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="4263" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">使用python连接mysql的不同方式</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/696cd2f0aa4247cf0b5ee96d2a6f9bdf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mC_xIkzTSHBjCCjX"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Photo by <a class="ae jn" href="https://unsplash.com/@campaign_creators?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Campaign Creators</a> on <a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="83dc" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">简介:</h1><p id="32b4" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">本文讨论如何使用<code class="du lc ld le lf b">python</code>连接到mysql数据库。我们将回顾使用python连接到<code class="du lc ld le lf b">mysql</code>的三种方式</p><p id="c2f4" class="pw-post-body-paragraph kg kh hi ki b kj lg ij kl km lh im ko kp li kr ks kt lj kv kw kx lk kz la lb hb bi translated">如果你正在寻找基本<code class="du lc ld le lf b">SQL</code>查询的介绍，请阅读<a class="ae jn" href="https://dock2learn.com/tech/basic-sql-queries-postgresql/" rel="noopener ugc nofollow" target="_blank">这篇</a>帖子。</p><h1 id="5af5" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">使用sql连接器连接到mysql:</h1><p id="9751" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">使用<code class="du lc ld le lf b">mysql-connector-python</code>库可以建立到<code class="du lc ld le lf b">mysql</code>的连接。</p><pre class="iy iz ja jb fd ll lf lm ln aw lo bi"><span id="e569" class="lp jp hi lf b fi lq lr l ls lt">$pip install mysql-connector-python<br/><br/>Collecting mysql-connector-python<br/>  Using cached mysql_connector_python-8.0.30-cp39-cp39-macosx_11_0_x86_64.whl (5.1 MB)<br/>Collecting protobuf&lt;=3.20.1,&gt;=3.11.0<br/>  Using cached protobuf-3.20.1-cp39-cp39-macosx_10_9_x86_64.whl (962 kB)<br/>Installing collected packages: protobuf, mysql-connector-python<br/>Successfully installed mysql-connector-python-8.0.30 protobuf-3.20.1</span><span id="b953" class="lp jp hi lf b fi lu lr l ls lt">import mysql.connector<br/><br/><br/>def connect_to_mysql() -&gt; mysql.connector:<br/>    """<br/>    Establish the database connection.<br/>    """<br/><br/>    cnx = mysql.connector.connect(<br/>        user="username",<br/>        password="password",<br/>        host="hostname",<br/>        database="databasename",<br/>        connection_timeout=10000<br/>    )<br/><br/>    return cnx</span></pre><h1 id="01af" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">使用mysqlConnectionPool连接到MySQL:</h1><pre class="iy iz ja jb fd ll lf lm ln aw lo bi"><span id="2c42" class="lp jp hi lf b fi lq lr l ls lt">from mysql.connector.pooling import PooledMySQLConnection, MySQLConnectionPool<br/><br/>def connect_to_mysql_pool() -&gt; MySQLConnectionPool:<br/>    """<br/>    Establish the database connection.<br/>    """<br/><br/>    connection_pool = MySQLConnectionPool(pool_name="mainpool",<br/>                                          pool_size=3,<br/>                                          pool_reset_session=True,<br/>                                          user="username",<br/>                                          password="password",<br/>                                          host="hostname",<br/>                                          database="databasename",<br/>                                          allow_local_infile=True<br/>                                         )<br/>    return connection_pool</span></pre><ul class=""><li id="02c2" class="lv lw hi ki b kj lg km lh kp lx kt ly kx lz lb ma mb mc md bi translated"><code class="du lc ld le lf b">mysql.connector.pooling</code>模块实现池化。</li><li id="a7c8" class="lv lw hi ki b kj me km mf kp mg kt mh kx mi lb ma mb mc md bi translated">当向请求者提供连接时，池打开许多连接并处理线程安全。</li><li id="5cea" class="lv lw hi ki b kj me km mf kp mg kt mh kx mi lb ma mb mc md bi translated">连接池的大小在池创建时是可配置的。此后不能调整其大小。</li><li id="f387" class="lv lw hi ki b kj me km mf kp mg kt mh kx mi lb ma mb mc md bi translated">连接池可以在池创建时命名。如果没有给出名称，则使用连接参数生成一个名称。</li><li id="5f85" class="lv lw hi ki b kj me km mf kp mg kt mh kx mi lb ma mb mc md bi translated">连接池名称可以从连接池或从中获得的连接中检索。</li><li id="546b" class="lv lw hi ki b kj me km mf kp mg kt mh kx mi lb ma mb mc md bi translated">要释放从连接池中获得的池化连接，调用它的<code class="du lc ld le lf b">close()</code>方法，就像对任何未池化的连接一样。然而，对于一个池化的连接，<code class="du lc ld le lf b">close()</code>并不真正关闭连接，而是将它返回到池中，并使它可用于后续的连接请求。</li></ul><h1 id="6201" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">使用SQLAlchemy连接到mysql:</h1><p id="0916" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">在大多数项目中，我们将主要使用ORM来连接数据库。ORM不仅方便，而且与数据库无关，这意味着代码更改更少。唯一的变化可能是连接字符串或驱动程序。</p><p id="2b1d" class="pw-post-body-paragraph kg kh hi ki b kj lg ij kl km lh im ko kp li kr ks kt lj kv kw kx lk kz la lb hb bi translated">我们将使用<code class="du lc ld le lf b">pymysql</code>驱动程序通过SQL Alchemy连接到mysql。</p><h2 id="9e54" class="lp jp hi bd jq mj mk ml ju mm mn mo jy kp mp mq ka kt mr ms kc kx mt mu ke mv bi translated">安装pymysql</h2><pre class="iy iz ja jb fd ll lf lm ln aw lo bi"><span id="f7dc" class="lp jp hi lf b fi lq lr l ls lt">$ pip install pymysql</span></pre><h2 id="5a1f" class="lp jp hi bd jq mj mk ml ju mm mn mo jy kp mp mq ka kt mr ms kc kx mt mu ke mv bi translated">使用SQL Alchemy连接到mysql的代码</h2><pre class="iy iz ja jb fd ll lf lm ln aw lo bi"><span id="64a9" class="lp jp hi lf b fi lq lr l ls lt">from sqlalchemy import create_engine<br/>from sqlalchemy.exc import SQLAlchemyError<br/>from sqlalchemy.orm import sessionmaker<br/>from urllib.parse import quote<br/><br/><br/>def connect_to_mysql_orm():<br/><br/>    connection_url = "mysql+pymysql://username:{}hostname/dbname".format(quote("pa$$w0RD@"))<br/><br/>    try:<br/>        engine = create_engine(url=connection_url)<br/><br/>        # create a session<br/>        session = sessionmaker(bind=engine)<br/>        conn = session()<br/><br/>        if session:<br/>            return conn<br/><br/>    except SQLAlchemyError as se:<br/>        print(se)</span></pre></div><div class="ab cl mw mx gp my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="hb hc hd he hf"><p id="6495" class="pw-post-body-paragraph kg kh hi ki b kj lg ij kl km lh im ko kp li kr ks kt lj kv kw kx lk kz la lb hb bi translated"><em class="nd">原载于2022年9月28日https://dock2learn.com</em><a class="ae jn" href="https://dock2learn.com/tech/how-to-connect-to-mysql-database-using-python/" rel="noopener ugc nofollow" target="_blank"><em class="nd"/></a><em class="nd">。</em></p></div></div>    
</body>
</html>