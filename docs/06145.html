<html>
<head>
<title>Managing Input and Output Streams in the Linux Shell</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Linux Shell中管理输入和输出流</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/managing-input-and-output-streams-in-the-linux-shell-bff3eeb05f8a?source=collection_archive---------11-----------------------#2021-08-07">https://medium.com/geekculture/managing-input-and-output-streams-in-the-linux-shell-bff3eeb05f8a?source=collection_archive---------11-----------------------#2021-08-07</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/45b62854424bc292f8e845b0d8955b10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*76qdWOg-j89nlecr.jpg"/></div></div></figure><p id="22d9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这篇Linux教程中，我将介绍如何通过使用重定向和管道在命令行中管理输入和输出流。</p><h1 id="3ae5" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">介绍</h1><p id="7790" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">重定向标准输入和输出流非常有用。那么，什么是标准流呢？它们是:</p><ul class=""><li id="f564" class="kr ks hi is b it iu ix iy jb kt jf ku jj kv jn kw kx ky kz bi translated">标准输入</li><li id="1cbf" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn kw kx ky kz bi translated">标准输出</li><li id="b6f7" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn kw kx ky kz bi translated">标准误差</li></ul><p id="c44a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后，我们将把一个命令的输出通过管道传输到另一个命令的输入。之后，我们将检查发送输出到突出输出和一个文件。</p><h1 id="81ed" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">标准流</h1><p id="913a" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">Bash，默认的<a class="ae lf" href="https://aindien.com/how-to-get-started-with-linux.html" rel="noopener ugc nofollow" target="_blank"> <em class="lg"> Linux shell </em> </a>，接收输入并以字符流的形式发送输出。我们通常键入输入。输出是您在窗口中看到的字符流。这个字符流通常是命令的结果。</p><p id="34b1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">“Stdin”是标准的输入流。主要目的是为命令提供输入。“Stdout”是标准输出流，显示命令的输出。“Stderr”显示命令的错误输出。</p><p id="59a9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">输入流为程序提供输入。我们通过使用终端来做到这一点。输出流向我们展示了命令输出。如果有错误，将显示标准错误流。</p><p id="ce7f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这里我需要做的一个重要区别是这是文件重定向。信息从文件中提取或发送到文件中。这就是重定向的目的。</p><h1 id="c149" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">文件描述符</h1><p id="ff0f" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">每种类型的输入和输出都有一个与之相关的文件描述符。这些是:</p><ul class=""><li id="6803" class="kr ks hi is b it iu ix iy jb kt jf ku jj kv jn kw kx ky kz bi translated">标准输入= 0</li><li id="7e7b" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn kw kx ky kz bi translated">stdout = 1</li><li id="353f" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn kw kx ky kz bi translated">stderr = 2</li></ul><p id="ac09" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">重定向是关于文件描述符的。当Bash打开时，stdin、stdout和stderr的文件描述符也会打开。文件描述符很有趣。你可以制作更多的，读取，写入，关闭它们。你可以在重定向操作符前使用它们来说明你想做什么。如果不使用它们，默认为“1”选项或输出。</p><h1 id="2d1f" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">重定向输出</h1><p id="413a" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">让我们从将输出重定向到一个文件开始。我经常这样做，而且非常有用。我们首先需要讨论的是输出重定向操作符，&gt;或&gt; &gt;。他们做不同的事情，所以不要混淆。</p><p id="097d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果我用&gt;重定向一个命令的输出，目标文件就会被创建或覆盖。您必须有适当的权限才能写入该文件。此操作将销毁文件中的所有数据，如果文件中已经有数据的话。</p><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="5945" class="lq jp hi lm b fi lr ls l lt lu">ls -l 1&gt; contents.txt</span></pre><p id="0416" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">将创建contents.txt文件。前一个命令的输出被添加到文件中。</p><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="ef1b" class="lq jp hi lm b fi lr ls l lt lu">cat contents.txt</span></pre><p id="6444" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，让我们使用&gt;&gt;操作符。如果输出文件不存在，将会创建它。如果文件存在，新数据将被添加到末尾。</p><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="d666" class="lq jp hi lm b fi lr ls l lt lu">pwd 2&gt;&gt; contents.txt</span><span id="bed4" class="lq jp hi lm b fi lv ls l lt lu">cat contents.txt</span></pre><p id="69fa" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">因为我们使用了&gt;&gt;操作符，所以来自“pwd”的信息被添加到文件的末尾。</p><p id="86fb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">另一个有用的过程是将stderr重定向到一个文件，这样您可以在以后检查它。你这样做:</p><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="ba37" class="lq jp hi lm b fi lr ls l lt lu">ls x 2&gt;&gt; error.txt</span></pre><p id="b9f1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这会将前一个命令的输出错误保存到文件中。</p><p id="8491" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">另一个好的技巧是将输出和错误信息一次重定向到一个文件。</p><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="44cf" class="lq jp hi lm b fi lr ls l lt lu">ls x &amp;&gt;&gt; error.txt</span></pre><p id="e37c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如你所见，信息就在那里。</p><h1 id="fbdd" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">重定向输入</h1><p id="48dd" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">这是捕获一个输出，并将其作为输入传递给其他东西。捕获一个文件的内容是经常要做的。然后我们可以处理内容。我过去不得不做的事情是将文件的内容按字母顺序排序并显示出来。我们可以通过以下方式实现这一点:</p><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="12f6" class="lq jp hi lm b fi lr ls l lt lu">sort 0&lt; pokemon.txt</span></pre><p id="0b6f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这个文本中有一个口袋妖怪的列表，我想按字母顺序显示这个列表。这个命令可以做到这一点。0表示标准输入的文件描述符。对了，这不是我之前说的工作例子。我只是为这个例子做了这个列表。</p><p id="7165" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">因此，使用间接输入，您可以用任意数量的命令处理文件的内容。你的想象力是极限。</p><p id="897f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您也可以再次重定向此信息。例如，如果我想将排序后的结果发送到一个新文件中，这很容易做到。</p><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="4728" class="lq jp hi lm b fi lr ls l lt lu">sort 0&lt; pokemon.txt 1&gt; sorted-pokemon.txt</span></pre><p id="13f8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这个命令获取原始文件的内容并按字母顺序排序。然后，它用排序后的信息创建一个新文件。如果你必须经常这样做，这是一个很好的技巧。</p><h1 id="c323" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">管道输出</h1><p id="1ae4" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">管道类似于重定向。不过，它也有一些不同之处。它最常用于获取一个命令的输出，并将其作为另一个命令的输入。您可以将几个命令和管道链接在一起。这些命令可以使用任何适用的参数。这为完成任务提供了很好的灵活性。</p><p id="9417" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">原始输入也可以来自文件。为此，您可以使用典型的输入重定向。然后，您只需使用管道设置一系列命令，这取决于您想要完成的任务。</p><p id="389c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">使用管道的主要目的是处理来自命令的信息，并将其发送给其他命令。可以使用任何接受流输入的命令。</p><ul class=""><li id="1fcb" class="kr ks hi is b it iu ix iy jb kt jf ku jj kv jn kw kx ky kz bi translated">分类</li><li id="b10e" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn kw kx ky kz bi translated">可做文件内的字符串查找</li><li id="be2d" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn kw kx ky kz bi translated">限位开关（Limit Switch）</li></ul><p id="a8be" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">上面的这些命令很常用于管道。就像我上面提到的，许多命令可以使用管道。</p><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="71ca" class="lq jp hi lm b fi lr ls l lt lu">ifconfig | grep 10</span></pre><p id="e849" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你也可以这样做:</p><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="cb4b" class="lq jp hi lm b fi lr ls l lt lu">ls | wc -l</span></pre><p id="d846" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这将给你一个当前目录下的文件列表。</p><p id="b429" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">管道有很多可能性。实验会有很大帮助，并且让你习惯命令行。</p><h1 id="eb9d" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">使用Xargs执行</h1><p id="58be" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">xargs命令从标准输入中读取数据。它可以构建和执行后续命令。它将使用这个输入作为参数。如果没有为xargs指定额外的命令，默认情况下它将使用echo。</p><p id="1f3f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">“xargs”命令接受多行输入，并在一行中提供。</p><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="1895" class="lq jp hi lm b fi lr ls l lt lu">xargs &lt; pokemon.txt</span></pre><p id="9ce5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">列出这个文件的内容，它在一行中完成，用空格分开。</p><p id="67d6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你在一个目录中有几个文件，你可以很容易地找到字数和其他信息。</p><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="0507" class="lq jp hi lm b fi lr ls l lt lu">ls *.txt | xargs wc</span></pre><p id="21b0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这将列出当前目录中的所有文本文件，并一次给出所有文件的字数统计信息。你可以用“xargs”做更多的事情，这是一个有用的命令。</p><h1 id="711b" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">分割您的输出</h1><p id="c7e1" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">分割输出在某些情况下很有用。例如，当您想在屏幕上显示输出，同时将它发送到一个文件。有多种方法可以做到这一点，但使用“tee”命令可能是最好的。</p><p id="1df1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">对管线使用“tee”命令。文件名通常是参数。让我们用上面的Pokemon的例子。</p><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="8ad8" class="lq jp hi lm b fi lr ls l lt lu">sort pokemon.txt | tee sorted-pokemon.txt</span></pre><p id="a74e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">sort命令完成它的工作，然后我们将它传送给tee。然后，我们在屏幕上看到排序的结果，同样的信息被保存到我们的sorted-pokemon.txt文件中。</p><p id="adeb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们使用前面的wordcount命令作为另一个例子。我们可以获取这些信息，将其显示在屏幕上，同时将其发送到另一个文本文件中。</p><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="e485" class="lq jp hi lm b fi lr ls l lt lu">wc -l pokemon.txt | tee pokemon-count.txt</span></pre><h1 id="daa6" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">结论</h1><p id="6325" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">因此，在本节中，我们已经了解了所有关于文件重定向和管道的内容。这两种技术都很棒。有了上面的例子，你应该做那些例子，这样你就可以看到它们是如何工作的。当您第一次被要求按字母顺序对一个大的文本文件进行排序时，我希望您能记住这些例子，以及Linux如何使这样的任务变得微不足道。</p><h1 id="d403" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">感谢阅读</h1><p id="9a89" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">谢谢你读了这篇文章，我真的很感激。</p><p id="a363" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你想加入我的简讯，你可以在这里:</p><p id="11ee" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae lf" href="https://mailchi.mp/70ab982b2619/computing" rel="noopener ugc nofollow" target="_blank"> <em class="lg">杰森的迅</em> </a></p><p id="adb5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你需要关于下一步该读什么的建议，那么试试这些Linux文章:</p><p id="4c46" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae lf" rel="noopener" href="/geekculture/managing-files-in-a-linux-environment-50d4d6ad6d49"> <em class="lg">在Linux环境下管理文件</em> </a></p><p id="ca32" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae lf" rel="noopener" href="/geekculture/how-to-get-started-in-linux-7d09475eb037"><em class="lg">Linux如何入门</em> </a></p></div><div class="ab cl lw lx gp ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="hb hc hd he hf"><p id="9a6a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="lg">原载于2021年8月7日https://aindien.com</em><a class="ae lf" href="https://aindien.com/managing-input-and-output-streams-in-the-linux-shell.html" rel="noopener ugc nofollow" target="_blank"><em class="lg"/></a><em class="lg">。</em></p></div></div>    
</body>
</html>