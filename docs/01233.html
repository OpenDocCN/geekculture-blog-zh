<html>
<head>
<title>How HTTP/2 will Change The Way We Communicate?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">HTTP/2将如何改变我们的交流方式？</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/how-http-2-will-change-the-way-we-communicate-6d92925b912d?source=collection_archive---------15-----------------------#2021-04-02">https://medium.com/geekculture/how-http-2-will-change-the-way-we-communicate-6d92925b912d?source=collection_archive---------15-----------------------#2021-04-02</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/1e11d656fee511815dfea407d9b9a75e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s6rBJWVSFwW_2Y5vYtoZ_g.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">How HTTP/2 will Change The Way We Communicate?</figcaption></figure><p id="1722" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><a class="ae js" href="https://www.w3.org/Protocols/HTTP/HTTP2.html" rel="noopener ugc nofollow" target="_blank"> HTTP/2 </a>最初被认为是<a class="ae js" href="https://developers.google.com/web/fundamentals/performance/http2" rel="noopener ugc nofollow" target="_blank">谷歌的SPDY </a>(读作“speedy”)协议，旨在解决<a class="ae js" href="https://www.w3.org/Protocols/rfc2616/rfc2616.html" rel="noopener ugc nofollow" target="_blank"> HTTP/1.1 </a>固有的性能问题。HTTP/2是超文本传输协议自1999年以来的首次升级。它通过优化HTTP“在线”表达方式来提高网站性能它没有改变HTTP的语义，这意味着头字段、状态代码和cookies的工作方式与HTTP/1.1完全相同。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jt"><img src="../Images/f3e0b574646a49399ea837c90c20d978.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EMh6zO-SDiLhfmvbiXXoUA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx"><a class="ae js" href="https://www.w3.org/Protocols/Timeline.html" rel="noopener ugc nofollow" target="_blank">Http Timeline</a></figcaption></figure><h1 id="73df" class="jy jz hi bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">什么不起作用？</h1><p id="f3ba" class="pw-post-body-paragraph iu iv hi iw b ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn la jp jq jr hb bi translated"><strong class="iw hj"> HTTP1.1 </strong>被限制为每个<a class="ae js" href="http://w3schools.sinsixx.com/tcpip/tcpip_intro.asp.htm" rel="noopener ugc nofollow" target="_blank"> TCP </a>连接只能处理一个未完成的请求，迫使浏览器使用多个<a class="ae js" href="http://w3schools.sinsixx.com/tcpip/tcpip_intro.asp.htm" rel="noopener ugc nofollow" target="_blank"> TCP </a>连接来同时处理多个请求。但是，并行使用过多的<a class="ae js" href="http://w3schools.sinsixx.com/tcpip/tcpip_intro.asp.htm" rel="noopener ugc nofollow" target="_blank"> TCP </a>连接会导致<a class="ae js" href="http://w3schools.sinsixx.com/tcpip/tcpip_intro.asp.htm" rel="noopener ugc nofollow" target="_blank"> TCP </a>拥塞，造成网络资源的不公平垄断。</p><p id="d882" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj"> Web </strong>使用多个连接来处理额外请求的浏览器会占用更多的可用网络资源，从而降低其他用户的网络性能。</p><p id="bd87" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">从浏览器发出多个请求还会导致数据传输线路上的数据重复，这又需要额外的协议来提取所需的信息，而不会在终端节点出错。</p><p id="ed10" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">在</strong> <a class="ae js" href="https://www.w3.org/Protocols/HTTP/HTTP2.html" rel="noopener ugc nofollow" target="_blank">之前，HTTP/2 </a>行业用解决方案实践来处理这些约束，例如<a class="ae js" href="https://www.keycdn.com/support/domain-sharding#:~:text=Domain%20sharding%20is%20a%20technique,website%20by%20using%20multiple%20domains.&amp;text=Web%20browsers%20traditionally%20place%20limits,(between%202%2D16)." rel="noopener ugc nofollow" target="_blank">域分片</a>、<a class="ae js" href="https://blog.josephscott.org/2017/11/17/http-2-and-concatenation/" rel="noopener ugc nofollow" target="_blank">串联</a>、数据内联和spriting等等。</p><p id="bd9f" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">Web的发展已经远远超出了传统的基于HTTP的网络技术的能力。十多年前开发的<a class="ae js" href="https://www.w3.org/Protocols/rfc2616/rfc2616.html" rel="noopener ugc nofollow" target="_blank"> HTTP1.1 </a>的核心品质为一些令人尴尬的性能和安全漏洞打开了大门，例如<a class="ae js" href="https://book.hacktricks.xyz/pentesting-web/hacking-with-cookies" rel="noopener ugc nofollow" target="_blank"> Cookie Hack </a>。</p><h1 id="c855" class="jy jz hi bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">HTTP/2的优势</h1><p id="0a53" class="pw-post-body-paragraph iu iv hi iw b ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn la jp jq jr hb bi translated"><strong class="iw hj">服务器推送</strong></p><blockquote class="lb lc ld"><p id="9842" class="iu iv le iw b ix iy iz ja jb jc jd je lf jg jh ji lg jk jl jm lh jo jp jq jr hb bi translated"><a class="ae js" href="https://developers.google.com/web/fundamentals/performance/http2" rel="noopener ugc nofollow" target="_blank"> <em class="hi"> HTTP/2 </em> </a> <em class="hi">使用一种称为服务器推送的程序，在浏览器请求文件之前，服务器知道浏览器需要哪些文件。<br/>在浏览器请求这些文件之前，服务器会从技术上把它们“推”给浏览器。这使得检索运行网站所需的所有资源的整个过程更快。</em></p></blockquote><p id="75d6" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">复用</strong></p><blockquote class="lb lc ld"><p id="f69d" class="iu iv le iw b ix iy iz ja jb jc jd je lf jg jh ji lg jk jl jm lh jo jp jq jr hb bi translated"><em class="hi"> One </em> <strong class="iw hj"> <em class="hi"> </em> </strong> <em class="hi">与</em><a class="ae js" href="https://www.w3.org/Protocols/rfc2616/rfc2616.html" rel="noopener ugc nofollow" target="_blank"><em class="hi">HTTP/1.1</em></a><em class="hi">的惊人局限性在于，它每次只能传输一个请求每个</em><a class="ae js" href="http://w3schools.sinsixx.com/tcpip/default.asp.htm" rel="noopener ugc nofollow" target="_blank"><em class="hi">TCP</em></a><em class="hi">连接。这迫使浏览器利用多个</em><a class="ae js" href="http://w3schools.sinsixx.com/tcpip/default.asp.htm" rel="noopener ugc nofollow" target="_blank"><em class="hi">TCP</em></a><em class="hi">连接来同时处理多个请求。有了</em><a class="ae js" href="https://www.w3.org/Protocols/HTTP/HTTP2.html" rel="noopener ugc nofollow" target="_blank"><em class="hi">HTTP/2</em></a><em class="hi">，多个</em><a class="ae js" href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol" rel="noopener ugc nofollow" target="_blank"><em class="hi">HTTP</em></a><em class="hi">请求现在可以在仅仅一个</em><a class="ae js" href="https://en.wikipedia.org/wiki/Transmission_Control_Protocol" rel="noopener ugc nofollow" target="_blank"><em class="hi">TCP</em></a><em class="hi">连接上实现。这意味着将资源转移到一个网站会更快更有效率。</em></p></blockquote><p id="1c63" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">二进制协议</strong></p><blockquote class="lb lc ld"><p id="a334" class="iu iv le iw b ix iy iz ja jb jc jd je lf jg jh ji lg jk jl jm lh jo jp jq jr hb bi translated"><a class="ae js" href="https://tools.ietf.org/html/rfc2616" rel="noopener ugc nofollow" target="_blank"><em class="hi">HTTP/1.1</em></a><em class="hi">处理基于文本的命令来完成可能会传输多余数据的请求。</em><a class="ae js" href="https://developers.google.com/web/fundamentals/performance/http2" rel="noopener ugc nofollow" target="_blank"><em class="hi">HTTP/2</em></a><em class="hi">通过采用二进制协议来简化客户端计算机对传输信息的解释，从而减少了传输的数据量。这节省了将信息从文本转换成二进制的时间。这可以显著改善加载时间和整体性能。</em></p></blockquote><p id="9b98" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">标题压缩</strong></p><blockquote class="lb lc ld"><p id="e699" class="iu iv le iw b ix iy iz ja jb jc jd je lf jg jh ji lg jk jl jm lh jo jp jq jr hb bi translated"><em class="hi">对于富媒体网站，客户端要推送多个头帧；这会导致延迟，并消耗额外的网络资源。</em><a class="ae js" href="https://developers.google.com/web/fundamentals/performance/http2" rel="noopener ugc nofollow" target="_blank"><em class="hi">HTTP/2</em></a><em class="hi">通过压缩大尺寸的冗余报头帧来解决这个问题。</em></p><p id="0704" class="iu iv le iw b ix iy iz ja jb jc jd je lf jg jh ji lg jk jl jm lh jo jp jq jr hb bi translated"><em class="hi">它使用</em> <a class="ae js" href="https://livebook.manning.com/book/http2-in-action/chapter-8/" rel="noopener ugc nofollow" target="_blank"> <em class="hi"> HPACK </em> </a> <em class="hi">压缩，在传输到服务器之前压缩每个报头的单独值。然后，它从先前传输的报头值列表中搜索编码信息，以重新组装完整的报头信息。</em></p></blockquote><p id="2a11" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">流优先级</strong></p><blockquote class="lb lc ld"><p id="0a27" class="iu iv le iw b ix iy iz ja jb jc jd je lf jg jh ji lg jk jl jm lh jo jp jq jr hb bi translated"><em class="hi"/><a class="ae js" href="https://tools.ietf.org/html/rfc2616" rel="noopener ugc nofollow" target="_blank"><em class="hi">HTTP/1.1</em></a><em class="hi">的弱点之一就是CSS文件和JavaScript的缩小化。这是为了在较小文件大小的基础上减少带宽和提高性能。<br/></em><a class="ae js" href="https://developers.google.com/web/fundamentals/performance/http2" rel="noopener ugc nofollow" target="_blank"><em class="hi">HTTP/2</em></a><em class="hi">优先级的实现允许客户端提供对特定数据流的偏好。这意味着只有某个网页需要的代码才会提供给访问者。由于请求是在</em><a class="ae js" href="https://developers.google.com/web/fundamentals/performance/http2" rel="noopener ugc nofollow" target="_blank"><em class="hi">HTTP/2</em></a><em class="hi">上同时进行的，加载几个小样式表文件不会有问题。</em></p></blockquote><p id="f92e" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">感谢您的阅读💜</p></div></div>    
</body>
</html>