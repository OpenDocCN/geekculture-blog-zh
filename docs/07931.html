<html>
<head>
<title>3 Tools for Easy Interaction with Web APIs using Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python与Web APIs轻松交互的3个工具</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/3-tools-for-easy-interaction-with-web-apis-using-python-f19b2149fc1c?source=collection_archive---------17-----------------------#2021-10-06">https://medium.com/geekculture/3-tools-for-easy-interaction-with-web-apis-using-python-f19b2149fc1c?source=collection_archive---------17-----------------------#2021-10-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/dbf3625f87c0ed6bd03e11593e6bf16e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jRzT7x4CAlQZQwGGtRnrYA.png"/></div></div></figure><p id="12e0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">最初发布于:【https://www.pythoneur.com/easy-interaction-with-web-apis/ T2】T3</p><p id="2c74" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="jp">与应用编程接口(API)交互并不困难。在这篇文章中，我分享了我最喜欢的三个工具和窍门，来快速使用API，让你的生活变得简单。</em></p><h1 id="8450" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated"><a class="ae jo" href="https://curl.trillworks.com/" rel="noopener ugc nofollow" target="_blank"> Curl to Requests </a>:通过几次点击生成API请求</h1><p id="c1ba" class="pw-post-body-paragraph iq ir hi is b it ko iv iw ix kp iz ja jb kq jd je jf kr jh ji jj ks jl jm jn hb bi translated">假设我们希望监控并记录<a class="ae jo" href="https://ethgasstation.info/index.php" rel="noopener ugc nofollow" target="_blank"> <strong class="is hj"> ETH加油站</strong> </a>的Etherum气费。使用正确的工具，您可以在几秒钟内创建一个API请求。</p><h2 id="0eda" class="kt jr hi bd js ku kv kw jw kx ky kz ka jb la lb ke jf lc ld ki jj le lf km lg bi translated">1.转到<a class="ae jo" href="https://ethgasstation.info/index.php" rel="noopener ugc nofollow" target="_blank">网站</a>，检查网络选项卡中的请求并复制为cCurl:</h2><figure class="li lj lk ll fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lh"><img src="../Images/145be95722110de3ebf03a72762965e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*qoXc9WFVyxiVvEGq.png"/></div></div></figure><figure class="li lj lk ll fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lm"><img src="../Images/b73990613b7ecda8df4e55a031680ded.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*_GAGf3hi-OV3ec8V.png"/></div></div></figure><h2 id="8bde" class="kt jr hi bd js ku kv kw jw kx ky kz ka jb la lb ke jf lc ld ki jj le lf km lg bi translated">2.接下来，将来自cCurl的数据转换为请求<a class="ae jo" href="https://curl.trillworks.com/" rel="noopener ugc nofollow" target="_blank">这里</a>得到以下输出:</h2><figure class="li lj lk ll fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ln"><img src="../Images/b02db19de1bfdf05e1970cc868f63b06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*T18BgXqEgl_aUmp1.png"/></div></div></figure><figure class="li lj lk ll fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ln"><img src="../Images/05ec046a799d3367d911bcd239627536.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*AgMPX4xtkdtzvlTX.png"/></div></div></figure><h2 id="afd4" class="kt jr hi bd js ku kv kw jw kx ky kz ka jb la lb ke jf lc ld ki jj le lf km lg bi translated">3.如果需要，修改任何报头或有效载荷，并测试您的请求:</h2><div class="lo lp ez fb lq lr"><a href="https://replit.com/@pythoneur/Requests-ETH-Gas-Station" rel="noopener  ugc nofollow" target="_blank"><div class="ls ab dw"><div class="lt ab lu cl cj lv"><h2 class="bd hj fi z dy lw ea eb lx ed ef hh bi translated">请求ETH加油站</h2><div class="ly l"><h3 class="bd b fi z dy lw ea eb lx ed ef dx translated">向Eth加油站索取样品</h3></div><div class="lz l"><p class="bd b fp z dy lw ea eb lx ed ef dx translated">replit.com</p></div></div><div class="ma l"><div class="mb l mc md me ma mf io lr"/></div></div></a></div><h1 id="8422" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">带<a class="ae jo" href="https://pydantic-docs.helpmanual.io/" rel="noopener ugc nofollow" target="_blank"> pydantic </a>的超棒数据模型</h1><p id="af03" class="pw-post-body-paragraph iq ir hi is b it ko iv iw ix kp iz ja jb kq jd je jf kr jh ji jj ks jl jm jn hb bi translated">使用Pydantic，让来自API的所有JSON响应得到验证并转换成pythonic对象变得非常容易。</p><blockquote class="mg mh mi"><p id="4288" class="iq ir jp is b it iu iv iw ix iy iz ja mj jc jd je mk jg jh ji ml jk jl jm jn hb bi translated"><strong class="is hj">使用Python类型提示的数据验证和设置管理。快速和可扩展，pydantic可以很好地与你的linters/IDE/brain配合。定义数据在纯的、规范的Python 3.6+中应该是怎样的；用pydantic验证一下。</strong></p></blockquote><p id="033e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然而，从嵌套的JSON手动创建模型仍然不是很有趣。使用jsontopydantic.com<a class="ae jo" href="https://jsontopydantic.com/" rel="noopener ugc nofollow" target="_blank"><strong class="is hj">节省宝贵的时间并通过几次点击创建模型。您需要做的就是复制JSON响应来生成pydantic模型。</strong></a></p><figure class="li lj lk ll fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lh"><img src="../Images/afe498c04e1302ed8f62ea1c5e0778de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Wtqc8lXiLXU-BMKm.png"/></div></div></figure><p id="13b3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">生成模型后，您可以进行一些微调:</p><ul class=""><li id="e4aa" class="mm mn hi is b it iu ix iy jb mo jf mp jj mq jn mr ms mt mu bi translated">仔细检查输入类型，如果需要的话，利用一些很棒的<a class="ae jo" href="https://pydantic-docs.helpmanual.io/usage/types/#pydantic-types" rel="noopener ugc nofollow" target="_blank"><strong class="is hj"/></a>数据类型，比如<code class="du mv mw mx my b">SecretStr</code>或<code class="du mv mw mx my b">PaymentCardNumber</code></li><li id="4c16" class="mm mn hi is b it mz ix na jb nb jf nc jj nd jn mr ms mt mu bi translated">增加一些<a class="ae jo" href="https://pydantic-docs.helpmanual.io/usage/model_config/" rel="noopener ugc nofollow" target="_blank"> <strong class="is hj">级配置</strong> </a> <code class="du mv mw mx my b">arbitrary_types_allowed</code>或者同样流行的<code class="du mv mw mx my b">orm_mode</code></li></ul><p id="7e34" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一旦一切就绪，就可以简单地将响应解包到模型中，并使用原始别名轻松地将其转换回JSON:</p><pre class="li lj lk ll fd ne my nf ng aw nh bi"><span id="fee3" class="kt jr hi my b fi ni nj l nk nl">response = requests.get("https://restcountries.eu/rest/v2/alpha/de")</span><span id="323b" class="kt jr hi my b fi nm nj l nk nl">model = Model(**response.json())</span><span id="781a" class="kt jr hi my b fi nm nj l nk nl">print(f"Borders: {model.borders}")<br/>print(f"Flag URL: {model.flag}\n")</span><span id="a54b" class="kt jr hi my b fi nm nj l nk nl">print(f"JSON Serialization: {model.json(by_alias=True, exclude={'borders'})}\n")</span></pre><p id="dd54" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">和之前的博文一样，我也制作了一个互动的小例子供你尝试:</p><div class="lo lp ez fb lq lr"><a href="https://replit.com/@pythoneur/PyDantic-Showcase#main.py" rel="noopener  ugc nofollow" target="_blank"><div class="ls ab dw"><div class="lt ab lu cl cj lv"><h2 class="bd hj fi z dy lw ea eb lx ed ef hh bi translated">PyDantic橱窗</h2><div class="ly l"><h3 class="bd b fi z dy lw ea eb lx ed ef dx translated">如何使用pydantic的示例。</h3></div><div class="lz l"><p class="bd b fp z dy lw ea eb lx ed ef dx translated">replit.com</p></div></div><div class="ma l"><div class="nn l mc md me ma mf io lr"/></div></div></a></div><h1 id="8fc4" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">使用<a class="ae jo" href="https://marketplace.visualstudio.com/items?itemName=rangav.vscode-thunder-client" rel="noopener ugc nofollow" target="_blank">迅雷客户端</a>从VSCode发送API请求</h1><p id="e9d0" class="pw-post-body-paragraph iq ir hi is b it ko iv iw ix kp iz ja jb kq jd je jf kr jh ji jj ks jl jm jn hb bi translated">许多人都知道<a class="ae jo" href="https://www.postman.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="is hj"> Postman </strong> </a>是与web APIs交互时必不可少的工具。现在，您也可以使用<a class="ae jo" href="https://marketplace.visualstudio.com/items?itemName=rangav.vscode-thunder-client" rel="noopener ugc nofollow" target="_blank"><strong class="is hj">Thunder Client</strong></a>扩展在VSCode中无缝地做同样的事情。特别是对于初学者来说，这是一个很好的方法，也可以进行更复杂的API调用，这些调用需要身份验证、参数和某些头:</p><figure class="li lj lk ll fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lh"><img src="../Images/4d488cf89bc9420e942ee9653c79e1c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*GLOedu2kqr_XGHDk.png"/></div></div></figure><h1 id="09f0" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">TLDR</h1><p id="ba2e" class="pw-post-body-paragraph iq ir hi is b it ko iv iw ix kp iz ja jb kq jd je jf kr jh ji jj ks jl jm jn hb bi translated">我希望你喜欢这篇关于一些便利工具的快速博文，这些工具让我在与API交互时变得更加容易。简而言之，我们了解到的情况如下:</p><ol class=""><li id="0075" class="mm mn hi is b it iu ix iy jb mo jf mp jj mq jn no ms mt mu bi translated">检查来自浏览器的请求，并使用<a class="ae jo" href="https://curl.trillworks.com/" rel="noopener ugc nofollow" target="_blank"><strong class="is hj">Curl to Requests</strong></a>快速将它们转换成pythonic请求。</li><li id="68c3" class="mm mn hi is b it mz ix na jb nb jf nc jj nd jn no ms mt mu bi translated">保存一些tpying，用<a class="ae jo" href="https://jsontopydantic.com/" rel="noopener ugc nofollow" target="_blank">【jsontopydantic.com】</a><strong class="is hj">生成经过验证的pythonic数据模型。</strong></li><li id="2d33" class="mm mn hi is b it mz ix na jb nb jf nc jj nd jn no ms mt mu bi translated">使用令人敬畏的<a class="ae jo" href="https://marketplace.visualstudio.com/items?itemName=rangav.vscode-thunder-client" rel="noopener ugc nofollow" target="_blank"> <strong class="is hj"> Thunder客户端</strong> </a>从VSCode开始试验和使用API。</li></ol><p id="d078" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">寻找更多技巧和窍门？查看我最近关于处理脏文本数据的博文:</strong></p><div class="lo lp ez fb lq lr"><a href="https://www.pythoneur.com/top-3-python-data-cleaning-libraries/" rel="noopener  ugc nofollow" target="_blank"><div class="ls ab dw"><div class="lt ab lu cl cj lv"><h2 class="bd hj fi z dy lw ea eb lx ed ef hh bi translated">使用这三大Python库节省数据清理时间</h2><div class="ly l"><h3 class="bd b fi z dy lw ea eb lx ed ef dx translated">如果您知道针对特定数据清理问题的正确库，清理数据会简单得多…</h3></div><div class="lz l"><p class="bd b fp z dy lw ea eb lx ed ef dx translated">www.pythoneur.com</p></div></div><div class="ma l"><div class="np l mc md me ma mf io lr"/></div></div></a></div></div></div>    
</body>
</html>