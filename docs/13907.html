<html>
<head>
<title>How to Upgrade Jira on Windows &amp; Linux Server</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Windows和Linux服务器上升级吉拉</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/how-to-upgrade-jira-on-windows-linux-server-2ab10fbb3196?source=collection_archive---------10-----------------------#2022-08-04">https://medium.com/geekculture/how-to-upgrade-jira-on-windows-linux-server-2ab10fbb3196?source=collection_archive---------10-----------------------#2022-08-04</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="92fc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Atlassian应用程序入门|吉拉| Linux服务器</p><p id="c2b0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们先快速回顾一下，Atlassian是一家软件公司，它开发了多种工具和产品，广泛应用于IT行业。IT团队/组织使用的一些受欢迎的产品有:</p><ul class=""><li id="52c8" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">吉拉→用于项目管理和问题跟踪。</li><li id="74ec" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">Bitbucket →使用Git版本控制的源代码管理。</li><li id="a620" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">汇流→用于文档</li><li id="3519" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">Bamboo →一个CI/CD工具，与Bitbucket很好地集成在一起</li><li id="bb11" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">ops genie→IT运营团队的事件警报工具</li><li id="cebc" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">Trello →协作工具</li><li id="57de" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">人群→单一登录和身份管理工具</li></ul><p id="579b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要了解更多信息，请查看他们的<a class="ae jr" href="https://www.atlassian.com/software" rel="noopener ugc nofollow" target="_blank">软件产品</a>，他们正在开发一些好东西。</p><p id="1aa3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，在本文中，我将一步一步地分享如何升级吉拉应用程序，无论您是在Windows还是Linux服务器上运行您的实例。</p><h1 id="b5ce" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">假设和建议</h1><p id="6d4b" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">在大多数组织中，这些工具由IT运营团队维护，无论是基础设施、开发运维还是站点可靠性工程团队。</p><ul class=""><li id="7025" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">请务必将吉拉升级至其最新的LTS版本，以获取最新的安全补丁和更新的功能。基于Atlassian的新版本发布频率和适当的生命周期管理，这些Atlassian应用程序。我建议每季度升级一次吉拉，或者一年升级4次</li><li id="31a7" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">出于本文的目的，我假设您熟悉这些应用程序的安装、设置和配置。</li></ul></div><div class="ab cl kv kw gp kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="hb hc hd he hf"><h1 id="f672" class="js jt hi bd ju jv lc jx jy jz ld kb kc kd le kf kg kh lf kj kk kl lg kn ko kp bi translated">Linux服务器上的吉拉升级</h1><figure class="li lj lk ll fd lm er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es lh"><img src="../Images/549a0bed632b219bd204be1366dbd392.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dQA3wtCKPgS9pKendcpZjw.jpeg"/></div></div><figcaption class="lt lu et er es lv lw bd b be z dx">Image source: <a class="ae jr" href="https://www.praecipio.com/resources/blog/why-upgrade-your-atlassian-stack" rel="noopener ugc nofollow" target="_blank">praecipio.com</a></figcaption></figure><h2 id="767e" class="lx jt hi bd ju ly lz ma jy mb mc md kc iq me mf kg iu mg mh kk iy mi mj ko mk bi translated">准备升级的步骤</h2><ol class=""><li id="9f17" class="jd je hi ih b ii kq im kr iq ml iu mm iy mn jc mo jj jk jl bi translated">下载你要升级到的LTS版JIRA:【https://www.atlassian.com/software/jira/download-archives】T2</li></ol><ul class=""><li id="af86" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">将Linux安装程序文件移动到服务器上的主目录中:</li></ul><pre class="li lj lk ll fd mp mq mr ms aw mt bi"><span id="ceab" class="lx jt hi mq b fi mu mv l mw mx">scp ./atlassian-jira-software-X.X.X-x64.bin root@yourServer:/home/xx</span></pre><ul class=""><li id="9ea3" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">将文件从您的主目录移动到Atlassian安装文件夹→运行以下命令检查吉拉安装文件夹(默认的吉拉安装文件夹是:/opt/Atlassian/jira) →</li></ul><pre class="li lj lk ll fd mp mq mr ms aw mt bi"><span id="db5a" class="lx jt hi mq b fi mu mv l mw mx"># get jira installation folder<br/>ps -ef | grep -i jira</span><span id="e094" class="lx jt hi mq b fi my mv l mw mx"># move the new installer file to the jira installation folder<br/>mv /home/yourHomeFolder/atlassian-jira-software-X.X.X-x64.bin /opt/Atlassian/</span></pre><ul class=""><li id="b194" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">确保文件是可执行的，如果不是，运行以下命令:</li></ul><pre class="li lj lk ll fd mp mq mr ms aw mt bi"><span id="e334" class="lx jt hi mq b fi mu mv l mw mx">chmod +x /opt/atlassian/atlassian-jira-software-X.X.X-x64.bin</span></pre><p id="c9fa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.验证所有插件都是最新的</p><ul class=""><li id="205d" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">登录吉拉管理菜单→进入管理应用程序→查看它们是否是需要更新的插件</li></ul><p id="3399" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.Vefiry插件与您正在升级的版本兼容。</p><ul class=""><li id="6190" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">管理应用程序→插件列表下→转到吉拉更新检查</li><li id="b5ed" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">按照Atlassian的建议运行“规划您的升级”,以验证我们当前使用的吉拉版本不会出现任何错误。</li></ul><p id="bc9c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">4.完成运行状况检查，以确保当前许可证或数据库没有问题。</p><ul class=""><li id="7043" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">管理菜单→系统→故障排除和支持工具</li></ul><p id="f7f9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">更多关于这次准备的信息可以在这里找到:<a class="ae jr" href="https://confluence.atlassian.com/adminjiraserver/preparing-for-the-upgrade-966063325.html#:~:text=Go%20to%20Administration%20(%20)%20%3E%20Manage,upgrade%20to%2C%20and%20click%20Check" rel="noopener ugc nofollow" target="_blank">准备升级</a>。一旦你完成了所有这些，你的应用程序就可以升级了。</p><h2 id="e2f0" class="lx jt hi bd ju ly lz ma jy mb mc md kc iq me mf kg iu mg mh kk iy mi mj ko mk bi translated">升级实施步骤</h2><ol class=""><li id="28ab" class="jd je hi ih b ii kq im kr iq ml iu mm iy mn jc mo jj jk jl bi translated">拍摄Linux虚拟机服务器的快照。</li><li id="9dff" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc mo jj jk jl bi translated">对吉拉数据库做个完整备份。</li><li id="2e72" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc mo jj jk jl bi translated">进入插件管理并更新所有需要更新的插件→大多数情况下，更新插件需要重新索引，根据需要执行重新索引</li></ol><ul class=""><li id="66e1" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">根据您在准备阶段所做的更新检查建议，更新可以更新的插件，并禁用其他插件。</li><li id="ebe1" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">吉拉管理菜单→系统→索引→并执行完全重新索引</li></ul><blockquote class="mz na nb"><p id="f82d" class="if ig nc ih b ii ij ik il im in io ip nd ir is it ne iv iw ix nf iz ja jb jc hb bi translated"><strong class="ih hj">以上步骤非常重要，如果您需要恢复物品，应正确执行。</strong></p><p id="f713" class="if ig nc ih b ii ij ik il im in io ip nd ir is it ne iv iw ix nf iz ja jb jc hb bi translated"><strong class="ih hj">注意:吉拉主目录和吉拉安装目录是两个不同的文件夹。确保您已经查看了这两个文件夹的内容</strong></p></blockquote><p id="0448" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">4.制作以下当前文件的副本:</p><pre class="li lj lk ll fd mp mq mr ms aw mt bi"><span id="11ba" class="lx jt hi mq b fi mu mv l mw mx"># this is for your JVM settings and configs<br/>setenv.sh → located here: /opt/atlassian/jira/bin/setenv.sh</span><span id="13ca" class="lx jt hi mq b fi my mv l mw mx"># this is a for your server configs <br/>server.xml → located here: /opt/atlassian/jira/conf/server.xml</span></pre><ul class=""><li id="0125" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">通常，在安装过程中，只会修改吉拉安装目录的内容，而不会修改吉拉主目录的内容。但是最好是安全的，然后抱歉，所以只需要做这两个文件的副本</li></ul><pre class="li lj lk ll fd mp mq mr ms aw mt bi"><span id="10b0" class="lx jt hi mq b fi mu mv l mw mx"># this is for your app Database configs<br/>dbconfig.xml → located here: /yourJiraHomeDirectory/dbconfig.xml</span><span id="1b8c" class="lx jt hi mq b fi my mv l mw mx">limits.conf → located here: /etc/security/limits.conf</span></pre><p id="8c65" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">5.吉拉站→服务吉拉站</p><p id="e01b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">7.通过运行以下命令，制作当前吉拉的副本:</p><pre class="li lj lk ll fd mp mq mr ms aw mt bi"><span id="f9a5" class="lx jt hi mq b fi mu mv l mw mx">cd /opt/atlassian/</span><span id="fa0b" class="lx jt hi mq b fi my mv l mw mx">cp -Rp ./jira ./jira.old</span></pre><h2 id="c840" class="lx jt hi bd ju ly lz ma jy mb mc md kc iq me mf kg iu mg mh kk iy mi mj ko mk bi translated">安装新的吉拉版本</h2><p id="7a17" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">8.运行新的安装程序文件→确保文件所有权是root:</p><pre class="li lj lk ll fd mp mq mr ms aw mt bi"><span id="5243" class="lx jt hi mq b fi mu mv l mw mx"># chnaging file ownership to root<br/>chown root:root ./atlassian-jira-software-X.X.X-x64.bin</span><span id="bb56" class="lx jt hi mq b fi my mv l mw mx"># run the new installer<br/>./atlassian-jira-software-X.X.X-x64.bin</span></pre><ul class=""><li id="b248" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">按照如下所示的提示进行操作:</li></ul><figure class="li lj lk ll fd lm er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es ng"><img src="../Images/babec028dc6ca95162df76600cd39ea1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7cq2xSBcX3lgv53zPn38UA.png"/></div></div></figure><p id="a35a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">9.<strong class="ih hj"> <em class="nc">成功完成安装后，暂时不要启动吉拉</em> </strong></p><ul class=""><li id="94d9" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">验证配置。如果xml文件发生了更改，则在升级后不会更改。还原(db config . XML—limits . conf—setenv . sh—server . XML)</li></ul><p id="fea4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">然后启动吉拉，等待仪表盘可用→ </strong> service jira start</p><h1 id="12ed" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">解决纷争</h1><p id="833a" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">如果遇到一些错误，请在退出前尝试排除故障。遇到任何问题时检查日志:</p><ul class=""><li id="7dd5" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">tail-30f/opt/atlassian/jira/logs/catalina . out</li><li id="f0b3" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">查看*。可能已经更改的xml文件</li><li id="8167" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">如果你遇到插件问题，而吉拉没有启动→启动吉拉，禁用所有插件</li></ul><pre class="li lj lk ll fd mp mq mr ms aw mt bi"><span id="2c99" class="lx jt hi mq b fi mu mv l mw mx">/opt/atlassian/bin/start-jira.sh --disable-all-addons</span></pre><ul class=""><li id="b70c" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">打开<code class="du nh ni nj mq b"><strong class="ih hj"><em class="nc">setenv.sh</em></strong></code>文件，确保相对于您的RAM分配了合适的或推荐的JVM内存</li></ul><h1 id="4642" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">退出升级</h1><p id="9454" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">如果吉拉升级失败，所有故障排除工作都将失败，您将无法正常运行新版本。您可以使用我们在第7步中创建的吉拉文件夹副本来恢复之前的版本，该版本可以正常工作。</p><p id="93e3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">请执行以下操作:</p><ul class=""><li id="9954" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">吉拉站→服务吉拉站</li></ul><pre class="li lj lk ll fd mp mq mr ms aw mt bi"><span id="604b" class="lx jt hi mq b fi mu mv l mw mx">cd /opt/Atlassian</span><span id="032d" class="lx jt hi mq b fi my mv l mw mx"># rename the current new jira folder<br/>mv ./jira ./jira.new</span><span id="496d" class="lx jt hi mq b fi my mv l mw mx"># rename the older jira folder<br/>mv /jira.old ./jira</span></pre><ul class=""><li id="ebca" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">启动吉拉→服务吉拉启动</li></ul><p id="3ece" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您仍然遇到问题，只需从您在步骤1中拍摄的快照将您的Linux server VM恢复到升级前的状态，检查一下，准备好再次尝试时再试一次。如果一切顺利，您将得到如下所示的页面:</p><figure class="li lj lk ll fd lm er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es nk"><img src="../Images/8bf53604d652fe2d259dd4ba5e958b4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VoAYg8y8bDPRsh9B8jE2dw.png"/></div></div><figcaption class="lt lu et er es lv lw bd b be z dx">Jira Upgrade successfully page</figcaption></figure><blockquote class="mz na nb"><p id="603f" class="if ig nc ih b ii ij ik il im in io ip nd ir is it ne iv iw ix nf iz ja jb jc hb bi translated">如果您在windows服务器上运行吉拉实例，请查看如何在Windows服务器上升级吉拉的第二部分。</p></blockquote><blockquote class="nl"><p id="0082" class="nm nn hi bd no np nq nr ns nt nu jc dx translated">干杯！！</p></blockquote></div></div>    
</body>
</html>