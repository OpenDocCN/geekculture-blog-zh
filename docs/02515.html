<html>
<head>
<title>DDA Line Drawing Algorithm</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">DDA画线算法</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/dda-line-drawing-algorithm-be9f069921cf?source=collection_archive---------1-----------------------#2021-05-18">https://medium.com/geekculture/dda-line-drawing-algorithm-be9f069921cf?source=collection_archive---------1-----------------------#2021-05-18</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="80dc" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">DDA画线算法举例说明</h2></div><p id="6e03" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在计算机图形学中，我们需要用离散的像素来表示连续的图形对象。这个过程称为扫描转换。每个图形系统都必须将直线、圆和椭圆等图元转换成像素集合。</p><p id="84d6" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">画线算法用于在离散的图形媒体中画线。计算机图形学中有三种画线算法。</p><ol class=""><li id="e792" class="jt ju hi iz b ja jb jd je jg jv jk jw jo jx js jy jz ka kb bi translated">DDA算法(数字微分分析器)</li><li id="78af" class="jt ju hi iz b ja kc jd kd jg ke jk kf jo kg js jy jz ka kb bi translated">中点算法</li><li id="4cae" class="jt ju hi iz b ja kc jd kd jg ke jk kf jo kg js jy jz ka kb bi translated">布雷森汉姆线算法</li></ol><p id="47b4" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">今天我将介绍DDA算法并解释它是如何工作的。</p><p id="fb73" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在继续算法之前，让我们回忆一下线方程。</p><h2 id="8df4" class="kh ki hi bd kj kk kl km kn ko kp kq kr jg ks kt ku jk kv kw kx jo ky kz la lb bi translated">直线方程</h2><figure class="ld le lf lg fd lh er es paragraph-image"><div class="er es lc"><img src="../Images/bf0494cc258d217a68fa6648920d28c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:250/format:webp/1*cELlY5ciIr-nBgbzfvxesw.png"/></div></figure><figure class="ld le lf lg fd lh er es paragraph-image"><div class="er es lk"><img src="../Images/77331698ac07559e7c0b9149126dacca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1258/format:webp/0*U-WxqUtI1BvmwJRW.png"/></div></figure><h2 id="0235" class="kh ki hi bd kj kk kl km kn ko kp kq kr jg ks kt ku jk kv kw kx jo ky kz la lb bi translated">寻找下一个画直线的像素</h2><p id="67fa" class="pw-post-body-paragraph ix iy hi iz b ja ll ij jc jd lm im jf jg ln ji jj jk lo jm jn jo lp jq jr js hb bi translated">我们需要两个端点，P和Q，在<a class="ae lq" href="https://en.wikipedia.org/wiki/Raster_scan" rel="noopener ugc nofollow" target="_blank">光栅</a>屏幕上画一条线。我们从P坐标开始，寻找下一个像素，直到到达端点q。</p><p id="5736" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们画线的时候有三种特殊情况。</p><p id="8b30" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj"> <em class="lr">案例一:画一条水平线:m = 0 </em> </strong></p><p id="c792" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">水平线具有相同的Y坐标值。在这种情况下，我们只需要考虑X坐标值的变化。我们首先绘制像素P，并仅将X坐标值增加1来获得下一个像素。</p><figure class="ld le lf lg fd lh er es paragraph-image"><div class="er es ls"><img src="../Images/f264946be622362755e3e0b5c118cf3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:572/format:webp/1*XmmC-YiGvMDarKFPAObavQ.png"/></div></figure><p id="a98d" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj"> <em class="lr">情况二:画一条竖线:m未定义</em> </strong></p><p id="988d" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">垂直线具有相同的X坐标值和不同的Y坐标值。与水平线绘制类似，我们首先绘制初始像素(P)，这次我们将Y坐标值增加1以获得下一个像素，直到到达端点q。</p><figure class="ld le lf lg fd lh er es paragraph-image"><div class="er es ls"><img src="../Images/c51304b5aee8f2cc37283aabd6a7f693.png" data-original-src="https://miro.medium.com/v2/resize:fit:572/format:webp/1*QC3-UZ7CUrNGRklplP04Ug.png"/></div></figure><p id="a3cb" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj"> <em class="lr">案例三:画一条对角线:m = 1 </em> </strong></p><p id="38c4" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">最后一个特殊场景是画一条对角线，其中斜率等于1。为了得到对角线上的下一个像素，我们需要将X和Y坐标值都增加1。</p><figure class="ld le lf lg fd lh er es paragraph-image"><div class="er es lt"><img src="../Images/4a4817ab95cdbd8de78f4f92175a3e53.png" data-original-src="https://miro.medium.com/v2/resize:fit:574/format:webp/1*sCsguBe4uc0_XGvv_40N8A.png"/></div></figure><p id="e8bd" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">到目前为止，我们讨论的场景都是特例。一般来说，我们要在斜率大于/小于1的地方画线。在这种情况下，我们可以使用DDA算法来画线。</p><h1 id="1ca3" class="lu ki hi bd kj lv lw lx kn ly lz ma kr io mb ip ku ir mc is kx iu md iv la me bi translated">DDA算法</h1><p id="8309" class="pw-post-body-paragraph ix iy hi iz b ja ll ij jc jd lm im jf jg ln ji jj jk lo jm jn jo lp jq jr js hb bi translated">DDA代表数字微分分析器。这是一个增量线算法，每一步的计算都是基于前一步的结果。</p><p id="8e80" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">该算法基于斜率值有两种情况。</p><p id="d0e7" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们把(X1，Y1)和(X2，Y2)作为我们的端点。</p><h2 id="d32b" class="kh ki hi bd kj kk kl km kn ko kp kq kr jg ks kt ku jk kv kw kx jo ky kz la lb bi translated"><strong class="ak"> <em class="mf">案例一:当|m| &lt; 1 </em> </strong></h2><p id="e16c" class="pw-post-body-paragraph ix iy hi iz b ja ll ij jc jd lm im jf jg ln ji jj jk lo jm jn jo lp jq jr js hb bi translated">假设和X1 &lt; X2</p><p id="cd4d" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">Start with,</p><p id="e8b3" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="lr"> X = X1，Y = Y1 </em></p><p id="69e0" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">正如我们所知，直线的斜率可以用，</p><figure class="ld le lf lg fd lh er es paragraph-image"><div class="er es mg"><img src="../Images/2ae5ee880aed20e55f32877909b71306.png" data-original-src="https://miro.medium.com/v2/resize:fit:288/format:webp/1*l7mY3XITnOJciutfRzw5pw.png"/></div></figure><p id="554b" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这种情况下，我们总是将X坐标值的差值保持为1。</p><figure class="ld le lf lg fd lh er es paragraph-image"><div class="er es mh"><img src="../Images/a35e3cef25b39c72a871f0f46c282550.png" data-original-src="https://miro.medium.com/v2/resize:fit:264/format:webp/1*G_9-lGKVjDR69lkNH7fXpA.png"/></div></figure><p id="48c8" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，我们可以简单地通过在当前Y坐标上添加斜率来计算下一个Y坐标值。</p><figure class="ld le lf lg fd lh er es paragraph-image"><div class="er es mi"><img src="../Images/b57ca55fce0d8d8e42074c0b9092edce.png" data-original-src="https://miro.medium.com/v2/resize:fit:262/format:webp/1*Tvmh4OFFimMga3mH6cq1lQ.png"/></div></figure><figure class="ld le lf lg fd lh er es paragraph-image"><div class="er es mh"><img src="../Images/50e109d42c1703002f63f7315b24ff87.png" data-original-src="https://miro.medium.com/v2/resize:fit:264/format:webp/1*2PJ5DoyyRdQjQiE8d8r0qw.png"/></div></figure><p id="584d" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">继续直到X = X2</p><h2 id="90a0" class="kh ki hi bd kj kk kl km kn ko kp kq kr jg ks kt ku jk kv kw kx jo ky kz la lb bi translated"><strong class="ak"> <em class="mf">案例二:当|m| &gt; 1 </em> </strong></h2><p id="7416" class="pw-post-body-paragraph ix iy hi iz b ja ll ij jc jd lm im jf jg ln ji jj jk lo jm jn jo lp jq jr js hb bi translated">与第一种情况类似，首先，</p><p id="a85d" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="lr"> X = X1，Y = Y1 </em></p><p id="96c6" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">但是在这种情况下，我们将Y值增加1，而不是X值。</p><figure class="ld le lf lg fd lh er es paragraph-image"><div class="er es mj"><img src="../Images/d9ae17e49c8d3506659d5a749297379c.png" data-original-src="https://miro.medium.com/v2/resize:fit:242/format:webp/1*c05KjJeqECerz511Mi1DgQ.png"/></div></figure><p id="fbcd" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">所以，当我们把这个赋值给斜率方程时，我们可以得到当前的X值。</p><figure class="ld le lf lg fd lh er es paragraph-image"><div class="er es mg"><img src="../Images/8622493d541b443792e805235e317578.png" data-original-src="https://miro.medium.com/v2/resize:fit:288/format:webp/1*AAxhjANGjKUmwzuhCE-scw.png"/></div></figure><figure class="ld le lf lg fd lh er es paragraph-image"><div class="er es mk"><img src="../Images/33c479ae67227a542ed1774865a1f16c.png" data-original-src="https://miro.medium.com/v2/resize:fit:286/format:webp/1*u8qvRJiH-mttRgI1carzeg.png"/></div></figure><p id="a7e4" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">继续直到Y = Y2</p><blockquote class="ml mm mn"><p id="bb99" class="ix iy lr iz b ja jb ij jc jd je im jf mo jh ji jj mp jl jm jn mq jp jq jr js hb bi translated">N <!-- -->注:由于我们处理的是像素，所以需要整数值作为坐标。我们需要对分数值进行四舍五入。</p></blockquote><h2 id="71a6" class="kh ki hi bd kj kk kl km kn ko kp kq kr jg ks kt ku jk kv kw kx jo ky kz la lb bi translated">例子</h2><p id="146b" class="pw-post-body-paragraph ix iy hi iz b ja ll ij jc jd lm im jf jg ln ji jj jk lo jm jn jo lp jq jr js hb bi translated"><strong class="iz hj"> <em class="lr">例1 </em> </strong></p><p id="72a2" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">从(2，1)到(8，5)画一条线</p><p id="97b7" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">X1 = 2，X2 = 8，Y1 = 1，Y2 = 5</p><p id="2b2c" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">首先，我们需要计算直线的斜率。</p><figure class="ld le lf lg fd lh er es paragraph-image"><div class="er es mr"><img src="../Images/2fe8bca2b43eb1fb2ace30147b4163c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:466/format:webp/1*UXIva5giXjfu3PKpyY2baw.png"/></div></figure><p id="290c" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">斜率小于1，我们需要遵循案例1中的步骤。将X值递增1，并加上slope以获得相应的Y值。最后四舍五入Y值。</p><figure class="ld le lf lg fd lh er es paragraph-image"><div class="er es ms"><img src="../Images/633d9a9df53204e6f180569ea0ad7b30.png" data-original-src="https://miro.medium.com/v2/resize:fit:566/format:webp/1*IBEeBGskW6OdzTxAa6r_FQ.png"/></div></figure><figure class="ld le lf lg fd lh er es paragraph-image"><div class="er es mt"><img src="../Images/70736ad6ab567f4f8726bc385bd967aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:576/format:webp/1*KGXjMVbkl-XUJLnNGqPcfQ.png"/></div></figure><p id="2a45" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj"> <em class="lr">例2 </em> </strong></p><p id="33a2" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">从(3，2)到(7，8)画一条线</p><p id="0981" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">X1 = 3，X2 = 7，Y1 = 2，Y2 = 8</p><p id="78a8" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">线的斜率</p><figure class="ld le lf lg fd lh er es paragraph-image"><div class="er es mu"><img src="../Images/7dc17bd4f038bb92cc269b693a3535aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:398/format:webp/1*7rZ0zK_GXzwuPLV2cn9KFQ.png"/></div></figure><p id="e137" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">斜率大于1，我们需要遵循情况2中的步骤。</p><figure class="ld le lf lg fd lh er es paragraph-image"><div class="er es mv"><img src="../Images/2a15b02835cc704af71ecd7113e09017.png" data-original-src="https://miro.medium.com/v2/resize:fit:538/format:webp/1*OXOA9-_a3KcHMm-7bIUPtQ.png"/></div></figure><figure class="ld le lf lg fd lh er es paragraph-image"><div class="er es mw"><img src="../Images/3059efc445c33aa2a363a4a6fc9ff5ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:564/format:webp/1*hghqgR-ufwQxrqZL94iuiQ.png"/></div></figure><p id="a31c" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">DDA算法简单且易于计算，因为每一步只有两次加法。这种算法的缺点之一是涉及舍入功能。舍入运算耗费大量时间，舍入值的累加会导致累加误差。</p><blockquote class="mx"><p id="3c3f" class="my mz hi bd na nb nc nd ne nf ng js dx translated">注意:</p><p id="1d98" class="my mz hi bd na nb nc nd ne nf ng js dx translated">如果X1 &gt; X2，则以(X2，Y2)为起点，以(X1，Y1)为终点，然后继续我们今天所学的DDA算法。</p></blockquote><p id="4cc7" class="pw-post-body-paragraph ix iy hi iz b ja nh ij jc jd ni im jf jg nj ji jj jk nk jm jn jo nl jq jr js hb bi translated">DDA线绘制点计算的节点包实现—<a class="ae lq" href="https://www.npmjs.com/package/dda-line-algorithm" rel="noopener ugc nofollow" target="_blank">https://www.npmjs.com/package/dda-line-algorithm</a></p><p id="f5a5" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">GitHub—<a class="ae lq" href="https://github.com/anushaihalapathirana/DDALineDrawing" rel="noopener ugc nofollow" target="_blank">https://github.com/anushaihalapathirana/DDALineDrawing</a></p></div></div>    
</body>
</html>