<html>
<head>
<title>Basics of Sails Js — Node Js MVC Framework</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Sails Js基础——节点Js MVC框架</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/basics-of-sails-js-node-js-mvc-framework-418bdbeaf3cd?source=collection_archive---------17-----------------------#2021-05-07">https://medium.com/geekculture/basics-of-sails-js-node-js-mvc-framework-418bdbeaf3cd?source=collection_archive---------17-----------------------#2021-05-07</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/fafcabcea4211266051d1d2e5757af23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1304/format:webp/1*lGJ2fnMJPH81u0z7A-MNsQ.png"/></div></figure><p id="d3a9" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">让我们从理解什么是MVC开始</p><p id="560d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"><em class="jk">【M-Model】(涉及数据库和规则)</em> </strong></p><p id="b0b6" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> <em class="jk"> V - View(它是设计和视觉方面)</em> </strong></p><p id="43bc" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> <em class="jk"> C控制器(通过逻辑连接模型和视图)</em> </strong></p><p id="3448" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">MVC是一种软件设计模式，它帮助我们将代码组织成模型、控制器和视图，从而改进代码结构和可读性。</p><p id="cead" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">Sails JS是NodeJS的MVC框架，它建立在node js和express Js之上，因此nodeJS和express中所有适用的内容都将与sails JS一起工作。</p><p id="a28c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><em class="jk">【</em><a class="ae jl" href="https://vinita2000.medium.com/getting-started-with-sails-js-installation-e16eca967db" rel="noopener"><em class="jk">这里是帆js</em></a><em class="jk"/>的安装指南</p><p id="6cb2" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">以下是sails项目的结构</p><h1 id="dff4" class="jm jn hi bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated"><strong class="ak"> app.js </strong></h1><p id="9e61" class="pw-post-body-paragraph im in hi io b ip kk ir is it kl iv iw ix km iz ja jb kn jd je jf ko jh ji jj hb bi translated">它位于文件夹的根目录，是启动整个应用程序的主文件</p><h1 id="b42a" class="jm jn hi bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated"><strong class="ak"> API </strong></h1><p id="c170" class="pw-post-body-paragraph im in hi io b ip kk ir is it kl iv iw ix km iz ja jb kn jd je jf ko jh ji jj hb bi translated">这个目录包含了应用程序的MVC结构</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="d57a" class="ky jn hi ku b fi kz la l lb lc"><em class="jk">api</em></span><span id="0681" class="ky jn hi ku b fi ld la l lb lc"><em class="jk"> →controllers</em></span><span id="8500" class="ky jn hi ku b fi ld la l lb lc"><em class="jk"> → helpers</em></span><span id="a060" class="ky jn hi ku b fi ld la l lb lc"><em class="jk"> → models</em></span><span id="ffcb" class="ky jn hi ku b fi ld la l lb lc"><em class="jk"> → policies</em></span></pre><h1 id="6235" class="jm jn hi bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated"><strong class="ak">控制器</strong></h1><p id="6ab3" class="pw-post-body-paragraph im in hi io b ip kk ir is it kl iv iw ix km iz ja jb kn jd je jf ko jh ji jj hb bi translated">在控制器内部，我们编写连接模型和视图的逻辑。</p><p id="fe10" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">以下是在sails js中创建控制器的三种方法</p><p id="9387" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> 1。</strong></p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="dc72" class="ky jn hi ku b fi kz la l lb lc"> sails generate controller test</span></pre><p id="d00e" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这将在控制器目录中创建一个testController.js文件，您可以在其中编写函数，如下所示</p><figure class="kp kq kr ks fd ij"><div class="bz dy l di"><div class="le lf l"/></div></figure><p id="4948" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">如果你有一个复杂的项目，建议为每个功能创建独立的文件，而不是将它们组合在一起，接下来我们将看到如何创建独立的控制器</p><p id="3857" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> 2。</strong></p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="0c7e" class="ky jn hi ku b fi kz la l lb lc">sails generate action test/create</span></pre><p id="25d3" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这将创建一个文件controller/test/create.js。该函数由多个字段初始化，如输入、退出和fn。你可以在里面写你创造的逻辑</p><figure class="kp kq kr ks fd ij"><div class="bz dy l di"><div class="le lf l"/></div></figure><p id="7f92" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> 3。</strong></p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="d64d" class="ky jn hi ku b fi kz la l lb lc">sails generate action test/create — no-actions2</span></pre><p id="9aa5" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这个方法将创建一个独立的文件，类似于步骤2，但是使用标准的节点js函数来访问req和res对象。</p><figure class="kp kq kr ks fd ij"><div class="bz dy l di"><div class="le lf l"/></div></figure><h1 id="a257" class="jm jn hi bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated">模型</h1><p id="9f13" class="pw-post-body-paragraph im in hi io b ip kk ir is it kl iv iw ix km iz ja jb kn jd je jf ko jh ji jj hb bi translated">下面是我们如何创建一个模型</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="c669" class="ky jn hi ku b fi kz la l lb lc">sails generate model test</span></pre><p id="f67d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在这里，您可以定义您的数据库模式，api/models/Test.js，测试模式现在可以在您的应用程序中全局访问，您不需要每次与数据库交互时都需要它。</p><h1 id="b9da" class="jm jn hi bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated">助手</h1><p id="16aa" class="pw-post-body-paragraph im in hi io b ip kk ir is it kl iv iw ix km iz ja jb kn jd je jf ko jh ji jj hb bi translated">帮助器包含全局可访问的文件，您帮助器创建多个控制器所需的文件/函数。</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="0641" class="ky jn hi ku b fi kz la l lb lc">sails generate helper test</span></pre><p id="bea8" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在可以从任何地方使用</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="01d5" class="ky jn hi ku b fi kz la l lb lc">await sails.helpers.test(…, …);</span></pre><h1 id="cb9c" class="jm jn hi bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated">政策</h1><p id="ff09" class="pw-post-body-paragraph im in hi io b ip kk ir is it kl iv iw ix km iz ja jb kn jd je jf ko jh ji jj hb bi translated">策略基本上类似于快速中间件，您可以在其中编写授权和身份验证代码。在api/policies中创建一个名为test.js的文件，并将以下代码粘贴到其中</p><figure class="kp kq kr ks fd ij"><div class="bz dy l di"><div class="le lf l"/></div></figure><p id="03ee" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在，您可以在create.js中应用这个中间件(策略)</p><p id="a6ad" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">转到config/policies.js并添加以下代码行</p><figure class="kp kq kr ks fd ij"><div class="bz dy l di"><div class="le lf l"/></div></figure><h1 id="469c" class="jm jn hi bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated">配置/路由. js</h1><p id="77de" class="pw-post-body-paragraph im in hi io b ip kk ir is it kl iv iw ix km iz ja jb kn jd je jf ko jh ji jj hb bi translated">现在是测试我们刚刚创建所有这些api的时候了</p><p id="52f7" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在配置目录中，转到routes.js</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="5577" class="ky jn hi ku b fi kz la l lb lc">config/routes.js</span></pre><p id="06fe" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">将以下代码粘贴到查看路线下方</p><figure class="kp kq kr ks fd ij"><div class="bz dy l di"><div class="le lf l"/></div></figure><p id="e955" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在，您可以根据这个请求从postman测试您的路线</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="b2bf" class="ky jn hi ku b fi kz la l lb lc">localhost:1337/test/create</span></pre><p id="e82f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">您应该会看到“已创建”的消息！！在控制台中，您应该从policies/test.js</p><blockquote class="lg lh li"><p id="706e" class="im in jk io b ip iq ir is it iu iv iw lj iy iz ja lk jc jd je ll jg jh ji jj hb bi translated">内部测试政策</p></blockquote><p id="e27b" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这应该足以让你开始使用sails js应用程序。</p><p id="1b5c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">下次见[<a class="ae jl" href="https://vinita2000.medium.com/crud-application-using-sails-js-and-mongodb-part-i-b0388afd128e" rel="noopener">sails js crud app</a></p><p id="6116" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">谢谢:)</p></div></div>    
</body>
</html>