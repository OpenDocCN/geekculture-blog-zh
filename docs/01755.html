<html>
<head>
<title>A Cool Animation for Debit/Credit Cards</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">借记卡/信用卡的酷动画</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/a-cool-animation-for-debit-credit-cards-87634e9d5a97?source=collection_archive---------13-----------------------#2021-04-22">https://medium.com/geekculture/a-cool-animation-for-debit-credit-cards-87634e9d5a97?source=collection_archive---------13-----------------------#2021-04-22</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/a5d86639770598d6bb3c2bc54599ba14.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1aG97kkbzMg4F7G4IOfNeQ.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx">A cool animation for debit/credit cards</figcaption></figure><div class=""/><p id="c5c2" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在一个慵懒的周六，在浏览Medium时，我偶然看到一篇文章，解释了如何在你的数字钱包应用中整理信用卡/借记卡。我没有读这篇文章，但决定自己制作一些动画(你可能会发现一篇类似的文章，有相同的动画。但是没有从上一篇文章中复制任何代码)。下面是我们将在这篇文章中努力实现的动画</p><figure class="jt ju jv jw fd hk er es paragraph-image"><div class="er es js"><img src="../Images/238b95bbe8e6c13e19f4fe8d4309fc9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:740/1*C2W2xbD6lhfaStAqQYXWIQ.gif"/></div><figcaption class="hr hs et er es ht hu bd b be z dx">Card animations demo</figcaption></figure><p id="ca2c" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">以下是我对此的看法:</p><p id="f4d0" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">第一步:设计一张卡片。这是我的卡片XML布局的外观</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="fef4" class="kc kd hx jy b fi ke kf l kg kh">&lt;?xml version="1.0" encoding="utf-8"?&gt;<br/><br/>&lt;androidx.cardview.widget.CardView xmlns:android="http://schemas.android.com/apk/res/android"<br/>    xmlns:app="http://schemas.android.com/apk/res-auto"<br/>    android:id="@+id/card_view"<br/>    android:layout_width="300dp"<br/>    android:layout_height="200dp"<br/>    android:padding="8dp"<br/>    app:cardCornerRadius="8dp"&gt;<br/><br/>    &lt;androidx.constraintlayout.widget.ConstraintLayout<br/>        android:layout_width="300dp"<br/>        android:layout_height="200dp"&gt;<br/><br/>        &lt;TextView<br/>            android:id="@+id/mastercard"<br/>            android:layout_width="wrap_content"<br/>            android:layout_height="wrap_content"<br/>            android:layout_margin="16dp"<br/>            android:text="@string/mastercard"<br/>            app:layout_constraintBottom_toBottomOf="parent"<br/>            app:layout_constraintEnd_toEndOf="parent" /&gt;<br/><br/>        &lt;app.example.cardshuffle.MasterCardIcon<br/>            android:layout_width="0dp"<br/>            android:layout_height="0dp"<br/>            app:layout_constraintBottom_toTopOf="@+id/mastercard"<br/>            app:layout_constraintEnd_toEndOf="@+id/mastercard"<br/>            app:layout_constraintStart_toStartOf="@+id/mastercard" /&gt;<br/><br/>        &lt;TextView<br/>            android:layout_width="0dp"<br/>            android:layout_height="wrap_content"<br/>            android:layout_marginStart="16dp"<br/>            android:layout_marginBottom="20dp"<br/>            android:text="@string/my_name"<br/>            app:layout_constraintBottom_toBottomOf="parent"<br/>            app:layout_constraintStart_toStartOf="parent" /&gt;<br/>    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;<br/>&lt;/androidx.cardview.widget.CardView&gt;</span></pre><figure class="jt ju jv jw fd hk er es paragraph-image"><div class="er es ki"><img src="../Images/9b64b0e616c48f1e9ff7ced83f55d693.png" data-original-src="https://miro.medium.com/v2/resize:fit:968/format:webp/1*pYVFurL6daEZ6j0wmh-Qeg.png"/></div><figcaption class="hr hs et er es ht hu bd b be z dx">Preview of card XML file</figcaption></figure><p id="6e7b" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这是预览的样子。我也设计了万事达卡图标。不过，使用图像会是一个更好的选择。如果你想检查图标的代码，检查这里</p><div class="hh hi ez fb hj kj"><a href="https://github.com/svvashishtha/CardShuffle/blob/master/app/src/main/java/app/example/cardshuffle/MasterCardIcon.java" rel="noopener  ugc nofollow" target="_blank"><div class="kk ab dw"><div class="kl ab km cl cj kn"><h2 class="bd hy fi z dy ko ea eb kp ed ef hw bi translated">svvashishtha/CardShuffle</h2><div class="kq l"><h3 class="bd b fi z dy ko ea eb kp ed ef dx translated">展示卡片动画的应用程序。通过在…上创建帐户，为svvashishtha/CardShuffle开发做出贡献</h3></div><div class="kr l"><p class="bd b fp z dy ko ea eb kp ed ef dx translated">github.com</p></div></div></div></a></div><p id="6558" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在我们需要三张动画卡片和三个按钮来触发/控制动画。因此，让我们设计我们的活动布局。这是活动的XML</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="7165" class="kc kd hx jy b fi ke kf l kg kh">&lt;?xml version="1.0" encoding="utf-8"?&gt;<br/>&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"<br/>    xmlns:app="http://schemas.android.com/apk/res-auto"<br/>    xmlns:tools="http://schemas.android.com/tools"<br/>    android:layout_width="match_parent"<br/>    android:layout_height="match_parent"<br/>    tools:context=".Main2Activity"&gt;<br/><br/>    &lt;FrameLayout<br/>        android:id="@+id/container"<br/>        android:layout_width="match_parent"<br/>        android:layout_height="0dp"<br/>        android:clipChildren="false"<br/>        android:foregroundGravity="center_horizontal"<br/>        app:layout_constraintBottom_toBottomOf="parent"<br/>        app:layout_constraintEnd_toEndOf="parent"<br/>        app:layout_constraintStart_toStartOf="parent"<br/>        app:layout_constraintTop_toTopOf="parent"&gt;<br/><br/><br/>        &lt;include<br/>            android:id="@+id/card1"<br/>            layout="@layout/card_layout"<br/>            android:layout_width="wrap_content"<br/>            android:layout_height="wrap_content"<br/>            android:layout_gravity="center" /&gt;<br/><br/>        &lt;include<br/>            android:id="@+id/card2"<br/>            layout="@layout/card_layout"<br/>            android:layout_width="wrap_content"<br/>            android:layout_height="wrap_content"<br/>            android:layout_gravity="center"<br/>            android:layout_marginBottom="@dimen/translationY" /&gt;<br/><br/>        &lt;include<br/>            android:id="@+id/card3"<br/>            layout="@layout/card_layout"<br/>            android:layout_width="wrap_content"<br/>            android:layout_height="wrap_content"<br/>            android:layout_gravity="center"<br/>            android:layout_marginBottom="@dimen/translation2Y" /&gt;<br/>    &lt;/FrameLayout&gt;<br/><br/>    &lt;Button<br/>        android:id="@+id/scatter"<br/>        android:layout_width="wrap_content"<br/>        android:layout_height="wrap_content"<br/>        android:layout_marginBottom="@dimen/dimen_48dp"<br/>        android:text="@string/scatter"<br/>        android:textAllCaps="false"<br/>        app:layout_constraintBottom_toBottomOf="parent"<br/>        app:layout_constraintEnd_toStartOf="@id/collect_cards"<br/>        app:layout_constraintStart_toStartOf="parent" /&gt;<br/><br/>    &lt;Button<br/>        android:id="@+id/collect_cards"<br/>        android:layout_width="wrap_content"<br/>        android:layout_height="wrap_content"<br/>        android:layout_marginBottom="@dimen/dimen_48dp"<br/>        android:text="@string/collect_cards"<br/>        android:textAllCaps="false"<br/>        app:layout_constraintBottom_toBottomOf="parent"<br/>        app:layout_constraintEnd_toStartOf="@id/flip_cards"<br/>        app:layout_constraintStart_toEndOf="@id/scatter" /&gt;<br/><br/>    &lt;Button<br/>        android:id="@+id/flip_cards"<br/>        android:layout_width="wrap_content"<br/>        android:layout_height="wrap_content"<br/>        android:layout_marginBottom="@dimen/dimen_48dp"<br/>        android:text="@string/flip_to_front"<br/>        android:textAllCaps="false"<br/>        app:layout_constraintBottom_toBottomOf="parent"<br/>        app:layout_constraintEnd_toEndOf="parent"<br/>        app:layout_constraintStart_toEndOf="@id/collect_cards" /&gt;<br/><br/>&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;</span></pre><p id="8365" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在<a class="ae ks" href="https://github.com/svvashishtha/CardShuffle/blob/master/app/src/main/res/layout/activity_main2.xml" rel="noopener ugc nofollow" target="_blank">https://github . com/svvashishtha/card shuffle/blob/master/app/src/main/RES/layout/activity _ main 2 . XML</a>处签出该文件。</p><p id="29dc" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在我们有了布局，剩下的就是制作卡片动画了。对于动画来说，最好将卡片放在一个列表中，这样我们就可以将它们作为列表项来引用，而不是通过它们的XML视图id来引用每张卡片。(容易将卡片称为卡片[0]而不是卡片1) <br/>所以首先将卡片添加到一个数组列表中。</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="992f" class="kc kd hx jy b fi ke kf l kg kh">private fun addCardsToList() {<br/>    card1.<em class="kt">tag </em>= "card1"<br/>    card2.<em class="kt">tag </em>= "card2"<br/>    card3.<em class="kt">tag </em>= "card3"</span><span id="fa19" class="kc kd hx jy b fi ku kf l kg kh">    cardList.add(card3)<br/>    cardList.add(card2)<br/>    cardList.add(card1)<br/>}</span></pre><p id="a5e5" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这里总共有3个动画:</p><ol class=""><li id="f336" class="kv kw hx iw b ix iy jb jc jf kx jj ky jn kz jr la lb lc ld bi translated">散布卡片动画</li><li id="62ef" class="kv kw hx iw b ix le jb lf jf lg jj lh jn li jr la lb lc ld bi translated">收集卡片动画</li><li id="31cb" class="kv kw hx iw b ix le jb lf jf lg jj lh jn li jr la lb lc ld bi translated">将最后一张牌翻到正面动画</li></ol><p id="9f71" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">让我们一个一个地过一遍。</p><h2 id="a17d" class="kc kd hx bd lj lk ll lm ln lo lp lq lr jf ls lt lu jj lv lw lx jn ly lz ma mb bi translated">散布卡片动画</h2><figure class="jt ju jv jw fd hk er es paragraph-image"><div class="er es mc"><img src="../Images/721bc51cd3ad7a985764ceff3a5a3df0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*u-9zhmk7QmB1zswXGpEo6w.jpeg"/></div><figcaption class="hr hs et er es ht hu bd b be z dx">Scatter animation</figcaption></figure><p id="f534" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">让我们试着把这个动画分解成简单的步骤。</p><ol class=""><li id="b87d" class="kv kw hx iw b ix iy jb jc jf kx jj ky jn kz jr la lb lc ld bi translated">动画灰色卡旋转，向上和向右平移</li><li id="4830" class="kv kw hx iw b ix le jb lf jf lg jj lh jn li jr la lb lc ld bi translated">红色/栗色卡片翻译成右。</li><li id="58e5" class="kv kw hx iw b ix le jb lf jf lg jj lh jn li jr la lb lc ld bi translated">蓝色卡片旋转并向右下方平移。</li></ol><h2 id="45b3" class="kc kd hx bd lj lk ll lm ln lo lp lq lr jf ls lt lu jj lv lw lx jn ly lz ma mb bi translated">制作灰色卡片的动画</h2><p id="3b0f" class="pw-post-body-paragraph iu iv hx iw b ix md iz ja jb me jd je jf mf jh ji jj mg jl jm jn mh jp jq jr hb bi translated">要旋转灰色卡片:</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="93a6" class="kc kd hx jy b fi ke kf l kg kh">cardList[0].animate()<br/>        .rotation(-30f)<br/>        .start()</span></pre><p id="6cfb" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">要向右平移，请添加平移X动画:</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="55cf" class="kc kd hx jy b fi ke kf l kg kh">cardList[0].animate()<br/>        .rotation(-30f)<br/>        .translationXBy(-1 * <em class="kt">resources</em>.getDimension(R.dimen.<em class="kt">translationX</em>))<br/>        .start()</span></pre><p id="cbcd" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">为了使中间的卡片可见，我们也需要将卡片向上移动(Y平移):</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="20d8" class="kc kd hx jy b fi ke kf l kg kh">cardList[0].animate()<br/>        .rotation(-30f)<br/>        .translationXBy(-1 * <em class="kt">resources</em>.getDimension(R.dimen.<em class="kt">translationX</em>))<br/>        .translationYBy(-1 * <em class="kt">resources</em>.getDimension(R.dimen.<em class="kt">translationY</em>))<br/>        .start()</span></pre><p id="b3a9" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">为了使动画看起来平滑和真实，我们应该使用插值器:</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="db6c" class="kc kd hx jy b fi ke kf l kg kh">cardList[0].animate()<br/>        .rotation(-30f)<br/>        .translationXBy(-1 * <em class="kt">resources</em>.getDimension(R.dimen.<em class="kt">translationX</em>))<br/>        .translationYBy(-1 * <em class="kt">resources</em>.getDimension(R.dimen.<em class="kt">translationY</em>))<br/>        .setInterpolator(OvershootInterpolator(3f))<br/>        .start()</span></pre><p id="5b4f" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这是灰卡(或第一张卡)的号码</p><h2 id="05d1" class="kc kd hx bd lj lk ll lm ln lo lp lq lr jf ls lt lu jj lv lw lx jn ly lz ma mb bi translated">制作中间(红色/栗色)卡片的动画</h2><p id="f764" class="pw-post-body-paragraph iu iv hx iw b ix md iz ja jb me jd je jf mf jh ji jj mg jl jm jn mh jp jq jr hb bi translated">将中间的卡片向右平移</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="1ff9" class="kc kd hx jy b fi ke kf l kg kh">cardList[1].animate()<br/>        .translationXBy(50f)<br/>        .setInterpolator(OvershootInterpolator(3f))<br/>        .start()</span></pre><h2 id="a506" class="kc kd hx bd lj lk ll lm ln lo lp lq lr jf ls lt lu jj lv lw lx jn ly lz ma mb bi translated">制作蓝色卡片的动画</h2><p id="90d7" class="pw-post-body-paragraph iu iv hx iw b ix md iz ja jb me jd je jf mf jh ji jj mg jl jm jn mh jp jq jr hb bi translated">制作这张卡片的动画非常简单。这将是相同的动画作为灰色卡，除了它将被逆转。</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="0fd2" class="kc kd hx jy b fi ke kf l kg kh">cardList[2].animate()<br/>        .rotation(30f)<br/>        .translationXBy (<em class="kt">resources</em>.getDimension(R.dimen.<em class="kt">translationX</em>))<br/>        .translationYBy (<em class="kt">resources</em>.getDimension(R.dimen.<em class="kt">translationY</em>))<br/>        .setInterpolator(OvershootInterpolator(3f))<br/>        .start()</span></pre><p id="21d8" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">仅此而已。现在你有一个很酷的动画来展示你钱包里所有的卡。</p><h2 id="ba04" class="kc kd hx bd lj lk ll lm ln lo lp lq lr jf ls lt lu jj lv lw lx jn ly lz ma mb bi translated">收集卡片动画</h2><p id="180e" class="pw-post-body-paragraph iu iv hx iw b ix md iz ja jb me jd je jf mf jh ji jj mg jl jm jn mh jp jq jr hb bi translated">现在我们已经分散了我们的卡片，我们需要用动画把它们带回到原来的位置。</p><h2 id="86ec" class="kc kd hx bd lj lk ll lm ln lo lp lq lr jf ls lt lu jj lv lw lx jn ly lz ma mb bi translated">重置灰色卡</h2><p id="d459" class="pw-post-body-paragraph iu iv hx iw b ix md iz ja jb me jd je jf mf jh ji jj mg jl jm jn mh jp jq jr hb bi translated">重置灰色卡</p><ol class=""><li id="726c" class="kv kw hx iw b ix iy jb jc jf kx jj ky jn kz jr la lb lc ld bi translated">将其旋转回原始状态，即0度。</li><li id="ff8b" class="kv kw hx iw b ix le jb lf jf lg jj lh jn li jr la lb lc ld bi translated">通过<em class="kt">资源</em>翻译X。getDimension(r . dimension<em class="kt">translationX</em>)</li><li id="bbae" class="kv kw hx iw b ix le jb lf jf lg jj lh jn li jr la lb lc ld bi translated">通过<em class="kt">资源</em>翻译Y。getDimension(r . dimen<em class="kt">翻译</em> Y)</li></ol><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="024e" class="kc kd hx jy b fi ke kf l kg kh">cardList[0].animate()<br/>        .rotation(0f)<br/>        .translationXBy (<em class="kt">resources</em>.getDimension(R.dimen.<em class="kt">translationX</em>))<br/>        .translationYBy (<em class="kt">resources</em>.getDimension(R.dimen.<em class="kt">translationY</em>))<br/>        .setInterpolator(OvershootInterpolator(3f))<br/>        .start()</span></pre><h2 id="cbda" class="kc kd hx bd lj lk ll lm ln lo lp lq lr jf ls lt lu jj lv lw lx jn ly lz ma mb bi translated">重置中间(红色/栗色)卡</h2><p id="03b9" class="pw-post-body-paragraph iu iv hx iw b ix md iz ja jb me jd je jf mf jh ji jj mg jl jm jn mh jp jq jr hb bi translated">要重置中间的卡</p><p id="568d" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">1.把它转换回原来的Y状态。</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="3e9e" class="kc kd hx jy b fi ke kf l kg kh">cardList[1].animate()<br/>        .translationXBy(-50f)<br/>        .setInterpolator(OvershootInterpolator(3f))<br/>        .start()</span></pre><h2 id="9fad" class="kc kd hx bd lj lk ll lm ln lo lp lq lr jf ls lt lu jj lv lw lx jn ly lz ma mb bi translated">重置蓝色卡片</h2><p id="977c" class="pw-post-body-paragraph iu iv hx iw b ix md iz ja jb me jd je jf mf jh ji jj mg jl jm jn mh jp jq jr hb bi translated">重置蓝色卡片</p><ol class=""><li id="37ee" class="kv kw hx iw b ix iy jb jc jf kx jj ky jn kz jr la lb lc ld bi translated">将其旋转回原始状态，即0度</li><li id="82fe" class="kv kw hx iw b ix le jb lf jf lg jj lh jn li jr la lb lc ld bi translated">翻译X by -1 * <em class="kt">资源</em>。getDimension(r . dimension<em class="kt">translation x</em>)</li><li id="368f" class="kv kw hx iw b ix le jb lf jf lg jj lh jn li jr la lb lc ld bi translated">翻译Y by -1 * <em class="kt">资源</em>。获取尺寸(r . dimension<em class="kt">translation</em>Y)</li></ol><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="2a6b" class="kc kd hx jy b fi ke kf l kg kh">cardList[2].animate()<br/>        .rotation(0f)<br/>        .translationXBy(-1 * <em class="kt">resources</em>.getDimension(R.dimen.<em class="kt">translationX</em>))<br/>        .translationYBy(-1 * <em class="kt">resources</em>.getDimension(R.dimen.<em class="kt">translationY</em>))<br/>        .setInterpolator(OvershootInterpolator(3f))<br/>        .start()</span></pre><p id="41d5" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在这些卡片又回到了原来的位置，并伴有一段甜蜜的动画。</p><h2 id="17b5" class="kc kd hx bd lj lk ll lm ln lo lp lq lr jf ls lt lu jj lv lw lx jn ly lz ma mb bi translated"><strong class="ak">将最后一张牌翻到前面</strong></h2><p id="f8ad" class="pw-post-body-paragraph iu iv hx iw b ix md iz ja jb me jd je jf mf jh ji jj mg jl jm jn mh jp jq jr hb bi translated">在这个例子中，我们需要将cardList[2]卡设置为cardList[0]，并将索引为0和1的卡分别移动到1和2。有点像一个队列，我们删除最后一个元素，把它推到第一个位置。</p><figure class="jt ju jv jw fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mi"><img src="../Images/e7741cf2749e55094683fd1d3b31e1f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FhnpzWyzmV3tEgqa0GVgaQ.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx">ArrayList before and after animation</figcaption></figure><p id="bbc6" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">为此，我扩展了ArrayList类，并添加了一个函数来完成这个操作</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="d362" class="kc kd hx jy b fi ke kf l kg kh"><em class="kt">/**<br/>* Moves an item from position index to 0 position.<br/>**/<br/></em>fun moveToFront(index: Int){<br/>    val temp = get(index)<br/>    for (i in index <em class="kt">downTo </em>1)<br/>    {<br/>        set(i , get(i-1))<br/>    }<br/>    set(0, temp)<br/>}</span></pre><p id="2058" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在以下位置签出此课</p><p id="fcef" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><a class="ae ks" href="https://github.com/svvashishtha/CardShuffle/blob/master/app/src/main/java/app/example/cardshuffle/CustomQueue.kt" rel="noopener ugc nofollow" target="_blank">https://github . com/svvashishtha/card shuffle/blob/master/app/src/main/Java/app/example/card shuffle/custom queue . kt</a></p><p id="8822" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在我们有了其他的东西，让我们看看动画本身。</p><figure class="jt ju jv jw fd hk er es paragraph-image"><div class="er es mj"><img src="../Images/8b6ee1724aa9010c8a8f4092c3eed396.png" data-original-src="https://miro.medium.com/v2/resize:fit:924/1*N68ZTjArE5A9AnDOmLOoJQ.gif"/></div><figcaption class="hr hs et er es ht hu bd b be z dx">Flip animation</figcaption></figure><p id="9952" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">将动画分成几个步骤</p><ol class=""><li id="a594" class="kv kw hx iw b ix iy jb jc jf kx jj ky jn kz jr la lb lc ld bi translated">从堆叠中取出蓝色卡片(向下旋转)</li><li id="f423" class="kv kw hx iw b ix le jb lf jf lg jj lh jn li jr la lb lc ld bi translated">将蓝色卡片移动到其他卡片的顶部(平移卡片的Z)</li><li id="8eca" class="kv kw hx iw b ix le jb lf jf lg jj lh jn li jr la lb lc ld bi translated">将蓝色卡片移动到其他卡片上方(旋转到原始位置+平移Y)</li><li id="b959" class="kv kw hx iw b ix le jb lf jf lg jj lh jn li jr la lb lc ld bi translated">移动灰色卡片和红色/栗色卡片，为蓝色卡片腾出空间。</li></ol><p id="0ef6" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">让我们看看每一个步骤，并进一步分解成简单的动画。</p><h2 id="580e" class="kc kd hx bd lj lk ll lm ln lo lp lq lr jf ls lt lu jj lv lw lx jn ly lz ma mb bi translated">从牌堆中取出蓝色牌</h2><p id="2795" class="pw-post-body-paragraph iu iv hx iw b ix md iz ja jb me jd je jf mf jh ji jj mg jl jm jn mh jp jq jr hb bi translated">这一步包括以下动画</p><ol class=""><li id="b7da" class="kv kw hx iw b ix iy jb jc jf kx jj ky jn kz jr la lb lc ld bi translated">将卡旋转45度</li><li id="8591" class="kv kw hx iw b ix le jb lf jf lg jj lh jn li jr la lb lc ld bi translated">稍微翻译一下X</li><li id="4c6c" class="kv kw hx iw b ix le jb lf jf lg jj lh jn li jr la lb lc ld bi translated">充分平移Y轴，使整张卡片可见</li><li id="d5d5" class="kv kw hx iw b ix le jb lf jf lg jj lh jn li jr la lb lc ld bi translated">缩放卡片，使其看起来像在空间中移动过。</li></ol><p id="c8c4" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这将看起来像这样</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="8d0f" class="kc kd hx jy b fi ke kf l kg kh">cardList[2].animate()<br/>        .rotation(45f)<br/>        .translationX(<em class="kt">resources</em>.getDimension(R.dimen.<em class="kt">translationX</em>))<br/>        .translationYBy(3 * <em class="kt">resources</em>.getDimension(R.dimen.<em class="kt">translationY</em>))<br/>        .scaleX(0.9f)<br/>        .scaleY(0.9f)<br/>        .setInterpolator(FastOutSlowInInterpolator())<br/>        .start()</span></pre><h2 id="5ff2" class="kc kd hx bd lj lk ll lm ln lo lp lq lr jf ls lt lu jj lv lw lx jn ly lz ma mb bi translated">将蓝色卡片移动到其他卡片的顶部(平移卡片的Z)</h2><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="57a2" class="kc kd hx jy b fi ke kf l kg kh">//pull blue card on top of other cards<br/>cardList[2].<em class="kt">z </em>= 2f <br/>//push 2 cards below<br/>cardList[1].<em class="kt">z </em>= -2f <br/>cardList[0].<em class="kt">z </em>= -2f</span></pre><p id="382e" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">就是这样。很简单对吧！</p><h2 id="8c56" class="kc kd hx bd lj lk ll lm ln lo lp lq lr jf ls lt lu jj lv lw lx jn ly lz ma mb bi translated">将蓝色卡片移动到其他卡片上方(旋转到原始位置+平移Y +缩放回原始大小)</h2><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="47a7" class="kc kd hx jy b fi ke kf l kg kh">//bring cardList[2] to it's new position<br/>cardList[2].animate()<br/>        .rotation(0f)<br/>        .translationX(0f)<br/>        .scaleX(1f)<br/>        .scaleY(1f)<br/>        .translationYBy(-5 * <em class="kt">resources</em>.getDimension(R.dimen.<em class="kt">translationY</em>))<br/><br/>        .setInterpolator(FastOutSlowInInterpolator())<br/>        .withEndAction <strong class="jy hy">{<br/>            </strong>//change the position of card in the list<br/>            //now cardList[2] will become cardList[0],<br/>            //cardList[0] will become cardList[1],<br/>            //cardList[1] will become cardList[2]<br/>            cardList.moveToFront(2)<br/>            flipping = false<br/>        <strong class="jy hy">}<br/>        </strong>.start()</span></pre><p id="be14" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">平移Y非常大，因为我们需要在步骤1中补偿Y平移。</p><p id="a42b" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">当这个动画完成后，我们进行数组列表操作，将卡片从数组列表的第2个位置移动到第0个位置。</p><h2 id="6c39" class="kc kd hx bd lj lk ll lm ln lo lp lq lr jf ls lt lu jj lv lw lx jn ly lz ma mb bi translated">移动灰色卡片和红色/栗色卡片，为蓝色卡片腾出空间</h2><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="fcf4" class="kc kd hx jy b fi ke kf l kg kh">//slide cardList[0] to 1 pos below<br/>cardList[0].animate()<br/>        .translationYBy (<em class="kt">resources</em>.getDimension(R.dimen.<em class="kt">translationY</em>))<br/>        .setInterpolator(OvershootInterpolator(3f))<br/>        .start()<br/>//slide cardList[1] to 1 pos below<br/>cardList[1].animate()<br/>        .translationYBy (<em class="kt">resources</em>.getDimension(R.dimen.<em class="kt">translationY</em>))<br/>        .setInterpolator(OvershootInterpolator(3f))<br/>        .start()</span></pre><p id="236a" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">移动卡片0和1只需要Y平移。</p><p id="e952" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这些是完成这个复杂动画所需的动画。结合所有这些步骤，我们得到:</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="5d99" class="kc kd hx jy b fi ke kf l kg kh">cardList[2].animate()<br/>        .rotation(45f)<br/>        .translationX(<em class="kt">resources</em>.getDimension(R.dimen.<em class="kt">translationX</em>))<br/>        .translationYBy(3 * <em class="kt">resources</em>.getDimension(R.dimen.<em class="kt">translationY</em>))<br/>        .scaleX(0.9f)<br/>        .scaleY(0.9f)<br/>        .setInterpolator(FastOutSlowInInterpolator())<br/>        .withEndAction <strong class="jy hy">{<br/>            </strong>//pull card on top of other cards<br/>            cardList[2].<em class="kt">z </em>= 2f<br/>            //push 2 cards below<br/>            cardList[1].<em class="kt">z </em>= -2f<br/>            cardList[0].<em class="kt">z </em>= -2f<br/><br/>            //bring cardList[2] to it's new position<br/>            cardList[2].animate()<br/>                    .rotation(0f)<br/>                    .translationX(0f)<br/>                    .scaleX(1f)<br/>                    .scaleY(1f)<br/>                    .translationYBy(-5 * <em class="kt">resources</em>.getDimension(R.dimen.<em class="kt">translationY</em>))<br/><br/>                    .setInterpolator(FastOutSlowInInterpolator())<br/>                    .withEndAction <strong class="jy hy">{<br/>                        </strong>//change the position of card in the list<br/>                        //now cardList[2] will become cardList[0],<br/>                        //cardList[0] will become cardList[1],<br/>                        //cardList[1] will become cardList[2]<br/>                        cardList.moveToFront(2)<br/>                        flipping = false<br/>                    <strong class="jy hy">}<br/>                    </strong>.start()<br/>            //slide cardList[0] to 1 pos below<br/>            cardList[0].animate()<br/>                    .translationYBy(<em class="kt">resources</em>.getDimension(R.dimen.<em class="kt">translationY</em>))<br/>                    .setInterpolator(OvershootInterpolator(3f))<br/>                    .start()<br/>            //slide cardList[1] to 1 pos below<br/>            cardList[1].animate()<br/>                    .translationYBy(<em class="kt">resources</em>.getDimension(R.dimen.<em class="kt">translationY</em>))<br/>                    .setInterpolator(OvershootInterpolator(3f))<br/>                    .start()<br/>        <strong class="jy hy">}<br/>        </strong>.start()</span></pre><p id="23b5" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">你可以在这里检查这个类的代码</p><div class="hh hi ez fb hj kj"><a href="https://github.com/svvashishtha/CardShuffle/blob/master/app/src/main/java/app/example/cardshuffle/Main2Activity.kt" rel="noopener  ugc nofollow" target="_blank"><div class="kk ab dw"><div class="kl ab km cl cj kn"><h2 class="bd hy fi z dy ko ea eb kp ed ef hw bi translated">svvashishtha/CardShuffle</h2><div class="kq l"><h3 class="bd b fi z dy ko ea eb kp ed ef dx translated">展示卡片动画的应用程序。通过在…上创建帐户，为svvashishtha/CardShuffle开发做出贡献</h3></div><div class="kr l"><p class="bd b fp z dy ko ea eb kp ed ef dx translated">github.com</p></div></div><div class="mk l"><div class="ml l mm mn mo mk mp hp kj"/></div></div></a></div><p id="1d03" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">就是这样。</p><p id="ddc5" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这个项目托管在github上</p><div class="hh hi ez fb hj kj"><a href="https://github.com/svvashishtha/CardShuffle" rel="noopener  ugc nofollow" target="_blank"><div class="kk ab dw"><div class="kl ab km cl cj kn"><h2 class="bd hy fi z dy ko ea eb kp ed ef hw bi translated">svvashishtha/CardShuffle</h2><div class="kq l"><h3 class="bd b fi z dy ko ea eb kp ed ef dx translated">展示卡片动画的应用程序。通过在…上创建帐户，为svvashishtha/CardShuffle开发做出贡献</h3></div><div class="kr l"><p class="bd b fp z dy ko ea eb kp ed ef dx translated">github.com</p></div></div><div class="mk l"><div class="mq l mm mn mo mk mp hp kj"/></div></div></a></div><p id="30d0" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">注意安全。</p></div></div>    
</body>
</html>