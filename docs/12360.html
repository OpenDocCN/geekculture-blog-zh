<html>
<head>
<title>Let’s Make A Telegram Bot With Node.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">让我们用Node.js制作一个电报机器人</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/lets-make-a-telegram-bot-with-node-js-2f63da6f1bc7?source=collection_archive---------3-----------------------#2022-05-09">https://medium.com/geekculture/lets-make-a-telegram-bot-with-node-js-2f63da6f1bc7?source=collection_archive---------3-----------------------#2022-05-09</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/38cf0fe44ced7c4da14792b2df470ad6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*cttlWsUhsMWVCRJa.jpg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Photo By Telegram Advisor</figcaption></figure><p id="910d" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我很抱歉最近没有发帖子，我一直忙于其他项目，并试图申请国外的远程工作，所以我没有太多的时间来分享任何有趣的东西，但希望你们会喜欢这个😅</p><p id="d9c0" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在这篇博客中，我们将发现用node.js制作一个电报机器人是多么容易，当我说容易时，我真的是指非常容易</p><p id="fbf8" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">老实说，我一直对毫无理由地制作一个电报机器人感到有点害怕，我只是想象它是一件复杂的事情，因为要获得一个令牌和东西，但最近我发现自己又一次陷入了可怕的睡眠灾难，所以我打开了我的笔记本电脑，启动了vscode，并决定尝试看看它是否真的有那么难？？？？</p><p id="28a9" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">什么是电报机器人❓ </strong></p><p id="0fdb" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">电报机器人本质上是一个基于事件和条件与用户交互的程序，基本上在这个场景中考虑它</p><p id="8288" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">你给机器人发一条信息，说“ping”，机器人就用图像、链接、视频、音频、地图或程序中描述的任何东西来响应</p><p id="93f5" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这个想法和你听说过的其他机器人没什么不同，所以让我们来看一个电报机器人的超级简单的例子</p><p id="9d46" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">电报机器人示例代码</strong></p><p id="92fa" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">下面是一个用Javascript编写的最小机器人，它将检查每条消息，如果它等于“ping ”,然后用一个问候来响应</p><figure class="js jt ju jv fd ij"><div class="bz dy l di"><div class="jw jx l"/></div></figure><p id="4a71" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这段代码的结果如下</p><figure class="js jt ju jv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jy"><img src="../Images/29b8ff05d8503b98b06d0315452709ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*E6_tRbgPaXkv7j83.jpg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Apologies for the giant image 😂</figcaption></figure><p id="3b8d" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">话虽如此，让我们来看看关于制作你的第一个电报机器人的更多细节</p><p id="4c6c" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">先决条件</strong></p><p id="ccc9" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">首先，我们需要用npm安装几个包来帮助我们完成项目，不用说用<code class="du jz ka kb kc b">npm init -y</code>初始化项目</p><pre class="js jt ju jv fd kd kc ke kf aw kg bi"><span id="38cf" class="kh ki hi kc b fi kj kk l kl km">npm i node-telegram-bot-api // the telegram bot api wrapper<br/>npm i dotenv // to work with </span></pre><p id="4a32" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在我写这篇文章的时候，我运行的是node版本17.4.0，你可以用<code class="du jz ka kb kc b">node --version</code>查看</p><p id="8486" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">设置电报机器人</strong></p><p id="9a9f" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">好了，在我们进入编码部分之前，我们需要“注册”并验证我们的应用程序，幸运的是，这要感谢@BotFather，这是一个用来制作机器人的机器人，我知道这很疯狂😂</p><p id="7498" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">因此，在手机或pc上打开你的telegram应用程序，并查找@BotFather，说明会非常清楚，在获得你的令牌后，创建一个<code class="du jz ka kb kc b">.env</code>文件来安全地存储你的令牌，以便在你将项目推向公共回购的情况下没有人会看到它，然后创建一个<code class="du jz ka kb kc b">.gitignore</code>文件并将<code class="du jz ka kb kc b">.env</code>文件添加到其中，以便在你使用<code class="du jz ka kb kc b">git</code>的情况下不会被提交</p><p id="de93" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">让我们的机器人打招呼</strong></p><p id="9caf" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">下一个例子与前面的例子非常相似，但是我们将更深入地研究api</p><figure class="js jt ju jv fd ij"><div class="bz dy l di"><div class="jw jx l"/></div></figure><p id="6b0f" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我们首先导入我们需要的东西，即api包装器和<code class="du jz ka kb kc b">dotenv</code></p><p id="7b7a" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">然后创建一个代表我们的机器人的<code class="du jz ka kb kc b">telegrambot</code>实例，它将与电报机器人api交互</p><p id="b1a3" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这个api包装器的工作方式是事件，事件被发出，你的机器人相应地响应</p><p id="7259" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">因此，在这种情况下，我们有一个消息事件被激发，这意味着一条消息已被发送到聊天中的机器人，它接受一个回调作为参数，这个回调有一个有趣的参数，让我们<code class="du jz ka kb kc b">console.log()</code>看看它有什么有用的属性</p><figure class="js jt ju jv fd ij"><div class="bz dy l di"><div class="jw jx l"/></div></figure><p id="6426" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">正如你所看到的，它有许多有趣的属性，我们可以在我们的程序中使用</p><p id="870e" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">让我们的机器人掷骰子</strong></p><p id="a3a8" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我们可以做的另一件有趣的事情是和机器人玩掷骰子，是的，你基本上是在和自己玩😏，让我们看看如何实现它</p><figure class="js jt ju jv fd ij"><div class="bz dy l di"><div class="jw jx l"/></div></figure><p id="753b" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">看到了吗？很简单，现在如果你看你的手机，你应该看到一个动画骰子已经发送后，你发送“骰子”在聊天</p><p id="c5ff" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">进行民意调查</strong></p><p id="8280" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">让用户参与投票并通过node.js实现这一点是很常见的，我们只是使用同一个bot对象来提示用户选择一个选项，如下例所示</p><figure class="js jt ju jv fd ij"><div class="bz dy l di"><div class="jw jx l"/></div></figure><p id="3e2e" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在让我们测试一下，看看结果</p><figure class="js jt ju jv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jy"><img src="../Images/44960c3ce395acd76373021e5cb6883f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*zIjQdE9WXGO0OsYg.jpg"/></div></div></figure><p id="2680" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">接下来是什么？</strong></p><p id="95bb" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">好了，现在你已经看到了如何制作自己的电报机器人，天空是无限的，你可以实现你想要的任何想法，我甚至不能开始列出这些知识可以做什么，无论你可以用Node.js做什么你现在可以用这个机器人做什么，一个express.js服务器来处理一些处理，并使用<code class="du jz ka kb kc b">axios </code>通过HTTP与机器人通信？是的，这是可以做到的！</p><p id="a950" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">Web抓取一些内容并回复？很简单，事实上，在这个博客上有20个掌声，我会去做的</p><p id="2cc0" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">但是您可能想知道如何理解api？我强烈推荐你去看看回购协议，尤其是这里的用法部分<a class="ae kn" href="https://github.com/yagop/node-telegram-bot-api/blob/master/doc/usage.md" rel="noopener ugc nofollow" target="_blank"/></p><p id="605a" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">非常感谢你的阅读，我希望你今天在这里学到了一两件事，请在下面的评论中让我知道你正在建设♥️</p></div></div>    
</body>
</html>