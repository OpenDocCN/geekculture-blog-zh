<html>
<head>
<title>Basically Redux Store in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">基本上是储存在反应堆里</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/basically-redux-store-in-react-5242f0d3068?source=collection_archive---------14-----------------------#2021-04-18">https://medium.com/geekculture/basically-redux-store-in-react-5242f0d3068?source=collection_archive---------14-----------------------#2021-04-18</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="b0d9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Redux是React中使用的状态管理工具。当我们想在整个应用程序中保持某个状态时，这非常方便。我以前在我的一些个人项目中使用过redux，并且有一些关于如何将Redux商店与React应用程序集成的知识。</p><p id="5f9a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是最近我有一次经历，我的一个同事不知道redux，他问我整个事情是如何工作的，我无法让他明白。所以我决定写这篇博客，以更简单的方式解释redux商店。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/39b7e2237fb802f1508835d08a3e74da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6BhcwCa10fsjci4Wk0QNeQ.png"/></div></div></figure></div><div class="ab cl jp jq gp jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="hb hc hd he hf"><h2 id="3b81" class="jw jx hi bd jy jz ka kb kc kd ke kf kg iq kh ki kj iu kk kl km iy kn ko kp kq bi translated">商店-</h2><p id="ff9e" class="pw-post-body-paragraph if ig hi ih b ii kr ik il im ks io ip iq kt is it iu ku iw ix iy kv ja jb jc hb bi translated">商店是存储所有数据的地方。在redux文献中，该数据也被称为<strong class="ih hj">【状态】</strong>。应用程序的整个状态都存储在存储中。</p><p id="b00d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="kw">我们如何创建一个商店？</em> </strong></p><blockquote class="kx ky kz"><p id="e77a" class="if ig kw ih b ii ij ik il im in io ip la ir is it lb iv iw ix lc iz ja jb jc hb bi translated">redux库提供了一个名为'<strong class="ih hj"> createStore' </strong>的函数。</p><p id="83fa" class="if ig kw ih b ii ij ik il im in io ip la ir is it lb iv iw ix lc iz ja jb jc hb bi translated">我们将一个<strong class="ih hj">‘Reducer’</strong>作为参数传递给商店。</p><p id="2224" class="if ig kw ih b ii ij ik il im in io ip la ir is it lb iv iw ix lc iz ja jb jc hb bi translated">* const store = createStore(reducer)</p><p id="511a" class="if ig kw ih b ii ij ik il im in io ip la ir is it lb iv iw ix lc iz ja jb jc hb bi translated">这就是我们在redux创建商店的方式。</p></blockquote><p id="d291" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="kw">我们如何在我们的app和商店之间建立链接？</em>T13】</strong></p><blockquote class="kx ky kz"><p id="ec2f" class="if ig kw ih b ii ij ik il im in io ip la ir is it lb iv iw ix lc iz ja jb jc hb bi translated">react-redux库提供了一个名为“<strong class="ih hj">&lt;Provider&gt;”</strong>的组件。</p><p id="7e02" class="if ig kw ih b ii ij ik il im in io ip la ir is it lb iv iw ix lc iz ja jb jc hb bi translated">该组件接受一个名为“store”的输入，我们可以在其中传递生成的存储。</p><p id="3de0" class="if ig kw ih b ii ij ik il im in io ip la ir is it lb iv iw ix lc iz ja jb jc hb bi translated">通过使用该组件，我们可以在应用程序和商店之间建立联系。</p><p id="c7b3" class="if ig kw ih b ii ij ik il im in io ip la ir is it lb iv iw ix lc iz ja jb jc hb bi translated">::<provider store="{store}"> <app/> </provider></p><p id="4689" class="if ig kw ih b ii ij ik il im in io ip la ir is it lb iv iw ix lc iz ja jb jc hb bi translated">现在整个app都可以访问redux商店了。</p></blockquote><h2 id="e208" class="jw jx hi bd jy jz ka kb kc kd ke kf kg iq kh ki kj iu kk kl km iy kn ko kp kq bi translated"><strong class="ak">减速器- </strong></h2><p id="a914" class="pw-post-body-paragraph if ig hi ih b ii kr ik il im ks io ip iq kt is it iu ku iw ix iy kv ja jb jc hb bi translated">缩减器基本上是一个接受两个参数<strong class="ih hj">【状态】</strong>和<strong class="ih hj">【动作】</strong>并返回更新状态的函数。<br/>无论我们从reducer <strong class="ih hj">返回什么状态，都会存储在redux store </strong>中。</p><p id="455c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通常，我们将initialState作为默认状态传递给reducer，它有一个redux存储应该是什么样子的模式。</p><p id="d351" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="kw">我们传递给减速器的论点动作是什么？</em> </strong></p><blockquote class="kx ky kz"><p id="9d28" class="if ig kw ih b ii ij ik il im in io ip la ir is it lb iv iw ix lc iz ja jb jc hb bi translated">“action”是一个对象，通常包含两个键'<strong class="ih hj"> type' </strong>和<strong class="ih hj"> 'payload' </strong></p><p id="eaaf" class="if ig kw ih b ii ij ik il im in io ip la ir is it lb iv iw ix lc iz ja jb jc hb bi translated">* const action = { type:' INCREMENT _ apple '，有效负载:3 }</p><p id="3521" class="if ig kw ih b ii ij ik il im in io ip la ir is it lb iv iw ix lc iz ja jb jc hb bi translated">类型键是必须的，而有效载荷键不是强制的。</p><p id="84ff" class="if ig kw ih b ii ij ik il im in io ip la ir is it lb iv iw ix lc iz ja jb jc hb bi translated">基于这个动作，减速器执行相应的状态改变。</p></blockquote><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ld"><img src="../Images/92a2ee4079ff77f31452b50dcfc27613.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wF7YqTM5odEEkchWQjYs_g.png"/></div></div></figure></div><div class="ab cl jp jq gp jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="hb hc hd he hf"><p id="3701" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">假设我们的应用程序中有两个组件Apple和Orange，如下所示:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es le"><img src="../Images/f6ab0f563ea1305a5c80f02082eee704.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h3V6Bom6MAmJldhEs5FgMg.png"/></div></div></figure><p id="67bf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">橙色成分与苹果成分相同。</p><p id="ac94" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="kw">一个组件如何与redux store通信？</em> </strong></p><blockquote class="kx ky kz"><p id="8515" class="if ig kw ih b ii ij ik il im in io ip la ir is it lb iv iw ix lc iz ja jb jc hb bi translated">为了在组件和redux存储之间建立连接，我们需要利用' react-redux '库提供的<strong class="ih hj"> 'connect' </strong>函数。</p><p id="f6b2" class="if ig kw ih b ii ij ik il im in io ip la ir is it lb iv iw ix lc iz ja jb jc hb bi translated">这个“连接”函数接受两个参数，通常命名为<strong class="ih hj">'<em class="hi">mapStateToProps '</em></strong>和<strong class="ih hj">'<em class="hi">mapdispatctoprops '</em></strong>，并返回另一个函数。</p><p id="7031" class="if ig kw ih b ii ij ik il im in io ip la ir is it lb iv iw ix lc iz ja jb jc hb bi translated">这两个参数都是函数。</p><p id="d4c4" class="if ig kw ih b ii ij ik il im in io ip la ir is it lb iv iw ix lc iz ja jb jc hb bi translated">“connect”函数返回的函数接受一个参数，即我们希望redux存储连接到的<strong class="ih hj">组件</strong>。</p><p id="d4b9" class="if ig kw ih b ii ij ik il im in io ip la ir is it lb iv iw ix lc iz ja jb jc hb bi translated">*连接(mapStateToProps，mapDispatchToProps)(苹果公司)</p></blockquote><p id="b233" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="kw">组件如何从redux store中检索/访问状态？</em>T13】</strong></p><p id="28cc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们希望摆脱组件中的本地状态，并希望根据redux存储中存储的状态来呈现组件。</p><p id="a2cd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要从存储中访问状态，我们需要将<strong class="ih hj"><em class="kw">‘mapStateToProps’</em></strong>函数传递给connect函数。</p><p id="c433" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">mapStateToProps接受<strong class="ih hj">‘state’</strong>作为参数，该参数由连接函数<strong class="ih hj">自动传递给</strong>，并返回组件所需的状态。</p><p id="e1af" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个“状态”是来自redux商店的应用程序的<strong class="ih hj">整体状态</strong>，在我们的例子中是:<br/>{ number of apples:<em class="kw">XXX</em>，number of ranges:<em class="kw">XXX</em>}</p><p id="2572" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">mapStateToProps返回的状态现在可以作为组件的<strong class="ih hj">‘props’</strong>。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lf"><img src="../Images/afa682989d5589a7744d9f98086aa63d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hzBsf3mpFp-62ujdzrQNFQ.png"/></div></div></figure><p id="de94" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，我们可以使用props.numberOfApples从商店访问numberOfApples。</p><p id="2b7f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">我们如何使用<em class="kw">“动作”</em>改变redux商店中的状态？</strong></p><p id="b36b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了执行<strong class="ih hj">状态改变</strong>，我们需要传递一个‘动作’给减速器。</p><p id="2cfb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了将这个<strong class="ih hj">‘action’</strong>参数传递给reducer，react-redux提供了一种方法来调度这些动作。</p><p id="e56d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为此，首先我们需要将<strong class="ih hj">‘mapDispatchToProps’</strong>函数传递给connect函数。</p><p id="6247" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，mapDispatchToProps通过连接函数  <em class="kw">提供了一个名为<strong class="ih hj"><em class="kw">‘dispatch’的参数。</em></strong></em></p><p id="b0e3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个“dispatch”参数基本上是一个函数，<strong class="ih hj">调度提供给它的任何动作对象</strong>。</p><blockquote class="kx ky kz"><p id="ca9f" class="if ig kw ih b ii ij ik il im in io ip la ir is it lb iv iw ix lc iz ja jb jc hb bi translated">const ACTION object = { type:' ACTION '，payload:" some payload " }；</p><p id="dad0" class="if ig kw ih b ii ij ik il im in io ip la ir is it lb iv iw ix lc iz ja jb jc hb bi translated">dispatch(actionObject)；→ results in → reducer(状态，action object)；</p></blockquote><p id="9ab3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">“mapDispatchToProps”返回一个对象，该对象包含调度某个操作的函数。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lg"><img src="../Images/e0ea28320367c279fc1df7773edcd3e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gqvu0Wp6BoPHY1qjSKLSxg.png"/></div></div></figure><p id="d2dd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，我们可以使用“props.incrementNumberOfApples”来访问incrementNumberOfApples函数，并直接更改redux存储中的状态。</p><p id="a94a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，我们可以使用分派功能来执行状态改变操作。</p></div></div>    
</body>
</html>