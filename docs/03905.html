<html>
<head>
<title>Fixing debugging with watchOS and Xcode</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用watchOS和Xcode修复调试</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/getting-debugging-with-watchos-and-xcode-to-work-a38c3f6e1c99?source=collection_archive---------15-----------------------#2021-06-17">https://medium.com/geekculture/getting-debugging-with-watchos-and-xcode-to-work-a38c3f6e1c99?source=collection_archive---------15-----------------------#2021-06-17</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/></div><div class="ab cl if ig gp ih" role="separator"><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik"/></div><div class="hb hc hd he hf"><h1 id="b250" class="im in hi bd io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj bi translated">背景</h1><p id="1d8e" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">如果你曾经试图为watchOS开发，你会非常清楚它与Xcode相处得并不好。</p><figure class="kj kk kl km fd kn er es paragraph-image"><div class="er es ki"><img src="../Images/dfa8458f5245b206f1afdbb2dc43e8ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1056/format:webp/1*uGo7xcwj3YgrSNTblUEmoQ.png"/></div><figcaption class="kq kr et er es ks kt bd b be z dx">Average day in the life of a watchOS developer</figcaption></figure><p id="ab79" class="pw-post-body-paragraph jk jl hi jm b jn ku jp jq jr kv jt ju jv kw jx jy jz kx kb kc kd ky kf kg kh hb bi translated">最常见的问题是它卡在“准备安装”或“在设备上运行你的应用程序名”上，实际上什么也不做。</p><p id="ca2a" class="pw-post-body-paragraph jk jl hi jm b jn ku jp jq jr kv jt ju jv kw jx jy jz kx kb kc kd ky kf kg kh hb bi translated">在模拟器中调试工作正常，但当你试图使用CloudKit或后台应用程序刷新时，这不是特别有帮助，这两者在Apple Watch模拟器中都不可用。我们自己已经有足够多的bug需要修复，即使没有我们的工具来增加我们的麻烦，所以这篇文章在这里试图解决这个问题。</p><p id="dfad" class="pw-post-body-paragraph jk jl hi jm b jn ku jp jq jr kv jt ju jv kw jx jy jz kx kb kc kd ky kf kg kh hb bi translated">如果你在这里，你可能已经尝试重启你的iPhone、Apple Watch、Xcode和Mac，所以我不打算进入这个过程(如果你还没有尝试过，现在是最好的时机)。</p><p id="3125" class="pw-post-body-paragraph jk jl hi jm b jn ku jp jq jr kv jt ju jv kw jx jy jz kx kb kc kd ky kf kg kh hb bi translated">注意:我使用的是Xcode 13、iOS 15和watchOS 8，但是Xcode 12以及之前版本的iOS和watchOS上的步骤和UI是相似的。</p><h1 id="6706" class="im in hi bd io ip kz ir is it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj bi translated">修复1 —重新安装</h1><p id="62cb" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">重新安装应用程序可以帮助Xcode调试再次正常工作。你可以通过打开iPhone上的“手表”应用程序，向下滚动直到你看到你的应用程序的名称，点击行，然后禁用“在Apple Watch上显示”。这有时有用，但可能相当不一致，但这也是最简单的方法，绝对值得一试。</p><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="er es le"><img src="../Images/2188694ef98114eb1ac1ab10d2eddb0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WSdvRPfxOFjlH1PAa_Rw0g.png"/></div></div></figure><h1 id="b990" class="im in hi bd io ip kz ir is it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj bi translated">修复2 —取消配对</h1><p id="b5cc" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">解除配对有助于缓解连接问题。为此，首先通过按⌘ + Shift + 2或在菜单栏中选择窗口-&gt;设备和模拟器进入设备和模拟器窗口。</p><p id="b2a1" class="pw-post-body-paragraph jk jl hi jm b jn ku jp jq jr kv jt ju jv kw jx jy jz kx kb kc kd ky kf kg kh hb bi translated">你应该在这个窗口中看到你的iPhone，如果没有，使用lightning电缆重新连接它。在iPhone上右键单击(如果您使用触控板，请按住control键单击)并选择“解除设备配对”。接下来，解锁iPhone，点击弹出窗口上的“信任”,如果设备询问，输入您的密码。现在重新启动Xcode，然后再次尝试运行应用程序。如果这行得通，太好了！如果没有，还有另一个解决方案。</p><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="er es lj"><img src="../Images/006ca3d141f2a68ee8d3a2f57c87f2d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bNZweycBXG2m2Aza18DeMg.png"/></div></div></figure><h1 id="edb2" class="im in hi bd io ip kz ir is it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj bi translated">修复3-手动设置</h1><p id="b9f1" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">如果自动配对不能按预期工作，手动配对设备可以解决连接问题。如果您在Devices and Simulators(设备和模拟器)窗口上看到一个黄色横幅，通知您该设备正在准备开发，那么这个修复就特别值得注意。</p><p id="049d" class="pw-post-body-paragraph jk jl hi jm b jn ku jp jq jr kv jt ju jv kw jx jy jz kx kb kc kd ky kf kg kh hb bi translated">再次，通过按⌘ + Shift + 2或在菜单栏中选择窗口-&gt;设备和模拟器进入设备和模拟器窗口。</p><p id="2413" class="pw-post-body-paragraph jk jl hi jm b jn ku jp jq jr kv jt ju jv kw jx jy jz kx kb kc kd ky kf kg kh hb bi translated">现在，按下窗口左下角的小+图标，而不是断开设备的连接。选择你的iPhone，点击下一步，你应该会看到一个绿色的勾号和一条信息，说明“设备设置成功”。尝试重新启动Xcode并再次在您的手表上运行，它现在应该可以工作了。</p><figure class="kj kk kl km fd kn er es paragraph-image"><div class="er es lk"><img src="../Images/d08d0dfac72a12f5eaf69f1a76382e79.png" data-original-src="https://miro.medium.com/v2/resize:fit:832/format:webp/1*0Ahjp4vtUF0rgIsLVDtExg.png"/></div></figure><p id="0df9" class="pw-post-body-paragraph jk jl hi jm b jn ku jp jq jr kv jt ju jv kw jx jy jz kx kb kc kd ky kf kg kh hb bi translated">如果这些方法都不适合您，您需要验证您的iOS、watchOS和Xcode版本是否兼容，您的电缆是否支持数据传输，以及您的电脑端口是否按预期工作。</p><h1 id="81a3" class="im in hi bd io ip kz ir is it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj bi translated">不想每次都重做这个过程怎么办？</h1><p id="3f79" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">投入如此多的精力只是为了让调试工作，这并不理想。然而，你可以使用os_log，当然这也不理想，它有局限性，但是更可靠。</p><p id="a6dc" class="pw-post-body-paragraph jk jl hi jm b jn ku jp jq jr kv jt ju jv kw jx jy jz kx kb kc kd ky kf kg kh hb bi translated">当您无法访问Xcode的一些调试功能时，os_log允许您在事件发生时记录事件，并从Mac上的Console.app查看它们(您可以通过按下⌘ +空格键并搜索控制台来找到它们)。这消除了Xcode成为调试中的一个因素的需要(在很大程度上)，从而消除了Xcode导致问题的可能性。</p><h1 id="8579" class="im in hi bd io ip kz ir is it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj bi translated">提高调试速度的技巧</h1><p id="b3f3" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">有时，即使调试工作正常，也会非常慢。</p><p id="320c" class="pw-post-body-paragraph jk jl hi jm b jn ku jp jq jr kv jt ju jv kw jx jy jz kx kb kc kd ky kf kg kh hb bi translated">您可以通过返回“设备和模拟器”窗口并选中“通过网络连接”复选框来解决这个问题。</p><p id="8e54" class="pw-post-body-paragraph jk jl hi jm b jn ku jp jq jr kv jt ju jv kw jx jy jz kx kb kc kd ky kf kg kh hb bi translated">接下来，打开Apple Watch上的设置应用程序，并确保您连接到与Mac和iPhone相同的WiFi网络。如果你在Apple Watch上没有看到WiFi网络，很可能是因为你已经将其配置为使用5 GHz而大多数Apple Watch只支持2.4 GHz，Series 6是唯一支持5 GHz的Apple Watch(截至2021年6月)。</p><p id="0e00" class="pw-post-body-paragraph jk jl hi jm b jn ku jp jq jr kv jt ju jv kw jx jy jz kx kb kc kd ky kf kg kh hb bi translated">从Mac上拔下iPhone，再次在手表上运行该项目，如果网络是瓶颈，现在调试应该会更快。</p><p id="630f" class="pw-post-body-paragraph jk jl hi jm b jn ku jp jq jr kv jt ju jv kw jx jy jz kx kb kc kd ky kf kg kh hb bi translated">这个技巧在WWDC 2019年关于创建独立手表应用的会议上提到过，下面的链接将指引你到它被提到的时间。<a class="ae ll" href="https://developer.apple.com/videos/play/wwdc2019/208/?time=653" rel="noopener ugc nofollow" target="_blank">https://developer.apple.com/videos/play/wwdc2019/208/?时间=653 </a></p><h1 id="d066" class="im in hi bd io ip kz ir is it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj bi translated">感谢阅读，我希望这有所帮助！</h1></div></div>    
</body>
</html>