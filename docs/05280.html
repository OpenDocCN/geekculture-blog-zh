<html>
<head>
<title>How to Interface the Picamera module with Raspberry Pi using python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用python将Picamera模块与Raspberry Pi接口</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/how-to-interface-the-picamera-module-with-raspberry-pi-using-python-1570e499cc?source=collection_archive---------3-----------------------#2021-07-17">https://medium.com/geekculture/how-to-interface-the-picamera-module-with-raspberry-pi-using-python-1570e499cc?source=collection_archive---------3-----------------------#2021-07-17</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><blockquote class="if ig ih"><p id="6dad" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">嘿伙计们！这是另一个关于树莓派的系列。在文章中，我们将学习如何安装相机模块，拍摄照片，并将照片作为邮件发送。少我忘了，你可以在这里找到其他关于树莓派<a class="ae jh" rel="noopener" href="/geekculture/detecting-motions-using-pir-motion-sensor-with-raspberry-pi-98f88f9d5ffe">的有趣文章。</a></p></blockquote><figure class="jj jk jl jm fd jn er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es ji"><img src="../Images/b00f67b9863c5298a501c9074663bb9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*BY4NN4I0O6DgfoSP.jpg"/></div></div><figcaption class="ju jv et er es jw jx bd b be z dx">image from <a class="ae jh" href="https://projects.raspberrypi.org/en/projects/getting-started-with-picamera" rel="noopener ugc nofollow" target="_blank">projects.raspberrypi.org</a></figcaption></figure><p id="2da0" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jy iv iw ix jz iz ja jb ka jd je jf jg hb bi translated">在我们进入实用部分之前，让我们先来看看Raspberry Pi的强大组件——Pi相机模块。</p><p id="9649" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jy iv iw ix jz iz ja jb ka jd je jf jg hb bi translated">Pi相机模块拍摄照片和高清视频。它有两个版本，分别是<strong class="il hj">标准</strong>和<strong class="il hj">黑色版本</strong>。</p><ul class=""><li id="c6fb" class="kb kc hi il b im in iq ir jy kd jz ke ka kf jg kg kh ki kj bi translated"><a class="ae jh" href="https://www.raspberrypi.org/products/camera-module-v2/" rel="noopener ugc nofollow" target="_blank"> <strong class="il hj">标准版</strong> </a>正常光线下拍照。</li><li id="3e46" class="kb kc hi il b im kk iq kl jy km jz kn ka ko jg kg kh ki kj bi translated"><a class="ae jh" href="https://www.raspberrypi.org/products/pi-noir-camera-v2/" rel="noopener ugc nofollow" target="_blank"> <strong class="il hj">黑色版</strong> </a>没有红外滤镜。它和红外光源一起使用，在黑暗中拍照。</li></ul><p id="8571" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jy iv iw ix jz iz ja jb ka jd je jf jg hb bi translated">Raspberry Pi板具有CSI(相机串行接口)接口，用于连接PiCamera模块。</p><p id="eb78" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jy iv iw ix jz iz ja jb ka jd je jf jg hb bi translated">该Pi摄像头模块可以使用15针带状电缆连接到Raspberry Pi的CSI端口。</p><p id="bd07" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jy iv iw ix jz iz ja jb ka jd je jf jg hb bi translated">有关Pi摄像头模块的更多信息，请务必检查<a class="ae jh" href="https://projects.raspberrypi.org/en/projects/getting-started-with-picamera" rel="noopener ugc nofollow" target="_blank">文档</a>。</p><p id="7e1c" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jy iv iw ix jz iz ja jb ka jd je jf jg hb bi translated">我们去安装组件吧。</p><h2 id="b9d0" class="kp kq hi bd kr ks kt ku kv kw kx ky kz jy la lb lc jz ld le lf ka lg lh li lj bi translated">所需硬件:</h2><ol class=""><li id="6527" class="kb kc hi il b im lk iq ll jy lm jz ln ka lo jg lp kh ki kj bi translated">Pi摄像头模块</li><li id="7f65" class="kb kc hi il b im kk iq kl jy km jz kn ka ko jg lp kh ki kj bi translated">树莓Pi 3型号B+</li><li id="08a1" class="kb kc hi il b im kk iq kl jy km jz kn ka ko jg lp kh ki kj bi translated">一个5V 2A微型USB电源适配器。</li></ol><h2 id="be5a" class="kp kq hi bd kr ks kt ku kv kw kx ky kz jy la lb lc jz ld le lf ka lg lh li lj bi translated"><strong class="ak">所需软件:</strong></h2><ol class=""><li id="65ad" class="kb kc hi il b im lk iq ll jy lm jz ln ka lo jg lp kh ki kj bi translated">油灰</li><li id="f5e0" class="kb kc hi il b im kk iq kl jy km jz kn ka ko jg lp kh ki kj bi translated">拉斯比安操作系统</li></ol><p id="7dab" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jy iv iw ix jz iz ja jb ka jd je jf jg hb bi translated">注意:<strong class="il hj">确保树莓派已经关闭。</strong></p><p id="2218" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jy iv iw ix jz iz ja jb ka jd je jf jg hb bi translated"><strong class="il hj">步骤1: </strong>安装摄像头模块</p><ul class=""><li id="4261" class="kb kc hi il b im in iq ir jy kd jz ke ka kf jg kg kh ki kj bi translated">在Raspberry Pi上，找到音频端口和HDMI端口之间的摄像头模块端口。如果您使用的是Raspberry Pi B，它位于以太网端口和HDMI端口之间。</li><li id="4450" class="kb kc hi il b im kk iq kl jy km jz kn ka ko jg kg kh ki kj bi translated">轻轻拉起摄像头模块端口塑料片的边缘，插入摄像头模块带状电缆。插入电缆时，确保蓝色面朝向以太网端口，银色面朝向HDMI端口。</li></ul><figure class="jj jk jl jm fd jn er es paragraph-image"><div class="er es lq"><img src="../Images/85090ea02836abd015be1d551831ed7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/0*YMpHubQQPYVAQnjV.jpg"/></div><figcaption class="ju jv et er es jw jx bd b be z dx">image from electronicwings.com</figcaption></figure><ul class=""><li id="f435" class="kb kc hi il b im in iq ir jy kd jz ke ka kf jg kg kh ki kj bi translated">然后，将塑料片按入到位。</li><li id="9786" class="kb kc hi il b im kk iq kl jy km jz kn ka ko jg kg kh ki kj bi translated">给树莓派通电。</li></ul><p id="6be3" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jy iv iw ix jz iz ja jb ka jd je jf jg hb bi translated"><strong class="il hj">第二步:</strong>连接摄像头模块。</p><ul class=""><li id="e231" class="kb kc hi il b im in iq ir jy kd jz ke ka kf jg kg kh ki kj bi translated">使用其IP地址和端口SSH到Raspberry PI</li><li id="f23c" class="kb kc hi il b im kk iq kl jy km jz kn ka ko jg kg kh ki kj bi translated">输入<strong class="il hj">用户名</strong>和<strong class="il hj">密码</strong></li><li id="d83d" class="kb kc hi il b im kk iq kl jy km jz kn ka ko jg kg kh ki kj bi translated">升级和更新Pi。每次我们使用pi时，总是更新和升级它是一个好习惯。输入<code class="du lr ls lt lu b">sudo apt-get update</code>和<code class="du lr ls lt lu b">sudo apt-get upgrade.</code></li><li id="cc44" class="kb kc hi il b im kk iq kl jy km jz kn ka ko jg kg kh ki kj bi translated">在终端上，运行<code class="du lr ls lt lu b">sudo raspi-config.</code></li><li id="3216" class="kb kc hi il b im kk iq kl jy km jz kn ka ko jg kg kh ki kj bi translated">单击接口选项。</li></ul><figure class="jj jk jl jm fd jn er es paragraph-image"><div class="er es lv"><img src="../Images/1ba77deaa1c7b4132ad8db3e47921fba.png" data-original-src="https://miro.medium.com/v2/resize:fit:942/format:webp/1*mD-17F5Y2EefRVi5CLpx2A.png"/></div><figcaption class="ju jv et er es jw jx bd b be z dx">image depicting raspberry pi software configuration</figcaption></figure><ul class=""><li id="4773" class="kb kc hi il b im in iq ir jy kd jz ke ka kf jg kg kh ki kj bi translated">点击相机，然后启用相机界面。</li></ul><figure class="jj jk jl jm fd jn er es paragraph-image"><div class="er es lw"><img src="../Images/9a06556394836329c1a5fb0651b597fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1020/format:webp/1*t2aJa0fJ6TLXet9Mg33DlQ.png"/></div><figcaption class="ju jv et er es jw jx bd b be z dx">image depicting Picamera configuration</figcaption></figure><figure class="jj jk jl jm fd jn er es paragraph-image"><div class="er es lw"><img src="../Images/ee88970c6eb323468258fc847263e601.png" data-original-src="https://miro.medium.com/v2/resize:fit:1020/format:webp/1*WTbubq2zTPqZ7ZNxOrxyJQ.png"/></div><figcaption class="ju jv et er es jw jx bd b be z dx">Picamera configuring</figcaption></figure><ul class=""><li id="f57f" class="kb kc hi il b im in iq ir jy kd jz ke ka kf jg kg kh ki kj bi translated">重启树莓派</li></ul><blockquote class="if ig ih"><p id="6e83" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">让我们拍一张静态照片，以确保它正常工作。</p></blockquote><p id="2963" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jy iv iw ix jz iz ja jb ka jd je jf jg hb bi translated">在命令行(SSH)上，运行<code class="du lr ls lt lu b">raspistill -o Desktop/pic.jpg</code></p><figure class="jj jk jl jm fd jn er es paragraph-image"><div class="er es lx"><img src="../Images/e4c7dfcae998b4e4e399954fc2c9ea66.png" data-original-src="https://miro.medium.com/v2/resize:fit:968/format:webp/1*9dgFxtbEkMRXXDoqNCCY-g.png"/></div></figure><p id="b793" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jy iv iw ix jz iz ja jb ka jd je jf jg hb bi translated">命令<code class="du lr ls lt lu b">raspistill </code>用于拍摄静态图片。因为我们从终端运行代码，所以我们不能查看捕获的图像。但我们可以使用一些软件，如VNC，查看树莓的桌面或通过命令行发送文件到你的电脑。</p><p id="452a" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jy iv iw ix jz iz ja jb ka jd je jf jg hb bi translated">在这里，我们将使用VNC来查看拍摄的图片。</p><p id="3a44" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jy iv iw ix jz iz ja jb ka jd je jf jg hb bi translated"><strong class="il hj">输出:</strong></p><figure class="jj jk jl jm fd jn er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es ly"><img src="../Images/cfd923d947050499e93e31770200519b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_SRZ_AkwuiClC8WUQ9ztOw.png"/></div></div><figcaption class="ju jv et er es jw jx bd b be z dx">using VNC to display raspberry’s desktop</figcaption></figure><figure class="jj jk jl jm fd jn er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es lz"><img src="../Images/eb4a0da387815b4bdedb37e9575e89a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0gsA0DnWfCTHCCJyVa4ZZA.png"/></div></div><figcaption class="ju jv et er es jw jx bd b be z dx">image captured using Picamera module</figcaption></figure><p id="ac5e" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jy iv iw ix jz iz ja jb ka jd je jf jg hb bi translated">首先，在Raspbian OS上安装Picamera库。否则，我们将得到一个导入错误:“没有名为PiCamera的模块”。</p><pre class="jj jk jl jm fd ma lu mb mc aw md bi"><span id="e3c4" class="kp kq hi lu b fi me mf l mg mh">sudo apt-get install python-picamera python3-picamera</span></pre><p id="20c3" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jy iv iw ix jz iz ja jb ka jd je jf jg hb bi translated">现在，让我们编写一个python代码来捕获一个图像并发送一封附有图片的邮件。</p><p id="4772" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jy iv iw ix jz iz ja jb ka jd je jf jg hb bi translated"><strong class="il hj">第三步:</strong> Python代码</p><ul class=""><li id="1ff3" class="kb kc hi il b im in iq ir jy kd jz ke ka kf jg kg kh ki kj bi translated">创建一个python文件<code class="du lr ls lt lu b">send_image.py</code></li><li id="b39a" class="kb kc hi il b im kk iq kl jy km jz kn ka ko jg kg kh ki kj bi translated">跑<code class="du lr ls lt lu b">sudo nano send_image.py</code></li><li id="430f" class="kb kc hi il b im kk iq kl jy km jz kn ka ko jg kg kh ki kj bi translated">输入以下代码</li></ul><figure class="jj jk jl jm fd jn"><div class="bz dy l di"><div class="mi mj l"/></div></figure><p id="4b97" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jy iv iw ix jz iz ja jb ka jd je jf jg hb bi translated">代码解释:</p><p id="319d" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jy iv iw ix jz iz ja jb ka jd je jf jg hb bi translated">首先，我们导入Python <code class="du lr ls lt lu b">picamera</code>库，它允许我们控制摄像头模块。<code class="du lr ls lt lu b">sleep </code>库用于在相机捕捉图像之前添加延迟。然后，import <code class="du lr ls lt lu b">smtp</code>(简单邮件传输协议)是一个SMTP客户端会话对象，用于在邮件服务器之间发送电子邮件。</p><p id="8e4b" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jy iv iw ix jz iz ja jb ka jd je jf jg hb bi translated">接下来，相机预览打开五秒钟，然后捕捉一张静止图片。</p><p id="a88b" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jy iv iw ix jz iz ja jb ka jd je jf jg hb bi translated">接下来，我们附上包含必要细节的文件。</p><p id="9713" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jy iv iw ix jz iz ja jb ka jd je jf jg hb bi translated">最后，我们使用<code class="du lr ls lt lu b">session.sendmail(sender_address,receiver_address, text)</code>发送邮件</p><ul class=""><li id="ca6a" class="kb kc hi il b im in iq ir jy kd jz ke ka kf jg kg kh ki kj bi translated">现在，运行<code class="du lr ls lt lu b">python3 send_image.py</code></li></ul><p id="e0ab" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jy iv iw ix jz iz ja jb ka jd je jf jg hb bi translated"><strong class="il hj">让我们来看看结果——</strong></p><figure class="jj jk jl jm fd jn"><div class="bz dy l di"><div class="mk mj l"/></div></figure><figure class="jj jk jl jm fd jn er es paragraph-image"><div class="er es ml"><img src="../Images/2a114b7197b608536554f006af35b444.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/format:webp/1*HJasQHs0FuzUXm5JArVivg.png"/></div></figure><figure class="jj jk jl jm fd jn er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es mm"><img src="../Images/9157ea9fed742954c4ab7bfc30a46386.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OpmFhIKWrKrmBZFzRBqHhA.jpeg"/></div></div><figcaption class="ju jv et er es jw jx bd b be z dx">image depicting mail sent from the raspberry pi</figcaption></figure><figure class="jj jk jl jm fd jn"><div class="bz dy l di"><div class="mn mj l"/></div></figure><p id="6165" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jy iv iw ix jz iz ja jb ka jd je jf jg hb bi translated">注意:千万不要将文件保存为<code class="du lr ls lt lu b">picamera.py</code>。</p><p id="b3a0" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jy iv iw ix jz iz ja jb ka jd je jf jg hb bi translated">在这里检查代码<a class="ae jh" href="https://github.com/funmi-cod/Picamera" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="b548" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jy iv iw ix jz iz ja jb ka jd je jf jg hb bi translated">但是，想要更多关于树莓派的项目吗？请关注我的下一篇文章。或者更好的是，跟随😊这样你就能收到我文章的通知了。</p><p id="c8fd" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jy iv iw ix jz iz ja jb ka jd je jf jg hb bi translated">❤ ❤感谢你阅读这篇文章。❤❤</p><figure class="jj jk jl jm fd jn"><div class="bz dy l di"><div class="mi mj l"/></div></figure></div></div>    
</body>
</html>