<html>
<head>
<title>Image Search Application using ReactJS, Unsplash API and cloudflare worker</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用ReactJS、Unsplash API和cloudflare worker的图像搜索应用程序</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/image-search-application-using-reactjs-unsplash-api-and-cloudflare-worker-6c152245310d?source=collection_archive---------23-----------------------#2021-06-30">https://medium.com/geekculture/image-search-application-using-reactjs-unsplash-api-and-cloudflare-worker-6c152245310d?source=collection_archive---------23-----------------------#2021-06-30</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/49f08a8ada3e7d9f669d4d5d07726926.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oILqj8RfGb_ui9FI3VZ_BQ.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Photo by <a class="ae iu" href="https://unsplash.com/@alienwaregaming?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Alienware</a> on <a class="ae iu" href="https://unsplash.com/s/photos/desktop?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="c695" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这篇文章中，我们将构建一个图像搜索的应用程序。我们将从Unsplash API获取图像，前端将在ReactJS中，我们将使用cloudflare的无服务器功能作为后端。</p><p id="1a2f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这些称为Cloudflare worker，它们允许您创建应用程序并将其部署在it的边缘网络上。</p><p id="23c0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">设置cloudflare帐户和安装wrangler的过程在我之前的帖子<a class="ae iu" href="https://nabendu82.medium.com/build-a-serverless-application-using-cloudflare-worker-f71017093b86" rel="noopener">这里</a>中提到过。</p><p id="e5ec" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们将使用<strong class="ix hj">牧马人生成</strong>命令创建一个新项目，如下所示。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jt"><img src="../Images/8832d03a96842d19991eda06c392dd84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ySitEPrWRlQZ-piGW5A4jQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">wrangler generate</figcaption></figure><p id="f5e2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，导航到文件夹并在VS代码中打开项目。打开<strong class="ix hj"> index.js </strong>文件。文件的细节在我之前的文章<a class="ae iu" href="https://nabendu82.medium.com/build-a-serverless-application-using-cloudflare-worker-f71017093b86" rel="noopener">中再次提到。</a></p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jy"><img src="../Images/94b8020437f7b2a034a7c8a42b5b200c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*haCwx8hkpwoRSaUkTZNZdg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">index.js</figcaption></figure><p id="6f23" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，我们将我们的项目发布到Cloudflare CDN网络，但需要在配置文件中设置帐户id。因此，再次运行<strong class="ix hj"> wrangler whoami </strong>并获取帐户id。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jz"><img src="../Images/4c50ea6909f4edec0ff66c7952dfcc4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xYtYNyCwsokNepVzUxDy4A.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">wrangler whoami</figcaption></figure><p id="78d9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">将帐户id放在<strong class="ix hj"> wrangler.toml </strong>文件中，这是我们的wrangler项目的配置文件。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ka"><img src="../Images/5bde3a474125a56b8fc563975ae3de83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w0HW-4GOVOyW9CWNk_VClg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">wrangler.toml</figcaption></figure><p id="dd36" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，让我们通过<strong class="ix hj"> wrangler发布</strong>命令来发布项目。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kb"><img src="../Images/2c4bc376a9d3883ed48f687d3d649308.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wDBQ4nsE4pcBk42u9yY7tQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">wrangler publish</figcaption></figure><p id="92e7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">上面的命令给了我们一个链接，当我们在浏览器中打开它时，我们会看到<strong class="ix hj"> Hello worker！</strong>文本，来自<strong class="ix hj"> index.js </strong>文件。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kc"><img src="../Images/2f1cd2b526a26ad358ee9d57a26b860d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ubKgH9aBcYdyHjWKrMYW5A.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Hello Worker</figcaption></figure><p id="3996" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，我们将把请求方法改为返回json。各种请求方法可以在<a class="ae iu" href="https://developers.cloudflare.com/workers/runtime-apis/request#methods" rel="noopener ugc nofollow" target="_blank">这里</a>从官方文件中找到。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kd"><img src="../Images/1e92019ab4688a2cc89c8d0cb7857875.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zJvZ_c5ulWUdiSZ3898RhQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">json</figcaption></figure><p id="9b8f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，在<strong class="ix hj"> index.js </strong>中，我们将修改我们的handleRequest函数来返回一个json。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ke"><img src="../Images/9e4241591a8bed74f27d73994a29fc44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ut7QvR8qQcSdssfu-O0b6w.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">index.js</figcaption></figure><p id="6bd8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们现在将在本地测试它，为此打开终端并运行<strong class="ix hj"> wrangler dev </strong>。它构成了在本地主机url运行的应用程序。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kb"><img src="../Images/81f42f70c83f28f97fe66ea307655445.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0z_mIiocU1nSD9o8bmf6tQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">wrangler dev</figcaption></figure><p id="310f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，打开另一个终端并运行下面的命令。您可以看到它返回了查询体:tech。</p><p id="94bd" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">因此，它从我们的请求中获取数据，解析它并作为响应返回。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kf"><img src="../Images/12e0c7b14613f6c8693b37b034b8e28d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aLkIpGDK3AL9X8gVZlxlvg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">curl</figcaption></figure><p id="5cfc" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">只是为了确保它像我们期望的那样工作，我们将在我们的身体之外析构query。然后在查询字符串中将它作为响应返回。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kg"><img src="../Images/dd703de3c78ec783754030fe95436734.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-EsPZ_hLPhBFTD_v1A4rAA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">query string</figcaption></figure><p id="ec06" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，再次运行curl命令，我们将返回查询。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kh"><img src="../Images/af9f6e83fc044c542d8f9f933dda0173.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5eo0yOTxtXVuXKEItvivuw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">query back</figcaption></figure><p id="29b5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">fetch API允许我们在工作函数内部向其他服务器和API端点发出请求。</p><p id="c55e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们将在我们的项目中使用unsplash API。因此，转到<a class="ae iu" href="https://unsplash.com/oauth/applications" rel="noopener ugc nofollow" target="_blank">https://unsplash.com/oauth/applications</a>并点击<strong class="ix hj">新应用</strong>。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ki"><img src="../Images/7e8b6956d7c6ead55df085e04f5c6ac8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*abNjgKyOwkwWm4n_6_wRxQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">New application</figcaption></figure><p id="be77" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在下一页中，点击复选框，然后点击<strong class="ix hj">接受条款</strong>。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ki"><img src="../Images/4ef7718f98414b26c8d6fa1b20f93794.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cfKs_3L9NkWrZwO9D1A9rA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Accept terms</figcaption></figure><p id="7718" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">接受条款后，会出现一个弹出窗口，给出应用程序的名称和描述。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kj"><img src="../Images/d780023046b8afa2c1daa52773095cf2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D9De5h1iXaVSWSKGr6oPeQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Name and description</figcaption></figure><p id="3abd" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">它给了我一个错误，因为我们不能使用unsplash名称。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kk"><img src="../Images/a3f99a51629ac76995183c4d825be8ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3s_Oh_HmwLduiPCxdoIjNg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Unsplash error</figcaption></figure><p id="f5b8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">所以，我给它起了个名字<strong class="ix hj"> images-cloudflare-worker </strong>，然后点击创建应用程序。</p><p id="632f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在下一个屏幕中，向下滚动一点以获得<strong class="ix hj">访问密钥</strong>和<strong class="ix hj">秘密密钥</strong>。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kl"><img src="../Images/f5be7e98094ab1d8fa21e41231906977.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xYWz3XoUzv1e_8GBxZm5aw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Access and Secret Key</figcaption></figure><p id="dddb" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，回到<strong class="ix hj"> index.js </strong>使用内置的fetch api对unsplash api进行api请求，其中我们需要传递Client-ID。</p><p id="9cfa" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这里，我们在CLIENT_ID中对上一步中的访问密钥进行了硬编码。我们很快将改变它，使用牧马人的秘密。</p><p id="6565" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">一旦我们得到数据，我们只是返回一个响应。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es km"><img src="../Images/3a7b5d1a6d92604240cc71f9b5b91e0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jp_bEhzdeG1CVMlaaA0wRA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">API call</figcaption></figure><p id="bd4b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，回到终端并运行curl<a class="ae iu" href="http://127.0.0.1:8787" rel="noopener ugc nofollow" target="_blank">http://127 . 0 . 0 . 1:8787</a>命令，它将从unsplash api返回数据。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kn"><img src="../Images/91152beebf1f75f8e3338b2a09f1b348.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OxIpUW22A232y7UAZIH5Yw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">curl</figcaption></figure><p id="fc19" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，读起来有点吃力。所以，我安装了一个在线json处理器工具，名为jq。它以更好的格式向我们展示数据。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kb"><img src="../Images/86d19379fa0b987e537e4a28c5592a88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f94-9EC_oRru6-2bCpVTRA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">jq tool</figcaption></figure><p id="8e5b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如前所述，将秘密放在<strong class="ix hj"> index.js </strong>文件中并不是好的做法。因此，我们将删除硬编码值。</p><p id="08ca" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">之后，在终端运行<strong class="ix hj"> wrangler secret，输入CLIENT_ID </strong>，然后在其中输入访问密钥。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ko"><img src="../Images/ee7c138bb55f63966c7e6d408c3b6cff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7EwgvI9gdGVvVtLxpIxu0Q.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Secret</figcaption></figure><p id="4d9d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">之后，牧马人发布并访问已部署的url，我们将看到unsplash的响应。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kp"><img src="../Images/5d8b41d350cb0ed4974a17b8c7572390.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X53XrFTbuw-4aP7us-6tEQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Response</figcaption></figure><p id="ebee" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，由于我们要创建一个搜索应用程序，我们将使用unsplash的搜索api。我们再次获取查询并将其传递给api。</p><p id="5166" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">之后，我们也从数据中获得所需的id，图像和链接。然后作为响应返回图像。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kq"><img src="../Images/7562a9dffbcaf3eb7be18a6087bae943.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OXLW1MkAxwCMvNXow4JwWQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Returning images</figcaption></figure><p id="10c0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，在终端中运行curl命令，类似于我们之前运行的命令，我们将获得id、图像和链接作为响应。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kh"><img src="../Images/6908b7b20bea621ffd27afb88b6e3bb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eng52gsO2s70k7cx9RbdRA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Response</figcaption></figure><p id="beb2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，API端点已经完成，是时候创建我们的前端React应用程序了。所以，打开你的终端，通过<strong class="ix hj">npx create-react-app unsplash-viewer-react</strong>创建一个新的react应用</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kf"><img src="../Images/12231f7c0f9d55972c3237013c753f7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x1s4wSVGeGcyPKfKqVxrbQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">create-react-app</figcaption></figure><p id="d618" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">react应用程序创建完成后，在VS代码中打开它，用npm start启动它。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kr"><img src="../Images/5866d3616ba5ce988be4caceb384f08e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7KS53IGp7Lev-n2ASZQTBA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">React app</figcaption></figure><p id="84ce" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">一个react应用程序带有大量的模板代码。选择它们，右键单击并删除它们。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ks"><img src="../Images/dc66e50084c039c064e8c5fb64a08e65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G2vxjrcIM-HErWrW9aV9Eg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Delete</figcaption></figure><p id="8eb7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，我们的<strong class="ix hj"> index.js </strong>也会包含更少的代码。该文件将如下所示。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kc"><img src="../Images/afc0883bfd8e08e05a83d2330780d5cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AZe8tmFAuapwq7xRo-VWnw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">index.js</figcaption></figure><p id="a085" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，在<strong class="ix hj"> App.js </strong>文件中，我们将首先拥有一个函数<strong class="ix hj"> getImages </strong>。这个函数发送一个POST请求。到我们用于worker的API。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kt"><img src="../Images/fb4aa0a6965176348ddba82e9c4f4cbb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5nBkHqXM2k5jKzW0meSJyQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">getImages</figcaption></figure><p id="5bf4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">接下来，我们将设置查询和图像两种状态。我们还有一个useEffect，它用编码查询调用getImages。同样，在setImages()中设置结果。</p><p id="a55a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">之后，我们有一个搜索功能。它使用用户输入的查询来调用getImages函数。同样，在setImages()中设置结果。</p><p id="246b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">此外，还有一个updateQuery函数，它将查询设置为用户输入的值。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ku"><img src="../Images/3063ebd8d01a11c08d8221e080053c7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RS76WxEGntmHtpsLKwxVag.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">query</figcaption></figure><p id="d77c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在return语句中，我们有一个表单，它的onSubmit调用搜索函数。然后输入框调用updateQuery函数。</p><p id="3ba2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在表单之后，我们有一个imgContainer div，映射所有图像并显示它们。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kv"><img src="../Images/ae84ee4557c5fef70cefeebe8335585f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EznKrs8Mu7DgGhWu7fCEBQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Form</figcaption></figure><p id="600d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在<strong class="ix hj"> App.css </strong>中放置项目的样式。用以下内容替换之前的内容。</p><pre class="ju jv jw jx fd kw kx ky kz aw la bi"><span id="ceff" class="lb lc hi kx b fi ld le l lf lg">.flexContainer {<br/>  display: flex;<br/>  justify-content: center;<br/>  align-items: center;<br/>  border: 1px solid black;<br/>}</span><span id="4bf6" class="lb lc hi kx b fi lh le l lf lg">.inputStyle{<br/>  font-size: 1.5em;<br/>  padding: 3px;<br/>  display: inline-block;<br/>  margin-left: 5px;<br/>  width: 30%;<br/>}</span><span id="d24f" class="lb lc hi kx b fi lh le l lf lg">button {<br/>  cursor: pointer;<br/>  margin-left: 5px;<br/>  background-color: #4CAF50; /* Green */<br/>  border: none;<br/>  color: white;<br/>  padding: 10px 32px;<br/>  text-align: center;<br/>  text-decoration: none;<br/>  display: inline-block;<br/>  font-size: 16px;<br/>  box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2), 0 6px 20px 0 rgba(0,0,0,0.19);<br/>}</span><span id="fb44" class="lb lc hi kx b fi lh le l lf lg">img {<br/>  height: 300px;<br/>  object-fit: cover;<br/>  width: 400px;<br/>}</span><span id="aaca" class="lb lc hi kx b fi lh le l lf lg">.imgContainer {<br/>  display: flex;<br/>  justify-content: center;<br/>  align-items: center;<br/>  flex-wrap: wrap;<br/>  margin-top: 5px;<br/>}</span></pre><p id="e5b6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，我们在localhost上运行的react项目将显示这个漂亮的搜索栏。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es li"><img src="../Images/1920319d9b98237e6f4c2b0b65884b57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OW2oAEn_Ui87VIe_dS5m9A.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Nice Search</figcaption></figure><p id="5dba" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，搜索任何术语，但不会显示任何内容。在检查网络选项卡时，我们看到了CORS错误。当鼠标悬停在错误上时，显示“跨原点资源共享错误”。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lj"><img src="../Images/c126da753a62ef5d313e6f434c3cd761.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_Bd69afUUePx5ksF86T13g.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">CORS error</figcaption></figure><p id="44a6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为了解决这个问题，我们需要在我们的无服务API中提供一个Access-Control-Allow-Origin头。它告诉允许从提到的来源访问。</p><p id="b631" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在我们的worker <strong class="ix hj"> index.js </strong>文件中，首先添加一个cors头，允许通过POST方法和所有origins进行访问。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lk"><img src="../Images/504e820b9d01852a21a139087ee38e90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oe91zTkwCb_-A2fy_G-QGw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">index.js</figcaption></figure><p id="dfeb" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">接下来在<strong class="ix hj"> handleRequest </strong>函数中，我们首先检查请求方法是否为OPTIONS。在这种情况下，我们将发送corsHeader。</p><p id="ea43" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果方法是POST，那么我们前面的所有逻辑都会失效。响应也随corsHeader一起更新。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ll"><img src="../Images/3a81b0b19bfb63076cbf5d8215713195.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xX6dG1g2K_QEX48ZgUfv5g.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">index.js</figcaption></figure><p id="994c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">之后做<strong class="ix hj">牧马人发布</strong>。接下来，如果我们进入我们的应用程序，我们将看到来自unsplash的图像，搜索也将正常工作。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lm"><img src="../Images/f1c3c9684eb82193cbb83720607e0d61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*63hk5AIM4kLY3brhLqdw_g.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Working Great</figcaption></figure><p id="51b0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，我们将使用Cloudflare页面部署React应用程序。为此，我们需要首先将我们的React应用程序推送到github。</p><p id="3432" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">之后，转到您的cloudflare控制面板并单击页面。点击<strong class="ix hj">创建项目</strong>按钮。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ln"><img src="../Images/93e6787590f83027a2847d6e0303e487.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d_hjXMdi-kHJnl8O3dPQOg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Pages</figcaption></figure><p id="35f8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在下一页中，点击<strong class="ix hj">添加账户</strong>按钮。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lo"><img src="../Images/58326a6dea9644c4f582a80c667b85d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rDteVYhAlKikvA8-y38nDw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Add account</figcaption></figure><p id="bfb2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">它将打开Github帐户。选择github存储库并保存。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kc"><img src="../Images/ce4d3237b9e63b8889a29ba6a9ee2ae7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7_Dn-uh8vYmqqKF3bxWPgw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Github repository</figcaption></figure><p id="2bed" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">它将带我们回到cloudflare，在那里我们可以看到新的存储库。点击储存库并按下<strong class="ix hj">开始设置</strong>。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ks"><img src="../Images/0c5434bedaeaa7c688fe04852490ec64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jS7kPgWrZnzWV0xTqfyV8w.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Begin Setup</figcaption></figure><p id="29c1" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在下一页，我们需要选择框架预置为<strong class="ix hj"> Create React App </strong>。它将填充所需的命令。</p><p id="d4d7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">之后点击<strong class="ix hj">保存和部署</strong>按钮。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ka"><img src="../Images/45c4cf5499ce49e8a559c0d003e58e27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h5JN3JOjPJ69Ilbyq8qT7Q.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Save and Deploy</figcaption></figure><p id="7b41" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们将在一段时间后收到成功消息。向下滚动并点击<strong class="ix hj">继续投影</strong>按钮。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jy"><img src="../Images/9ffd88341f500a7bebf4bf65fd4081ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lix-Qid8akILebz08AZchw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Sucess</figcaption></figure><p id="4fde" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们将在下一页获得我们应用程序的链接。点击它，我们的应用程序从部署的网站工作正常。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jy"><img src="../Images/55196258c13e952425a42a9590e46a9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ur8mjbHcJOFlApHqsIn4qQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Deployed</figcaption></figure><p id="b7f9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这个项目的github repos</p><p id="6828" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae iu" href="https://github.com/nabendu82/unsplash-viewer-react" rel="noopener ugc nofollow" target="_blank">https://github.com/nabendu82/unsplash-viewer-react</a>T22<a class="ae iu" href="https://github.com/nabendu82/unsplash-api-cloudflare" rel="noopener ugc nofollow" target="_blank">https://github.com/nabendu82/unsplash-api-cloudflare</a></p></div></div>    
</body>
</html>