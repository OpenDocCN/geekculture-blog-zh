<html>
<head>
<title>LocalStorage Is Cool, But Be Mindful of How You Use It.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">本地存储很酷，但要注意如何使用它。</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/localstorage-is-cool-but-be-mindful-how-you-use-it-2fedf02d37e4?source=collection_archive---------5-----------------------#2021-04-23">https://medium.com/geekculture/localstorage-is-cool-but-be-mindful-how-you-use-it-2fedf02d37e4?source=collection_archive---------5-----------------------#2021-04-23</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="fb69" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">并非所有数据都需要传输到服务器。</p><p id="ec79" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你是亚马逊，你在你的服务器上存储了大量关于你销售的每一个产品的信息，你真的想存储每个用户访问你的网站时的偏好信息吗？比如说，他们说什么语言，是喜欢亮模式还是暗模式，他们在购物车里放了什么但还没有承诺购买，等等。？大概不会。服务器已经在忙于处理事务、发送信息等等，它不需要让这些小信息过载。Cookies已经存在很久了，用来存储这样的信息，但是cookies的问题是信息仍然存储在每个服务器请求中，而且cookies的存储空间有限。不适合强调更好的客户端定制和交互的更现代的web体验。于是本地存储诞生了。</p><h1 id="93f7" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">什么是LocalStorage？</h1><p id="cab0" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">很简单，这是一种客户端存储的形式！它主要用于存储不需要传输到数据库的信息。这是一个纯粹与JavaScript网站相关的特性，它将信息作为一个JavaScript对象存储在键/值对中。信息只能保存为字符串，所以不要尝试太花哨的东西。</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es kh"><img src="../Images/95d2463418ae27afb7e6060d4ef63f46.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YPKqpOc8fSLhfnrNcOYODw.png"/></div></div><figcaption class="kt ku et er es kv kw bd b be z dx">Console in Chrome DevTools (Option⌥ +Command⌘ + I)</figcaption></figure><h2 id="131c" class="kx je hi bd jf ky kz la jj lb lc ld jn iq le lf jr iu lg lh jv iy li lj jz lk bi translated">本地存储方法。</h2><ol class=""><li id="ca6e" class="ll lm hi ih b ii kb im kc iq ln iu lo iy lp jc lq lr ls lt bi translated">)<code class="du lu lv lw lx b"><a class="ae kg" href="https://developer.mozilla.org/en-US/docs/Web/API/Storage/setItem" rel="noopener ugc nofollow" target="_blank">setItem();</a></code> —如何在浏览器中建立键/值对。</li><li id="654f" class="ll lm hi ih b ii ly im lz iq ma iu mb iy mc jc lq lr ls lt bi translated">)<code class="du lu lv lw lx b"><a class="ae kg" href="https://developer.mozilla.org/en-US/docs/Web/API/Storage/getItem" rel="noopener ugc nofollow" target="_blank">getItem();</a></code> —如何检索这些键/值对之一</li><li id="15f0" class="ll lm hi ih b ii ly im lz iq ma iu mb iy mc jc lq lr ls lt bi translated">)<code class="du lu lv lw lx b"><a class="ae kg" href="https://developer.mozilla.org/en-US/docs/Web/API/Storage/removeItem" rel="noopener ugc nofollow" target="_blank">removeItem();</a></code>—如何删除键/值对</li><li id="15e4" class="ll lm hi ih b ii ly im lz iq ma iu mb iy mc jc lq lr ls lt bi translated">。)<code class="du lu lv lw lx b"><a class="ae kg" href="https://developer.mozilla.org/en-US/docs/Web/API/Storage/key" rel="noopener ugc nofollow" target="_blank">key();</a></code> —显示给定索引号的键名</li><li id="87dd" class="ll lm hi ih b ii ly im lz iq ma iu mb iy mc jc lq lr ls lt bi translated">)<code class="du lu lv lw lx b"><a class="ae kg" href="https://developer.mozilla.org/en-US/docs/Web/API/Storage/clear" rel="noopener ugc nofollow" target="_blank">clear();</a></code> —这将清除本地存储中存储的所有密钥。</li></ol><h1 id="d518" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">本地存储的重要特征</h1><p id="c88d" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">LocalStorage的最大好处是可以使用它存储的数据量(5mb！虽然这是有争议的，<a class="ae kg" href="https://www.w3.org/TR/webstorage/#disk-space" rel="noopener ugc nofollow" target="_blank">理论上可能更多。</a>)，同时也非常易于使用。cookies最大为4KB，LocalStorage可以容纳大量信息。这可能是一件好事，也可能是一件坏事，取决于你如何利用它。在有些情况下<em class="md">可能</em>你想要<code class="du lu lv lw lx b">JSON.stringify()</code>一些数据，但是授权令牌或用户会话数据<strong class="ih hj">永远不要</strong>在本地存储中使用，因为它<strong class="ih hj"> <em class="md">不安全。如果你不希望信息被公开共享，它就不应该被存储到LocalStorage。它被设计成将键/值对作为字符串保存，而不是存储安全数据！然而，如果你想在介质上保存一篇文章或存储一个故事的草稿，LocalStorage非常适合这类信息(除非你正在写下一部热门小说，不想让它泄露)！</em></strong></p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es me"><img src="../Images/4f8fc1b0ca0d3eee4aa1cbbeb02959d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8JcaXUVr0YPLpYtF_JRYnA.png"/></div></div><figcaption class="kt ku et er es kv kw bd b be z dx">localStorage.length returns the amount of items stored.</figcaption></figure><p id="2e22" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">另一件要注意的事情是LocalStorage永远不会过期。这在很多方面都是有益的，尤其是当客户反复访问同一个网站时。然而，除非手动完成，否则存储在LocalStorage中的任何数据都不会被清除。这意味着，如果你去ibuysocks.com(不是一个真正的网站)并且他们在LocalStorage中存储数据，即使你再也不回去从那个域购买一双袜子，他们存储的数据仍然会保存在你的浏览器中。</p><blockquote class="mf mg mh"><p id="a5f6" class="if ig md ih b ii ij ik il im in io ip mi ir is it mj iv iw ix mk iz ja jb jc hb bi translated">有趣的事实:localStorage保存在用户配置文件的SQLite文件中。对于mac:</p></blockquote><pre class="ki kj kk kl fd ml lx mm mn aw mo bi"><span id="c128" class="kx je hi lx b fi mp mq l mr ms">~/Library/Application Support/Google/Chrome/Default/Local Storage</span></pre><h1 id="1ff2" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">会话存储</h1><p id="521d" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">会话存储具有与LocalStorage相同的所有方法，但是，此信息仅存储到浏览器关闭为止。同样，这有很多好处，但它仍然缺乏很多安全性，即使是临时存储信息。</p><h1 id="82ee" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">总体而言:</h1><p id="f6c6" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">LocalStorage的目的是帮助使单页web应用程序更加动态，并帮助卸载一些在服务器和客户端浏览器之间传输的信息。取决于如何使用，它可能非常有用，但一定要考虑存储的数据是否是关键信息。如果敏感信息或数据更适合存储在服务器中，那么就不应该存储在本地或会话存储中。但是，如果您希望您的用户能够切换亮模式或暗模式，并保持这种状态，那么LocalStorage是一个不错的选择！</p></div></div>    
</body>
</html>