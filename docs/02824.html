<html>
<head>
<title>Predicting purchases with Market Basket Analysis</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用购物篮分析预测购买</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/predicting-purchases-with-market-basket-analysis-d6ad2152bf6e?source=collection_archive---------11-----------------------#2021-05-26">https://medium.com/geekculture/predicting-purchases-with-market-basket-analysis-d6ad2152bf6e?source=collection_archive---------11-----------------------#2021-05-26</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="3cd3" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">使用带有关联规则的MBA创建您自己的“购买了该产品的客户也购买了该产品”部分</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/5d78df7c829fc77da1b533faeced272e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0UwAjeSUO8zEZs7fMK04tQ.jpeg"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Shopping Customers | Photo by <a class="ae jn" href="https://www.pexels.com/@gustavo-fring?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">Gustavo Fring</a> from <a class="ae jn" href="https://www.pexels.com/photo/family-doing-grocery-shopping-3985074/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">Pexels</a></figcaption></figure><blockquote class="jo"><p id="240e" class="jp jq hi bd jr js jt ju jv jw jx jy dx translated">你曾经冲动购物吗？你当然知道。但是，你有没有想过，为什么这些产品对你来说如此方便，即使你并没有在寻找它们？我们所有人都知道购买了这个产品的顾客也在亚马逊上购买了产品，前面提到的冲动购买在那里经常发生。</p></blockquote><p id="9329" class="pw-post-body-paragraph jz ka hi kb b kc kd ij ke kf kg im kh ki kj kk kl km kn ko kp kq kr ks kt jy hb bi translated">即使在实体杂货店，你也会在同一个货架上发现互补的商品(如面包和黄油),或者至少彼此非常接近。这些补充物品的数据也有助于商店以他们认为有利可图的方式对这些物品提供优惠和折扣。一个商品的广告可以针对另一个商品的顾客。此外，有时该公司可能会想出一个两者结合的产品，这可能会增加销售。</p><p id="f9ec" class="pw-post-body-paragraph jz ka hi kb b kc ku ij ke kf kv im kh ki kw kk kl km kx ko kp kq ky ks kt jy hb bi translated">现在，问题出现了，如何找到这些互补的项目？答案是<strong class="kb hj">市场篮子分析</strong>。</p></div><div class="ab cl kz la gp lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="hb hc hd he hf"><h1 id="2b0b" class="lg lh hi bd li lj lk ll lm ln lo lp lq io lr ip ls ir lt is lu iu lv iv lw lx bi translated">什么是购物篮分析？</h1><blockquote class="ly lz ma"><p id="2fd2" class="jz ka mb kb b kc ku ij ke kf kv im kh mc kw kk kl md kx ko kp me ky ks kt jy hb bi translated">市场购物篮分析(MBA)是一种建模技术，其理论基础是，如果你购买了某一组商品，你就更有可能(或更不可能)购买另一组商品。</p><p id="147d" class="jz ka mb kb b kc ku ij ke kf kv im kh mc kw kk kl md kx ko kp me ky ks kt jy hb bi translated">例如:在麦当劳，如果你买三明治和饼干，你比没有买三明治的人更有可能买饮料。</p></blockquote><p id="3704" class="pw-post-body-paragraph jz ka hi kb b kc ku ij ke kf kv im kh ki kw kk kl km kx ko kp kq ky ks kt jy hb bi translated">在零售行业，MBA指的是一种<strong class="kb hj">无监督的数据挖掘技术</strong>，可以发现客户购买活动之间的同现关系。用户点击亚马逊的<em class="mb">“购买了该产品的客户也购买了这些产品……”</em>行动号召链接的销售量证明了购物篮分析的效果和重要性。</p><p id="5cda" class="pw-post-body-paragraph jz ka hi kb b kc ku ij ke kf kv im kh ki kw kk kl km kx ko kp kq ky ks kt jy hb bi translated">市场购物篮分析和这篇文章的目的是利用以前的数据来预测一个人在购买某种产品后会购买什么产品，或者更简单地说，与以前购买的产品相关的是什么。</p></div><div class="ab cl kz la gp lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="hb hc hd he hf"><h1 id="9c4d" class="lg lh hi bd li lj lk ll lm ln lo lp lq io lr ip ls ir lt is lu iu lv iv lw lx bi translated">一些术语</h1><p id="b5ea" class="pw-post-body-paragraph jz ka hi kb b kc mf ij ke kf mg im kh ki mh kk kl km mi ko kp kq mj ks kt jy hb bi translated">现在，我们需要熟悉这里使用的术语，以便更清楚地理解这个主题。</p><h2 id="6542" class="mk lh hi bd li ml mm mn lm mo mp mq lq ki mr ms ls km mt mu lu kq mv mw lw mx bi translated">项目</h2><p id="bf6a" class="pw-post-body-paragraph jz ka hi kb b kc mf ij ke kf mg im kh ki mh kk kl km mi ko kp kq mj ks kt jy hb bi translated">是我们正在识别其关联的对象。对于在线零售商来说，每件商品都是商店里的产品。对于出版商来说，每一项都可能是一篇文章、一篇博文、一段视频等等。一组项目就是一个<code class="du my mz na nb b">item set</code>。</p><pre class="iy iz ja jb fd nc nb nd ne aw nf bi"><span id="172b" class="mk lh hi nb b fi ng nh l ni nj">Item set, <!-- -->I = {i₁,i₂,i₃, … ,iₙ}</span></pre><h2 id="13c4" class="mk lh hi bd li ml mm mn lm mo mp mq lq ki mr ms ls km mt mu lu kq mv mw lw mx bi translated">处理</h2><p id="ba6a" class="pw-post-body-paragraph jz ka hi kb b kc mf ij ke kf mg im kh ki mh kk kl km mi ko kp kq mj ks kt jy hb bi translated"><code class="du my mz na nb b">Transactions</code>是多组项目同时出现的实例。对于在线零售商来说，交易通常是。对于出版商来说，一个事务可能是一次访问网站时阅读的一组文章。(由分析师决定在什么时间段内衡量一项交易。)那么，对于每笔交易，我们都有一个项目集。</p><pre class="iy iz ja jb fd nc nb nd ne aw nf bi"><span id="4336" class="mk lh hi nb b fi ng nh l ni nj">Transaction, <!-- -->tₙ = {iᵢ,iⱼ, … ,iₖ}</span></pre><h2 id="d5f5" class="mk lh hi bd li ml mm mn lm mo mp mq lq ki mr ms ls km mt mu lu kq mv mw lw mx bi translated">规则</h2><p id="7e7b" class="pw-post-body-paragraph jz ka hi kb b kc mf ij ke kf mg im kh ki mh kk kl km mi ko kp kq mj ks kt jy hb bi translated"><code class="du my mz na nb b">Rules</code>是陈述的形式</p><pre class="iy iz ja jb fd nc nb nd ne aw nf bi"><span id="ba64" class="mk lh hi nb b fi ng nh l ni nj">{i₁,i₂, … } ⇒ {iₖ}</span></pre><p id="dc71" class="pw-post-body-paragraph jz ka hi kb b kc ku ij ke kf kv im kh ki kw kk kl km kx ko kp kq ky ks kt jy hb bi translated">也就是说，如果你在规则的左侧(LHS)有项目集合中的项目，即<code class="du my mz na nb b">{i₁,i₂, … }</code>，那么访问者可能会对右侧(RHS，即<code class="du my mz na nb b">{iₖ}</code>)的项目感兴趣。</p><p id="7a06" class="pw-post-body-paragraph jz ka hi kb b kc ku ij ke kf kv im kh ki kw kk kl km kx ko kp kq ky ks kt jy hb bi translated">例如，上例中的三明治和饼干变成了LHS，饮料变成了RHS。</p></div><div class="ab cl kz la gp lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="hb hc hd he hf"><h1 id="c14f" class="lg lh hi bd li lj lk ll lm ln lo lp lq io lr ip ls ir lt is lu iu lv iv lw lx bi translated">方法学</h1><h2 id="0c29" class="mk lh hi bd li ml mm mn lm mo mp mq lq ki mr ms ls km mt mu lu kq mv mw lw mx bi translated">关联规则挖掘</h2><ul class=""><li id="074e" class="nk nl hi kb b kc mf kf mg ki nm km nn kq no jy np nq nr ns bi translated">用于在交易数据库中的项目集之间寻找频繁模式、关联、相关性或因果结构。</li><li id="f8b3" class="nk nl hi kb b kc nt kf nu ki nv km nw kq nx jy np nq nr ns bi translated">通过发现顾客放入“购物篮”的不同商品之间的关联和相关性，了解顾客的购买习惯。</li><li id="e588" class="nk nl hi kb b kc nt kf nu ki nv km nw kq nx jy np nq nr ns bi translated">规则形式:<code class="du my mz na nb b">Antecedent Item ⇒ Consequent Item</code></li></ul><h2 id="8e0d" class="mk lh hi bd li ml mm mn lm mo mp mq lq ki mr ms ls km mt mu lu kq mv mw lw mx bi translated">先验原则</h2><p id="fa4a" class="pw-post-body-paragraph jz ka hi kb b kc mf ij ke kf mg im kh ki mh kk kl km mi ko kp kq mj ks kt jy hb bi translated">apriori原则可以减少我们需要检查的项目集的数量。</p><p id="6d99" class="pw-post-body-paragraph jz ka hi kb b kc ku ij ke kf kv im kh ki kw kk kl km kx ko kp kq ky ks kt jy hb bi translated">简单地说，先验原则表明:<code class="du my mz na nb b"><em class="mb">if an itemset is infrequent, then all its supersets must also be infrequent.</em></code></p><p id="fd5f" class="pw-post-body-paragraph jz ka hi kb b kc ku ij ke kf kv im kh ki kw kk kl km kx ko kp kq ky ks kt jy hb bi translated">这意味着如果<em class="mb"> {beer} </em>被发现不频繁，我们可以预计<em class="mb"> {beer，pizza} </em>同样不频繁，甚至更不频繁。因此，在合并流行项目集的列表时，我们不需要考虑<em class="mb">{啤酒，比萨饼} </em>，也不需要考虑任何其他包含啤酒的项目集配置。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ny"><img src="../Images/fa3035ee960f6bca6534e012049b5d2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vco9ExZAlfgN0QbwlhgydA.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Apriori Algorithm | Image by Author</figcaption></figure><p id="5d8b" class="pw-post-body-paragraph jz ka hi kb b kc ku ij ke kf kv im kh ki kw kk kl km kx ko kp kq ky ks kt jy hb bi translated">现在，我们使用三个非常重要的概念:支持、信心和提升，来实施和理解购物篮分析。</p><p id="eb57" class="pw-post-body-paragraph jz ka hi kb b kc ku ij ke kf kv im kh ki kw kk kl km kx ko kp kq ky ks kt jy hb bi translated"><strong class="kb hj">支持</strong></p><p id="913f" class="pw-post-body-paragraph jz ka hi kb b kc ku ij ke kf kv im kh ki kw kk kl km kx ko kp kq ky ks kt jy hb bi translated">项目或项目集的<code class="du my mz na nb b">support</code>是数据集中包含该项目或项目集的事务的分数。<code class="du my mz na nb b">Support</code>确定规则适用于给定数据集的频率。</p><pre class="iy iz ja jb fd nc nb nd ne aw nf bi"><span id="a83d" class="mk lh hi nb b fi ng nh l ni nj">Support(A ∪ B) = min(Support(A), Support(B))</span></pre><p id="010e" class="pw-post-body-paragraph jz ka hi kb b kc ku ij ke kf kv im kh ki kw kk kl km kx ko kp kq ky ks kt jy hb bi translated"><strong class="kb hj">信心</strong></p><p id="6854" class="pw-post-body-paragraph jz ka hi kb b kc ku ij ke kf kv im kh ki kw kk kl km kx ko kp kq ky ks kt jy hb bi translated">置信度被定义为包含LHS(先行项A)的交易也将包含RHS(后续项B)的条件概率。</p><pre class="iy iz ja jb fd nc nb nd ne aw nf bi"><span id="798e" class="mk lh hi nb b fi ng nh l ni nj">Confidence(A =&gt; B) = P(B|A) = P(A ∩ B)/P(A)</span><span id="232d" class="mk lh hi nb b fi nz nh l ni nj">Confidence(A =&gt; B) = Support(A ∪ B)/Support(A)</span></pre><p id="4cc2" class="pw-post-body-paragraph jz ka hi kb b kc ku ij ke kf kv im kh ki kw kk kl km kx ko kp kq ky ks kt jy hb bi translated">规则的可信度是对其预测能力或准确性的度量。置信度告诉我们项目或项目集LHS的存在导致项目或项目集RHS的存在的事务的比例。</p><blockquote class="ly lz ma"><p id="96d3" class="jz ka mb kb b kc ku ij ke kf kv im kh mc kw kk kl md kx ko kp me ky ks kt jy hb bi translated">置信度度量的一个缺点是它可能错误地表示了关联的重要性。这是因为它只解释了苹果有多受欢迎，而不是啤酒。如果啤酒通常也很受欢迎，那么包含苹果的交易也包含啤酒的可能性会更高，从而扩大了信心指数。为了说明这两个组成项目的基本受欢迎程度，我们使用了第三个指标，称为lift。</p></blockquote><p id="8057" class="pw-post-body-paragraph jz ka hi kb b kc ku ij ke kf kv im kh ki kw kk kl km kx ko kp kq ky ks kt jy hb bi translated"><strong class="kb hj">抬起</strong></p><p id="4f33" class="pw-post-body-paragraph jz ka hi kb b kc ku ij ke kf kv im kh ki kw kk kl km kx ko kp kq ky ks kt jy hb bi translated">Lift给出了规则A中A和B之间的相关性B. <br/>相关性说明了一个项集A如何影响项集B. <br/> A和B是独立的当且仅当:<code class="du my mz na nb b">P(A ⋂ B)=P(A) x P(B)</code>，否则是从属的。升力由下式给出:</p><pre class="iy iz ja jb fd nc nb nd ne aw nf bi"><span id="408d" class="mk lh hi nb b fi ng nh l ni nj">Lift(A =&gt; B) = <!-- -->P(A ⋂ B)/[P(A) x P(B)]</span><span id="40c9" class="mk lh hi nb b fi nz nh l ni nj">Lift(A =&gt; B) = Support(A ∪ B)/[Support(A)<!-- --> x Support(B)]</span><span id="31dd" class="mk lh hi nb b fi nz nh l ni nj">Lift(A =&gt; B) = Confidence(A =&gt; B)/Support(B)</span></pre><p id="c3b9" class="pw-post-body-paragraph jz ka hi kb b kc ku ij ke kf kv im kh ki kw kk kl km kx ko kp kq ky ks kt jy hb bi translated">所以，升力越高，A和B同时出现的几率就越高。</p><h2 id="4e74" class="mk lh hi bd li ml mm mn lm mo mp mq lq ki mr ms ls km mt mu lu kq mv mw lw mx bi translated">关联规则挖掘的目标</h2><p id="2d45" class="pw-post-body-paragraph jz ka hi kb b kc mf ij ke kf mg im kh ki mh kk kl km mi ko kp kq mj ks kt jy hb bi translated">当我们对一组给定的交易X应用关联规则挖掘时，目标是找到具有以下特征的所有规则:</p><ul class=""><li id="5301" class="nk nl hi kb b kc ku kf kv ki oa km ob kq oc jy np nq nr ns bi translated">支持大于或等于min_support</li><li id="1fe2" class="nk nl hi kb b kc nt kf nu ki nv km nw kq nx jy np nq nr ns bi translated">置信度大于或等于min_confidence</li></ul><h2 id="f900" class="mk lh hi bd li ml mm mn lm mo mp mq lq ki mr ms ls km mt mu lu kq mv mw lw mx bi translated">使用关联规则进行购物篮分析的步骤</h2><ol class=""><li id="b59a" class="nk nl hi kb b kc mf kf mg ki nm km nn kq no jy od nq nr ns bi translated">收集数据</li><li id="47d9" class="nk nl hi kb b kc nt kf nu ki nv km nw kq nx jy od nq nr ns bi translated">探索和准备数据</li><li id="2281" class="nk nl hi kb b kc nt kf nu ki nv km nw kq nx jy od nq nr ns bi translated">根据数据训练模型</li><li id="c358" class="nk nl hi kb b kc nt kf nu ki nv km nw kq nx jy od nq nr ns bi translated">评估模型性能</li><li id="4037" class="nk nl hi kb b kc nt kf nu ki nv km nw kq nx jy od nq nr ns bi translated">提高模型性能</li></ol></div><div class="ab cl kz la gp lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="hb hc hd he hf"><h1 id="fedb" class="lg lh hi bd li lj lk ll lm ln lo lp lq io lr ip ls ir lt is lu iu lv iv lw lx bi translated">数据</h1><p id="86e8" class="pw-post-body-paragraph jz ka hi kb b kc mf ij ke kf mg im kh ki mh kk kl km mi ko kp kq mj ks kt jy hb bi translated">现在，我们将对从不同来源获得的两个数据集应用<code class="du my mz na nb b">MBA</code>，这两个数据集是来自两家商店的公开可用数据集。</p><h2 id="a5e6" class="mk lh hi bd li ml mm mn lm mo mp mq lq ki mr ms ls km mt mu lu kq mv mw lw mx bi translated">数据集1</h2><blockquote class="jo"><p id="0cd9" class="jp jq hi bd jr js oe of og oh oi jy dx translated"><a class="ae jn" href="https://archive.ics.uci.edu/ml/datasets/online+retail" rel="noopener ugc nofollow" target="_blank">“在线零售”，包含2010年1月12日和2011年9月12日之间发生的一家英国注册在线零售商的所有交易，摘自UCI机器学习库</a></p></blockquote><p id="5359" class="pw-post-body-paragraph jz ka hi kb b kc kd ij ke kf kg im kh ki kj kk kl km kn ko kp kq kr ks kt jy hb bi translated"><strong class="kb hj">数据集描述</strong></p><ul class=""><li id="c56a" class="nk nl hi kb b kc ku kf kv ki oa km ob kq oc jy np nq nr ns bi translated">行数:<strong class="kb hj"> 541909 </strong></li><li id="a3dd" class="nk nl hi kb b kc nt kf nu ki nv km nw kq nx jy np nq nr ns bi translated">属性数量:<strong class="kb hj"> 08 </strong></li></ul><p id="b755" class="pw-post-body-paragraph jz ka hi kb b kc ku ij ke kf kv im kh ki kw kk kl km kx ko kp kq ky ks kt jy hb bi translated">然后经过预处理，数据集包括<strong class="kb hj">406829条</strong>记录和<strong class="kb hj"> 10个字段</strong>:发票号、库存代码、描述、数量、发票日期、单价、客户号、国家、日期、时间。</p><p id="8b0a" class="pw-post-body-paragraph jz ka hi kb b kc ku ij ke kf kv im kh ki kw kk kl km kx ko kp kq ky ks kt jy hb bi translated">该矩阵包含客户在一个月内购买的<strong class="kb hj"> 19295笔交易</strong>(行)和566件(列)独特商品。</p><p id="d808" class="pw-post-body-paragraph jz ka hi kb b kc ku ij ke kf kv im kh ki kw kk kl km kx ko kp kq ky ks kt jy hb bi translated">19295笔交易中有1803笔包含<em class="mb">白色吊心T-LIGHT HOLDER </em>，而9835笔交易中有1709笔包含<em class="mb"> REGENCY CAKESTAND 3 TIER </em>。</p><h2 id="8727" class="mk lh hi bd li ml mm mn lm mo mp mq lq ki mr ms ls km mt mu lu kq mv mw lw mx bi translated">数据集2</h2><blockquote class="jo"><p id="f132" class="jp jq hi bd jr js oe of og oh oi jy dx translated"><a class="ae jn" href="http://cox.csueastbay.edu/~esuess/classes/Statistics_452/Presentations/ml13a/groceries.csv" rel="noopener ugc nofollow" target="_blank">来自加州州立大学统计和生物统计系的食品杂货数据</a></p></blockquote><p id="9df0" class="pw-post-body-paragraph jz ka hi kb b kc kd ij ke kf kg im kh ki kj kk kl km kn ko kp kq kr ks kt jy hb bi translated">该矩阵包含客户在一个月内购买的<strong class="kb hj"> 9835笔交易</strong>(行)和169件(列)独特商品。</p><ul class=""><li id="9728" class="nk nl hi kb b kc ku kf kv ki oa km ob kq oc jy np nq nr ns bi translated">9835笔交易中有2513笔交易包含全脂牛奶，而9835笔交易中有1809笔交易包含面包卷。</li><li id="e5ad" class="nk nl hi kb b kc nt kf nu ki nv km nw kq nx jy np nq nr ns bi translated">有2159个交易只包含1个购买的项目，并且只有1个交易包含32个购买的独特项目。</li></ul></div><div class="ab cl kz la gp lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="hb hc hd he hf"><h1 id="0d12" class="lg lh hi bd li lj lk ll lm ln lo lp lq io lr ip ls ir lt is lu iu lv iv lw lx bi translated">结果</h1><p id="8e4b" class="pw-post-body-paragraph jz ka hi kb b kc mf ij ke kf mg im kh ki mh kk kl km mi ko kp kq mj ks kt jy hb bi translated">最后，让我们看一下在对这些数据集应用关联规则后得到的结果和推论。这些推论在下面用图形的帮助下以一种直观的方式描述出来，同时还有一些更多的细节来描述这些图形。</p><h2 id="4756" class="mk lh hi bd li ml mm mn lm mo mp mq lq ki mr ms ls km mt mu lu kq mv mw lw mx bi translated">数据集1</h2><p id="b4b5" class="pw-post-body-paragraph jz ka hi kb b kc mf ij ke kf mg im kh ki mh kk kl km mi ko kp kq mj ks kt jy hb bi translated">来自<code class="du my mz na nb b">UCI Machine Learning Repository</code>的这个数据集可以用不同的方式分解，以做出许多不同的推论。</p><p id="5434" class="pw-post-body-paragraph jz ka hi kb b kc ku ij ke kf kv im kh ki kw kk kl km kx ko kp kq ky ks kt jy hb bi translated"><strong class="kb hj">人们购买物品的时间</strong></p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es oj"><img src="../Images/8d008303f0e52e79ac3f0f36649112ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_Ca9GjcBJAx2lMRWLk6xFA.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Image by Author</figcaption></figure><ul class=""><li id="a8dd" class="nk nl hi kb b kc ku kf kv ki oa km ob kq oc jy np nq nr ns bi translated">这个数字回答了人们通常在什么时间网上购物的问题。</li><li id="5aec" class="nk nl hi kb b kc nt kf nu ki nv km nw kq nx jy np nq nr ns bi translated">一天中的小时和订单量之间有明显的差异。</li><li id="59cf" class="nk nl hi kb b kc nt kf nu ki nv km nw kq nx jy np nq nr ns bi translated">大多数订单发生在10:00-15:00之间。</li><li id="3ca7" class="nk nl hi kb b kc nt kf nu ki nv km nw kq nx jy np nq nr ns bi translated">这有助于零售商在高峰时段展示更多的广告，并结合购物篮分析中的类似产品。</li></ul><p id="f4aa" class="pw-post-body-paragraph jz ka hi kb b kc ku ij ke kf kv im kh ki kw kk kl km kx ko kp kq ky ks kt jy hb bi translated"><strong class="kb hj">每位顾客购买的商品数量</strong></p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ok"><img src="../Images/755be18b902683a34c55d38409cdfbc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*azI4ClT8NRiPmiiFrL8rIQ.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Image by Author</figcaption></figure><ul class=""><li id="1516" class="nk nl hi kb b kc ku kf kv ki oa km ob kq oc jy np nq nr ns bi translated">这个数字代表每个顾客买了多少东西。大多数人购买的商品少于10件(每张发票少于10件)。</li></ul><p id="0d85" class="pw-post-body-paragraph jz ka hi kb b kc ku ij ke kf kv im kh ki kw kk kl km kx ko kp kq ky ks kt jy hb bi translated"><strong class="kb hj">最畅销的20件商品</strong></p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ol"><img src="../Images/8b0d6c0c534ed03d6a9ef92c793c32de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9v8gxQoWkHvQ-fIsfB_ppA.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Image by Author</figcaption></figure><ul class=""><li id="96bd" class="nk nl hi kb b kc ku kf kv ki oa km ob kq oc jy np nq nr ns bi translated">上图是畅销书排行榜的前二十名。</li></ul><p id="14ac" class="pw-post-body-paragraph jz ka hi kb b kc ku ij ke kf kv im kh ki kw kk kl km kx ko kp kq ky ks kt jy hb bi translated"><strong class="kb hj">前20个项目的绝对项目频率图</strong></p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es om"><img src="../Images/707a00de69a760ada7fde0888f2149aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zlEzf3WSh91UniPZ-Ena3w.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Image by Author</figcaption></figure><ul class=""><li id="e96e" class="nk nl hi kb b kc ku kf kv ki oa km ob kq oc jy np nq nr ns bi translated"><code class="du my mz na nb b">absolute item frequency plot()</code>显示的是某件商品的绝对购买数量。</li><li id="558c" class="nk nl hi kb b kc nt kf nu ki nv km nw kq nx jy np nq nr ns bi translated">它独立地绘制每个项目的数字频率。</li><li id="9b01" class="nk nl hi kb b kc nt kf nu ki nv km nw kq nx jy np nq nr ns bi translated"><code class="du my mz na nb b">RColorBrewer</code>图书馆为剧情增添了色彩。</li></ul><p id="5aef" class="pw-post-body-paragraph jz ka hi kb b kc ku ij ke kf kv im kh ki kw kk kl km kx ko kp kq ky ks kt jy hb bi translated"><strong class="kb hj">前20个项目的相对项目频率图</strong></p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es on"><img src="../Images/4e96ff9539f18a8bcb470c5791520e9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T8J6vJDmwZfJ76JdLdh-zA.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Image by Author</figcaption></figure><ul class=""><li id="9e2e" class="nk nl hi kb b kc ku kf kv ki oa km ob kq oc jy np nq nr ns bi translated"><code class="du my mz na nb b">relative item frequency plot()</code>显示某一商品被购买的相对数量，以百分比表示。</li><li id="2787" class="nk nl hi kb b kc nt kf nu ki nv km nw kq nx jy np nq nr ns bi translated">此图显示了前20种商品的<code class="du my mz na nb b">relative item frequency</code>，最常购买的商品是<code class="du my mz na nb b">WHITE HANGING HEART T-LIGHT HOLDER</code>。</li><li id="00c9" class="nk nl hi kb b kc nt kf nu ki nv km nw kq nx jy np nq nr ns bi translated"><code class="du my mz na nb b">RColorBrewer</code>库为绘图添加颜色。</li></ul><p id="8e2d" class="pw-post-body-paragraph jz ka hi kb b kc ku ij ke kf kv im kh ki kw kk kl km kx ko kp kq ky ks kt jy hb bi translated"><strong class="kb hj">给定数据的散点图(49122规则)</strong></p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es oo"><img src="../Images/b4d658483289bb9cf608b29fb367ed95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IKZMlMa5-xTvdsA3xURCfQ.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Image by Author</figcaption></figure><ul class=""><li id="56a1" class="nk nl hi kb b kc ku kf kv ki oa km ob kq oc jy np nq nr ns bi translated"><code class="du my mz na nb b">scatter plot()</code>是用于可视化关联规则的图，其中黑色表示<code class="du my mz na nb b">lift</code>，x轴是<code class="du my mz na nb b">support</code>，y轴是<code class="du my mz na nb b">confidence</code>。</li><li id="70c6" class="nk nl hi kb b kc nt kf nu ki nv km nw kq nx jy np nq nr ns bi translated">这是从数据集1中提取的49122 <code class="du my mz na nb b">rules</code>的图。</li><li id="2fb7" class="nk nl hi kb b kc nt kf nu ki nv km nw kq nx jy np nq nr ns bi translated">这表明大多数项目的<code class="du my mz na nb b">support</code>小于0.002。</li><li id="ecc8" class="nk nl hi kb b kc nt kf nu ki nv km nw kq nx jy np nq nr ns bi translated">还显示了当<code class="du my mz na nb b">support</code>较小时，升程最大。</li><li id="8634" class="nk nl hi kb b kc nt kf nu ki nv km nw kq nx jy np nq nr ns bi translated">数据集1中的<code class="du my mz na nb b">confidence</code>级别远高于数据集2中的级别(稍后显示)。数据集1中的<code class="du my mz na nb b">scatterplot</code>都聚集在0.01附近，但对于数据集1，观察到一个清晰的趋势——随着<code class="du my mz na nb b">support</code>的增加，逻辑上向数据集2移动。</li><li id="2939" class="nk nl hi kb b kc nt kf nu ki nv km nw kq nx jy np nq nr ns bi translated">由于数据集1中的规则比数据集2中的规则多得多，它以更好的方式描绘了现实世界的分析，因此提供了更好的散点图。</li><li id="e454" class="nk nl hi kb b kc nt kf nu ki nv km nw kq nx jy np nq nr ns bi translated">这以一个惊人的结果结束了观察，随着提取的<code class="du my mz na nb b">rules</code>数量的增加，<code class="du my mz na nb b">confidence</code>水平趋向于1，给我们一个精确的结果。</li></ul><p id="7830" class="pw-post-body-paragraph jz ka hi kb b kc ku ij ke kf kv im kh ki kw kk kl km kx ko kp kq ky ks kt jy hb bi translated"><strong class="kb hj">一个给定数据的两键绘图(49122规则)</strong></p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es op"><img src="../Images/278c1b122543d6ead97bbd88e1805f85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_rykem6Rv1L5JMKXhns0Ig.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Image by Author</figcaption></figure><ul class=""><li id="f55a" class="nk nl hi kb b kc ku kf kv ki oa km ob kq oc jy np nq nr ns bi translated"><code class="du my mz na nb b">Two-key plot()</code>类似于<code class="du my mz na nb b">scatter plot</code>，x轴为<code class="du my mz na nb b">support</code>，y轴为<code class="du my mz na nb b">confidence</code>，颜色根据<code class="du my mz na nb b">lift</code>变化，如右图所示。</li><li id="d01e" class="nk nl hi kb b kc nt kf nu ki nv km nw kq nx jy np nq nr ns bi translated">此图显示了从数据库1中提取的整个49122 <code class="du my mz na nb b">rules</code>的<code class="du my mz na nb b">two-key plot</code>。</li><li id="2a5d" class="nk nl hi kb b kc nt kf nu ki nv km nw kq nx jy np nq nr ns bi translated">它还表明当<code class="du my mz na nb b">support</code>较小时<code class="du my mz na nb b">lift</code>最大。</li></ul><p id="9bbf" class="pw-post-body-paragraph jz ka hi kb b kc ku ij ke kf kv im kh ki kw kk kl km kx ko kp kq ky ks kt jy hb bi translated"><strong class="kb hj">平行坐标绘制规则</strong></p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es oq"><img src="../Images/c41e9d9edd62c0e11e6d89560d35d895.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BbxW5qroOoZqeIsk8xJN0w.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Image by Author</figcaption></figure><ul class=""><li id="6a63" class="nk nl hi kb b kc ku kf kv ki oa km ob kq oc jy np nq nr ns bi translated"><code class="du my mz na nb b">Parallel Coordinates Plot()</code>显示什么产品用什么物品产生什么样的销售额。</li><li id="f9d1" class="nk nl hi kb b kc nt kf nu ki nv km nw kq nx jy np nq nr ns bi translated">这是数据库中50个<code class="du my mz na nb b">rules</code>的<code class="du my mz na nb b">parallel coordinates plot</code>。</li><li id="5146" class="nk nl hi kb b kc nt kf nu ki nv km nw kq nx jy np nq nr ns bi translated">它显示如果有人买了<code class="du my mz na nb b">BILLBOARD FONTS DESIGN</code>，他们下一个就会买<code class="du my mz na nb b">WRAP</code>，颜色越深表示<code class="du my mz na nb b">confidence</code>高。</li></ul><h2 id="05bc" class="mk lh hi bd li ml mm mn lm mo mp mq lq ki mr ms ls km mt mu lu kq mv mw lw mx bi translated">数据集2</h2><p id="5004" class="pw-post-body-paragraph jz ka hi kb b kc mf ij ke kf mg im kh ki mh kk kl km mi ko kp kq mj ks kt jy hb bi translated">这个来自<code class="du my mz na nb b">Department of Statistics and Biostatistics, California State University</code>的数据集可以用不同的方式分解，以做出许多不同的推论。</p><p id="05f0" class="pw-post-body-paragraph jz ka hi kb b kc ku ij ke kf kv im kh ki kw kk kl km kx ko kp kq ky ks kt jy hb bi translated"><strong class="kb hj">前10个项目的相对项目频率</strong></p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es or"><img src="../Images/5b1d5c976aef12098412709b48b638e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dA5TXoEAElgXBYbxEvktRA.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Image by Author</figcaption></figure><ul class=""><li id="b01d" class="nk nl hi kb b kc ku kf kv ki oa km ob kq oc jy np nq nr ns bi translated"><code class="du my mz na nb b">itemFrequencyPlot()</code>允许我们显示绝对值或相对值。</li><li id="d3c7" class="nk nl hi kb b kc nt kf nu ki nv km nw kq nx jy np nq nr ns bi translated">上图显示了第一个数据集中前10项的<code class="du my mz na nb b">relative item frequency</code>。</li><li id="5977" class="nk nl hi kb b kc nt kf nu ki nv km nw kq nx jy np nq nr ns bi translated">它绘制了这些项目相对于其他项目出现的次数。</li><li id="6f36" class="nk nl hi kb b kc nt kf nu ki nv km nw kq nx jy np nq nr ns bi translated"><code class="du my mz na nb b">Whole milk</code>是最畅销的产品，其次是<code class="du my mz na nb b">rolls/buns</code>和其他<code class="du my mz na nb b">vegetables</code>。</li></ul><p id="7ad0" class="pw-post-body-paragraph jz ka hi kb b kc ku ij ke kf kv im kh ki kw kk kl km kx ko kp kq ky ks kt jy hb bi translated"><strong class="kb hj">给定数据的散点图(463规则)</strong></p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es os"><img src="../Images/69221fd35fd0e60c80cab4f67feb5115.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wEFl35ux3VbvAC9r9m4grw.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Image by Author</figcaption></figure><ul class=""><li id="0062" class="nk nl hi kb b kc ku kf kv ki oa km ob kq oc jy np nq nr ns bi translated"><code class="du my mz na nb b">scatter plot()</code>是关联规则可视化图，其中黑色表示<code class="du my mz na nb b">lift</code>，x轴是<code class="du my mz na nb b">support</code>，y轴是<code class="du my mz na nb b">confidence</code>。</li><li id="36e5" class="nk nl hi kb b kc nt kf nu ki nv km nw kq nx jy np nq nr ns bi translated">这是从数据集2中提取的463 <code class="du my mz na nb b">rules</code>的图。</li><li id="d71c" class="nk nl hi kb b kc nt kf nu ki nv km nw kq nx jy np nq nr ns bi translated">这表明大多数项目的<code class="du my mz na nb b">support</code>小于0.03。</li><li id="93fb" class="nk nl hi kb b kc nt kf nu ki nv km nw kq nx jy np nq nr ns bi translated">这也表明当<code class="du my mz na nb b">support</code>较小时<code class="du my mz na nb b">lift</code>最大。</li></ul><p id="91b9" class="pw-post-body-paragraph jz ka hi kb b kc ku ij ke kf kv im kh ki kw kk kl km kx ko kp kq ky ks kt jy hb bi translated"><strong class="kb hj">关联规则前50条规则图</strong></p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ot"><img src="../Images/7781440687b8c2a6c1b724999f0cdfc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ow1Z3hPZaITDVwEqqz_36Q.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Image by Author</figcaption></figure><ul class=""><li id="2710" class="nk nl hi kb b kc ku kf kv ki oa km ob kq oc jy np nq nr ns bi translated">在<code class="du my mz na nb b">graph rules plot()</code>图中，我们可以很容易地看到关联<code class="du my mz na nb b">rules</code>。</li><li id="38f5" class="nk nl hi kb b kc nt kf nu ki nv km nw kq nx jy np nq nr ns bi translated">气泡的大小随着<code class="du my mz na nb b">support</code>的增加而增加，而颜色随着<code class="du my mz na nb b">lift</code>的增加而变暗。</li><li id="bcbc" class="nk nl hi kb b kc nt kf nu ki nv km nw kq nx jy np nq nr ns bi translated">此处的箭头表示前一个项目旁边购买的项目。</li><li id="8672" class="nk nl hi kb b kc nt kf nu ki nv km nw kq nx jy np nq nr ns bi translated">在这个剧情中，<code class="du my mz na nb b">sausage</code>是在<code class="du my mz na nb b">sliced cheese</code>之后买的。</li><li id="ee07" class="nk nl hi kb b kc nt kf nu ki nv km nw kq nx jy np nq nr ns bi translated">右上角也给出了<code class="du my mz na nb b">support</code>和<code class="du my mz na nb b">lift</code>的范围。</li></ul><p id="7f1f" class="pw-post-body-paragraph jz ka hi kb b kc ku ij ke kf kv im kh ki kw kk kl km kx ko kp kq ky ks kt jy hb bi translated"><strong class="kb hj">平行坐标绘制为100规则</strong></p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es oq"><img src="../Images/c41e9d9edd62c0e11e6d89560d35d895.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BbxW5qroOoZqeIsk8xJN0w.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Image by Author</figcaption></figure><ul class=""><li id="f457" class="nk nl hi kb b kc ku kf kv ki oa km ob kq oc jy np nq nr ns bi translated"><code class="du my mz na nb b">Parallel Coordinates Plot()</code>显示什么产品和什么项目产生什么样的销售额。</li><li id="69a0" class="nk nl hi kb b kc nt kf nu ki nv km nw kq nx jy np nq nr ns bi translated">这是数据库中100个<code class="du my mz na nb b">rules</code>的<code class="du my mz na nb b">parallel coordinates plot</code>。</li><li id="e3a7" class="nk nl hi kb b kc nt kf nu ki nv km nw kq nx jy np nq nr ns bi translated">它表明，如果有人购买了<code class="du my mz na nb b">berries</code>，他们更有可能接着购买<code class="du my mz na nb b">whipped/sour cream</code>，颜色越深表明<code class="du my mz na nb b">confidence</code>越高。</li></ul><p id="2def" class="pw-post-body-paragraph jz ka hi kb b kc ku ij ke kf kv im kh ki kw kk kl km kx ko kp kq ky ks kt jy hb bi translated"><strong class="kb hj">463规则的分组矩阵</strong></p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ou"><img src="../Images/dc1c41180049810659fc300e386a6b46.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qWUMdDBvgD4VKOhPMoZ5PA.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Image by Author</figcaption></figure><ul class=""><li id="0d53" class="nk nl hi kb b kc ku kf kv ki oa km ob kq oc jy np nq nr ns bi translated">在<code class="du my mz na nb b">grouped matrix plot()</code>的这个图中，<code class="du my mz na nb b">rules</code>被表示为基于分组矩阵的可视化。</li><li id="8a32" class="nk nl hi kb b kc nt kf nu ki nv km nw kq nx jy np nq nr ns bi translated">这是一种通过聚类创建嵌套组<code class="du my mz na nb b">rules</code>(更具体地说是先行项集)的新方法。</li><li id="62dd" class="nk nl hi kb b kc nt kf nu ki nv km nw kq nx jy np nq nr ns bi translated">嵌套组的创建形成了一个层次结构，该层次结构将被交互地探索到每个单独的规则。</li><li id="159d" class="nk nl hi kb b kc nt kf nu ki nv km nw kq nx jy np nq nr ns bi translated"><code class="du my mz na nb b">support</code>和<code class="du my mz na nb b">lift</code>度量分别由气球的大小和颜色表示。</li><li id="82b8" class="nk nl hi kb b kc nt kf nu ki nv km nw kq nx jy np nq nr ns bi translated">在这种情况下，这不是一个非常有用的可视化，因为我们只在规则的右边有<code class="du my mz na nb b">whipped/sour cream</code>。</li></ul></div><div class="ab cl kz la gp lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="hb hc hd he hf"><h1 id="51de" class="lg lh hi bd li lj lk ll lm ln lo lp lq io lr ip ls ir lt is lu iu lv iv lw lx bi translated">最后的话</h1><p id="a792" class="pw-post-body-paragraph jz ka hi kb b kc mf ij ke kf mg im kh ki mh kk kl km mi ko kp kq mj ks kt jy hb bi translated">购物篮分析是一种无监督的机器学习技术，可用于发现交易数据中的模式。它可以成为分析消费者购买模式的一个非常强大的工具。</p><p id="cd8f" class="pw-post-body-paragraph jz ka hi kb b kc ku ij ke kf kv im kh ki kw kk kl km kx ko kp kq ky ks kt jy hb bi translated">用于购物篮分析的主要算法是<code class="du my mz na nb b">apriori algorithm</code>。购物篮分析中的三个统计量是<code class="du my mz na nb b">support</code>、<code class="du my mz na nb b">confidence</code>和<code class="du my mz na nb b">lift</code>。</p><blockquote class="jo"><p id="b506" class="jp jq hi bd jr js oe of og oh oi jy dx translated">购物篮分析借助关联规则可以很容易地判断出客户的购买行为；零售商在这些概念的帮助下，可以很容易地建立自己的零售店，以扩大未来的业务。</p></blockquote><p id="1fdf" class="pw-post-body-paragraph jz ka hi kb b kc kd ij ke kf kg im kh ki kj kk kl km kn ko kp kq kr ks kt jy hb bi translated">尽管购物篮分析会让人联想到购物车和超市购物者的画面，但重要的是它可以应用于:</p><ul class=""><li id="e72f" class="nk nl hi kb b kc ku kf kv ki oa km ob kq oc jy np nq nr ns bi translated">信用卡购物分析</li><li id="6843" class="nk nl hi kb b kc nt kf nu ki nv km nw kq nx jy np nq nr ns bi translated">电话呼叫模式分析</li><li id="650e" class="nk nl hi kb b kc nt kf nu ki nv km nw kq nx jy np nq nr ns bi translated">欺诈性医疗保险索赔的识别<br/>(考虑违反通用规则的案例)</li><li id="e88e" class="nk nl hi kb b kc nt kf nu ki nv km nw kq nx jy np nq nr ns bi translated">电信服务购买分析</li></ul><p id="1cd2" class="pw-post-body-paragraph jz ka hi kb b kc ku ij ke kf kv im kh ki kw kk kl km kx ko kp kq ky ks kt jy hb bi translated">在本文中，我们研究了杂货购买的交易模式，并发现了某些交易中明显和不太明显的模式。</p><p id="5561" class="pw-post-body-paragraph jz ka hi kb b kc ku ij ke kf kv im kh ki kw kk kl km kx ko kp kq ky ks kt jy hb bi translated"><em class="mb">最后，</em> <em class="mb">如果您遇到任何困难，有任何疑问，请随时联系我。</em></p></div></div>    
</body>
</html>