<html>
<head>
<title>How to securely connect to your servers?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何安全地连接到您的服务器？</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/ssh-securely-connect-to-your-servers-8895faab7083?source=collection_archive---------10-----------------------#2022-02-21">https://medium.com/geekculture/ssh-securely-connect-to-your-servers-8895faab7083?source=collection_archive---------10-----------------------#2022-02-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="1906" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">学习使用SSH通过互联网安全地连接到您的服务器</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/3b5633f644baec4e1625cd4f07230a0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*O3wPx3GlYqhalrPh"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Photo by <a class="ae jn" href="https://unsplash.com/@tracycodes?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Tracy Adams</a> on <a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="9d14" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">您是否正在为互联网上的用户设置web服务来访问您的服务。或者您正在为即将推出的产品开发嵌入式设备。您必须与外部设备进行远程通信。为了安全地做到这一点，您必须使用SSH。</p><p id="3be5" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">以下是如何使用SSH通过互联网安全地连接您的服务器。</p><p id="7c68" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">本指南将假设你在你的服务器上使用Debian，因为它是初学者最流行的衍生服务器操作系统。请记住，在其他发行版中发生变化的概念是文件的安装位置、初始化系统和包管理。</p><h2 id="9f1b" class="kl km hi bd kn ko kp kq kr ks kt ku kv jx kw kx ky kb kz la lb kf lc ld le lf bi translated">宋承宪的历史</h2><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lg"><img src="../Images/a4f3e64a30b7be0d2ea6aebdc1ef3f1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XWGPMk1PFQRmnm4Q_NyXiw.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">stackoverflow.com</figcaption></figure><p id="44a7" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在有SSH之前，有telnet。<a class="ae jn" href="https://en.wikipedia.org/wiki/Telnet" rel="noopener ugc nofollow" target="_blank"> Telnet是20世纪60年代末开发的。</a>那时，组织有一种叫做大型机的东西。但有一个问题是，如何让两台大型机在办公室之间相互通信。Telnet可以用来解决这个问题，它提供了一种协议，应用程序和用户可以利用这种协议在那些大型机上执行功能。</p><p id="eedc" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">快进到今天，大多数人都在使用个人电脑。对于要供应的服务，您需要创建一个虚拟服务器，该服务器可以跨州托管在数据中心内。问题是你在开放互联网上的交流可能会被拦截。因此SSH被开发来加密机器之间的远距离通信。现在它是人们用来连接两台机器的标准。</p><p id="98fa" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><a class="ae jn" rel="noopener" href="/subscribe/@drechang">在这里注册我的电子邮件列表。</a></p><h2 id="a648" class="kl km hi bd kn ko kp kq kr ks kt ku kv jx kw kx ky kb kz la lb kf lc ld le lf bi translated">如何在你的服务器上安装并启用SSH？</h2><p id="74b9" class="pw-post-body-paragraph jo jp hi jq b jr lh ij jt ju li im jw jx lj jz ka kb lk kd ke kf ll kh ki kj hb bi translated">配置服务器后的第一步是更新您的存储库，并确保您的软件包是最新的。</p><pre class="iy iz ja jb fd lm ln lo lp aw lq bi"><span id="125c" class="kl km hi ln b fi lr ls l lt lu">sudo apt-get update<br/>sudo apt-get upgrade</span></pre><p id="4362" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">当您的包和存储库更新后，您需要安装SSH守护进程。可以看我的博文，<a class="ae jn" rel="noopener" href="/geekculture/what-is-a-daemon-849a00f543c3">什么是守护进程？</a>了解Linux和其他Unix衍生操作系统上的服务是如何工作的。TLD:SSH守护进程是一种处理来自客户端的SSH连接的服务。运行以下命令安装SSHD。</p><pre class="iy iz ja jb fd lm ln lo lp aw lq bi"><span id="f0f3" class="kl km hi ln b fi lr ls l lt lu">sudo apt-get install sshd</span></pre><p id="c09d" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在那里，您必须在您的Linux上启用该服务，并让它在启动时启动。运行以下命令启动SSHD。</p><pre class="iy iz ja jb fd lm ln lo lp aw lq bi"><span id="82d0" class="kl km hi ln b fi lr ls l lt lu">sudo systemctl enable sshd<br/>sudo systemctl start sshd</span></pre><p id="6645" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">运行以下命令以确保您的SSHD服务继续正常工作并且没有崩溃。</p><pre class="iy iz ja jb fd lm ln lo lp aw lq bi"><span id="1888" class="kl km hi ln b fi lr ls l lt lu">sudo systemctl status sshd</span></pre><p id="c53a" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">安装您选择的编辑器。对于本教程的范围，我将使用neovim来编辑文件。使用以下命令安装neovim。</p><pre class="iy iz ja jb fd lm ln lo lp aw lq bi"><span id="3df0" class="kl km hi ln b fi lr ls l lt lu">sudo apt-get install neovim</span></pre><p id="6d60" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在这里注册我的电子邮件列表。</p><h2 id="aa5f" class="kl km hi bd kn ko kp kq kr ks kt ku kv jx kw kx ky kb kz la lb kf lc ld le lf bi translated">您需要创建一个单独的非管理员用户</h2><p id="5b77" class="pw-post-body-paragraph jo jp hi jq b jr lh ij jt ju li im jw jx lj jz ka kb lk kd ke kf ll kh ki kj hb bi translated">您不希望将root用户暴露给公众，以防止黑客获得您系统的root权限。要解决这个问题，您需要创建另一个用户。运行以下命令。</p><pre class="iy iz ja jb fd lm ln lo lp aw lq bi"><span id="6171" class="kl km hi ln b fi lr ls l lt lu">sudo useradd [name_of_users]</span></pre><p id="b2f9" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">按照提示设置您的非管理员用户。您可能需要在sudoer文件中添加用户来请求管理员权限。</p><div class="lv lw ez fb lx ly"><a href="https://www.linuxfordevices.com/tutorials/linux/adding-users-to-sudoers" rel="noopener  ugc nofollow" target="_blank"><div class="lz ab dw"><div class="ma ab mb cl cj mc"><h2 class="bd hj fi z dy md ea eb me ed ef hh bi translated">在Linux中向Sudoers添加用户——一步一步的教程</h2><div class="mf l"><h3 class="bd b fi z dy md ea eb me ed ef dx translated">在Linux中向Sudoers文件添加用户非常容易。您可以通过手动编辑文件或使用…</h3></div><div class="mg l"><p class="bd b fp z dy md ea eb me ed ef dx translated">www.linuxfordevices.com</p></div></div><div class="mh l"><div class="mi l mj mk ml mh mm jh ly"/></div></div></a></div><p id="ab8d" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在这里注册我的电子邮件列表。</p><h2 id="9cce" class="kl km hi bd kn ko kp kq kr ks kt ku kv jx kw kx ky kb kz la lb kf lc ld le lf bi translated">如何设置SSH私有密钥？</h2><p id="09dc" class="pw-post-body-paragraph jo jp hi jq b jr lh ij jt ju li im jw jx lj jz ka kb lk kd ke kf ll kh ki kj hb bi translated">按照提示设置您的非管理员用户。您可能需要在sudoer文件中添加用户来请求管理员权限。</p><pre class="iy iz ja jb fd lm ln lo lp aw lq bi"><span id="69f3" class="kl km hi ln b fi lr ls l lt lu">sudo ssh-keygen</span></pre><p id="bade" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">请确保将其保存到单独的文件中，以便可以使用它向SSHD服务进行身份验证。从那里，您需要将私钥添加到服务器，因为您将使用公钥来访问服务器。运行以下命令。</p><pre class="iy iz ja jb fd lm ln lo lp aw lq bi"><span id="ffbc" class="kl km hi ln b fi lr ls l lt lu">sudo ssh-copy-id -i [public_key] [username]@[ip_address/domain_name]</span></pre><p id="e249" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">系统会提示您输入密码。</p><p id="2ebf" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><a class="ae jn" rel="noopener" href="/subscribe/@drechang">在这里注册我的电子邮件列表。</a></p><h2 id="d402" class="kl km hi bd kn ko kp kq kr ks kt ku kv jx kw kx ky kb kz la lb kf lc ld le lf bi translated">如何安全地配置配置文件？</h2><p id="4699" class="pw-post-body-paragraph jo jp hi jq b jr lh ij jt ju li im jw jx lj jz ka kb lk kd ke kf ll kh ki kj hb bi translated">从那里，您需要进入以下目录来访问您的配置文件。</p><pre class="iy iz ja jb fd lm ln lo lp aw lq bi"><span id="3b13" class="kl km hi ln b fi lr ls l lt lu">nvim /etc/sshd/sshd_config</span></pre><p id="6e8b" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">遵循以下指南来保护配置文件中的SSHD服务。</p><div class="lv lw ez fb lx ly"><a href="https://etapien.com/guides/how-to-secure-sshd/" rel="noopener  ugc nofollow" target="_blank"><div class="lz ab dw"><div class="ma ab mb cl cj mc"><h2 class="bd hj fi z dy md ea eb me ed ef hh bi translated">如何保护SSHd - Tech Howtos</h2><div class="mf l"><h3 class="bd b fi z dy md ea eb me ed ef dx translated">保留SSH的默认设置并不是一个好主意，这里有一些你应该考虑的步骤来改善…</h3></div><div class="mg l"><p class="bd b fp z dy md ea eb me ed ef dx translated">etapien.com</p></div></div><div class="mh l"><div class="mn l mj mk ml mh mm jh ly"/></div></div></a></div><p id="612e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><a class="ae jn" rel="noopener" href="/subscribe/@drechang">在这里注册我的电子邮件列表。</a></p><h2 id="9dab" class="kl km hi bd kn ko kp kq kr ks kt ku kv jx kw kx ky kb kz la lb kf lc ld le lf bi translated">如何给你的SSH连接起别名？</h2><p id="1050" class="pw-post-body-paragraph jo jp hi jq b jr lh ij jt ju li im jw jx lj jz ka kb lk kd ke kf ll kh ki kj hb bi translated">现在您的连接已经安全了，您需要为您的客户机找到一种方便的方式来访问服务器上的ssh服务。您需要做的是在客户机上创建一个ssh配置文件。</p><pre class="iy iz ja jb fd lm ln lo lp aw lq bi"><span id="50ed" class="kl km hi ln b fi lr ls l lt lu">nvim ~/.ssh/config</span></pre><p id="a723" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">您可以为您的连接起别名，所以不要使用</p><pre class="iy iz ja jb fd lm ln lo lp aw lq bi"><span id="5efe" class="kl km hi ln b fi lr ls l lt lu">sudo ssh -i [private_key_file] [username]@[ip_address/domain_name]</span></pre><p id="7f5b" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">你可以跑</p><pre class="iy iz ja jb fd lm ln lo lp aw lq bi"><span id="18ac" class="kl km hi ln b fi lr ls l lt lu">sudo ssh [alias]</span></pre><p id="e0ed" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这是你需要使用的格式指南。</p><pre class="iy iz ja jb fd lm ln lo lp aw lq bi"><span id="60c2" class="kl km hi ln b fi lr ls l lt lu">Host [alias]<br/>  HostName [ip_address/domain_name]<br/>  ForwardX11 [yes/no]<br/>  Compression [yes/no]<br/>  Ciphers [cipher_type]<br/>  User [username]<br/>  IdentityFile [private_key_file]<br/>  PreferredAuthentication publickey</span></pre><p id="5d70" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">下面是一些选项的作用？</strong></p><ul class=""><li id="a8f9" class="mo mp hi jq b jr js ju jv jx mq kb mr kf ms kj mt mu mv mw bi translated">FowardX11，基本上允许你转发GUI</li><li id="3c91" class="mo mp hi jq b jr mx ju my jx mz kb na kf nb kj mt mu mv mw bi translated">压缩，对来回发送文本没什么用。然而，它对于GUI流非常有用</li><li id="66d1" class="mo mp hi jq b jr mx ju my jx mz kb na kf nb kj mt mu mv mw bi translated">密码是加密的方式</li></ul><p id="ede5" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在这里注册我的电子邮件列表。</p><h2 id="33db" class="kl km hi bd kn ko kp kq kr ks kt ku kv jx kw kx ky kb kz la lb kf lc ld le lf bi translated">设置防火墙</h2><p id="1bbb" class="pw-post-body-paragraph jo jp hi jq b jr lh ij jt ju li im jw jx lj jz ka kb lk kd ke kf ll kh ki kj hb bi translated">在基于Debian的系统上设置防火墙相当容易。你需要使用的是通用防火墙或UFW。您可以使用以下命令安装它。</p><pre class="iy iz ja jb fd lm ln lo lp aw lq bi"><span id="27d8" class="kl km hi ln b fi lr ls l lt lu">sudo apt-get install ufw</span></pre><p id="5357" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">您可以使用防火墙阻挡所有其他端口，让SSH端口保持开放，以减少潜在的攻击面。或者限制可以访问服务器的IP地址范围。只要遵循下面的指导方针。</p><div class="lv lw ez fb lx ly"><a href="https://linuxhint.com/ufw-firewall-allow-ssh/" rel="noopener  ugc nofollow" target="_blank"><div class="lz ab dw"><div class="ma ab mb cl cj mc"><h2 class="bd hj fi z dy md ea eb me ed ef hh bi translated">Ufw防火墙允许SSH</h2><div class="mf l"><h3 class="bd b fi z dy md ea eb me ed ef dx translated">几乎每个用户都知道防火墙是我们笔记本电脑或台式电脑的第一道保护层…</h3></div><div class="mg l"><p class="bd b fp z dy md ea eb me ed ef dx translated">linuxhint.com</p></div></div><div class="mh l"><div class="nc l mj mk ml mh mm jh ly"/></div></div></a></div><p id="1b5d" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在这里注册我的电子邮件列表。</p><h2 id="f52b" class="kl km hi bd kn ko kp kq kr ks kt ku kv jx kw kx ky kb kz la lb kf lc ld le lf bi translated">如何使用SSH传输文件？</h2><p id="b635" class="pw-post-body-paragraph jo jp hi jq b jr lh ij jt ju li im jw jx lj jz ka kb lk kd ke kf ll kh ki kj hb bi translated">既然您可以通过别名轻松安全地登录到您的服务，您可能希望安全地将文件从客户端传输到服务器。</p><p id="c376" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">SCP实用程序附带了一个ssh包。该实用程序允许您使用SSH将文件从一台机器连接到另一台机器。</p><p id="5b2f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">您可以使用将文件从您的机器传输到另一台机器</p><pre class="iy iz ja jb fd lm ln lo lp aw lq bi"><span id="41b4" class="kl km hi ln b fi lr ls l lt lu">sudo scp [your_machine_path] [alias]:/[transfer_location] </span></pre><p id="362f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">或者，您可以使用将文件从另一台机器传输到您的机器</p><pre class="iy iz ja jb fd lm ln lo lp aw lq bi"><span id="bfbb" class="kl km hi ln b fi lr ls l lt lu">sudo scp [alias]:/[file_path] [save_to_path]</span></pre><p id="780c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">您甚至可以使用将您的机器作为代理从一台机器传输到另一台机器</p><pre class="iy iz ja jb fd lm ln lo lp aw lq bi"><span id="5cc6" class="kl km hi ln b fi lr ls l lt lu">sudo scp -3 [machine_a]:/[file_path] [machine_b]:/[save_to_path]</span></pre><p id="6fca" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><a class="ae jn" rel="noopener" href="/subscribe/@drechang">在这里注册我的电子邮件列表。</a></p><p id="7e32" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">相关内容:</strong></p><ul class=""><li id="e082" class="mo mp hi jq b jr js ju jv jx mq kb mr kf ms kj mt mu mv mw bi translated">JavaScript:隐私和安全的噩梦</li><li id="3ab3" class="mo mp hi jq b jr mx ju my jx mz kb na kf nb kj mt mu mv mw bi translated">去粘的完整指南</li><li id="3554" class="mo mp hi jq b jr mx ju my jx mz kb na kf nb kj mt mu mv mw bi translated"><a class="ae jn" rel="noopener" href="/@drechang/how-to-build-your-own-illegal-streaming-service-ff353ef70cd0">停止为网飞和Spotify付费</a></li></ul></div></div>    
</body>
</html>