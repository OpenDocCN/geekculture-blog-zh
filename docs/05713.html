<html>
<head>
<title>Trading Algorithms for Cryptocurrencies without Survivorship Bias</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">无生存偏差的加密货币交易算法</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/trading-algorithms-for-cryptocurrencies-without-survivorship-bias-c7507ee2c108?source=collection_archive---------29-----------------------#2021-07-28">https://medium.com/geekculture/trading-algorithms-for-cryptocurrencies-without-survivorship-bias-c7507ee2c108?source=collection_archive---------29-----------------------#2021-07-28</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="692b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在Quantiacs，我们正在举办一场以加密货币为重点的量化交易算法竞赛，我们提供数据和工具来避免生存偏差。在这篇文章中，我们描述了比赛的主要特点。</p><p id="a05c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">存活偏差</strong>是样本选择偏差的一个例子，当数据集仅包含现有(存活)观察值，但不考虑那些不再存在的观察值时，就会发生这种偏差。</p><p id="efe6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个问题在金融和算法交易领域众所周知，通常会导致<strong class="ih hj">过于乐观的预期</strong>。设想开发一个股票交易系统。考虑到大量的资产，习惯上定义一个子集用于研究和开发。一个合理的选择是从美国最具流动性的股票开始，并使用一个<strong class="ih hj">指数作为选择标准</strong>:例如，一个定量分析师可以决定将她的/他的研究集中在<a class="ae je" href="https://en.wikipedia.org/wiki/S%26P_500" rel="noopener ugc nofollow" target="_blank"> S &amp; P500指数</a>的所有成员上。</p><p id="1339" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们想象一下，定量分析师使用指数的当前成员，并使用他们的历史数据进行研究:可能一个简单的只做多策略会表现得非常好，因为定量分析师已经隐含地选择了当前的赢家进行分析。</p><p id="8638" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正确的历史研究需要包括所有在过去的某个时间点是S&amp;P500指数的一部分，但后来被摘牌或消失的股票。</p><p id="18a5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">同样的问题也影响着<strong class="ih hj">加密货币</strong>:通常我们会关注目前表现最好的，但会忽略那些在取得初步成功后消失的。</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div class="er es jf"><img src="../Images/42eceda380c5a63fcd47d24b327323e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*2kD8JpYBbIsUabduR4sR-w.jpeg"/></div><figcaption class="jn jo et er es jp jq bd b be z dx">Photo by <a class="ae je" href="https://unsplash.com/@bermixstudio?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Bermix Studio</a> on <a class="ae je" href="https://unsplash.com/s/photos/crypto?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h2 id="86d9" class="jr js hi bd jt ju jv jw jx jy jz ka kb iq kc kd ke iu kf kg kh iy ki kj kk kl bi translated"><strong class="ak">quanti ACS Q16大赛</strong></h2><p id="0c75" class="pw-post-body-paragraph if ig hi ih b ii km ik il im kn io ip iq ko is it iu kp iw ix iy kq ja jb jc hb bi translated">当前的Quantiacs Q16竞赛聚焦于一组<strong class="ih hj">无生存偏差的加密货币</strong>构建如下:</p><ul class=""><li id="7dd6" class="kr ks hi ih b ii ij im in iq kt iu ku iy kv jc kw kx ky kz bi translated">我们提供2014年1月1日的<strong class="ih hj">加密货币数据；</strong></li><li id="18a2" class="kr ks hi ih b ii la im lb iq lc iu ld iy le jc kw kx ky kz bi translated">我们通过使用来自<a class="ae je" href="http://www.coinmarketcap.com" rel="noopener ugc nofollow" target="_blank"> coinmarketcap </a>的数据，根据<strong class="ih hj">市值</strong>考虑排名前10位的加密货币，在给定时间点定义一个<strong class="ih hj">“流动”世界</strong>；</li><li id="66d6" class="kr ks hi ih b ii la im lb iq lc iu ld iy le jc kw kx ky kz bi translated">我们纳入了自2014年1月1日以来<strong class="ih hj">至少有一次</strong>位列市值前10名的所有加密货币的数据；</li><li id="4ab2" class="kr ks hi ih b ii la im lb iq lc iu ld iy le jc kw kx ky kz bi translated">我们提供了一个<strong class="ih hj">过滤函数</strong>，它为每个时间点选择属于“液体”宇宙的资产。</li></ul><p id="9de8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于入门，我们建议在<a class="ae je" href="http://www.quantiacs.com" rel="noopener ugc nofollow" target="_blank"> Quantiacs </a>创建一个帐户，并从<strong class="ih hj"> Q16快速入门Python模板</strong>开始，该模板在我们的<a class="ae je" href="https://github.com/quantiacs/strategy-first-crypto-daily-long/blob/master/strategy.ipynb" rel="noopener ugc nofollow" target="_blank"> github </a>页面上公开提供。</p><h2 id="e8a8" class="jr js hi bd jt ju jv jw jx jy jz ka kb iq kc kd ke iu kf kg kh iy ki kj kk kl bi translated">Python代码</h2><p id="ba71" class="pw-post-body-paragraph if ig hi ih b ii km ik il im kn io ip iq ko is it iu kp iw ix iy kq ja jb jc hb bi translated">简单模板的完整Python代码如下:</p><pre class="jg jh ji jj fd lf lg lh li aw lj bi"><span id="f838" class="jr js hi lg b fi lk ll l lm ln"><strong class="lg hj">import</strong> <strong class="lg hj">xarray</strong> <strong class="lg hj">as</strong> <strong class="lg hj">xr</strong><br/><br/><strong class="lg hj">import</strong> <strong class="lg hj">qnt.ta</strong> <strong class="lg hj">as</strong> <strong class="lg hj">qnta</strong><br/><strong class="lg hj">import</strong> <strong class="lg hj">qnt.backtester</strong> <strong class="lg hj">as</strong> <strong class="lg hj">qnbt</strong><br/><strong class="lg hj">import</strong> <strong class="lg hj">qnt.data</strong> <strong class="lg hj">as</strong> <strong class="lg hj">qndata</strong><br/><br/><strong class="lg hj">def</strong> load_data(period):<br/>    <strong class="lg hj">return</strong> qndata.cryptodaily_load_data(tail=period)<br/><br/><strong class="lg hj">def</strong> strategy(data):<br/>    close = data.sel(field="close")<br/>    is_liquid = data.sel(field="is_liquid")<br/>    sma_slow = qnta.sma(close, 200).isel(time=-1)<br/>    sma_fast = qnta.sma(close, 20).isel(time=-1)<br/>    weights  = xr.where(sma_slow &lt; sma_fast, 1, 0)<br/>    weights  = weights * is_liquid<br/>    weights  = weights / 10.0<br/>    <strong class="lg hj">return</strong> weights<br/><br/>weights = qnbt.backtest(<br/>    competition_type = "crypto_daily_long",<br/>    load_data = load_data,<br/>    lookback_period = 365,<br/>    start_date = "2014-01-01",<br/>    strategy = strategy<br/>)</span></pre><p id="5b61" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该代码由4部分组成:</p><ul class=""><li id="ef61" class="kr ks hi ih b ii ij im in iq kt iu ku iy kv jc kw kx ky kz bi translated">首先，我们加载需要的Python库，<a class="ae je" href="http://xarray.pydata.org/en/stable/" rel="noopener ugc nofollow" target="_blank"> xarray </a>和<a class="ae je" href="https://github.com/quantiacs/toolbox" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj"> Quantiacs库</strong></a>；</li><li id="2df8" class="kr ks hi ih b ii la im lb iq lc iu ld iy le jc kw kx ky kz bi translated">接下来，我们定义一个每天加载加密货币数据的函数。函数<strong class="ih hj">加载所有加密货币的历史数据</strong>，这些加密货币至少有一个<a class="ae je" href="https://quantiacs.com/contest" rel="noopener ugc nofollow" target="_blank">足够流动</a>；</li><li id="0425" class="kr ks hi ih b ii la im lb iq lc iu ld iy le jc kw kx ky kz bi translated">定义策略的函数是一个平凡的仅长交叉系统。我们使用“收盘”字段来定义用于交叉的平均值，并使用逻辑字段<strong class="ih hj">“is _ liquid”</strong>来标记在给定时间点根据市值排名前10位的加密货币。计算权重后，对于不在前10位的加密货币，过滤器将位置设置为0。</li><li id="d822" class="kr ks hi ih b ii la im lb iq lc iu ld iy le jc kw kx ky kz bi translated">最后，我们调用内置的<strong class="ih hj">回溯测试器</strong>来计算分配权重。</li></ul><p id="c1c0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个简单的例子可以作为更复杂想法的起点。<strong class="ih hj">流动性过滤器</strong>可以很容易地应用到我们为过去的竞赛提供的其他例子中:</p><ul class=""><li id="cae7" class="kr ks hi ih b ii ij im in iq kt iu ku iy kv jc kw kx ky kz bi translated">一个改进的<a class="ae je" href="https://github.com/quantiacs/strategy-futures-trending-custom-args/blob/master/strategy.ipynb" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">趋势跟踪系统</strong> </a>，具有针对不同资产的自定义参数；</li><li id="e4a1" class="kr ks hi ih b ii la im lb iq lc iu ld iy le jc kw kx ky kz bi translated">使用脊分类器的基于机器学习的系统；</li><li id="b08e" class="kr ks hi ih b ii la im lb iq lc iu ld iy le jc kw kx ky kz bi translated">组合分类器并执行<a class="ae je" href="https://github.com/quantiacs/strategy-ml-voting-crypto/blob/master/strategy.ipynb" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">再训练</strong> </a>的机器学习系统。</li></ul><p id="dce4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">截止到2021年10月<strong class="ih hj">日</strong>截止，在实时评估阶段结束后，<strong class="ih hj"> 2M美元</strong>将分配给最佳系统。</p><p id="55fa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你有问题吗？在我们的<a class="ae je" href="http://www.quantiacs.com/community/" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">论坛</strong> </a>上写我们吧！</p></div></div>    
</body>
</html>