<html>
<head>
<title>Software Testing: Unit Test Cases for Simple Java Programs</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">软件测试:简单Java程序的单元测试用例</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/unit-testing-of-simple-java-programs-b785a164b440?source=collection_archive---------7-----------------------#2021-06-06">https://medium.com/geekculture/unit-testing-of-simple-java-programs-b785a164b440?source=collection_archive---------7-----------------------#2021-06-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="393d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">本文面向任何刚开始使用java进行单元测试的人。在这里，我写了三个非常简单的java程序和它们对应的测试用例来帮助你理解这个概念。本文将涵盖从安装必要的包到运行Java程序的第一个单元测试用例的所有内容。</p><h2 id="e5ab" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated">为什么要进行单元测试？</h2><p id="2ca9" class="pw-post-body-paragraph if ig hi ih b ii jy ik il im jz io ip iq ka is it iu kb iw ix iy kc ja jb jc hb bi translated">如果你是一名计算机科学毕业生或者在职专业人士，你可能会遇到类似于<em class="kd">测试驱动开发</em>或者TDD的术语。根据敏捷<a class="ae ke" href="https://www.agilealliance.org/" rel="noopener ugc nofollow" target="_blank">联盟</a>，TDD可以定义为:</p><blockquote class="kf kg kh"><p id="0f94" class="if ig kd ih b ii ij ik il im in io ip ki ir is it kj iv iw ix kk iz ja jb jc hb bi translated">三种活动紧密交织的编程风格:编码、测试(以编写<strong class="ih hj">单元测试</strong>的形式)和设计。</p></blockquote><p id="35a4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这意味着编写单元测试用例对于基于TDD的软件开发至关重要。我建议单元测试用例应该成为你开发习惯的一部分，因为它可以最大限度地减少开发人员的错误。您不需要依赖测试人员来报告本来可以避免的小错误。有时，我看到单元测试用例通过减少愚蠢的错误帮助我改进工作。所以你看，开发人员中也有一点点测试人员！</p><h2 id="a58a" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated">设置您的系统</h2><p id="5b1b" class="pw-post-body-paragraph if ig hi ih b ii jy ik il im jz io ip iq ka is it iu kb iw ix iy kc ja jb jc hb bi translated">让我们从设置您的系统开始。请注意，本文是为一个真正简单的java程序运行第一个单元测试用例的快速入门。我敢肯定，一旦您运行了那个错误报告(在接下来的部分中出现)，您将会尝试找到更多的细节。互联网是一个很大的知识中心，你可以找到了解技术细节的材料。</p><p id="2b30" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于本文，我使用的是Visual Studio (VS)代码。</p><ol class=""><li id="aa7b" class="kl km hi ih b ii ij im in iq kn iu ko iy kp jc kq kr ks kt bi translated"><strong class="ih hj">安装Java: </strong>可以有两种情况。您有VS代码但没有配置java，或者您既没有VS代码也没有java。我强烈推荐你通过<a class="ae ke" href="https://code.visualstudio.com/docs/java/java-tutorial#_before-you-begin" rel="noopener ugc nofollow" target="_blank">这个</a>链接。如果你属于这两种类型中的任何一种，都非常容易理解。</li><li id="06a2" class="kl km hi ih b ii ku im kv iq kw iu kx iy ky jc kq kr ks kt bi translated"><strong class="ih hj">启用扩展</strong>:一旦VS代码配置了Java，就需要启用Java测试<a class="ae ke" href="https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-java-test" rel="noopener ugc nofollow" target="_blank">运行器</a>、Red Hat 对Java的<a class="ae ke" href="https://marketplace.visualstudio.com/items?itemName=redhat.java" rel="noopener ugc nofollow" target="_blank">语言支持、Java </a>扩展的<a class="ae ke" href="https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-java-debug" rel="noopener ugc nofollow" target="_blank">调试器。这些工具将帮助你运行/调试测试用例，查看测试报告&amp;测试日志，等等。</a></li></ol><h2 id="c31c" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated">启动Visual Studio代码</h2><ol class=""><li id="1e3b" class="kl km hi ih b ii jy im jz iq kz iu la iy lb jc kq kr ks kt bi translated">创建一个文件夹来保存Java代码和测试文件。</li><li id="a379" class="kl km hi ih b ii ku im kv iq kw iu kx iy ky jc kq kr ks kt bi translated">在顶部目录导航栏上键入“cmd ”,如图1所示</li><li id="8ef2" class="kl km hi ih b ii ku im kv iq kw iu kx iy ky jc kq kr ks kt bi translated">按回车键，命令行终端打开。然后输入“代码”</li><li id="d5e4" class="kl km hi ih b ii ku im kv iq kw iu kx iy ky jc kq kr ks kt bi translated">按回车键，瞧！您刚刚启动了VS代码工作区。那很酷，不是吗？</li></ol><figure class="ld le lf lg fd lh er es paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="er es lc"><img src="../Images/4c869da92f403f767655ce9419f0dc23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n0NiaAqLMCqrXWwsn5HY7w.png"/></div></div><figcaption class="lo lp et er es lq lr bd b be z dx">Figure 1: Directory Navigation bar with “cmd”</figcaption></figure><h2 id="9578" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated">创建Java项目</h2><figure class="ld le lf lg fd lh er es paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="er es ls"><img src="../Images/1962da649733df58612e6ff95f3d98c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*5UoeuagHw0sBRRFWeZcCIQ.gif"/></div></div><figcaption class="lo lp et er es lq lr bd b be z dx">GIF 1: Creating Java Project</figcaption></figure><ol class=""><li id="90f5" class="kl km hi ih b ii ij im in iq kn iu ko iy kp jc kq kr ks kt bi translated">停留在上面提到的VS代码页上，按Ctrl+Shift+p</li><li id="baa1" class="kl km hi ih b ii ku im kv iq kw iu kx iy ky jc kq kr ks kt bi translated">然后选择“java:创建java项目”。</li><li id="c583" class="kl km hi ih b ii ku im kv iq kw iu kx iy ky jc kq kr ks kt bi translated">按照提示进行操作，并不断选择必要的细节。</li><li id="7d1e" class="kl km hi ih b ii ku im kv iq kw iu kx iy ky jc kq kr ks kt bi translated">Maven是一个主要用于Java项目的构建自动化工具。在这个演示中，我选择了Maven。你可以用其他的选项来配置Java项目，比如Gradle等等。</li><li id="ef3d" class="kl km hi ih b ii ku im kv iq kw iu kx iy ky jc kq kr ks kt bi translated">完成所有工作后，您的新项目应该是可见的，如下所示:</li></ol><figure class="ld le lf lg fd lh er es paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="er es lt"><img src="../Images/76e7b2561d4293ca208a8f34d67255d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MfkOy9lI4OY9A6mtlDhHBQ.png"/></div></div><figcaption class="lo lp et er es lq lr bd b be z dx">Figure 2: Java Project in VS Code</figcaption></figure><h2 id="349a" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated">运行测试用例</h2><p id="8ed4" class="pw-post-body-paragraph if ig hi ih b ii jy ik il im jz io ip iq ka is it iu kb iw ix iy kc ja jb jc hb bi translated">在运行任何文件之前，我强烈建议您彻底检查一下Java项目。尝试花一些时间了解项目结构，然后继续下一步。此外，整个教程的代码可以在Github <a class="ae ke" href="https://github.com/semicolon123/Software-Testing/tree/main/Unit-testing-in-java" rel="noopener ugc nofollow" target="_blank">库</a>中找到。</p><ol class=""><li id="e618" class="kl km hi ih b ii ij im in iq kn iu ko iy kp jc kq kr ks kt bi translated">首先，运行包含主要代码的java文件。运行一个文件有许多方法。其中一个是右键点击代码文件，选择“运行java”。</li><li id="91ab" class="kl km hi ih b ii ku im kv iq kw iu kx iy ky jc kq kr ks kt bi translated">现在，您应该在终端中看到预期的输出。</li><li id="d695" class="kl km hi ih b ii ku im kv iq kw iu kx iy ky jc kq kr ks kt bi translated">在这个项目中，你会看到一些变化，比如类文件的创建(毕竟是java！)，在类上面添加了运行测试和调试测试快捷方式(或者，CodeLens ),以及我们以前安装的扩展的方法定义。</li><li id="5608" class="kl km hi ih b ii ku im kv iq kw iu kx iy ky jc kq kr ks kt bi translated">运行java测试文件(本演示中的【AppTest.java】T2，安装的扩展将添加codeLens，如Run Test | Debug Test |。复选标记显示测试报告。这个报告包含了各种细节，比如通过或者失败的测试用例，以及重新运行测试用例，等等。</li><li id="7adf" class="kl km hi ih b ii ku im kv iq kw iu kx iy ky jc kq kr ks kt bi translated">就是这样！对于这个例子，我们只有一个测试用例，即“shouldAnswerWithTrue ”,它碰巧成功通过了！你肯定应该试验给出不同输入的代码，看看你的测试用例是否失败。继续，花一些时间，回来看看将为其生成测试用例的其他一些简单的java代码。</li></ol><h2 id="81f7" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated">编写第一个单元测试用例</h2><p id="d34d" class="pw-post-body-paragraph if ig hi ih b ii jy ik il im jz io ip iq ka is it iu kb iw ix iy kc ja jb jc hb bi translated">在这个例子中，我考虑了一个简单的java程序，它计算两个数的乘积并打印出来。</p><p id="12ce" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面给出的是单元测试用例，用于检查这样生成的产品是否正确。</p><pre class="ld le lf lg fd lu lv lw lx aw ly bi"><span id="96b0" class="jd je hi lv b fi lz ma l mb mc">package com.example;<br/>import static org.junit.Assert.assertEquals;<br/>import org.junit.After;<br/>import org.junit.Before;<br/>import org.junit.Test;</span><span id="10b8" class="jd je hi lv b fi md ma l mb mc">public class AppTest<br/>{<br/>private App app;</span><span id="6551" class="jd je hi lv b fi md ma l mb mc">@Before<br/>public void setUp() throws Exception {<br/>app = new App();<br/>}</span><span id="1fac" class="jd je hi lv b fi md ma l mb mc">@After<br/>public void tearDown() throws Exception {<br/>}</span><span id="c890" class="jd je hi lv b fi md ma l mb mc">@Test</span><span id="274d" class="jd je hi lv b fi md ma l mb mc">// unit test case that will check whether the method returns the <br/>// anticipated output or not</span><span id="acec" class="jd je hi lv b fi md ma l mb mc">public void testMultiplication() {<br/>int result = app.multiply(10, 5);<br/>assertEquals(result,40);<br/>}<br/>}</span></pre><p id="e0a3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你注意到我在测试文件中提到的，assertEquals方法中的40显然是错误的，因为10和5的乘积应该是50。让我们看看这个单元测试用例运行时会发生什么。</p><figure class="ld le lf lg fd lh er es paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="er es ls"><img src="../Images/d05537652bfca3171836d88ab38e470a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*r89Ei1PDNow0LFa3LfE_jA.gif"/></div></div><figcaption class="lo lp et er es lq lr bd b be z dx">GIF 2: Running the first test case</figcaption></figure><p id="f514" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我希望现在您已经知道为什么会出现这个错误了。尝试纠正并运行前面提到的代码。</p><h2 id="8937" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated">多个测试案例</h2><p id="600d" class="pw-post-body-paragraph if ig hi ih b ii jy ik il im jz io ip iq ka is it iu kb iw ix iy kc ja jb jc hb bi translated">我在java文件中添加了更多的方法，并在测试文件中添加了相应的单元测试用例。测试文件如下所示:</p><pre class="ld le lf lg fd lu lv lw lx aw ly bi"><span id="38fc" class="jd je hi lv b fi lz ma l mb mc">@Test<br/>//unit test case that will check whether the method returns<br/>//the anticipated output or not</span><span id="a6fb" class="jd je hi lv b fi md ma l mb mc">public void testMultiplication() {<br/>int result = app.multiply(10, 5);<br/>assertEquals(result,40);<br/>}</span><span id="0ac5" class="jd je hi lv b fi md ma l mb mc">public void testDivision() {<br/>int result1 = app.divide(10, 5);<br/>assertEquals(result1,40);<br/>}</span><span id="c8a7" class="jd je hi lv b fi md ma l mb mc">public void testAddition() {<br/>int result2 = app.add(10, 5);<br/>assertEquals(result2,40);<br/>}</span><span id="f72c" class="jd je hi lv b fi md ma l mb mc">public void testSubtraction() {<br/>int result3 = app.subtract(10, 5);<br/>assertEquals(result3,40);<br/>}</span></pre><p id="273c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们看看这些测试用例是什么样子的。</p><figure class="ld le lf lg fd lh er es paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="er es ls"><img src="../Images/28d0052583d9c026c2e35f278870594f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*650AZ_SjL9s9Dm0tzyu2YQ.gif"/></div></div><figcaption class="lo lp et er es lq lr bd b be z dx">GIF 3: More unit test cases</figcaption></figure><h2 id="ab2c" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated">结论</h2><p id="34d3" class="pw-post-body-paragraph if ig hi ih b ii jy ik il im jz io ip iq ka is it iu kb iw ix iy kc ja jb jc hb bi translated">这篇文章肯定没有涵盖单元测试的所有方面，但是对于那些希望现在就开始编写java单元测试用例的人来说无疑是有用的。我只包括了最简单的例子，但是你可以写更复杂的例子。我当然会尝试写更多的文章来涵盖边界值分析或相关概念。目前，我希望当前的文章对您有用。</p><p id="185e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">还有，你可以在<a class="ae ke" href="https://twitter.com/SwatiRajwal" rel="noopener ugc nofollow" target="_blank"> Twitter </a>和<a class="ae ke" href="https://www.linkedin.com/in/swati-r-84682b12b/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上问我一个问题！</p><p id="5a78" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">谢谢你。</p></div></div>    
</body>
</html>