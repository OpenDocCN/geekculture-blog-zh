<html>
<head>
<title>Angular:Easy trick to pass dynamic data to a nested/child <ng-template> without using ngTemplateOutlet</ng-template></title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Angular:不使用ngtemplateeoutlet将动态数据传递给嵌套/子级<ng-template>的简单技巧</ng-template></h1>
<blockquote>原文：<a href="https://medium.com/geekculture/angular-easy-trick-to-pass-dynamic-data-to-a-nested-child-ng-template-without-using-e1a88d6bceb7?source=collection_archive---------1-----------------------#2022-04-17">https://medium.com/geekculture/angular-easy-trick-to-pass-dynamic-data-to-a-nested-child-ng-template-without-using-e1a88d6bceb7?source=collection_archive---------1-----------------------#2022-04-17</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="f5bf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我在许多web开发人员的多个平台上看到过这个问题。如何将数据传递给嵌套在另一个<ng-template>或另一个标签中的<ng-template>？</ng-template></ng-template></p><p id="0dd8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果我能够使用<strong class="ih hj">ngtemplateoutout</strong>和<strong class="ih hj"> ngTemplateOutletContext </strong>，这个问题的答案将会非常简单。但是所有的场景都需要这两个属性吗？不完全是。那你会怎么做？</p><p id="c9f9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我的工作项目中，我遇到了一种情况，我必须构建一个表，并且该表中的一些列必须呈现为与其他列不同。当我说“不同”时，我的意思是这些列要么需要使用按钮，要么需要管道来格式化数据等。这不是简单的数据呈现。我求助于使用<ng-template>来解决这个问题。</ng-template></p><p id="2239" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我用包含10个用户数据的下表重新创建了这个场景。我对ToDos列使用了<strong class="ih hj">按钮</strong>，对生日列使用了<strong class="ih hj">管道格式</strong>，对Email列使用了<strong class="ih hj"> mailto链接</strong>。其余的列只是按原样呈现文本。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/d827261d673cd6a2c4f6ab9f1d391303.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6kue68SaVeZdOVafS9zvKQ.png"/></div></div></figure><p id="dd25" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">用户数据在这里并不重要。但只是给一个想法，下面是第一个用户对象的结构。</p><pre class="je jf jg jh fd jp jq jr js aw jt bi"><span id="3c34" class="ju jv hi jq b fi jw jx l jy jz">{<br/>id: 1,<br/>name: ‘Leanne Graham’,<br/>username: ‘Bret’,<br/>email: ‘Sincere@april.biz’,<br/>dob: ‘11/22/1988’,<br/>address: {<br/>street: ‘Kulas Light’,<br/>suite: ‘Apt. 556’,<br/>city: ‘Gwenborough’,<br/>zipcode: ‘92998–3874’,<br/>geo: {<br/>lat: ‘-37.3159’,<br/>lng: ‘81.1496’,<br/>},<br/>},<br/>phone: ‘1–770–736–8031 x56442’,<br/>website: ‘hildegard.org’,<br/>company: {<br/>name: ‘Romaguera-Crona’,<br/>catchPhrase: ‘Multi-layered client-server neural-net’,<br/>bs: ‘harness real-time e-markets’,<br/>},<br/>},</span></pre><p id="5b39" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> AppComponent类:</strong></p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ka kb l"/></div></figure><p id="4657" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">表格标题</strong>包含表格中要显示的标题列表。<strong class="ih hj">表体</strong>包含我们将从JSON访问的属性列表，以显示表中的值。</p><p id="f648" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果有多个列相同但数据不同的表，这种方法会很有帮助。</p><p id="6ba9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在<strong class="ih hj"> ngOnInit() </strong>中，我们正在遍历包含用户数据的<strong class="ih hj">用户变量</strong>。我们真的不需要每个对象中的所有属性。迭代的目的是获取我们需要的表的属性，将其添加到对象<strong class="ih hj"> obj </strong>中，然后将该对象obj推入新属性<strong class="ih hj"> usersList </strong>。</p><p id="73a9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">usersList 是表中使用的最后一个数组。</p><p id="9646" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当我们点击表格<strong class="ih hj">待办事项栏</strong>中的<strong class="ih hj">查看待办事项</strong>按钮时，会执行<strong class="ih hj">视图()</strong>。添加这个方法的目的只是为了说明用户数据可以从&lt; ng-template &gt;的类中访问。</p><p id="fbf5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> AppComponent模板:</strong></p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ka kb l"/></div></figure><p id="5163" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们通过迭代<strong class="ih hj"> tableHeaders </strong>属性构建了表头。</p><pre class="je jf jg jh fd jp jq jr js aw jt bi"><span id="2623" class="ju jv hi jq b fi jw jx l jy jz">&lt;tr&gt; &lt;th *ngFor=”let header of <strong class="jq hj">tableHeaders</strong>”&gt;{{ header }}&lt;/th&gt; &lt;/tr&gt;</span></pre><p id="ea88" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了构造表体，我们遍历了<strong class="ih hj"> usersList </strong>数组，并且在每次迭代中，我们遍历了<strong class="ih hj">表体</strong>数组。我们对<strong class="ih hj"> email、todos和dob </strong>属性(对应于email、ToDos和出生日期列)使用引用<strong class="ih hj"> special </strong>的模板，对其他属性(对应于其他列)使用引用<strong class="ih hj"> regular </strong>的模板。</p><pre class="je jf jg jh fd jp jq jr js aw jt bi"><span id="bef8" class="ju jv hi jq b fi jw jx l jy jz">&lt;tr *ngFor=”<strong class="jq hj">let user of usersList</strong>”&gt; <br/>&lt;td *ngFor=”<strong class="jq hj">let option of</strong> <strong class="jq hj">tableBody</strong>”&gt; <br/>&lt;span *ngIf=” ![‘email’, ‘todos’, ‘dob’].includes(option); then regular; else special “ &gt;<br/>&lt;/span&gt;</span><span id="6efe" class="ju jv hi jq b fi kc jx l jy jz">&lt;!---the templates are placed here--&gt;</span><span id="bbbc" class="ju jv hi jq b fi kc jx l jy jz"><strong class="jq hj">&lt;ng-template #special&gt;  </strong>        <br/>&lt;ng-container <strong class="jq hj">[ngSwitch]="option"</strong>&gt;            <br/>&lt;span <strong class="jq hj">*ngSwitchCase="'email'"</strong>&gt;              <br/>&lt;a<strong class="jq hj"> href="mailto:{{ user[option] }}"</strong>&gt;{{ user[option] }}&lt;/a&gt;            &lt;/span&gt;             </span><span id="2913" class="ju jv hi jq b fi kc jx l jy jz">&lt;span <strong class="jq hj">*ngSwitchCase="'dob'"</strong>&gt;              <br/>&lt;label&gt;{{ user[option] <strong class="jq hj">| date: 'dd-MM-YYYY' </strong>}}&lt;/label&gt;            &lt;/span&gt;            </span><span id="abf3" class="ju jv hi jq b fi kc jx l jy jz">&lt;span <strong class="jq hj">*ngSwitchCase="'todos'"</strong>&gt;              <br/>&lt;button class="btn btn-primary" <strong class="jq hj">(click)="view(user.id)"</strong>&gt;                View ToDos&lt;/button&gt;            <br/>&lt;/span&gt;          <br/>&lt;/ng-container&gt;        <br/>&lt;/ng-template&gt;         </span><span id="8ccd" class="ju jv hi jq b fi kc jx l jy jz"><strong class="jq hj">&lt;ng-template #regular&gt;</strong>          <br/>&lt;label&gt;{{ user[option] }}&lt;/label&gt;        <br/>&lt;/ng-template&gt;</span><span id="4ee5" class="ju jv hi jq b fi kc jx l jy jz">&lt;/td&gt;<br/>&lt;/tr&gt;</span></pre><p id="d32e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">请注意&lt; ng模板&gt;T11的<strong class="ih hj">位置。它们在<strong class="ih hj"> &lt; td &gt; </strong>标签内，因此它们可以访问外部迭代</strong>的<strong class="ih hj">用户变量，也可以访问内部迭代</strong>的<strong class="ih hj">选项变量。</strong></p><p id="e011" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">同样，如果子节点<ng-template>嵌套在父节点<ng-template>中，那么子节点也可以轻松访问传递给父节点<ng-template>的所有数据。</ng-template></ng-template></ng-template></p><p id="2099" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以查看下面的完整工作示例。</p><div class="kd ke ez fb kf kg"><a href="https://stackblitz.com/edit/angular-fq7doh?file=src/app/app.component.html" rel="noopener  ugc nofollow" target="_blank"><div class="kh ab dw"><div class="ki ab kj cl cj kk"><h2 class="bd hj fi z dy kl ea eb km ed ef hh bi translated">角形(叉形)堆叠</h2><div class="kn l"><h3 class="bd b fi z dy kl ea eb km ed ef dx translated">一个基于rxjs，tslib，core-js，zone.js，@angular/core，@angular/forms，@angular/common的angular-cli项目…</h3></div><div class="ko l"><p class="bd b fp z dy kl ea eb km ed ef dx translated">stackblitz.com</p></div></div><div class="kp l"><div class="kq l kr ks kt kp ku jn kg"/></div></div></a></div></div></div>    
</body>
</html>