<html>
<head>
<title>Learn Swift Command Design Pattern in 3 minutes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">3分钟学会Swift命令设计模式</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/learn-swift-command-design-pattern-in-3-minutes-ae2c9ddd2a51?source=collection_archive---------10-----------------------#2022-01-04">https://medium.com/geekculture/learn-swift-command-design-pattern-in-3-minutes-ae2c9ddd2a51?source=collection_archive---------10-----------------------#2022-01-04</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="0982" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">大家新年快乐！返回设计模式系列:]</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/3713d93917dc374cddf1e4cf135fcaac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*MDisNschPozcUDgm"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx">Photo by <a class="ae jt" href="https://unsplash.com/@yamaicle?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Mike Yukhtenko</a> on <a class="ae jt" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h2 id="a6ab" class="ju jv hi bd jw jx jy jz ka kb kc kd ke iq kf kg kh iu ki kj kk iy kl km kn ko bi translated">什么是命令设计模式？</h2><p id="1dae" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq kr is it iu ks iw ix iy kt ja jb jc hb bi translated">命令设计模式是将命令或动作封装为对象行为模式。命令设计模式通常有三个主要组件，分别是<strong class="ih hj">调用者、命令、</strong>和<strong class="ih hj">接收者。</strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ku"><img src="../Images/a31a2236c155d6c2f4b588d5ac732167.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m0EuUGUPKkmxppf7QR1tmQ.png"/></div></div></figure><p id="c66a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Invoker 是一个负责存储和执行命令的组件。<strong class="ih hj">命令</strong>是一个组件，它包装一个动作并将其封装为一个对象。<strong class="ih hj">接收器</strong>是根据命令动作的组件。让我们看看下面的代码给你更好的介绍:</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kv kw l"/></div></figure><p id="0364" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里我创建了一个简单的名为Alarm的接收器对象。它有一个属性<code class="du kx ky kz la b">isOn</code>，以后可以根据给定的命令进行更改。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kv kw l"/></div></figure><p id="81fe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> AlarmCommand </strong>是我们用来确定命令规格的抽象接口。当我们想要创建一个新的命令时，我们可以创建一个新的类型并符合<strong class="ih hj"> AlarmCommand </strong>接口。例如在上面的代码中，我们可以创建具体的命令实现，分别是<strong class="ih hj"> TurnOnAlarmCommand </strong>和<strong class="ih hj"> TurnOffAlarmCommand </strong>。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kv kw l"/></div></figure><p id="9a13" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后我们创建了<strong class="ih hj">调用者</strong>。顺便说一句，上面的例子有点随意，但我希望你已经明白了这一点:】。像我们之前的讨论一样，调用者是存储和执行命令的对象。AlarmInvoker接收一个Alarm对象作为参数，然后我们基于随机数创建commands对象。如果随机数是偶数，那么我们附加<strong class="ih hj"> TurnOnAlarmCommand </strong>否则，我们附加<strong class="ih hj">turnonfalarmcommand。</strong>报警调用程序有一个函数叫做<code class="du kx ky kz la b">execute</code>，这个函数用来执行调用程序内部的命令。</p><h2 id="0e68" class="ju jv hi bd jw jx jy jz ka kb kc kd ke iq kf kg kh iu ki kj kk iy kl km kn ko bi translated">不好的例子，不是吗？:]</h2><p id="9f89" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq kr is it iu ks iw ix iy kt ja jb jc hb bi translated">那么我们如何使用这种设计模式来解决现实世界的问题呢？我举一个例子。在我的经验中，我经常看到一个关于massive AppDelegate或SceneDelegate实现的常见问题。在一个大的应用程序中，我们经常使用这么多第三方库，对吗？有时，我们需要在AppDelegate中进行一些初始化或设置库。如果我们不能很好地管理这一点，它将成为大规模实施和违反单一责任原则。理解了这个需求，那么我们如何用一个好的、优雅的解决方案来实现它呢？请看看这个简单的架构图。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lb"><img src="../Images/7404685f5b1ad0103dc975535ea6a6b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LVGitB7sO_H616tXbEWxRA.png"/></div></div></figure><p id="496d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在AppDelegate内部，我们需要一个对象来存储和执行所有命令，在本例中是<strong class="ih hj"> AppInvoker。</strong>然后我们需要一个抽象类型来确定命令的规格，我们创建了<strong class="ih hj"> AppCommand </strong>接口，其中有一个函数作为需求。定义了命令接口后，我们可以创建具体的命令类型，例如<strong class="ih hj"> FirebaseCommand </strong>和<strong class="ih hj"> OneSignalCommand </strong>。下面是示例代码实现:</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kv kw l"/></div></figure><p id="bc3a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在定义了所有命令之后，我们可以继续创建<strong class="ih hj"> Invoker </strong>对象。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kv kw l"/></div></figure><p id="fc2b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">很简单吧？这是AppDelegate的最终实现。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kv kw l"/></div></figure><p id="d536" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">瞧，恭喜你，你的AppDelegate真的很干净优雅:】。这是您可以在Swift和iOS中使用命令设计模式众多示例之一。</p><h2 id="0fa0" class="ju jv hi bd jw jx jy jz ka kb kc kd ke iq kf kg kh iu ki kj kk iy kl km kn ko bi translated">从这里去哪里</h2><p id="1fd4" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq kr is it iu ks iw ix iy kt ja jb jc hb bi translated">恭喜你，你对命令设计模式有了新的认识。再次强调，理解设计模式对于软件工程师来说非常重要，这样你就可以有很多武器来解决你的日常问题。感谢您阅读本文，如果您有任何问题或反馈，请在下面的评论中提出，我将不胜感激！再次感谢大家，2022新年快乐:]</p></div></div>    
</body>
</html>