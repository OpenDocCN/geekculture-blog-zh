# 迈向卓越的代码

> 原文：<https://medium.com/geekculture/towards-exceptional-code-e467a05b2e95?source=collection_archive---------26----------------------->

## 保持我们的意图完整的一部分是确保我们的程序运行良好，这包括我们的程序肯定会失败的情况。

假设你的任务是为飞机控制系统的自动化开发一个算法。你和一家知名的飞机公司达成了交易。你的软件现在被用于 30%的现代飞机控制系统。这是一个过于复杂的系统，你已经使用了多年，但是你忘了在你的程序中规定，在任何情况下，飞机都不应该俯冲。

一天晚上，公司打电话给你，说你有急事。有一份报告说你的软件导致了意想不到的暴跌。你召集你的团队找出导致系统故障的错误。对于一个过于复杂的系统来说，这是一个众所周知的困难过程。经过数周的调查，您团队中的某个人发现您的软件似乎缺少异常处理。

这样的案例证明了异常处理在我们的系统中是多么重要。

![](img/6930c298cd77f9f1c67eb59757414f0d.png)

Photo by [Lennart Wittstock](https://www.pexels.com/@lennart-wittstock-94105?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels) from [Pexels](https://www.pexels.com/photo/airplane-windowpane-showing-city-buildings-316794/?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels)

# 讨论

异常提供了一种方法来响应程序遇到的意外事件。处理异常有两个参考框架。它们是我们可以控制的事件，也是我们无法控制的事件。了解这一点对于设计大型软件系统非常重要。

在我们控制范围内的事件应该是我们的责任，而对于超出我们范围的事件，我们至少应该提供一个明确的错误消息，指出哪里出错了。错误消息以足够深刻的方式向用户提供反馈，以便他们知道如何解决问题。这是良好的用户体验设计的关键，我在这里概括如下:

作为开发人员，我们问自己:*在什么情况下我们的程序应该抛出异常？*这不是一件容易的事。首先，你能列举出程序未定义行为的所有情况吗？在这些情况下，我们遵循*大局*视角。我们把前面的问题翻译成*我的职能的典型角色是什么？它们的目的是什么？一个好的设计理念应该洞察清晰的意图，因为我们的产品应该易于使用，不易被误用。*

考虑到这一点，我们可以指导我们应该如何考虑编写我们的代码。

让我们回到我们的故事。为简单起见，假设我们的系统包含以下代码:

假设上面的代码对飞机的各个部分拥有管理控制权。这让我们开始研究`obj.automate()`函数。在深入研究我们的代码后，我们发现:

你能发现这个函数哪里出错了吗？

> 我们不能保证我们的系统不会急转直下。

让我们通过引入一个`try-catch`块来改进这个函数，在这个块中，我们可以保证系统在遇到一个临界条件时立即终止，在这个临界条件下`obj.optimize()`导致一个俯冲决策。

> *这段代码拯救了生命！*

现在我们可以保证，在遇到`critical_conditions`的情况下，控制权会移交给飞行员。

# 外卖食品

异常代码应该具有:

*   适当的错误处理保证了我们代码的意图性
*   清晰而有意义的错误信息是良好设计的关键

注意事项:

*   编程语言已经提供了这一特性，所以根据您的语言，您应该查阅关于如何实现异常处理的技术文档。
*   C++代码用于说明性示例，因为大多数现代控制系统都是使用 C++实现的，我个人非常喜欢这种语言！

*原发布于*[*https://dcode . hash node . dev*](https://dcode.hashnode.dev/towards-exceptional-code)*。*