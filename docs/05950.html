<html>
<head>
<title>Rails 6 with VueJS and Vuetify😎</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">带有VueJS和Vuetify的Rails 6😎</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/rails-6-with-vuejs-and-vuetify-fe7d0da10104?source=collection_archive---------11-----------------------#2021-08-03">https://medium.com/geekculture/rails-6-with-vuejs-and-vuetify-fe7d0da10104?source=collection_archive---------11-----------------------#2021-08-03</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/28cab6e2287dc5011e9c984eeb4e75c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Rtl5VTGdA8_QXBSKBVy0Tg.jpeg"/></div></div></figure><p id="1a03" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我在一家名为<a class="ae jo" href="https://www.aventure.bio/" rel="noopener ugc nofollow" target="_blank"> Aventure Bio </a>的小型法国创业公司工作，我们最近启动了一个新项目。对于这个新项目，我们决定使用Vue作为我们前端的框架。</p><p id="cc61" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当我们开始这个项目时，我们已经注意到，在如何以我们需要的方式用<a class="ae jo" href="https://github.com/rails/rails" rel="noopener ugc nofollow" target="_blank"> Rails </a>和<a class="ae jo" href="https://vuetifyjs.com/en/" rel="noopener ugc nofollow" target="_blank">Vue化</a>实现<a class="ae jo" href="https://vuejs.org/" rel="noopener ugc nofollow" target="_blank"> Vue </a>方面缺乏资源。因此，我们认为这将是一个好主意，与大家分享我们是如何做的！</p></div><div class="ab cl jp jq gp jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="hb hc hd he hf"><h2 id="26cb" class="jw jx hi bd jy jz ka kb kc kd ke kf kg jb kh ki kj jf kk kl km jj kn ko kp kq bi translated">创建新的rails项目</h2><p id="4779" class="pw-post-body-paragraph iq ir hi is b it kr iv iw ix ks iz ja jb kt jd je jf ku jh ji jj kv jl jm jn hb bi translated">由于rails和webpack的魔力，创建一个嵌入Vue的新项目实际上非常容易。你只需要加上<code class="du kw kx ky kz b">--webpack=vue</code>。像这样:</p><pre class="la lb lc ld fd le kz lf lg aw lh bi"><span id="f56a" class="jw jx hi kz b fi li lj l lk ll">&gt; rails new medium_demo --webpack=vue</span></pre><p id="a8cb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果现在你打开<code class="du kw kx ky kz b">app/javascript</code>文件夹，你会在<code class="du kw kx ky kz b">app/javascript/packs</code>文件夹中看到一个<code class="du kw kx ky kz b">app.vue</code>和一个<code class="du kw kx ky kz b">hello_vue.js</code>文件。<code class="du kw kx ky kz b">app.vue</code>文件只是一个组件示例。你可以忽略它，因为我们将在Vuetify的帮助下从头开始创建一个。</p><p id="7c2e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><code class="du kw kx ky kz b">hello_vue.js</code>文件向您展示了在Rails应用程序中导入vue的不同方式。由于我们将使用<a class="ae jo" href="https://github.com/turbolinks/turbolinks" rel="noopener ugc nofollow" target="_blank"> turbolinks </a>，您可以取消对该文件最后部分的注释:</p><figure class="la lb lc ld fd ij"><div class="bz dy l di"><div class="lm ln l"/></div></figure><p id="e229" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">而且正如评论所说，你只要做<code class="du kw kx ky kz b">&gt; yarn add vue-turbolinks</code>就可以了。现在，我们还做了什么(这是可选的)我们把这段代码添加到我们的<code class="du kw kx ky kz b">application.js</code>文件中，并做了一些修改。我们删除了这个<code class="du kw kx ky kz b">hello_vue.js</code>文件，结果如下:</p><figure class="la lb lc ld fd ij"><div class="bz dy l di"><div class="lm ln l"/></div></figure><p id="1869" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这里我们删除了<code class="du kw kx ky kz b">data</code>函数和组件，我们没有在变量中存储新的vue实例，我们将Vue元素(之前链接到id <code class="du kw kx ky kz b">#hello</code>)更改为数据属性。</p><p id="6638" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们还添加了<a class="ae jo" href="https://github.com/jeffreyguenther/vue-turbolinks" rel="noopener ugc nofollow" target="_blank"> TurbolinksAdapter </a>，这是一个JS包，它“<em class="lo">允许您轻松地将Vue.js组件添加到您的turbo links&amp;hot wire powered apps</em>”中。要安装它，只需添加上面例子中的代码并运行</p><pre class="la lb lc ld fd le kz lf lg aw lh bi"><span id="5bb6" class="jw jx hi kz b fi li lj l lk ll">&gt; ./bin/yarn add vue-turbolinks</span></pre><p id="8de5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">所以现在要做的最后一件事就是通过添加一个带有<code class="du kw kx ky kz b">data</code>属性的<code class="du kw kx ky kz b">div</code>来改变我们的<code class="du kw kx ky kz b">application.html.erb</code>文件。</p><figure class="la lb lc ld fd ij"><div class="bz dy l di"><div class="lm ln l"/></div></figure><p id="cf46" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您应该已经完成了(基本)设置！🎉感谢Rails团队🙌</p><figure class="la lb lc ld fd ij"><div class="bz dy l di"><div class="lp ln l"/></div></figure><h2 id="3c12" class="jw jx hi bd jy jz ka kb kc kd ke kf kg jb kh ki kj jf kk kl km jj kn ko kp kq bi translated">模型+种子</h2><p id="47d1" class="pw-post-body-paragraph iq ir hi is b it kr iv iw ix ks iz ja jb kt jd je jf ku jh ji jj kv jl jm jn hb bi translated">为了能够有一些数据显示，让我们快速创建一些模型和一个简单的种子。比方说，我们的应用程序将是一个商店，销售由原料制成的产品。为了尽可能简单，我们假设一个商店没有员工，一种产品只能在一个商店中找到😀所以我们的数据库看起来像这样:</p><figure class="la lb lc ld fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lq"><img src="../Images/b95bbd862caf0644c442b55bb3a6f488.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ms9TiUVHXczyu32Vb1Y2Qg.png"/></div></div></figure><p id="f43f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们快速创建我们的模型:</p><pre class="la lb lc ld fd le kz lf lg aw lh bi"><span id="e8fa" class="jw jx hi kz b fi li lj l lk ll">&gt; rails g model store name<br/>&gt; rails g model product store:references name<br/>&gt; rails g model ingredient name<br/>&gt; rails g model product_ingredient product:references ingredient:references</span><span id="2206" class="jw jx hi kz b fi lr lj l lk ll">&gt; rails db:migrate</span></pre><p id="7d35" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们进行联想:</p><figure class="la lb lc ld fd ij"><div class="bz dy l di"><div class="lm ln l"/></div></figure><p id="f12b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">和一颗简单的种子</p><figure class="la lb lc ld fd ij"><div class="bz dy l di"><div class="lm ln l"/></div></figure><h2 id="e1c6" class="jw jx hi bd jy jz ka kb kc kd ke kf kg jb kh ki kj jf kk kl km jj kn ko kp kq bi translated">控制器</h2><p id="493a" class="pw-post-body-paragraph iq ir hi is b it kr iv iw ix ks iz ja jb kt jd je jf ku jh ji jj kv jl jm jn hb bi translated">我们的应用程序中只有一个页面。我们可以创造新的产品的索引。因此，我们的产品控制器将只有两个动作。索引和创建。所以:</p><pre class="la lb lc ld fd le kz lf lg aw lh bi"><span id="7e03" class="jw jx hi kz b fi li lj l lk ll">&gt; rails g controller products index create</span></pre><p id="26ba" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在您的路线中替换由</p><pre class="la lb lc ld fd le kz lf lg aw lh bi"><span id="41b6" class="jw jx hi kz b fi li lj l lk ll">resources :products, only: [:index, :create]</span></pre><p id="edcc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们做一个非常简单的控制器</p><figure class="la lb lc ld fd ij"><div class="bz dy l di"><div class="lm ln l"/></div></figure><h2 id="09ac" class="jw jx hi bd jy jz ka kb kc kd ke kf kg jb kh ki kj jf kk kl km jj kn ko kp kq bi translated">前件</h2><p id="c8c7" class="pw-post-body-paragraph iq ir hi is b it kr iv iw ix ks iz ja jb kt jd je jf ku jh ji jj kv jl jm jn hb bi translated">由于我们已经改变了在<code class="du kw kx ky kz b">application.js</code>中启动Vue实例的方式，我们还需要对如何创建和导入不同的组件进行一些修改。在我们的例子中，我们创建了一个<code class="du kw kx ky kz b">components</code>文件夹来存储所有的Vue组件，然后创建了一个<code class="du kw kx ky kz b">components.js</code>文件来导入它们，这个文件被导入到我们的<code class="du kw kx ky kz b">application.js</code>中。我们的<code class="du kw kx ky kz b">javascript</code>文件夹结构看起来像这样。</p><pre class="la lb lc ld fd le kz lf lg aw lh bi"><span id="3a46" class="jw jx hi kz b fi li lj l lk ll">├── channels<br/>│   ├── consumer.js<br/>│   └── index.js<br/>├── components<br/>│   └── ProductsIndex.vue<br/>└── packs<br/>    ├── application.js<br/>    └── components.js</span></pre><p id="02f9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">因此，让我们创建一个非常简单的<code class="du kw kx ky kz b">ProductsIndex.vue</code>组件。</p><pre class="la lb lc ld fd le kz lf lg aw lh bi"><span id="a38d" class="jw jx hi kz b fi li lj l lk ll">&gt; mkdir app/javascript/components &amp;&amp; touch app/javascript/components/ProductsIndex.vue</span></pre><p id="80b3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在我们编写这个组件之前，有一个小注意。在本文中，我们将向您展示两种向Vue组件发送数据的方式。通过<code class="du kw kx ky kz b">prop</code>或使用<a class="ae jo" href="https://www.npmjs.com/package/axios" rel="noopener ugc nofollow" target="_blank"> axios </a>的API调用。也许这些方法不会更适合这些例子，但是让我们记住这只是为了练习。</p><p id="4e3d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">也就是说，对于这个例子，我们将通过<code class="du kw kx ky kz b">prop</code>传递数据。所以我们的简单组件看起来会像这样:</p><figure class="la lb lc ld fd ij"><div class="bz dy l di"><div class="lm ln l"/></div></figure><p id="583a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在我们需要将它导入到我们的<code class="du kw kx ky kz b">components.js</code>文件中，并将其链接到我们的Vue实例。可以这样做:</p><figure class="la lb lc ld fd ij"><div class="bz dy l di"><div class="lm ln l"/></div></figure><p id="3291" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在让我们将它导入到我们的application.js中，只需添加</p><pre class="la lb lc ld fd le kz lf lg aw lh bi"><span id="51a8" class="jw jx hi kz b fi li lj l lk ll">import './components';</span></pre><p id="247e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">最后但同样重要的是，让我们修改我们的<code class="du kw kx ky kz b">index.html.erb</code>。因为我们已经用我们的<code class="du kw kx ky kz b">application.html.erb</code>中的数据属性包装了div中的<code class="du kw kx ky kz b">&lt;%= yield %&gt;</code>,所以我们可以从任何视图页面调用我们的组件。因此，在我们的<code class="du kw kx ky kz b">index.html.erb</code>中，我们将删除那里的代码，只调用组件，将它作为一个道具传递给在控制器中创建的<code class="du kw kx ky kz b">@products</code>。像这样:</p><figure class="la lb lc ld fd ij"><div class="bz dy l di"><div class="lm ln l"/></div></figure><p id="da36" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，如果你参观<code class="du kw kx ky kz b">/products</code>，你应该会看到我们令人惊叹的产品。就这么简单！</p><figure class="la lb lc ld fd ij"><div class="bz dy l di"><div class="ls ln l"/></div></figure><h2 id="844e" class="jw jx hi bd jy jz ka kb kc kd ke kf kg jb kh ki kj jf kk kl km jj kn ko kp kq bi translated">使虚弱</h2><p id="9634" class="pw-post-body-paragraph iq ir hi is b it kr iv iw ix ks iz ja jb kt jd je jf ku jh ji jj kv jl jm jn hb bi translated">现在让我们快速看看如何实现<a class="ae jo" href="http://vuetifyjs.com/" rel="noopener ugc nofollow" target="_blank"> Vuetify </a>来帮助我们进行前端设计。正如他们的文档所述，我们就这么做吧</p><pre class="la lb lc ld fd le kz lf lg aw lh bi"><span id="314b" class="jw jx hi kz b fi li lj l lk ll">&gt; yarn add vuetify<br/>&gt; yarn add sass@~1.32 sass-loader deepmerge -D</span></pre><p id="b26b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">完成后，将您的<code class="du kw kx ky kz b">application.js</code>改为:</p><figure class="la lb lc ld fd ij"><div class="bz dy l di"><div class="lm ln l"/></div></figure><p id="20fa" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这样做之后，您的JS控制台中仍然会出现错误。这就是我们花了一段时间才明白如何解决这个问题的地方。谢天谢地，我们找到了这个<a class="ae jo" href="https://github.com/vuetifyjs/vuetify/discussions/4068#issuecomment-414914238" rel="noopener ugc nofollow" target="_blank"> github </a>评论，它解决了我们的问题！所以在阅读了评论之后，我们对我们的<code class="du kw kx ky kz b">config/webpack/environment.js</code>做了一些修改，现在看起来是这样的:</p><figure class="la lb lc ld fd ij"><div class="bz dy l di"><div class="lm ln l"/></div></figure><p id="9041" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">正如vuetify文档所述，无论您想在哪里添加Vuetify组件，它们都应该在父标签<code class="du kw kx ky kz b">v-app</code>中。因为我们想在任何地方使用它，所以我们在<code class="du kw kx ky kz b">application.html.erb</code>中添加了我们的，如下所示:</p><figure class="la lb lc ld fd ij"><div class="bz dy l di"><div class="lm ln l"/></div></figure><p id="6306" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，为了测试我们的Vuetify是否正确安装，让我们创建一个简单的表<a class="ae jo" href="https://vuetifyjs.com/en/components/simple-tables" rel="noopener ugc nofollow" target="_blank">。让我们稍微改变一下我们的<code class="du kw kx ky kz b">ProductsIndex.vue</code>组件:</a></p><figure class="la lb lc ld fd ij"><div class="bz dy l di"><div class="lm ln l"/></div></figure><p id="bded" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">因此，现在如果您访问我们的<code class="du kw kx ky kz b">/products</code>页面，您应该会看到一张展示我们所有产品的精美表格。</p><h2 id="27ef" class="jw jx hi bd jy jz ka kb kc kd ke kf kg jb kh ki kj jf kk kl km jj kn ko kp kq bi translated">发布请求</h2><p id="9c10" class="pw-post-body-paragraph iq ir hi is b it kr iv iw ix ks iz ja jb kt jd je jf ku jh ji jj kv jl jm jn hb bi translated">现在让我们创建第二个组件，它将是一个创建新产品的表单。这里我们将做两件事。首先，我们将执行一个POST请求来创建产品，然后执行一个GET来再次检索所有产品。在现实生活中，我不会做GET请求。然而，只是为了练习，我们还是做吧😁。</p><p id="8bd8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">所以，首先让我们添加axios:</p><pre class="la lb lc ld fd le kz lf lg aw lh bi"><span id="938b" class="jw jx hi kz b fi li lj l lk ll">&gt; yarn add axios</span></pre><p id="201e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后让我们创建新的组件</p><pre class="la lb lc ld fd le kz lf lg aw lh bi"><span id="488d" class="jw jx hi kz b fi li lj l lk ll">&gt; touch app/javascript/components/ProductCreateForm.vue</span></pre><p id="fec7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">对于我们使用的表单来说，它应该是这样的:</p><figure class="la lb lc ld fd ij"><div class="bz dy l di"><div class="lm ln l"/></div></figure><p id="9930" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">正如你在方法<code class="du kw kx ky kz b">createProduct()</code>中看到的，我们使用axios调用我们的控制器创建方法。当我们收到一个肯定的响应时，我们将它发送给父组件。这个想法是，当父组件收到消息时，它发出GET请求来检索所有产品。在实现之前，我们不要忘记在我们的<code class="du kw kx ky kz b">components.js</code>中导入这个新组件:</p><figure class="la lb lc ld fd ij"><div class="bz dy l di"><div class="lm ln l"/></div></figure><p id="9a60" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在在我们的<code class="du kw kx ky kz b">ProductsIndex</code>组件中调用它，只需添加:</p><pre class="la lb lc ld fd le kz lf lg aw lh bi"><span id="939c" class="jw jx hi kz b fi li lj l lk ll">&lt;product-create-form</span><span id="8c32" class="jw jx hi kz b fi lr lj l lk ll">  @response='getAllProducts'</span><span id="695a" class="jw jx hi kz b fi lr lj l lk ll">&gt;&lt;/product-create-form&gt;</span></pre><p id="ce5b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后让我们创建<code class="du kw kx ky kz b">getAllProducts</code>方法来获取所有产品，让我们只<code class="du kw kx ky kz b">console.log</code>响应。所以我们新的<code class="du kw kx ky kz b">ProductsIndex</code>组件应该是这样的:</p><figure class="la lb lc ld fd ij"><div class="bz dy l di"><div class="lm ln l"/></div></figure><p id="bfe3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果您现在测试您的代码，您应该会得到如下所示的错误:</p><figure class="la lb lc ld fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lt"><img src="../Images/86914503ee9711e89a5686a73cbc5afc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PrjiaAh65NYnahfEjJykqA.png"/></div></div></figure><p id="cf17" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这确实是因为我们不发送任何<code class="du kw kx ky kz b">authenticityToken</code>。要轻松解决这个问题，您只需在您的<code class="du kw kx ky kz b">application.js</code>中添加几行代码。最终文件应该如下所示:</p><figure class="la lb lc ld fd ij"><div class="bz dy l di"><div class="lm ln l"/></div></figure><p id="9dda" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，如果你测试它，它应该工作！至少帖子要求！现在，如果我们在JS控制台上检查GET请求的响应，我们会得到类似这样的结果，数据是HTML:</p><figure class="la lb lc ld fd ij er es paragraph-image"><div class="er es lu"><img src="../Images/2c3b5af0582901d180e0e368f03d4c1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1134/format:webp/1*AKTul8nzJTLT9Tnkai96VA.png"/></div></figure><p id="08f9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这是因为在我们的控制器中，我们的索引方法不呈现JSON。并且<strong class="is hj">我们不希望</strong>它呈现一个JSON，否则当你访问<code class="du kw kx ky kz b">/products</code>路径时，你只会看到JSON对象，而不是我们创建的精彩设计。为了解决这个问题，我们可以调用jbuilder  gem😃这是RAILS 6默认提供的。多亏了这个gem，我们可以让我们的控制器保持原样，只创建一个名为<code class="du kw kx ky kz b">index.json.jbuilder</code>的新文件，所以:</p><pre class="la lb lc ld fd le kz lf lg aw lh bi"><span id="5b22" class="jw jx hi kz b fi li lj l lk ll">&gt; touch app/views/products/index.json.jbuilder</span></pre><p id="57d6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在里面加上</p><pre class="la lb lc ld fd le kz lf lg aw lh bi"><span id="c4fc" class="jw jx hi kz b fi li lj l lk ll">json.array! @products, :id, :name</span></pre><p id="f009" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">最后，在您的<code class="du kw kx ky kz b">ProductsIndex.vue</code>组件中，将axios路径从<code class="du kw kx ky kz b">axios.get('/products')</code>更改为<code class="du kw kx ky kz b">axios.get('/products.json')</code>。</p><p id="eca7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，如果我们尝试创建新产品，查看我们的控制台，我们会看到所有产品，包括我们刚刚创建的产品(“香蕉🍌)</p><figure class="la lb lc ld fd ij er es paragraph-image"><div class="er es lv"><img src="../Images/4962e63dc72183b691558d06febe97e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1156/format:webp/1*TU5McvtE1MsuoWAR9tJClg.png"/></div></figure><p id="8134" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">几乎看起来像魔术😃</p><figure class="la lb lc ld fd ij"><div class="bz dy l di"><div class="lw ln l"/></div></figure><p id="695f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">概括来说，我们有两个Vue组件。<code class="du kw kx ky kz b">ProductsIndex.vue</code>和<code class="du kw kx ky kz b">ProductCreateForm.vue</code>。父组件(<code class="du kw kx ky kz b">ProductsIndex</code>)接收带有属性的数据，并且在子组件<code class="du kw kx ky kz b">ProductCreateForm.vue</code>成功发出创建新产品的POST请求后，还接收对<code class="du kw kx ky kz b">/products.json</code>路径的GET请求。</p></div><div class="ab cl jp jq gp jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="hb hc hd he hf"><p id="1d8a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">是的，这就是我喜欢Rails的原因。它可以让你用现代的框架如Vue或React构建很酷的应用程序，而且它非常容易实现！你可以在这里找到完整的源代码。</p><p id="e00f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">有几件事我故意漏掉了。这篇文章已经够大了😆但至少你现在有了用RAILS、Vue和Vuetify创建自己项目的基础。不要犹豫使用这个源代码作为自己项目的样板！</p><h2 id="9867" class="jw jx hi bd jy jz ka kb kc kd ke kf kg jb kh ki kj jf kk kl km jj kn ko kp kq bi translated">我使用过的资源(不要剽窃别人的作品)</h2><ul class=""><li id="294a" class="lx ly hi is b it kr ix ks jb lz jf ma jj mb jn mc md me mf bi translated"><a class="ae jo" href="https://gorails.com/episodes/vuejs-components-in-rails-views?autoplay=1" rel="noopener ugc nofollow" target="_blank">https://go rails . com/episodes/vue js-components-in-rails-views？自动播放=1 </a></li><li id="23fc" class="lx ly hi is b it mg ix mh jb mi jf mj jj mk jn mc md me mf bi translated"><a class="ae jo" href="https://levelup.gitconnected.com/vue-js-with-rails-6-and-performing-crud-operations-b043ef3691f2" rel="noopener ugc nofollow" target="_blank">https://level up . git connected . com/vue-js-with-rails-6-and-performing-crud-operations-b 043 ef 3691 f 2</a></li></ul></div></div>    
</body>
</html>