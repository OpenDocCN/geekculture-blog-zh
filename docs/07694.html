<html>
<head>
<title>Form Testing in Angular</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">角度形式测试</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/form-testing-in-angular-116762220c4f?source=collection_archive---------21-----------------------#2021-09-27">https://medium.com/geekculture/form-testing-in-angular-116762220c4f?source=collection_archive---------21-----------------------#2021-09-27</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/5d86d7778182d01c6db503a14bb1123a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y_6v04Bi93zX_zCI-uJXDg.jpeg"/></div></div></figure><h1 id="f8de" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">介绍</h1><p id="3215" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">角形通常用于现实世界的应用中。它为开发人员提供了简单而全面的方法来验证用户的输入，然后再提交给后端。在本教程中，我们将介绍如何为角度形式编写单元测试。</p><p id="c8be" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">有角度的表单测试大致可以分为三类:<strong class="jq hj"> HTML结构测试</strong>、<strong class="jq hj">表单控件绑定测试</strong>和<strong class="jq hj">表单控件验证测试</strong>。因此，对于本教程，我们准备了一个简单的注册表单，其中包含一些常用的HTML输入元素。我们将一个接一个地介绍它们，以展示您如何在角度测试环境中与它们进行交互。</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kr"><img src="../Images/93bedd39774bda68eaf1ce8eaecc6503.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*YbzS1ZhWT_uDnv74"/></div></div><figcaption class="kw kx et er es ky kz bd b be z dx">Sign up form</figcaption></figure></div><div class="ab cl la lb gp lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="hb hc hd he hf"><h1 id="9045" class="iq ir hi bd is it lh iv iw ix li iz ja jb lj jd je jf lk jh ji jj ll jl jm jn bi translated">试验台初始化</h1><p id="f98f" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">为了在测试环境中使用角度表单，我们必须将<strong class="jq hj">表单模块</strong>导入测试床。在演示应用程序中，我们使用反应式表单方法，因此我们需要导入<strong class="jq hj">表单模块</strong>和<strong class="jq hj">反应式表单模块</strong>。</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div class="er es lm"><img src="../Images/b207ff78e6eb5a7701a0e91eb1d303b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1206/0*gkQgRWOmDu5WNA89"/></div><figcaption class="kw kx et er es ky kz bd b be z dx">Test Bed Initialization</figcaption></figure></div><div class="ab cl la lb gp lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="hb hc hd he hf"><h1 id="2719" class="iq ir hi bd is it lh iv iw ix li iz ja jb lj jd je jf lk jh ji jj ll jl jm jn bi translated">演示应用程序介绍</h1><p id="9264" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">注册表单包含来自顶层的h1元素和form元素。在表单内部，有六个表单控件和一个提交按钮。</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ln"><img src="../Images/3a32cb73cc031b7f2fac6b6b597aab6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*WweIC4f3CdahAaCf"/></div></div><figcaption class="kw kx et er es ky kz bd b be z dx">Top Level HTML Structure</figcaption></figure><p id="8f24" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">另一方面，在TypeScript文件中，只有两个函数。isFormValid并提交表单。在实际情况下，我们将在submitForm函数中将API发送到后端，但是，出于演示目的，我们将通过调用window.confirm方法简单地向用户显示注册信息。</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lo"><img src="../Images/5a96fb8803570305fdfd6b7ffd534123.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*UOtvMVHUMMJnLjz1"/></div></div><figcaption class="kw kx et er es ky kz bd b be z dx">TypeScript Code</figcaption></figure></div><div class="ab cl la lb gp lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="hb hc hd he hf"><h1 id="5831" class="iq ir hi bd is it lh iv iw ix li iz ja jb lj jd je jf lk jh ji jj ll jl jm jn bi translated">输入元素测试</h1><p id="e061" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">对于这个注册表单，有三个输入控件:用户名、密码和电子邮件，所以让我们一起来看看它们。</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lp"><img src="../Images/ccb97c8eb26f0a6124626ee4fea92579.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FLUYCRnSVLIs1E1w"/></div></div><figcaption class="kw kx et er es ky kz bd b be z dx">Username, Password, and E-mail HTML</figcaption></figure><h2 id="82d4" class="lq ir hi bd is lr ls lt iw lu lv lw ja jz lx ly je kd lz ma ji kh mb mc jm md bi translated">HTML验证</h2><p id="9881" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">像所有其他组件测试一样，我们可以像在<a class="ae me" href="https://simpleweblearning.com/angular-component-unit-test" rel="noopener ugc nofollow" target="_blank">之前的教程</a>中一样验证HTML结构。具体来说，您希望验证输入元素是否在HTML中设置了所有适当的属性。</p><p id="9bbc" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">例如，对于输入元素，一些值得包含在测试中的常见属性包括:<strong class="jq hj">类型、名称、最大长度、最小长度、自动完成</strong>等</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mf"><img src="../Images/1dd0916fb13daf8fc8af8a9fa4b5011b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*aZ-h2UlTHIjIzL6I"/></div></div><figcaption class="kw kx et er es ky kz bd b be z dx">Username HTML Testing</figcaption></figure><p id="f379" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">像其他HTML元素一样，我们可以通过从nativeElement调用<strong class="jq hj"> getAttribute </strong>函数来访问它们的属性。</p><h2 id="213d" class="lq ir hi bd is lr ls lt iw lu lv lw ja jz lx ly je kd lz ma ji kh mb mc jm md bi translated">表格装订</h2><p id="f044" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">对于表单绑定测试，我们可以通过更新FormControl中的值来轻松测试它，然后测试FormControl的值是否反映在绑定的输入元素上。</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mg"><img src="../Images/68019110b2d9e30c57bd86378e50aab8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*QkEzD00fIdMXk2cr"/></div></div><figcaption class="kw kx et er es ky kz bd b be z dx">Input Element Binding Tests</figcaption></figure><p id="90a0" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">要访问HTML input元素上的值，我们可以直接从其nativeElement对象的value属性中读取它。如果您想更精确，您也可以在读取值之前首先将nativeElement转换为<strong class="jq hj"> HTMLInputElement </strong>类型，但是结果应该是相同的。</p><h2 id="1475" class="lq ir hi bd is lr ls lt iw lu lv lw ja jz lx ly je kd lz ma ji kh mb mc jm md bi translated">确认</h2><p id="975f" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">用户名FormControl包含两个验证器:Required验证器和maxLength验证器。</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div class="er es mh"><img src="../Images/7d631bf8ee323acaad2b6aa54c3c9035.png" data-original-src="https://miro.medium.com/v2/resize:fit:1342/0*BARO1gLY5wipE0NV"/></div><figcaption class="kw kx et er es ky kz bd b be z dx">Register Form</figcaption></figure><p id="933a" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">我们可以为所需的验证器编写两个测试:</p><ol class=""><li id="e394" class="mi mj hi jq b jr km jv kn jz mk kd ml kh mm kl mn mo mp mq bi translated">当用户名FormControl的值长度小于10时，应将其标记为有效</li><li id="6d33" class="mi mj hi jq b jr mr jv ms jz mt kd mu kh mv kl mn mo mp mq bi translated">当用户名FormControl没有任何值时，应将其标记为无效</li></ol><figure class="ks kt ku kv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mw"><img src="../Images/747e74217a99908fa82f24238422577c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1356/0*2lAGrKAfmZsbcKzE"/></div></div><figcaption class="kw kx et er es ky kz bd b be z dx">Username Required Validation Tests</figcaption></figure><p id="5f98" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">类似地，对于maxLength测试，我们也可以开发两个测试。</p><ol class=""><li id="2548" class="mi mj hi jq b jr km jv kn jz mk kd ml kh mm kl mn mo mp mq bi translated">当用户名FormControl的值的长度小于10时，应将其标记为有效</li><li id="44c1" class="mi mj hi jq b jr mr jv ms jz mt kd mu kh mv kl mn mo mp mq bi translated">当用户名FormControl的值的长度大于10时，应将其标记为无效</li></ol><figure class="ks kt ku kv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mx"><img src="../Images/99cedf8eb58bcdb3dfc7b10d801600b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mdTm3LAwjOXxC3UU"/></div></div><figcaption class="kw kx et er es ky kz bd b be z dx">Username maxLength Validation Tests</figcaption></figure></div><div class="ab cl la lb gp lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="hb hc hd he hf"><h1 id="40d6" class="iq ir hi bd is it lh iv iw ix li iz ja jb lj jd je jf lk jh ji jj ll jl jm jn bi translated">选择元素测试</h1><p id="ed16" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">与用户名、密码和电子邮件不同，Team FormControl使用下拉元素(select元素)和动态生成的选项列表。</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es my"><img src="../Images/2ef165fff4ac260ada7158f7dd0e2c9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-xkrICtMUeJp2Wii"/></div></div><figcaption class="kw kx et er es ky kz bd b be z dx">Team HTML</figcaption></figure><h2 id="0928" class="lq ir hi bd is lr ls lt iw lu lv lw ja jz lx ly je kd lz ma ji kh mb mc jm md bi translated">HTML验证</h2><p id="672f" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">Select元素的HTML测试与Input元素非常相似，我们检查HTML结构及其属性。但是，使用Select element，我们将拥有动态数量的option元素，这些元素在运行时使用ngFor呈现。因此，除了对输入元素进行测试之外，我们至少应该编写两个额外的测试:</p><ol class=""><li id="eccd" class="mi mj hi jq b jr km jv kn jz mk kd ml kh mm kl mn mo mp mq bi translated">HTML上呈现了正确数量的选项元素</li><li id="2bea" class="mi mj hi jq b jr mr jv ms jz mt kd mu kh mv kl mn mo mp mq bi translated">每个呈现的选项元素都有正确的值绑定，并显示正确的文本</li></ol><figure class="ks kt ku kv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mz"><img src="../Images/6b6a1886fc51d1f5678a91773c5200be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*1AVefBgZPPHbOCOX"/></div></div><figcaption class="kw kx et er es ky kz bd b be z dx">Team HTML Test</figcaption></figure><figure class="ks kt ku kv fd ij er es paragraph-image"><div class="er es na"><img src="../Images/244e8665fb8300ccb54ee68b742692f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/0*9v5432dgUJFEqVD3"/></div><figcaption class="kw kx et er es ky kz bd b be z dx">Select Option Render Test</figcaption></figure><figure class="ks kt ku kv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nb"><img src="../Images/090a58f52134c0146103e69087cca10c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*pfCoXsM07zle8rDf"/></div></div><figcaption class="kw kx et er es ky kz bd b be z dx">Select Option Text Render Test</figcaption></figure><h2 id="a7c0" class="lq ir hi bd is lr ls lt iw lu lv lw ja jz lx ly je kd lz ma ji kh mb mc jm md bi translated">表格装订</h2><p id="ae67" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">为了测试team select元素是否正确绑定到其FormControl，我们也可以使用相同的方法:在控件上设置值，然后从HTML进行验证。但是，从Select元素中读取selected元素比从Input元素中读取selected元素有点棘手。</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nc"><img src="../Images/5e0fdf4fa96c366d6884dbf15afc5ac3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tVcVfOy9i-QqGcdd"/></div></div><figcaption class="kw kx et er es ky kz bd b be z dx">Select Element Form Binding Tests</figcaption></figure><p id="5ee1" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">在上面的示例中，我们从HTML中读取值，首先查询Select元素，读取它的selectedIndex，然后将该值与我们在控件上设置的选项进行比较。</p><h2 id="5ae3" class="lq ir hi bd is lr ls lt iw lu lv lw ja jz lx ly je kd lz ma ji kh mb mc jm md bi translated">确认</h2><p id="ff53" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">由于我们对于团队FormControl只有一个必需的验证器，所以我们可以像以前一样测试它的验证器功能。</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div class="er es nd"><img src="../Images/1cc711ecbd77c2f6b13b18054244a276.png" data-original-src="https://miro.medium.com/v2/resize:fit:1352/0*GPjB1gKBj0x8Ru5M"/></div><figcaption class="kw kx et er es ky kz bd b be z dx">Team Required Validation Tests</figcaption></figure></div><div class="ab cl la lb gp lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="hb hc hd he hf"><h1 id="c051" class="iq ir hi bd is it lh iv iw ix li iz ja jb lj jd je jf lk jh ji jj ll jl jm jn bi translated">单选按钮元素测试</h1><p id="2aeb" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">Gender FormControl使用带有两个选项的单选按钮组。</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ne"><img src="../Images/32a6f695955cc9eda77ce3f82d89dabb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*LIT8Q91B5-QETvL9"/></div></div><figcaption class="kw kx et er es ky kz bd b be z dx">Gender HTML</figcaption></figure><h2 id="5b26" class="lq ir hi bd is lr ls lt iw lu lv lw ja jz lx ly je kd lz ma ji kh mb mc jm md bi translated">HTML验证</h2><figure class="ks kt ku kv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nf"><img src="../Images/f15faf930fb4c9552fc3f79a901cff53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*LUDNMpQAZDiVIYgP"/></div></div><figcaption class="kw kx et er es ky kz bd b be z dx">Gender HTML Testing</figcaption></figure><p id="5df0" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">因为性别字段的HTML有点复杂，所以有更多的测试用例来覆盖它们的HTML结构。但是，重要的是你要验证它的属性，比如<strong class="jq hj">类型</strong>、<strong class="jq hj">名称</strong>、<strong class="jq hj">值</strong>、……等等。</p><h2 id="786d" class="lq ir hi bd is lr ls lt iw lu lv lw ja jz lx ly je kd lz ma ji kh mb mc jm md bi translated">表格装订</h2><p id="e3c1" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">为了测试单选按钮的表单绑定，我们也可以直接在它的FormControl上设置值，然后从HTML中验证选中的单选按钮。</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ng"><img src="../Images/571e6eb1d341490947b9ef6681961d2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*rOJCPFjH2u94KLej"/></div></div><figcaption class="kw kx et er es ky kz bd b be z dx">Radio Button Form Binding Tests</figcaption></figure><p id="4fd4" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">要验证单选按钮元素是否被选中，首先查询其input元素，将nativeElement转换为HTMLInputElement类型，然后通过读取其<strong class="jq hj"> checked </strong>属性来确定它是否被选中。</p><h2 id="1dae" class="lq ir hi bd is lr ls lt iw lu lv lw ja jz lx ly je kd lz ma ji kh mb mc jm md bi translated">确认</h2><p id="c989" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">对于单选按钮验证测试，由于用户不能取消选择单选按钮，我们的验证测试将集中在单选按钮是否有默认值。</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div class="er es nh"><img src="../Images/e2cd7fff92f2d1b483423d29037f67e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1150/0*9LdXoy_F2grIyo9v"/></div><figcaption class="kw kx et er es ky kz bd b be z dx">Radio Button Default Value Test</figcaption></figure></div><div class="ab cl la lb gp lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="hb hc hd he hf"><h1 id="e869" class="iq ir hi bd is it lh iv iw ix li iz ja jb lj jd je jf lk jh ji jj ll jl jm jn bi translated">复选框元素测试</h1><p id="d895" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">最后但同样重要的是，我们有一个订阅复选框，询问用户是否希望在未来收到简讯。</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ni"><img src="../Images/7c593a740042e5013c31d53913dc45f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*rZertefwR08X6AyZ"/></div></div><figcaption class="kw kx et er es ky kz bd b be z dx">Subscription Checkbox HTML</figcaption></figure><h2 id="9249" class="lq ir hi bd is lr ls lt iw lu lv lw ja jz lx ly je kd lz ma ji kh mb mc jm md bi translated">HTML验证</h2><p id="10db" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">对于checkbox元素的HTML测试，除了HTML结构测试之外，我们还验证是否在input元素上设置了正确的<strong class="jq hj"> type </strong>属性。</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nj"><img src="../Images/5e8627cd1d4c8d419b86c1d37e464186.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*GnSFygVRFaKNlyGk"/></div></div><figcaption class="kw kx et er es ky kz bd b be z dx">Checkbox Element HTML Tests</figcaption></figure><h2 id="178a" class="lq ir hi bd is lr ls lt iw lu lv lw ja jz lx ly je kd lz ma ji kh mb mc jm md bi translated">表格装订</h2><p id="e508" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">至于表单绑定，我们设置订阅FormControl的值，并验证checkbox元素的<strong class="jq hj"> checked </strong>属性是否相应更新。</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lo"><img src="../Images/bdf41a134c8fe55badb458670310e5ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*z3E1Khqeax371xSq"/></div></div><figcaption class="kw kx et er es ky kz bd b be z dx">Checkbox Form Binding Tests</figcaption></figure><h2 id="76dd" class="lq ir hi bd is lr ls lt iw lu lv lw ja jz lx ly je kd lz ma ji kh mb mc jm md bi translated">确认</h2><p id="fea5" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">与单选按钮类似，对于验证测试，我们希望检查复选框是否默认设置为选中。</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div class="er es nk"><img src="../Images/a0795962d7e78f5419f634cc9fb32691.png" data-original-src="https://miro.medium.com/v2/resize:fit:1324/0*Cc88r8f7r_QToMEa"/></div><figcaption class="kw kx et er es ky kz bd b be z dx">Checkbox Default Value Test</figcaption></figure></div><div class="ab cl la lb gp lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="hb hc hd he hf"><h1 id="d732" class="iq ir hi bd is it lh iv iw ix li iz ja jb lj jd je jf lk jh ji jj ll jl jm jn bi translated">表单提交事件测试</h1><p id="5c6e" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">有两种方法可以测试表单提交功能。</p><ol class=""><li id="9614" class="mi mj hi jq b jr km jv kn jz mk kd ml kh mm kl mn mo mp mq bi translated">直接在表单上触发<strong class="jq hj"> ngSubmit </strong>事件</li></ol><figure class="ks kt ku kv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nl"><img src="../Images/c05c4d334f0da3b4abc3c617ee520bf9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*UuQIvVu_eGY4sJoF"/></div></div><figcaption class="kw kx et er es ky kz bd b be z dx">Trigger ngSubmit on the Form Element</figcaption></figure><p id="ead4" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">在上面的测试用例中，我们在提交表单时应该调用的回调函数上设置了一个间谍，然后我们在表单元素上触发ngSubmit事件，并测试间谍是否确实被调用了。</p><p id="e724" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">2.点击提交按钮</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nm"><img src="../Images/df8fabfcac85ac721737000a87623016.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*KIPTnMCyiH1oGf5O"/></div></div><figcaption class="kw kx et er es ky kz bd b be z dx">Trigger submit event by clicking on the submit button</figcaption></figure><p id="64a2" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">在第二种方法中，我们不触发表单上的ngSubmit事件，而是直接点击<strong class="jq hj">提交</strong>按钮，并测试回调函数是否被调用。</p><p id="e211" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">注意。为了用这种方法测试表单提交特性，您必须确保提交按钮元素上的<strong class="jq hj">类型</strong>属性是<strong class="jq hj">而不是</strong>设置为<strong class="jq hj">按钮</strong>。如果按钮类型设置为按钮，则单击时不会触发表单提交。</p></div><div class="ab cl la lb gp lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="hb hc hd he hf"><h1 id="b997" class="iq ir hi bd is it lh iv iw ix li iz ja jb lj jd je jf lk jh ji jj ll jl jm jn bi translated">表单验证测试</h1><p id="c81d" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">对于验证函数，我们想通过只在表单确实有效时返回true来测试<strong class="jq hj"> isFormValid </strong>函数是否正常工作。</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nn"><img src="../Images/9305a1617ceeb40d5fb25ab24b81b78f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*M0lCO0pAeGBg_5JT"/></div></div><figcaption class="kw kx et er es ky kz bd b be z dx">isFormValid Tests</figcaption></figure></div><div class="ab cl la lb gp lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="hb hc hd he hf"><h1 id="a660" class="iq ir hi bd is it lh iv iw ix li iz ja jb lj jd je jf lk jh ji jj ll jl jm jn bi translated">提交表单测试</h1><figure class="ks kt ku kv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es no"><img src="../Images/19238bda5f8660250fa6b9c5b10897ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*cCWv7FSJfwzOCQVA"/></div></div><figcaption class="kw kx et er es ky kz bd b be z dx">submitForm Function</figcaption></figure><p id="eb0a" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">当调用submitForm函数时，我们希望确保只有当isFormValid返回true时才提交表单，否则，它应该显示一条警告消息。</p><p id="299c" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">注意。我们使用window.confirm来模拟API调用，在您的应用程序中，您希望检查是否对后端进行了API调用。</p><h2 id="01b1" class="lq ir hi bd is lr ls lt iw lu lv lw ja jz lx ly je kd lz ma ji kh mb mc jm md bi translated">警报消息测试</h2><p id="c39b" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">对于警告消息，我们准备了两个测试用例(一个肯定的，一个否定的)来测试警告消息是否在适当的时间显示。</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es np"><img src="../Images/5644e5a932cfecc6c33ea2ea30e5168a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-peLXye526uqXXnP"/></div></div><figcaption class="kw kx et er es ky kz bd b be z dx">Alert Message Tests</figcaption></figure><h2 id="19c4" class="lq ir hi bd is lr ls lt iw lu lv lw ja jz lx ly je kd lz ma ji kh mb mc jm md bi translated">表单提交测试</h2><p id="b032" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">对于表单提交测试，您需要在提交表单时进行测试，在传递到后端(或者在我们的例子中是confirm函数)之前，数据的格式是否正确。</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nq"><img src="../Images/ac79df49438b898a6ede358c59ba595d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*UU2CJat-wBD4sOyi"/></div></div><figcaption class="kw kx et er es ky kz bd b be z dx">Form Submit Tests</figcaption></figure></div><div class="ab cl la lb gp lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="hb hc hd he hf"><h1 id="4f7e" class="iq ir hi bd is it lh iv iw ix li iz ja jb lj jd je jf lk jh ji jj ll jl jm jn bi translated">结论</h1><p id="703a" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">在本教程中，我们介绍了一些常用的表单控件HTML元素，以及如何在HTML验证、表单绑定和表单验证方面为它们编写测试。如果您使用不同的表单控件元素(例如Angular Material)，即使从HTML元素读取其值的方式可能不同，最终该组件的表单测试仍然应该包括这三个方面的测试。</p><p id="6bc3" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">在本教程的最后一部分，我们用window.confirm函数替换表单提交API调用，这样我们就可以只关注表单测试了。在下一篇教程中，我们将讨论如何处理API测试，也就是Angular中的异步测试。</p><p id="d66e" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">本教程总共有72个测试，你可以在<a class="ae me" href="https://github.com/chen1223/unit-test-in-angular" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上找到完整的列表。</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nr"><img src="../Images/20f29e30b462802f3eacfaf9893a5f0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*fWgmOMDMzxhJlidN"/></div></div><figcaption class="kw kx et er es ky kz bd b be z dx">Total Tests for this Tutorial</figcaption></figure><p id="af39" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">原帖:【https://simpleweblearning.com/form-testing-in-angular】<a class="ae me" href="https://simpleweblearning.com/form-testing-in-angular" rel="noopener ugc nofollow" target="_blank">T2</a></p></div></div>    
</body>
</html>