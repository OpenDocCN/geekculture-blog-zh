<html>
<head>
<title>Python to C++, A Data Scientist’s Journey to Learning a New Language — Classes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python到C++，数据科学家学习新语言的旅程——类</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/python-to-c-a-data-scientists-journey-to-learning-a-new-language-classes-937d826626d7?source=collection_archive---------25-----------------------#2021-07-03">https://medium.com/geekculture/python-to-c-a-data-scientists-journey-to-learning-a-new-language-classes-937d826626d7?source=collection_archive---------25-----------------------#2021-07-03</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/890736ea088de4cf94031ae66343a512.png" data-original-src="https://miro.medium.com/v2/resize:fit:1296/format:webp/1*kysWUKovj5lz96in8jhWDQ.png"/></div></figure><h2 id="92e5" class="im in hi bd io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj bi translated">介绍</h2><p id="b17c" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju ix jv jw jx jb jy jz ka jf kb kc kd ke hb bi translated">勇敢的读者们，欢迎回到Python到C++系列的另一部分。在上次会议中，我们讨论了Python和C++中函数的重要性和用法。今天，我们将通过深入研究类的世界来扩展这个想法。我们将回顾类的一些基本用例，然后通过在每种语言中组合一个可用于开发RPG角色的类来创建我们自己的例子。</p><h2 id="b4df" class="im in hi bd io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj bi translated">班级</h2><p id="b3b7" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju ix jv jw jx jb jy jz ka jf kb kc kd ke hb bi translated">在上一期中，我提到了函数可以用来将我们希望在整个程序中频繁重复的代码行组合在一起。一个类是一组协同工作以完成一个共同目标的函数。例如，在我们今天的例子中，我们将创建一个基于许多不同因素创建角色的类:我们将有一个角色名字的函数，一个角色种族的函数，一个角色专业的函数，等等。</p><p id="46da" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">在Python中，创建类的方法是首先定义我们的类，然后是我们希望的类的名称；命名约定遵循每个单词的大小写，单词之间没有空格:</p><pre class="kk kl km kn fd ko kp kq kr aw ks bi"><span id="35e1" class="im in hi kp b fi kt ku l kv kw">class ClassName():</span></pre><p id="7bcb" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">我们创建的每个类都必须从初始化函数开始。当调用和创建新的对象或类时，该函数将值初始化为任何重要的数据。这个函数将包含我们希望在整个课程中使用的任何变量。它被定义为我们创建的任何其他函数，但必须具有名称__init__以允许计算机识别这是初始化函数。在括号中必须包含self属性，这允许识别整个类中的类变量和数据。在__init__函数体中，我们包含了我们希望贯穿始终的类变量；这些变量必须使用self进行实例化。方法如下所示:</p><pre class="kk kl km kn fd ko kp kq kr aw ks bi"><span id="8259" class="im in hi kp b fi kt ku l kv kw">def __init__(self, att2, att3, att4):<br/>    self.att2 = att2<br/>    self.att3 = att3<br/>    self.att4 = att4</span></pre><p id="f505" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">类的其余部分由需要包含的任何函数组成；同样，self必须作为每个函数的属性传递，以允许识别类的属性。在这些函数中，可以再次使用self调用类变量或对象属性。方法:</p><pre class="kk kl km kn fd ko kp kq kr aw ks bi"><span id="1714" class="im in hi kp b fi kt ku l kv kw">def func2(self):<br/>    print(self.att2)<br/>    return self.att3 + self.att4</span></pre><p id="aaa5" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">类属性中的值也可以通过使用self调用属性来更改。方法，并将其设置为感兴趣的新值:</p><pre class="kk kl km kn fd ko kp kq kr aw ks bi"><span id="e1b0" class="im in hi kp b fi kt ku l kv kw">def func3(self):<br/>    if self.att2 &gt; self.att3:<br/>        self.att4 = self.att2<br/>    else:<br/>        self.att4 = self.att3</span></pre><p id="6778" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">在C++中，类或对象是以类似的方式创建的，方法是将对象定义为一个类，然后给该类一个名称；然后，类的主体必须用花括号括起来:</p><pre class="kk kl km kn fd ko kp kq kr aw ks bi"><span id="9f9a" class="im in hi kp b fi kt ku l kv kw">class ClassName<br/>{<br/>    &lt;class body&gt;<br/>};</span></pre><p id="e483" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">C++类中的“初始化函数”通过将类设置为public、private或protected来表示。这些是访问说明符，告诉计算机属性和方法(类函数)是否可以在类外访问。Public允许在类外部访问；private不允许在类外部访问；protected只允许在继承的实例中访问类的外部，这一点我们将在后面讨论。如果我们希望类的某些部分保持私有，其余部分保持公共，我们可以指定多个访问说明符。该访问说明符的主体将包括该类的属性和方法，这些属性和方法的设置类似于任何其他变量或函数；请注意，与python不同，在方法中设置类属性时，我们仍然必须返回属性，而在python中，我们不需要指定这样的返回:</p><pre class="kk kl km kn fd ko kp kq kr aw ks bi"><span id="d257" class="im in hi kp b fi kt ku l kv kw">public:</span><span id="a90b" class="im in hi kp b fi kx ku l kv kw">    std::string att1;<br/>    std::string att2;<br/>    int att3;<br/>    double att4;<br/>    bool att5;</span><span id="ae26" class="im in hi kp b fi kx ku l kv kw">    std::string setAtt1()<br/>    {<br/>        std::cout &lt;&lt; “What is att1?”;<br/>        std::cin &gt;&gt; att1;<br/>        return att1;<br/>    };</span><span id="19b4" class="im in hi kp b fi kx ku l kv kw">    std::string setAtt2()<br/>    {<br/>        std::cout &lt;&lt; “What is att2?”;<br/>        std::cin &gt;&gt; att2;<br/>        return att2;<br/>    };</span><span id="b352" class="im in hi kp b fi kx ku l kv kw">    int att3PlusAtt4()<br/>    {<br/>        att3 = 5;<br/>        att4 = 10.6;<br/>        return att3 + att4;<br/>    };</span><span id="e7d0" class="im in hi kp b fi kx ku l kv kw">    bool setAtt5()<br/>    {<br/>        if (att3PlusAtt4() &gt; 5)<br/>        {<br/>            att5 = true;<br/>        }<br/>        else<br/>        {<br/>            att5 = false;<br/>        }<br/>    };</span><span id="e3c6" class="im in hi kp b fi kx ku l kv kw">private:<br/>    std::string att6 = “CLASSIFIED”;<br/>    int att7 = 42;</span></pre><h2 id="ac41" class="im in hi bd io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj bi translated">调用和使用类</h2><p id="165e" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju ix jv jw jx jb jy jz ka jf kb kc kd ke hb bi translated">在Python中，可以通过简单地实例化对象调用的新变量来调用类:</p><pre class="kk kl km kn fd ko kp kq kr aw ks bi"><span id="e6dc" class="im in hi kp b fi kt ku l kv kw">myClass = ClassName(“hello readers”, 1, 2)</span></pre><p id="d05d" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">为了访问这个新对象中的属性和方法，我们使用了点方法:</p><pre class="kk kl km kn fd ko kp kq kr aw ks bi"><span id="e02c" class="im in hi kp b fi kt ku l kv kw">var = myClass.func2()<br/>myClass.func3()<br/>var2 = myClass.att4<br/>print(var2) # will print out a boolean value</span></pre><p id="4aa7" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">在C++中，类的调用方式非常相似。首先调用这个类，然后调用新对象的名称。</p><pre class="kk kl km kn fd ko kp kq kr aw ks bi"><span id="e54d" class="im in hi kp b fi kt ku l kv kw">int main()<br/>{<br/>    ClassName newClass;<br/>}</span></pre><p id="6ca2" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">就像在Python C++中，类属性和方法是使用点方法调用的:</p><pre class="kk kl km kn fd ko kp kq kr aw ks bi"><span id="47e7" class="im in hi kp b fi kt ku l kv kw">newClass.setAtt1();<br/>newClass.setAtt2();<br/>newClass.setAtt4();<br/>newClass.setAtt5();<br/>std::cout &lt;&lt; newClass.att1 &lt;&lt; std::endl;<br/>std::cout &lt;&lt; newClass.att2 &lt;&lt; std::endl;<br/>std::cout &lt;&lt; newClass.att4 &lt;&lt; std::endl;<br/>std::cout &lt;&lt; newClass.att5 &lt;&lt; std::endl;</span></pre><h2 id="8e0a" class="im in hi bd io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj bi translated">类继承</h2><p id="a883" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju ix jv jw jx jb jy jz ka jf kb kc kd ke hb bi translated">在某些情况下，我们可能希望创建多个类，但是每个类都有许多相同的属性。在这种情况下，我们可以创建一个从某个父类继承这些属性的类。例如，我们可以创建一个父类:</p><pre class="kk kl km kn fd ko kp kq kr aw ks bi"><span id="445d" class="im in hi kp b fi kt ku l kv kw">class Parent():<br/>    def __init__(self, att1, att2):<br/>        self.att1 = att1<br/>        self.att2 = att2<br/>    def print_att_1(self):<br/>        print(att1)<br/>    def print_att_2(self):<br/>        print(att2)</span></pre><p id="6c08" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">然后，我们可以通过创建新类并使用父类作为属性，在新的子类中使用父类的属性；init函数将包含从父类继承的所有属性，以及我们希望包含在子类中的任何新属性。最后，在init类的主体中，我们必须包含super()方法，该方法允许我们从父类复制属性:</p><pre class="kk kl km kn fd ko kp kq kr aw ks bi"><span id="21cd" class="im in hi kp b fi kt ku l kv kw">class Child(Parent):<br/>    def __init__(self, att1, att2, att3, att4):<br/>        super().__init__(att1, att2)<br/>        self.att3 = att3<br/>        self.att4 = att4<br/>        def print_att_3(self):<br/>            print(att3)<br/>        def print_att_4(self):<br/>            print(att4)</span></pre><p id="f610" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">在C++中，我们可以像这样创建一个父类:</p><pre class="kk kl km kn fd ko kp kq kr aw ks bi"><span id="a298" class="im in hi kp b fi kt ku l kv kw">class Parent<br/>{<br/>    public:<br/>    int att1;<br/>}</span></pre><p id="1039" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">当我们创建子类时，我们通过定义子类和名字来指定从父类的继承，使用冒号作为分隔符，然后指定父类的访问模式和父类的名字；这使得子类可以访问父类的公共或私有访问模式主体中的所有内容。从这里开始，我们像平常一样创建类体，包括子的访问模式和我们想要包含的任何属性和方法:</p><pre class="kk kl km kn fd ko kp kq kr aw ks bi"><span id="dc72" class="im in hi kp b fi kt ku l kv kw">class Child : public Parent<br/>{<br/>    public:<br/>    int att2;<br/>}</span></pre><p id="0b75" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">调用和访问子类的属性和方法与调用任何其他类是一样的。</p><h2 id="6c72" class="im in hi bd io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj bi translated">字符类示例</h2><p id="c687" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju ix jv jw jx jb jy jz ka jf kb kc kd ke hb bi translated">下面是用Python编写的一个类，它创建了一个RPG角色，包括名字、种族、专长、生命值和魔法值。</p><p id="07bd" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">Python:</p><pre class="kk kl km kn fd ko kp kq kr aw ks bi"><span id="2bd2" class="im in hi kp b fi kt ku l kv kw">class Character():<br/>    """ A class that holds character information """</span><span id="454d" class="im in hi kp b fi kx ku l kv kw">    def __init__(self, name="", race="", specialty="", hp=0, mp=0):<br/>        self.name = name<br/>        self.race = race<br/>        self.specialty = specialty<br/>        self.hp = hp<br/>        self.mp = mp</span><span id="cfd6" class="im in hi kp b fi kx ku l kv kw">    def set_name(self):<br/>        """ Sets character name """<br/>        print("What is your name?")<br/>        self.name = input()</span><span id="a521" class="im in hi kp b fi kx ku l kv kw">    def set_race(self):<br/>        """ Sets character race """<br/>        print("What is your race? Choose between human, elf, or  <br/>              dwarf.")<br/>        self.race = input()</span><span id="f5d6" class="im in hi kp b fi kx ku l kv kw">    def set_specialty(self):<br/>        """ Sets character class/specialty """<br/>        print("What is your specialty (or class)? Choose between    <br/>              warrior, mage, or rogue.")<br/>        self.specialty = input()</span><span id="8cab" class="im in hi kp b fi kx ku l kv kw">    def set_hp(self):<br/>        if self.specialty == "Warrior":<br/>            self.hp = 25<br/>        elif self.specialty == "Mage":<br/>            self.hp = 15<br/>        elif self.specialty == "Rogue":<br/>            self.hp = 20<br/>        print(f"You have {self.hp} hit points.")</span><span id="8c18" class="im in hi kp b fi kx ku l kv kw">    def set_mp(self):<br/>        if self.specialty == "Warrior":<br/>            self.mp = 5<br/>        elif self.specialty == "Mage":<br/>            self.mp = 15<br/>        elif self.specialty == "Rogue":<br/>            self.mp = 10<br/>            print(f"You have {self.mp} magic points.")</span><span id="b112" class="im in hi kp b fi kx ku l kv kw">    def view_character_stats(self):<br/>        print(f"Name: {self.name}")<br/>        print(f"Race: {self.race}")<br/>        print(f"Class: {self.specialty}")<br/>        print(f"HP: {self.hp}")<br/>        print(f"MP: {self.mp}")</span><span id="4fc8" class="im in hi kp b fi kx ku l kv kw">newChar = Character()<br/>newChar.set_name()<br/>newChar.set_race()<br/>newChar.set_specialty()<br/>newChar.set_hp()<br/>newChar.set_mp()<br/>newChar.view_character_stats()</span></pre><p id="6361" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">退货:</p><pre class="kk kl km kn fd ko kp kq kr aw ks bi"><span id="3d10" class="im in hi kp b fi kt ku l kv kw">$ python3 classes.py</span><span id="f154" class="im in hi kp b fi kx ku l kv kw">&gt;&gt; What is your name?<br/>&gt;&gt; Daniel<br/>&gt;&gt; What is your race? Choose between human, elf, or dwarf.<br/>&gt;&gt; Human<br/>&gt;&gt; What is your specialty (or class)? Choose between warrior, mage,  <br/>   or rogue.<br/>&gt;&gt; Warrior<br/>&gt;&gt; You have 25 hit points.<br/>&gt;&gt; You have 5 magic points.<br/>&gt;&gt; Name: Daniel<br/>&gt;&gt; Race: Human<br/>&gt;&gt; Class: Warrior<br/>&gt;&gt; HP: 25<br/>&gt;&gt; MP: 5</span></pre><p id="684a" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">C++:</p><pre class="kk kl km kn fd ko kp kq kr aw ks bi"><span id="f0e6" class="im in hi kp b fi kt ku l kv kw">#include &lt;iostream&gt;<br/>#include &lt;string&gt;</span><span id="c086" class="im in hi kp b fi kx ku l kv kw">class Character<br/>{<br/>    public:<br/>        std::string name;<br/>        std::string race;<br/>        std::string specialty;<br/>        int hp;<br/>        int mp;</span><span id="afae" class="im in hi kp b fi kx ku l kv kw">        std::string setName()<br/>        {<br/>            std::cout &lt;&lt; "What is your name?\n";<br/>            std::cin &gt;&gt; name;<br/>            return name;<br/>        };</span><span id="686c" class="im in hi kp b fi kx ku l kv kw">        std::string setRace()<br/>        {<br/>            std::cout &lt;&lt; "What is your race? Choose between human, <br/>                          elf, or dwarf.\n";<br/>            std::cin &gt;&gt; race;<br/>            return race;<br/>        };</span><span id="8333" class="im in hi kp b fi kx ku l kv kw">        std::string setSpecialty()<br/>        {<br/>            std::cout &lt;&lt; "What is your specialty (or class)? Choose  <br/>                          between warrior, mage, or rogue.\n";<br/>            std::cin &gt;&gt; specialty;<br/>            return specialty;<br/>        };</span><span id="98a1" class="im in hi kp b fi kx ku l kv kw">        int setHP()<br/>        {<br/>            if (specialty == "Warrior")<br/>            {<br/>                hp = 25;<br/>            }<br/>            else if (specialty == "Mage")<br/>            {<br/>                hp = 15;<br/>            }<br/>            else if (specialty == "Rogue")<br/>            {<br/>                hp = 20;<br/>            }</span><span id="a264" class="im in hi kp b fi kx ku l kv kw">            std::cout &lt;&lt; "Your hp is " &lt;&lt; hp &lt;&lt; std::endl;<br/>            return hp;<br/>        };</span><span id="628b" class="im in hi kp b fi kx ku l kv kw">        int setMP()<br/>        {<br/>            if (specialty == "Warrior")<br/>            {<br/>                mp = 5;<br/>            }</span><span id="ad86" class="im in hi kp b fi kx ku l kv kw">            else if (specialty == "Mage")<br/>            {<br/>                mp = 15;<br/>            }<br/>            else if (specialty == "Rogue")<br/>            {<br/>                mp = 10;<br/>            }</span><span id="e6f4" class="im in hi kp b fi kx ku l kv kw">            std::cout &lt;&lt; "Your mp is " &lt;&lt; mp &lt;&lt; std::endl;<br/>            return mp;<br/>        };</span><span id="ef6c" class="im in hi kp b fi kx ku l kv kw">        void viewCharStats()<br/>        {<br/>            std::cout &lt;&lt; "Name: " &lt;&lt; name &lt;&lt; std::endl;<br/>            std::cout &lt;&lt; "Race: " &lt;&lt; race &lt;&lt; std::endl;<br/>            std::cout &lt;&lt; "Class: " &lt;&lt; specialty &lt;&lt; std::endl;<br/>            std::cout &lt;&lt; "HP: " &lt;&lt; hp &lt;&lt; std::endl;<br/>            std::cout &lt;&lt; "MP: " &lt;&lt; mp &lt;&lt; std::endl;<br/>        };</span><span id="d7d3" class="im in hi kp b fi kx ku l kv kw">};</span><span id="3aa7" class="im in hi kp b fi kx ku l kv kw">int main()<br/>{<br/>    Character myChar; // Create new character object<br/>    myChar.setName(); // Call setName method<br/>    myChar.setRace(); // Call setRace method<br/>    myChar.setSpecialty(); // Call setSpeciality method<br/>    myChar.setHP(); // Call setHP method<br/>    myChar.setMP(); // Call setMP method<br/>    std::cout &lt;&lt; myChar.name &lt;&lt; std::endl;<br/>    myChar.viewCharStats(); // Call viewCharStats method<br/>    return 0;<br/>};</span></pre><p id="65ad" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">退货:</p><pre class="kk kl km kn fd ko kp kq kr aw ks bi"><span id="1fa2" class="im in hi kp b fi kt ku l kv kw">$ g++ -o classes classes.cpp<br/>$ ./classes</span><span id="9c3c" class="im in hi kp b fi kx ku l kv kw">&gt;&gt; What is your name?<br/>&gt;&gt; Daniel<br/>&gt;&gt; What is your race? Choose between human, elf, or dwarf.<br/>&gt;&gt; Elf<br/>&gt;&gt; What is your specialty (or class)? Choose between warrior, mage,  <br/>   or rogue.<br/>&gt;&gt; Mage<br/>&gt;&gt; Your hp is 15<br/>&gt;&gt; Your mp is 15<br/>&gt;&gt; Daniel<br/>&gt;&gt; Name: Daniel<br/>&gt;&gt; Race: Elf<br/>&gt;&gt; Class: Mage<br/>&gt;&gt; HP: 15<br/>&gt;&gt; MP: 15</span></pre><p id="3a2e" class="pw-post-body-paragraph jk jl hi jm b jn kf jp jq jr kg jt ju ix kh jw jx jb ki jz ka jf kj kc kd ke hb bi translated">勇敢的读者们，感谢你们再次和我一起踏上从Python到C++系列的另一段旅程。我希望下次能见到你，并一如既往地保持快乐编码！</p></div></div>    
</body>
</html>