<html>
<head>
<title>Swift User Notifications: Authorise, Schedule, Monitor, and Remove.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Swift用户通知:授权、调度、监控和删除。</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/swift-user-notifications-authorise-schedule-monitor-and-remove-c6ff4ec808e5?source=collection_archive---------14-----------------------#2021-06-16">https://medium.com/geekculture/swift-user-notifications-authorise-schedule-monitor-and-remove-c6ff4ec808e5?source=collection_archive---------14-----------------------#2021-06-16</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="5734" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Swift用户通知安排通知消息在指定的日期和时间出现在用户设备上。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/57a79c99b8c62dda586c5ceea51e829a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9RzEFq8BP7rPZBWVvyIndQ.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx">AppsGym ToDo Remind Me User Notification</figcaption></figure><h1 id="c8aa" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">方案</h1><p id="eb4d" class="pw-post-body-paragraph if ig hi ih b ii kr ik il im ks io ip iq kt is it iu ku iw ix iy kv ja jb jc hb bi translated">我们的待办事项应用程序'<strong class="ih hj">提醒我</strong>'功能将安排在用户指定的日期和时间触发用户通知。该应用还将包括一个<strong class="ih hj">活动通知</strong>视图，显示所有当前活动的“提醒我”通知请求，以及设置中的<strong class="ih hj">取消通知</strong>功能。</p><h1 id="a35d" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">技术</h1><p id="a569" class="pw-post-body-paragraph if ig hi ih b ii kr ik il im ks io ip iq kt is it iu ku iw ix iy kv ja jb jc hb bi translated">我们将利用Swift的<strong class="ih hj">用户通知</strong>框架来授权、请求、安排和(可选)删除“提醒我”用户通知。</p><p id="844e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> AppDelegate.swift </strong>将包含用户通知的授权请求，因此弹出警告将在应用首次启动时出现。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kw"><img src="../Images/ebf7a6fb80c031305058cab37877e3ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:642/format:webp/1*HiYkwLwgCB2jbu6yrCDcsw.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx">First App Launch Authorisation Request</figcaption></figure><p id="d386" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ToDo主视图<strong class="ih hj">noteviewcontroller . swift</strong>将包含“<strong class="ih hj">提醒我</strong>”<strong class="ih hj">按钮</strong>，点击该按钮的动作将转到<strong class="ih hj">日期选择器</strong>视图。用户将选择日期和时间，该日期和时间将被传回主视图，并作为文本存储在“提醒我”<strong class="ih hj">文本字段</strong>中。保存笔记记录后，我们将检查用户通知授权状态，如果授权，则安排通知。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kx"><img src="../Images/26e658ea50a17a4098f332ecc56b6390.png" data-original-src="https://miro.medium.com/v2/resize:fit:644/1*5DPxhQkAM9nq5hj37Z4Ong.gif"/></div><figcaption class="jp jq et er es jr js bd b be z dx">GIF Remind Me Date Picker and Notification Schedule</figcaption></figure><h1 id="bc30" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">观众</h1><p id="d86a" class="pw-post-body-paragraph if ig hi ih b ii kr ik il im ks io ip iq kt is it iu ku iw ix iy kv ja jb jc hb bi translated">本文面向寻求完整、成熟、以代码为中心的解决方案以加快开发项目的Swift开发人员。</p><h1 id="8112" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">应用模型</h1><p id="76b8" class="pw-post-body-paragraph if ig hi ih b ii kr ik il im ks io ip iq kt is it iu ku iw ix iy kv ja jb jc hb bi translated">我们的文章基于苹果应用商店上发布的AppsGym <a class="ae ky" href="https://appsgym.com/todo-lists-notifications-multimedia/" rel="noopener ugc nofollow" target="_blank"> ToDo </a>模型应用，你可以在AppsGym.com上免费下载完整的<a class="ae ky" href="https://appsgym.com/downloads/" rel="noopener ugc nofollow" target="_blank"> Xcode </a>项目。</p><h1 id="2233" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">用户界面</h1><p id="c0b1" class="pw-post-body-paragraph if ig hi ih b ii kr ik il im ks io ip iq kt is it iu ku iw ix iy kv ja jb jc hb bi translated">在笔记视图中，我们需要一个“<strong class="ih hj">提醒我”ui按钮</strong>，它将转到日期选择器视图。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kz"><img src="../Images/6fd0f2c979a9f13294f478ce1d803bd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:614/format:webp/1*c4QwlSvsPgKp7-CyXfkh2g.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx">Remind Me Button and Text Field</figcaption></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es la"><img src="../Images/b427a009ca82a435f7169c32b469259a.png" data-original-src="https://miro.medium.com/v2/resize:fit:632/format:webp/1*8scNQPp9X6ke1zF6wk5zrQ.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx">Remind Me Date Picker</figcaption></figure><p id="9d51" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将为<strong class="ih hj">活动通知</strong>监控设计一个专用视图，并将其添加到查询中(可能还有设置)。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lb"><img src="../Images/8e01de2d34682a50733b701a9092fceb.png" data-original-src="https://miro.medium.com/v2/resize:fit:636/format:webp/1*i5WEI3XIAotIuJ362W31kQ.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx">AppsGym ToDo Active Notifications Query</figcaption></figure><p id="dc67" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们还将设计一个专用的视图来显示所有待办事项的<strong class="ih hj">取消通知</strong>，并将其添加到设置菜单中。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lc"><img src="../Images/c1d96f871d139479ade68cb65c18df9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:634/format:webp/1*TUZaxzQQ0dHQ0z-d_BcsSA.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx">AppsGym ToDo Settings Cancel Notifications</figcaption></figure><h1 id="4d86" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">逻辑</h1><p id="80a1" class="pw-post-body-paragraph if ig hi ih b ii kr ik il im ks io ip iq kt is it iu ku iw ix iy kv ja jb jc hb bi translated"><strong class="ih hj"> AppDelegate.swift </strong>将调用函数<strong class="ih hj">authorizeuser notifications()</strong>，该函数将请求授权，触发初始应用程序加载弹出窗口(如Info.plist中的设置)。</p><p id="c661" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> NoteViewController.swift，</strong>处理新的待办事项添加和编辑(更新)<strong class="ih hj">，</strong>将调用:</p><blockquote class="ld le lf"><p id="5a3e" class="if ig lg ih b ii ij ik il im in io ip lh ir is it li iv iw ix lj iz ja jb jc hb bi translated"><strong class="ih hj"> checkUserNotification() </strong>，检查用户是否有授权通知。</p><p id="f286" class="if ig lg ih b ii ij ik il im in io ip lh ir is it li iv iw ix lj iz ja jb jc hb bi translated"><strong class="ih hj">scheduleUserNotification()</strong>，设置提醒我日期/时间通知。</p></blockquote><p id="4fe0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果待办事项处于编辑模式，那么我们首先删除该待办事项ID的任何未决通知，然后在保存时重新安排提醒我的日期/时间。</p><p id="12ec" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">另一种安排是将所有用户通知功能包含在它们自己专用的<strong class="ih hj"> UserNotifications.swift </strong>文件中，这样它们可以从任何其他视图中被调用。</p><p id="ef72" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">查询<strong class="ih hj">todosbynotificationstableviewcontroller . swift</strong>将显示所有当前活动的用户通知。</p><p id="cd02" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">设置<strong class="ih hj">cancelnotificationsviewcontroller . swift</strong>将允许用户取消所有待处理和已发送的用户通知。</p><h1 id="b53a" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">密码</h1><h1 id="8051" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">授权通知</h1><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kw"><img src="../Images/ebf7a6fb80c031305058cab37877e3ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:642/format:webp/1*HiYkwLwgCB2jbu6yrCDcsw.png"/></div></figure><p id="cd10" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">app delegate . swift authorizeuser notifications()</strong></p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lk ll l"/></div></figure><h1 id="2743" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">检查、删除和安排通知</h1><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kz"><img src="../Images/6fd0f2c979a9f13294f478ce1d803bd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:614/format:webp/1*c4QwlSvsPgKp7-CyXfkh2g.png"/></div></figure><p id="f06e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">noteviewcontroller . swift<strong class="ih hj">viewDidLoad()</strong></p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lk ll l"/></div></figure><p id="9352" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">noteviewcontroller . swift<strong class="ih hj">check user notification()</strong></p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lk ll l"/></div></figure><p id="79e8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">noteviewcontroller . swift<strong class="ih hj">saverecortocoredata()</strong></p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lk ll l"/></div></figure><p id="e19e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">noteviewcontroller . swift<strong class="ih hj">scheduleUserNotification()</strong></p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lk ll l"/></div></figure><p id="3181" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">NoteViewController.swift <strong class="ih hj">助手</strong></p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lk ll l"/></div></figure><h1 id="0fe5" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated"><strong class="ak">监视器通知</strong></h1><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lb"><img src="../Images/8e01de2d34682a50733b701a9092fceb.png" data-original-src="https://miro.medium.com/v2/resize:fit:636/format:webp/1*i5WEI3XIAotIuJ362W31kQ.png"/></div></figure><p id="c3c7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">todosbynotificationstableviewcontroller . swift</strong></p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lk ll l"/></div></figure><h1 id="085b" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated"><strong class="ak">取消通知</strong></h1><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lc"><img src="../Images/c1d96f871d139479ade68cb65c18df9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:634/format:webp/1*TUZaxzQQ0dHQ0z-d_BcsSA.png"/></div></figure><p id="5371" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">cancelnotificationsviewcontroller . swift</strong></p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lk ll l"/></div></figure><p id="dd7e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">本文介绍了授权、检查、调度、监控和删除用户通知的完整设置、逻辑和代码。主题范围的全面覆盖需要一个冗长的故事，但是我们的目标是在一个地方覆盖Swift用户通知活动的整个范围。</p><p id="98c6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">希望这些内容对你的应用有用。感谢阅读！</p></div></div>    
</body>
</html>