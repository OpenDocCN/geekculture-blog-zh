<html>
<head>
<title>A Brief Introduction to Test Driven Development (TDD) in Swift &amp; iOS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Swift和iOS中的测试驱动开发(TDD)简介</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/a-brief-introduction-to-test-driven-development-tdd-in-swift-ios-53fbe2a4d76d?source=collection_archive---------48-----------------------#2021-06-21">https://medium.com/geekculture/a-brief-introduction-to-test-driven-development-tdd-in-swift-ios-53fbe2a4d76d?source=collection_archive---------48-----------------------#2021-06-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><h1 id="1257" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">什么是测试驱动开发(TDD)</h1><p id="334f" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated"><strong class="jf hj">测试驱动开发</strong> ( <strong class="jf hj"> TDD </strong>)是一个<a class="ae kb" href="https://en.wikipedia.org/wiki/Software_development_process" rel="noopener ugc nofollow" target="_blank">软件开发过程</a>，依赖于在软件完全开发之前将软件需求转化为<a class="ae kb" href="https://en.wikipedia.org/wiki/Test_case" rel="noopener ugc nofollow" target="_blank">测试用例</a> <strong class="jf hj">，并通过针对所有测试用例反复测试软件来跟踪所有软件开发。这与先开发软件，后创建测试用例相反。</strong></p><p id="19d7" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">更多详情见<a class="ae kb" href="https://en.wikipedia.org/wiki/Test-driven_development" rel="noopener ugc nofollow" target="_blank">维基百科</a>。</p><h1 id="ab31" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated"><strong class="ak">测试驱动开发周期</strong></h1><p id="b3a3" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">TDD流程有5个步骤:</p><ol class=""><li id="6d48" class="kh ki hi jf b jg kc jk kd jo kj js kk jw kl ka km kn ko kp bi translated">阅读、理解和处理特性或bug请求。</li><li id="4708" class="kh ki hi jf b jg kq jk kr jo ks js kt jw ku ka km kn ko kp bi translated">通过编写单元测试来翻译需求。如果设置了热重装，单元测试将会运行并失败，因为还没有实现任何代码。</li><li id="5169" class="kh ki hi jf b jg kq jk kr jo ks js kt jw ku ka km kn ko kp bi translated">编写并实现满足需求的代码。运行所有测试，它们应该通过，如果没有，重复这个步骤。</li><li id="d4b8" class="kh ki hi jf b jg kq jk kr jo ks js kt jw ku ka km kn ko kp bi translated">通过重构清理你的代码。</li><li id="66e8" class="kh ki hi jf b jg kq jk kr jo ks js kt jw ku ka km kn ko kp bi translated">冲洗，起泡，然后重复。</li></ol><figure class="kw kx ky kz fd la er es paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="er es kv"><img src="../Images/26f7b241a8769056a1be6c903477a216.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zclpSPDi_lb26HmGQbDCfA.png"/></div></div><figcaption class="lh li et er es lj lk bd b be z dx">Test Driven Development Cycle</figcaption></figure></div><div class="ab cl ll lm gp ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="hb hc hd he hf"><h1 id="eec3" class="if ig hi bd ih ii ls ik il im lt io ip iq lu is it iu lv iw ix iy lw ja jb jc bi translated"><strong class="ak">Xcode中的测试驱动开发</strong></h1><p id="82d5" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">我们将用一个示例项目在Xcode上编写我们的第一个测试方法。此外，我将通过执行5个步骤来继续我上面提到的适合循环的场景。</p><h2 id="fb90" class="lx ig hi bd ih ly lz ma il mb mc md ip jo me mf it js mg mh ix jw mi mj jb mk bi translated">1-)功能请求</h2><p id="2258" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">假设我们的产品负责人向我们转发了一个特性请求。它的内容如下，用户输入的密码必须在注册前验证。这里是验证规则:<br/> -用户输入的密码必须相等。</p><h2 id="5729" class="lx ig hi bd ih ly lz ma il mb mc md ip jo me mf it js mg mh ix jw mi mj jb mk bi translated">2-)红色</h2><p id="1e1a" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">让我们跳到Xcode中，编写我们失败的测试方法。注意测试函数的名字和里面的注释行。</p><figure class="kw kx ky kz fd la er es paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="er es ml"><img src="../Images/a3ba62330c81d7ef8271f3c352d1c65f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yQG2lHrcr_Oo9mCgfjItPg.png"/></div></div><figcaption class="lh li et er es lj lk bd b be z dx">Failing Test Method</figcaption></figure><p id="faa6" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">从上面的截图可以看出，函数的名字太长了。这是因为开发人员使用了一个不成文的测试方法命名约定。步骤如下:</p><p id="5f07" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">测试<systemundertest> _ &gt;条件状态变化&gt; _ <expectedresult/></systemundertest></p><ol class=""><li id="4bb1" class="kh ki hi jf b jg kc jk kd jo kj js kk jw kl ka km kn ko kp bi translated">方法的名称必须以单词“test”开头，否则Xcode不会检测到该方法。</li><li id="87c7" class="kh ki hi jf b jg kq jk kr jo ks js kt jw ku ka km kn ko kp bi translated">“被测系统”必须放在“测试”一词之后。</li><li id="6e70" class="kh ki hi jf b jg kq jk kr jo ks js kt jw ku ka km kn ko kp bi translated">下划线后的“条件或状态变化”。</li><li id="af68" class="kh ki hi jf b jg kq jk kr jo ks js kt jw ku ka km kn ko kp bi translated">另一个下划线后的“预期结果”。</li></ol><p id="3a73" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">该方法中有3行注释。这叫做<strong class="jf hj">AAA模式。</strong></p><p id="9048" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated"><strong class="jf hj">整理</strong>:又名“赐”。这是定义所有变量和模型的部分。</p><p id="ed3a" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated"><strong class="jf hj">行事</strong>:又称“当”。这是触发要测试的方法并返回结果的部分。</p><p id="fba4" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated"><strong class="jf hj">断言</strong>:又称“然后”。这是评估预期结果的部分。</p><p id="9e74" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">我们开始编写我们的测试方法，并得到了一个错误。我们出错的原因是我们没有指定名称的类。为此，我们现在将创建我们的验证器类。然后我们将跳转到<strong class="jf hj">行为</strong>部分，触发我们的<em class="mm">ispasswordvality()</em>方法。现在我们又出错了。</p><figure class="kw kx ky kz fd la er es paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="er es mn"><img src="../Images/087b1e6f676a24b01771181c227586f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-O78nWrzkz5bfxYgD0b9EA.png"/></div></div><figcaption class="lh li et er es lj lk bd b be z dx">Failing Test Method</figcaption></figure><p id="18c3" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">如你所见，我们遵循TDD循环步骤。因此，下一步是编写我们的<em class="mm">ispasswordvality()</em>方法。</p><figure class="kw kx ky kz fd la er es paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="er es mo"><img src="../Images/fc9bf7de6f9d402f91eaa72269220281.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ECxue3-FmTosctOCVWW0yg.png"/></div></div><figcaption class="lh li et er es lj lk bd b be z dx">Completed Test Method</figcaption></figure><p id="a2e5" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">在实现了<em class="mm">ispasswordavalid()</em>方法之后，错误消失了，我们实现了<strong class="jf hj">断言</strong>部分。有一个“xctassertttrue”<strong class="jf hj">断言</strong>。<strong class="jf hj"> </strong>但是等等，什么是断言？</p><h2 id="5e97" class="lx ig hi bd ih ly lz ma il mb mc md ip jo me mf it js mg mh ix jw mi mj jb mk bi translated">断言</h2><p id="4748" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">测试断言的主要作用是将某个结果与控制值进行比较，如果这两个值不匹配，则当前测试失败。所有的单元测试方法都使用<em class="mm">断言</em>来验证<strong class="jf hj">系统在测试</strong>下产生的结果，并向用户呈现一个测试方法结果。断言将决定测试方法是通过还是失败。如果你想深入了解“<strong class="jf hj">断言</strong>”，在文章的末尾我会分享两篇不同的文章链接。</p><h2 id="f99a" class="lx ig hi bd ih ly lz ma il mb mc md ip jo me mf it js mg mh ix jw mi mj jb mk bi translated">3-)绿色</h2><p id="0126" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">最后一步，我们运行我们编写的测试方法，我们看到我们的<em class="mm">ispasswordvality()</em>方法成功通过了测试。</p><figure class="kw kx ky kz fd la er es paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="er es mp"><img src="../Images/94dff6749da7f7d9d115c0c7279b76ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u2ZoAyycrldgRVbLAPQwrA.png"/></div></div><figcaption class="lh li et er es lj lk bd b be z dx">Passed Test Method</figcaption></figure><p id="e173" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">这意味着我们已经通过了测试驱动开发周期的第三步，绿色步骤。</p><h2 id="40a7" class="lx ig hi bd ih ly lz ma il mb mc md ip jo me mf it js mg mh ix jw mi mj jb mk bi translated">4-)重构</h2><p id="7d11" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">假设我们重构了我们的<em class="mm">ispasswordvality()</em>方法和测试方法。</p><h2 id="6ffe" class="lx ig hi bd ih ly lz ma il mb mc md ip jo me mf it js mg mh ix jw mi mj jb mk bi translated">5-)重复</h2><p id="266b" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">现在一切都很好，我们可以继续为新的特性需求或现有的特性编写单元测试方法。</p></div><div class="ab cl ll lm gp ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="hb hc hd he hf"><h1 id="b436" class="if ig hi bd ih ii ls ik il im lt io ip iq lu is it iu lv iw ix iy lw ja jb jc bi translated">利益</h1><ol class=""><li id="98f0" class="kh ki hi jf b jg jh jk jl jo mq js mr jw ms ka km kn ko kp bi translated">促进优化代码的创建。</li><li id="1a9d" class="kh ki hi jf b jg kq jk kr jo ks js kt jw ku ka km kn ko kp bi translated">帮助开发人员更好地分析和理解客户需求，并在它们没有被充分定义时请求澄清。</li><li id="8ea5" class="kh ki hi jf b jg kq jk kr jo ks js kt jw ku ka km kn ko kp bi translated">在开发的后期，新功能的添加和测试变得更加容易。</li><li id="773c" class="kh ki hi jf b jg kq jk kr jo ks js kt jw ku ka km kn ko kp bi translated">与传统的开发模型相比，TDD下的测试覆盖率要高得多。这是因为TDD从一开始就关注于为每个功能创建测试。</li><li id="6676" class="kh ki hi jf b jg kq jk kr jo ks js kt jw ku ka km kn ko kp bi translated">提高开发人员的生产力，并开发出灵活且易于维护的代码库</li></ol><h1 id="528c" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">限制</h1><ol class=""><li id="80f1" class="kh ki hi jf b jg jh jk jl jo mq js mr jw ms ka km kn ko kp bi translated"><strong class="jf hj">大时间投资。对于简单的情况，您会损失大约20%的实际实现，但是对于复杂的情况，您会损失更多。</strong></li><li id="008c" class="kh ki hi jf b jg kq jk kr jo ks js kt jw ku ka km kn ko kp bi translated"><strong class="jf hj">额外的复杂性。对于复杂的情况，你的测试用例更难计算，我建议在这种情况下尝试使用自动引用代码，它将在调试版本/测试运行中并行运行，而不是最简单情况的单元测试。</strong></li><li id="bc85" class="kh ki hi jf b jg kq jk kr jo ks js kt jw ku ka km kn ko kp bi translated"><strong class="jf hj">设计影响。</strong>有时设计在开始时并不清晰，随着你的进展而发展——这将迫使你重做测试，这将造成巨大的时间损失。在这种情况下，我建议推迟单元测试，直到你对设计有所了解。</li><li id="7e18" class="kh ki hi jf b jg kq jk kr jo ks js kt jw ku ka km kn ko kp bi translated"><strong class="jf hj">不断扭捏。对于数据结构和黑盒算法来说，单元测试是完美的，但是对于那些倾向于改变、调整或微调的算法来说，这会导致大量的时间投入，人们可能会说这是不合理的。所以当你认为它实际上适合系统时就使用它，不要强迫设计去适应TDD。</strong></li></ol></div><div class="ab cl ll lm gp ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="hb hc hd he hf"><h1 id="12ff" class="if ig hi bd ih ii ls ik il im lt io ip iq lu is it iu lv iw ix iy lw ja jb jc bi translated">结论</h1><p id="f632" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">遵循测试驱动开发允许我们使我们的代码更干净和更容易理解，以确保我们所有的逻辑都经过测试并正常工作。这是肯定的。正如我上面提到的，有利有弊。做样板工程多学习多应用肯定会有用的。你可以在下面找到相关链接，获得更详细的信息。</p><p id="59c3" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">我希望你现在对测试驱动开发有所了解。请不要忘记分享，这样其他人也可以受益。欢迎通过我的<a class="ae kb" href="http://bugrayenidunya@gmail.com" rel="noopener ugc nofollow" target="_blank"> <strong class="jf hj">邮箱</strong> </a> <strong class="jf hj"> </strong>或Linkedin与我联系。</p><p id="aa84" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">在<a class="ae kb" href="https://twitter.com/bugrayndny" rel="noopener ugc nofollow" target="_blank"> Twitter </a>、<a class="ae kb" href="https://github.com/Bugrayenidunya" rel="noopener ugc nofollow" target="_blank"> GitHub </a>和<a class="ae kb" href="https://www.linkedin.com/in/enes-bugra-yenidunya/" rel="noopener ugc nofollow" target="_blank"> Linkedin </a>上关注我。</p><div class="mt mu ez fb mv mw"><a href="https://www.linkedin.com/in/enes-bugra-yenidunya/" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab dw"><div class="my ab mz cl cj na"><h2 class="bd hj fi z dy nb ea eb nc ed ef hh bi translated">enes BURA yeni dünya-iOS开发者- Loodos | LinkedIn</h2><div class="nd l"><h3 class="bd b fi z dy nb ea eb nc ed ef dx translated">我从小就对电脑感兴趣。当他们问我将来想做什么时，我说我…</h3></div><div class="ne l"><p class="bd b fp z dy nb ea eb nc ed ef dx translated">www.linkedin.com</p></div></div><div class="nf l"><div class="ng l nh ni nj nf nk lf mw"/></div></div></a></div><h1 id="48e2" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">资源</h1><div class="mt mu ez fb mv mw"><a href="https://www.swiftbysundell.com/articles/test-assertions-in-swift/" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab dw"><div class="my ab mz cl cj na"><h2 class="bd hj fi z dy nb ea eb nc ed ef hh bi translated">Sundell在Swift | Swift中测试断言</h2><div class="nd l"><h3 class="bd b fi z dy nb ea eb nc ed ef dx translated">大多数使用苹果内置XCTest框架编写的单元测试往往遵循由三个步骤组成的模式:首先…</h3></div><div class="ne l"><p class="bd b fp z dy nb ea eb nc ed ef dx translated">www.swiftbysundell.com</p></div></div><div class="nf l"><div class="nl l nh ni nj nf nk lf mw"/></div></div></a></div><div class="mt mu ez fb mv mw"><a href="https://www.appsdeveloperblog.com/a-list-of-xctest-assertions/" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab dw"><div class="my ab mz cl cj na"><h2 class="bd hj fi z dy nb ea eb nc ed ef hh bi translated">XCTest断言列表——应用开发者博客</h2><div class="nd l"><h3 class="bd b fi z dy nb ea eb nc ed ef dx translated">所有的单元测试方法都使用断言来验证被测试系统产生的结果，并向用户展示…</h3></div><div class="ne l"><p class="bd b fp z dy nb ea eb nc ed ef dx translated">www.appsdeveloperblog.com</p></div></div><div class="nf l"><div class="nm l nh ni nj nf nk lf mw"/></div></div></a></div><div class="mt mu ez fb mv mw"><a href="https://www.browserstack.com/guide/what-is-test-driven-development" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab dw"><div class="my ab mz cl cj na"><h2 class="bd hj fi z dy nb ea eb nc ed ef hh bi translated">测试驱动开发(TDD):方法和好处|浏览器堆栈</h2><div class="nd l"><h3 class="bd b fi z dy nb ea eb nc ed ef dx translated">敏捷开发的发展已经引入了许多实用的实践来交付高质量的软件。</h3></div><div class="ne l"><p class="bd b fp z dy nb ea eb nc ed ef dx translated">www.browserstack.com</p></div></div><div class="nf l"><div class="nn l nh ni nj nf nk lf mw"/></div></div></a></div><div class="mt mu ez fb mv mw"><a href="https://stackoverflow.com/questions/64333/disadvantages-of-test-driven-development" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab dw"><div class="my ab mz cl cj na"><h2 class="bd hj fi z dy nb ea eb nc ed ef hh bi translated">测试驱动开发的缺点？</h2><div class="nd l"><h3 class="bd b fi z dy nb ea eb nc ed ef dx translated">按照目前的提问方式，这个问题不太适合我们的问答形式。我们期待答案得到…的支持</h3></div><div class="ne l"><p class="bd b fp z dy nb ea eb nc ed ef dx translated">stackoverflow.com</p></div></div><div class="nf l"><div class="no l nh ni nj nf nk lf mw"/></div></div></a></div><div class="mt mu ez fb mv mw"><a href="https://developer.ibm.com/devpractices/software-development/articles/5-steps-of-test-driven-development/" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab dw"><div class="my ab mz cl cj na"><h2 class="bd hj fi z dy nb ea eb nc ed ef hh bi translated">测试驱动开发的5个步骤</h2><div class="nd l"><h3 class="bd b fi z dy nb ea eb nc ed ef dx translated">测试驱动开发的这5个基本步骤将帮助你创建更好的、更容错的代码。</h3></div><div class="ne l"><p class="bd b fp z dy nb ea eb nc ed ef dx translated">developer.ibm.com</p></div></div><div class="nf l"><div class="np l nh ni nj nf nk lf mw"/></div></div></a></div></div></div>    
</body>
</html>