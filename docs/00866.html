<html>
<head>
<title>Deploying Flutter Web App to Firebase With a Custom Domain</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用自定义域将Flutter Web应用程序部署到Firebase</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/deploying-flutter-web-app-to-firebase-with-a-custom-domain-cb1da7337cf1?source=collection_archive---------4-----------------------#2021-03-16">https://medium.com/geekculture/deploying-flutter-web-app-to-firebase-with-a-custom-domain-cb1da7337cf1?source=collection_archive---------4-----------------------#2021-03-16</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="2807" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在Flutter 2.0中，稳定频道支持Web应用程序。在这篇文章中，我们将看看如何部署一个web应用程序到Firebase静态托管，并为它添加一个自定义域。</p><p id="3fa4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将部署一个现有的<a class="ae jd" href="https://github.com/bigpanther/shipanthe" rel="noopener ugc nofollow" target="_blank">应用程序</a>到firebase主机。如果您已经使用<code class="du je jf jg jh b">flutter create</code>初始化了web，请不要忘记在继续部署之前更新<code class="du je jf jg jh b">web/icons</code>文件夹下的favicon和应用程序图标。本指南不包括如何<a class="ae jd" href="https://flutter.dev/docs/get-started/web" rel="noopener ugc nofollow" target="_blank">创建一个flutter web应用</a>。这些说明适用于*nix系统。在windows系统上，这应该是一个非常相似的设置。</p></div><div class="ab cl ji jj gp jk" role="separator"><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn"/></div><div class="hb hc hd he hf"><h1 id="5e81" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">引导程序</h1><p id="490d" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">第一步是创建一个<a class="ae jd" href="https://console.firebase.google.com/" rel="noopener ugc nofollow" target="_blank"> firebase账户</a>，如果你还没有的话。只有在帐户是，你可以开始配置颤振项目。接下来，安装firebase CLI。</p><pre class="ks kt ku kv fd kw jh kx ky aw kz bi"><span id="b2c0" class="la jq hi jh b fi lb lc l ld le">$ npm install -g firebase-tools</span></pre></div><div class="ab cl ji jj gp jk" role="separator"><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn"/></div><div class="hb hc hd he hf"><h1 id="d458" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">Firebase设置</h1><p id="0cbb" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">安装firebase CLI后，使用下面的命令登录。</p><pre class="ks kt ku kv fd kw jh kx ky aw kz bi"><span id="4d9d" class="la jq hi jh b fi lb lc l ld le">$ firebase login</span></pre><p id="95cd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这将打开浏览器，让您登录到您的谷歌帐户。登录成功后，您应该会在终端上看到一条消息:</p><blockquote class="lf lg lh"><p id="1b93" class="if ig li ih b ii ij ik il im in io ip lj ir is it lk iv iw ix ll iz ja jb jc hb bi translated">✔成功了！以youremail@domain.com的身份登录</p></blockquote><p id="83d9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，通过在flutter项目的根目录下运行以下命令来初始化firebase托管。</p><pre class="ks kt ku kv fd kw jh kx ky aw kz bi"><span id="ca90" class="la jq hi jh b fi lb lc l ld le">$ firebase init hosting</span></pre><p id="e829" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您想要使用现有项目，系统会提示您创建新项目或选择现有项目。</p><p id="fd93" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，将提示您选择想要部署的web应用程序的公共目录。flutter web应用程序的默认版本是<code class="du je jf jg jh b">build/web</code>。</p><p id="ff46" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是交互的样子:</p><pre class="ks kt ku kv fd kw jh kx ky aw kz bi"><span id="c79b" class="la jq hi jh b fi lb lc l ld le">? Please select an option: Use an existing project<br/>? Select a default Firebase project for this directory: shiped-7b848 (shipantherproject)<br/>i  Using project shiped-7b848 (shipantherproject)? What do you want to use as your public directory? build/web<br/>? Configure as a single-page app (rewrite all urls to /index.html)? Yes</span></pre><blockquote class="lf lg lh"><p id="202a" class="if ig li ih b ii ij ik il im in io ip lj ir is it lk iv iw ix ll iz ja jb jc hb bi translated">如果您在指向Github remote的git存储库中运行此程序，firebase CLI还会提示您配置Github动作以进行自动部署。如果你愿意，可以跳过这一步。</p></blockquote></div><div class="ab cl ji jj gp jk" role="separator"><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn"/></div><div class="hb hc hd he hf"><h1 id="7a1a" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">部署web应用程序</h1><p id="3caa" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">现在，您已经准备好构建和部署web应用程序了。</p><pre class="ks kt ku kv fd kw jh kx ky aw kz bi"><span id="7f51" class="la jq hi jh b fi lb lc l ld le">$ flutter build web<br/>Compiling lib/main.dart for the Web...                             24.9s</span></pre><p id="22f9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">构建完成后，让我们将应用程序发布到firebase hosting。</p><pre class="ks kt ku kv fd kw jh kx ky aw kz bi"><span id="4409" class="la jq hi jh b fi lb lc l ld le">$ firebase deploy --only hosting</span><span id="09f5" class="la jq hi jh b fi lm lc l ld le">=== Deploying to 'shiped-7b848'...</span><span id="e507" class="la jq hi jh b fi lm lc l ld le">i  deploying hosting<br/>i  hosting[shiped-7b848]: beginning deploy...<br/>i  hosting[shiped-7b848]: found 30 files in build/web<br/>✔  hosting[shiped-7b848]: file upload complete<br/>i  hosting[shiped-7b848]: finalizing version...<br/>✔  hosting[shiped-7b848]: version finalized<br/>i  hosting[shiped-7b848]: releasing new version...<br/>✔  hosting[shiped-7b848]: release complete</span><span id="6bdf" class="la jq hi jh b fi lm lc l ld le">✔  Deploy complete!</span><span id="0b76" class="la jq hi jh b fi lm lc l ld le">Project Console: https://console.firebase.google.com/project/shiped-hash/overview<br/>Hosting URL: https://shiped-7b848.web.app</span></pre><p id="b091" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您现在可以在浏览器中导航到<code class="du je jf jg jh b">Hosting URL</code></p><figure class="ks kt ku kv fd lo er es paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="er es ln"><img src="../Images/e0b19d7a04ce27c9524d9be9643433e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BaRQJ478wEM-w8Z7WBy-iQ.png"/></div></div><figcaption class="lv lw et er es lx ly bd b be z dx">Flutter web app deployed to firebase hosting</figcaption></figure><h1 id="0a77" class="jp jq hi bd jr js lz ju jv jw ma jy jz ka mb kc kd ke mc kg kh ki md kk kl km bi translated">向应用程序添加自定义域</h1><p id="12e9" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">现在我们已经将应用程序部署到firebase，我们将继续为web应用程序设置一个自定义域。如果这不适用于您的情况，您可以跳过。</p><blockquote class="lf lg lh"><p id="e065" class="if ig li ih b ii ij ik il im in io ip lj ir is it lk iv iw ix ll iz ja jb jc hb bi translated">绑定自定义域包括告诉firebase关于域的信息，证明域的所有权，然后等待SSL证书的颁发。</p></blockquote><p id="17cb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们首先告诉firebase您希望在哪个域上托管web应用程序。导航到项目的<a class="ae jd" href="https://console.firebase.google.com/" rel="noopener ugc nofollow" target="_blank"> Firebase控制台</a>上的主机侧面板。选择“添加自定义域”</p><figure class="ks kt ku kv fd lo er es paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="er es me"><img src="../Images/aae7a9480b1b1ed06775b0d97e472c77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lXSnxvA5_NoNrb2v37u0Ag.png"/></div></div><figcaption class="lv lw et er es lx ly bd b be z dx">Click Add custom domain on the Hosting panel in Firebase Console</figcaption></figure><p id="d905" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">添加您想要指向web应用程序的域名</p><figure class="ks kt ku kv fd lo er es paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="er es mf"><img src="../Images/483a2803ca25738508954be5b820f284.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pAAXeOhqzyZEW_9zN03MeQ.png"/></div></div><figcaption class="lv lw et er es lx ly bd b be z dx">Add the domain name</figcaption></figure><p id="fcbd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">点击<code class="du je jf jg jh b">Continue</code>并按照说明为该域设置DNS。在此步骤中，将两条A记录添加到DNS中。通常，不同的域名注册商对域名系统的管理是不同的(例如:Go daddy、Google Domains、AWS Route 53等。).您需要遵循特定于您的域注册商的说明。</p><figure class="ks kt ku kv fd lo er es paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="er es mg"><img src="../Images/fe6e86a64805aa9d874e154b408b9269.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BL_OiLlceo-PY__rNwafkA.png"/></div></div><figcaption class="lv lw et er es lx ly bd b be z dx">Add the DNS records mentioned here to the DNS settings of your domain</figcaption></figure><p id="369e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">添加记录后，您可以通过运行dig命令来验证它们</p><pre class="ks kt ku kv fd kw jh kx ky aw kz bi"><span id="697b" class="la jq hi jh b fi lb lc l ld le">$ dig shipanther-test.bigpanther.ca A</span><span id="e4d5" class="la jq hi jh b fi lm lc l ld le">; &lt;&lt;&gt;&gt; DiG 9.10.6 &lt;&lt;&gt;&gt; shipanther-test.bigpanther.ca A<br/>;; global options: +cmd<br/>;; Got answer:<br/>;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 54464<br/>;; flags: qr rd ra; QUERY: 1, ANSWER: 2, AUTHORITY: 0, ADDITIONAL: 1</span><span id="6150" class="la jq hi jh b fi lm lc l ld le">;; OPT PSEUDOSECTION:<br/>; EDNS: version: 0, flags:; udp: 512<br/>;; QUESTION SECTION:<br/>;shipanther-test.bigpanther.ca. IN      A</span><span id="22db" class="la jq hi jh b fi lm lc l ld le">;; ANSWER SECTION:<br/>shipanther-test.bigpanther.ca. 3600 IN  A       151.101.65.195<br/>shipanther-test.bigpanther.ca. 3600 IN  A       151.101.1.195</span><span id="0d43" class="la jq hi jh b fi lm lc l ld le">;; Query time: 59 msec<br/>;; SERVER: 192.168.67.67#53(192.168.67.67)<br/>;; WHEN: Mon Mar 15 19:23:54 PDT 2021<br/>;; MSG SIZE  rcvd: 90</span></pre><p id="e804" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此时，firebase将能够验证您的域的所有权，您可以导航到<a class="ae jd" href="https://shipanther-test.bigpanther.ca/" rel="noopener ugc nofollow" target="_blank">https://ship other-test . big panther . ca</a>(这应该是您的自定义域)来查看结果。请注意，传播DNS更改和Firebase为域颁发有效的SSL证书可能需要24小时。</p><figure class="ks kt ku kv fd lo er es paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="er es mh"><img src="../Images/78366d454911e17f10dd5f2dc56d925b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v--PpMrX2BJ65dhnZnLfFw.png"/></div></div><figcaption class="lv lw et er es lx ly bd b be z dx">Check that the domain validation has succeeded. Until it is done, SSL certificate would not be issued and the browser would show an error like NET::ERR_CERT_COMMON_NAME_INVALID. Check back in some time to allow DNS propagation to finish.</figcaption></figure><h1 id="d245" class="jp jq hi bd jr js lz ju jv jw ma jy jz ka mb kc kd ke mc kg kh ki md kk kl km bi translated">结论</h1><p id="5314" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">使用Firebase托管和Flutter web是一个很好的组合。只需几个步骤，您就可以从为现有的跨平台移动应用程序添加web支持，到轻松部署它，在客户选择的平台上为他们提供出色的体验。请在下面的评论中让我知道你是如何使用Flutter以新的方式接触你的客户的。开心飘飘！</p></div><div class="ab cl ji jj gp jk" role="separator"><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn"/></div><div class="hb hc hd he hf"><p id="2779" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您感兴趣，可以在这里找到firebase CLI对git项目所做更改的源代码。也欢迎你为Shipanther的发展做出贡献。在<a class="ae jd" href="https://github.com/bigpanther/shipanther/issues" rel="noopener ugc nofollow" target="_blank"> Github </a>上与团队合作，不要犹豫。</p></div></div>    
</body>
</html>