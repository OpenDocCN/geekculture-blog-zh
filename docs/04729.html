<html>
<head>
<title>OAuth2 Grant Types For Dummies</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">虚拟对象的OAuth2授权类型</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/oauth2-grant-types-for-dummies-bf911b2ff275?source=collection_archive---------23-----------------------#2021-07-02">https://medium.com/geekculture/oauth2-grant-types-for-dummies-bf911b2ff275?source=collection_archive---------23-----------------------#2021-07-02</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/b5410606cca59be3d5995d5b67ab5ae4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*N8NVai6tKw_0rGiw"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Photo by <a class="ae iu" href="https://unsplash.com/@brazofuerte?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Collin Armstrong</a> on <a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="d9b6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们都知道现实世界并不那么简单，我们在每个角落都不断面临新的挑战。</p><p id="2077" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">用户期待一个互联的世界，他们可以在多个应用程序之间安全地共享数据，例如，在他们刚刚安装的每个应用程序上，使用他们的脸书帐户作为首选身份验证方法。</p><p id="85eb" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">从安全角度来看，这种期望带来了独特的挑战，比如不强迫用户共享凭据，以及让这种方法具有灵活性。</p><p id="d690" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在今天的文章中，我们将看到你应该根据具体情况使用哪种授权类型。</p><h2 id="7c2c" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated"><strong class="ak">索引</strong></h2><ul class=""><li id="df56" class="ko kp hi ix b iy kq jc kr jg ks jk kt jo ku js kv kw kx ky bi translated">密码</li><li id="4f75" class="ko kp hi ix b iy kz jc la jg lb jk lc jo ld js kv kw kx ky bi translated">客户端凭据</li><li id="0e88" class="ko kp hi ix b iy kz jc la jg lb jk lc jo ld js kv kw kx ky bi translated">授权代码</li><li id="858b" class="ko kp hi ix b iy kz jc la jg lb jk lc jo ld js kv kw kx ky bi translated">含蓄的</li></ul></div><div class="ab cl le lf gp lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="hb hc hd he hf"><h1 id="44f4" class="ll ju hi bd jv lm ln lo jz lp lq lr kd ls lt lu kg lv lw lx kj ly lz ma km mb bi translated">#密码</h1><figure class="md me mf mg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mc"><img src="../Images/338036dc6c84903b4fd95833509b8b73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*P8EThymO32dzSzG3"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Photo by <a class="ae iu" href="https://unsplash.com/@mr_fresh?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Yura Fresh</a> on <a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="a8bd" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> <em class="mh">密码</em> </strong>格兰特式大概是最广为人知最直白的了。</p><p id="9d1f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">当应用程序和服务在同一组织下管理并且共享相同的策略和过程时，使用他的授权类型。</p><figure class="md me mf mg fd ij er es paragraph-image"><div class="er es mi"><img src="../Images/4c066aa35e2c7e75d2f5e72b0253247e.png" data-original-src="https://miro.medium.com/v2/resize:fit:892/format:webp/1*C-RlvePcVyoT4JFpPlS3zg.jpeg"/></div><figcaption class="iq ir et er es is it bd b be z dx">Password Grant Type</figcaption></figure><ol class=""><li id="28a4" class="ko kp hi ix b iy iz jc jd jg mj jk mk jo ml js mm kw kx ky bi translated">在用户可以访问应用程序和受保护的资源之前，他需要被OAuth2服务识别。</li></ol><p id="184a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">所有者需要用唯一的服务名注册环境中的所有应用程序。OAuth随后将提供一个双方共享的密钥。</p><p id="9cf4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">2.用户使用他们的登录凭证登录到应用程序A。</p><p id="0994" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">3.这些凭证与所有者注册的应用程序名称和密钥一起提供。OAuth服务对应用程序进行身份验证，然后提供一个令牌用于在环境中进行通信。</p><p id="6bfe" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">4.每次代表用户调用新服务时，都会通过OAuth服务验证给定的令牌。</p><p id="6bca" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">5.如果令牌验证成功，服务将访问所有请求的资源。</p></div><div class="ab cl le lf gp lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="hb hc hd he hf"><h1 id="e531" class="ll ju hi bd jv lm ln lo jz lp lq lr kd ls lt lu kg lv lw lx kj ly lz ma km mb bi translated">#客户端凭据</h1><figure class="md me mf mg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mn"><img src="../Images/39d0371db224d03674cc7974393fda3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*MPx4BYTZrC5uK6Hu"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Photo by <a class="ae iu" href="https://unsplash.com/@santesson89?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Andrea De Santis</a> on <a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="8ab6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> <em class="mh">客户端凭证</em> </strong>授权通常在应用程序需要访问OAuth保护的资源时使用。</p><p id="efde" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这种授权类型与前一种类似。主要的区别是没有人参与到流程中。</p><p id="249c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">应用程序只能通过提供的唯一服务名和密钥进行身份验证。</p><p id="c91f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">当两个申请属于同一组织时，也使用此授权类型。</p><p id="526c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">一个常见的用例可能是调度程序的使用。例如，每30分钟收集一次统计数据的过程。</p><figure class="md me mf mg fd ij er es paragraph-image"><div class="er es mo"><img src="../Images/97f3415c2b37ef8c5545c1056387c649.png" data-original-src="https://miro.medium.com/v2/resize:fit:750/format:webp/1*xg49YMCzbAGpG7iQM6_rbA.jpeg"/></div><figcaption class="iq ir et er es is it bd b be z dx">Client Credentials Flow</figcaption></figure><ol class=""><li id="f905" class="ko kp hi ix b iy iz jc jd jg mj jk mk jo ml js mm kw kx ky bi translated">所有者注册应用程序，给它一个惟一的服务名。生成密钥并发送给所有者；</li><li id="e3b0" class="ko kp hi ix b iy kz jc la jg lb jk lc jo ld js mm kw kx ky bi translated">每当调度程序运行时，它将把它的应用程序名作为所有者提供的密钥；</li><li id="f136" class="ko kp hi ix b iy kz jc la jg lb jk lc jo ld js mm kw kx ky bi translated">OAuth服务将对应用程序A进行身份验证，并返回一个访问令牌。每当调度程序需要再次调用资源时，服务只需要出示给定的令牌(一定期限内有效)；</li></ol></div><div class="ab cl le lf gp lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="hb hc hd he hf"><h1 id="70da" class="ll ju hi bd jv lm ln lo jz lp lq lr kd ls lt lu kg lv lw lx kj ly lz ma km mb bi translated">#授权</h1><figure class="md me mf mg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mp"><img src="../Images/45c19b86a92c31784ab51c508d0d6582.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tkoDmxVPm_xKmGXJ"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Photo by <a class="ae iu" href="https://unsplash.com/@cedrikwesche?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Cedrik Wesche</a> on <a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="6566" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> <em class="mh">授权</em> </strong>授权类型被认为是四种授权类型中最复杂的。但是，它也是使用最多的，因为它允许来自不同供应商的不同应用程序共享数据，而无需在多个应用程序之间暴露用户的凭据。</p><p id="67b4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">与最后两种授权类型不同，这一次，OAuth访问令牌不会立即被应用程序访问，而是被用作“预访问”授权代码。</p><figure class="md me mf mg fd ij er es paragraph-image"><div class="er es mq"><img src="../Images/355cf712e3e6ca6fba32866194580eb2.png" data-original-src="https://miro.medium.com/v2/resize:fit:984/format:webp/1*BoSJoeIeF-2YHfbCyT1vkg.jpeg"/></div><figcaption class="iq ir et er es is it bd b be z dx">Authorization grant type flow</figcaption></figure><ol class=""><li id="de9d" class="ko kp hi ix b iy iz jc jd jg mj jk mk jo ml js mm kw kx ky bi translated">拥有者注册应用程序，给出一个唯一的服务名。检索密钥。通过注册“<strong class="ix hj"> <em class="mh">认证应用</em> </strong>”，管理员将需要指定一个回调URL，该URL将在用户通过认证后被调用；</li><li id="51bd" class="ko kp hi ix b iy kz jc la jg lb jk lc jo ld js mm kw kx ky bi translated">用户点击<strong class="ix hj"> <em class="mh">应用内的登录页面</em></strong>；</li><li id="874b" class="ko kp hi ix b iy kz jc la jg lb jk lc jo ld js mm kw kx ky bi translated">每当用户试图通过<strong class="ix hj"> <em class="mh">应用程序A </em> </strong>进行身份验证时，他将被重定向到<strong class="ix hj"> <em class="mh">身份验证应用程序</em> </strong>，然后他将根据正在使用的应用程序(脸书、Linkedin等)插入其凭据。);</li><li id="369d" class="ko kp hi ix b iy kz jc la jg lb jk lc jo ld js mm kw kx ky bi translated">如果提供的凭证有效，将生成一个授权码，并将用户重定向回<strong class="ix hj"> <em class="mh">应用A</em></strong>；</li></ol><blockquote class="mr ms mt"><p id="f48f" class="iv iw mh ix b iy iz ja jb jc jd je jf mu jh ji jj mv jl jm jn mw jp jq jr js hb bi translated">注意:授权码不是授权令牌</p></blockquote><p id="57f9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">5.一旦<strong class="ix hj">应用程序A </strong>保存了代码，并且同一用户发出了新的资源请求，<strong class="ix hj">应用程序A </strong>将使用生成的密钥和生成的代码检查OAuth服务。如果一切顺利，令牌将最终生成并被检索；</p><p id="155b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">6.每当需要访问一个新的受保护资源时，将向OAuth服务发出一个新的请求，在请求的头上显示生成的令牌；</p><p id="3d06" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果我们注意一下，没有用户数据被直接暴露给<strong class="ix hj"> <em class="mh">应用A </em> </strong>。</p></div><div class="ab cl le lf gp lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="hb hc hd he hf"><h1 id="3972" class="ll ju hi bd jv lm ln lo jz lp lq lr kd ls lt lu kg lv lw lx kj ly lz ma km mb bi translated">#隐式</h1><figure class="md me mf mg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mx"><img src="../Images/e51706fc2ed6fbf32a4a331cd4567cff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8buOVPE30mWpTGZq"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Photo by <a class="ae iu" href="https://unsplash.com/@pluyar?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Shane Aldendorff</a> on <a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="cadb" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">众所周知，<strong class="ix hj"> <em class="mh">隐式</em> </strong>授权类型允许不依赖于服务器端调用的基于web浏览器的应用程序调用第三方服务。</p><p id="601c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">使用隐式授权，我们通常使用纯JavaScript应用程序。所有的服务交互都直接发生在用户的客户端。</p><figure class="md me mf mg fd ij er es paragraph-image"><div class="er es mi"><img src="../Images/912531ddb91d027aef0169b7ac109828.png" data-original-src="https://miro.medium.com/v2/resize:fit:892/format:webp/1*KdI86Hwrnl4dvPHriYXYkQ.jpeg"/></div><figcaption class="iq ir et er es is it bd b be z dx">Implicit Grant Type</figcaption></figure><ol class=""><li id="974c" class="ko kp hi ix b iy iz jc jd jg mj jk mk jo ml js mm kw kx ky bi translated">JavaScript应用程序所有者在OAuth服务中注册应用程序。他必须给出一个唯一的服务名作为将要使用的回调URL</li><li id="303f" class="ko kp hi ix b iy kz jc la jg lb jk lc jo ld js mm kw kx ky bi translated">每当用户试图进行身份验证时，应用程序A将使用预先注册的应用程序名调用OAuth服务，在那里他将被强制进行身份验证；</li><li id="b632" class="ko kp hi ix b iy kz jc la jg lb jk lc jo ld js mm kw kx ky bi translated">如果用户成功通过身份验证，将使用相应的令牌作为查询参数重定向用户；应用程序运行JS脚本，解析给定的访问令牌并存储它；</li><li id="c17c" class="ko kp hi ix b iy kz jc la jg lb jk lc jo ld js mm kw kx ky bi translated">每当一个受保护的资源被请求时，OAuth访问令牌被提供给调用服务；它验证并检查用户是否被授权访问所请求的资源；</li></ol><p id="235c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">已知<strong class="ix hj"> <em class="mh">隐式</em> </strong>授权类型是OAuth访问令牌直接暴露给公共客户端(web浏览器)的唯一类型。</p><p id="d870" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这种授权类型更容易受到攻击和滥用，这就是为什么我们主要建议令牌是短期的(1-2小时)。</p></div><div class="ab cl le lf gp lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="hb hc hd he hf"><h1 id="4cab" class="ll ju hi bd jv lm ln lo jz lp lq lr kd ls lt lu kg lv lw lx kj ly lz ma km mb bi translated">#结论</h1><p id="f7ca" class="pw-post-body-paragraph iv iw hi ix b iy kq ja jb jc kr je jf jg my ji jj jk mz jm jn jo na jq jr js hb bi translated">如您所见，OAuth授权类型并没有那么难，一旦知道了，您就不可能忘记它们。</p><p id="c5b4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">请随意留下任何反馈，看看以前的一些文章。</p><p id="2e0e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">敬请期待！</p><div class="nb nc ez fb nd ne"><a href="https://rafael-as-martins.medium.com/4-books-that-will-change-your-2021-ae47bdc7d016" rel="noopener follow" target="_blank"><div class="nf ab dw"><div class="ng ab nh cl cj ni"><h2 class="bd hj fi z dy nj ea eb nk ed ef hh bi translated">将改变你2021年的4本书</h2><div class="nl l"><h3 class="bd b fi z dy nj ea eb nk ed ef dx translated">“一个读者在死前经历了一千次生命,”Jojen说。从不读书的人只能活一次。</h3></div><div class="nm l"><p class="bd b fp z dy nj ea eb nk ed ef dx translated">rafael-as-martins.medium.com</p></div></div><div class="nn l"><div class="no l np nq nr nn ns io ne"/></div></div></a></div><div class="nb nc ez fb nd ne"><a rel="noopener follow" target="_blank" href="/geekculture/how-to-kafka-your-microservices-9ef45a9e882a"><div class="nf ab dw"><div class="ng ab nh cl cj ni"><h2 class="bd hj fi z dy nj ea eb nk ed ef hh bi translated">如何Kafka你的微服务</h2><div class="nl l"><h3 class="bd b fi z dy nj ea eb nk ed ef dx translated">应用程序工作流最吸引人和最具挑战性的主题之一是消息/事件驱动的…</h3></div><div class="nm l"><p class="bd b fp z dy nj ea eb nk ed ef dx translated">medium.com</p></div></div><div class="nn l"><div class="nt l np nq nr nn ns io ne"/></div></div></a></div><div class="nb nc ez fb nd ne"><a rel="noopener follow" target="_blank" href="/geekculture/webhooks-from-zero-to-hero-7ab6d81babce"><div class="nf ab dw"><div class="ng ab nh cl cj ni"><h2 class="bd hj fi z dy nj ea eb nk ed ef hh bi translated">Webhooks:从零到英雄</h2><div class="nl l"><h3 class="bd b fi z dy nj ea eb nk ed ef dx translated">你在一家餐馆里等着你的外卖，而点餐屏幕损坏了。你被要求采取…</h3></div><div class="nm l"><p class="bd b fp z dy nj ea eb nk ed ef dx translated">medium.com</p></div></div><div class="nn l"><div class="nu l np nq nr nn ns io ne"/></div></div></a></div></div></div>    
</body>
</html>