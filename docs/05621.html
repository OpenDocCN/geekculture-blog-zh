<html>
<head>
<title>Rock Band Night: The Rails Train Kept A Rollin’</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">摇滚乐队之夜:火车不停地滚动</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/rock-band-night-the-rails-train-kept-a-rollin-88f5f2714cf8?source=collection_archive---------35-----------------------#2021-07-26">https://medium.com/geekculture/rock-band-night-the-rails-train-kept-a-rollin-88f5f2714cf8?source=collection_archive---------35-----------------------#2021-07-26</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="5418" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">我很不高兴我用这个作为标题。</h2></div><p id="7603" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">进入Flatiron School的软件工程训练营的第三阶段，我已经根据我在第二阶段项目中不能完成的事情，规划出了我想要完成的事情。我采取了一种新的方法:不是等待两周的项目阶段正式开始，以开始应用程序的构建，而是在课程过程中构建它，以消除所有无聊的框架，并在我们学习它们时加入Kool的东西。作为一个不必要的痴迷的人，我认为我已经完全掌握了旧的概念，特别是关于从API中植入数据。</p><p id="87aa" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">嗯…</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div class="er es jt"><img src="../Images/abb04334963ad164f54b73c50db370ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:814/1*zzUSbo9T4JPqr9z1oXNu6g.gif"/></div></figure><h1 id="c9bb" class="kb kc hi bd kd ke kf kg kh ki kj kk kl io km ip kn ir ko is kp iu kq iv kr ks bi translated">你爱谁？</h1><p id="9d85" class="pw-post-body-paragraph ix iy hi iz b ja kt ij jc jd ku im jf jg kv ji jj jk kw jm jn jo kx jq jr js hb bi translated">对于这个项目，我想改进游戏系列摇滚乐队已经存在的网络应用程序。自2007年摇滚乐队发行以来，通过2015年摇滚乐队4的发行，以及更远的时间，已经有超过3000首歌曲可供使用，可以用塑料吉他、塑料鼓和你真实、美丽的声音(取决于你喝了多少酒。)自摇滚乐队首次发行以来，歌曲一直作为可购买的可下载内容每周发布，它们可以有广泛的艺术家和流派，从贾斯汀比伯到金属乐队。</p><p id="1bb2" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">自然，休闲和硬核玩家多年来已经积累了数百首歌曲，如果不是数千首的话。然而，在游戏中选择歌曲的过程没有改变:向下滚动歌曲列表并选择一首。可以想象，根据收藏的歌曲数量或负责选择的人的音乐倾向，这可能需要的时间会急剧增加。</p><p id="a37e" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">卡拉ok酒吧在任何时候都有数千首歌曲可供选择，他们通过以书籍的形式提供他们的收藏(或者通过Healsonic应用程序，为未来主义、环保的歌曲)来完善这一选择过程。)如果这是为摇滚乐队而存在的呢？</p><p id="7ca9" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">事实证明，确实如此。已经进行了几次尝试来简化这一过程。甚至有一个官方的iOS/Android应用程序可以直接从你的微软/索尼系统的歌曲缓存文件中提取你的收藏，尽管它维护得很差，很容易中断。我觉得我可以做得更好。</p><h1 id="1b48" class="kb kc hi bd kd ke kf kg kh ki kj kk kl io km ip kn ir ko is kp iu kq iv kr ks bi translated">青少年焦虑(世界现在需要什么)，更像是我现在需要什么</h1><p id="edbb" class="pw-post-body-paragraph ix iy hi iz b ja kt ij jc jd ku im jf jg kv ji jj jk kw jm jn jo kx jq jr js hb bi translated">当我着手这个项目时，我心中有几个目标:</p><ul class=""><li id="3d19" class="ky kz hi iz b ja jb jd je jg la jk lb jo lc js ld le lf lg bi translated">提供摇滚乐队所有可用歌曲的列表</li><li id="35e1" class="ky kz hi iz b ja lh jd li jg lj jk lk jo ll js ld le lf lg bi translated">允许用户添加歌曲到他们的收藏中，忠实于他们的购买历史</li><li id="ed39" class="ky kz hi iz b ja lh jd li jg lj jk lk jo ll js ld le lf lg bi translated">(好吧，我还没有破坏其他功能。)</li></ul><p id="be4d" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们来看看这篇文章中的《天堂里的芝士汉堡》:我需要可以找到的歌曲。我需要从现有的数据库中提取这些信息，而不是手动输入。RBDB是一个极好的初始资源。它甚至被游戏开发商Harmonix选中，为他们的<a class="ae lm" href="http://rbdb.online" rel="noopener ugc nofollow" target="_blank">官方歌曲数据库</a>服务。然而，随着许多fan项目走向，它不再被维持(截至2020年9月17日。)，也许是出于缺乏官方支持，无聊，或者是报复。虽然我能够从<a class="ae lm" href="http://www.dlcquickplay.com" rel="noopener ugc nofollow" target="_blank"> DLC Quickplay </a>上获得此后可用的歌曲列表，但它只提供了歌曲的名称及其艺术家。我仍然需要提供以下功能:</p><ul class=""><li id="ad13" class="ky kz hi iz b ja jb jd je jg la jk lb jo lc js ld le lf lg bi translated">能够预览歌曲，在这种情况下通过Spotify播放器小工具。</li><li id="d32f" class="ky kz hi iz b ja lh jd li jg lj jk lk jo ll js ld le lf lg bi translated">即使用户的收藏中没有这首歌，我也想提供通过摇滚乐队之夜直接从用户的游戏平台或选择(Xbox或Playstation)购买这首歌的能力。这意味着在每个平台各自的市场上获得购买歌曲的链接。</li></ul><p id="46d6" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">RBDB是提供这两者的绝佳资源，但只是在得到支持的情况下。这意味着92首歌曲(截至2021年7月25日)除了艺术家、流派、发行年份、可用性、演唱部分数量和乐队组件(吉他、鼓、人声)的游戏难度等基本属性外，没有必要的信息。)不能让那个混球在派对上挑选一些荒谬的、毫无必要的高难度死亡金属歌曲，对吧？</p><h1 id="6aeb" class="kb kc hi bd kd ke kf kg kh ki kj kk kl io km ip kn ir ko is kp iu kq iv kr ks bi translated">拿着钱跑吧</h1><p id="86e9" class="pw-post-body-paragraph ix iy hi iz b ja kt ij jc jd ku im jf jg kv ji jj jk kw jm jn jo kx jq jr js hb bi translated">我不想手动完成这项工作，而是想为优秀的歌曲自动完成这一过程，并能够为未来的添加做准备。为了直接从Spotify的API以及微软和索尼的游戏内容市场获取信息，我回到了我信任的Mechanize gem。</p><p id="66c2" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">第一步是在每首歌曲的视图页面中启用Spotify预览。RBDB为它跟踪的每首歌曲提供了Spotify ID，所以这个调用就像</p><pre class="ju jv jw jx fd ln lo lp lq aw lr bi"><span id="6e0e" class="ls kc hi lo b fi lt lu l lv lw"># app/views/song/show.html/erb #<br/>...<br/>&lt;%= render partial: 'player', locals: {song: @song} %&gt; &lt;br&gt;<br/>...</span><span id="7962" class="ls kc hi lo b fi lx lu l lv lw"># app/views/songs/_player.html.erb #</span><span id="b9fb" class="ls kc hi lo b fi lx lu l lv lw">&lt;iframe src="https://open.spotify.com/embed/track/&lt;%= @song.spotify_id %&gt;" width="300" height="80" frameborder="0" allowtransparency="true" allow="encrypted-media"&gt;&lt;/iframe&gt;</span></pre><p id="1d0b" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">考虑到这一点:</p><figure class="ju jv jw jx fd jy"><div class="bz dy l di"><div class="ly lz l"/></div><figcaption class="ma mb et er es mc md bd b be z dx">The “width=”300" height=”80"” removes the album cover area. Also, please PLEASE remember Coldplay for once being a great Jeff Buckley cover band instead of just thinking about all the awful crap they’ve put out since then.</figcaption></figure><p id="156b" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">效果非常好。除非我没有Spotify的track ID，在Spotify的API之外不容易找到。获得一个Spotify开发者账户非常容易，一旦你获得了你的客户ID和客户密码(别忘了把这些钥匙扔进你的口袋里),设置<a class="ae lm" href="https://github.com/guilhermesad/rspotify" rel="noopener ugc nofollow" target="_blank"> RSpotify gem </a>也同样容易。gitignore！).在Rails控制台中经历了许多痛苦之后，我最终得到了这个结果:</p><pre class="ju jv jw jx fd ln lo lp lq aw lr bi"><span id="1bd2" class="ls kc hi lo b fi lt lu l lv lw">def get_spotify_id<br/>    RSpotify.authenticate(ENV["SPOTIFY_CLIENT_ID"], ENV["SPOTIFY_CLIENT_SECRET"])<br/>    tracks = RSpotify::Track.search("#{self.full_title}")<br/>    if tracks.first.artists.first.name == self.artist.full_name<br/>        self.spotify_id = tracks.first.id<br/>    elsif tracks.second.artists.first.name == self.artist.full_name<br/>        self.spotify_id = tracks.second.id<br/>    elsif tracks.third.artists.first.name == self.artist.full_name<br/>        self.spotify_id = tracks.third.id<br/>    else<br/>        self.spotify_id = "Find It Yourself"<br/>    end<br/>end</span></pre><p id="b945" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">来自RSpotify的<code class="du me mf mg lo b">.authenticate</code>负责根据需要刷新授权载体令牌。虽然并不完美，但它给了我三次机会来获得准确的Spotify曲目ID。比如酷玩的颤栗<a class="ae lm" href="https://open.spotify.com/track/0qksx8mV28lztYIZ1om8ml" rel="noopener ugc nofollow" target="_blank"> 0qksx8mV28lztYIZ1om8ml </a>。有可能这位艺术家完全是个无名小卒，没有通过流媒体提供他们的音乐。也有可能是歌曲或艺术家(或者两者都是！)是如此通用，以至于它会导致多个匹配。我给了自己三次机会，看看歌曲名称是否与我提供的艺术家名称匹配。如果还是不行，我会在数据库中收到一条消息，提醒我无法找到合适的匹配。幸运的是，这仍然允许小部件呈现，但是显示找不到歌曲。</p><p id="f09c" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">编辑</strong>:哦，RSpotify毕竟可以带多部分查询。这往往会在第一时间抓住正确的轨道。</p><pre class="ju jv jw jx fd ln lo lp lq aw lr bi"><span id="6f95" class="ls kc hi lo b fi lt lu l lv lw">tracks = RSpotify::Track.search("#{self.full_title} artist:#{self.artist.full_name}")</span></pre><p id="6976" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">不要不满足:</p><pre class="ju jv jw jx fd ln lo lp lq aw lr bi"><span id="2f07" class="ls kc hi lo b fi lt lu l lv lw">def get_album_art_url(song)<br/>    RSpotify.authenticate(ENV["SPOTIFY_CLIENT_ID"], ENV["SPOTIFY_CLIENT_SECRET"])<br/>    track = RSpotify::Track.search("#{song.full_title} artist:#{song.artist.full_name}")<br/>    if !track.empty?<br/>        album = RSpotify::Album.find("#{track.first.album.id}")<br/>        album.images.second.values.second<br/>    end<br/>end</span><span id="086f" class="ls kc hi lo b fi lx lu l lv lw">def display_album_art(song)<br/>    if !get_album_art_url(song).nil?<br/>        image_tag(get_album_art_url(song), class: "card-img-top")<br/>    else<br/>        "No Album Artwork Found"<br/>    end<br/>end</span><span id="09da" class="ls kc hi lo b fi lx lu l lv lw">def get_album_name(song)<br/>    RSpotify.authenticate(ENV["SPOTIFY_CLIENT_ID"], ENV["SPOTIFY_CLIENT_SECRET"])<br/>    track = RSpotify::Track.search("#{song.full_title} artist:#{song.artist.full_name}")<br/>    if !track.empty?<br/>        track.first.album.name<br/>    else<br/>        "Album Information Not Found"<br/>    end<br/>end</span></pre><p id="5e39" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">Whee！</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="er es mh"><img src="../Images/cb8e80818f08db4af330184531e2f6ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9RCm2e9cn0so-T5OjYmpOw.png"/></div></div></figure><p id="85a0" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">诚然，如果专辑是单曲、再版、合辑或Kidz Bop，我们仍受Spotify的支配，但我们现在有大量资源可供支配。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div class="er es mm"><img src="../Images/d07a2aa7792105f8bcf7404bdb67c9ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:720/1*jYXyU6CFEvZyhAVygNC4uA.gif"/></div><figcaption class="ma mb et er es mc md bd b be z dx">Towel so wet, it’s gotta be hand dried.</figcaption></figure><h1 id="a4a3" class="kb kc hi bd kd ke kf kg kh ki kj kk kl io km ip kn ir ko is kp iu kq iv kr ks bi translated">出来玩吧(把他们分开)</h1><p id="d930" class="pw-post-body-paragraph ix iy hi iz b ja kt ij jc jd ku im jf jg kv ji jj jk kw jm jn jo kx jq jr js hb bi translated">这对Spotify IDs来说相当有效(抱歉，没有Harmonix试图向我们灌输的名字乐队)，但接下来是清理Xbox和Playstation IDs的艰难步骤。由于两家公司都没有提供直接提取这些数据的API，而且他们自己的搜索表单往往不会返回相关的结果，所以我不得不从谷歌获取链接。不知何故。</p><p id="c384" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">Mechanize特别漂亮，因为它允许您完成和提交表单。至少可以说，我的第一次尝试有点偶然:</p><pre class="ju jv jw jx fd ln lo lp lq aw lr bi"><span id="d526" class="ls kc hi lo b fi lt lu l lv lw">def scrape_xbox_link        <br/>    page = Mechanize.new.get("https://www.google.com")   <br/>    google_form = page.form('f')         <br/>    google_form.q = "xbox live #{self.artist.name} #{self.name}"     <br/>    page = Mechanize.new.submit(google_form)        <br/>    self.xbox_link = page.links[17].href[52..63]       <br/>end</span></pre><p id="915f" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae lm" href="https://www.rubydoc.info/gems/mechanize/Mechanize/Form" rel="noopener ugc nofollow" target="_blank">。form是一个机械化的类</a>，它允许用户在页面上选择一个表单元素。就谷歌的首页而言，只有一种形式可供选择:位于页面中间的标志性形式。接下来，我们需要一个可能返回我们正在寻找的值的查询:给定歌曲名称和歌曲艺术家的平台的marketplace购买链接。然后，带有搜索结果的页面将被检查市场链接(通常是[！])第17个)，然后我会把URL中对应于那首歌的字符串的唯一位砍掉。比如Wheatus 购买<strong class="iz hj">少年人渣的PSN商店链接是<a class="ae lm" href="https://store.playstation.com/en-us/product/UP8802-CUSA02084_00-S18PASSSONG13XXX/" rel="noopener ugc nofollow" target="_blank"><strong class="iz hj">up 8802-CUSA 02084 _ 00-s18 passsong 13 XXX</strong></a>而<strong class="iz hj"> Limp Bizkit </strong>购买<strong class="iz hj">Rollin’(空袭车)</strong>的Xbox商店链接是<a class="ae lm" href="https://www.microsoft.com/en-us/p/rollin-air-raid-vehicle-limp-bizkit/9mz932f3f8nb" rel="noopener ugc nofollow" target="_blank"> <strong class="iz hj"> 9mz932f3f8nb </strong> </a>。</strong></p><p id="acf2" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">一切都很好，直到我开始抓取许多不相关的链接。果然，在17岁的边缘有麻烦了(哦，宝贝，哦，说哦):</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="er es mn"><img src="../Images/07d95e08b6eb3d012af929235e4c949d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NJ0HCOAGZ5AZrTb204bDAA.png"/></div></div><figcaption class="ma mb et er es mc md bd b be z dx">Discomfort Penguin</figcaption></figure><p id="dd27" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">第15个链接是我需要的，因为第17个是一个游戏博客的链接。这需要一种不同的方法。我进一步研究了机械化的工作方式。显然，如果它检测到自动爬虫，微软和索尼会附加盐咸的废话，所以Mechanize提供了一种方法来定义用户代理，并假装请求来自使用浏览器的人。</p><pre class="ju jv jw jx fd ln lo lp lq aw lr bi"><span id="de20" class="ls kc hi lo b fi lt lu l lv lw">Mechanize.new.user_agent_alias = 'Mac Safari'</span></pre><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="er es mo"><img src="../Images/467beca4e4695c86301cd564aff5079f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FlIeGUbVlKYqVQuAHwEovQ.png"/></div></div><figcaption class="ma mb et er es mc md bd b be z dx">At least I didn’t get a picture of a golden Harry Styles statue.</figcaption></figure><p id="61c2" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">其他问题出现在共同条款(Xbox Live Gold是一种高级订阅服务)以及歌曲何时成为其他游戏的可下载内容。在这个例子中，第一个链接(技术上是第三个，因为谷歌的建议)是为游戏Fuser购买Golden。Dance Central和Rocksmith是其他游戏，其中歌曲也可以作为可下载内容存在。最后，只有美国版的可下载内容可以被美国版的摇滚乐队使用，在URL中用“en-us”表示。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="er es mp"><img src="../Images/554e28ba4b94971f8d5b34d1417dd91e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wc0CNn6rYkWOwG-uRtkPow.png"/></div></div><figcaption class="ma mb et er es mc md bd b be z dx">Hey, how come theirs is cheaper? ($1.44 USD at time of writing, vs. $1.99 here)</figcaption></figure><p id="3995" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为了删除错误的游戏和市场区域，新的查询是:</p><pre class="ju jv jw jx fd ln lo lp lq aw lr bi"><span id="e973" class="ls kc hi lo b fi lt lu l lv lw">google_form.q = "xbox live en-us #{song.name} #{song.artist.name} -rocksmith -dance -fuser"</span></pre><h1 id="67f1" class="kb kc hi bd kd ke kf kg kh ki kj kk kl io km ip kn ir ko is kp iu kq iv kr ks bi translated">鲁布拉，鲁布拉索霍</h1><p id="154c" class="pw-post-body-paragraph ix iy hi iz b ja kt ij jc jd ku im jf jg kv ji jj jk kw jm jn jo kx jq jr js hb bi translated">然而，我仍然需要停止依赖固定的链接位置，能够直接搜索正确的数据。通过使用Mechanize的<a class="ae lm" href="https://www.rubydoc.info/gems/mechanize/Mechanize/Page#link-instance_method" rel="noopener ugc nofollow" target="_blank"> links_with </a>，我可以定义链接返回的标准，使用反斜杠来转义正则表达式中的斜杠。</p><pre class="ju jv jw jx fd ln lo lp lq aw lr bi"><span id="6848" class="ls kc hi lo b fi lt lu l lv lw">pp = page.links_with :href =&gt; /microsoft.com\/en-us\/p/</span></pre><p id="e114" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在进一步观察返回的链接后，我注意到附加的加盐散列，尽管长度不同，但总是以“&amp;sa”开头。使用仁慈的<a class="ae lm" href="https://rubular.com/" rel="noopener ugc nofollow" target="_blank"> Rubular </a>测试编辑器，我能够编写表达式，用Ruby删除所有无用的尾随字符。gsub方法。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="er es mq"><img src="../Images/1462dbfa7bdf07c3a8ce7041df1d562d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_pYJhyvutFrYjmpQq1appQ.png"/></div></div><figcaption class="ma mb et er es mc md bd b be z dx">Regular expression? Don’t downplay yourself, you’re an awesome expression!</figcaption></figure><p id="f254" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">因此，我可以获取相关的URL字符串，并安全地将其保存为歌曲的xbox_link属性。数组的-1索引是它的最后一个元素，所以我不需要指定我的范围的结尾。</p><pre class="ju jv jw jx fd ln lo lp lq aw lr bi"><span id="45be" class="ls kc hi lo b fi lt lu l lv lw">self.xbox_link = pp.first.href[32..-1].gsub(/\&amp;sa(.*)/, “”)</span></pre><p id="f2c5" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这一点上，我只是偶尔遇到一个错误，因为缺少匹配的结果，我会简单地把它写下来，以后再修复。1比3000好吧？</p><pre class="ju jv jw jx fd ln lo lp lq aw lr bi"><span id="0c63" class="ls kc hi lo b fi lt lu l lv lw">if pp.first<br/>    self.xbox_link = pp.first.href[32..-1].gsub(/\&amp;sa(.*)/, "")<br/>else<br/>    self.xbox_link = "Scrape Error"<br/>end</span></pre><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="er es mr"><img src="../Images/4a5d3eadd18dadd75527e005c4c0f0ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1226/format:webp/1*-26CaqIFkbTo4pIFDX0yGQ.png"/></div></div><figcaption class="ma mb et er es mc md bd b be z dx">Hooray for perpetuating late-stage capitalism!</figcaption></figure><p id="314a" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">最终的运行代码如下所示:</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="er es ms"><img src="../Images/c9cea718bd813194e5b3f2c5d08231ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yPd2NDtzr9oERKrjHyg-nA.png"/></div></div></figure><p id="01b6" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我在Google查询中添加了双引号，要求搜索精确的字符串，也可以用反斜杠进行转义。Dance Central是XBox平台独有的，但不将其括在引号中会导致Dance Gavin Dance这样的乐队被省略(在大多数情况下这并不是一件坏事。).索尼的链接有一个额外的gsub out散列，但一旦我找到了共同的元素，这就不是问题了。</p><h1 id="c427" class="kb kc hi bd kd ke kf kg kh ki kj kk kl io km ip kn ir ko is kp iu kq iv kr ks bi translated"><strong class="ak">徒然训练(袖手旁观我)</strong></h1><p id="f3c9" class="pw-post-body-paragraph ix iy hi iz b ja kt ij jc jd ku im jf jg kv ji jj jk kw jm jn jo kx jq jr js hb bi translated">我希望我不是摇滚乐队app火炬接力中的最后一名幸存者，但我绝对愿意投入工作，以确保我的数据库仍然是真实的准确来源。</p></div></div>    
</body>
</html>