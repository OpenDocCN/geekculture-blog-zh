<html>
<head>
<title>Angular:This is how I finally understood :host,:host-context and ::ng-deep selectors</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Angular:这是我最终理解的:host，:host-context和::ng-deep选择器</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/angular-this-is-how-i-finally-understood-host-and-ng-deep-selectors-c829098cf194?source=collection_archive---------4-----------------------#2021-11-20">https://medium.com/geekculture/angular-this-is-how-i-finally-understood-host-and-ng-deep-selectors-c829098cf194?source=collection_archive---------4-----------------------#2021-11-20</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="69c2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们从:主机选择器开始。</p><p id="db8e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">那么，什么是主体元素呢？假设我有一个包含一些内容的组件。该组件有一个选择器&lt;app-comp-a&gt;T52/app-comp-a&gt;。</p><p id="7088" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">那么<app-comp-a>单独就是宿主元素</app-comp-a>。<app-comp-a> </app-comp-a>的内容不是宿主元素。</p><p id="f383" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">不可能在组件的CSS文件中设置<app-comp-a> </app-comp-a>元素的样式。</p><p id="f274" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> :host </strong>选择器是一个主要针对host元素进行样式化的概念:&lt;app-comp-a&gt;/app-comp-a&gt;及其后代。</p><p id="1bb4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">考虑一下这个场景。</p><p id="5347" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在根AppComponent中，我添加了一个名为<strong class="ih hj"> ChildAComponent </strong>的子组件。</p><p id="daf1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> AppComponent模板:</strong></p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="146d" class="jm jn hi ji b fi jo jp l jq jr">&lt;p&gt;I am a P tag within App Component.&lt;/p&gt;</span><span id="9431" class="jm jn hi ji b fi js jp l jq jr"><strong class="ji hj">&lt;app-child-a&gt;&lt;/app-child-a&gt;</strong></span></pre><p id="1850" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> ChildAComponent模板:</strong>我们添加了一个&lt; span &gt;标签和另一个子组件:<strong class="ih hj"> ChildBComponent </strong>。这两个元素都包含在一个带有类<strong class="ih hj"> childAContainer </strong>的&lt; div &gt;标签中。</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="7258" class="jm jn hi ji b fi jo jp l jq jr">&lt;div <strong class="ji hj">class="childAContainer"</strong>&gt;<br/>&lt;span&gt;I am a Span tag within ChildA Component.&lt;/span&gt;</span><span id="b0d7" class="jm jn hi ji b fi js jp l jq jr"><strong class="ji hj">&lt;app-child-b&gt;&lt;/app-child-b&gt;</strong><br/>&lt;/div&gt;</span></pre><p id="422a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> ChildBComponent模板:</strong>我们有一个&lt; p &gt;、&lt; h2 &gt;、&lt; h4 &gt;，带有一个<strong class="ih hj">类iAmH4 </strong>和一个&lt; h6 &gt;标签，带有一个<strong class="ih hj"> ID 1stH6 </strong>。所有这些标签都包含在一个带有类<strong class="ih hj"> childBContainer </strong>的&lt; div &gt;标签中。</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="3a67" class="jm jn hi ji b fi jo jp l jq jr">&lt;div <strong class="ji hj">class="childBContainer"</strong>&gt;<br/>&lt;p&gt;P Tag in ChildB Component&lt;/p&gt;</span><span id="7f2c" class="jm jn hi ji b fi js jp l jq jr">&lt;h2&gt;H2 Tag in ChildB Component&lt;/h2&gt;</span><span id="fd8d" class="jm jn hi ji b fi js jp l jq jr">&lt;h4 <strong class="ji hj">class="iAmH4"</strong>&gt;H4 Tag with a class in ChildB Component&lt;/h4&gt;</span><span id="7da0" class="jm jn hi ji b fi js jp l jq jr">&lt;h6 <strong class="ji hj">id="1stH6"</strong>&gt;H6 Tag with an ID in ChildB Component&lt;/h6&gt;<br/>&lt;/div&gt;</span></pre><p id="b1f7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了演示<strong class="ih hj"> :host </strong>如何工作，让我将下面这段代码添加到ChildAComponent的CSS文件中。</p><p id="7d7f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">子组件CSS: </strong></p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="ebc7" class="jm jn hi ji b fi jo jp l jq jr">.<strong class="ji hj">childAContainer</strong>{<br/>border: 2px solid lightblue;<br/>padding: 10px;<br/>}</span><span id="d96e" class="jm jn hi ji b fi js jp l jq jr"><strong class="ji hj">:host {</strong><br/>border: 2px solid green;<br/>color:chocolate;<br/>display: block;<br/>padding: 10px;<br/>}</span><span id="9d09" class="jm jn hi ji b fi js jp l jq jr"><strong class="ji hj">:host h2 {</strong><br/>font-style: italic;<br/>}</span><span id="4f75" class="jm jn hi ji b fi js jp l jq jr"><strong class="ji hj">:host .iAmH4 {</strong><br/>border: 2px dotted blue;<br/>}</span><span id="974a" class="jm jn hi ji b fi js jp l jq jr"><strong class="ji hj">:host [id='1stH6'] {</strong><br/>border: 2px dotted violet;<br/>}</span></pre><p id="5207" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我假设到目前为止<strong class="ih hj">子组件</strong>还没有定义CSS样式。</p><p id="df6d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上述代码的结果将是:</p><figure class="jd je jf jg fd ju er es paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="er es jt"><img src="../Images/9eb7195293622dcadcfa0344ad4c9c52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0XfFtfesCKtmuJ5QPCCZFg.png"/></div></div><figcaption class="kb kc et er es kd ke bd b be z dx">:host selector applied to &lt;app-child-a&gt;</figcaption></figure><p id="7473" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当我们看结果时，我们的推论是什么？</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="5474" class="jm jn hi ji b fi jo jp l jq jr"><strong class="ji hj">:host {</strong><br/>border: 2px solid green;<br/>color:chocolate;<br/>display: block;<br/>padding: 10px;<br/>}</span></pre><p id="a1c0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> :host </strong>会将其下定义的样式添加到host元素:&lt; app-child-a &gt;及其后代。</p><figure class="jd je jf jg fd ju er es paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="er es kf"><img src="../Images/a9b713f3428f8e0f4d543131fee25d2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*tAxw0EYKMPiVPQ5o.png"/></div></div><figcaption class="kb kc et er es kd ke bd b be z dx">:host applied to &lt;app-child-a&gt;</figcaption></figure><p id="b0a9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一些样式属性仅添加到<app-child-a>中，例如:一个<strong class="ih hj">绿色边框</strong>仅添加到&lt; app-child-a &gt;元素中。</app-child-a></p><figure class="jd je jf jg fd ju er es paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="er es kf"><img src="../Images/46b0cf58733c073870e32f61bf1a2937.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aPaXHJFrfYgusjWKejAmAg.png"/></div></div><figcaption class="kb kc et er es kd ke bd b be z dx">Styles applied to &lt;app-child-a&gt;</figcaption></figure><p id="ae08" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是样式属性<strong class="ih hj">颜色</strong>已经应用于&lt; app-child-a &gt;和&lt; app-child-b &gt;的所有元素。</p><p id="fad6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是DOM目前的样子:</p><figure class="jd je jf jg fd ju er es paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="er es jt"><img src="../Images/41cb73a4c475da460eb4e1d29c5c5ab0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y5FvgML0JCdXd7y_pxXbTw.png"/></div></div><figcaption class="kb kc et er es kd ke bd b be z dx">&lt;span&gt; tag inherits color property from host element &lt;app-child-a&gt;</figcaption></figure><p id="2014" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你注意到，<app-child-a>下的<span>标签只继承了颜色属性，而没有继承其他属性，如边框、填充和显示。</span></app-child-a></p><p id="d6aa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这种行为的原因是有些样式属性是可继承的，而有些是不可继承的。<strong class="ih hj">可继承属性可以从父组件&lt; app-child-a &gt;传递到子组件&lt; app-child-b &gt;，即使组件被封装</strong>。</p><p id="6a49" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">例如:<app-child-b>下的<p>标签也继承了<app-child-a>的颜色属性。</app-child-a></p></app-child-b></p><figure class="jd je jf jg fd ju er es paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="er es jt"><img src="../Images/8044387b780e4a255b96765c18b35e62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yUqILAKezwxVhSvMgjDoKg.png"/></div></div><figcaption class="kb kc et er es kd ke bd b be z dx">&lt;p&gt; tag under &lt;app-child-b&gt; has inherited color from &lt;app-child-a&gt;</figcaption></figure><p id="b5c5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">请检查下面的链接，查看可继承和不可继承的属性列表。</p><div class="kg kh ez fb ki kj"><a href="https://www.w3.org/TR/CSS21/propidx.html" rel="noopener  ugc nofollow" target="_blank"><div class="kk ab dw"><div class="kl ab km cl cj kn"><h2 class="bd hj fi z dy ko ea eb kp ed ef hh bi translated">全属性表</h2><div class="kq l"><h3 class="bd b fi z dy ko ea eb kp ed ef dx translated">注:本规范的几个章节已被其他规范更新。请参见“层叠风格…</h3></div><div class="kr l"><p class="bd b fp z dy ko ea eb kp ed ef dx translated">www.w3.org</p></div></div></div></a></div><p id="0cc9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">:主机</strong>不影响主机元素的父组件:<strong class="ih hj"> AppComponent </strong>。</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="bf8c" class="jm jn hi ji b fi jo jp l jq jr">.<strong class="ji hj">childAContainer</strong>{<br/>border: 2px solid lightblue;<br/>padding: 10px;<br/>}</span></pre><p id="24da" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">另外一个<strong class="ih hj">蓝色边框</strong>已经被应用到&lt; div &gt;标签上，在&lt; app-child-a &gt;中带有类<strong class="ih hj"> childAContainer </strong>。向带有类<strong class="ih hj"> childAContainer </strong>的&lt; div &gt;标签添加蓝色边框的目的是<strong class="ih hj">区分应用于&lt; app-child-a &gt;内内容的边框和直接应用于&lt; app-child-a &gt;的边框。</strong></p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="2e95" class="jm jn hi ji b fi jo jp l jq jr"><strong class="ji hj">:host h2 {</strong><br/>font-style: italic;<br/>}</span></pre><p id="2950" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">可以在:host选择器之后添加额外的选择器来选择子元素。</strong>例如:在上面的例子中，我们在:host之后添加了标记名h2，以选择host元素&lt; app-child-a &gt;下的所有&lt; h2 &gt;元素。</p><p id="401c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">只有<app-child-a>的<h2>标签使用<strong class="ih hj">字体样式:斜体。</strong>在&lt; app-child-b &gt;中的&lt; h2 &gt;标签不会受到影响，因为Angular为组件提供了默认的<strong class="ih hj">仿真封装</strong>。</h2></app-child-a></p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="08bf" class="jm jn hi ji b fi jo jp l jq jr"><strong class="ji hj">:host .iAmH4 {</strong><br/>border: 2px dotted blue;<br/>}<br/><strong class="ji hj">:host [id='1stH6'] {</strong><br/>border: 2px dotted violet;<br/>}</span></pre><p id="aea3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正如你所看到的，在&lt; app-child-b &gt;中有一个带有class <strong class="ih hj"> iAmH4 </strong>的<h4>标签和带有ID <strong class="ih hj"> 1stH6 </strong>的&lt; h6 &gt;标签。但是以上两种风格根本没有产生任何影响。正如已经讨论过的，这都是由于默认的<strong class="ih hj">仿真封装</strong>造成的。</h4></p><p id="2362" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在继续下一步之前，让我简要介绍一下这种封装是如何工作的。下面是DOM现在的截图。</p><figure class="jd je jf jg fd ju er es paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="er es jt"><img src="../Images/8affcd957a3c9817b19c5914e6a8715f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EpkPiLBrR5zuZIyin0hJcw.png"/></div></div><figcaption class="kb kc et er es kd ke bd b be z dx">Emulated Encapsulation</figcaption></figure><p id="6c20" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正如你所看到的，每个组件都有一个独特的属性，以应用于它的<strong class="ih hj"> _nghost </strong>开始。例如:</p><p id="aec5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">= &gt;根组件<my-app>具有属性<strong class="ih hj"> _nghost-inm-c78 </strong></my-app></p><p id="3663" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">=&gt;<app-child-a>具有属性<strong class="ih hj"> _nghost-inm-c79 </strong></app-child-a></p><p id="9761" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">=&gt;<app-child-b>具有属性<strong class="ih hj"> _nghost-inm-c80 </strong></app-child-b></p><p id="51dc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">类似地，上述每个组件中的每个元素都有一个以应用于它的<strong class="ih hj"> _ngcontent </strong>开头的属性。</p><p id="b41a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">另一点需要注意的是，同一组件下的所有元素都有相同的<strong class="ih hj"> _ngcontent </strong>属性。例如:</p><p id="9dcf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">= &gt;在<app-child-a>下的<div>、<span>和<h2>标签具有相同的<strong class="ih hj"> _ngcontent-inm-c79 </strong>属性。</h2></span></div></app-child-a></p><p id="fe62" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">= &gt;在<app-child-b>下的<p>、</p><h2>、<h4>和<h6>标签具有相同的<strong class="ih hj"> _ngcontent-inm-c80 </strong>属性。</h6></h4></h2></app-child-b></p><p id="255d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">= &gt;因为<app-child-a>是<my-app>下的一个元素，所以它也有一个<strong class="ih hj"> _ngcontent-inm-c78 </strong>属性。</my-app></app-child-a></p><p id="99bc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">= &gt;因为<app-child-b>是<my-child-a>下的一个元素，所以它也有一个<strong class="ih hj"> _ngcontent-inm-c79 </strong>属性。</my-child-a></app-child-b></p><p id="f6d6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">由于<strong class="ih hj"> _ngcontent-inm-c79 </strong>是一个只有&lt; app-child-a &gt;中的元素才有的属性，所以&lt; app-child-a &gt;的css文件中定义的所有样式都将被限制或限定在这个组件的元素范围内。</p><p id="d211" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">同样，由于<strong class="ih hj"> _ngcontent-inm-c80 </strong>是一个只有&lt; app-child-b &gt;中的元素才有的属性，所以&lt; app-child-b &gt;的css文件中定义的所有样式都将被限制或限定在这个组件的元素范围内。</p><p id="42b7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这就是Angular如何使用这两个属性来实现组件中的样式封装。</p><p id="92ec" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了绕过这种封装，<strong class="ih hj">:ng深度选择器</strong>派上了用场。假设我修改了上面的两种风格，如下所示:</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="086c" class="jm jn hi ji b fi jo jp l jq jr">:host <strong class="ji hj">::ng-deep</strong> .iAmH4 {<br/>border: 2px dotted blue;<br/>}</span><span id="b300" class="jm jn hi ji b fi js jp l jq jr">:host <strong class="ji hj">::ng-deep</strong> [id=’1stH6'] {<br/>border: 2px dotted violet;<br/>}</span></pre><p id="45f0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">结果将如下图所示。<strong class="ih hj">子组件&lt; app-child-b &gt;中的&lt; h4 &gt;和&lt; h6 &gt;标签被父组件&lt;app-child-a&gt;T7】添加了虚线边框。</strong></p><p id="430c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ng-deep 非常强大，能够将它定义的样式渲染为全局样式。这里需要注意的是，必须在:host选择器之后使用<strong class="ih hj"> ::ng-deep，以确保定义的样式的范围仅限于&lt; app-child-a &gt;组件及其后代组件&lt; app-child-b &gt;。</strong></p><figure class="jd je jf jg fd ju er es paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="er es jt"><img src="../Images/f01dfba9ef31387b8e925ee4bf690ffc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bg_lyEYY-_bi_iqsrWHBKQ.png"/></div></div><figcaption class="kb kc et er es kd ke bd b be z dx">::ng-deep selector</figcaption></figure><p id="5f68" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我修改一下<strong class="ih hj"> ChildAComponent </strong>模板，添加另一个&lt; app-child-b &gt;，带有一个类<strong class="ih hj">框</strong>。</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="f5cc" class="jm jn hi ji b fi jo jp l jq jr">&lt;div <strong class="ji hj">class="childAContainer"</strong>&gt;<br/>&lt;span&gt;I am a Span tag within ChildA Component.&lt;/span&gt;</span><span id="dacf" class="jm jn hi ji b fi js jp l jq jr">&lt;h2&gt;I am a H2 tag inside ChildA Component.&lt;/h2&gt;</span><span id="b69c" class="jm jn hi ji b fi js jp l jq jr">&lt;app-child-b&gt; &lt;/app-child-b&gt;</span><span id="e884" class="jm jn hi ji b fi js jp l jq jr"><strong class="ji hj">&lt;app-child-b class="box"&gt;&lt;/app-child-b&gt;</strong></span><span id="6327" class="jm jn hi ji b fi js jp l jq jr">&lt;/div&gt;</span></pre><p id="bcb9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这样做的目的是演示如何以不同的方式对多次使用的同一个主机元素进行<strong class="ih hj">样式化。</strong></p><p id="9bf5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们给<strong class="ih hj"> ChildBComponent的css文件添加一些样式。</strong></p><p id="752f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> ChildBComponent CSS: </strong>我想给没有类的&lt; app-child-b &gt;主机元素添加一个<strong class="ih hj">紫色背景色</strong>，给有类的&lt; app-child-b &gt;框添加一个<strong class="ih hj">橙色背景色</strong>。</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="d536" class="jm jn hi ji b fi jo jp l jq jr"><strong class="ji hj">:host {</strong><br/>border: 2px solid violet;<br/>display: block;<br/>padding: 10px;<br/>margin: 10px;<br/>}</span><span id="0d35" class="jm jn hi ji b fi js jp l jq jr"><strong class="ji hj">:host(.box) {</strong><br/>border: 2px solid orange;<br/>}</span><span id="ec33" class="jm jn hi ji b fi js jp l jq jr"><strong class="ji hj">.childBContainer {</strong><br/>border: 2px solid tomato;<br/>}</span></pre><p id="14c7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在:host()选择器中，括号内给出的条件决定了要设计哪个主机元素的样式。可以看到，<strong class="ih hj"> :host(。box) </strong>帮我给<strong class="ih hj">&lt;app-child-b class = " box "&gt;&lt;/app-child-b&gt;添加不同的背景色。</strong></p><p id="1fb6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们还添加了带有类<strong class="ih hj"> childBContainer </strong>的<div>标签，它包含了带有番茄边框颜色的&lt; app-child-b &gt;的所有内容。目的是区分应用于&lt; app-child-b &gt;的边框和应用于&lt; app-child-b &gt;内容的边框。</div></p><p id="5e8c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">结果如下所示:</p><figure class="jd je jf jg fd ju er es paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="er es jt"><img src="../Images/9384851833c4aa1648647a03df91ecd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qy4Iw1ksooZ7uZJ5JIC3PA.png"/></div></div><figcaption class="kb kc et er es kd ke bd b be z dx">:host applied to &lt;app-child-b&gt;</figcaption></figure><p id="8d6f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后，让我们来看看<strong class="ih hj"> :host-context() </strong>选择器。主机上下文的概念是根据CSS类是否应用于主机元素的任何祖先来设计主机元素的样式。</p><p id="4541" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们将另一个子组件<strong class="ih hj"> ChildComponentC </strong>添加到ChildComponentB。</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="7b64" class="jm jn hi ji b fi jo jp l jq jr">&lt;div class=”childBContainer”&gt;<br/>&lt;p&gt;P Tag in ChildB Component&lt;/p&gt;<br/>&lt;h2&gt;H2 Tag in ChildB Component&lt;/h2&gt;<br/>&lt;h4 class=”iAmH4"&gt;H4 Tag with a class in ChildB Component&lt;/h4&gt;<br/>&lt;h6 id=”1stH6"&gt;H6 Tag with an ID in ChildB Component&lt;/h6&gt;<br/><strong class="ji hj">&lt;app-child-c&gt;&lt;/app-child-c&gt;</strong><br/>&lt;/div&gt;</span></pre><p id="59d2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> ChildComponentC模板:</strong></p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="c0d0" class="jm jn hi ji b fi jo jp l jq jr">&lt;p&gt;I am a P tag in ChildC Component&lt;/p&gt;</span></pre><p id="8418" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">儿童组件CSS: </strong></p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="6e52" class="jm jn hi ji b fi jo jp l jq jr"><strong class="ji hj">:host-context(app-child-b.box) {</strong><br/> color: red;<br/>border: 2px solid green;<br/>display: block;<br/>margin: 10px;<br/>}</span></pre><p id="910f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这意味着如果<app-child-b>元素有一个类<strong class="ih hj"> box，</strong>那么<strong class="ih hj">颜色:红色</strong>样式将被应用到主机元素&lt; app-child-c &gt;。</app-child-b></p><p id="a8cd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正如所料，<strong class="ih hj">边框、边距和显示属性仅应用于&lt; app-child-c &gt;主机元素</strong>。</p><figure class="jd je jf jg fd ju er es paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="er es jt"><img src="../Images/1d514dfcd37cc9368f943d0ccaa725ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K1ZVy-wdHjGK96TAN4l3lA.png"/></div></div><figcaption class="kb kc et er es kd ke bd b be z dx">styles applied to &lt;app-child-c&gt;</figcaption></figure><p id="7d79" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">由于继承，只有<strong class="ih hj">颜色属性</strong>应用于&lt; app-child-c &gt;下的&lt; p &gt;标签，因为颜色属性是可继承的。上面提到的其他属性是不可继承的。</p><figure class="jd je jf jg fd ju er es paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="er es jt"><img src="../Images/0738e07c9ab17d548318adc36444d762.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cmFSwmrY8xgprjlqSw_mDQ.png"/></div></div><figcaption class="kb kc et er es kd ke bd b be z dx">styles applied to the &lt;p&gt; tag under &lt;app-child-c&gt;</figcaption></figure><p id="d600" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你可以通过下面的链接查看整个例子。</p><div class="kg kh ez fb ki kj"><a href="https://stackblitz.com/edit/angular-siearc?file=src/app/child-a/child-a.component.scss" rel="noopener  ugc nofollow" target="_blank"><div class="kk ab dw"><div class="kl ab km cl cj kn"><h2 class="bd hj fi z dy ko ea eb kp ed ef hh bi translated">角形(叉形)堆叠</h2><div class="kq l"><h3 class="bd b fi z dy ko ea eb kp ed ef dx translated">编辑描述</h3></div><div class="kr l"><p class="bd b fp z dy ko ea eb kp ed ef dx translated">stackblitz.com</p></div></div><div class="ks l"><div class="kt l ku kv kw ks kx jz kj"/></div></div></a></div></div></div>    
</body>
</html>