<html>
<head>
<title>Coding A Server Using Elixir</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Elixir编写服务器代码</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/coding-a-server-using-elixir-695565ed5e70?source=collection_archive---------4-----------------------#2021-08-13">https://medium.com/geekculture/coding-a-server-using-elixir-695565ed5e70?source=collection_archive---------4-----------------------#2021-08-13</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="e1d4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">了解如何使用Elixir和Plug编写服务器代码。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/b5b5314cf0c8863066f8117cbb8136e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*31rssB3VFPFKdjaYa-rUWg.png"/></div></div></figure><p id="19d7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这个故事中，您将学习如何使用Elixir和Plug构建一个简单的服务器。</p><h2 id="a24f" class="jp jq hi bd jr js jt ju jv jw jx jy jz iq ka kb kc iu kd ke kf iy kg kh ki kj bi translated">注意</h2><p id="b3fa" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">如果你想更多地了解什么是Elixir，以及Elixir和Node.js之间的区别，请务必查看我以前的故事。</p><div class="kp kq ez fb kr ks"><a rel="noopener follow" target="_blank" href="/geekculture/what-is-elixir-3f6a96d8f642"><div class="kt ab dw"><div class="ku ab kv cl cj kw"><h2 class="bd hj fi z dy kx ea eb ky ed ef hh bi translated">什么是仙丹？</h2><div class="kz l"><h3 class="bd b fi z dy kx ea eb ky ed ef dx translated">什么是仙丹，为什么它很牛逼？</h3></div><div class="la l"><p class="bd b fp z dy kx ea eb ky ed ef dx translated">medium.com</p></div></div><div class="lb l"><div class="lc l ld le lf lb lg jn ks"/></div></div></a></div><div class="kp kq ez fb kr ks"><a href="https://javascript.plainenglish.io/a-2021-comparison-of-node-js-and-elixir-8744574033a7" rel="noopener  ugc nofollow" target="_blank"><div class="kt ab dw"><div class="ku ab kv cl cj kw"><h2 class="bd hj fi z dy kx ea eb ky ed ef hh bi translated">Node.js与Elixir: 2021对比</h2><div class="kz l"><h3 class="bd b fi z dy kx ea eb ky ed ef dx translated">哪种语言是构建高性能和可伸缩后端的最佳选择？</h3></div><div class="la l"><p class="bd b fp z dy kx ea eb ky ed ef dx translated">javascript.plainenglish.io</p></div></div><div class="lb l"><div class="lh l ld le lf lb lg jn ks"/></div></div></a></div><p id="e1a7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">开始吧！</p></div><div class="ab cl li lj gp lk" role="separator"><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln"/></div><div class="hb hc hd he hf"><h1 id="8c4d" class="lp jq hi bd jr lq lr ls jv lt lu lv jz lw lx ly kc lz ma mb kf mc md me ki mf bi translated">为我们的服务器编码</h1><p id="9d0f" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">在开始写代码之前，我通常会解释我们将要使用的技术和语言。</p><p id="c960" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是，我已经写了很多关于长生不老药的故事，所以我真的不认为我必须在这里解释长生不老药是什么。</p><h2 id="28e1" class="jp jq hi bd jr js jt ju jv jw jx jy jz iq ka kb kc iu kd ke kf iy kg kh ki kj bi translated">创建新项目</h2><p id="c41b" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">首先，我们必须创建一个新的Elixir应用程序。只需运行下面的命令，但将项目名称改为您想要的名称。</p><pre class="je jf jg jh fd mg mh mi mj aw mk bi"><span id="c15e" class="jp jq hi mh b fi ml mm l mn mo">mix new server --sup</span></pre><p id="b7b4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我将我的应用程序命名为“服务器”。很有创意吧？哈哈。我说过，你想怎么叫都行。</p><p id="f2ba" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们使用<code class="du mp mq mr mh b">--sup</code>标志来创建一个受监督的应用程序。</p><h2 id="7e9f" class="jp jq hi bd jr js jt ju jv jw jx jy jz iq ka kb kc iu kd ke kf iy kg kh ki kj bi translated">添加依赖关系</h2><p id="84e3" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">我们将使用<a class="ae ms" href="https://github.com/elixir-plug/plug_cowboy" rel="noopener ugc nofollow" target="_blank">和<strong class="ih hj">插头。牛仔</strong> </a>来构建我们的服务器。将它添加到您的应用程序中，如下例所示。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="mt mu l"/></div></figure><p id="d58c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在运行下面的命令来获取并安装库。</p><pre class="je jf jg jh fd mg mh mi mj aw mk bi"><span id="88c3" class="jp jq hi mh b fi ml mm l mn mo">mix deps.get</span></pre><p id="dbb7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">就是这样！您已经添加了Plug。牛仔到你的申请。</p><h2 id="6eb1" class="jp jq hi bd jr js jt ju jv jw jx jy jz iq ka kb kc iu kd ke kf iy kg kh ki kj bi translated">构建我们的路由器</h2><p id="cbd6" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">为了处理请求和发送响应，我们必须制作一个路由器。您可以使用下面的示例来构建它。我马上会解释它是如何工作的。</p><p id="6c70" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在<code class="du mp mq mr mh b">lib/&lt;your-app-name&gt;</code>目录下创建一个<code class="du mp mq mr mh b">router.ex</code>文件，并在其中添加下面的代码。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="mt mu l"/></div></figure><p id="3d18" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如你所见，这其实很简单。</p><p id="62cf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你向“/”发出GET请求，它会发回“Welcome”。但是如果你正在访问的网址不匹配任何路线，它会发回“没有找到”。</p><h2 id="b71a" class="jp jq hi bd jr js jt ju jv jw jx jy jz iq ka kb kc iu kd ke kf iy kg kh ki kj bi translated">注意</h2><p id="2401" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">您可以在这里添加任意多的路线。当然，您可以做的不仅仅是接收GET请求。你可以得到任何类型的HTTP请求，并做类似转发的事情。</p><p id="e236" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我不会在这里展示如何做这类事情，但是如果你想了解更多，请务必阅读在线文档。</p><div class="kp kq ez fb kr ks"><a href="https://hexdocs.pm/plug/readme.html" rel="noopener  ugc nofollow" target="_blank"><div class="kt ab dw"><div class="ku ab kv cl cj kw"><h2 class="bd hj fi z dy kx ea eb ky ed ef hh bi translated">插头</h2><div class="kz l"><h3 class="bd b fi z dy kx ea eb ky ed ef dx translated">Plug is:不同web服务器的web应用程序连接适配器之间的可组合模块的规范…</h3></div><div class="la l"><p class="bd b fp z dy kx ea eb ky ed ef dx translated">hexdocs.pm</p></div></div></div></a></div><h2 id="2bb7" class="jp jq hi bd jr js jt ju jv jw jx jy jz iq ka kb kc iu kd ke kf iy kg kh ki kj bi translated">配置我们的应用程序模块</h2><p id="ca2d" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">为了能够运行我们的服务器，我们必须在我们的应用程序模块中配置它。</p><p id="6b71" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我不会在这里解释应用程序模块和管理器之类的东西，因为我计划为OTP写一个单独的故事。</p><p id="a6f0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">把下面的代码加到<code class="du mp mq mr mh b">application.ex</code>文件里面就好了。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="mt mu l"/></div></figure><p id="a596" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你不懂，也不用担心。我将在以后关于OTP的文章中更详细地解释这种东西。</p><h2 id="4883" class="jp jq hi bd jr js jt ju jv jw jx jy jz iq ka kb kc iu kd ke kf iy kg kh ki kj bi translated">运行我们的服务器</h2><p id="247f" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">现在我们终于可以运行我们的服务器了！运行以下命令，并在浏览器中转至<code class="du mp mq mr mh b">localhost:4000</code>。你应该看到我们的“欢迎”信息。</p><pre class="je jf jg jh fd mg mh mi mj aw mk bi"><span id="ca50" class="jp jq hi mh b fi ml mm l mn mo">mix run --no-halt</span></pre><p id="b5b2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，尝试访问一个未知的URL，比如<code class="du mp mq mr mh b">localhost:4000/settings</code>。您应该会看到“未找到”的消息。</p></div><div class="ab cl li lj gp lk" role="separator"><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln"/></div><div class="hb hc hd he hf"><h1 id="9613" class="lp jq hi bd jr lq lr ls jv lt lu lv jz lw lx ly kc lz ma mb kf mc md me ki mf bi translated">最后的想法</h1><p id="7539" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">您刚刚学习了如何在Elixir和Plug中构建服务器！请随意阅读这些文档，并自行改进这个项目。我说过，我很快就会写一篇关于OTP的文章。</p><p id="e820" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">希望这个故事对你有帮助。我很想听听你对这个故事的看法！</p></div><div class="ab cl li lj gp lk" role="separator"><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln"/></div><div class="hb hc hd he hf"><h1 id="933e" class="lp jq hi bd jr lq lr ls jv lt lu lv jz lw lx ly kc lz ma mb kf mc md me ki mf bi translated">仅此而已。感谢您阅读这个故事！</h1><p id="f388" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">如果你喜欢这个故事，一定要为它鼓掌！你想问我什么都可以。</p><p id="9efb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在Twitter上关注我:</p><div class="kp kq ez fb kr ks"><a href="https://twitter.com/Re_allyedge" rel="noopener  ugc nofollow" target="_blank"><div class="kt ab dw"><div class="ku ab kv cl cj kw"><h2 class="bd hj fi z dy kx ea eb ky ed ef hh bi translated">re _ ally边缘</h2><div class="la l"><p class="bd b fp z dy kx ea eb ky ed ef dx translated">twitter.com</p></div></div><div class="lb l"><div class="mv l ld le lf lb lg jn ks"/></div></div></a></div><p id="6b05" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在Patreon上支持我:</p><div class="kp kq ez fb kr ks"><a href="https://www.patreon.com/allyedge" rel="noopener  ugc nofollow" target="_blank"><div class="kt ab dw"><div class="ku ab kv cl cj kw"><h2 class="bd hj fi z dy kx ea eb ky ed ef hh bi translated">阿里木阿尔斯兰卡亚是创造编程故事和教程。帕特里翁</h2><div class="kz l"><h3 class="bd b fi z dy kx ea eb ky ed ef dx translated">今天就成为阿里木阿尔斯兰卡亚的赞助人:在世界上最大的…</h3></div><div class="la l"><p class="bd b fp z dy kx ea eb ky ed ef dx translated">www.patreon.com</p></div></div><div class="lb l"><div class="mw l ld le lf lb lg jn ks"/></div></div></a></div></div></div>    
</body>
</html>