<html>
<head>
<title>How to Build a REST API With Express JS and Typescript - Part II (Organising Routes)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Express JS和Typescript构建REST API第二部分(组织路线)</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/how-to-build-a-rest-api-with-express-js-and-typescript-part-ii-organising-routes-ee293eeb16eb?source=collection_archive---------0-----------------------#2021-11-25">https://medium.com/geekculture/how-to-build-a-rest-api-with-express-js-and-typescript-part-ii-organising-routes-ee293eeb16eb?source=collection_archive---------0-----------------------#2021-11-25</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/f18e907b4a0d2abc1995bbc736cd5870.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pUi3vkj06Vqp_sXeiI-UbQ.jpeg"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx">Photo by <a class="ae hv" href="https://unsplash.com/@jstrippa?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">James Harrison</a> on <a class="ae hv" href="https://unsplash.com/s/photos/code?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><div class=""/><p id="8a01" class="pw-post-body-paragraph iw ix hy iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">在本系列的第一部分中，我讨论了如何用Typescript建立一个Express JS REST API项目。在那篇文章的结尾，我们创建了我们的<em class="ju"> home </em> route，并且能够在浏览器中测试我们的端点。</p><p id="3787" class="pw-post-body-paragraph iw ix hy iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">在这篇文章中，我将讨论如何组织我们的路线，以获得更清晰的代码，并使项目更容易维护。</p><p id="1e18" class="pw-post-body-paragraph iw ix hy iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated"><strong class="iy hz">先决条件</strong></p><p id="418e" class="pw-post-body-paragraph iw ix hy iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">您需要对使用Express framework for Node JS开发REST API有一个基本的了解。</p><p id="16ec" class="pw-post-body-paragraph iw ix hy iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">如果你已经阅读了这篇文章的第一部分，它也会更容易理解。</p><p id="cb14" class="pw-post-body-paragraph iw ix hy iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated"><strong class="iy hz">步骤1:创建路线文件夹</strong></p><p id="6679" class="pw-post-body-paragraph iw ix hy iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">打开<em class="ju"> vs代码</em>中的文件夹，创建一个新文件夹保存我们的路由文件。我喜欢把这个文件夹放在我项目的<em class="ju">根目录</em>下，和<em class="ju"> index.ts </em>文件在同一层。我们将这个文件夹命名为<em class="ju"> routes </em>。</p><figure class="jw jx jy jz fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es jv"><img src="../Images/e2d0af4585986568dbad4613a76f6553.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sIffIFSsbohS64Q1PTbRYQ.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx">Add routes folder</figcaption></figure><p id="4610" class="pw-post-body-paragraph iw ix hy iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated"><strong class="iy hz">第二步:添加我们的第一条路线(home.ts) </strong></p><p id="3642" class="pw-post-body-paragraph iw ix hy iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">在routes文件夹中创建新的typescript文件。这个文件将包含我们回家路线的代码。我们将把这个文件叫做<em class="ju"> home.ts. </em></p><figure class="jw jx jy jz fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es jv"><img src="../Images/ff33f7dd8519f308854d377989e966a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kOnBjma3HZb6Tcx0PW9fmg.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx">Create file for the home route</figcaption></figure><p id="a544" class="pw-post-body-paragraph iw ix hy iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated"><strong class="iy hz">步骤3:添加回家路线的代码</strong></p><p id="b8bf" class="pw-post-body-paragraph iw ix hy iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">我们将添加回家路线的代码，如下图所示</p><figure class="jw jx jy jz fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es jv"><img src="../Images/b03a03b740c80ad86a5abdd95480bd7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CC1hCMF66Gefcpc2AuX0zQ.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx">add home route in home.ts</figcaption></figure><p id="b3b2" class="pw-post-body-paragraph iw ix hy iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">将<em class="ju"> home.ts </em> route文件中的代码(如上所示)与我们之前在<em class="ju"> index.ts </em>(如下所示)<em class="ju"> </em>中编写的代码进行比较，你会发现很多相似之处。</p><figure class="jw jx jy jz fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es jv"><img src="../Images/86d4a9fb895f70a0710ba386c8f8adf7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cwVtEW58xweuGxyrmAuSVA.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx">index.ts file</figcaption></figure><p id="7533" class="pw-post-body-paragraph iw ix hy iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">在<em class="ju">route . ts</em>的<em class="ju">线1 </em>上，我们导入了快递，就像我们在<em class="ju"> index.ts </em>上做的一样。</p><p id="b17e" class="pw-post-body-paragraph iw ix hy iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">在<em class="ju">行2 </em>然而<em class="ju">、</em>不是调用<strong class="iy hz"> <em class="ju"> express()、</em> </strong>而是调用<strong class="iy hz"> <em class="ju"> express。Router() </em> </strong>并将它赋给一个变量，我称之为<em class="ju"> router </em> <strong class="iy hz"> <em class="ju">。</em> </strong>在<em class="ju">第5行</em>的<em class="ju"> home.ts </em>还有，你会注意到我没有使用<em class="ju"> app.get() </em>，而是使用了<em class="ju"> router.get()。</em></p><p id="79e8" class="pw-post-body-paragraph iw ix hy iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">在<em class="ju"> home.ts </em>的<em class="ju">第9 </em>行，我们对在<em class="ju"> home.ts. </em>的第2行创建的<em class="ju">路由器</em>进行<em class="ju">默认</em>导出，这将使我们的路由器可见地被导入到这个模块(<em class="ju"> homet.ts)之外。</em></p><p id="cb13" class="pw-post-body-paragraph iw ix hy iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated"><strong class="iy hz">第四步:在index.ts中导入回家路线</strong></p><figure class="jw jx jy jz fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es jv"><img src="../Images/4aa241e4c7997e1d40bf57b37a3a8d1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Mank--gYXWpyNVX9BtVjgQ.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx">Import home route in index.ts</figcaption></figure><p id="2edc" class="pw-post-body-paragraph iw ix hy iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">通过在<em class="ju"> home.ts </em>中导出路线，我们能够在另一个模块中导入它。我们在索引<em class="ju">ts</em>的<em class="ju">第4 </em>行将路线导入为<em class="ju"> home </em>，现在我们可以删除在<em class="ju"> index.ts </em>中用于home路线的代码，并将其替换为在<em class="ju">第6行截图中的代码。</em></p><p id="9871" class="pw-post-body-paragraph iw ix hy iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated"><strong class="iy hz">第四步:测试路线</strong></p><p id="14ab" class="pw-post-body-paragraph iw ix hy iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">我们现在准备测试代码。正如我们在本文的第<a class="ae hv" rel="noopener" href="/swlh/build-a-rest-api-with-express-js-and-typescript-dc2c8da89c52">部分</a>中所做的，我们将通过从终端运行以下脚本来运行package.json中的开发脚本</p><pre class="jw jx jy jz fd ka kb kc kd aw ke bi"><span id="91ba" class="kf kg hy kb b fi kh ki l kj kk">npm run dev</span></pre><p id="2a1a" class="pw-post-body-paragraph iw ix hy iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">然后，您可以在浏览器中访问下面的URL</p><pre class="jw jx jy jz fd ka kb kc kd aw ke bi"><span id="90bc" class="kf kg hy kb b fi kh ki l kj kk"><a class="ae hv" href="http://localhost:3000/" rel="noopener ugc nofollow" target="_blank">http://localhost:3000/</a></span></pre><p id="abca" class="pw-post-body-paragraph iw ix hy iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">你应该会在屏幕上看到一个类似下面截图中的文本</p><figure class="jw jx jy jz fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es jv"><img src="../Images/160bc1b1df3f187d881509bd34ef7eb3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xdl1BeqMpmvQ6kZr1JYwXA.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx">result of running npm run dev script</figcaption></figure><p id="4d53" class="pw-post-body-paragraph iw ix hy iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">您还应该看到在<em class="ju"> dist </em>文件夹中创建了一个新文件夹<em class="ju"> routes </em>。当你打开这个文件夹时，你会看到一个新文件，<em class="ju"> home.js </em>，它的代码类似于下面的代码</p><figure class="jw jx jy jz fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es jv"><img src="../Images/64f74251e1222127d65c00556f0443ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zrALx7XDyP76y5t5EUJvJw.png"/></div></div></figure><p id="22ac" class="pw-post-body-paragraph iw ix hy iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">您可以继续向您的路线添加更多的终点，或者在<em class="ju">路线</em>文件夹中创建新路线。</p><p id="65d6" class="pw-post-body-paragraph iw ix hy iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">您可以在这个github库的<em class="ju"> add-routes </em>分支上找到完整的代码:</p><pre class="jw jx jy jz fd ka kb kc kd aw ke bi"><span id="fe51" class="kf kg hy kb b fi kh ki l kj kk"><a class="ae hv" href="https://github.com/divinedela/express-typescript-apis/tree/add-routes" rel="noopener ugc nofollow" target="_blank">ht</a><a class="ae hv" href="https://github.com/divinedela/express-typescript-apis/tree/add-routes" rel="noopener ugc nofollow" target="_blank">https://github.com/divinedela/express-typescript-apis/tree/add-routes</a></span></pre><p id="5cf5" class="pw-post-body-paragraph iw ix hy iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">您也可以在这里找到本文的第一部分:</p><pre class="jw jx jy jz fd ka kb kc kd aw ke bi"><span id="d76b" class="kf kg hy kb b fi kh ki l kj kk"><a class="ae hv" rel="noopener" href="/swlh/build-a-rest-api-with-express-js-and-typescript-dc2c8da89c52">https://medium.com/swlh/build-a-rest-api-with-express-js-and-typescript-dc2c8da89c52</a></span></pre></div></div>    
</body>
</html>