<html>
<head>
<title>Creating Visualization of Stock Data for Technical Analysis</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为技术分析创建股票数据的可视化</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/creating-visualization-of-stock-data-for-technical-analysis-f0af74212256?source=collection_archive---------15-----------------------#2022-02-28">https://medium.com/geekculture/creating-visualization-of-stock-data-for-technical-analysis-f0af74212256?source=collection_archive---------15-----------------------#2022-02-28</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/80a833b51e32dfc0d14c2e84d3b611c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*7nfAmQsYXRZ8ebWMhKL2VA.jpeg"/></div></div></figure><p id="2050" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">本文将重点学习从雅虎金融导入特定股票的档案数据，进行必要的数据工程，以满足创建特定股票的简单移动平均线的基本可视化的要求。该图可用于对特定股票进行技术分析，并准备交易策略</p><p id="6f95" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在谈谈环境。我们会在谷歌实验室使用Jupyter笔记本。设置环境加载基本库，如pandas、numpy、Mathplot，分别用于数据框操作、数学函数和图形绘制。此外，导入yfinance库。如果在导入之前尚未安装软件包yfinance，您可能需要安装该软件包。</p><p id="25c1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> <em class="jo">导入熊猫为pd </em> </strong></p><p id="b9a7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">T5！pip安装yfinanceT7】</strong></p><p id="d633" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> <em class="jo">导入yfinance为yf </em> </strong></p><p id="0bc2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下一步是获取特定股票的正确股票代码标识符。你可以在雅虎财经的搜索引擎上找到。在本文中，我们将使用NSE中ITC股票的档案数据(股票标识符为ITC)。NS):-</p><p id="ae91" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> <em class="jo"> ITC= yf.download('ITC。' NS '，start = ' 2015–01–01 '，end= Todays_Date，progress=False) </em> </strong></p><p id="ebc7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下一步是从现有的ITC数据帧创建一个新的数据帧。在这个特征工程的过程中，我们将只保留那些对于特定技术分析的简单移动平均线所需要的特征。首先，通过执行下面给出的命令，我们将只保留关闭字段:-</p><p id="de95" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> <em class="jo"> ITC.tail(5) </em> </strong></p><p id="8bf3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">接下来，我们将通过执行下面的命令来计算最小值、最大值、标准差、中值和指数加权移动平均值。请注意，这一计算是在20天的时间内进行的。如果执行ITC_1.head(20 ),可以看到这些值是从第20个数据帧开始计算的</p><p id="8103" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> <em class="jo"> ITC_1= ITC.drop(['开盘'，'高'，'低'，'调整收盘'，'成交量']，axis =1) </em> </strong></p><p id="8d85" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"><em class="jo">ITC _ 1 . head(3)</em></strong></p><p id="d351" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要绘制图形，我们需要确保所需的库，具体来说是Mathplotlib.pyplot已经导入到当前环境中。在所创建的图表中，仅使用来自数据帧<strong class="is hj"> ITC_1、</strong>的三个值，即“<strong class="is hj"> min </strong>”、“<strong class="is hj"> mean </strong>”、“<strong class="is hj"> max </strong>”。为了确保所创建的图表充分可见，将只使用结束日期(尾部)的最后200个值。在图表中，最小值和最大值用绿色显示，而平均值用红色显示</p><p id="6bff" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> <em class="jo">窗口=20 </em> </strong></p><p id="6dc8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> <em class="jo"> ITC_1['分']= ITC_1['闭']。滚动(窗口=窗口)。</em>闵()</strong></p><p id="e478" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"><em class="jo">ITC _ 1[' max ']= ITC _ 1[' Close ']。滚动(窗口=窗口)。max() </em> </strong></p><p id="98d9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> <em class="jo"> ITC_1['均值']= ITC_1['接近']。滚动(窗口=窗口)。</em>均值()</strong></p><p id="dddd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"><em class="jo">ITC _ 1[' STD ']= ITC _ 1[' Close ']。滚动(窗口=窗口)。</em>STD()</strong></p><p id="6254" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> <em class="jo"> ITC_1['中值']= ITC_1['接近']。滚动(窗口=窗口)。</em>中位数()</strong></p><p id="2863" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"><em class="jo">ITC _ 1[' EWMA ']= ITC _ 1[' Close ']。ewm(半衰期=0.5，min_periods=window)。</em>均值()</strong></p><p id="9df6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"><em class="jo">ITC _ 1 . head(20)</em></strong></p><p id="341f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">接下来，我们将分别使用42天和242天滚动窗口的收盘价来创建简单的移动平均线，我们将使用它来创建图表。这将通过执行下述命令来实现:-</p><p id="1491" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"><em class="jo">ITC _ 1[' SMA 1 ']= ITC _ 1[' Close ']。滚动(窗口=42)。</em>均值()</strong></p><p id="cb1a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"><em class="jo">ITC _ 1[' sm a2 ']= ITC _ 1[' Close ']。滚动(窗口=252)。</em>均值()</strong></p><p id="87ea" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> <em class="jo"> ITC_1[['Close '，' SMA1 '，' SMA2']]。</em>尾巴()</strong></p><p id="8f1a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">继续使用数据集的三个值，即分别为42天和242天的简单移动平均值，我们将创建一个描述这三个值的图表。这将通过执行下面提到的命令来实现</p><blockquote class="jp jq jr"><p id="4f83" class="iq ir jo is b it iu iv iw ix iy iz ja js jc jd je jt jg jh ji ju jk jl jm jn hb bi translated"><strong class="is hj"> ITC_1[['Close '，' SMA1 '，' SMA2']]。plot(figsize=(20，6))；</strong></p></blockquote><p id="bfd8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">最后一步是建立头寸，即买入或卖出。我们将在数据框中创建另一个列或字段作为位置，它将是<strong class="is hj"> 1 </strong>，它将指示股票处于上升趋势，而<strong class="is hj"> -1 </strong>，它将表示股票处于下降趋势，这些反过来可用于准备交易策略。该位置将在图中用红色粗线表示。所有这些都可以通过执行下面给出的命令来实现</p><p id="a7a2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"><em class="jo">ITC _ 1 . dropna(in place = True)</em></strong></p><p id="1b81" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"><em class="jo">ITC _ 1[' positions ']= NP . where(ITC _ 1[' SMA 1 ']&gt;ITC _ 1[' SMA 2 ']，1，-1) </em> </strong></p><p id="d177" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> <em class="jo"> ax = ITC_1[['Close '，' SMA1 '，' SMA2 '，' positions']]。plot(figsize=(20，10)，secondary_y='positions '，)</em> </strong></p><p id="b889" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> <em class="jo"> ax.get_legend()。set_bbox_to_anchor((0.25，0.85))；</em> </strong></p><p id="9005" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> <em class="jo"> ax.set_facecolor("黄色")；</em> </strong></p><figure class="jw jx jy jz fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jv"><img src="../Images/24ed42eb4d08655eaeba2608795f1751.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4DztsVQLzDXtC4NWXJ4r2Q.png"/></div></div><figcaption class="ka kb et er es kc kd bd b be z dx">Technical Analysis : ITC Stock</figcaption></figure><p id="6a6b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我写这篇文章是为了那些刚刚进入数据可视化领域并对股票技术分析有基本了解的人。上面创建的材料专门用于自学和分享关于数据可视化的知识。</p><p id="358e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">参考:-</p><p id="7c08" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">上面这篇文章的Jupyter Notebook中的代码链接是<a class="ae ke" href="https://github.com/RajeevBhadola/myrepo/blob/master/Creating_Graph_for_Technical_Analysis_of_Specific_Stocks.ipynb" rel="noopener ugc nofollow" target="_blank">Creating _ Graph _ for _ Technical _ Analysis _ of _ Specific _ stocks . ipynb</a></p><figure class="jw jx jy jz fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/80a833b51e32dfc0d14c2e84d3b611c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*7nfAmQsYXRZ8ebWMhKL2VA.jpeg"/></div></div></figure></div></div>    
</body>
</html>