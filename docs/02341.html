<html>
<head>
<title>State in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">反应中的状态</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/state-in-react-b228c8c47a7d?source=collection_archive---------17-----------------------#2021-05-11">https://medium.com/geekculture/state-in-react-b228c8c47a7d?source=collection_archive---------17-----------------------#2021-05-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/4c86915a42b1e2629efc22679cdf4e6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eIOYZbJByVocUVVl9sQfZg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx"><strong class="bd iu">Table of Contents</strong></figcaption></figure><p id="770c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">状态是您存储属于组件的属性值的地方。更改状态将自动调用React DOM的render方法，并<strong class="ix hj">重新呈现</strong>组件。状态相当于道具，道具可以跨组件使用，但它具体到组件。</p><p id="c154" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">下图显示了状态初始化以及如何读取和更新状态值。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jt"><img src="../Images/f522a4ee29c2d430f1227c04a9846e86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_ogSZ4L2-814wB5bToE62Q.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx"><strong class="bd iu">Syntax of useState</strong></figcaption></figure><h2 id="fbf0" class="jy jz hi bd iu ka kb kc kd ke kf kg kh jg ki kj kk jk kl km kn jo ko kp kq kr bi translated"><strong class="ak">什么时候需要反应钩</strong>？</h2><p id="6f6d" class="pw-post-body-paragraph iv iw hi ix b iy ks ja jb jc kt je jf jg ku ji jj jk kv jm jn jo kw jq jr js hb bi translated">让我们来看一下<strong class="ix hj"> <em class="kx"> useEffect </em> </strong>函数，因为在我们的例子中我们不打算使用类组件，我们将使用一个无状态的功能组件，为了使它有状态，使用React hook方法<strong class="ix hj"> <em class="kx"> useEffect </em> </strong>。该方法在内部调用React生命周期方法<strong class="ix hj"><em class="kx">componentDIDMount</em></strong>使其有状态。</p><p id="a249" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在我们后面的故事中，我们将经历React生命周期方法，然后使用类组件转换同一个示例。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ky"><img src="../Images/94f26957f432014fe32c4ca57d7284cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OzxrHFabfoKPkf0QgoTQiQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx"><strong class="bd iu">Syntax of useEffect</strong></figcaption></figure><p id="e642" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">该图像提供了关于方法<strong class="ix hj"> <em class="kx">使用效果</em> </strong>的信息。阅读提到的<strong class="ix hj"> arg1 </strong>和<strong class="ix hj"> arg2 </strong>细节。</p><p id="9fd9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在看看这里的例子，我们知道<strong class="ix hj"> <em class="kx"> useEffect </em> </strong>方法只有在React DOM的初始渲染之后才开始执行，这意味着组件的基本JSX被渲染。</p><p id="9d70" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在<strong class="ix hj"> <em class="kx"> useEffect </em> </strong>中，一个异步方法作为<strong class="ix hj"> <em class="kx"> WeatherData </em> </strong>调用一个API来获取当前天气，然后它将数据放在已经渲染的React DOM中需要的地方。让我们看一个使用和不使用状态的例子。</p><h2 id="0552" class="jy jz hi bd iu ka kb kc kd ke kf kg kh jg ki kj kk jk kl km kn jo ko kp kq kr bi translated"><strong class="ak">无使用状态</strong> <a class="ae kz" href="https://codepen.io/071eE211/pen/zYNbZEM" rel="noopener ugc nofollow" target="_blank"> <strong class="ak">码笔</strong> </a></h2><p id="9d84" class="pw-post-body-paragraph iv iw hi ix b iy ks ja jb jc kt je jf jg ku ji jj jk kv jm jn jo kw jq jr js hb bi translated">问题陈述是以城市名称的形式提供输入，以获得城市的当前时间和温度。</p><p id="3951" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> API信息<br/> </strong> <a class="ae kz" href="http://home.openweathermap.org" rel="noopener ugc nofollow" target="_blank">注册</a>，从<a class="ae kz" href="https://home.openweathermap.org/api_keys" rel="noopener ugc nofollow" target="_blank">这里</a>获得你的免费API密匙</p><p id="7b26" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在下面的示例中，render方法在一秒钟的时间间隔内被调用，以呈现<strong class="ix hj"> <em class="kx"> AppContent </em> </strong>组件。一旦开始渲染，React Hook的<strong class="ix hj"> <em class="kx"> useEffect </em> </strong>方法被调用，React Hook又调用<strong class="ix hj"> <em class="kx"> WeatherData </em> </strong>回调来触发天气API以获取实时数据。最后，数据提供了城市名称，温度应该放在React DOM中。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es la"><img src="../Images/bb431f1bd8f20ea1e738074487851f37.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QLWqhSaF4Y37aenKHnbDGA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx"><strong class="bd iu">Without Using State</strong></figcaption></figure><h2 id="f501" class="jy jz hi bd iu ka kb kc kd ke kf kg kh jg ki kj kk jk kl km kn jo ko kp kq kr bi translated">使用状态<a class="ae kz" href="https://codepen.io/071eE211/pen/dyvoZRQ" rel="noopener ugc nofollow" target="_blank">码笔</a></h2><p id="b9de" class="pw-post-body-paragraph iv iw hi ix b iy ks ja jb jc kt je jf jg ku ji jj jk kv jm jn jo kw jq jr js hb bi translated">在前面的例子中，我们看到render方法以一秒的时间间隔被调用。让我们看看这里使用状态来避免这种调用。</p><p id="46b0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在下面的例子中，render方法只被调用一次来呈现<strong class="ix hj"> <em class="kx"> AppContent </em> </strong>组件，在此期间，与状态相关的信息以默认数据呈现。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lb"><img src="../Images/05883329e289280146e3edf506ff59f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A_N4LEixw9AYd53ZQziZLg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx"><strong class="bd iu">Using State</strong></figcaption></figure><p id="aa76" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">一旦开始渲染，React Hook的<strong class="ix hj"> <em class="kx"> useEffect </em> </strong>方法被调用，该方法又调用<strong class="ix hj"> <em class="kx"> WeatherData </em> </strong>回调来触发天气API以获取实时数据。此外，我们将setInterval时间移到了<strong class="ix hj"><em class="kx">weather data</em></strong><em class="kx">方法</em>中，该方法每隔一秒触发一次API调用，用API响应数据更新状态。正如我们已经知道的，只要状态改变，组件就会被重新呈现。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lc"><img src="../Images/c770de1f97aa1ca18d36f9e57b201c6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ywf7_CblWVadKFTn_jO-QQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx"><strong class="bd iu">Output</strong></figcaption></figure><p id="77d9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">希望它能给出React中<strong class="ix hj"> <em class="kx">状态的基本视图&amp;使用React钩子</em> </strong>中的Effect方法。如有疑问或修改，请写下您的问题。</p><p id="8a44" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们在下一个故事中讨论ReactJS的下一个特性。<br/>下一个话题<strong class="ix hj">:</strong><a class="ae kz" rel="noopener" href="/geekculture/lifecycle-of-react-component-cc5a3033635d"><strong class="ix hj">React组件的生命周期</strong> </a></p></div></div>    
</body>
</html>