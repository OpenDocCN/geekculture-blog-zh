<html>
<head>
<title>Dark mode with 1(or few) line of CSS 🌓</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">具有1行(或更少行)CSS的黑暗模式🌓</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/dark-mode-with-1-or-few-line-of-css-664207bff223?source=collection_archive---------28-----------------------#2021-11-30">https://medium.com/geekculture/dark-mode-with-1-or-few-line-of-css-664207bff223?source=collection_archive---------28-----------------------#2021-11-30</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/0e06c0bb5cc10dd225e237b39b223c59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*535o6NfOdUAAP5xB"/></div></div></figure><p id="0b59" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">本周我想在我的博客中加入黑暗模式(目前正在开发中)。所以我一直在寻找一个简单的解决方法。</p><p id="262e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我将介绍我自己的想法。但是后来我发现了同样的两篇文章。但是他们的解决方案有些不完整。</p><p id="9b76" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">是CSS过滤器</strong></p><p id="7b96" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae jo" href="https://dev.to/ksengine/dark-mode-with-1-line-of-css--4nkl#final-example" rel="noopener ugc nofollow" target="_blank">跳转到最终示例</a> <br/> <a class="ae jo" href="https://dev.to/ksengine/dark-mode-with-1-line-of-css--4nkl#final-demo" rel="noopener ugc nofollow" target="_blank">跳转到最终演示</a></p><p id="9980" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">黑暗模式有太多的名字，</p><ul class=""><li id="a33a" class="jp jq hi is b it iu ix iy jb jr jf js jj jt jn ju jv jw jx bi translated">亮对暗</li><li id="f282" class="jp jq hi is b it jy ix jz jb ka jf kb jj kc jn ju jv jw jx bi translated">黑色模式</li><li id="3216" class="jp jq hi is b it jy ix jz jb ka jf kb jj kc jn ju jv jw jx bi translated">黑暗模式</li><li id="7e51" class="jp jq hi is b it jy ix jz jb ka jf kb jj kc jn ju jv jw jx bi translated">黑暗主题</li><li id="293a" class="jp jq hi is b it jy ix jz jb ka jf kb jj kc jn ju jv jw jx bi translated">夜间模式</li></ul><p id="31cf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">黑暗模式是2018-2019年的趋势。</p><p id="9833" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">有一个愚蠢的方法可以做到这一点。</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="795f" class="km kn hi ki b fi ko kp l kq kr">.dark {<br/>  background-color: black; /* from white to black */<br/>  color: white; /* from black to white */<br/>}</span></pre><p id="9cb5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后写你的HTML。</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="e8b8" class="km kn hi ki b fi ko kp l kq kr">...<br/>&lt;body class="dark"&gt;<br/>  &lt;h1&gt;Hello World!&lt;/h1&gt;<br/>   ...<br/>&lt;/body&gt;<br/>...</span></pre><p id="d965" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">举例来说，这很好。在真实的网站中，有太多的样式项目，如按钮、提醒、模型等。当你把它们都设计成黑暗模式时，</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="bcd5" class="km kn hi ki b fi ko kp l kq kr">body {<br/>  background-color: ...;<br/>  color: ...;<br/>}<br/>.btn {<br/>  background-color: ...;<br/>  color: ...;<br/>}<br/>.btn.primary {<br/>  background-color: ...;<br/>  color: ...;<br/>}<br/>...<br/>...<br/>.dark {<br/>  background-color: ...;<br/>  color: ...;<br/>}<br/>.dark .btn {<br/>  background-color: ...;<br/>  color: ...;<br/>}<br/>.dark .btn.primary {<br/>  background-color: ...;<br/>  color: ...;<br/>}<br/>...<br/>...</span></pre><p id="eb11" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后你把你的CSS样式表翻倍。</p><p id="23f8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">减小样式表大小的解决方案是什么？？？<br/>CSS的超人来了。<strong class="is hj"> CSS变量(CSS自定义属性)！！！</strong></p><figure class="kd ke kf kg fd ij er es paragraph-image"><div class="er es ks"><img src="../Images/2e3b3401314a1f5d46bd00d9190b9736.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/0*TTPTX_7DOBRjd2kX"/></div></figure><p id="f152" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">将主题颜色定义为CSS变量。</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="c759" class="km kn hi ki b fi ko kp l kq kr">:root {<br/>  --text-color: black; <br/>  --bg-color: white;<br/>}<br/>.dark {<br/>  --text-color: white; <br/>  --bg-color: black;<br/>}</span></pre><p id="6b49" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后使用变量来设置颜色</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="9e1c" class="km kn hi ki b fi ko kp l kq kr">body, .dark {<br/>  background-color: var(--bg-color);<br/>  color: var(--text-color);<br/>}</span><span id="41cf" class="km kn hi ki b fi kt kp l kq kr">.btn {<br/>  background-color: var(--bg-color);<br/>  color: var(--text-color);<br/>}<br/>.btn.primary {<br/>  background-color: var(--bg-color);<br/>  color: var(--text-color);<br/>}<br/>...<br/>...</span></pre><p id="78a8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这工作得很好。</p><p id="9794" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">但我是开发者(作为爱好)。不是设计师。浅色主题和深色主题应该用哪些颜色？。</p><p id="d32d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后我找到了<a class="ae jo" href="https://darkmodejs.learn.uno/" rel="noopener ugc nofollow" target="_blank"> <em class="ku"> Darkmode.js </em> </a>。它使用CSS <code class="du kv kw kx ki b">mix-blend-mode: difference;</code>来启用整个网页的黑暗模式。这很复杂，有一些问题。除了使用JavaScript，任何人都可以在CSS中使用<code class="du kv kw kx ki b">mix-blend-mode</code>来启用黑暗主题。下面的例子解释了<code class="du kv kw kx ki b">mix-blend-mode: difference;</code>是如何工作的。</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="3ee2" class="km kn hi ki b fi ko kp l kq kr">light-theme-color = rgb(x, y, z)<br/>dark-theme-color = rgb(255-x, 255-y, 255-z)</span></pre><p id="93c5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">它将链接的颜色从蓝色转换为奇怪的黄色。</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="12f4" class="km kn hi ki b fi ko kp l kq kr">light-theme-color = rgb(0, 0, 238) = blue<br/>dark-theme-color = rgb(255-0, 255-0, 255-238) = rgb(255, 255, 17) = yellow</span></pre><p id="a58f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">几天后，我有了一个想法… <strong class="is hj"> CSS过滤器</strong></p><figure class="kd ke kf kg fd ij er es paragraph-image"><div class="er es ky"><img src="../Images/33b694247086efbc2387a77f654c2624.png" data-original-src="https://miro.medium.com/v2/resize:fit:536/0*Ns2t6C70WyNu3S9p"/></div></figure><p id="e5aa" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">使用反转滤镜启用黑暗模式。</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="fdd5" class="km kn hi ki b fi ko kp l kq kr">.dark {<br/>  filter: invert(100%);<br/>}</span></pre><p id="5c9b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后将<code class="du kv kw kx ki b">.dark</code>类添加到<code class="du kv kw kx ki b">html</code>标签中。那是最完美的地方。</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="8964" class="km kn hi ki b fi ko kp l kq kr">&lt;html class="dark"&gt;<br/>   ...<br/>&lt;/html&gt;</span></pre><p id="158d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这个方法没有文字颜色和背景颜色就不行。并在<code class="du kv kw kx ki b">html</code>和<code class="du kv kw kx ki b">body</code>标签上设置<code class="du kv kw kx ki b">height</code>到<code class="du kv kw kx ki b">100%</code>为无内容页面中的整页暗主题。</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="3d09" class="km kn hi ki b fi ko kp l kq kr">html,<br/>body {<br/>  color: #222;<br/>  background-color: #fff;<br/>  height: 100%;<br/>}</span></pre><p id="9953" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><code class="du kv kw kx ki b">invert(100%)</code>与<code class="du kv kw kx ki b">mix-blend-mode</code>相同。但是更简单。</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="2ad4" class="km kn hi ki b fi ko kp l kq kr">light-theme-color = rgb(x, y, z)<br/>dark-theme-color = rgb(255-x, 255-y, 255-z)</span></pre><p id="4b44" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">但是这种方法也有同样的问题。在黑暗模式下，链接是黄色的。为了解决这个问题，我们应该这样做</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="209c" class="km kn hi ki b fi ko kp l kq kr">.dark {<br/>  filter: invert(100%) hue-rotate(180deg);<br/>}</span></pre><p id="68a0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><code class="du kv kw kx ki b">hue-rotate(180deg)</code>将色调盘上的颜色更改为色调盘上的相反颜色。这是色轮。</p><figure class="kd ke kf kg fd ij er es paragraph-image"><div class="er es kz"><img src="../Images/b042d40716c18719bad2995d74348b18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/0*OX_hMQ2GuTwrqUJW.jpg"/></div></figure><p id="9ef4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下面的例子解释了<code class="du kv kw kx ki b">filter: invert(100%) hue-rotate(180deg);</code>如何用于链接颜色。</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="bfcd" class="km kn hi ki b fi ko kp l kq kr">light-theme-color = rgb(0, 0, 238) = blue<br/>inverted-color = rgb(255-0, 255-0, 255-238) = rgb(255, 255, 17) = yellow = hsl(60, 100%, 53%)<br/>hue-rotated-color = hsl(270, 100%, 53%) = light-blue</span></pre><p id="e0e8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">此滤镜也适用于图像。所以图像看起来很丑。要删除图像上的滤镜，请再次使用该滤镜。因此，同一个过滤器应用于图像两次。<code class="du kv kw kx ki b">inverse(100%) X inverse(100%) = inverse(0)</code>和<code class="du kv kw kx ki b">hue-rotate(180deg) X hue-rotate(180deg) = hue-rotate(0)</code>。</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="7235" class="km kn hi ki b fi ko kp l kq kr">.dark,<br/>.dark img {<br/>  filter: invert(100%) hue-rotate(180deg);<br/>}</span></pre><p id="3fd8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">对其他媒体元素做同样的事情。</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="4aff" class="km kn hi ki b fi ko kp l kq kr">.dark,<br/>.dark img,<br/>.dark picture,<br/>.dark video,<br/>.dark canvas {<br/>  filter: invert(100%) hue-rotate(180deg);<br/>}</span></pre><p id="b8bb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">创建一个名为<code class="du kv kw kx ki b">nofilter</code>的类，当你需要将黑色主题应用到媒体元素时使用。</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="ea9f" class="km kn hi ki b fi ko kp l kq kr">.nofilter {<br/>  filter: none !important;<br/>}</span></pre><p id="e614" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后在HTML中使用<code class="du kv kw kx ki b">nofilter</code></p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="f9f7" class="km kn hi ki b fi ko kp l kq kr">&lt;img class="nofilter" src="path/to/image" alt="something"/&gt;</span></pre><p id="43f3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">带点<code class="du kv kw kx ki b">transition</code>看起来很流畅。</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="6fe6" class="km kn hi ki b fi ko kp l kq kr">html,<br/>img,<br/>picture,<br/>video,<br/>canvas {<br/>  transition: filter 0.3s ease-in-out;<br/>}</span></pre><p id="37f0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我如何知道用户的偏好？？？。有一个CSS媒体查询可以做到这一点。</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="9a65" class="km kn hi ki b fi ko kp l kq kr">@media (prefers-color-scheme: dark) {<br/>  html,<br/>  img,<br/>  picture,<br/>  video,<br/>  canvas {<br/>    filter: invert(100%) hue-rotate(180deg);<br/>  }<br/>}</span></pre><p id="1d3b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我想创建一个黑暗模式切换按钮，并存储用户偏好。+或自动检测用户偏好。<code class="du kv kw kx ki b">localstorage</code>非常适合商店偏好。并使用<code class="du kv kw kx ki b">window.matchMedia</code>检查CSS媒体查询是否与当前状态匹配。</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="a519" class="km kn hi ki b fi ko kp l kq kr">if (<br/>  localStorage.theme === "dark" ||<br/>  (!("theme" in localStorage) &amp;&amp;<br/>    window.matchMedia("(prefers-color-scheme: dark)").matches)<br/>) {<br/>  document.documentElement.classList.add("dark");<br/>} else {<br/>  document.documentElement.classList.remove("dark");<br/>}</span></pre><p id="1cee" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这是我的切换按钮，带有一个SVG</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="17f6" class="km kn hi ki b fi ko kp l kq kr">&lt;button onclick="toggleDark()"&gt;<br/>  &lt;svg aria-hidden="true" data-prefix="fas" data-icon="moon"  viewBox="0 0 512 512" style="height: 2rem; width: 2rem;" class="svg-inline--fa fa-moon"&gt;<br/>    &lt;path fill="currentColor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36 0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"&gt;&lt;/path&gt;<br/>  &lt;/svg&gt;<br/>&lt;/button&gt;</span></pre><p id="9496" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">按钮是圆形和透明的。</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="baf9" class="km kn hi ki b fi ko kp l kq kr">button {<br/>  background: transparent;<br/>  border: transparent;<br/>  border-radius: 50%;<br/>  cursor: pointer;<br/>}</span></pre><p id="6413" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">有一个JavaScript函数来切换黑暗模式。</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="eda4" class="km kn hi ki b fi ko kp l kq kr">let toggleDark = () =&gt; {<br/>  let result = document.documentElement.classList.toggle("dark");<br/>  localStorage.theme = result ? "dark" : "light";<br/>};</span></pre><h1 id="7741" class="la kn hi bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">最后一个例子</h1><p id="d658" class="pw-post-body-paragraph iq ir hi is b it lx iv iw ix ly iz ja jb lz jd je jf ma jh ji jj mb jl jm jn hb bi translated">然后，我将引入上述代码的最小子集作为棘手的一个内衬。这个代码对于很多网站来说已经足够了。</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="de94" class="km kn hi ki b fi ko kp l kq kr">.dark, .dark img { filter: invert(100%) hue-rotate(180deg); }</span></pre><h1 id="9666" class="la kn hi bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">最终演示</h1><figure class="kd ke kf kg fd ij"><div class="bz dy l di"><div class="mc md l"/></div></figure><p id="86d3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我想知道你的想法。也许我可以创建一个黑暗模式库。</p><p id="3e69" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">享受这些文章。<br/>关注我获取更多文章。谢谢💖💖💖</p></div></div>    
</body>
</html>