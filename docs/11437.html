<html>
<head>
<title>Developer Guide about Haptics on Apple Platforms</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">苹果平台上的触觉开发者指南</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/developer-guide-about-haptics-on-apple-platforms-e0f6b68938d?source=collection_archive---------11-----------------------#2022-03-22">https://medium.com/geekculture/developer-guide-about-haptics-on-apple-platforms-e0f6b68938d?source=collection_archive---------11-----------------------#2022-03-22</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="e2fd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">触觉通过向用户施加力、振动或运动来创建触摸体验。苹果提供各种API，根据平台向应用开发者公开触觉。这篇博客文章介绍了这些不同的技术。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/af4bad70dad252c479c0b1678117a732.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Vgz9nwYqtTvbE_z2"/></div></div></figure><blockquote class="jp jq jr"><p id="23be" class="if ig js ih b ii ij ik il im in io ip jt ir is it ju iv iw ix jv iz ja jb jc hb bi translated"><em class="hi">触觉可以激发人们的触觉，增强与屏幕界面互动的体验。例如，除了视觉和听觉反馈之外，系统还会播放触觉，以强调Apple Pay交易的确认。触觉还可以增强触摸手势和交互，如滚动选择器或切换开关。</em></p></blockquote><p id="e523" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从苹果的<a class="ae jw" href="https://developer.apple.com/design/human-interface-guidelines/ios/user-interaction/haptics/" rel="noopener ugc nofollow" target="_blank">人机界面指南</a>中，我们了解到标准UI元素，例如开关、滑块或选择器，在默认情况下会播放苹果设计的系统触觉。HIG是了解更多系统定义触觉的绝佳场所。</p><p id="40ff" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以扩展并使用反馈发生器来播放三类预定义的触觉模式之一:通知、影响和选择。</p><p id="b079" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后，您可以将<code class="du jx jy jz ka b">CoreHaptics</code>框架用于更复杂的场景。它允许您通过结合瞬时和连续事件、不同的清晰度和强度以及可选的音频内容来创建各种不同的触觉体验。</p><h1 id="e95c" class="kb kc hi bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">反馈发生器</h1><p id="88c3" class="pw-post-body-paragraph if ig hi ih b ii kz ik il im la io ip iq lb is it iu lc iw ix iy ld ja jb jc hb bi translated"><code class="du jx jy jz ka b">UIKit</code>为您提供反馈生成器，通过播放几个预定义的触觉模式之一，将您自己的反馈添加到自定义视图和控件中。</p><p id="e812" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">抽象类<a class="ae jw" href="https://developer.apple.com/documentation/uikit/uifeedbackgenerator" rel="noopener ugc nofollow" target="_blank"> UIFeedbackGenerator </a>是所有反馈生成器的超类。<strong class="ih hj">别费心了</strong>。</p><p id="e1ef" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">而是看一看并使用它的三个子类之一:</p><ul class=""><li id="1ea3" class="le lf hi ih b ii ij im in iq lg iu lh iy li jc lj lk ll lm bi translated"><code class="du jx jy jz ka b"><a class="ae jw" href="https://developer.apple.com/documentation/uikit/uiimpactfeedbackgenerator" rel="noopener ugc nofollow" target="_blank">UIImpactFeedbackGenerator</a></code></li><li id="2cfb" class="le lf hi ih b ii ln im lo iq lp iu lq iy lr jc lj lk ll lm bi translated"><code class="du jx jy jz ka b"><a class="ae jw" href="https://developer.apple.com/documentation/uikit/uiselectionfeedbackgenerator" rel="noopener ugc nofollow" target="_blank">UISelectionFeedbackGenerator</a></code></li><li id="b5b5" class="le lf hi ih b ii ln im lo iq lp iu lq iy lr jc lj lk ll lm bi translated"><code class="du jx jy jz ka b"><a class="ae jw" href="https://developer.apple.com/documentation/uikit/uinotificationfeedbackgenerator" rel="noopener ugc nofollow" target="_blank">UINotificationFeedbackGenerator</a></code></li></ul><p id="2cf1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面是一个在SwiftUI中使用<code class="du jx jy jz ka b">UINotificationFeedbackGenerator</code>的例子。</p><pre class="je jf jg jh fd ls ka lt lu aw lv bi"><span id="0de5" class="lw kc hi ka b fi lx ly l lz ma">import SwiftUI<br/>import UIKit</span><span id="640f" class="lw kc hi ka b fi mb ly l lz ma">struct ContentView: View {<br/>    var body: some View {<br/>        VStack {<br/>            Text("Hello, World!")<br/>                .onTapGesture {<br/>                    let generator = UINotificationFeedbackGenerator()<br/>                    generator.notificationOccurred(.success)<br/>                }<br/>        }<br/>    }<br/>}</span></pre><p id="3e49" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有关更多详情，请阅读<a class="ae jw" href="https://developer.apple.com/documentation/uikit/uifeedbackgenerator" rel="noopener ugc nofollow" target="_blank">文档</a>。</p><h1 id="0c23" class="kb kc hi bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">核心触觉</h1><p id="7864" class="pw-post-body-paragraph if ig hi ih b ii kz ik il im la io ip iq lb is it iu lc iw ix iy ld ja jb jc hb bi translated">撰写和播放触觉模式，以定制您的应用程序的触觉反馈。</p><blockquote class="jp jq jr"><p id="5acf" class="if ig js ih b ii ij ik il im in io ip jt ir is it ju iv iw ix jv iz ja jb jc hb bi translated"><em class="hi"> Core Haptics允许您向应用程序添加定制的触觉和音频反馈。使用触觉来吸引用户，通过触觉和听觉反馈来吸引注意力并强化行动。一些系统提供的界面元素——如选择器、开关和滑块——在用户与它们交互时自动提供触觉反馈。使用核心触觉，您可以通过在默认模式之外组合和组合触觉来扩展这种功能。</em></p></blockquote><p id="340d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du jx jy jz ka b">CoreHaptics</code>是它自己的框架，不是<code class="du jx jy jz ka b">UIKit</code>的一部分。<code class="du jx jy jz ka b">CoreHaptics</code>奔流不息</p><ul class=""><li id="86d4" class="le lf hi ih b ii ij im in iq lg iu lh iy li jc lj lk ll lm bi translated">iOS 13.0以上</li><li id="1137" class="le lf hi ih b ii ln im lo iq lp iu lq iy lr jc lj lk ll lm bi translated">iPadOS 13.0以上</li><li id="831f" class="le lf hi ih b ii ln im lo iq lp iu lq iy lr jc lj lk ll lm bi translated">Mac催化剂13.0以上</li><li id="74e6" class="le lf hi ih b ii ln im lo iq lp iu lq iy lr jc lj lk ll lm bi translated">tvOS 14.0以上</li></ul><p id="6efa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我强烈推荐来自<a class="ae jw" href="http://raywenderlich.com" rel="noopener ugc nofollow" target="_blank">raywenderlich.com</a>的<a class="ae jw" href="https://www.raywenderlich.com/10608020-getting-started-with-core-haptics" rel="noopener ugc nofollow" target="_blank">核心触觉学入门</a>教程，然后看看苹果的<a class="ae jw" href="https://developer.apple.com/documentation/corehaptics" rel="noopener ugc nofollow" target="_blank">文档</a>。</p><p id="90bf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然而，我想给你一个在SwiftUI应用程序中使用核心触觉的例子。我将<code class="du jx jy jz ka b">CoreHaptics</code>的使用封装在一个符合<code class="du jx jy jz ka b">ObservableObject</code>的引用类型中。</p><pre class="je jf jg jh fd ls ka lt lu aw lv bi"><span id="4fbe" class="lw kc hi ka b fi lx ly l lz ma">import CoreHaptics</span><span id="5a85" class="lw kc hi ka b fi mb ly l lz ma">class HapticManager: ObservableObject {<br/>    private var hapticEngine: CHHapticEngine? = nil</span><span id="1f75" class="lw kc hi ka b fi mb ly l lz ma">init() {<br/>        let hapticCapability = CHHapticEngine.capabilitiesForHardware()<br/>        guard hapticCapability.supportsHaptics else {<br/>            print("Device does not support Haptics")<br/>            return<br/>        }</span><span id="bf84" class="lw kc hi ka b fi mb ly l lz ma">do {<br/>            hapticEngine = try CHHapticEngine()<br/>        } catch let error {<br/>            print("Haptic engine not created: \(error)")<br/>        }<br/>    }<br/>}</span></pre><p id="d859" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我通过扩展创建了一个自定义的触觉。</p><pre class="je jf jg jh fd ls ka lt lu aw lv bi"><span id="d10b" class="lw kc hi ka b fi lx ly l lz ma">extension HapticManager {<br/>    func intenseSharpTap() {<br/>        var events = [CHHapticEvent]()</span><span id="d7f5" class="lw kc hi ka b fi mb ly l lz ma">        // create one intense, sharp tap<br/>        let intensity = CHHapticEventParameter(parameterID: .hapticIntensity, value: 1)<br/>        let sharpness = CHHapticEventParameter(parameterID: .hapticSharpness, value: 1)<br/>        let event = CHHapticEvent(eventType: .hapticTransient, parameters: [intensity, sharpness], relativeTime: 0)<br/>        events.append(event)</span><span id="e56d" class="lw kc hi ka b fi mb ly l lz ma">        // convert those events into a pattern and play it immediately<br/>        do {<br/>            let pattern = try CHHapticPattern(events: events, parameters: [])<br/>            let player = try hapticEngine?.makePlayer(with: pattern)<br/>            try player?.start(atTime: 0)<br/>        } catch {<br/>            print("Failed to play pattern: \(error.localizedDescription).")<br/>        }<br/>    }<br/>}</span></pre><p id="7e16" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后，我可以在我的视图中使用引用类型作为<code class="du jx jy jz ka b">@StateObject</code>，并通过<code class="du jx jy jz ka b">onTapGesture</code>视图修改器分配触觉。</p><pre class="je jf jg jh fd ls ka lt lu aw lv bi"><span id="fa8f" class="lw kc hi ka b fi lx ly l lz ma">import SwiftUI</span><span id="1e46" class="lw kc hi ka b fi mb ly l lz ma">struct ContentView: View {<br/>    <a class="ae jw" href="http://twitter.com/StateObject" rel="noopener ugc nofollow" target="_blank">@StateObject</a> var hapticManager = HapticManager()</span><span id="7826" class="lw kc hi ka b fi mb ly l lz ma">    var body: some View {<br/>        VStack {<br/>            Text("Hello, World!")<br/>                .onTapGesture(perform:hapticManager.intenseSharpTap)<br/>        }<br/>    }<br/>}</span></pre><h1 id="b039" class="kb kc hi bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">马科斯</h1><p id="6ca5" class="pw-post-body-paragraph if ig hi ih b ii kz ik il im la io ip iq lb is it iu lc iw ix iy ld ja jb jc hb bi translated"><code class="du jx jy jz ka b">UIKit</code>和<code class="du jx jy jz ka b">CoreHaptics</code>可用于带有Mac Catalyst的macOS应用。但如果你想使用与Mac的Force Touch触控板相关的触觉，你必须使用<code class="du jx jy jz ka b">AppKit</code>框架。</p><p id="b407" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du jx jy jz ka b">AppKit</code>为您提供<code class="du jx jy jz ka b"><a class="ae jw" href="https://developer.apple.com/documentation/appkit/nshapticfeedbackmanager" rel="noopener ugc nofollow" target="_blank">NSHapticFeedbackManager</a></code>来访问带有Force Touch触控板的系统上的触觉反馈管理属性。</p><p id="a655" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，您可以为enum<a class="ae jw" href="https://developer.apple.com/documentation/appkit/nshapticfeedbackmanager/feedbackpattern" rel="noopener ugc nofollow" target="_blank">NSHapticFeedbackManager中指定的三个类别创建触觉反馈。反馈模式</a>:</p><ul class=""><li id="c70b" class="le lf hi ih b ii ij im in iq lg iu lh iy li jc lj lk ll lm bi translated">对齐:用于响应用户拖动的对象的对齐</li><li id="8120" class="le lf hi ih b ii ln im lo iq lp iu lq iy lr jc lj lk ll lm bi translated">级别:当用户在不同的压力级别之间移动时使用</li><li id="6d9e" class="le lf hi ih b ii ln im lo iq lp iu lq iy lr jc lj lk ll lm bi translated">一般:当没有其他反馈模式适用时，使用此选项。</li></ul><h1 id="9408" class="kb kc hi bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">watchOS</h1><p id="16ab" class="pw-post-body-paragraph if ig hi ih b ii kz ik il im la io ip iq lb is it iu lc iw ix iy ld ja jb jc hb bi translated"><a class="ae jw" href="https://developer.apple.com/design/human-interface-guidelines/watchos/interaction/haptics" rel="noopener ugc nofollow" target="_blank">苹果的watchOS人机界面指南</a>解释了watchOS中的系统触觉。</p><p id="9b4d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过<code class="du jx jy jz ka b"><a class="ae jw" href="https://developer.apple.com/documentation/watchkit/wkhaptictype" rel="noopener ugc nofollow" target="_blank">WKHapticType</a></code>预定义了以下反馈方式</p><ul class=""><li id="93d9" class="le lf hi ih b ii ij im in iq lg iu lh iy li jc lj lk ll lm bi translated">通知</li><li id="b0cc" class="le lf hi ih b ii ln im lo iq lp iu lq iy lr jc lj lk ll lm bi translated">方向图</li><li id="aa5c" class="le lf hi ih b ii ln im lo iq lp iu lq iy lr jc lj lk ll lm bi translated">向下方向</li><li id="30cf" class="le lf hi ih b ii ln im lo iq lp iu lq iy lr jc lj lk ll lm bi translated">成功</li><li id="5281" class="le lf hi ih b ii ln im lo iq lp iu lq iy lr jc lj lk ll lm bi translated">失败</li><li id="aa3a" class="le lf hi ih b ii ln im lo iq lp iu lq iy lr jc lj lk ll lm bi translated">重试</li><li id="1ac2" class="le lf hi ih b ii ln im lo iq lp iu lq iy lr jc lj lk ll lm bi translated">开始</li><li id="2e6a" class="le lf hi ih b ii ln im lo iq lp iu lq iy lr jc lj lk ll lm bi translated">停止</li><li id="90d5" class="le lf hi ih b ii ln im lo iq lp iu lq iy lr jc lj lk ll lm bi translated">点击</li><li id="dc93" class="le lf hi ih b ii ln im lo iq lp iu lq iy lr jc lj lk ll lm bi translated">导航通用策略</li><li id="f9d5" class="le lf hi ih b ii ln im lo iq lp iu lq iy lr jc lj lk ll lm bi translated">导航左转</li><li id="4a22" class="le lf hi ih b ii ln im lo iq lp iu lq iy lr jc lj lk ll lm bi translated">导航右转</li></ul><p id="95e1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在Swift中非常容易使用<code class="du jx jy jz ka b"><a class="ae jw" href="https://developer.apple.com/documentation/watchkit/wkinterfacedevice" rel="noopener ugc nofollow" target="_blank">WKInterfaceDevice</a></code>。</p><pre class="je jf jg jh fd ls ka lt lu aw lv bi"><span id="390b" class="lw kc hi ka b fi lx ly l lz ma">WKInterfaceDevice.currentDevice().playHaptic(.Success)</span></pre></div><div class="ab cl mc md gp me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="hb hc hd he hf"><p id="a6ac" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="js">最初发布于</em><a class="ae jw" href="https://blog.eidinger.info/haptics-on-apple-platforms" rel="noopener ugc nofollow" target="_blank"><em class="js">https://blog . eidinger . info</em></a><em class="js">。</em></p></div></div>    
</body>
</html>