<html>
<head>
<title>How to Download and Visualize Financial Data for Free with Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Python免费下载和可视化财务数据</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/how-to-load-and-visualize-financial-data-for-free-with-python-651beff31cb8?source=collection_archive---------24-----------------------#2021-06-29">https://medium.com/geekculture/how-to-load-and-visualize-financial-data-for-free-with-python-651beff31cb8?source=collection_archive---------24-----------------------#2021-06-29</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/249ea1d32377cff8e1292aabe22eb36a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1314/format:webp/1*8BwPz1fcRU2JPozD6ALcvA.png"/></div></figure><p id="2e0e" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><em class="jk">喜欢这篇文章吗？通过订阅我的</em> <a class="ae jl" href="https://whynance.substack.com/" rel="noopener ugc nofollow" target="_blank"> <em class="jk">时事通讯</em> </a> <em class="jk">，在您的收件箱中获得更多类似的文章。</em></p><p id="ad49" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">如果你刚刚开始股票交易(尤其是算法交易)，你可能正在寻找可靠的数据来测试你的策略。幸运的是，有大量的免费数据可用，您可以使用<a class="ae jl" href="https://github.com/" rel="noopener ugc nofollow" target="_blank"> Githu </a> b上免费提供的工具来访问这些数据。本教程将帮助您开始使用Python，并向您展示如何使用三个免费的Python包来免费下载和可视化财务数据:<a class="ae jl" href="https://github.com/pandas-dev/pandas" rel="noopener ugc nofollow" target="_blank"> pandas </a>、<a class="ae jl" href="https://github.com/ranaroussi/yfinance" rel="noopener ugc nofollow" target="_blank"> yfinance </a>和<a class="ae jl" href="https://github.com/matplotlib/mplfinance" rel="noopener ugc nofollow" target="_blank"> mplfinance </a>。</p><h1 id="37b7" class="jm jn hi bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated">先决条件</h1><p id="eb6a" class="pw-post-body-paragraph im in hi io b ip kk ir is it kl iv iw ix km iz ja jb kn jd je jf ko jh ji jj hb bi translated">我假设你对Python有所了解，并且你已经安装了Jupyter T21。如果您的计算机上还没有设置Python环境，我建议您使用<a class="ae jl" href="https://www.anaconda.com/products/individual" rel="noopener ugc nofollow" target="_blank"> Anaconda </a>安装一个，然后按照<a class="ae jl" href="https://jupyter.org/install" rel="noopener ugc nofollow" target="_blank"> Jupyter安装指南</a>安装。</p><p id="bb61" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">安装Python和Jupyter后，在终端中执行以下命令:</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="daf4" class="ky jn hi ku b fi kz la l lb lc">pip install yfinance mplfinance</span></pre><p id="7d76" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">它将安装本教程所需的三个包。现在您已经安装了Jupyter，您可以启动一个笔记本并按照本教程进行交互。</p><h1 id="078c" class="jm jn hi bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated">用<code class="du ld le lf ku b">yfinance</code>下载财务数据</h1><p id="2200" class="pw-post-body-paragraph im in hi io b ip kk ir is it kl iv iw ix km iz ja jb kn jd je jf ko jh ji jj hb bi translated">这个<code class="du ld le lf ku b">yfinance</code>包让我们从<a class="ae jl" href="https://finance.yahoo.com/" rel="noopener ugc nofollow" target="_blank">雅虎财经</a>下载免费数据。至少，你需要知道你想要下载的股票行情，你想要数据的时间范围，以及你感兴趣的数据的分辨率(或“时间间隔”)。</p><p id="d4ce" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">首先，让我们下载苹果(Apple)、通用电气(General Electric)和3M去年的每日价格数据。</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="d85f" class="ky jn hi ku b fi kz la l lb lc">import yfinance as yf<br/></span><span id="9b53" class="ky jn hi ku b fi lg la l lb lc"># download some data from yahoo<br/>data = yf.download(<br/>        tickers = ['AAPL', 'GE', 'MMM'],<br/>        period = '52wk',<br/>        interval = '1d'<br/>    )</span><span id="ebcb" class="ky jn hi ku b fi lg la l lb lc">prices = data['Adj Close']</span><span id="8cb8" class="ky jn hi ku b fi lg la l lb lc">print(f"Retrieved {len(prices)} data points from Yahoo Finance")</span></pre><p id="6cf9" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">你可能会感到困惑，去年你下载了不到365个每日数据点——这是因为一年只有大约252个交易日(有趣的金融事实)。</p><p id="ee5b" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我们可以用熊猫来查看我们下载的数据。先说熊猫内置的<code class="du ld le lf ku b">describe()</code>功能。</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="52c1" class="ky jn hi ku b fi kz la l lb lc">data.describe()</span></pre><p id="c8bd" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">您应该会看到一个统计表，描述了我们下载的数据，包括所有的列。这告诉我们，我们已经下载了我们想要的三只股票的OHLCV数据:苹果、通用电气和3M。OHLCV数据是指“开盘价、最高价、最低价、收盘价和成交量”。在后面的教程中，我会详细解释这意味着什么。但是现在请注意，我们已经下载了这些列:开盘价、最高价、最低价、收盘价和成交量(以及“调整收盘价”，我稍后会谈到)。</p><p id="d11a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">您会注意到，所有报价机的数据都堆叠在一起。为了绘制每个跑马灯，我们需要使用一些<code class="du ld le lf ku b">pandas</code>魔法来区分每个跑马灯。为了将AAPL数据从其余数据中分离出来，我们可以:</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="cdb4" class="ky jn hi ku b fi kz la l lb lc">appl_data = data.stack(level=0).AAPL.unstack(level=1)</span></pre><p id="9daf" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这样我们就可以详细查看苹果的数据了:</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="f80c" class="ky jn hi ku b fi kz la l lb lc">appl_data.describe()</span></pre><p id="c7e7" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">你可能已经注意到，除了OHLCV的数据，我们还下载了一个“Adj Close”栏，代表“调整后的收盘”。该数据修改了价格，以说明<a class="ae jl" href="https://en.wikipedia.org/wiki/Dividend" rel="noopener ugc nofollow" target="_blank">股息</a>和<a class="ae jl" href="https://www.investopedia.com/terms/s/stocksplit.asp" rel="noopener ugc nofollow" target="_blank">股票分割</a>。我们不会深入探讨这意味着什么，我们只是把调整后的收盘价作为每只股票的“每日价格”。因为那是我们将要使用的价格，我们也可以<code class="du ld le lf ku b">describe()</code>只是价格数据。</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="340a" class="ky jn hi ku b fi kz la l lb lc">prices.describe()</span></pre><p id="47c1" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">哪个更容易理解:我们可以很容易地看到我们三只股票在过去一年的平均价格和波动性(标准差)。</p><p id="de23" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在我们有了数据，我们终于可以绘制它了！</p><h1 id="d709" class="jm jn hi bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated">用<code class="du ld le lf ku b">mplfinance</code>可视化财务数据</h1><p id="a164" class="pw-post-body-paragraph im in hi io b ip kk ir is it kl iv iw ix km iz ja jb kn jd je jf ko jh ji jj hb bi translated"><code class="du ld le lf ku b">mplfinance</code>图书馆将帮助我们制作精美的<em class="jk">烛台图表</em>。既然我们已经将我们的苹果数据分开，让我们绘制前两周的数据(通过使用<code class="du ld le lf ku b">iloc[:14]</code>):</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="069e" class="ky jn hi ku b fi kz la l lb lc">mpf.plot(appl_data.iloc[:14], type='candle', title='AAPL')</span></pre><figure class="kp kq kr ks fd ij er es paragraph-image"><div class="er es if"><img src="../Images/249ea1d32377cff8e1292aabe22eb36a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1314/format:webp/1*8BwPz1fcRU2JPozD6ALcvA.png"/></div></figure><p id="f925" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这张图表使用了我们下载的所有数据，让我们很好地了解了苹果的价格在这两周的走势。我们可以对其他的报价机做同样的事情。让我们绘制3M:</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="c834" class="ky jn hi ku b fi kz la l lb lc">mmm_data = data.stack(level=0).MMM.unstack(level=1)<br/>mpf.plot(mmm_data.iloc[:14], type='candle', title='MMM')</span></pre><figure class="kp kq kr ks fd ij er es paragraph-image"><div class="er es if"><img src="../Images/8fbb17ce02e043b5f3251a8d90e152d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1314/format:webp/1*e6heYXiFTBFuEfMJT0VkOg.png"/></div></figure><h1 id="ea9b" class="jm jn hi bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated">结论</h1><p id="251e" class="pw-post-body-paragraph im in hi io b ip kk ir is it kl iv iw ix km iz ja jb kn jd je jf ko jh ji jj hb bi translated">我们做到了！我们已经下载了多个tickers一整年的数据，并创造了一些奇特的情节来展示它。在未来的教程中，我们将讨论如何阅读我们绘制的图表，并更深入地研究数据。</p></div></div>    
</body>
</html>