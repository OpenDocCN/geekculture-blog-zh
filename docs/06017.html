<html>
<head>
<title>Setting Up Rails 6.1 + Tailwind CSS 2.2 with JIT</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用JIT设置Rails 6.1 + Tailwind CSS 2.2</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/setting-up-rails-6-1-tailwind-css-2-2-with-jit-41a237ca22dc?source=collection_archive---------6-----------------------#2021-08-04">https://medium.com/geekculture/setting-up-rails-6-1-tailwind-css-2-2-with-jit-41a237ca22dc?source=collection_archive---------6-----------------------#2021-08-04</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/9d49ccba8c264a12c95b6fe94d931700.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C_HRFzg3xBDWj_YFvl4KwQ.png"/></div></div></figure><p id="b0a4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我将向您展示如何使用<em class="jo"> Rails 6.1 </em>及其默认<em class="jo"> Webpacker </em>版本(4.5)创建一个项目，并配置<em class="jo"> Tailwind CSS </em>，启用其依赖项和<em class="jo"> JIT </em>模式。</p><p id="ca35" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您将得到一个自动编译最终CSS的项目，并在每次更改后为您刷新浏览器。</p><p id="4c37" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">创建一个<em class="jo"> Rails </em>应用程序:</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="55c2" class="jy jz hi ju b fi ka kb l kc kd">rails new tailwind-jit-rails</span></pre><p id="e032" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">安装<em class="jo">顺风CSS </em>依赖项。打开终端并运行:</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="36c5" class="jy jz hi ju b fi ka kb l kc kd">yarn add @fullhuman/postcss-purgecss@^4 postcss@^8 postcss-loader@^4 autoprefixer@^10 tailwindcss@^2</span></pre><p id="dbeb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">创建文件<code class="du ke kf kg ju b">app/javascript/stylesheets/application.scss</code>(您必须创建<code class="du ke kf kg ju b">stylesheets</code>目录)。</p><p id="b3f9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在打开<code class="du ke kf kg ju b">application.scss</code>并添加<em class="jo">顺风CSS </em>指令:</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="a30a" class="jy jz hi ju b fi ka kb l kc kd">@tailwind base;<br/>@tailwind components;<br/>@tailwind utilities;</span></pre><p id="6b99" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">记住这是一个<em class="jo"> SCSS </em>文件，所以你可以在这里添加你以后需要的<em class="jo"> SCSS </em>代码。</p><p id="d6f3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">打开<code class="du ke kf kg ju b">app/javascript/packs/application.js</code>并添加该导入以包含新的<code class="du ke kf kg ju b">application.scss</code>:</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="23fd" class="jy jz hi ju b fi ka kb l kc kd">import "stylesheets/application.scss"</span></pre><p id="baa3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">将该行放在最后一个<code class="du ke kf kg ju b">import</code>(通道)的下方。</p><p id="4cf8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">打开<code class="du ke kf kg ju b">postcss.config.js</code>并将此<code class="du ke kf kg ju b">require</code>添加到<code class="du ke kf kg ju b">plugins</code>数组的开头，就在第一个<code class="du ke kf kg ju b">require</code>之前:</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="2628" class="jy jz hi ju b fi ka kb l kc kd">require('tailwindcss')</span></pre><p id="d02a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">打开<code class="du ke kf kg ju b">app/views/layouts/application.html.erb</code>并将其添加到<code class="du ke kf kg ju b">stylesheet_link_tag</code>之前:</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="2c40" class="jy jz hi ju b fi ka kb l kc kd">&lt;%= stylesheet_pack_tag 'application', 'data-turbolinks-track': 'reload' %&gt;</span></pre><p id="5434" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">所以它看起来像这样:</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="e613" class="jy jz hi ju b fi ka kb l kc kd">&lt;%= stylesheet_pack_tag 'application', 'data-turbolinks-track': 'reload' %&gt;<br/>&lt;%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %&gt;<br/>&lt;%= javascript_pack_tag 'application', 'data-turbolinks-track': 'reload' %&gt;</span></pre><p id="aac8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在您可以在终端中创建<em class="jo">顺风CSS </em>配置文件:</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="1ec1" class="jy jz hi ju b fi ka kb l kc kd">npx tailwindcss init</span></pre><p id="0d3c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">启用<em class="jo"> JIT </em>模式并配置<code class="du ke kf kg ju b">purge</code>选项，如下所示:</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="5d56" class="jy jz hi ju b fi ka kb l kc kd">mode: 'jit',<br/>purge: [<br/>  './app/views/**/*.html.erb',<br/>  './app/helpers/**/*.rb',<br/>  './app/javascript/**/*.js',<br/>],</span></pre><p id="1bef" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为了防止<em class="jo">网络打包机</em>产生一个相当烦人的警告信息，打开<code class="du ke kf kg ju b">babel.config.js</code>并在底部添加这个，就在关闭<code class="du ke kf kg ju b">].filter(Boolean)</code>之前:</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="98ca" class="jy jz hi ju b fi ka kb l kc kd">['@babel/plugin-proposal-private-methods', { loose: true }],<br/>['@babel/plugin-proposal-private-property-in-object', { loose: true }]</span></pre><p id="00ac" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">请记住在前面的元素中添加一个逗号。它看起来会像这样:</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="d88c" class="jy jz hi ju b fi ka kb l kc kd">[<br/>'@babel/plugin-transform-regenerator',<br/>  {<br/>    async: false<br/>  }<br/>],<br/>['@babel/plugin-proposal-private-methods', { loose: true }],<br/>['@babel/plugin-proposal-private-property-in-object', { loose: true }]</span></pre><p id="5ca2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">最后，为了让<em class="jo"> Webpacker 5 </em>与<em class="jo"> PostCSS 8 </em>一起工作，我们需要添加一个小黑客。打开<code class="du ke kf kg ju b">config/webpack/environment.js</code>并将其添加到<code class="du ke kf kg ju b">module.exports = environment</code>之前:</p><figure class="jp jq jr js fd ij"><div class="bz dy l di"><div class="kh ki l"/></div></figure><p id="b852" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">就是这样！</strong></p><p id="695b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果您想测试它是否工作，创建一个测试控制器:rails g controller Home index</p><p id="1b4f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在<code class="du ke kf kg ju b">config/routes.rb</code>中增加<code class="du ke kf kg ju b">root</code>:</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="4138" class="jy jz hi ju b fi ka kb l kc kd">root 'home#index'</span></pre><p id="6fad" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">打开<code class="du ke kf kg ju b">app/views/home/index.html.erb</code>并像这样创建一个<code class="du ke kf kg ju b">H1</code>:</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="4a5f" class="jy jz hi ju b fi ka kb l kc kd">&lt;h1 class="font-bold text-4xl text-center text-red-500"&gt;Hello World!&lt;/h1&gt;</span></pre><p id="ffe1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在在终端选项卡中打开<em class="jo"> Webpacker </em>服务器:</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="7b4b" class="jy jz hi ju b fi ka kb l kc kd">bin/webpack-dev-server</span></pre><p id="862e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在另一个选项卡中显示<em class="jo"> Rails </em>服务器:</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="082d" class="jy jz hi ju b fi ka kb l kc kd">bin/rails s</span></pre><p id="0a07" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">打开浏览器并加载<code class="du ke kf kg ju b">localhost:3000</code></p><p id="738d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你应该会看到一个大大的红色<em class="jo"> Hello World！</em></p><p id="a17b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">试着做些改变，你会发现它编译和刷新浏览器的速度有多快。</p><p id="2d26" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">作为附加说明，为了让<em class="jo"> Tailwind CSS IntelliSense </em>扩展在<code class="du ke kf kg ju b">html.erb</code>文件中工作，你必须打开首选项并寻找<code class="du ke kf kg ju b">files.associations</code>选项。点击<em class="jo">添加项目</em>按钮，添加<code class="du ke kf kg ju b">*.html.erb</code>为<em class="jo">项目</em>，添加<code class="du ke kf kg ju b">html</code>为<em class="jo">值</em>。</p><figure class="jp jq jr js fd ij er es paragraph-image"><a href="https://www.udemy.com/course/tailwind-css-fundamentals/?referralCode=2C23FC8E6076971C23A6"><div class="er es kj"><img src="../Images/0fb4c029d4703aff3b656c22ea191c04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l6DoioAnE81rG4YmSc9i9w.png"/></div></a></figure><p id="34f5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你喜欢这篇文章，并且没有时间去研究和学习这个框架，<strong class="is hj">我推荐我的</strong> <a class="ae kk" href="https://www.udemy.com/course/tailwind-css-fundamentals/?referralCode=2C23FC8E6076971C23A6" rel="noopener ugc nofollow" target="_blank"> <strong class="is hj">关于Udemy </strong> </a>的Tailwind CSS课程，在那里我会简明扼要地解释如何使用这个框架。</p><p id="8844" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我也教你如何使用4个官方插件，为你节省了很多工作。</p><p id="3377" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">尽情享受吧！</p></div></div>    
</body>
</html>