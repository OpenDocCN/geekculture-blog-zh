<html>
<head>
<title>Intro to Trino for the Trinewbie</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Trino介绍给Trinewbie</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/intro-to-trino-for-the-trinewbie-a5a1088d3114?source=collection_archive---------0-----------------------#2021-12-17">https://medium.com/geekculture/intro-to-trino-for-the-trinewbie-a5a1088d3114?source=collection_archive---------0-----------------------#2021-12-17</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="fb31" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">了解如何快速连接多个来源的数据</h2></div><p id="1bf3" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果你以前没有听说过Trino，它是一个查询引擎，可以说许多类型的数据库的语言。因此，Trino通常用于提供跨异构数据源的快速特别查询。Trino最初的用例是围绕替换Hive运行时引擎构建的，以允许更快地查询大数据仓库和数据湖。这可能是你第一次听说<a class="ae jt" href="https://trino.io/" rel="noopener ugc nofollow" target="_blank"> Trino </a>，但是你可能听说过它的来源项目<a class="ae jt" href="https://venturebeat.com/2021/08/27/who-owns-open-source-projects-people-or-companies/" rel="noopener ugc nofollow" target="_blank">【叉车】</a>，很快。如果你想了解更多关于<a class="ae jt" href="https://trino.io/blog/2020/12/27/announcing-trino.html" rel="noopener ugc nofollow" target="_blank">为什么Presto的创造者现在在Trino(以前的PrestoSQL) </a>上工作，你可以阅读他们今年早些时候制作的重命名博客。在你对这个博客投入太多之前，我想让你知道为什么你应该关心Trino。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div class="er es ju"><img src="../Images/fd25a061b27f870ad2c12a6b29cb216d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/0*ZTj3QpGBIxw_2pAJ.png"/></div></figure><h1 id="7641" class="kc kd hi bd ke kf kg kh ki kj kk kl km io kn ip ko ir kp is kq iu kr iv ks kt bi translated">那么Trino到底是什么？</h1><p id="9e6d" class="pw-post-body-paragraph ix iy hi iz b ja ku ij jc jd kv im jf jg kw ji jj jk kx jm jn jo ky jq jr js hb bi translated">在讨论Trino时，我想确保人们知道的第一件事是，它是一个SQL查询引擎，但不是SQL数据库。那是什么意思？传统数据库通常由查询引擎和存储引擎组成。Trino只是一个查询引擎，并不存储数据。相反，Trino与各种数据库交互，这些数据库以自己的格式存储自己的数据。Trino解析并分析您传入的SQL查询，创建并优化包含数据源的查询执行计划，然后调度能够智能查询它们所连接的底层数据库的工作节点。</p><p id="4b62" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我说聪明，特别是指下推查询。没错，Trino要做的最明智的事情是避免为自己做更多的工作，并尝试将这些工作卸载到底层数据库。这是有意义的，因为底层数据库通常有特殊的索引和数据，它们以特定的格式存储，以优化读取时间。Trino忽略所有优化的读取能力，对所有数据进行线性扫描来运行查询本身是愚蠢的。针对Trino的大多数优化的目标是将查询下推到数据库，并且只获取与另一个数据库中的另一个数据集连接所需的最少量的数据，做一些特定于Trino的进一步处理，或者只是作为查询的正确结果集返回。</p><h2 id="20ab" class="kz kd hi bd ke la lb lc ki ld le lf km jg lg lh ko jk li lj kq jo lk ll ks lm bi translated">询问所有的事情</h2><p id="554c" class="pw-post-body-paragraph ix iy hi iz b ja ku ij jc jd kv im jf jg kw ji jj jk kx jm jn jo ky jq jr js hb bi translated">所以我还没有真正回答你为什么要关心Trino的问题。简短的回答是，Trino作为一个单一的访问点来查询所有的东西。没错。哦，它在各种数据源上的即席查询速度非常快，包括数据湖(如冰山/数据块)或数据仓库(如蜂巢/雪花)。它有一个<a class="ae jt" href="https://trino.io/docs/current/develop/connectors.html" rel="noopener ugc nofollow" target="_blank">连接器架构</a>，允许它使用<a class="ae jt" href="https://trino.io/docs/current/connector.html" rel="noopener ugc nofollow" target="_blank">的语言和一大堆数据库</a>。如果您有一个特殊的用例，您可以编写自己的连接器，将任何数据库或服务抽象成Trino领域中的另一个表。很酷吧？但是实际上很少需要这样做，因为最常见的数据库已经为它们编写了一个连接器。如果没有，<a class="ae jt" href="https://github.com/trinodb/trino/issues/4500" rel="noopener ugc nofollow" target="_blank">Trino的开源社区每隔几个月就会添加更多的连接器</a>。</p><p id="4e29" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为了让运行联邦查询的好处更加明显，我将给出一个例子。Trino为用户带来了映射<a class="ae jt" href="https://trino.io/docs/current/language.html" rel="noopener ugc nofollow" target="_blank">标准化ANSI SQL </a>查询的能力，以查询拥有<a class="ae jt" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl.html" rel="noopener ugc nofollow" target="_blank">自定义查询DSL的数据库，如Elasticsearch </a>。使用Trino，建立一个Elasticsearch目录并开始在其上运行SQL查询非常简单。如果这没有让你大吃一惊，让我解释一下为什么它如此强大。</p><p id="1345" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">假设您有五个不同的数据存储，每个都有自己独立的查询语言。您的数据科学或分析团队只想访问这些数据存储。他们必须单独访问每个数据系统，查找不同的命令以从每个系统中提取数据，然后将数据转储到一个位置并进行清理，以便他们可以实际运行有意义的查询，这将花费大量的时间。有了Trino，他们只需要使用SQL通过Trino访问它们。此外，它不仅仅停留在访问数据上，您的数据科学团队还能够跨不同数据库的表连接数据，例如像Elasticsearch这样的搜索引擎和MySQL这样的运营数据库。此外，使用Trino甚至可以在不支持连接的地方连接数据源，比如在Elasticsearch和MongoDB中。发生了吗？你疯了吗？</p><h1 id="43f8" class="kc kd hi bd ke kf kg kh ki kj kk kl km io kn ip ko ir kp is kq iu kr iv ks kt bi translated">Trino入门</h1><p id="bde3" class="pw-post-body-paragraph ix iy hi iz b ja ku ij jc jd kv im jf jg kw ji jj jk kx jm jn jo ky jq jr js hb bi translated">那么试驾Trino需要什么呢？相对于许多开源数据库项目，Trino是安装更简单的项目之一，但这仍然不意味着它很容易。一个成功项目的一个重要元素是它如何适应新用户，并扩展增长和采用的能力。这确实强调了确保使用产品有多种途径的重要性，所有这些途径都有不同程度的难度、成本、可定制性、互操作性和可伸缩性。随着可定制性、互操作性和可伸缩性水平的提高，您通常会看到难度或成本的增加，反之亦然。幸运的是，当你开始的时候，你真的需要和崔诺一起玩。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div class="er es ln"><img src="../Images/8a662ba0792e7b4876a56dfc34a56a06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/0*bZz-lIxXsb2vqnSj"/></div><figcaption class="lo lp et er es lq lr bd b be z dx">Image added by Author</figcaption></figure><p id="e461" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">试用Trino的低成本低难度方式是使用<a class="ae jt" href="https://www.docker.com/" rel="noopener ugc nofollow" target="_blank"> Docker容器</a>。这些容器的好处在于，你不需要真正了解Trino的安装过程就可以使用Trino。虽然许多人喜欢浏览文档并与Trino一起工作来设置它，但它可能并不适合所有人。我当然有喜欢凉爽气候的日子，也有需要选择不去的日子。如果您想跳过简单的按钮来部署Trino(提示，这是SaaS部署)，那么跳过接下来的几节。</p><h2 id="24e7" class="kz kd hi bd ke la lb lc ki ld le lf km jg lg lh ko jk li lj kq jo lk ll ks lm bi translated">使用Trino和Docker</h2><p id="4270" class="pw-post-body-paragraph ix iy hi iz b ja ku ij jc jd kv im jf jg kw ji jj jk kx jm jn jo ky jq jr js hb bi translated">Trino为<a class="ae jt" href="https://hub.docker.com/r/trinodb/trino" rel="noopener ugc nofollow" target="_blank">提供了一个Docker镜像</a>，它为Trino的运行做了很多必要的设置。除了简单地运行docker容器之外，设置时还需要做一些事情。首先，为了使用像mysql这样的数据库，我们实际上需要使用官方的MySQL映像运行一个MySQL容器。有一个<a class="ae jt" href="https://github.com/bitsondatadev/trino-getting-started" rel="noopener ugc nofollow" target="_blank">trino入门库</a>，它包含了在你自己的电脑上使用Trino或者在测试服务器上设置Trino作为概念验证所需的大量设置。克隆这个库，如果Docker还没有安装，那么按照README中的说明安装它。</p><p id="8d7a" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在了解这个合成文件如何工作的细节之前，您实际上可以运行一个查询。在运行查询之前，您需要运行mysql和trino-coordinator实例。为此，导航到包含docker-compose.yml的mysql/trino-mysql/目录并运行:</p><pre class="jv jw jx jy fd ls lt lu lv aw lw bi"><span id="0952" class="kz kd hi lt b fi lx ly l lz ma">docker-compose up -d</span></pre><h2 id="33c9" class="kz kd hi bd ke la lb lc ki ld le lf km jg lg lh ko jk li lj kq jo lk ll ks lm bi translated">运行您的第一个查询！</h2><p id="6b71" class="pw-post-body-paragraph ix iy hi iz b ja ku ij jc jd kv im jf jg kw ji jj jk kx jm jn jo ky jq jr js hb bi translated">现在您已经在Docker中运行了Trino，您需要打开一个会话来访问它。最简单的方法是通过控制台。运行以下Docker命令连接到协调器上的终端:</p><pre class="jv jw jx jy fd ls lt lu lv aw lw bi"><span id="d79b" class="kz kd hi lt b fi lx ly l lz ma">docker container exec -it trino-mysql_trino-coordinator_1 trino</span></pre><p id="91aa" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这会把你带到特里诺终点站。</p><pre class="jv jw jx jy fd ls lt lu lv aw lw bi"><span id="958e" class="kz kd hi lt b fi lx ly l lz ma">trino&gt;</span></pre><p id="7054" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您的第一个查询实际上是从tpch目录中生成数据，然后查询加载到mysql目录中的数据。在终端中，运行以下两个查询:</p><pre class="jv jw jx jy fd ls lt lu lv aw lw bi"><span id="4518" class="kz kd hi lt b fi lx ly l lz ma">CREATE TABLE mysql.tiny.customer<br/>AS SELECT * FROM tpch.tiny.customer;</span><span id="9011" class="kz kd hi lt b fi mb ly l lz ma">SELECT custkey, name, nationkey, phone <br/>FROM mysql.tiny.customer LIMIT 5;</span></pre><p id="f9a7" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">输出应该是这样的。</p><pre class="jv jw jx jy fd ls lt lu lv aw lw bi"><span id="38e9" class="kz kd hi lt b fi lx ly l lz ma">|custkey|name              |nationkey|phone          |<br/>|-------|------------------|---------|---------------|<br/>|751    |Customer#000000751|0        |10-658-550-2257|<br/>|752    |Customer#000000752|8        |18-924-993-6038|<br/>|753    |Customer#000000753|17       |27-817-126-3646|<br/>|754    |Customer#000000754|0        |10-646-595-5871|<br/>|755    |Customer#000000755|16       |26-395-247-2207|</span></pre><p id="4c7f" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">恭喜你。你刚刚在Trino上运行了你的第一个查询。你感觉到了吗？？好吧，从技术上讲，我们只是从数据生成连接器复制数据，并将其移动到MySQL数据库中，然后查询出来。如果这个简单的练习没有让你起鸡皮疙瘩，那很好，但希望你可以在连接到其他数据集时推断出可能性。</p><p id="d992" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在进入Trino安装文档之前，最好先学习一下compose文件和目录。让我们通过分解刚才运行的docker-compose文件来看看这是如何实现的。</p><pre class="jv jw jx jy fd ls lt lu lv aw lw bi"><span id="dee1" class="kz kd hi lt b fi lx ly l lz ma">version: '3.7'<br/>services:<br/>  trino-coordinator:<br/>    image: 'trinodb/trino:latest'<br/>    hostname: trino-coordinator<br/>    ports:<br/>      - '8080:8080'<br/>    volumes:<br/>      - ./etc:/etc/trino<br/>    networks:<br/>      - trino-network<br/><br/>  mysql:<br/>    image: mysql:latest<br/>    hostname: mysql<br/>    environment:<br/>      MYSQL_ROOT_PASSWORD: admin<br/>      MYSQL_USER: admin<br/>      MYSQL_PASSWORD: admin<br/>      MYSQL_DATABASE: tiny<br/>    ports:<br/>      - '3306:3306'<br/>    networks:<br/>      - trino-network<br/>networks:<br/>  trino-network:<br/>    driver: bridge</span></pre><p id="de9a" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">请注意，mysql的主机名与实例名相匹配，并且mysql实例位于trino-coordinator实例也将加入的trino-network上。还要注意，mysql镜像暴露了网络上的端口3306。</p><p id="c56c" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">最后，我们将使用trino-coordinator实例的trinodb/trino映像，并使用volumes选项将trino的本地定制配置映射到/etc/trino目录，我们将在下面的<em class="mc"> Trino配置</em>部分中进一步讨论。trino也应该添加到trino-network并公开端口8080，这是外部客户端访问Trino的方式。下面是docker-compose.yml文件的一个例子。完整的配置可以在这个【Trino库中找到。</p><p id="820e" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这些说明是对<a class="ae jt" href="https://trino.io/docs/current/installation/deployment.html" rel="noopener ugc nofollow" target="_blank">的基本概述，更完整的安装说明</a>如果你真的要用的话！如果您对安装不感兴趣，可以直接跳到使用Kubernetes大规模部署Trino一节。如果你不想和Kubernetes打交道，我给你提供另一个进入本博客简单按钮部分的途径。</p><h2 id="307c" class="kz kd hi bd ke la lb lc ki ld le lf km jg lg lh ko jk li lj kq jo lk ll ks lm bi translated">Trino要求</h2><p id="5c04" class="pw-post-body-paragraph ix iy hi iz b ja ku ij jc jd kv im jf jg kw ji jj jk kx jm jn jo ky jq jr js hb bi translated">第一个要求是Trino必须在兼容POSIX的系统上运行，比如Linux或Unix。社区中有些人已经让Trino在Windows上运行，并使用cygwin这样的运行时环境进行测试，但这并没有得到官方支持。然而，在我们的容器化世界中，这不是一个问题，不管你使用哪种操作系统，你至少可以在<a class="ae jt" href="https://www.docker.com/" rel="noopener ugc nofollow" target="_blank"> Docker </a>上测试这个。</p><p id="5323" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">Trino是用Java编写的，所以它需要Java运行时环境(JRE)。Trino要求64位版本的Java 11，最低要求版本为11.0.7。建议使用更新的修补程序版本，如11.0.8或11.0.9。Trino bin/launcher的启动脚本也需要python版本2.6.x、2.7.x或3.x。</p><h2 id="46e7" class="kz kd hi bd ke la lb lc ki ld le lf km jg lg lh ko jk li lj kq jo lk ll ks lm bi translated">Trino构型</h2><p id="0d94" class="pw-post-body-paragraph ix iy hi iz b ja ku ij jc jd kv im jf jg kw ji jj jk kx jm jn jo ky jq jr js hb bi translated">要配置Trino，首先需要知道Trino配置目录。如果您手动安装Trino，默认情况下将位于相对于安装目录的etc/目录中。对于我们的例子，我将使用默认的安装目录<a class="ae jt" href="https://hub.docker.com/r/trinodb/trino" rel="noopener ugc nofollow" target="_blank"> Trino Docker镜像</a>，它是在run-trino脚本中设置为/etc/trino的<a class="ae jt" href="https://github.com/trinodb/trino/blob/356/core/docker/bin/run-trino#L15" rel="noopener ugc nofollow" target="_blank">。我们需要在这个基本目录下创建四个文件。我将描述这些文件做什么，你可以在我下面创建的docker图像中看到一个例子。</a></p><ol class=""><li id="b64c" class="md me hi iz b ja jb jd je jg mf jk mg jo mh js mi mj mk ml bi translated">config.properties —这是trino集群中每个节点的主要配置。这里有很多选项可以设置，但是在测试时，您通常会希望使用默认设置。所需的配置包括指示节点是否是协调器、设置Trino通信的http端口以及发现节点url，以便Trino服务器可以找到彼此。</li><li id="5345" class="md me hi iz b ja mm jd mn jg mo jk mp jo mq js mi mj mk ml bi translated">JVM . config——该配置包含您将传递给运行Trino的java进程的命令行参数。</li><li id="617e" class="md me hi iz b ja mm jd mn jg mo jk mp jo mq js mi mj mk ml bi translated">log . properties——这个配置有助于指示Trino中各种java类的日志级别。它可以留空以对所有类使用默认日志级别。</li><li id="19c1" class="md me hi iz b ja mm jd mn jg mo jk mp jo mq js mi mj mk ml bi translated">node.properties —此配置用于唯一标识群集中的节点，并指定节点中目录的位置。</li></ol><p id="f490" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您需要了解的下一个目录是目录/目录，位于根配置目录中。在docker容器中，它将位于/etc/trino/catalog中。这个目录将包含Trino用来连接不同数据源的目录配置。对于我们的例子，我们将配置两个目录，mysql目录和tpch目录。tpch目录是一个简单的数据生成目录，只需要配置conector.name属性，它位于/etc/trino/catalog/tpch . properties中。</p><p id="4ea4" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">tpch.properties</p><pre class="jv jw jx jy fd ls lt lu lv aw lw bi"><span id="a7f7" class="kz kd hi lt b fi lx ly l lz ma">connector.name=tpch</span></pre><p id="1e4c" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">mysql目录只需要connector.name来指定要使用的连接器插件、指向mysql实例的connection-url属性以及mysql用户的connection-user和connection-password属性。</p><p id="a473" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">mysql .属性</p><pre class="jv jw jx jy fd ls lt lu lv aw lw bi"><span id="eaf2" class="kz kd hi lt b fi lx ly l lz ma">connector.name=mysql<br/>connection-url=jdbc:mysql://mysql:3306<br/>connection-user=root<br/>connection-password=admin</span></pre><p id="70b0" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">注意:配置文件的名称成为Trino中目录的名称。如果您熟悉MySQL，您可能知道MySQL支持两层包容层次结构，尽管您可能从来不知道它的名称。这种包含层次结构指的是数据库和表。层次结构的第一层是<em class="mc">表</em>，而第二层由<em class="mc">数据库</em>组成。一个数据库包含多个表，因此如果两个表位于不同的数据库中，它们可以有相同的名称。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="er es mr"><img src="../Images/055d32fdda79b83b2c940ea43b884138.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*1eQN9McbYHb6FXOb"/></div></div><figcaption class="lo lp et er es lq lr bd b be z dx">Image by Author</figcaption></figure><p id="143b" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">因为Trino必须连接到多个数据库，所以它支持三层的包容层次结构。Trino没有将第二层称为数据库，而是将这一层称为<em class="mc">模式</em>。所以MySQL中的数据库相当于Trino中的模式。第三层允许Trino区分由<em class="mc">目录</em>组成的多个底层数据源。因为提供给Trino的文件名为mysql.properties，所以它会自动将目录命名为mysql，而不使用。属性文件类型。要查询MySQL中tiny下的customer表，需要指定以下表名mysql.tiny.customer。</p><p id="5d02" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果你已经到了这一步，那么恭喜你，你现在知道如何建立目录并通过Trino查询它们了！在这一点上的好处应该是显而易见的，这种方式很容易实现概念验证。是时候为您的团队和老板收集概念证明了！接下来呢？实际上，如何以可重复和可扩展的方式进行部署呢？下一节将简要介绍大规模部署Trino的快速方法。</p><h1 id="b895" class="kc kd hi bd ke kf kg kh ki kj kk kl km io kn ip ko ir kp is kq iu kr iv ks kt bi translated">使用Kubernetes大规模部署Trino</h1><p id="d669" class="pw-post-body-paragraph ix iy hi iz b ja ku ij jc jd kv im jf jg kw ji jj jk kx jm jn jo ky jq jr js hb bi translated">到目前为止，这篇文章只描述了部署过程。在此之后，一旦您将Trino部署到生产环境中，并慢慢加入工程、BI/Analytics和您的数据科学团队，情况会如何呢？正如许多Trino用户所经历的那样，随着Trino集群成为访问所有数据的单点，对它的需求会快速增长。这是这些小型概念验证规模的安装开始崩溃的地方，当您的系统开始承担更重的工作负载时，您将需要更灵活的东西来扩展。</p><p id="214c" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您将需要监视您的集群，并且可能需要支持运行这些监视任务的其他服务。这也适用于运行其他安全和认证管理系统。当您考虑到所有这些系统都需要围绕不断增长的Trino集群进行扩展和适应时，这个复杂性列表还会增加。例如，您可以考虑部署<a class="ae jt" href="https://shopify.engineering/faster-trino-query-execution-infrastructure" rel="noopener ugc nofollow" target="_blank">多个集群来处理不同的工作负载</a>，或者可能运行数十或数百个Trino集群来提供一个自助服务平台，从而在您的平台中提供隔离租用。</p><p id="97dc" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">通过使用像Kubernetes这样的编排平台及其包管理器项目Helm，已经解决了将所有这些复杂场景表示为配置的解决方案。Kubernetes提供了一种强大的方式来表达所有基于用例的复杂的适应性基础设施。</p><p id="a592" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为了简洁起见，我将不包括如何运行helm chart的全套说明，也不涉及在Kubernetes上运行Trino的基础知识。相反，我会向你推荐一集Trino社区广播,其中讨论了Kubernetes、社区掌舵图以及在Kubernetes上运行Trino的基础知识。为了透明起见，<a class="ae jt" href="https://github.com/trinodb/charts" rel="noopener ugc nofollow" target="_blank">官方的Trino helm图表</a>仍处于早期开发阶段。有一个非常受欢迎的<a class="ae jt" href="https://github.com/valeriano-manassero/helm-charts/tree/main/valeriano-manassero/trino" rel="noopener ugc nofollow" target="_blank">社区贡献的掌舵图</a>，它被许多用户修改以适应他们的需求，并且是目前Trino自我管理部署的最佳开源选项。如果你决定走这条路，小心前进，要知道有<a class="ae jt" href="https://github.com/trinodb/charts/pull/11" rel="noopener ugc nofollow" target="_blank">发展来支持舵部署</a>向前发展。</p><p id="1540" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">虽然这将提供所有的工具，使一个非常适合的工程部门能够运行和维护他们自己的Trino集群，但这回避了一个问题，即根据您的工程团队规模，您和您的公司是否应该投入昂贵的数据工程师时间来维护、扩展和黑客攻击，以保持完整规模的生产基础架构正常运行？</p><h1 id="6a45" class="kc kd hi bd ke kf kg kh ki kj kk kl km io kn ip ko ir kp is kq iu kr iv ks kt bi translated">星爆银河:部署和维护Trino的简单方法</h1><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="er es mw"><img src="../Images/d284b06b2ad43e9eae82ab6b36eda2da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*EF9odfMlRuHYAq6r.jpg"/></div></div><figcaption class="lo lp et er es lq lr bd b be z dx">Image By: lostvegas, License: CC BY-NC-ND 2.0, Source: <a class="ae jt" href="https://www.flickr.com/photos/lostvegas/2214183472" rel="noopener ugc nofollow" target="_blank">https://www.flickr.com/photos/lostvegas/2214183472</a></figcaption></figure><p id="3336" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如前所述，Trino有一个相对简单的部署设置，重点是相对。谈到管理和扩展Trino所涉及的复杂性，这篇博客实际上只是触及了冰山一角。虽然在Kubernetes中管理运行Trino是可能的，甚至可以使用头盔图表进行缩放，但对于Trinewbies来说，这仍然是一个困难的设置，对于那些已经有维护Trino经验的人来说，这也是一个困难的维护和缩放。当我几年前开始我的Trino之旅时，我亲身经历了许多这样的困难，并开始寻求帮助他人克服这些挑战。这让我与SaaS·特里诺平台银河背后的公司Starburst不期而遇。</p><p id="b47e" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">Galaxy使Trino对那些难以根据自己的需求扩展和定制Trino的公司变得容易。除非你所在的公司拥有一个大规模的数据平台，并且你的平台上的每个系统都有专门的数据和开发工程师，否则从长远来看，这些选择对你来说是不可行的。</p><p id="6f08" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">有一点需要明确的是，一个星系团实际上只是一个需要的Trino星系团。除了管理扩展策略之外，为了避免您的云账单出现任何意外，您真的不必考虑扩大或缩小Trino，或者在不使用时暂停它。Trino和Galaxy的美妙之处在于，它是一个短暂的计算引擎，就像AWS Lambda一样，可以快速加速或减速。您不仅能够在不同的数据源上运行特别的和联合的查询，而且现在您还可以按需运行这些查询的基础结构，几乎不需要花费您的工程团队的时间。</p><h2 id="3ee1" class="kz kd hi bd ke la lb lc ki ld le lf km jg lg lh ko jk li lj kq jo lk ll ks lm bi translated">银河入门</h2><p id="c978" class="pw-post-body-paragraph ix iy hi iz b ja ku ij jc jd kv im jf jg kw ji jj jk kx jm jn jo ky jq jr js hb bi translated">这里有一个快速入门指南，反映了我们在上面的Docker例子中用Trino和MySQL实现的设置。</p><ul class=""><li id="40c1" class="md me hi iz b ja jb jd je jg mf jk mg jo mh js mx mj mk ml bi translated">通过在<a class="ae jt" href="http://starburst.io/galaxy" rel="noopener ugc nofollow" target="_blank"> Galaxy信息页面</a>的底部填写您的信息来设置Galaxy试用。</li><li id="3d5e" class="md me hi iz b ja mm jd mn jg mo jk mp jo mq js mx mj mk ml bi translated">一旦你收到一个链接，你会看到这个注册屏幕。填写电子邮件地址，输入发送到电子邮件的pin，并为您的集群选择域。</li><li id="eb0a" class="md me hi iz b ja mm jd mn jg mo jk mp jo mq js mx mj mk ml bi translated">教程的其余部分在下面的视频中提供，它提供了一个基本的演示，告诉你需要做些什么来开始。</li></ul><figure class="jv jw jx jy fd jz"><div class="bz dy l di"><div class="my mz l"/></div><figcaption class="lo lp et er es lq lr bd b be z dx">Video by Author</figcaption></figure><p id="2be6" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这种介绍可能让人感觉有点乏味，但可以推断出能够跨关系数据库运行联邦查询，如MySQL，这是一个在S3存储数据的数据湖，或者很快会在许多NoSQL和实时数据存储中存储数据。《星爆银河》的真正力量在于，现在你的团队将不再需要奉献一大堆旨在扩大和缩小规模、监控和保护崔诺的门票。相反，您可以返回来关注业务问题和您领域中数据的最佳模型。</p><p id="7862" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这真的为Trino社区打开了一个令人兴奋的未来。本着<a class="ae jt" href="https://www.youtube.com/watch?v=BwPL0Md_QFQ" rel="noopener ugc nofollow" target="_blank">最近发布的光年电影</a>的精神，“到无限，甚至更远！”</p></div></div>    
</body>
</html>