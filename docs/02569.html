<html>
<head>
<title>Multi-Class Portfolio Allocation and Risk Diversification: Genetic Algorithms and Fat-tailed Distributions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">多类投资组合分配和风险分散:遗传算法和厚尾分布</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/multi-class-portfolio-allocation-and-risk-diversification-genetic-algorithms-and-fat-tailed-ecf99f835cc5?source=collection_archive---------9-----------------------#2021-05-20">https://medium.com/geekculture/multi-class-portfolio-allocation-and-risk-diversification-genetic-algorithms-and-fat-tailed-ecf99f835cc5?source=collection_archive---------9-----------------------#2021-05-20</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="c756" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">UChicago中西部算法交易竞赛Pt。一</h2></div><p id="9ea3" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">今年春天，我在一年一度的UChicago Midwest算法交易比赛中担任了UVA团队的队长。今年的比赛涉及三个案例:</p><ol class=""><li id="333c" class="jt ju hi iz b ja jb jd je jg jv jk jw jo jx js jy jz ka kb bi translated">外汇动态和货币政策</li><li id="ef32" class="jt ju hi iz b ja kc jd kd jg ke jk kf jo kg js jy jz ka kb bi translated">期权做市</li><li id="69b9" class="jt ju hi iz b ja kc jd kd jg ke jk kf jo kg js jy jz ka kb bi translated">多类别投资组合配置与风险分散</li></ol><p id="3c92" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我的团队在期权做市案例中排名第三，但在本文中，我将讨论我为案例3创建的新颖的投资组合分配算法。案例2将在本系列的下一期文章中讨论。我希望你喜欢！</p><p id="98bb" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">对于案例3，我构想了一个基于遗传算法的投资组合分配策略，该策略基于拉普拉斯分布的投影。整个策略可以分为两个部分:1)使用拉普拉斯分布生成投影，以及2)在投影集上训练遗传算法。我决定使用厚尾分布来应用黑天鹅事件的更高可能性。我将概率分布的预测与遗传算法相结合的思想过程是，始终如一地生成一组对无数市场条件具有弹性的权重。</p><p id="5f76" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">话虽如此，我们还是直接跳到代码里吧(完整项目和数据集见我的GitHub:<a class="ae kh" href="https://github.com/awrd2019/UChicago-Trading-Competition-Case-3" rel="noopener ugc nofollow" target="_blank">https://GitHub . com/awrd 2019/UChicago-Trading-Competition-Case-3</a>)。首先，我导入所有相关的库并加载我们的数据集(这些数据是案例作者提供给我们的)。这个项目只需要熊猫和熊猫。</p><figure class="ki kj kk kl fd km"><div class="bz dy l di"><div class="kn ko l"/></div></figure><p id="b198" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">接下来，我绘制了我们的数据框架，它由24种资产的10年价格数据(2520种价格)组成。这些资产包括8种未知股票、8种未知债券和8种未知商品。</p><figure class="ki kj kk kl fd km"><div class="bz dy l di"><div class="kn ko l"/></div></figure><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="er es kp"><img src="../Images/6b664fdd9c1390b5781cf3109d1e99a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qZrO-oDvjWzTQtctXmmctg.png"/></div></div></figure><h1 id="7ecc" class="kw kx hi bd ky kz la lb lc ld le lf lg io lh ip li ir lj is lk iu ll iv lm ln bi translated">生成投影</h1><p id="b781" class="pw-post-body-paragraph ix iy hi iz b ja lo ij jc jd lp im jf jg lq ji jj jk lr jm jn jo ls jq jr js hb bi translated">首先，我定义了一个函数，在给定价格数据框架的情况下，该函数可以获得资产的日回报率。</p><figure class="ki kj kk kl fd km"><div class="bz dy l di"><div class="kn ko l"/></div></figure><p id="8684" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">接下来，我定义一个函数来生成投影。这些参数包括数据框、投影的第一天、我们希望创建的投影数量，以及最终的投影天数。该函数首先创建一个数组列表，其中包含使用拉普拉斯分布生成的预计每日价格变化，然后将这些每日百分比变化应用于每项资产。</p><figure class="ki kj kk kl fd km"><div class="bz dy l di"><div class="kn ko l"/></div></figure><h1 id="82e1" class="kw kx hi bd ky kz la lb lc ld le lf lg io lh ip li ir lj is lk iu ll iv lm ln bi translated">遗传算法</h1><p id="bcd8" class="pw-post-body-paragraph ix iy hi iz b ja lo ij jc jd lp im jf jg lq ji jj jk lr jm jn jo ls jq jr js hb bi translated">在遗传算法中，染色体代表投资组合的资产权重集，而群体代表一组染色体。一代又一代，我应用交叉和变异来逼近一组权重，使我用作适应度函数的每日夏普比率最大化。首先，我为一年中交易天数的平方根定义了一个全局变量。这将很快用于我们的日常夏普比率计算。</p><figure class="ki kj kk kl fd km"><div class="bz dy l di"><div class="kn ko l"/></div></figure><p id="cdde" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">下一个函数定义了一组随机的权重。</p><figure class="ki kj kk kl fd km"><div class="bz dy l di"><div class="kn ko l"/></div></figure><p id="0559" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">使用前面定义的函数，我们创建一个新函数来生成整个群体。</p><figure class="ki kj kk kl fd km"><div class="bz dy l di"><div class="kn ko l"/></div></figure><p id="54fe" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然后，我创建函数，通过对投影集应用权重来评估染色体以及整个群体。</p><figure class="ki kj kk kl fd km"><div class="bz dy l di"><div class="kn ko l"/></div></figure><figure class="ki kj kk kl fd km"><div class="bz dy l di"><div class="kn ko l"/></div></figure><p id="e8a0" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">下面的choose_chrom函数将在稍后创建下一代权重时与crossover函数结合使用。它从人群中随机选择权重——基于他们相关的每日夏普比率。</p><figure class="ki kj kk kl fd km"><div class="bz dy l di"><div class="kn ko l"/></div></figure><p id="dfde" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如下所示，交叉、变异和重新平衡是相对不言自明的函数，它们对于我们接下来将讨论的next_gen函数都是必不可少的。</p><figure class="ki kj kk kl fd km"><div class="bz dy l di"><div class="kn ko l"/></div></figure><figure class="ki kj kk kl fd km"><div class="bz dy l di"><div class="kn ko l"/></div></figure><figure class="ki kj kk kl fd km"><div class="bz dy l di"><div class="kn ko l"/></div></figure><p id="8bc2" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">next_gen函数为我们的遗传算法返回新的染色体数组或下一代染色体。首先，具有最高每日夏普比率的前四分之一的权重被结转到下一代。群体的其余部分通过交叉函数生成，该函数使用前面定义的choose_chrom函数选择染色体。最后，我们在返回最终数组之前对每个染色体进行变异。</p><figure class="ki kj kk kl fd km"><div class="bz dy l di"><div class="kn ko l"/></div></figure><p id="cf7f" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">最后，genetic_algo函数将使用上面定义的所有函数对投影数据运行遗传算法。该函数是递归的，并且将前一代的Sharpes、前一代的权重、种群大小、突变率(我们可以进行实验)、我们的原始数据框以及投影数据的列表作为参数。该算法将继续递归，直到已经达到30代或者连续20代的最大适应度提高小于2%。我强烈建议读者尝试这些限制，因为30是为了减少测试时间而任意选择的。</p><figure class="ki kj kk kl fd km"><div class="bz dy l di"><div class="kn ko l"/></div></figure><h1 id="6c07" class="kw kx hi bd ky kz la lb lc ld le lf lg io lh ip li ir lj is lk iu ll iv lm ln bi translated">测试</h1><p id="29d4" class="pw-post-body-paragraph ix iy hi iz b ja lo ij jc jd lp im jf jg lq ji jj jk lr jm jn jo ls jq jr js hb bi translated">在测试部分，让我们首先创建我们的投影数据集。</p><figure class="ki kj kk kl fd km"><div class="bz dy l di"><div class="kn ko l"/></div></figure><p id="252d" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">接下来，让我们从列表中绘制一个投影。如您所见，正如我们在参数中指定的那样，每项资产都预测了未来30天的情况。</p><figure class="ki kj kk kl fd km"><div class="bz dy l di"><div class="kn ko l"/></div></figure><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="er es lt"><img src="../Images/eda6e0de2398ee50c5780e8ceac83e07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EK6BpUlB1lVGQrLPABGBqw.png"/></div></div></figure><p id="4ae9" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在让我们最终运行我们的算法！我们首先定义一些相关变量，创建第一代并对其进行评估，然后运行递归遗传算法函数。</p><figure class="ki kj kk kl fd km"><div class="bz dy l di"><div class="kn ko l"/></div></figure><p id="f3ae" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们观察最大每日夏普比率和相关权重。</p><figure class="ki kj kk kl fd km"><div class="bz dy l di"><div class="kn ko l"/></div></figure><figure class="ki kj kk kl fd km er es paragraph-image"><div class="er es lu"><img src="../Images/5f7d9c3fc0bdceda47d53df9caec711f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1226/format:webp/1*ajjrUIHyCxPHzltIT8DW1g.png"/></div></figure><h1 id="4d32" class="kw kx hi bd ky kz la lb lc ld le lf lg io lh ip li ir lj is lk iu ll iv lm ln bi translated">结论</h1><p id="32b5" class="pw-post-body-paragraph ix iy hi iz b ja lo ij jc jd lp im jf jg lq ji jj jk lr jm jn jo ls jq jr js hb bi translated">在本文中，我探索了一种利用强化学习和厚尾分布的新型投资组合分配策略。我希望你喜欢，我欢迎任何意见和建议。</p><p id="c283" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="lv">免责声明:本文并不构成实施任何投资或交易策略的建议。证券和衍生品交易存在巨大的损失风险。</em></p></div></div>    
</body>
</html>