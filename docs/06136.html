<html>
<head>
<title>Making Pong with PyGame</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用PyGame制作Pong</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/making-pong-with-pygame-19a632b882d?source=collection_archive---------2-----------------------#2021-08-07">https://medium.com/geekculture/making-pong-with-pygame-19a632b882d?source=collection_archive---------2-----------------------#2021-08-07</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/63ff3e902db4afde8e2f3d6f9e82c666.png" data-original-src="https://miro.medium.com/v2/resize:fit:1352/0*m0fEKM3DboA9qSlb.gif"/></div><figcaption class="im in et er es io ip bd b be z dx">PyGame — pygame.org</figcaption></figure><p id="5da9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">PyGame是一个非常通用的工具，用于Python的游戏开发。你可以用pygame做很多令人惊奇的事情，但是首先了解一些基础知识是很重要的。</p><p id="4d31" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为了做到这一点，我们将创建一个基本的pong游戏，它教授了PyGame的许多基础知识。</p><p id="b28b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">与编程中的任何事情一样，学习的最佳方式是实践，所以让我们直接进入其中</p></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><p id="dc12" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">由于PyGame没有和Python一起安装，我们需要自己安装。为此，只需运行以下命令:</p><pre class="jv jw jx jy fd jz ka kb kc aw kd bi"><span id="9e3e" class="ke kf hi ka b fi kg kh l ki kj">&gt;&gt;&gt; pip install pygame</span></pre><p id="d441" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在我们可以进入代码的真正内容了。在一个新的python文件中，首先导入pygame:</p><figure class="jv jw jx jy fd ij"><div class="bz dy l di"><div class="kk kl l"/></div></figure><p id="b9f7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">之后，我们需要初始化游戏，设置高度和宽度。我们通过创建高度和宽度变量，然后将它们作为元组传递给pygame函数来实现:</p><figure class="jv jw jx jy fd ij"><div class="bz dy l di"><div class="kk kl l"/></div></figure><p id="cd8a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你现在运行这个程序，你会看到一个空白的屏幕，标题是“pygame window ”,还有一个非常像素化的pygame logo，然后它会立刻消失。那是因为剧本几乎一开始就结束了。要解决这个问题，创建一个<code class="du km kn ko ka b">game_on</code>变量和一个<code class="du km kn ko ka b">while True: pass</code>循环。我们稍后将编辑这些内容。如果你运行这个，你可能会注意到你实际上不能关闭窗口。首先，打开任务管理器，尽快杀死这个程序，因为它会导致你的电脑崩溃。要解决此问题(并使屏幕具有不同的颜色)，请使用以下方法:</p><figure class="jv jw jx jy fd ij"><div class="bz dy l di"><div class="kk kl l"/></div></figure><p id="1e72" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">它的作用是遍历当前事件中的每个事件，并检查其中一个事件是否是退出事件(即用户试图关闭窗口)。如果是，它将停止while循环。如果事件未退出，则更新显示屏。</p><p id="92c9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在循环或<code class="du km kn ko ka b">game_on</code>之前是游戏的真正核心。然而，理解游戏如何运作是关键。这个游戏有几个主要的机制:</p><ol class=""><li id="8743" class="kp kq hi is b it iu ix iy jb kr jf ks jj kt jn ku kv kw kx bi translated">玩家必须能够移动他们的球拍</li><li id="2cd9" class="kp kq hi is b it ky ix kz jb la jf lb jj lc jn ku kv kw kx bi translated">CPU必须自动跟踪球的位置并跟随它</li><li id="a1a0" class="kp kq hi is b it ky ix kz jb la jf lb jj lc jn ku kv kw kx bi translated">球必须在墙壁或球拍的侧面反弹(如果球碰到玩家一侧，记录玩家输了，CPU一侧也一样)</li></ol><p id="c0c5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为了实现这一点，我们需要跟踪球员的位置，球的位置，和cpu的位置。对于玩家，我把位置实现为从原始位置到现在位置的距离。至于其他的，我只是把它们实现为真正的位置。</p><p id="312d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们还需要以下功能:</p><ol class=""><li id="78f9" class="kp kq hi is b it iu ix iy jb kr jf ks jj kt jn ku kv kw kx bi translated">player():在屏幕上显示播放器的踏板</li><li id="9a6a" class="kp kq hi is b it ky ix kz jb la jf lb jj lc jn ku kv kw kx bi translated">cpu():在屏幕上显示cpu面板</li><li id="98db" class="kp kq hi is b it ky ix kz jb la jf lb jj lc jn ku kv kw kx bi translated">ball():在屏幕上显示球</li><li id="6b2a" class="kp kq hi is b it ky ix kz jb la jf lb jj lc jn ku kv kw kx bi translated">calc_cpu():计算cpu应该去哪里</li><li id="0c83" class="kp kq hi is b it ky ix kz jb la jf lb jj lc jn ku kv kw kx bi translated">calc_ball():计算球应该去哪里</li><li id="a026" class="kp kq hi is b it ky ix kz jb la jf lb jj lc jn ku kv kw kx bi translated">move_up():向上移动播放器挡板</li><li id="6612" class="kp kq hi is b it ky ix kz jb la jf lb jj lc jn ku kv kw kx bi translated">move_down():向下移动播放器挡板</li><li id="2983" class="kp kq hi is b it ky ix kz jb la jf lb jj lc jn ku kv kw kx bi translated">game_over():重置游戏并显示谁赢了</li></ol><p id="5a6e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们还需要游戏中每个物体的图标和图像</p></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><h1 id="c2af" class="ld kf hi bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">图标/图像</h1><p id="7365" class="pw-post-body-paragraph iq ir hi is b it ma iv iw ix mb iz ja jb mc jd je jf md jh ji jj me jl jm jn hb bi translated">以下是我在游戏中使用的图标和图片</p><figure class="jv jw jx jy fd ij er es paragraph-image"><div class="er es mf"><img src="../Images/dbf3f838073fdb1f8de009d5a2df8842.png" data-original-src="https://miro.medium.com/v2/resize:fit:64/format:webp/1*wpOC8DJOqJ0BMyxcMmY4ew.png"/></div><figcaption class="im in et er es io ip bd b be z dx">Window Icon — icon.png — 32x32 px</figcaption></figure><figure class="jv jw jx jy fd ij er es paragraph-image"><div class="er es mg"><img src="../Images/e74f827f1918b38c2bcff95ff7b38741.png" data-original-src="https://miro.medium.com/v2/resize:fit:60/format:webp/1*OMuXcokX-9QoCbOPoi9xdQ.png"/></div><figcaption class="im in et er es io ip bd b be z dx">Ball Image — ball.png — 30x30 px</figcaption></figure><figure class="jv jw jx jy fd ij er es paragraph-image"><div class="er es mh"><img src="../Images/b03aff8e0f1329d43941694780192689.png" data-original-src="https://miro.medium.com/v2/resize:fit:54/format:webp/1*LSdzF7zvIbFdvP9n4b1Ktg.png"/></div><figcaption class="im in et er es io ip bd b be z dx">Paddle Image — player.png — 27x200 px</figcaption></figure></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><h1 id="cf60" class="ld kf hi bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">加载变量</h1><figure class="jv jw jx jy fd ij"><div class="bz dy l di"><div class="kk kl l"/></div></figure><p id="b32e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我使用pygame.display.set_caption来设置标题，还加载了图像。在这之后，窗口应该有:</p><figure class="jv jw jx jy fd ij er es paragraph-image"><div class="er es mi"><img src="../Images/61550fc1730f1773a78d18c26aa79361.png" data-original-src="https://miro.medium.com/v2/resize:fit:122/format:webp/1*SzfPiW9uZZd42bWSWngSSQ.png"/></div></figure><p id="3e74" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在顶端。看看你能否弄清楚其余的代码是如何工作的！</p></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><h1 id="db2b" class="ld kf hi bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">功能—我的天啊</h1><p id="334f" class="pw-post-body-paragraph iq ir hi is b it ma iv iw ix mb iz ja jb mc jd je jf md jh ji jj me jl jm jn hb bi translated">我们需要实现8个功能，但前3个功能非常相似。我们只是使用screen.blit将图像加载到屏幕上。</p><figure class="jv jw jx jy fd ij"><div class="bz dy l di"><div class="kk kl l"/></div></figure><p id="0d84" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">接下来，我们需要实现calc_cpu()和calc_ball()函数。对于calc_cpu()，我检查了cpu挡板的中心是否需要上下移动以匹配球的中心，然后相应地移动它。</p><figure class="jv jw jx jy fd ij"><div class="bz dy l di"><div class="kk kl l"/></div></figure><p id="4091" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">对于calc_ball，我只是移动了球，然后检查球是否撞到了一边，并分别计算了它的x和y动量。这有点复杂，因为它还需要检查球是否击中了球拍。</p><figure class="jv jw jx jy fd ij"><div class="bz dy l di"><div class="kk kl l"/></div></figure><p id="ca92" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后，game_over函数相对简单:</p><figure class="jv jw jx jy fd ij"><div class="bz dy l di"><div class="kk kl l"/></div></figure><p id="e295" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">之后，上移和下移的工作方式与calc_cpu类似，但是玩家控制方向</p><figure class="jv jw jx jy fd ij"><div class="bz dy l di"><div class="kk kl l"/></div></figure><p id="d3b6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">就是这样！我们需要的所有功能都被制造出来了</p></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><p id="5595" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果您现在尝试运行代码，将不会显示任何内容。这是因为我们需要更新while循环。我先放代码，再解释:</p><figure class="jv jw jx jy fd ij"><div class="bz dy l di"><div class="kk kl l"/></div></figure><p id="eeb3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">首先，我们检查玩家是否已经退出程序，类似于之前。之后，我们按下所有的键。然后，我们使用一个大的if链来查看玩家是否按了w或s键，或者玩家是否按了上/下箭头键。</p><p id="f46b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后，我们检查用户是否按了5，在这种情况下，游戏关闭。</p><p id="d7f9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">最后，我们按顺序运行大部分功能，然后更新屏幕。</p></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><p id="8907" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这是最终代码的样子:</p><figure class="jv jw jx jy fd ij"><div class="bz dy l di"><div class="kk kl l"/></div></figure><p id="f6a4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你试着运行代码，你应该有一个全功能的pong游戏。</p><figure class="jv jw jx jy fd ij er es paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="er es mj"><img src="../Images/ab3ec2850827119a4872b9b3234b95f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MXn4mllwdq43Va2LMYqorw.png"/></div></div></figure><p id="6352" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">本教程到此为止。如果你学到了一两件事，别忘了鼓掌！</p></div></div>    
</body>
</html>