<html>
<head>
<title>Microservices communication in Spring Boot with Feign client</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Spring Boot与Feign客户端的微服务通信</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/microservices-communication-in-spring-boot-with-feign-client-182bcf1d355b?source=collection_archive---------3-----------------------#2021-09-09">https://medium.com/geekculture/microservices-communication-in-spring-boot-with-feign-client-182bcf1d355b?source=collection_archive---------3-----------------------#2021-09-09</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="d6aa" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">用HTTP协议通信两个微服务</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/b8028416403fa5532add38087a66cb3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uKcGMA7kC_BCe7Blkk0fow.jpeg"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Source: <a class="ae jn" href="https://unsplash.com/" rel="noopener ugc nofollow" target="_blank">https://unsplash.com</a></figcaption></figure><p id="8d22" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">微服务是从领域驱动设计的世界中出现的架构模式之一，它的许多应用程序相互通信，形成一个完整的应用程序。为此，常用的协议是Http/Https。在本文结束时，您将学习如何使用Feign——一个由网飞开发的声明式HTTP客户端——在Spring Boot应用程序中与微服务通信。</p><p id="b31f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我假设您已经有了两个微服务(如果没有，您会在下面找到源代码)，所以我将直接跳到实现。对于这个例子，我有两个微服务(一个是<strong class="jq hj"> UserServiceApp </strong>，第二个是<strong class="jq hj"> ItemServiceApp </strong>)。</p><p id="4903" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我将创建一个服务来调用<strong class="jq hj"> ItemServiceApp </strong>中的用户项目列表。</p><p id="f4ce" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">要使用Feign，我们需要添加所需的依赖项:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="kk kl l"/></div></figure><p id="c1be" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">最新版本，查看<a class="ae jn" href="https://mvnrepository.com/artifact/org.springframework.cloud/spring-cloud-starter-openfeign" rel="noopener ugc nofollow" target="_blank"> <em class="km">这里</em> </a> <em class="km">。</em></p><p id="eff3" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">然后在主<strong class="jq hj"> Application.class </strong>中添加<strong class="jq hj"><em class="km">@ EnableFeignClients</em></strong>注释</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="kk kl l"/></div></figure><p id="9b8b" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在<strong class="jq hj">itemserviceapp</strong>中，有一个API通过用户ID获取一个项目列表。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="kk kl l"/></div></figure><p id="1a51" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">现在，为了在<strong class="jq hj">用户服务应用</strong>中使用它，我们需要一个接口服务，并添加<strong class="jq hj"> <em class="km"> @FeignClient </em> </strong>注释，该注释带有在<strong class="jq hj">应用程序.属性</strong>中定义的微服务的名称</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="kk kl l"/></div></figure><p id="eb95" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj"> <em class="km"> @GetMapping </em> </strong>中的路径值是<strong class="jq hj">itemserviceapp</strong>中API的路径。</p><p id="db94" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">该服务将如下所示:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="kk kl l"/></div></figure><p id="c1e8" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">现在，我们可以调用<strong class="jq hj"> UserService </strong>中的<strong class="jq hj"><em class="km">getItemByUserId()</em></strong>方法。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="kk kl l"/></div></figure><p id="a5a4" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">仅此而已，没那么复杂，对吧！</p><p id="8efc" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果你面临任何问题，请写在评论里。</p><p id="ee0f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">资源:</strong></p><p id="da30" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">【https://spring.io/projects/spring-cloud-openfeign T42】</p><p id="3dd1" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">源代码:<a class="ae jn" href="https://github.com/sabbarmehdi/microservices/tree/master/Micro-services" rel="noopener ugc nofollow" target="_blank"> <strong class="jq hj"> <em class="km">此处</em> </strong> </a></p></div></div>    
</body>
</html>