<html>
<head>
<title>Full Stack Application with Go, Gin, React, and MongoDB</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">具有Go、Gin、React和MongoDB的全栈应用程序</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/full-stack-application-with-go-gin-react-and-mongodb-37b63ef71133?source=collection_archive---------1-----------------------#2021-08-30">https://medium.com/geekculture/full-stack-application-with-go-gin-react-and-mongodb-37b63ef71133?source=collection_archive---------1-----------------------#2021-08-30</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="4d4a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">嗨，最近怎么样！在本教程中，我们将介绍如何使用go、ReactJS和MongoDB构建一个可以在本地机器上运行的全栈应用程序。无论您是刚接触Go、ReactJS或MongoDB，还是刚接触web开发，本教程都是一个很好的起点，可以让您了解这些组件，并了解它们是如何组合在一起的。对于我们的项目，我们将创建一个管理餐馆订单的应用程序。</p><h1 id="fdc7" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">去</h1><p id="233f" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">我们将使用Go作为我们的后端web服务器，我们将建立一个具有基本CRUD(创建，读取，更新，删除)功能的API，我们的前端应用程序可以与之接口。</p><p id="9a72" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将使用Gin框架，关于该框架的更多信息可以在这里找到。</p><p id="af77" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你还没有下载围棋，那就去围棋网站<a class="ae kg" href="https://golang.org/" rel="noopener ugc nofollow" target="_blank">这里</a>下载吧。如果你想了解更多关于围棋的知识，围棋官方网站也提供了教程。<a class="ae kg" href="https://www.w3schools.com/go/index.php" rel="noopener ugc nofollow" target="_blank"> W3Schools </a>也有关于围棋的精彩章节。</p><h1 id="0e02" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">反应</h1><p id="b0c6" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">对于我们的前端应用程序，我们将使用React，这是一个用于构建用户界面的很好的JavaScript库。</p><p id="5839" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要使用React，你需要下载<a class="ae kg" href="https://nodejs.org/en/download/" rel="noopener ugc nofollow" target="_blank">节点</a>以及<a class="ae kg" href="https://www.npmjs.com/package/download" rel="noopener ugc nofollow" target="_blank"> NPM </a>。</p><p id="6111" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你想了解更多关于React的知识，请点击这里查看W3Schools提供的React上的片段。</p><h1 id="a229" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">MongoDB</h1><p id="937b" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">最后，我们将使用<a class="ae kg" href="https://cloud.mongodb.com/" rel="noopener ugc nofollow" target="_blank"> MongoDB </a>作为我们的数据库。MongoDB是一个面向文档的数据库程序，这意味着它不使用SQL，而是使用JSON来存储信息。它还有一个免费层(我们将使用它)，所以对于任何项目来说，它都是一个非常好的数据库选择。</p><p id="8da1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">MongoDB不需要任何下载，但是我推荐下载<a class="ae kg" href="https://www.postman.com/" rel="noopener ugc nofollow" target="_blank"> Postman </a>，这是一个测试我们API的便捷工具。</p><h1 id="4239" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">设置数据库</h1><p id="9547" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">好了，现在你已经熟悉了我们的堆栈，并且已经下载了所有必要的工具，让我们来设置我们的数据库吧！</p><p id="f3e6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先前往<a class="ae kg" href="https://cloud.mongodb.com/" rel="noopener ugc nofollow" target="_blank"> MongoDB </a>并登录/注册。一旦你进入，你的主屏幕应该是这样的:</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es kh"><img src="../Images/9fcb25a817bf0f4e3b887f1e6d8088a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zg1rJukdYSPxmT8lLYepcA.png"/></div></div></figure><p id="64f4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">点击“构建数据库”并选择“共享”选项，创建一个新的数据库。</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es kt"><img src="../Images/d79c113ac3d6b34bcc644a1dda0786e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7zP8XcERT9LKxbvHBH7TVg.png"/></div></div></figure><p id="d5ad" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">保留默认选项并选择“创建集群”</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es ku"><img src="../Images/e02d2b5bff10e3373a167fcbc41a63c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b1JZjKbElwRqyJNj25lGcA.png"/></div></div></figure><p id="3250" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">创建集群后，单击“Connect”按钮。</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es kv"><img src="../Images/352f6d700bde004265107b781cf41a83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MfC4f8YgwnyrrD7QPLaKtQ.png"/></div></div></figure><p id="02dc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">选择您的IP地址并创建用户名和密码。然后点击“选择连接方式”</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es kw"><img src="../Images/b794002cfb000b943f05191e817d24fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DjsSZp2HqTEhxTf7LitiAQ.png"/></div></div></figure><p id="6a3f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">选择“连接应用程序”选项。</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es kx"><img src="../Images/efb416c14e94dfd8eb901554efb0d71d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qwm4O3zbcSG8aZLHyM5HfA.png"/></div></div></figure><p id="bee7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">保存连接字符串并单击“关闭”</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es ky"><img src="../Images/7e9209cfd119aa15558120194cadcfbb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7dzZuLl_JkcgnTjbP3eY1A.png"/></div></div></figure><p id="5250" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">连接字符串是我们的后端API将与数据库通信的URL端点。</p><p id="9da0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">用您的密码替换<password>,用您的集群名替换myFirstDatabase。</password></p><pre class="ki kj kk kl fd kz la lb lc aw ld bi"><span id="f61a" class="le je hi la b fi lf lg l lh li">mongodb+srv://admin:mypassword@cluster0.56rq1f.mongodb.net/Cluster0?retryWrites=true&amp;w=majority</span></pre><p id="d063" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们已经完成了数据库部分，可以开始应用程序的后端部分了。</p><h1 id="1c28" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">后端API</h1><p id="130c" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">既然我们已经建立了数据库并准备好了，让我们来建立我们的API。首先，我们要创建一个文件夹来存放我们所有的服务器文件。打开您的终端，导航到您的项目文件夹，创建一个名为“server”的新文件夹，并输入它。</p><figure class="ki kj kk kl fd km er es paragraph-image"><div class="er es lj"><img src="../Images/5f563522dc67f2d2203f43f83cfaada8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1182/format:webp/1*CqOVpgYewtj7VgCvA1xebw.png"/></div></figure><p id="acff" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，我们将创建我们的mod文件。这将包含我们服务器的所有配置。</p><p id="5665" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">键入:<code class="du lk ll lm la b">go mod init server</code>并按回车键。</p><p id="2eb4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这将在您的文件夹中创建一个名为server的包，并创建一个go.mod文件。我们需要添加MongoDB和Gin的包，我们通过打开go.mod并添加以下代码行来完成此操作:</p><pre class="ki kj kk kl fd kz la lb lc aw ld bi"><span id="2a90" class="le je hi la b fi lf lg l lh li">require (<br/>    github.com/gin-gonic/gin v1.7.3<br/>    github.com/go-playground/validator/v10 v10.4.1<br/>    github.com/joho/godotenv v1.3.0<br/>    go.mongodb.org/mongo-driver v1.7.1<br/>)</span></pre><p id="b3e7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您的go.mod文件应该如下所示:</p><figure class="ki kj kk kl fd km"><div class="bz dy l di"><div class="ln lo l"/></div></figure></div><div class="ab cl lp lq gp lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="hb hc hd he hf"><p id="74f4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，在服务器目录中创建一个名为main.go的文件，并向其中添加以下代码:</p><figure class="ki kj kk kl fd km"><div class="bz dy l di"><div class="ln lo l"/></div></figure><p id="6664" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在main.go中，我们首先获得我们的进口。如你所见，我们正在导入gin框架以及一个名为routes的包，我们将在后面创建它。在main函数中，我们首先设置端口，然后设置路由器。在这个函数中，我们还有不同的端点，我们的API将不得不执行CRUD操作。</p></div><div class="ab cl lp lq gp lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="hb hc hd he hf"><p id="fe0d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我们继续之前，让我们创建我们的。环境文件夹。这将保存我们的安全信息。创建一个名为。env并添加以下代码行，其中MONGODB_URL=包含前面的MONGODB端点:</p><pre class="ki kj kk kl fd kz la lb lc aw ld bi"><span id="a9e2" class="le je hi la b fi lf lg l lh li">PORT=5000<br/>MONGODB_URL=mongodb+srv://admin:Password@cluster0.655rf.mo<br/>ngodb.net/Cluster0?retryWrites=true&amp;w=majority</span></pre><p id="f73c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您要将您的更改推送到GitHub，请确保添加。env文件到您的。gitignore文件。</p></div><div class="ab cl lp lq gp lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="hb hc hd he hf"><p id="94f7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，我们将为餐馆订单创建数据模型。在服务器目录中，创建一个名为models的新目录，并在其中创建一个名为order.go的文件，然后向其中添加以下代码:</p><figure class="ki kj kk kl fd km"><div class="bz dy l di"><div class="ln lo l"/></div></figure><p id="c523" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在order.go中，第一行是“包模型”。这将创建包，以便我们可以在代码的其他区域引用它。接下来，我们将导入bson/primitive，以便为每个订单创建一个ObjectID惟一ID。之后，我们有了订单的模式。如您所见，每个订单都有一个惟一的id、一道菜、一个价格、一个服务器和一张桌子。</p></div><div class="ab cl lp lq gp lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="hb hc hd he hf"><p id="3bbe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">创建好模式后，让我们创建路线。回到我们的服务器目录，创建另一个名为routes的目录。还记得我们如何在main.go中导入服务器/路由吗？这就是了。继续创建一个名为connections.go的文件，它将处理我们到数据库的连接，并输入以下代码:</p><figure class="ki kj kk kl fd km"><div class="bz dy l di"><div class="ln lo l"/></div></figure><p id="bc70" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在connections.go中，与所有其他文件一样，我们有将在该文件中使用的导入。接下来是DBInstance函数，它接受存储在。env文件并创建一个连接。另一个函数OpenCollection接受一个集合名称并打开一个集合。</p></div><div class="ab cl lp lq gp lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="hb hc hd he hf"><p id="b519" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将在routes文件夹中创建的下一个文件是orders.go。该文件将保存订单模型的所有函数，这些函数处理我们在main.go中设置的各种端点的api请求。</p><p id="6c34" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在orders.go中，首先我们将添加导入并创建几个变量:</p><pre class="ki kj kk kl fd kz la lb lc aw ld bi"><span id="cea9" class="le je hi la b fi lf lg l lh li">package routes</span><span id="8e88" class="le je hi la b fi lw lg l lh li">import (<br/>    "context"<br/>    "fmt"<br/>    "net/http"<br/>    "time"<br/>    <br/>    "server/models"<br/>    "github.com/go-playground/validator/v10"<br/>    "go.mongodb.org/mongo-driver/mongo"<br/>    "go.mongodb.org/mongo-driver/bson/primitive"<br/>    "go.mongodb.org/mongo-driver/bson"<br/>    "github.com/gin-gonic/gin"<br/>)</span><span id="0857" class="le je hi la b fi lw lg l lh li">var validate = validator.New()<br/>var orderCollection *mongo.Collection = OpenCollection(Client, "orders")</span></pre><p id="0a8f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">变量validate允许我们确保在创建或更新订单时收到的订单数据是正确的，orderCollection为我们打开了一个新的集合，称为“orders”。</p><p id="d771" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，我们将创建一个名为AddOrder的函数来处理新订单的创建:</p><pre class="ki kj kk kl fd kz la lb lc aw ld bi"><span id="e166" class="le je hi la b fi lf lg l lh li">//add an order<br/>func AddOrder(c *gin.Context) {<br/>    var ctx, cancel = context.WithTimeout(context.Background(), 100*time.Second)<br/>    var order models.Order<br/>    <br/>    <em class="lx">if</em> err := c.BindJSON(&amp;order); err != nil {<br/>        c.JSON(http.StatusBadRequest, gin.H{"error": err.Error()})<br/>        <em class="lx">return<br/>    </em>}<br/>    <br/>    validationErr := validate.Struct(order)<br/>    <em class="lx">if</em> validationErr != nil {<br/>         c.JSON(http.StatusBadRequest, gin.H{"error": validationErr.Error()})<br/>         <em class="lx">return<br/>    </em>}</span><span id="6177" class="le je hi la b fi lw lg l lh li">    order.ID = primitive.NewObjectID()<br/>  <br/>    result, insertErr := orderCollection.InsertOne(ctx, order)<br/>    <em class="lx">if</em> insertErr != nil {<br/>        msg := fmt.Sprintf("order item was not created")<br/>        c.JSON(http.StatusInternalServerError, gin.H{"error": msg})<br/>        <em class="lx">return<br/>    </em>}<br/>    <br/>    <em class="lx">defer</em> cancel()<br/>    c.JSON(http.StatusOK, result)<br/>}</span></pre><p id="918c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在AddOrder中(附注:首字母大写的函数被认为是公共的，否则它们被认为是私有的)，我们创建了一个超时的上下文。接下来，我们创建订单变量，并用用户提供的数据填充它。接下来，我们验证数据，然后为订单创建唯一的id。最后，我们将新的订单对象插入数据库并返回结果。</p><p id="ab1c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们要创建的下一个函数是GetOrders，它将返回集合中的所有订单:</p><pre class="ki kj kk kl fd kz la lb lc aw ld bi"><span id="389a" class="le je hi la b fi lf lg l lh li">//get all orders<br/>func GetOrders(c *gin.Context){<br/>    var ctx, cancel = context.WithTimeout(context.Background(), 100*time.Second)<br/>    var orders []bson.M</span><span id="8937" class="le je hi la b fi lw lg l lh li">    cursor, err := orderCollection.Find(ctx, bson.M{})<br/>    <em class="lx">if</em> err != nil {<br/>        c.JSON(http.StatusInternalServerError, gin.H{"error": err.Error()})<br/>        <em class="lx">return<br/>    </em>}</span><span id="4165" class="le je hi la b fi lw lg l lh li"><em class="lx">    if</em> err = cursor.All(ctx, &amp;orders); err != nil {<br/>        c.JSON(http.StatusInternalServerError, gin.H{"error": err.Error()})<br/>        <em class="lx">return<br/>    </em>}<br/>    <br/>    <em class="lx">defer</em> cancel()<br/>    <br/>    fmt.Println(orders)</span><span id="1a02" class="le je hi la b fi lw lg l lh li">    c.JSON(http.StatusOK, orders)<br/>}</span></pre><p id="25f6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个函数非常简单，我们创建一个订单数组，并使用orderCollection.Find从数据库中的数据填充这些订单。像AddOrder函数和我们将要创建的所有其他函数一样，我们创建一个超时的上下文，并在每一步进行错误检查。</p><p id="0669" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下一个函数是GetOrdersByWaiter，这个函数建立在GetOrders的基础上。它接受一个服务员的名字，并返回该服务员的所有订单。</p><pre class="ki kj kk kl fd kz la lb lc aw ld bi"><span id="7428" class="le je hi la b fi lf lg l lh li">//get all orders by the waiter's name<br/>func GetOrdersByWaiter(c *gin.Context){<br/>    <br/>    waiter := c.Params.ByName("waiter")<br/>    var ctx, cancel = context.WithTimeout(context.Background(), 100*time.Second)<br/>    var orders []bson.M</span><span id="3948" class="le je hi la b fi lw lg l lh li">    cursor, err := orderCollection.Find(ctx, bson.M{"server": waiter})<br/>    <em class="lx">if</em> err != nil {<br/>        c.JSON(http.StatusInternalServerError, gin.H{"error": err.Error()})<br/>        <em class="lx">return<br/>    </em>}</span><span id="4939" class="le je hi la b fi lw lg l lh li"><em class="lx">    if</em> err = cursor.All(ctx, &amp;orders); err != nil {<br/>        c.JSON(http.StatusInternalServerError, gin.H{"error": err.Error()})<br/>        <em class="lx">return<br/>    </em>}</span><span id="c856" class="le je hi la b fi lw lg l lh li"><em class="lx">    defer</em> cancel()</span><span id="7f64" class="le je hi la b fi lw lg l lh li">    fmt.Println(orders)</span><span id="4177" class="le je hi la b fi lw lg l lh li">    c.JSON(http.StatusOK, orders)<br/>}</span></pre><p id="09b9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如您所见，除了几个例外，它与前面的函数非常相似。首先，我们接受一个名为waiter的参数，其次，我们将该参数用作orderCollection.Find中的过滤器。</p><p id="e59c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们的最后一个GET函数是GetOrderById，它将接受一个订单Id并返回一个订单。</p><pre class="ki kj kk kl fd kz la lb lc aw ld bi"><span id="ac0b" class="le je hi la b fi lf lg l lh li">//get an order by its id<br/>func GetOrderById(c *gin.Context){<br/>    orderID := c.Params.ByName("id")<br/>    docID, _ := primitive.ObjectIDFromHex(orderID)</span><span id="2e1a" class="le je hi la b fi lw lg l lh li">    var ctx, cancel = context.WithTimeout(context.Background(), 100*time.Second)</span><span id="f2c8" class="le je hi la b fi lw lg l lh li">    var order bson.M</span><span id="c11e" class="le je hi la b fi lw lg l lh li"><em class="lx">    if</em> err := orderCollection.FindOne(ctx, bson.M{"_id": docID}).Decode(&amp;order); err != nil {<br/>        c.JSON(http.StatusInternalServerError, gin.H{"error": err.Error()})<br/>        <em class="lx">return<br/>    </em>}</span><span id="77f3" class="le je hi la b fi lw lg l lh li"><em class="lx">    defer</em> cancel()</span><span id="48d2" class="le je hi la b fi lw lg l lh li">    fmt.Println(order)</span><span id="c106" class="le je hi la b fi lw lg l lh li">    c.JSON(http.StatusOK, order)<br/>}</span></pre><p id="7637" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们在GetOrderById中做的第一件事是获取Id参数并将其转换为ObjectID对象。然后我们使用orderCollection。FindOne查找与订单id匹配的订单。</p><p id="382c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来的几个函数将是我们的PUT函数，它将处理更新订单。我们将实现的第一个函数是UpdateWaiter，它接受一个id作为参数，以及一个简单的用于服务员的json对象，并用订单id替换找到的订单，以获得新服务员的姓名。</p><pre class="ki kj kk kl fd kz la lb lc aw ld bi"><span id="e1e4" class="le je hi la b fi lf lg l lh li">//update a waiter's name for an order<br/>func UpdateWaiter(c *gin.Context){</span><span id="fb7a" class="le je hi la b fi lw lg l lh li">    orderID := c.Params.ByName("id")<br/>    docID, _ := primitive.ObjectIDFromHex(orderID)</span><span id="faeb" class="le je hi la b fi lw lg l lh li">    var ctx, cancel = context.WithTimeout(context.Background(), 100*time.Second)</span><span id="e08e" class="le je hi la b fi lw lg l lh li">    type Waiter struct {<br/>        Server      *<em class="lx">string</em>             `json:"server"`<br/>    }</span><span id="fbd6" class="le je hi la b fi lw lg l lh li">    var waiter Waiter</span><span id="80c7" class="le je hi la b fi lw lg l lh li"><em class="lx">    if</em> err := c.BindJSON(&amp;waiter); err != nil {<br/>        c.JSON(http.StatusBadRequest, gin.H{"error": err.Error()})<br/>        <em class="lx">return<br/>    </em>}</span><span id="3cbe" class="le je hi la b fi lw lg l lh li">    result, err := orderCollection.UpdateOne(ctx, bson.M{"_id": docID},<br/>        bson.D{<br/>            {"$set", bson.D{{"server", waiter.Server}}},<br/>        },<br/>    )</span><span id="cac6" class="le je hi la b fi lw lg l lh li"><em class="lx">    if</em> err != nil {<br/>        c.JSON(http.StatusInternalServerError, gin.H{"error": err.Error()})<br/>        <em class="lx">return<br/>    </em>}</span><span id="a009" class="le je hi la b fi lw lg l lh li"><em class="lx">    defer</em> cancel()</span><span id="cecc" class="le je hi la b fi lw lg l lh li">    c.JSON(http.StatusOK, result.ModifiedCount)<br/>}</span></pre><p id="b6a7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在UpdateWaiter中，我们首先获取id参数，并将其转换为ObjectID对象。然后我们为我们的服务员创建一个新的结构，并用用户提供的数据填充它。之后，我们使用orderCollection。UpdateOne用服务员的名字更新订单。</p><p id="b7f4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们要创建的下一个函数叫做UpdateOrder。这与前面的函数类似，只是它将接受一个order对象并用这个新订单替换现有订单。</p><pre class="ki kj kk kl fd kz la lb lc aw ld bi"><span id="fd4b" class="le je hi la b fi lf lg l lh li">//update the order<br/>func UpdateOrder(c *gin.Context){<br/>    orderID := c.Params.ByName("id")<br/>    docID, _ := primitive.ObjectIDFromHex(orderID)</span><span id="2583" class="le je hi la b fi lw lg l lh li">    var ctx, cancel = context.WithTimeout(context.Background(), 100*time.Second)</span><span id="7f67" class="le je hi la b fi lw lg l lh li">    var order models.Order<br/>    <em class="lx">if</em> err := c.BindJSON(&amp;order); err != nil {<br/>        c.JSON(http.StatusBadRequest, gin.H{"error": err.Error()})<br/>        <em class="lx">return<br/>    </em>}</span><span id="07f6" class="le je hi la b fi lw lg l lh li">    validationErr := validate.Struct(order)<br/>    <em class="lx">if</em> validationErr != nil {<br/>        c.JSON(http.StatusBadRequest, gin.H{"error": validationErr.Error()})<br/>        <em class="lx">return<br/>    </em>}</span><span id="5132" class="le je hi la b fi lw lg l lh li">    result, err := orderCollection.ReplaceOne(<br/>        ctx,<br/>        bson.M{"_id": docID},<br/>        bson.M{<br/>            "dish":  order.Dish,<br/>            "price": order.Price,<br/>            "server": order.Server,<br/>            "table": order.Table,<br/>        },<br/>    )</span><span id="cc43" class="le je hi la b fi lw lg l lh li"><em class="lx">    if</em> err != nil {<br/>        c.JSON(http.StatusInternalServerError, gin.H{"error": err.Error()})<br/>        <em class="lx">return<br/>    </em>}<br/> <br/>    <em class="lx">defer</em> cancel()</span><span id="2ba3" class="le je hi la b fi lw lg l lh li">    c.JSON(http.StatusOK, result.ModifiedCount)<br/>}</span></pre><p id="c353" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在UpdateOrder中，我们接受id作为参数，然后接受订单数据进行验证。之后，我们使用orderCollection。ReplaceOne用该id的新订单替换订单。</p><p id="821a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将创建的最后一个函数是DeleteOrder函数。这将接受一个id作为参数，并删除与该id匹配的订单。</p><pre class="ki kj kk kl fd kz la lb lc aw ld bi"><span id="6539" class="le je hi la b fi lf lg l lh li">//delete an order given the id<br/>func DeleteOrder(c * gin.Context){<br/>    orderID := c.Params.ByName("id")<br/>    docID, _ := primitive.ObjectIDFromHex(orderID)</span><span id="1574" class="le je hi la b fi lw lg l lh li">    var ctx, cancel = context.WithTimeout(context.Background(), 100*time.Second)</span><span id="4d14" class="le je hi la b fi lw lg l lh li">    result, err := orderCollection.DeleteOne(ctx, bson.M{"_id": docID})<br/>    <em class="lx">if</em> err != nil {<br/>        c.JSON(http.StatusInternalServerError, gin.H{"error": err.Error()})<br/>        <em class="lx">return<br/>    </em>}</span><span id="07c7" class="le je hi la b fi lw lg l lh li"><em class="lx">    defer</em> cancel()</span><span id="c88e" class="le je hi la b fi lw lg l lh li">    c.JSON(http.StatusOK, result.DeletedCount)<br/>}</span></pre><p id="fea8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如您所见，我们正在使用orderCollection。DeleteOne删除与id匹配的订单。</p><p id="b6f6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">完整的文件如下所示:</p><figure class="ki kj kk kl fd km"><div class="bz dy l di"><div class="ln lo l"/></div></figure><p id="93ca" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们已经创建了所有文件，我们的文件结构应该如下所示:</p><figure class="ki kj kk kl fd km er es paragraph-image"><div class="er es ly"><img src="../Images/6df318c0b7f90524ff9e50a1d5191f62.png" data-original-src="https://miro.medium.com/v2/resize:fit:580/format:webp/1*kJybcYxKidSYTpZS4Q-DAg.png"/></div></figure><p id="2fad" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们有了所有的文件，我们可以构建并运行我们的服务器了。首先导航到您的服务器目录，并输入以下命令:</p><p id="9240" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">去mod整理<br/>去build main.go <br/>去run main.go</p><p id="8b84" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">“go mod tidy”添加导入，“go build main.go”构建项目，“go run main.go”运行项目。您的输出应该如下所示:</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es lz"><img src="../Images/4d97b77286b95450ccd9af31c77de290.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U4e8GzEJSkE2DUIgBDyQGQ.png"/></div></div></figure><p id="ced5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了测试这些url端点，我们可以使用postman。</p><p id="1483" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们创建几个订单:</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es ma"><img src="../Images/1ff9ec7888d6ca089c59e0915f5f1ebc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*blBLYV2M_pRkHPtA4D5yyg.png"/></div></div><figcaption class="mb mc et er es md me bd b be z dx">Creating an order of french fries for waiter: john</figcaption></figure><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es mf"><img src="../Images/23847ec51c88b6462cfcbbda22f3a123.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VyYUigGJ4pm_mn54kG-HJg.png"/></div></div><figcaption class="mb mc et er es md me bd b be z dx">Creating an order of chicken nuggets for waiter: Dave</figcaption></figure><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es mg"><img src="../Images/c3d22fcfc343b60160917546dc2c003c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NvYKxaYxEdIm5YRJMJHi3w.png"/></div></div><figcaption class="mb mc et er es md me bd b be z dx">Creating another order for dave</figcaption></figure><p id="a6fd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们来看看我们创建的订单。首先让我们得到所有的订单:</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es mh"><img src="../Images/a3b349fce13261e1142c1030dfd03125.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LcaRwkX3xHOkZdlh9d61VQ.png"/></div></div><figcaption class="mb mc et er es md me bd b be z dx">All the orders</figcaption></figure><p id="0190" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来让我们为服务员戴夫点菜:</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es mi"><img src="../Images/5eabb32b5f9c03355d3075ad44d123de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ppIwiALjgBwBgDx5WglBUQ.png"/></div></div><figcaption class="mb mc et er es md me bd b be z dx">All of Dave’s orders</figcaption></figure><p id="c8f4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们只得到一个订单:</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es mj"><img src="../Images/633411afe4a7741fd93ead20286a9da1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7Wl0U1B7uX748rl-MttJEw.png"/></div></div></figure><p id="5128" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们测试一下我们的更新端点。让我们更新我们创建的鸡块订单，然后为它分配一个不同的服务员。出于演示的目的，我们使用了两种不同的操作，尽管我们可以只使用一个更新订单函数。</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es mk"><img src="../Images/55aa25404889b12950cbfbf76637fe23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y4JYHEGs9Ql88K7uI_WCBg.png"/></div></div><figcaption class="mb mc et er es md me bd b be z dx">Updating the chicken nuggets order</figcaption></figure><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es ml"><img src="../Images/6339dc13f292826516566f63eda8324b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zqxOVohEzOhbhIpvbws7Sg.png"/></div></div><figcaption class="mb mc et er es md me bd b be z dx">updating the order to have a new waiter: luke</figcaption></figure><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es mj"><img src="../Images/e8a25f06b3c14ce9fc54e5ff50e1dd99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zpbsI-i1EFLed77UlKtcJw.png"/></div></div><figcaption class="mb mc et er es md me bd b be z dx">Test our changes using the get order endpoint</figcaption></figure><p id="8293" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后，让我们测试我们的删除端点。</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es mm"><img src="../Images/170ecae36f4567ef63b37005f42fec11.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_osZRTIIBzVpW5W9lElGVg.png"/></div></div><figcaption class="mb mc et er es md me bd b be z dx">Deleting the order for which the waiter is Luke</figcaption></figure><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es mn"><img src="../Images/59c62c9d63d267315ab28368b40da405.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rtheuD4AfDTCOV-1U3dcRQ.png"/></div></div><figcaption class="mb mc et er es md me bd b be z dx">Testing to make sure that the entry was deleted.</figcaption></figure><p id="02d8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">太好了！既然我们已经设置了web服务器，我们就可以实现我们的前端应用程序了。</p></div><div class="ab cl lp lq gp lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="hb hc hd he hf"><h1 id="0c29" class="jd je hi bd jf jg mo ji jj jk mp jm jn jo mq jq jr js mr ju jv jw ms jy jz ka bi translated">前端</h1><p id="92a7" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">对于前端，我们将使用React，这是一个很好的UI框架。首先，让我们导航到主项目文件夹，通过键入“npx create-react-app frontend”创建一个新的react项目，这将创建一个名为frontend的新应用程序。</p><p id="fe3f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">创建应用程序后，导航到前端目录并输入以下命令</p><p id="34cf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">npm安装axios <br/> npm安装react-bootstrap @ next bootstrap @ 5 . 1 . 0</p><p id="db85" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将使用axios来处理我们对服务器的请求，react-bootstrap用于我们的UI样式。</p><p id="1fb1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我们的/src目录中创建一个名为“components”的新文件夹，并在该文件夹中创建两个新文件orders.components.js和single-order.component.js</p><p id="d498" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在single-order.components.js中，添加以下代码:</p><pre class="ki kj kk kl fd kz la lb lc aw ld bi"><span id="16f7" class="le je hi la b fi lf lg l lh li"><em class="lx">import</em> React, {useState, useEffect} <em class="lx">from</em> 'react';<br/><em class="lx">import</em> 'bootstrap/dist/css/bootstrap.css';<br/><em class="lx">import</em> {Button, Card, Row, Col} <em class="lx">from</em> 'react-bootstrap'</span><span id="b97b" class="le je hi la b fi lw lg l lh li"><em class="lx">const</em> Order = ({orderData, setChangeWaiter, deleteSingleOrder, setChangeOrder}) =&gt; {<br/>    return (<br/>    )<br/>}</span><span id="9c16" class="le je hi la b fi lw lg l lh li">export default Order</span></pre><p id="a893" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们的订单组件将接收订单数据、删除订单的函数和准备订单以更新服务员或更改订单的函数。我们将回头讨论它，但现在将以下代码添加到orders.components.js中:</p><pre class="ki kj kk kl fd kz la lb lc aw ld bi"><span id="c85e" class="le je hi la b fi lf lg l lh li"><em class="lx">import</em> React, {useState, useEffect} <em class="lx">from</em> 'react';<br/><em class="lx">import</em> axios <em class="lx">from</em> "axios";<br/><em class="lx">import</em> {Button, Form, Container, Modal } <em class="lx">from</em> 'react-bootstrap'<br/><em class="lx">import</em> Order <em class="lx">from</em> './single-order.component';</span><span id="39a1" class="le je hi la b fi lw lg l lh li"><em class="lx">const</em> Orders = () =&gt; {<br/>    return (<br/>    )<br/>}</span><span id="c42a" class="le je hi la b fi lw lg l lh li">export default Orders</span></pre><p id="839e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该组件将在我们的网页上显示所有订单。返回一个目录，将App.js更改为以下内容，以便它调用Orders组件:</p><figure class="ki kj kk kl fd km"><div class="bz dy l di"><div class="ln lo l"/></div></figure><p id="62c0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">回到single-order.component.js，在return语句之后，添加这两个函数。</p><pre class="ki kj kk kl fd kz la lb lc aw ld bi"><span id="25fe" class="le je hi la b fi lf lg l lh li"><em class="lx">function</em> changeWaiter(){<br/>    setChangeWaiter({<br/>        "change": true,<br/>        "id": orderData._id<br/>    })<br/>}</span><span id="6bf5" class="le je hi la b fi lw lg l lh li"><em class="lx">function</em> changeOrder(){<br/>    setChangeOrder({<br/>        "change": true,<br/>        "id": orderData._id<br/>    })<br/>}</span></pre><p id="e854" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这将设置setChangeWaiter和setChangeOrder的值，并提醒订单组件显示更改数据的弹出窗口。在return语句中，添加以下代码:</p><pre class="ki kj kk kl fd kz la lb lc aw ld bi"><span id="b3c4" class="le je hi la b fi lf lg l lh li">&lt;Card&gt;<br/>    &lt;Row&gt;<br/>        &lt;Col&gt;Dish:<em class="lx">{</em> orderData !== undefined &amp;&amp; orderData.dish<em class="lx">}</em>&lt;/Col&gt;<br/>        &lt;Col&gt;Server:<em class="lx">{</em> orderData !== undefined &amp;&amp; orderData.server &lt;/Col&gt;<br/>        &lt;Col&gt;Table:<em class="lx">{</em> orderData !== undefined &amp;&amp; orderData.table<em class="lx">}</em>&lt;/Col&gt;<br/>        &lt;Col&gt;Price: $<em class="lx">{</em>orderData !== undefined &amp;&amp; orderData.price<em class="lx">}</em>&lt;/Col&gt;<br/>        &lt;Col&gt;&lt;Button <em class="lx">onClick</em>=<em class="lx">{</em>() =&gt; deleteSingleOrder(orderData._id)<em class="lx">}</em>&gt;delete order&lt;/Button&gt;&lt;/Col&gt;<br/>        &lt;Col&gt;&lt;Button <em class="lx">onClick</em>=<em class="lx">{</em>() =&gt; changeWaiter()<em class="lx">}</em>&gt;change waiter&lt;/Button&gt;&lt;/Col&gt;<br/>        &lt;Col&gt;&lt;Button <em class="lx">onClick</em>=<em class="lx">{</em>() =&gt; changeOrder()<em class="lx">}</em>&gt;change order&lt;/Button&gt;&lt;/Col&gt;<br/>    &lt;/Row&gt;<br/>&lt;/Card&gt;</span></pre><p id="4df1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这将在网页中显示有关订单的信息，以及删除、更改和更新服务员的按钮。</p><p id="803f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您完成的文件应该如下所示:</p><figure class="ki kj kk kl fd km"><div class="bz dy l di"><div class="ln lo l"/></div></figure></div><div class="ab cl lp lq gp lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="hb hc hd he hf"><p id="8e7a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在转到orders.component.js文件，在组件的开头添加以下代码:</p><pre class="ki kj kk kl fd kz la lb lc aw ld bi"><span id="e7d2" class="le je hi la b fi lf lg l lh li"><em class="lx">const</em> [orders, setOrders] = useState([])<br/><em class="lx">const</em> [refreshData, setRefreshData] = useState(false)</span><span id="242e" class="le je hi la b fi lw lg l lh li"><em class="lx">const</em> [changeOrder, setChangeOrder] = useState({"change": false, "id": 0})<br/><em class="lx">const</em> [changeWaiter, setChangeWaiter] = useState({"change": false, "id": 0})<br/><em class="lx">const</em> [newWaiterName, setNewWaiterName] = useState("")</span><span id="1686" class="le je hi la b fi lw lg l lh li"><em class="lx">const</em> [addNewOrder, setAddNewOrder] = useState(false)<br/><em class="lx">const</em> [newOrder, setNewOrder] = useState({"dish": "", "server": "", "table": 0, "price": 0})</span></pre><p id="b5d7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这些将是我们用来控制添加、更新、显示和删除订单的变量。每个变量都有一个setter，调用它时会刷新页面。</p><p id="1949" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在return语句后添加以下函数，这些函数将使用axios向服务器提交对我们各种功能的请求:</p><pre class="ki kj kk kl fd kz la lb lc aw ld bi"><span id="dc53" class="le je hi la b fi lf lg l lh li">//changes the waiter<br/><em class="lx">function</em> changeWaiterForOrder(){<br/>    changeWaiter.change = false<br/>    <em class="lx">var</em> url = "http://localhost:5000/waiter/update/" + changeWaiter.id<br/>    axios.put(url, {<br/>        "server": newWaiterName<br/>    }).then(response =&gt; {<br/>        console.log(response.status)<br/>        <em class="lx">if</em>(response.status == 200){<br/>            setRefreshData(true)<br/>        }<br/>    })<br/>}</span><span id="c466" class="le je hi la b fi lw lg l lh li">//changes the order<br/><em class="lx">function</em> changeSingleOrder(){<br/>    changeOrder.change = false;<br/>    <em class="lx">var</em> url = "http://localhost:5000/order/update/" + changeOrder.id<br/>    axios.put(url, newOrder)<br/>        .then(response =&gt; {<br/>        <em class="lx">if</em>(response.status == 200){<br/>            setRefreshData(true)<br/>        }<br/>    })<br/>}</span><span id="d2bd" class="le je hi la b fi lw lg l lh li">//creates a new order<br/><em class="lx">function</em> addSingleOrder(){<br/>    setAddNewOrder(false)<br/>    <em class="lx">var</em> url = "http://localhost:5000/order/create"<br/>    axios.post(url, {<br/>        "server": newOrder.server,<br/>        "dish": newOrder.dish,<br/>        "table": newOrder.table,<br/>        "price": parseFloat(newOrder.price)<br/>    }).then(response =&gt; {<br/>        <em class="lx">if</em>(response.status == 200){<br/>            setRefreshData(true)<br/>        }<br/>    })<br/>}</span><span id="8cf2" class="le je hi la b fi lw lg l lh li">//gets all the orders<br/><em class="lx">function</em> getAllOrders(){<br/>    <em class="lx">var</em> url = "http://localhost:5000/orders"<br/>    axios.get(url, {<br/>        responseType: 'json'<br/>    }).then(response =&gt; {<br/>        <em class="lx">if</em>(response.status == 200){<br/>            setOrders(response.data)<br/>        }<br/>    })<br/>}</span><span id="3ced" class="le je hi la b fi lw lg l lh li">//deletes a single order<br/><em class="lx">function</em> deleteSingleOrder(id){<br/>    <em class="lx">var</em> url = "http://localhost:5000/order/delete/" + id<br/>    axios.delete(url, {<br/>    }).then(response =&gt; {<br/>        <em class="lx">if</em>(response.status == 200){<br/>            setRefreshData(true)<br/>        }<br/>    })<br/>}</span></pre><p id="a75d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后在return语句的正上方添加以下内容:</p><pre class="ki kj kk kl fd kz la lb lc aw ld bi"><span id="207c" class="le je hi la b fi lf lg l lh li">//gets run at initial loadup<br/>useEffect(() =&gt; {<br/>    getAllOrders();<br/>}, [])</span><span id="b984" class="le je hi la b fi lw lg l lh li">//refreshes the page<br/><em class="lx">if</em>(refreshData){<br/>    setRefreshData(false);<br/>    getAllOrders();<br/>}</span></pre><p id="18e9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">UseEffect最初被调用以获取所有数据，由于它在末尾有[]，所以它将只被调用一次。然后，if语句在每次刷新时检查订单是否需要通过refreshData进行更新。每次成功完成对服务器的调用时，都会调用SetRefreshData()。</p><p id="9845" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，在return语句中添加以下代码:</p><pre class="ki kj kk kl fd kz la lb lc aw ld bi"><span id="67f6" class="le je hi la b fi lf lg l lh li">&lt;div&gt;<br/>    <em class="lx">{</em>/* add new order button */<em class="lx">}<br/>    </em>&lt;Container&gt;<br/>         &lt;Button <em class="lx">onClick</em>=<em class="lx">{</em>() =&gt; setAddNewOrder(true)<em class="lx">}</em>&gt;Add new order&lt;/Button&gt;<br/>    &lt;/Container&gt;</span><span id="1649" class="le je hi la b fi lw lg l lh li"><em class="lx">    {</em>/* list all current orders */<em class="lx">}<br/>    </em>&lt;Container&gt;<br/>        <em class="lx">{</em>orders != null &amp;&amp; orders.map((order, i) =&gt; (<br/>            &lt;Order <em class="lx">orderData</em>=<em class="lx">{</em>order<em class="lx">}</em> <em class="lx">deleteSingleOrder</em>=<em class="lx">{</em>deleteSingleOrder<em class="lx">}</em> <em class="lx">setChangeWaiter</em>=<em class="lx">{</em>setChangeWaiter<em class="lx">}</em> <em class="lx">setChangeOrder</em>=<em class="lx">{</em>setChangeOrder<em class="lx">}</em>/&gt;<br/>        ))<em class="lx">}<br/>    </em>&lt;/Container&gt;</span><span id="3057" class="le je hi la b fi lw lg l lh li"><em class="lx">    {</em>/* popup for adding a new order */<em class="lx">}<br/>    </em>&lt;Modal <em class="lx">show</em>=<em class="lx">{</em>addNewOrder<em class="lx">}</em> <em class="lx">onHide</em>=<em class="lx">{</em>() =&gt; setAddNewOrder(false)<em class="lx">}</em> <em class="lx">centered</em>&gt;<br/>        &lt;Modal.Header <em class="lx">closeButton</em>&gt;<br/>            &lt;Modal.Title&gt;Add Order&lt;/Modal.Title&gt;<br/>        &lt;/Modal.Header&gt;<br/>        &lt;Modal.Body&gt;<br/>            &lt;Form.Group&gt;<br/>                &lt;Form.Label &gt;dish&lt;/Form.Label&gt;<br/>                &lt;Form.Control <em class="lx">onChange</em>=<em class="lx">{</em>(event) =&gt; {newOrder.dish = event.target.value}<em class="lx">}</em>/&gt;<br/>                &lt;Form.Label&gt;waiter&lt;/Form.Label&gt;<br/>                &lt;Form.Control <em class="lx">onChange</em>=<em class="lx">{</em>(event) =&gt; {newOrder.server = event.target.value}<em class="lx">}</em>/&gt;<br/>                &lt;Form.Label &gt;table&lt;/Form.Label&gt;<br/>                &lt;Form.Control <em class="lx">onChange</em>=<em class="lx">{</em>(event) =&gt; {newOrder.table = event.target.value}<em class="lx">}</em>/&gt;<br/>                &lt;Form.Label &gt;price&lt;/Form.Label&gt;<br/>                &lt;Form.Control <em class="lx">type</em>="number" <em class="lx">onChange</em>=<em class="lx">{</em>(event) =&gt; {newOrder.price = event.target.value}<em class="lx">}</em>/&gt;<br/>            &lt;/Form.Group&gt;<br/>        &lt;Button <em class="lx">onClick</em>=<em class="lx">{</em>() =&gt; addSingleOrder()<em class="lx">}</em>&gt;Add&lt;/Button&gt;<br/>        &lt;Button <em class="lx">onClick</em>=<em class="lx">{</em>() =&gt; setAddNewOrder(false)<em class="lx">}</em>&gt;Cancel&lt;/Button&gt;<br/>     &lt;/Modal.Body&gt;<br/>     &lt;/Modal&gt;</span><span id="58e4" class="le je hi la b fi lw lg l lh li"><em class="lx">    {</em>/* popup for changing a waiter */<em class="lx">}<br/>    </em>&lt;Modal <em class="lx">show</em>=<em class="lx">{</em>changeWaiter.change<em class="lx">}</em> <em class="lx">onHide</em>=<em class="lx">{</em>() =&gt; setChangeWaiter({"change": false, "id": 0})<em class="lx">}</em> <em class="lx">centered</em>&gt;<br/>        &lt;Modal.Header <em class="lx">closeButton</em>&gt;<br/>            &lt;Modal.Title&gt;Change Waiter&lt;/Modal.Title&gt;<br/>        &lt;/Modal.Header&gt;<br/>        &lt;Modal.Body&gt;<br/>            &lt;Form.Group&gt;<br/>                &lt;Form.Label &gt;new waiter&lt;/Form.Label&gt;<br/>                &lt;Form.Control <em class="lx">onChange</em>=<em class="lx">{</em>(event) =&gt; {setNewWaiterName(event.target.value)}<em class="lx">}</em>/&gt;<br/>            &lt;/Form.Group&gt;<br/>            &lt;Button <em class="lx">onClick</em>=<em class="lx">{</em>() =&gt; changeWaiterForOrder()<em class="lx">}</em>&gt;Change&lt;/Button&gt;<br/>            &lt;Button <em class="lx">onClick</em>=<em class="lx">{</em>() =&gt; setChangeWaiter({"change": false, "id": 0})<em class="lx">}</em>&gt;Cancel&lt;/Button&gt;<br/>        &lt;/Modal.Body&gt;<br/>    &lt;/Modal&gt;</span><span id="2144" class="le je hi la b fi lw lg l lh li"><em class="lx">    {</em>/* popup for changing an order */<em class="lx">}<br/>    </em>&lt;Modal <em class="lx">show</em>=<em class="lx">{</em>changeOrder.change<em class="lx">}</em> <em class="lx">onHide</em>=<em class="lx">{</em>() =&gt; setChangeOrder({"change": false, "id": 0})<em class="lx">}</em> <em class="lx">centered</em>&gt;<br/>        &lt;Modal.Header <em class="lx">closeButton</em>&gt;<br/>            &lt;Modal.Title&gt;Change Order&lt;/Modal.Title&gt;<br/>        &lt;/Modal.Header&gt;<br/>        &lt;Modal.Body&gt;<br/>            &lt;Form.Group&gt;<br/>                &lt;Form.Label &gt;dish&lt;/Form.Label&gt;<br/>                &lt;Form.Control <em class="lx">onChange</em>=<em class="lx">{</em>(event) =&gt; {newOrder.dish = event.target.value}<em class="lx">}</em>/&gt;<br/>                &lt;Form.Label&gt;waiter&lt;/Form.Label&gt;<br/>                &lt;Form.Control <em class="lx">onChange</em>=<em class="lx">{</em>(event) =&gt; {newOrder.server = event.target.value}<em class="lx">}</em>/&gt;<br/>                &lt;Form.Label &gt;table&lt;/Form.Label&gt;<br/>                &lt;Form.Control <em class="lx">onChange</em>=<em class="lx">{</em>(event) =&gt; {newOrder.table = event.target.value}<em class="lx">}</em>/&gt;<br/>                &lt;Form.Label &gt;price&lt;/Form.Label&gt;<br/>                &lt;Form.Control <em class="lx">type</em>="number" <em class="lx">onChange</em>=<em class="lx">{</em>(event) =&gt; {newOrder.price = parseFloat(event.target.value)}<em class="lx">}</em>/&gt;<br/>            &lt;/Form.Group&gt;<br/>            &lt;Button <em class="lx">onClick</em>=<em class="lx">{</em>() =&gt; changeSingleOrder()<em class="lx">}</em>&gt;Change&lt;/Button&gt;<br/>            &lt;Button <em class="lx">onClick</em>=<em class="lx">{</em>() =&gt; setChangeOrder({"change": false, "id": 0})<em class="lx">}</em>&gt;Cancel&lt;/Button&gt;<br/>        &lt;/Modal.Body&gt;<br/>    &lt;/Modal&gt;<br/>&lt;/div&gt;</span></pre><p id="1315" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您完成的代码应该如下所示:</p><figure class="ki kj kk kl fd km"><div class="bz dy l di"><div class="ln lo l"/></div></figure><p id="6bfd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们已经有了所有的代码，在你的终端中进入/frontend目录并运行“npm start”。这将在你的浏览器中运行网页，你应该能够运行完成的项目。</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es mt"><img src="../Images/8be01afe8b8dbdcc7af633408caaa531.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BA-8YhwjbSY8yK9YWElclg.png"/></div></div><figcaption class="mb mc et er es md me bd b be z dx">adding an order</figcaption></figure><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es mu"><img src="../Images/602cff287d8a9008b23cec4ba68ffcf7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q9cKq7HS5Q0uC3wv3PSVDg.png"/></div></div><figcaption class="mb mc et er es md me bd b be z dx">viewing all open orders</figcaption></figure><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es mv"><img src="../Images/80965e4c7ec58eca6fa13d4c2017bc8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1p3ImjrfM-IaVXNEp5VTDQ.png"/></div></div><figcaption class="mb mc et er es md me bd b be z dx">Changing the waiter</figcaption></figure><p id="6def" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">感谢阅读这篇文章！带有完整代码的GitHub repo位于这里:<a class="ae kg" href="https://github.com/nlatham1999/GoApp" rel="noopener ugc nofollow" target="_blank">https://github.com/nlatham1999/GoApp</a>。请随时评论你的想法和问题！</p><p id="4e09" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您想要更多资源，我在下面提供了几个链接:</p><p id="5a93" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">去和MongoDB:<br/><a class="ae kg" href="https://www.mongodb.com/blog/post/quick-start-golang-mongodb-starting-and-setup" rel="noopener ugc nofollow" target="_blank">https://www . MongoDB . com/blog/post/quick-start-golang-MongoDB-starting-and-setup</a><br/><a class="ae kg" href="https://www.mongodb.com/blog/post/quick-start-golang--mongodb--how-to-create-documents" rel="noopener ugc nofollow" target="_blank">https://www.mongodb.com/blog/post/quick-start-golang-MongoDB-how-to-create-documents</a><br/><a class="ae kg" href="https://www.mongodb.com/blog/post/quick-start-golang--mongodb--how-to-read-documents" rel="noopener ugc nofollow" target="_blank">https://www.mongodb.com/blog/post/quick-start-golang-MongoDB-how-to-read-documents</a><br/><a class="ae kg" href="https://www.mongodb.com/blog/post/quick-start-golang--mongodb--how-to-update-documents" rel="noopener ugc nofollow" target="_blank">https://www.mongodb.com/blog/post/quick-start-golang-MongoDB-how-to-update-documents</a><br/><a class="ae kg" href="https://www.mongodb.com/blog/post/quick-start-golang--mongodb--how-to-delete-documents" rel="noopener ugc nofollow" target="_blank">https://www.mongodb.com/blog/post/quick-start-golang-MongoDB-how-to-delete-documents</a></p><p id="de29" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">反应过来:<br/><a class="ae kg" href="https://react-bootstrap.github.io/components/alerts" rel="noopener ugc nofollow" target="_blank">https://react-bootstrap.github.io/components/alerts</a><br/><a class="ae kg" href="https://www.w3schools.com/react/" rel="noopener ugc nofollow" target="_blank">https://www.w3schools.com/react/</a></p></div></div>    
</body>
</html>