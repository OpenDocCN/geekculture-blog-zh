<html>
<head>
<title>Applying DevOps to Your Data Science</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将DevOps应用于您的数据科学</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/some-devops-within-the-data-team-8857165d9a85?source=collection_archive---------17-----------------------#2021-03-30">https://medium.com/geekculture/some-devops-within-the-data-team-8857165d9a85?source=collection_archive---------17-----------------------#2021-03-30</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="bf98" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">欧洲领先的翻新汽车公司的案例研究。</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/84600285ddcb6d96e767cc4cb54f7411.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*gkU7j6AR5v1VrbuU"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Photo by <a class="ae jn" href="https://unsplash.com/@xavi_cabrera?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Xavi Cabrera</a> on <a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="92bf" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">介绍</h1><p id="cc85" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">我们的主题创建于2001年，是法国的一家多品牌汽车经销商。它提供了通过销售网络在线购买新车或翻新二手车的可能性。该公司网站每月有100万独立访客，以及两个移动应用程序。几年来，该公司一直依靠详细的数据分析来优化其流程，从而提高其竞争力，以交付高质量的产品。</p><h1 id="94fe" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">数据团队</h1><p id="415f" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">2016年，<strong class="ki hj">B</strong>business<strong class="ki hj">I</strong>intelligence division重组为一个独立的数据部门，其主要活动是识别，然后拉动所有杠杆来优化公司流程。</p><h2 id="d415" class="lc jp hi bd jq ld le lf ju lg lh li jy kp lj lk ka kt ll lm kc kx ln lo ke lp bi translated">数据背后的人类</h2><p id="0bff" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">在团队内部，我们可以将他们分为几个计算机科学类别:</p><ul class=""><li id="9095" class="lq lr hi ki b kj ls km lt kp lu kt lv kx lw lb lx ly lz ma bi translated">数据科学家和BI工程师:<strong class="ki hj">开发人员</strong>私奔者</li><li id="d2a5" class="lq lr hi ki b kj mb km mc kp md kt me kx mf lb lx ly lz ma bi translated">数据工程师和it架构师:<strong class="ki hj">运营</strong>运营</li></ul><p id="a646" class="pw-post-body-paragraph kg kh hi ki b kj ls ij kl km lt im ko kp mg kr ks kt mh kv kw kx mi kz la lb hb bi translated">每个数据项目都涉及整个团队(开发和运营),从规划到开发，贯穿整个部署。</p><h2 id="3f6f" class="lc jp hi bd jq ld le lf ju lg lh li jy kp lj lk ka kt ll lm kc kx ln lo ke lp bi translated">数据项目</h2><p id="fe14" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">鉴于我们谈论的是翻新汽车行业的领先公司之一，让我们来看看数据团队开展的一些项目的几个例子:</p><ul class=""><li id="d41f" class="lq lr hi ki b kj ls km lt kp lu kt lv kx lw lb lx ly lz ma bi translated">网上汽车估价:计算你的汽车的大概价值。</li><li id="11b5" class="lq lr hi ki b kj mb km mc kp md kt me kx mf lb lx ly lz ma bi translated">“您可能会喜欢”:根据推荐算法推荐一系列汽车。</li></ul><h2 id="7d27" class="lc jp hi bd jq ld le lf ju lg lh li jy kp lj lk ka kt ll lm kc kx ln lo ke lp bi translated">“陈词滥调”的挑战</h2><p id="728c" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">团队面临的挑战之一是提高TTM，同时确保产品质量始终保持在较高水平。</p><h1 id="11c6" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">如何之前的为什么</h1><h2 id="4aac" class="lc jp hi bd jq ld le lf ju lg lh li jy kp lj lk ka kt ll lm kc kx ln lo ke lp bi translated">诊断结果</h2><p id="496f" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">在说DevOps，CI/CD，管道等之前。我们将深入研究数据团队产品的开发周期。“在线估价”项目就是一个很好的例子:</p><ol class=""><li id="737a" class="lq lr hi ki b kj ls km lt kp lu kt lv kx lw lb mj ly lz ma bi translated">计划:所有团队。</li><li id="2170" class="lq lr hi ki b kj mb km mc kp md kt me kx mf lb mj ly lz ma bi translated">代码:由数据科学家、开发团队在本地开发。</li><li id="0eed" class="lq lr hi ki b kj mb km mc kp md kt me kx mf lb mj ly lz ma bi translated">构建:架构师、运营团队组装应用程序。</li><li id="506e" class="lq lr hi ki b kj mb km mc kp md kt me kx mf lb mj ly lz ma bi translated">测试:执行不同类型的测试，所有团队(开发和运营)。</li><li id="f3de" class="lq lr hi ki b kj mb km mc kp md kt me kx mf lb mj ly lz ma bi translated">发布:架构师、运营团队发布产品。</li><li id="2c13" class="lq lr hi ki b kj mb km mc kp md kt me kx mf lb mj ly lz ma bi translated">部署:在生产中部署，运营团队。</li></ol><p id="e3db" class="pw-post-body-paragraph kg kh hi ki b kj ls ij kl km lt im ko kp mg kr ks kt mh kv kw kx mi kz la lb hb bi translated">在与团队讨论并试图了解如何改进流程的每一步后，我们准备好面对一些挑战并提出问题:</p><ul class=""><li id="db00" class="lq lr hi ki b kj ls km lt kp lu kt lv kx lw lb lx ly lz ma bi translated">我们在开发、测试和生产中使用相同的环境吗？号码</li><li id="b2ac" class="lq lr hi ki b kj mb km mc kp md kt me kx mf lb lx ly lz ma bi translated">重复手动完成的任务？是的。</li><li id="a905" class="lq lr hi ki b kj mb km mc kp md kt me kx mf lb lx ly lz ma bi translated">我们有中央监控仪表板吗？号码</li></ul><h2 id="13fd" class="lc jp hi bd jq ld le lf ju lg lh li jy kp lj lk ka kt ll lm kc kx ln lo ke lp bi translated">治疗</h2><p id="a3a6" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">我们的目标是使人类行为成为一种验证，而不是最大程度自动化的技术行为的表现，包括测试。</p><p id="741b" class="pw-post-body-paragraph kg kh hi ki b kj ls ij kl km lt im ko kp mg kr ks kt mh kv kw kx mi kz la lb hb bi translated">自动化并不意味着减少甚至消除人力。事实上，它应该旨在通过管理所有标准化的任务来消除重复性任务。</p><h1 id="021c" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">走向DevOps方法</h1><p id="7e67" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">建立一个既能作为自动化过程的工具又能作为持续反馈的解决方案，需要一个策略，这个策略将作为一个由戴着两顶帽子的概要文件(Dev和Ops)承载的桥梁。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mk"><img src="../Images/e89fbd3b13e302048dc66cb3b2a697e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1088/format:webp/1*BMHo1zw2g5Iv3q8LEUUGjA.png"/></div><figcaption class="jj jk et er es jl jm bd b be z dx">DevOps — image by openclipart</figcaption></figure><h2 id="53df" class="lc jp hi bd jq ld le lf ju lg lh li jy kp lj lk ka kt ll lm kc kx ln lo ke lp bi translated">文化高于一切</h2><p id="5c62" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">DevOps运动被认为不仅仅是一套工具，它是一种专注于开发人员和运营人员两个团队之间协作的文化。</p><p id="4807" class="pw-post-body-paragraph kg kh hi ki b kj ls ij kl km lt im ko kp mg kr ks kt mh kv kw kx mi kz la lb hb bi translated">为了促进这种文化的建立，必须遵守几个关键原则:</p><ul class=""><li id="376e" class="lq lr hi ki b kj ls km lt kp lu kt lv kx lw lb lx ly lz ma bi translated">持续集成(CI):我们集成每一个变更(开发、构建和测试)。</li><li id="af24" class="lq lr hi ki b kj mb km mc kp md kt me kx mf lb lx ly lz ma bi translated"><strong class="ki hj"> C </strong>连续<strong class="ki hj"> D </strong>部署(CD):每一个变更都相当于一个产品发布。</li><li id="f514" class="lq lr hi ki b kj mb km mc kp md kt me kx mf lb lx ly lz ma bi translated">持续反馈。</li></ul><p id="9ea5" class="pw-post-body-paragraph kg kh hi ki b kj ls ij kl km lt im ko kp mg kr ks kt mh kv kw kx mi kz la lb hb bi translated">分而治之，不情愿地发布更多小版本，因为主要影响较小。</p><h1 id="8ccf" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">技术部分</h1><p id="b8a7" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">Amazon Web Services成为托管我们的数据湖和工作负载的解决方案。随着DevOps的兴起，AWS提供了AWS CodePipeline、AWS CodeBuild、AWS CodeDeploy等多个CI/CD服务。</p><p id="01e5" class="pw-post-body-paragraph kg kh hi ki b kj ls ij kl km lt im ko kp mg kr ks kt mh kv kw kx mi kz la lb hb bi translated">在对一些工具(例如Jenkins、Gitlab CI、Travis CI)进行基准测试后，我们开始对最适合我们团队的解决方案有了更清晰的认识。<br/>由于AWS承载着数据湖以及所有数据科学项目，我们最终选择使用AWS CodePipeline来处理集成了Jenkins的CI/CD流。有了这套工具，我们可以保证现有基础设施的兼容性和灵活性，包括像Jenkins这样的CI服务器的功能，尤其是它的插件。</p><h2 id="c9e2" class="lc jp hi bd jq ld le lf ju lg lh li jy kp lj lk ka kt ll lm kc kx ln lo ke lp bi translated">连续集成管道</h2><p id="6498" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">让我们从详细描述架构和持续集成(CI)过程的不同阶段开始</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ml"><img src="../Images/33a34a37f3d42c0e0288ae669c9f8c89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c-fg8jpr62bDWWNoZhErmg.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">CI pipeline architecture</figcaption></figure><ol class=""><li id="6d57" class="lq lr hi ki b kj ls km lt kp lu kt lv kx lw lb mj ly lz ma bi translated"><strong class="ki hj">源代码</strong> <strong class="ki hj"> : </strong>配置AWS代码管道的第一步称为“源代码阶段”(即项目的代码)..管道将自动对代码提交做出反应。在我们的例子中，项目托管在AWS CodeCommit中，这是AWS的托管源代码控制服务。</li><li id="d914" class="lq lr hi ki b kj mb km mc kp md kt me kx mf lb mj ly lz ma bi translated"><strong class="ki hj">构建:</strong>获得产品(我们项目的源代码)后，这一步包括由Jenkins构建和启动应用程序。</li><li id="3897" class="lq lr hi ki b kj mb km mc kp md kt me kx mf lb mj ly lz ma bi translated"><strong class="ki hj">测试:</strong>一旦应用程序容器启动并运行，管道就会触发将由Jenkins服务器执行的一系列测试(单元、集成和验证)。</li></ol><h2 id="86c5" class="lc jp hi bd jq ld le lf ju lg lh li jy kp lj lk ka kt ll lm kc kx ln lo ke lp bi translated">持续部署管道</h2><p id="2908" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">让我们转到第二部分，即持续部署(CD)</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mm"><img src="../Images/8c0eed9490b7afc12896149fe890019e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0cdUSv7gC9kr4np8C_CRXQ.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">CD pipeline architecture</figcaption></figure><p id="144c" class="pw-post-body-paragraph kg kh hi ki b kj ls ij kl km lt im ko kp mg kr ks kt mh kv kw kx mi kz la lb hb bi translated">4.<strong class="ki hj"> Staging : </strong>这一步包括标记和上传映像到我们的docker注册表，以及为部署步骤请求手动验证。</p><p id="b8bd" class="pw-post-body-paragraph kg kh hi ki b kj ls ij kl km lt im ko kp mg kr ks kt mh kv kw kx mi kz la lb hb bi translated">5.<strong class="ki hj">部署:</strong>流程中的最后一个阶段，使用AWS ElasticBeanstalk部署应用程序。</p><p id="8497" class="pw-post-body-paragraph kg kh hi ki b kj ls ij kl km lt im ko kp mg kr ks kt mh kv kw kx mi kz la lb hb bi translated">CI / CD管道中触发的任何操作都有持续的反馈:使用AWS Lambda功能通过专用的Slack通道发送电子邮件警报和通知。</p><h1 id="ec82" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">我们是如何工作的？</h1><p id="921a" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">还记得一开始团队是如何运作的吗？在某些情况下，测试或部署一个新功能/新版本可能需要几天到几周的时间，而且这并不总是简单的。<br/>现在我们已经做了一些更改，在为不同的环境部署管道后，开发团队开始完全自治，对项目的特定分支(例如发布分支或热修复)的简单合并请求将触发部署过程，我们在几分钟内而不是几天内完成部署。</p><p id="6c69" class="pw-post-body-paragraph kg kh hi ki b kj ls ij kl km lt im ko kp mg kr ks kt mh kv kw kx mi kz la lb hb bi translated">这是一种不同的合作方式。我们努力让所有团队的事情都易于访问，并且易于用一种通用语言可视化(邮件和延期通知)。</p><h2 id="37f1" class="lc jp hi bd jq ld le lf ju lg lh li jy kp lj lk ka kt ll lm kc kx ln lo ke lp bi translated">接下来呢？</h2><p id="ee99" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">如何自动创建CI/CD管道？用基础设施做代码工具像AWS CloudFormation或者Terraform，有意思！</p><h2 id="c5fb" class="lc jp hi bd jq ld le lf ju lg lh li jy kp lj lk ka kt ll lm kc kx ln lo ke lp bi translated">请便</h2><p id="3d2f" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">如果您有任何问题，或者需要这些技术的帮助，欢迎您直接给我发电子邮件，我会尽快回复您。</p></div></div>    
</body>
</html>