<html>
<head>
<title>Enhancing your Kaggle Computations with TigerGraph (Part II): Creating Visualisations with Plotly Express</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用TigerGraph增强Kaggle计算(第二部分):用Plotly Express创建可视化</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/enhancing-your-kaggle-computations-with-tigergraph-part-ii-creating-visualisations-with-plotly-1197d7707dac?source=collection_archive---------21-----------------------#2021-07-09">https://medium.com/geekculture/enhancing-your-kaggle-computations-with-tigergraph-part-ii-creating-visualisations-with-plotly-1197d7707dac?source=collection_archive---------21-----------------------#2021-07-09</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="2d4c" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">使用Plotly Express创建简单的可视化</h2></div><blockquote class="ix iy iz"><p id="6eca" class="ja jb jc jd b je jf ij jg jh ji im jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">注意:这是“用TigerGraph增强Kaggle计算”系列的继续。<a class="ae jx" rel="noopener" href="/codex/accelerating-your-kaggle-computations-with-tigergraph-part-i-creating-a-lego-graph-f2a43029f78f">在这里阅读往期博客</a>:<a class="ae jx" rel="noopener" href="/codex/accelerating-your-kaggle-computations-with-tigergraph-part-i-creating-a-lego-graph-f2a43029f78f">https://medium . com/codex/accelerating-your-ka ggle-computations-with-tiger graph-part-I-creating-a-Lego-graph-f2a 43029 f 78 f</a></p></blockquote><h1 id="b082" class="jy jz hi bd ka kb kc kd ke kf kg kh ki io kj ip kk ir kl is km iu kn iv ko kp bi translated">概观</h1><h2 id="b834" class="kq jz hi bd ka kr ks kt ke ku kv kw ki kx ky kz kk la lb lc km ld le lf ko lg bi translated">目标</h2><p id="00a7" class="pw-post-body-paragraph ja jb hi jd b je lh ij jg jh li im jj kx lj jm jn la lk jq jr ld ll ju jv jw hb bi translated">在过去的博客中，我们使用Kaggle的Lego数据库数据集创建了一个TigerGraph图。现在我们将使用Plotly Express创建一些数据的可视化。</p><h2 id="0589" class="kq jz hi bd ka kr ks kt ke ku kv kw ki kx ky kz kk la lb lc km ld le lf ko lg bi translated">使用的工具</h2><ul class=""><li id="ba99" class="lm ln hi jd b je lh jh li kx lo la lp ld lq jw lr ls lt lu bi translated"><a class="ae jx" href="https://tgcloud.io/" rel="noopener ugc nofollow" target="_blank"> TG云</a>:这是我们的图表托管的地方(在云上)。</li><li id="31a3" class="lm ln hi jd b je lv jh lw kx lx la ly ld lz jw lr ls lt lu bi translated">pyTigerGraph :这个Python包允许我们将笔记本与TG Cloud连接起来。</li><li id="152f" class="lm ln hi jd b je lv jh lw kx lx la ly ld lz jw lr ls lt lu bi translated">这是一个高级Plotly包，可以轻松快速地创建可视化效果。</li></ul><p id="7e0b" class="pw-post-body-paragraph ja jb hi jd b je jf ij jg jh ji im jj kx jl jm jn la jp jq jr ld jt ju jv jw hb bi translated">现在，让我们进入代码！</p><h1 id="cf39" class="jy jz hi bd ka kb kc kd ke kf kg kh ki io kj ip kk ir kl is km iu kn iv ko kp bi translated">第0部分:准备您的图表</h1><h2 id="54eb" class="kq jz hi bd ka kr ks kt ke ku kv kw ki kx ky kz kk la lb lc km ld le lf ko lg bi translated">第一步:确保图表“就绪”</h2><p id="e62a" class="pw-post-body-paragraph ja jb hi jd b je lh ij jg jh li im jj kx lj jm jn la lk jq jr ld ll ju jv jw hb bi translated">首先，确保您的图表在TG Cloud中的状态是“就绪”。为此，请转到<a class="ae jx" href="https://tgcloud.io/" rel="noopener ugc nofollow" target="_blank">https://tgcloud.io/</a>并导航至您的“我的解决方案”选项卡。在“状态”下，确保有一个绿色的“就绪”点。如果没有，请转到“操作”下的“解决方案操作”,然后在下拉列表中按“开始”。等到状态为绿色。</p><div class="ma mb mc md fd ab cb"><figure class="me mf mg mh mi mj mk paragraph-image"><img src="../Images/2960ab290cf5eca4e8dfefcea803cf6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:716/format:webp/1*jGwx0s8dt7obbNsOj6fhbw.png"/></figure><figure class="me mf mn mh mi mj mk paragraph-image"><img src="../Images/945ef26282657a5f80176cf60eb57473.png" data-original-src="https://miro.medium.com/v2/resize:fit:516/format:webp/1*mtQQJmBqjqVvONrC1fWYFw.png"/><figcaption class="mo mp et er es mq mr bd b be z dx ms di mt mu">Go to “My Solutions” and check that your Status says “Ready.”</figcaption></figure></div><div class="ab cb"><figure class="me mf mv mh mi mj mk paragraph-image"><img src="../Images/4356ec28408ab1817a461bc1db67d28b.png" data-original-src="https://miro.medium.com/v2/resize:fit:652/format:webp/1*qVDvPetoJTIMr3Ffy-On5w.png"/></figure><figure class="me mf mw mh mi mj mk paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><img src="../Images/c24606ec577c1734f966f0abb7be9132.png" data-original-src="https://miro.medium.com/v2/resize:fit:892/format:webp/1*r89U0fTRjVm98jtien5EUQ.png"/></div><figcaption class="mo mp et er es mq mr bd b be z dx nb di nc mu">If you status says “Stopped,” press the “Solution Operations” button and press “Start.”</figcaption></figure></div><p id="8385" class="pw-post-body-paragraph ja jb hi jd b je jf ij jg jh ji im jj kx jl jm jn la jp jq jr ld jt ju jv jw hb bi translated">当它变绿并表示“准备好”时，你就准备好继续前进了！</p><h2 id="f1b8" class="kq jz hi bd ka kr ks kt ke ku kv kw ki kx ky kz kk la lb lc km ld le lf ko lg bi translated">步骤二:安装pyTigerGraph并创建一个连接</h2><p id="6534" class="pw-post-body-paragraph ja jb hi jd b je lh ij jg jh li im jj kx lj jm jn la lk jq jr ld ll ju jv jw hb bi translated">接下来，pip安装pyTigerGraph并导入库。</p><pre class="ma mb mc md fd nd ne nf ng aw nh bi"><span id="55f9" class="kq jz hi ne b fi ni nj l nk nl">!pip install pyTigerGraph</span><span id="4c2a" class="kq jz hi ne b fi nm nj l nk nl">import pyTigerGraph as tg</span></pre><p id="a292" class="pw-post-body-paragraph ja jb hi jd b je jf ij jg jh ji im jj kx jl jm jn la jp jq jr ld jt ju jv jw hb bi translated">接下来，创建你的连接。因为我们想要创建一个到我们在过去的博客中创建的LegoGraph的连接，所以创建连接看起来会稍有不同，现在需要一个graphname参数。</p><pre class="ma mb mc md fd nd ne nf ng aw nh bi"><span id="d0f8" class="kq jz hi ne b fi ni nj l nk nl">conn = tg.TigerGraphConnection(host="https://legograph.i.tgcloud.io/", password="tigergraph", graphname="LegoGraph")<br/>conn.apiToken = conn.getToken(conn.createSecret())</span></pre><h2 id="71a9" class="kq jz hi bd ka kr ks kt ke ku kv kw ki kx ky kz kk la lb lc km ld le lf ko lg bi translated">步骤三:导入附加库</h2><p id="9a53" class="pw-post-body-paragraph ja jb hi jd b je lh ij jg jh li im jj kx lj jm jn la lk jq jr ld ll ju jv jw hb bi translated">最后，我们需要再导入两个库:Plotly Express和Pandas。Plotly Express将处理可视化，Pandas将帮助我们创建一个数据框架来处理TigerGraph和Plotly Express之间的数据。</p><pre class="ma mb mc md fd nd ne nf ng aw nh bi"><span id="2126" class="kq jz hi ne b fi ni nj l nk nl">import pandas as pd</span><span id="f215" class="kq jz hi ne b fi nm nj l nk nl">import plotly.express as px</span></pre><p id="1888" class="pw-post-body-paragraph ja jb hi jd b je jf ij jg jh ji im jj kx jl jm jn la jp jq jr ld jt ju jv jw hb bi translated">太棒了。现在让我们开始观想吧！</p><h1 id="9feb" class="jy jz hi bd ka kb kc kd ke kf kg kh ki io kj ip kk ir kl is km iu kn iv ko kp bi translated">第一部分:创建散点图</h1><h2 id="7645" class="kq jz hi bd ka kr ks kt ke ku kv kw ki kx ky kz kk la lb lc km ld le lf ko lg bi translated">第一步:创建散点图</h2><p id="d2ca" class="pw-post-body-paragraph ja jb hi jd b je lh ij jg jh li im jj kx lj jm jn la lk jq jr ld ll ju jv jw hb bi translated">首先，我们将可视化每年每套零件的数量。为此，让我们首先编写一个查询来获取每个集合中的所有部件以及该集合发布的年份。</p><pre class="ma mb mc md fd nd ne nf ng aw nh bi"><span id="ca4a" class="kq jz hi ne b fi ni nj l nk nl">year_parts = conn.runInterpretedQuery('''</span><span id="9544" class="kq jz hi ne b fi nm nj l nk nl">INTERPRET QUERY () FOR GRAPH LegoGraph {</span><span id="1501" class="kq jz hi ne b fi nm nj l nk nl">TYPEDEF TUPLE &lt;year INT, num_parts INT&gt; YEAR_PARTS;<br/>ListAccum&lt;YEAR_PARTS&gt; @@result;</span><span id="7423" class="kq jz hi ne b fi nm nj l nk nl">Seed = {Year.*};</span><span id="ccaf" class="kq jz hi ne b fi nm nj l nk nl">Res = SELECT l FROM Seed:s - (LEGO_SET_YEAR:e) - Lego_Set:l<br/>      ACCUM @@result+=YEAR_PARTS(s.year, l.num_parts);</span><span id="a642" class="kq jz hi ne b fi nm nj l nk nl">PRINT @@result;</span><span id="be61" class="kq jz hi ne b fi nm nj l nk nl">}</span><span id="a844" class="kq jz hi ne b fi nm nj l nk nl">''')</span></pre><p id="64a6" class="pw-post-body-paragraph ja jb hi jd b je jf ij jg jh ji im jj kx jl jm jn la jp jq jr ld jt ju jv jw hb bi translated">该查询将从Year顶点开始，经过LEGO_SET_YEAR边，在LEGO_SET顶点结束。我们将创建一个YEAR_PARTS类型的列表，这是一个TYPEDEF元组，包含年份(作为一个整数)和零件号(作为一个整数)。</p><p id="1cc0" class="pw-post-body-paragraph ja jb hi jd b je jf ij jg jh ji im jj kx jl jm jn la jp jq jr ld jt ju jv jw hb bi translated">接下来，我们将把结果转换成熊猫数据帧。</p><pre class="ma mb mc md fd nd ne nf ng aw nh bi"><span id="6f26" class="kq jz hi ne b fi ni nj l nk nl">df = pd.DataFrame(year_parts[0]["@@result"])</span></pre><p id="b995" class="pw-post-body-paragraph ja jb hi jd b je jf ij jg jh ji im jj kx jl jm jn la jp jq jr ld jt ju jv jw hb bi translated">最后我们来px .撒结果！</p><pre class="ma mb mc md fd nd ne nf ng aw nh bi"><span id="63b4" class="kq jz hi ne b fi ni nj l nk nl">fig = px.scatter(df, x="year", y="num_parts")</span><span id="f143" class="kq jz hi ne b fi nm nj l nk nl">fig.show()</span></pre><figure class="ma mb mc md fd mf er es paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="er es nn"><img src="../Images/2098f8daec3ddb53b98af1c78681e8cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BhgA5Ag5qGO2gJ_O0bkQjw.png"/></div></div><figcaption class="mo mp et er es mq mr bd b be z dx">Resulting Figure</figcaption></figure><p id="7e91" class="pw-post-body-paragraph ja jb hi jd b je jf ij jg jh ji im jj kx jl jm jn la jp jq jr ld jt ju jv jw hb bi translated">我们现在有了年份和零件数量的散点图！您可以将鼠标悬停在某个点上以获取有关该点的更多信息，然后单击并拖动鼠标以放大某个部分。</p><figure class="ma mb mc md fd mf er es paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="er es no"><img src="../Images/c1facabad883173a0487c4d49f5c324c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l38n332Bld8Fw84_N2-rSQ.png"/></div></div><figcaption class="mo mp et er es mq mr bd b be z dx">Hover over a point to get more information about it</figcaption></figure><h2 id="ffd9" class="kq jz hi bd ka kr ks kt ke ku kv kw ki kx ky kz kk la lb lc km ld le lf ko lg bi translated">第二步:使用主题为情节添加色彩</h2><p id="c70b" class="pw-post-body-paragraph ja jb hi jd b je lh ij jg jh li im jj kx lj jm jn la lk jq jr ld ll ju jv jw hb bi translated">创造你的第一个情节的伟大工作！接下来，让我们使用主题为情节添加色彩。为此，我们需要创建一个两跳查询。</p><pre class="ma mb mc md fd nd ne nf ng aw nh bi"><span id="acfe" class="kq jz hi ne b fi ni nj l nk nl">year_parts = conn.runInterpretedQuery('''</span><span id="2524" class="kq jz hi ne b fi nm nj l nk nl">INTERPRET QUERY () FOR GRAPH LegoGraph SYNTAX v2 {</span><span id="202d" class="kq jz hi ne b fi nm nj l nk nl">TYPEDEF TUPLE &lt;year INT, num_parts INT, theme_id INT&gt; YEAR_PARTS;<br/>ListAccum&lt;YEAR_PARTS&gt; @@result;</span><span id="5971" class="kq jz hi ne b fi nm nj l nk nl">Seed = {Year.*};</span><span id="fa51" class="kq jz hi ne b fi nm nj l nk nl">Res = SELECT l FROM Seed:s - (LEGO_SET_YEAR:e) - Lego_Set:l - (LEGO_SET_THEME:e1) - Theme:t<br/>      ACCUM @@result+=YEAR_PARTS(s.year, l.num_parts, t.theme_number);</span><span id="9961" class="kq jz hi ne b fi nm nj l nk nl">PRINT @@result;</span><span id="4d68" class="kq jz hi ne b fi nm nj l nk nl">}</span><span id="45b7" class="kq jz hi ne b fi nm nj l nk nl">''')</span></pre><p id="e12e" class="pw-post-body-paragraph ja jb hi jd b je jf ij jg jh ji im jj kx jl jm jn la jp jq jr ld jt ju jv jw hb bi translated">这类似于过去的查询，但是现在我们使用“语法v2”在TYPEDEF元组中，我们添加了一个theme_id，这将是它的颜色编号。然后，在SELECT语句中，在转到Lego_Set顶点之后，我们接下来将越过LEGO_SET_THEME边并转到主题顶点。从主题顶点我们得到了主题编号。</p><p id="fb8a" class="pw-post-body-paragraph ja jb hi jd b je jf ij jg jh ji im jj kx jl jm jn la jp jq jr ld jt ju jv jw hb bi translated">接下来，让我们将结果放入数据帧中。</p><pre class="ma mb mc md fd nd ne nf ng aw nh bi"><span id="05e4" class="kq jz hi ne b fi ni nj l nk nl">df = pd.DataFrame(year_parts[0]["@@result"])</span></pre><p id="b5e3" class="pw-post-body-paragraph ja jb hi jd b je jf ij jg jh ji im jj kx jl jm jn la jp jq jr ld jt ju jv jw hb bi translated">最后，我们来散散点数据。这一次，我们将添加一个新参数color，它将是“theme_id”的值</p><pre class="ma mb mc md fd nd ne nf ng aw nh bi"><span id="35dc" class="kq jz hi ne b fi ni nj l nk nl">fig = px.scatter(df, x="year", y="num_parts", color="theme_id")</span><span id="5537" class="kq jz hi ne b fi nm nj l nk nl">fig.show()</span></pre><figure class="ma mb mc md fd mf er es paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="er es np"><img src="../Images/43debc5bea4a40c8ea01889d31a37048.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JLD3S11NprjUC-6J45ElLw.png"/></div></div><figcaption class="mo mp et er es mq mr bd b be z dx">Scatterplot with Colouration!</figcaption></figure><p id="f339" class="pw-post-body-paragraph ja jb hi jd b je jf ij jg jh ji im jj kx jl jm jn la jp jq jr ld jt ju jv jw hb bi translated">不错！现在我们有了一个主题标识颜色，在右边有一个键。如果我们将鼠标悬停在某个点上，我们可以看到关于它的更多细节。</p><figure class="ma mb mc md fd mf er es paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="er es nq"><img src="../Images/a6eb636ba636f6ca5e5217c3b13afebb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6GDuJNB38tqS9Tgturmogw.png"/></div></div><figcaption class="mo mp et er es mq mr bd b be z dx">Hovering over a point</figcaption></figure><p id="c335" class="pw-post-body-paragraph ja jb hi jd b je jf ij jg jh ji im jj kx jl jm jn la jp jq jr ld jt ju jv jw hb bi translated">这很好，但是拥有theme_id并没有多大帮助。有主题名称会有用得多。</p><h2 id="7c62" class="kq jz hi bd ka kr ks kt ke ku kv kw ki kx ky kz kk la lb lc km ld le lf ko lg bi translated">第三步:为要点添加更多信息</h2><p id="e043" class="pw-post-body-paragraph ja jb hi jd b je lh ij jg jh li im jj kx lj jm jn la lk jq jr ld ll ju jv jw hb bi translated">让我们添加主题名称，作为我们将从查询中获取的内容的一部分。</p><pre class="ma mb mc md fd nd ne nf ng aw nh bi"><span id="906a" class="kq jz hi ne b fi ni nj l nk nl">year_parts = conn.runInterpretedQuery('''</span><span id="81fc" class="kq jz hi ne b fi nm nj l nk nl">INTERPRET QUERY () FOR GRAPH LegoGraph SYNTAX v2 {</span><span id="6f7a" class="kq jz hi ne b fi nm nj l nk nl">TYPEDEF TUPLE &lt;year INT, num_parts INT, theme_id INT, theme_name STRING&gt; YEAR_PARTS;<br/>ListAccum&lt;YEAR_PARTS&gt; @@result;</span><span id="c83e" class="kq jz hi ne b fi nm nj l nk nl">Seed = {Year.*};</span><span id="c15a" class="kq jz hi ne b fi nm nj l nk nl">Res = SELECT l FROM Seed:s - (LEGO_SET_YEAR:e) - Lego_Set:l - (LEGO_SET_THEME:e1) - Theme:t<br/>      ACCUM @@result+=YEAR_PARTS(s.year, l.num_parts, t.theme_number, t.theme_name);</span><span id="2658" class="kq jz hi ne b fi nm nj l nk nl">PRINT @@result;</span><span id="73ef" class="kq jz hi ne b fi nm nj l nk nl">}</span><span id="5ed8" class="kq jz hi ne b fi nm nj l nk nl">''')</span></pre><p id="1006" class="pw-post-body-paragraph ja jb hi jd b je jf ij jg jh ji im jj kx jl jm jn la jp jq jr ld jt ju jv jw hb bi translated">现在，在我们的TYPEDEF元组中，我们添加了theme_name(一个字符串),并且我们也在ACCUM子句中累积它。</p><p id="4572" class="pw-post-body-paragraph ja jb hi jd b je jf ij jg jh ji im jj kx jl jm jn la jp jq jr ld jt ju jv jw hb bi translated">同样，我们将把它转换成数据帧。</p><pre class="ma mb mc md fd nd ne nf ng aw nh bi"><span id="0848" class="kq jz hi ne b fi ni nj l nk nl">df = pd.DataFrame(year_parts[0]["@@result"])</span></pre><p id="36f5" class="pw-post-body-paragraph ja jb hi jd b je jf ij jg jh ji im jj kx jl jm jn la jp jq jr ld jt ju jv jw hb bi translated">最后，我们将绘制它，这次在hover_data中添加theme_name。</p><pre class="ma mb mc md fd nd ne nf ng aw nh bi"><span id="86ba" class="kq jz hi ne b fi ni nj l nk nl">fig = px.scatter(df, x="year", y="num_parts", color="theme_id", hover_data=["theme_name"])</span><span id="aaa9" class="kq jz hi ne b fi nm nj l nk nl">fig.show()</span></pre><figure class="ma mb mc md fd mf er es paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="er es nn"><img src="../Images/185937f7d452d1c7abaa735a4dc4af40.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hEsKUPHwGXQFfvnjCTkPLw.png"/></div></div><figcaption class="mo mp et er es mq mr bd b be z dx">More Hover Data</figcaption></figure><p id="16fa" class="pw-post-body-paragraph ja jb hi jd b je jf ij jg jh ji im jj kx jl jm jn la jp jq jr ld jt ju jv jw hb bi translated">太棒了。现在，当一个点被悬停，你会收到所有过去的信息以及主题名称！</p><h1 id="d1fc" class="jy jz hi bd ka kb kc kd ke kf kg kh ki io kj ip kk ir kl is km iu kn iv ko kp bi translated">第二部:再来三个剧情！</h1><h2 id="5440" class="kq jz hi bd ka kr ks kt ke ku kv kw ki kx ky kz kk la lb lc km ld le lf ko lg bi translated">第一步:三维绘图</h2><p id="8c83" class="pw-post-body-paragraph ja jb hi jd b je lh ij jg jh li im jj kx lj jm jn la lk jq jr ld ll ju jv jw hb bi translated">现在让我们来看看我们可以制作的其他几个情节！首先，我们将使用scatter_3d为我们的数据创建一个很酷的3d可视化。我们将传递theme_id、num_parts和year。</p><pre class="ma mb mc md fd nd ne nf ng aw nh bi"><span id="34e7" class="kq jz hi ne b fi ni nj l nk nl">fig = px.scatter_3d(df, x="year", y="num_parts", z="theme_id", hover_data=["theme_name"])</span><span id="269d" class="kq jz hi ne b fi nm nj l nk nl">fig.show()</span></pre><figure class="ma mb mc md fd mf er es paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="er es nr"><img src="../Images/79fb3b27a0270a1b411a309c1fb003d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PODLLfhn-Awk_f6wkl0YPQ.png"/></div></div><figcaption class="mo mp et er es mq mr bd b be z dx">3D Visualisation</figcaption></figure><p id="2fa7" class="pw-post-body-paragraph ja jb hi jd b je jf ij jg jh ji im jj kx jl jm jn la jp jq jr ld jt ju jv jw hb bi translated">如果你停留在一个点上，你可以找到乐高玩具的细节。</p><figure class="ma mb mc md fd mf er es paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="er es ns"><img src="../Images/79550bbbb0abba6db6ca34b5b72d40d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HK-ID3ksV53BT0rRI9anyA.png"/></div></div><figcaption class="mo mp et er es mq mr bd b be z dx">Hovering over a point for details</figcaption></figure><p id="2896" class="pw-post-body-paragraph ja jb hi jd b je jf ij jg jh ji im jj kx jl jm jn la jp jq jr ld jt ju jv jw hb bi translated">拖动图表以查看图表的不同角度。</p><figure class="ma mb mc md fd mf er es paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="er es nt"><img src="../Images/6321708d376fbb9c546e248750d27e43.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rDSV8WM7bO0NNWQem7q9cQ.png"/></div></div><figcaption class="mo mp et er es mq mr bd b be z dx">3D graph rotated</figcaption></figure><h2 id="6662" class="kq jz hi bd ka kr ks kt ke ku kv kw ki kx ky kz kk la lb lc km ld le lf ko lg bi translated">第二步:热图！</h2><p id="2936" class="pw-post-body-paragraph ja jb hi jd b je lh ij jg jh li im jj kx lj jm jn la lk jq jr ld ll ju jv jw hb bi translated">让我们探索另一种类型的图:热图。在Plotly Express中，我们可以运行density_heatmap来使用我们的数据创建热图。</p><pre class="ma mb mc md fd nd ne nf ng aw nh bi"><span id="26e2" class="kq jz hi ne b fi ni nj l nk nl">fig = px.density_heatmap(df, x="year", y="num_parts")</span><span id="465a" class="kq jz hi ne b fi nm nj l nk nl">fig.show()</span></pre><figure class="ma mb mc md fd mf er es paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="er es np"><img src="../Images/d48916e7b8f5c355e752c314b3a218db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rJSdnYl_sTUuyuGGRHhiXw.png"/></div></div><figcaption class="mo mp et er es mq mr bd b be z dx">Year x Num_Parts Heatmap</figcaption></figure><p id="6934" class="pw-post-body-paragraph ja jb hi jd b je jf ij jg jh ji im jj kx jl jm jn la jp jq jr ld jt ju jv jw hb bi translated">同样，通过将鼠标悬停在某个值上，您可以查看某个单元格的信息。</p><figure class="ma mb mc md fd mf er es paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="er es no"><img src="../Images/ce9e728de64c9409023143c50d34d8dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UijCSycz6NBd-jqLy2jNPg.png"/></div></div><figcaption class="mo mp et er es mq mr bd b be z dx">Hover over a cell for its details</figcaption></figure><p id="e86e" class="pw-post-body-paragraph ja jb hi jd b je jf ij jg jh ji im jj kx jl jm jn la jp jq jr ld jt ju jv jw hb bi translated">我们还可以使用字符串值创建热图，比如主题名称！</p><pre class="ma mb mc md fd nd ne nf ng aw nh bi"><span id="82bd" class="kq jz hi ne b fi ni nj l nk nl">fig = px.density_heatmap(df, x="year", y="theme_name")</span><span id="1a26" class="kq jz hi ne b fi nm nj l nk nl">fig.show()</span></pre><figure class="ma mb mc md fd mf er es paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="er es no"><img src="../Images/3e9c361913c1337f2fac71a71b74a8dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VlsRkgyhlQWNPqw04rzuFg.png"/></div></div><figcaption class="mo mp et er es mq mr bd b be z dx">Year x Theme Name Heatmap</figcaption></figure><p id="c849" class="pw-post-body-paragraph ja jb hi jd b je jf ij jg jh ji im jj kx jl jm jn la jp jq jr ld jt ju jv jw hb bi translated">太棒了。让我们最后再运行一个查询，并通过它创建更多的可视化。</p><h1 id="2b3b" class="jy jz hi bd ka kb kc kd ke kf kg kh ki io kj ip kk ir kl is km iu kn iv ko kp bi translated">第三部分:又一个疑问和三个情节</h1><h2 id="71a4" class="kq jz hi bd ka kr ks kt ke ku kv kw ki kx ky kz kk la lb lc km ld le lf ko lg bi translated">第一步:编写查询</h2><p id="2a70" class="pw-post-body-paragraph ja jb hi jd b je lh ij jg jh li im jj kx lj jm jn la lk jq jr ld ll ju jv jw hb bi translated">我们最终将运行一个查询，该查询将再次从Year开始，遍历LEGO_SET_YEAR边，转到LEGO_SET，但不是转到主题，而是遍历INVENTORY_LEGO_SET并转到库存顶点。在累加器中，我们得到一组年份、零件数量、数量(库存中的器械组)和库存编号。我们将把结果转换成数据帧。</p><pre class="ma mb mc md fd nd ne nf ng aw nh bi"><span id="a37c" class="kq jz hi ne b fi ni nj l nk nl">year_parts = conn.runInterpretedQuery('''</span><span id="8211" class="kq jz hi ne b fi nm nj l nk nl">INTERPRET QUERY () FOR GRAPH LegoGraph SYNTAX v2 {</span><span id="2f00" class="kq jz hi ne b fi nm nj l nk nl">TYPEDEF TUPLE &lt;year INT, num_parts INT, quantity INT, inventory_num INT&gt; YEAR_PARTS;<br/>ListAccum&lt;YEAR_PARTS&gt; @@result;</span><span id="01a8" class="kq jz hi ne b fi nm nj l nk nl">Seed = {Year.*};</span><span id="7ff6" class="kq jz hi ne b fi nm nj l nk nl">Res = SELECT l FROM Seed:s - (LEGO_SET_YEAR:e) - Lego_Set:l - (INVENTORY_LEGO_SET:e1) - Inventory:t<br/>      ACCUM @@result+=YEAR_PARTS(s.year, l.num_parts, e1.quantity, t.inventory_num);</span><span id="e562" class="kq jz hi ne b fi nm nj l nk nl">PRINT @@result;</span><span id="f529" class="kq jz hi ne b fi nm nj l nk nl">}</span><span id="4b54" class="kq jz hi ne b fi nm nj l nk nl">''')</span><span id="abfb" class="kq jz hi ne b fi nm nj l nk nl">df = pd.DataFrame(year_parts[0]["@@result"])</span></pre><h2 id="b346" class="kq jz hi bd ka kr ks kt ke ku kv kw ki kx ky kz kk la lb lc km ld le lf ko lg bi translated">第二步:方框图</h2><p id="b716" class="pw-post-body-paragraph ja jb hi jd b je lh ij jg jh li im jj kx lj jm jn la lk jq jr ld ll ju jv jw hb bi translated">首先，让我们用我们的数据创建一些箱线图。</p><pre class="ma mb mc md fd nd ne nf ng aw nh bi"><span id="5be8" class="kq jz hi ne b fi ni nj l nk nl">fig = px.box(df, x="year", y="inventory_num")</span><span id="fef0" class="kq jz hi ne b fi nm nj l nk nl">fig.show()</span></pre><figure class="ma mb mc md fd mf er es paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="er es no"><img src="../Images/ff3f93486b3545befb520d9456d516db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*94ijVUwzcjBtumzwK3vmXw.png"/></div></div><figcaption class="mo mp et er es mq mr bd b be z dx">Box Plots of Inventory Number per Year</figcaption></figure><p id="a263" class="pw-post-body-paragraph ja jb hi jd b je jf ij jg jh ji im jj kx jl jm jn la jp jq jr ld jt ju jv jw hb bi translated">现在，如果您将鼠标悬停在某个值上，您将获得该部分的最大值、最小值、q1、q3和中值。任何异常值都用一个点来表示，您可以将鼠标悬停在它们上面来获取它们的值。</p><figure class="ma mb mc md fd mf er es paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="er es np"><img src="../Images/aacedeb13b46819b9cb0a5f1e96365c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QXLd0dDYFdzfuZj4_Sg5Hg.png"/></div></div><figcaption class="mo mp et er es mq mr bd b be z dx">Hover over to get the max, q3, median, q1, and min of the year.</figcaption></figure><h2 id="cc2b" class="kq jz hi bd ka kr ks kt ke ku kv kw ki kx ky kz kk la lb lc km ld le lf ko lg bi translated">第三步:创建一个三维彩色散点图</h2><p id="05a0" class="pw-post-body-paragraph ja jb hi jd b je lh ij jg jh li im jj kx lj jm jn la lk jq jr ld ll ju jv jw hb bi translated">现在我们总共有四个变量，所以让我们用inventory_num作为颜色键创建一个3D散点图。</p><pre class="ma mb mc md fd nd ne nf ng aw nh bi"><span id="7cb4" class="kq jz hi ne b fi ni nj l nk nl">fig = px.scatter_3d(df, x="year", y="quantity", z="num_parts", color="inventory_num")</span><span id="3a92" class="kq jz hi ne b fi nm nj l nk nl">fig.show()</span></pre><figure class="ma mb mc md fd mf er es paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="er es nu"><img src="../Images/b65675541203f9c1f84464599153e7b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tbC7vIx0BV-AGQxasw19gg.png"/></div></div><figcaption class="mo mp et er es mq mr bd b be z dx">3D Scatter with Inventory Number as the Colour</figcaption></figure><h2 id="2760" class="kq jz hi bd ka kr ks kt ke ku kv kw ki kx ky kz kk la lb lc km ld le lf ko lg bi translated">第四步:创建一个三维大小分散</h2><p id="7728" class="pw-post-body-paragraph ja jb hi jd b je lh ij jg jh li im jj kx lj jm jn la lk jq jr ld ll ju jv jw hb bi translated">在3D散点图中使用四个变量的另一个很酷的方法是让一个变量的大小。在这种情况下，让我们使用quantity作为大小，其他变量作为轴的值。</p><pre class="ma mb mc md fd nd ne nf ng aw nh bi"><span id="77fa" class="kq jz hi ne b fi ni nj l nk nl">fig = px.scatter_3d(df, x="year", y="num_parts", z="inventory_num", size="quantity")</span><span id="c24f" class="kq jz hi ne b fi nm nj l nk nl">fig.show()</span></pre><figure class="ma mb mc md fd mf er es paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="er es nv"><img src="../Images/22503d63e4f61e2b0b88ee5d72c2dc29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DilvVhIgDxLVEHs1LGrTuA.png"/></div></div><figcaption class="mo mp et er es mq mr bd b be z dx">Size-Based 3D Scatter</figcaption></figure><p id="057a" class="pw-post-body-paragraph ja jb hi jd b je jf ij jg jh ji im jj kx jl jm jn la jp jq jr ld jt ju jv jw hb bi translated">如你所见，有一堆小点和几个大点。和过去一样，您可以将鼠标悬停在这些点上，以获得更多相关信息。</p><figure class="ma mb mc md fd mf er es paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="er es nw"><img src="../Images/4497b0f5d154d8b5985fe6b2eae2c143.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w0evVFIfp9iV_5VDhxeppw.png"/></div></div><figcaption class="mo mp et er es mq mr bd b be z dx">Hovering over Size 3D Scatter</figcaption></figure><h1 id="a385" class="jy jz hi bd ka kb kc kd ke kf kg kh ki io kj ip kk ir kl is km iu kn iv ko kp bi translated">第二部分:祝贺+挑战！</h1><p id="8e06" class="pw-post-body-paragraph ja jb hi jd b je lh ij jg jh li im jj kx lj jm jn la lk jq jr ld ll ju jv jw hb bi translated">恭喜你。您现在知道如何使用Plotly Express可视化您的TigerGraph数据了！你能够创建一些图表，一些三维和一些2D！干得好！</p><p id="c1cc" class="pw-post-body-paragraph ja jb hi jd b je jf ij jg jh ji im jj kx jl jm jn la jp jq jr ld jt ju jv jw hb bi translated">现在，尝试在您自己的TigerGraph解决方案中用您自己的数据运行这些可视化！欢迎在TigerGraph社区Discord服务器上分享您的结果或提出任何问题:</p><div class="nx ny ez fb nz oa"><a href="https://discord.gg/gRHWBZNpxW" rel="noopener  ugc nofollow" target="_blank"><div class="ob ab dw"><div class="oc ab od cl cj oe"><h2 class="bd hj fi z dy of ea eb og ed ef hh bi translated">加入TigerGraph Discord服务器！</h2><div class="oh l"><h3 class="bd b fi z dy of ea eb og ed ef dx translated">查看Discord上的TigerGraph社区-与585名其他成员一起玩，享受免费的语音和文本聊天。</h3></div><div class="oi l"><p class="bd b fp z dy of ea eb og ed ef dx translated">不和谐. gg</p></div></div><div class="oj l"><div class="ok l ol om on oj oo ml oa"/></div></div></a></div><p id="5404" class="pw-post-body-paragraph ja jb hi jd b je jf ij jg jh ji im jj kx jl jm jn la jp jq jr ld jt ju jv jw hb bi translated">祝你好运！</p></div></div>    
</body>
</html>