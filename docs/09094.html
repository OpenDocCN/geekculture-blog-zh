<html>
<head>
<title>How to Send Data From a Form and Receive It with Express.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Express.js从表单发送和接收数据</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/how-to-send-data-from-a-form-and-receive-it-with-express-js-3c03af6275b2?source=collection_archive---------0-----------------------#2021-11-26">https://medium.com/geekculture/how-to-send-data-from-a-form-and-receive-it-with-express-js-3c03af6275b2?source=collection_archive---------0-----------------------#2021-11-26</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/48bf26a7880a8e20e3747e892fe6d857.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*r7GGKz4HpkRag31y.jpg"/></div></div></figure><div class=""/><p id="ab57" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我正在用forms和Express.js练习如何发送数据和如何捕捉数据，这将是创建一个拥有数据库的网页的好方法，我可以保存来自客户端的信息。这看起来很棒，但我需要继续学习和分享！</p><p id="0ce4" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">想看就看视频吧</p><figure class="jo jp jq jr fd hk"><div class="bz dy l di"><div class="js jt l"/></div></figure><h1 id="4a4d" class="ju jv ht bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">启动NPM</h1><pre class="jo jp jq jr fd ks kt ku kv aw kw bi"><span id="1bcf" class="kx jv ht kt b fi ky kz l la lb">npm init -y</span></pre><h1 id="45d9" class="ju jv ht bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">安装依赖项</h1><p id="b2fa" class="pw-post-body-paragraph iq ir ht is b it lc iv iw ix ld iz ja jb le jd je jf lf jh ji jj lg jl jm jn hb bi translated">我们需要安装Express.js、express-handler、body-parser，这就是目前的全部内容</p><pre class="jo jp jq jr fd ks kt ku kv aw kw bi"><span id="ddd3" class="kx jv ht kt b fi ky kz l la lb">npm i express --save</span><span id="2016" class="kx jv ht kt b fi lh kz l la lb">npm i express-handlebars</span><span id="904c" class="kx jv ht kt b fi lh kz l la lb">npm i body-parser</span><span id="291d" class="kx jv ht kt b fi lh kz l la lb">// just one line<br/>npm i express express-handlebars body-parser --save</span></pre><h1 id="db70" class="ju jv ht bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">我们目录的结构</h1><p id="ddf2" class="pw-post-body-paragraph iq ir ht is b it lc iv iw ix ld iz ja jb le jd je jf lf jh ji jj lg jl jm jn hb bi translated">首先，我们需要创建我们的视图目录，并在其中添加视图和布局，我们将为我们的表单示例添加404视图、500、home和form视图。</p><figure class="jo jp jq jr fd hk er es paragraph-image"><div class="er es li"><img src="../Images/94a0b3d6e40d1bd202ed5c278a10d77b.png" data-original-src="https://miro.medium.com/v2/resize:fit:446/format:webp/1*5MCRDk-I8yCLi0XQk6v53Q.png"/></div><figcaption class="lj lk et er es ll lm bd b be z dx">Example views and layouts structure</figcaption></figure><p id="02ba" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们可以像这样给它们添加一些信息</p><figure class="jo jp jq jr fd hk er es paragraph-image"><div class="er es ln"><img src="../Images/23c801e9a20fe9d30d3bfaff934f9b94.png" data-original-src="https://miro.medium.com/v2/resize:fit:742/format:webp/1*PIzwoxRQKMkUv5XNq3kWCw.png"/></div><figcaption class="lj lk et er es ll lm bd b be z dx">Main handlebars file</figcaption></figure><pre class="jo jp jq jr fd ks kt ku kv aw kw bi"><span id="5a1a" class="kx jv ht kt b fi ky kz l la lb">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>&lt;head&gt;<br/>&lt;meta <em class="lo">charset=</em>"utf-8"&gt;<br/>&lt;title&gt;Handle Form&lt;/title&gt;<br/>&lt;/head&gt;<br/>&lt;body&gt;<br/>{{{ <em class="lo">body</em> }}}<br/>&lt;/body&gt;<br/>&lt;/html&gt;</span></pre><figure class="jo jp jq jr fd hk er es paragraph-image"><div class="er es lp"><img src="../Images/81f303127637a5afd1f2ef8cd60f5d41.png" data-original-src="https://miro.medium.com/v2/resize:fit:632/format:webp/1*Wrtssi2X3P2b-WQscVo5jw.png"/></div><figcaption class="lj lk et er es ll lm bd b be z dx">Example 404 handlebars’ file</figcaption></figure><figure class="jo jp jq jr fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lq"><img src="../Images/ca51de3f2a593c5cd27b9f0c4654cbf0.png" data-original-src="https://miro.medium.com/v2/resize:fit:590/format:webp/1*V7yC7PG_y9CzULQGJkYmDA.png"/></div></div><figcaption class="lj lk et er es ll lm bd b be z dx">Example 500 handlebars’ file</figcaption></figure><figure class="jo jp jq jr fd hk er es paragraph-image"><div class="er es lr"><img src="../Images/aed957cabf5a65f5a12d87e620a4eea2.png" data-original-src="https://miro.medium.com/v2/resize:fit:780/format:webp/1*hqCGcIjYtglgInuE_ZJlZw.png"/></div><figcaption class="lj lk et er es ll lm bd b be z dx">Example home handlebars’ page</figcaption></figure><figure class="jo jp jq jr fd hk er es paragraph-image"><div class="er es ls"><img src="../Images/cdcdd7ddce9a8d1634dabe90debfa029.png" data-original-src="https://miro.medium.com/v2/resize:fit:824/format:webp/1*g3vuj8trfHm4lTXCYtDujw.png"/></div><figcaption class="lj lk et er es ll lm bd b be z dx">Example thank-you handlebars’ page</figcaption></figure><p id="fb0b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">最重要的是要像一个普通的表单一样，不要忘记方法和动作，因为这将把数据发送到Express.js</p><figure class="jo jp jq jr fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lt"><img src="../Images/c63c9337417b6be44f6e18d795499f89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5SwpqhAn2tw1Stdz3b0dfw.png"/></div></div><figcaption class="lj lk et er es ll lm bd b be z dx">Form handlebars’ file</figcaption></figure><pre class="jo jp jq jr fd ks kt ku kv aw kw bi"><span id="1b28" class="kx jv ht kt b fi ky kz l la lb">&lt;form <em class="lo">method=</em>"post" <em class="lo">action=</em>"http://127.0.0.1:1024/form_post"&gt;<br/>&lt;label <em class="lo">for=</em>""&gt;<br/>&lt;input <em class="lo">type=</em>"text" <em class="lo">name=</em>"name_user" <em class="lo">value=</em>"Jhon Wick" <em class="lo">placeholder=</em>"Add your name"&gt;<br/>&lt;/label&gt;<br/>&lt;label&gt;<br/>&lt;input <em class="lo">type=</em>"email" <em class="lo">name=</em>"email_user" <em class="lo">value=</em>"jhonw@gmail.com" <em class="lo">placeholder=</em>"Add your email"&gt;<br/>&lt;/label&gt;<br/>&lt;button&gt;Click&lt;/button&gt;<br/>&lt;/form&gt;</span></pre><p id="2e33" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这真的很重要，我们需要指定名称，因为通过它我们可以看到当我们发送数据时，Express.js将接收到它，并且它将创建一个将名称和值链接起来的对象。</p><h1 id="a3e8" class="ju jv ht bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">用Express.js和Node.js创建我们的服务器</h1><p id="2b9c" class="pw-post-body-paragraph iq ir ht is b it lc iv iw ix ld iz ja jb le jd je jf lf jh ji jj lg jl jm jn hb bi translated">第二，我们创建一个名为formexpress.js的文件，我们需要调用express来创建我们的带有express和调用引擎的应用程序。这是为了新版本的express-handlebars 6.0.1，端口和bodyParser来帮助我们解析数据，它将为我们提供所需的信息。</p><figure class="jo jp jq jr fd hk er es paragraph-image"><div class="er es lu"><img src="../Images/ec55d29c6edbc9aff182fd4099e2610e.png" data-original-src="https://miro.medium.com/v2/resize:fit:386/format:webp/1*KOS77FIm7j6Wuw2lrRzjjw.png"/></div><figcaption class="lj lk et er es ll lm bd b be z dx">Example js file for our server</figcaption></figure><figure class="jo jp jq jr fd hk er es paragraph-image"><div class="er es lv"><img src="../Images/b9b711910bb6714ac62ad3dfa277ebec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1002/format:webp/1*FdGXF0cAnf0ArcCFikLJJA.png"/></div><figcaption class="lj lk et er es ll lm bd b be z dx">creating variables and calling all the libraries that we need</figcaption></figure><pre class="jo jp jq jr fd ks kt ku kv aw kw bi"><span id="d37d" class="kx jv ht kt b fi ky kz l la lb">const express     = require( 'express' ),<br/>app         = express(),<br/>{ engine }  = require( 'express-handlebars' ), // before 6.0.0<br/>port        = process.env.PORT || 1024,<br/>bodyParser  = require( 'body-parser' )</span></pre><h1 id="efe5" class="ju jv ht bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">指定引擎</h1><p id="db90" class="pw-post-body-paragraph iq ir ht is b it lc iv iw ix ld iz ja jb le jd je jf lf jh ji jj lg jl jm jn hb bi translated">这真的很重要，因为在这一步中，我们保证使用express-handlebar和视图引擎，我们还可以添加布局，从而添加我们之前创建的主手柄，我们需要使用bodyParser并添加扩展为false的信息</p><figure class="jo jp jq jr fd hk er es paragraph-image"><div class="er es lw"><img src="../Images/e65efbe9820fc3c585691bb22eb99360.png" data-original-src="https://miro.medium.com/v2/resize:fit:836/format:webp/1*ugtZIcHR1YORcr9ksz5iqw.png"/></div><figcaption class="lj lk et er es ll lm bd b be z dx">Specifying the engine</figcaption></figure><pre class="jo jp jq jr fd ks kt ku kv aw kw bi"><span id="6bec" class="kx jv ht kt b fi ky kz l la lb">app.use( bodyParser({ extended: false }) )<br/>app.engine( 'handlebars', engine({<br/>defaultLayout: 'main'<br/>}))<br/>app.set( 'view engine', 'handlebars' )</span></pre><h1 id="2498" class="ju jv ht bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">为请求创建get函数</h1><p id="85ef" class="pw-post-body-paragraph iq ir ht is b it lc iv iw ix ld iz ja jb le jd je jf lf jh ji jj lg jl jm jn hb bi translated">这是另一个关键部分，因为有了它，我们将从服务器获得我们请求的视图</p><figure class="jo jp jq jr fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lx"><img src="../Images/4eafe000f22f99a844f3682cf85e81e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hjkBe_vBmjR2iwUBMCPP4w.png"/></div></div><figcaption class="lj lk et er es ll lm bd b be z dx">Example requested and response pages</figcaption></figure><pre class="jo jp jq jr fd ks kt ku kv aw kw bi"><span id="077e" class="kx jv ht kt b fi ky kz l la lb">app.get( '/', ( <em class="lo">req</em>, <em class="lo">res</em> ) =&gt; <em class="lo">res</em>.render( 'home' ) )<br/>app.get( '/form', ( <em class="lo">req</em>, <em class="lo">res</em> ) =&gt; <em class="lo">res</em>.render( 'form' ) )<br/>app.get( '/thank-you', ( <em class="lo">req</em>, <em class="lo">res</em> ) =&gt; <em class="lo">res</em>.status( 303 ).render( 'thank-you' ) )</span></pre><h1 id="ea7a" class="ju jv ht bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">张贴回复以及404和500次查看</h1><p id="a85c" class="pw-post-body-paragraph iq ir ht is b it lc iv iw ix ld iz ja jb le jd je jf lf jh ji jj lg jl jm jn hb bi translated">最后，我们必须创建post，以及在客户端发送数据后将会做什么，我们需要将post方法添加到应用程序中，我们需要设置URL以及req和res参数，然后我们需要使用req.body来检查客户端发送给我们的内容，我们可以重定向到感谢页面。</p><figure class="jo jp jq jr fd hk er es paragraph-image"><div class="er es ly"><img src="../Images/ce15f4a18f54806ef342357e63a67f3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1302/format:webp/1*cb303MwH_NzP2mANgv3A0Q.png"/></div><figcaption class="lj lk et er es ll lm bd b be z dx">Example Post data and 400 and 500 responses</figcaption></figure><pre class="jo jp jq jr fd ks kt ku kv aw kw bi"><span id="169e" class="kx jv ht kt b fi ky kz l la lb">app.post( '/form_post', ( <em class="lo">req</em>, <em class="lo">res</em> ) =&gt; {<br/>console.log(<em class="lo">req</em>.body)<br/><em class="lo">res</em>.redirect( 303, 'thank-you' )})<br/>app.use( ( <em class="lo">req</em>, <em class="lo">res</em> ) =&gt; <em class="lo">res</em>.status( 404 ).render( '404' ) )<br/>app.use( ( <em class="lo">err</em>, <em class="lo">req</em>, <em class="lo">res</em>, <em class="lo">next</em> ) =&gt; <em class="lo">res</em>.status( 500 ).render( 500 ) )<br/>app.listen( port, console.log( `http://127.0.0.1:${ port }` ) )</span></pre><h1 id="63a0" class="ju jv ht bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">测试一下</h1><p id="ad40" class="pw-post-body-paragraph iq ir ht is b it lc iv iw ix ld iz ja jb le jd je jf lf jh ji jj lg jl jm jn hb bi translated">运行我们的JS文件</p><figure class="jo jp jq jr fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lz"><img src="../Images/41e2e862df42f35913371ddc3643f11c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CQ78FMRhfkWUwDFLAw-jCg.png"/></div></div><figcaption class="lj lk et er es ll lm bd b be z dx">Example output js file</figcaption></figure><p id="9279" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">主页</p><figure class="jo jp jq jr fd hk er es paragraph-image"><div class="er es ma"><img src="../Images/3aca400c5f60f943394f60258c923093.png" data-original-src="https://miro.medium.com/v2/resize:fit:612/format:webp/1*nSydnlidipMcfdG_PbJmFw.png"/></div><figcaption class="lj lk et er es ll lm bd b be z dx">Example Home page</figcaption></figure><p id="ea4c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">表单页面</p><figure class="jo jp jq jr fd hk er es paragraph-image"><div class="er es mb"><img src="../Images/69a4317793c4c220c74029ab8050fbbd.png" data-original-src="https://miro.medium.com/v2/resize:fit:858/format:webp/1*Os-yog7OcknVjlJewwyx1Q.png"/></div><figcaption class="lj lk et er es ll lm bd b be z dx">Example Form page</figcaption></figure><p id="f59f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">点击和我们会有什么？</p><figure class="jo jp jq jr fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mc"><img src="../Images/46660f379cb06f88193ea6964ca44202.png" data-original-src="https://miro.medium.com/v2/resize:fit:650/format:webp/1*lTLZgw-0bUVx44568_2mlQ.png"/></div></div><figcaption class="lj lk et er es ll lm bd b be z dx">Example redirection to the thank you page</figcaption></figure><p id="6a08" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在控制台日志中，我们将会看到来自客户端的信息</p><figure class="jo jp jq jr fd hk er es paragraph-image"><div class="er es md"><img src="../Images/6e3a2273b3f084a769b3c131a309e12c.png" data-original-src="https://miro.medium.com/v2/resize:fit:586/format:webp/1*V3y1TOgfBk5-9UqUQLnnUw.png"/></div><figcaption class="lj lk et er es ll lm bd b be z dx">Example output the data from the client</figcaption></figure><p id="1863" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们从客户那里得到了信息，我们重定向到一个感谢页面，每个人都很高兴。</p><h1 id="2f02" class="ju jv ht bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">结论</h1><p id="4b02" class="pw-post-body-paragraph iq ir ht is b it lc iv iw ix ld iz ja jb le jd je jf lf jh ji jj lg jl jm jn hb bi translated">这一步非常重要，因为我们将有价值的信息从客户端传输到服务器，用Express.js发送和接收数据，这是一个非常有趣的步骤，下一步将是保存数据库或API，但这是一个非常大的突破。</p><h1 id="fccb" class="ju jv ht bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">来源</h1><div class="hh hi ez fb hj me"><a href="http://expressjs.com/" rel="noopener  ugc nofollow" target="_blank"><div class="mf ab dw"><div class="mg ab mh cl cj mi"><h2 class="bd hu fi z dy mj ea eb mk ed ef hs bi translated">Express - Node.js web应用程序框架</h2><div class="ml l"><h3 class="bd b fi z dy mj ea eb mk ed ef dx translated">Express是一个最小且灵活的Node.js web应用程序框架，它为web和…</h3></div><div class="mm l"><p class="bd b fp z dy mj ea eb mk ed ef dx translated">expressjs.com</p></div></div><div class="mn l"><div class="mo l mp mq mr mn ms hp me"/></div></div></a></div><div class="hh hi ez fb hj me"><a href="https://www.npmjs.com/package/express-handlebars" rel="noopener  ugc nofollow" target="_blank"><div class="mf ab dw"><div class="mg ab mh cl cj mi"><h2 class="bd hu fi z dy mj ea eb mk ed ef hs bi translated">快速把手</h2><div class="ml l"><h3 class="bd b fi z dy mj ea eb mk ed ef dx translated">一个车把查看引擎的表达，不吸。这个套件过去被命名为express 3-handlebar。的…</h3></div><div class="mm l"><p class="bd b fp z dy mj ea eb mk ed ef dx translated">www.npmjs.com</p></div></div><div class="mn l"><div class="mt l mp mq mr mn ms hp me"/></div></div></a></div><div class="hh hi ez fb hj me"><a href="https://www.npmjs.com/package/body-parser" rel="noopener  ugc nofollow" target="_blank"><div class="mf ab dw"><div class="mg ab mh cl cj mi"><h2 class="bd hu fi z dy mj ea eb mk ed ef hs bi translated">正文分析器</h2><div class="ml l"><h3 class="bd b fi z dy mj ea eb mk ed ef dx translated">Node.js主体解析中间件。在您的处理程序之前，在中间件中解析传入的请求体，可在…</h3></div><div class="mm l"><p class="bd b fp z dy mj ea eb mk ed ef dx translated">www.npmjs.com</p></div></div><div class="mn l"><div class="mu l mp mq mr mn ms hp me"/></div></div></a></div><div class="hh hi ez fb hj me"><a href="https://www.amazon.com/Web-Development-Node-Express-Leveraging-dp-1492053511/dp/1492053511/ref=dp_ob_image_bk" rel="noopener  ugc nofollow" target="_blank"><div class="mf ab dw"><div class="mg ab mh cl cj mi"><h2 class="bd hu fi z dy mj ea eb mk ed ef hs bi translated">使用Node和Express进行Web开发:利用JavaScript堆栈</h2><div class="ml l"><h3 class="bd b fi z dy mj ea eb mk ed ef dx translated">使用Node和Express进行Web开发:利用Amazon.com的JavaScript堆栈。*免费*送货到…</h3></div><div class="mm l"><p class="bd b fp z dy mj ea eb mk ed ef dx translated">www.amazon.com</p></div></div><div class="mn l"><div class="mv l mp mq mr mn ms hp me"/></div></div></a></div></div></div>    
</body>
</html>