<html>
<head>
<title>Setup Multi-Language in Django Project — Translation Manager</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Django项目中设置多语言—翻译经理</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/setup-multi-language-in-django-project-translation-manager-986bc22f90a6?source=collection_archive---------0-----------------------#2021-02-20">https://medium.com/geekculture/setup-multi-language-in-django-project-translation-manager-986bc22f90a6?source=collection_archive---------0-----------------------#2021-02-20</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="3b7d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">翻译管理器基于Django的翻译i18n基础，并扩展了其功能。</p><h1 id="085d" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">为什么我用这个代替默认的Django翻译？</h1><ul class=""><li id="14a0" class="kb kc hi ih b ii kd im ke iq kf iu kg iy kh jc ki kj kk kl bi translated">我可以完全控制Django管理员的翻译。</li><li id="77f4" class="kb kc hi ih b ii km im kn iq ko iu kp iy kq jc ki kj kk kl bi translated">它自动创建翻译备份，我们可以管理备份</li><li id="aa75" class="kb kc hi ih b ii km im kn iq ko iu kp iy kq jc ki kj kk kl bi translated">它允许您使用高级过滤器或创建类别。</li><li id="a6df" class="kb kc hi ih b ii km im kn iq ko iu kp iy kq jc ki kj kk kl bi translated">它可以选择忽略模糊的翻译(翻译建议)。</li><li id="e0dd" class="kb kc hi ih b ii km im kn iq ko iu kp iy kq jc ki kj kk kl bi translated">它允许你做代理翻译</li></ul></div><div class="ab cl kr ks gp kt" role="separator"><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw"/></div><div class="hb hc hd he hf"><h1 id="8967" class="jd je hi bd jf jg ky ji jj jk kz jm jn jo la jq jr js lb ju jv jw lc jy jz ka bi translated">让我们做整合</h1><h2 id="c0bb" class="ld je hi bd jf le lf lg jj lh li lj jn iq lk ll jr iu lm ln jv iy lo lp jz lq bi translated">1.安装Django翻译管理器</h2><pre class="lr ls lt lu fd lv lw lx ly aw lz bi"><span id="40ce" class="ld je hi lw b fi ma mb l mc md">pip install django-translation-manager</span></pre><h2 id="9a67" class="ld je hi bd jf le lf lg jj lh li lj jn iq lk ll jr iu lm ln jv iy lo lp jz lq bi translated">2.启用和设置Django翻译管理器</h2><p id="5b6e" class="pw-post-body-paragraph if ig hi ih b ii kd ik il im ke io ip iq me is it iu mf iw ix iy mg ja jb jc hb bi translated">如果你使用的是Django cookiecutters或Django Two Scoops的推荐设置，它们将设置分为base.py、local.py和production.py，那么你可以这样使用。</p><figure class="lr ls lt lu fd mh"><div class="bz dy l di"><div class="mi mj l"/></div></figure><p id="fcce" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你使用默认的Django项目设置，你可以这样使用。</p><figure class="lr ls lt lu fd mh"><div class="bz dy l di"><div class="mi mj l"/></div></figure><p id="0a5c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">运行迁移以应用翻译迁移文件</p><pre class="lr ls lt lu fd lv lw lx ly aw lz bi"><span id="53d8" class="ld je hi lw b fi ma mb l mc md">python manage.py migrate</span></pre><p id="5703" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">注:</strong>你可以从这个<a class="ae mk" href="https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes" rel="noopener ugc nofollow" target="_blank">https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes</a>中得到一个<strong class="ih hj">语言的列表</strong></p><h2 id="ed2c" class="ld je hi bd jf le lf lg jj lh li lj jn iq lk ll jr iu lm ln jv iy lo lp jz lq bi translated">3.国际化—模板</h2><p id="68e1" class="pw-post-body-paragraph if ig hi ih b ii kd ik il im ke io ip iq me is it iu mf iw ix iy mg ja jb jc hb bi translated"><strong class="ih hj"> trans </strong>用于翻译单行——我们将使用它作为标题<br/> <strong class="ih hj"> blocktrans </strong>用于扩展内容——我们将使用它作为段落</p><figure class="lr ls lt lu fd mh"><div class="bz dy l di"><div class="mi mj l"/></div></figure><h2 id="2feb" class="ld je hi bd jf le lf lg jj lh li lj jn iq lk ll jr iu lm ln jv iy lo lp jz lq bi translated">4.创建语言文件</h2><p id="ec7f" class="pw-post-body-paragraph if ig hi ih b ii kd ik il im ke io ip iq me is it iu mf iw ix iy mg ja jb jc hb bi translated">我们需要创建一个文件夹，Django将在其中保存所有的翻译文件。这些文件将由Django自动创建</p><ul class=""><li id="0091" class="kb kc hi ih b ii ij im in iq ml iu mm iy mn jc ki kj kk kl bi translated">创建区域设置所在的文件夹。在我的例子中，我在apps/locale上有我的locale路径</li></ul><pre class="lr ls lt lu fd lv lw lx ly aw lz bi"><span id="e5a8" class="ld je hi lw b fi ma mb l mc md">mkdir apps/locale</span></pre><ul class=""><li id="87eb" class="kb kc hi ih b ii ij im in iq ml iu mm iy mn jc ki kj kk kl bi translated">为我们支持的语言环境创建翻译文件。为此，进入应用程序目录，并在目录内运行</li></ul><pre class="lr ls lt lu fd lv lw lx ly aw lz bi"><span id="6e36" class="ld je hi lw b fi ma mb l mc md">$ django-admin makemessages -l vi<br/>$ django-admin makemessages -l en</span></pre><p id="3c2b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以用您喜欢添加的语言的地区代码替换<code class="du mo mp mq lw b">vi</code>。</p><h2 id="2e96" class="ld je hi bd jf le lf lg jj lh li lj jn iq lk ll jr iu lm ln jv iy lo lp jz lq bi translated">5.在admin Django上添加/编辑翻译</h2><p id="762f" class="pw-post-body-paragraph if ig hi ih b ii kd ik il im ke io ip iq me is it iu mf iw ix iy mg ja jb jc hb bi translated">运行<code class="du mo mp mq lw b">python manage.py runserver</code>然后将浏览器指向<a class="ae mk" href="http://localhost:8000/admin/translation_manager/" rel="noopener ugc nofollow" target="_blank">http://localhost:8000/Admin/translation _ manager/</a>然后转到<strong class="ih hj"><em class="mr">Admin-translation _ entry-plural</em></strong></p><figure class="lr ls lt lu fd mh er es paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="er es ms"><img src="../Images/1e18f5ca33fe5ea7da9a94fcd113ab93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NBzMmTRICYhizl9sfRFEYg.png"/></div></div></figure><figure class="lr ls lt lu fd mh er es paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="er es mz"><img src="../Images/c4ae3de99e6fca766d058a8b0a28f195.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*03AfItDng6XmSY8CBcIKqA.png"/></div></div></figure><p id="7309" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你将会看到一个翻译文本列表，从现在开始你可以在Django的admin中编辑所有的翻译。</p><p id="af65" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">请注意</strong>编辑完翻译后，不要忘记点击页面底部的保存按钮。然后，当您准备好发布它时，单击“<strong class="ih hj">更新翻译列表</strong>”进行翻译，然后单击“<strong class="ih hj">发布翻译</strong>”发布更新。你现在可以在你网站的前面查看这些变化。</p><h1 id="84ab" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">奖金</h1><p id="5ef3" class="pw-post-body-paragraph if ig hi ih b ii kd ik il im ke io ip iq me is it iu mf iw ix iy mg ja jb jc hb bi translated">Django附带了一个默认视图<code class="du mo mp mq lw b">django.conf.urls.i18n</code>，它用Python设置了用户的语言。您可以简单地设置一个特定的URL来触发这个功能。例如:</p><pre class="lr ls lt lu fd lv lw lx ly aw lz bi"><span id="3b9b" class="ld je hi lw b fi ma mb l mc md">path('i18n/', include('django.conf.urls.i18n')),</span></pre><p id="772a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个视图期望将<code class="du mo mp mq lw b">language</code>参数作为一个<code class="du mo mp mq lw b">POST</code>变量，保存当前用户在会话中的语言偏好。</p><p id="504e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">虽然默认的实现对于基本的i18n来说很好，但是除了语言之外，您可能还需要设置附加的参数来设置存储变量的区域设置，比如地理位置。要设置这样一个变量，您需要创建一个自定义视图。在这个例子中，让我们在Django应用程序中手动设置一个语言ID。您可以按照相同的过程来设置与用户的语言环境相关的任何其他变量。</p><figure class="lr ls lt lu fd mh"><div class="bz dy l di"><div class="mi mj l"/></div></figure><h1 id="5a1d" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">其他设置？</h1><p id="8b52" class="pw-post-body-paragraph if ig hi ih b ii kd ik il im ke io ip iq me is it iu mf iw ix iy mg ja jb jc hb bi translated">我通常会禁用一些不必要的字段。</p><pre class="lr ls lt lu fd lv lw lx ly aw lz bi"><span id="35c2" class="ld je hi lw b fi ma mb l mc md">TRANSLATIONS_ADMIN_EXCLUDE_FIELDS = ['get_hint', 'locale_parent_dir', 'domain']</span></pre><p id="1a61" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">更多设置信息可以看看这个文档<a class="ae mk" href="https://readthedocs.org/projects/django-translation-manager/downloads/pdf/master/" rel="noopener ugc nofollow" target="_blank">https://readthedocs . org/projects/django-translation-manager/downloads/pdf/master/</a><br/><a class="ae mk" href="https://www.coex.cz/blog/translation-manager" rel="noopener ugc nofollow" target="_blank">https://www.coex.cz/blog/translation-manager</a></p><p id="bb17" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">希望这有所帮助！如果你在整合翻译时遇到任何问题或错误，请给我留言。</p></div></div>    
</body>
</html>