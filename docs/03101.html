<html>
<head>
<title>Machine Learning in Tableau Using R with Dynamic K-Means Clustering</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">基于R和动态K均值聚类的Tableau机器学习</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/machine-learning-in-tableau-using-r-dynamic-k-means-clustering-78593e08c36?source=collection_archive---------30-----------------------#2021-05-31">https://medium.com/geekculture/machine-learning-in-tableau-using-r-dynamic-k-means-clustering-78593e08c36?source=collection_archive---------30-----------------------#2021-05-31</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/a73c9f7f30175eb21d1040d0647da2de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ZSkHucGe5zxs0g1P"/></div></div></figure><p id="d262" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下面是一个简单的教程，介绍如何在Tableau中使用R统计语言来实现更高级的ML特性，包括聚类。</p><p id="590b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">虽然Tableau最近引入了一些<a class="ae jo" href="https://help.tableau.com/current/pro/desktop/en-us/clustering.htm" rel="noopener ugc nofollow" target="_blank">集群</a>功能，但是我想探索将我的Tableau工作簿与R统计语言连接起来，以获得一种更加细致和可调的方法。使用R，我现在可以做一些事情，例如设置可再现性的种子，缩放我的因子，调整超级参数，例如开始聚类中心的数量，调整最大迭代次数，甚至从R中的<a class="ae jo" href="https://www.rdocumentation.org/packages/stats/versions/3.6.2/topics/kmeans" rel="noopener ugc nofollow" target="_blank"> kmeans() </a>函数中选择聚类算法。这里要注意的另一点是，这非常简单，尤其是如果您习惯使用R。您还可以轻松地以交互方式更改聚类的数量，并能够实时直观地看到变化，这是您在Tableau中无法做到的。以下是可供选择的算法:</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="6566" class="jy jz hi ju b fi ka kb l kc kd">algorithm = C("Hartigan-Wong", "Lloyd", "Forgy", "MacQueen")</span></pre><p id="bf15" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这些可能对有特别微妙的情况要建模的分析师非常有益。我认为在Tableau中使用R的唯一真正的缺点是，你不能再轻松地<strong class="is hj"><em class="ke"/></strong>共享仪表板，甚至对Tableau公开。这是因为Tableau在幕后建立了与本地计算机上的RStudio的连接。</p><p id="11fb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">数据</strong></p><p id="6964" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我使用的数据集来自统一犯罪报告统计。犯罪统计数据可通过美国司法部和联邦调查局公开查阅。该数据集包含美国各州多年来的犯罪率和总犯罪率信息。犯罪报告分为两大类:财产和暴力犯罪。财产犯罪指的是入室盗窃、盗窃和与汽车有关的犯罪，而暴力犯罪指的是袭击、谋杀、强奸和抢劫。这些报告从1960年到2012年。<a class="ae jo" href="https://corgis-edu.github.io/corgis/csv/state_crime/" rel="noopener ugc nofollow" target="_blank">可以在这里找到链接</a>！</p><p id="aa1d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">在RStudio中安装RServe</strong></p><p id="9ac4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">第一步是打开RStudio并安装<a class="ae jo" href="https://www.rforge.net/Rserve/doc.html" rel="noopener ugc nofollow" target="_blank">r server</a>。获得最新版本很重要，并确保它与您的r版本相匹配。</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="797d" class="jy jz hi ju b fi ka kb l kc kd">install.packages("Rserve", "Rserve_1.8-6.tgz", "http://www.rforge.net/")</span><span id="bd39" class="jy jz hi ju b fi kf kb l kc kd">library(Rserve)</span><span id="a19f" class="jy jz hi ju b fi kf kb l kc kd">Rserve(args = "--no-save")</span></pre><p id="951b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">在Tableau中设置连接</strong></p><p id="521f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下一步是打开Tableau Desktop并建立分析扩展连接。下面是Tableau的一个教程，可以帮助你完成这个过程(<a class="ae jo" href="https://help.tableau.com/current/prep/en-us/prep_scripts._R.htm" rel="noopener ugc nofollow" target="_blank"> Tableau Rserve教程</a>)。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kg"><img src="../Images/f5c333b0b4235e3af3b9ba49fda04765.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*BWkmViyrRfYWxq-a"/></div></div></figure><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kg"><img src="../Images/060ff837c7227cfb62fe73141384ed9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3RqDvZej6S6-SIb8"/></div></div></figure><p id="814c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">为集群大小创建参数</strong></p><p id="7093" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">将数据加载到Tableau后，您需要做的第一件事是创建一个参数，该参数将控制R函数中生成的聚类数。最终结果将是一个滑块或下拉菜单，允许动态控制函数和图表中生成的聚类数。我将它设置为从2到10的整数，这是我感兴趣的集群的最小和最大数量。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kh"><img src="../Images/d59f280a3656b2c8d247954d4d2348f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JPR9XQUvv7xayRp0"/></div></div></figure><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es ki"><img src="../Images/07548833305253a8183abba8f313f4cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1080/0*tVc4jJuIkCYtEf45"/></div></figure><p id="eb31" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">为聚类创建计算字段</strong></p><p id="2e21" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下一步是创建一个计算字段来存放R代码。我使用了<strong class="is hj"> SCRIPT_INT() </strong>函数，因为我想以整数形式输出集群编号。其他输出还有其他选项。这可能看起来很奇怪，但每个因素都被替换为<strong class="is hj">。argX </strong>在R代码中，然后接下来将是对应于每个. argX的所有因子参数的列表。它们也需要以聚合形式，<strong class="is hj"> SUM([Factor]) </strong>，但是这不会影响计算，所以不要担心。之前创建的参数用于计算，并作为函数末尾的<strong class="is hj"> STR() </strong>变量输入，这将是动态的，并基于参数控制。这是我的计算字段，注意使用了<strong class="is hj"> scale() </strong>函数和<strong class="is hj"> set.seed() </strong>。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kg"><img src="../Images/731609f4c7d8eb36df9ec0af7f7ea6bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*z47N679u8nHxvrMP"/></div></div></figure><p id="cf16" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">拖动集群到</strong>过滤器<strong class="is hj">和</strong>标记卡</p><p id="9620" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，就像Tableau中的任何计算字段一样，您可以将字段拖到过滤器和标记卡中。我还必须拖动状态变量，然后确保使用状态变量计算过滤器。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es kj"><img src="../Images/14d79368f51fb95979a393fc6fc8ce07.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/0*XtdW9NwELsM5kBXX"/></div></figure><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kk"><img src="../Images/74c801e4fc71cebfd9e63608b45f3639.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tVVeSnrXkuSn9IW6"/></div></div></figure><p id="ebd2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">仪表盘中的动态集群</strong></p><p id="5a53" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在构建了仪表板并添加了过滤器之后，您现在可以通过下拉菜单或滑块动态地更改集群的数量。这是对Tableau使用R所特有的，并且是分析集群数量如何影响集群的一个很好的工具。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kg"><img src="../Images/f1f392cf6e9d15383f3b140fc58b34c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_cMx9rcpwAjWTjcr"/></div></div></figure><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kg"><img src="../Images/7dc74d02ce71910a090ce15b8d34f688.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kcsQyNM4es4Klxi0"/></div></div></figure><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kg"><img src="../Images/8f0f611f3617eb4d48149def6188a814.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*g_QrV87mkZsaSQgp"/></div></div></figure><p id="536a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">请点击这里查看我的其他项目:</p><div class="kl km ez fb kn ko"><a href="https://samsdataprojects.wordpress.com" rel="noopener  ugc nofollow" target="_blank"><div class="kp ab dw"><div class="kq ab kr cl cj ks"><h2 class="bd hj fi z dy kt ea eb ku ed ef hh bi translated">最近的项目</h2><div class="kv l"><h3 class="bd b fi z dy kt ea eb ku ed ef dx translated">这里有一个项目使用统计计算机模拟来回答有多少超额预订座位会导致…</h3></div><div class="kw l"><p class="bd b fp z dy kt ea eb ku ed ef dx translated">samsdataprojects.wordpress.com</p></div></div><div class="kx l"><div class="ky l kz la lb kx lc io ko"/></div></div></a></div><p id="c067" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">或者我在这里公开的场景:</p><div class="kl km ez fb kn ko"><a href="https://public.tableau.com/profile/sam.brady#!/" rel="noopener  ugc nofollow" target="_blank"><div class="kp ab dw"><div class="kq ab kr cl cj ks"><h2 class="bd hj fi z dy kt ea eb ku ed ef hh bi translated">Tableau公共</h2><div class="kv l"><h3 class="bd b fi z dy kt ea eb ku ed ef dx translated">编辑描述</h3></div><div class="kw l"><p class="bd b fp z dy kt ea eb ku ed ef dx translated">public.tableau.com</p></div></div></div></a></div><p id="3927" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">请点击这里联系LinkedIn:</p><div class="kl km ez fb kn ko"><a href="https://www.linkedin.com/in/sam-brady-15b726191/" rel="noopener  ugc nofollow" target="_blank"><div class="kp ab dw"><div class="kq ab kr cl cj ks"><h2 class="bd hj fi z dy kt ea eb ku ed ef hh bi translated">萨姆·布雷迪-佐治亚理工学院-美国加利福尼亚州圣地亚哥县|…</h2><div class="kv l"><h3 class="bd b fi z dy kt ea eb ku ed ef dx translated">富有创造力的数学家，从教育领域深入到数据科学和机器学习领域。目前…</h3></div><div class="kw l"><p class="bd b fp z dy kt ea eb ku ed ef dx translated">www.linkedin.com</p></div></div><div class="kx l"><div class="ld l kz la lb kx lc io ko"/></div></div></a></div><p id="ce58" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">感谢阅读！</p></div></div>    
</body>
</html>