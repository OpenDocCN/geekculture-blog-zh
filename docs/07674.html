<html>
<head>
<title>GraphQL Server with Netflix DGS and Spring Boot</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">网飞·DGS和Spring Boot的GraphQL服务器</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/graphql-server-with-netflix-dgs-and-spring-boot-2b2f1b42d163?source=collection_archive---------1-----------------------#2021-09-27">https://medium.com/geekculture/graphql-server-with-netflix-dgs-and-spring-boot-2b2f1b42d163?source=collection_archive---------1-----------------------#2021-09-27</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="f3ac" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="jd">定义</em> </strong> : <br/> <em class="jd"> GraphQL是一种API的查询语言，也是一种用你现有的数据完成那些查询的运行时。GraphQL为API中的数据提供了完整且易于理解的描述，使客户能够准确地要求他们需要的东西，使API更容易随时间发展，并支持强大的开发工具。</em></p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/5e9acb7a70ce1bfd5b940b7bcabd2087.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*A0tPDohTaolK5J2m"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx">Photo by <a class="ae ju" href="https://unsplash.com/@thomascouillard?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Thomas Couillard</a> on <a class="ae ju" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="0421" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">什么是网飞DGS？</p><p id="cf93" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">网飞DGS(域图服务)是一个基于Spring Boot用Kotlin编写的GraphQL服务器框架，除了Spring框架之外，它被设计成具有最小的外部依赖性。</p><p id="4d6d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">DGS还附带了code-gen插件，用于从GraphQL模式生成Java或Kotlin代码。</p><p id="c561" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae ju" rel="noopener" href="/geekculture/graphql-quickstart-with-spring-boot-kotlin-and-mongodb-c16f301b8aeb"> GraphQL初学者—从这里开始</a></p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es jv"><img src="../Images/0b38b587ccb08fe447db97ae92ff1507.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P13dwJLMZyKA8pZmWrNGiQ.png"/></div></div></figure><p id="859a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> GraphQL API开发</strong></p><p id="19bd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有两种开发GraphQL API的方法，如下所示</p><ol class=""><li id="5a87" class="jw jx hi ih b ii ij im in iq jy iu jz iy ka jc kb kc kd ke bi translated"><strong class="ih hj"> <em class="jd">模式优先API开发</em> </strong> <em class="jd">:这里我们用GraphQL模式文件定义API，为查询/变异</em>操作提供服务实现。</li><li id="cd7b" class="jw jx hi ih b ii kf im kg iq kh iu ki iy kj jc kb kc kd ke bi translated"><strong class="ih hj"> <em class="jd">代码优先API开发</em> </strong> <em class="jd">:与上面相反，这里GraohQL模式是在运行时从代码定义中得到生成的。</em></li></ol><p id="7416" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">比起代码优先的方法，网飞·DGS更喜欢模式优先的开发。</p></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><p id="bf66" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> GraphQL模式类型(它来自graph QL——不特定于DGS) </strong></p><ol class=""><li id="2b91" class="jw jx hi ih b ii ij im in iq jy iu jz iy ka jc kb kc kd ke bi translated"><strong class="ih hj">查询</strong>类型:定义只读操作(例如:GET)</li><li id="1b6f" class="jw jx hi ih b ii kf im kg iq kh iu ki iy kj jc kb kc kd ke bi translated"><strong class="ih hj">突变</strong>类型:定义数据变更操作(如:上传、发布、删除、修补)</li><li id="0b83" class="jw jx hi ih b ii kf im kg iq kh iu ki iy kj jc kb kc kd ke bi translated"><strong class="ih hj">输入</strong>类型:定义用户自定义的json类型，作为查询/变异操作的请求参数。</li><li id="c0c5" class="jw jx hi ih b ii kf im kg iq kh iu ki iy kj jc kb kc kd ke bi translated"><strong class="ih hj">输出</strong>类型:定义用户自定义的json类型，作为查询/变异操作的响应类型。</li><li id="8714" class="jw jx hi ih b ii kf im kg iq kh iu ki iy kj jc kb kc kd ke bi translated"><strong class="ih hj">枚举</strong>类型:定义常量——可用于输入/输出类型中的属性。</li><li id="ed87" class="jw jx hi ih b ii kf im kg iq kh iu ki iy kj jc kb kc kd ke bi translated"><strong class="ih hj">标量</strong>类型:所有GraphQL默认原语类型都被认为是标量。</li><li id="28dc" class="jw jx hi ih b ii kf im kg iq kh iu ki iy kj jc kb kc kd ke bi translated"><strong class="ih hj">接口</strong>类型:我们可以使用接口类型作为响应参数。</li></ol></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><p id="3008" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们从一个简单的例子开始:</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es kr"><img src="../Images/548866c00b903f39e8898d43e93849c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ic7PHCYRLzAqi2rz_j0UdA.png"/></div></div></figure><div class="ks kt ez fb ku kv"><a href="https://start.spring.io/#!type=maven-project&amp;language=kotlin&amp;platformVersion=2.4.5.RELEASE&amp;packaging=jar&amp;jvmVersion=11&amp;groupId=com.shashir&amp;artifactId=graphql-netflixdgs-springboot-app&amp;name=graphql-netflixdgs-springboot-app&amp;description=Build%20GraphQL%20server%20with%20Netflix%20DGS%20framework%20and%20Spring%20Boot&amp;packageName=com.shashir.graphql-netflixdgs-springboot-app&amp;dependencies=lombok,web,data-mongodb" rel="noopener  ugc nofollow" target="_blank"><div class="kw ab dw"><div class="kx ab ky cl cj kz"><h2 class="bd hj fi z dy la ea eb lb ed ef hh bi translated">弹簧初始化r</h2><div class="lc l"><h3 class="bd b fi z dy la ea eb lb ed ef dx translated">Initializr生成的spring boot项目正好是你快速启动所需要的！</h3></div><div class="ld l"><p class="bd b fp z dy la ea eb lb ed ef dx translated">start.spring.io</p></div></div><div class="le l"><div class="lf l lg lh li le lj jo kv"/></div></div></a></div><p id="e7cc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae ju" href="https://mvnrepository.com/artifact/com.netflix.graphql.dgs/graphql-dgs-spring-boot-starter" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj"/></a><strong class="ih hj">:【超链接附后】</strong></p><ul class=""><li id="bcce" class="jw jx hi ih b ii ij im in iq jy iu jz iy ka jc lk kc kd ke bi translated">Maven:</li></ul><pre class="jf jg jh ji fd ll lm ln lo aw lp bi"><span id="6e3a" class="lq lr hi lm b fi ls lt l lu lv">&lt;<strong class="lm hj">dependency</strong>&gt;<br/>   &lt;<strong class="lm hj">groupId</strong>&gt;com.netflix.graphql.dgs&lt;/<strong class="lm hj">groupId</strong>&gt;<br/>   &lt;<strong class="lm hj">artifactId</strong>&gt;graphql-dgs-spring-boot-starter&lt;/<strong class="lm hj">artifactId</strong>&gt;<br/>   <em class="jd">&lt;!-- Set the latest framework version! --&gt;<br/>   </em>&lt;<strong class="lm hj">version</strong>&gt;3.11.0&lt;/<strong class="lm hj">version</strong>&gt;<br/>&lt;/<strong class="lm hj">dependency</strong>&gt;</span></pre><ul class=""><li id="3800" class="jw jx hi ih b ii ij im in iq jy iu jz iy ka jc lk kc kd ke bi translated">格拉德:</li></ul><pre class="jf jg jh ji fd ll lm ln lo aw lp bi"><span id="ac12" class="lq lr hi lm b fi ls lt l lu lv">repositories {<br/>    mavenCentral()<br/>}</span><span id="2ca7" class="lq lr hi lm b fi lw lt l lu lv">dependencies {<br/>    implementation "com.netflix.graphql.dgs:graphql-dgs-spring-boot-starter:latest.release"<br/>}</span></pre><ul class=""><li id="3a8f" class="jw jx hi ih b ii ij im in iq jy iu jz iy ka jc lk kc kd ke bi translated">格雷尔+科特林:</li></ul><pre class="jf jg jh ji fd ll lm ln lo aw lp bi"><span id="390e" class="lq lr hi lm b fi ls lt l lu lv">repositories {<br/>    mavenCentral()<br/>}</span><span id="5bbd" class="lq lr hi lm b fi lw lt l lu lv">dependencies {<br/>    implementation("com.netflix.graphql.dgs:graphql-dgs-spring-boot-starter:latest.release")<br/>}</span></pre><p id="2a18" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">让我们从GraphQL模式文件</em>开始</p><p id="258f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里，我们使用两个模型对象——Account和Customer来理解一些GraphQL概念，以及当我们有多个带有hibernate映射的实体时它的用法。</p><p id="923e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里我们有查询、变异、输入、枚举和标量类型</p><pre class="jf jg jh ji fd ll lm ln lo aw lp bi"><span id="7bca" class="lq lr hi lm b fi ls lt l lu lv"><strong class="lm hj">type </strong>Query {<br/>    <strong class="lm hj">customers</strong>: [Customer]<br/>}<br/><br/><strong class="lm hj">type </strong>Mutation {<br/>    <strong class="lm hj">customer</strong>(customerInput: CustomerInput): Customer<br/>}<br/><br/><strong class="lm hj">type </strong>Customer {<br/>    <strong class="lm hj">customerNumber</strong>: String!<br/>    <strong class="lm hj">name</strong>: String!<br/>    <strong class="lm hj">gender</strong>: String!<br/>    <strong class="lm hj">contact</strong>: Int!<br/>    <strong class="lm hj">mail</strong>: String<br/>    <strong class="lm hj">accounts</strong>: [Account]<br/>}<br/><br/><strong class="lm hj">type </strong>Account {<br/>    <strong class="lm hj">accountId</strong>: String<br/>    <strong class="lm hj">accountNumber</strong>: Int<br/>    <strong class="lm hj">accountStatus</strong>: AccountStatus<br/>    <strong class="lm hj">accountBalance</strong>: Float<br/>}<br/><br/><strong class="lm hj">input </strong>CustomerInput {<br/>    <strong class="lm hj">name</strong>: String!<br/>    <strong class="lm hj">gender</strong>: String!<br/>    <strong class="lm hj">contact</strong>: Int!<br/>    <strong class="lm hj">mail</strong>: String<br/>    <strong class="lm hj">accounts</strong>: [AccountInput]<br/>}<br/><br/><strong class="lm hj">input </strong>AccountInput {<br/>    <strong class="lm hj">accountNumber</strong>: Int<br/>    <strong class="lm hj">accountStatus</strong>: AccountStatus<br/>    <strong class="lm hj">accountBalance</strong>: Float<br/>}<br/><br/><strong class="lm hj">enum </strong>AccountStatus {<br/>    <strong class="lm hj"><em class="jd">Active</em></strong>, <strong class="lm hj"><em class="jd">Inactive</em></strong>, <strong class="lm hj"><em class="jd">Closed<br/></em></strong>}</span></pre><p id="1dd3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">用@DgsComponent </strong>实现数据提取器</p><p id="9cac" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">@DgsComponent —它的作用类似于@RestController批注。</p><pre class="jf jg jh ji fd ll lm ln lo aw lp bi"><span id="06b3" class="lq lr hi lm b fi ls lt l lu lv">@DgsComponent<br/><strong class="lm hj">public class </strong>CustomerDataFetcher {<br/><br/>    @Autowired<br/>    CustomerRepository <strong class="lm hj">customerRepository</strong>;<br/><br/>    @Autowired<br/>    AccountRepository <strong class="lm hj">accountRepository</strong>;</span><span id="c32d" class="lq lr hi lm b fi lw lt l lu lv"><em class="jd">    @DgsData methods</em></span><span id="3e60" class="lq lr hi lm b fi lw lt l lu lv"><em class="jd">    @DgsMutation methods</em></span><span id="d66b" class="lq lr hi lm b fi lw lt l lu lv"><em class="jd">    @DgsQuery methods</em><br/>}</span></pre><p id="1eed" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="jd"> GraphQL查询带@DgsQuery和@DgsData标注</em> </strong></p><p id="342a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="jd"> @DgsQuery </em> </strong> —与' @GetMapping '注释相同</p><p id="f0d9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">它是一个方法级的注释，用于将该方法作为一个数据提取器。它只有一个参数——“字段”。它将用于执行提取操作。</p><p id="4657" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里，parentType是“Query”，从注释本身和“field”中派生出来，如果指定的话，从提供的值中选择，否则将从方法名中派生出来。</p><pre class="jf jg jh ji fd ll lm ln lo aw lp bi"><span id="f1fd" class="lq lr hi lm b fi ls lt l lu lv">@DgsQuery(field = <strong class="lm hj">"customers"</strong>)<br/><strong class="lm hj">public </strong>List&lt;Customer&gt; customers() {<br/>    <strong class="lm hj">return customerRepository</strong>.findAll();<br/>}</span></pre><p id="bf8c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="jd"> @DgsData — </em> </strong>与“@RequestMapping”注释相同</p><p id="1c94" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">它是一个方法级的注释，用于将该方法作为一个数据提取器。它有两个参数——“父类型”和“字段”。</p><ul class=""><li id="b923" class="jw jx hi ih b ii ij im in iq jy iu jz iy ka jc lk kc kd ke bi translated">parentType —它是一种包含字段的类型。</li><li id="c765" class="jw jx hi ih b ii kf im kg iq kh iu ki iy kj jc lk kc kd ke bi translated">字段—指示数据提取器负责的字段。</li></ul><p id="b6bc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里要注意的是，参数“field”是一个可选参数，它将从方法名中派生出来。</p><p id="3f30" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们不能在一个方法中定义@DgsQuery和@DgsMutation，而是可以将@DgsData与parentType一起用作“查询”或“变异”。</p><pre class="jf jg jh ji fd ll lm ln lo aw lp bi"><span id="d467" class="lq lr hi lm b fi ls lt l lu lv">@DgsData(parentType = <strong class="lm hj">"Query"</strong>, field = <strong class="lm hj">"customers"</strong>)<br/><strong class="lm hj">public </strong>List&lt;Customer&gt; customers() {<br/>    <strong class="lm hj">return customerRepository</strong>.findAll();<br/>}</span><span id="73df" class="lq lr hi lm b fi lw lt l lu lv">@DgsData(parentType = <strong class="lm hj">"Customer"</strong>, field = <strong class="lm hj">"accounts"</strong>)<br/><strong class="lm hj">public </strong>List&lt;Account&gt; accounts(DgsDataFetchingEnvironment dgsDataFetchingEnvironment) {<br/>    Customer customer = dgsDataFetchingEnvironment.getSource();<br/>    List&lt;Account&gt; accountList = <strong class="lm hj">new </strong>ArrayList&lt;&gt;();<br/>    <strong class="lm hj">for </strong>(Account account : customer.getAccounts()) {<br/>       Account accountResponse = <strong class="lm hj">accountRepository</strong>.findById(account.getAccountId()).get();<br/>       accountList.add(accountResponse);<br/>    }<br/>    <strong class="lm hj">return </strong>accountList;<br/>}</span></pre><p id="c147" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="jd"> GraphQL突变用@DgsMutation标注</em> </strong></p><p id="202d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"><em class="jd">@ DgsMutation—</em></strong>与“@PostMapping，@PutMapping，@DeleteMapping”注释相同</p><p id="35f5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">它是一个方法级的注释，用于将该方法作为一个数据提取器。它只有一个参数——“字段”。它将用于执行持久化/更新/删除操作。</p><p id="b56f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这里，parentType是“Mutation”，从注释本身和“field”派生而来，如果指定的话，从提供的值中选择，否则它将从方法名派生而来。</p><pre class="jf jg jh ji fd ll lm ln lo aw lp bi"><span id="4c96" class="lq lr hi lm b fi ls lt l lu lv">@DgsMutation<br/><strong class="lm hj">public </strong>Customer customer(CustomerInput customerInput) {<br/>    Customer customer = Customer.<em class="jd">builder</em>()<br/>            .contact(customerInput.getContact())<br/>            .name(customerInput.getName())<br/>            .gender(customerInput.getGender())<br/>            .mail(customerInput.getMail())<br/> .accounts(mapCustomerAccounts(customerInput.getAccounts()))<br/>            .build();<br/>    Customer customerResponse = <strong class="lm hj">customerRepository</strong>.save(customer);<br/>    <strong class="lm hj">return </strong>customerResponse;<br/>}</span></pre><p id="ff8d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们从GraphiQL web控制台开始测试应用程序:</p><p id="0ec0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="jd">模型类—账户</em> </strong></p><pre class="jf jg jh ji fd ll lm ln lo aw lp bi"><span id="1bc2" class="lq lr hi lm b fi ls lt l lu lv">@Data<br/>@Entity<br/>@Builder<br/>@NoArgsConstructor<br/>@AllArgsConstructor<br/>@Table(name = <strong class="lm hj">"account"</strong>)<br/><strong class="lm hj">public class </strong>Account {</span><span id="1e59" class="lq lr hi lm b fi lw lt l lu lv">    @Id<br/>    @GeneratedValue(strategy = GenerationType.<strong class="lm hj"><em class="jd">IDENTITY</em></strong>)<br/>    <strong class="lm hj">private </strong>String <strong class="lm hj">accountId</strong>;<br/>    <strong class="lm hj">private </strong>Long <strong class="lm hj">accountNumber</strong>;<br/>    <strong class="lm hj">private </strong>String <strong class="lm hj">accountStatus</strong>;<br/>    <strong class="lm hj">private </strong>Double <strong class="lm hj">accountBalance</strong>;<br/>}</span></pre><p id="0c3b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="jd">模型类—客户</em> </strong></p><pre class="jf jg jh ji fd ll lm ln lo aw lp bi"><span id="fcd4" class="lq lr hi lm b fi ls lt l lu lv">@Data<br/>@Entity<br/>@Builder<br/>@NoArgsConstructor<br/>@AllArgsConstructor<br/>@Table(name = <strong class="lm hj">"Customer"</strong>)<br/><strong class="lm hj">public class </strong>Customer {</span><span id="6cb8" class="lq lr hi lm b fi lw lt l lu lv">    @Id<br/>    @Column(name = <strong class="lm hj">"CUSTOMER_NUMBER"</strong>)<br/>    @GeneratedValue(strategy = GenerationType.<strong class="lm hj"><em class="jd">IDENTITY</em></strong>)<br/>    <strong class="lm hj">private </strong>String <strong class="lm hj">customerNumber</strong>;<br/>    <strong class="lm hj">private </strong>String <strong class="lm hj">name</strong>;<br/>    <strong class="lm hj">private </strong>String <strong class="lm hj">gender</strong>;<br/>    <strong class="lm hj">private </strong>Long <strong class="lm hj">contact</strong>;<br/>    <strong class="lm hj">private </strong>String <strong class="lm hj">mail</strong>;</span><span id="57ae" class="lq lr hi lm b fi lw lt l lu lv">    @OneToMany(cascade = CascadeType.<strong class="lm hj"><em class="jd">ALL</em></strong>)<br/>    <strong class="lm hj">private </strong>List&lt;Account&gt; <strong class="lm hj">accounts</strong>;<br/>}</span></pre><p id="714f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">JPA存储库—帐户和客户</p><pre class="jf jg jh ji fd ll lm ln lo aw lp bi"><span id="97c1" class="lq lr hi lm b fi ls lt l lu lv">@Repository<br/><strong class="lm hj">public interface </strong>CustomerRepository <strong class="lm hj">extends </strong>JpaRepository&lt;Customer, String&gt; {}</span><span id="2d1a" class="lq lr hi lm b fi lw lt l lu lv">@Repository<br/><strong class="lm hj">public interface </strong>AccountRepository <strong class="lm hj">extends </strong>JpaRepository&lt;Account, String&gt; {}</span></pre><p id="c1d6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们从GraphiQL web控制台开始测试应用程序:</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="ab fe cl lx"><img src="../Images/7ea9d9269f588603eef08d8adf679064.png" data-original-src="https://miro.medium.com/v2/format:webp/1*0MwxEQ--iKL76jGlazJxpQ.png"/></div></figure><p id="53c7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过选择“CustomerMutation ”,我们正在执行将条目输入到我们的H2数据库中的POST操作。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es ly"><img src="../Images/f5aa5f49433f05f5c2f878105843b071.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IstL6W1bGxwJR6NAb7R2mA.png"/></div></div></figure><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es lz"><img src="../Images/1c51cf647826c8d82fcfc00550db13e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MVU5CZ4DJXhVAjYSII061Q.png"/></div></div></figure><p id="9197" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过选择“CustomerQuery ”,我们执行GET操作，从H2数据库中获取所有客户。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es ma"><img src="../Images/f572970b815f3343a25451551adf8563.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s3N0p8W6hN_WrqB2bWMl3A.png"/></div></div></figure></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><p id="c69b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我希望你发现这篇文章有助于理解网飞DGS框架的基础知识。在这里，我们从网飞·DGS的基础知识开始，介绍了如何使用它来编写GraphQL组件，以及如何使用它来实现查询和变异，并给出了一个从H2数据库持久化和读取数据的例子。</p><p id="d31b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上面例子的完整代码可以在GitHub上找到</p><div class="ks kt ez fb ku kv"><a href="https://github.com/shashirl9/neflixdgs-graphql-javaapp" rel="noopener  ugc nofollow" target="_blank"><div class="kw ab dw"><div class="kx ab ky cl cj kz"><h2 class="bd hj fi z dy la ea eb lb ed ef hh bi translated">GitHub-shashirl 9/neflixdgs-graph QL-javaapp:用网飞dgs框架和Spring启动graph QL…</h2><div class="lc l"><h3 class="bd b fi z dy la ea eb lb ed ef dx translated">用网飞DGS框架和Spring Boot-GitHub-shashirl 9/neflixdgs-GraphQL-javaapp启动graph QL:启动GraphQL…</h3></div><div class="ld l"><p class="bd b fp z dy la ea eb lb ed ef dx translated">github.com</p></div></div><div class="le l"><div class="mb l lg lh li le lj jo kv"/></div></div></a></div><p id="5076" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="jd">参考文献</em> </strong>:</p><div class="ks kt ez fb ku kv"><a href="https://netflix.github.io/dgs/" rel="noopener  ugc nofollow" target="_blank"><div class="kw ab dw"><div class="kx ab ky cl cj kz"><h2 class="bd hj fi z dy la ea eb lb ed ef hh bi translated">家园- DGS框架</h2><div class="lc l"><h3 class="bd b fi z dy la ea eb lb ed ef dx translated">@DgsComponent公共类ShowsDataFetcher { @ DGS data(parent type = " Query "，field = "shows ")公共列表…</h3></div><div class="ld l"><p class="bd b fp z dy la ea eb lb ed ef dx translated">netflix.github.io</p></div></div></div></a></div><div class="ks kt ez fb ku kv"><a href="https://github.com/Netflix/dgs-framework/blob/master/CONTRIBUTING.md" rel="noopener  ugc nofollow" target="_blank"><div class="kw ab dw"><div class="kx ab ky cl cj kz"><h2 class="bd hj fi z dy la ea eb lb ed ef hh bi translated">网飞/dgs框架</h2><div class="lc l"><h3 class="bd b fi z dy la ea eb lb ed ef dx translated">感谢您对DGS框架感兴趣！本指南有助于找到最有效的投稿方式，询问…</h3></div><div class="ld l"><p class="bd b fp z dy la ea eb lb ed ef dx translated">github.com</p></div></div><div class="le l"><div class="mc l lg lh li le lj jo kv"/></div></div></a></div></div></div>    
</body>
</html>