<html>
<head>
<title>Form Validations Working With ExpressJS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用ExpressJS进行表单验证</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/form-validations-working-with-expressjs-df2754465cd4?source=collection_archive---------16-----------------------#2021-03-28">https://medium.com/geekculture/form-validations-working-with-expressjs-df2754465cd4?source=collection_archive---------16-----------------------#2021-03-28</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="4fe0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于我在参加Flatiron软件工程项目时创建的大多数项目，我都使用Ruby/Ruby on Rails作为后端，JavaScript作为前端。从那以后，我一直在学习Node JS作为后端语言，并使用Express，因为它是Node JS的一个流行框架。在这篇文章中，我将讨论如何在提交表单时验证发送的信息。</p><p id="1715" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当我们在线使用表格时，通常会在表格中进行验证，以确保您正确填写表格并提供有效信息。许多网站和应用程序上流行的表单是注册或登录表单，带有用户名和密码(几乎每个应用程序都有)，然后根据应用程序提供关于你的各种其他信息。可以有许多与用户名和密码相关联的验证器。例如，确保用户名是唯一的，不会被盗用，密码有一定的长度，或者包含字母、数字和安全符号。其他项目也有验证器，如确保电子邮件是电子邮件或信用卡号是信用卡号。</p><p id="5dd2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以使用一个中间件来帮助我们在代码中放置这些验证器，这个中间件就是“express-validator”(没什么好惊讶的)。下面是一个注册表单的例子，它要求输入电子邮件、密码和密码确认。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/7edb30d6f09066a7e8993403a6b0c2cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*m7L2VI9FjBNLHyuo"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx">Photo by <a class="ae jt" href="https://unsplash.com/@inlytics?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">inlytics | LinkedIn Analytics Tool</a> on <a class="ae jt" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="3ad0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们必须从在项目中安装express-validator开始，这是通过运行以下命令来完成的:</p><pre class="je jf jg jh fd ju jv jw jx aw jy bi"><span id="eeef" class="jz ka hi jv b fi kb kc l kd ke">npm install express-validator</span></pre><p id="c357" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在项目的主目录中。然后在express-validator库中，我们将使用的两个主要函数是check和validationResult，因此我们可以在express-validator中使用表单post请求请求我们的文件，并解构这两个函数。</p><pre class="je jf jg jh fd ju jv jw jx aw jy bi"><span id="802b" class="jz ka hi jv b fi kb kc l kd ke">const { check, validationResult } = require('express-validator');</span></pre><p id="28be" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后在我们的post请求中，我们希望使用的验证检查作为一个数组发送，作为post请求的第二个参数。因此，对于我在数组中提到的注册表单，我们将检查电子邮件、密码和密码确认，在每次检查中，我们将我们想要检查的方法放在该字段上。除了验证之外，我们还可以在杀毒器上添加一个例子，杀毒器在写入值之前或之后删除空格(这是trim())。我为这三个字段使用的验证和杀毒程序是trim()(上面提到过)，normalizedEmail将电子邮件放在标准格式中，isEmail检查它是否是电子邮件，自定义验证电子邮件是否已经在数据库中使用，withMessage向我们提供一条消息，将错误对象与validationResult一起发送回来，isLength接受一个具有max和/或min密钥的对象，另一个自定义验证检查密码和密码确认匹配。</p><p id="0a57" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正如我上面提到的，我们然后使用validationResult，并给它一个请求作为参数，以获取任何不符合我们验证的错误。如果有错误，我们希望将它们发送回来，这样用户就可以看到它们，如果没有，我们可以为用户创建一个新帐户。下面是一个完整的例子，展示了如何在post请求中进行编码(为了缩短代码，使其更容易阅读，我们还可以将验证器移到一个单独的文件中)。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kf"><img src="../Images/f0741719a22ff6adafdfb4ddd3110914.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tyw4QqNeabkzlH_rAooBAw.png"/></div></div></figure><p id="8a4c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Udemy课程<a class="ae jt" href="https://www.udemy.com/course/javascript-beginners-complete-tutorial/" rel="noopener ugc nofollow" target="_blank">现代Javascript Bootcamp课程(2021) </a>通过创建全栈Javascript，包括使用表单验证，如上所示。</p></div></div>    
</body>
</html>