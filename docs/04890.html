<html>
<head>
<title>Counting Set Bits</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">计数设置位</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/counting-set-bits-d309f3652557?source=collection_archive---------41-----------------------#2021-07-05">https://medium.com/geekculture/counting-set-bits-d309f3652557?source=collection_archive---------41-----------------------#2021-07-05</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="4c02" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">二进制表示中的设置位由1表示。当我们用二进制格式表示一个数时，对应于1的位称为“置位”，对应于0的位称为“未置位”。</p><p id="7a79" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">例如，让我们取一个数6 <br/>，6的二进制表示如下<br/>(假设以32位格式表示该数):<br/>00000000000000000000000000110</p><p id="bc9b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，如果我们从最右边的位开始，我们会发现第一位未置位。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/c4d664c31394701aa966da8604e13800.png" data-original-src="https://miro.medium.com/v2/resize:fit:1226/format:webp/1*37KCMon7EfC-NHPInJkjiw.png"/></div></div></figure><p id="c6d3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，当我们向左移动时，我们看到第二位被设置。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jp"><img src="../Images/6d60a867a9257ad948689c383dec5951.png" data-original-src="https://miro.medium.com/v2/resize:fit:1296/format:webp/1*W9VeE9x5RDk-9mpep48vVg.png"/></div></figure><p id="7875" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如此继续下去。</p><p id="fe5e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该数字总共包含2个设置位(分别在第二和第三位置)。</p><blockquote class="jq jr js"><p id="5b4b" class="if ig jt ih b ii ij ik il im in io ip ju ir is it jv iv iw ix jw iz ja jb jc hb bi translated">为了编写一个计算一个数的所有设定位的程序，有许多方法，但我们将看到一种在恒定时间内完成工作的方法，即程序的时间复杂度为θ(1)。</p></blockquote><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jx"><img src="../Images/e55ce6aacffccbcbdf78259453778295.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2hG-kBff7tUCUWXC"/></div></div><figcaption class="jy jz et er es ka kb bd b be z dx">Photo by <a class="ae kc" href="https://unsplash.com/@benwhitephotography?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Ben White</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="c1fd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以让我们开始吧…</p><h1 id="c81a" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated"><strong class="ak">查表法</strong></h1><p id="b4be" class="pw-post-body-paragraph if ig hi ih b ii lb ik il im lc io ip iq ld is it iu le iw ix iy lf ja jb jc hb bi translated">这种方法需要一些初始化，然后它只是需要恒定的时间。</p><ol class=""><li id="4c4c" class="lg lh hi ih b ii ij im in iq li iu lj iy lk jc ll lm ln lo bi translated">二进制形式的给定数(假设32位格式)被分成4部分，每部分8位。例如，让我们拿数字15<br/>00000000000000000000000000000001111</li></ol><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lp"><img src="../Images/52b8f68cba2aa61f9d735b6ea2ae1565.png" data-original-src="https://miro.medium.com/v2/resize:fit:1268/format:webp/1*wckLdbQ0OzKeakkTBBcIfw.png"/></div></figure><p id="1508" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该数字分为4部分，每部分由8位组成<br/>8位中可以存储的最小数字是00000000 = 0<br/>8位中可以存储的最大数字是11111111 = 255(2⁸-1)</p><p id="45dd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.我们现在创建一个包含从0到255的值的表，其中第I个表表示数字I中的置位位数。<br/>即，表[4]的值等于数字4(即1)中的置位位数。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lq"><img src="../Images/490188b92f29473bf5ebcae44300f2a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*br2QGN3xvLW7zjurpaZbeQ.png"/></div></div></figure><ol class=""><li id="7d51" class="lg lh hi ih b ii ij im in iq li iu lj iy lk jc ll lm ln lo bi translated">当数字为0时，我们没有设置位，因此table[0]= 0；</li><li id="cf7c" class="lg lh hi ih b ii lr im ls iq lt iu lu iy lv jc ll lm ln lo bi translated">当number = 1(表示为01)时，我们有1个设置位，因此table[1] = 1</li><li id="4c7e" class="lg lh hi ih b ii lr im ls iq lt iu lu iy lv jc ll lm ln lo bi translated">当数字= 3 (011)时，我们有2个设置位，因此表[3] = 2</li><li id="5470" class="lg lh hi ih b ii lr im ls iq lt iu lu iy lv jc ll lm ln lo bi translated">当数字= 255 (11111111)时，表[255] =8。</li></ol><p id="0509" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.现在，在这个表的帮助下，我们找到了给定数字的所有四个部分中单独设置的位数，并将它们相加</p><p id="e0e5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了找到每组中的设置位</p><ul class=""><li id="e7fb" class="lg lh hi ih b ii ij im in iq li iu lj iy lk jc lw lm ln lo bi translated">我们取每个集合的最大数，即0xFF(11111111 ),并对该数执行“与”运算，</li><li id="e69b" class="lg lh hi ih b ii lr im ls iq lt iu lu iy lv jc lw lm ln lo bi translated">在上表中查找结果值，以找到位数</li><li id="4522" class="lg lh hi ih b ii lr im ls iq lt iu lu iy lv jc lw lm ln lo bi translated">然后将数字右移8，再继续3次。</li></ul><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lx"><img src="../Images/682690fc24b75d85ea222f37ad80a9c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cSq3712qZDX_e46JtGrrKg.png"/></div></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ly"><img src="../Images/5988f62fb6353430790dc96ad9026459.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6m1T4mbchDte8RONhK546Q.png"/></div></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lz"><img src="../Images/5dd56d111ab09b6208e3ce7fb8b3669c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/format:webp/1*sqGr06aAmu3nWxbEa-sS-w.png"/></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ma"><img src="../Images/9028bdae0478550a5f736b259a206e82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kpBc0NKSD5_-5QhWvf75vg.png"/></div></div></figure><p id="7dfe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在请写一点代码</p><pre class="je jf jg jh fd mb mc md me aw mf bi"><span id="bd09" class="mg ke hi mc b fi mh mi l mj mk">#include &lt;bits/stdc++.h&gt;<br/><strong class="mc hj">using</strong> <strong class="mc hj">namespace</strong> <!-- -->std;</span><span id="9d56" class="mg ke hi mc b fi ml mi l mj mk"><strong class="mc hj">int</strong> table[256];<br/><strong class="mc hj">void</strong> initialize(){<br/><strong class="mc hj">int</strong> i;<br/>table[0] = 0;<br/>for (i = 1; i &lt; 256; i++)<br/>{table[i] = (i &amp; 1) + table[i / 2];}<br/>}</span><span id="730c" class="mg ke hi mc b fi ml mi l mj mk"><strong class="mc hj">int</strong> lookup(<strong class="mc hj">int</strong> n){<br/><strong class="mc hj">int</strong> count = table[n &amp; 0xff];<br/>n = n &gt;&gt; 8;<br/>count += table[n &amp; 0xff];<br/>n = n &gt;&gt; 8;<br/>count += table[n &amp; 0xff];<br/>n = n &gt;&gt; 8;<br/>count += table[n &amp; 0xff];<br/>return count;<br/>}</span><span id="ea53" class="mg ke hi mc b fi ml mi l mj mk"><strong class="mc hj">int</strong> main(){<br/><strong class="mc hj">int</strong> n;<br/>initialize();<br/>cin &gt;&gt; n;<br/>cout&lt;&lt;lookup(n);<br/>return 0;<br/>}</span></pre><p id="5372" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Wohoo！你在恒定时间内解决了这个问题。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mm"><img src="../Images/ab49229bbe47534df9741fe251764b81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*N1brGrxYcIr_wHpx"/></div></div><figcaption class="jy jz et er es ka kb bd b be z dx">Photo by <a class="ae kc" href="https://unsplash.com/@brucemars?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">bruce mars</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure></div></div>    
</body>
</html>