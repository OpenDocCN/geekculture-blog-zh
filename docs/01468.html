<html>
<head>
<title>Make a Generic Angular Table. Filter, Sorting Preparation.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">制作一个通用角度表。过滤，整理准备。</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/make-a-generic-angular-table-filter-sorting-preparation-3060900e45b7?source=collection_archive---------12-----------------------#2021-04-11">https://medium.com/geekculture/make-a-generic-angular-table-filter-sorting-preparation-3060900e45b7?source=collection_archive---------12-----------------------#2021-04-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="d9ae" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">具有漂亮特征的普通桌子。</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/dbc8526ab46b6e1ef133baa71b016937.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l8oraU7ptdbKqw2r3BXNWg.png"/></div></div></figure><p id="75e6" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在<a class="ae kf" rel="noopener" href="/geekculture/make-a-generic-angular-table-represent-new-data-in-easiest-way-cd2471081941">前一部分</a>中，我们创建了一个骨架。我们的表可以处理不同类型的数据。在这一部分，我们将检查它是否是真的，我们将增加新的功能，如排序，过滤。</p><p id="e082" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">不同的数据</strong></p><p id="a290" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在我们的第二个表中，我们将显示关于元素的信息。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es kg"><img src="../Images/ec18523866624c74f0282478d5ddad3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1148/format:webp/1*IUhf-gLIUcfAIVoR17b6Yg.png"/></div></figure><h2 id="6506" class="kh ki hi bd kj kk kl km kn ko kp kq kr js ks kt ku jw kv kw kx ka ky kz la lb bi translated"><strong class="ak">新表设置</strong></h2><p id="0e66" class="pw-post-body-paragraph jj jk hi jl b jm lc ij jo jp ld im jr js le ju jv jw lf jy jz ka lg kc kd ke hb bi translated">表组件需要有新的表设置实现来表示新的数据类型。就这样。我们的表已经为新数据准备好了。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lh"><img src="../Images/e5e748c657f16ea877fd30f9794f3e20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FMUPu8NQXTweM_kQKzC_oA.png"/></div></div></figure><h2 id="6141" class="kh ki hi bd kj kk kl km kn ko kp kq kr js ks kt ku jw kv kw kx ka ky kz la lb bi translated"><strong class="ak">改进</strong></h2><p id="d2fd" class="pw-post-body-paragraph jj jk hi jl b jm lc ij jo jp ld im jr js le ju jv jw lf jy jz ka lg kc kd ke hb bi translated">现在我们需要添加过滤和排序。我觉得把表格组件一分为二会更好。第一个包含所有表逻辑。第二个将代表列逻辑。列组件有几个数据和列设置的输入。从列设置中，我们需要一个数据属性名称和列类型，以正确的方式显示正确的信息。如果将来我们需要添加新的列模板，我们将在这里添加它。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es li"><img src="../Images/18092dd7835788b065b25eb6104d2ed9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*st6lOrH6s9uuuZoLZaHK5A.png"/></div></div></figure><p id="afd6" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">排序</strong></p><p id="8ef4" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">为了支持排序，我们需要向TableColumnSettings添加两个新属性— allowSorting和sortingType。默认情况下，基表设置类将其设置为true。</p><p id="0b46" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在html中，我们需要使我们的标题可点击，以改变排序类型，并显示什么是排序。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lj"><img src="../Images/0167cd641ba602b8b342ef146e6db285.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uZZpO1y3ShtJrxfeeEtrDw.png"/></div></div></figure><p id="c6bf" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">我们不会写一个排序算法，我们只是为这个准备我们的表。单击处理程序正在设置正确的排序类型:无、升序或降序。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lk"><img src="../Images/2cb97039103359dae907b9faf8583e92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bJ2JtN2zsR6dO2l4Rppxnw.png"/></div></div></figure><p id="b011" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">过滤</strong></p><p id="ed02" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">为了支持过滤，我们必须改变很多东西。首先是模型。现在我们必须有两个模型。我们将使用第一个模型来设置列设置，第二个模型是第一个模型的变形，有一些不同之处。大多数情况下，它有一些过滤绑定设置，如过滤文本和允许过滤。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ll"><img src="../Images/b4be5fe1a5999c5730f7a1ceb4eab3f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9B5ccGNmBkMjMtv2gO-jyA.png"/></div></div></figure><p id="0599" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">Html现在有一个过滤行，该行绑定到表设置列，我们将只在用户按下enter后设置过滤。如果没有标题边距值，我们的列标题将总是在它的单元格的中间，这没问题，但当我们有一个过滤行时，中间的位置就变了。该属性将所有表格标题保持在同一可视级别上。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lm"><img src="../Images/ff3c92997bc0e7ac56714f6a42f66349.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8tdZPGMz169X11Bl7rFUwg.png"/></div></div></figure><p id="9af7" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">设置设置表</strong></p><p id="4f71" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">为了在表设置中添加过滤，我们只需要一个可选的覆盖方法getFilterColumnSettings()。在基类中，它返回null。让我们把它放在你的学生桌设置中。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ln"><img src="../Images/570db4265f7bcebdd679c63c0bfe9e63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*con797gJ84n_F-kF9YnHNQ.png"/></div></div></figure><p id="4fce" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在上图的右边，我们可以看到几个菜单，让用户可以选择过滤。我认为大多数用户只需要三个过滤器选项:字符串的包含、开始于、结束于，数字和日期的等于、小于、大于，这些选项都在短列表中。</p><p id="0beb" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">列生成器更改</strong></p><p id="a5af" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">因为我们在列设置模型中添加了新的属性，所以我们需要更改类列生成器。首先，我们现在使用地图类，这个类帮助我们找到重复，并防止复制粘贴错误。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lo"><img src="../Images/9cdd2fb762be76cad57821db0208de7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Tsmyw3NUm6hxZLx7kaNT0w.png"/></div></div></figure><p id="ea02" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在这之后，我们只需添加过滤和排序设置。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lp"><img src="../Images/dab36398c4d5f91e78f468776229def0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bWtDxR65A7L4LfbIxveRYg.png"/></div></div></figure><p id="25c3" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">结果</strong></p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lq"><img src="../Images/0cf79f6b9af904631fd00140d683c9da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Cahi35gt8TIRvNdkhj1Sjg.png"/></div></div></figure><p id="cf9a" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">现在我们的桌子已经准备好了，看起来很漂亮。如果你需要仔细看看<a class="ae kf" href="https://github.com/8Tesla8/table-settings-helper" rel="noopener ugc nofollow" target="_blank">项目，这里有链接。</a>最后一步是将逻辑用于排序和过滤。这可能是你的作业。你可以很容易地把任何逻辑放在表格组件之外，我们有事件发射器。</p></div><div class="ab cl lr ls gp lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="hb hc hd he hf"><p id="6d89" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><em class="ly">原载于2021年4月11日</em><a class="ae kf" href="https://tomorrowmeannever.wordpress.com/2021/04/11/make-a-generic-angular-table-filter-sorting-preparation/" rel="noopener ugc nofollow" target="_blank"><em class="ly">http://tomorrowmeannever.wordpress.com</em></a><em class="ly">。</em></p></div></div>    
</body>
</html>