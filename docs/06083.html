<html>
<head>
<title>How to use Review API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用审核API</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/how-to-use-review-api-abc3cb0ccd67?source=collection_archive---------17-----------------------#2021-08-05">https://medium.com/geekculture/how-to-use-review-api-abc3cb0ccd67?source=collection_archive---------17-----------------------#2021-08-05</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="81c9" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">在没有网络抓取的情况下提取关于Zara和Shein的评论</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/8632f5347a7c73a0d91b03cd0b3397ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*rgGd3fmQppDQJRmD"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Photo by <a class="ae jn" href="https://unsplash.com/@priscilladupreez?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Priscilla Du Preez</a> on <a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="ddfa" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我想学的一件事是如何进行网络搜集。当我试图弄清楚这一点时，我发现了一个可以做我想做的事情的工具:<a class="ae jn" href="https://app.reviewapi.io/documentation" rel="noopener ugc nofollow" target="_blank"> Review API </a>。在我看来，如果你还在学习web抓取和regex，知道如何从Review API中提取数据是一个很好的敲门砖。免费版只能让你提取30篇评论，但它仍然是一个很好的学习工具。</p><p id="b25b" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">对于这个项目，我想比较关于两个流行时尚公司的评论:Zara和Shein。它们在定价、产品质量、营销和客户细分方面有所不同。这个项目的目标是了解他们的客户如何评价他们的差异。</p><p id="74e1" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">Review API提供的文档非常有用；它向您展示了如何通过浏览器、CURL、Python、Node.js和PHP请求评论。我将回顾一下我是如何使用Python做到这一点的。</p><p id="e4ad" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">Review API支持几个平台，您可以从中提取数据，但是由于我只对关于公司的评论感兴趣，我将展示我是如何从sitejabber和Consumer Affairs中提取数据的。</p></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><p id="b17b" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><a class="ae jn" href="https://www.sitejabber.com/reviews/zara.com" rel="noopener ugc nofollow" target="_blank">这个</a>是Zara的sitejabber页面，我就是这样提取了30条评论的:</p><pre class="iy iz ja jb fd kr ks kt ku aw kv bi"><span id="af4d" class="kw kx hi ks b fi ky kz l la lb">import requests<br/>import re<br/>import pandas as pd</span><span id="ef13" class="kw kx hi ks b fi lc kz l la lb">headers = { <br/>  "apikey": "ENTER_YOUR_API_KEY_HERE"}</span><span id="3804" class="kw kx hi ks b fi lc kz l la lb">params = (<br/>   ("url","<a class="ae jn" href="https://www.sitejabber.com/reviews/zara.com" rel="noopener ugc nofollow" target="_blank">https://www.sitejabber.com/reviews/zara.com</a>"),<br/>   ("amount","30"),<br/>);</span><span id="a24f" class="kw kx hi ks b fi lc kz l la lb">response = requests.get('<a class="ae jn" href="https://app.reviewapi.io/api/v1/reviews'" rel="noopener ugc nofollow" target="_blank">https://app.reviewapi.io/api/v1/reviews'</a>, headers=headers, params=params);</span><span id="6e48" class="kw kx hi ks b fi lc kz l la lb">#view response<br/>print(response.text)</span></pre><p id="e634" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">响应给你一个很大的字符串文本，但我想创建一个数据表，其中包含:用户名，日期，评级和审查。现在我们必须使用一些正则表达式来提取我们想要的东西。</p><p id="f104" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">下面是输出的一个片段:</p><pre class="iy iz ja jb fd kr ks kt ku aw kv bi"><span id="b034" class="kw kx hi ks b fi ky kz l la lb">{"query":{"url":"https:\/\/www.sitejabber.com\/reviews\/zara.com","amount":"30"},"reviews":[{"platform":"sitejabber.com","rating":1,"user_name":"JenniferG.","text":"It is disappointing that Zara's customer service policies are so poor. 30 minutes to wait in line to make a purchase or return is unreasonable. And, now that we're transitioning from the pandemic, the dressing rooms are still not open. And, if you buy something online, you cannot return it to a store. Terrible!ServiceValueShippingReturnsQuality","title":"TERRIBLE CUSTOMER SERVICE","timestamp":"2021-08-02","platform_specific":{"user_review_count":"1","user_image_url":"https:\/\/static.sitejabber.com\/img\/stock_photos\/200\/thumbnail_small.1476463632.jpg","user_helpful_vote":"1"}}</span></pre><p id="7c3c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">经过一些反复试验，我终于能够弄清楚如何获得我感兴趣的变量:</p><pre class="iy iz ja jb fd kr ks kt ku aw kv bi"><span id="e0b2" class="kw kx hi ks b fi ky kz l la lb">#make empty dataframe<br/>zara_rev = pd.DataFrame(columns=['Username', 'Date', 'Rating', 'Text'])</span><span id="dad2" class="kw kx hi ks b fi lc kz l la lb">#extract data for each column<br/>zara_rev['Username'] = re.findall(r'(?&lt;=\"user_name\"\:.)(\w*)', response.text)<br/>zara_rev['Date'] = re.findall(r'(?&lt;=\"timestamp\"\:.).[0-9]*\-[0-9]*\-[0-9]*(?=\"\,\"platform_specific\")', response.text)<br/>zara_rev['Rating'] = re.findall(r'(?&lt;=\"rating\"\:)(\d)*', response.text)<br/>zara_rev['Text'] = re.findall(r'(?&lt;=\"text\"\:.).*?(?=\"\,\"title\")',response.text)</span></pre><p id="60f2" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">当涉及到regex时，我学会了非常具体地指定我想要提取的位置(否则我最终会得到一个数据点)。根据你的反应，你可能需要做一些改变。</p><p id="62f1" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">现在，您的数据集应该如下所示:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ld"><img src="../Images/50cabe5463adc3a852bec4817fc1e1d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vqoR9BUfAV-Ndw_hvjOLNQ.png"/></div></div></figure><p id="cd28" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">就是这样！超级简单对吧？为Shein做同样的事。(注:Shein没有消费者事务页面，所以我只有这家公司的sitejabber数据。)</p></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><p id="4763" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这是我制作的一张展示Zara和Shein评分分布的图表:</p><div class="iy iz ja jb fd ab cb"><figure class="le jc lf lg lh li lj paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><img src="../Images/7ec56d673c0d12d667be43ef6dc567bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*xiPtfOaoB1nYn4R_DHHjRg.jpeg"/></div></figure><figure class="le jc lf lg lh li lj paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><img src="../Images/17bf15fccae048075c6dd964d1110185.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*nNUkmXSqkOkPVDFTMHUMyg.jpeg"/></div><figcaption class="jj jk et er es jl jm bd b be z dx lk di ll lm">So many 1-star ratings from both of them! Why is that?</figcaption></figure></div><p id="082f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">许多消费者使用sitejabber和Consumer Affairs等网站来分享对公司产品或客户服务的糟糕体验。以下是一些一星评价:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ln"><img src="../Images/a07673a5e0d22d2a2e0831942e63f801.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qEPGXZndoGSoPO_7iiSr3Q.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Some reviews about Shein (left) and Zara (right)</figcaption></figure><p id="a81f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这很有趣，因为我会从在这些商店购物的朋友那里听到这些观点。许多顾客抱怨Shein的尺码问题，并且没有得到退款。许多Zara评论者抱怨糟糕的客户服务体验。</p></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><p id="b7cd" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">公司评论是了解客户对你的产品和客户服务评价的好方法。客户评论可以帮助公司找到他们可以改进的地方！</p><p id="509b" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果你想更深入地分析你的文本，可以参考我的另一篇文章:<a class="ae jn" href="https://towardsdatascience.com/analyzing-disneyland-reviews-b916b6dcccf4" rel="noopener" target="_blank">关于迪斯尼乐园评论的NLP</a>。</p><p id="1182" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果你刚刚开始学习如何使用正则表达式或者正在学习如何抓取网页，我希望这篇文章能帮助你。</p></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><p id="ab61" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">来源:</p><div class="lo lp ez fb lq lr"><a href="https://www.sitejabber.com/reviews/zara.com" rel="noopener  ugc nofollow" target="_blank"><div class="ls ab dw"><div class="lt ab lu cl cj lv"><h2 class="bd hj fi z dy lw ea eb lx ed ef hh bi translated">Zara评论- 2.3星</h2><div class="ly l"><h3 class="bd b fi z dy lw ea eb lx ed ef dx translated">Zara的1070条评论，2.3星:“我不明白为什么有这么多差评。我绝对喜欢Zara的…</h3></div><div class="lz l"><p class="bd b fp z dy lw ea eb lx ed ef dx translated">www.sitejabber.com</p></div></div><div class="ma l"><div class="mb l mc md me ma mf jh lr"/></div></div></a></div><div class="lo lp ez fb lq lr"><a href="https://www.sitejabber.com/reviews/shein.com" rel="noopener  ugc nofollow" target="_blank"><div class="ls ab dw"><div class="lt ab lu cl cj lv"><h2 class="bd hj fi z dy lw ea eb lx ed ef hh bi translated">SHEIN评论- 2.9星</h2><div class="ly l"><h3 class="bd b fi z dy lw ea eb lx ed ef dx translated">SHEIN的3547条评论，2.9颗星:“迄今为止史上最差网站”。2020年4月23日下单。据称已装运…</h3></div><div class="lz l"><p class="bd b fp z dy lw ea eb lx ed ef dx translated">www.sitejabber.com</p></div></div><div class="ma l"><div class="mg l mc md me ma mf jh lr"/></div></div></a></div><div class="lo lp ez fb lq lr"><a href="https://www.consumeraffairs.com/online/zara.html?#reviews" rel="noopener  ugc nofollow" target="_blank"><div class="ls ab dw"><div class="lt ab lu cl cj lv"><h2 class="bd hj fi z dy lw ea eb lx ed ef hh bi translated">西班牙一品牌</h2><div class="ly l"><h3 class="bd b fi z dy lw ea eb lx ed ef dx translated">ConsumerAffairs不是政府机构。显示的公司可能会向我们支付授权费，或者当您点击链接时…</h3></div><div class="lz l"><p class="bd b fp z dy lw ea eb lx ed ef dx translated">www.consumeraffairs.com</p></div></div></div></a></div><div class="lo lp ez fb lq lr"><a href="https://regex101.com/" rel="noopener  ugc nofollow" target="_blank"><div class="ls ab dw"><div class="lt ab lu cl cj lv"><h2 class="bd hj fi z dy lw ea eb lx ed ef hh bi translated">regex101:构建、测试和调试regex</h2><div class="ly l"><h3 class="bd b fi z dy lw ea eb lx ed ef dx translated">正则表达式测试器，语法高亮，解释，PHP/PCRE，Python，GO，JavaScript的备忘单…</h3></div><div class="lz l"><p class="bd b fp z dy lw ea eb lx ed ef dx translated">regex101.com</p></div></div><div class="ma l"><div class="mh l mc md me ma mf jh lr"/></div></div></a></div></div></div>    
</body>
</html>