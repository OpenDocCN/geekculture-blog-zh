# 释放软件产品的架构可伸缩性

> 原文：<https://medium.com/geekculture/unlocking-the-architectural-scalability-of-software-products-1798d3905059?source=collection_archive---------26----------------------->

![](img/d5a2724247067509c57da701b93257c7.png)

在我之前的[帖子](https://marinastojanovski.medium.com/is-your-digital-product-ready-to-grow-e2b2c13f55ad)中，我讨论了实现可持续产品增长的关键要素:*产品战略*、*产品团队治理*、*产品开发流程*和*技术*。这篇博客文章关注的是最后一个组成部分——技术，以及如何实现一个可扩展的技术架构来实现产品增长。

# 可扩展的技术架构与业务一起成长

在技术领域，架构指的是在构建产品时做出的难以逆转的技术决策。选择一项技术或定义软件产品的高级构建块就是这种决策的例子。这就像设计一栋房子，并决定墙壁材料或房子的主要布局。

*可扩展的软件架构不仅能满足我们当前的需求，还能长期支持我们的业务。*

为了理解可伸缩架构的重要性，让我们举一个例子。想象一下，我们已经开发了一个新产品，但目前只有很小的客户群。产品越来越受欢迎，我们的客户需求也越来越多。这种需求伴随着一种责任:我们需要用新的特性快速扩展产品，或者增强现有的特性。为了支持这些变化，拥有一个可伸缩的技术架构是至关重要的。如果没有适当的可伸缩性，系统中的每一个改变都将是非常昂贵的，并且我们很容易陷入这样一种境地，即完全重建产品是唯一的出路。

在某个时候，我们的客户群增长了 10 倍。访问系统的用户数量同时增加。如果没有一个可伸缩的架构，我们产品的性能会随着负载的增加而下降。最终用户将面临缓慢的系统响应或系统故障。仅仅增加更多的 CPU 能力很少是一个好的解决方案。云迁移方法将有助于基础设施的扩展，但如果软件在设计时没有考虑到可扩展性，就无法享受云的优势，许可成本也会变得不必要的高。重新设计(甚至重建)这个系统是一个前进的方向，但这是一个繁琐而昂贵的解决方案。

# **拥有不可扩展架构的一些症状是什么**

虽然拥有一个不可伸缩的架构的负面影响将在长期内显现出来，但是有一些迹象表明我们正面临拥有一个不可伸缩的架构的风险。

*   我们正在构建的产品没有(或者模糊定义的)非功能性需求。
*   我们不知道在产品实现过程中，非功能性需求得到了多大程度的满足。
*   我们不知道该产品在生产中使用了多少。
*   我们对当前实现的架构知之甚少。
*   添加新产品功能比预期的要复杂得多。
*   当系统负载增加时，会报告性能下降。

# **在敏捷世界中构建可扩展架构**

人们期望在产品开发的早期就做出正确的架构决策，因为逆转这些决策的成本会非常高。然而，这可能与当今世界相矛盾，在当今世界中，一切都是敏捷的，未来具有高度的不可预测性。

根据 Gartner(*From Fragile to Agile Software Architecture，2019* )的说法，现代敏捷软件开发方法对架构设计几乎没有提供指导。结果，团队只能在敏捷项目中应用传统的架构实践，这在实践中并不好用。

我们需要明白的是，伟大的架构不是一夜之间或一蹴而就的。架构是一个渐进的过程，需要迭代、反馈和调整。像优步或 Spotify 这样的组织以其灵活的微服务架构模型而闻名。然而，这些架构不是预先设计的。

> 我们认为发展微服务架构更像是“修剪树篱”，以便它最终正确增长，而不是自上而下或一次性的架构(或重新架构)工作。这是一个动态的渐进过程。”——[亚当·格鲁克，优步工程公司。](https://eng.uber.com/author/gluckuber-com/)

# 构建灵活且可扩展的架构的最佳实践

以下是一些关于如何在敏捷世界中构建可伸缩架构的基本实践。

**1。在考虑业务目标的情况下定义架构原则。**

架构始于对业务目标的良好理解。谁是最终客户，他们有什么期望？有多少用户会使用该系统？我们预计这个数字在未来会扩大吗？我们是否会遇到访问系统的请求数量过多的高峰期？系统故障会对业务产生什么影响？跟踪历史客户数据是必要的吗？系统处理机密数据吗？

业务目标驱动架构原则、关键质量规则和实现应该遵循的指导原则的定义。例如，可用性、易用性、数据安全性、性能效率可能是其中的一部分。这些方面不仅应该在纸上定义，而且应该嵌入到产品组织中。设计一个需要在 99.999%的时间内完全正常运行的系统与一个一小时的停机时间不会对任何人产生重大影响的系统是不同的。

**2。仅定义一个*高层次的*初始架构模型。**

下一步是开发一个初始的高层架构模型。我们从定义关键业务功能和反映这些功能的技术架构布局开始。我们定义关键的高层组件，以及组件之间的数据流动方式。设计架构布局时应该牢记架构原则。如果高可用性是一个架构原则，那么添加一个所有其他组件都依赖的组件可能不是一个好的决定。

定义最初的体系结构模型是由架构师领导的一项技术远景实践。他们设定愿景，并假设在实施过程中会遵循该愿景。在开始阶段过于详细可能是危险的。最初的架构模型应该保持简单。过度思考会导致不必要的时间浪费，更严重的是，会将实现推向后来可能被证明是错误决策的方向。

**3。以模块化的方式构建软件。**

模块化是我想强调的架构设计原则之一，因为这是一个几乎总是适用的一般原则。模块化架构使产品的维护更容易，并降低了引入缺陷的风险。因此，它与维护费用直接相关。

模块化架构意味着软件是由小的、松散耦合的组件构建的。模块化原则应该从顶层(高层组件)到最小单元(方法或过程)遵循。模块化架构意味着系统被很好地构造成更小的组件，这些组件之间的依赖性最小，并且每个组件在内部被进一步很好地构造。使用模块化架构，每个模块都可以重用或替换，同时对系统的其余部分造成最小的影响。

请注意，模块化架构并不一定意味着基于服务的架构。服务可以增加巨大的价值，但要在正确的时间以正确的方式引入。当过早引入时(例如，当产品和开发团队仍然很小的时候)，细粒度的面向服务的架构可能引入不必要的复杂性。然而，仍然推荐模块化架构。当一个单体以模块化的方式构建时，它的维护更容易，并且在某个时间点，它的模块可以很容易地被分离为(微)服务。

**5。嵌入非功能测试**

非功能性需求是与系统的任何功能都不相关的系统需求。相反，它们指的是系统质量，并且应该与架构原则相关联。虽然架构原则是高层次的指导方针，但是非功能性需求是具体的，并且是理想的——可度量的需求。例如，如果高性能是一个原则，一个非功能性需求可能被定义为“每个页面的最大响应时间是 2 秒”或者“外部服务应该在 1 秒内响应”。

为了确保实现满足非功能需求，非功能测试应该集成到开发生命周期中。这就是为什么非功能性需求应该尽可能的具体和可测量，以便在系统到达最终用户之前，可以在测试期间发现实现的异常。例如，如果我们测试页面响应需求，那么应该实现模拟实际负载下系统行为的测试场景。非功能性测试应该尽可能以自动化的方式完成。

**6。观察架构的演变。**

架构是由架构师设定的产品的技术远景，应该由软件开发团队来实现。然而在实践中，设想的架构很少与实际实现的架构一致。

为了最小化这个差距，建议定期观察架构的发展。最好是使用提供架构可视化的工具，将源代码作为输入(例如[代码图](https://docs.microsoft.com/en-us/visualstudio/modeling/map-dependencies-across-your-solutions?view=vs-2019)、 [Sigrid](https://www.softwareimprovementgroup.com/solutions/sigrid-software-assurance-platform/) 、[结构 101](https://structure101.com/) )。好处是双重的:生成架构可视化，不需要手动输入数据；重要的是，观想代表了“实际”的实现。任何其他的视觉化仅仅是我们期望建筑是什么样子的一个心理模型。

然而，这些工具都有局限性。今天的系统是使用不同的技术构建的。如果系统是使用不同的技术构建的，其中以不同技术构建的组件相互通信，那么全自动架构可视化工具很少能够正确地捕获架构。

从组织的角度来看，在架构师和开发团队之间建立一个紧密结合的治理是至关重要的。开发人员是那些处理具体实际问题的人。他们需要对架构愿景有很好的理解，并给出他们在实践中可行或不可行的反馈。

7 .**。定期重新访问架构。**

随着时间的推移，业务目标可能会改变，团队规模和结构也可能会改变。因此，有必要定期修订我们制定的架构和指导方针，并在必要时进行调整。例如，如果随着时间的推移，我们观察到一个组件的大小不断增长，这是一个好主意，重新思考设计。我们可能会发现，这个功能的一部分可以很好地隔离在一个单独的组件中。这种思维方式可以在系统架构层面上实现(在这一层面上，可以在每次 sprint 回顾时进行讨论)，也可以在更高的企业架构层面上实现(在这一层面上，这样的回顾可以在几个月内完成一次)。

可能会发生这样的情况，我们从头脑中的一个设想的架构开始，然后过渡到一个完全不同的架构。然而，这种转变应该是渐进的，应该是自然发展的。我们的角色是不断观察这种演变，并在必要时进行调整，同时设定适当的规则或原则来驯服复杂性并使其易于管理。

这篇博客是如何实现可持续数字产品增长系列的最后一篇。这是本系列所有文章的索引:

[#1。您的数字产品准备好成长了吗](https://marinastojanovski.medium.com/is-your-digital-product-ready-to-grow-e2b2c13f55ad)

[#2。什么是有效的产品策略](https://marinastojanovski.medium.com/what-is-an-effective-product-strategy-4c4fe27ee0ee)

[#3。为成功建立产品开发团队](https://marinastojanovski.medium.com/set-up-a-product-development-team-for-success-5de260e8fbfd)

[#4。如何消除软件开发中的浪费](https://marinastojanovski.medium.com/how-to-remove-waste-in-software-development-4660461c0f01)

[#5。释放软件产品的架构可伸缩性](https://marinastojanovski.medium.com/unlocking-the-architectural-scalability-of-software-products-1798d3905059)