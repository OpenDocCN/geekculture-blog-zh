<html>
<head>
<title>How to Convert Strings to Booleans in Ruby</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Ruby中将字符串转换成布尔值</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/how-to-convert-strings-to-booleans-in-ruby-f17abb2f0a7b?source=collection_archive---------15-----------------------#2021-05-27">https://medium.com/geekculture/how-to-convert-strings-to-booleans-in-ruby-f17abb2f0a7b?source=collection_archive---------15-----------------------#2021-05-27</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/d39e57b12c74395e3cf33519a965e671.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*T9bDzl23G_LLrmau"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Photo by <a class="ae iu" href="https://unsplash.com/@yer_a_wizard?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Fleur</a> on <a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="097d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在最近的一个项目中，我发现了一个作用于API响应的保护条款。我的应用程序根据API返回的值是真还是假向用户返回了一条特定的消息。不管这个API是不稳定的，还是之前的开发者太过谨慎，我发现在我们检查的属性的末尾附加了一个“to_b”。虽然我以前使用过“to_b ”,但我从未深入了解过它的内部工作原理，并且很想了解更多。</p><p id="139d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">与第三方API交互的最大挑战之一是让您的逻辑和API的响应相匹配。API响应从许多不同类型的数据库中提取，这些数据库存储不同的可能值，用于判断真假。当一个API发送一个带有布尔值的响应对象时，我们要问的是true一个字符串“true”，一个1或者甚至只是一个布尔值true？因为这是一个常见的问题，Ruby提供了“to_b”字符串方法。</p><p id="edb7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">什么是to_b法？</strong></p><p id="a9fd" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">“to_b”方法是一种特定于字符串的方法，Ruby使用它来将对象评估为布尔值。这个方法的价值令人难以置信，因为它可以添加到任何字符串，以确定值是真还是假。这对于JSON响应尤其有价值，因为JSON对象中的所有值都是字符串。</p><p id="566b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">要理解这个方法的响应，必须知道“string.to_b”有三种可能的响应:真、假、nil。</p><p id="69b9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们先来看看产生nil的字符串。如果对“nil”或“null”调用“to_b ”,将返回nil。Ruby不使用“null ”,那么它为什么要产生“nil”的响应呢？这是一个很好的观点，虽然Ruby不使用“null ”,但是JavaScript使用，所以它将返回一个缺少赋值的“null ”,然后可以转换为“nil ”,以便在Ruby中使用。</p><p id="b96a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">“to_b”的下一个可能结果为真。True在编程中可以表示为很多东西，但是只有某些字符串“to_b”会转换为布尔值true。它们是:</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div class="er es jt"><img src="../Images/fb4b4ff0a01bd2558a4035cde0349a08.png" data-original-src="https://miro.medium.com/v2/resize:fit:534/format:webp/1*vkZYotoZpQ50vKGAQBsKsA.png"/></div><figcaption class="iq ir et er es is it bd b be z dx">Figure 1. All strings that will evaluate to true</figcaption></figure><p id="e07d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">“to_b”的最终可能返回值包含所有其他字符串。除了上面列出的字符串之外，对任何其他字符串调用“to_b”都将返回值“false”。如果我们用“to_b”运行以下任何字符串，我们将总是得到false:</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div class="er es jy"><img src="../Images/838af9c5c2b1ca31dd12e5ae50f2218d.png" data-original-src="https://miro.medium.com/v2/resize:fit:796/format:webp/1*xB183MqmCqZN21e1f646Xg.png"/></div><figcaption class="iq ir et er es is it bd b be z dx">Figure 2. Some of the many strings that evaluate to false</figcaption></figure><p id="b4c6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">结论</strong></p><p id="0dcd" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，您对“to_b”字符串方法有了更多的了解，希望您能够更好地集成来自API响应的逻辑。请在评论中告诉我你将如何使用“to_b”来重构你现有的代码，或者提高未来项目的弹性！</p><p id="bc1b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">注意事项</strong></p><p id="4932" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae iu" href="https://www.rubydoc.info/github/rubyworks/facets/String:to_b" rel="noopener ugc nofollow" target="_blank">https://www . ruby doc . info/github/ruby works/facets/String:to _ b</a></p></div></div>    
</body>
</html>