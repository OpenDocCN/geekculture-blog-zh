<html>
<head>
<title>Java Unit Tests make easy — Random Values with PODAM</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Java单元测试变得简单——使用PODAM的随机值</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/java-unit-tests-make-easy-random-values-with-podam-2b1de8a56958?source=collection_archive---------0-----------------------#2020-12-14">https://medium.com/geekculture/java-unit-tests-make-easy-random-values-with-podam-2b1de8a56958?source=collection_archive---------0-----------------------#2020-12-14</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="c57e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这篇文章中，我们讨论了如何使用PODAM库为我们在Junit测试中使用的对象、集合生成随机值。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/45992458ed20244c4945379606674224.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*o_W90JMhxMSYhOxN.png"/></div></div></figure><p id="bf14" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi jp translated"><span class="l jq jr js bm jt ju jv jw jx di"> W </span>当我们为函数编写单元测试用例时，让开发人员头疼的一件事就是向我们的对象、集合等填充模拟数据。</p><p id="7e43" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">例如，让我们看看从一个函数中获取一个对象的测试用例是什么。</p><p id="3e20" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">请看下面的代码片段。在这个对象中也包含子对象列表。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="jy jz l"/></div></figure><p id="2895" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这个代码片段中，我们可以看到许多硬编码数据，我们必须使用这些数据向对象填充值。</p><p id="1847" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们看看我们能为这件事做些什么…</p><p id="12e8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="ka">有什么好办法吗？？</em> </strong></p><p id="15b3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">是的，我们有<strong class="ih hj"> PODAM </strong>。</p><h1 id="70b2" class="kb kc hi bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">什么是PODAM？</h1><p id="cc73" class="pw-post-body-paragraph if ig hi ih b ii kz ik il im la io ip iq lb is it iu lc iw ix iy ld ja jb jc hb bi translated">PODAM是一个用数据自动填充Java POJOs的轻量级工具。这在开发单元测试时很方便。多亏了PODAM，用户现在有了一个可以完成所有工作的命令行程序。</p><h1 id="fab9" class="kb kc hi bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">PODAM有哪些特点:</h1><ul class=""><li id="23c1" class="lf lg hi ih b ii kz im la iq lh iu li iy lj jc lk ll lm ln bi translated">自动检查POJOs，用随机数据填充所有可能的属性。您可以自定义这种行为。</li><li id="5f31" class="lf lg hi ih b ii lo im lp iq lq iu lr iy ls jc lk ll lm ln bi translated">基于名称或注释定制数据策略、字段排除的扩展点</li><li id="089d" class="lf lg hi ih b ii lo im lp iq lq iu lr iy ls jc lk ll lm ln bi translated">支持您的自定义注释，以提供数据或排除字段</li><li id="70aa" class="lf lg hi ih b ii lo im lp iq lq iu lr iy ls jc lk ll lm ln bi translated">选择最小构造函数(对于轻量级POJOs)或完整构造函数的选项</li><li id="c5ca" class="lf lg hi ih b ii lo im lp iq lq iu lr iy ls jc lk ll lm ln bi translated">以及对Java类型、枚举、数组、集合(列表、集合、映射)的支持</li><li id="2d14" class="lf lg hi ih b ii lo im lp iq lq iu lr iy ls jc lk ll lm ln bi translated">也支持泛型</li><li id="e510" class="lf lg hi ih b ii lo im lp iq lq iu lr iy ls jc lk ll lm ln bi translated">当PODAM无法自省足够的信息来生成类型时，为您的工厂提供支持(例如XMLGregorianCalendar)</li><li id="d03b" class="lf lg hi ih b ii lo im lp iq lq iu lr iy ls jc lk ll lm ln bi translated">当典型的生命周期结束时，支持任意方法执行</li></ul><h1 id="0288" class="kb kc hi bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">在Spring boot应用程序中使用PODAM</h1><p id="26fd" class="pw-post-body-paragraph if ig hi ih b ii kz ik il im la io ip iq lb is it iu lc iw ix iy ld ja jb jc hb bi translated">我们必须向spring boot项目添加podam依赖项。</p><p id="183a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">请使用最新版本。当我写这篇文章的时候，最新的版本是7 . 2 . 5 . release<a class="ae le" href="https://mvnrepository.com/artifact/uk.co.jemos.podam/podam/7.2.5.RELEASE" rel="noopener ugc nofollow" target="_blank">T13T15】</a></p><p id="cabc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">给Maven的</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="jy jz l"/></div></figure><p id="ba94" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了格雷尔</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="jy jz l"/></div></figure><p id="81d3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们将使用Podam重构上面提到的代码。</p><h2 id="7a62" class="lt kc hi bd kd lu lv lw kh lx ly lz kl iq ma mb kp iu mc md kt iy me mf kx mg bi translated">Pojo使用podom</h2><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="jy jz l"/></div></figure><p id="7908" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你能相信吗？46行代码我们减少到不到10行。让我们看看那里发生了什么。我们来分解一下。</p><p id="fe69" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，我们实现PodamFactory实例。</p><p id="1cad" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du mh mi mj mk b">PodamFactory factory = new PodamFactoryImpl();</code></p><p id="405b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后使用上面的PodamFactory，我们可以创建一个带有值的对象。</p><p id="9a33" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du mh mi mj mk b">AuthorDoc authorDoc = factory.manufacturePojo(AuthorDoc.class);</code></p><p id="2d8b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果我们对此进行调试，我们可以看到分配给对象的值，如下所示</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ml"><img src="../Images/1e56779ef77f67158ca9ef573c7413a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*BLCmoG61R6WDXoZ1.png"/></div></div><figcaption class="mm mn et er es mo mp bd b be z dx">Values inside object assign from Podam</figcaption></figure><p id="5ad0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们看更多的例子</p><h2 id="fc9a" class="lt kc hi bd kd lu lv lw kh lx ly lz kl iq ma mb kp iu mc md kt iy me mf kx mg bi translated">使用podom列出(字符串)</h2><p id="0ed0" class="pw-post-body-paragraph if ig hi ih b ii kz ik il im la io ip iq lb is it iu lc iw ix iy ld ja jb jc hb bi translated">让我们看看如何使用Podam构建一个字符串列表。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="jy jz l"/></div></figure><h2 id="5870" class="lt kc hi bd kd lu lv lw kh lx ly lz kl iq ma mb kp iu mc md kt iy me mf kx mg bi translated">使用podom的List (Pojo)</h2><p id="951b" class="pw-post-body-paragraph if ig hi ih b ii kz ik il im la io ip iq lb is it iu lc iw ix iy ld ja jb jc hb bi translated">如果我们需要用列表对象测试一些功能，这是一个巨大的痛苦。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="jy jz l"/></div></figure><p id="9e9d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们看看如何使用podam来使用魔法位置。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="jy jz l"/></div></figure><p id="c21d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们节省了多少代码行？？？</p><h2 id="b495" class="lt kc hi bd kd lu lv lw kh lx ly lz kl iq ma mb kp iu mc md kt iy me mf kx mg bi translated">使用podom映射(String，Pojo)</h2><p id="657f" class="pw-post-body-paragraph if ig hi ih b ii kz ik il im la io ip iq lb is it iu lc iw ix iy ld ja jb jc hb bi translated">与上面的例子一样，我们可以使用podam快速构建一个日期图。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="jy jz l"/></div></figure><h2 id="df9e" class="lt kc hi bd kd lu lv lw kh lx ly lz kl iq ma mb kp iu mc md kt iy me mf kx mg bi translated">定义属性级策略</h2><p id="4b19" class="pw-post-body-paragraph if ig hi ih b ii kz ik il im la io ip iq lb is it iu lc iw ix iy ld ja jb jc hb bi translated">到目前为止，我们看到podam将样本值分配给POJO属性。如果有验证会发生什么。例如，如果它是一个电子邮件字段，我们必须给出一个准确的电子邮件地址。</p><p id="6c13" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为此，我们可以在属性级别使用数据策略</p><p id="8ce8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们创建一个EmailStrategy类</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="jy jz l"/></div></figure><p id="dfce" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以用两种方式来使用它，</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="jy jz l"/></div></figure><p id="5e8a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.创建PadomFactory时的配置策略。然后，它将自动分配POJO级别验证</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="jy jz l"/></div></figure><h2 id="a993" class="lt kc hi bd kd lu lv lw kh lx ly lz kl iq ma mb kp iu mc md kt iy me mf kx mg bi translated">限制集合大小。</h2><p id="b337" class="pw-post-body-paragraph if ig hi ih b ii kz ik il im la io ip iq lb is it iu lc iw ix iy ld ja jb jc hb bi translated">在前面的例子中，我们在author对象中有一个图书列表。让我们看看如何限制这个列表的大小。为此，我们可以使用@PodamCollection注释。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="jy jz l"/></div></figure><p id="c7ec" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们添加了大小为3的集合元素。因此，这将在列表上只创建3条图书属性记录。</p><p id="4979" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有关支持的注释的完整列表，请参考podam <a class="ae le" href="https://mtedone.github.io/podam/annotations.html" rel="noopener ugc nofollow" target="_blank">注释</a>页面。</p><h1 id="0a00" class="kb kc hi bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">结论</h1><p id="49ea" class="pw-post-body-paragraph if ig hi ih b ii kz ik il im la io ip iq lb is it iu lc iw ix iy ld ja jb jc hb bi translated">感谢您阅读文章《Java单元测试变得简单——使用PODAM的随机值》。</p><p id="0ef7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你可以从我们的<a class="ae le" href="https://github.com/authoronloadcode/Java-Unit-Tests-make-easy-Random-Values-with-Podam" rel="noopener ugc nofollow" target="_blank"> Github </a>找到这个教程的源代码。</p></div><div class="ab cl mq mr gp ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="hb hc hd he hf"><p id="eaec" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="ka">原载于2020年12月14日</em><a class="ae le" href="https://onloadcode.com/java-unit-tests-make-easy-random-values-with-podam/" rel="noopener ugc nofollow" target="_blank"><em class="ka"/></a><em class="ka">。</em></p></div></div>    
</body>
</html>