<html>
<head>
<title>Installing Tensorflow on Apple Silicon</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Apple Silicon上安装Tensorflow</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/installing-tensorflow-on-apple-silicon-84a28050d784?source=collection_archive---------4-----------------------#2022-10-20">https://medium.com/geekculture/installing-tensorflow-on-apple-silicon-84a28050d784?source=collection_archive---------4-----------------------#2022-10-20</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="1a07" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">虽然现在有很多关于在新的ARM驱动的Mac上安装Tensorflow的内容，但我仍然努力在Macbook Air M1上设置我的Tensorflow环境。因此，我写这篇博客是为了向您介绍一个简单的安装指南，它从来没有让我失望过，每次都可以帮助您在几分钟内设置好Tensorflow环境。所以让我们开始吧！</p><p id="a021" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">本博客的内容如下:</p><ol class=""><li id="7ad7" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">可以在苹果硅片上使用有GPU支持的TensorFlow吗？</li><li id="1118" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">在Mac上设置支持GPU的Tensorflow的要求</li><li id="c8a6" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">使用GPU支持安装TensorFlow的分步指南。</li></ol><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="er es jr"><img src="../Images/1f40185f7f8469910d4dfc0e9144217a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DcyBZprtuGJFw3qbW-D0PQ.png"/></div></div></figure><h1 id="fba0" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">苹果硅片上可以用TensorFlow GPU吗？</h1><p id="db09" class="pw-post-body-paragraph if ig hi ih b ii lb ik il im lc io ip iq ld is it iu le iw ix iy lf ja jb jc hb bi translated">早期，我不知道你可以利用苹果推出的新ARM芯片中的GPU核心。我看到了苹果官方关于在苹果新芯片驱动的Mac上安装Tensorflow GPU的指南，他们称之为<a class="ae lg" href="https://developer.apple.com/metal/tensorflow-plugin/" rel="noopener ugc nofollow" target="_blank"> TensorFlow-Metal </a>。所以是的，你可以在苹果芯片上使用带有GPU支持的TensorFlow。</p><h1 id="36b9" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">在Mac上设置支持GPU的Tensorflow的要求</h1><p id="f94f" class="pw-post-body-paragraph if ig hi ih b ii lb ik il im lc io ip iq ld is it iu le iw ix iy lf ja jb jc hb bi translated">所以安装TensorFlow-Metal的基本要求是Miniforge。您可以使用以下步骤轻松下载Miniforge:</p><ol class=""><li id="d971" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">从<a class="ae lg" href="https://github.com/conda-forge/miniforge/releases/latest/download/Miniforge3-MacOSX-arm64.sh" rel="noopener ugc nofollow" target="_blank">这里</a>下载Miniforge文件。</li><li id="213a" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">使用如下所示的命令:</li></ol><pre class="js jt ju jv fd lh li lj lk aw ll bi"><span id="ea6d" class="lm ke hi li b fi ln lo l lp lq">chmod +x ~/Downloads/Miniforge3-MacOSX-arm64.sh<br/>sh ~/Downloads/Miniforge3-MacOSX-arm64.sh<br/>source ~/miniforge3/bin/activate</span></pre><p id="6179" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果由于某种原因这不起作用，你可以参考YouTube上由<a class="ae lg" href="https://www.youtube.com/watch?v=w2qlou7n7MA" rel="noopener ugc nofollow" target="_blank">杰夫·希顿</a>博士制作的这个视频。这个视频制作精良，深入解释了在Mac M1上安装Miniforge和Anaconda的过程。一旦你安装了Miniforge，你就可以开始了。我强烈推荐看一遍这个视频。</p><h1 id="2358" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">安装TensorFlow的分步指南</h1><p id="2b53" class="pw-post-body-paragraph if ig hi ih b ii lb ik il im lc io ip iq ld is it iu le iw ix iy lf ja jb jc hb bi translated">首先创建一个新的CONDA虚拟环境并激活它。使用下面的命令来完成。</p><pre class="js jt ju jv fd lh li lj lk aw ll bi"><span id="a707" class="lm ke hi li b fi ln lo l lp lq">conda create -n tf python=3.9</span><span id="0a89" class="lm ke hi li b fi lr lo l lp lq">conda activate tf</span></pre><p id="0158" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们需要逐个安装TensorFlow-Metal包。其中包括TensorFlow-deps、TensorFlow-macOS和TensorFlow-metal。要安装这些程序，您可以运行以下命令:</p><pre class="js jt ju jv fd lh li lj lk aw ll bi"><span id="24fe" class="lm ke hi li b fi ln lo l lp lq">conda install -c apple tensorflow-deps</span><span id="70eb" class="lm ke hi li b fi lr lo l lp lq">python -m pip install tensorflow-macos==2.9</span><span id="e44b" class="lm ke hi li b fi lr lo l lp lq">python -m pip install tensorflow-metal</span></pre><p id="c464" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦完成，你就可以走了。您可以使用以下命令检查安装是否成功。当您使用<strong class="ih hj"><em class="ls">TF . config . experimental . list _ physical _ devices(' GPU ')</em></strong>命令时，应该可以看到TensorFlow版本和一个GPU设备。</p><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="er es lt"><img src="../Images/284643ea68c3a570016acbe16e355f9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OmzcND9eJXafUHe1LKkz6A.png"/></div></div><figcaption class="lu lv et er es lw lx bd b be z dx">Figure 1. Successful Installation Result</figcaption></figure><p id="21db" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是现在棘手的部分来了。许多人在这个阶段会得到一个错误，而且99%的时候，这主要是因为所需的和安装的NumPy版本不匹配。该错误可能如图2所示。问题是每个TensorFlow版本都是用特定的NumPy版本构建的。</p><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="er es ly"><img src="../Images/8f1ac4d3e7bb9382e02764a4fdac44e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CfMxnxpsM7ulmVqgX6Spag.png"/></div></div><figcaption class="lu lv et er es lw lx bd b be z dx">Figure 2. The most common error after installation is completed</figcaption></figure><p id="ff86" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">没必要担心。通过卸载NumPy并重新安装正确的版本，可以很容易地修复这个错误。</p><pre class="js jt ju jv fd lh li lj lk aw ll bi"><span id="a98e" class="lm ke hi li b fi ln lo l lp lq">conda remove numpy</span><span id="9099" class="lm ke hi li b fi lr lo l lp lq">conda install -c conda-forge numpy=x.xx</span></pre><p id="3bb7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在你的TensorFlow应该没有问题了，你终于完成了安装。使用博客前面显示的代码片段，图1，您可以确保一切正常工作。我希望这个指南能帮助你，你再也不会有安装TensorFlow的麻烦了。考虑在Medium上关注我，在<a class="ae lg" href="https://www.linkedin.com/in/yashowardhan-shinde-1636971b1/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上与我联系！</p><p id="bac9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae lg" href="https://www.analyticsvidhya.com/blog/author/yasho_191/" rel="noopener ugc nofollow" target="_blank">点击这里查看我的其他文章！</a></p></div></div>    
</body>
</html>