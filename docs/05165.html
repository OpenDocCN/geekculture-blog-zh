<html>
<head>
<title>Authentication in Rails</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Rails中的认证</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/authentication-in-rails-3a5132228847?source=collection_archive---------26-----------------------#2021-07-12">https://medium.com/geekculture/authentication-in-rails-3a5132228847?source=collection_archive---------26-----------------------#2021-07-12</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="9564" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于我的<a class="ae jd" href="https://github.com/jarvistamara/phase4-project" rel="noopener ugc nofollow" target="_blank">第4阶段项目</a>，我创建了一个图书图书馆应用程序，用户可以注册并管理他最喜欢的图书，他可以将这些图书保存到应用程序中。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/f4ed7eb5f617d72272ab433d50cbeb0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iJ0WxQ2e4eaS4loF7cv8Tg.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx">Phase 4 Flatiron Project</figcaption></figure><h1 id="e65a" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">用户模型</h1><p id="fe30" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">在用户模型中，我们希望能够验证我们的用户。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es kx"><img src="../Images/3e95a86927525548fe68141ef2d5a756.png" data-original-src="https://miro.medium.com/v2/resize:fit:1316/format:webp/1*OA4sqo_xK6IqZ6nkeTSRlg.png"/></div><figcaption class="jq jr et er es js jt bd b be z dx">Phase 4 Flatiron Project — User model</figcaption></figure><p id="113b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如您所见，我们要做的第一件事是确保我们处理好两个模型user和book之间的关联。</p><p id="01e3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此外，因为每个用户都有一个密码，我们需要确保在我们的用户模型中添加方法:<a class="ae jd" href="http://api.rubyonrails.org/classes/ActiveModel/SecurePassword/ClassMethods.html" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj"><em class="ky">has _ secure _ password</em></strong></a>，以便我们可以使用密码保护。要使用has_secure_password宏，您需要首先将gem 'bcrypt '添加到您的gem文件中。Bycrpt 将密码存储在一个散列中以保护它。</p><p id="fe57" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，我们希望使用活动记录验证来确保用户发送到服务器的信息得到验证。正如您在这里看到的，需要提供姓名、用户名和密码。您可以添加额外的或自定义的验证，就像您在上面的def password_contains_number中看到的那样。这里我要求用户注册时的密码至少包含一个数字。</p><h1 id="5139" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">会议</h1><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es kz"><img src="../Images/a35f0bf418982d8b9badc4f3e7688316.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F6az3GD8_DjQhk3VrxNS6g.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx">Phase 4 Flatiron Project — Sessions Controller</figcaption></figure><h2 id="75c8" class="la jv hi bd jw lb lc ld ka le lf lg ke iq lh li ki iu lj lk km iy ll lm kq ln bi translated">创建完全认证和验证的应用程序的最吸引人的方面之一是使用会话/cookie！</h2><p id="4781" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">在这里，您可以看到我们正在通过session[:user _ id]= user . id；将用户分配给一个会话。这是用户登录的准确时刻！</p><p id="c560" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在会话中跟踪用户使我们能够继续检查并确保用户只获得属于他们的控件的访问权。在这种情况下，我们想要显示用户的书籍。没有我们在会话中跟踪用户，用户将能够通过URL看到任何人的书。我们不希望这样。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es lo"><img src="../Images/d162ed9cc6960e33c8ead0a228e699a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oiL-dVA36h71f-knZDuIQw.png"/></div></div></figure><h1 id="dca9" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">批准</h1><p id="469a" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">正如你在上面的图片中看到的，每次我们想对一本书做些什么，无论是向用户展示他们的书还是为他们的图书馆创建一本新书，我们都必须检查并确保用户在会话中。这使我们能够确保他们只访问自己的书，而不是其他用户的书。</p></div></div>    
</body>
</html>