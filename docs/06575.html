<html>
<head>
<title>YOLOv4-darknet installation and usage on your system (Windows &amp; Linux)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">YOLOv4-darknet在您的系统上的安装和使用(Windows和Linux)</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/yolov4-darknet-installation-and-usage-on-your-system-windows-linux-8dec2cea6e81?source=collection_archive---------1-----------------------#2021-08-24">https://medium.com/geekculture/yolov4-darknet-installation-and-usage-on-your-system-windows-linux-8dec2cea6e81?source=collection_archive---------1-----------------------#2021-08-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><h1 id="2f97" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">我在YouTube上的视频！</h1><h2 id="3d4f" class="jd ig hi bd ih je jf jg il jh ji jj ip jk jl jm it jn jo jp ix jq jr js jb jt bi translated">对于Windows</h2><figure class="ju jv jw jx fd jy"><div class="bz dy l di"><div class="jz ka l"/></div></figure><h2 id="683d" class="jd ig hi bd ih je jf jg il jh ji jj ip jk jl jm it jn jo jp ix jq jr js jb jt bi translated">对于Linux</h2><figure class="ju jv jw jx fd jy"><div class="bz dy l di"><div class="jz ka l"/></div></figure></div><div class="ab cl kb kc gp kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hb hc hd he hf"><h2 id="414d" class="jd ig hi bd ih je jf jg il jh ji jj ip jk jl jm it jn jo jp ix jq jr js jb jt bi translated">内容</h2><ul class=""><li id="7aa0" class="ki kj hi kk b kl km kn ko jk kp jn kq jq kr ks kt ku kv kw bi translated"><a class="ae kx" href="#6caf" rel="noopener ugc nofollow"> <strong class="kk hj">(一)在Windows上安装</strong> </a></li><li id="b1b7" class="ki kj hi kk b kl ky kn kz jk la jn lb jq lc ks kt ku kv kw bi translated"><a class="ae kx" href="#db4e" rel="noopener ugc nofollow"><strong class="kk hj">(B)节YOLO在Windows上的用法</strong> </a></li><li id="8b2f" class="ki kj hi kk b kl ky kn kz jk la jn lb jq lc ks kt ku kv kw bi translated"><a class="ae kx" href="#a59a" rel="noopener ugc nofollow"><strong class="kk hj">(C)节在Linux上安装</strong> </a></li><li id="09d9" class="ki kj hi kk b kl ky kn kz jk la jn lb jq lc ks kt ku kv kw bi translated"><a class="ae kx" href="#569f" rel="noopener ugc nofollow"><strong class="kk hj">(D)节YOLO在Linux上的用法</strong> </a></li></ul><p id="0035" class="pw-post-body-paragraph ld le hi kk b kl lf lg lh kn li lj lk jk ll lm ln jn lo lp lq jq lr ls lt ks hb bi translated">(但首先✅Subscribe到我的YouTube频道👉🏻<a class="ae kx" href="https://bit.ly/3Ap3sdi" rel="noopener ugc nofollow" target="_blank">https://bit.ly/3Ap3sdi</a>😁😜)</p><h1 id="6caf" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">(A)在Windows上安装YOLOv4</h1><p id="0693" class="pw-post-body-paragraph ld le hi kk b kl km lg lh kn ko lj lk jk lu lm ln jn lv lp lq jq lw ls lt ks hb bi translated"><strong class="kk hj">(安装方法</strong> : <strong class="kk hj">使用</strong> <code class="du lx ly lz ma b"><strong class="kk hj">CMake</strong></code> <strong class="kk hj"> ) </strong></p><h2 id="7328" class="jd ig hi bd ih je jf jg il jh ji jj ip jk jl jm it jn jo jp ix jq jr js jb jt bi translated">步骤1)下载暗网</h2><p id="28ea" class="pw-post-body-paragraph ld le hi kk b kl km lg lh kn ko lj lk jk lu lm ln jn lv lp lq jq lw ls lt ks hb bi translated">下载Darknet zip-archive并解压缩它:<a class="ae kx" href="https://github.com/AlexeyAB/darknet/archive/master.zip" rel="noopener ugc nofollow" target="_blank"> master.zip </a></p></div><div class="ab cl kb kc gp kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hb hc hd he hf"><h2 id="740f" class="jd ig hi bd ih je jf jg il jh ji jj ip jk jl jm it jn jo jp ix jq jr js jb jt bi translated">步骤2)安装MSVC(微软Visual Studio)</h2><p id="a34c" class="pw-post-body-paragraph ld le hi kk b kl km lg lh kn ko lj lk jk lu lm ln jn lv lp lq jq lw ls lt ks hb bi translated">去MSVC:<a class="ae kx" href="https://visualstudio.microsoft.com/thank-you-downloading-visual-studio/?sku=Community" rel="noopener ugc nofollow" target="_blank">https://visual studio . Microsoft . com/thank-you-downloading-visual-studio/？sku =社区</a>。这将为您下载MSVC社区版安装程序可执行文件。运行它。选择如下所示的“<em class="mb">c++</em>桌面开发”包，点击安装。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="er es mc"><img src="../Images/e38d0f0a5d573ef315a16c492f26bd59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*YFb7x84rN-133kAU.png"/></div></div></figure></div><div class="ab cl kb kc gp kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hb hc hd he hf"><h2 id="d92b" class="jd ig hi bd ih je jf jg il jh ji jj ip jk jl jm it jn jo jp ix jq jr js jb jt bi translated">步骤3)安装CMake</h2><p id="c6de" class="pw-post-body-paragraph ld le hi kk b kl km lg lh kn ko lj lk jk lu lm ln jn lv lp lq jq lw ls lt ks hb bi translated">接下来，我们需要为Windows安装CMake GUI。(下面给出了链接)</p><p id="feb8" class="pw-post-body-paragraph ld le hi kk b kl lf lg lh kn li lj lk jk ll lm ln jn lo lp lq jq lr ls lt ks hb bi translated">CMake GUI:<code class="du lx ly lz ma b">Windows win64-x64 Installer</code>T32】https://cmake.org/download/</p><p id="9bcc" class="pw-post-body-paragraph ld le hi kk b kl lf lg lh kn li lj lk jk ll lm ln jn lo lp lq jq lr ls lt ks hb bi translated">为您的系统选择安装程序。我用的是Windows (64位)。下载安装程序，运行并安装它。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="er es mc"><img src="../Images/e0c3679f17cf3e71b556694e0b796a0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*mcM4_h7F9yHImK7V.png"/></div></div></figure></div><div class="ab cl kb kc gp kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hb hc hd he hf"><h2 id="4920" class="jd ig hi bd ih je jf jg il jh ji jj ip jk jl jm it jn jo jp ix jq jr js jb jt bi translated">步骤4)在您的系统上安装CUDA、cuDNN和OpenCV。</h2><p id="9add" class="pw-post-body-paragraph ld le hi kk b kl km lg lh kn ko lj lk jk lu lm ln jn lv lp lq jq lw ls lt ks hb bi translated"><strong class="kk hj">注意:</strong>在运行CMake GUI之前，我们需要在我们的系统上安装CUDA、cuDNN和OpenCV。我们希望在我们的系统上安装和配置CUDA、cuDNN &amp; OpenCV，以便darknet可执行文件能够与GPU一起工作。</p><p id="2912" class="pw-post-body-paragraph ld le hi kk b kl lf lg lh kn li lj lk jk ll lm ln jn lo lp lq jq lr ls lt ks hb bi translated"><strong class="kk hj">参考</strong> <a class="ae kx" href="https://techzizou.com/install-cuda-and-cudnn-on-windows-and-linux/" rel="noopener ugc nofollow" target="_blank"> <strong class="kk hj">本博客</strong> </a> <strong class="kk hj">学习如何在Windows上安装和设置CUDA和CUDNN。</strong></p><p id="4b64" class="pw-post-body-paragraph ld le hi kk b kl lf lg lh kn li lj lk jk ll lm ln jn lo lp lq jq lr ls lt ks hb bi translated"><strong class="kk hj">您可以使用下面提到的两种方法中的任何一种在Windows上安装OpenCV。</strong></p><p id="ce56" class="pw-post-body-paragraph ld le hi kk b kl lf lg lh kn li lj lk jk ll lm ln jn lo lp lq jq lr ls lt ks hb bi translated"><strong class="kk hj">方法1: </strong>使用Windows installer安装OpenCV(这适用于OpenCV 4.5.5)</p><ul class=""><li id="dd1b" class="ki kj hi kk b kl lf kn li jk mj jn mk jq ml ks kt ku kv kw bi translated">从https://opencv.org/releases/<a class="ae kx" href="https://opencv.org/releases/" rel="noopener ugc nofollow" target="_blank">下载OpenCV最新发布的Windows installer。</a></li><li id="22f0" class="ki kj hi kk b kl ky kn kz jk la jn lb jq lc ks kt ku kv kw bi translated">运行exe文件，解压到c盘安装。</li><li id="9006" class="ki kj hi kk b kl ky kn kz jk la jn lb jq lc ks kt ku kv kw bi translated">最后，在<strong class="kk hj">路径</strong>环境变量中为您的系统变量给出以下路径。</li></ul><figure class="ju jv jw jx fd jy er es paragraph-image"><div class="er es mm"><img src="../Images/4b9713107bcd096a787ba4ce96e3f309.png" data-original-src="https://miro.medium.com/v2/resize:fit:972/format:webp/1*vLXD0yh3SS-7dU8u7ZBuhg.jpeg"/></div></figure><ul class=""><li id="227a" class="ki kj hi kk b kl lf kn li jk mj jn mk jq ml ks kt ku kv kw bi translated"><strong class="kk hj"> C:\opencv\build\include </strong></li><li id="9079" class="ki kj hi kk b kl ky kn kz jk la jn lb jq lc ks kt ku kv kw bi translated"><strong class="kk hj">C:\ opencv \ build \ x64 \ vc14 \ bin</strong></li><li id="7db8" class="ki kj hi kk b kl ky kn kz jk la jn lb jq lc ks kt ku kv kw bi translated"><strong class="kk hj">C:\ opencv \ build \ x64 \ vc14 \ lib</strong></li><li id="56bc" class="ki kj hi kk b kl ky kn kz jk la jn lb jq lc ks kt ku kv kw bi translated"><strong class="kk hj">C:\ opencv \ build \ x64 \ vc15 \ bin</strong></li><li id="3463" class="ki kj hi kk b kl ky kn kz jk la jn lb jq lc ks kt ku kv kw bi translated"><strong class="kk hj">C:\ opencv \ build \ x64 \ vc15 \ lib</strong></li><li id="9469" class="ki kj hi kk b kl ky kn kz jk la jn lb jq lc ks kt ku kv kw bi translated"><strong class="kk hj"> C:\opencv\build\bin </strong></li></ul><p id="0e4a" class="pw-post-body-paragraph ld le hi kk b kl lf lg lh kn li lj lk jk ll lm ln jn lo lp lq jq lr ls lt ks hb bi translated"><strong class="kk hj">方法2: </strong>使用CUDA后端支持从源代码构建OpenCV，以启用<strong class="kk hj"> OpenCV-DNN-CUDA </strong>模块</p><p id="ea41" class="pw-post-body-paragraph ld le hi kk b kl lf lg lh kn li lj lk jk ll lm ln jn lo lp lq jq lr ls lt ks hb bi translated"><strong class="kk hj">注:</strong>使用方法1，您将能够安装OpenCV，这样使用CMake创建的darknet.exe文件将与OpenCV兼容，并在GPU支持下运行。</p><p id="7f7f" class="pw-post-body-paragraph ld le hi kk b kl lf lg lh kn li lj lk jk ll lm ln jn lo lp lq jq lr ls lt ks hb bi translated">方法2 <strong class="kk hj"> </strong>然而，即<strong class="kk hj">使用CUDA后端支持</strong>从源代码构建OpenCV，启用了<strong class="kk hj"> OpenCV-DNN-CUDA </strong>模块，使得推理速度更快。有一个单独的过程来设置OpenCV-DNN-CUDA模块，我们从源代码构建OpenCV。下面看看我的博客。</p><div class="mn mo ez fb mp mq"><a href="https://techzizou007.medium.com/setup-opencv-dnn-module-with-cuda-backend-support-for-windows-7f1856691da3" rel="noopener follow" target="_blank"><div class="mr ab dw"><div class="ms ab mt cl cj mu"><h2 class="bd hj fi z dy mv ea eb mw ed ef hh bi translated">使用CUDA后端支持设置OpenCV-DNN模块(适用于Windows)</h2><div class="mx l"><h3 class="bd b fi z dy mv ea eb mw ed ef dx translated">在本教程中，我们将使用CUDA后端支持从源代码构建OpenCV(OpenCV-DNN-CUDA模块)。</h3></div><div class="my l"><p class="bd b fp z dy mv ea eb mw ed ef dx translated">techzizou007.medium.com</p></div></div><div class="mz l"><div class="na l nb nc nd mz ne mh mq"/></div></div></a></div></div><div class="ab cl kb kc gp kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hb hc hd he hf"><h2 id="7f08" class="jd ig hi bd ih je jf jg il jh ji jj ip jk jl jm it jn jo jp ix jq jr js jb jt bi translated">步骤5)运行CMake GUI</h2><p id="2956" class="pw-post-body-paragraph ld le hi kk b kl km lg lh kn ko lj lk jk lu lm ln jn lv lp lq jq lw ls lt ks hb bi translated">一旦你设置好CUDA、CUDNN和OpenCV，我们必须运行CMake GUI并编译darknet。请遵循以下步骤。</p><p id="f9aa" class="pw-post-body-paragraph ld le hi kk b kl lf lg lh kn li lj lk jk ll lm ln jn lo lp lq jq lr ls lt ks hb bi translated"><strong class="kk hj">在Windows中:</strong></p><ul class=""><li id="f641" class="ki kj hi kk b kl lf kn li jk mj jn mk jq ml ks kt ku kv kw bi translated">开始(按钮)-&gt;所有程序-&gt; CMake -&gt; CMake (gui) -&gt;</li><li id="34c9" class="ki kj hi kk b kl ky kn kz jk la jn lb jq lc ks kt ku kv kw bi translated"><a class="ae kx" href="https://habrastorage.org/webt/pz/s1/uu/pzs1uu4heb7vflfcjqn-lxy-aqu.jpeg" rel="noopener ugc nofollow" target="_blank">在CMake中查看图片</a>:输入暗网源码的输入路径，输出路径到二进制- &gt;配置(按钮)- &gt;生成器可选平台:<code class="du lx ly lz ma b">x64</code> - &gt;完成- &gt;生成- &gt;打开项目- &gt;</li></ul><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="er es mc"><img src="../Images/b45d944cd3c86dde6aa0df1e10f6b34a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*8UUGkmrYHXnmv2oi.jpeg"/></div></div></figure></div><div class="ab cl kb kc gp kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hb hc hd he hf"><h2 id="cda2" class="jd ig hi bd ih je jf jg il jh ji jj ip jk jl jm it jn jo jp ix jq jr js jb jt bi translated">步骤6)运行MSVC来构建暗网</h2><ul class=""><li id="0544" class="ki kj hi kk b kl km kn ko jk kp jn kq jq kr ks kt ku kv kw bi translated">在MS Visual Studio中:单击“构建”-&gt;“配置管理器”，并在“构建”选项下的“安装项目”框中打勾。剩下的5个已经被选中了。这只是确保您不必为此再次运行构建解决方案。这将同时运行所有6个步骤。</li><li id="d94c" class="ki kj hi kk b kl ky kn kz jk la jn lb jq lc ks kt ku kv kw bi translated">接下来，在MS Visual Studio中:选择:x64并发布-&gt;构建-&gt;构建解决方案</li><li id="6ba5" class="ki kj hi kk b kl ky kn kz jk la jn lb jq lc ks kt ku kv kw bi translated">在您指定的二进制文件的输出路径中找到可执行文件<code class="du lx ly lz ma b"><strong class="kk hj"><em class="mb">darknet.exe</em></strong></code>。</li></ul><figure class="ju jv jw jx fd jy er es paragraph-image"><div class="er es nf"><img src="../Images/00365aa922fc1e1f4e6522f3cd2c1e31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*fnURjramyIk7gTJB"/></div></figure></div><div class="ab cl kb kc gp kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hb hc hd he hf"><h2 id="2449" class="jd ig hi bd ih je jf jg il jh ji jj ip jk jl jm it jn jo jp ix jq jr js jb jt bi translated">步骤7)设置暗网目录</h2><p id="2017" class="pw-post-body-paragraph ld le hi kk b kl km lg lh kn ko lj lk jk lu lm ln jn lv lp lq jq lw ls lt ks hb bi translated"><strong class="kk hj">下载并复制所需文件到设置暗网目录</strong></p><ul class=""><li id="8a95" class="ki kj hi kk b kl lf kn li jk mj jn mk jq ml ks kt ku kv kw bi translated">在我们从命令行运行darknet.exe之前，您需要从<strong class="kk hj"><em class="mb">darknet-master 3 rdpartypthreadsbin</em></strong>文件夹中复制<strong class="kk hj">pthreadVC2.dll</strong>，并将其放置在<strong class="kk hj">darknet.exe</strong>文件旁边的<strong class="kk hj"><em class="mb">darknet-master</em></strong>主文件夹中。</li><li id="f4e8" class="ki kj hi kk b kl ky kn kz jk la jn lb jq lc ks kt ku kv kw bi translated">最后，从<a class="ae kx" href="https://github.com/AlexeyAB/darknet/releases/download/darknet_yolo_v3_optimal/yolov4.weights" rel="noopener ugc nofollow" target="_blank">这里</a>下载YOLOv4权重文件，并将权重文件与<strong class="kk hj">darknet.exe</strong>文件放在<strong class="kk hj"><em class="mb">darknet-master</em></strong>主文件夹中。</li></ul><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="er es mc"><img src="../Images/07a6858359fc3f046f2d3bddfa4f712c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*RNk9RL5FJvk8vtpX.png"/></div></div></figure><p id="21b4" class="pw-post-body-paragraph ld le hi kk b kl lf lg lh kn li lj lk jk ll lm ln jn lo lp lq jq lr ls lt ks hb bi translated">就是这样。我们已经成功地在windows系统上安装了YOLO。我们可以在Nvidia GPU上运行，因为它是在CUDA支持下安装的。</p></div><div class="ab cl kb kc gp kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hb hc hd he hf"><h1 id="db4e" class="if ig hi bd ih ii ng ik il im nh io ip iq ni is it iu nj iw ix iy nk ja jb jc bi translated">(B) YOLO在Windows上的使用</h1><h2 id="d1cd" class="jd ig hi bd ih je jf jg il jh ji jj ip jk jl jm it jn jo jp ix jq jr js jb jt bi translated">对图像运行检测器</h2><p id="ecb0" class="pw-post-body-paragraph ld le hi kk b kl km lg lh kn ko lj lk jk lu lm ln jn lv lp lq jq lw ls lt ks hb bi translated">要运行图像检测器，请使用以下命令之一</p><pre class="ju jv jw jx fd nl ma nm nn aw no bi"><span id="2a27" class="jd ig hi ma b fi np nq l nr ns"><strong class="ma hj">darknet.exe detect cfg/yolov4.cfg yolov4.weights data/dog.jpg</strong></span></pre><p id="016c" class="pw-post-body-paragraph ld le hi kk b kl lf lg lh kn li lj lk jk ll lm ln jn lo lp lq jq lr ls lt ks hb bi translated">运筹学</p><pre class="ju jv jw jx fd nl ma nm nn aw no bi"><span id="c1d6" class="jd ig hi ma b fi np nq l nr ns"><strong class="ma hj">darknet.exe detector test cfg/coco.data cfg/yolov4.cfg yolov4.weights data/dog.jpg</strong></span></pre><p id="2251" class="pw-post-body-paragraph ld le hi kk b kl lf lg lh kn li lj lk jk ll lm ln jn lo lp lq jq lr ls lt ks hb bi translated">输出将如下所示</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="er es mc"><img src="../Images/232cee5d7a6bdfaa0e250d8f84f26578.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*d_Px0TIR4ef4oqoE.png"/></div></div></figure><p id="bb99" class="pw-post-body-paragraph ld le hi kk b kl lf lg lh kn li lj lk jk ll lm ln jn lo lp lq jq lr ls lt ks hb bi translated"><strong class="kk hj">。</strong></p><p id="dbb1" class="pw-post-body-paragraph ld le hi kk b kl lf lg lh kn li lj lk jk ll lm ln jn lo lp lq jq lr ls lt ks hb bi translated"><strong class="kk hj">。</strong></p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="er es mc"><img src="../Images/122d2d6800af2c31721658b18796c40c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ItvlPYOI82LLCsu7.png"/></div></div></figure><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="er es mc"><img src="../Images/d470698f15137ff07319335908f04425.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*GlB4b6ZnAitWxZsy.png"/></div></div></figure></div><div class="ab cl kb kc gp kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hb hc hd he hf"><h2 id="cf7e" class="jd ig hi bd ih je jf jg il jh ji jj ip jk jl jm it jn jo jp ix jq jr js jb jt bi translated">对于多个图像</h2><p id="8b34" class="pw-post-body-paragraph ld le hi kk b kl km lg lh kn ko lj lk jk lu lm ln jn lv lp lq jq lw ls lt ks hb bi translated">您可以不在命令行上提供图像，而是将其留空，以连续尝试多个图像。相反，当配置和权重加载完成时，您会看到一个提示:</p><p id="0b84" class="pw-post-body-paragraph ld le hi kk b kl lf lg lh kn li lj lk jk ll lm ln jn lo lp lq jq lr ls lt ks hb bi translated">一旦完成，它会提示你更多的路径来尝试不同的图像。完成后，使用<code class="du lx ly lz ma b">Ctrl-C</code>退出程序。</p><pre class="ju jv jw jx fd nl ma nm nn aw no bi"><span id="04c6" class="jd ig hi ma b fi np nq l nr ns"><strong class="ma hj">darknet.exe detect cfg/yolov4.cfg yolov4.weights</strong></span></pre><p id="e557" class="pw-post-body-paragraph ld le hi kk b kl lf lg lh kn li lj lk jk ll lm ln jn lo lp lq jq lr ls lt ks hb bi translated">输出如下所示:</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="er es mc"><img src="../Images/8a85fe030d5299db3ec8c31b332e356d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*4NDuANVQM0cyxp1f.png"/></div></div></figure><p id="9f55" class="pw-post-body-paragraph ld le hi kk b kl lf lg lh kn li lj lk jk ll lm ln jn lo lp lq jq lr ls lt ks hb bi translated">输入一个类似于<code class="du lx ly lz ma b"><strong class="kk hj"><em class="mb">data/horses.jpg</em></strong></code>的图像路径，让它预测该图像的框。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="er es mc"><img src="../Images/c7c6a5eb0d6e115082d54fdc1cee3b26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*OJ3U6oZZAIcjkZow.png"/></div></div></figure><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="er es mc"><img src="../Images/d9b4eacaacb42a15d896aa9c1e97ad86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*3RbT_B9TgcL9jdcs.png"/></div></div></figure></div><div class="ab cl kb kc gp kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hb hc hd he hf"><h2 id="d4ee" class="jd ig hi bd ih je jf jg il jh ji jj ip jk jl jm it jn jo jp ix jq jr js jb jt bi translated">更改检测阈值</h2><p id="4a02" class="pw-post-body-paragraph ld le hi kk b kl km lg lh kn ko lj lk jk lu lm ln jn lv lp lq jq lw ls lt ks hb bi translated">默认情况下，YOLO仅显示置信度为. 25或更高的检测到的对象。您可以通过将<code class="du lx ly lz ma b">-thresh &lt;val&gt;</code>标志传递给<code class="du lx ly lz ma b">yolo</code>命令来改变这一点。例如，要显示所有检测，您可以将阈值设置为0:</p><pre class="ju jv jw jx fd nl ma nm nn aw no bi"><span id="ceec" class="jd ig hi ma b fi np nq l nr ns"><strong class="ma hj">darknet.exe detect cfg/yolov4.cfg yolov4.weights data/dog.jpg -thresh 0</strong></span></pre><p id="ce62" class="pw-post-body-paragraph ld le hi kk b kl lf lg lh kn li lj lk jk ll lm ln jn lo lp lq jq lr ls lt ks hb bi translated">它产生:</p><p id="7187" class="pw-post-body-paragraph ld le hi kk b kl lf lg lh kn li lj lk jk ll lm ln jn lo lp lq jq lr ls lt ks hb bi translated">！[][全部]</p><p id="aa3e" class="pw-post-body-paragraph ld le hi kk b kl lf lg lh kn li lj lk jk ll lm ln jn lo lp lq jq lr ls lt ks hb bi translated">这显然不是很有用，但是你可以把它设置成不同的值来控制模型的阈值。</p></div><div class="ab cl kb kc gp kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hb hc hd he hf"><h2 id="178e" class="jd ig hi bd ih je jf jg il jh ji jj ip jk jl jm it jn jo jp ix jq jr js jb jt bi translated">网络摄像头上的实时检测</h2><p id="0829" class="pw-post-body-paragraph ld le hi kk b kl km lg lh kn ko lj lk jk lu lm ln jn lv lp lq jq lw ls lt ks hb bi translated">如果看不到结果，在测试数据上运行YOLO就没什么意思了。与其在一堆图像上运行，不如在网络摄像头的输入上运行！</p><p id="8961" class="pw-post-body-paragraph ld le hi kk b kl lf lg lh kn li lj lk jk ll lm ln jn lo lp lq jq lr ls lt ks hb bi translated">要运行这个演示，你需要用CUDA和OpenCV 编译<a class="ae kx" href="https://pjreddie.com/darknet/install/#cuda" rel="noopener ugc nofollow" target="_blank"> Darknet。我们已经在上面的A节中使用CMake用CUDA编译了darknet。</a></p><p id="8558" class="pw-post-body-paragraph ld le hi kk b kl lf lg lh kn li lj lk jk ll lm ln jn lo lp lq jq lr ls lt ks hb bi translated">现在，要在实时网络摄像头上运行检测器，请运行以下命令:</p><pre class="ju jv jw jx fd nl ma nm nn aw no bi"><span id="af6b" class="jd ig hi ma b fi np nq l nr ns"><strong class="ma hj">darknet.exe detector demo cfg/coco.data cfg/yolov4.cfg yolov4.weights</strong></span></pre><p id="4b33" class="pw-post-body-paragraph ld le hi kk b kl lf lg lh kn li lj lk jk ll lm ln jn lo lp lq jq lr ls lt ks hb bi translated">YOLO将显示当前的FPS和预测类，以及顶部绘制有边界框的图像。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="er es nt"><img src="../Images/5bff0d68828d747889f2902bbd89865f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*9FGlmZ6_BT1dCon2.png"/></div></div></figure><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="er es nu"><img src="../Images/b6e77ebcc021b1628fb55679c19ff7ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*hI4PVMFg8tW5-jaY.png"/></div></div></figure><p id="d54e" class="pw-post-body-paragraph ld le hi kk b kl lf lg lh kn li lj lk jk ll lm ln jn lo lp lq jq lr ls lt ks hb bi translated">你需要一个网络摄像头连接到OpenCV可以连接的计算机上，否则它将无法工作。如果您连接了多个网络摄像头，并且想要选择使用哪一个，您可以传递标志<code class="du lx ly lz ma b">-c &lt;num&gt;</code>来选择(OpenCV默认使用网络摄像头<code class="du lx ly lz ma b">0</code>)。</p></div><div class="ab cl kb kc gp kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hb hc hd he hf"><h2 id="d2a3" class="jd ig hi bd ih je jf jg il jh ji jj ip jk jl jm it jn jo jp ix jq jr js jb jt bi translated">视频检测</h2><p id="264b" class="pw-post-body-paragraph ld le hi kk b kl km lg lh kn ko lj lk jk lu lm ln jn lv lp lq jq lw ls lt ks hb bi translated">如果OpenCV可以读取视频，您也可以在视频文件上运行它:</p><pre class="ju jv jw jx fd nl ma nm nn aw no bi"><span id="47d5" class="jd ig hi ma b fi np nq l nr ns"><strong class="ma hj">darknet.exe detector demo cfg/coco.data cfg/yolov4.cfg yolov4.weights &lt;video file&gt;</strong></span></pre><p id="86e4" class="pw-post-body-paragraph ld le hi kk b kl lf lg lh kn li lj lk jk ll lm ln jn lo lp lq jq lr ls lt ks hb bi translated">您也可以使用以下命令保存视频文件的输出。</p><pre class="ju jv jw jx fd nl ma nm nn aw no bi"><span id="4bdf" class="jd ig hi ma b fi np nq l nr ns"><strong class="ma hj">darknet.exe detector demo cfg/coco.data cfg/yolov4.cfg yolov4.weights &lt;video file&gt; -out_filename &lt;output_video file&gt;</strong></span></pre><p id="bf39" class="pw-post-body-paragraph ld le hi kk b kl lf lg lh kn li lj lk jk ll lm ln jn lo lp lq jq lr ls lt ks hb bi translated">要阅读更多关于YOLO命令和用法的内容，请访问<a class="ae kx" href="https://pjreddie.com/darknet/yolo/" rel="noopener ugc nofollow" target="_blank"> pjredde的网站</a>和<a class="ae kx" href="https://github.com/AlexeyAB/darknet" rel="noopener ugc nofollow" target="_blank"> AlexeyAB的GitHub </a>。</p><p id="1fa6" class="pw-post-body-paragraph ld le hi kk b kl lf lg lh kn li lj lk jk ll lm ln jn lo lp lq jq lr ls lt ks hb bi translated"><strong class="kk hj">你也可以在下方的“我的YouTube视频”部分观看我在YOLO的YouTube视频，以了解更多关于YOLO安装和使用的信息。</strong></p></div><div class="ab cl kb kc gp kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hb hc hd he hf"><h1 id="a59a" class="if ig hi bd ih ii ng ik il im nh io ip iq ni is it iu nj iw ix iy nk ja jb jc bi translated">(C)在Linux上安装YOLOv4</h1><p id="88d3" class="pw-post-body-paragraph ld le hi kk b kl km lg lh kn ko lj lk jk lu lm ln jn lv lp lq jq lw ls lt ks hb bi translated">(<strong class="kk hj">使用</strong> <code class="du lx ly lz ma b"><strong class="kk hj">make</strong></code> <strong class="kk hj">在Linux上编译)分以下5步完成:</strong></p><h2 id="3d74" class="jd ig hi bd ih je jf jg il jh ji jj ip jk jl jm it jn jo jp ix jq jr js jb jt bi translated">步骤1)打开终端并克隆darknet</h2><p id="eb87" class="pw-post-body-paragraph ld le hi kk b kl km lg lh kn ko lj lk jk lu lm ln jn lv lp lq jq lw ls lt ks hb bi translated">使用以下命令克隆darknet git存储库。访问官方<a class="ae kx" href="https://github.com/AlexeyAB/darknet/" rel="noopener ugc nofollow" target="_blank"> AlexeyAB的GitHub </a>了解更多关于darknet的信息。</p><pre class="ju jv jw jx fd nl ma nm nn aw no bi"><span id="6e71" class="jd ig hi ma b fi np nq l nr ns"><strong class="ma hj">git clone </strong><a class="ae kx" href="https://github.com/AlexeyAB/darknet.git" rel="noopener ugc nofollow" target="_blank"><strong class="ma hj">https://github.com/AlexeyAB/darknet.git</strong></a></span></pre><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="er es mc"><img src="../Images/a889b762c04cf02c02cb46f7a9587c0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*wrA5T58IzHcgEa9y.png"/></div></div></figure></div><div class="ab cl kb kc gp kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hb hc hd he hf"><h2 id="c8b3" class="jd ig hi bd ih je jf jg il jh ji jj ip jk jl jm it jn jo jp ix jq jr js jb jt bi translated">步骤2)在您的系统上安装CUDA、cuDNN和OpenCV。</h2><p id="9cac" class="pw-post-body-paragraph ld le hi kk b kl km lg lh kn ko lj lk jk lu lm ln jn lv lp lq jq lw ls lt ks hb bi translated"><strong class="kk hj">注意:</strong>我们需要在我们的系统上安装和配置CUDA、cuDNN &amp; OpenCV，以便darknet可执行文件与GPU一起工作。</p><p id="2f0b" class="pw-post-body-paragraph ld le hi kk b kl lf lg lh kn li lj lk jk ll lm ln jn lo lp lq jq lr ls lt ks hb bi translated"><strong class="kk hj">参考</strong> <a class="ae kx" href="https://techzizou.com/install-cuda-and-cudnn-on-windows-and-linux/" rel="noopener ugc nofollow" target="_blank"> <strong class="kk hj">本博客</strong> </a> <strong class="kk hj">学习如何在Linux上安装和设置CUDA和cud nn</strong>。</p><p id="90e3" class="pw-post-body-paragraph ld le hi kk b kl lf lg lh kn li lj lk jk ll lm ln jn lo lp lq jq lr ls lt ks hb bi translated">您可以使用下面提到的两种方法中的任何一种在Linux上安装OpenCV。</p><p id="3003" class="pw-post-body-paragraph ld le hi kk b kl lf lg lh kn li lj lk jk ll lm ln jn lo lp lq jq lr ls lt ks hb bi translated"><strong class="kk hj">方法一:</strong>从Ubuntu库安装OpenCV。</p><p id="b940" class="pw-post-body-paragraph ld le hi kk b kl lf lg lh kn li lj lk jk ll lm ln jn lo lp lq jq lr ls lt ks hb bi translated">以下使用apt install的命令将安装旧版本的OpenCV。目前使用它的可用版本是3.2，而官方的OpenCV版本是4.5.3。</p><pre class="ju jv jw jx fd nl ma nm nn aw no bi"><span id="da06" class="jd ig hi ma b fi np nq l nr ns">sudo apt update<br/>sudo apt install python-opencv<br/>sudo apt install libopencv-dev</span></pre><p id="af97" class="pw-post-body-paragraph ld le hi kk b kl lf lg lh kn li lj lk jk ll lm ln jn lo lp lq jq lr ls lt ks hb bi translated"><strong class="kk hj">或</strong>使用<strong class="kk hj"> pip安装</strong>。这将在您的系统上安装最新的OpenCV版本。您需要在系统上安装pip。(如果python3和pip3与python2一起单独安装，请使用pip3。)</p><pre class="ju jv jw jx fd nl ma nm nn aw no bi"><span id="c3f6" class="jd ig hi ma b fi np nq l nr ns"><strong class="ma hj">pip install opencv-python<br/>OR</strong><br/><strong class="ma hj">pip3 install opencv-python</strong></span></pre><p id="3da9" class="pw-post-body-paragraph ld le hi kk b kl lf lg lh kn li lj lk jk ll lm ln jn lo lp lq jq lr ls lt ks hb bi translated"><strong class="kk hj">方法2: </strong>使用CUDA支持从源代码构建OpenCV，以启用OpenCV-DNN-CUDA模块</p><p id="8f35" class="pw-post-body-paragraph ld le hi kk b kl lf lg lh kn li lj lk jk ll lm ln jn lo lp lq jq lr ls lt ks hb bi translated"><strong class="kk hj">注</strong>:使用方法1，您将能够安装OpenCV，这样使用make命令创建的darknet.exe文件将与OpenCV兼容，并在GPU支持下运行。</p><p id="336a" class="pw-post-body-paragraph ld le hi kk b kl lf lg lh kn li lj lk jk ll lm ln jn lo lp lq jq lr ls lt ks hb bi translated">然而，方法2，即<strong class="kk hj">使用CUDA后端支持</strong>从源代码构建OpenCV，启用了<strong class="kk hj"> OpenCV-DNN-CUDA </strong>模块，这使得推理速度更快。有一个单独的过程来设置OpenCV-DNN-CUDA模块，我们从源代码构建OpenCV。你也可以参考我下面关于如何在Ubuntu 18.04上用OpenCV-DNN-CUDA模块从源代码构建OpenCV的博客:</p><div class="mn mo ez fb mp mq"><a href="https://techzizou007.medium.com/setup-opencv-dnn-module-with-cuda-backend-support-for-linux-1677c627f3bd" rel="noopener follow" target="_blank"><div class="mr ab dw"><div class="ms ab mt cl cj mu"><h2 class="bd hj fi z dy mv ea eb mw ed ef hh bi translated">使用CUDA后端支持设置OpenCV-DNN模块(适用于Linux)</h2><div class="mx l"><h3 class="bd b fi z dy mv ea eb mw ed ef dx translated">在本教程中，我们将使用CUDA后端支持从源代码构建OpenCV(OpenCV-DNN-CUDA模块)。</h3></div><div class="my l"><p class="bd b fp z dy mv ea eb mw ed ef dx translated">techzizou007.medium.com</p></div></div><div class="mz l"><div class="nv l nb nc nd mz ne mh mq"/></div></div></a></div></div><div class="ab cl kb kc gp kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hb hc hd he hf"><h2 id="d493" class="jd ig hi bd ih je jf jg il jh ji jj ip jk jl jm it jn jo jp ix jq jr js jb jt bi translated">步骤3)在<code class="du lx ly lz ma b">Makefile</code>中进行修改</h2><p id="c869" class="pw-post-body-paragraph ld le hi kk b kl km lg lh kn ko lj lk jk lu lm ln jn lv lp lq jq lw ls lt ks hb bi translated">根据您的要求在Makefile中进行更改。如<a class="ae kx" href="https://github.com/AlexeyAB/darknet/#how-to-compile-on-linux-using-make" rel="noopener ugc nofollow" target="_blank">链接</a>中所述，您可以在Makefile中进行各种更改。</p><p id="74bb" class="pw-post-body-paragraph ld le hi kk b kl lf lg lh kn li lj lk jk ll lm ln jn lo lp lq jq lr ls lt ks hb bi translated"><strong class="kk hj">新手只需将GPU、CUDNN、CUDNN_HALF、OPENCV设置为1即可。</strong></p><pre class="ju jv jw jx fd nl ma nm nn aw no bi"><span id="43b7" class="jd ig hi ma b fi np nq l nr ns"><strong class="ma hj">GPU=1<br/>CUDNN=1<br/>CUDNN_HALF=1<br/>OPENCV=1</strong></span></pre><p id="7c30" class="pw-post-body-paragraph ld le hi kk b kl lf lg lh kn li lj lk jk ll lm ln jn lo lp lq jq lr ls lt ks hb bi translated">接下来，将拱门设置为您的GPU架构。你可以在这里找到你的GPU架构(计算能力)<a class="ae kx" href="https://developer.nvidia.com/cuda-gpus" rel="noopener ugc nofollow" target="_blank">。例如:我的Nvidia GPU的CC是6.1，所以我将使用以下行:</a></p><pre class="ju jv jw jx fd nl ma nm nn aw no bi"><span id="bb44" class="jd ig hi ma b fi np nq l nr ns"><strong class="ma hj">ARCH= -gencode arch=compute_61,code=[sm_61,compute_61]</strong></span></pre><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="er es mc"><img src="../Images/421f73426fbd58faa3c13bafb1f8256c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*DEG9mwXEhAHZgY8T.png"/></div></div></figure></div><div class="ab cl kb kc gp kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hb hc hd he hf"><h2 id="a91e" class="jd ig hi bd ih je jf jg il jh ji jj ip jk jl jm it jn jo jp ix jq jr js jb jt bi translated">步骤4)运行make命令</h2><p id="87b0" class="pw-post-body-paragraph ld le hi kk b kl km lg lh kn ko lj lk jk lu lm ln jn lv lp lq jq lw ls lt ks hb bi translated">导航到darknet目录并运行make命令。</p><pre class="ju jv jw jx fd nl ma nm nn aw no bi"><span id="ba95" class="jd ig hi ma b fi np nq l nr ns"><strong class="ma hj">cd darknet<br/>make</strong></span></pre><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="er es mc"><img src="../Images/91bb67d463c72aa5ad0de43856f5becb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*QVvVyL6JSguZ_Q7A.png"/></div></div></figure><p id="2901" class="pw-post-body-paragraph ld le hi kk b kl lf lg lh kn li lj lk jk ll lm ln jn lo lp lq jq lr ls lt ks hb bi translated">输出如下所示:</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="er es mc"><img src="../Images/01840410313714b987a131b1a84cc57b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*gyAzwNhNctufvH1x.png"/></div></div></figure><p id="a1b2" class="pw-post-body-paragraph ld le hi kk b kl lf lg lh kn li lj lk jk ll lm ln jn lo lp lq jq lr ls lt ks hb bi translated">这将在<strong class="kk hj"> <em class="mb"> darknet </em> </strong>目录下创建一个名为<strong class="kk hj"> darknet </strong>的可执行文件。</p></div><div class="ab cl kb kc gp kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hb hc hd he hf"><h2 id="533e" class="jd ig hi bd ih je jf jg il jh ji jj ip jk jl jm it jn jo jp ix jq jr js jb jt bi translated">步骤5)下载YOLOv4砝码文件</h2><p id="2bb6" class="pw-post-body-paragraph ld le hi kk b kl km lg lh kn ko lj lk jk lu lm ln jn lv lp lq jq lw ls lt ks hb bi translated">使用以下命令下载YOLOv4权重文件。</p><pre class="ju jv jw jx fd nl ma nm nn aw no bi"><span id="31bc" class="jd ig hi ma b fi np nq l nr ns"><strong class="ma hj">wget </strong><a class="ae kx" href="https://github.com/AlexeyAB/darknet/releases/download/darknet_yolo_v3_optimal/yolov4.weights" rel="noopener ugc nofollow" target="_blank"><strong class="ma hj">https://github.com/AlexeyAB/darknet/releases/download/darknet_yolo_v3_optimal/yolov4.weights</strong></a></span></pre><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="er es mc"><img src="../Images/f5c20a80ba80ae65a872615ff79dde9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*knA6MQu6TRXO-g8p.png"/></div></div></figure><p id="7122" class="pw-post-body-paragraph ld le hi kk b kl lf lg lh kn li lj lk jk ll lm ln jn lo lp lq jq lr ls lt ks hb bi translated">现在我们已经建立了我们的Yolo-darknet环境。通过设置<strong class="kk hj"> Makefile </strong>中的参数并运行<strong class="kk hj"> make </strong>命令，我们已经创建了<strong class="kk hj"> darknet </strong>可执行文件。我们还下载了yolov4.weights 文件。<strong class="kk hj"> <em class="mb"> darknet </em> </strong>文件夹的内容如下图所示:</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="er es mc"><img src="../Images/18f1293766b18e4dd10a4e98b0fb1c61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Fxe0zdn_mjV2mz3X.png"/></div></div></figure></div><div class="ab cl kb kc gp kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hb hc hd he hf"><h1 id="569f" class="if ig hi bd ih ii ng ik il im nh io ip iq ni is it iu nj iw ix iy nk ja jb jc bi translated">(D) YOLO在Linux上的使用</h1><p id="11ba" class="pw-post-body-paragraph ld le hi kk b kl km lg lh kn ko lj lk jk lu lm ln jn lv lp lq jq lw ls lt ks hb bi translated">除了下面提到的以外，YOLO在Linux上的用法与在Windows上的用法相同。</p><p id="4301" class="pw-post-body-paragraph ld le hi kk b kl lf lg lh kn li lj lk jk ll lm ln jn lo lp lq jq lr ls lt ks hb bi translated">要在Linux上运行Darknet，使用本文中的例子，只需使用<code class="du lx ly lz ma b">./darknet</code>而不是<code class="du lx ly lz ma b">darknet.exe</code>。</p><h2 id="4be4" class="jd ig hi bd ih je jf jg il jh ji jj ip jk jl jm it jn jo jp ix jq jr js jb jt bi translated">对图像运行检测器</h2><p id="7ecf" class="pw-post-body-paragraph ld le hi kk b kl km lg lh kn ko lj lk jk lu lm ln jn lv lp lq jq lw ls lt ks hb bi translated">要运行图像检测器，请使用以下命令之一</p><pre class="ju jv jw jx fd nl ma nm nn aw no bi"><span id="17ed" class="jd ig hi ma b fi np nq l nr ns"><strong class="ma hj">./darknet detect cfg/yolov4.cfg yolov4.weights data/dog.jpg</strong></span></pre><p id="9687" class="pw-post-body-paragraph ld le hi kk b kl lf lg lh kn li lj lk jk ll lm ln jn lo lp lq jq lr ls lt ks hb bi translated">运筹学</p><pre class="ju jv jw jx fd nl ma nm nn aw no bi"><span id="91e8" class="jd ig hi ma b fi np nq l nr ns"><strong class="ma hj">./darknet detector test cfg/coco.data cfg/yolov4.cfg yolov4.weights data/dog.jpg</strong></span></pre><p id="981a" class="pw-post-body-paragraph ld le hi kk b kl lf lg lh kn li lj lk jk ll lm ln jn lo lp lq jq lr ls lt ks hb bi translated">输出如下所示:</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="er es mc"><img src="../Images/de49a88dea5b2a5e2d652309aacb130e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*p3vOhi9a8-0CUEbS.png"/></div></div></figure><p id="36a0" class="pw-post-body-paragraph ld le hi kk b kl lf lg lh kn li lj lk jk ll lm ln jn lo lp lq jq lr ls lt ks hb bi translated"><strong class="kk hj">。</strong></p><p id="3923" class="pw-post-body-paragraph ld le hi kk b kl lf lg lh kn li lj lk jk ll lm ln jn lo lp lq jq lr ls lt ks hb bi translated"><strong class="kk hj">。</strong></p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="er es mc"><img src="../Images/97d058cb31f8906e3bf0e163dbfd91aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*yeTeqbmokgJrBs3R.png"/></div></div></figure></div><div class="ab cl kb kc gp kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hb hc hd he hf"><h2 id="d364" class="jd ig hi bd ih je jf jg il jh ji jj ip jk jl jm it jn jo jp ix jq jr js jb jt bi translated">对于多个图像</h2><p id="41d0" class="pw-post-body-paragraph ld le hi kk b kl km lg lh kn ko lj lk jk lu lm ln jn lv lp lq jq lw ls lt ks hb bi translated">您可以不在命令行上提供图像，而是将其留空，以连续尝试多个图像。相反，当配置和权重加载完成时，您会看到一个提示:</p><p id="e05e" class="pw-post-body-paragraph ld le hi kk b kl lf lg lh kn li lj lk jk ll lm ln jn lo lp lq jq lr ls lt ks hb bi translated">一旦完成，它会提示你更多的路径来尝试不同的图像。完成后，使用<code class="du lx ly lz ma b">Ctrl-C</code>退出程序。</p><pre class="ju jv jw jx fd nl ma nm nn aw no bi"><span id="5dfa" class="jd ig hi ma b fi np nq l nr ns"><strong class="ma hj">./darknet detect cfg/yolov4.cfg yolov4.weights</strong></span></pre><p id="46d0" class="pw-post-body-paragraph ld le hi kk b kl lf lg lh kn li lj lk jk ll lm ln jn lo lp lq jq lr ls lt ks hb bi translated">输出如下所示:</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="er es mc"><img src="../Images/8b1202dd0f68bdb3b1777a484b5c60c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*omAIoy8br2i2G1x5.png"/></div></div></figure><p id="b7d5" class="pw-post-body-paragraph ld le hi kk b kl lf lg lh kn li lj lk jk ll lm ln jn lo lp lq jq lr ls lt ks hb bi translated">输入一个类似于<code class="du lx ly lz ma b"><strong class="kk hj"><em class="mb">data/horses.jpg</em></strong></code>的图像路径，让它预测该图像的框。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="er es mc"><img src="../Images/89690874846dc103af5ed8eac069bad9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*6ks0oRAqDP70M4fa.png"/></div></div></figure><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="er es mc"><img src="../Images/ff99d7449c59585baf1e0db31901a987.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*FdNQMC-wny3wJlhS.png"/></div></div></figure></div><div class="ab cl kb kc gp kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hb hc hd he hf"><h2 id="4930" class="jd ig hi bd ih je jf jg il jh ji jj ip jk jl jm it jn jo jp ix jq jr js jb jt bi translated">更改检测阈值</h2><p id="9ae4" class="pw-post-body-paragraph ld le hi kk b kl km lg lh kn ko lj lk jk lu lm ln jn lv lp lq jq lw ls lt ks hb bi translated">默认情况下，YOLO仅显示置信度为. 25或更高的检测到的对象。您可以通过将<code class="du lx ly lz ma b">-thresh &lt;val&gt;</code>标志传递给<code class="du lx ly lz ma b">yolo</code>命令来改变这一点。例如，要显示所有检测，您可以将阈值设置为0:</p><pre class="ju jv jw jx fd nl ma nm nn aw no bi"><span id="f6af" class="jd ig hi ma b fi np nq l nr ns"><strong class="ma hj">./darknet detect cfg/yolov4.cfg yolov4.weights data/dog.jpg -thresh 0</strong></span></pre><p id="ae94" class="pw-post-body-paragraph ld le hi kk b kl lf lg lh kn li lj lk jk ll lm ln jn lo lp lq jq lr ls lt ks hb bi translated">它产生:</p><p id="5575" class="pw-post-body-paragraph ld le hi kk b kl lf lg lh kn li lj lk jk ll lm ln jn lo lp lq jq lr ls lt ks hb bi translated">！[][全部]</p><p id="d595" class="pw-post-body-paragraph ld le hi kk b kl lf lg lh kn li lj lk jk ll lm ln jn lo lp lq jq lr ls lt ks hb bi translated">这显然不是很有用，但是你可以把它设置成不同的值来控制模型的阈值。</p></div><div class="ab cl kb kc gp kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hb hc hd he hf"><h2 id="078e" class="jd ig hi bd ih je jf jg il jh ji jj ip jk jl jm it jn jo jp ix jq jr js jb jt bi translated">网络摄像头上的实时检测</h2><p id="17fd" class="pw-post-body-paragraph ld le hi kk b kl km lg lh kn ko lj lk jk lu lm ln jn lv lp lq jq lw ls lt ks hb bi translated">如果看不到结果，在测试数据上运行YOLO就没什么意思了。与其在一堆图像上运行，不如在网络摄像头的输入上运行！</p><p id="74f0" class="pw-post-body-paragraph ld le hi kk b kl lf lg lh kn li lj lk jk ll lm ln jn lo lp lq jq lr ls lt ks hb bi translated">要运行这个演示，你需要用CUDA和OpenCV 编译<a class="ae kx" href="https://pjreddie.com/darknet/install/#cuda" rel="noopener ugc nofollow" target="_blank"> Darknet。我们已经在上面的A节中使用CMake用CUDA编译了darknet。</a></p><p id="f37a" class="pw-post-body-paragraph ld le hi kk b kl lf lg lh kn li lj lk jk ll lm ln jn lo lp lq jq lr ls lt ks hb bi translated">现在，要在实时网络摄像头上运行检测器，请运行以下命令:</p><pre class="ju jv jw jx fd nl ma nm nn aw no bi"><span id="04cd" class="jd ig hi ma b fi np nq l nr ns"><strong class="ma hj">./darknet detector demo cfg/coco.data cfg/yolov4.cfg yolov4.weights</strong></span></pre><p id="054e" class="pw-post-body-paragraph ld le hi kk b kl lf lg lh kn li lj lk jk ll lm ln jn lo lp lq jq lr ls lt ks hb bi translated">YOLO将显示当前的FPS和预测类，以及顶部绘制有边界框的图像。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="er es mc"><img src="../Images/6d79900913eae3a137e08d76e190ccbb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*LlFWRmCcTBp36rLW.png"/></div></div></figure><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="er es mc"><img src="../Images/e4b18955d19b5bd77899649a8118fa03.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*G7RzJ__zsaM6haPU.png"/></div></div></figure><p id="6679" class="pw-post-body-paragraph ld le hi kk b kl lf lg lh kn li lj lk jk ll lm ln jn lo lp lq jq lr ls lt ks hb bi translated">你需要一个网络摄像头连接到OpenCV可以连接的计算机上，否则它将无法工作。如果你连接了多个网络摄像头，并且想要选择使用哪个，你可以通过标志<code class="du lx ly lz ma b">-c &lt;num&gt;</code>来选择(OpenCV默认使用网络摄像头<code class="du lx ly lz ma b">0</code>)。</p></div><div class="ab cl kb kc gp kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hb hc hd he hf"><h2 id="dccd" class="jd ig hi bd ih je jf jg il jh ji jj ip jk jl jm it jn jo jp ix jq jr js jb jt bi translated">视频检测</h2><p id="f6e2" class="pw-post-body-paragraph ld le hi kk b kl km lg lh kn ko lj lk jk lu lm ln jn lv lp lq jq lw ls lt ks hb bi translated">如果OpenCV可以读取视频，您也可以在视频文件上运行它:</p><pre class="ju jv jw jx fd nl ma nm nn aw no bi"><span id="b2e7" class="jd ig hi ma b fi np nq l nr ns"><strong class="ma hj">./darknet detector demo cfg/coco.data cfg/yolov4.cfg yolov4.weights &lt;video file&gt;</strong></span></pre><p id="41f6" class="pw-post-body-paragraph ld le hi kk b kl lf lg lh kn li lj lk jk ll lm ln jn lo lp lq jq lr ls lt ks hb bi translated">您也可以使用以下命令保存视频文件的输出。</p><pre class="ju jv jw jx fd nl ma nm nn aw no bi"><span id="ab07" class="jd ig hi ma b fi np nq l nr ns"><strong class="ma hj">./darknet detector demo cfg/coco.data cfg/yolov4.cfg yolov4.weights &lt;video file&gt; -out_filename &lt;output_video file&gt;</strong></span></pre><figure class="ju jv jw jx fd jy er es paragraph-image"><div class="er es nw"><img src="../Images/d9c353fad734d4783f6f0b382db56266.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/0*ZyeTSsETYPavJ1d9.gif"/></div></figure><p id="6353" class="pw-post-body-paragraph ld le hi kk b kl lf lg lh kn li lj lk jk ll lm ln jn lo lp lq jq lr ls lt ks hb bi translated">要阅读更多关于YOLO命令和用法的内容，请访问<a class="ae kx" href="https://pjreddie.com/darknet/yolo/" rel="noopener ugc nofollow" target="_blank"> pjredde的网站</a>和<a class="ae kx" href="https://github.com/AlexeyAB/darknet" rel="noopener ugc nofollow" target="_blank"> AlexeyAB的GitHub </a>。</p><p id="7b01" class="pw-post-body-paragraph ld le hi kk b kl lf lg lh kn li lj lk jk ll lm ln jn lo lp lq jq lr ls lt ks hb bi translated"><strong class="kk hj">您还可以在“我的YouTube视频”部分观看我在YOLO的YouTube视频，了解更多关于YOLO安装和培训的信息。</strong></p></div><div class="ab cl kb kc gp kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hb hc hd he hf"><h1 id="a192" class="if ig hi bd ih ii ng ik il im nh io ip iq ni is it iu nj iw ix iy nk ja jb jc bi translated">我的YouTubes视频</h1><figure class="ju jv jw jx fd jy"><div class="bz dy l di"><div class="jz ka l"/></div></figure><figure class="ju jv jw jx fd jy"><div class="bz dy l di"><div class="jz ka l"/></div></figure></div><div class="ab cl kb kc gp kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hb hc hd he hf"><h1 id="0709" class="if ig hi bd ih ii ng ik il im nh io ip iq ni is it iu nj iw ix iy nk ja jb jc bi translated">信用</h1><h1 id="3e6a" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">参考</h1><ul class=""><li id="ba9c" class="ki kj hi kk b kl km kn ko jk kp jn kq jq kr ks kt ku kv kw bi translated"><a class="ae kx" href="https://github.com/AlexeyAB/darknet" rel="noopener ugc nofollow" target="_blank"><strong class="kk hj">AlexeyAB GitHub</strong></a></li><li id="e186" class="ki kj hi kk b kl ky kn kz jk la jn lb jq lc ks kt ku kv kw bi translated"><a class="ae kx" href="https://pjreddie.com/darknet/yolo/" rel="noopener ugc nofollow" target="_blank"> <strong class="kk hj"> pjreddie网站</strong> </a></li></ul></div></div>    
</body>
</html>