<html>
<head>
<title>Build a custom Image classification Android app using Teachable Machine (Old version TF App)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用可教机器建立一个自定义图像分类Android应用程序(旧版本TF应用程序)</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/build-a-custom-image-classification-android-app-using-teachable-machine-f60b197eaa90?source=collection_archive---------2-----------------------#2022-10-19">https://medium.com/geekculture/build-a-custom-image-classification-android-app-using-teachable-machine-f60b197eaa90?source=collection_archive---------2-----------------------#2022-10-19</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/52a41c2b2ea360f2552d1033582abb5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bGXCrhOh0VLJIGutlVI7kQ.png"/></div></div></figure><div class=""/><p id="63bb" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">使用Teachable Machine训练一个用于自定义图像分类的深度学习模型，将其转换为TFLite模型，最后使用TensorFlow的GitHub中的样本TFLite <a class="ae jo" href="https://github.com/tensorflow/examples/tree/demo/lite/examples/image_classification/android" rel="noopener ugc nofollow" target="_blank">图像分类app </a>将其部署在移动设备上。</p><h2 id="14a0" class="jp jq ht bd jr js jt ju jv jw jx jy jz jb ka kb kc jf kd ke kf jj kg kh ki kj bi translated"><strong class="ak">重要的</strong></h2><p id="9e15" class="pw-post-body-paragraph iq ir ht is b it kk iv iw ix kl iz ja jb km jd je jf kn jh ji jj ko jl jm jn hb bi translated">这是针对TENSORFLOW应用程序的旧JAVA版本。可以在GITHUB上切换到以前的版本。使用本教程中使用的JAVA版本参考应用程序的以下链接:</p><p id="9b9c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae jo" href="https://github.com/tensorflow/examples/tree/demo/lite/examples/image_classification/android" rel="noopener ugc nofollow" target="_blank">https://github . com/tensor flow/examples/tree/demo/lite/examples/image _ classification/Android</a></p><h2 id="d269" class="jp jq ht bd jr js jt ju jv jw jx jy jz jb ka kb kc jf kd ke kf jj kg kh ki kj bi translated">路标</h2><ul class=""><li id="570d" class="kp kq ht is b it kk ix kl jb kr jf ks jj kt jn ku kv kw kx bi translated">⁍收集图像数据集。</li><li id="2030" class="kp kq ht is b it ky ix kz jb la jf lb jj lc jn ku kv kw kx bi translated">⁍开放教育机械形象工程</li><li id="f481" class="kp kq ht is b it ky ix kz jb la jf lb jj lc jn ku kv kw kx bi translated">⁍训练模型。</li><li id="7177" class="kp kq ht is b it ky ix kz jb la jf lb jj lc jn ku kv kw kx bi translated">⁍对模型进行了评估。</li><li id="bf45" class="kp kq ht is b it ky ix kz jb la jf lb jj lc jn ku kv kw kx bi translated">⁍出口模型</li><li id="83d5" class="kp kq ht is b it ky ix kz jb la jf lb jj lc jn ku kv kw kx bi translated">⁍为Android创建TFLite模型</li><li id="d004" class="kp kq ht is b it ky ix kz jb la jf lb jj lc jn ku kv kw kx bi translated">⁍从TensorFlow下载样本图像分类应用程序，并根据您的自定义TFLite模型进行调整。</li></ul></div><div class="ab cl ld le gp lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="hb hc hd he hf"><p id="4913" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">图像分类或图像识别是这样一个概念，你向设备的摄像头传感器展示一幅图像，它会告诉你该图像中存在什么，或者告诉我们它属于哪一类。</p><p id="3691" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在本教程中，我将带您完成自定义图像分类，方法是在谷歌令人兴奋的在线工具的帮助下训练一个简单的深度学习模型:<a class="ae jo" href="https://teachablemachine.withgoogle.com/" rel="noopener ugc nofollow" target="_blank">teacheble machine with Google，</a>然后将模型导出到与Android设备兼容的TensorFlow lite版本。最后，我们将把这个模型部署到Android设备上。</p><h1 id="3c6e" class="lk jq ht bd jr ll lm ln jv lo lp lq jz lr ls lt kc lu lv lw kf lx ly lz ki ma bi translated">模型</h1><p id="b4c0" class="pw-post-body-paragraph iq ir ht is b it kk iv iw ix kl iz ja jb km jd je jf kn jh ji jj ko jl jm jn hb bi translated">用于训练我们的定制图像分类器的训练平台是带有google的<a class="ae jo" href="https://teachablemachine.withgoogle.com/" rel="noopener ugc nofollow" target="_blank">teacheble machine</a>。这是一个令人兴奋的平台，只需点击几下鼠标即可学习深度学习培训流程。首先，从你的系统上传不同种类的物体，或者使用网络摄像头，然后训练它。最后，经过训练，您可以导出您选择的模型。你可以选择任何你想要的格式并下载模型。我正在训练一个面具图像分类的模型。这将在下一节提到的5个步骤中完成。前3个步骤与使用可示教机器的<a class="ae jo" href="https://techzizou.com/train-a-model-for-image-classification-using-teachable-machine/" rel="noopener ugc nofollow" target="_blank">列车图像分类模型</a>教程中的步骤相同。</p><ol class=""><li id="fa51" class="kp kq ht is b it iu ix iy jb mb jf mc jj md jn me kv kw kx bi translated"><a class="ae jo" href="#tm1" rel="noopener ugc nofollow"> <strong class="is hu">上传您的数据集</strong> </a></li><li id="1012" class="kp kq ht is b it ky ix kz jb la jf lb jj lc jn me kv kw kx bi translated"><a class="ae jo" href="#tm2" rel="noopener ugc nofollow"> <strong class="is hu">训练模型</strong> </a></li><li id="3ee9" class="kp kq ht is b it ky ix kz jb la jf lb jj lc jn me kv kw kx bi translated"><a class="ae jo" href="https://techzizou.com/wp-admin/post.php?post=441&amp;action=edit#tm3" rel="noopener ugc nofollow" target="_blank"> <strong class="is hu">预览模型/使用javascript </strong> </a>测试模型</li><li id="30a1" class="kp kq ht is b it ky ix kz jb la jf lb jj lc jn me kv kw kx bi translated"><a class="ae jo" href="#tm4" rel="noopener ugc nofollow"> <strong class="is hu">以TFLite格式导出模型</strong> </a></li><li id="2e51" class="kp kq ht is b it ky ix kz jb la jf lb jj lc jn me kv kw kx bi translated"><a class="ae jo" href="#tm5" rel="noopener ugc nofollow"> <strong class="is hu">下载TFLite模型，用您的自定义模型</strong> </a>调整TFLite影像分类样本app</li></ol><figure class="mg mh mi mj fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mf"><img src="../Images/24927e3b6a58d0159d79669bd0e9af0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*-dV9UFJJLgIadKgH.png"/></div></div></figure></div><div class="ab cl ld le gp lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="hb hc hd he hf"><h1 id="f111" class="lk jq ht bd jr ll mk ln jv lo ml lq jz lr mm lt kc lu mn lw kf lx mo lz ki ma bi translated">要求</h1><ul class=""><li id="ee06" class="kp kq ht is b it kk ix kl jb kr jf ks jj kt jn ku kv kw kx bi translated">不同类别的自定义对象图像数据集。</li><li id="869a" class="kp kq ht is b it ky ix kz jb la jf lb jj lc jn ku kv kw kx bi translated">Android Studio 3.2 +(安装在Linux、Mac或Windows机器上)</li><li id="3c40" class="kp kq ht is b it ky ix kz jb la jf lb jj lc jn ku kv kw kx bi translated">处于<a class="ae jo" href="https://developer.android.com/studio/debug/dev-options" rel="noopener ugc nofollow" target="_blank">开发者模式</a>的Android设备启用了USB调试</li><li id="f2dd" class="kp kq ht is b it ky ix kz jb la jf lb jj lc jn ku kv kw kx bi translated">USB线(将Android设备连接到您的电脑)</li></ul></div><div class="ab cl ld le gp lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="hb hc hd he hf"><h1 id="723b" class="lk jq ht bd jr ll mk ln jv lo ml lq jz lr mm lt kc lu mn lw kf lx mo lz ki ma bi translated">我们开始吧！！</h1><p id="248c" class="pw-post-body-paragraph iq ir ht is b it kk iv iw ix kl iz ja jb km jd je jf kn jh ji jj ko jl jm jn hb bi translated">(但首先✅Subscribe到我的YouTube频道👉🏻<a class="ae jo" href="https://bit.ly/3Ap3sdi" rel="noopener ugc nofollow" target="_blank">https://bit.ly/3Ap3sdi</a>😁😜)</p><p id="c1de" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hu">目标</strong>:使用可教机器建立一个定制的图像分类android应用。</p><h2 id="f841" class="jp jq ht bd jr js jt ju jv jw jx jy jz jb ka kb kc jf kd ke kf jj kg kh ki kj bi translated">首先，进入<a class="ae jo" href="https://teachablemachine.withgoogle.com/" rel="noopener ugc nofollow" target="_blank">可示教机器</a>站点。</h2><h2 id="8867" class="jp jq ht bd jr js jt ju jv jw jx jy jz jb ka kb kc jf kd ke kf jj kg kh ki kj bi translated">注意:TeachableMachine目前仅支持MobileNet型号。</h2><p id="2fac" class="pw-post-body-paragraph iq ir ht is b it kk iv iw ix kl iz ja jb km jd je jf kn jh ji jj ko jl jm jn hb bi translated">点击主页上的“开始”并选择“图像项目”。您也可以使用google drive登录以保存您的模型文件，否则如果您关闭选项卡或刷新页面，您将会丢失所有图像和模型文件。</p><figure class="mg mh mi mj fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mf"><img src="../Images/e76c517f239e8553060af3cd2a3248f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*V1InM_xmbhkUX-7G.png"/></div></div></figure><h1 id="80a4" class="lk jq ht bd jr ll lm ln jv lo lp lq jz lr ls lt kc lu lv lw kf lx ly lz ki ma bi translated">第一步。上传数据集</h1><figure class="mg mh mi mj fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mf"><img src="../Images/01988a223cd257c53deb36e6520053f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*RqUHk2rSdPOMU5Ct.png"/></div></div></figure><p id="e13c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">创建数据集并上传至<a class="ae jo" href="https://teachablemachine.withgoogle.com/" rel="noopener ugc nofollow" target="_blank">可示教机器</a>，并相应定义类别名称。我正在用2个类训练一个面具图像分类模型，即。、<strong class="is hu">带_面具</strong>&amp;<strong class="is hu">不带_面具</strong>。</p><figure class="mg mh mi mj fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mf"><img src="../Images/5965a2290d02e256764c866883112bf6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*-mFxsSDX-SWo1htt.png"/></div></div></figure></div><div class="ab cl ld le gp lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="hb hc hd he hf"><h1 id="8748" class="lk jq ht bd jr ll mk ln jv lo ml lq jz lr mm lt kc lu mn lw kf lx mo lz ki ma bi translated">步骤2)训练图像分类模型</h1><p id="cb29" class="pw-post-body-paragraph iq ir ht is b it kk iv iw ix kl iz ja jb km jd je jf kn jh ji jj ko jl jm jn hb bi translated">在训练期间，您可以调整<strong class="is hu">超参数</strong>，如下所示:</p><ul class=""><li id="2338" class="kp kq ht is b it iu ix iy jb mb jf mc jj md jn ku kv kw kx bi translated">纪元数量</li><li id="a94c" class="kp kq ht is b it ky ix kz jb la jf lb jj lc jn ku kv kw kx bi translated">批量</li><li id="29e4" class="kp kq ht is b it ky ix kz jb la jf lb jj lc jn ku kv kw kx bi translated">学习率</li></ul><figure class="mg mh mi mj fd hk er es paragraph-image"><div class="er es mp"><img src="../Images/ddca684f075007f50a58dce549d71430.png" data-original-src="https://miro.medium.com/v2/resize:fit:478/format:webp/1*9jN97QkRAmxpjcosqM1Q0Q.png"/></div></figure><p id="5153" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">设置超参数值后，点击列车模型。这个过程需要一段时间，取决于图像和时期的数量。</p><figure class="mg mh mi mj fd hk er es paragraph-image"><div class="er es mq"><img src="../Images/caf92d7eb6105cecc4840a200674ef71.png" data-original-src="https://miro.medium.com/v2/resize:fit:698/format:webp/1*Q6lRJA_TIfQpNuUQRUcwDQ.png"/></div></figure><p id="2eb0" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hu">重要提示:</strong>在训练过程中，不要切换标签，因为这会停止训练过程。</p><figure class="mg mh mi mj fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mf"><img src="../Images/afddbdd54974ec0bcab7e8a1c4f6eeb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Ni137KmFvHat9Nr5.png"/></div></div></figure></div><div class="ab cl ld le gp lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="hb hc hd he hf"><h1 id="6a61" class="lk jq ht bd jr ll mk ln jv lo ml lq jz lr mm lt kc lu mn lw kf lx mo lz ki ma bi translated">步骤3)预览你训练好的模型或者使用javascript测试模型</h1><p id="860b" class="pw-post-body-paragraph iq ir ht is b it kk iv iw ix kl iz ja jb km jd je jf kn jh ji jj ko jl jm jn hb bi translated">训练结束后，您可以在预览窗口中预览已训练的模型。您可以上传图片进行测试，也可以使用网络摄像头进行测试。请参见下面的“预览”测试结果。</p><h2 id="a8a8" class="jp jq ht bd jr js jt ju jv jw jx jy jz jb ka kb kc jf kd ke kf jj kg kh ki kj bi translated">使用网络摄像头</h2><figure class="mg mh mi mj fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mr"><img src="../Images/be91d4db08450ffb1d4b4689031c5946.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xBTc0CEJ3yOogMVg1AZNCQ.png"/></div></div></figure></div><div class="ab cl ld le gp lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="hb hc hd he hf"><h2 id="f56d" class="jp jq ht bd jr js jt ju jv jw jx jy jz jb ka kb kc jf kd ke kf jj kg kh ki kj bi translated">使用图像</h2><figure class="mg mh mi mj fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es ms"><img src="../Images/279bf16c7b65f8a53898c54bdb619549.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*36UrNtvGIAvWzZzNpOZGOQ.png"/></div></div></figure><p id="df9d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您还可以使用javascript测试模型。</p><p id="af15" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您可以使用javascript格式将您的模型用于基于浏览器的项目。</p><figure class="mg mh mi mj fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mt"><img src="../Images/d7504c1844fd380610a6b3cf8de5a30d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*M30eLMJ-3dlC7ckm.png"/></div></div></figure><p id="6498" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">首先，点击<strong class="is hu">导出模型</strong>。接下来，进入<strong class="is hu"> Tensorflow.js </strong>选项卡，点击<strong class="is hu">上传我的模型</strong>。当你上传你的模型时，Teachable Machine会把它放在给定的可共享链接上免费下载。如果您希望任何人使用您的模型，您可以与他们共享该链接——任何拥有该链接的人都可以在他们的项目中使用您的模型。请注意，您的模型已经发布到Google服务器上，但是您用来制作模型的示例却没有。只是你的模型——预测你展示的是哪个类的数学程序。</p><figure class="mg mh mi mj fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mf"><img src="../Images/6d2767c7ff06cc01062c274d0f353c4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*5VqFLvMXzcJtRw7H.png"/></div></div></figure><p id="34c5" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您将看到Javascript代码片段，其中写有您的模型的链接。您可以使用这段代码在浏览器上测试您的模型。</p><p id="b80e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您也可以使用<strong class="is hu"> p5.js web编辑器</strong>工具在线测试您的模型。web编辑器为<strong class="is hu"> <em class="mu"> p5 </em>。js  </strong>是一个JavaScript库，目标是让艺术家、设计师、教育工作者和初学者能够使用编码。要将它用于您定制的模型，选择<strong class="is hu"> p5.js </strong>代码片段选项卡并复制代码。接下来，点击下图所示的<strong class="is hu"> p5.js Web编辑器</strong>链接。</p><figure class="mg mh mi mj fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mf"><img src="../Images/946fc8b0bb4f5bfd590220bc7ace6633.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*pKPkaNfUsCDVMt5u.png"/></div></div></figure><p id="ab4c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">打开p5.js web编辑器工具后，您将会在那里找到白天和夜间分类的默认代码。删除整个旧代码，粘贴从定制模型的p5.js代码片段中复制的新代码，然后按play。现在，您可以使用p5.js web编辑器工具测试您的模型。</p><figure class="mg mh mi mj fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mf"><img src="../Images/59eb9643407b7b297e3de352495fc817.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*gsB8yHBZ4El6ERdJ.png"/></div></div></figure><figure class="mg mh mi mj fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mf"><img src="../Images/b64560773e99445b81bf581cfc4a8d8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*JhA3MAOt8MJI0upM.png"/></div></div></figure><h1 id="df43" class="lk jq ht bd jr ll lm ln jv lo lp lq jz lr ls lt kc lu lv lw kf lx ly lz ki ma bi translated">步骤4)以TFLite格式导出模型</h1><p id="ba0f" class="pw-post-body-paragraph iq ir ht is b it kk iv iw ix kl iz ja jb km jd je jf kn jh ji jj ko jl jm jn hb bi translated">最后，将模型以TensorFlow lite格式导出，部署到移动设备上。</p><p id="eba6" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">点击<strong class="is hu">导出模型</strong>并选择<strong class="is hu"> TensorFlow Lite </strong>选项卡。接下来，选择您想要的模型格式。您可以下载TFLite的量化和浮点文件格式。</p><p id="eacc" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hu">注:可示教机器目前仅支持MobileNet模型架构。</strong></p><figure class="mg mh mi mj fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mv"><img src="../Images/6edbc99468a2413a119cf811ed91b5f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*LywWYyxhR779uqjL.png"/></div></div></figure><p id="6c73" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">的。tflite文件应该放在android项目目录的asset文件夹中，并在相应读取它的java文件中更改名称(参见步骤5)</p></div><div class="ab cl ld le gp lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="hb hc hd he hf"><h1 id="4698" class="lk jq ht bd jr ll mk ln jv lo ml lq jz lr mm lt kc lu mn lw kf lx mo lz ki ma bi translated">步骤5)下载TFLite模型，并根据您的自定义模型调整TFLite影像分类示例应用程序</h1><p id="f055" class="pw-post-body-paragraph iq ir ht is b it kk iv iw ix kl iz ja jb km jd je jf kn jh ji jj ko jl jm jn hb bi translated">(使用Android Studio构建应用程序，如下文链接所述:</p><p id="6e88" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae jo" href="https://github.com/tensorflow/examples/blob/master/lite/examples/image_classification/android/README.md" rel="noopener ugc nofollow" target="_blank">https://github . com/tensor flow/examples/blob/demo/lite/examples/image _ classification/Android/readme . MD</a></p><ul class=""><li id="c913" class="kp kq ht is b it iu ix iy jb mb jf mc jj md jn ku kv kw kx bi translated">⦿从<a class="ae jo" href="https://github.com/tensorflow/examples/tree/demo" rel="noopener ugc nofollow" target="_blank">这里</a>下载我在本教程中使用的旧TensorFlow Lite示例存档，并将其解压缩。你会在里面找到<strong class="is hu"> <em class="mu">图像分类</em> </strong> app。</li></ul><p id="2209" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hu"> <em class="mu">示例-demo \ lite \ examples \ image _分类</em> </strong></p><ul class=""><li id="a674" class="kp kq ht is b it iu ix iy jb mb jf mc jj md jn ku kv kw kx bi translated">⦿接下来，复制你的<strong class="is hu"> TFLite模型</strong>和<strong class="is hu"> labels.txt </strong>文件在图像分类安卓app的<strong class="is hu"> <em class="mu"> assets </em> </strong>文件夹里。</li></ul><p id="7cef" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hu"> <em class="mu">示例-demo \ lite \ examples \ image _ class ification \ Android \ models \ src \ main \ assets</em></strong></p><figure class="mg mh mi mj fd hk er es paragraph-image"><div class="er es mw"><img src="../Images/a99b8c8d3407b37930041ba9348009bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:932/format:webp/1*c8WN3cBe70hagkBUFoUeug.jpeg"/></div></figure><figure class="mg mh mi mj fd hk er es paragraph-image"><div class="er es mx"><img src="../Images/0a0ff5a930b69655f724b548a81abf88.png" data-original-src="https://miro.medium.com/v2/resize:fit:946/format:webp/1*EcRcEOHwCLEi5MONDg54VA.jpeg"/></div></figure><h1 id="87f3" class="lk jq ht bd jr ll lm ln jv lo lp lq jz lr ls lt kc lu lv lw kf lx ly lz ki ma bi translated">在实施解决方案(任务库和支持库)之间切换</h1><p id="7e3a" class="pw-post-body-paragraph iq ir ht is b it kk iv iw ix kl iz ja jb km jd je jf kn jh ji jj ko jl jm jn hb bi translated">这个图像分类Android参考应用程序演示了两种实现方案:</p><p id="fc53" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">(1) <code class="du my mz na nb b"><a class="ae jo" href="https://github.com/tensorflow/examples/tree/master/lite/examples/image_classification/android/lib_task_api" rel="noopener ugc nofollow" target="_blank">lib_task_api</a></code>利用来自<a class="ae jo" href="https://www.tensorflow.org/lite/inference_with_metadata/task_library/image_classifier" rel="noopener ugc nofollow" target="_blank"> TensorFlow Lite任务库</a>的现成API</p><p id="e95a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">(2) <code class="du my mz na nb b"><a class="ae jo" href="https://github.com/tensorflow/examples/tree/master/lite/examples/image_classification/android/lib_support" rel="noopener ugc nofollow" target="_blank">lib_support</a></code>使用<a class="ae jo" href="https://www.tensorflow.org/lite/inference_with_metadata/lite_support" rel="noopener ugc nofollow" target="_blank"> TensorFlow Lite支持库</a>创建自定义推理管道。</p><p id="ef5d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在<strong class="is hu"> Android Studio </strong>中，你可以将构建版本更改为你想要构建和运行的版本——只需进入<code class="du my mz na nb b">Build &gt; Select Build Variant</code>并从下拉菜单中选择一个即可(如下图所示)。更多详情请参见<a class="ae jo" href="https://developer.android.com/studio/build/build-variants#product-flavors" rel="noopener ugc nofollow" target="_blank">在Android Studio </a>中配置产品口味。</p><p id="28ca" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hu"> <em class="mu">注意</em> </strong> <em class="mu">:如果你只是单纯的想让开箱即用的API运行app，推荐的选项是</em> <code class="du my mz na nb b"><strong class="is hu"><em class="mu">lib_task_api</em></strong></code> <em class="mu">进行推理。如果你想定制你自己的模型并控制输入和输出的细节，使用</em> <code class="du my mz na nb b"><strong class="is hu"><em class="mu">lib_support</em></strong></code> <em class="mu">修改你的模型输入和输出可能会更容易。</em></p><figure class="mg mh mi mj fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mf"><img src="../Images/5da897918420f6a49f88c250cfa71500.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*80Ye48CSsW8BYuWk.png"/></div></div></figure><figure class="mg mh mi mj fd hk er es paragraph-image"><div class="er es nc"><img src="../Images/8b054256534116dcff402ef41e672a9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:530/format:webp/1*o6QEbE1qksOAkPgrzSfcLQ.jpeg"/></div></figure><h1 id="6b52" class="lk jq ht bd jr ll lm ln jv lo lp lq jz lr ls lt kc lu lv lw kf lx ly lz ki ma bi translated">重要事项:</h1><p id="1638" class="pw-post-body-paragraph iq ir ht is b it kk iv iw ix kl iz ja jb km jd je jf kn jh ji jj ko jl jm jn hb bi translated"><strong class="is hu">默认实现是“lib _ task _ API”</strong>。对于初学者，你可以选择“lib_support”实现，因为它不需要任何元数据，而lib_task_api实现需要元数据。 <strong class="is hu">如果你使用的是lib_task_api，你可以使用我们下载的图像分类Android应用内的<em class="mu"> metadata </em>文件夹中的脚本来创建元数据。您需要为它安装某些包，如<em class="mu"> requirements.txt </em>文件中所提到的，还需要根据您的需求调整模型信息及其描述。使用下面链接中的命令为其创建元数据。</strong></p><ul class=""><li id="f768" class="kp kq ht is b it iu ix iy jb mb jf mc jj md jn ku kv kw kx bi translated"><a class="ae jo" href="https://www.tensorflow.org/lite/convert/metadata#image_classification" rel="noopener ugc nofollow" target="_blank">https://www . tensor flow . org/lite/convert/metadata # image _ classification</a></li></ul><h2 id="5d16" class="jp jq ht bd jr js jt ju jv jw jx jy jz jb ka kb kc jf kd ke kf jj kg kh ki kj bi translated">您也可以使用下面的colab笔记本来创建元数据:</h2><ul class=""><li id="9f6c" class="kp kq ht is b it kk ix kl jb kr jf ks jj kt jn ku kv kw kx bi translated"><a class="ae jo" href="https://colab.research.google.com/drive/15bXIFWYGlujeSF_UBYkLqP6ia9TpJx23?usp=sharing" rel="noopener ugc nofollow" target="_blank">https://colab . research . Google . com/drive/15 bxifwyglujesf _ ubyklqp 6 ia 9 tpj x23？usp =共享</a></li></ul><p id="26f9" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">此外，请查看以下2个链接，了解有关图像分类器元数据的更多信息。</p><ul class=""><li id="6faa" class="kp kq ht is b it iu ix iy jb mb jf mc jj md jn ku kv kw kx bi translated"><a class="ae jo" href="https://www.tensorflow.org/lite/convert/metadata" rel="noopener ugc nofollow" target="_blank">https://www.tensorflow.org/lite/convert/metadata</a></li><li id="e28c" class="kp kq ht is b it ky ix kz jb la jf lb jj lc jn ku kv kw kx bi translated"><a class="ae jo" href="https://www.tensorflow.org/lite/convert/metadata_writer_tutorial#image_classifiers" rel="noopener ugc nofollow" target="_blank">https://www . tensor flow . org/lite/convert/metadata _ writer _ tutorial # image _ classifiers</a></li></ul></div><div class="ab cl ld le gp lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="hb hc hd he hf"><h1 id="282c" class="lk jq ht bd jr ll mk ln jv lo ml lq jz lr mm lt kc lu mn lw kf lx mo lz ki ma bi translated">⦿注:<code class="du my mz na nb b"> I am using the lib_support implementation here which requires no metadata.</code></h1><h1 id="11f8" class="lk jq ht bd jr ll lm ln jv lo lp lq jz lr ls lt kc lu lv lw kf lx ly lz ki ma bi translated">⦿接下来，对代码进行如下修改。</h1><ul class=""><li id="909d" class="kp kq ht is b it kk ix kl jb kr jf ks jj kt jn ku kv kw kx bi translated">编辑梯度构建模块文件。打开“<strong class="is hu"> build.gradle </strong>”文件<strong class="is hu"><em class="mu">$ TF _ EXAMPLES/EXAMPLES-demo/lite/EXAMPLES/image _ classification/Android/app/build . gradle</em></strong>注释掉中的行<strong class="is hu">apply:'<strong class="is hu">download _ model . gradle</strong>'，该行下载默认的图像分类应用的TFLite模型并覆盖您的资产。</strong></li></ul><pre class="mg mh mi mj fd nd nb ne nf aw ng bi"><span id="c413" class="jp jq ht nb b fi nh ni l nj nk">// apply from:'download_model.gradle'</span></pre><ul class=""><li id="b693" class="kp kq ht is b it iu ix iy jb mb jf mc jj md jn ku kv kw kx bi translated">选择<code class="du my mz na nb b">Build -&gt; Make Project</code>并检查项目是否成功构建。您需要在设置中配置Android SDK。您至少需要SDK版本23。这个<code class="du my mz na nb b">build.gradle</code>文件会提示你下载任何缺失的库。</li><li id="c768" class="kp kq ht is b it ky ix kz jb la jf lb jj lc jn ku kv kw kx bi translated">接下来，给出您的TFLite型号<code class="du my mz na nb b"><strong class="is hu">model.tflite &amp; model_quant.tflite</strong></code>和标签文件<code class="du my mz na nb b"><strong class="is hu">labels.txt</strong></code>的路径。为此，在一个文本编辑器或Android Studio本身中打开<code class="du my mz na nb b"><strong class="is hu"><em class="mu">ClassifierFloatMobileNet.java</em></strong></code><strong class="is hu"><em class="mu">&amp;</em></strong><code class="du my mz na nb b"><strong class="is hu"><em class="mu">ClassifierQuantizedMobileNet.java</em></strong></code><strong class="is hu"><em class="mu"/></strong>文件，找到<strong class="is hu"> getModelPath() </strong>的定义。验证它指向它们各自的TFLite模型(在我的例子中是<strong class="is hu">model . TF lite</strong>&amp;<strong class="is hu">model _ quant . TF lite</strong>)。接下来，验证标签<strong class="is hu"> getLabelPath() </strong>的路径指向您的标签文件“<strong class="is hu"> labels.txt </strong>”。(上面两个用于lib_support实现的java文件在下面的路径<code class="du my mz na nb b"><strong class="is hu"><em class="mu">../image_classification/android/lib_support/src/main/java/org/tensorflow/lite/examples/classification/tflite/</em></strong></code>中)</li><li id="5583" class="kp kq ht is b it ky ix kz jb la jf lb jj lc jn ku kv kw kx bi translated">如果您也有EfficientNet的量化TFLite模型和浮点TFLite模型，我们可以执行与上述相同的步骤，并将所有分类器中的<strong class="is hu"> getModelPath() </strong>和<strong class="is hu"> getLabelPath() </strong>设置为指向各自的模型。请注意，您需要拥有自定义数据集的所有4种类型的模型来运行应用程序，否则将会出现错误。然而，在本教程中，由于我只演示了MobileNet的浮点量化模型，因此我将删除Android Studio中其他2个EfficientNet分类器的用法和所有引用。</li><li id="6fde" class="kp kq ht is b it ky ix kz jb la jf lb jj lc jn ku kv kw kx bi translated">我还对代码进行了一些其他更改，因为我只使用了2个类别，样本图像分类应用程序中显示的默认类别数为3，所以我根据自己的要求进行了调整。我已经在2节课上分享了我的定制Android应用程序。你可以在这篇文章的底部找到链接。</li><li id="c666" class="kp kq ht is b it ky ix kz jb la jf lb jj lc jn ku kv kw kx bi translated">最后，将Android设备连接到计算机，并确保批准手机上出现的任何ADB权限提示。选择<code class="du my mz na nb b">Run -&gt; Run app.</code>在进行任何其他新更改或添加更多功能之前测试您的应用。现在，您已经使用Teachable Machine制作了一个基本的图像分类应用程序，您可以尝试对您的TFLite模型进行更改，或者对应用程序<strong class="is hu">进行任何自定义。玩得开心！</strong></li></ul></div><div class="ab cl ld le gp lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="hb hc hd he hf"><h1 id="d154" class="lk jq ht bd jr ll mk ln jv lo ml lq jz lr mm lt kc lu mn lw kf lx mo lz ki ma bi translated"><strong class="ak">阅读这些TensorFlow图像分类应用GitHub自述文件，并探索旧java版本的代码页以了解更多信息- &gt; </strong></h1><ul class=""><li id="5ad4" class="kp kq ht is b it kk ix kl jb kr jf ks jj kt jn ku kv kw kx bi translated"><a class="ae jo" href="https://github.com/tensorflow/examples/blob/demo/lite/examples/image_classification/android/README.md" rel="noopener ugc nofollow" target="_blank"> <strong class="is hu"> TensorFlow Lite图像分类Android实例应用/自述</strong> </a></li><li id="1f36" class="kp kq ht is b it ky ix kz jb la jf lb jj lc jn ku kv kw kx bi translated"><a class="ae jo" href="https://github.com/tensorflow/examples/blob/demo/lite/examples/image_classification/android/EXPLORE_THE_CODE.md" rel="noopener ugc nofollow" target="_blank"> <strong class="is hu"> TensorFlow Lite Android图像分类示例/Explore_the_code </strong> </a></li></ul></div><div class="ab cl ld le gp lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="hb hc hd he hf"><h1 id="83d9" class="lk jq ht bd jr ll mk ln jv lo ml lq jz lr mm lt kc lu mn lw kf lx mo lz ki ma bi translated">掩膜数据集</h1><p id="a238" class="pw-post-body-paragraph iq ir ht is b it kk iv iw ix kl iz ja jb km jd je jf kn jh ji jj ko jl jm jn hb bi translated"><a class="ae jo" href="https://github.com/prajnasb/observations" rel="noopener ugc nofollow" target="_blank">般若Github </a></p><h1 id="d793" class="lk jq ht bd jr ll lm ln jv lo lp lq jz lr ls lt kc lu lv lw kf lx ly lz ki ma bi translated">看看我在Youtube上的视频吧！</h1><figure class="mg mh mi mj fd hk"><div class="bz dy l di"><div class="nl nm l"/></div></figure></div><div class="ab cl ld le gp lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="hb hc hd he hf"><h1 id="47af" class="lk jq ht bd jr ll mk ln jv lo ml lq jz lr mm lt kc lu mn lw kf lx mo lz ki ma bi translated">信用</h1><h2 id="50fe" class="jp jq ht bd jr js jt ju jv jw jx jy jz jb ka kb kc jf kd ke kf jj kg kh ki kj bi translated">文件/参考资料</h2><ul class=""><li id="0c85" class="kp kq ht is b it kk ix kl jb kr jf ks jj kt jn ku kv kw kx bi translated">▸ <a class="ae jo" href="https://github.com/tensorflow/tensorflow" rel="noopener ugc nofollow" target="_blank">张量流简介</a></li><li id="a9a8" class="kp kq ht is b it ky ix kz jb la jf lb jj lc jn ku kv kw kx bi translated">υ<a class="ae jo" href="https://github.com/tensorflow/models" rel="noopener ugc nofollow" target="_blank">tensor flow模型Git库</a></li><li id="7b9e" class="kp kq ht is b it ky ix kz jb la jf lb jj lc jn ku kv kw kx bi translated">▸ <a class="ae jo" href="https://github.com/tensorflow/models/blob/master/research/object_detection/g3doc/tf2_classification_zoo.md" rel="noopener ugc nofollow" target="_blank"> TensorFlow 2分类模型动物园</a></li><li id="ab58" class="kp kq ht is b it ky ix kz jb la jf lb jj lc jn ku kv kw kx bi translated"><a class="ae jo" href="https://github.com/techzizou/examples/tree/master/lite" rel="noopener ugc nofollow" target="_blank"> TensorFlow Lite示例应用</a></li><li id="07f1" class="kp kq ht is b it ky ix kz jb la jf lb jj lc jn ku kv kw kx bi translated">υ<a class="ae jo" href="https://github.com/tensorflow/examples/blob/master/lite/examples/image_classification/android/README.md" rel="noopener ugc nofollow" target="_blank">tensor flow Lite图像分类Android示例应用</a></li><li id="084a" class="kp kq ht is b it ky ix kz jb la jf lb jj lc jn ku kv kw kx bi translated">▸ <a class="ae jo" href="https://www.tensorflow.org/tutorials" rel="noopener ugc nofollow" target="_blank"> Tensorflow教程</a></li><li id="99ca" class="kp kq ht is b it ky ix kz jb la jf lb jj lc jn ku kv kw kx bi translated">集成图像分类器</li><li id="74be" class="kp kq ht is b it ky ix kz jb la jf lb jj lc jn ku kv kw kx bi translated">υ<a class="ae jo" href="https://www.tensorflow.org/lite/convert/metadata" rel="noopener ugc nofollow" target="_blank">向TensorFlow Lite模型添加元数据</a></li><li id="0c7d" class="kp kq ht is b it ky ix kz jb la jf lb jj lc jn ku kv kw kx bi translated">υ<a class="ae jo" href="https://www.tensorflow.org/lite/convert/metadata_writer_tutorial#image_classifiers" rel="noopener ugc nofollow" target="_blank">tensor flow Lite元数据编写器API </a></li><li id="9c93" class="kp kq ht is b it ky ix kz jb la jf lb jj lc jn ku kv kw kx bi translated"><a class="ae jo" href="https://www.tensorflow.org/lite/convert/metadata#image_classification" rel="noopener ugc nofollow" target="_blank">创建元数据命令</a></li><li id="139e" class="kp kq ht is b it ky ix kz jb la jf lb jj lc jn ku kv kw kx bi translated">υ<a class="ae jo" href="https://github.com/tensorflow/examples/blob/demo/lite/examples/image_classification/android/README.md" rel="noopener ugc nofollow" target="_blank">tensor flow Lite图像分类Android示例应用/自述</a></li><li id="08d8" class="kp kq ht is b it ky ix kz jb la jf lb jj lc jn ku kv kw kx bi translated">υ<a class="ae jo" href="https://github.com/tensorflow/examples/blob/demo/lite/examples/image_classification/android/EXPLORE_THE_CODE.md" rel="noopener ugc nofollow" target="_blank">tensor flow Lite Android图像分类示例/Explore_the_code </a></li></ul></div><div class="ab cl ld le gp lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="hb hc hd he hf"><h1 id="363d" class="lk jq ht bd jr ll mk ln jv lo ml lq jz lr mm lt kc lu mn lw kf lx mo lz ki ma bi translated">♕·特奇佐·♕</h1></div></div>    
</body>
</html>