<html>
<head>
<title>Angular VS Lighthouse — Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">角度与灯塔—第1部分</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/angular-vs-lighthouse-part-1-27a9ac6584f?source=collection_archive---------4-----------------------#2021-04-19">https://medium.com/geekculture/angular-vs-lighthouse-part-1-27a9ac6584f?source=collection_archive---------4-----------------------#2021-04-19</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="ae57" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">提高分数的技巧和窍门。</h2></div><p id="33ee" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这篇文章需要很好的角度知识。</p><p id="a6b6" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果尽管应用了常见的优化技术，比如这里描述的<a class="ae jt" href="https://faun.pub/44-quick-tips-to-fine-tune-angular-performance-9f5768f5d945" rel="noopener ugc nofollow" target="_blank"><strong class="iz hj"/></a>或这里描述的<a class="ae jt" rel="noopener" href="/swlh/angular-performance-optimization-techniques-5b7ca0808f8b"><strong class="iz hj"/></a>，但您的分数仍然很低，那么请阅读本系列文章中描述的技术和技巧。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div class="er es ju"><img src="../Images/77865610fdd5a05374e88ec3912cdd46.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*LtCLhVq2W4mfx8atI83FKw.png"/></div></figure><p id="3662" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在移动(最重要的测试设备)中，我的优化页面从68分增加到96分，在桌面中从96分增加到100分。<br/>这使用Chrome 90修复了LCP (Larget Contentful Paint)问题。<br/>另一个优化后的页面，使用了Chrome 87，在移动测试中从34分提高到83分。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div class="er es kc"><img src="../Images/18e7c32f4d0d7d728d7511ab24fee617.png" data-original-src="https://miro.medium.com/v2/resize:fit:690/format:webp/1*qGMM7D2OjuiBizR6_Krbhg.png"/></div></figure><p id="e34f" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">使用Angular时在Lighthouse上获得好成绩并不像一些文章描述的那样简单。<br/>有些文章显示100分，但在像“Hello World”页面这样的项目、没有第三方库的项目或简单的页面上很容易达到这个分数……<br/>现实是不同的:在一个项目中有对第三方库、表单、跨页面的共享逻辑、共享样式等的多种依赖是很常见的……<br/>因此，达到一个好分数(可能不是100分)的优化过程很长，并且包括几个步骤。</p><p id="c748" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">注意</strong> : <br/>我们将只关注影响SEO排名的页面，所以灯塔评分更重要。<br/>对于其他页面，我们无法应用本指南中介绍的所有优化。</p><p id="2efd" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我在优化步骤中使用的通用原则(我称之为<strong class="iz hj"> 5M </strong>)是:</p><ul class=""><li id="4e04" class="kd ke hi iz b ja jb jd je jg kf jk kg jo kh js ki kj kk kl bi translated">最小主包大小:<br/>尽可能减小main.js文件和其他第一次加载文件的大小是最基本的。css，。json，。svg文件。上传的数据越少，您获得的积分就越多！<br/>而且，处理的javascript代码越少，增量越大！<br/>JavaScript 1.5 MB以下建议加载。</li><li id="12cb" class="kd ke hi iz b ja km jd kn jg ko jk kp jo kq js ki kj kk kl bi translated">最小代码精化:<br/>代码精化会显著影响分数，所以在代码脚本和DOM页面中执行最小代码精化是可取的。</li><li id="faa1" class="kd ke hi iz b ja km jd kn jg ko jk kp jo kq js ki kj kk kl bi translated">最小请求数:<br/>减少必要的请求数，因为浏览器只能执行有限的并发请求，否则一些请求会等到上一个请求完成后再执行。我们必须避免认为只执行一个非常大的请求，因为最好执行并行请求，例如load。css，。js，。jpg文件分开。我们还必须避免串行请求。</li><li id="d126" class="kd ke hi iz b ja km jd kn jg ko jk kp jo kq js ki kj kk kl bi translated">最少组件:<br/>对于页面中使用的每个组件，Angular必须构建并解析一个DOM对象，在其上附加监听器等等。因此，加载构建页面的唯一必要组件，就像它是一个静态页面一样。还要避免非常深的组件链。</li><li id="009e" class="kd ke hi iz b ja km jd kn jg ko jk kp jo kq js ki kj kk kl bi translated">最小样式:<br/>只加载页面中使用的样式，只将最小样式放入全局css文件中。</li></ul><p id="8842" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我使用了'<strong class="iz hj">最小</strong>'术语，因为每个项目都是独特的，所以每个项目都有不同的需求和优先级，因此您可以自行决定使用一些优化技术。<br/>你必须努力“最小化”满足页面需求所需的资源，有时你必须努力在分数和易开发性/可维护性之间达成良好的妥协。</p><p id="9bef" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">每个建议都标有可能增加的分数(<strong class="iz hj">低</strong>、<strong class="iz hj">中</strong>、<strong class="iz hj">高</strong>)</p><div class="jv jw jx jy fd ab cb"><figure class="kr jz ks kt ku kv kw paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><img src="../Images/b0d91a6cae648e439fa3b26ad45f5705.png" data-original-src="https://miro.medium.com/v2/resize:fit:1004/format:webp/1*Cw92WhLGAKVqYl0hny8FaA.png"/></div></figure><figure class="kr jz lb kt ku kv kw paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><img src="../Images/9ce639ffbe4fe4506693eef9adbb9b14.png" data-original-src="https://miro.medium.com/v2/resize:fit:998/format:webp/1*lQMEh7XXJI8OZ1T3OQ44jA.png"/></div><figcaption class="lc ld et er es le lf bd b be z dx lg di lh li">Before optimizations</figcaption></figure></div><div class="ab cb"><figure class="kr jz lj kt ku kv kw paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><img src="../Images/01b8ceb7cba68769ce366aa96ec4f938.png" data-original-src="https://miro.medium.com/v2/resize:fit:1034/format:webp/1*50QW8pDokyhgW-GBqXwULQ.png"/></div></figure><figure class="kr jz lk kt ku kv kw paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><img src="../Images/b4b4c7e30eb797ded2d4ae9adad8dc06.png" data-original-src="https://miro.medium.com/v2/resize:fit:968/format:webp/1*Ftg3itR2_tUg_nyRJFss8A.png"/></div><figcaption class="lc ld et er es le lf bd b be z dx ll di lm li">After optimizations</figcaption></figure></div></div><div class="ab cl ln lo gp lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="hb hc hd he hf"><h2 id="8159" class="lu lv hi bd lw lx ly lz ma mb mc md me jg mf mg mh jk mi mj mk jo ml mm mn mo bi translated">高的</h2><p id="a31d" class="pw-post-body-paragraph ix iy hi iz b ja mp ij jc jd mq im jf jg mr ji jj jk ms jm jn jo mt jq jr js hb bi translated">如果你使用一些分析脚本，那就延迟它。您可以选择在一些用户交互后或X秒后(至少3-4秒)加载这些脚本。<br/>如果你在X秒后选择，你将失去子X秒的报告，但可能这并不重要。<br/>我们来看看Angular启动后，如何延迟加载Google Tag Manager (GTM)。<br/> <strong class="iz hj">注意</strong>:在开发模式下，我不喜欢延迟的GTM。</p><pre class="jv jw jx jy fd mu mv mw mx aw my bi"><span id="f0b6" class="lu lv hi mv b fi mz na l nb nc">main.ts<br/>...<br/>const tag_manager_key = '';<br/>document.addEventListener('DOMContentLoaded', () =&gt; {      <br/>       // In production mode<br/>       if (environment.production) {</span><span id="d084" class="lu lv hi mv b fi nd na l nb nc">window['dataLayer'] = [];<br/>         /** init gtm after 3500 seconds - this could be adjusted */<br/>         setTimeout(initGTM, 3500);</span><span id="f46b" class="lu lv hi mv b fi nd na l nb nc">/*       <br/>   document.addEventListener('scroll', initGTMOnEvent);<br/>   document.addEventListener('mousemove', initGTMOnEvent);<br/>   document.addEventListener('touchstart', initGTMOnEvent);</span><span id="bc28" class="lu lv hi mv b fi nd na l nb nc">   function initGTMOnEvent (event) {<br/>           initGTM();<br/>           event.currentTarget.removeEventListener(event.type, initGTMOnEvent); // remove the event listener that got triggered<br/>         }*/</span><span id="e926" class="lu lv hi mv b fi nd na l nb nc">function initGTM () {<br/>           if (window['gtmDidInit']) {<br/>             return false;<br/>           }<br/>           window['gtmDidInit'] = true; // flag to ensure script does not get added to DOM more than once.<br/>           const script = document.createElement('script');<br/>           script.type = 'text/javascript';<br/>           script.async = true;<br/>           script.onload = () =&gt; { window['dataLayer'].push({ event: 'gtm.js', 'gtm.start': (new Date()).getTime(),<br/>             'gtm.uniqueEventId': 0 }); }; // this part ensures PageViews is always tracked<br/>           script.src = '<a class="ae jt" href="https://www.googletagmanager.com/gtm.js?id='" rel="noopener ugc nofollow" target="_blank">https://www.googletagmanager.com/gtm.js?id='</a> + tag_manager_key;</span><span id="417e" class="lu lv hi mv b fi nd na l nb nc">document.head.appendChild(script);<br/>         }<br/>       }<br/>       // In development mode<br/>       else {         <br/>     const scriptGTM = document.createElement('script');<br/>     scriptGTM.innerHTML = '(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({\'gtm.start\':\n' +<br/>    'new Date().getTime(),event:\'gtm.js\'});var f=d.getElementsByTagName(s)[0],\n' +<br/>    'j=d.createElement(s),dl=l!=\'dataLayer\'?\'&amp;l=\'+l:\'\';j.async=true;j.src=\n' +<br/>    '\'<a class="ae jt" href="https://www.googletagmanager.com/gtm.js?id=\'+i+dl;f.parentNode.insertBefore(j,f);\n'" rel="noopener ugc nofollow" target="_blank">https://www.googletagmanager.com/gtm.js?id=\'+i+dl;f.parentNode.insertBefore(j,f);\n'</a> +<br/>    '})(window,document,\'script\',\'dataLayer\',\'' + tag_manager_key + '\');';<br/>     document.body.appendChild(scriptGTM);<br/>       }<br/>    <br/>    platformBrowserDynamic().bootstrapModule(AppModule, {preserveWhitespaces: true})<br/>           .catch(err =&gt; console.log(err));<br/>});</span></pre></div><div class="ab cl ln lo gp lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="hb hc hd he hf"><h2 id="bd61" class="lu lv hi bd lw lx ly lz ma mb mc md me jg mf mg mh jk mi mj mk jo ml mm mn mo bi translated">高的</h2><p id="78c0" class="pw-post-body-paragraph ix iy hi iz b ja mp ij jc jd mq im jf jg mr ji jj jk ms jm jn jo mt jq jr js hb bi translated">从app.module和shared.module(典型文件)中删除所有并非绝对必要的模块和组件，例如modals、autocomplete、uploaders实用程序等等。<br/>让我们以一个自动完成字段为例:我们将创建一个假的输入字段，当它接收到焦点或点击时，我们将加载自动完成模块和组件。<br/>我们使用ng-dynamic-component从ngx-bootstrap库中动态注入组件和类型化模块。</p><p id="8550" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">创建包含自动完成文件的模块:</p><pre class="jv jw jx jy fd mu mv mw mx aw my bi"><span id="3454" class="lu lv hi mv b fi mz na l nb nc">auto-complete.module.ts</span><span id="8ec5" class="lu lv hi mv b fi nd na l nb nc">import {NgModule} from '<a class="ae jt" href="http://twitter.com/angular/core" rel="noopener ugc nofollow" target="_blank">@angular/core</a>';<br/>import {FormsModule} from '<a class="ae jt" href="http://twitter.com/angular/forms" rel="noopener ugc nofollow" target="_blank">@angular/forms</a>';<br/>import {TypeaheadModule} from 'ngx-bootstrap/typeahead';<br/>import {PositioningService} from 'ngx-bootstrap/positioning';</span><span id="b892" class="lu lv hi mv b fi nd na l nb nc">import {SearchAutoCompleteComponent} from '../search/auto-complete/search-auto-complete.component';<br/>import {SharedModule} from '../shared.module';<br/>import {SearchAutoCompleteService} from '../search/auto-complete/search-auto-complete.service';</span><span id="cf9f" class="lu lv hi mv b fi nd na l nb nc"><a class="ae jt" href="http://twitter.com/NgModule" rel="noopener ugc nofollow" target="_blank">@NgModule</a>({<br/>  imports: [<br/>    FormsModule,<br/>    SharedModule,<br/>    TypeaheadModule.forRoot()<br/>  ],<br/>  declarations: [<br/>    SearchAutoCompleteComponent<br/>  ],<br/>  exports: [<br/>    SharedModule,<br/>    FormsModule,<br/>    TypeaheadModule,<br/>    SearchAutoCompleteComponent,<br/>  ],<br/>  providers: [PositioningService, SearchAutoCompleteService ]</span><span id="7502" class="lu lv hi mv b fi nd na l nb nc">})<br/>export class AutoCompleteModule {<br/>  static components = {<br/>    searchAutoComplete: SearchAutoCompleteComponent<br/>  };<br/>  static services = {<br/>    searchAutoCompleteService: SearchAutoCompleteService<br/>  };<br/>}</span></pre><p id="92ba" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">创建一个允许轻松加载和使用已移除模块的服务:</p><p id="9fc3" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">注</strong>:看如何映射模块的相关服务，让它们也可以延迟使用。</p><pre class="jv jw jx jy fd mu mv mw mx aw my bi"><span id="f712" class="lu lv hi mv b fi mz na l nb nc">load-module.service.ts</span><span id="9ef6" class="lu lv hi mv b fi nd na l nb nc"><a class="ae jt" href="http://twitter.com/Injectable" rel="noopener ugc nofollow" target="_blank">@Injectable</a>({providedIn: 'root'})<br/>export class LoadModuleService {</span><span id="7d2b" class="lu lv hi mv b fi nd na l nb nc">autoCompleteModuleComponents;</span><span id="ce8c" class="lu lv hi mv b fi nd na l nb nc">constructor(private compiler: Compiler, private injector: Injector) {}</span><span id="5a4c" class="lu lv hi mv b fi nd na l nb nc">loadAutocompleteModule() {<br/>    return import('../../shared/search/auto-complete.module')<br/>      .then(m =&gt; m.AutoCompleteModule)<br/>      .then((autoCompleteModule) =&gt; {<br/>        this.autoCompleteModuleComponents = (autoCompleteModule).components;<br/>        if (autoCompleteModule instanceof NgModuleFactory) {<br/>          return autoCompleteModule;<br/>        } else {<br/>          return this.compiler.compileModuleAsync(autoCompleteModule);<br/>        }<br/>      })<br/>      .then(factory =&gt; {<br/>        const moduleRef = factory.create(this.injector);</span><span id="5a06" class="lu lv hi mv b fi nd na l nb nc">        const searchAutoCompleteService: any =  moduleRef.injector.get((&lt;any&gt;factory.moduleType).services.searchAuto CompleteService);</span><span id="2fde" class="lu lv hi mv b fi nd na l nb nc">        return {<br/>          module: factory,<br/>          injector : moduleRef.injector,<br/>          services: {searchAutoCompleteService},<br/>          components: this.autoCompleteModuleComponents};<br/>      });<br/>  }<br/>}</span></pre><p id="8ddf" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">放置(伪)输入字段的组件:</p><pre class="jv jw jx jy fd mu mv mw mx aw my bi"><span id="3f2c" class="lu lv hi mv b fi mz na l nb nc">app.component.ts<br/>...<br/>showFakeInput = true;<br/>searchAutoComplete: Type&lt;SearchAutoCompleteComponent&gt;;<br/>moduleFactory;<br/>loadingAutoCompleteModule = false;<br/>SACinputs;<br/>SACoutputs;<br/>SAS;<br/>SACinjector;</span><span id="bc06" class="lu lv hi mv b fi nd na l nb nc">constructor(private loadModuleService: LoadModuleService) { }</span><span id="d153" class="lu lv hi mv b fi nd na l nb nc">...<br/>loadAutocompleteModule() {<br/>    if (this.loadingAutoCompleteModule)<br/>      return;<br/>    this.loadingAutoCompleteModule = true;<br/>    this.SACinputs = {<br/>      ...<br/>    };<br/>    this.SACoutputs = {<br/>      searched: result =&gt; {<br/>        ...<br/>      },<br/>    };<br/>    this.loadModuleService.loadAutocompleteModule()<br/>       .then(autoCompleteModule =&gt; {<br/>          this.searchAutoComplete = autoCompleteModule.components.searchAutoComplete;<br/>          this.moduleFactory = autoCompleteModule.module;<br/>          this.SAS = autoCompleteModule.services.searchAutoCompleteService;<br/>          this.SACinjector = autoCompleteModule.injector;<br/>          this.showFakeInput = false;<br/>          this.changeDetRef.markForCheck();<br/>    });<br/>  }</span></pre><p id="8ad7" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">相对模板文件:</p><pre class="jv jw jx jy fd mu mv mw mx aw my bi"><span id="6e0e" class="lu lv hi mv b fi mz na l nb nc">app.component.html<br/>...<br/>&lt;div *ngIf="showFakeInput"&gt;<br/>  &lt;div class="form-group"&gt;<br/> &lt;input type="text" name="asyncSelected"  [placeholder]="type here..."<br/>     autocomplete="off"<br/>     disableautocomplete<br/>     (click)="loadAutocompleteModule()" (focus)="loadAutocompleteModule()" [value]=""&gt;<br/>  &lt;/div&gt;<br/>&lt;/div&gt;<br/>&lt;ng-template [ngComponentOutlet]="searchAutoComplete"<br/>    [ndcDynamicInputs]="SACinputs"<br/>    [ndcDynamicOutputs]="SACoutputs"<br/>    [ngComponentOutletInjector]="SACinjector"&gt;<br/>&lt;/ng-template&gt;</span></pre><p id="be6b" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">使用这种技术，我们只加载ng-dynamic-component库和少量代码，节省了大量的kb并增加了许多Lighthouse分数。<br/>尽可能多地应用这种技术<strong class="iz hj"/>，例如对于折叠下面的元素、用户菜单、模态、地图、图表等等。<br/>尽量把上面的折叠部分做成静态页面或者至少做很少的处理。</p></div><div class="ab cl ln lo gp lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="hb hc hd he hf"><h2 id="8811" class="lu lv hi bd lw lx ly lz ma mb mc md me jg mf mg mh jk mi mj mk jo ml mm mn mo bi translated">低的</h2><p id="307f" class="pw-post-body-paragraph ix iy hi iz b ja mp ij jc jd mq im jf jg mr ji jj jk ms jm jn jo mt jq jr js hb bi translated">如果您的域中有映像服务器，请使用“预连接”将其添加到index.html:</p><pre class="jv jw jx jy fd mu mv mw mx aw my bi"><span id="0027" class="lu lv hi mv b fi mz na l nb nc">&lt;link href=’<a class="ae jt" href="https://image.my-site.com'" rel="noopener ugc nofollow" target="_blank">https://image.my-site.com'</a> rel=’preconnect’ crossorigin&gt;</span></pre><p id="7532" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果你加载外部字体，做同样的事情，用rel='preload '加载它:</p><pre class="jv jw jx jy fd mu mv mw mx aw my bi"><span id="f004" class="lu lv hi mv b fi mz na l nb nc">&lt;link rel="dns-prefetch" href="<a class="ae jt" href="https://fonts.googleapis.com" rel="noopener ugc nofollow" target="_blank">https://fonts.googleapis.com</a>"&gt;</span><span id="3828" class="lu lv hi mv b fi nd na l nb nc">&lt;link rel="preload" as="style" onload="this.onload=null; this.rel='stylesheet';" href="<a class="ae jt" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400&amp;display=swap" rel="noopener ugc nofollow" target="_blank">https://fonts.googleapis.com/css?family=Source+Sans+Pro:400&amp;display=swap</a>"&gt;</span></pre></div><div class="ab cl ln lo gp lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="hb hc hd he hf"><h2 id="35eb" class="lu lv hi bd lw lx ly lz ma mb mc md me jg mf mg mh jk mi mj mk jo ml mm mn mo bi translated">低的</h2><p id="c1be" class="pw-post-body-paragraph ix iy hi iz b ja mp ij jc jd mq im jf jg mr ji jj jk ms jm jn jo mt jq jr js hb bi translated">使用一个性能更好的函数来克隆对象，而不是lodash的cloneDeep(前提是你不需要复制函数)。</p><pre class="jv jw jx jy fd mu mv mw mx aw my bi"><span id="50f7" class="lu lv hi mv b fi mz na l nb nc">export function deepCopy(o) {<br/>  let newobject = {};<br/>  if (o !== undefined &amp;&amp; o !== null &amp;&amp; o.constructor)<br/>    newobject = new o.constructor();<br/>  return typeof o === 'object' &amp;&amp; o !== null ?<br/>    (Array.isArray(o) ?             <br/>        o.map(e =&gt; deepCopy(e)) : <br/>        Object.keys(o).reduce(<br/>          (r, k) =&gt; (r[k] = deepCopy(o[k]), r), newobject <br/>        )<br/>    ) :<br/>    o;<br/>}</span></pre></div><div class="ab cl ln lo gp lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="hb hc hd he hf"><p id="e395" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">下周我将发布第二部分，那里会有更多有趣的提示和技巧。敬请关注并留下评论！</p><p id="0e2a" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">更新</strong> : Part 2这里是<a class="ae jt" href="https://francesco-cantarella.medium.com/angular-vs-lighthouse-part-2-1ae627ca9aab" rel="noopener"><strong class="iz hj"/></a>！</p></div></div>    
</body>
</html>