<html>
<head>
<title>Building an Animated Slide-in Drawer With React-Spring</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用反作用力弹簧制作一个动画滑入式抽屉</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/building-an-animated-slide-in-drawer-with-react-spring-22a6a54bc4cd?source=collection_archive---------10-----------------------#2021-05-06">https://medium.com/geekculture/building-an-animated-slide-in-drawer-with-react-spring-22a6a54bc4cd?source=collection_archive---------10-----------------------#2021-05-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/12937cf7ad67020fb6820ccbf47fb7e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PBPOrZajfXrOeTfDE4dyFQ.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Photo by <a class="ae iu" href="https://www.pexels.com/@gabby-k?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">Monstera</a> from <a class="ae iu" href="https://www.pexels.com/photo/wood-pattern-mailbox-row-7794456/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">Pexels</a></figcaption></figure><h1 id="f2df" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">目标</h1><p id="40ea" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">作为一名开发人员，我喜欢简单的解决方案，当我在寻找构建它们的步骤时，我觉得像抽屉这样的常见UI模式从来没有向我传达过“哇，这很容易”的信息。此外，安装一个有预建解决方案的npm包是很好的，但有时，这比它的价值更麻烦，最好只是构建自己的东西。如果这些痛点中的任何一个适用于你，那么希望这篇文章能帮助你。</p><p id="5da9" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">这样做的目的是通过使用<a class="ae iu" href="https://react-spring.io/hooks/use-spring" rel="noopener ugc nofollow" target="_blank"> react-spring </a>动画库，在react中构建一个简单而优雅的动画滑入式抽屉。我将介绍几行代码，您将需要这些代码来使滑入功能正常工作，到此结束时，您应该有一个功能完整的动画抽屉组件，您可以将它插入到任何react项目中，为您的web应用程序添加一点趣味🌶。</p><h1 id="04e9" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">TLDR</h1><p id="402e" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">如果您不想阅读代码块解释，而是只想打开代码沙箱来查看最终产品，请一直滚动到底部🙂</p><h1 id="3add" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">代码块</h1></div><div class="ab cl kw kx gp ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="hb hc hd he hf"><h2 id="d16f" class="ld iw hi bd ix le lf lg jb lh li lj jf ke lk ll jj ki lm ln jn km lo lp jr lq bi translated">触发器</h2><pre class="lr ls lt lu fd lv lw lx ly aw lz bi"><span id="26c4" class="ld iw hi lw b fi ma mb l mc md">&lt;button className="openButton" onClick={handleToggleDrawer}&gt;</span><span id="79dd" class="ld iw hi lw b fi me mb l mc md">{isDrawerShowing ? "Close" : "Open"}</span><span id="0ba0" class="ld iw hi lw b fi me mb l mc md">&lt;/button&gt;</span></pre><p id="8ca7" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">我们将用来打开和关闭抽屉的触发器是一个简单的按钮。我们将使用<code class="du mf mg mh lw b">isDrawerShowing</code>状态变量来切换按钮文本。当按钮被点击时，所有的<code class="du mf mg mh lw b">handleToggleDrawer</code>功能就像它的名字一样，在真和假之间切换<code class="du mf mg mh lw b">isDrawerShowing</code>状态。</p></div><div class="ab cl kw kx gp ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="hb hc hd he hf"><h2 id="5d2a" class="ld iw hi bd ix le lf lg jb lh li lj jf ke lk ll jj ki lm ln jn km lo lp jr lq bi translated">抽屉组件</h2><pre class="lr ls lt lu fd lv lw lx ly aw lz bi"><span id="faf9" class="ld iw hi lw b fi ma mb l mc md">&lt;Drawer show={isDrawerShowing} /&gt;</span></pre><p id="6b6d" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">抽屉组件接受一个名为<code class="du mf mg mh lw b">show</code>的道具，它的值再次是<code class="du mf mg mh lw b">isDrawerShowing</code>状态变量。我们将使用这个布尔值让<code class="du mf mg mh lw b">react-spring</code>知道何时重新渲染动画。我可以把抽屉的代码和按钮的代码放在同一个文件里，但是我认为如果每样东西都有自己的家，阅读和理解起来会更简单。写干净代码的人！</p></div><div class="ab cl kw kx gp ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="hb hc hd he hf"><h2 id="fc89" class="ld iw hi bd ix le lf lg jb lh li lj jf ke lk ll jj ki lm ln jn km lo lp jr lq bi translated">动画道具</h2><pre class="lr ls lt lu fd lv lw lx ly aw lz bi"><span id="2df1" class="ld iw hi lw b fi ma mb l mc md">const props = useSpring({</span><span id="3e9c" class="ld iw hi lw b fi me mb l mc md">left: show ? window.innerWidth - 300 : window.innerWidth,</span><span id="3581" class="ld iw hi lw b fi me mb l mc md">position: "absolute",</span><span id="1b81" class="ld iw hi lw b fi me mb l mc md">top: 0,</span><span id="ffd9" class="ld iw hi lw b fi me mb l mc md">backgroundColor: "#806290",</span><span id="aa2c" class="ld iw hi lw b fi me mb l mc md">height: "100vh",</span><span id="6efb" class="ld iw hi lw b fi me mb l mc md">width: "300px"</span><span id="4190" class="ld iw hi lw b fi me mb l mc md">});</span></pre><p id="f8a0" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">这是魔法真正发生的地方。我们使用来自<code class="du mf mg mh lw b">react-spring</code>的<code class="du mf mg mh lw b">useSpring</code>钩子，但是他们有各种各样的其他选项，允许你实现不同的动画效果。通读他们的文档，看看这个库还能做些什么！</p><p id="36c5" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">因此，大多数CSS属性是静态的，我们实际上用来更新动画的唯一值是<code class="du mf mg mh lw b">left</code>属性。当我们传入的<code class="du mf mg mh lw b">show</code>属性是<code class="du mf mg mh lw b">true</code>时，我们让我们的抽屉从屏幕右侧滑出300像素。当它是<code class="du mf mg mh lw b">false</code>时，我们希望left的值是<code class="du mf mg mh lw b">window.innerWidth</code>，这基本上意味着抽屉将隐藏在浏览器屏幕右侧的右侧。(看起来比写起来容易，所以只要玩玩代码沙箱，你就能明白我的意思了🙃)</p><p id="398a" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">注意:如果你想知道我在<code class="du mf mg mh lw b">left</code>属性中看到的<code class="du mf mg mh lw b">— 300</code>是从哪里来的，那是因为我把抽屉的宽度指定为<code class="du mf mg mh lw b">300px</code>。你不需要硬编码这个值，我只是为了简单起见。您可以将宽度设为屏幕总可用宽度的一个百分比，这样可以更具动态性。这真的取决于您的用例以及您正在构建的内容。</p></div><div class="ab cl kw kx gp ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="hb hc hd he hf"><h2 id="4ea5" class="ld iw hi bd ix le lf lg jb lh li lj jf ke lk ll jj ki lm ln jn km lo lp jr lq bi translated">动画div</h2><pre class="lr ls lt lu fd lv lw lx ly aw lz bi"><span id="0d9f" class="ld iw hi lw b fi ma mb l mc md">&lt;animated.div style={props}&gt;</span><span id="e707" class="ld iw hi lw b fi me mb l mc md">&lt;div className="drawer"&gt;Animated Drawer!&lt;/div&gt;</span><span id="5d7f" class="ld iw hi lw b fi me mb l mc md">&lt;/animated.div&gt;</span></pre><p id="e7ff" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">最后一步是将上面定义的道具传递到动画视图中，在本例中是<code class="du mf mg mh lw b">animated.div</code>，它将常规的<code class="du mf mg mh lw b">div</code>元素转化为能够接收和理解<code class="du mf mg mh lw b">react-spring</code>提供的动画属性的元素</p></div><div class="ab cl kw kx gp ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="hb hc hd he hf"><h1 id="e9e5" class="iv iw hi bd ix iy mi ja jb jc mj je jf jg mk ji jj jk ml jm jn jo mm jq jr js bi translated">成品！</h1><figure class="lr ls lt lu fd ij"><div class="bz dy l di"><div class="mn mo l"/></div><figcaption class="iq ir et er es is it bd b be z dx">Ooo ahhh 😍</figcaption></figure><h1 id="ab1c" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">结论</h1><p id="9dec" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">这是一个关于如何使用<code class="du mf mg mh lw b">react-spring.</code>创建滑入式抽屉的超级简单的例子，你应该能够使用这个代码作为起点，并扩展它以获得更复杂的功能，并真正使抽屉在你的个人项目和网络应用中变得生动。我希望你喜欢，甚至可能学到了一些东西！</p><p id="c128" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">如果你最终尝试了<code class="du mf mg mh lw b">react-spring</code>并创造了很酷的动画，我很想看看它们！你可以在评论中给我链接你的代码沙箱，或者发邮件给我，地址是<em class="mp">atriana@protonmail.com。</em></p></div></div>    
</body>
</html>