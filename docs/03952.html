<html>
<head>
<title>Fasten your Node JS Application with a Powerful Caching Mechanism using Redis</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Redis的强大缓存机制来保护您的Node JS应用程序</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/fasten-your-node-js-application-with-a-powerful-caching-mechanism-using-redis-fd76b8aa482f?source=collection_archive---------1-----------------------#2021-06-18">https://medium.com/geekculture/fasten-your-node-js-application-with-a-powerful-caching-mechanism-using-redis-fd76b8aa482f?source=collection_archive---------1-----------------------#2021-06-18</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/9c83f64517566ce7a6d268208af80b48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u8lSUfgCpD7IafLCOkvyDQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Redis Official Logo</figcaption></figure><h1 id="5174" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">为什么缓存如此重要:</h1><p id="f37b" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">缓存是将文件和数据的副本存储在缓存或某个临时空间中的过程。通过使用缓存，我们可以非常快速地获取数据。缓存工具最好的例子就是<a class="ae kq" href="https://www.cloudflare.com/learning/cdn/what-is-caching/" rel="noopener ugc nofollow" target="_blank"> <strong class="ju hj"> Cloudflare </strong> </a> <strong class="ju hj">。</strong>我知道Cloudflare不是唯一的缓存工具，它还有其他功能。</p><p id="7ef1" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated">在应用程序中使用缓存有两个主要原因:</p><ol class=""><li id="3e60" class="kw kx hi ju b jv kr jz ks kd ky kh kz kl la kp lb lc ld le bi translated">节约成本。通过网络发送的数据量减少。</li><li id="5c83" class="kw kx hi ju b jv lf jz lg kd lh kh li kl lj kp lb lc ld le bi translated">响应时间更短。</li></ol></div><div class="ab cl lk ll gp lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="hb hc hd he hf"><h1 id="0256" class="iu iv hi bd iw ix lr iz ja jb ls jd je jf lt jh ji jj lu jl jm jn lv jp jq jr bi translated">缓存过程:</h1><p id="40cb" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">缓存的过程非常简单。假设您想从一个API获取一些数据。在第一次调用中，您将点击API并获取数据，之后您将在缓存中设置或保存该数据。以后想得到同样的数据，不需要打API了。首先，您将检查缓存中是否有可用的数据。如果数据在缓存中可用，那么你将从缓存中获取数据，否则你将命中API。</p></div><div class="ab cl lk ll gp lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="hb hc hd he hf"><blockquote class="lw lx ly"><p id="edd6" class="js jt lz ju b jv kr jx jy jz ks kb kc ma kt kf kg mb ku kj kk mc kv kn ko kp hb bi translated"><strong class="ju hj">在本教程中，首先，我们将从没有Redis的假API中获取数据，然后使用Redis，并使用可视化表示检查响应时间的差异。</strong></p></blockquote><h1 id="20df" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">在Express JS中创建一个简单的服务器:</h1><p id="17e4" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">如果你是NodeJS世界的新手，请阅读我的教程<a class="ae kq" href="https://vsvaibhav2016.medium.com/create-crud-application-in-express-js-9b88a5a94299" rel="noopener"><strong class="ju hj"/></a><strong class="ju hj">。</strong>在本教程中，你将学习如何创建express js服务器和CRUD操作。否则，按照下面的步骤在express js中创建一个简单的服务器。</p><h2 id="0f7f" class="md iv hi bd iw me mf mg ja mh mi mj je kd mk ml ji kh mm mn jm kl mo mp jq mq bi translated">创建package.json文件:</h2><pre class="mr ms mt mu fd mv mw mx my aw mz bi"><span id="0818" class="md iv hi mw b fi na nb l nc nd">npm init -y</span></pre><p id="cd63" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated">上述命令将创建package.json文件。</p><figure class="mr ms mt mu fd ij er es paragraph-image"><div class="er es ne"><img src="../Images/607a2a6b86667fecc4f729b06c888b6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1312/format:webp/1*tJd1b-O95d-xtUvq8v_Vmw.png"/></div><figcaption class="iq ir et er es is it bd b be z dx">The output of <strong class="bd iw">npm init -y</strong></figcaption></figure><h2 id="0269" class="md iv hi bd iw me mf mg ja mh mi mj je kd mk ml ji kh mm mn jm kl mo mp jq mq bi translated">安装所需的软件包:</h2><pre class="mr ms mt mu fd mv mw mx my aw mz bi"><span id="1938" class="md iv hi mw b fi na nb l nc nd">npm install --save express axios</span></pre><figure class="mr ms mt mu fd ij er es paragraph-image"><div class="er es nf"><img src="../Images/4edb82c732f732b131c5422953f9e2dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:810/format:webp/1*-H1-q0tfJOK3NG71v2oiow.png"/></div></figure><p id="0d2f" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated"><strong class="ju hj"> Express JS </strong>是Node JS的框架，而<strong class="ju hj"> Axios </strong>是浏览器和node.js的基于承诺的HTTP客户端</p></div><div class="ab cl lk ll gp lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="hb hc hd he hf"><h2 id="098a" class="md iv hi bd iw me mf mg ja mh mi mj je kd mk ml ji kh mm mn jm kl mo mp jq mq bi translated">使用下面的代码片段创建一个简单的服务器:</h2><p id="5692" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">在根文件夹中创建一个index.js文件，并将以下代码写入该文件。</p><figure class="mr ms mt mu fd ij"><div class="bz dy l di"><div class="ng nh l"/></div></figure><p id="d114" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated">在运行服务器之前，请将启动脚本添加到<strong class="ju hj"> package.json </strong>文件的脚本部分中</p><figure class="mr ms mt mu fd ij er es paragraph-image"><div class="er es ni"><img src="../Images/6f7470c26499569fa89bc4b9646bb31e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1028/format:webp/1*8h2b6_8Qre2PU74cDk7zVw.png"/></div></figure><p id="5738" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated">运行以下命令启动服务器</p><pre class="mr ms mt mu fd mv mw mx my aw mz bi"><span id="ad1c" class="md iv hi mw b fi na nb l nc nd">npm start</span></pre><figure class="mr ms mt mu fd ij er es paragraph-image"><div class="er es nj"><img src="../Images/1409cdcdf00c4e9d7112f52befb51739.png" data-original-src="https://miro.medium.com/v2/resize:fit:1130/format:webp/1*jTIRvwfIreBrNUlW3QkJ7Q.png"/></div></figure><h1 id="de45" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">从假API获取数据:</h1><p id="ba51" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">在本节中，我们将从一个名为<a class="ae kq" href="https://jsonplaceholder.typicode.com/users" rel="noopener ugc nofollow" target="_blank"> JSONPlaceholder </a>的假API中获取数据。这个API对于获取假数据非常有用。</p><p id="5d2c" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated">在这个API调用中，我们将通过提供电子邮件地址来获取用户数据。请参考以下代码:</p><figure class="mr ms mt mu fd ij"><div class="bz dy l di"><div class="ng nh l"/></div></figure><p id="5a79" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated">在上面的代码中，我们需要Axios包，并为假API URL创建MOCK_API。在API调用中，我们将电子邮件作为参数传递，并过滤出用户的详细信息，然后在响应中获取它。</p><figure class="mr ms mt mu fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nk"><img src="../Images/b197f88b82668d1e492c624db775e3f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7CJGt920ExJMZYU9o5fIXg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx"><strong class="bd iw">It’s taken 1164 ms for sending the response</strong></figcaption></figure><p id="da46" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated">我正在使用调用REST API调用的<strong class="ju hj"> POSTMAN </strong>工具。在上面的截图中，我们可以清楚的看到<strong class="ju hj">的响应时间</strong>也就是<strong class="ju hj"> <em class="lz"> 1164 ms </em> </strong></p></div><div class="ab cl lk ll gp lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="hb hc hd he hf"><h1 id="3188" class="iu iv hi bd iw ix lr iz ja jb ls jd je jf lt jh ji jj lu jl jm jn lv jp jq jr bi translated">Redis简介:</h1><p id="7995" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">Redis是一个开源的内存数据存储，用作数据库、消息代理和缓存。Redis以其强大的高速缓存管理而闻名，因为它非常快。</p><p id="9b44" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated">Redis数据库的其他特点是:</p><ol class=""><li id="cca5" class="kw kx hi ju b jv kr jz ks kd ky kh kz kl la kp lb lc ld le bi translated">发布/订阅</li><li id="1725" class="kw kx hi ju b jv lf jz lg kd lh kh li kl lj kp lb lc ld le bi translated">处理</li><li id="ba38" class="kw kx hi ju b jv lf jz lg kd lh kh li kl lj kp lb lc ld le bi translated">自动故障转移</li></ol></div><div class="ab cl lk ll gp lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="hb hc hd he hf"><h1 id="7831" class="iu iv hi bd iw ix lr iz ja jb ls jd je jf lt jh ji jj lu jl jm jn lv jp jq jr bi translated">安装Redis:</h1><pre class="mr ms mt mu fd mv mw mx my aw mz bi"><span id="42cb" class="md iv hi mw b fi na nb l nc nd">wget <a class="ae kq" href="http://download.redis.io/redis-stable.tar.gz" rel="noopener ugc nofollow" target="_blank">http://download.redis.io/redis-stable.tar.gz</a><br/>tar xvzf redis-stable.tar.gz<br/>cd redis-stable<br/>make<br/>make install</span></pre><p id="f426" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated">之后，您可以运行该命令</p><pre class="mr ms mt mu fd mv mw mx my aw mz bi"><span id="9d1b" class="md iv hi mw b fi na nb l nc nd">redis-server</span></pre><figure class="mr ms mt mu fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nl"><img src="../Images/dcd1ac788609176366ddc739bd9e8b69.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xldjIXvDn3a-dAs5Z-FzUg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Running redis server</figcaption></figure></div><div class="ab cl lk ll gp lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="hb hc hd he hf"><h1 id="cb2f" class="iu iv hi bd iw ix lr iz ja jb ls jd je jf lt jh ji jj lu jl jm jn lv jp jq jr bi translated">使用Redis创建API:</h1><p id="a492" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">首先，我们需要通过运行下面的命令来安装<strong class="ju hj"> redis </strong>包:</p><pre class="mr ms mt mu fd mv mw mx my aw mz bi"><span id="e153" class="md iv hi mw b fi na nb l nc nd">npm install --save redis</span></pre><figure class="mr ms mt mu fd ij er es paragraph-image"><div class="er es nm"><img src="../Images/098848535af515f26210a93eee2cc889.png" data-original-src="https://miro.medium.com/v2/resize:fit:1336/format:webp/1*LQrzE-6ej20FLR2xEXC0rg.png"/></div><figcaption class="iq ir et er es is it bd b be z dx">Installing npm package for Redis</figcaption></figure><p id="1510" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated">安装Redis包之后，我们需要安装并创建Redis客户机。</p><pre class="mr ms mt mu fd mv mw mx my aw mz bi"><span id="e7e1" class="md iv hi mw b fi na nb l nc nd">const redis = require('redis');<br/>const redisClient = redis.createClient(6379);</span></pre><blockquote class="lw lx ly"><p id="e9d2" class="js jt lz ju b jv kr jx jy jz ks kb kc ma kt kf kg mb ku kj kk mc kv kn ko kp hb bi translated">Redis的默认端口是6379</p></blockquote><p id="34ed" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated">之后，我们用Redis数据库创建了一条路由。首先，我们将检查Redis中的数据是否可用。如果数据在Redis中可用，则从Redis获取，否则从API获取。</p><figure class="mr ms mt mu fd ij"><div class="bz dy l di"><div class="ng nh l"/></div></figure><figure class="mr ms mt mu fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nn"><img src="../Images/5f002efcb83f59255f297a8ff019d753.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vejB0fMsQNesfrUXhCxXSA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Getting data from the cache using Redis</figcaption></figure></div><div class="ab cl lk ll gp lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="hb hc hd he hf"><p id="f76d" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated">请注意，这只是如何用Redis缓存节点JS中的API结果的一小部分工作。如果你想增加关于Redis的知识，请阅读Redis的<a class="ae kq" href="https://redis.io/documentation" rel="noopener ugc nofollow" target="_blank"> <strong class="ju hj"> <em class="lz">文档</em> </strong> </a>。</p><p id="fd53" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated">如果你想访问整个代码，请检查<a class="ae kq" href="https://github.com/imvsharma/redis-nodejs" rel="noopener ugc nofollow" target="_blank"> <strong class="ju hj"> <em class="lz">我的Github repo </em> </strong> </a>给我一个开始，叉它使用代码。</p><h1 id="2238" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">任何自由工作，请给我一个机会</h1><p id="1fc8" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">如果你有任何自由职业者的工作或项目。请与我联系或发电子邮件到thedeveloperfamily@gmail.com。</p></div></div>    
</body>
</html>