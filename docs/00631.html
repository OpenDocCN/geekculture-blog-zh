<html>
<head>
<title>Ways to Write JQuery Reactively</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">被动编写JQuery的方法</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/ways-to-write-jquery-reactively-988c72ec2782?source=collection_archive---------13-----------------------#2021-03-08">https://medium.com/geekculture/ways-to-write-jquery-reactively-988c72ec2782?source=collection_archive---------13-----------------------#2021-03-08</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/acd5d33eec9ed423d6774f05da045c13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2pgs7sRmKI-WiUtn"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Photo by <a class="ae iu" href="https://unsplash.com/@pankajpatel?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Pankaj Patel</a> on <a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="1f84" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">即使现在是2021年，前端框架的三大支柱几乎已经主导了前端开发工具链。但是仍然有一些公司或个人因为一些原因仍然坚持使用JQuery。</p><p id="b392" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果您曾经使用JQuery来构建您的前端，您可能以前遇到过这个问题。</p><figure class="jt ju jv jw fd ij"><div class="bz dy l di"><div class="jx jy l"/></div><figcaption class="iq ir et er es is it bd b be z dx">version with duplicate UI logic</figcaption></figure><p id="a946" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在上面的gist中显示了一个使用JQuery隐藏一些HTML元素的例子，并且相同的逻辑在同一个文件中是重复的。随着代码库变得越来越大，这将使代码成为需要维护的头文件。您需要搜索所有的代码来修改这段逻辑。</p></div><div class="ab cl jz ka gp kb" role="separator"><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke"/></div><div class="hb hc hd he hf"><blockquote class="kg kh ki"><p id="3945" class="iv iw kj ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hb bi translated">我们能做得更好吗？</p><p id="4b29" class="iv iw kj ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hb bi translated">答案是肯定的。</p></blockquote></div><div class="ab cl jz ka gp kb" role="separator"><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke"/></div><div class="hb hc hd he hf"><p id="f7df" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们可以将这个逻辑提取到一个函数中，并像下面的代码一样重用它。</p><figure class="jt ju jv jw fd ij"><div class="bz dy l di"><div class="jx jy l"/></div><figcaption class="iq ir et er es is it bd b be z dx">better version with centralized UI logic</figcaption></figure><p id="7643" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这个版本中，我们通过将show HTML元素逻辑放在一起，改进了代码的可维护性。但是当显示/隐藏元素时，我们仍然需要调用toggleShowSomeElement函数。</p></div><div class="ab cl jz ka gp kb" role="separator"><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke"/></div><div class="hb hc hd he hf"><blockquote class="kg kh ki"><p id="a3a9" class="iv iw kj ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hb bi translated">我们能做得更好吗？</p><p id="a81e" class="iv iw kj ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hb bi translated">答案是肯定的。</p></blockquote></div><div class="ab cl jz ka gp kb" role="separator"><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke"/></div><div class="hb hc hd he hf"><blockquote class="kn"><p id="7a0f" class="ko kp hi bd kq kr ks kt ku kv kw js dx translated">UI = fn(状态)</p></blockquote><p id="5052" class="pw-post-body-paragraph iv iw hi ix b iy kx ja jb jc ky je jf jg kz ji jj jk la jm jn jo lb jq jr js hb bi translated">现代前端框架认为UI是状态的函数。这意味着UI应该反映状态，如果状态改变了，那么UI也会改变。</p><p id="d1b7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">其中一些框架使用反应式编程模式来实现这一点。当状态改变时，它会通知用户界面进行自我更新。</p><p id="8768" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">将此功能放入我们的JQuery代码将完成以下工作:</p><ol class=""><li id="d37d" class="lc ld hi ix b iy iz jc jd jg le jk lf jo lg js lh li lj lk bi translated">使用JQuery内置函数实现发布-订阅模式。让我们的用户界面在状态改变时自我更新。</li><li id="9efa" class="lc ld hi ix b iy ll jc lm jg ln jk lo jo lp js lh li lj lk bi translated">添加一些自定义HTML属性，将状态绑定到HTML元素中。</li><li id="2f04" class="lc ld hi ix b iy ll jc lm jg ln jk lo jo lp js lh li lj lk bi translated">将所有事件监听器绑定到一起。</li><li id="24e6" class="lc ld hi ix b iy ll jc lm jg ln jk lo jo lp js lh li lj lk bi translated">用初始状态初始化用户界面。</li></ol><p id="99f0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这就是当我们完成所有工作时代码的工作方式。通过这样做，我们可以通过订阅状态更改来更改状态以更新UI。</p><figure class="jt ju jv jw fd ij"><div class="bz dy l di"><div class="lq jy l"/></div></figure><p id="dc39" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们一步一步地实现这个功能:</p><h2 id="63a5" class="lr ls hi bd lt lu lv lw lx ly lz ma mb jg mc md me jk mf mg mh jo mi mj mk ml bi translated">1.使用JQuery内置函数实现发布-订阅模式。让我们的用户界面在状态改变时自我更新。</h2><p id="c716" class="pw-post-body-paragraph iv iw hi ix b iy mm ja jb jc mn je jf jg mo ji jj jk mp jm jn jo mq jq jr js hb bi translated">在本节中，我们将使用杠杆<a class="ae iu" href="https://api.jquery.com/trigger/" rel="noopener ugc nofollow" target="_blank"> <strong class="ix hj">。JQuery中的trigger() </strong> </a>函数在任何状态改变时发布事件。我们将创建一个名为<strong class="ix hj">的函数。</strong></p><figure class="jt ju jv jw fd ij"><div class="bz dy l di"><div class="jx jy l"/></div><figcaption class="iq ir et er es is it bd b be z dx">updateState</figcaption></figure><h2 id="72af" class="lr ls hi bd lt lu lv lw lx ly lz ma mb jg mc md me jk mf mg mh jo mi mj mk ml bi translated"><strong class="ak"> 2。添加一些自定义HTML属性，将状态绑定到HTML元素中。</strong></h2><figure class="jt ju jv jw fd ij"><div class="bz dy l di"><div class="jx jy l"/></div></figure><p id="821e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这个html文件中，我们添加了一些自定义HTML属性:</p><ol class=""><li id="2665" class="lc ld hi ix b iy iz jc jd jg le jk lf jo lg js lh li lj lk bi translated">数据键:状态的键，我们将使用它来绑定状态和元素。</li><li id="ef63" class="lc ld hi ix b iy ll jc lm jg ln jk lo jo lp js lh li lj lk bi translated">数据-文本:当状态改变时，具有该属性的HMTL元素将更新值/文本。</li><li id="8043" class="lc ld hi ix b iy ll jc lm jg ln jk lo jo lp js lh li lj lk bi translated">data-class+data-toggle:data-class属性将让我们的代码知道我们想要在它上面切换类，data-toggle将定义当状态为true/false时您想要切换的类；</li><li id="b4c8" class="lc ld hi ix b iy ll jc lm jg ln jk lo jo lp js lh li lj lk bi translated">data-attr+ data-toggle:和上面那个一样，data-attr属性会让我们的代码知道我们要在它上面toggle attribute，data-toggle会定义状态为true/false时你要切换的一个/多个属性；</li></ol><p id="833b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们完成了HTML部分，让我们添加一些逻辑来用这些Html属性更新UI！</p><figure class="jt ju jv jw fd ij"><div class="bz dy l di"><div class="jx jy l"/></div></figure><p id="4b25" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这一节中，我们将接收已经更新的状态的键和值，然后我们将状态更新到用自定义属性标记的相应HTML元素上。</p><h2 id="b35b" class="lr ls hi bd lt lu lv lw lx ly lz ma mb jg mc md me jk mf mg mh jo mi mj mk ml bi translated">3.将所有事件监听器绑定到一起。</h2><figure class="jt ju jv jw fd ij"><div class="bz dy l di"><div class="jx jy l"/></div></figure><p id="b81e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在本节中，我们将使用<strong class="ix hj"> $(state)绑定按钮事件并添加订阅状态更改。on() </strong>并将回调函数<strong class="ix hj"> updateElement() </strong>附加到它，以确保UI会在状态改变后更新。</p><h2 id="3640" class="lr ls hi bd lt lu lv lw lx ly lz ma mb jg mc md me jk mf mg mh jo mi mj mk ml bi translated">4.用初始状态初始化用户界面。</h2><figure class="jt ju jv jw fd ij"><div class="bz dy l di"><div class="jx jy l"/></div></figure><p id="2b6d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这一节中，当dom准备好时，我们通过调用<strong class="ix hj"> init() </strong>和<strong class="ix hj"> bindEvents() </strong>来总结我们在上一步中完成的所有事情(只是为了确保元素被呈现)。</p></div><div class="ab cl jz ka gp kb" role="separator"><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke"/></div><div class="hb hc hd he hf"><p id="2a10" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这就是利用现代前端框架的概念编写JQuery的全部内容，感谢阅读！</p></div></div>    
</body>
</html>