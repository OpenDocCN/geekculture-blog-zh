<html>
<head>
<title>Hidden C# Gem Codes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">隐藏的C# Gem代码</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/hidden-c-gem-codes-932757391478?source=collection_archive---------1-----------------------#2022-07-30">https://medium.com/geekculture/hidden-c-gem-codes-932757391478?source=collection_archive---------1-----------------------#2022-07-30</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/34f5605115e8a88486ef83299d055689.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mUynTxg7Te5zONSM-aZJOA.jpeg"/></div></div></figure><p id="90b4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">嗨，今天我们将谈论有趣和有用的不太为人所知的C#代码。</p><blockquote class="jo jp jq"><p id="1147" class="iq ir jr is b it iu iv iw ix iy iz ja js jc jd je jt jg jh ji ju jk jl jm jn hb bi translated"><strong class="is hj"> 1。第一个例子是关于在类构造函数中使用“out参数”:</strong></p></blockquote><p id="0a77" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">所以当我们向类构造函数发送任何out参数时，我们不需要返回任何东西。只需要改变<em class="jr"> array3List </em>的引用就可以了。</p><ul class=""><li id="d3b5" class="jv jw hi is b it iu ix iy jb jx jf jy jj jz jn ka kb kc kd bi translated">我们将使用“<em class="jr"> arrayList </em>获得int[ ]参数，并将其除以3，最后我们将把所有数组部分放到out参数2维int[，]”<em class="jr">array 3 list</em>。</li></ul><figure class="kf kg kh ki fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ke"><img src="../Images/ba63672742983d4fe2e6ac00ef5572d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W1FKcDKoPdqrvHUJ4WDR1w.png"/></div></div></figure><ul class=""><li id="ca21" class="jv jw hi is b it iu ix iy jb jx jf jy jj jz jn ka kb kc kd bi translated">我们将对数组进行切片，并将每个部分的长度设置为3。我们将设置int[，] 2维数组的长度，第一列是数组的个数，第二列当然是数组的长度，所以3。我们将使用一个计数器来迭代数组列表的每一项。</li></ul><figure class="kf kg kh ki fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kj"><img src="../Images/1cdcd9df986460f74f47c3e02060f33a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5fByebN-VOTm5m3bRghDBw.png"/></div></div></figure><ul class=""><li id="14d6" class="jv jw hi is b it iu ix iy jb jx jf jy jj jz jn ka kb kc kd bi translated">我们将循环直到数组列表计数。我们将从arrayList中为每个out参数数组array3List获取3项。</li><li id="b6f3" class="jv jw hi is b it kk ix kl jb km jf kn jj ko jn ka kb kc kd bi translated">“如果counter ≥arrayList。Length" = &gt;我们将编写这个条件，因为有些数组计数可能小于3。</li><li id="3539" class="jv jw hi is b it kk ix kl jb km jf kn jj ko jn ka kb kc kd bi translated">" dividedList[i，num] = arrayList[counter]":我们会将arrayList中的每一项设置为int[，] 2维数组。</li><li id="ca40" class="jv jw hi is b it kk ix kl jb km jf kn jj ko jn ka kb kc kd bi translated">“array3List = dividedList”:最后我们将为结果设置array3List。</li></ul><figure class="kf kg kh ki fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kp"><img src="../Images/52fc2b7ff785444c4d8cac9826e4f647.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JLJnMhoI3OLceVbU6F3SYQ.png"/></div></div></figure><p id="1c33" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">Program.cs/ArrayDivedOperation:</strong></p><pre class="kf kg kh ki fd kq kr ks kt aw ku bi"><span id="0f25" class="kv kw hi kr b fi kx ky l kz la">public class ArrayDivedOperation<br/>{<br/>   public ArrayDivedOperation(int[] arrayList, out int[,] array3List)<br/>   {<br/>      int count = (int)Math.Ceiling((double)arrayList.Length / 3);<br/>      int[,] dividedList = new int[count, 3];<br/>      int counter = 0;<br/>      for (int i = 0; i &lt; count; i++)<br/>      {<br/>         for (int num = 0; num &lt; 3; num++)<br/>         {<br/>            if (counter &gt;= arrayList.Length) { break; }<br/>            dividedList[i, num] = arrayList[counter];<br/>            counter++;<br/>         }<br/>    }<br/>    array3List = dividedList;<br/>}</span></pre><ul class=""><li id="21b6" class="jv jw hi is b it iu ix iy jb jx jf jy jj jz jn ka kb kc kd bi translated">int[]数组是我们的测试数组。</li><li id="5b0e" class="jv jw hi is b it kk ix kl jb km jf kn jj ko jn ka kb kc kd bi translated">int[，] list3Group是我们的out参数结果数组。</li><li id="2fca" class="jv jw hi is b it kk ix kl jb km jf kn jj ko jn ka kb kc kd bi translated">ArrayDivedOperation arraydived = new(array，out list3Group):我们将创建ArrayDivedOperation类并在构造函数上发送参数。</li><li id="270e" class="jv jw hi is b it kk ix kl jb km jf kn jj ko jn ka kb kc kd bi translated">列表3组。GetLength(0):我们将在list3Group的每个数组中循环。</li><li id="d2b1" class="jv jw hi is b it kk ix kl jb km jf kn jj ko jn ka kb kc kd bi translated">for(int I2 = 0；i2 &lt; 3; i2++): We will get every column per array in list3Group</li><li id="6201" class="jv jw hi is b it kk ix kl jb km jf kn jj ko jn ka kb kc kd bi translated">Console.Write(list3Group[i, i2] + “,”): We will write every item by 3 groups on console.</li></ul><p id="18d1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> Program.cs/Main() : </strong></p><pre class="kf kg kh ki fd kq kr ks kt aw ku bi"><span id="22cb" class="kv kw hi kr b fi kx ky l kz la">static void Main(string[] args)<br/>{<br/>    int[] array = new int[] { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13 };<br/>    int[,] list3Group = new int[array.Length, 3];<br/>    ArrayDivedOperation arrayDiveded = new(array, out list3Group);<br/>    for (int i = 0; i &lt; list3Group.GetLength(0); i++)<br/>    {<br/>       for (int i2 = 0; i2 &lt; 3; i2++)<br/>       {<br/>          Console.Write(list3Group[i, i2] + ",");<br/>       }<br/>       Console.WriteLine();<br/>    }<br/> }</span></pre><p id="8b10" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">结果:<em class="jr">最后，我们改变了类构造函数上out参数“array3List”的引用。所以我们不需要返回任何参数。</em>T15】</strong></p><figure class="kf kg kh ki fd ij er es paragraph-image"><div class="er es lb"><img src="../Images/7921b74b134dc1b3b036ed3d8d47dfdb.png" data-original-src="https://miro.medium.com/v2/resize:fit:272/format:webp/1*iYpSk_97iko2mv195tAQdA.png"/></div></figure><blockquote class="jo jp jq"><p id="f425" class="iq ir jr is b it iu iv iw ix iy iz ja js jc jd je jt jg jh ji ju jk jl jm jn hb bi translated"><strong class="is hj"> 2。当您使用“；”时，C#可以识别正数、负数和零字符串格式。</strong></p></blockquote><p id="1261" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">程序. cs: </strong></p><pre class="kf kg kh ki fd kq kr ks kt aw ku bi"><span id="3522" class="kv kw hi kr b fi kx ky l kz la">int[] arr = { -1, -3, 0, 0, 2, 5};<br/>foreach (var item in arr)<br/>{<br/>   Console.WriteLine($"{item} is {item:positive number;negative number;zero}");<br/>}</span></pre><p id="3c1e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">结果:</strong></p><figure class="kf kg kh ki fd ij er es paragraph-image"><div class="er es lc"><img src="../Images/025ead12c841af6001dd8f4466c7e129.png" data-original-src="https://miro.medium.com/v2/resize:fit:652/format:webp/1*0W8SvLtAU3FVJrZR3BuNVg.png"/></div></figure><blockquote class="jo jp jq"><p id="6352" class="iq ir jr is b it iu iv iw ix iy iz ja js jc jd je jt jg jh ji ju jk jl jm jn hb bi translated"><strong class="is hj"> 3。</strong>在C#11上预览你可以使用<strong class="is hj"><em class="hi"/></strong>【列表模式】中的<strong class="is hj"> <em class="hi">模式匹配</em> </strong>。并且可以“<strong class="is hj"> Sum() </strong>”数组中间的数字。我认为微软在未来会将“列表模式”发展得更远。</p></blockquote><p id="a1f3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> Program.cs: </strong></p><pre class="kf kg kh ki fd kq kr ks kt aw ku bi"><span id="fbca" class="kv kw hi kr b fi kx ky l kz la">int[] arr = { 4, 6, 2, 8, 10 };<br/>int result = arr switch<br/>{<br/>   [] =&gt; 0,<br/>   [_, int second] =&gt; second,<br/>   [_, .. int[] middle, _] =&gt; middle.Sum(),<br/>   _=&gt;-1<br/>};<br/>Console.WriteLine(result); //16</span></pre><p id="d7b8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">结果:</strong></p><figure class="kf kg kh ki fd ij er es paragraph-image"><div class="er es ld"><img src="../Images/90b29f373032f60962bc5ef3c377cefc.png" data-original-src="https://miro.medium.com/v2/resize:fit:568/format:webp/1*kKfFYZvd1QNpWnrEHsl6HQ.png"/></div></figure><blockquote class="jo jp jq"><p id="db33" class="iq ir jr is b it iu iv iw ix iy iz ja js jc jd je jt jg jh ji ju jk jl jm jn hb bi translated"><strong class="is hj"> 4。在C#11预览版中，你可以创建通用属性。将复杂类型参数设置为自定义属性类怎么样:)</strong></p></blockquote><ul class=""><li id="ea8a" class="jv jw hi is b it iu ix iy jb jx jf jy jj jz jn ka kb kc kd bi translated">“基础模型”是我们的根模型。所有的Bussines模型都继承自“BaseModel”。用户模式和产品模式是我们的商业模式。</li></ul><figure class="kf kg kh ki fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es le"><img src="../Images/1c46b49150c0bf84bbe15bacaa106e89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1Y0xMaxQVHXxfGRfCTs5Fg.png"/></div></div></figure><ul class=""><li id="5348" class="jv jw hi is b it iu ix iy jb jx jf jy jj jz jn ka kb kc kd bi translated">IResponseModel <t>是我们的通用属性类interface。t继承自BaseModel。所以用户或产品型号可以用“T”代替。</t></li><li id="c4ac" class="jv jw hi is b it kk ix kl jb km jf kn jj ko jn ka kb kc kd bi translated">泛型ResponseAttribute <t>继承自IResponseModel，因此T也必须来自“BaseModel”。</t></li><li id="d1ef" class="jv jw hi is b it kk ix kl jb km jf kn jj ko jn ka kb kc kd bi translated">ResponseAttribute在构造函数上接受3个参数。字符串消息、成功和测试数据属性。“数据”参数将通过使用反序列化<t>()方法来设置。字符串参数转换为类。在本例中，它是用户或产品类别。</t></li><li id="116d" class="jv jw hi is b it kk ix kl jb km jf kn jj ko jn ka kb kc kd bi translated">最后，由于IResponseModel <t>继承，必须实现WriteModel()方法。它用于将“T”型号名称、电子邮件和Id打印到控制台。</t></li></ul><figure class="kf kg kh ki fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lf"><img src="../Images/5f850a6dd9ce8d283d037fd13957fca0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D69vZSolUcaK1bjctQfsQg.png"/></div></div></figure><ul class=""><li id="9cd2" class="jv jw hi is b it iu ix iy jb jx jf jy jj jz jn ka kb kc kd bi translated">只能将string、int或date等基本类型设置为属性类的参数。因此，要将用户或产品类设置为<strong class="is hj"> &lt; T &gt; </strong>数据的参数，我们必须将它们转换为JSON字符串，如下所示。接下来，我们为用户和产品ResponseAttribute设置字符串消息参数和bool成功参数。</li></ul><figure class="kf kg kh ki fd ij er es paragraph-image"><div class="er es lg"><img src="../Images/194dc06801c12ced0f42d06f40572bc3.png" data-original-src="https://miro.medium.com/v2/resize:fit:880/format:webp/1*8WteMJBncmEJpf_bSV2Gkg.png"/></div><figcaption class="lh li et er es lj lk bd b be z dx"><strong class="bd ll">Json String Example T Data “User”</strong></figcaption></figure><figure class="kf kg kh ki fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lm"><img src="../Images/2c07cd5bfd4e65481df38058c7bb51b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uENqHyWnkBkUB-75L_LFKw.png"/></div></div></figure><ul class=""><li id="dc2e" class="jv jw hi is b it iu ix iy jb jx jf jy jj jz jn ka kb kc kd bi translated">SaveUserLog()方法表示<user>，SaveProduct()方法表示<product>表ResponseModel。我们将得到这些方法的引用，通过使用“<strong class="is hj"><em class="jr">【GetRuntimeMethod】</em></strong><em class="jr">()</em>”反射方法。而我们将通过使用“<strong class="is hj"><em class="jr">GetCustomAttribute</em></strong>()”反射方法获得它们的属性。</product></user></li><li id="df96" class="jv jw hi is b it kk ix kl jb km jf kn jj ko jn ka kb kc kd bi translated">最后我们会得到ResponseAttribute <user>和ResponseAttribute <product>类，并调用它们的WriteModel()方法，该方法继承自“IResponseModel <t>”。</t></product></user></li></ul><figure class="kf kg kh ki fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ln"><img src="../Images/96055e5be7af0e0409c8111a35e737eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lfrai7vC8uHXeOpnzIJQOQ.png"/></div></div></figure><ul class=""><li id="e23e" class="jv jw hi is b it iu ix iy jb jx jf jy jj jz jn ka kb kc kd bi translated">这是我们的静态Main()方法。我们在这里将这些方法称为“<em class="jr"> SaveUserLog() </em>”和“<em class="jr"> SaveProductLog() </em>”进行测试。</li></ul><figure class="kf kg kh ki fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lo"><img src="../Images/af64ffe40eb5bc53fc560dfd54aca8cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pmG8oKkydpYDW3z5ME-ybA.png"/></div></div><figcaption class="lh li et er es lj lk bd b be z dx"><strong class="bd ll">Static Main() Method</strong></figcaption></figure><p id="467e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">这是结果屏幕:</strong>我们将从方法属性(<strong class="is hj"><em class="jr">response Attribute&lt;T&gt;</em></strong>)中获取用户和产品模型，并使用Deserialize()方法将这个&lt; T &gt;数据参数打印到控制台。</p><figure class="kf kg kh ki fd ij er es paragraph-image"><div class="er es lp"><img src="../Images/bd0b4b690b66deeba3a06a3ab6a98cfc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1344/format:webp/1*ntRgcSiqkXtBeXV-803joQ.png"/></div><figcaption class="lh li et er es lj lk bd b be z dx"><strong class="bd ll">Final Result Screen</strong></figcaption></figure><p id="a3ed" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这个例子中，我们使用通用的CustomAttribute将一个类作为参数。通常在C#中，CustomAttribute类不能将复杂类型作为参数。但是使用GenericAttribute <t>，可以通过使用Deserialize <t>()方法将string json转换为spesific类。</t></t></p><p id="a60e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">程序. cs: </strong></p><figure class="kf kg kh ki fd ij"><div class="bz dy l di"><div class="lq lr l"/></div></figure><p id="2bb8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">结论:</strong></p><p id="37fa" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">即使我已经写了20年的C#，它仍然让我感到惊讶。这是因为除了持续创新和改进之外，它还被设计用于许多不同的领域。</p><p id="8b8d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下一篇文章再见。</p><figure class="kf kg kh ki fd ij"><div class="bz dy l di"><div class="ls lr l"/></div><figcaption class="lh li et er es lj lk bd b be z dx"><strong class="ak">Thank You For Reading..</strong></figcaption></figure><p id="1e86" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="jr">“如果你读到现在，首先感谢你的耐心和支持。欢迎大家来我的博客</em><a class="ae lt" href="http://www.borakasmer.com/" rel="noopener ugc nofollow" target="_blank"><em class="jr"/><strong class="is hj"><em class="jr"/></strong></a><strong class="is hj"><em class="jr"/></strong><em class="jr">了解更多！”</em></p></div></div>    
</body>
</html>