# 在 Linux Shell 中管理输入和输出流

> 原文：<https://medium.com/geekculture/managing-input-and-output-streams-in-the-linux-shell-bff3eeb05f8a?source=collection_archive---------11----------------------->

![](img/45b62854424bc292f8e845b0d8955b10.png)

在这篇 Linux 教程中，我将介绍如何通过使用重定向和管道在命令行中管理输入和输出流。

# 介绍

重定向标准输入和输出流非常有用。那么，什么是标准流呢？它们是:

*   标准输入
*   标准输出
*   标准误差

然后，我们将把一个命令的输出通过管道传输到另一个命令的输入。之后，我们将检查发送输出到突出输出和一个文件。

# 标准流

Bash，默认的 [*Linux shell*](https://aindien.com/how-to-get-started-with-linux.html) ，接收输入并以字符流的形式发送输出。我们通常键入输入。输出是您在窗口中看到的字符流。这个字符流通常是命令的结果。

“Stdin”是标准的输入流。主要目的是为命令提供输入。“Stdout”是标准输出流，显示命令的输出。“Stderr”显示命令的错误输出。

输入流为程序提供输入。我们通过使用终端来做到这一点。输出流向我们展示了命令输出。如果有错误，将显示标准错误流。

这里我需要做的一个重要区别是这是文件重定向。信息从文件中提取或发送到文件中。这就是重定向的目的。

# 文件描述符

每种类型的输入和输出都有一个与之相关的文件描述符。这些是:

*   标准输入= 0
*   stdout = 1
*   stderr = 2

重定向是关于文件描述符的。当 Bash 打开时，stdin、stdout 和 stderr 的文件描述符也会打开。文件描述符很有趣。你可以制作更多的，读取，写入，关闭它们。你可以在重定向操作符前使用它们来说明你想做什么。如果不使用它们，默认为“1”选项或输出。

# 重定向输出

让我们从将输出重定向到一个文件开始。我经常这样做，而且非常有用。我们首先需要讨论的是输出重定向操作符，>或> >。他们做不同的事情，所以不要混淆。

如果我用>重定向一个命令的输出，目标文件就会被创建或覆盖。您必须有适当的权限才能写入该文件。此操作将销毁文件中的所有数据，如果文件中已经有数据的话。

```
ls -l 1> contents.txt
```

将创建 contents.txt 文件。前一个命令的输出被添加到文件中。

```
cat contents.txt
```

现在，让我们使用>>操作符。如果输出文件不存在，将会创建它。如果文件存在，新数据将被添加到末尾。

```
pwd 2>> contents.txtcat contents.txt
```

因为我们使用了>>操作符，所以来自“pwd”的信息被添加到文件的末尾。

另一个有用的过程是将 stderr 重定向到一个文件，这样您可以在以后检查它。你这样做:

```
ls x 2>> error.txt
```

这会将前一个命令的输出错误保存到文件中。

另一个好的技巧是将输出和错误信息一次重定向到一个文件。

```
ls x &>> error.txt
```

如你所见，信息就在那里。

# 重定向输入

这是捕获一个输出，并将其作为输入传递给其他东西。捕获一个文件的内容是经常要做的。然后我们可以处理内容。我过去不得不做的事情是将文件的内容按字母顺序排序并显示出来。我们可以通过以下方式实现这一点:

```
sort 0< pokemon.txt
```

这个文本中有一个口袋妖怪的列表，我想按字母顺序显示这个列表。这个命令可以做到这一点。0 表示标准输入的文件描述符。对了，这不是我之前说的工作例子。我只是为这个例子做了这个列表。

因此，使用间接输入，您可以用任意数量的命令处理文件的内容。你的想象力是极限。

您也可以再次重定向此信息。例如，如果我想将排序后的结果发送到一个新文件中，这很容易做到。

```
sort 0< pokemon.txt 1> sorted-pokemon.txt
```

这个命令获取原始文件的内容并按字母顺序排序。然后，它用排序后的信息创建一个新文件。如果你必须经常这样做，这是一个很好的技巧。

# 管道输出

管道类似于重定向。不过，它也有一些不同之处。它最常用于获取一个命令的输出，并将其作为另一个命令的输入。您可以将几个命令和管道链接在一起。这些命令可以使用任何适用的参数。这为完成任务提供了很好的灵活性。

原始输入也可以来自文件。为此，您可以使用典型的输入重定向。然后，您只需使用管道设置一系列命令，这取决于您想要完成的任务。

使用管道的主要目的是处理来自命令的信息，并将其发送给其他命令。可以使用任何接受流输入的命令。

*   分类
*   可做文件内的字符串查找
*   限位开关（Limit Switch）

上面的这些命令很常用于管道。就像我上面提到的，许多命令可以使用管道。

```
ifconfig | grep 10
```

你也可以这样做:

```
ls | wc -l
```

这将给你一个当前目录下的文件列表。

管道有很多可能性。实验会有很大帮助，并且让你习惯命令行。

# 使用 Xargs 执行

xargs 命令从标准输入中读取数据。它可以构建和执行后续命令。它将使用这个输入作为参数。如果没有为 xargs 指定额外的命令，默认情况下它将使用 echo。

“xargs”命令接受多行输入，并在一行中提供。

```
xargs < pokemon.txt
```

列出这个文件的内容，它在一行中完成，用空格分开。

如果你在一个目录中有几个文件，你可以很容易地找到字数和其他信息。

```
ls *.txt | xargs wc
```

这将列出当前目录中的所有文本文件，并一次给出所有文件的字数统计信息。你可以用“xargs”做更多的事情，这是一个有用的命令。

# 分割您的输出

分割输出在某些情况下很有用。例如，当您想在屏幕上显示输出，同时将它发送到一个文件。有多种方法可以做到这一点，但使用“tee”命令可能是最好的。

对管线使用“tee”命令。文件名通常是参数。让我们用上面的 Pokemon 的例子。

```
sort pokemon.txt | tee sorted-pokemon.txt
```

sort 命令完成它的工作，然后我们将它传送给 tee。然后，我们在屏幕上看到排序的结果，同样的信息被保存到我们的 sorted-pokemon.txt 文件中。

让我们使用前面的 wordcount 命令作为另一个例子。我们可以获取这些信息，将其显示在屏幕上，同时将其发送到另一个文本文件中。

```
wc -l pokemon.txt | tee pokemon-count.txt
```

# 结论

因此，在本节中，我们已经了解了所有关于文件重定向和管道的内容。这两种技术都很棒。有了上面的例子，你应该做那些例子，这样你就可以看到它们是如何工作的。当您第一次被要求按字母顺序对一个大的文本文件进行排序时，我希望您能记住这些例子，以及 Linux 如何使这样的任务变得微不足道。

# 感谢阅读

谢谢你读了这篇文章，我真的很感激。

如果你想加入我的简讯，你可以在这里:

[*杰森的迅*](https://mailchi.mp/70ab982b2619/computing)

如果你需要关于下一步该读什么的建议，那么试试这些 Linux 文章:

[*在 Linux 环境下管理文件*](/geekculture/managing-files-in-a-linux-environment-50d4d6ad6d49)

[*Linux 如何入门*](/geekculture/how-to-get-started-in-linux-7d09475eb037)

*原载于 2021 年 8 月 7 日 https://aindien.com*[](https://aindien.com/managing-input-and-output-streams-in-the-linux-shell.html)**。**