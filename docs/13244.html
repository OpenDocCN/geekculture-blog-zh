<html>
<head>
<title>Laravel Tutorial : Push Notification With Firebase Laravel 9</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Laravel教程:使用Firebase Laravel 9推送通知</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/laravel-tutorial-push-notification-with-firebase-laravel-9-3095058c2155?source=collection_archive---------1-----------------------#2022-06-28">https://medium.com/geekculture/laravel-tutorial-push-notification-with-firebase-laravel-9-3095058c2155?source=collection_archive---------1-----------------------#2022-06-28</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/058dd63a078bb0c4e672b038f89cd8b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K90AA3p4xIM92n-80QwQBA.png"/></div></div></figure><p id="e171" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你好，朋友们，这次我们将讨论如何使用Laravel创建通知。使用Laravel firebase的推送通知对于基于客户端的应用程序来说非常重要，因为当有新消息时，它对于通知非常有用。</p><p id="2738" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">推送通知是出现在用户浏览器中的可点击弹出消息，无论用户使用的是什么设备或浏览器。它们作为一种快速的沟通渠道，允许公司向客户传递信息、报价或其他信息。</p><p id="84c2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">朋友们可以学习其他教程:</p><p id="6df5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae jo" href="https://temanngoding.com/tutorial-laravel-membuat-dynamic-dependent-dengan-select2/" rel="noopener ugc nofollow" target="_blank"> Laravel教程:使用Select2创建动态依赖项</a></p><p id="e5a8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae jo" href="https://temanngoding.com/tutorial-laravel-laravel-eloquent-relationships/" rel="noopener ugc nofollow" target="_blank">拉勒维尔教程~拉勒维尔口才关系</a></p><p id="5515" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae jo" href="https://temanngoding.com/menggunakan-scope-di-laravel/" rel="noopener ugc nofollow" target="_blank">使用范围在Laravel </a></p><h1 id="556b" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">重火力点</h1><p id="abde" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">Firebase是Google提供的一项服务，旨在为应用程序开发人员提供便利，甚至让他们更容易开发应用程序。Firebase又名BaaS(后端即服务)是Google提供的一个解决方案，用于加速开发人员的工作。</p><p id="e1b0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">通过使用Firebase，应用程序开发人员可以专注于开发应用程序，而无需在后端投入大量精力。</p><h1 id="37e2" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">FCM (Firebase云消息传递)</h1><p id="103d" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">FCM (Firebase Cloud Messaging)提供了可靠的连接，当然也节省了服务器之间和设备之间的电池。因此，你可以在Android、iOS和网络上免费收发信息和通知。</p><p id="55b2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要定位高级消息，您可以使用人口统计和行为，通过预定义的细分轻松定位消息。您可以将消息发送到订阅了特定主题的设备。此外，您还可以只针对一个设备来获取详细的数据信息。通常这是为测试过程而做的。</p><p id="33f7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这些通知消息与Google Analytics for Firebase完全集成，因此您可以获得详细的参与和转换跟踪。好吧，你可以从一个单一的仪表板上监控效果，而不需要编码或创建你自己的程序。</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ks"><img src="../Images/2fd85e716d72e2d23cccde8a1259b673.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*bzl2jdRpjTRPm8v4.png"/></div></div></figure><ol class=""><li id="57d7" class="kx ky hi is b it iu ix iy jb kz jf la jj lb jn lc ld le lf bi translated"><strong class="is hj">安装Laravel </strong></li></ol><p id="4e79" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将安装laravel。打开终端，输入下面的命令。</p><pre class="kt ku kv kw fd lg lh li lj aw lk bi"><span id="2760" class="ll jq hi lh b fi lm ln l lo lp">composer create-project --prefer-dist laravel/laravel notif-push</span></pre><p id="d341" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> 2。设置数据库</strong></p><p id="51de" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">完成安装后，现在我们将进行数据库连接。</p><pre class="kt ku kv kw fd lg lh li lj aw lk bi"><span id="3fbf" class="ll jq hi lh b fi lm ln l lo lp">DB_CONNECTION=mysql <br/>DB_HOST=127.0.0.1 <br/>DB_PORT=3306 <br/>DB_DATABASE=&lt;DATABASE NAME&gt;<br/>DB_USERNAME=&lt;DATABASE USERNAME&gt;<br/>DB_PASSWORD=&lt;DATABASE PASSWORD&gt;</span></pre><p id="dbf6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> 3。安装库授权</strong></p><p id="aa15" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，我们将创建登录、注册和仪表板。在所有朋友的终端中输入下面的命令。</p><pre class="kt ku kv kw fd lg lh li lj aw lk bi"><span id="c885" class="ll jq hi lh b fi lm ln l lo lp">composer require laravel/ui</span><span id="d574" class="ll jq hi lh b fi lq ln l lo lp">php artisan ui bootstrap --auth</span><span id="2b92" class="ll jq hi lh b fi lq ln l lo lp">npm install &amp;&amp; npm run dev</span></pre><p id="81c0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> 4。迁移</strong></p><p id="62ee" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这一次我们将迁移所有现有的表。</p><pre class="kt ku kv kw fd lg lh li lj aw lk bi"><span id="b579" class="ll jq hi lh b fi lm ln l lo lp">php artisan migrate</span></pre><p id="2b91" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">接下来，我们将创建一个迁移来添加fcm_token kolom列。</p><pre class="kt ku kv kw fd lg lh li lj aw lk bi"><span id="f825" class="ll jq hi lh b fi lm ln l lo lp">php artisan make:migration "add fcm_token column to users table"</span></pre><p id="6551" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">database/migrations/2022 _ 06 _ 28 _ 063655 _ add _ FCM _ token _ column _ to _ users _ table . PHP</strong></p><pre class="kt ku kv kw fd lg lh li lj aw lk bi"><span id="4d08" class="ll jq hi lh b fi lm ln l lo lp">&lt;?php<br/><br/>use Illuminate\Database\Migrations\Migration;<br/>use Illuminate\Database\Schema\Blueprint;<br/>use Illuminate\Support\Facades\Schema;<br/><br/>class AddFcmTokenColumnToUsersTable extends Migration<br/>{<br/>    /**<br/>     * Run the migrations.<br/>     *<br/>     * @return void<br/>     */<br/>    public function up()<br/>    {<br/>        Schema::table('users', function (Blueprint $table) {<br/>            Schema::table('users', function (Blueprint $table) {<br/>                $table-&gt;dropColumn('fcm_token');<br/>            });<br/>        });<br/>    }<br/><br/>    /**<br/>     * Reverse the migrations.<br/>     *<br/>     * @return void<br/>     */<br/>    public function down()<br/>    {<br/>        Schema::table('users', function (Blueprint $table) {<br/>            $table-&gt;dropColumn('fcm_token');<br/>        });<br/>    }<br/>}</span></pre><p id="b653" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">更新迁移后，再次运行迁移命令。</p><pre class="kt ku kv kw fd lg lh li lj aw lk bi"><span id="e7a9" class="ll jq hi lh b fi lm ln l lo lp">php artisan migrate</span></pre><p id="97f3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">5.模型设置</p><p id="bb17" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">打开并自定义app/Models/Users.php文件。</p><pre class="kt ku kv kw fd lg lh li lj aw lk bi"><span id="a10f" class="ll jq hi lh b fi lm ln l lo lp">&lt;?php<br/><br/>namespace App\Models;<br/><br/>use Illuminate\Contracts\Auth\MustVerifyEmail;<br/>use Illuminate\Database\Eloquent\Factories\HasFactory;<br/>use Illuminate\Foundation\Auth\User as Authenticatable;<br/>use Illuminate\Notifications\Notifiable;<br/>use Laravel\Sanctum\HasApiTokens;<br/><br/>class User extends Authenticatable<br/>{<br/>    use HasApiTokens, HasFactory, Notifiable;<br/><br/>    /**<br/>     * The attributes that are mass assignable.<br/>     *<br/>     * @var array&lt;int, string&gt;<br/>     */<br/>    protected $fillable = [<br/>        'name',<br/>        'email',<br/>        'password',<br/>        'fcm_token'<br/>    ];<br/><br/>    /**<br/>     * The attributes that should be hidden for serialization.<br/>     *<br/>     * @var array&lt;int, string&gt;<br/>     */<br/>    protected $hidden = [<br/>        'password',<br/>        'remember_token',<br/>        'remember_token',<br/>    ];<br/><br/>    /**<br/>     * The attributes that should be cast.<br/>     *<br/>     * @var array&lt;string, string&gt;<br/>     */<br/>    protected $casts = [<br/>        'email_verified_at' =&gt; 'datetime',<br/>    ];<br/>}</span></pre><p id="514c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> 6。创建一个Firebase项目</strong></p><p id="b522" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> a .创建Firebase项目</strong></p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ks"><img src="../Images/e920dc17f051cb3c107d285616efec3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*bUwSSVGKiacHBpro.png"/></div></div></figure><p id="880c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> b. </strong> <strong class="is hj">在已创建的项目中创建Web App</strong></p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ks"><img src="../Images/04fe951a492cade71727460f376a410f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*dkKP8mybh_mfH6DR.png"/></div></div></figure><p id="a309" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> c. Web App配置详情</strong></p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ks"><img src="../Images/1e9c5b8522e2acadd4480b93e9ac588f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*FEJ2kaf0FYus_bZv.png"/></div></div></figure><p id="fab6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> 7。控制器</strong></p><p id="d38f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">app \ Http \ Controllers \ home controller . PHP</strong></p><pre class="kt ku kv kw fd lg lh li lj aw lk bi"><span id="722f" class="ll jq hi lh b fi lm ln l lo lp">public function updateToken(Request $request){<br/>    try{<br/>        $request-&gt;user()-&gt;update(['fcm_token'=&gt;$request-&gt;token]);<br/>        return response()-&gt;json([<br/>            'success'=&gt;true<br/>        ]);<br/>    }catch(\Exception $e){<br/>        report($e);<br/>        return response()-&gt;json([<br/>            'success'=&gt;false<br/>        ],500);<br/>    }<br/>}</span></pre><p id="37d5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在<strong class="is hj"> routes/web.php </strong>中添加一条路线</p><pre class="kt ku kv kw fd lg lh li lj aw lk bi"><span id="8f1c" class="ll jq hi lh b fi lm ln l lo lp">use App\Http\Controllers\HomeController;<br/><br/>Route::get('/', function () {<br/>    return view('welcome');<br/>});<br/><br/>Auth::routes();<br/><br/>Route::get('/home', [HomeController::class, 'index'])-&gt;name('home');<br/>Route::patch('/fcm-token', [HomeController::class, 'updateToken'])-&gt;name('fcmToken');<br/>Route::post('/send-notification',[HomeController::class,'notification'])-&gt;name('notification');</span></pre><p id="4d01" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> 8。Kode Firebase </strong></p><p id="033d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">资源/视图/布局/app.blade.php </strong></p><pre class="kt ku kv kw fd lg lh li lj aw lk bi"><span id="f9b6" class="ll jq hi lh b fi lm ln l lo lp">&lt;!-- The core Firebase JS SDK is always required and must be listed first --&gt;<br/>&lt;script src="https://www.gstatic.com/firebasejs/8.3.2/firebase-app.js"&gt;&lt;/script&gt;<br/>&lt;script src="https://www.gstatic.com/firebasejs/8.3.2/firebase-messaging.js"&gt;&lt;/script&gt;<br/><br/>&lt;!-- TODO: Add SDKs for Firebase products that you want to use<br/>    https://firebase.google.com/docs/web/setup#available-libraries --&gt;<br/><br/>&lt;script&gt;<br/>    // Your web app's Firebase configuration<br/>    var firebaseConfig = {<br/>        apiKey: "XXXXXXXXXXXXXXXXXXXXXXXXXX",<br/>        authDomain: "XXXXXXX.firebaseapp.com",<br/>        projectId: "XXXXXXXXXX",<br/>        storageBucket: "XXXXXXXXXX.appspot.com",<br/>        messagingSenderId: "XXXXXXXXXX",<br/>        appId: "1:XXXXXXXXX:web:XXXXXXXXXXXXX"<br/>    };<br/>    // Initialize Firebase<br/>    firebase.initializeApp(firebaseConfig);<br/><br/>    const messaging = firebase.messaging();<br/><br/>    function initFirebaseMessagingRegistration() {<br/>        messaging.requestPermission().then(function () {<br/>            return messaging.getToken()<br/>        }).then(function(token) {<br/>            <br/>            axios.post("{{ route('fcmToken') }}",{<br/>                _method:"PATCH",<br/>                token<br/>            }).then(({data})=&gt;{<br/>                console.log(data)<br/>            }).catch(({response:{data}})=&gt;{<br/>                console.error(data)<br/>            })<br/><br/>        }).catch(function (err) {<br/>            console.log(`Token Error :: ${err}`);<br/>        });<br/>    }<br/><br/>    initFirebaseMessagingRegistration();<br/>  <br/>    messaging.onMessage(function({data:{body,title}}){<br/>        new Notification(title, {body});<br/>    });<br/>&lt;/script&gt;</span></pre><p id="6714" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在公共文件夹中创建一个firebase-messaging-sw.js文件。</p><pre class="kt ku kv kw fd lg lh li lj aw lk bi"><span id="d3b2" class="ll jq hi lh b fi lm ln l lo lp">importScripts('https://www.gstatic.com/firebasejs/8.3.2/firebase-app.js');<br/>importScripts('https://www.gstatic.com/firebasejs/8.3.2/firebase-messaging.js');<br/>   <br/>firebase.initializeApp({<br/>    apiKey: "XXXXXXXXXXXXXXXXXXXXXXXXX",<br/>    projectId: "XXXXXXXX",<br/>    messagingSenderId: "XXXXXXXXX",<br/>    appId: "1:XXXXXXXX:web:XXXXXXXXXXX"<br/>});<br/>  <br/>const messaging = firebase.messaging();<br/>messaging.setBackgroundMessageHandler(function({data:{title,body,icon}}) {<br/>    return self.registration.showNotification(title,{body,icon});<br/>});</span></pre><p id="4f1b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">10。推送通知</p><p id="8833" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为了获得通知，我们使用Larafirebase包。</p><p id="e976" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">安装Larafirebase</p><pre class="kt ku kv kw fd lg lh li lj aw lk bi"><span id="1a84" class="ll jq hi lh b fi lm ln l lo lp">composer require kutia-software-company/larafirebase</span><span id="26fe" class="ll jq hi lh b fi lq ln l lo lp">php artisan vendor:publish --provider="Kutia\Larafirebase\Providers\LarafirebaseServiceProvider"</span></pre><p id="da14" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">中添加Firebase服务器密钥。环境文件。</p><pre class="kt ku kv kw fd lg lh li lj aw lk bi"><span id="13cf" class="ll jq hi lh b fi lm ln l lo lp">FIREBASE_SERVER_KEY=XXXXXXXXXXXXXXXXXXXXX</span></pre><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ks"><img src="../Images/a889323be97cb3b713352749ca9c10ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*pPtJ5gehBOkPUD_1.png"/></div></div></figure><p id="1bfe" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">config/larafirebase . PHP</strong></p><pre class="kt ku kv kw fd lg lh li lj aw lk bi"><span id="d0f5" class="ll jq hi lh b fi lm ln l lo lp">return [<br/>    'authentication_key' =&gt; env('FIREBASE_SERVER_KEY')<br/>];</span></pre><p id="3201" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">app/Http/Controllers/home controller . PHP</strong></p><pre class="kt ku kv kw fd lg lh li lj aw lk bi"><span id="bef9" class="ll jq hi lh b fi lm ln l lo lp">public function notification(Request $request){<br/>    $request-&gt;validate([<br/>        'title'=&gt;'required',<br/>        'message'=&gt;'required'<br/>    ]);<br/><br/>    try{<br/>        $fcmTokens = User::whereNotNull('fcm_token')-&gt;pluck('fcm_token')-&gt;toArray();<br/><br/>        //Notification::send(null,new SendPushNotification($request-&gt;title,$request-&gt;message,$fcmTokens));<br/><br/>        /* or */<br/><br/>        //auth()-&gt;user()-&gt;notify(new SendPushNotification($title,$message,$fcmTokens));<br/><br/>        /* or */<br/><br/>        Larafirebase::withTitle($request-&gt;title)<br/>            -&gt;withBody($request-&gt;message)<br/>            -&gt;sendMessage($fcmTokens);<br/><br/>        return redirect()-&gt;back()-&gt;with('success','Notification Sent Successfully!!');<br/><br/>    }catch(\Exception $e){<br/>        report($e);<br/>        return redirect()-&gt;back()-&gt;with('error','Something goes wrong while sending notification.');<br/>    }<br/>}</span></pre><p id="b8b2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们使用以下命令创建通知:</p><pre class="kt ku kv kw fd lg lh li lj aw lk bi"><span id="43ed" class="ll jq hi lh b fi lm ln l lo lp">php artisan make:notification SendPushNotification</span></pre><p id="de23" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">app \ Notifications \ sendphusnotification . PHP</strong></p><pre class="kt ku kv kw fd lg lh li lj aw lk bi"><span id="fda0" class="ll jq hi lh b fi lm ln l lo lp">namespace App\Notifications;<br/><br/>use Illuminate\Bus\Queueable;<br/>use Illuminate\Contracts\Queue\ShouldQueue;<br/>use Illuminate\Notifications\Notification;<br/>use Kutia\Larafirebase\Messages\FirebaseMessage;<br/><br/>class SendPushNotification extends Notification<br/>{<br/>    use Queueable;<br/><br/>    protected $title;<br/>    protected $message;<br/>    protected $fcmTokens;<br/><br/>    /**<br/>     * Create a new notification instance.<br/>     *<br/>     * @return void<br/>     */<br/>    public function __construct($title,$message,$fcmTokens)<br/>    {<br/>        $this-&gt;title = $title;<br/>        $this-&gt;message = $message;<br/>        $this-&gt;fcmTokens = $fcmTokens;<br/>    }<br/><br/>    /**<br/>     * Get the notification's delivery channels.<br/>     *<br/>     * @param  mixed  $notifiable<br/>     * @return array<br/>     */<br/>    public function via($notifiable)<br/>    {<br/>        return ['firebase'];<br/>    }<br/><br/>    public function toFirebase($notifiable)<br/>    {<br/>        return (new FirebaseMessage)<br/>            -&gt;withTitle($this-&gt;title)<br/>            -&gt;withBody($this-&gt;message)<br/>            -&gt;withPriority('high')-&gt;asMessage($this-&gt;fcmTokens);<br/>    }<br/>}</span></pre><p id="1ed6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">可以使用该功能，例如:</p><pre class="kt ku kv kw fd lg lh li lj aw lk bi"><span id="c65b" class="ll jq hi lh b fi lm ln l lo lp">use Notification;<br/>use App\Notifications\SendPushNotification;<br/><br/>Notification::send(null,new SendPushNotification($title,$message,$fcmTokens));</span></pre><p id="6a51" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在运行命令:</p><pre class="kt ku kv kw fd lg lh li lj aw lk bi"><span id="5312" class="ll jq hi lh b fi lm ln l lo lp">php artisan serve</span></pre><p id="ff2d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">因此这次我给出的教程，希望有用。</p><p id="bc21" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> <em class="lr">谢了。</em> </strong></p></div></div>    
</body>
</html>