<html>
<head>
<title>How does server side internationalization (i18n) look like?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">服务器端国际化(i18n)是什么样子的？</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/how-does-server-side-internationalization-i18n-look-like-6ddbd15147b7?source=collection_archive---------18-----------------------#2021-06-28">https://medium.com/geekculture/how-does-server-side-internationalization-i18n-look-like-6ddbd15147b7?source=collection_archive---------18-----------------------#2021-06-28</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/6f6294ef59e8cd86d5dd11904c39a021.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E8H1oQGSqu599stzjC06zw.jpeg"/></div></div></figure><p id="8b35" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你可能已经知道如何正确地国际化一个客户端应用程序，就像在这个基于<a class="ae jo" href="https://dev.to/adrai/how-to-properly-internationalize-a-react-application-using-i18next-3hdb" rel="noopener ugc nofollow" target="_blank"> React的教程</a>，这个基于<a class="ae jo" href="https://dev.to/adrai/unleash-the-full-power-of-angular-i18next-4b7o" rel="noopener ugc nofollow" target="_blank"> Angular的教程</a>或者这个基于<a class="ae jo" href="https://dev.to/adrai/give-vue-i18n-more-superpowers-12la" rel="noopener ugc nofollow" target="_blank"> Vue的教程</a>中描述的那样。</p><p id="b564" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这篇博文中，我们将阐明服务器端。</p><blockquote class="jp jq jr"><p id="7c40" class="iq ir js is b it iu iv iw ix iy iz ja jt jc jd je ju jg jh ji jv jk jl jm jn hb bi translated">为什么我需要在应用程序的后端处理i18n？</p></blockquote><p id="81b3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">想象一下所有面向用户的内容不直接呈现在您的浏览器中…</p><ul class=""><li id="c181" class="jw jx hi is b it iu ix iy jb jy jf jz jj ka jn kb kc kd ke bi translated">例如，您正在构建命令行界面(CLI)？</li><li id="2f9f" class="jw jx hi is b it kf ix kg jb kh jf ki jj kj jn kb kc kd ke bi translated">你在发邮件吗？</li><li id="8316" class="jw jx hi is b it kf ix kg jb kh jf ki jj kj jn kb kc kd ke bi translated">或者你用的是服务器端渲染(SSR)？</li><li id="512a" class="jw jx hi is b it kf ix kg jb kh jf ki jj kj jn kb kc kd ke bi translated">等等。</li></ul><h1 id="21be" class="kk kl hi bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">让我们检查一下…</h1><p id="0d48" class="pw-post-body-paragraph iq ir hi is b it li iv iw ix lj iz ja jb lk jd je jf ll jh ji jj lm jl jm jn hb bi translated">我们将展示一些使用<a class="ae jo" href="https://www.i18next.com/" rel="noopener ugc nofollow" target="_blank"> i18next </a>作为i18n框架的例子。如果你想知道我们为什么建议i18next，看看这一页。</p><h1 id="7725" class="kk kl hi bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">命令行界面(CLI)</h1><p id="21c3" class="pw-post-body-paragraph iq ir hi is b it li iv iw ix lj iz ja jb lk jd je jf ll jh ji jj lm jl jm jn hb bi translated">让我们从简单的开始:一个非常小的CLI应用程序。对于这个例子，让我们使用最初由<a class="ae jo" href="https://twitter.com/tjholowaychuk" rel="noopener ugc nofollow" target="_blank"> TJ Holowaychuk </a>创建的<a class="ae jo" href="https://github.com/tj/commander.js" rel="noopener ugc nofollow" target="_blank">指挥官</a>。<br/>我们正在定义一个带有可选语言和名称参数的<code class="du ln lo lp lq b">sayhi</code>命令，该命令应该以适当的语言回应一个称呼。</p><pre class="lr ls lt lu fd lv lq lw lx aw ly bi"><span id="8956" class="lz kl hi lq b fi ma mb l mc md">#!/usr/bin/env node</span><span id="2acf" class="lz kl hi lq b fi me mb l mc md">const program = require('commander')</span><span id="6cc3" class="lz kl hi lq b fi me mb l mc md">program<br/>  .command('sayhi')<br/>  .alias('s')<br/>  .option('-l, --language &lt;lng&gt;', 'by default the system language is used')<br/>  .option('-n, --name &lt;name&gt;', 'your name')<br/>  .action((options) =&gt; {<br/>    // options.language =&gt; optional language<br/>    // options.name =&gt; optional name<br/>    // TODO: log the salutation to the console...<br/>  })<br/>  .on('--help', () =&gt; {<br/>    console.log('  Examples:')<br/>    console.log()<br/>    console.log('    $ mycli sayhi')<br/>    console.log('    $ mycli sayhi --language de')<br/>    console.log('    $ mycli sayhi --language de --name John')<br/>    console.log()<br/>  })</span><span id="afb4" class="lz kl hi lq b fi me mb l mc md">program.parse(process.argv)</span><span id="8393" class="lz kl hi lq b fi me mb l mc md">if (!process.argv.slice(2).length) {<br/>  program.outputHelp()<br/>}</span></pre><p id="9eab" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">好了，现在让我们创建一个新的<code class="du ln lo lp lq b">i18n.js</code>文件，并相应地设置i18next:</p><pre class="lr ls lt lu fd lv lq lw lx aw ly bi"><span id="c418" class="lz kl hi lq b fi ma mb l mc md">const i18next = require('i18next')</span><span id="89d9" class="lz kl hi lq b fi me mb l mc md">// if no language parameter is passed, let's try to use the node.js system's locale<br/>const systemLocale = Intl.DateTimeFormat().resolvedOptions().locale</span><span id="4797" class="lz kl hi lq b fi me mb l mc md">i18next<br/>  .init({<br/>    fallbackLng: 'en',<br/>    resources: {<br/>      en: {<br/>        translation: require('./locales/en/translation.json')<br/>      },<br/>      de: {<br/>        translation: require('./locales/de/translation.json')<br/>      }<br/>    }<br/>  })</span><span id="0687" class="lz kl hi lq b fi me mb l mc md">module.exports = (lng) =&gt; i18next.getFixedT(lng || systemLocale)</span></pre><p id="e32e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">以及我们的翻译资源:</p><pre class="lr ls lt lu fd lv lq lw lx aw ly bi"><span id="fd16" class="lz kl hi lq b fi ma mb l mc md">// locales/en/translations.json<br/>{<br/>  "salutation": "Hello World!",<br/>  "salutationWithName": "Hello {{name}}!"<br/>}</span><span id="6f1a" class="lz kl hi lq b fi me mb l mc md">// locales/de/translations.json<br/>{<br/>  "salutation": "Hallo Welt!",<br/>  "salutationWithName": "Hallo {{name}}!"<br/>}</span></pre><p id="bc54" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在我们可以用<code class="du ln lo lp lq b">i18n.js</code>那样导出:</p><pre class="lr ls lt lu fd lv lq lw lx aw ly bi"><span id="a6ad" class="lz kl hi lq b fi ma mb l mc md">#!/usr/bin/env node</span><span id="38a3" class="lz kl hi lq b fi me mb l mc md">const program = require('commander')<br/>const i18n = require('../i18n.js')</span><span id="bde5" class="lz kl hi lq b fi me mb l mc md">program<br/>  .command('sayhi')<br/>  .alias('s')<br/>  .option('-l, --language &lt;lng&gt;', 'by default the system language is used')<br/>  .option('-n, --name &lt;name&gt;', 'your name')<br/>  .action((options) =&gt; {<br/>    const t = i18n(options.language)<br/>    if (options.name) {<br/>      console.log(t('salutationWithName', { name: options.name }))<br/>    } else {<br/>      console.log(t('salutation'))<br/>    }<br/>  })<br/>  .on('--help', () =&gt; {<br/>    console.log('  Examples:')<br/>    console.log()<br/>    console.log('    $ mycli sayhi')<br/>    console.log('    $ mycli sayhi --language de')<br/>    console.log('    $ mycli sayhi --language de --name John')<br/>    console.log()<br/>  })</span><span id="4e7f" class="lz kl hi lq b fi me mb l mc md">program.parse(process.argv)</span><span id="a36c" class="lz kl hi lq b fi me mb l mc md">if (!process.argv.slice(2).length) {<br/>  program.outputHelp()<br/>}</span></pre><p id="8d77" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">好吧，结果呢？</p><pre class="lr ls lt lu fd lv lq lw lx aw ly bi"><span id="8969" class="lz kl hi lq b fi ma mb l mc md"># if we execute the cli command without any parameters...<br/>mycli sayhi<br/># result: Hello World!</span><span id="396b" class="lz kl hi lq b fi me mb l mc md"># if we execute the cli command with a language parameter...<br/>mycli sayhi --language de<br/># result: Hallo Welt!</span><span id="bdd4" class="lz kl hi lq b fi me mb l mc md"># if we execute the cli command with a language parameter and a name parameter...<br/>mycli sayhi --language de --name John<br/># result: Hallo John!</span></pre><p id="5a7c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">很容易，不是吗？</p><p id="3d95" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果您没有将CLI应用程序捆绑在单个可执行文件中，例如通过使用<a class="ae jo" href="https://github.com/vercel/pkg" rel="noopener ugc nofollow" target="_blank"> pkg </a>，您也可以使用<a class="ae jo" href="https://github.com/i18next/i18next-fs-backend" rel="noopener ugc nofollow" target="_blank"> i18next-fs-backend </a>来动态加载您的翻译，例如:</p><pre class="lr ls lt lu fd lv lq lw lx aw ly bi"><span id="6550" class="lz kl hi lq b fi ma mb l mc md">const i18next = require('i18next')<br/>const Backend = require('i18next-fs-backend')<br/>const { join } = require('path')<br/>const { readdirSync, lstatSync } = require('fs')</span><span id="3b71" class="lz kl hi lq b fi me mb l mc md">// if no language parameter is passed, let's try to use the node.js system's locale<br/>const systemLocale = Intl.DateTimeFormat().resolvedOptions().locale</span><span id="bff0" class="lz kl hi lq b fi me mb l mc md">const localesFolder = join(__dirname, './locales')</span><span id="570e" class="lz kl hi lq b fi me mb l mc md">i18next<br/>  .use(Backend)<br/>  .init({<br/>    initImmediate: false, // setting initImediate to false, will load the resources synchronously<br/>    fallbackLng: 'en',<br/>    preload: readdirSync(localesFolder).filter((fileName) =&gt; {<br/>      const joinedPath = join(localesFolder, fileName)<br/>      return lstatSync(joinedPath).isDirectory()<br/>    }),<br/>    backend: {<br/>      loadPath: join(localesFolder, '{{lng}}/{{ns}}.json')<br/>    }<br/>  })</span><span id="27cb" class="lz kl hi lq b fi me mb l mc md">module.exports = (lng) =&gt; i18next.getFixedT(lng || systemLocale)</span></pre><p id="e1f9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="js"> 🧑‍💻一个代码示例可以在</em> <a class="ae jo" href="https://github.com/i18next/i18next-cli-app-example" rel="noopener ugc nofollow" target="_blank"> <em class="js">这里找到</em> </a> <em class="js">。</em></p><h1 id="36d8" class="kk kl hi bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">一个可能的下一步…</h1><p id="dbb2" class="pw-post-body-paragraph iq ir hi is b it li iv iw ix lj iz ja jb lk jd je jf ll jh ji jj lm jl jm jn hb bi translated">下一步可能是使翻译管理专业化。<br/>这意味着翻译将在翻译管理系统(TMS)中被“管理”(添加新语言、新翻译等)，就像<a class="ae jo" href="https://www.locize.com/" rel="noopener ugc nofollow" target="_blank"> locize </a>一样，并与您的代码同步。要了解这可能是什么样子，请查看本教程中的<a class="ae jo" href="https://github.com/locize/react-tutorial#step-1---keep-existing-code-setup-but-synchronize-with-locize" rel="noopener ugc nofollow" target="_blank"> <strong class="is hj">步骤1 </strong>。</a></p><h1 id="87eb" class="kk kl hi bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">生成电子邮件</h1><p id="7ad3" class="pw-post-body-paragraph iq ir hi is b it li iv iw ix lj iz ja jb lk jd je jf ll jh ji jj lm jl jm jn hb bi translated">另一个需要国际化的典型服务器端用例是生成电子邮件。</p><p id="7bfd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为了实现这个目标，通常需要将一些原始数据转换成html内容(或文本),以用户喜欢的语言显示。</p><p id="2029" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这个例子中，我们将使用<a class="ae jo" href="https://pugjs.org/" rel="noopener ugc nofollow" target="_blank"> pug </a>(以前称为“Jade”，最初也是由<a class="ae jo" href="https://twitter.com/tjholowaychuk" rel="noopener ugc nofollow" target="_blank"> TJ Holowaychuk </a>创建的)来定义一些应该用电子邮件中所需的数据填充的模板，并使用<a class="ae jo" href="https://mjml.io/" rel="noopener ugc nofollow" target="_blank"> mjml </a>来实际设计电子邮件内容。</p><p id="d941" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们创建一个新的<code class="du ln lo lp lq b">mail.js</code>文件来完成这个任务。</p><pre class="lr ls lt lu fd lv lq lw lx aw ly bi"><span id="31ed" class="lz kl hi lq b fi ma mb l mc md">import pug from 'pug'<br/>import mjml2html from 'mjml'</span><span id="efee" class="lz kl hi lq b fi me mb l mc md">export default (data) =&gt; {<br/>  // first let's compile and render the mail template that will include the data needed to show in the mail content<br/>  const mjml = pug.renderFile('./mailTemplate.pug', data)</span><span id="faef" class="lz kl hi lq b fi me mb l mc md">  // then transform the mjml syntax to normal html<br/>  const { html, errors } = mjml2html(mjml)<br/>  if (errors &amp;&amp; errors.length &gt; 0) throw new Error(errors[0].message)</span><span id="bef7" class="lz kl hi lq b fi me mb l mc md">  // and return the html, if there where no errors<br/>  return html<br/>}</span></pre><p id="979c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><code class="du ln lo lp lq b">mailTemplate.pug</code>可能看起来像这样:</p><pre class="lr ls lt lu fd lv lq lw lx aw ly bi"><span id="8794" class="lz kl hi lq b fi ma mb l mc md">mjml<br/>  mj-body(background-color='#F4F4F4' color='#55575d' font-family='Arial, sans-serif')<br/>    mj-section(background-color='#024b3f' background-repeat='repeat' padding='20px 0' text-align='center' vertical-align='top')<br/>      mj-column<br/>        mj-image(align='center' padding='10px 25px' src='https://raw.githubusercontent.com/i18next/i18next/master/assets/i18next-ecosystem.jpg')<br/>    mj-section(background-color='#ffffff' background-repeat='repeat' padding='20px 0' text-align='center' vertical-align='top')<br/>      mj-column<br/>    mj-section(background-color='#ffffff' background-repeat='repeat' background-size='auto' padding='20px 0px 20px 0px' text-align='center' vertical-align='top')<br/>      mj-column<br/>        mj-text(align='center' color='#55575d' font-family='Arial, sans-serif' font-size='20px' line-height='28px' padding='0px 25px 0px 25px')<br/>          span=t('greeting', { name: name || 'there' })<br/>          br<br/>          br<br/>        mj-text(align='center' color='#55575d' font-family='Arial, sans-serif' font-size='16px' line-height='28px' padding='0px 25px 0px 25px')<br/>          =t('text')<br/>    mj-section(background-color='#024b3f' background-repeat='repeat' padding='20px 0' text-align='center' vertical-align='top')<br/>      mj-column<br/>        mj-text(align='center' color='#ffffff' font-family='Arial, sans-serif' font-size='13px' line-height='22px' padding='10px 25px')<br/>          =t('ending')&amp;nbsp;<br/>          a(style='color:#ffffff' href='https://www.i18next.com')<br/>            b <a class="ae jo" href="http://www.i18next.com" rel="noopener ugc nofollow" target="_blank">www.i18next.com</a></span></pre><p id="dfc5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在让我们定义一些翻译…</p><pre class="lr ls lt lu fd lv lq lw lx aw ly bi"><span id="9a9c" class="lz kl hi lq b fi ma mb l mc md">// locales/en/translations.json<br/>{<br/>  "greeting": "Hi {{name}}!",<br/>  "text": "You were invited to try i18next.",<br/>  "ending": "Internationalized with"<br/>}</span><span id="51e2" class="lz kl hi lq b fi me mb l mc md">// locales/de/translations.json<br/>{<br/>  "greeting": "Hallo {{name}}!",<br/>  "text": "Du bist eingeladen worden i18next auszuprobieren.",<br/>  "ending": "Internationalisiert mit"<br/>}</span></pre><p id="1220" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">…并在一个<code class="du ln lo lp lq b">i18n.js</code>文件中使用它们:</p><pre class="lr ls lt lu fd lv lq lw lx aw ly bi"><span id="afab" class="lz kl hi lq b fi ma mb l mc md">import { dirname, join } from 'path'<br/>import { readdirSync, lstatSync } from 'fs'<br/>import { fileURLToPath } from 'url'<br/>import i18next from 'i18next'<br/>import Backend from 'i18next-fs-backend'</span><span id="7c11" class="lz kl hi lq b fi me mb l mc md">const __dirname = dirname(fileURLToPath(import.meta.url))<br/>const localesFolder = join(__dirname, './locales')</span><span id="5061" class="lz kl hi lq b fi me mb l mc md">i18next<br/>  .use(Backend) // you can also use any other i18next backend, like i18next-http-backend or i18next-locize-backend<br/>  .init({<br/>    // debug: true,<br/>    initImmediate: false, // setting initImediate to false, will load the resources synchronously<br/>    fallbackLng: 'en',<br/>    preload: readdirSync(localesFolder).filter((fileName) =&gt; {<br/>      const joinedPath = join(localesFolder, fileName)<br/>      return lstatSync(joinedPath).isDirectory()<br/>    }),<br/>    backend: {<br/>      loadPath: join(localesFolder, '{{lng}}/{{ns}}.json')<br/>    }<br/>  })</span><span id="61ab" class="lz kl hi lq b fi me mb l mc md">export default i18next</span></pre><p id="5fbf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">所以最后，以上都可以这样用:</p><pre class="lr ls lt lu fd lv lq lw lx aw ly bi"><span id="09c8" class="lz kl hi lq b fi ma mb l mc md">import mail from './mail.js'</span><span id="c835" class="lz kl hi lq b fi me mb l mc md">import i18next from './i18n.js'</span><span id="d388" class="lz kl hi lq b fi me mb l mc md">const html = mail({<br/>  t: i18next.t,<br/>  name: 'John'<br/>})<br/>// that html now can be sent via some mail provider...</span></pre><p id="5a47" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这是生成的html的样子:</p><figure class="lr ls lt lu fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mf"><img src="../Images/6e89218ce313fc3e96512e38b8cf866c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*OZ-VFh30okhXuAxN.jpg"/></div></div></figure><p id="5761" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="js"> 🧑‍💻一个代码示例可以在</em> <a class="ae jo" href="https://github.com/i18next/i18next-fs-backend/blob/master/example/fastify/app.js#L14-L19" rel="noopener ugc nofollow" target="_blank"> <em class="js">这里找到</em> </a> <em class="js">。</em></p><h1 id="3834" class="kk kl hi bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">服务器端渲染(SSR)</h1><p id="3879" class="pw-post-body-paragraph iq ir hi is b it li iv iw ix lj iz ja jb lk jd je jf ll jh ji jj lm jl jm jn hb bi translated">我们将尝试两个不同的SSR例子，一个是使用Fastify和pug的经典例子，另一个是使用Next.js的流行例子。</p><h1 id="1bc7" class="kk kl hi bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">用泥巴例子固定</h1><p id="9e98" class="pw-post-body-paragraph iq ir hi is b it li iv iw ix lj iz ja jb lk jd je jf ll jh ji jj lm jl jm jn hb bi translated">对于这个例子，我们将使用我最喜欢的http框架<a class="ae jo" href="https://www.fastify.io/" rel="noopener ugc nofollow" target="_blank"> Fastify </a>(由<a class="ae jo" href="https://twitter.com/matteocollina" rel="noopener ugc nofollow" target="_blank"> Matteo Collina </a>和<a class="ae jo" href="https://twitter.com/delvedor" rel="noopener ugc nofollow" target="_blank"> Tomas Della Vedova </a>创建)，但是任何其他框架也可以。</p><p id="88ab" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这次我们将使用一个不同的i18next模块，<a class="ae jo" href="https://github.com/i18next/i18next-http-middleware" rel="noopener ugc nofollow" target="_blank">i18 next-http-中间件</a>。<br/>可以用于所有Node.js web框架，像<a class="ae jo" href="https://expressjs.com/" rel="noopener ugc nofollow" target="_blank"> express </a>或者<a class="ae jo" href="https://www.fastify.io/" rel="noopener ugc nofollow" target="_blank"> Fastify </a>，也可以用于Deno web框架，像<a class="ae jo" href="https://github.com/zhmushan/abc" rel="noopener ugc nofollow" target="_blank"> abc </a>或者<a class="ae jo" href="https://github.com/keroxp/servest" rel="noopener ugc nofollow" target="_blank"> ServestJS </a>。</p><p id="029a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">正如已经说过的，这里我们将使用我的最爱<a class="ae jo" href="https://www.fastify.io/" rel="noopener ugc nofollow" target="_blank"> Fastify </a>😉。</p><p id="957d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们再次从<code class="du ln lo lp lq b">i18n.js</code>文件开始:</p><pre class="lr ls lt lu fd lv lq lw lx aw ly bi"><span id="aeee" class="lz kl hi lq b fi ma mb l mc md">import { dirname, join } from 'path'<br/>import { readdirSync, lstatSync } from 'fs'<br/>import { fileURLToPath } from 'url'<br/>import i18next from 'i18next'<br/>import Backend from 'i18next-fs-backend'<br/>import i18nextMiddleware from 'i18next-http-middleware'</span><span id="49f6" class="lz kl hi lq b fi me mb l mc md">const __dirname = dirname(fileURLToPath(import.meta.url))<br/>const localesFolder = join(__dirname, '../locales')</span><span id="4451" class="lz kl hi lq b fi me mb l mc md">i18next<br/>  .use(i18nextMiddleware.LanguageDetector) // the language detector, will automatically detect the users language, by some criteria... like the query parameter ?lng=en or http header, etc...<br/>  .use(Backend) // you can also use any other i18next backend, like i18next-http-backend or i18next-locize-backend<br/>  .init({<br/>    initImmediate: false, // setting initImediate to false, will load the resources synchronously<br/>    fallbackLng: 'en',<br/>    preload: readdirSync(localesFolder).filter((fileName) =&gt; {<br/>      const joinedPath = join(localesFolder, fileName)<br/>      return lstatSync(joinedPath).isDirectory()<br/>    }),<br/>    backend: {<br/>      loadPath: join(localesFolder, '{{lng}}/{{ns}}.json')<br/>    }<br/>  })</span><span id="d36d" class="lz kl hi lq b fi me mb l mc md">export { i18next, i18nextPlugin: i18nextMiddleware.plugin }</span></pre><p id="d3bc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们的翻译资源…</p><pre class="lr ls lt lu fd lv lq lw lx aw ly bi"><span id="f126" class="lz kl hi lq b fi ma mb l mc md">// locales/en/translations.json<br/>{<br/>  "home": {<br/>    "title": "Hello World!"<br/>  },<br/>  "server": {<br/>    "started": "Server is listening on port {{port}}."<br/>  }<br/>}</span><span id="254f" class="lz kl hi lq b fi me mb l mc md">// locales/de/translations.json<br/>{<br/>  "home": {<br/>    "title": "Hallo Welt!"<br/>  },<br/>  "server": {<br/>    "started": "Der server lauscht auf dem Port {{port}}."<br/>  }<br/>}</span><span id="9065" class="lz kl hi lq b fi me mb l mc md">// locales/it/translations.json<br/>{<br/>  "home": {<br/>    "title": "Ciao Mondo!"<br/>  },<br/>  "server": {<br/>    "started": "Il server sta aspettando sul port {{port}}."<br/>  }<br/>}</span></pre><p id="ce33" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一个简单的pug模板:</p><pre class="lr ls lt lu fd lv lq lw lx aw ly bi"><span id="0230" class="lz kl hi lq b fi ma mb l mc md">html<br/>  head<br/>    title i18next - fastify with pug<br/>  body<br/>    h1=t('home.title')<br/>    div<br/>      a(href="/?lng=en") english<br/>      | &amp;nbsp; | &amp;nbsp;<br/>      a(href="/?lng=it") italiano<br/>      | &amp;nbsp; | &amp;nbsp;<br/>      a(href="/?lng=de") deutsch</span></pre><p id="98cd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们的“主”文件<code class="du ln lo lp lq b">app.js</code>:</p><pre class="lr ls lt lu fd lv lq lw lx aw ly bi"><span id="1833" class="lz kl hi lq b fi ma mb l mc md">import fastify from 'fastify'<br/>import pov from 'point-of-view'<br/>import pug from 'pug'<br/>import { i18next, i18nextPlugin } from './lib/i18n.js'</span><span id="d03f" class="lz kl hi lq b fi me mb l mc md">const port = process.env.PORT || 8080</span><span id="f690" class="lz kl hi lq b fi me mb l mc md">const app = fastify()<br/>app.register(pov, { engine: { pug } })<br/>app.register(i18nextPlugin, { i18next })</span><span id="03c6" class="lz kl hi lq b fi me mb l mc md">app.get('/raw', (request, reply) =&gt; {<br/>  reply.send(request.t('home.title'))<br/>})</span><span id="5d57" class="lz kl hi lq b fi me mb l mc md">app.get('/', (request, reply) =&gt; {<br/>  reply.view('/views/index.pug')<br/>})</span><span id="b404" class="lz kl hi lq b fi me mb l mc md">app.listen(port, (err) =&gt; {<br/>  if (err) return console.error(err)<br/>  // if you like you can also internationalize your log statements ;-)<br/>  console.log(i18next.t('server.started', { port }))<br/>  console.log(i18next.t('server.started', { port, lng: 'de' }))<br/>  console.log(i18next.t('server.started', { port, lng: 'it' }))<br/>})</span></pre><p id="9bf2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在启动应用程序，检查你看到的是什么语言…</p><figure class="lr ls lt lu fd ij er es paragraph-image"><div class="er es mg"><img src="../Images/34d9f8051a0e26561a8af83d07f3f3fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1212/format:webp/0*7UkS_rhtanDcymlv.jpg"/></div></figure><p id="75d3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果您检查控制台输出，您还会看到类似这样的内容:</p><pre class="lr ls lt lu fd lv lq lw lx aw ly bi"><span id="520c" class="lz kl hi lq b fi ma mb l mc md">node app.js<br/># Server is listening on port 8080.<br/># Der server lauscht auf dem Port 8080.<br/># Il server sta aspettando sul port 8080.</span></pre><p id="e7a8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="js">是的，如果你愿意，你也可以将你的日志语句国际化😁</em></p><p id="28a7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="js"> 🧑‍💻一个代码示例可以在</em> <a class="ae jo" href="https://github.com/i18next/i18next-fs-backend/tree/master/example/fastify" rel="noopener ugc nofollow" target="_blank"> <em class="js">这里找到</em> </a> <em class="js">。</em></p><h1 id="993f" class="kk kl hi bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">一个可能的下一步…</h1><p id="98e5" class="pw-post-body-paragraph iq ir hi is b it li iv iw ix lj iz ja jb lk jd je jf ll jh ji jj lm jl jm jn hb bi translated">你希望在翻译管理系统(TMS)中管理你的翻译吗，就像<a class="ae jo" href="https://www.locize.com/" rel="noopener ugc nofollow" target="_blank"> locize </a>一样？</p><p id="a169" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">只需使用这个命令行界面来同步翻译和你的代码。要了解这看起来如何，请查看本教程中的<a class="ae jo" href="https://github.com/locize/react-tutorial#step-1---keep-existing-code-setup-but-synchronize-with-locize" rel="noopener ugc nofollow" target="_blank"> <strong class="is hj">步骤1 </strong>。</a></p><p id="524a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">或者，使用<a class="ae jo" href="https://github.com/locize/i18next-locize-backend" rel="noopener ugc nofollow" target="_blank"> i18next-locize-backend </a>代替<a class="ae jo" href="https://github.com/i18next/i18next-fs-backend" rel="noopener ugc nofollow" target="_blank"> i18next-fs-backend </a>。<br/>如果你在无服务器环境下运行你的代码，确保你<a class="ae jo" href="https://github.com/locize/i18next-locize-backend#important-advice-for-serverless-environments---aws-lambda-google-cloud-functions-azure-functions-etc" rel="noopener ugc nofollow" target="_blank">先阅读这个建议</a>！</p><p id="bf72" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">顺便说一句:你知道吗，你可以轻松地调整你的Fastify应用程序，使其在</strong><a class="ae jo" href="https://aws.amazon.com/lambda/" rel="noopener ugc nofollow" target="_blank"><strong class="is hj">AWS Lambda</strong></a><strong class="is hj">和本地使用。</strong></p><p id="f68a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这可以在<a class="ae jo" href="https://github.com/fastify/aws-lambda-fastify" rel="noopener ugc nofollow" target="_blank"> aws-lambda-fastify </a>的帮助下实现。<br/>只需创建一个新的<code class="du ln lo lp lq b">lambda.js</code>，导入您修改过的<code class="du ln lo lp lq b">app.js</code>文件:</p><pre class="lr ls lt lu fd lv lq lw lx aw ly bi"><span id="0bb9" class="lz kl hi lq b fi ma mb l mc md">// lambda.js<br/>import awsLambdaFastify from 'aws-lambda-fastify'<br/>import app from './app.js'<br/>export const handler = awsLambdaFastify(app)</span></pre><p id="b8f5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">确保您的Fastify应用程序已导出… ( <code class="du ln lo lp lq b">export default app</code> ) <br/>，并且如果没有在AWS Lambda中执行，则只开始监听一个端口(<code class="du ln lo lp lq b">import.meta.url === 'file://${process.argv[1]}'</code>或<code class="du ln lo lp lq b">require.main === module</code>用于CommonJS)</p><pre class="lr ls lt lu fd lv lq lw lx aw ly bi"><span id="251c" class="lz kl hi lq b fi ma mb l mc md">// app.js<br/>import fastify from 'fastify'<br/>import pov from 'point-of-view'<br/>import pug from 'pug'<br/>import { i18next, i18nextPlugin } from './lib/i18n.js'</span><span id="ed21" class="lz kl hi lq b fi me mb l mc md">const port = process.env.PORT || 8080</span><span id="ea2c" class="lz kl hi lq b fi me mb l mc md">const app = fastify()<br/>app.register(pov, { engine: { pug } })<br/>app.register(i18nextPlugin, { i18next })</span><span id="8f5d" class="lz kl hi lq b fi me mb l mc md">app.get('/raw', (request, reply) =&gt; {<br/>  reply.send(request.t('home.title'))<br/>})</span><span id="41f3" class="lz kl hi lq b fi me mb l mc md">app.get('/', (request, reply) =&gt; {<br/>  reply.view('/views/index.pug')<br/>})</span><span id="86e7" class="lz kl hi lq b fi me mb l mc md">if (import.meta.url === `file://${process.argv[1]}`) {<br/>  // called directly (node app.js)<br/>  app.listen(port, (err) =&gt; {<br/>    if (err) return console.error(err)<br/>    console.log(i18next.t('server.started', { port }))<br/>    console.log(i18next.t('server.started', { port, lng: 'de' }))<br/>    console.log(i18next.t('server.started', { port, lng: 'it' }))<br/>  })<br/>} else {<br/>  // imported as a module, i.e. when executed in AWS Lambda<br/>}</span><span id="9ed8" class="lz kl hi lq b fi me mb l mc md">export default app</span></pre><p id="d41c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">😎很酷，对吧？</strong></p><h1 id="ac28" class="kk kl hi bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">Next.js示例</h1><p id="9889" class="pw-post-body-paragraph iq ir hi is b it li iv iw ix lj iz ja jb lk jd je jf ll jh ji jj lm jl jm jn hb bi translated">现在到了<a class="ae jo" href="https://nextjs.org/" rel="noopener ugc nofollow" target="_blank"> Next.js </a> …</p><p id="426b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">谈到Next.js应用的国际化，最受欢迎的选择之一是<a class="ae jo" href="https://github.com/isaachinman/next-i18next" rel="noopener ugc nofollow" target="_blank"> next-i18next </a>。它基于<a class="ae jo" href="https://react.i18next.com/" rel="noopener ugc nofollow" target="_blank"> react-i18next </a>，默认情况下<a class="ae jo" href="https://github.com/isaachinman/next-i18next" rel="noopener ugc nofollow" target="_blank"> next-i18next </a>的用户只需将他们的翻译内容包含为JSON文件，不必担心太多其他问题。</p><p id="f843" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这里，你会找到一个简单的例子。</p><p id="c51a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你只需要一个为<code class="du ln lo lp lq b">next-i18next</code>提供配置的<code class="du ln lo lp lq b">next-i18next.config.js</code>文件，并用<code class="du ln lo lp lq b">appWithTranslation</code>函数包装你的应用程序，它允许通过钩子在你的组件中使用<code class="du ln lo lp lq b">t</code>(翻译)函数。</p><pre class="lr ls lt lu fd lv lq lw lx aw ly bi"><span id="62e1" class="lz kl hi lq b fi ma mb l mc md">// _app.js<br/>import { appWithTranslation } from 'next-i18next'</span><span id="a8ee" class="lz kl hi lq b fi me mb l mc md">const MyApp = ({ Component, pageProps }) =&gt; &lt;Component {...pageProps} /&gt;</span><span id="8f98" class="lz kl hi lq b fi me mb l mc md">export default appWithTranslation(MyApp)</span><span id="e7ac" class="lz kl hi lq b fi me mb l mc md">// index.js<br/>import { useTranslation } from 'next-i18next'<br/>import { serverSideTranslations } from 'next-i18next/serverSideTranslations'<br/>// This is an async function that you need to include on your page-level components, via either getStaticProps or getServerSideProps (depending on your use case)</span><span id="de0f" class="lz kl hi lq b fi me mb l mc md">const Homepage = () =&gt; {<br/>  const { t } = useTranslation('common')</span><span id="d15c" class="lz kl hi lq b fi me mb l mc md">  return (<br/>    &lt;&gt;<br/>      &lt;main&gt;<br/>        &lt;p&gt;<br/>          {t('description')}<br/>        &lt;/p&gt;<br/>      &lt;/main&gt;<br/>    &lt;/&gt;<br/>  )<br/>}</span><span id="3354" class="lz kl hi lq b fi me mb l mc md">export const getStaticProps = async ({ locale }) =&gt; ({<br/>  props: {<br/>    ...await serverSideTranslations(locale, ['common']),<br/>    // Will be passed to the page component as props<br/>  },<br/>})</span><span id="ce1c" class="lz kl hi lq b fi me mb l mc md">export default Homepage</span></pre><p id="0989" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">默认情况下，<code class="du ln lo lp lq b">next-i18next</code>希望您的翻译按如下方式组织:</p><pre class="lr ls lt lu fd lv lq lw lx aw ly bi"><span id="b457" class="lz kl hi lq b fi ma mb l mc md">.<br/>└── public<br/>    └── locales<br/>        ├── en<br/>        |   └── common.json<br/>        └── de<br/>            └── common.json</span></pre><p id="0216" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在<a class="ae jo" href="https://next-i18next.com/" rel="noopener ugc nofollow" target="_blank">这里</a>可以找到这样一个应用部署后的样子。</p><figure class="lr ls lt lu fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mf"><img src="../Images/0d5110faa50ac0f626ac3100c6a0bc5e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*LwVp9u21oPmipZkU.jpg"/></div></div></figure><p id="670b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这个看起来真的很简单，对吧？</p><h1 id="cf15" class="kk kl hi bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">管理代码之外的翻译</h1><p id="2f36" class="pw-post-body-paragraph iq ir hi is b it li iv iw ix lj iz ja jb lk jd je jf ll jh ji jj lm jl jm jn hb bi translated">为了最好地管理翻译，有两种不同的方法:</p><h1 id="5ec3" class="kk kl hi bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">可能性1:现场翻译下载</h1><p id="123e" class="pw-post-body-paragraph iq ir hi is b it li iv iw ix lj iz ja jb lk jd je jf ll jh ji jj lm jl jm jn hb bi translated">当使用<a class="ae jo" href="https://www.locize.com/" rel="noopener ugc nofollow" target="_blank"> locize </a>时，您可以配置您的next-i18next项目来加载来自<a class="ae jo" href="https://docs.locize.com/whats-inside/cdn-content-delivery-network" rel="noopener ugc nofollow" target="_blank"> CDN </a>的翻译(在服务器端和客户端)。</p><p id="e6de" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这样的配置可能如下所示:</p><pre class="lr ls lt lu fd lv lq lw lx aw ly bi"><span id="c66b" class="lz kl hi lq b fi ma mb l mc md">// next-i18next.config.js<br/>module.exports = {<br/>  i18n: {<br/>    defaultLocale: 'en',<br/>    locales: ['en', 'de'],<br/>  },<br/>  backend: {<br/>    projectId: 'd3b405cf-2532-46ae-adb8-99e88d876733',<br/>    // apiKey: 'myApiKey', // to not add the api-key in production, used for saveMissing feature<br/>    referenceLng: 'en'<br/>  },<br/>  use: [<br/>    require('i18next-locize-backend/cjs')<br/>  ],<br/>  ns: ['common', 'footer', 'second-page'], // the namespaces needs to be listed here, to make sure they got preloaded<br/>  serializeConfig: false, // because of the custom use i18next plugin<br/>  // debug: true,<br/>  // saveMissing: true, // to not saveMissing to true for production<br/>}</span></pre><p id="325d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这里你会找到更多的信息和一个例子。</p><p id="5784" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">由于有了<a class="ae jo" href="https://github.com/i18next/i18next-chained-backend" rel="noopener ugc nofollow" target="_blank"> i18next-chained-backend </a>，还可以在本地缓存翻译。<a class="ae jo" href="https://github.com/locize/next-i18next-locize#optional-server-side-caching-to-filesystem" rel="noopener ugc nofollow" target="_blank">在这里</a>你可以找到更多关于这个选项的信息。</p><p id="8ec5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="js">如果你正在一个无服务器的环境中部署你的Next.js应用程序，考虑使用第二种可能性… </em> <br/> <em class="js">更多关于这个原因的信息可以在</em> <a class="ae jo" href="https://github.com/locize/i18next-locize-backend#important-advice-for-serverless-environments---aws-lambda-google-cloud-functions-azure-functions-etc" rel="noopener ugc nofollow" target="_blank"> <em class="js">这里</em> </a> <em class="js">找到。</em></p><h1 id="aea7" class="kk kl hi bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">可能性2:捆绑翻译并保持同步</h1><p id="006c" class="pw-post-body-paragraph iq ir hi is b it li iv iw ix lj iz ja jb lk jd je jf ll jh ji jj lm jl jm jn hb bi translated">如果你不确定，就选择这种方式。</p><p id="4f37" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">此选项不会更改“普通”next-i18next项目的配置:</p><pre class="lr ls lt lu fd lv lq lw lx aw ly bi"><span id="0fe3" class="lz kl hi lq b fi ma mb l mc md">// next-i18next.config.js<br/>module.exports = {<br/>  i18n: {<br/>    defaultLocale: 'en',<br/>    locales: ['en', 'de'],<br/>  }<br/>}</span></pre><p id="59f2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在“部署”应用程序之前，只需下载或同步您的本地翻译。</p><p id="5795" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这里，你可以找到更多的信息和例子。</p><p id="fc1c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">例如，您可以运行一个<a class="ae jo" href="https://github.com/locize/next-i18next-locize/blob/main/package.json#L6" rel="noopener ugc nofollow" target="_blank"> npm脚本脚本</a>(或类似的)，它将使用<a class="ae jo" href="https://github.com/locize/locize-cli" rel="noopener ugc nofollow" target="_blank"> cli </a>将翻译从locize下载到next-i18next正在查找的适当文件夹中(即<code class="du ln lo lp lq b">./public/locales</code>)。通过这种方式，翻译捆绑在你的应用程序中，你不会在运行时生成任何CDN下载。</p><p id="5b79" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">即<code class="du ln lo lp lq b">locize download --project-id=d3b405cf-2532-46ae-adb8-99e88d876733 --ver=latest --clean=true --path=./public/locales</code></p><h1 id="7a8f" class="kk kl hi bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">🎉🥳结论🎊🎁</h1><p id="eef6" class="pw-post-body-paragraph iq ir hi is b it li iv iw ix lj iz ja jb lk jd je jf ll jh ji jj lm jl jm jn hb bi translated">如你所见，i18n在服务器端也很重要。</p><p id="018a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我希望你已经学到了一些关于服务器端国际化和现代本地化工作流程的新东西。</p><p id="d1d7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">因此，如果你想让你的i18n话题更上一层楼，值得尝试一下<a class="ae jo" href="https://www.i18next.com/" rel="noopener ugc nofollow" target="_blank"> i18next </a>和<a class="ae jo" href="https://www.locize.com/" rel="noopener ugc nofollow" target="_blank"> locize </a>。</p><p id="9090" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi">👍</p></div></div>    
</body>
</html>