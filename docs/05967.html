<html>
<head>
<title>Making a video game with Flutter + Flame 🔥👾 (2 part)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用颤动+火焰制作电子游戏🔥👾(2部分)</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/make-a-video-game-with-flutter-flame-2-part-9f3a985ffc69?source=collection_archive---------28-----------------------#2021-08-03">https://medium.com/geekculture/make-a-video-game-with-flutter-flame-2-part-9f3a985ffc69?source=collection_archive---------28-----------------------#2021-08-03</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="85b1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在上一篇文章中，我们谈到了火焰实际上是如何工作的。我们添加了文本，也检查了游戏的状态。</p><p id="008f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">好了，我们开始吧！</p><p id="fc00" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这一次，我们将使用按钮和火焰“覆盖”在视图中添加交互。</p><h1 id="88e8" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">覆盖物</h1><p id="22b7" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">一个覆盖将帮助你连接你的游戏部件到你的其他部件。因此，您需要使用GameWidget的一个名为“overlayBuilderMap”的参数。</p><p id="9765" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">例如:我们可以创建一个小部件，我们将在我们的游戏小部件中调用它，如下所示:</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es kg"><img src="../Images/0749d597aa425cb6fe1a5a8d68086f6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qJZ-gQPvQ7QR634n92xlrA.png"/></div></div></figure><p id="c666" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在在您的构建方法中添加下一个:</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es ks"><img src="../Images/d83772f64c5d4b8a1f5a2e8a874beefa.png" data-original-src="https://miro.medium.com/v2/resize:fit:820/format:webp/1*cjkDi8u-iabul_Kge_8Kbg.png"/></div></figure><p id="5972" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在应该是这样的:</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es kt"><img src="../Images/e17cfdb0d988c5211e73861e4929e808.png" data-original-src="https://miro.medium.com/v2/resize:fit:796/format:webp/1*Xl7S7FDxuQiAd-QiCYs45Q.png"/></div></figure><p id="6ae3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们有了我们游戏的演示文稿，你可以改进它😅当然啦！</p><h1 id="6a9f" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">添加第一个按钮</h1><p id="92ee" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">在火焰中，一切都是组成部分。在我们的例子中，我们将使用一个将来可以改进的sprite组件。</p><p id="df8b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们还需要增加资产。火焰提供了一个文档和演示如何创建您的资产文件夹在这里:【https://flame-engine.org/docs/#/structure T2】</p><p id="b66a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我们的例子中，它应该是这样的</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es kv"><img src="../Images/2bc2b64fc36a3005d68cd772b5810068.png" data-original-src="https://miro.medium.com/v2/resize:fit:988/format:webp/1*aWyUmxuTFkZcDQJuwO2rrg.png"/></div></figure><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es kw"><img src="../Images/c242c19d4c7d539eda1e0ce412266de5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0A-Kf8kpLzaNz5gkjHGMbg.png"/></div></div><figcaption class="kx ky et er es kz la bd b be z dx">I created faster this button in photoshop</figcaption></figure><p id="3652" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">好了，现在我们可以创建一个从SpriteComponent扩展的StartButton类，如下所示:</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es lb"><img src="../Images/634b3a8c50136e060e5769b7d58f8409.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9btdek123sufwwc8LZ8MAw.png"/></div></div></figure><p id="7a99" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们快速解释给定代码中的一些重要内容:</p><blockquote class="lc ld le"><p id="1c26" class="if ig lf ih b ii ij ik il im in io ip lg ir is it lh iv iw ix li iz ja jb jc hb bi translated"><em class="hi"> Vector2 </em>基本上有点像2D方向，就像2D空间中的xy点。<code class="du lj lk ll lm b"><em class="hi">Vector2</em></code>的大小等于<code class="du lj lk ll lm b"><em class="hi">sqrt(x^2+y^2)</em></code>。</p></blockquote><p id="d09f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">优先级</strong>用于设置z轴上的位置——比如将其移动到前景或背景。</p><p id="48b3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">HasGameRef 让我们参考一下我们的基本游戏，在这个游戏中我们可以访问几个变量和方法。</p><p id="31f8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> Sprite </strong>是一个二维图像——我们在视频游戏中经常使用它。比如说。子画面可以只包含一个图像或多个图像(例如用于动画)。为什么我们把它放在精灵中，而不是单独添加图片？因为我们可以节省一些空间，也可以更好地组织我们的应用程序。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es ln"><img src="../Images/6f4bbb90db425b480215920117a400f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s43PNVL7-imTxOij1w1Cwg.png"/></div></div><figcaption class="kx ky et er es kz la bd b be z dx">There are lots of free sprites in the internet.</figcaption></figure><p id="2184" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们不使用复杂的精灵——我们只使用单一的图像。</p><p id="de5a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们回到我们的蛇游戏课的基础游戏。我们可以使用以下方式加载大量图像:</p><p id="4750" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">images . load all([资产名称])；在我们的加载方法中。(请记住:<strong class="ih hj"> onLoad </strong>在开始游戏之前加载我们所有的资产，<strong class="ih hj"> update </strong>正在为更新内容运行一个无限循环)</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es lo"><img src="../Images/aecc7dcd08fab9e255f24e096b673494.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WR7U6f0Cde14uBU2GlgNLQ.png"/></div></div><figcaption class="kx ky et er es kz la bd b be z dx">As you can see in the code, when we are using “add([component])” we can add our components to the game.</figcaption></figure><p id="9fea" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们再次运行我们的游戏！现在应该是这样的:</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es lp"><img src="../Images/dcd074c0d270435cc5505bd4e58f36c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1136/format:webp/1*jteCNtF1Jva0DGG99mO2Bw.png"/></div></figure><p id="1653" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">目前，我们的按钮没有做任何事情。但是不要担心——有了flame，实现tap真的很容易。我们像这样使用类Tappable类(更多信息<a class="ae ku" href="https://flame-engine.org/docs/#/input" rel="noopener ugc nofollow" target="_blank">https://flame-engine.org/docs/#/input</a></p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es lq"><img src="../Images/4f0ff59b6084b9afd0bb28f2f509ab0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w7rm-mmkA_dJCuqetjsrfw.png"/></div></div></figure><p id="5e86" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我还实现了两个方法和一个静态变量“actualViewState”。这将有助于我们将来了解我在游戏中的状态。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es lr"><img src="../Images/93fdf8ccccbe94471773cd469962c321.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m6RWbSbeHdOBy7h0lTNDzQ.png"/></div></div></figure><p id="a9d9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">不要忘记添加HasTappableComponents。这将有助于我们在屏幕上添加一个监听器，所有可点击的组件都将工作。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es ls"><img src="../Images/aef9f0feac8e9c816dd12f6bd4af3359.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WTe-wldLEChPyprYZusfXA.png"/></div></div><figcaption class="kx ky et er es kz la bd b be z dx">now your base game looks like this</figcaption></figure><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es lt"><img src="../Images/5a93103cfeed8bd4dc6013cedf77c3d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1372/format:webp/1*RZ-210RXJ4ZbUUPBlKps3A.png"/></div></figure><p id="b089" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后一点:“components.clear()”帮助我们清除实际屏幕上的所有组件和覆盖层。显然，我们也删除了我们的覆盖。</p><p id="5948" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下次发货再见！🥳</p><p id="d259" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我用西班牙语写了第一部分，但我会试着把它翻译成英语。这篇文章已经是英文的了，但是我也会把它翻译成西班牙文！【请有耐心🙇🏾 🥺]</p><p id="1399" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">维克托·m .<a class="ae ku" href="https://twitter.com/VicktorManuel" rel="noopener ugc nofollow" target="_blank">@维克托马努尔</a></p><p id="191a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">韦雷纳<a class="ae ku" href="https://twitter.com/verry_codes" rel="noopener ugc nofollow" target="_blank"> @verry_codes </a></p><p id="9b9d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="lf"> *谢谢韦雷纳和索菲娅！</em></p></div></div>    
</body>
</html>