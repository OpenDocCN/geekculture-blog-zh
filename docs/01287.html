<html>
<head>
<title>Scheduling Tools for Teams Across Different Time Zones</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">跨不同时区的团队调度工具</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/scheduling-tools-for-teams-across-different-time-zones-5faf32d493b6?source=collection_archive---------21-----------------------#2021-04-04">https://medium.com/geekculture/scheduling-tools-for-teams-across-different-time-zones-5faf32d493b6?source=collection_archive---------21-----------------------#2021-04-04</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="70b8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">安排约会和预约会议有时会是一场巨大的斗争。使用与我们的个人和工作日历同步的工具，预约一对一的约会相当容易。但是，如何安排有多个出席者或大型团队的会议呢？更糟糕的是，如果是跨不同时区的国际团队呢？</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/8aa47ac5a6e43cbea859109c97635dbc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QG0jv_bEtmyMYrda7fZj-A.jpeg"/></div></div></figure><p id="0a79" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这篇文章中，我将介绍和解释我们在Spurwing构建的一个解决方案，以方便团队可用性日历和团队调度。</p><h1 id="c223" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">要求</h1><p id="f1b0" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">这个解决方案是用JavaScript和NodeJS v12+构建的。我们使用了以下库:jQuery、Luxon和Express。</p><h1 id="78c4" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">演示</h1><p id="7699" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">现场演示链接:<a class="ae ks" href="https://cloud.spurwing.io/Availability/S01/" rel="noopener ugc nofollow" target="_blank">https://cloud.spurwing.io/Availability/S01/</a></p><p id="e8a3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">主页:</strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kt"><img src="../Images/f3d01fcb7f11b5311d2dda0a46e9fc92.png" data-original-src="https://miro.medium.com/v2/resize:fit:534/format:webp/0*Ej-8k2vUMbt-bs6p.png"/></div></figure><p id="1d9f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">日历用于选择几个候选日期(无限制)。提交后，您将看到两个链接出现，一个是结果页面，另一个是与他人共享的提交链接。</p><p id="0b7e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">用户提交页面:</strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ku"><img src="../Images/e7192c06fa751916d72660cf86e6099e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*FvlicQIOmqsYTl2L.png"/></div></div></figure><p id="e9d2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在提交页面上，每个用户都可以单击单元格来表示他们在给定日期和时间的可用性。必须提供姓名和电子邮件地址才能提交答案。通过使用同一电子邮件重新提交，可以更新已提交的答案。</p><p id="f6a6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">结果页面:</strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kv"><img src="../Images/29d308312b813d8c514d93d0391f6fef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*thMaQwVtEdr0AAb-.png"/></div></div></figure><p id="0849" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">结果页面显示了每个用户的所有提交的严格重叠。考虑到这些重叠的区域，主持人/组织者可以在适合每个人日程表的日期和时间安排会议。</p><p id="fc4b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">请注意，所有数据都是相对于时区的。这意味着我们可以轻松地安排和预订来自不同时区的成员的会议。每个用户的时区都被考虑在内，并被转换成一个通用的UTC时间戳。最终结果页面显示了与查看者所在时区相关的所有提交内容。</p><p id="9c96" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">即将推出:</strong>能够使用Spurwing的API安排会议，并向所有参与者发送电子邮件邀请。</p><h1 id="714a" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">履行</h1><p id="740d" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">在我们的<a class="ae ks" href="https://github.com/Spurwingio/Availability-Solutions/tree/main/solution_01" rel="noopener ugc nofollow" target="_blank"> Github子库</a>中可以找到这个组调度解决方案的完整实现。我们存储库的根目录将包括几个更相关的解决方案。</p><h1 id="b31c" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">后端</h1><p id="2b25" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated"><code class="du kw kx ky kz b">server.js</code>脚本默认表示一个运行在端口8000上的NodeJS API/REST服务器。它有几个获取、提交和更新数据的端点。一个基于JSON文件的数据库用于演示目的，建议用一个生产就绪的数据库如MongoDB来代替它。</p><h1 id="2746" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">前端</h1><p id="7372" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated"><code class="du kw kx ky kz b">public</code>目录包含HTML、JavaScript和CSS文件。出于演示目的，所有自定义JavaScript代码都位于HTML文件中。JS和CSS文件是UI调度器的外部开源资源。</p><p id="83de" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们的定制JavaScript代码非常简短。唯一不可避免的复杂性是由于UI调度库。它使用行和列作为单元格的指示器。单元格和实际日期/时间数据之间没有内在联系。该信息是隐式的，并且基于给定24小时周期的准确度(即精度)的行和列来计算。</p><h2 id="ef9b" class="la jq hi bd jr lb lc ld jv le lf lg jz iq lh li kd iu lj lk kh iy ll lm kl ln bi translated">密码</h2><p id="9763" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">解释如何实现row:col到datetime之间的转换可能会很有趣。</p><p id="496b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在<code class="du kw kx ky kz b">meeting.html</code>内部，我们有一些定制的JavaScript代码，负责:捕获用户的选择，将选择数据转换成ISO日期时间格式，然后转换成UTC格式，最后将数据发送到服务器:</p><pre class="je jf jg jh fd lo kz lp lq aw lr bi"><span id="54b7" class="la jq hi kz b fi ls lt l lu lv">let selection = [];<br/>const accuracy = 2; // 30 minute intervals<br/>let dates = [...]; // date strings associated with the meeting</span><span id="e9ce" class="la jq hi kz b fi lw lt l lu lv">$('#test1').scheduler({<br/>  accuracy: accuracy,<br/>  onSelect: (x) =&gt; convert(x, dates),<br/>            // x contains all selected cells in the format:<br/>            // { row1: [...cols], row2: [...cols] }<br/>            // the row keys are just numbers starting from 1.<br/>            // the value is an array of columns starting from 0.<br/>});</span><span id="2a3b" class="la jq hi kz b fi lw lt l lu lv">// convert row-column format into ISO/UTC date format<br/>function convert(sel, dates) {<br/>  selection = []; // empty previous selection (if any)<br/>  for (const row_ in sel) {<br/>    for (const col of sel[row_]) {<br/>      let row = row_ - 1; // make row zero-based<br/>      let hour = Math.floor(col/accuracy) // compute hour<br/>      let minute = ((col / accuracy) - hour)*60; // compute minutes<br/>      let dt = luxon.DateTime.fromISO(dates[row]); // get date and parse it<br/>      dt.set({hour, minute}); // set hour and minutes<br/>      selection.push(dt.toUTC().toString()) // relative to UTC datetime<br/>    }<br/>  }<br/>}</span><span id="0f3d" class="la jq hi kz b fi lw lt l lu lv">// on click submit -&gt; send { selection } as data</span></pre><p id="dd0a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">类似的反向操作在<code class="du kw kx ky kz b">results.html</code>中执行，从服务器获取UTC日期时间，严格重叠，转换为用户检测到的时区，最后显示在只读UI上。</p><h1 id="db0e" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">结论</h1><p id="22d6" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">你可以把这个软件放在你的服务器或者云提供商那里使用。但是，您可能还希望添加一个额外的安全层(例如密码)，以帮助防止用户强行使用会议ID来查看/收集所有用户的姓名和电子邮件。</p><p id="759d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最终，这个解决方案为我们节省了大量安排会议的时间，尤其是在跨多个时区的国际团队中。如需更多工具和资源，请访问我们的<a class="ae ks" href="https://github.com/Spurwingio/" rel="noopener ugc nofollow" target="_blank"> Github页面</a>。</p></div></div>    
</body>
</html>