<html>
<head>
<title>List<t> &amp; List<t>(Capacity) &amp; Array Benchmark</t></t></title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">列表<t> &amp;列表<t>(容量)&amp;数组基准</t> </t></h1>
<blockquote>原文：<a href="https://medium.com/geekculture/list-t-list-t-capacity-array-benchmark-d911aa838b34?source=collection_archive---------3-----------------------#2021-12-31">https://medium.com/geekculture/list-t-list-t-capacity-array-benchmark-d911aa838b34?source=collection_archive---------3-----------------------#2021-12-31</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/d9add2dbf93a38e79c4d21d7e48b529c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YAU9BxyU_7EGvCILu84fkQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx"><strong class="bd iu">Image Source: </strong><a class="ae iv" href="https://www.passmark.com" rel="noopener ugc nofollow" target="_blank"><strong class="bd iu">og_cpu_benchmarks.png</strong></a></figcaption></figure><p id="1161" class="pw-post-body-paragraph iw ix hi iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">嗨，今天我们将讨论动态列表<t>、大小特定列表<t> (10)和基准测试的数组列表。</t></t></p><p id="468f" class="pw-post-body-paragraph iw ix hi iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">首先，我们将创建一个. Net 6.0控制台应用程序，我们将编写测试列表<t>、数组和列表<t>(计数)的基准。</t></t></p><p id="8ad8" class="pw-post-body-paragraph iw ix hi iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">将“BenchmarkDotNet”包添加到项目中。</p><pre class="ju jv jw jx fd jy jz ka kb aw kc bi"><span id="71f7" class="kd ke hi jz b fi kf kg l kh ki"><strong class="jz hj">dotnet add package BenchmarkDotNet --version 0.13.1</strong></span></pre><p id="e97a" class="pw-post-body-paragraph iw ix hi iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">在第一个场景中，我们将创建两个列表&lt;&gt;，其中一个是动态列表，在第二个场景中，我们将在列表的构造函数处设置容量。我们将多次向这两个列表添加不同的计数，并检查基准测试结果。</p><p id="3d0f" class="pw-post-body-paragraph iw ix hi iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">我们将创建一个“ListCapacityPerformance”类，并用[MemoryDiagnoser]属性对其进行标记。MemoryDiagnoser允许测量分配的字节数和垃圾收集频率。</p><pre class="ju jv jw jx fd jy jz ka kb aw kc bi"><span id="6ebd" class="kd ke hi jz b fi kf kg l kh ki">using BenchmarkDotNet.Attributes;<br/>using BenchmarkDotNet.Running;</span><span id="c34f" class="kd ke hi jz b fi kj kg l kh ki">[MemoryDiagnoser]<br/>public class ListCapacityPerformance<br/>{<br/>  .<br/>  .<br/>}</span></pre><p id="f239" class="pw-post-body-paragraph iw ix hi iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">使用[Params()]属性，您可以指定一组值。每个值都必须是编译时常数。因此，您将获得每个参数值组合的结果。</p><pre class="ju jv jw jx fd jy jz ka kb aw kc bi"><span id="eadd" class="kd ke hi jz b fi kf kg l kh ki">[Params(20, 80, 300, 800)]<br/>public int capacity;</span></pre><p id="6d5f" class="pw-post-body-paragraph iw ix hi iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">在下面的例子中，我们将创建列表&lt;&gt;，但不设置任何容量。毕竟，我们将为“count”数组的每个变量添加数字到这个动态列表中。最后，我们将检查内存分配、总时间等。</p><pre class="ju jv jw jx fd jy jz ka kb aw kc bi"><span id="ac08" class="kd ke hi jz b fi kf kg l kh ki">[Benchmark]<br/>public List&lt;int&gt; DynamicCapacity()<br/>{<br/>     List&lt;int&gt; squidList = new List&lt;int&gt;();<br/>     for (int i = 0; i &lt; capacity; i++)<br/>     {<br/>        squidList.Add(i);<br/>     }<br/>     return squidList;<br/>}</span></pre><p id="a8c2" class="pw-post-body-paragraph iw ix hi iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">在第二个例子中，我们将用静态容量创建“List <int> (capacity)”。对于每个循环，我们将列表长度设置为容量值。</int></p><pre class="ju jv jw jx fd jy jz ka kb aw kc bi"><span id="5126" class="kd ke hi jz b fi kf kg l kh ki">[Benchmark]<br/>public List&lt;int&gt; SetCapacity()<br/>{<br/>     List&lt;int&gt; squidList = new List&lt;int&gt;(capacity);<br/>     for (int i = 0; i &lt; capacity; i++)<br/>     {<br/>          squidList.Add(i);<br/>     }<br/>     return squidList;<br/>}</span></pre><p id="d384" class="pw-post-body-paragraph iw ix hi iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">内置“释放”模式。以及“不调试就启动”。下面，您可以看到静态容量列表分配得更少，速度更快。值越大，差距越大。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kk"><img src="../Images/c354b3428a771bc25801da562f531f4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ik0sEUGMgo_n11XR4O6qKg.png"/></div></div></figure><figure class="ju jv jw jx fd ij"><div class="bz dy l di"><div class="kl km l"/></div></figure></div><div class="ab cl kn ko gp kp" role="separator"><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks"/></div><div class="hb hc hd he hf"><p id="b8c7" class="pw-post-body-paragraph iw ix hi iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">如果你在列表&lt;&gt; (x)中添加了一个条目，超过了它的容量，C#会为每个重载扩展列表的大小，是当前大小的2倍。列表&lt;&gt;总是在添加每个项目之前检查其限制。</p><p id="30ab" class="pw-post-body-paragraph iw ix hi iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">名单上有一个障碍&lt;&gt;。在下面的例子中，我们将列表的容量设置为4。如果我们添加到列表中的项目超过4个，它会在每次过载时自动增加两次容量。</p><p id="664a" class="pw-post-body-paragraph iw ix hi iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">让我们看看下面的例子:是的。没有Main()方法的. Net 6控制台应用程序:)</p><pre class="ju jv jw jx fd jy jz ka kb aw kc bi"><span id="f954" class="kd ke hi jz b fi kf kg l kh ki">List&lt;int&gt; squidlist = new List&lt;int&gt;(4);</span><span id="20e4" class="kd ke hi jz b fi kj kg l kh ki">Console.WriteLine("Capacity Is: " + squidlist.Capacity);<br/>Console.WriteLine("Count Is: " + squidlist.Count);</span><span id="f202" class="kd ke hi jz b fi kj kg l kh ki">squidlist.Add(1);<br/>squidlist.Add(2);<br/>squidlist.Add(3);<br/>squidlist.Add(4);</span><span id="e7b5" class="kd ke hi jz b fi kj kg l kh ki">Console.WriteLine("Capacity Is: " + squidlist.Capacity);<br/>Console.WriteLine("Count Is: " + squidlist.Count);</span><span id="2a63" class="kd ke hi jz b fi kj kg l kh ki">squidlist.Add(5);<br/>squidlist.Add(6);</span><span id="18ff" class="kd ke hi jz b fi kj kg l kh ki">Console.WriteLine("Capacity Is: " + squidlist.Capacity);<br/>Console.WriteLine("Count Is: " + squidlist.Count);</span><span id="de66" class="kd ke hi jz b fi kj kg l kh ki">squidlist.Add(7);<br/>squidlist.Add(8);<br/>squidlist.Add(5);<br/>squidlist.Add(9);</span><span id="50e1" class="kd ke hi jz b fi kj kg l kh ki">Console.WriteLine("Capacity Is: " + squidlist.Capacity);<br/>Console.WriteLine("Count Is: " + squidlist.Count);</span></pre><p id="a4b8" class="pw-post-body-paragraph iw ix hi iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">如果您看到结果，在开始时，列表容量为4，计数为0。在我们添加了4个条目之后，列表容量又是4，但是这次它的计数也是4。在我们添加了2个条目并重载了长度列表之后，它的容量增加了，变成了8(2*4)，计数为6。最后，当我们再添加4个条目时，List &lt;&gt;计数为10，容量增加为16 (2*8)。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div class="er es ku"><img src="../Images/efc859d55d602dd00c2db4a6f3d5047c.png" data-original-src="https://miro.medium.com/v2/resize:fit:468/format:webp/1*o7WcTluGmaeKyf6eEp1cnQ.png"/></div></figure><blockquote class="kv kw kx"><p id="0eaa" class="iw ix ky iy b iz ja jb jc jd je jf jg kz ji jj jk la jm jn jo lb jq jr js jt hb bi translated"><strong class="iy hj">超过清单上限是有代价的。因此，在处理列表时应该非常小心，尤其是在处理大型数据时。</strong></p></blockquote></div><div class="ab cl kn ko gp kp" role="separator"><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks"/></div><div class="hb hc hd he hf"><h1 id="36e9" class="lc ke hi bd iu ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">列表与数组</h1><p id="0fa5" class="pw-post-body-paragraph iw ix hi iy b iz ly jb jc jd lz jf jg jh ma jj jk jl mb jn jo jp mc jr js jt hb bi translated">有时与列表的许多优点相反，使用数组可能会更好。</p><p id="40c8" class="pw-post-body-paragraph iw ix hi iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">让我们看看下面的例子:和上面的例子一样，我们在一个列表和一个数组中添加了从1到最大的计数。我们对计数数组的每个组合做了同样的事情。</p><figure class="ju jv jw jx fd ij"><div class="bz dy l di"><div class="kl km l"/></div></figure><p id="6697" class="pw-post-body-paragraph iw ix hi iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">正如我们在基准测试中看到的，阵列版本要快得多。我知道大多数开发人员更喜欢列表而不是数组。为什么？</p><p id="c837" class="pw-post-body-paragraph iw ix hi iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated"><strong class="iy hj">因为:</strong></p><ul class=""><li id="d350" class="md me hi iy b iz ja jd je jh mf jl mg jp mh jt mi mj mk ml bi translated">List有添加、移除、搜索和排序元素的特殊方法。</li><li id="b2d3" class="md me hi iy b iz mm jd mn jh mo jl mp jp mq jt mi mj mk ml bi translated">列表<t>是一个动态数据结构，这意味着我们在声明它的时候不需要知道元素的数量。因此列表大小可以在运行时扩大。</t></li></ul><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mr"><img src="../Images/3247d8d8d2c4ecd32f71b935655467d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cS5FjB69Ltj54gpfR7Sxmw.png"/></div></div></figure><p id="6a46" class="pw-post-body-paragraph iw ix hi iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">数组没有List有用，但是速度更快，你可以通过数组的索引来搜索元素。但是列表需要迭代，这意味着列表的搜索时间很慢。与列表不同，数组需要更少的内存。但是列表有很多有用的特殊方法，所以它们比数组更好。</p><p id="bbaf" class="pw-post-body-paragraph iw ix hi iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated"><strong class="iy hj">结论:</strong></p><p id="994b" class="pw-post-body-paragraph iw ix hi iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">有许多不同的数据结构。每种数据结构都有优缺点，根据任务的不同会影响性能。今天我们讨论了数组和列表。我希望这篇文章能帮助你理解数组和列表的区别。新年快乐。2022年下期文章再见。再见</p><figure class="ju jv jw jx fd ij"><div class="bz dy l di"><div class="ms km l"/></div></figure><p id="302d" class="pw-post-body-paragraph iw ix hi iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated"><em class="ky">“如果您读到现在，首先感谢您的耐心和支持。欢迎大家来我的博客</em><a class="ae iv" href="http://www.borakasmer.com/" rel="noopener ugc nofollow" target="_blank"><em class="ky"/><strong class="iy hj"><em class="ky"/></strong></a><strong class="iy hj"><em class="ky"/></strong><em class="ky">了解更多！”</em></p><p id="3941" class="pw-post-body-paragraph iw ix hi iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated"><strong class="iy hj">来源:</strong></p><ul class=""><li id="b5f2" class="md me hi iy b iz ja jd je jh mf jl mg jp mh jt mi mj mk ml bi translated"><a class="ae iv" href="https://adamsitnik.com/the-new-Memory-Diagnoser/" rel="noopener ugc nofollow" target="_blank">https://adamsitnik.com/the-new-Memory-Diagnoser/</a></li><li id="7306" class="md me hi iy b iz mm jd mn jh mo jl mp jp mq jt mi mj mk ml bi translated"><a class="ae iv" href="https://www.thetechplatform.com/post/arrays-vs-lists-in-c" rel="noopener ugc nofollow" target="_blank">https://www.thetechplatform.com/post/arrays-vs-lists-in-c</a></li><li id="182e" class="md me hi iy b iz mm jd mn jh mo jl mp jp mq jt mi mj mk ml bi translated"><a class="ae iv" rel="noopener" href="/star-gazers/arrays-vs-lists-in-c-c7cafb268f92">https://medium . com/star-gazers/arrays-vs-lists-in-c-c 7 cafb 268 f 92</a></li><li id="ccaf" class="md me hi iy b iz mm jd mn jh mo jl mp jp mq jt mi mj mk ml bi translated"><a class="ae iv" href="https://towardsdatascience.com/linked-lists-vs-arrays-78746f983267" rel="noopener" target="_blank">https://towards data science . com/linked-lists-vs-arrays-78746 f 983267</a></li><li id="e6a0" class="md me hi iy b iz mm jd mn jh mo jl mp jp mq jt mi mj mk ml bi translated"><a class="ae iv" href="https://benchmarkdotnet.org/articles/features/parameterization.html" rel="noopener ugc nofollow" target="_blank">https://benchmarkdotnet . org/articles/features/parameter ization . html</a></li><li id="5599" class="md me hi iy b iz mm jd mn jh mo jl mp jp mq jt mi mj mk ml bi translated"><a class="ae iv" href="https://www.linkedin.com/posts/rogermaza_softwareengineering-programming-coding-activity-6877930555896303616-jYHd/" rel="noopener ugc nofollow" target="_blank">https://www . LinkedIn . com/posts/Roger maza _ software engineering-programming-coding-activity-6877930555896303616-jYHd/</a></li></ul></div></div>    
</body>
</html>