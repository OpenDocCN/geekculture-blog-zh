<html>
<head>
<title>How to expose your PC to the internet without a public IP address?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在没有公共IP地址的情况下将您的PC暴露在互联网上？</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/how-to-expose-your-pc-to-the-internet-without-a-public-ip-address-c7a2c808ab6b?source=collection_archive---------1-----------------------#2021-10-06">https://medium.com/geekculture/how-to-expose-your-pc-to-the-internet-without-a-public-ip-address-c7a2c808ab6b?source=collection_archive---------1-----------------------#2021-10-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/1cd41dbdabbcb4bcfd1d3bb5d1bf04eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WG0ZwWlgXnGqvDH074vQzQ.jpeg"/></div></div></figure><p id="dfed" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi jo translated">互联网是迷人的:让每个人都联系在一起，让在家工作成为现实，让获取信息变得廉价而快捷，然而互联网的基本概念非常简单。只是一些共享文件。你访问的每一个网站或网络应用都只是存储在网络中另一台电脑上的一些文件。当有人输入URL时，一个请求被发送到特定的计算机，计算机将所需的文件发送回发出请求的人，并在浏览器中查看这些文件。即使基本概念是如此简单，互联网只是在非常非常大的范围内影响了世界。这真的是一场革命。</p><p id="3b62" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当它能够从网络中的另一台计算机请求文件时，我们能与另一台计算机共享我们的文件吗？互联网只是一个分布式网络，所以我们也可以与另一台计算机共享文件。假设你开发了一个很酷的web应用程序，你想把它展示给你的朋友或者外界。它可以在主机提供商的帮助下完成，你只需上传你的网络应用程序的文件，它就运行在提供商提供的服务器上。</p><p id="5d97" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你的应用程序准备投入生产，那么在其他平台上托管是非常好的，因为它更安全，托管你的应用程序的机器将具有更高的性能，并且互联网连接速度也将非常快。</p><p id="3141" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">但有时你只想简单地向某人展示你的应用程序，而不是让每个人都可以使用，或者你可能想在开发的同时获得对你的应用程序的反馈。在一个平台上托管，学习如何在一个托管平台上托管，这个阶段可能太多了。此外，动态web应用程序没有完全免费的托管解决方案。要么是使用量有限制，要么是要付费。</p><p id="fb60" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">对此有一个完美的解决方案，那就是将你的电脑直接连接到互联网，这样你就可以让你机器上的服务器监听来自互联网的请求，而不需要主机。任何能够访问您机器中的服务器的人都可以向它发送请求或与之通信。那么，我们该怎么做呢？为此，让我们进入一些基本的网络。</p><h1 id="c602" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">IP地址；网络地址</h1><p id="c6ba" class="pw-post-body-paragraph iq ir hi is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hb bi translated">IP地址类似于物理地址。假设你要给朋友送快递，你提供他家的地址。与IP地址相同有助于识别网络中的机器。当您在浏览器中键入一个URL时，该URL在<a class="ae la" href="https://www.cloudflare.com/en-in/learning/dns/what-is-dns/" rel="noopener ugc nofollow" target="_blank"> DNS(域名系统)</a>的帮助下被翻译成相应的IP地址，请求被发送到特定的IP地址。全世界目前都在使用被称为IPV4地址的第4版IP地址</p><p id="51cc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">IPV4地址是32位数字地址。可能有40亿个IPV4地址。因此，如果我们为每台机器分配一个IPV4地址，那么这台机器就可以在整个网络中被唯一地识别，并且可以与之通信。如果是这样的话，每个人都可以很容易地将他们的电脑暴露在互联网上，但现在不是这样了。</p><p id="101d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">即使IPV4地址可以有40亿个值，它也会随着互联网的快速发展而耗尽。因此，到目前为止，只有互联网服务提供商和其他如数据中心或托管服务提供商拥有唯一的IPV4地址。想要有一个属于自己的独一无二的IP，有点难。这些唯一的地址被称为公共IP。</p><p id="2eda" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">专用IP地址是您的路由器用来识别本地网络中的计算机的地址。因此，ISP可能会为您的路由器分配一个公共IP地址，这样路由器就会有一个IP地址池。连接到路由器的每台机器都将从地址池中获得一个IP地址。路由器分配的这些IP地址是私有的，称为私有IP地址。路由器本身也将有一个私有IP地址，称为默认网关。本地网络中的一台机器向该默认网关IP发送请求。</p><h1 id="bee2" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">网络地址转换</h1><figure class="lc ld le lf fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lb"><img src="../Images/cbaaf0eaa81300a4afa7a6ccdc930efc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k3ruG6SjvJOKBTkiEEzIYg.jpeg"/></div></div><figcaption class="lg lh et er es li lj bd b be z dx">Source: <a class="ae la" href="https://www.comparitech.com/blog/vpn-privacy/nat-firewall/" rel="noopener ugc nofollow" target="_blank">https://www.comparitech.com/blog/vpn-privacy/nat-firewall/</a></figcaption></figure><p id="05a5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">NAT将公共IP映射到相应的私有IP，即当本地网络中的机器通过互联网向服务器发送请求时，它首先将请求发送到路由器的私有IP，然后NAT将私有IP映射到路由器的公共IP。当服务器向机器发回响应时，它将请求发送到路由器的公共IP，NAT将路由器的公共IP映射到发送方的私有IP。</p><p id="7bc8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">因此，如果设备共享同一个本地网络，就不需要为每台设备分配公共IP。这也增加了安全性，因为没有人能够直接连接到NAT后的设备。<a class="ae la" href="https://www.lifewire.com/how-to-port-forward-4163829" rel="noopener ugc nofollow" target="_blank">如果您的路由器有公共IP，您可以通过端口转发将您的电脑暴露在互联网上，这非常简单</a>。</p><p id="0b93" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">问题是有时甚至路由器也没有公共IP，因为路由器就在另一个NAT之后，这意味着路由器本身是一个更大的本地网络中的设备。ISP可以使用NAT并为路由器分配私有IP，而不是为每台路由器分配公有IP。因此，在ISP下面会有一个路由器本地网络，在每个路由器下面，会有一个计算机或移动电话本地网络。这是为了提高安全性，也是为了减少公共IP的使用。</p><h1 id="6484" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">在没有公共IP的情况下将PC暴露于互联网</h1><figure class="lc ld le lf fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lk"><img src="../Images/ca62bd7d24b671f68b5276e08b9bc5d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*amWPjjI_oDjMOGMTd-PKkQ.png"/></div></div></figure><p id="2a3f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这是我在Nodejs服务器上运行的应用程序，端口为3000。这个应用程序在我的电脑上。</p><p id="5895" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要在没有公共IP的情况下将PC暴露于互联网:</p><ul class=""><li id="1fd3" class="ll lm hi is b it iu ix iy jb ln jf lo jj lp jn lq lr ls lt bi translated">下载并安装OpenVPN。在我的ubuntu 20.04中，它是预装的。</li><li id="c8d8" class="ll lm hi is b it lu ix lv jb lw jf lx jj ly jn lq lr ls lt bi translated">转到<a class="ae la" href="https://portmap.io/" rel="noopener ugc nofollow" target="_blank">https://portmap.io/</a></li><li id="9a2d" class="ll lm hi is b it lu ix lv jb lw jf lx jj ly jn lq lr ls lt bi translated">创建一个帐户(免费)</li><li id="b295" class="ll lm hi is b it lu ix lv jb lw jf lx jj ly jn lq lr ls lt bi translated">单击“配置”选项卡</li><li id="b937" class="ll lm hi is b it lu ix lv jb lw jf lx jj ly jn lq lr ls lt bi translated">添加新配置，选择协议，给出配置名称，然后保存配置并下载配置文件。</li></ul><figure class="lc ld le lf fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lz"><img src="../Images/3a934d18be280c232ca15595851a61ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jMrFqDScNa17QacKcOOpBw.png"/></div></div></figure><ul class=""><li id="bf38" class="ll lm hi is b it iu ix iy jb ln jf lo jj lp jn lq lr ls lt bi translated">转到映射规则选项卡并创建新的映射规则。</li><li id="c9f0" class="ll lm hi is b it lu ix lv jb lw jf lx jj ly jn lq lr ls lt bi translated">将协议设为“http”</li><li id="c073" class="ll lm hi is b it lu ix lv jb lw jf lx jj ly jn lq lr ls lt bi translated">在“您的PC上的端口”字段中，提供服务器在您的计算机上运行的端口。在这种情况下，3000作为我的服务器运行在3000上。</li><li id="dd31" class="ll lm hi is b it lu ix lv jb lw jf lx jj ly jn lq lr ls lt bi translated">保存规则。</li></ul><figure class="lc ld le lf fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ma"><img src="../Images/931d39b56b3df715ca515415e8d57da8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Nq-LGBzMx89PEoDvC9oYWw.png"/></div></div></figure><ul class=""><li id="60c2" class="ll lm hi is b it iu ix iy jb ln jf lo jj lp jn lq lr ls lt bi translated">现在打开终端，导航到下载配置文件的位置，输入命令</li></ul><pre class="lc ld le lf fd mb mc md me aw mf bi"><span id="0b3d" class="mg jy hi mc b fi mh mi l mj mk">sudo openvpn --config &lt;Your downloaded config file name&gt;</span></pre><p id="c25c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果出现“初始化序列完成”消息，您就可以开始了。</p><figure class="lc ld le lf fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/dd68eadf925daa273bab3457f9d04301.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y0jBhG6gIQrYGQxFwdj_Qg.png"/></div></div></figure><p id="ba07" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae la" href="https://www.cloudflare.com/en-in/learning/network-layer/what-is-tunneling/" rel="noopener ugc nofollow" target="_blank">现在，OpenVPN建立了一个从你的机器到portmap.io网站的隧道。</a>将保存映射规则后由portmap.io生成的URL发送给你的朋友，当他们点击它时，会向portmap.io发送一个请求到URL中的指定端口，portmap.io会将该URL重定向到你电脑中的指定端口。</p><figure class="lc ld le lf fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ml"><img src="../Images/e48a6eff8e2d7f240c407f00faecbef6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E1KlVvLGc3wsLrqWktHMUw.png"/></div></div></figure><figure class="lc ld le lf fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mm"><img src="../Images/52df2b8fadb7b970d5d60287da5124d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v-WjEmeaQnf9RxTAtjtqsw.png"/></div></div></figure><p id="2f7f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，您可以在世界任何地方与您的服务器进行连接和通信！！！</p></div></div>    
</body>
</html>