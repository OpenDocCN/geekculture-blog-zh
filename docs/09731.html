<html>
<head>
<title>Scraping Dynamic Websites Through Remote WebDrivers, Selenium Part-IV</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过远程web驱动程序抓取动态网站，Selenium第四部分</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/scraping-dynamic-websites-through-remote-webdrivers-selenium-part-iv-424b6a9cc02d?source=collection_archive---------11-----------------------#2021-12-25">https://medium.com/geekculture/scraping-dynamic-websites-through-remote-webdrivers-selenium-part-iv-424b6a9cc02d?source=collection_archive---------11-----------------------#2021-12-25</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="1849" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在前三部分中，我在本地使用selenium进行网页抓取。这次我将使用一个“远程web驱动程序”来删除一些数据。</p><h2 id="e51a" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated">为什么是远程WebDriver？</h2><p id="fc84" class="pw-post-body-paragraph if ig hi ih b ii jy ik il im jz io ip iq ka is it iu kb iw ix iy kc ja jb jc hb bi translated">有时我们需要在一些CLI服务器上运行scraper脚本。所以，selenium的webdrivers在那里无法工作。在这种情况下，我们可以使用远程webdriver，一个托管在其他地方的webdriver。我们只需要通过docker访问它。</p><h2 id="46d8" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated">我们开始吧</h2><p id="a65a" class="pw-post-body-paragraph if ig hi ih b ii jy ik il im jz io ip iq ka is it iu kb iw ix iy kc ja jb jc hb bi translated">所有的选择器和脚本都是一样的。唯一的变化是网络驱动的位置。让我们看看使用远程驱动程序的脚本。</p><figure class="kd ke kf kg fd kh"><div class="bz dy l di"><div class="ki kj l"/></div></figure><p id="24e9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该脚本包含一个方法为“open_support”的“scraper”类。“open_support”接受两个参数，一个“scraper”类的对象和一个平台名称。然后，该方法将查找名称中指定的平台的支持URL。</p><h2 id="45a6" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated">这里有什么新鲜事？</h2><p id="990b" class="pw-post-body-paragraph if ig hi ih b ii jy ik il im jz io ip iq ka is it iu kb iw ix iy kc ja jb jc hb bi translated">在搜索本地selenium时，我们这样定义驱动程序。</p><pre class="kd ke kf kg fd kk kl km kn aw ko bi"><span id="955e" class="jd je hi kl b fi kp kq l kr ks">from selenium import webdriver<br/>from selenium.webdriver import Chrome, ChromeOptions, Remote, FirefoxOptions</span></pre><p id="72ad" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在当前脚本中，我们在构造函数方法(__init__ method)中这样定义了‘driver’；</p><pre class="kd ke kf kg fd kk kl km kn aw ko bi"><span id="9864" class="jd je hi kl b fi kp kq l kr ks">self.driver = Remote( command_executor=’http://localhost:4444/wd/hub’, options=options )</span></pre><p id="9f9a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们对远程抓取网页所做的唯一改变是定义了“驱动程序”。</p><p id="ec68" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在“Remote”中，参数“command_executor”指的是托管“selenium”的<strong class="ih hj">“容器”</strong>的URL或地址。</p><blockquote class="kt ku kv"><p id="8989" class="if ig kw ih b ii ij ik il im in io ip kx ir is it ky iv iw ix kz iz ja jb jc hb bi translated">集装箱！！！</p><p id="7d67" class="if ig kw ih b ii ij ik il im in io ip kx ir is it ky iv iw ix kz iz ja jb jc hb bi translated">简而言之，容器就像一台可能在地球上任何地方的个人电脑。它是一台没有任何硬件需要关心的PC。更多关于集装箱，可能是后者。</p></blockquote><p id="9878" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们已经完成了脚本编写。现在我们需要一个容器，我们将通过' command_executor '来访问它。</p><h2 id="ef4e" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated">让我们为远程web驱动程序准备容器</h2><p id="0408" class="pw-post-body-paragraph if ig hi ih b ii jy ik il im jz io ip iq ka is it iu kb iw ix iy kc ja jb jc hb bi translated">1-首先我们需要安装著名的容器提供商Docker。关于“如何在Ubuntu 20.04中安装docker”的教程可以在<a class="ae la" href="https://www.digitalocean.com/community/tutorials/how-to-install-and-use-docker-on-ubuntu-20-04" rel="noopener ugc nofollow" target="_blank">这里</a>找到。<br/> 2拉硒铬合金容器</p><pre class="kd ke kf kg fd kk kl km kn aw ko bi"><span id="38b2" class="jd je hi kl b fi kp kq l kr ks">docker pull selenium/standalone-chrome</span></pre><p id="e7eb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在拉容器图像时，终端显示关于被拉图像的一些细节。它还显示一个“标签”,显示图像的版本，如果没有指定，通常是最新版本。</p><figure class="kd ke kf kg fd kh er es paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="er es lb"><img src="../Images/8bb0ad94825067f818e2c2c451293cd1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yXJnfhoG7Ti-hYT1yFQc6A.png"/></div></div><figcaption class="li lj et er es lk ll bd b be z dx">image pulling a docker image</figcaption></figure><p id="2ef2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上图是拉一些docker图片。在其第二行中</p><pre class="kd ke kf kg fd kk kl km kn aw ko bi"><span id="37b2" class="jd je hi kl b fi kp kq l kr ks">Using default tag: latest</span></pre><p id="87f6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将标签显示为“最新”。<br/>对于我们的“selenium”项目，我们将该标签称为“flag”。<br/> 3-使用以下命令启动docker服务</p><pre class="kd ke kf kg fd kk kl km kn aw ko bi"><span id="67b3" class="jd je hi kl b fi kp kq l kr ks">sudo service docker start</span></pre><p id="13dc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">4-使用以下命令启动容器映像</p><pre class="kd ke kf kg fd kk kl km kn aw ko bi"><span id="07e6" class="jd je hi kl b fi kp kq l kr ks">docker run -d -p 4444:4444 --shm-size="2g" selenium/standalone-chrome:latest</span></pre><p id="2b17" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以将“最新”替换为图像的<strong class="ih hj">标志</strong>。<br/>关于硒容器的详细说明可以在<a class="ae la" href="https://github.com/SeleniumHQ/docker-selenium" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><h2 id="b1ca" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated">让我们运行铲运机</h2><pre class="kd ke kf kg fd kk kl km kn aw ko bi"><span id="4df1" class="jd je hi kl b fi kp kq l kr ks">&gt; python scraper.py</span></pre><p id="0066" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">6-当刮刀完成时，最好停止容器。你可以先停止集装箱，然后码头服务</p><pre class="kd ke kf kg fd kk kl km kn aw ko bi"><span id="786f" class="jd je hi kl b fi kp kq l kr ks">docker container ls</span></pre><p id="b709" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从输出中复制容器id，然后键入以下内容并按enter键。</p><pre class="kd ke kf kg fd kk kl km kn aw ko bi"><span id="b232" class="jd je hi kl b fi kp kq l kr ks">docker stop container-id  </span></pre><p id="69b0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">用刚才复制的id替换container-id。</p><pre class="kd ke kf kg fd kk kl km kn aw ko bi"><span id="8817" class="jd je hi kl b fi kp kq l kr ks">sudo service docker stop # stop docker service</span></pre><p id="8586" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">或者直接停止docker服务。</p><pre class="kd ke kf kg fd kk kl km kn aw ko bi"><span id="2e15" class="jd je hi kl b fi kp kq l kr ks">sudo service docker stop</span></pre><p id="1519" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">今天到此为止。我们使用远程网络驱动程序来抓取网站。</p><p id="c048" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你还没有阅读，那么你可能会喜欢阅读刮一个动态网站，硒<a class="ae la" rel="noopener" href="/swlh/scraping-a-dynamic-web-page-its-selenium-da161999c975?source=user_profile---------6-------------------------------">第一部分</a>，<a class="ae la" rel="noopener" href="/geekculture/scraping-a-dynamic-website-selenium-part-ii-1f30a4b59285?source=user_profile---------4-------------------------------">第二部分</a>和<a class="ae la" rel="noopener" href="/geekculture/scraping-a-dynamic-website-selenium-part-iii-7138d2a3131?source=user_profile---------3-------------------------------">第三部分</a>。</p><p id="a06a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">刮的开心！</p></div></div>    
</body>
</html>