<html>
<head>
<title>Ansible 2.10 Installation on Mac OS X</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Mac OS X上安装Ansible 2.10</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/ansible-2-10-installation-on-mac-os-x-add6a1034c16?source=collection_archive---------1-----------------------#2021-05-11">https://medium.com/geekculture/ansible-2-10-installation-on-mac-os-x-add6a1034c16?source=collection_archive---------1-----------------------#2021-05-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><h2 id="2af9" class="hg hh hi bd b fp hj hk hl hm hn ho dx hp translated" aria-label="kicker paragraph">可行的安装可不那么简单…</h2><div class=""/><div class=""><h2 id="c508" class="pw-subtitle-paragraph io hr hi bd b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf dx translated">Ansible 2.10就在那里。什么是Ansible？怎么安装？</h2></div><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/30144edd72d52403abbae2f7fddf1862.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qklPcM6Q8iaY5kmM"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx">Photo by <a class="ae jw" href="https://unsplash.com/@agkdesign?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Alex Knight</a> on <a class="ae jw" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="81b1" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ix ki iy kj ja kk jb kl jd km je kn ko bi translated">介绍</h1><p id="771a" class="pw-post-body-paragraph kp kq hi kr b ks kt is ku kv kw iv kx ky kz la lb lc ld le lf lg lh li lj lk hb bi translated">我是一个可靠的用户已经有几年了。我在家里和工作中使用它来配置从计算机到网络设备的各种设备。或多或少，它通过Ansible管理我们所有的基础设施。</p><p id="94f1" class="pw-post-body-paragraph kp kq hi kr b ks ll is ku kv lm iv kx ky ln la lb lc lo le lf lg lp li lj lk hb bi translated">在本文中，我将给出我对Ansible关键概念的理解。对工具的概述来说重要的和重要的。</p><p id="7f08" class="pw-post-body-paragraph kp kq hi kr b ks ll is ku kv lm iv kx ky ln la lb lc lo le lf lg lp li lj lk hb bi translated">开始安装后，我们将发现一些工具。他们可以帮助你有一个友好的工作环境。</p><p id="f13e" class="pw-post-body-paragraph kp kq hi kr b ks ll is ku kv lm iv kx ky ln la lb lc lo le lf lg lp li lj lk hb bi translated"><strong class="kr hs"> ‼️免责声明</strong>:自从我最初写这篇文章以来，时间已经过去了。内容应该与安装部分不太相关。它仍然与关键概念相关😇。</p><h1 id="20a0" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ix ki iy kj ja kk jb kl jd km je kn ko bi translated">什么是Ansible？</h1><p id="0dce" class="pw-post-body-paragraph kp kq hi kr b ks kt is ku kv kw iv kx ky kz la lb lc ld le lf lg lh li lj lk hb bi translated">RedHat表示:Ansible是一款无代理解决方案，可实现IT管理自动化。</p><blockquote class="lq"><p id="0717" class="lr ls hi bd lt lu lv lw lx ly lz lk dx translated">任何人都可以使用的简单、无代理的IT自动化。Ansible是一种通用语言，它揭开了工作如何完成的神秘面纱。将艰巨的任务转化为可重复的行动手册。只需按一下按钮，即可推出企业范围的协议。— <a class="ae jw" href="https://www.ansible.com/" rel="noopener ugc nofollow" target="_blank"> RedHat Ansible网站</a></p></blockquote><figure class="mb mc md me mf jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es ma"><img src="../Images/4c17ce4e56614cfde0a437b5f0f2f12e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2XRcjkyNDJPIbsIG"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx">Photo by <a class="ae jw" href="https://unsplash.com/@maximalfocus?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Maximalfocus</a> on <a class="ae jw" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="11c2" class="pw-post-body-paragraph kp kq hi kr b ks ll is ku kv lm iv kx ky ln la lb lc lo le lf lg lp li lj lk hb bi translated">我在工作和私人生活中使用Ansible已经有好几年了。我用它来管理我的家用电脑。我在工作中使用它来管理或多或少的一切，以将“<a class="ae jw" href="https://en.wikipedia.org/wiki/Infrastructure_as_code" rel="noopener ugc nofollow" target="_blank">基础设施作为代码</a>”。</p><p id="af34" class="pw-post-body-paragraph kp kq hi kr b ks ll is ku kv lm iv kx ky ln la lb lc lo le lf lg lp li lj lk hb bi translated">那这个词本身呢？看到它与科幻世界有关是很有趣的。这个词是科幻发明。</p><blockquote class="mg mh mi"><p id="b50f" class="kp kq mj kr b ks ll is ku kv lm iv kx mk ln la lb ml lo le lf mm lp li lj lk hb bi translated">一种<strong class="kr hs">可能的</strong>是一种能够进行近瞬时或<a class="ae jw" href="https://en.wikipedia.org/wiki/Faster-than-light_communication" rel="noopener ugc nofollow" target="_blank">超光速通信的虚拟设备或技术</a>。它可以跨越任何距离或障碍向相应的设备发送消息或从相应的设备接收消息，而没有延迟，甚至在星际系统之间也是如此。作为这种设备的名称，“ansible”一词首次出现在厄休拉·K·勒·古恩1966年的一本小说中。从那时起，这个术语被广泛用于众多科幻作家的作品中，跨越各种背景和连续性。— <a class="ae jw" href="https://en.wikipedia.org/wiki/Ansible" rel="noopener ugc nofollow" target="_blank">维基百科</a></p></blockquote><p id="9f3d" class="pw-post-body-paragraph kp kq hi kr b ks ll is ku kv lm iv kx ky ln la lb lc lo le lf lg lp li lj lk hb bi translated">在接下来的几节中，我们将介绍Ansible的一些最重要的概念。我不想假装详尽或准确。这是我对这些概念的理解和务实态度。</p><h2 id="b171" class="mn jy hi bd jz mo mp mq kd mr ms mt kh ky mu mv kj lc mw mx kl lg my mz kn ho bi translated">剧本</h2><p id="6d01" class="pw-post-body-paragraph kp kq hi kr b ks kt is ku kv kw iv kx ky kz la lb lc ld le lf lg lh li lj lk hb bi translated">行动手册允许您编写一套任务来配置和管理主机。从网络到应用程序配置，我们可以做或多或少的事情。而更重要的是幂等原则。</p><blockquote class="mg mh mi"><p id="2e04" class="kp kq mj kr b ks ll is ku kv lm iv kx mk ln la lb ml lo le lf mm lp li lj lk hb bi translated"><strong class="kr hs">幂等性</strong>是<a class="ae jw" href="https://en.wikipedia.org/wiki/Mathematics" rel="noopener ugc nofollow" target="_blank">数学</a>和<a class="ae jw" href="https://en.wikipedia.org/wiki/Computer_science" rel="noopener ugc nofollow" target="_blank">计算机科学</a>中某些<a class="ae jw" href="https://en.wikipedia.org/wiki/Operation_(mathematics)" rel="noopener ugc nofollow" target="_blank">运算</a>的属性，由此它们可以被多次应用，而不改变最初应用之外的结果。幂等性的概念出现在<a class="ae jw" href="https://en.wikipedia.org/wiki/Abstract_algebra" rel="noopener ugc nofollow" target="_blank">抽象代数</a>(特别是在<a class="ae jw" href="https://en.wikipedia.org/wiki/Projector_(linear_algebra)" rel="noopener ugc nofollow" target="_blank">投射器</a>和<a class="ae jw" href="https://en.wikipedia.org/wiki/Closure_operator" rel="noopener ugc nofollow" target="_blank">闭包操作符</a>的理论中)和<a class="ae jw" href="https://en.wikipedia.org/wiki/Functional_programming" rel="noopener ugc nofollow" target="_blank">函数编程</a>(其中它连接到<a class="ae jw" href="https://en.wikipedia.org/wiki/Referential_transparency" rel="noopener ugc nofollow" target="_blank">引用透明</a>的属性)的许多地方。— <a class="ae jw" href="https://en.wikipedia.org/wiki/Idempotence" rel="noopener ugc nofollow" target="_blank">维基百科</a></p></blockquote><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es na"><img src="../Images/e89669b2b75bfeeafe3852588eae46cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*wYHISNWwR38Qg1Tv"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx">Photo by <a class="ae jw" href="https://unsplash.com/@zion_photo?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Louis Smith</a> on <a class="ae jw" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="9430" class="pw-post-body-paragraph kp kq hi kr b ks ll is ku kv lm iv kx ky ln la lb lc lo le lf lg lp li lj lk hb bi translated">在Ansible中，幂等性描述了任何任务都可以运行两次或更多次的事实。它总是会产生相同的结果。对我来说，这是Ansible的核心概念之一，也是最需要理解的一个。在使用Ansible时，您总是依赖这个原则。大多数情况下，可转换模块实现幂等性。这将避免你必须照顾这一点。</p><figure class="jh ji jj jk fd jl"><div class="bz dy l di"><div class="nb nc l"/></div><figcaption class="js jt et er es ju jv bd b be z dx">Playbook Sample</figcaption></figure><h2 id="9ff5" class="mn jy hi bd jz mo mp mq kd mr ms mt kh ky mu mv kj lc mw mx kl lg my mz kn ho bi translated">角色和任务</h2><p id="820d" class="pw-post-body-paragraph kp kq hi kr b ks kt is ku kv kw iv kx ky kz la lb lc ld le lf lg lh li lj lk hb bi translated">Ansible中的另一个概念是角色。角色是编写可重用任务的一种方式。然后，在行动手册中，您可以调用一组角色和任务来代替仅有的任务。它会让你有可能在不同的上下文中使用相同的角色。</p><figure class="jh ji jj jk fd jl"><div class="bz dy l di"><div class="nb nc l"/></div><figcaption class="js jt et er es ju jv bd b be z dx">Role Directory Structure</figcaption></figure><p id="7779" class="pw-post-body-paragraph kp kq hi kr b ks ll is ku kv lm iv kx ky ln la lb lc lo le lf lg lp li lj lk hb bi translated">Ansible中的任务是应用配置的基本元素。Ansible中提供了许多不同的任务。例子有<code class="du nd ne nf ng b">copy</code>、<code class="du nd ne nf ng b">file</code>和<code class="du nd ne nf ng b">template</code>。这些核心任务操作文件。</p><figure class="jh ji jj jk fd jl"><div class="bz dy l di"><div class="nb nc l"/></div><figcaption class="js jt et er es ju jv bd b be z dx">Role Sample</figcaption></figure><p id="02de" class="pw-post-body-paragraph kp kq hi kr b ks ll is ku kv lm iv kx ky ln la lb lc lo le lf lg lp li lj lk hb bi translated">角色是一个或多个连续任务的组合。</p><h2 id="85e2" class="mn jy hi bd jz mo mp mq kd mr ms mt kh ky mu mv kj lc mw mx kl lg my mz kn ho bi translated">库存</h2><p id="c25c" class="pw-post-body-paragraph kp kq hi kr b ks kt is ku kv kw iv kx ky kz la lb lc ld le lf lg lh li lj lk hb bi translated">另一个重要的概念是库存。清单是您将应用行动手册一个或多个主机的列表。您可以定义静态库存或建立动态库存。它是通过运行行动手册来配置的一组计算机。</p><figure class="jh ji jj jk fd jl"><div class="bz dy l di"><div class="nb nc l"/></div><figcaption class="js jt et er es ju jv bd b be z dx">Inventory Sample</figcaption></figure><h2 id="f80e" class="mn jy hi bd jz mo mp mq kd mr ms mt kh ky mu mv kj lc mw mx kl lg my mz kn ho bi translated">组件</h2><p id="b7b3" class="pw-post-body-paragraph kp kq hi kr b ks kt is ku kv kw iv kx ky kz la lb lc ld le lf lg lh li lj lk hb bi translated">Ansible中的模块是一组有组织的任务。例如，您将找到一个用于<code class="du nd ne nf ng b">AWS</code>、<code class="du nd ne nf ng b">Azure</code>和<code class="du nd ne nf ng b">filesystem</code>的模块。Ansible或其社区支持大量的模块。我们可以说这或多或少是一种按主题组织Python代码的方式。</p><h2 id="c2cc" class="mn jy hi bd jz mo mp mq kd mr ms mt kh ky mu mv kj lc mw mx kl lg my mz kn ho bi translated">收藏品</h2><p id="db04" class="pw-post-body-paragraph kp kq hi kr b ks kt is ku kv kw iv kx ky kz la lb lc ld le lf lg lh li lj lk hb bi translated">Ansible文档将集合描述为分发内容的一种方式。内容可以是角色、行动手册、模块或插件。</p><blockquote class="mg mh mi"><p id="883f" class="kp kq mj kr b ks ll is ku kv lm iv kx mk ln la lb ml lo le lf mm lp li lj lk hb bi translated">集合是可转换内容的分发格式，可转换内容包括行动手册、角色、模块和插件。随着模块从核心Ansible存储库转移到集合中，模块文档将转移到<a class="ae jw" href="https://docs.ansible.com/ansible/latest/collections/index.html#list-of-collections" rel="noopener ugc nofollow" target="_blank">集合页面</a>。— <a class="ae jw" href="https://docs.ansible.com/ansible/latest/user_guide/collections_using.html" rel="noopener ugc nofollow" target="_blank">可行文件</a></p></blockquote><p id="eed0" class="pw-post-body-paragraph kp kq hi kr b ks ll is ku kv lm iv kx ky ln la lb lc lo le lf lg lp li lj lk hb bi translated">对我来说，这是封装Ansible的每一个不属于Ansible核心的额外内容的新方法。这是Ansible的一大进步，为该工具带来了更多的模块化。</p><h1 id="bc24" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ix ki iy kj ja kk jb kl jd km je kn ko bi translated">可行的安装</h1><p id="adba" class="pw-post-body-paragraph kp kq hi kr b ks kt is ku kv kw iv kx ky kz la lb lc ld le lf lg lh li lj lk hb bi translated">但是在写我的收藏之前，我需要先安装Ansible。在写这篇文章的时候，Ansible 2.10还不能通过<code class="du nd ne nf ng b">homebrew</code>获得。发布日期是在八月，而<code class="du nd ne nf ng b">homebrew</code>的软件包可能需要一段时间才能上市。</p><p id="3e24" class="pw-post-body-paragraph kp kq hi kr b ks ll is ku kv lm iv kx ky ln la lb lc lo le lf lg lp li lj lk hb bi translated">要安装Ansible，需要用<code class="du nd ne nf ng b">homebrew</code>运行这个命令。</p><pre class="jh ji jj jk fd nh ng ni nj aw nk bi"><span id="4bf7" class="mn jy hi ng b fi nl nm l nn no">brew install ansible</span></pre><p id="ff2c" class="pw-post-body-paragraph kp kq hi kr b ks ll is ku kv lm iv kx ky ln la lb lc lo le lf lg lp li lj lk hb bi translated">但是，从2.10版本开始，他们似乎也修改了内核。考虑我是在Mac OS X下运行的。</p><div class="np nq ez fb nr ns"><a href="https://docs.ansible.com/ansible/devel/installation_guide/intro_installation.html#installing-ansible-on-macos" rel="noopener  ugc nofollow" target="_blank"><div class="nt ab dw"><div class="nu ab nv cl cj nw"><h2 class="bd hs fi z dy nx ea eb ny ed ef hr bi translated">安装Ansible — Ansible文档</h2><div class="nz l"><h3 class="bd b fi z dy nx ea eb ny ed ef dx translated">本页描述如何在不同的平台上安装Ansible。Ansible是一个无代理的自动化工具，由…</h3></div><div class="oa l"><p class="bd b fp z dy nx ea eb ny ed ef dx translated">docs.ansible.com</p></div></div><div class="ob l"><div class="oc l od oe of ob og jq ns"/></div></div></a></div><p id="ad35" class="pw-post-body-paragraph kp kq hi kr b ks ll is ku kv lm iv kx ky ln la lb lc lo le lf lg lp li lj lk hb bi translated">于是我用Python包管理器之一的<code class="du nd ne nf ng b">pip</code>安装了Ansible。首先，我需要安装正确版本的Python。我安装了Python 3.8.5。为此，我使用了<code class="du nd ne nf ng b">asdf-vm</code> cli工具。它管理各种版本的开发环境和语言。</p><div class="np nq ez fb nr ns"><a href="https://asdf-vm.com" rel="noopener  ugc nofollow" target="_blank"><div class="nt ab dw"><div class="nu ab nv cl cj nw"><h2 class="bd hs fi z dy nx ea eb ny ed ef hr bi translated">asdf——一个可扩展的版本管理器</h2><div class="nz l"><h3 class="bd b fi z dy nx ea eb ny ed ef dx translated">可扩展的版本管理器</h3></div><div class="oa l"><p class="bd b fp z dy nx ea eb ny ed ef dx translated">可扩展版本的managerasdf-vm.com</p></div></div></div></a></div><p id="6c72" class="pw-post-body-paragraph kp kq hi kr b ks ll is ku kv lm iv kx ky ln la lb lc lo le lf lg lp li lj lk hb bi translated">要安装Python 3.8.5，请运行以下命令(粗线)。</p><pre class="jh ji jj jk fd nh ng ni nj aw nk bi"><span id="990e" class="mn jy hi ng b fi nl nm l nn no"><em class="mj"># Add the ASDF Python plugin to manage versions for this language</em><br/>❯ <strong class="ng hs">asdf plugin-add python</strong></span><span id="95eb" class="mn jy hi ng b fi oh nm l nn no">updating plugin repository...<br/>remote: Enumerating objects: 59, done.<br/>remote: Counting objects: 100% (59/59), done.<br/>remote: Total 97 (delta 59), reused 59 (delta 59), pack-reused 38<br/>Unpacking objects: 100% (97/97), done.<br/>From https://github.com/asdf-vm/asdf-plugins<br/>   d736d70..e1bc152  master     -&gt; origin/master<br/>HEAD is now at e1bc152 Merge pull request #286 from abatilo/patch-2</span><span id="bb27" class="mn jy hi ng b fi oh nm l nn no"><em class="mj"># Install the required Python version</em><br/>❯ <strong class="ng hs">asdf install python 3.8.5</strong></span><span id="9e96" class="mn jy hi ng b fi oh nm l nn no">python-build 3.8.5 /Users/&lt;user&gt;/.asdf/installs/python/3.8.5<br/>python-build: use openssl@1.1 from homebrew<br/>python-build: use readline from homebrew<br/>Downloading Python-3.8.5.tar.xz...<br/>-&gt; https://www.python.org/ftp/python/3.8.5/Python-3.8.5.tar.xz<br/>Installing Python-3.8.5...<br/>python-build: use readline from homebrew<br/>python-build: use zlib from xcode sdk<br/>Installed Python-3.8.5 to /Users/&lt;user&gt;/.asdf/installs/python/3.8.5</span><span id="b65c" class="mn jy hi ng b fi oh nm l nn no"><em class="mj"># Make Python version as the global default version</em><br/>❯ <strong class="ng hs">asdf global python 3.8.5</strong></span><span id="808c" class="mn jy hi ng b fi oh nm l nn no"><em class="mj"># If everything works well, you should get the right version<br/># You may have to restart your terminal session</em><br/>❯ <strong class="ng hs">python -V</strong></span><span id="3fc4" class="mn jy hi ng b fi oh nm l nn no">Python 3.8.5</span><span id="3a03" class="mn jy hi ng b fi oh nm l nn no"><em class="mj"># I also upgrade pip when I install Python</em><br/>❯ <strong class="ng hs">pip install --upgrade pip</strong></span><span id="d3bc" class="mn jy hi ng b fi oh nm l nn no">Collecting pip<br/>  Downloading pip-20.2.3-py2.py3-none-any.whl (1.5 MB)<br/>     |████████████████████████████████| 1.5 MB 2.7 MB/s<br/>Installing collected packages: pip<br/>  Attempting uninstall: pip<br/>    Found existing installation: pip 20.1.1<br/>    Uninstalling pip-20.1.1:<br/>      Successfully uninstalled pip-20.1.1<br/>Successfully installed pip-20.2.3</span></pre><p id="9b32" class="pw-post-body-paragraph kp kq hi kr b ks ll is ku kv lm iv kx ky ln la lb lc lo le lf lg lp li lj lk hb bi translated">现在我们可以用下面的命令(粗线)安装Ansible 2.10。</p><pre class="jh ji jj jk fd nh ng ni nj aw nk bi"><span id="d7d5" class="mn jy hi ng b fi nl nm l nn no"><em class="mj"># Install Ansible base (new since 2.10)</em><br/>❯ <strong class="ng hs">pip install ansible-base</strong></span><span id="d5ff" class="mn jy hi ng b fi oh nm l nn no">Processing ./Library/Caches/pip/wheels/55/b6/74/6bf7a932107b1e032a4d33c41433ebf56620ad1f3cc2068f8e/ansible_base-2.10.1-py3-none-any.whl<br/>Collecting jinja2<br/>  Using cached Jinja2-2.11.2-py2.py3-none-any.whl (125 kB)<br/>Collecting packaging<br/>  Using cached packaging-20.4-py2.py3-none-any.whl (37 kB)<br/>Processing ./Library/Caches/pip/wheels/13/90/db/290ab3a34f2ef0b5a0f89235dc2d40fea83e77de84ed2dc05c/PyYAML-5.3.1-cp38-cp38-macosx_10_15_x86_64.whl<br/>Collecting cryptography<br/>  Using cached cryptography-3.1-cp35-abi3-macosx_10_10_x86_64.whl (1.8 MB)<br/>Collecting MarkupSafe&gt;=0.23<br/>  Using cached MarkupSafe-1.1.1-cp38-cp38-macosx_10_9_x86_64.whl (16 kB)<br/>Collecting pyparsing&gt;=2.0.2<br/>  Using cached pyparsing-2.4.7-py2.py3-none-any.whl (67 kB)<br/>Collecting six<br/>  Using cached six-1.15.0-py2.py3-none-any.whl (10 kB)<br/>Collecting cffi!=1.11.3,&gt;=1.8<br/>  Using cached cffi-1.14.2-cp38-cp38-macosx_10_9_x86_64.whl (176 kB)<br/>Collecting pycparser<br/>  Using cached pycparser-2.20-py2.py3-none-any.whl (112 kB)<br/>Installing collected packages: MarkupSafe, jinja2, pyparsing, six, packaging, PyYAML, pycparser, cffi, cryptography, ansible-base<br/>Successfully installed MarkupSafe-1.1.1 PyYAML-5.3.1 ansible-base-2.10.1 cffi-1.14.2 cryptography-3.1 jinja2-2.11.2 packaging-20.4 pycparser-2.20 pyparsing-2.4.7 six-1.15.0</span><span id="f00b" class="mn jy hi ng b fi oh nm l nn no"><em class="mj"># Make sure Ansible is in your path</em><br/>❯ <strong class="ng hs">asdf reshim python</strong></span><span id="d1f2" class="mn jy hi ng b fi oh nm l nn no"><em class="mj"># Check the installed version and correct Python version</em><br/><strong class="ng hs">❯ ansible --version</strong></span><span id="d52e" class="mn jy hi ng b fi oh nm l nn no">ansible 2.10.1<br/>  config file = /Users/&lt;user&gt;/.ansible/ansible.cfg<br/>  configured module search path = ['/Users/&lt;user&gt;/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']<br/>  ansible python module location = /Users/&lt;user&gt;/.asdf/installs/python/3.8.5/lib/python3.8/site-packages/ansible<br/>  executable location = /Users/&lt;user&gt;/.asdf/installs/python/3.8.5/bin/ansible<br/>  python version = 3.8.5 (default, Sep 20 2020, 11:09:32) [Clang 11.0.3 (clang-1103.0.32.59)]</span></pre><p id="ac19" class="pw-post-body-paragraph kp kq hi kr b ks ll is ku kv lm iv kx ky ln la lb lc lo le lf lg lp li lj lk hb bi translated">在这个阶段，您有一个Ansible的基础安装，其中只包含核心元素。测试行动手册和配置文件。它迫使我安装额外的Ansible集合。</p><figure class="jh ji jj jk fd jl"><div class="bz dy l di"><div class="nb nc l"/></div><figcaption class="js jt et er es ju jv bd b be z dx">My Ansible Configuration File</figcaption></figure><p id="e7fa" class="pw-post-body-paragraph kp kq hi kr b ks ll is ku kv lm iv kx ky ln la lb lc lo le lf lg lp li lj lk hb bi translated">创建一个文件<code class="du nd ne nf ng b">test.yaml</code>来验证您的Ansible安装。该文件必须包含以下内容。</p><figure class="jh ji jj jk fd jl"><div class="bz dy l di"><div class="nb nc l"/></div><figcaption class="js jt et er es ju jv bd b be z dx">Test Playbook</figcaption></figure><p id="1ae9" class="pw-post-body-paragraph kp kq hi kr b ks ll is ku kv lm iv kx ky ln la lb lc lo le lf lg lp li lj lk hb bi translated">剧本的运行产生了错误。该错误是由于我的Ansible配置文件中的以下配置造成的。</p><pre class="jh ji jj jk fd nh ng ni nj aw nk bi"><span id="b9df" class="mn jy hi ng b fi nl nm l nn no">stdout_callback = yaml<br/>bin_ansible_callbacks = True</span></pre><p id="4d7e" class="pw-post-body-paragraph kp kq hi kr b ks ll is ku kv lm iv kx ky ln la lb lc lo le lf lg lp li lj lk hb bi translated">以及错误。</p><pre class="jh ji jj jk fd nh ng ni nj aw nk bi"><span id="ad68" class="mn jy hi ng b fi nl nm l nn no"><em class="mj"># The playbook command</em><br/>❯ <strong class="ng hs">ansible-playbook test-playbook.yaml</strong></span><span id="60cc" class="mn jy hi ng b fi oh nm l nn no">...<br/>ERROR! Invalid callback for stdout specified: yaml</span></pre><p id="483b" class="pw-post-body-paragraph kp kq hi kr b ks ll is ku kv lm iv kx ky ln la lb lc lo le lf lg lp li lj lk hb bi translated">为了解决这个问题，我必须安装<code class="du nd ne nf ng b">community.general</code>集合。</p><div class="np nq ez fb nr ns"><a href="https://galaxy.ansible.com/community/general" rel="noopener  ugc nofollow" target="_blank"><div class="nt ab dw"><div class="nu ab nv cl cj nw"><h2 class="bd hs fi z dy nx ea eb ny ed ef hr bi translated">不稳定星系</h2><div class="nz l"><h3 class="bd b fi z dy nx ea eb ny ed ef dx translated">从Ansible社区的精彩内容开始您的自动化项目</h3></div><div class="oa l"><p class="bd b fp z dy nx ea eb ny ed ef dx translated">galaxy.ansible.com</p></div></div></div></a></div><p id="0cc0" class="pw-post-body-paragraph kp kq hi kr b ks ll is ku kv lm iv kx ky ln la lb lc lo le lf lg lp li lj lk hb bi translated">为了安装该集合，我执行了以下命令。我得到一个错误，因为<code class="du nd ne nf ng b">collections</code>文件夹不存在。</p><pre class="jh ji jj jk fd nh ng ni nj aw nk bi"><span id="7aa8" class="mn jy hi ng b fi nl nm l nn no"><em class="mj"># Tried to list the installed collections</em><br/>❯ <strong class="ng hs">ansible-galaxy collection list</strong></span><span id="6bc5" class="mn jy hi ng b fi oh nm l nn no">[WARNING]: — the configured path /Users/&lt;user&gt;/.ansible/collections does not exist.<br/>....<br/>ERROR! — None of the provided paths were usable. Please specify a valid path with — collections-path</span></pre><p id="8a5d" class="pw-post-body-paragraph kp kq hi kr b ks ll is ku kv lm iv kx ky ln la lb lc lo le lf lg lp li lj lk hb bi translated">我创建了文件夹，然后安装了收藏。</p><pre class="jh ji jj jk fd nh ng ni nj aw nk bi"><span id="aa2f" class="mn jy hi ng b fi nl nm l nn no"><em class="mj"># Create the directory</em><br/>❯ <strong class="ng hs">mkdir /Users/&lt;user&gt;/.ansible/collections</strong></span><span id="9470" class="mn jy hi ng b fi oh nm l nn no"><em class="mj"># List installed collections</em><br/>❯ <strong class="ng hs">ansible-galaxy collection list</strong></span><span id="8cbb" class="mn jy hi ng b fi oh nm l nn no"><em class="mj"># None installed, empty stdout</em></span><span id="ca6c" class="mn jy hi ng b fi oh nm l nn no"><em class="mj"># Install the collection</em><br/>❯ <strong class="ng hs">ansible-galaxy collection install community.general</strong></span><span id="4351" class="mn jy hi ng b fi oh nm l nn no">Starting galaxy collection install process<br/>Process install dependency map<br/>Starting collection install process<br/>Installing 'community.general:1.1.0' to '/Users/&lt;user&gt;/.ansible/collections/ansible_collections/community/general'<br/>Downloading <a class="ae jw" href="https://galaxy.ansible.com/download/community-general-1.1.0.tar.gz" rel="noopener ugc nofollow" target="_blank">https://galaxy.ansible.com/download/community-general-1.1.0.tar.gz</a> to /Users/&lt;user&gt;/.ansible/tmp/ansible-local-90875hlzn08qq/tmpwt8d2kpe<br/>community.general (1.1.0) was installed successfully<br/>...<br/>google.cloud (1.0.0) was installed successfully<br/>...<br/>ansible.posix (1.1.1) was installed successfully<br/>...<br/>ansible.netcommon (1.2.1) was installed successfully<br/>...<br/>community.kubernetes (1.0.0) was installed successfully</span></pre><p id="3715" class="pw-post-body-paragraph kp kq hi kr b ks ll is ku kv lm iv kx ky ln la lb lc lo le lf lg lp li lj lk hb bi translated">最后，我可以运行测试手册了。</p><pre class="jh ji jj jk fd nh ng ni nj aw nk bi"><span id="8de1" class="mn jy hi ng b fi nl nm l nn no"><em class="mj"># Run the test playbook</em><br/>❯ <strong class="ng hs">ansible-playbook test-playbook.yaml</strong></span><span id="af41" class="mn jy hi ng b fi oh nm l nn no">PLAY [localhost] ********************************************************************</span><span id="56ea" class="mn jy hi ng b fi oh nm l nn no">TASK [debug] ********************************************************************<br/>ok: [localhost] =&gt;<br/>  msg: Hello World!</span><span id="0dc6" class="mn jy hi ng b fi oh nm l nn no">PLAY RECAP ********************************************************************<br/>localhost           : ok=1    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0</span></pre><h1 id="b68b" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ix ki iy kj ja kk jb kl jd km je kn ko bi translated">结论</h1><p id="15ae" class="pw-post-body-paragraph kp kq hi kr b ks kt is ku kv kw iv kx ky kz la lb lc ld le lf lg lh li lj lk hb bi translated">我们有一个可行的设置，可以运行剧本和其他可行的命令。从这一点，我们可以开始自动化我们想要的一切(如果模块和插件存在)。</p><p id="5d67" class="pw-post-body-paragraph kp kq hi kr b ks ll is ku kv lm iv kx ky ln la lb lc lo le lf lg lp li lj lk hb bi translated">我们也准备深入研究Ansible，自己写一些模块。在以后的文章中，我将介绍如何为Ansible编写一个模块。</p><h1 id="c981" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ix ki iy kj ja kk jb kl jd km je kn ko bi translated">参考</h1><p id="a74e" class="pw-post-body-paragraph kp kq hi kr b ks kt is ku kv kw iv kx ky kz la lb lc ld le lf lg lh li lj lk hb bi translated">Ansible官方网站包含许多资源。它还包含模块的所有文档。此外，还提供了安西布尔塔(商业产品)和AWX的链接。</p><div class="np nq ez fb nr ns"><a href="https://www.ansible.com" rel="noopener  ugc nofollow" target="_blank"><div class="nt ab dw"><div class="nu ab nv cl cj nw"><h2 class="bd hs fi z dy nx ea eb ny ed ef hr bi translated">Ansible是简单的IT自动化</h2><div class="nz l"><h3 class="bd b fi z dy nx ea eb ny ed ef dx translated">Ansible是自动化应用和IT基础设施的最简单方式。应用程序部署+配置管理+…</h3></div><div class="oa l"><p class="bd b fp z dy nx ea eb ny ed ef dx translated">www.ansible.com</p></div></div><div class="ob l"><div class="oi l od oe of ob og jq ns"/></div></div></a></div><p id="b5f1" class="pw-post-body-paragraph kp kq hi kr b ks ll is ku kv lm iv kx ky ln la lb lc lo le lf lg lp li lj lk hb bi translated">家酿是Mac OS X上的首选打包管理器。它运行良好，社区也很活跃。</p><div class="np nq ez fb nr ns"><a href="https://brew.sh/" rel="noopener  ugc nofollow" target="_blank"><div class="nt ab dw"><div class="nu ab nv cl cj nw"><h2 class="bd hs fi z dy nx ea eb ny ed ef hr bi translated">公司自产自用</h2><div class="nz l"><h3 class="bd b fi z dy nx ea eb ny ed ef dx translated">macOS(或Linux)缺失的软件包管理器。</h3></div><div class="oa l"><p class="bd b fp z dy nx ea eb ny ed ef dx translated">brew.sh</p></div></div><div class="ob l"><div class="oj l od oe of ob og jq ns"/></div></div></a></div><p id="157f" class="pw-post-body-paragraph kp kq hi kr b ks ll is ku kv lm iv kx ky ln la lb lc lo le lf lg lp li lj lk hb bi translated">您的编程语言和其他cli工具的终极版本管理器。</p><div class="np nq ez fb nr ns"><a href="https://asdf-vm.com/" rel="noopener  ugc nofollow" target="_blank"><div class="nt ab dw"><div class="nu ab nv cl cj nw"><h2 class="bd hs fi z dy nx ea eb ny ed ef hr bi translated">asdf——一个可扩展的版本管理器</h2><div class="nz l"><h3 class="bd b fi z dy nx ea eb ny ed ef dx translated">可扩展的版本管理器</h3></div><div class="oa l"><p class="bd b fp z dy nx ea eb ny ed ef dx translated">可扩展版本的managerasdf-vm.com</p></div></div></div></a></div></div></div>    
</body>
</html>