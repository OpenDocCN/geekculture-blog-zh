<html>
<head>
<title>Stop using Virtual Box on Linux</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">停止在Linux上使用虚拟盒子</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/stop-using-virtual-box-on-linux-51e02739f812?source=collection_archive---------0-----------------------#2022-04-05">https://medium.com/geekculture/stop-using-virtual-box-on-linux-51e02739f812?source=collection_archive---------0-----------------------#2022-04-05</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="ee7a" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">使用Virtual Machine Manager而不是Virtual Box</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es ix"><img src="../Images/e02de80a928f70ad24e2550f58a07342.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*SG7VeDhVzsgat5Lr0kGD-g.png"/></div><figcaption class="jf jg et er es jh ji bd b be z dx">Photo by Dre Tech Tips</figcaption></figure><p id="ce68" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">作为一个Linux用户，你可能需要使用Windows。您的工作可能需要Windows。或者玩与质子可比性层不兼容的游戏。但是，您可能希望在隔离的环境中运行软件。因为操作系统正在运行一大堆令人毛骨悚然的东西。字母男孩有进入操作系统的后门。这些是唯一公开的安全缺陷。</p><p id="76de" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">要在一台机器上运行多个操作系统，用户需要虚拟化一个操作系统。作为虚拟化的新用户，您可能已经被推荐将Virtual Box作为go软件。然而，尽管软件很简单，你很快就会意识到，与你的主操作系统相比，软件的性能是很慢的。</p><p id="6a6c" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">这就是为什么您应该使用Virtual Machine Manager而不是Virtual Box。</p><h2 id="bfee" class="kg kh hi bd ki kj kk kl km kn ko kp kq js kr ks kt jw ku kv kw ka kx ky kz la bi translated">虚拟机管理器vs VirtualBox？</h2><p id="d14a" class="pw-post-body-paragraph jj jk hi jl b jm lb ij jo jp lc im jr js ld ju jv jw le jy jz ka lf kc kd ke hb bi translated">虚拟机管理器是GUI应用程序。而Virtual Box是整个桌面GUI虚拟化套件。我们将只比较两个应用程序的GUI。Virtual Box的用户界面注重简单而非复杂。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="er es lg"><img src="../Images/6c073b6294783adcd91550152efd6e68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TVj982fWb_Zqyo0NCU1WzQ.png"/></div></div><figcaption class="jf jg et er es jh ji bd b be z dx">Photo from linuxuprising.com</figcaption></figure><p id="58db" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">因此它更适合Linux的初学者。但是，Virtual Machine Manager是为对虚拟机有更多经验的人量身定制的。因为您可以从所用的硬件、所用的显示服务器、仿真器等方面定制软件。它是虚拟机软件的Linux。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="er es ll"><img src="../Images/c4a180212aca03c3a62126269000ff35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XxMSKS8AX-UIMlV2ZvHR1Q.png"/></div></div><figcaption class="jf jg et er es jh ji bd b be z dx">Photo from Dre Tech Tips</figcaption></figure><p id="c92b" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">因此Virtual Machine Manager更适合高级用户。但是我们需要更多的信息来说明为什么定制是重要的。这就把我们带到了下一点。</p><h2 id="b08a" class="kg kh hi bd ki kj kk kl km kn ko kp kq js kr ks kt jw ku kv kw ka kx ky kz la bi translated">QEMU和KVM是什么？</h2><p id="a6fa" class="pw-post-body-paragraph jj jk hi jl b jm lb ij jo jp lc im jr js ld ju jv jw le jy jz ka lf kc kd ke hb bi translated">Virtual Machine Manager遵循软件模块化的Unix理念。当您听说Virtual Machine Manager时，您通常会听说该软件与QEMU和KVM等其他软件捆绑在一起。</p><p id="ccbb" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">QEMU是虚拟机管理器用来管理虚拟机的CLI应用。<a class="ae kf" href="https://www.redhat.com/en/topics/virtualization/what-is-KVM" rel="noopener ugc nofollow" target="_blank"> KVM是Linux </a>的开源管理程序。虚拟机管理程序是位于硬件和来宾操作系统之间的软件层。关于不同的虚拟机管理程序谁是最好的，有许多争论。但是，KVM最适合非企业用户，它提供了最接近裸机的性能。由于模块化，您可以使用KVM上的<a class="ae kf" href="https://programmerah.com/install-xen-virtual-machine-using-virt-manager-4884/" rel="noopener ugc nofollow" target="_blank">Xen</a>作为您的管理程序。VirtualBox在性能方面甚至无法与之匹敌。这就把我们带到了下一点。</p><h2 id="98e7" class="kg kh hi bd ki kj kk kl km kn ko kp kq js kr ks kt jw ku kv kw ka kx ky kz la bi translated">KVM是第一类还是第二类虚拟机管理程序？</h2><p id="2cd0" class="pw-post-body-paragraph jj jk hi jl b jm lb ij jo jp lc im jr js ld ju jv jw le jy jz ka lf kc kd ke hb bi translated">KVM是第一类虚拟机管理程序，因为它在虚拟机上使用硬件加速。第一类或第二类虚拟机管理程序的术语已经过时，因为大多数现代虚拟机管理程序在某种程度上使用硬件加速。Virtual Box是其中一个例外，因为它有第二类虚拟机管理程序。这就是为什么与其他虚拟机管理程序相比，Virtual Box的性能较差。</p><h2 id="7d37" class="kg kh hi bd ki kj kk kl km kn ko kp kq js kr ks kt jw ku kv kw ka kx ky kz la bi translated">如何安装和设置Virtual Machine Manager？</h2><p id="4597" class="pw-post-body-paragraph jj jk hi jl b jm lb ij jo jp lc im jr js ld ju jv jw le jy jz ka lf kc kd ke hb bi translated">既然你已经确信虚拟机管理器是更好的虚拟机软件。</p><ol class=""><li id="7fa4" class="lm ln hi jl b jm jn jp jq js lo jw lp ka lq ke lr ls lt lu bi translated"><strong class="jl hj">安装所需的软件包</strong></li></ol><p id="671c" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">您需要安装由libvirt、KVM、QEMU和Virt Manager组成的整套软件和软件包。</p><p id="89df" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">Ubuntu/Debian</p><pre class="iy iz ja jb fd lv lw lx ly aw lz bi"><span id="fcbf" class="kg kh hi lw b fi ma mb l mc md">sudo apt-get install virt-manager libvirt-bin qemu-kvm libvirt-daemon-system libvirt-clients bridge-utils</span></pre><p id="ec3b" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><a class="ae kf" rel="noopener" href="/geekculture/the-quick-and-easy-way-to-install-arch-linux-70b9bfc35863"> Arch Linux </a></p><pre class="iy iz ja jb fd lv lw lx ly aw lz bi"><span id="9e63" class="kg kh hi lw b fi ma mb l mc md">sudo pacman -S qemu virt-manager virt-viewer dnsmasq vde2 bridge-utils openbsd-netcat ebtables iptables</span></pre><p id="a1a6" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj"> 2。启动KVM libvirt服务</strong></p><p id="efc9" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">一旦您安装了它，您将必须在引导时启用KVM libvirt服务。</p><p id="48af" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">基于Systemd的机器</p><pre class="iy iz ja jb fd lv lw lx ly aw lz bi"><span id="4fb5" class="kg kh hi lw b fi ma mb l mc md">sudo systemctl enable libvirtd.service<br/>sudo systemctl start libvirtd.service</span></pre><p id="d8e2" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">运行所需的命令，以确保您的服务在后台运行。</p><pre class="iy iz ja jb fd lv lw lx ly aw lz bi"><span id="df0b" class="kg kh hi lw b fi ma mb l mc md">sudo systemctl status libvirtd.service</span></pre><p id="33eb" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">成功输出:</p><pre class="iy iz ja jb fd lv lw lx ly aw lz bi"><span id="0631" class="kg kh hi lw b fi ma mb l mc md">● libvirtd.service - Virtualization daemon</span><span id="7288" class="kg kh hi lw b fi me mb l mc md">Loaded: loaded (/usr/lib/systemd/system/libvirtd.service; disabled; vendor preset: disabled)</span><span id="19c3" class="kg kh hi lw b fi me mb l mc md">Active: active (running) since Sun 2022-04-03 20:55:10 CDT; 18s ago</span><span id="dc2e" class="kg kh hi lw b fi me mb l mc md">TriggeredBy: ● libvirtd-admin.socket</span><span id="0a46" class="kg kh hi lw b fi me mb l mc md">● libvirtd.socket</span><span id="44fc" class="kg kh hi lw b fi me mb l mc md">● libvirtd-ro.socket</span><span id="f5a5" class="kg kh hi lw b fi me mb l mc md">Docs: man:libvirtd(8)</span><span id="3f1e" class="kg kh hi lw b fi me mb l mc md">https://libvirt.org</span><span id="b716" class="kg kh hi lw b fi me mb l mc md">Main PID: 3559245 (libvirtd)</span><span id="e726" class="kg kh hi lw b fi me mb l mc md">Tasks: 19 (limit: 32768)</span><span id="469a" class="kg kh hi lw b fi me mb l mc md">Memory: 20.6M</span><span id="1c55" class="kg kh hi lw b fi me mb l mc md">CPU: 202ms</span><span id="83a9" class="kg kh hi lw b fi me mb l mc md">CGroup: /system.slice/libvirtd.service</span><span id="9631" class="kg kh hi lw b fi me mb l mc md">└─3559245 /usr/bin/libvirtd --timeout 120</span><span id="68e3" class="kg kh hi lw b fi me mb l mc md">Apr 03 20:55:10 dre-latitudee6440 systemd[1]: Starting Virtualization daemon...</span><span id="fba1" class="kg kh hi lw b fi me mb l mc md">Apr 03 20:55:10 dre-latitudee6440 systemd[1]: Started Virtualization daemon.</span></pre><p id="a0e6" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">任何输出都意味着您的守护进程启动失败，这需要调试。这超出了本教程的范围。然而，一个有用的调试方法是将应用程序提供的错误消息复制到搜索引擎中。</p><p id="70a9" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj"> 3。启用普通用户帐户使用KVM </strong></p><p id="6e4e" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">现在您需要启用一个普通用户帐户来访问KVM。使用以下命令打开配置文件进行编辑。</p><pre class="iy iz ja jb fd lv lw lx ly aw lz bi"><span id="c6ae" class="kg kh hi lw b fi ma mb l mc md">sudo [text-editor] /etc/libvirt/libvirtd.conf</span></pre><p id="a300" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">将套接字组所有权更改为libvirt。</p><pre class="iy iz ja jb fd lv lw lx ly aw lz bi"><span id="0258" class="kg kh hi lw b fi ma mb l mc md">unix_sock_group = "libvirt"</span></pre><p id="98a3" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">从<a class="ae kf" rel="noopener" href="/geekculture/what-is-the-linux-permissions-5338df2f3fdf">开始，使用以下命令为除自己之外的所有用户设置读、写和执行的权限。</a></p><pre class="iy iz ja jb fd lv lw lx ly aw lz bi"><span id="74fc" class="kg kh hi lw b fi ma mb l mc md">unix_sock_rw_perms = "0770"</span></pre><p id="7864" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">现在，使用以下命令将想要访问虚拟化软件的用户帐户添加到libvirt组。</p><pre class="iy iz ja jb fd lv lw lx ly aw lz bi"><span id="7dcd" class="kg kh hi lw b fi ma mb l mc md">sudo usermod  -a -G libvirt $(whoami)<br/>newgrp libvirt</span></pre><p id="a2f8" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">最后，重新启动libvirt守护进程，以启用您最近所做的修改。</p><pre class="iy iz ja jb fd lv lw lx ly aw lz bi"><span id="1062" class="kg kh hi lw b fi ma mb l mc md">sudo systemctl restart libvirtd.service</span></pre><p id="3636" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj"> 4。启用嵌套虚拟化(可选)</strong></p><p id="f1ce" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在本节中，假设您运行的是带有Intel CPU的Linux内核。您可以启用嵌套虚拟化来在虚拟机中运行虚拟机。首先启用内核模块。</p><pre class="iy iz ja jb fd lv lw lx ly aw lz bi"><span id="35fe" class="kg kh hi lw b fi ma mb l mc md">sudo modprobe -r kvm_intel<br/>sudo modprobe kvm_intel nested=1</span></pre><p id="f721" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">然后用下面的命令启用持久性。</p><pre class="iy iz ja jb fd lv lw lx ly aw lz bi"><span id="1057" class="kg kh hi lw b fi ma mb l mc md">echo "options kvm-intel nested=1" | sudo tee /etc/modprobe.d/kvm-intel.conf<!-- --> </span></pre><p id="6264" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在这里，您需要使用以下命令确认嵌套虚拟化已经启用</p><pre class="iy iz ja jb fd lv lw lx ly aw lz bi"><span id="3ddf" class="kg kh hi lw b fi ma mb l mc md">$ systool -m kvm_intel -v | grep nested<br/>  nested = "Y"<br/>  nested_early_check = "N"</span><span id="afec" class="kg kh hi lw b fi me mb l mc md">$ cat /sys/module/kvm_intel/parameters</span></pre><p id="f4df" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在amd上用AMD代替每一个有intel的字。</p><p id="8f9b" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj"> 5。启动虚拟机管理器</strong></p><p id="1a39" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">现在您已经安装并设置了软件套件，是时候启动应用程序了</p><pre class="iy iz ja jb fd lv lw lx ly aw lz bi"><span id="89b2" class="kg kh hi lw b fi ma mb l mc md">virt-manager</span></pre><p id="ea36" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">这将显示如下截图，如下所示。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="er es mf"><img src="../Images/fe541281fce66236fde6053ebbcbbfde.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ns4xPYGY6GnTjXkfavAW5Q.png"/></div></div><figcaption class="jf jg et er es jh ji bd b be z dx">Photo from Dre Tech Tips</figcaption></figure><h2 id="12f0" class="kg kh hi bd ki kj kk kl km kn ko kp kq js kr ks kt jw ku kv kw ka kx ky kz la bi translated">如何使用虚拟机管理器？</h2><p id="46a6" class="pw-post-body-paragraph jj jk hi jl b jm lb ij jo jp lc im jr js ld ju jv jw le jy jz ka lf kc kd ke hb bi translated">一旦安装了虚拟化软件套件，就该使用该应用程序了。</p><p id="e4ef" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在本节中，我们假设您运行的是带有Intel CPU的Linux内核。您可以启用嵌套虚拟化来在虚拟机中运行虚拟机。首先启用内核模块。</p><pre class="iy iz ja jb fd lv lw lx ly aw lz bi"><span id="5b4b" class="kg kh hi lw b fi ma mb l mc md">File &gt; Add Connection</span></pre><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mg"><img src="../Images/c1e7ad45dbfcfbd14820987fa5e9507e.png" data-original-src="https://miro.medium.com/v2/resize:fit:688/format:webp/1*UXdSdUBkyf1Pi7v7z8IrwA.png"/></div></figure><p id="ba84" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">建立连接后，您需要向该连接添加一个虚拟机。在以下菜单选项下，您将添加一个虚拟机。</p><pre class="iy iz ja jb fd lv lw lx ly aw lz bi"><span id="2019" class="kg kh hi lw b fi ma mb l mc md">File &gt; New Virtual Machine</span></pre><p id="84f2" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">这将提示您创建一个新的虚拟机。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mh"><img src="../Images/78824791f91c969275bf58119e867094.png" data-original-src="https://miro.medium.com/v2/resize:fit:994/format:webp/1*TqJ4b1KKrYGqwYFLtJ8nOA.png"/></div></figure><p id="1f8f" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">一旦您选择了调配虚拟机的所有选项，您将能够直接自定义这些选项。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="er es ll"><img src="../Images/c4a180212aca03c3a62126269000ff35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XxMSKS8AX-UIMlV2ZvHR1Q.png"/></div></div><figcaption class="jf jg et er es jh ji bd b be z dx">Photo from Dre Tech Tips</figcaption></figure><p id="a8bc" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">但是，您可能不需要已经创建的虚拟机。您只需右键单击虚拟机，然后单击删除选项。出于备份目的，您可能需要制作存储的副本。大多数系统管理员将不得不自动执行备份，以实现时间相关的恢复。跟随<a class="ae kf" rel="noopener" href="/geekculture/how-to-automate-tasks-in-linux-bsd-91d0b0560f5">我的关于如何自动化任务的教程来学习如何自动化Linux任务</a>。这有助于自动化虚拟机存储文件备份。这涵盖了应用程序必须提供的主要特性。</p><h2 id="dde6" class="kg kh hi bd ki kj kk kl km kn ko kp kq js kr ks kt jw ku kv kw ka kx ky kz la bi translated">如何进行PCI直通？</h2><p id="c556" class="pw-post-body-paragraph jj jk hi jl b jm lb ij jo jp lc im jr js ld ju jv jw le jy jz ka lf kc kd ke hb bi translated">为了获得最佳性能，您可能希望通过硬件直接进入机器。默认情况下，鼠标和键盘等硬件将通过USB服务器传输。这个中间件层会增加延迟。幸运的是，VM Manager允许您直接向机器添加硬件。对于大多数硬件，您只需将硬件直接传递给客户操作系统。</p><div class="mi mj ez fb mk ml"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/5/html/virtualization/sect-virtualization-adding_a_pci_device_to_a_host" rel="noopener  ugc nofollow" target="_blank"><div class="mm ab dw"><div class="mn ab mo cl cj mp"><h2 class="bd hj fi z dy mq ea eb mr ed ef hh bi translated">15.2.使用virt-manager Red Hat Enterprise Linux 5 | Red Hat客户门户添加PCI设备</h2><div class="ms l"><h3 class="bd b fi z dy mq ea eb mr ed ef dx translated">可以使用图形化虚拟管理器工具将PCI设备添加到guests虚拟机中。以下步骤添加了一个2端口USB…</h3></div><div class="mt l"><p class="bd b fp z dy mq ea eb mr ed ef dx translated">access.redhat.com</p></div></div><div class="mu l"><div class="mv l mw mx my mu mz jd ml"/></div></div></a></div><p id="3d2c" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">穿越的缺点是硬件直接是主操作系统将不能访问硬件。所以你需要插上第二个键盘和鼠标来进入主操作系统，而不用关掉机器。</p><h2 id="b8a3" class="kg kh hi bd ki kj kk kl km kn ko kp kq js kr ks kt jw ku kv kw ka kx ky kz la bi translated">如何直通GPU？</h2><p id="ea70" class="pw-post-body-paragraph jj jk hi jl b jm lb ij jo jp lc im jr js ld ju jv jw le jy jz ka lf kc kd ke hb bi translated">您希望通过GPU来提高需要GPU的应用程序的性能。这对于需要<a class="ae kf" rel="noopener" href="/geekculture/distributed-computing-for-beginners-f4116adf609d">并行算法的任务尤其重要，例如视频和游戏渲染或人工智能开发</a>。已经有很好的教程教你如何通过GPU。</p><div class="mi mj ez fb mk ml"><a href="https://wiki.archlinux.org/title/PCI_passthrough_via_OVMF" rel="noopener  ugc nofollow" target="_blank"><div class="mm ab dw"><div class="mn ab mo cl cj mp"><h2 class="bd hj fi z dy mq ea eb mr ed ef hh bi translated">通过OVMF的PCI直通</h2><div class="ms l"><h3 class="bd b fi z dy mq ea eb mr ed ef dx translated">开放虚拟机固件(OVMF)是一个为虚拟机启用UEFI支持的项目。从Linux开始…</h3></div><div class="mt l"><p class="bd b fp z dy mq ea eb mr ed ef dx translated">wiki.archlinux.org</p></div></div><div class="mu l"><div class="na l mw mx my mu mz jd ml"/></div></div></a></div><p id="de21" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">当你通过你的GPU时，你的主显示器会冻结。因为您为虚拟机提供了对GPU的完全访问权限。设置直通的最佳方式是让您的主显示器运行GPU集成显卡。并且还有针对NVIDIA消费级GPU的<a class="ae kf" href="https://www.storagereview.com/news/nvidia-enables-beta-support-for-virtualization-on-geforce-gpus" rel="noopener ugc nofollow" target="_blank"> DRM，防止用户使用多个GPU</a>。然而，t <a class="ae kf" href="https://www.tomshardware.com/news/nvidia-gpu-virtualization-unlocked-on-client-gpus" rel="noopener ugc nofollow" target="_blank">网上有很多教程教人们如何移除这个DRM </a>。</p><p id="98fb" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在某些游戏中，KVM的GPU性能将比裸机性能更快。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="er es nb"><img src="../Images/9a40d9a6fdd2132df4647afaff35ea22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FPmPwCkPqBh9PJ0B9fpiWg.png"/></div></div><figcaption class="jf jg et er es jh ji bd b be z dx">Figure 1 from fourm.level1techs.com</figcaption></figure><p id="d74a" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">听起来很疯狂。除了避免可疑和间谍软件之外，这也是你应该在KVM虚拟机中运行Windows的另一个原因。</p><h2 id="24e0" class="kg kh hi bd ki kj kk kl km kn ko kp kq js kr ks kt jw ku kv kw ka kx ky kz la bi translated">如何创建无头服务器？</h2><p id="71e9" class="pw-post-body-paragraph jj jk hi jl b jm lb ij jo jp lc im jr js ld ju jv jw le jy jz ka lf kc kd ke hb bi translated">既然已经在本地机器上创建了一个可视化的服务器，远程连接的问题可能会出现。在许多使用案例中，无头服务器是一种优势。这是假设你的设置有一个良好的互联网连接。您可以创建一个无头服务器，它可以连接到办公室或家中的任何地方，例如您的电视、笔记本电脑甚至手机。<a class="ae kf" href="https://libvirt.org/remote.html" rel="noopener ugc nofollow" target="_blank">默认情况下，虚拟机libvirt库允许远程机器通过经过验证和加密的连接来访问虚拟机管理程序。</a></p><p id="ac81" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><a class="ae kf" rel="noopener" href="/@dretechtips/how-to-dismantle-the-google-empire-e652bff6d2">您应该为服务器</a>添加一个静态IP地址或主机名，以便您可以在任何计算机上轻松访问虚拟机。首次尝试访问该服务时，会提示您输入密码。即使有了正确的密码，它仍会不断重复验证循环。我不确定这是一个bug还是什么，<a class="ae kf" rel="noopener" href="/geekculture/ssh-securely-connect-to-your-servers-8895faab7083">但是，你需要使用一个私钥文件来认证。您只需要一个主机名和密钥文件就可以向服务器进行身份验证。</a></p><pre class="iy iz ja jb fd lv lw lx ly aw lz bi"><span id="048d" class="kg kh hi lw b fi ma mb l mc md">qemu+ssh://<strong class="lw hj">dre@01.compute.lan</strong>/system?keyfile=<strong class="lw hj">~/.ssh/vm.local</strong></span></pre><p id="d7d8" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">现在，您可以访问虚拟专用服务器的显示，而不必再使用您的凭据登录。</p><h2 id="3f55" class="kg kh hi bd ki kj kk kl km kn ko kp kq js kr ks kt jw ku kv kw ka kx ky kz la bi translated">如何设置没有幽灵的云游戏？</h2><p id="8b5a" class="pw-post-body-paragraph jj jk hi jl b jm lb ij jo jp lc im jr js ld ju jv jw le jy jz ka lf kc kd ke hb bi translated">在过去的一年里，你可能已经看到了所有这些谷歌Stadia和NVIDIA Ge-Force现在推广云游戏的广告。这些平台将监控你所有的击键、鼠标移动、设备类型等等。这样他们就可以利用这些数据给你做有针对性的广告。你会在《黑镜》中看到的反乌托邦的东西。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es nc"><img src="../Images/6b6f0237d041ab93c29e53602154204e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1068/format:webp/1*bh7i0eDwOrmG3iPOKBCEeQ.jpeg"/></div><figcaption class="jf jg et er es jh ji bd b be z dx">Patent Figure from reddit.com</figcaption></figure><div class="mi mj ez fb mk ml"><a href="https://www.techpowerup.com/240655/leaked-ai-powered-game-revenue-model-paper-foretells-a-dystopian-nightmare" rel="noopener  ugc nofollow" target="_blank"><div class="mm ab dw"><div class="mn ab mo cl cj mp"><h2 class="bd hj fi z dy mq ea eb mr ed ef hh bi translated">泄露的人工智能驱动的游戏收入模型文件预言了一个反乌托邦的噩梦</h2><div class="ms l"><h3 class="bd b fi z dy mq ea eb mr ed ef dx translated">当你争夺更多的游戏时，人工智能(AI)会故意篡改你的在线游戏…</h3></div><div class="mt l"><p class="bd b fp z dy mq ea eb mr ed ef dx translated">www.techpowerup.com</p></div></div><div class="mu l"><div class="nd l mw mx my mu mz jd ml"/></div></div></a></div><p id="f7ed" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">不仅如此，有些人还担心缺乏软件所有权。您的帐户可能会被禁止或删除，导致您失去与该帐户相关的一切。当然，维护软件的公司可能会倒闭，这意味着你将失去你购买的所有游戏。因此，这就是不把所有东西都放在云中的原因。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es ne"><img src="../Images/636000855cadd850629bfb7be3772bcd.png" data-original-src="https://miro.medium.com/v2/resize:fit:922/format:webp/1*RcnEXmZG4GnfdpvGxZpLig.png"/></div><figcaption class="jf jg et er es jh ji bd b be z dx">Figure from psu.edu</figcaption></figure><p id="c082" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">然而，你不必放弃云游戏这个选项。因为有一些好处，例如不必升级硬件。为您花费的时间而不是购买的硬件付费。并且能够在任何有可靠互联网连接的地方玩游戏。这是假设你知道如何配置你的云游戏系统，这样它就不会有大众市场上提到的云游戏的缺点。</p><p id="af39" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">您可以使用NVME固态硬盘和最新的NVIDIA GPU创建VPS。对于买不起最新硬件的人来说，数字农民似乎是唯一的选择。我推荐的提供商(如Digital Ocean)没有针对NVME和NVIDIA GPU的选项。然而，这里有一些推荐的VPS提供商，他们确实提供了拥有最新GPU和最快NVMe存储的选项。</p><ul class=""><li id="6420" class="lm ln hi jl b jm jn jp jq js lo jw lp ka lq ke nf ls lt lu bi translated"><a class="ae kf" href="https://tresorio.com/en/vps/" rel="noopener ugc nofollow" target="_blank">特雷索里奥</a></li><li id="a9a7" class="lm ln hi jl b jm ng jp nh js ni jw nj ka nk ke nf ls lt lu bi translated"><a class="ae kf" href="https://cloud.google.com/gpu" rel="noopener ugc nofollow" target="_blank">谷歌云</a></li><li id="fd51" class="lm ln hi jl b jm ng jp nh js ni jw nj ka nk ke nf ls lt lu bi translated"><a class="ae kf" href="https://www.nvidia.com/en-us/data-center/gpu-cloud-computing/amazon-web-services/" rel="noopener ugc nofollow" target="_blank">亚马逊网络服务</a></li><li id="7515" class="lm ln hi jl b jm ng jp nh js ni jw nj ka nk ke nf ls lt lu bi translated"><a class="ae kf" href="https://docs.microsoft.com/en-us/azure/virtual-machines/sizes-gpu" rel="noopener ugc nofollow" target="_blank">微软Azure </a></li></ul><p id="6476" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">即使有了快速服务器，云游戏也只能和服务器上运行的延迟一样好。遵循这些提示来减少延迟。在离您最近的服务器上运行您的虚拟机。看看ping时间。ping时间长的封闭服务器通常意味着平台使用的服务质量算法很差，或者流量使可用带宽过载。在这种情况下，您应该考虑使用另一个平台提供商。还有，看服务的口碑。有些平台是由对网络安全没有多少专业知识的人运营的。或者他们直接被喂蜜罐设计来引诱人们，不管是恶意的还是不恶意的，让他们认为他们正在使用一个私有的VPS。查看关于<a class="ae kf" rel="noopener" href="/@dretechtips/how-to-build-a-based-content-delivery-network-e1aa8bb237b3">如何创建基于内容交付网络的指南，了解更多关于优化内容交付的信息</a>。如需更多服务器优化信息，请关注研究<a class="ae kf" href="https://www.ibm.com/cloud/what-is-edge-computing" rel="noopener ugc nofollow" target="_blank">边缘计算</a>。</p><p id="3a6d" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">考虑到所有这些优化和风险，如果您不知道自己在做什么，那么最好是自托管，而不是使用云。如今购买这种硬件会因为刮擦而花费很多。然而，<a class="ae kf" rel="noopener" href="/geekculture/buy-enterprise-it-equipment-cheaply-in-2022-4356a4e20d46">你可以在易贝</a>买到便宜的旧硬件。正如大多数人应该知道的那样，云只不过是别人的服务器。使用云有很多省钱的方法。因为大多数服务器不是按机器运行的时间收费，而是按内容的存储量收费。你可以在网上找到一堆关于降低成本技巧的教程。</p><p id="8896" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">一旦你创建了VPS。登录VPS设置无头服务器。确保您创建了一个非root用户。配置虚拟机管理器软件。现在你可以在任何地方玩你的游戏了，假设你有你的私人密钥连接到服务器。通过SSH端口使用QEMU连接到您的服务器，以防止任何人窥探您的连接。现在你已经创建了没有所有间谍软件的云游戏。还建议您对使用的每个服务运行延迟测试基准，以优化性能。</p><h2 id="171c" class="kg kh hi bd ki kj kk kl km kn ko kp kq js kr ks kt jw ku kv kw ka kx ky kz la bi translated">最后</h2><p id="8cd1" class="pw-post-body-paragraph jj jk hi jl b jm lb ij jo jp lc im jr js ld ju jv jw le jy jz ka lf kc kd ke hb bi translated">IT和工程领域是快速发展的领域。跟不上意味着你将被落在后面。跟上的最好方法是保持最新的新闻和教育内容。<a class="ae kf" rel="noopener" href="/subscribe/@dretechtips">订阅免费电子邮件列表，将您的职业生涯提升10倍。</a></p><p id="c5dd" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">加入我们吧，50多位想要快速提升职业生涯和知识基础的人已经注册了。</p><p id="db2c" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">达到这一点可能意味着你同意大部分已经写了。留下大量掌声，让算法向大众推广不受欢迎的技术，如Linux。</p><p id="7c5f" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">相关内容:</strong></p><ul class=""><li id="a45f" class="lm ln hi jl b jm jn jp jq js lo jw lp ka lq ke nf ls lt lu bi translated"><a class="ae kf" rel="noopener" href="/geekculture/the-quick-and-easy-way-to-install-arch-linux-70b9bfc35863">快速简单的安装Arch Linux的方法</a></li><li id="3586" class="lm ln hi jl b jm ng jp nh js ni jw nj ka nk ke nf ls lt lu bi translated"><a class="ae kf" rel="noopener" href="/geekculture/how-to-securely-delete-files-in-linux-ce6ad1205922">如何在Linux中安全删除文件？</a></li><li id="ae50" class="lm ln hi jl b jm ng jp nh js ni jw nj ka nk ke nf ls lt lu bi translated"><a class="ae kf" rel="noopener" href="/geekculture/the-beginners-guide-to-the-linux-kernel-29743b1a2daf">Linux内核初学者指南</a></li></ul></div></div>    
</body>
</html>