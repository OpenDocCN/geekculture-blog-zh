<html>
<head>
<title>Docker Express: Running a Local SQL Server on Your M1 Mac</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Docker Express:在您的M1 Mac上运行本地SQL Server</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/docker-express-running-a-local-sql-server-on-your-m1-mac-8bbc22c49dc9?source=collection_archive---------0-----------------------#2021-04-07">https://medium.com/geekculture/docker-express-running-a-local-sql-server-on-your-m1-mac-8bbc22c49dc9?source=collection_archive---------0-----------------------#2021-04-07</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/85a8d015544444e72dbb63496903ef2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hPGa1SOR-S5wNkQZ"/></div></div></figure><p id="f4de" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">大约两年前，我写过如何使用Microsoft SQL Server for Linux Docker image在Docker容器中运行<a class="ae jo" rel="noopener" href="/agilix/docker-express-running-a-local-sql-server-express-204890cff699"> SQL Express。</a></p><p id="4a47" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，我发现我的M1 Mac电脑也需要同样的功能。原始的SQL Server for Linux映像尚未移植到ARM64架构。然而，我发现有一种新的数据库技术，针对人工智能命名为<a class="ae jo" href="https://hub.docker.com/_/microsoft-azure-sql-edge" rel="noopener ugc nofollow" target="_blank"> Azure SQL Edge </a>。这个数据库已经被dockered并移植到ARM64上，因此<strong class="is hj">可以</strong>在Mac上的Docker for M1上运行。</p><p id="d4a7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">TL；RD；</strong>这是如何在M1上运行Docker SQL实例:</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="270b" class="jy jz hi ju b fi ka kb l kc kd">docker run -e "ACCEPT_EULA=1" -e "MSSQL_SA_PASSWORD=MyPass@word" -e "MSSQL_PID=Developer" -e "MSSQL_USER=SA" -p 1433:1433 -d --name=sql mcr.microsoft.com/azure-sql-edge</span></pre><h2 id="2ee6" class="jy jz hi bd ke kf kg kh ki kj kk kl km jb kn ko kp jf kq kr ks jj kt ku kv kw bi translated">M1码头工人</h2><p id="5da2" class="pw-post-body-paragraph iq ir hi is b it kx iv iw ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn hb bi translated">自2020年末以来，M1的Docker已经走过了漫长的道路，Docker团队的努力在ARM64的最新RC版本中大放异彩，<a class="ae jo" href="https://docs.docker.com/docker-for-mac/apple-m1/" rel="noopener ugc nofollow" target="_blank">可以在这里找到</a>。您需要安装此最新版本(或更高版本)才能成功运行SQL容器。安装后，运行上面提到的脚本。</p><h2 id="fd7b" class="jy jz hi bd ke kf kg kh ki kj kk kl km jb kn ko kp jf kq kr ks jj kt ku kv kw bi translated">通过Azure Data Studio连接</h2><p id="6654" class="pw-post-body-paragraph iq ir hi is b it kx iv iw ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn hb bi translated">要通过<a class="ae jo" href="https://docs.microsoft.com/en-us/sql/azure-data-studio/download-azure-data-studio?view=sql-server-ver15" rel="noopener ugc nofollow" target="_blank"> Azure Data Studio </a>连接，您需要将<strong class="is hj"> 127.0.0.1 </strong>作为<strong class="is hj">服务器</strong>，我们已经在端口<strong class="is hj"> 1433 </strong>上托管Docker容器，这是SQL的默认端口。使用<strong class="is hj"> SQL登录</strong>并将用户设置为<strong class="is hj"> sa。</strong>最后，设置你选择的密码，就是上面例子中的<strong class="is hj"> MyPass@word </strong>。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lc"><img src="../Images/1ea5968e63b8ca651a4563a68172df74.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gNpGgOh_FlFS4zrphakexQ.png"/></div></div></figure><p id="7f87" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">点击<strong class="is hj">连接</strong>，看看是否有效！如果您在连接时遇到任何问题，请检查容器是否正在运行:</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="a7f6" class="jy jz hi ju b fi ka kb l kc kd">docker ps</span></pre><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ld"><img src="../Images/820ffeff385847570d2013d24a38b622.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AjvPFaBAMI53SDJUgxCuBg.png"/></div></div></figure><p id="c135" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果没有，请尝试手动启动它:</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="142e" class="jy jz hi ju b fi ka kb l kc kd">docker run sql</span></pre><h2 id="d81c" class="jy jz hi bd ke kf kg kh ki kj kk kl km jb kn ko kp jf kq kr ks jj kt ku kv kw bi translated"><strong class="ak">创建数据库</strong></h2><p id="e19a" class="pw-post-body-paragraph iq ir hi is b it kx iv iw ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn hb bi translated">我建议不要使用<strong class="is hj">主</strong>数据库，只需创建自己的数据库，在<strong class="is hj"> Azure Data Studio </strong>的<strong class="is hj">新查询</strong>窗口中运行以下内容:</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="ad96" class="jy jz hi ju b fi ka kb l kc kd">USE master</span><span id="d3d6" class="jy jz hi ju b fi le kb l kc kd">GO</span><span id="1e19" class="jy jz hi ju b fi le kb l kc kd">IF NOT EXISTS (SELECT [name]</span><span id="1f06" class="jy jz hi ju b fi le kb l kc kd">FROM sys.databases</span><span id="8700" class="jy jz hi ju b fi le kb l kc kd">WHERE [name] = N'TestDb')</span><span id="95d1" class="jy jz hi ju b fi le kb l kc kd">CREATE DATABASE TestDb</span><span id="7953" class="jy jz hi ju b fi le kb l kc kd">GO</span></pre><p id="9358" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这个脚本将创建一个名为<strong class="is hj"> TestDb </strong>的数据库，如果它还不存在的话。</p><p id="bb81" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">运行这个脚本后，您应该在数据库列表中看到新的<strong class="is hj"> TestDb </strong>:</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lf"><img src="../Images/85e1cc990847a2b6fc14f1c484831f50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1YSXoRERqdUZN86qgL_AEQ.png"/></div></div></figure><p id="9c8b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">从现在开始运行任何查询时，请确保在下拉列表中选择正确的数据库！</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lg"><img src="../Images/31f448833c1943b0caa8223e55363af8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*skROXqa-0hKvm9TZpPVQbw.png"/></div></div></figure><h2 id="61f2" class="jy jz hi bd ke kf kg kh ki kj kk kl km jb kn ko kp jf kq kr ks jj kt ku kv kw bi translated">插入数据</h2><p id="b472" class="pw-post-body-paragraph iq ir hi is b it kx iv iw ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn hb bi translated">现在让我们来测试一下，并插入一些数据。下面的脚本将<strong class="is hj">创建一个表</strong> , <strong class="is hj">插入一条记录</strong>,<strong class="is hj">从新创建的表中选择该记录</strong>:</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="2c4f" class="jy jz hi ju b fi ka kb l kc kd">CREATE TABLE MyDto(</span><span id="d173" class="jy jz hi ju b fi le kb l kc kd">Number INT,</span><span id="10f5" class="jy jz hi ju b fi le kb l kc kd">Text NVARCHAR(255)</span><span id="9ee9" class="jy jz hi ju b fi le kb l kc kd">)</span><span id="a344" class="jy jz hi ju b fi le kb l kc kd">GO</span><span id="b84c" class="jy jz hi ju b fi le kb l kc kd">INSERT INTO MyDto VALUES (1, 'This is from my M1 Mac!')</span><span id="5e42" class="jy jz hi ju b fi le kb l kc kd">GO</span><span id="9a97" class="jy jz hi ju b fi le kb l kc kd">SELECT * FROM MyDto</span></pre><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lh"><img src="../Images/9f40cc56f6e49507a06985efbe6236ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LFGImG6wJ0_Jk1v7YhxzIA.png"/></div></div></figure><p id="23ed" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">就是这样！我们现在在Apple Silicon上有了一个实用的SQL Docker容器！</p></div></div>    
</body>
</html>