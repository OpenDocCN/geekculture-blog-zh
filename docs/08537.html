<html>
<head>
<title>Player Animations from Mixamo.com</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">来自Mixamo.com的玩家动画</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/player-animations-from-mixamo-com-4e65ef7cd81a?source=collection_archive---------20-----------------------#2021-11-04">https://medium.com/geekculture/player-animations-from-mixamo-com-4e65ef7cd81a?source=collection_archive---------20-----------------------#2021-11-04</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/1829bfee88e1c93160f8acc8ac2acbba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*N2kF2ys78AiC0DFblaozDA.gif"/></div></figure><p id="c0a1" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">目标</strong>:搜索、获取并应用动画到人形角色</p><p id="d78f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">自上一篇教程以来，已经有了一个巨大的、不有趣的飞跃。我将项目升级到类似生产的阶段，尽可能保留原型的逻辑。</p><p id="ea88" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">例如，我设法保留了<em class="jk"> PlayerMovement </em>的脚本，即使它需要一些调整。</p><p id="8c3b" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">一个主要的变化是从资产商店引入了一个<strong class="io hj">人形角色</strong>。我确保它是一个. fbx模型，这意味着它是一个以Autodesk Filmbox格式保存的3D模型。对于动画来说，这将非常有用。</p><figure class="jn jo jp jq fd ij er es paragraph-image"><div class="er es jm"><img src="../Images/99423212aa027df40a97952a452e1edb.png" data-original-src="https://miro.medium.com/v2/resize:fit:496/format:webp/1*P6ZBBnEzyNS6Gx6kcGc7yg.png"/></div></figure><p id="e5cb" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">与上一个游戏中的角色<a class="ae jl" href="https://danioquero.itch.io/the-great-fleece" rel="noopener ugc nofollow" target="_blank"> The Great Fleece </a>一样，3D模型是玩家游戏对象的<strong class="io hj">子对象</strong>。发生这种情况有很多原因，其中大部分都与玩家(父对象)运动和模型(子对象)动画之间的独立性有关。</p><figure class="jn jo jp jq fd ij er es paragraph-image"><div class="er es jr"><img src="../Images/bcf0d6137fd2cf0cd4bcfa96b6b4fbd0.png" data-original-src="https://miro.medium.com/v2/resize:fit:616/format:webp/1*qS6DrBhKehPqzdT2TH4rtQ.png"/></div></figure><p id="ad66" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">角色将以经典的T型姿势出现在场景中。确保你调整了角色控制器碰撞器的大小和偏移量。</p><h2 id="2976" class="js jt hi bd ju jv jw jx jy jz ka kb kc ix kd ke kf jb kg kh ki jf kj kk kl km bi translated">动画片</h2><p id="3b44" class="pw-post-body-paragraph im in hi io b ip kn ir is it ko iv iw ix kp iz ja jb kq jd je jf kr jh ji jj hb bi translated">现在我们要做一点动画。我知道，我不是艺术家，尤其不是3D艺术家或动画师。幸运的是，我们为角色选择的<strong class="io hj">格式</strong>帮了我们很大的忙，因为在网上有太多其他具有相同格式的角色。还有动画。我要给你表演一个魔术！</p><p id="4e9f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">进入<a class="ae jl" href="https://www.mixamo.com/" rel="noopener ugc nofollow" target="_blank">Mixamo.com</a>网站并登录(Adobe账户)或免费订阅。在这个网站上，我们可以搜索到一部<strong class="io hj">动画</strong>，这部动画很有可能会和我们的fbx角色一起工作！很简单:首先，搜索一个动画，比如说“奔跑”。</p><figure class="jn jo jp jq fd ij er es paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="er es ks"><img src="../Images/baa3cc3b8bdd7ee911ebfb32a1ece9b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q3fUO4GzS6WN1SSBvHlJqA.png"/></div></div></figure><p id="4541" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">因此，大量的动画预览将向您展示该网站提供的内容。你可以点击其中一个来获得一个更大的预览，带有一些微调滑块(剪切动画长度和类似的)。</p><figure class="jn jo jp jq fd ij er es paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="er es kx"><img src="../Images/22df8b03ba6c1cb164c7fe65171605b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DeCggNUJ-axm6YjZdI4jmg.png"/></div></div></figure><p id="4ffd" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在一些动画中，还会出现一个超级有用的<strong class="io hj">就位复选框</strong>。如果有，检查一下。这将强制动画在处<strong class="io hj">发生，因此角色实际上不会因为动画而移动，将编写脚本的工作留给您(这是更可取的)。在其他一些情况下，将不会有这样的选择，我们将不得不团结一致地工作，以获得同样的结果。</strong></p><figure class="jn jo jp jq fd ij er es paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="er es ky"><img src="../Images/58d7a4ae1a8bbe37f2e3c0720991dd17.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WM-3OJl9vUQALZK-zpe6_w.png"/></div></div></figure><p id="7642" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">您现在可以下载动画了。其实你正在下载一个fbx <strong class="io hj">模型</strong>有这样的动画。如果可以，尽量保持快照中的设置。下载完成后，您可以在Unity Editor中通过简单的拖放操作导入fbx。你需要多少就拿多少。</p><div class="jn jo jp jq fd ab cb"><figure class="kz ij la lb lc ld le paragraph-image"><img src="../Images/7efdcbe6b4c0e67583842020a9e93593.png" data-original-src="https://miro.medium.com/v2/resize:fit:560/format:webp/1*3v3fS6rwkNhAVp9oHo9HPg.png"/></figure><figure class="kz ij lf lb lc ld le paragraph-image"><img src="../Images/c8268ac0c40d3ae8a509268f9f215315.png" data-original-src="https://miro.medium.com/v2/resize:fit:568/format:webp/1*swyEcZ-OTOAXBxLrDiPvNQ.png"/></figure></div><p id="aada" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">如果您从项目视图中打开一个，您会看到您导入了一个3D模型，包括材质(红色机器人外观)和一个动画，这里称为mixamo.com。</p><figure class="jn jo jp jq fd ij er es paragraph-image"><div class="er es lg"><img src="../Images/edd565089172d5fb54997f88d79bd42d.png" data-original-src="https://miro.medium.com/v2/resize:fit:930/format:webp/1*gpDyw5nIID2azTmoLpFpMQ.png"/></div></figure><p id="6e96" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在检查器视图中，您会看到这些标签。选择<strong class="io hj">钻机</strong>一台。<strong class="io hj">装配</strong>也被称为骨骼动画:3D模型由一个骨骼(内部)和一个表面(外部)组成。许多动画只涉及角色的骨骼(例如跑步)。为了让这个动画和我们的角色一起工作，我们必须选择<strong class="io hj">人形动画类型</strong>。这是必须的，否则动画会是一场灾难。</p><figure class="jn jo jp jq fd ij er es paragraph-image"><div class="er es lh"><img src="../Images/e50027a025abdb709aebb57a291b72f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:884/format:webp/1*Ab6PPRNhu287R_pnRpa6mw.png"/></div></figure><p id="2dec" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在动画选项卡中，您可以找到这些属性。这些是非常重要的，尤其是在你没有从Mixamo获得一个就地选项的情况下。我说的是<strong class="io hj">烘焙成姿势</strong>选项。通过选中其中的一个或多个，您将强制动画在适当的位置出现。你必须为你的动画找到正确的组合。您可以随时在检查器底部预览结果，那里有一个动画播放器。</p><div class="jn jo jp jq fd ab cb"><figure class="kz ij li lb lc ld le paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><img src="../Images/06f15c053087fec33af2d62f04bcf3ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:464/format:webp/1*Pa906CNiml3Lhl9RwqIV9w.png"/></div></figure><figure class="kz ij lj lb lc ld le paragraph-image"><img src="../Images/9e1301043d528ed899c81b876234c2ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:922/format:webp/1*jYIZmLpJyAgwpJj0V0PCXg.png"/></figure></div><p id="f468" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">一旦所有这些都完成了，这里有一个诀窍:我们将窃取动画，永远不要使用这个虚拟模型。简单的<strong class="io hj">复制</strong>动画对象，重命名并移动到你喜欢的任何地方！在这一点上，你可以为你的实际三维模型定义一个动画，并把所有的动画放在那里！</p><h2 id="6f89" class="js jt hi bd ju jv jw jx jy jz ka kb kc ix kd ke kf jb kg kh ki jf kj kk kl km bi translated">过渡</h2><figure class="jn jo jp jq fd ij er es paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="er es lk"><img src="../Images/9383ec57acfc262454f3fd0cddf5f58b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yYaTgDrVL8bMjUwsvVM0Zw.png"/></div></div></figure><p id="8e6a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">为了让动画工作，我们需要协调它们之间的<strong class="io hj">过渡</strong>。目前，我们有4个动画:空闲，跳跃，跑步和跑步跳跃。空闲动画被设置为默认值，因此开始时的角色将处于空闲动画中。从那里我们可以过渡到跑步或跳跃。</p><div class="jn jo jp jq fd ab cb"><figure class="kz ij ll lb lc ld le paragraph-image"><img src="../Images/9d3b66ed7004924ffbfaa042e68fea2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:892/format:webp/1*dGer3YbFmsq9TYVm6a_9yQ.png"/></figure><figure class="kz ij lm lb lc ld le paragraph-image"><img src="../Images/3e680f1eaa183aadf5f96b207e83ff68.png" data-original-src="https://miro.medium.com/v2/resize:fit:888/format:webp/1*Ok2FREPs4e4sIaHRP3i4hA.png"/></figure></div><p id="fb44" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">跳转由跳转方法中设置的实际<strong class="io hj">触发参数</strong>触发。</p><p id="727c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">运行由大于阈值(0.01)的<strong class="io hj">浮动参数</strong>触发。移动时，该参数将设置为速度的绝对值。当跳跃时，它也将被设置为0，以避免在半空中运行动画。</p><figure class="jn jo jp jq fd ij er es paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="er es ln"><img src="../Images/03578b0ca835d287c1e176d1399d503f.png" data-original-src="https://miro.medium.com/v2/resize:fit:932/format:webp/1*4M4cab33m8cTgQ2JeEJPdQ.png"/></div></div></figure><figure class="jn jo jp jq fd ij er es paragraph-image"><div class="er es lo"><img src="../Images/31f681731a2f66de5f48bc9e27bac0bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:920/format:webp/1*87GGt2VGfEuilEDq4RMyow.png"/></div></figure><p id="2321" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">回到闲置状态的方式有所不同。跳转到空闲过渡将有一个<strong class="io hj">退出时间</strong>，但有必要调整一点设置，以获得我想要的平滑过渡。</p><p id="a09b" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">运行到空闲状态再次利用了浮点参数。</p><p id="56a5" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">跑步跳跃动画将在玩家跑步跳跃时出现。所以过渡就是跑步到跑步跳跃，再回到跑步或者回到空闲。</p><p id="43da" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">跑步跳跃，使用跳跃触发器。相反的检查速度值(大于)。返回空闲又有一个退出时间。</p><p id="7d5f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这是在运动/跳跃逻辑中设置参数的时间。</p><figure class="jn jo jp jq fd ij"><div class="bz dy l di"><div class="lp lq l"/></div></figure><h2 id="4958" class="js jt hi bd ju jv jw jx jy jz ka kb kc ix kd ke kf jb kg kh ki jf kj kk kl km bi translated">字符方向</h2><p id="7223" class="pw-post-body-paragraph im in hi io b ip kn ir is it ko iv iw ix kp iz ja jb kq jd je jf kr jh ji jj hb bi translated">最后要修复的是<strong class="io hj">角色在奔跑时的方位</strong>。由于模型(子对象)是动画，但只有玩家对象(父对象)根据输入移动，结果是角色正确地在一个方向上奔跑，而<strong class="io hj">在另一个方向上月球漫步</strong>。当角色是一个胶囊时，我们从来不关心这个，每个方向都相等，但现在我们有了一个人类角色，我们需要他/她看着他/她跑的方向。</p><figure class="jn jo jp jq fd ij"><div class="bz dy l di"><div class="lp lq l"/></div></figure><p id="851a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">解决方案是<code class="du lr ls lt lu b">Quaterion.LookAt()</code>方法，我们已经在<a class="ae jl" href="https://danioquero.itch.io/galaxy-shooter-2d" rel="noopener ugc nofollow" target="_blank">银河射手</a>游戏中使用了鱼雷。该方法需要一个矢量作为<strong class="io hj">前进</strong>方向，一个矢量作为<strong class="io hj">上升</strong>方向。向上方向是实际的世界向上向量，而向前取决于运动，因此取决于速度。这是一个我们已经计算过的矢量，用来触发动画。</p><p id="aa10" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这一次我们还需要<strong class="io hj">将</strong>存储在私有字段<code class="du lr ls lt lu b">_lastNonZeroSpeed</code>中。这个矢量在开始时将被指定为<code class="du lr ls lt lu b">Vector3.forward</code>，然后将保持水平速度矢量，如果非零，否则将保持其最后的值。</p><p id="0a39" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这意味着向量永远不会为零，而水平速度可以为零(无输入情况)。这个技巧将允许我们<strong class="io hj">保持</strong>角色看着我们输入的最后一个方向，而不是翻回到默认方向(根据空闲动画)。</p><figure class="jn jo jp jq fd ij er es paragraph-image"><div class="er es if"><img src="../Images/1829bfee88e1c93160f8acc8ac2acbba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*N2kF2ys78AiC0DFblaozDA.gif"/></div></figure></div></div>    
</body>
</html>