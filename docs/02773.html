<html>
<head>
<title>Chain of Responsibility Design Pattern ✨😎</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">责任链设计模式✨😎</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/chain-of-responsibility-design-pattern-2e27bd751360?source=collection_archive---------32-----------------------#2021-05-25">https://medium.com/geekculture/chain-of-responsibility-design-pattern-2e27bd751360?source=collection_archive---------32-----------------------#2021-05-25</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="31c7" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">责任链设计模式的概述及其在真实场景中的实现！</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/c275d4ec1a9d8744d5c2a0ebb116f2ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*itTs80OkVKKxysXRr9svew.gif"/></div></div></figure><p id="b2fc" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">📍责任链设计模式是一种行为设计模式。</p><p id="aee0" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">📍责任链模式主要用于<strong class="jl hj"> </strong>在当前对象无法处理时将责任传递给下一个对象。通过利用这种责任链设计模式，您可以实现松散耦合。</p><p id="9e07" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">让我们通过下面的例子来理解这种设计模式:</p><blockquote class="kf kg kh"><p id="bf3b" class="jj jk ki jl b jm jn ij jo jp jq im jr kj jt ju jv kk jx jy jz kl kb kc kd ke hb bi translated"><em class="hi">假设你需要在用户层面控制一个菜单。那里有首席执行官、董事、经理和执行官。因此，他们每个人都有多种级别的权限。因此，如果您需要基于这些特定级别的权限实现某些东西，您可以使用这种设计模式。</em></p></blockquote><p id="f143" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在实践层面实现的责任设计模式链的最好例子是<strong class="jl hj"> Java API logger </strong>。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es km"><img src="../Images/5bf2500010df971d4fafd4e017568d17.png" data-original-src="https://miro.medium.com/v2/resize:fit:1220/format:webp/1*fy8i5P4c63p-59W04zNQSA.png"/></div></figure><p id="76c0" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">输出:</p><pre class="iy iz ja jb fd kn ko kp kq aw kr bi"><span id="1972" class="ks kt hi ko b fi ku kv l kw kx"><strong class="ko hj">INFO: this is info<br/>WARNING: this is warning<br/>SEVERE: this is severe</strong></span></pre><p id="1b42" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">因此，你可以看到这是在一个层次上进行的。(注意:如果没有找到一个特定级别处理程序，它就忽略它)</p><h1 id="d2b1" class="ky kt hi bd kz la lb lc ld le lf lg lh io li ip lj ir lk is ll iu lm iv ln lo bi translated">何时使用责任链？🙄</h1><p id="9602" class="pw-post-body-paragraph jj jk hi jl b jm lp ij jo jp lq im jr js lr ju jv jw ls jy jz ka lt kc kd ke hb bi translated">🔥当我们的程序用各种方法在不同类型的请求中寻找一个过程时，我们可以使用责任链设计模式，但是请求的确切类型&amp;它们的顺序事先没有指定。</p><p id="7cf4" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">🔥如果想在运行时改变处理程序集和它们的顺序，可以使用这种模式。</p><p id="436f" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">🔥当我们希望以某种顺序执行一些处理程序时，我们可以使用这种模式。</p><p id="c07f" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">这里最重要的事实是，这种设计模式鼓励松散耦合。</p><blockquote class="kf kg kh"><p id="fa45" class="jj jk ki jl b jm jn ij jo jp jq im jr kj jt ju jv kk jx jy jz kl kb kc kd ke hb bi translated">例:发送者不知道接收者是谁，接收者也不知道发送者是谁。此外，发送者可以在不知道谁将接收消息的情况下执行他们的工作，同时接收者可以在不知道发送者的情况下执行他们的工作。这意味着我们可以通过使用这种设计模式来分离发送方和接收方。</p></blockquote><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lu"><img src="../Images/a34d1d727e4c86c27f99e3b7cdfbfb22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g-Oj_IDCOpqzUn4afIAbxg.png"/></div></div></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lu"><img src="../Images/98ff3af311ed5546b7fa3def0c13cd90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*biKdWd-2hcsyNrWsPALC4w.png"/></div></div></figure><h1 id="041c" class="ky kt hi bd kz la lb lc ld le lf lg lh io li ip lj ir lk is ll iu lm iv ln lo bi translated">责任链设计模式的类图</h1><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lv"><img src="../Images/494c75e96e768b813a91674b8b6cfe6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Iay8YyTxo4j-TrMq63KzYw.png"/></div></div><figcaption class="lw lx et er es ly lz bd b be z dx">Ref:<a class="ae ma" href="https://dzone.com/articles/using-chain-of-responsibility-design-pattern-in-ja" rel="noopener ugc nofollow" target="_blank">https://dzone.com/articles/using-chain-of-responsibility-design-pattern-in-ja</a></figcaption></figure><h1 id="59de" class="ky kt hi bd kz la lb lc ld le lf lg lh io li ip lj ir lk is ll iu lm iv ln lo bi translated">责任链设计模式的序列图</h1><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mb"><img src="../Images/8afdceda7d040cc22d8e5c69904cf6dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:736/format:webp/1*BUHlXb4fyTwGbL2mGSiGsw.jpeg"/></div></figure><blockquote class="kf kg kh"><p id="680b" class="jj jk ki jl b jm jn ij jo jp jq im jr kj jt ju jv kk jx jy jz kl kb kc kd ke hb bi translated"><em class="hi">这种设计模式的美妙之处在于你可以改变接收者和发送者的顺序，甚至不需要触及程序的核心实现</em></p></blockquote><p id="d212" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">让我们转到一个真实的场景来理解这种设计模式:</p><h1 id="697a" class="ky kt hi bd kz la lb lc ld le lf lg lh io li ip lj ir lk is ll iu lm iv ln lo bi translated">💥方案</h1><blockquote class="kf kg kh"><p id="e58d" class="jj jk ki jl b jm jn ij jo jp jq im jr kj jt ju jv kk jx jy jz kl kb kc kd ke hb bi translated">“Lipsy”是康提的一家女装店，他们给顾客一些折扣作为圣诞优惠。每一个优惠都有一个特别的名字，当你买衣服时，金额会从账单中扣除。</p><p id="8073" class="jj jk ki jl b jm jn ij jo jp jq im jr kj jt ju jv kk jx jy jz kl kb kc kd ke hb bi translated">✹黄金折扣—九五折(最高500/=) <br/> ✹ AweOffers折扣—九五折(500/=至1500/=) &amp;将获得黄金折扣<br/> ✹ DealDive折扣—九五折(1500/=至2500/=) &amp;也将获得黄金、AweOffers折扣<br/> ✹ Marvell折扣—九五折(2500/=至5000/=) &amp;将获得黄金、AweOffers</p></blockquote><p id="281e" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">因此，下表列出了一些预期的结果:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mc"><img src="../Images/028ace9018a13635adab2613702bb446.png" data-original-src="https://miro.medium.com/v2/resize:fit:1372/format:webp/1*Syfd9bVd7GVv4FX4tJzYPw.png"/></div></div></figure><p id="a097" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">让我们转到这个场景的实现:</p><blockquote class="kf kg kh"><p id="a256" class="jj jk ki jl b jm jn ij jo jp jq im jr kj jt ju jv kk jx jy jz kl kb kc kd ke hb bi translated"><em class="hi"> ✨ DiscountHandler类</em></p></blockquote><p id="d24c" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">这是一个抽象类(如果需要，可以在这里使用一个接口)。这个类定义了请求的处理。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="md me l"/></div></figure><blockquote class="kf kg kh"><p id="b919" class="jj jk ki jl b jm jn ij jo jp jq im jr kj jt ju jv kk jx jy jz kl kb kc kd ke hb bi translated"><em class="hi"> ✨法案类</em></p></blockquote><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="md me l"/></div></figure><blockquote class="kf kg kh"><p id="6e88" class="jj jk ki jl b jm jn ij jo jp jq im jr kj jt ju jv kk jx jy jz kl kb kc kd ke hb bi translated"><em class="hi"> ✨黄金班</em></p></blockquote><p id="4f95" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">这个类扩展了“DiscountHandler类”。在第6行，它计算折扣金额。</p><p id="76da" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">“if(bill . gettotalamount()&lt;= 500)”</strong>第8行是指检查账单金额是否小于等于500卢比。</p><p id="eb76" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">“return bill . get discount()”</strong>第9行表示返回值，因为不需要计算任何其他的折扣金额。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="md me l"/></div></figure><p id="1459" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">“return successor . apply discount(bill)”</strong>第12行其实就是真正的连锁发生的地方。在这里，如果“如果”条件不为真，那么它将把它传递给后继者来计算其他折扣。</p><blockquote class="kf kg kh"><p id="2d9e" class="jj jk ki jl b jm jn ij jo jp jq im jr kj jt ju jv kk jx jy jz kl kb kc kd ke hb bi translated"><em class="hi">✨·阿韦弗类</em></p></blockquote><p id="4d4c" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">该类还扩展了“DiscountHandler”类。(我实现了与此相同的DealDive、Marvell和HappyDaisy类。您可以在GitHub资源库中看到完整的源代码)</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="md me l"/></div></figure><blockquote class="kf kg kh"><p id="cf46" class="jj jk ki jl b jm jn ij jo jp jq im jr kj jt ju jv kk jx jy jz kl kb kc kd ke hb bi translated"><em class="hi"> ✨折扣类</em></p></blockquote><p id="164a" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">这个类里面没有逻辑。只是将值传递给继任者。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="md me l"/></div></figure><blockquote class="kf kg kh"><p id="827c" class="jj jk ki jl b jm jn ij jo jp jq im jr kj jt ju jv kk jx jy jz kl kb kc kd ke hb bi translated"><em class="hi"> ✨应用类</em></p></blockquote><p id="a064" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">“Golden Golden = new Golden()”</strong>第5行是指从Golden创建一个对象。然后我也为所有其他折扣创建了对象(第6到9行)。</p><p id="7a61" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在第10行(<strong class="jl hj">discount Discount = new Discount()</strong>)，我创建了一个名为Discount的类，但该类中没有逻辑(这是在您将来需要更改“Discount”的名称时创建的，因此您需要将该名称保留在真正的逻辑之外)，并且我在链的开头使用了该类。</p><p id="3926" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">因为折扣是最低级别，所以我从折扣开始链(你可以从第12行看到)</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="md me l"/></div></figure><p id="1d25" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">输出:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mf"><img src="../Images/407eded59c2231e4e724afd140f9c355.png" data-original-src="https://miro.medium.com/v2/resize:fit:1088/format:webp/1*IDuk-j4oI8a-3j3FqmWkQA.png"/></div></figure><p id="9375" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">单击下面的链接查看该场景的完整源代码:</p><div class="mg mh ez fb mi mj"><a href="https://github.com/Irushinie/Krish-LP-Training/tree/main/Chain%20of%20Responsibility" rel="noopener  ugc nofollow" target="_blank"><div class="mk ab dw"><div class="ml ab mm cl cj mn"><h2 class="bd hj fi z dy mo ea eb mp ed ef hh bi translated">irushinie/Krish-LP-培训</h2><div class="mq l"><h3 class="bd b fi z dy mo ea eb mp ed ef dx translated">在GitHub上创建一个帐户，为Irushinie/Krish-LP-Training的发展做出贡献。</h3></div><div class="mr l"><p class="bd b fp z dy mo ea eb mp ed ef dx translated">github.com</p></div></div><div class="ms l"><div class="mt l mu mv mw ms mx jh mj"/></div></div></a></div><h1 id="c801" class="ky kt hi bd kz la lb lc ld le lf lg lh io li ip lj ir lk is ll iu lm iv ln lo bi translated">责任链设计模式的优缺点</h1><h2 id="fce6" class="ks kt hi bd kz my mz na ld nb nc nd lh js ne nf lj jw ng nh ll ka ni nj ln nk bi translated">优势:</h2><p id="3068" class="pw-post-body-paragraph jj jk hi jl b jm lp ij jo jp lq im jr js lr ju jv jw ls jy jz ka lt kc kd ke hb bi translated">🌱这种设计模式有助于分离请求的发送方和接收方。</p><p id="3b27" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">🌱这种模式增强了将责任分配给特定对象或改变链顺序的灵活性。</p><p id="f62d" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">🌱责任链设计模式为一组类提供了作为一个整体的能力。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lu"><img src="../Images/c831853daccc14cdcdc81de75bb7a5b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2N5q4WZ_AoNh7rr9DXhRDg.png"/></div></div></figure><h2 id="4c08" class="ks kt hi bd kz my mz na ld nb nc nd lh js ne nf lj jw ng nh ll ka ni nj ln nk bi translated">缺点:</h2><p id="5d42" class="pw-post-body-paragraph jj jk hi jl b jm lp ij jo jp lq im jr js lr ju jv jw ls jy jz ka lt kc kd ke hb bi translated">🌱有时很难观察到运行时特征并消除错误。</p><p id="4049" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">🌱有时候，这种责任链设计模式很容易被打破。</p><p id="4d7d" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">(例如:</p><p id="515d" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">✹如果一个处理程序调用下一个处理程序不成功，请求就会被丢弃。</p><p id="4ffe" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">✹如果一个处理程序调用了不正确的处理程序，它会损害整个链)</p><p id="1373" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">🌱这种设计模式有时会增加维护，因为处理程序之间会出现重复代码。</p></div><div class="ab cl nl nm gp nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="hb hc hd he hf"><h1 id="7a8c" class="ky kt hi bd kz la ns lc ld le nt lg lh io nu ip lj ir nv is ll iu nw iv ln lo bi translated">参考</h1><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="nx me l"/></div></figure><div class="mg mh ez fb mi mj"><a href="https://www.tutorialspoint.com/design_pattern/chain_of_responsibility_pattern.htm" rel="noopener  ugc nofollow" target="_blank"><div class="mk ab dw"><div class="ml ab mm cl cj mn"><h2 class="bd hj fi z dy mo ea eb mp ed ef hh bi translated">责任链模式</h2><div class="mq l"><h3 class="bd b fi z dy mo ea eb mp ed ef dx translated">顾名思义，责任链模式为一个请求创建一个接收者对象链。这个…</h3></div><div class="mr l"><p class="bd b fp z dy mo ea eb mp ed ef dx translated">www.tutorialspoint.com</p></div></div><div class="ms l"><div class="ny l mu mv mw ms mx jh mj"/></div></div></a></div><p id="7fea" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">《责任链模式》，<em class="ki">与沃尔夫冈一起编程，重点是Azure K8s和DevOps </em>，2021。【在线】。可用:<a class="ae ma" href="https://www.programmingwithwolfgang.com/chain-responsibility-pattern/#:~:text=A%20real%20world%20example%20for,the%20report%20to%20his%20manager." rel="noopener ugc nofollow" target="_blank">https://www . programmingwithwolfgang . com/chain-respons ibility-pattern/#:~:text = A % 20 real % 20 world % 20 example % 20 for，the % 20 report % 20 to % 20 his % 20 manager。</a></p><div class="mg mh ez fb mi mj"><a href="https://refactoring.guru/design-patterns/chain-of-responsibility/java/example" rel="noopener  ugc nofollow" target="_blank"><div class="mk ab dw"><div class="ml ab mm cl cj mn"><h2 class="bd hj fi z dy mo ea eb mp ed ef hh bi translated">Java中的责任链</h2><div class="mq l"><h3 class="bd b fi z dy mo ea eb mp ed ef dx translated">责任链是一种行为设计模式，它允许沿着潜在处理程序链传递请求…</h3></div><div class="mr l"><p class="bd b fp z dy mo ea eb mp ed ef dx translated">重构。领袖</p></div></div><div class="ms l"><div class="nz l mu mv mw ms mx jh mj"/></div></div></a></div></div></div>    
</body>
</html>