<html>
<head>
<title>Simple Twitter Bot Tutorial With Node.js Part 2: Deploy to Server and Schedule Tweets</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">包含Node.js的简单Twitter Bot教程第2部分:部署到服务器并调度Tweets</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/simple-twitter-bot-tutorial-with-node-js-part-2-deploy-to-server-and-schedule-tweets-bf093bbca1d9?source=collection_archive---------32-----------------------#2021-03-12">https://medium.com/geekculture/simple-twitter-bot-tutorial-with-node-js-part-2-deploy-to-server-and-schedule-tweets-bf093bbca1d9?source=collection_archive---------32-----------------------#2021-03-12</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/83b9b9244fdb08964bcaaa0fdb8fc517.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EltrKiVdMfZ2ljQHGbEGjA.jpeg"/></div></div></figure><p id="1002" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="jo">本文原载于</em> <a class="ae jp" href="https://blog.shahednasser.com/simple-twitter-bot-tutorial-with-node-part-2/" rel="noopener ugc nofollow" target="_blank"> <em class="jo">我的个人博客</em> </a> <em class="jo">。</em></p><p id="d4cc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你可以在这里查看第一部分<a class="ae jp" href="https://blog.shahednasser.com/simple-twitter-bot-tutorial-with-node-js/" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="82e3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在上一篇文章中，我们学习了如何用Node.js创建一个简单的Twitter bot，它从HistoryAPI中的[T10 Today]获取数据，并在我们的帐户中发布。</p><p id="58b3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在本文中，我们将介绍如何将bot部署到服务器上，并在一天中的特定时间运行bot。</p><p id="2bb2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我还为历史机器人创建了一个新账户，而不是使用我的个人Twitter账户。可以在真人<a class="ae jp" href="https://twitter.com/HistoryBot7" rel="noopener ugc nofollow" target="_blank"> @HistoryBot7 </a>中查看</p><p id="1ce8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">关于本教程的完整代码，可以查看<a class="ae jp" href="https://github.com/shahednasser/history-bot" rel="noopener ugc nofollow" target="_blank"> GitHub库</a>。如果你还没有看完第一部分，我建议你再看一遍。</p></div><div class="ab cl jq jr gp js" role="separator"><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv"/></div><div class="hb hc hd he hf"><h1 id="3047" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">部署机器人</h1><p id="f0de" class="pw-post-body-paragraph iq ir hi is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hb bi translated">我将把我们上次创建的机器人部署到<a class="ae jp" href="https://shahednasserblog.herokuapp.com/simple-twitter-bot-tutorial-with-node-part-2/alwaysdata.com" rel="noopener ugc nofollow" target="_blank"> alwaysdata </a>。它是免费的，提供了很多我们需要的选项，比如计划任务。但是，您可以自由地将bot部署到任何您想要的服务器上。</p><p id="925d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">创建帐户后，如果您没有帐户，请转到侧栏“客户区”部分的帐户。如果您有帐户，您会找到一个帐户列表，或者您可以创建一个新的帐户。这些账号基本都是你自己主账号里的app。如果您没有帐户，请点击“添加帐户”</p><figure class="lb lc ld le fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es la"><img src="../Images/c4324852e8ac1fdc888fe98a35737e23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*A-7UR-pURUSTA8O3.png"/></div></div></figure><p id="ad50" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后你需要输入我们称之为“历史机器人”的帐户名称。alwaysdata也将为您免费获得的子域使用此帐户名。然后在产品下拉列表中选择免费公共云。选中底部的复选框，完成后点击“提交”</p><figure class="lb lc ld le fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lf"><img src="../Images/6a85ed5b61fa708ae5714f498b3b7e82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*pXjXnxg74g4rA6Ng.png"/></div></div></figure><p id="1652" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">单击“提交”后，将创建一个新帐户，您可以在其中添加机器人。确保在下拉字段的侧边栏菜单中选择了您创建的帐户。如果没有，请转到您创建的帐户。</p><figure class="lb lc ld le fd ij er es paragraph-image"><div class="er es lg"><img src="../Images/44b458e5849330483134a34b3023662b.png" data-original-src="https://miro.medium.com/v2/resize:fit:578/format:webp/0*D2TAoewr-MCgoq0t.png"/></div></figure><p id="4d36" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在转到侧边栏的网站下，你会发现一个新创建的网站。单击编辑以配置站点。</p><figure class="lb lc ld le fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lf"><img src="../Images/cdbe03c601fe5da5be88ec7b4d9742de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*v_eS_NGaTk6GGgCY.png"/></div></div></figure><p id="9531" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您可以更改网站的名称，并添加任何域名(如果您拥有任何域名的话)。然后，转到配置部分，将类型更改为“Node.js”。在命令字段中，输入<code class="du lh li lj lk b">node ~/history-bot/index.js</code>，但要确保用您创建的应用程序的名称替换<code class="du lh li lj lk b">history-bot</code>。在工作目录中输入<code class="du lh li lj lk b">/home/history-bot/history-bot</code>,这背后的原因是我将把<code class="du lh li lj lk b">history-bot</code>库克隆到<code class="du lh li lj lk b">history-bot</code>应用中，所以你可以根据你所拥有的随意重命名它们。第一个是您创建的应用程序的名称，第二个是存储库的名称。</p><figure class="lb lc ld le fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ll"><img src="../Images/e4e7c3b28137313e524cdad8f31399ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*CBySfyl3GpEV4MIn.png"/></div></div></figure><p id="eb42" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">完成后，单击提交。然后在站点列表中，单击Restart以新的配置重新启动我们的站点。</p><figure class="lb lc ld le fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lm"><img src="../Images/d718e376df47d41b155be709d51ee349.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*XUSJbH2bAaZILWFi.png"/></div></div></figure><p id="fc6e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">重启站点后，我们需要将我们创建的bot部署到其中。为此，我们需要使用SSH来访问它。在侧边栏中，转到远程访问下的SSH。然后，单击编辑，并在编辑屏幕中选中“启用密码登录”复选框。</p><figure class="lb lc ld le fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ln"><img src="../Images/5c57090e675caf75eb7587100d270b1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*-LRcpA9p53NKqCcY.png"/></div></div></figure><p id="1167" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果您没有在“密码”栏中输入密码，您将使用您的alwaysdata帐户密码进行SSH。要使用不同的密码，请在“密码”栏中输入。</p><p id="782d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">完成后，点击提交。</p><p id="c4ee" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">用SSH访问你的站点有两种方法。一种是通过web界面alwaysdata，您可以在主页的“SSH”部分看到它</p><figure class="lb lc ld le fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lo"><img src="../Images/4dadbc4388a3c09fc7e8a98b2d2af0a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*kjZtqwHbVLPENo9P.png"/></div></div></figure><p id="f94f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当你点击它时，它会询问你的SSH名称和密码，如果你输入正确，你就可以使用网络终端。</p><p id="c172" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">另一种方法是使用<code class="du lh li lj lk b">ssh</code>命令从终端访问:</p><pre class="lb lc ld le fd lp lk lq lr aw ls bi"><span id="7217" class="lt jy hi lk b fi lu lv l lw lx">ssh user@host</span></pre><p id="4e1d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">其中<code class="du lh li lj lk b">user</code>可在表格中的<code class="du lh li lj lk b">Name</code>下找到，而<code class="du lh li lj lk b">host</code>可在表格上方的黄色警告中找到。然后系统会提示您输入密码，当您输入密码后，您将会登录。</p><p id="aba6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">进入后，输入以下命令来克隆您的存储库:</p><pre class="lb lc ld le fd lp lk lq lr aw ls bi"><span id="fd7a" class="lt jy hi lk b fi lu lv l lw lx">git clone <a class="ae jp" href="https://github.com/shahednasser/history-bot.git" rel="noopener ugc nofollow" target="_blank">https://github.com/shahednasser/history-bot.git</a></span></pre><p id="2cd1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你没有你的机器人库，你应该创建一个。</p><p id="154a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后，转到克隆存储库的目录:</p><pre class="lb lc ld le fd lp lk lq lr aw ls bi"><span id="f943" class="lt jy hi lk b fi lu lv l lw lx">cd history-bot</span></pre><p id="0ef8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">并运行:</p><pre class="lb lc ld le fd lp lk lq lr aw ls bi"><span id="e5d8" class="lt jy hi lk b fi lu lv l lw lx">npm install</span></pre><p id="7e71" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，我们需要用我们的密钥创建一个新的<code class="du lh li lj lk b">.env</code>文件，所以复制<code class="du lh li lj lk b">.env.sample</code>:</p><pre class="lb lc ld le fd lp lk lq lr aw ls bi"><span id="ca76" class="lt jy hi lk b fi lu lv l lw lx">cp .env.sample .env</span></pre><p id="c617" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">并编辑新的<code class="du lh li lj lk b">.env</code>文件:</p><pre class="lb lc ld le fd lp lk lq lr aw ls bi"><span id="7b2c" class="lt jy hi lk b fi lu lv l lw lx">nano .env</span></pre><p id="ad14" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您将需要输入您拥有的密钥，因此请确保它们已经保存并准备好供使用。</p><p id="187e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">完成后，保存文件。</p><p id="bb1e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要确保bot正确运行，请运行以下命令:</p><pre class="lb lc ld le fd lp lk lq lr aw ls bi"><span id="4dff" class="lt jy hi lk b fi lu lv l lw lx">node index.js</span></pre><p id="a9ce" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果一切正常，一条新的tweet将被发送到密钥所属的帐户:</p><figure class="lb lc ld le fd ij er es paragraph-image"><div class="er es ly"><img src="../Images/4ddf1fb17bc5302366a6d40a54799b07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1178/format:webp/0*_Dj4R4hrFoUckKd4.png"/></div></figure><p id="945e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果出现任何错误，请确保输入的密钥是正确的。要获得更多帮助，你可以检查<a class="ae jp" href="https://blog.shahednasser.com/simple-twitter-bot-tutorial-with-node-js/" rel="noopener ugc nofollow" target="_blank">第1部分</a>以确保一切配置正确。</p></div><div class="ab cl jq jr gp js" role="separator"><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv"/></div><div class="hb hc hd he hf"><h1 id="10cb" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">安排推文</h1><p id="60db" class="pw-post-body-paragraph iq ir hi is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hb bi translated">所以，这很好，但是机器人应该自己运行，而不是手动激活。因此，我们需要安排机器人每天运行。</p><p id="f25a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">返回到alwaysdata，单击“高级”下的计划任务。然后点击“添加计划任务”</p><figure class="lb lc ld le fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lz"><img src="../Images/923eb54bf7ffe4c1fd72add6b9614b99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*17t613ZLN7k0wSJ1.png"/></div></div></figure><p id="7373" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在第一部分中，选择“执行命令”作为任务类型，并在值类型中输入<code class="du lh li lj lk b">node ~/history-bot/index.js</code></p><figure class="lb lc ld le fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ma"><img src="../Images/8f46ffc799506f90e4a3a2e75a23e24e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*yS1XE2eYViuMlzEx.png"/></div></div></figure><p id="65d1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在Environment部分，选择您正在使用的SSH用户，并输入我们之前输入的工作目录。</p><p id="856f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后在“频率”部分，选择“每天”并输入您希望它运行的时间。请记住，这个时间是相对于您创建的应用程序的时区，默认情况下是在巴黎。要计算出应用程序所在时区的时间，请在SSH终端中运行以下命令:</p><pre class="lb lc ld le fd lp lk lq lr aw ls bi"><span id="d7d9" class="lt jy hi lk b fi lu lv l lw lx">date "+%H:%M:%S %d/%m/%y"</span></pre><p id="57e7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我建议现在测试它，在你读完本教程的几分钟后设置时间，这样你就可以检查它的工作情况</p><p id="60e2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">完成后，点击提交，并返回到网站下的网站部分，重新启动你的应用程序。</p><p id="7268" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">应该注意的是，由于我们用来创建机器人的简单性，我们总是发送我们从API接收的第一个事件。因此，如果您在创建这个任务之前运行了bot，并且发出了一条tweet，那么计划的任务将会运行，但是将会收到来自Twitter的错误消息“状态是重复的”。为了避免这种情况，请确保删除您之前测试机器人时发布的推文。</p><p id="837c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，你必须等到你选择的机器人运行的时间。一旦时间到了，给它几秒钟，检查你的帐户。如果你发现一条新的推文，那么这个机器人正在工作！</p><p id="49a3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果没有，您可以在您的应用程序中前往<code class="du lh li lj lk b">~/admin/logs/jobs/2021</code>查看日志，并在那里查看日志。确保一切配置正确。</p><p id="0b1e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，每天在你发送的时间，一条历史上的今天推文将发送到你指定的帐户！</p><figure class="lb lc ld le fd ij er es paragraph-image"><div class="er es mb"><img src="../Images/eed6db215a0e29d45546937fa96c0aec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1172/format:webp/0*KWjswK02qvE2K3_j.png"/></div></figure></div><div class="ab cl jq jr gp js" role="separator"><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv"/></div><div class="hb hc hd he hf"><h1 id="3481" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">结论</h1><p id="2d5b" class="pw-post-body-paragraph iq ir hi is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hb bi translated">在下一个教程中，我们将讨论如何转发其他用户制作的特定标签！</p></div><div class="ab cl jq jr gp js" role="separator"><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv"/></div><div class="hb hc hd he hf"><p id="2a99" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="jo">原载于2021年3月12日https://blog.shahednasser.com</em><a class="ae jp" href="https://blog.shahednasser.com/simple-twitter-bot-tutorial-with-node-part-2/" rel="noopener ugc nofollow" target="_blank"><em class="jo"/></a><em class="jo">。</em></p></div></div>    
</body>
</html>