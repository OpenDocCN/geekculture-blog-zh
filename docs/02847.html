<html>
<head>
<title>A caveat on JavaScript’s spread operator with TypeScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用TypeScript对JavaScript的spread操作符进行警告</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/a-caveat-on-javascripts-spread-operator-with-typescript-38ccc2fa000e?source=collection_archive---------34-----------------------#2021-05-26">https://medium.com/geekculture/a-caveat-on-javascripts-spread-operator-with-typescript-38ccc2fa000e?source=collection_archive---------34-----------------------#2021-05-26</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="8b20" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们从这段代码开始这篇文章。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/f7c26b8a6b25545e05b5465b1c7c9ebc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3qQPVC5_3s9taH9-yvQ8xg.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx">Function parameter overloaded</figcaption></figure><p id="7e9d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对<code class="du jt ju jv jw b">bodyMassIndex</code>的两次调用都不会在TypeScript上抛出任何警告，即使第二次调用在键<code class="du jt ju jv jw b">name</code>中有一个重载的参数。关于TypeScript的打字有一点，就是<em class="jx">没有</em>那么严格。</p><p id="7b93" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">例如，TypeScript中的合同或<code class="du jt ju jv jw b">interface</code>可以有可选属性。此外，它的具体实现允许包含比<code class="du jt ju jv jw b">interface</code>定义的更多的属性。有些人可能会说这是签订合同的错误方式，但对我来说，至少比没有合同要好。</p><p id="ed74" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">回到岗位上。</p><p id="40c3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我已经看到<a class="ae jy" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax" rel="noopener ugc nofollow" target="_blank">扩展操作符</a>在我工作中维护的一个项目中被广泛使用。通常，这在映射从应用程序外部传递的一些参数时使用。例如，来自客户端应用程序的JSON有效负载最终可能会修改数据库级别的内容。这是应该添加警告的地方。</p><p id="efcf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正如这篇文章的介绍中所强调的，在TypeScript中键入只是确保您传递的值至少满足类型。如果你的对象值中有更多的属性，没问题！嗯，技术上没有问题。从商业角度来说，你可能很难找到问题。</p><p id="f938" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">想象一下，JSON有效负载包括一些您没有预料到的其他值。假设它包含一个<code class="du jt ju jv jw b">ownerId</code>字段，指示谁可以访问资源。如果代码盲目地将有效负载分配给存储库调用，任何人现在都可以更改资源所有权。</p><p id="a184" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个例子可能是人为的，但我确实在我工作的生产级应用程序中看到了很多传播，这可能有一天会发生。</p><p id="9b16" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">那我们该怎么办？</p><p id="aa78" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我的主要建议是<strong class="ih hj">每次都要明确</strong>。当然，这是有代价的。对于维护人员来说，您的代码可能过于冗长。如果你使用多层架构，那么当在层之间传递值时，你必须是明确的；这会产生大量的映射函数。对我来说，好处大于所需的努力。</p><p id="3834" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">补救这种情况的另一种方法是每次都验证价值。对于对象，您可能会从像<a class="ae jy" href="https://www.npmjs.com/package/class-validator" rel="noopener ugc nofollow" target="_blank">类验证器</a>这样的包中获得一些帮助。这可能没有前一个冗长。所以这对你来说可能是个不错的选择。</p></div></div>    
</body>
</html>