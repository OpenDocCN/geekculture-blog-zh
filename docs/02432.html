<html>
<head>
<title>A Beginner’s Guide to Machine Learning using ML.NET in .NET5 — Part I</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">. NET5中使用NET5进行机器学习的初学者指南—第一部分</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/a-beginners-guide-to-machine-learning-using-ml-net-in-net5-part-i-ac8f8686470a?source=collection_archive---------2-----------------------#2021-05-15">https://medium.com/geekculture/a-beginners-guide-to-machine-learning-using-ml-net-in-net5-part-i-ac8f8686470a?source=collection_archive---------2-----------------------#2021-05-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="7c0d" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">构建人工智能驱动的API，在短短10分钟内分析客户反馈</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/f38edb1eeefde644cf4faab960b558ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kSw-njRsFwVlqbTElIX8oQ.jpeg"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Photo by <a class="ae jn" href="https://unsplash.com/@ikukevk?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Kevin Ku</a> on <a class="ae jn" href="https://unsplash.com/s/photos/machine-learning?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="1740" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi kk translated">无论你是刚刚开始学习机器的a.NET开发者，还是试图找出最适合你的用例的机器学习模型的专家，这篇文章都是为你准备的！</p><p id="ddea" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在这篇文章中，我们将讨论什么是ML.NET。在. NET5中使用ML.NET将机器学习添加到您的服务和应用程序有多容易</p><p id="9fac" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我们还将看到如何使用AutoML构建、训练、评估和使用机器学习模型。例如，我们将创建一个API来分析客户反馈并自动检测情绪。</p><p id="7b05" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">因此，没有进一步的原因，让我们开始吧！</p><h2 id="bff8" class="kt ku hi bd kv kw kx ky kz la lb lc ld jx le lf lg kb lh li lj kf lk ll lm ln bi translated">什么是ML。网？</h2><p id="3878" class="pw-post-body-paragraph jo jp hi jq b jr lo ij jt ju lp im jw jx lq jz ka kb lr kd ke kf ls kh ki kj hb bi translated">当谈到机器学习和数据科学时，Python被认为是一种首选语言，因为它简单并且可以访问很棒的库和框架。</p><p id="bf80" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">数据科学家喜欢使用各种ML框架(如TensorFlow、Scikit Learn等)用Python训练他们的模型；而应用程序开发人员通常会使用其他编程语言来集成和使用这些模型，如C#、Java等。</p><p id="bc07" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">因此，以无缝的方式将ML模型交付到产品中已经成为许多组织的一个痛点(由于技术和框架之间的差异)。</p><p id="5a37" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">【ML.NET<a class="ae jn" href="https://dotnet.microsoft.com/apps/machinelearning-ai/ml-dotnet" rel="noopener ugc nofollow" target="_blank">T4是微软对这个问题的回答。这是一个开源的跨平台机器学习框架，allows.NET开发者可以在。网络生态系统。</a></p><blockquote class="lt lu lv"><p id="0bdb" class="jo jp lw jq b jr js ij jt ju jv im jw lx jy jz ka ly kc kd ke lz kg kh ki kj hb bi translated">有了ML.NET，您可以立即将定制的ML模型投入生产。</p></blockquote><h2 id="6f3c" class="kt ku hi bd kv kw kx ky kz la lb lc ld jx le lf lg kb lh li lj kf lk ll lm ln bi translated">你能用ML做什么？网</h2><p id="420f" class="pw-post-body-paragraph jo jp hi jq b jr lo ij jt ju lp im jw jx lq jz ka kb lr kd ke kf ls kh ki kj hb bi translated">ML。NET允许您基于各种用例构建世界级的人工智能模型和应用程序——没有限制。查看这个<a class="ae jn" href="https://github.com/dotnet/machinelearning-samples/blob/main/README.md" rel="noopener ugc nofollow" target="_blank">库</a>，它包含了各种各样的样本，例如:</p><ul class=""><li id="1eb9" class="ma mb hi jq b jr js ju jv jx mc kb md kf me kj mf mg mh mi bi translated">情感分析</li><li id="446c" class="ma mb hi jq b jr mj ju mk jx ml kb mm kf mn kj mf mg mh mi bi translated">垃圾邮件检测</li><li id="d404" class="ma mb hi jq b jr mj ju mk jx ml kb mm kf mn kj mf mg mh mi bi translated">欺诈检测</li><li id="fc19" class="ma mb hi jq b jr mj ju mk jx ml kb mm kf mn kj mf mg mh mi bi translated">产品/电影推荐</li><li id="acba" class="ma mb hi jq b jr mj ju mk jx ml kb mm kf mn kj mf mg mh mi bi translated">价格预测</li><li id="6b15" class="ma mb hi jq b jr mj ju mk jx ml kb mm kf mn kj mf mg mh mi bi translated">销售预测</li><li id="9df4" class="ma mb hi jq b jr mj ju mk jx ml kb mm kf mn kj mf mg mh mi bi translated">异常检测(信用卡欺诈)</li><li id="c26a" class="ma mb hi jq b jr mj ju mk jx ml kb mm kf mn kj mf mg mh mi bi translated">图像分类训练</li><li id="3928" class="ma mb hi jq b jr mj ju mk jx ml kb mm kf mn kj mf mg mh mi bi translated">目标检测</li></ul><h2 id="e0fd" class="kt ku hi bd kv kw kx ky kz la lb lc ld jx le lf lg kb lh li lj kf lk ll lm ln bi translated">ML有什么特别的。网？</h2><p id="445e" class="pw-post-body-paragraph jo jp hi jq b jr lo ij jt ju lp im jw jx lq jz ka kb lr kd ke kf ls kh ki kj hb bi translated">ML。NET打包了一个强大的工具机制，叫做模型构建器。它通过自动化ML(或AutoML)简化了模型构建过程，使得开发人员只需加载数据就可以非常容易地建立和运行他们的模型。AutoML负责模型构建过程的其余部分，包括使用这些模型的代码生成。</p><p id="4f75" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">它还允许您利用流行的ML库，如TensorFlow、<a class="ae jn" href="https://github.com/onnx/onnx" rel="noopener ugc nofollow" target="_blank"> ONNX </a>，并在中使用这些模型。NET使用ML.NET。</p><h2 id="3cc1" class="kt ku hi bd kv kw kx ky kz la lb lc ld jx le lf lg kb lh li lj kf lk ll lm ln bi translated"><strong class="ak">它与ML框架相比如何？</strong></h2><p id="8023" class="pw-post-body-paragraph jo jp hi jq b jr lo ij jt ju lp im jw jx lq jz ka kb lr kd ke kf ls kh ki kj hb bi translated">ML.NET、<a class="ae jn" href="https://scikit-learn.org/" rel="noopener ugc nofollow" target="_blank"> scikit-learn </a>和<a class="ae jn" href="https://github.com/h2oai" rel="noopener ugc nofollow" target="_blank"> H20 </a>之间有一个<a class="ae jn" href="https://arxiv.org/pdf/1905.05715.pdf" rel="noopener ugc nofollow" target="_blank">有趣的评估</a>，它使用了巨大的(9GB)亚马逊评论数据集。</p><p id="9a8b" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">以下是关键要点:</p><ul class=""><li id="8ab0" class="ma mb hi jq b jr js ju jv jx mc kb md kf me kj mf mg mh mi bi translated">Scikit-learn和H20无法完成完整数据集的处理过程，遇到了内存错误。</li><li id="d6c3" class="ma mb hi jq b jr mj ju mk jx ml kb mm kf mn kj mf mg mh mi bi translated">ML。对于一个较小的子集(900MB)，NET在准确性和运行时间方面都优于这两种框架。</li></ul><h2 id="056a" class="kt ku hi bd kv kw kx ky kz la lb lc ld jx le lf lg kb lh li lj kf lk ll lm ln bi translated">如何开始使用ML？网？</h2><p id="e7b3" class="pw-post-body-paragraph jo jp hi jq b jr lo ij jt ju lp im jw jx lq jz ka kb lr kd ke kf ls kh ki kj hb bi translated">ML。NET模型生成器当前是一项预览功能，因此您需要在Visual Studio中启用它。</p><p id="6938" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">需要<a class="ae jn" href="https://visualstudio.microsoft.com/thank-you-downloading-visual-studio" rel="noopener ugc nofollow" target="_blank"> Visual Studio 2019 16.6.1 </a>或更高版本。</p><ul class=""><li id="1be5" class="ma mb hi jq b jr js ju jv jx mc kb md kf me kj mf mg mh mi bi translated">转到工具→选项→环境→预览功能</li><li id="cc37" class="ma mb hi jq b jr mj ju mk jx ml kb mm kf mn kj mf mg mh mi bi translated">确保选中“启用ML.NET模型生成器”，如下所示</li></ul><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mo"><img src="../Images/61e7e6206b41944dd64041c0843c245b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yzBblIcl_HJCXZ-N3ww-Lg.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Visual Studio — Preview Features</figcaption></figure><p id="5222" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果在“预览功能”列表中没有看到ML.NET模型生成器，您需要运行Visual Studio安装程序并安装ML.NET模型生成器组件，该组件可以在。NET核心跨平台开发工作量。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mp"><img src="../Images/73ced4a3cc16395d36bcd79656953f77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X1lnEin22i9ocYnHcC3r1w.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Visual Studio Installer —Install ML.NET Model Builder</figcaption></figure><p id="5853" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我们现在可以使用Visual Studio创建一个新的<strong class="jq hj">ASP.NET Web API项目</strong>。</p><p id="ef11" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">让我们添加一个API控制器。API将采用单个参数——customer feedback，并使用机器学习和基于正面和负面情绪的预测分数来执行情绪分析。它还会根据预测的意图返回消息。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mq"><img src="../Images/a78e90057e42f790edf2c688b2866695.png" data-original-src="https://miro.medium.com/v2/resize:fit:742/format:webp/1*eHh6HluQLN0PQlTTk2nMFg.png"/></div></figure><p id="fc89" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我们稍后将回到API部分。让我们在这个项目中加入机器学习支持。</p><p id="6310" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">添加机器学习支持</strong></p><p id="6ec0" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">右键点击项目，选择添加→机器学习。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mr"><img src="../Images/d31d5e1de9823982611ae39841f8a6f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1366/format:webp/1*DYbbyABORibFdbHowzl69w.png"/></div></figure><p id="af82" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj"> 2。选择一个场景</strong></p><p id="cef7" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这将在一个新窗口中打开模型构建器，如下所示:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ms"><img src="../Images/1c211d56bb0bc0d78c665c168bc913e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lBe2SQv8GOdDIzmCeT1V0w.png"/></div></div></figure><p id="fc0e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">因为我们正在构建一个情感分析服务，所以我们将选择“文本分类”场景。</p><p id="2d62" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj"> 3。选择培训环境</strong></p><p id="4141" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">训练环境是我们的模型将被训练的地方。在文本分类场景中，它是我们的本地机器。因此，我们只需点击“数据”进行下一步。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mt"><img src="../Images/3823d16112f76be9b45425c8f651775f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e0jYB5lcb1vBSf2MOp7eHQ.png"/></div></div></figure><p id="168d" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj"> 4。添加数据</strong></p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mu"><img src="../Images/bc7666ba5b8f504511ec9835b14315df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y-dQZ5P-yqtIxIyLMYAViQ.png"/></div></div></figure><p id="bf0b" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">为了建立一个模型，我们需要一个数据集。我们将使用<a class="ae jn" href="http://archive.ics.uci.edu/ml/datasets.php" rel="noopener ugc nofollow" target="_blank"> UC Irvine机器学习库</a>，它包含超过588个数据集，可用于各种目的。</p><p id="56a7" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">对于情感分析，我们将使用<a class="ae jn" href="http://archive.ics.uci.edu/ml/machine-learning-databases/00331/sentiment%20labelled%20sentences.zip" rel="noopener ugc nofollow" target="_blank"> UCI情感标注句子数据集ZIP文件</a>。</p><p id="0ed2" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">该数据集包含TSV文件，其中包含来自亚马逊、IMDB和Yelp的客户评论。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mv"><img src="../Images/4b2bcfb5b8b67dbf80f859c7d92ce1c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OZhPBkp_OF7vZNVUfFlDmQ.png"/></div></div></figure><p id="1d19" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">输入数据源</p><p id="1cc6" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">ML Builder允许从文件和SQL Server数据库中选择输入源。</p><p id="259b" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">因为我们有TSV文件，所以我们将选择文件作为输入数据源。</p><p id="5c6b" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我们的数据集中有三个文件，在本例中，我们将选择yelp数据集，即:yelp_labelled.txt</p><ul class=""><li id="5ebb" class="ma mb hi jq b jr js ju jv jx mc kb md kf me kj mf mg mh mi bi translated">要预测的列→我们选择“col1 ”,它包含我们要预测的输出值，例如0或1。</li><li id="5ac5" class="ma mb hi jq b jr mj ju mk jx ml kb mm kf mn kj mf mg mh mi bi translated">输入列→这些列包含用于预测的特性，在我们的例子中是col0。</li></ul><p id="27f3" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">现在，我们准备好训练我们的模型→单击“训练”进入下一步</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mw"><img src="../Images/3d647ed5519ac3f8c13c9c5eb305d7c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1172/format:webp/1*9dBlGKzXHTsouNF72dxHZA.png"/></div></figure><p id="93da" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">模型构建器使用AutoML，该工具会探索多个模型，然后选择性能最佳的模型。默认值为10秒。但是，如果您允许它训练更长的时间，AutoML将探索更多具有更广泛设置的模型。对于我们的例子，让我们训练模型120秒。</p><p id="fd1f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">点击“开始培训”，培训开始后，您会在“输出窗口”中看到培训进度，如下所示:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mx"><img src="../Images/862682fb6eef0be17ff5daec05f229b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6IlcoXDQJi0tsHDc7noZYA.png"/></div></div></figure><p id="0d9a" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">培训结束后，您将能够看到完整的总结。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es my"><img src="../Images/7c98b551fce6e236bfea62ab112d0523.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PhbpPbmc7na5rq0I5mr0iA.png"/></div></div></figure><p id="2de3" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">你可以看到，它探索了各种模型，并自动选择了最佳模型，准确率为84%。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mz"><img src="../Images/cc7f054f8c1dda0674b0965f8e60fbe9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NvB2WVlHlIKDpGqr_QCVUg.png"/></div></figure><p id="d180" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">下一步是评估各种样本输入的模型。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mo"><img src="../Images/66c6621727ca78adeca4c0aca26aeceb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AKx12SegG3cb-j4e2pyQQQ.png"/></div></div></figure><p id="f6e1" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">让我们提供一些负面反馈，看看模型是否能够检测到意图。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es na"><img src="../Images/76666bab0e3c52b1e21c7a207e341587.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*siq-CT8jF2kmWljjVM2Z_Q.png"/></div></div></figure><p id="1d60" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我们可以看到，结果包含0(88%)的机会是消极的，并显示12%的机会是积极的。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nb"><img src="../Images/3fdd48756f3a034f90365f3596fda7cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OkaC9aIQ_8BSHZVV45-88g.png"/></div></div></figure><p id="393c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在上面的例子中，我们提供了积极的反馈，模型显示有97%的机会是积极的。</p><p id="2157" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">该模型似乎运行良好，因此我们准备生成代码并将其与我们的web API集成——单击“代码”将创建消费ML模型所需的项目。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es nc"><img src="../Images/d09500f73943d41077dfc12f284c186f.png" data-original-src="https://miro.medium.com/v2/resize:fit:848/format:webp/1*a7nljrKeJZgjyHnLQEfQGw.png"/></div></figure><p id="0dab" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">它还生成了可用于测试模型的控制台应用程序。</p><p id="e828" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">让我们研究一下Program.cs文件:</p><pre class="iy iz ja jb fd nd ne nf ng aw nh bi"><span id="34f0" class="kt ku hi ne b fi ni nj l nk nl">ModelInput sampleData = new ModelInput()</span><span id="0ded" class="kt ku hi ne b fi nm nj l nk nl">{</span><span id="3699" class="kt ku hi ne b fi nm nj l nk nl">Col0 = @"This is horrible!",</span><span id="2f8e" class="kt ku hi ne b fi nm nj l nk nl">};</span><span id="f940" class="kt ku hi ne b fi nm nj l nk nl">// Make a single prediction on the sample data and print results</span><span id="051c" class="kt ku hi ne b fi nm nj l nk nl">var predictionResult = ConsumeModel.Predict(sampleData);</span><span id="b382" class="kt ku hi ne b fi nm nj l nk nl">Console.WriteLine("Using model to make single prediction -- Comparing actual Col1 with predicted Col1 from sample data...\n\n");</span><span id="9e84" class="kt ku hi ne b fi nm nj l nk nl">Console.WriteLine($"Col0: {sampleData.Col0}");</span><span id="0b75" class="kt ku hi ne b fi nm nj l nk nl">Console.WriteLine($"\n\nPredicted Col1 value {predictionResult.Prediction} \nPredicted Col1 scores: [{String.Join(",", predictionResult.Score)}]\n\n");</span><span id="4e6e" class="kt ku hi ne b fi nm nj l nk nl">Console.WriteLine("=============== End of process, hit any key to finish ===============");</span><span id="749d" class="kt ku hi ne b fi nm nj l nk nl">Console.ReadKey();</span></pre><p id="2591" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我们可以看到通过简单地调用ConsumeModel的Predict方法来消费模型是多么容易。</p><h2 id="97a1" class="kt ku hi bd kv kw kx ky kz la lb lc ld jx le lf lg kb lh li lj kf lk ll lm ln bi translated">引擎盖下是什么？</h2><p id="d664" class="pw-post-body-paragraph jo jp hi jq b jr lo ij jt ju lp im jw jx lq jz ka kb lr kd ke kf ls kh ki kj hb bi translated">让我们探索一下自动生成的项目→ ML。模型</p><p id="06f4" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">该项目包含以下文件:</p><ol class=""><li id="43fb" class="ma mb hi jq b jr js ju jv jx mc kb md kf me kj nn mg mh mi bi translated">ModelInput.cs和ModelOutput.cs是我们输入和输出数据的模型类。</li></ol><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es no"><img src="../Images/548a0eb422286a217e17095acba9843f.png" data-original-src="https://miro.medium.com/v2/resize:fit:932/format:webp/1*9CSNvEQOsHrqrY9p0zkm3Q.png"/></div></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es np"><img src="../Images/de7e214583d28861545b5d9ca1a5f19e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1262/format:webp/1*K33b8HNwbdkg0QlbR-UKOg.png"/></div></figure><p id="318c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">3.MLModel。活力</p><p id="19fd" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这个Zip文件包含了我们训练的ML模型所需的所有文件。</p><p id="42f0" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">4.消费者模型</p><pre class="iy iz ja jb fd nd ne nf ng aw nh bi"><span id="1d41" class="kt ku hi ne b fi ni nj l nk nl">public class ConsumeModel</span><span id="533d" class="kt ku hi ne b fi nm nj l nk nl">{</span><span id="d361" class="kt ku hi ne b fi nm nj l nk nl">private static Lazy&lt;PredictionEngine&lt;ModelInput, ModelOutput&gt;&gt; PredictionEngine = new Lazy&lt;PredictionEngine&lt;ModelInput, ModelOutput&gt;&gt;(CreatePredictionEngine);</span><span id="d61e" class="kt ku hi ne b fi nm nj l nk nl">// For more info on consuming ML.NET models, visit https://aka.ms/mlnet-consume</span><span id="ad88" class="kt ku hi ne b fi nm nj l nk nl">// Method for consuming model in your app</span><span id="9072" class="kt ku hi ne b fi nm nj l nk nl">public static ModelOutput Predict(ModelInput input)</span><span id="6b84" class="kt ku hi ne b fi nm nj l nk nl">{</span><span id="7068" class="kt ku hi ne b fi nm nj l nk nl">ModelOutput result = PredictionEngine.Value.Predict(input);</span><span id="c4b2" class="kt ku hi ne b fi nm nj l nk nl">return result;</span><span id="bf29" class="kt ku hi ne b fi nm nj l nk nl">}</span><span id="ba95" class="kt ku hi ne b fi nm nj l nk nl">public static PredictionEngine&lt;ModelInput, ModelOutput&gt; CreatePredictionEngine()</span><span id="c596" class="kt ku hi ne b fi nm nj l nk nl">{</span><span id="3d62" class="kt ku hi ne b fi nm nj l nk nl">// Create new MLContext</span><span id="7e1e" class="kt ku hi ne b fi nm nj l nk nl">MLContext mlContext = new MLContext();</span><span id="ed4a" class="kt ku hi ne b fi nm nj l nk nl">// Load model &amp; create prediction engine</span><span id="032a" class="kt ku hi ne b fi nm nj l nk nl">string modelPath = @"[Root_Path]\MLModel.zip";</span><span id="2894" class="kt ku hi ne b fi nm nj l nk nl">ITransformer mlModel = mlContext.Model.Load(modelPath, out var modelInputSchema);</span><span id="209e" class="kt ku hi ne b fi nm nj l nk nl">var predEngine = mlContext.Model.CreatePredictionEngine&lt;ModelInput, ModelOutput&gt;(mlModel);</span><span id="92da" class="kt ku hi ne b fi nm nj l nk nl">return predEngine;</span><span id="f4ef" class="kt ku hi ne b fi nm nj l nk nl">}</span></pre><p id="ea24" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在这个文件中，AutoML简单地创建了消费ML模型所需的方法。(您可能需要更改MLModel.zip文件所在的modelPath变量)。它使用PredictionEngine类，该类用于对预训练模型进行单次预测。</p><p id="6540" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">是时候将这个函数公开为API了，所以我们将修改我们的SentimentAnalysis服务如下:</p><pre class="iy iz ja jb fd nd ne nf ng aw nh bi"><span id="9514" class="kt ku hi ne b fi ni nj l nk nl">[HttpGet]<br/>public JsonResult  AnalyzeFeedback(string feedback)<br/>{<br/>      try<br/>     {</span><span id="e9fd" class="kt ku hi ne b fi nm nj l nk nl">      ModelInput _data = new();</span><span id="b49d" class="kt ku hi ne b fi nm nj l nk nl">      _data.Col0 = feedback;</span><span id="16ba" class="kt ku hi ne b fi nm nj l nk nl">      var predictionResult = ConsumeModel.Predict(_data);</span><span id="2f48" class="kt ku hi ne b fi nm nj l nk nl">      return Json(new  { Prediction = predictionResult.Prediction,</span><span id="a4d4" class="kt ku hi ne b fi nm nj l nk nl">     Score = predictionResult.Score  }); </span><span id="5dce" class="kt ku hi ne b fi nm nj l nk nl">}</span><span id="4402" class="kt ku hi ne b fi nm nj l nk nl">catch (Exception ex) {return Json(new<br/>{<br/>    Error="Unable to Consume Model" });<br/>}</span><span id="f484" class="kt ku hi ne b fi nm nj l nk nl">}</span></pre><p id="9297" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">让我们构建项目并运行API。我们将使用负面和正面的反馈来测试API，看看我们的服务是否能够预测情绪。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nq"><img src="../Images/09772d45d5c8eef648bad1e148a7ca39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UCYi65w5q65-rygy0qjJbw.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Sentiment Analysis API — Positive Feedback</figcaption></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nr"><img src="../Images/dc9611e05e8e5d5f740b5299f1b7ddaf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IMJ8gkaRE30bsiiRAdegqw.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Sentiment Analysis API — Negative Feedback</figcaption></figure><p id="35f7" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">就是这样！您已经成功创建了一个API，它使用机器学习来执行情感分析，以预测客户的意图。</p><p id="fe1d" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在许多商业案例中，情感分析可以增加巨大的价值。例如下面给出的:</p><ul class=""><li id="fe90" class="ma mb hi jq b jr js ju jv jx mc kb md kf me kj mf mg mh mi bi translated">客户反馈</li><li id="1bce" class="ma mb hi jq b jr mj ju mk jx ml kb mm kf mn kj mf mg mh mi bi translated">客户支持</li><li id="eceb" class="ma mb hi jq b jr mj ju mk jx ml kb mm kf mn kj mf mg mh mi bi translated">社交媒体监控</li><li id="bd7d" class="ma mb hi jq b jr mj ju mk jx ml kb mm kf mn kj mf mg mh mi bi translated">产品分析</li><li id="ce85" class="ma mb hi jq b jr mj ju mk jx ml kb mm kf mn kj mf mg mh mi bi translated">市场调查</li></ul><p id="9983" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">注意:你可以从这个<a class="ae jn" href="https://github.com/csehammad/SentimentAnalysisDemo/" rel="noopener ugc nofollow" target="_blank"> Github repo下载本文使用的完整源代码。</a></p><h2 id="d617" class="kt ku hi bd kv kw kx ky kz la lb lc ld jx le lf lg kb lh li lj kf lk ll lm ln bi translated">结论</h2><p id="e19c" class="pw-post-body-paragraph jo jp hi jq b jr lo ij jt ju lp im jw jx lq jz ka kb lr kd ke kf ls kh ki kj hb bi translated">这是对ML.NET的介绍。正如我们所见，使用C#通过ML.NET构建机器学习应用程序非常容易。有了这个框架，微软使得。犹豫是否学习python来构建机器学习应用程序的. NET开发人员——作为. NET开发人员，您可以重用您现有的技能和库。</p><p id="6426" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">话虽如此，ML.NET并没有试图让python爱好者和数据科学家远离它。事实上，它允许应用程序开发人员集成来自Python的预训练模型(例如，您可以使用PyTorch训练模型，并将其导出为ONNX格式，然后可以在中使用。NET使用ML。网)。</p><p id="ece9" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">感谢您的阅读，请继续关注第二部分(其中将讨论更高级的场景和业务案例)。</p></div></div>    
</body>
</html>