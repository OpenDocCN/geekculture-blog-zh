<html>
<head>
<title>CodeIgniter 4 tutorial part 2 ~ Rest Api CRUD Codeigniter 4</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">CodeIgniter 4教程第2部分~ Rest Api CRUD Codeigniter 4</h1>
<blockquote>原文：<a href="https://medium.com/geekculture/codeigniter-4-tutorial-part-2-rest-api-crud-654ebbf49452?source=collection_archive---------5-----------------------#2022-06-02">https://medium.com/geekculture/codeigniter-4-tutorial-part-2-rest-api-crud-654ebbf49452?source=collection_archive---------5-----------------------#2022-06-02</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/187c8a72ee49b36a40426b3f8743028a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MY-v34isV1nyFtV9MVrlyg.png"/></div></div></figure><p id="951b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你好，你们都好吗，我希望你们都永远健康和成功。这次我们将讨论使用Codeigniter 4的Rest API CRUD，之前我们讨论了使用Codeigniter 4的Rest API登录和注册。在我们继续这个讨论之前。请朋友们研究以前的教程。对于那些已经学习过之前教程的人，我们这次将继续我们的讨论。</p><p id="1f44" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将创建一个Rest Api CRUD(创建、读取、更新、删除)用户。因为我们的用户表已经创建了它。而且我们会在邮差app里测试。</p><h1 id="ec04" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">CodeIgniter 4教程第2部分~ Rest Api CRUD</h1><ul class=""><li id="4dcf" class="kn ko hi is b it kp ix kq jb kr jf ks jj kt jn ku kv kw kx bi translated">步骤1 —功能控制器</li><li id="7d77" class="kn ko hi is b it ky ix kz jb la jf lb jj lc jn ku kv kw kx bi translated">步骤2 —设置路线</li><li id="e64a" class="kn ko hi is b it ky ix kz jb la jf lb jj lc jn ku kv kw kx bi translated">步骤3-启动开发服务器</li></ul><p id="8ba0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">由于我们在上一个教程中创建了一个数据库，我们将直接为用户创建一个控制器。</p><h1 id="3001" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">步骤1 —功能控制器</h1><p id="2458" class="pw-post-body-paragraph iq ir hi is b it kp iv iw ix kq iz ja jb ld jd je jf le jh ji jj lf jl jm jn hb bi translated">我们的第一步将是在我们已经创建的用户控制器上创建一些功能。</p><ul class=""><li id="12a2" class="kn ko hi is b it iu ix iy jb lg jf lh jj li jn ku kv kw kx bi translated">显示</li></ul><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="2233" class="ls jq hi lo b fi lt lu l lv lw">public <em class="lx">function</em> show($id = null)<br/>    {<br/>        $model = new UserModel();<br/>        $data = $model-&gt;getWhere(['id' =&gt; $id])-&gt;getResult();<br/>        if($data){<br/>            return $this-&gt;respond($data);<br/>        }else{<br/>            return $this-&gt;failNotFound('No Data Found with id '.$id);<br/>        }<br/>    }</span></pre><ul class=""><li id="7e19" class="kn ko hi is b it iu ix iy jb lg jf lh jj li jn ku kv kw kx bi translated">创造</li></ul><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="c942" class="ls jq hi lo b fi lt lu l lv lw">public <em class="lx">function</em> create()<br/>    {<br/>        $model = new UserModel();<br/>        $data = [<br/>            'email' =&gt; $this-&gt;request-&gt;getVar('email'),<br/>            'password' =&gt; password_hash($this-&gt;request-&gt;getVar('password'), PASSWORD_DEFAULT)<br/>        ];<br/>        $model-&gt;insert($data);<br/>        $response = [<br/>            'status'   =&gt; 201,<br/>            'error'    =&gt; null,<br/>            'messages' =&gt; [<br/>                'success' =&gt; 'Data Saved'<br/>            ]<br/>        ];<br/>        return $this-&gt;respondCreated($response);<br/>    }</span></pre><ul class=""><li id="1e53" class="kn ko hi is b it iu ix iy jb lg jf lh jj li jn ku kv kw kx bi translated">更新</li></ul><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="a529" class="ls jq hi lo b fi lt lu l lv lw">// update product<br/>   public function update($id = null)<br/>    {<br/>        $model = new UserModel();<br/>        $input = $this-&gt;request-&gt;getRawInput();<br/>        $data = [<br/>            'email' =&gt; $this-&gt;request-&gt;getVar('email'),<br/>            'password' =&gt; password_hash($this-&gt;request-&gt;getVar('password'), PASSWORD_DEFAULT)<br/>        ];<br/>        $model-&gt;update($id, $data);<br/>        $response = [<br/>            'status'   =&gt; 200,<br/>            'error'    =&gt; null,<br/>            'messages' =&gt; [<br/>                'success' =&gt; 'Data Updated'<br/>            ]<br/>        ];<br/>        return $this-&gt;respond($response);<br/>    }</span></pre><p id="e9df" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">UserController控制器方法将按如下方式工作:</p><p id="6f33" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Index() —用于检索所有用户。<br/> create() —这个方法用于将用户信息插入到数据库表中。<br/> update() —这用于验证服务器端表单数据，并将其更新到MySQL数据库中。<br/> show() —该方法用于将单个用户信息提取到DB表中。<br/> delete() —该方法用于从MySQL数据库中删除数据。</p><h1 id="83e9" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">步骤7-设置路线</h1><p id="7223" class="pw-post-body-paragraph iq ir hi is b it kp iv iw ix kq iz ja jb ld jd je jf le jh ji jj lf jl jm jn hb bi translated">要定义路由，请访问app/Config/目录并打开Routes.php文件。然后向其中添加以下路线:</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="c98e" class="ls jq hi lo b fi lt lu l lv lw">$routes-&gt;group('users', ['filter' =&gt; 'authFilter'], <em class="lx">function</em>($routes) {<br/>        $routes-&gt;get("/", "User::index");<br/>        $routes-&gt;get("(:any)", "User::show/$1");<br/>        $routes-&gt;post("/", "User::create");<br/>        $routes-&gt;put("(:any)", "User::update/$1");<br/>        $routes-&gt;delete("(:any)", "User::delete/$1");<br/>    });</span></pre><h1 id="e987" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">步骤8-启动开发服务器</h1><p id="6177" class="pw-post-body-paragraph iq ir hi is b it kp iv iw ix kq iz ja jb ld jd je jf le jh ji jj lf jl jm jn hb bi translated">在命令提示符或终端中运行以下命令，启动codeigniter 4应用程序:</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="65b3" class="ls jq hi lo b fi lt lu l lv lw">php spark serve</span></pre><p id="efcd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">访问您的web浏览器并输入以下url:</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="dc50" class="ls jq hi lo b fi lt lu l lv lw">http://localhost/demo/<br/><br/>OR<br/><br/>http://localhost:8080/</span></pre><p id="3391" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">接下来，打开postman app调用上面创建的API，如下:</p><p id="ed0a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">1:从DB表中获取所有产品信息，您可以使用从postman获取所有用户信息api调用所有数据，如下所示:</p><figure class="lj lk ll lm fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ly"><img src="../Images/0cf688d02da3eba33a03541e6e190410.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Ed6xkf3l49L9zqRv.png"/></div></div></figure><p id="45a7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">2:如果你想获得单个用户的信息，你可以在邮差应用程序中使用以下内容:</p><figure class="lj lk ll lm fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lz"><img src="../Images/b1808f7048e5da1c325118385d9bfc70.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*VlocT1XEJsKIQb4j.png"/></div></div></figure><p id="8237" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">3:要将新的用户数据插入到DB表中，可以调用create api，如下所示:</p><figure class="lj lk ll lm fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ma"><img src="../Images/0d8462faeccfa3d7248d1c77266a2720.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*I_Q-8p8ySpAjYtpz.png"/></div></div></figure><p id="5303" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">4:要使用api将数据更新到DB表，可以调用数据修饰符info api，如下所示:</p><figure class="lj lk ll lm fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mb"><img src="../Images/39527a6cace354bb263defd7c5025469.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*bQ4LVW0GMwNLYivs.png"/></div></div></figure><p id="969e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">5:要使用codeigniter api删除用户数据，可以如下调用delete api:</p><figure class="lj lk ll lm fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mc"><img src="../Images/6564e8451164ee147e19a840855dbb36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*xKUqmU1pQ7PvIecC.png"/></div></div></figure><p id="6b8b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">使用Codeigniter 4创建CRUD API非常容易。</p><p id="c3af" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这是我这次做的教程，希望对我所有的朋友都有用。</p><p id="fa36" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">谢了。</p><h1 id="b4f5" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">其他推荐教程:</h1><p id="6371" class="pw-post-body-paragraph iq ir hi is b it kp iv iw ix kq iz ja jb ld jd je jf le jh ji jj lf jl jm jn hb bi translated"><a class="ae jo" href="https://temanngoding.com/tutorial-codeigniter-4-restful-api-jwt-authentication/" rel="noopener ugc nofollow" target="_blank"> CodeIgniter教程4第1部分~ RESTful API JWT认证</a></p><p id="d582" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae jo" href="https://temanngoding.com/tutorial-codeigniter-4-login-dan-register/" rel="noopener ugc nofollow" target="_blank"> Codeigniter 4教程~登录注册</a></p><p id="68e3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae jo" href="https://temanngoding.com/tutorial-codeigniter-4-load-more-menggunakan-ajax/" rel="noopener ugc nofollow" target="_blank"> Codeigniter 4教程~使用ajax加载更多内容</a></p><p id="7849" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">从Codeigniter URL 4 中删除公共和Index.php<a class="ae jo" href="https://temanngoding.com/menghilangkan-public-dan-index-php-dari-url-codeigniter-4/" rel="noopener ugc nofollow" target="_blank"/></p></div></div>    
</body>
</html>